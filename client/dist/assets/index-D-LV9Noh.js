function EO(e,t){for(var i=0;i<t.length;i++){const c=t[i];if(typeof c!="string"&&!Array.isArray(c)){for(const h in c)if(h!=="default"&&!(h in e)){const _=Object.getOwnPropertyDescriptor(c,h);_&&Object.defineProperty(e,h,_.get?_:{enumerable:!0,get:()=>c[h]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))c(h);new MutationObserver(h=>{for(const _ of h)if(_.type==="childList")for(const w of _.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&c(w)}).observe(document,{childList:!0,subtree:!0});function i(h){const _={};return h.integrity&&(_.integrity=h.integrity),h.referrerPolicy&&(_.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?_.credentials="include":h.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function c(h){if(h.ep)return;h.ep=!0;const _=i(h);fetch(h.href,_)}})();function S_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w3={exports:{}},vv={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zC;function CO(){if(zC)return vv;zC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(c,h,_){var w=null;if(_!==void 0&&(w=""+_),h.key!==void 0&&(w=""+h.key),"key"in h){_={};for(var n in h)n!=="key"&&(_[n]=h[n])}else _=h;return h=_.ref,{$$typeof:e,type:c,key:w,ref:h!==void 0?h:null,props:_}}return vv.Fragment=t,vv.jsx=i,vv.jsxs=i,vv}var LC;function DO(){return LC||(LC=1,w3.exports=CO()),w3.exports}var b=DO(),S3={exports:{}},_v={},T3={exports:{}},E3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C;function PO(){return $C||($C=1,function(e){function t(Re,Ge){var ze=Re.length;Re.push(Ge);e:for(;0<ze;){var ot=ze-1>>>1,Ee=Re[ot];if(0<h(Ee,Ge))Re[ot]=Ge,Re[ze]=Ee,ze=ot;else break e}}function i(Re){return Re.length===0?null:Re[0]}function c(Re){if(Re.length===0)return null;var Ge=Re[0],ze=Re.pop();if(ze!==Ge){Re[0]=ze;e:for(var ot=0,Ee=Re.length,Ke=Ee>>>1;ot<Ke;){var nt=2*(ot+1)-1,Xe=Re[nt],ut=nt+1,Pt=Re[ut];if(0>h(Xe,ze))ut<Ee&&0>h(Pt,Xe)?(Re[ot]=Pt,Re[ut]=ze,ot=ut):(Re[ot]=Xe,Re[nt]=ze,ot=nt);else if(ut<Ee&&0>h(Pt,ze))Re[ot]=Pt,Re[ut]=ze,ot=ut;else break e}}return Ge}function h(Re,Ge){var ze=Re.sortIndex-Ge.sortIndex;return ze!==0?ze:Re.id-Ge.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var _=performance;e.unstable_now=function(){return _.now()}}else{var w=Date,n=w.now();e.unstable_now=function(){return w.now()-n}}var k=[],N=[],B=1,F=null,G=3,Q=!1,te=!1,Y=!1,oe=!1,de=typeof setTimeout=="function"?setTimeout:null,ge=typeof clearTimeout=="function"?clearTimeout:null,be=typeof setImmediate<"u"?setImmediate:null;function pe(Re){for(var Ge=i(N);Ge!==null;){if(Ge.callback===null)c(N);else if(Ge.startTime<=Re)c(N),Ge.sortIndex=Ge.expirationTime,t(k,Ge);else break;Ge=i(N)}}function we(Re){if(Y=!1,pe(Re),!te)if(i(k)!==null)te=!0,ke||(ke=!0,De());else{var Ge=i(N);Ge!==null&&Le(we,Ge.startTime-Re)}}var ke=!1,Ae=-1,re=5,Te=-1;function se(){return oe?!0:!(e.unstable_now()-Te<re)}function ue(){if(oe=!1,ke){var Re=e.unstable_now();Te=Re;var Ge=!0;try{e:{te=!1,Y&&(Y=!1,ge(Ae),Ae=-1),Q=!0;var ze=G;try{t:{for(pe(Re),F=i(k);F!==null&&!(F.expirationTime>Re&&se());){var ot=F.callback;if(typeof ot=="function"){F.callback=null,G=F.priorityLevel;var Ee=ot(F.expirationTime<=Re);if(Re=e.unstable_now(),typeof Ee=="function"){F.callback=Ee,pe(Re),Ge=!0;break t}F===i(k)&&c(k),pe(Re)}else c(k);F=i(k)}if(F!==null)Ge=!0;else{var Ke=i(N);Ke!==null&&Le(we,Ke.startTime-Re),Ge=!1}}break e}finally{F=null,G=ze,Q=!1}Ge=void 0}}finally{Ge?De():ke=!1}}}var De;if(typeof be=="function")De=function(){be(ue)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,je=ce.port2;ce.port1.onmessage=ue,De=function(){je.postMessage(null)}}else De=function(){de(ue,0)};function Le(Re,Ge){Ae=de(function(){Re(e.unstable_now())},Ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Re){Re.callback=null},e.unstable_forceFrameRate=function(Re){0>Re||125<Re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<Re?Math.floor(1e3/Re):5},e.unstable_getCurrentPriorityLevel=function(){return G},e.unstable_next=function(Re){switch(G){case 1:case 2:case 3:var Ge=3;break;default:Ge=G}var ze=G;G=Ge;try{return Re()}finally{G=ze}},e.unstable_requestPaint=function(){oe=!0},e.unstable_runWithPriority=function(Re,Ge){switch(Re){case 1:case 2:case 3:case 4:case 5:break;default:Re=3}var ze=G;G=Re;try{return Ge()}finally{G=ze}},e.unstable_scheduleCallback=function(Re,Ge,ze){var ot=e.unstable_now();switch(typeof ze=="object"&&ze!==null?(ze=ze.delay,ze=typeof ze=="number"&&0<ze?ot+ze:ot):ze=ot,Re){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=ze+Ee,Re={id:B++,callback:Ge,priorityLevel:Re,startTime:ze,expirationTime:Ee,sortIndex:-1},ze>ot?(Re.sortIndex=ze,t(N,Re),i(k)===null&&Re===i(N)&&(Y?(ge(Ae),Ae=-1):Y=!0,Le(we,ze-ot))):(Re.sortIndex=Ee,t(k,Re),te||Q||(te=!0,ke||(ke=!0,De()))),Re},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(Re){var Ge=G;return function(){var ze=G;G=Ge;try{return Re.apply(this,arguments)}finally{G=ze}}}}(E3)),E3}var NC;function MO(){return NC||(NC=1,T3.exports=PO()),T3.exports}var C3={exports:{}},dn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BC;function AO(){if(BC)return dn;BC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),w=Symbol.for("react.context"),n=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),N=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),F=Symbol.iterator;function G(Ee){return Ee===null||typeof Ee!="object"?null:(Ee=F&&Ee[F]||Ee["@@iterator"],typeof Ee=="function"?Ee:null)}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},te=Object.assign,Y={};function oe(Ee,Ke,nt){this.props=Ee,this.context=Ke,this.refs=Y,this.updater=nt||Q}oe.prototype.isReactComponent={},oe.prototype.setState=function(Ee,Ke){if(typeof Ee!="object"&&typeof Ee!="function"&&Ee!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ee,Ke,"setState")},oe.prototype.forceUpdate=function(Ee){this.updater.enqueueForceUpdate(this,Ee,"forceUpdate")};function de(){}de.prototype=oe.prototype;function ge(Ee,Ke,nt){this.props=Ee,this.context=Ke,this.refs=Y,this.updater=nt||Q}var be=ge.prototype=new de;be.constructor=ge,te(be,oe.prototype),be.isPureReactComponent=!0;var pe=Array.isArray,we={H:null,A:null,T:null,S:null,V:null},ke=Object.prototype.hasOwnProperty;function Ae(Ee,Ke,nt,Xe,ut,Pt){return nt=Pt.ref,{$$typeof:e,type:Ee,key:Ke,ref:nt!==void 0?nt:null,props:Pt}}function re(Ee,Ke){return Ae(Ee.type,Ke,void 0,void 0,void 0,Ee.props)}function Te(Ee){return typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===e}function se(Ee){var Ke={"=":"=0",":":"=2"};return"$"+Ee.replace(/[=:]/g,function(nt){return Ke[nt]})}var ue=/\/+/g;function De(Ee,Ke){return typeof Ee=="object"&&Ee!==null&&Ee.key!=null?se(""+Ee.key):Ke.toString(36)}function ce(){}function je(Ee){switch(Ee.status){case"fulfilled":return Ee.value;case"rejected":throw Ee.reason;default:switch(typeof Ee.status=="string"?Ee.then(ce,ce):(Ee.status="pending",Ee.then(function(Ke){Ee.status==="pending"&&(Ee.status="fulfilled",Ee.value=Ke)},function(Ke){Ee.status==="pending"&&(Ee.status="rejected",Ee.reason=Ke)})),Ee.status){case"fulfilled":return Ee.value;case"rejected":throw Ee.reason}}throw Ee}function Le(Ee,Ke,nt,Xe,ut){var Pt=typeof Ee;(Pt==="undefined"||Pt==="boolean")&&(Ee=null);var Ct=!1;if(Ee===null)Ct=!0;else switch(Pt){case"bigint":case"string":case"number":Ct=!0;break;case"object":switch(Ee.$$typeof){case e:case t:Ct=!0;break;case B:return Ct=Ee._init,Le(Ct(Ee._payload),Ke,nt,Xe,ut)}}if(Ct)return ut=ut(Ee),Ct=Xe===""?"."+De(Ee,0):Xe,pe(ut)?(nt="",Ct!=null&&(nt=Ct.replace(ue,"$&/")+"/"),Le(ut,Ke,nt,"",function(er){return er})):ut!=null&&(Te(ut)&&(ut=re(ut,nt+(ut.key==null||Ee&&Ee.key===ut.key?"":(""+ut.key).replace(ue,"$&/")+"/")+Ct)),Ke.push(ut)),1;Ct=0;var Zt=Xe===""?".":Xe+":";if(pe(Ee))for(var Dt=0;Dt<Ee.length;Dt++)Xe=Ee[Dt],Pt=Zt+De(Xe,Dt),Ct+=Le(Xe,Ke,nt,Pt,ut);else if(Dt=G(Ee),typeof Dt=="function")for(Ee=Dt.call(Ee),Dt=0;!(Xe=Ee.next()).done;)Xe=Xe.value,Pt=Zt+De(Xe,Dt++),Ct+=Le(Xe,Ke,nt,Pt,ut);else if(Pt==="object"){if(typeof Ee.then=="function")return Le(je(Ee),Ke,nt,Xe,ut);throw Ke=String(Ee),Error("Objects are not valid as a React child (found: "+(Ke==="[object Object]"?"object with keys {"+Object.keys(Ee).join(", ")+"}":Ke)+"). If you meant to render a collection of children, use an array instead.")}return Ct}function Re(Ee,Ke,nt){if(Ee==null)return Ee;var Xe=[],ut=0;return Le(Ee,Xe,"","",function(Pt){return Ke.call(nt,Pt,ut++)}),Xe}function Ge(Ee){if(Ee._status===-1){var Ke=Ee._result;Ke=Ke(),Ke.then(function(nt){(Ee._status===0||Ee._status===-1)&&(Ee._status=1,Ee._result=nt)},function(nt){(Ee._status===0||Ee._status===-1)&&(Ee._status=2,Ee._result=nt)}),Ee._status===-1&&(Ee._status=0,Ee._result=Ke)}if(Ee._status===1)return Ee._result.default;throw Ee._result}var ze=typeof reportError=="function"?reportError:function(Ee){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ke=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ee=="object"&&Ee!==null&&typeof Ee.message=="string"?String(Ee.message):String(Ee),error:Ee});if(!window.dispatchEvent(Ke))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ee);return}console.error(Ee)};function ot(){}return dn.Children={map:Re,forEach:function(Ee,Ke,nt){Re(Ee,function(){Ke.apply(this,arguments)},nt)},count:function(Ee){var Ke=0;return Re(Ee,function(){Ke++}),Ke},toArray:function(Ee){return Re(Ee,function(Ke){return Ke})||[]},only:function(Ee){if(!Te(Ee))throw Error("React.Children.only expected to receive a single React element child.");return Ee}},dn.Component=oe,dn.Fragment=i,dn.Profiler=h,dn.PureComponent=ge,dn.StrictMode=c,dn.Suspense=k,dn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=we,dn.__COMPILER_RUNTIME={__proto__:null,c:function(Ee){return we.H.useMemoCache(Ee)}},dn.cache=function(Ee){return function(){return Ee.apply(null,arguments)}},dn.cloneElement=function(Ee,Ke,nt){if(Ee==null)throw Error("The argument must be a React element, but you passed "+Ee+".");var Xe=te({},Ee.props),ut=Ee.key,Pt=void 0;if(Ke!=null)for(Ct in Ke.ref!==void 0&&(Pt=void 0),Ke.key!==void 0&&(ut=""+Ke.key),Ke)!ke.call(Ke,Ct)||Ct==="key"||Ct==="__self"||Ct==="__source"||Ct==="ref"&&Ke.ref===void 0||(Xe[Ct]=Ke[Ct]);var Ct=arguments.length-2;if(Ct===1)Xe.children=nt;else if(1<Ct){for(var Zt=Array(Ct),Dt=0;Dt<Ct;Dt++)Zt[Dt]=arguments[Dt+2];Xe.children=Zt}return Ae(Ee.type,ut,void 0,void 0,Pt,Xe)},dn.createContext=function(Ee){return Ee={$$typeof:w,_currentValue:Ee,_currentValue2:Ee,_threadCount:0,Provider:null,Consumer:null},Ee.Provider=Ee,Ee.Consumer={$$typeof:_,_context:Ee},Ee},dn.createElement=function(Ee,Ke,nt){var Xe,ut={},Pt=null;if(Ke!=null)for(Xe in Ke.key!==void 0&&(Pt=""+Ke.key),Ke)ke.call(Ke,Xe)&&Xe!=="key"&&Xe!=="__self"&&Xe!=="__source"&&(ut[Xe]=Ke[Xe]);var Ct=arguments.length-2;if(Ct===1)ut.children=nt;else if(1<Ct){for(var Zt=Array(Ct),Dt=0;Dt<Ct;Dt++)Zt[Dt]=arguments[Dt+2];ut.children=Zt}if(Ee&&Ee.defaultProps)for(Xe in Ct=Ee.defaultProps,Ct)ut[Xe]===void 0&&(ut[Xe]=Ct[Xe]);return Ae(Ee,Pt,void 0,void 0,null,ut)},dn.createRef=function(){return{current:null}},dn.forwardRef=function(Ee){return{$$typeof:n,render:Ee}},dn.isValidElement=Te,dn.lazy=function(Ee){return{$$typeof:B,_payload:{_status:-1,_result:Ee},_init:Ge}},dn.memo=function(Ee,Ke){return{$$typeof:N,type:Ee,compare:Ke===void 0?null:Ke}},dn.startTransition=function(Ee){var Ke=we.T,nt={};we.T=nt;try{var Xe=Ee(),ut=we.S;ut!==null&&ut(nt,Xe),typeof Xe=="object"&&Xe!==null&&typeof Xe.then=="function"&&Xe.then(ot,ze)}catch(Pt){ze(Pt)}finally{we.T=Ke}},dn.unstable_useCacheRefresh=function(){return we.H.useCacheRefresh()},dn.use=function(Ee){return we.H.use(Ee)},dn.useActionState=function(Ee,Ke,nt){return we.H.useActionState(Ee,Ke,nt)},dn.useCallback=function(Ee,Ke){return we.H.useCallback(Ee,Ke)},dn.useContext=function(Ee){return we.H.useContext(Ee)},dn.useDebugValue=function(){},dn.useDeferredValue=function(Ee,Ke){return we.H.useDeferredValue(Ee,Ke)},dn.useEffect=function(Ee,Ke,nt){var Xe=we.H;if(typeof nt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Xe.useEffect(Ee,Ke)},dn.useId=function(){return we.H.useId()},dn.useImperativeHandle=function(Ee,Ke,nt){return we.H.useImperativeHandle(Ee,Ke,nt)},dn.useInsertionEffect=function(Ee,Ke){return we.H.useInsertionEffect(Ee,Ke)},dn.useLayoutEffect=function(Ee,Ke){return we.H.useLayoutEffect(Ee,Ke)},dn.useMemo=function(Ee,Ke){return we.H.useMemo(Ee,Ke)},dn.useOptimistic=function(Ee,Ke){return we.H.useOptimistic(Ee,Ke)},dn.useReducer=function(Ee,Ke,nt){return we.H.useReducer(Ee,Ke,nt)},dn.useRef=function(Ee){return we.H.useRef(Ee)},dn.useState=function(Ee){return we.H.useState(Ee)},dn.useSyncExternalStore=function(Ee,Ke,nt){return we.H.useSyncExternalStore(Ee,Ke,nt)},dn.useTransition=function(){return we.H.useTransition()},dn.version="19.1.0",dn}var jC;function s0(){return jC||(jC=1,C3.exports=AO()),C3.exports}var D3={exports:{}},Vo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OC;function kO(){if(OC)return Vo;OC=1;var e=s0();function t(k){var N="https://react.dev/errors/"+k;if(1<arguments.length){N+="?args[]="+encodeURIComponent(arguments[1]);for(var B=2;B<arguments.length;B++)N+="&args[]="+encodeURIComponent(arguments[B])}return"Minified React error #"+k+"; visit "+N+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var c={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},h=Symbol.for("react.portal");function _(k,N,B){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:F==null?null:""+F,children:k,containerInfo:N,implementation:B}}var w=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function n(k,N){if(k==="font")return"";if(typeof N=="string")return N==="use-credentials"?N:""}return Vo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,Vo.createPortal=function(k,N){var B=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N||N.nodeType!==1&&N.nodeType!==9&&N.nodeType!==11)throw Error(t(299));return _(k,N,null,B)},Vo.flushSync=function(k){var N=w.T,B=c.p;try{if(w.T=null,c.p=2,k)return k()}finally{w.T=N,c.p=B,c.d.f()}},Vo.preconnect=function(k,N){typeof k=="string"&&(N?(N=N.crossOrigin,N=typeof N=="string"?N==="use-credentials"?N:"":void 0):N=null,c.d.C(k,N))},Vo.prefetchDNS=function(k){typeof k=="string"&&c.d.D(k)},Vo.preinit=function(k,N){if(typeof k=="string"&&N&&typeof N.as=="string"){var B=N.as,F=n(B,N.crossOrigin),G=typeof N.integrity=="string"?N.integrity:void 0,Q=typeof N.fetchPriority=="string"?N.fetchPriority:void 0;B==="style"?c.d.S(k,typeof N.precedence=="string"?N.precedence:void 0,{crossOrigin:F,integrity:G,fetchPriority:Q}):B==="script"&&c.d.X(k,{crossOrigin:F,integrity:G,fetchPriority:Q,nonce:typeof N.nonce=="string"?N.nonce:void 0})}},Vo.preinitModule=function(k,N){if(typeof k=="string")if(typeof N=="object"&&N!==null){if(N.as==null||N.as==="script"){var B=n(N.as,N.crossOrigin);c.d.M(k,{crossOrigin:B,integrity:typeof N.integrity=="string"?N.integrity:void 0,nonce:typeof N.nonce=="string"?N.nonce:void 0})}}else N==null&&c.d.M(k)},Vo.preload=function(k,N){if(typeof k=="string"&&typeof N=="object"&&N!==null&&typeof N.as=="string"){var B=N.as,F=n(B,N.crossOrigin);c.d.L(k,B,{crossOrigin:F,integrity:typeof N.integrity=="string"?N.integrity:void 0,nonce:typeof N.nonce=="string"?N.nonce:void 0,type:typeof N.type=="string"?N.type:void 0,fetchPriority:typeof N.fetchPriority=="string"?N.fetchPriority:void 0,referrerPolicy:typeof N.referrerPolicy=="string"?N.referrerPolicy:void 0,imageSrcSet:typeof N.imageSrcSet=="string"?N.imageSrcSet:void 0,imageSizes:typeof N.imageSizes=="string"?N.imageSizes:void 0,media:typeof N.media=="string"?N.media:void 0})}},Vo.preloadModule=function(k,N){if(typeof k=="string")if(N){var B=n(N.as,N.crossOrigin);c.d.m(k,{as:typeof N.as=="string"&&N.as!=="script"?N.as:void 0,crossOrigin:B,integrity:typeof N.integrity=="string"?N.integrity:void 0})}else c.d.m(k)},Vo.requestFormReset=function(k){c.d.r(k)},Vo.unstable_batchedUpdates=function(k,N){return k(N)},Vo.useFormState=function(k,N,B){return w.H.useFormState(k,N,B)},Vo.useFormStatus=function(){return w.H.useHostTransitionStatus()},Vo.version="19.1.0",Vo}var FC;function DA(){if(FC)return D3.exports;FC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),D3.exports=kO(),D3.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VC;function RO(){if(VC)return _v;VC=1;var e=MO(),t=s0(),i=DA();function c(d){var y="https://react.dev/errors/"+d;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+d+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function _(d){var y=d,E=d;if(d.alternate)for(;y.return;)y=y.return;else{d=y;do y=d,(y.flags&4098)!==0&&(E=y.return),d=y.return;while(d)}return y.tag===3?E:null}function w(d){if(d.tag===13){var y=d.memoizedState;if(y===null&&(d=d.alternate,d!==null&&(y=d.memoizedState)),y!==null)return y.dehydrated}return null}function n(d){if(_(d)!==d)throw Error(c(188))}function k(d){var y=d.alternate;if(!y){if(y=_(d),y===null)throw Error(c(188));return y!==d?null:d}for(var E=d,z=y;;){var H=E.return;if(H===null)break;var ee=H.alternate;if(ee===null){if(z=H.return,z!==null){E=z;continue}break}if(H.child===ee.child){for(ee=H.child;ee;){if(ee===E)return n(H),d;if(ee===z)return n(H),y;ee=ee.sibling}throw Error(c(188))}if(E.return!==z.return)E=H,z=ee;else{for(var Pe=!1,He=H.child;He;){if(He===E){Pe=!0,E=H,z=ee;break}if(He===z){Pe=!0,z=H,E=ee;break}He=He.sibling}if(!Pe){for(He=ee.child;He;){if(He===E){Pe=!0,E=ee,z=H;break}if(He===z){Pe=!0,z=ee,E=H;break}He=He.sibling}if(!Pe)throw Error(c(189))}}if(E.alternate!==z)throw Error(c(190))}if(E.tag!==3)throw Error(c(188));return E.stateNode.current===E?d:y}function N(d){var y=d.tag;if(y===5||y===26||y===27||y===6)return d;for(d=d.child;d!==null;){if(y=N(d),y!==null)return y;d=d.sibling}return null}var B=Object.assign,F=Symbol.for("react.element"),G=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),de=Symbol.for("react.provider"),ge=Symbol.for("react.consumer"),be=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),Te=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function De(d){return d===null||typeof d!="object"?null:(d=ue&&d[ue]||d["@@iterator"],typeof d=="function"?d:null)}var ce=Symbol.for("react.client.reference");function je(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===ce?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case te:return"Fragment";case oe:return"Profiler";case Y:return"StrictMode";case we:return"Suspense";case ke:return"SuspenseList";case Te:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case Q:return"Portal";case be:return(d.displayName||"Context")+".Provider";case ge:return(d._context.displayName||"Context")+".Consumer";case pe:var y=d.render;return d=d.displayName,d||(d=y.displayName||y.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case Ae:return y=d.displayName||null,y!==null?y:je(d.type)||"Memo";case re:y=d._payload,d=d._init;try{return je(d(y))}catch{}}return null}var Le=Array.isArray,Re=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ze={pending:!1,data:null,method:null,action:null},ot=[],Ee=-1;function Ke(d){return{current:d}}function nt(d){0>Ee||(d.current=ot[Ee],ot[Ee]=null,Ee--)}function Xe(d,y){Ee++,ot[Ee]=d.current,d.current=y}var ut=Ke(null),Pt=Ke(null),Ct=Ke(null),Zt=Ke(null);function Dt(d,y){switch(Xe(Ct,y),Xe(Pt,d),Xe(ut,null),y.nodeType){case 9:case 11:d=(d=y.documentElement)&&(d=d.namespaceURI)?jx(d):0;break;default:if(d=y.tagName,y=y.namespaceURI)y=jx(y),d=Ox(y,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}nt(ut),Xe(ut,d)}function er(){nt(ut),nt(Pt),nt(Ct)}function Se(d){d.memoizedState!==null&&Xe(Zt,d);var y=ut.current,E=Ox(y,d.type);y!==E&&(Xe(Pt,d),Xe(ut,E))}function ur(d){Pt.current===d&&(nt(ut),nt(Pt)),Zt.current===d&&(nt(Zt),xg._currentValue=ze)}var Sr=Object.prototype.hasOwnProperty,yt=e.unstable_scheduleCallback,dt=e.unstable_cancelCallback,$t=e.unstable_shouldYield,or=e.unstable_requestPaint,Er=e.unstable_now,mr=e.unstable_getCurrentPriorityLevel,Pr=e.unstable_ImmediatePriority,Fr=e.unstable_UserBlockingPriority,$a=e.unstable_NormalPriority,Xr=e.unstable_LowPriority,ja=e.unstable_IdlePriority,fr=e.log,Sa=e.unstable_setDisableYieldValue,kr=null,Dr=null;function Nr(d){if(typeof fr=="function"&&Sa(d),Dr&&typeof Dr.setStrictMode=="function")try{Dr.setStrictMode(kr,d)}catch{}}var na=Math.clz32?Math.clz32:on,Sn=Math.log,Zn=Math.LN2;function on(d){return d>>>=0,d===0?32:31-(Sn(d)/Zn|0)|0}var Ha=256,qa=4194304;function Dn(d){var y=d&42;if(y!==0)return y;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function In(d,y,E){var z=d.pendingLanes;if(z===0)return 0;var H=0,ee=d.suspendedLanes,Pe=d.pingedLanes;d=d.warmLanes;var He=z&134217727;return He!==0?(z=He&~ee,z!==0?H=Dn(z):(Pe&=He,Pe!==0?H=Dn(Pe):E||(E=He&~d,E!==0&&(H=Dn(E))))):(He=z&~ee,He!==0?H=Dn(He):Pe!==0?H=Dn(Pe):E||(E=z&~d,E!==0&&(H=Dn(E)))),H===0?0:y!==0&&y!==H&&(y&ee)===0&&(ee=H&-H,E=y&-y,ee>=E||ee===32&&(E&4194048)!==0)?y:H}function jn(d,y){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&y)===0}function Wr(d,y){switch(d){case 1:case 2:case 4:case 8:case 64:return y+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yi(){var d=Ha;return Ha<<=1,(Ha&4194048)===0&&(Ha=256),d}function Ka(){var d=qa;return qa<<=1,(qa&62914560)===0&&(qa=4194304),d}function la(d){for(var y=[],E=0;31>E;E++)y.push(d);return y}function yn(d,y){d.pendingLanes|=y,y!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function Xn(d,y,E,z,H,ee){var Pe=d.pendingLanes;d.pendingLanes=E,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=E,d.entangledLanes&=E,d.errorRecoveryDisabledLanes&=E,d.shellSuspendCounter=0;var He=d.entanglements,wt=d.expirationTimes,Ht=d.hiddenUpdates;for(E=Pe&~E;0<E;){var ir=31-na(E),br=1<<ir;He[ir]=0,wt[ir]=-1;var Wt=Ht[ir];if(Wt!==null)for(Ht[ir]=null,ir=0;ir<Wt.length;ir++){var Xt=Wt[ir];Xt!==null&&(Xt.lane&=-536870913)}E&=~br}z!==0&&js(d,z,0),ee!==0&&H===0&&d.tag!==0&&(d.suspendedLanes|=ee&~(Pe&~y))}function js(d,y,E){d.pendingLanes|=y,d.suspendedLanes&=~y;var z=31-na(y);d.entangledLanes|=y,d.entanglements[z]=d.entanglements[z]|1073741824|E&4194090}function qn(d,y){var E=d.entangledLanes|=y;for(d=d.entanglements;E;){var z=31-na(E),H=1<<z;H&y|d[z]&y&&(d[z]|=y),E&=~H}}function ga(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function St(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function ye(){var d=Ge.p;return d!==0?d:(d=window.event,d===void 0?32:ty(d.type))}function Ce(d,y){var E=Ge.p;try{return Ge.p=d,y()}finally{Ge.p=E}}var Fe=Math.random().toString(36).slice(2),Ye="__reactFiber$"+Fe,Qe="__reactProps$"+Fe,ct="__reactContainer$"+Fe,bt="__reactEvents$"+Fe,ft="__reactListeners$"+Fe,pt="__reactHandles$"+Fe,At="__reactResources$"+Fe,It="__reactMarker$"+Fe;function Jt(d){delete d[Ye],delete d[Qe],delete d[bt],delete d[ft],delete d[pt]}function Gt(d){var y=d[Ye];if(y)return y;for(var E=d.parentNode;E;){if(y=E[ct]||E[Ye]){if(E=y.alternate,y.child!==null||E!==null&&E.child!==null)for(d=hb(d);d!==null;){if(E=d[Ye])return E;d=hb(d)}return y}d=E,E=d.parentNode}return null}function cr(d){if(d=d[Ye]||d[ct]){var y=d.tag;if(y===5||y===6||y===13||y===26||y===27||y===3)return d}return null}function Ur(d){var y=d.tag;if(y===5||y===26||y===27||y===6)return d.stateNode;throw Error(c(33))}function Jr(d){var y=d[At];return y||(y=d[At]={hoistableStyles:new Map,hoistableScripts:new Map}),y}function Lr(d){d[It]=!0}var Qr=new Set,Xa={};function Ca(d,y){ca(d,y),ca(d+"Capture",y)}function ca(d,y){for(Xa[d]=y,d=0;d<y.length;d++)Qr.add(y[d])}var Ya=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ja={},ei={};function _s(d){return Sr.call(ei,d)?!0:Sr.call(Ja,d)?!1:Ya.test(d)?ei[d]=!0:(Ja[d]=!0,!1)}function oi(d,y,E){if(_s(y))if(E===null)d.removeAttribute(y);else{switch(typeof E){case"undefined":case"function":case"symbol":d.removeAttribute(y);return;case"boolean":var z=y.toLowerCase().slice(0,5);if(z!=="data-"&&z!=="aria-"){d.removeAttribute(y);return}}d.setAttribute(y,""+E)}}function hi(d,y,E){if(E===null)d.removeAttribute(y);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(y);return}d.setAttribute(y,""+E)}}function As(d,y,E,z){if(z===null)d.removeAttribute(E);else{switch(typeof z){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(E);return}d.setAttributeNS(y,E,""+z)}}var So,Hf;function Vl(d){if(So===void 0)try{throw Error()}catch(E){var y=E.stack.trim().match(/\n( *(at )?)/);So=y&&y[1]||"",Hf=-1<E.stack.indexOf(`
    at`)?" (<anonymous>)":-1<E.stack.indexOf("@")?"@unknown:0:0":""}return`
`+So+d+Hf}var Ul=!1;function xd(d,y){if(!d||Ul)return"";Ul=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var z={DetermineComponentFrameRoot:function(){try{if(y){var br=function(){throw Error()};if(Object.defineProperty(br.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(br,[])}catch(Xt){var Wt=Xt}Reflect.construct(d,[],br)}else{try{br.call()}catch(Xt){Wt=Xt}d.call(br.prototype)}}else{try{throw Error()}catch(Xt){Wt=Xt}(br=d())&&typeof br.catch=="function"&&br.catch(function(){})}}catch(Xt){if(Xt&&Wt&&typeof Xt.stack=="string")return[Xt.stack,Wt.stack]}return[null,null]}};z.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var H=Object.getOwnPropertyDescriptor(z.DetermineComponentFrameRoot,"name");H&&H.configurable&&Object.defineProperty(z.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ee=z.DetermineComponentFrameRoot(),Pe=ee[0],He=ee[1];if(Pe&&He){var wt=Pe.split(`
`),Ht=He.split(`
`);for(H=z=0;z<wt.length&&!wt[z].includes("DetermineComponentFrameRoot");)z++;for(;H<Ht.length&&!Ht[H].includes("DetermineComponentFrameRoot");)H++;if(z===wt.length||H===Ht.length)for(z=wt.length-1,H=Ht.length-1;1<=z&&0<=H&&wt[z]!==Ht[H];)H--;for(;1<=z&&0<=H;z--,H--)if(wt[z]!==Ht[H]){if(z!==1||H!==1)do if(z--,H--,0>H||wt[z]!==Ht[H]){var ir=`
`+wt[z].replace(" at new "," at ");return d.displayName&&ir.includes("<anonymous>")&&(ir=ir.replace("<anonymous>",d.displayName)),ir}while(1<=z&&0<=H);break}}}finally{Ul=!1,Error.prepareStackTrace=E}return(E=d?d.displayName||d.name:"")?Vl(E):""}function vd(d){switch(d.tag){case 26:case 27:case 5:return Vl(d.type);case 16:return Vl("Lazy");case 13:return Vl("Suspense");case 19:return Vl("SuspenseList");case 0:case 15:return xd(d.type,!1);case 11:return xd(d.type.render,!1);case 1:return xd(d.type,!0);case 31:return Vl("Activity");default:return""}}function yl(d){try{var y="";do y+=vd(d),d=d.return;while(d);return y}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}function Wi(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function qf(d){var y=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function h0(d){var y=qf(d)?"checked":"value",E=Object.getOwnPropertyDescriptor(d.constructor.prototype,y),z=""+d[y];if(!d.hasOwnProperty(y)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var H=E.get,ee=E.set;return Object.defineProperty(d,y,{configurable:!0,get:function(){return H.call(this)},set:function(Pe){z=""+Pe,ee.call(this,Pe)}}),Object.defineProperty(d,y,{enumerable:E.enumerable}),{getValue:function(){return z},setValue:function(Pe){z=""+Pe},stopTracking:function(){d._valueTracker=null,delete d[y]}}}}function Du(d){d._valueTracker||(d._valueTracker=h0(d))}function _d(d){if(!d)return!1;var y=d._valueTracker;if(!y)return!0;var E=y.getValue(),z="";return d&&(z=qf(d)?d.checked?"true":"false":d.value),d=z,d!==E?(y.setValue(d),!0):!1}function Pu(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var zm=/[\n"\\]/g;function ti(d){return d.replace(zm,function(y){return"\\"+y.charCodeAt(0).toString(16)+" "})}function Ys(d,y,E,z,H,ee,Pe,He){d.name="",Pe!=null&&typeof Pe!="function"&&typeof Pe!="symbol"&&typeof Pe!="boolean"?d.type=Pe:d.removeAttribute("type"),y!=null?Pe==="number"?(y===0&&d.value===""||d.value!=y)&&(d.value=""+Wi(y)):d.value!==""+Wi(y)&&(d.value=""+Wi(y)):Pe!=="submit"&&Pe!=="reset"||d.removeAttribute("value"),y!=null?Qs(d,Pe,Wi(y)):E!=null?Qs(d,Pe,Wi(E)):z!=null&&d.removeAttribute("value"),H==null&&ee!=null&&(d.defaultChecked=!!ee),H!=null&&(d.checked=H&&typeof H!="function"&&typeof H!="symbol"),He!=null&&typeof He!="function"&&typeof He!="symbol"&&typeof He!="boolean"?d.name=""+Wi(He):d.removeAttribute("name")}function Js(d,y,E,z,H,ee,Pe,He){if(ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"&&(d.type=ee),y!=null||E!=null){if(!(ee!=="submit"&&ee!=="reset"||y!=null))return;E=E!=null?""+Wi(E):"",y=y!=null?""+Wi(y):E,He||y===d.value||(d.value=y),d.defaultValue=y}z=z??H,z=typeof z!="function"&&typeof z!="symbol"&&!!z,d.checked=He?d.checked:!!z,d.defaultChecked=!!z,Pe!=null&&typeof Pe!="function"&&typeof Pe!="symbol"&&typeof Pe!="boolean"&&(d.name=Pe)}function Qs(d,y,E){y==="number"&&Pu(d.ownerDocument)===d||d.defaultValue===""+E||(d.defaultValue=""+E)}function Os(d,y,E,z){if(d=d.options,y){y={};for(var H=0;H<E.length;H++)y["$"+E[H]]=!0;for(E=0;E<d.length;E++)H=y.hasOwnProperty("$"+d[E].value),d[E].selected!==H&&(d[E].selected=H),H&&z&&(d[E].defaultSelected=!0)}else{for(E=""+Wi(E),y=null,H=0;H<d.length;H++){if(d[H].value===E){d[H].selected=!0,z&&(d[H].defaultSelected=!0);return}y!==null||d[H].disabled||(y=d[H])}y!==null&&(y.selected=!0)}}function Th(d,y,E){if(y!=null&&(y=""+Wi(y),y!==d.value&&(d.value=y),E==null)){d.defaultValue!==y&&(d.defaultValue=y);return}d.defaultValue=E!=null?""+Wi(E):""}function bd(d,y,E,z){if(y==null){if(z!=null){if(E!=null)throw Error(c(92));if(Le(z)){if(1<z.length)throw Error(c(93));z=z[0]}E=z}E==null&&(E=""),y=E}E=Wi(y),d.defaultValue=E,z=d.textContent,z===E&&z!==""&&z!==null&&(d.value=z)}function eo(d,y){if(y){var E=d.firstChild;if(E&&E===d.lastChild&&E.nodeType===3){E.nodeValue=y;return}}d.textContent=y}var kc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Eh(d,y,E){var z=y.indexOf("--")===0;E==null||typeof E=="boolean"||E===""?z?d.setProperty(y,""):y==="float"?d.cssFloat="":d[y]="":z?d.setProperty(y,E):typeof E!="number"||E===0||kc.has(y)?y==="float"?d.cssFloat=E:d[y]=(""+E).trim():d[y]=E+"px"}function Wf(d,y,E){if(y!=null&&typeof y!="object")throw Error(c(62));if(d=d.style,E!=null){for(var z in E)!E.hasOwnProperty(z)||y!=null&&y.hasOwnProperty(z)||(z.indexOf("--")===0?d.setProperty(z,""):z==="float"?d.cssFloat="":d[z]="");for(var H in y)z=y[H],y.hasOwnProperty(H)&&E[H]!==z&&Eh(d,H,z)}else for(var ee in y)y.hasOwnProperty(ee)&&Eh(d,ee,y[ee])}function Rc(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var To=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mu(d){return Kf.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var Ra=null;function Lm(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Or=null,Ic=null;function Ia(d){var y=cr(d);if(y&&(d=y.stateNode)){var E=d[Qe]||null;e:switch(d=y.stateNode,y.type){case"input":if(Ys(d,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name),y=E.name,E.type==="radio"&&y!=null){for(E=d;E.parentNode;)E=E.parentNode;for(E=E.querySelectorAll('input[name="'+ti(""+y)+'"][type="radio"]'),y=0;y<E.length;y++){var z=E[y];if(z!==d&&z.form===d.form){var H=z[Qe]||null;if(!H)throw Error(c(90));Ys(z,H.value,H.defaultValue,H.defaultValue,H.checked,H.defaultChecked,H.type,H.name)}}for(y=0;y<E.length;y++)z=E[y],z.form===d.form&&_d(z)}break e;case"textarea":Th(d,E.value,E.defaultValue);break e;case"select":y=E.value,y!=null&&Os(d,!!E.multiple,y,!1)}}}var wd=!1;function to(d,y,E){if(wd)return d(y,E);wd=!0;try{var z=d(y);return z}finally{if(wd=!1,(Or!==null||Ic!==null)&&(bc(),Or&&(y=Or,d=Ic,Ic=Or=null,Ia(y),d)))for(y=0;y<d.length;y++)Ia(d[y])}}function Au(d,y){var E=d.stateNode;if(E===null)return null;var z=E[Qe]||null;if(z===null)return null;E=z[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(z=!z.disabled)||(d=d.type,z=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!z;break e;default:d=!1}if(d)return null;if(E&&typeof E!="function")throw Error(c(231,y,typeof E));return E}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wr=!1;if(Fs)try{var za={};Object.defineProperty(za,"passive",{get:function(){wr=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{wr=!1}var va=null,bs=null,xl=null;function Ta(){if(xl)return xl;var d,y=bs,E=y.length,z,H="value"in va?va.value:va.textContent,ee=H.length;for(d=0;d<E&&y[d]===H[d];d++);var Pe=E-d;for(z=1;z<=Pe&&y[E-z]===H[ee-z];z++);return xl=H.slice(d,1<z?1-z:void 0)}function ku(d){var y=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&y===13&&(d=13)):d=y,d===10&&(d=13),32<=d||d===13?d:0}function Eo(){return!0}function zc(){return!1}function Pn(d){function y(E,z,H,ee,Pe){this._reactName=E,this._targetInst=H,this.type=z,this.nativeEvent=ee,this.target=Pe,this.currentTarget=null;for(var He in d)d.hasOwnProperty(He)&&(E=d[He],this[He]=E?E(ee):ee[He]);return this.isDefaultPrevented=(ee.defaultPrevented!=null?ee.defaultPrevented:ee.returnValue===!1)?Eo:zc,this.isPropagationStopped=zc,this}return B(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var E=this.nativeEvent;E&&(E.preventDefault?E.preventDefault():typeof E.returnValue!="unknown"&&(E.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var E=this.nativeEvent;E&&(E.stopPropagation?E.stopPropagation():typeof E.cancelBubble!="unknown"&&(E.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),y}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ch=Pn(Qa),Gl=B({},Qa,{view:0,detail:0}),Zf=Pn(Gl),Lc,Sd,Hl,Mi=B({},Gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xf,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Hl&&(Hl&&d.type==="mousemove"?(Lc=d.screenX-Hl.screenX,Sd=d.screenY-Hl.screenY):Sd=Lc=0,Hl=d),Lc)},movementY:function(d){return"movementY"in d?d.movementY:Sd}}),Yo=Pn(Mi),Ai=B({},Mi,{dataTransfer:0}),Ru=Pn(Ai),Iu=B({},Gl,{relatedTarget:0}),wn=Pn(Iu),Jo=B({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),Co=Pn(Jo),ri=B({},Qa,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Dh=Pn(ri),Do=B({},Qa,{data:0}),vl=Pn(Do),Td={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ql(d){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(d):(d=vx[d])?!!y[d]:!1}function Xf(){return ql}var Yf=B({},Gl,{key:function(d){if(d.key){var y=Td[d.key]||d.key;if(y!=="Unidentified")return y}return d.type==="keypress"?(d=ku(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?zu[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xf,charCode:function(d){return d.type==="keypress"?ku(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?ku(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Vs=Pn(Yf),Jf=B({},Mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ph=Pn(Jf),f0=B({},Gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xf}),Mh=Pn(f0),_x=B({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),bx=Pn(_x),Ah=B({},Mi,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),kh=Pn(Ah),p0=B({},Qa,{newState:0,oldState:0}),Qo=Pn(p0),m0=[9,13,27,32],Ed=Fs&&"CompositionEvent"in window,Us=null;Fs&&"documentMode"in document&&(Us=document.documentMode);var wx=Fs&&"TextEvent"in window&&!Us,g0=Fs&&(!Ed||Us&&8<Us&&11>=Us),y0=" ",$m=!1;function Lu(d,y){switch(d){case"keyup":return m0.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ua(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Rr=!1;function Qf(d,y){switch(d){case"compositionend":return ua(y);case"keypress":return y.which!==32?null:($m=!0,y0);case"textInput":return d=y.data,d===y0&&$m?null:d;default:return null}}function ea(d,y){if(Rr)return d==="compositionend"||!Ed&&Lu(d,y)?(d=Ta(),xl=bs=va=null,Rr=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return g0&&y.locale!=="ko"?null:y.data;default:return null}}var ep={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _l(d){var y=d&&d.nodeName&&d.nodeName.toLowerCase();return y==="input"?!!ep[d.type]:y==="textarea"}function Gr(d,y,E,z){Or?Ic?Ic.push(z):Ic=[z]:Or=z,y=su(y,"onChange"),0<y.length&&(E=new Ch("onChange","change",null,E,z),d.push({event:E,listeners:y}))}var $u=null,$c=null;function Cd(d){F0(d,0)}function Wl(d){var y=Ur(d);if(_d(y))return d}function Dd(d,y){if(d==="change")return y}var Oi=!1;if(Fs){var ws;if(Fs){var Pd="oninput"in document;if(!Pd){var lr=document.createElement("div");lr.setAttribute("oninput","return;"),Pd=typeof lr.oninput=="function"}ws=Pd}else ws=!1;Oi=ws&&(!document.documentMode||9<document.documentMode)}function Rh(){$u&&($u.detachEvent("onpropertychange",bl),$c=$u=null)}function bl(d){if(d.propertyName==="value"&&Wl($c)){var y=[];Gr(y,$c,d,Lm(d)),to(Cd,y)}}function Ki(d,y,E){d==="focusin"?(Rh(),$u=y,$c=E,$u.attachEvent("onpropertychange",bl)):d==="focusout"&&Rh()}function x0(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Wl($c)}function tp(d,y){if(d==="click")return Wl(y)}function Kl(d,y){if(d==="input"||d==="change")return Wl(y)}function Md(d,y){return d===y&&(d!==0||1/d===1/y)||d!==d&&y!==y}var ki=typeof Object.is=="function"?Object.is:Md;function wl(d,y){if(ki(d,y))return!0;if(typeof d!="object"||d===null||typeof y!="object"||y===null)return!1;var E=Object.keys(d),z=Object.keys(y);if(E.length!==z.length)return!1;for(z=0;z<E.length;z++){var H=E[z];if(!Sr.call(y,H)||!ki(d[H],y[H]))return!1}return!0}function Nu(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function v0(d,y){var E=Nu(d);d=0;for(var z;E;){if(E.nodeType===3){if(z=d+E.textContent.length,d<=y&&z>=y)return{node:E,offset:y-d};d=z}e:{for(;E;){if(E.nextSibling){E=E.nextSibling;break e}E=E.parentNode}E=void 0}E=Nu(E)}}function _0(d,y){return d&&y?d===y?!0:d&&d.nodeType===3?!1:y&&y.nodeType===3?_0(d,y.parentNode):"contains"in d?d.contains(y):d.compareDocumentPosition?!!(d.compareDocumentPosition(y)&16):!1:!1}function rp(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var y=Pu(d.document);y instanceof d.HTMLIFrameElement;){try{var E=typeof y.contentWindow.location.href=="string"}catch{E=!1}if(E)d=y.contentWindow;else break;y=Pu(d.document)}return y}function ap(d){var y=d&&d.nodeName&&d.nodeName.toLowerCase();return y&&(y==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||y==="textarea"||d.contentEditable==="true")}var b0=Fs&&"documentMode"in document&&11>=document.documentMode,Bu=null,Ad=null,el=null,Nm=!1;function w0(d,y,E){var z=E.window===E?E.document:E.nodeType===9?E:E.ownerDocument;Nm||Bu==null||Bu!==Pu(z)||(z=Bu,"selectionStart"in z&&ap(z)?z={start:z.selectionStart,end:z.selectionEnd}:(z=(z.ownerDocument&&z.ownerDocument.defaultView||window).getSelection(),z={anchorNode:z.anchorNode,anchorOffset:z.anchorOffset,focusNode:z.focusNode,focusOffset:z.focusOffset}),el&&wl(el,z)||(el=z,z=su(Ad,"onSelect"),0<z.length&&(y=new Ch("onSelect","select",null,y,E),d.push({event:y,listeners:z}),y.target=Bu)))}function Zl(d,y){var E={};return E[d.toLowerCase()]=y.toLowerCase(),E["Webkit"+d]="webkit"+y,E["Moz"+d]="moz"+y,E}var Nc={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionrun:Zl("Transition","TransitionRun"),transitionstart:Zl("Transition","TransitionStart"),transitioncancel:Zl("Transition","TransitionCancel"),transitionend:Zl("Transition","TransitionEnd")},np={},ks={};Fs&&(ks=document.createElement("div").style,"AnimationEvent"in window||(delete Nc.animationend.animation,delete Nc.animationiteration.animation,delete Nc.animationstart.animation),"TransitionEvent"in window||delete Nc.transitionend.transition);function Bc(d){if(np[d])return np[d];if(!Nc[d])return d;var y=Nc[d],E;for(E in y)if(y.hasOwnProperty(E)&&E in ks)return np[d]=y[E];return d}var ip=Bc("animationend"),Ih=Bc("animationiteration"),kd=Bc("animationstart"),sp=Bc("transitionrun"),jc=Bc("transitionstart"),op=Bc("transitioncancel"),lp=Bc("transitionend"),Oc=new Map,Fc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fc.push("scrollEnd");function Rs(d,y){Oc.set(d,y),Ca(y,[d])}var Vc=new WeakMap;function Ri(d,y){if(typeof d=="object"&&d!==null){var E=Vc.get(d);return E!==void 0?E:(y={value:d,source:y,stack:yl(y)},Vc.set(d,y),y)}return{value:d,source:y,stack:yl(y)}}var Zi=[],Xl=0,zh=0;function ju(){for(var d=Xl,y=zh=Xl=0;y<d;){var E=Zi[y];Zi[y++]=null;var z=Zi[y];Zi[y++]=null;var H=Zi[y];Zi[y++]=null;var ee=Zi[y];if(Zi[y++]=null,z!==null&&H!==null){var Pe=z.pending;Pe===null?H.next=H:(H.next=Pe.next,Pe.next=H),z.pending=H}ee!==0&&Bm(E,H,ee)}}function Po(d,y,E,z){Zi[Xl++]=d,Zi[Xl++]=y,Zi[Xl++]=E,Zi[Xl++]=z,zh|=z,d.lanes|=z,d=d.alternate,d!==null&&(d.lanes|=z)}function _a(d,y,E,z){return Po(d,y,E,z),Lh(d)}function Ou(d,y){return Po(d,null,null,y),Lh(d)}function Bm(d,y,E){d.lanes|=E;var z=d.alternate;z!==null&&(z.lanes|=E);for(var H=!1,ee=d.return;ee!==null;)ee.childLanes|=E,z=ee.alternate,z!==null&&(z.childLanes|=E),ee.tag===22&&(d=ee.stateNode,d===null||d._visibility&1||(H=!0)),d=ee,ee=ee.return;return d.tag===3?(ee=d.stateNode,H&&y!==null&&(H=31-na(E),d=ee.hiddenUpdates,z=d[H],z===null?d[H]=[y]:z.push(y),y.lane=E|536870912),ee):null}function Lh(d){if(50<Qm)throw Qm=0,L0=null,Error(c(185));for(var y=d.return;y!==null;)d=y,y=d.return;return d.tag===3?d.stateNode:null}var Mo={};function S0(d,y,E,z){this.tag=d,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Va(d,y,E,z){return new S0(d,y,E,z)}function jm(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Yl(d,y){var E=d.alternate;return E===null?(E=Va(d.tag,y,d.key,d.mode),E.elementType=d.elementType,E.type=d.type,E.stateNode=d.stateNode,E.alternate=d,d.alternate=E):(E.pendingProps=y,E.type=d.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=d.flags&65011712,E.childLanes=d.childLanes,E.lanes=d.lanes,E.child=d.child,E.memoizedProps=d.memoizedProps,E.memoizedState=d.memoizedState,E.updateQueue=d.updateQueue,y=d.dependencies,E.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},E.sibling=d.sibling,E.index=d.index,E.ref=d.ref,E.refCleanup=d.refCleanup,E}function cp(d,y){d.flags&=65011714;var E=d.alternate;return E===null?(d.childLanes=0,d.lanes=y,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=E.childLanes,d.lanes=E.lanes,d.child=E.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=E.memoizedProps,d.memoizedState=E.memoizedState,d.updateQueue=E.updateQueue,d.type=E.type,y=E.dependencies,d.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),d}function Rd(d,y,E,z,H,ee){var Pe=0;if(z=d,typeof d=="function")jm(d)&&(Pe=1);else if(typeof d=="string")Pe=wb(d,E,ut.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case Te:return d=Va(31,E,y,H),d.elementType=Te,d.lanes=ee,d;case te:return Jl(E.children,H,ee,y);case Y:Pe=8,H|=24;break;case oe:return d=Va(12,E,y,H|2),d.elementType=oe,d.lanes=ee,d;case we:return d=Va(13,E,y,H),d.elementType=we,d.lanes=ee,d;case ke:return d=Va(19,E,y,H),d.elementType=ke,d.lanes=ee,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case de:case be:Pe=10;break e;case ge:Pe=9;break e;case pe:Pe=11;break e;case Ae:Pe=14;break e;case re:Pe=16,z=null;break e}Pe=29,E=Error(c(130,d===null?"null":typeof d,"")),z=null}return y=Va(Pe,E,y,H),y.elementType=d,y.type=z,y.lanes=ee,y}function Jl(d,y,E,z){return d=Va(7,d,z,y),d.lanes=E,d}function $h(d,y,E){return d=Va(6,d,null,y),d.lanes=E,d}function up(d,y,E){return y=Va(4,d.children!==null?d.children:[],d.key,y),y.lanes=E,y.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},y}var Fu=[],Id=0,Uc=null,Gc=0,ro=[],Yn=0,Ql=null,Ao=1,ko="";function ec(d,y){Fu[Id++]=Gc,Fu[Id++]=Uc,Uc=d,Gc=y}function dp(d,y,E){ro[Yn++]=Ao,ro[Yn++]=ko,ro[Yn++]=Ql,Ql=d;var z=Ao;d=ko;var H=32-na(z)-1;z&=~(1<<H),E+=1;var ee=32-na(y)+H;if(30<ee){var Pe=H-H%5;ee=(z&(1<<Pe)-1).toString(32),z>>=Pe,H-=Pe,Ao=1<<32-na(y)+H|E<<H|z,ko=ee+d}else Ao=1<<ee|E<<H|z,ko=d}function zd(d){d.return!==null&&(ec(d,1),dp(d,1,0))}function Nh(d){for(;d===Uc;)Uc=Fu[--Id],Fu[Id]=null,Gc=Fu[--Id],Fu[Id]=null;for(;d===Ql;)Ql=ro[--Yn],ro[Yn]=null,ko=ro[--Yn],ro[Yn]=null,Ao=ro[--Yn],ro[Yn]=null}var ns=null,Jn=null,Tn=!1,Hc=null,Is=!1,Om=Error(c(519));function Vu(d){var y=Error(c(418,""));throw Uu(Ri(y,d)),Om}function T0(d){var y=d.stateNode,E=d.type,z=d.memoizedProps;switch(y[Ye]=d,y[Qe]=z,E){case"dialog":gn("cancel",y),gn("close",y);break;case"iframe":case"object":case"embed":gn("load",y);break;case"video":case"audio":for(E=0;E<pf.length;E++)gn(pf[E],y);break;case"source":gn("error",y);break;case"img":case"image":case"link":gn("error",y),gn("load",y);break;case"details":gn("toggle",y);break;case"input":gn("invalid",y),Js(y,z.value,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name,!0),Du(y);break;case"select":gn("invalid",y);break;case"textarea":gn("invalid",y),bd(y,z.value,z.defaultValue,z.children),Du(y)}E=z.children,typeof E!="string"&&typeof E!="number"&&typeof E!="bigint"||y.textContent===""+E||z.suppressHydrationWarning===!0||Nx(y.textContent,E)?(z.popover!=null&&(gn("beforetoggle",y),gn("toggle",y)),z.onScroll!=null&&gn("scroll",y),z.onScrollEnd!=null&&gn("scrollend",y),z.onClick!=null&&(y.onclick=yf),y=!0):y=!1,y||Vu(d)}function E0(d){for(ns=d.return;ns;)switch(ns.tag){case 5:case 13:Is=!1;return;case 27:case 3:Is=!0;return;default:ns=ns.return}}function Bh(d){if(d!==ns)return!1;if(!Tn)return E0(d),Tn=!0,!1;var y=d.tag,E;if((E=y!==3&&y!==27)&&((E=y===5)&&(E=d.type,E=!(E!=="form"&&E!=="button")||cg(d.type,d.memoizedProps)),E=!E),E&&Jn&&Vu(d),E0(d),y===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(c(317));e:{for(d=d.nextSibling,y=0;d;){if(d.nodeType===8)if(E=d.data,E==="/$"){if(y===0){Jn=Rl(d.nextSibling);break e}y--}else E!=="$"&&E!=="$!"&&E!=="$?"||y++;d=d.nextSibling}Jn=null}}else y===27?(y=Jn,fo(d.type)?(d=Z0,Z0=null,Jn=d):Jn=y):Jn=ns?Rl(d.stateNode.nextSibling):null;return!0}function jh(){Jn=ns=null,Tn=!1}function Ld(){var d=Hc;return d!==null&&(fi===null?fi=d:fi.push.apply(fi,d),Hc=null),d}function Uu(d){Hc===null?Hc=[d]:Hc.push(d)}var Oh=Ke(null),Ro=null,Sl=null;function tc(d,y,E){Xe(Oh,y._currentValue),y._currentValue=E}function tl(d){d._currentValue=Oh.current,nt(Oh)}function $d(d,y,E){for(;d!==null;){var z=d.alternate;if((d.childLanes&y)!==y?(d.childLanes|=y,z!==null&&(z.childLanes|=y)):z!==null&&(z.childLanes&y)!==y&&(z.childLanes|=y),d===E)break;d=d.return}}function Gs(d,y,E,z){var H=d.child;for(H!==null&&(H.return=d);H!==null;){var ee=H.dependencies;if(ee!==null){var Pe=H.child;ee=ee.firstContext;e:for(;ee!==null;){var He=ee;ee=H;for(var wt=0;wt<y.length;wt++)if(He.context===y[wt]){ee.lanes|=E,He=ee.alternate,He!==null&&(He.lanes|=E),$d(ee.return,E,d),z||(Pe=null);break e}ee=He.next}}else if(H.tag===18){if(Pe=H.return,Pe===null)throw Error(c(341));Pe.lanes|=E,ee=Pe.alternate,ee!==null&&(ee.lanes|=E),$d(Pe,E,d),Pe=null}else Pe=H.child;if(Pe!==null)Pe.return=H;else for(Pe=H;Pe!==null;){if(Pe===d){Pe=null;break}if(H=Pe.sibling,H!==null){H.return=Pe.return,Pe=H;break}Pe=Pe.return}H=Pe}}function Gu(d,y,E,z){d=null;for(var H=y,ee=!1;H!==null;){if(!ee){if((H.flags&524288)!==0)ee=!0;else if((H.flags&262144)!==0)break}if(H.tag===10){var Pe=H.alternate;if(Pe===null)throw Error(c(387));if(Pe=Pe.memoizedProps,Pe!==null){var He=H.type;ki(H.pendingProps.value,Pe.value)||(d!==null?d.push(He):d=[He])}}else if(H===Zt.current){if(Pe=H.alternate,Pe===null)throw Error(c(387));Pe.memoizedState.memoizedState!==H.memoizedState.memoizedState&&(d!==null?d.push(xg):d=[xg])}H=H.return}d!==null&&Gs(y,d,E,z),y.flags|=262144}function Io(d){for(d=d.firstContext;d!==null;){if(!ki(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function rc(d){Ro=d,Sl=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function xi(d){return Fm(Ro,d)}function Hu(d,y){return Ro===null&&rc(d),Fm(d,y)}function Fm(d,y){var E=y._currentValue;if(y={context:y,memoizedValue:E,next:null},Sl===null){if(d===null)throw Error(c(308));Sl=y,d.dependencies={lanes:0,firstContext:y},d.flags|=524288}else Sl=Sl.next=y;return E}var Vm=typeof AbortController<"u"?AbortController:function(){var d=[],y=this.signal={aborted:!1,addEventListener:function(E,z){d.push(z)}};this.abort=function(){y.aborted=!0,d.forEach(function(E){return E()})}},hp=e.unstable_scheduleCallback,C0=e.unstable_NormalPriority,Ii={$$typeof:be,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qu(){return{controller:new Vm,data:new Map,refCount:0}}function Fh(d){d.refCount--,d.refCount===0&&hp(C0,function(){d.controller.abort()})}var Nd=null,Vh=0,ac=0,qc=null;function fp(d,y){if(Nd===null){var E=Nd=[];Vh=0,ac=Rx(),qc={status:"pending",value:void 0,then:function(z){E.push(z)}}}return Vh++,y.then(Bd,Bd),y}function Bd(){if(--Vh===0&&Nd!==null){qc!==null&&(qc.status="fulfilled");var d=Nd;Nd=null,ac=0,qc=null;for(var y=0;y<d.length;y++)(0,d[y])()}}function Um(d,y){var E=[],z={status:"pending",value:null,reason:null,then:function(H){E.push(H)}};return d.then(function(){z.status="fulfilled",z.value=y;for(var H=0;H<E.length;H++)(0,E[H])(y)},function(H){for(z.status="rejected",z.reason=H,H=0;H<E.length;H++)(0,E[H])(void 0)}),z}var Wu=Re.S;Re.S=function(d,y){typeof y=="object"&&y!==null&&typeof y.then=="function"&&fp(d,y),Wu!==null&&Wu(d,y)};var nc=Ke(null);function jd(){var d=nc.current;return d!==null?d:ya.pooledCache}function Ku(d,y){y===null?Xe(nc,nc.current):Xe(nc,y.pool)}function pp(){var d=jd();return d===null?null:{parent:Ii._currentValue,pool:d}}var Zu=Error(c(460)),D0=Error(c(474)),ic=Error(c(542)),Xu={then:function(){}};function Tr(d){return d=d.status,d==="fulfilled"||d==="rejected"}function Od(){}function Gm(d,y,E){switch(E=d[E],E===void 0?d.push(y):E!==y&&(y.then(Od,Od),y=E),y.status){case"fulfilled":return y.value;case"rejected":throw d=y.reason,Ir(d),d;default:if(typeof y.status=="string")y.then(Od,Od);else{if(d=ya,d!==null&&100<d.shellSuspendCounter)throw Error(c(482));d=y,d.status="pending",d.then(function(z){if(y.status==="pending"){var H=y;H.status="fulfilled",H.value=z}},function(z){if(y.status==="pending"){var H=y;H.status="rejected",H.reason=z}})}switch(y.status){case"fulfilled":return y.value;case"rejected":throw d=y.reason,Ir(d),d}throw Ss=y,Zu}}var Ss=null;function Wc(){if(Ss===null)throw Error(c(459));var d=Ss;return Ss=null,d}function Ir(d){if(d===Zu||d===ic)throw Error(c(483))}var Tl=!1;function mp(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gp(d,y){d=d.updateQueue,y.updateQueue===d&&(y.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function rl(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function El(d,y,E){var z=d.updateQueue;if(z===null)return null;if(z=z.shared,(Zr&2)!==0){var H=z.pending;return H===null?y.next=y:(y.next=H.next,H.next=y),z.pending=y,y=Lh(d),Bm(d,null,E),y}return Po(d,z,y,E),Lh(d)}function Kc(d,y,E){if(y=y.updateQueue,y!==null&&(y=y.shared,(E&4194048)!==0)){var z=y.lanes;z&=d.pendingLanes,E|=z,y.lanes=E,qn(d,E)}}function Uh(d,y){var E=d.updateQueue,z=d.alternate;if(z!==null&&(z=z.updateQueue,E===z)){var H=null,ee=null;if(E=E.firstBaseUpdate,E!==null){do{var Pe={lane:E.lane,tag:E.tag,payload:E.payload,callback:null,next:null};ee===null?H=ee=Pe:ee=ee.next=Pe,E=E.next}while(E!==null);ee===null?H=ee=y:ee=ee.next=y}else H=ee=y;E={baseState:z.baseState,firstBaseUpdate:H,lastBaseUpdate:ee,shared:z.shared,callbacks:z.callbacks},d.updateQueue=E;return}d=E.lastBaseUpdate,d===null?E.firstBaseUpdate=y:d.next=y,E.lastBaseUpdate=y}var yp=!1;function Yu(){if(yp){var d=qc;if(d!==null)throw d}}function Hs(d,y,E,z){yp=!1;var H=d.updateQueue;Tl=!1;var ee=H.firstBaseUpdate,Pe=H.lastBaseUpdate,He=H.shared.pending;if(He!==null){H.shared.pending=null;var wt=He,Ht=wt.next;wt.next=null,Pe===null?ee=Ht:Pe.next=Ht,Pe=wt;var ir=d.alternate;ir!==null&&(ir=ir.updateQueue,He=ir.lastBaseUpdate,He!==Pe&&(He===null?ir.firstBaseUpdate=Ht:He.next=Ht,ir.lastBaseUpdate=wt))}if(ee!==null){var br=H.baseState;Pe=0,ir=Ht=wt=null,He=ee;do{var Wt=He.lane&-536870913,Xt=Wt!==He.lane;if(Xt?(Pa&Wt)===Wt:(z&Wt)===Wt){Wt!==0&&Wt===ac&&(yp=!0),ir!==null&&(ir=ir.next={lane:0,tag:He.tag,payload:He.payload,callback:null,next:null});e:{var Na=d,Ma=He;Wt=y;var Kn=E;switch(Ma.tag){case 1:if(Na=Ma.payload,typeof Na=="function"){br=Na.call(Kn,br,Wt);break e}br=Na;break e;case 3:Na.flags=Na.flags&-65537|128;case 0:if(Na=Ma.payload,Wt=typeof Na=="function"?Na.call(Kn,br,Wt):Na,Wt==null)break e;br=B({},br,Wt);break e;case 2:Tl=!0}}Wt=He.callback,Wt!==null&&(d.flags|=64,Xt&&(d.flags|=8192),Xt=H.callbacks,Xt===null?H.callbacks=[Wt]:Xt.push(Wt))}else Xt={lane:Wt,tag:He.tag,payload:He.payload,callback:He.callback,next:null},ir===null?(Ht=ir=Xt,wt=br):ir=ir.next=Xt,Pe|=Wt;if(He=He.next,He===null){if(He=H.shared.pending,He===null)break;Xt=He,He=Xt.next,Xt.next=null,H.lastBaseUpdate=Xt,H.shared.pending=null}}while(!0);ir===null&&(wt=br),H.baseState=wt,H.firstBaseUpdate=Ht,H.lastBaseUpdate=ir,ee===null&&(H.shared.lanes=0),vn|=Pe,d.lanes=Pe,d.memoizedState=br}}function xp(d,y){if(typeof d!="function")throw Error(c(191,d));d.call(y)}function vp(d,y){var E=d.callbacks;if(E!==null)for(d.callbacks=null,d=0;d<E.length;d++)xp(E[d],y)}var zi=Ke(null),al=Ke(0);function Fd(d,y){d=Ga,Xe(al,d),Xe(zi,y),Ga=d|y.baseLanes}function Vd(){Xe(al,Ga),Xe(zi,zi.current)}function Zc(){Ga=al.current,nt(zi),nt(al)}var nl=0,en=null,rn=null,Ea=null,sc=!1,oc=!1,il=!1,Cl=0,Ud=0,Gd=null,Hd=0;function Wn(){throw Error(c(321))}function tr(d,y){if(y===null)return!1;for(var E=0;E<y.length&&E<d.length;E++)if(!ki(d[E],y[E]))return!1;return!0}function vr(d,y,E,z,H,ee){return nl=ee,en=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,Re.H=d===null||d.memoizedState===null?$s:eh,il=!1,ee=E(z,H),il=!1,oc&&(ee=Mn(y,E,z,H)),lc(d),ee}function lc(d){Re.H=Jc;var y=rn!==null&&rn.next!==null;if(nl=0,Ea=rn=en=null,sc=!1,Ud=0,Gd=null,y)throw Error(c(300));d===null||_i||(d=d.dependencies,d!==null&&Io(d)&&(_i=!0))}function Mn(d,y,E,z){en=d;var H=0;do{if(oc&&(Gd=null),Ud=0,oc=!1,25<=H)throw Error(c(301));if(H+=1,Ea=rn=null,d.updateQueue!=null){var ee=d.updateQueue;ee.lastEffect=null,ee.events=null,ee.stores=null,ee.memoCache!=null&&(ee.memoCache.index=0)}Re.H=A0,ee=y(E,z)}while(oc);return ee}function Tt(){var d=Re.H,y=d.useState()[0];return y=typeof y.then=="function"?Dl(y):y,d=d.useState()[0],(rn!==null?rn.memoizedState:null)!==d&&(en.flags|=1024),y}function _p(){var d=Cl!==0;return Cl=0,d}function qd(d,y,E){y.updateQueue=d.updateQueue,y.flags&=-2053,d.lanes&=~E}function Gh(d){if(sc){for(d=d.memoizedState;d!==null;){var y=d.queue;y!==null&&(y.pending=null),d=d.next}sc=!1}nl=0,Ea=rn=en=null,oc=!1,Ud=Cl=0,Gd=null}function zs(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ea===null?en.memoizedState=Ea=d:Ea=Ea.next=d,Ea}function vi(){if(rn===null){var d=en.alternate;d=d!==null?d.memoizedState:null}else d=rn.next;var y=Ea===null?en.memoizedState:Ea.next;if(y!==null)Ea=y,rn=d;else{if(d===null)throw en.alternate===null?Error(c(467)):Error(c(310));rn=d,d={memoizedState:rn.memoizedState,baseState:rn.baseState,baseQueue:rn.baseQueue,queue:rn.queue,next:null},Ea===null?en.memoizedState=Ea=d:Ea=Ea.next=d}return Ea}function bp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(d){var y=Ud;return Ud+=1,Gd===null&&(Gd=[]),d=Gm(Gd,d,y),y=en,(Ea===null?y.memoizedState:Ea.next)===null&&(y=y.alternate,Re.H=y===null||y.memoizedState===null?$s:eh),d}function wp(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Dl(d);if(d.$$typeof===be)return xi(d)}throw Error(c(438,String(d)))}function Hm(d){var y=null,E=en.updateQueue;if(E!==null&&(y=E.memoCache),y==null){var z=en.alternate;z!==null&&(z=z.updateQueue,z!==null&&(z=z.memoCache,z!=null&&(y={data:z.data.map(function(H){return H.slice()}),index:0})))}if(y==null&&(y={data:[],index:0}),E===null&&(E=bp(),en.updateQueue=E),E.memoCache=y,E=y.data[y.index],E===void 0)for(E=y.data[y.index]=Array(d),z=0;z<d;z++)E[z]=se;return y.index++,E}function Ls(d,y){return typeof y=="function"?y(d):y}function Xc(d){var y=vi();return Wd(y,rn,d)}function Wd(d,y,E){var z=d.queue;if(z===null)throw Error(c(311));z.lastRenderedReducer=E;var H=d.baseQueue,ee=z.pending;if(ee!==null){if(H!==null){var Pe=H.next;H.next=ee.next,ee.next=Pe}y.baseQueue=H=ee,z.pending=null}if(ee=d.baseState,H===null)d.memoizedState=ee;else{y=H.next;var He=Pe=null,wt=null,Ht=y,ir=!1;do{var br=Ht.lane&-536870913;if(br!==Ht.lane?(Pa&br)===br:(nl&br)===br){var Wt=Ht.revertLane;if(Wt===0)wt!==null&&(wt=wt.next={lane:0,revertLane:0,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null}),br===ac&&(ir=!0);else if((nl&Wt)===Wt){Ht=Ht.next,Wt===ac&&(ir=!0);continue}else br={lane:0,revertLane:Ht.revertLane,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null},wt===null?(He=wt=br,Pe=ee):wt=wt.next=br,en.lanes|=Wt,vn|=Wt;br=Ht.action,il&&E(ee,br),ee=Ht.hasEagerState?Ht.eagerState:E(ee,br)}else Wt={lane:br,revertLane:Ht.revertLane,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null},wt===null?(He=wt=Wt,Pe=ee):wt=wt.next=Wt,en.lanes|=br,vn|=br;Ht=Ht.next}while(Ht!==null&&Ht!==y);if(wt===null?Pe=ee:wt.next=He,!ki(ee,d.memoizedState)&&(_i=!0,ir&&(E=qc,E!==null)))throw E;d.memoizedState=ee,d.baseState=Pe,d.baseQueue=wt,z.lastRenderedState=ee}return H===null&&(z.lanes=0),[d.memoizedState,z.dispatch]}function Ju(d){var y=vi(),E=y.queue;if(E===null)throw Error(c(311));E.lastRenderedReducer=d;var z=E.dispatch,H=E.pending,ee=y.memoizedState;if(H!==null){E.pending=null;var Pe=H=H.next;do ee=d(ee,Pe.action),Pe=Pe.next;while(Pe!==H);ki(ee,y.memoizedState)||(_i=!0),y.memoizedState=ee,y.baseQueue===null&&(y.baseState=ee),E.lastRenderedState=ee}return[ee,z]}function qm(d,y,E){var z=en,H=vi(),ee=Tn;if(ee){if(E===void 0)throw Error(c(407));E=E()}else E=y();var Pe=!ki((rn||H).memoizedState,E);Pe&&(H.memoizedState=E,_i=!0),H=H.queue;var He=Lo.bind(null,z,H,d);if(ed(2048,8,He,[d]),H.getSnapshot!==y||Pe||Ea!==null&&Ea.memoizedState.tag&1){if(z.flags|=2048,fc(9,Qu(),zo.bind(null,z,H,E,y),null),ya===null)throw Error(c(349));ee||(nl&124)!==0||Hh(z,y,E)}return E}function Hh(d,y,E){d.flags|=16384,d={getSnapshot:y,value:E},y=en.updateQueue,y===null?(y=bp(),en.updateQueue=y,y.stores=[d]):(E=y.stores,E===null?y.stores=[d]:E.push(d))}function zo(d,y,E,z){y.value=E,y.getSnapshot=z,Yc(y)&&P0(d)}function Lo(d,y,E){return E(function(){Yc(y)&&P0(d)})}function Yc(d){var y=d.getSnapshot;d=d.value;try{var E=y();return!ki(d,E)}catch{return!0}}function P0(d){var y=Ou(d,2);y!==null&&jo(y,d,2)}function is(d){var y=zs();if(typeof d=="function"){var E=d;if(d=E(),il){Nr(!0);try{E()}finally{Nr(!1)}}}return y.memoizedState=y.baseState=d,y.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:d},y}function M0(d,y,E,z){return d.baseState=E,Wd(d,rn,typeof z=="function"?z:Ls)}function qh(d,y,E,z,H){if(rf(d))throw Error(c(485));if(d=y.action,d!==null){var ee={payload:H,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Pe){ee.listeners.push(Pe)}};Re.T!==null?E(!0):ee.isTransition=!1,z(ee),E=y.pending,E===null?(ee.next=y.pending=ee,xn(y,ee)):(ee.next=E.next,y.pending=E.next=ee)}}function xn(d,y){var E=y.action,z=y.payload,H=d.state;if(y.isTransition){var ee=Re.T,Pe={};Re.T=Pe;try{var He=E(H,z),wt=Re.S;wt!==null&&wt(Pe,He),Oa(d,y,He)}catch(Ht){ao(d,y,Ht)}finally{Re.T=ee}}else try{ee=E(H,z),Oa(d,y,ee)}catch(Ht){ao(d,y,Ht)}}function Oa(d,y,E){E!==null&&typeof E=="object"&&typeof E.then=="function"?E.then(function(z){Wh(d,y,z)},function(z){return ao(d,y,z)}):Wh(d,y,E)}function Wh(d,y,E){y.status="fulfilled",y.value=E,Kd(y),d.state=E,y=d.pending,y!==null&&(E=y.next,E===y?d.pending=null:(E=E.next,y.next=E,xn(d,E)))}function ao(d,y,E){var z=d.pending;if(d.pending=null,z!==null){z=z.next;do y.status="rejected",y.reason=E,Kd(y),y=y.next;while(y!==z)}d.action=null}function Kd(d){d=d.listeners;for(var y=0;y<d.length;y++)(0,d[y])()}function cc(d,y){return y}function Sp(d,y){if(Tn){var E=ya.formState;if(E!==null){e:{var z=en;if(Tn){if(Jn){t:{for(var H=Jn,ee=Is;H.nodeType!==8;){if(!ee){H=null;break t}if(H=Rl(H.nextSibling),H===null){H=null;break t}}ee=H.data,H=ee==="F!"||ee==="F"?H:null}if(H){Jn=Rl(H.nextSibling),z=H.data==="F!";break e}}Vu(z)}z=!1}z&&(y=E[0])}}return E=zs(),E.memoizedState=E.baseState=y,z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:y},E.queue=z,E=Km.bind(null,en,z),z.dispatch=E,z=is(!1),ee=Ap.bind(null,en,!1,z.queue),z=zs(),H={state:y,dispatch:null,action:d,pending:null},z.queue=H,E=qh.bind(null,en,H,ee,E),H.dispatch=E,z.memoizedState=d,[y,E,!1]}function no(d){var y=vi();return uc(y,rn,d)}function uc(d,y,E){if(y=Wd(d,y,cc)[0],d=Xc(Ls)[0],typeof y=="object"&&y!==null&&typeof y.then=="function")try{var z=Dl(y)}catch(Pe){throw Pe===Zu?ic:Pe}else z=y;y=vi();var H=y.queue,ee=H.dispatch;return E!==y.memoizedState&&(en.flags|=2048,fc(9,Qu(),dc.bind(null,H,E),null)),[z,ee,d]}function dc(d,y){d.action=y}function hc(d){var y=vi(),E=rn;if(E!==null)return uc(y,E,d);vi(),y=y.memoizedState,E=vi();var z=E.queue.dispatch;return E.memoizedState=d,[y,z,!1]}function fc(d,y,E,z){return d={tag:d,create:E,deps:z,inst:y,next:null},y=en.updateQueue,y===null&&(y=bp(),en.updateQueue=y),E=y.lastEffect,E===null?y.lastEffect=d.next=d:(z=E.next,E.next=d,d.next=z,y.lastEffect=d),d}function Qu(){return{destroy:void 0,resource:void 0}}function Tp(){return vi().memoizedState}function Zd(d,y,E,z){var H=zs();z=z===void 0?null:z,en.flags|=d,H.memoizedState=fc(1|y,Qu(),E,z)}function ed(d,y,E,z){var H=vi();z=z===void 0?null:z;var ee=H.memoizedState.inst;rn!==null&&z!==null&&tr(z,rn.memoizedState.deps)?H.memoizedState=fc(y,ee,E,z):(en.flags|=d,H.memoizedState=fc(1|y,ee,E,z))}function pc(d,y){Zd(8390656,8,d,y)}function Ep(d,y){ed(2048,8,d,y)}function Kh(d,y){return ed(4,2,d,y)}function Zh(d,y){return ed(4,4,d,y)}function Cp(d,y){if(typeof y=="function"){d=d();var E=y(d);return function(){typeof E=="function"?E():y(null)}}if(y!=null)return d=d(),y.current=d,function(){y.current=null}}function Fi(d,y,E){E=E!=null?E.concat([d]):null,ed(4,4,Cp.bind(null,y,d),E)}function Xh(){}function Yh(d,y){var E=vi();y=y===void 0?null:y;var z=E.memoizedState;return y!==null&&tr(y,z[1])?z[0]:(E.memoizedState=[d,y],d)}function td(d,y){var E=vi();y=y===void 0?null:y;var z=E.memoizedState;if(y!==null&&tr(y,z[1]))return z[0];if(z=d(),il){Nr(!0);try{d()}finally{Nr(!1)}}return E.memoizedState=[z,y],z}function Ts(d,y,E){return E===void 0||(nl&1073741824)!==0?d.memoizedState=y:(d.memoizedState=E,d=Tx(),en.lanes|=d,vn|=d,E)}function Jh(d,y,E,z){return ki(E,y)?E:zi.current!==null?(d=Ts(d,E,z),ki(d,y)||(_i=!0),d):(nl&42)===0?(_i=!0,d.memoizedState=E):(d=Tx(),en.lanes|=d,vn|=d,y)}function Dp(d,y,E,z,H){var ee=Ge.p;Ge.p=ee!==0&&8>ee?ee:8;var Pe=Re.T,He={};Re.T=He,Ap(d,!1,y,E);try{var wt=H(),Ht=Re.S;if(Ht!==null&&Ht(He,wt),wt!==null&&typeof wt=="object"&&typeof wt.then=="function"){var ir=Um(wt,z);Jd(d,y,ir,Bo(d))}else Jd(d,y,z,Bo(d))}catch(br){Jd(d,y,{then:function(){},status:"rejected",reason:br},Bo())}finally{Ge.p=ee,Re.T=Pe}}function Wm(){}function mc(d,y,E,z){if(d.tag!==5)throw Error(c(476));var H=Xd(d).queue;Dp(d,H,y,ze,E===null?Wm:function(){return Qh(d),E(z)})}function Xd(d){var y=d.memoizedState;if(y!==null)return y;y={memoizedState:ze,baseState:ze,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:ze},next:null};var E={};return y.next={memoizedState:E,baseState:E,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:E},next:null},d.memoizedState=y,d=d.alternate,d!==null&&(d.memoizedState=y),y}function Qh(d){var y=Xd(d).next.queue;Jd(d,y,{},Bo())}function ef(){return xi(xg)}function Yd(){return vi().memoizedState}function Pp(){return vi().memoizedState}function Mp(d){for(var y=d.return;y!==null;){switch(y.tag){case 24:case 3:var E=Bo();d=rl(E);var z=El(y,d,E);z!==null&&(jo(z,y,E),Kc(z,y,E)),y={cache:qu()},d.payload=y;return}y=y.return}}function tf(d,y,E){var z=Bo();E={lane:z,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null},rf(d)?Zm(y,E):(E=_a(d,y,E,z),E!==null&&(jo(E,d,z),Qd(E,y,z)))}function Km(d,y,E){var z=Bo();Jd(d,y,E,z)}function Jd(d,y,E,z){var H={lane:z,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null};if(rf(d))Zm(y,H);else{var ee=d.alternate;if(d.lanes===0&&(ee===null||ee.lanes===0)&&(ee=y.lastRenderedReducer,ee!==null))try{var Pe=y.lastRenderedState,He=ee(Pe,E);if(H.hasEagerState=!0,H.eagerState=He,ki(He,Pe))return Po(d,y,H,0),ya===null&&ju(),!1}catch{}finally{}if(E=_a(d,y,H,z),E!==null)return jo(E,d,z),Qd(E,y,z),!0}return!1}function Ap(d,y,E,z){if(z={lane:2,revertLane:Rx(),action:z,hasEagerState:!1,eagerState:null,next:null},rf(d)){if(y)throw Error(c(479))}else y=_a(d,E,z,2),y!==null&&jo(y,d,2)}function rf(d){var y=d.alternate;return d===en||y!==null&&y===en}function Zm(d,y){oc=sc=!0;var E=d.pending;E===null?y.next=y:(y.next=E.next,E.next=y),d.pending=y}function Qd(d,y,E){if((E&4194048)!==0){var z=y.lanes;z&=d.pendingLanes,E|=z,y.lanes=E,qn(d,E)}}var Jc={readContext:xi,use:wp,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useLayoutEffect:Wn,useInsertionEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useSyncExternalStore:Wn,useId:Wn,useHostTransitionStatus:Wn,useFormState:Wn,useActionState:Wn,useOptimistic:Wn,useMemoCache:Wn,useCacheRefresh:Wn},$s={readContext:xi,use:wp,useCallback:function(d,y){return zs().memoizedState=[d,y===void 0?null:y],d},useContext:xi,useEffect:pc,useImperativeHandle:function(d,y,E){E=E!=null?E.concat([d]):null,Zd(4194308,4,Cp.bind(null,y,d),E)},useLayoutEffect:function(d,y){return Zd(4194308,4,d,y)},useInsertionEffect:function(d,y){Zd(4,2,d,y)},useMemo:function(d,y){var E=zs();y=y===void 0?null:y;var z=d();if(il){Nr(!0);try{d()}finally{Nr(!1)}}return E.memoizedState=[z,y],z},useReducer:function(d,y,E){var z=zs();if(E!==void 0){var H=E(y);if(il){Nr(!0);try{E(y)}finally{Nr(!1)}}}else H=y;return z.memoizedState=z.baseState=H,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:H},z.queue=d,d=d.dispatch=tf.bind(null,en,d),[z.memoizedState,d]},useRef:function(d){var y=zs();return d={current:d},y.memoizedState=d},useState:function(d){d=is(d);var y=d.queue,E=Km.bind(null,en,y);return y.dispatch=E,[d.memoizedState,E]},useDebugValue:Xh,useDeferredValue:function(d,y){var E=zs();return Ts(E,d,y)},useTransition:function(){var d=is(!1);return d=Dp.bind(null,en,d.queue,!0,!1),zs().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,y,E){var z=en,H=zs();if(Tn){if(E===void 0)throw Error(c(407));E=E()}else{if(E=y(),ya===null)throw Error(c(349));(Pa&124)!==0||Hh(z,y,E)}H.memoizedState=E;var ee={value:E,getSnapshot:y};return H.queue=ee,pc(Lo.bind(null,z,ee,d),[d]),z.flags|=2048,fc(9,Qu(),zo.bind(null,z,ee,E,y),null),E},useId:function(){var d=zs(),y=ya.identifierPrefix;if(Tn){var E=ko,z=Ao;E=(z&~(1<<32-na(z)-1)).toString(32)+E,y=""+y+"R"+E,E=Cl++,0<E&&(y+="H"+E.toString(32)),y+=""}else E=Hd++,y=""+y+"r"+E.toString(32)+"";return d.memoizedState=y},useHostTransitionStatus:ef,useFormState:Sp,useActionState:Sp,useOptimistic:function(d){var y=zs();y.memoizedState=y.baseState=d;var E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return y.queue=E,y=Ap.bind(null,en,!0,E),E.dispatch=y,[d,y]},useMemoCache:Hm,useCacheRefresh:function(){return zs().memoizedState=Mp.bind(null,en)}},eh={readContext:xi,use:wp,useCallback:Yh,useContext:xi,useEffect:Ep,useImperativeHandle:Fi,useInsertionEffect:Kh,useLayoutEffect:Zh,useMemo:td,useReducer:Xc,useRef:Tp,useState:function(){return Xc(Ls)},useDebugValue:Xh,useDeferredValue:function(d,y){var E=vi();return Jh(E,rn.memoizedState,d,y)},useTransition:function(){var d=Xc(Ls)[0],y=vi().memoizedState;return[typeof d=="boolean"?d:Dl(d),y]},useSyncExternalStore:qm,useId:Yd,useHostTransitionStatus:ef,useFormState:no,useActionState:no,useOptimistic:function(d,y){var E=vi();return M0(E,rn,d,y)},useMemoCache:Hm,useCacheRefresh:Pp},A0={readContext:xi,use:wp,useCallback:Yh,useContext:xi,useEffect:Ep,useImperativeHandle:Fi,useInsertionEffect:Kh,useLayoutEffect:Zh,useMemo:td,useReducer:Ju,useRef:Tp,useState:function(){return Ju(Ls)},useDebugValue:Xh,useDeferredValue:function(d,y){var E=vi();return rn===null?Ts(E,d,y):Jh(E,rn.memoizedState,d,y)},useTransition:function(){var d=Ju(Ls)[0],y=vi().memoizedState;return[typeof d=="boolean"?d:Dl(d),y]},useSyncExternalStore:qm,useId:Yd,useHostTransitionStatus:ef,useFormState:hc,useActionState:hc,useOptimistic:function(d,y){var E=vi();return rn!==null?M0(E,rn,d,y):(E.baseState=d,[d,E.queue.dispatch])},useMemoCache:Hm,useCacheRefresh:Pp},rd=null,th=0;function kp(d){var y=th;return th+=1,rd===null&&(rd=[]),Gm(rd,d,y)}function ad(d,y){y=y.props.ref,d.ref=y!==void 0?y:null}function An(d,y){throw y.$$typeof===F?Error(c(525)):(d=Object.prototype.toString.call(y),Error(c(31,d==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":d)))}function af(d){var y=d._init;return y(d._payload)}function k0(d){function y(Nt,kt){if(d){var Ut=Nt.deletions;Ut===null?(Nt.deletions=[kt],Nt.flags|=16):Ut.push(kt)}}function E(Nt,kt){if(!d)return null;for(;kt!==null;)y(Nt,kt),kt=kt.sibling;return null}function z(Nt){for(var kt=new Map;Nt!==null;)Nt.key!==null?kt.set(Nt.key,Nt):kt.set(Nt.index,Nt),Nt=Nt.sibling;return kt}function H(Nt,kt){return Nt=Yl(Nt,kt),Nt.index=0,Nt.sibling=null,Nt}function ee(Nt,kt,Ut){return Nt.index=Ut,d?(Ut=Nt.alternate,Ut!==null?(Ut=Ut.index,Ut<kt?(Nt.flags|=67108866,kt):Ut):(Nt.flags|=67108866,kt)):(Nt.flags|=1048576,kt)}function Pe(Nt){return d&&Nt.alternate===null&&(Nt.flags|=67108866),Nt}function He(Nt,kt,Ut,pr){return kt===null||kt.tag!==6?(kt=$h(Ut,Nt.mode,pr),kt.return=Nt,kt):(kt=H(kt,Ut),kt.return=Nt,kt)}function wt(Nt,kt,Ut,pr){var aa=Ut.type;return aa===te?ir(Nt,kt,Ut.props.children,pr,Ut.key):kt!==null&&(kt.elementType===aa||typeof aa=="object"&&aa!==null&&aa.$$typeof===re&&af(aa)===kt.type)?(kt=H(kt,Ut.props),ad(kt,Ut),kt.return=Nt,kt):(kt=Rd(Ut.type,Ut.key,Ut.props,null,Nt.mode,pr),ad(kt,Ut),kt.return=Nt,kt)}function Ht(Nt,kt,Ut,pr){return kt===null||kt.tag!==4||kt.stateNode.containerInfo!==Ut.containerInfo||kt.stateNode.implementation!==Ut.implementation?(kt=up(Ut,Nt.mode,pr),kt.return=Nt,kt):(kt=H(kt,Ut.children||[]),kt.return=Nt,kt)}function ir(Nt,kt,Ut,pr,aa){return kt===null||kt.tag!==7?(kt=Jl(Ut,Nt.mode,pr,aa),kt.return=Nt,kt):(kt=H(kt,Ut),kt.return=Nt,kt)}function br(Nt,kt,Ut){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return kt=$h(""+kt,Nt.mode,Ut),kt.return=Nt,kt;if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case G:return Ut=Rd(kt.type,kt.key,kt.props,null,Nt.mode,Ut),ad(Ut,kt),Ut.return=Nt,Ut;case Q:return kt=up(kt,Nt.mode,Ut),kt.return=Nt,kt;case re:var pr=kt._init;return kt=pr(kt._payload),br(Nt,kt,Ut)}if(Le(kt)||De(kt))return kt=Jl(kt,Nt.mode,Ut,null),kt.return=Nt,kt;if(typeof kt.then=="function")return br(Nt,kp(kt),Ut);if(kt.$$typeof===be)return br(Nt,Hu(Nt,kt),Ut);An(Nt,kt)}return null}function Wt(Nt,kt,Ut,pr){var aa=kt!==null?kt.key:null;if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number"||typeof Ut=="bigint")return aa!==null?null:He(Nt,kt,""+Ut,pr);if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case G:return Ut.key===aa?wt(Nt,kt,Ut,pr):null;case Q:return Ut.key===aa?Ht(Nt,kt,Ut,pr):null;case re:return aa=Ut._init,Ut=aa(Ut._payload),Wt(Nt,kt,Ut,pr)}if(Le(Ut)||De(Ut))return aa!==null?null:ir(Nt,kt,Ut,pr,null);if(typeof Ut.then=="function")return Wt(Nt,kt,kp(Ut),pr);if(Ut.$$typeof===be)return Wt(Nt,kt,Hu(Nt,Ut),pr);An(Nt,Ut)}return null}function Xt(Nt,kt,Ut,pr,aa){if(typeof pr=="string"&&pr!==""||typeof pr=="number"||typeof pr=="bigint")return Nt=Nt.get(Ut)||null,He(kt,Nt,""+pr,aa);if(typeof pr=="object"&&pr!==null){switch(pr.$$typeof){case G:return Nt=Nt.get(pr.key===null?Ut:pr.key)||null,wt(kt,Nt,pr,aa);case Q:return Nt=Nt.get(pr.key===null?Ut:pr.key)||null,Ht(kt,Nt,pr,aa);case re:var ln=pr._init;return pr=ln(pr._payload),Xt(Nt,kt,Ut,pr,aa)}if(Le(pr)||De(pr))return Nt=Nt.get(Ut)||null,ir(kt,Nt,pr,aa,null);if(typeof pr.then=="function")return Xt(Nt,kt,Ut,kp(pr),aa);if(pr.$$typeof===be)return Xt(Nt,kt,Ut,Hu(kt,pr),aa);An(kt,pr)}return null}function Na(Nt,kt,Ut,pr){for(var aa=null,ln=null,da=kt,Aa=kt=0,fs=null;da!==null&&Aa<Ut.length;Aa++){da.index>Aa?(fs=da,da=null):fs=da.sibling;var tn=Wt(Nt,da,Ut[Aa],pr);if(tn===null){da===null&&(da=fs);break}d&&da&&tn.alternate===null&&y(Nt,da),kt=ee(tn,kt,Aa),ln===null?aa=tn:ln.sibling=tn,ln=tn,da=fs}if(Aa===Ut.length)return E(Nt,da),Tn&&ec(Nt,Aa),aa;if(da===null){for(;Aa<Ut.length;Aa++)da=br(Nt,Ut[Aa],pr),da!==null&&(kt=ee(da,kt,Aa),ln===null?aa=da:ln.sibling=da,ln=da);return Tn&&ec(Nt,Aa),aa}for(da=z(da);Aa<Ut.length;Aa++)fs=Xt(da,Nt,Aa,Ut[Aa],pr),fs!==null&&(d&&fs.alternate!==null&&da.delete(fs.key===null?Aa:fs.key),kt=ee(fs,kt,Aa),ln===null?aa=fs:ln.sibling=fs,ln=fs);return d&&da.forEach(function(lu){return y(Nt,lu)}),Tn&&ec(Nt,Aa),aa}function Ma(Nt,kt,Ut,pr){if(Ut==null)throw Error(c(151));for(var aa=null,ln=null,da=kt,Aa=kt=0,fs=null,tn=Ut.next();da!==null&&!tn.done;Aa++,tn=Ut.next()){da.index>Aa?(fs=da,da=null):fs=da.sibling;var lu=Wt(Nt,da,tn.value,pr);if(lu===null){da===null&&(da=fs);break}d&&da&&lu.alternate===null&&y(Nt,da),kt=ee(lu,kt,Aa),ln===null?aa=lu:ln.sibling=lu,ln=lu,da=fs}if(tn.done)return E(Nt,da),Tn&&ec(Nt,Aa),aa;if(da===null){for(;!tn.done;Aa++,tn=Ut.next())tn=br(Nt,tn.value,pr),tn!==null&&(kt=ee(tn,kt,Aa),ln===null?aa=tn:ln.sibling=tn,ln=tn);return Tn&&ec(Nt,Aa),aa}for(da=z(da);!tn.done;Aa++,tn=Ut.next())tn=Xt(da,Nt,Aa,tn.value,pr),tn!==null&&(d&&tn.alternate!==null&&da.delete(tn.key===null?Aa:tn.key),kt=ee(tn,kt,Aa),ln===null?aa=tn:ln.sibling=tn,ln=tn);return d&&da.forEach(function(Jp){return y(Nt,Jp)}),Tn&&ec(Nt,Aa),aa}function Kn(Nt,kt,Ut,pr){if(typeof Ut=="object"&&Ut!==null&&Ut.type===te&&Ut.key===null&&(Ut=Ut.props.children),typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case G:e:{for(var aa=Ut.key;kt!==null;){if(kt.key===aa){if(aa=Ut.type,aa===te){if(kt.tag===7){E(Nt,kt.sibling),pr=H(kt,Ut.props.children),pr.return=Nt,Nt=pr;break e}}else if(kt.elementType===aa||typeof aa=="object"&&aa!==null&&aa.$$typeof===re&&af(aa)===kt.type){E(Nt,kt.sibling),pr=H(kt,Ut.props),ad(pr,Ut),pr.return=Nt,Nt=pr;break e}E(Nt,kt);break}else y(Nt,kt);kt=kt.sibling}Ut.type===te?(pr=Jl(Ut.props.children,Nt.mode,pr,Ut.key),pr.return=Nt,Nt=pr):(pr=Rd(Ut.type,Ut.key,Ut.props,null,Nt.mode,pr),ad(pr,Ut),pr.return=Nt,Nt=pr)}return Pe(Nt);case Q:e:{for(aa=Ut.key;kt!==null;){if(kt.key===aa)if(kt.tag===4&&kt.stateNode.containerInfo===Ut.containerInfo&&kt.stateNode.implementation===Ut.implementation){E(Nt,kt.sibling),pr=H(kt,Ut.children||[]),pr.return=Nt,Nt=pr;break e}else{E(Nt,kt);break}else y(Nt,kt);kt=kt.sibling}pr=up(Ut,Nt.mode,pr),pr.return=Nt,Nt=pr}return Pe(Nt);case re:return aa=Ut._init,Ut=aa(Ut._payload),Kn(Nt,kt,Ut,pr)}if(Le(Ut))return Na(Nt,kt,Ut,pr);if(De(Ut)){if(aa=De(Ut),typeof aa!="function")throw Error(c(150));return Ut=aa.call(Ut),Ma(Nt,kt,Ut,pr)}if(typeof Ut.then=="function")return Kn(Nt,kt,kp(Ut),pr);if(Ut.$$typeof===be)return Kn(Nt,kt,Hu(Nt,Ut),pr);An(Nt,Ut)}return typeof Ut=="string"&&Ut!==""||typeof Ut=="number"||typeof Ut=="bigint"?(Ut=""+Ut,kt!==null&&kt.tag===6?(E(Nt,kt.sibling),pr=H(kt,Ut),pr.return=Nt,Nt=pr):(E(Nt,kt),pr=$h(Ut,Nt.mode,pr),pr.return=Nt,Nt=pr),Pe(Nt)):E(Nt,kt)}return function(Nt,kt,Ut,pr){try{th=0;var aa=Kn(Nt,kt,Ut,pr);return rd=null,aa}catch(da){if(da===Zu||da===ic)throw da;var ln=Va(29,da,null,Nt.mode);return ln.lanes=pr,ln.return=Nt,ln}finally{}}}var rh=k0(!0),Qc=k0(!1),io=Ke(null),so=null;function $o(d){var y=d.alternate;Xe(kn,kn.current&1),Xe(io,d),so===null&&(y===null||zi.current!==null||y.memoizedState!==null)&&(so=d)}function Pl(d){if(d.tag===22){if(Xe(kn,kn.current),Xe(io,d),so===null){var y=d.alternate;y!==null&&y.memoizedState!==null&&(so=d)}}else oo()}function oo(){Xe(kn,kn.current),Xe(io,io.current)}function fn(d){nt(io),so===d&&(so=null),nt(kn)}var kn=Ke(0);function ah(d){for(var y=d;y!==null;){if(y.tag===13){var E=y.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||E.data==="$?"||K0(E)))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}function nd(d,y,E,z){y=d.memoizedState,E=E(z,y),E=E==null?y:B({},y,E),d.memoizedState=E,d.lanes===0&&(d.updateQueue.baseState=E)}var Rp={enqueueSetState:function(d,y,E){d=d._reactInternals;var z=Bo(),H=rl(z);H.payload=y,E!=null&&(H.callback=E),y=El(d,H,z),y!==null&&(jo(y,d,z),Kc(y,d,z))},enqueueReplaceState:function(d,y,E){d=d._reactInternals;var z=Bo(),H=rl(z);H.tag=1,H.payload=y,E!=null&&(H.callback=E),y=El(d,H,z),y!==null&&(jo(y,d,z),Kc(y,d,z))},enqueueForceUpdate:function(d,y){d=d._reactInternals;var E=Bo(),z=rl(E);z.tag=2,y!=null&&(z.callback=y),y=El(d,z,E),y!==null&&(jo(y,d,E),Kc(y,d,E))}};function Ip(d,y,E,z,H,ee,Pe){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(z,ee,Pe):y.prototype&&y.prototype.isPureReactComponent?!wl(E,z)||!wl(H,ee):!0}function nh(d,y,E,z){d=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(E,z),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(E,z),y.state!==d&&Rp.enqueueReplaceState(y,y.state,null)}function id(d,y){var E=y;if("ref"in y){E={};for(var z in y)z!=="ref"&&(E[z]=y[z])}if(d=d.defaultProps){E===y&&(E=B({},E));for(var H in d)E[H]===void 0&&(E[H]=d[H])}return E}var zp=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function Lp(d){zp(d)}function nf(d){console.error(d)}function sd(d){zp(d)}function gc(d,y){try{var E=d.onUncaughtError;E(y.value,{componentStack:y.stack})}catch(z){setTimeout(function(){throw z})}}function Ml(d,y,E){try{var z=d.onCaughtError;z(E.value,{componentStack:E.stack,errorBoundary:y.tag===1?y.stateNode:null})}catch(H){setTimeout(function(){throw H})}}function lo(d,y,E){return E=rl(E),E.tag=3,E.payload={element:null},E.callback=function(){gc(d,y)},E}function yc(d){return d=rl(d),d.tag=3,d}function eu(d,y,E,z){var H=E.type.getDerivedStateFromError;if(typeof H=="function"){var ee=z.value;d.payload=function(){return H(ee)},d.callback=function(){Ml(y,E,z)}}var Pe=E.stateNode;Pe!==null&&typeof Pe.componentDidCatch=="function"&&(d.callback=function(){Ml(y,E,z),typeof H!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var He=z.stack;this.componentDidCatch(z.value,{componentStack:He!==null?He:""})})}function tu(d,y,E,z,H){if(E.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){if(y=E.alternate,y!==null&&Gu(y,E,H,!0),E=io.current,E!==null){switch(E.tag){case 13:return so===null?uf():E.alternate===null&&qr===0&&(qr=3),E.flags&=-257,E.flags|=65536,E.lanes=H,z===Xu?E.flags|=16384:(y=E.updateQueue,y===null?E.updateQueue=new Set([z]):y.add(z),Op(d,z,H)),!1;case 22:return E.flags|=65536,z===Xu?E.flags|=16384:(y=E.updateQueue,y===null?(y={transitions:null,markerInstances:null,retryQueue:new Set([z])},E.updateQueue=y):(E=y.retryQueue,E===null?y.retryQueue=new Set([z]):E.add(z)),Op(d,z,H)),!1}throw Error(c(435,E.tag))}return Op(d,z,H),uf(),!1}if(Tn)return y=io.current,y!==null?((y.flags&65536)===0&&(y.flags|=256),y.flags|=65536,y.lanes=H,z!==Om&&(d=Error(c(422),{cause:z}),Uu(Ri(d,E)))):(z!==Om&&(y=Error(c(423),{cause:z}),Uu(Ri(y,E))),d=d.current.alternate,d.flags|=65536,H&=-H,d.lanes|=H,z=Ri(z,E),H=lo(d.stateNode,z,H),Uh(d,H),qr!==4&&(qr=2)),!1;var ee=Error(c(520),{cause:z});if(ee=Ri(ee,E),Ji===null?Ji=[ee]:Ji.push(ee),qr!==4&&(qr=2),y===null)return!0;z=Ri(z,E),E=y;do{switch(E.tag){case 3:return E.flags|=65536,d=H&-H,E.lanes|=d,d=lo(E.stateNode,z,d),Uh(E,d),!1;case 1:if(y=E.type,ee=E.stateNode,(E.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(ds===null||!ds.has(ee))))return E.flags|=65536,H&=-H,E.lanes|=H,H=yc(H),eu(H,d,E,z),Uh(E,H),!1}E=E.return}while(E!==null);return!1}var R0=Error(c(461)),_i=!1;function ss(d,y,E,z){y.child=d===null?Qc(y,null,E,z):rh(y,d.child,E,z)}function I0(d,y,E,z,H){E=E.render;var ee=y.ref;if("ref"in z){var Pe={};for(var He in z)He!=="ref"&&(Pe[He]=z[He])}else Pe=z;return rc(y),z=vr(d,y,E,Pe,ee,H),He=_p(),d!==null&&!_i?(qd(d,y,H),ls(d,y,H)):(Tn&&He&&zd(y),y.flags|=1,ss(d,y,z,H),y.child)}function ih(d,y,E,z,H){if(d===null){var ee=E.type;return typeof ee=="function"&&!jm(ee)&&ee.defaultProps===void 0&&E.compare===null?(y.tag=15,y.type=ee,os(d,y,ee,z,H)):(d=Rd(E.type,null,z,y,y.mode,H),d.ref=y.ref,d.return=y,y.child=d)}if(ee=d.child,!Xi(d,H)){var Pe=ee.memoizedProps;if(E=E.compare,E=E!==null?E:wl,E(Pe,z)&&d.ref===y.ref)return ls(d,y,H)}return y.flags|=1,d=Yl(ee,z),d.ref=y.ref,d.return=y,y.child=d}function os(d,y,E,z,H){if(d!==null){var ee=d.memoizedProps;if(wl(ee,z)&&d.ref===y.ref)if(_i=!1,y.pendingProps=z=ee,Xi(d,H))(d.flags&131072)!==0&&(_i=!0);else return y.lanes=d.lanes,ls(d,y,H)}return xc(d,y,E,z,H)}function sf(d,y,E){var z=y.pendingProps,H=z.children,ee=d!==null?d.memoizedState:null;if(z.mode==="hidden"){if((y.flags&128)!==0){if(z=ee!==null?ee.baseLanes|E:E,d!==null){for(H=y.child=d.child,ee=0;H!==null;)ee=ee|H.lanes|H.childLanes,H=H.sibling;y.childLanes=ee&~z}else y.childLanes=0,y.child=null;return Xm(d,y,z,E)}if((E&536870912)!==0)y.memoizedState={baseLanes:0,cachePool:null},d!==null&&Ku(y,ee!==null?ee.cachePool:null),ee!==null?Fd(y,ee):Vd(),Pl(y);else return y.lanes=y.childLanes=536870912,Xm(d,y,ee!==null?ee.baseLanes|E:E,E)}else ee!==null?(Ku(y,ee.cachePool),Fd(y,ee),oo(),y.memoizedState=null):(d!==null&&Ku(y,null),Vd(),oo());return ss(d,y,H,E),y.child}function Xm(d,y,E,z){var H=jd();return H=H===null?null:{parent:Ii._currentValue,pool:H},y.memoizedState={baseLanes:E,cachePool:H},d!==null&&Ku(y,null),Vd(),Pl(y),d!==null&&Gu(d,y,z,!0),null}function of(d,y){var E=y.ref;if(E===null)d!==null&&d.ref!==null&&(y.flags|=4194816);else{if(typeof E!="function"&&typeof E!="object")throw Error(c(284));(d===null||d.ref!==E)&&(y.flags|=4194816)}}function xc(d,y,E,z,H){return rc(y),E=vr(d,y,E,z,void 0,H),z=_p(),d!==null&&!_i?(qd(d,y,H),ls(d,y,H)):(Tn&&z&&zd(y),y.flags|=1,ss(d,y,E,H),y.child)}function lf(d,y,E,z,H,ee){return rc(y),y.updateQueue=null,E=Mn(y,z,E,H),lc(d),z=_p(),d!==null&&!_i?(qd(d,y,ee),ls(d,y,ee)):(Tn&&z&&zd(y),y.flags|=1,ss(d,y,E,ee),y.child)}function co(d,y,E,z,H){if(rc(y),y.stateNode===null){var ee=Mo,Pe=E.contextType;typeof Pe=="object"&&Pe!==null&&(ee=xi(Pe)),ee=new E(z,ee),y.memoizedState=ee.state!==null&&ee.state!==void 0?ee.state:null,ee.updater=Rp,y.stateNode=ee,ee._reactInternals=y,ee=y.stateNode,ee.props=z,ee.state=y.memoizedState,ee.refs={},mp(y),Pe=E.contextType,ee.context=typeof Pe=="object"&&Pe!==null?xi(Pe):Mo,ee.state=y.memoizedState,Pe=E.getDerivedStateFromProps,typeof Pe=="function"&&(nd(y,E,Pe,z),ee.state=y.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof ee.getSnapshotBeforeUpdate=="function"||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(Pe=ee.state,typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount(),Pe!==ee.state&&Rp.enqueueReplaceState(ee,ee.state,null),Hs(y,z,ee,H),Yu(),ee.state=y.memoizedState),typeof ee.componentDidMount=="function"&&(y.flags|=4194308),z=!0}else if(d===null){ee=y.stateNode;var He=y.memoizedProps,wt=id(E,He);ee.props=wt;var Ht=ee.context,ir=E.contextType;Pe=Mo,typeof ir=="object"&&ir!==null&&(Pe=xi(ir));var br=E.getDerivedStateFromProps;ir=typeof br=="function"||typeof ee.getSnapshotBeforeUpdate=="function",He=y.pendingProps!==He,ir||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(He||Ht!==Pe)&&nh(y,ee,z,Pe),Tl=!1;var Wt=y.memoizedState;ee.state=Wt,Hs(y,z,ee,H),Yu(),Ht=y.memoizedState,He||Wt!==Ht||Tl?(typeof br=="function"&&(nd(y,E,br,z),Ht=y.memoizedState),(wt=Tl||Ip(y,E,wt,z,Wt,Ht,Pe))?(ir||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(y.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=z,y.memoizedState=Ht),ee.props=z,ee.state=Ht,ee.context=Pe,z=wt):(typeof ee.componentDidMount=="function"&&(y.flags|=4194308),z=!1)}else{ee=y.stateNode,gp(d,y),Pe=y.memoizedProps,ir=id(E,Pe),ee.props=ir,br=y.pendingProps,Wt=ee.context,Ht=E.contextType,wt=Mo,typeof Ht=="object"&&Ht!==null&&(wt=xi(Ht)),He=E.getDerivedStateFromProps,(Ht=typeof He=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(Pe!==br||Wt!==wt)&&nh(y,ee,z,wt),Tl=!1,Wt=y.memoizedState,ee.state=Wt,Hs(y,z,ee,H),Yu();var Xt=y.memoizedState;Pe!==br||Wt!==Xt||Tl||d!==null&&d.dependencies!==null&&Io(d.dependencies)?(typeof He=="function"&&(nd(y,E,He,z),Xt=y.memoizedState),(ir=Tl||Ip(y,E,ir,z,Wt,Xt,wt)||d!==null&&d.dependencies!==null&&Io(d.dependencies))?(Ht||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(z,Xt,wt),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(z,Xt,wt)),typeof ee.componentDidUpdate=="function"&&(y.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof ee.componentDidUpdate!="function"||Pe===d.memoizedProps&&Wt===d.memoizedState||(y.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||Pe===d.memoizedProps&&Wt===d.memoizedState||(y.flags|=1024),y.memoizedProps=z,y.memoizedState=Xt),ee.props=z,ee.state=Xt,ee.context=wt,z=ir):(typeof ee.componentDidUpdate!="function"||Pe===d.memoizedProps&&Wt===d.memoizedState||(y.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||Pe===d.memoizedProps&&Wt===d.memoizedState||(y.flags|=1024),z=!1)}return ee=z,of(d,y),z=(y.flags&128)!==0,ee||z?(ee=y.stateNode,E=z&&typeof E.getDerivedStateFromError!="function"?null:ee.render(),y.flags|=1,d!==null&&z?(y.child=rh(y,d.child,null,H),y.child=rh(y,null,E,H)):ss(d,y,E,H),y.memoizedState=ee.state,d=y.child):d=ls(d,y,H),d}function uo(d,y,E,z){return jh(),y.flags|=256,ss(d,y,E,z),y.child}var ru={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Al(d){return{baseLanes:d,cachePool:pp()}}function au(d,y,E){return d=d!==null?d.childLanes&~E:0,y&&(d|=zn),d}function $p(d,y,E){var z=y.pendingProps,H=!1,ee=(y.flags&128)!==0,Pe;if((Pe=ee)||(Pe=d!==null&&d.memoizedState===null?!1:(kn.current&2)!==0),Pe&&(H=!0,y.flags&=-129),Pe=(y.flags&32)!==0,y.flags&=-33,d===null){if(Tn){if(H?$o(y):oo(),Tn){var He=Jn,wt;if(wt=He){e:{for(wt=He,He=Is;wt.nodeType!==8;){if(!He){He=null;break e}if(wt=Rl(wt.nextSibling),wt===null){He=null;break e}}He=wt}He!==null?(y.memoizedState={dehydrated:He,treeContext:Ql!==null?{id:Ao,overflow:ko}:null,retryLane:536870912,hydrationErrors:null},wt=Va(18,null,null,0),wt.stateNode=He,wt.return=y,y.child=wt,ns=y,Jn=null,wt=!0):wt=!1}wt||Vu(y)}if(He=y.memoizedState,He!==null&&(He=He.dehydrated,He!==null))return K0(He)?y.lanes=32:y.lanes=536870912,null;fn(y)}return He=z.children,z=z.fallback,H?(oo(),H=y.mode,He=sl({mode:"hidden",children:He},H),z=Jl(z,H,E,null),He.return=y,z.return=y,He.sibling=z,y.child=He,H=y.child,H.memoizedState=Al(E),H.childLanes=au(d,Pe,E),y.memoizedState=ru,z):($o(y),La(y,He))}if(wt=d.memoizedState,wt!==null&&(He=wt.dehydrated,He!==null)){if(ee)y.flags&256?($o(y),y.flags&=-257,y=Ym(d,y,E)):y.memoizedState!==null?(oo(),y.child=d.child,y.flags|=128,y=null):(oo(),H=z.fallback,He=y.mode,z=sl({mode:"visible",children:z.children},He),H=Jl(H,He,E,null),H.flags|=2,z.return=y,H.return=y,z.sibling=H,y.child=z,rh(y,d.child,null,E),z=y.child,z.memoizedState=Al(E),z.childLanes=au(d,Pe,E),y.memoizedState=ru,y=H);else if($o(y),K0(He)){if(Pe=He.nextSibling&&He.nextSibling.dataset,Pe)var Ht=Pe.dgst;Pe=Ht,z=Error(c(419)),z.stack="",z.digest=Pe,Uu({value:z,source:null,stack:null}),y=Ym(d,y,E)}else if(_i||Gu(d,y,E,!1),Pe=(E&d.childLanes)!==0,_i||Pe){if(Pe=ya,Pe!==null&&(z=E&-E,z=(z&42)!==0?1:ga(z),z=(z&(Pe.suspendedLanes|E))!==0?0:z,z!==0&&z!==wt.retryLane))throw wt.retryLane=z,Ou(d,z),jo(Pe,d,z),R0;He.data==="$?"||uf(),y=Ym(d,y,E)}else He.data==="$?"?(y.flags|=192,y.child=d.child,y=null):(d=wt.treeContext,Jn=Rl(He.nextSibling),ns=y,Tn=!0,Hc=null,Is=!1,d!==null&&(ro[Yn++]=Ao,ro[Yn++]=ko,ro[Yn++]=Ql,Ao=d.id,ko=d.overflow,Ql=y),y=La(y,z.children),y.flags|=4096);return y}return H?(oo(),H=z.fallback,He=y.mode,wt=d.child,Ht=wt.sibling,z=Yl(wt,{mode:"hidden",children:z.children}),z.subtreeFlags=wt.subtreeFlags&65011712,Ht!==null?H=Yl(Ht,H):(H=Jl(H,He,E,null),H.flags|=2),H.return=y,z.return=y,z.sibling=H,y.child=z,z=H,H=y.child,He=d.child.memoizedState,He===null?He=Al(E):(wt=He.cachePool,wt!==null?(Ht=Ii._currentValue,wt=wt.parent!==Ht?{parent:Ht,pool:Ht}:wt):wt=pp(),He={baseLanes:He.baseLanes|E,cachePool:wt}),H.memoizedState=He,H.childLanes=au(d,Pe,E),y.memoizedState=ru,z):($o(y),E=d.child,d=E.sibling,E=Yl(E,{mode:"visible",children:z.children}),E.return=y,E.sibling=null,d!==null&&(Pe=y.deletions,Pe===null?(y.deletions=[d],y.flags|=16):Pe.push(d)),y.child=E,y.memoizedState=null,E)}function La(d,y){return y=sl({mode:"visible",children:y},d.mode),y.return=d,d.child=y}function sl(d,y){return d=Va(22,d,null,y),d.lanes=0,d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},d}function Ym(d,y,E){return rh(y,d.child,null,E),d=La(y,y.pendingProps.children),d.flags|=2,y.memoizedState=null,d}function Jm(d,y,E){d.lanes|=y;var z=d.alternate;z!==null&&(z.lanes|=y),$d(d.return,y,E)}function od(d,y,E,z,H){var ee=d.memoizedState;ee===null?d.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:z,tail:E,tailMode:H}:(ee.isBackwards=y,ee.rendering=null,ee.renderingStartTime=0,ee.last=z,ee.tail=E,ee.tailMode=H)}function ol(d,y,E){var z=y.pendingProps,H=z.revealOrder,ee=z.tail;if(ss(d,y,z.children,E),z=kn.current,(z&2)!==0)z=z&1|2,y.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=y.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&Jm(d,E,y);else if(d.tag===19)Jm(d,E,y);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===y)break e;for(;d.sibling===null;){if(d.return===null||d.return===y)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}z&=1}switch(Xe(kn,z),H){case"forwards":for(E=y.child,H=null;E!==null;)d=E.alternate,d!==null&&ah(d)===null&&(H=E),E=E.sibling;E=H,E===null?(H=y.child,y.child=null):(H=E.sibling,E.sibling=null),od(y,!1,H,E,ee);break;case"backwards":for(E=null,H=y.child,y.child=null;H!==null;){if(d=H.alternate,d!==null&&ah(d)===null){y.child=H;break}d=H.sibling,H.sibling=E,E=H,H=d}od(y,!0,E,null,ee);break;case"together":od(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function ls(d,y,E){if(d!==null&&(y.dependencies=d.dependencies),vn|=y.lanes,(E&y.childLanes)===0)if(d!==null){if(Gu(d,y,E,!1),(E&y.childLanes)===0)return null}else return null;if(d!==null&&y.child!==d.child)throw Error(c(153));if(y.child!==null){for(d=y.child,E=Yl(d,d.pendingProps),y.child=E,E.return=y;d.sibling!==null;)d=d.sibling,E=E.sibling=Yl(d,d.pendingProps),E.return=y;E.sibling=null}return y.child}function Xi(d,y){return(d.lanes&y)!==0?!0:(d=d.dependencies,!!(d!==null&&Io(d)))}function qs(d,y,E){switch(y.tag){case 3:Dt(y,y.stateNode.containerInfo),tc(y,Ii,d.memoizedState.cache),jh();break;case 27:case 5:Se(y);break;case 4:Dt(y,y.stateNode.containerInfo);break;case 10:tc(y,y.type,y.memoizedProps.value);break;case 13:var z=y.memoizedState;if(z!==null)return z.dehydrated!==null?($o(y),y.flags|=128,null):(E&y.child.childLanes)!==0?$p(d,y,E):($o(y),d=ls(d,y,E),d!==null?d.sibling:null);$o(y);break;case 19:var H=(d.flags&128)!==0;if(z=(E&y.childLanes)!==0,z||(Gu(d,y,E,!1),z=(E&y.childLanes)!==0),H){if(z)return ol(d,y,E);y.flags|=128}if(H=y.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),Xe(kn,kn.current),z)break;return null;case 22:case 23:return y.lanes=0,sf(d,y,E);case 24:tc(y,Ii,d.memoizedState.cache)}return ls(d,y,E)}function Li(d,y,E){if(d!==null)if(d.memoizedProps!==y.pendingProps)_i=!0;else{if(!Xi(d,E)&&(y.flags&128)===0)return _i=!1,qs(d,y,E);_i=(d.flags&131072)!==0}else _i=!1,Tn&&(y.flags&1048576)!==0&&dp(y,Gc,y.index);switch(y.lanes=0,y.tag){case 16:e:{d=y.pendingProps;var z=y.elementType,H=z._init;if(z=H(z._payload),y.type=z,typeof z=="function")jm(z)?(d=id(z,d),y.tag=1,y=co(null,y,z,d,E)):(y.tag=0,y=xc(null,y,z,d,E));else{if(z!=null){if(H=z.$$typeof,H===pe){y.tag=11,y=I0(null,y,z,d,E);break e}else if(H===Ae){y.tag=14,y=ih(null,y,z,d,E);break e}}throw y=je(z)||z,Error(c(306,y,""))}}return y;case 0:return xc(d,y,y.type,y.pendingProps,E);case 1:return z=y.type,H=id(z,y.pendingProps),co(d,y,z,H,E);case 3:e:{if(Dt(y,y.stateNode.containerInfo),d===null)throw Error(c(387));z=y.pendingProps;var ee=y.memoizedState;H=ee.element,gp(d,y),Hs(y,z,null,E);var Pe=y.memoizedState;if(z=Pe.cache,tc(y,Ii,z),z!==ee.cache&&Gs(y,[Ii],E,!0),Yu(),z=Pe.element,ee.isDehydrated)if(ee={element:z,isDehydrated:!1,cache:Pe.cache},y.updateQueue.baseState=ee,y.memoizedState=ee,y.flags&256){y=uo(d,y,z,E);break e}else if(z!==H){H=Ri(Error(c(424)),y),Uu(H),y=uo(d,y,z,E);break e}else{switch(d=y.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(Jn=Rl(d.firstChild),ns=y,Tn=!0,Hc=null,Is=!0,E=Qc(y,null,z,E),y.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling}else{if(jh(),z===H){y=ls(d,y,E);break e}ss(d,y,z,E)}y=y.child}return y;case 26:return of(d,y),d===null?(E=Hx(y.type,null,y.pendingProps,null))?y.memoizedState=E:Tn||(E=y.type,d=y.pendingProps,z=lg(Ct.current).createElement(E),z[Ye]=y,z[Qe]=d,hs(z,E,d),Lr(z),y.stateNode=z):y.memoizedState=Hx(y.type,d.memoizedProps,y.pendingProps,d.memoizedState),null;case 27:return Se(y),d===null&&Tn&&(z=y.stateNode=fb(y.type,y.pendingProps,Ct.current),ns=y,Is=!0,H=Jn,fo(y.type)?(Z0=H,Jn=Rl(z.firstChild)):Jn=H),ss(d,y,y.pendingProps.children,E),of(d,y),d===null&&(y.flags|=4194304),y.child;case 5:return d===null&&Tn&&((H=z=Jn)&&(z=W0(z,y.type,y.pendingProps,Is),z!==null?(y.stateNode=z,ns=y,Jn=Rl(z.firstChild),Is=!1,H=!0):H=!1),H||Vu(y)),Se(y),H=y.type,ee=y.pendingProps,Pe=d!==null?d.memoizedProps:null,z=ee.children,cg(H,ee)?z=null:Pe!==null&&cg(H,Pe)&&(y.flags|=32),y.memoizedState!==null&&(H=vr(d,y,Tt,null,null,E),xg._currentValue=H),of(d,y),ss(d,y,z,E),y.child;case 6:return d===null&&Tn&&((d=E=Jn)&&(E=ug(E,y.pendingProps,Is),E!==null?(y.stateNode=E,ns=y,Jn=null,d=!0):d=!1),d||Vu(y)),null;case 13:return $p(d,y,E);case 4:return Dt(y,y.stateNode.containerInfo),z=y.pendingProps,d===null?y.child=rh(y,null,z,E):ss(d,y,z,E),y.child;case 11:return I0(d,y,y.type,y.pendingProps,E);case 7:return ss(d,y,y.pendingProps,E),y.child;case 8:return ss(d,y,y.pendingProps.children,E),y.child;case 12:return ss(d,y,y.pendingProps.children,E),y.child;case 10:return z=y.pendingProps,tc(y,y.type,z.value),ss(d,y,z.children,E),y.child;case 9:return H=y.type._context,z=y.pendingProps.children,rc(y),H=xi(H),z=z(H),y.flags|=1,ss(d,y,z,E),y.child;case 14:return ih(d,y,y.type,y.pendingProps,E);case 15:return os(d,y,y.type,y.pendingProps,E);case 19:return ol(d,y,E);case 31:return z=y.pendingProps,E=y.mode,z={mode:z.mode,children:z.children},d===null?(E=sl(z,E),E.ref=y.ref,y.child=E,E.return=y,y=E):(E=Yl(d.child,z),E.ref=y.ref,y.child=E,E.return=y,y=E),y;case 22:return sf(d,y,E);case 24:return rc(y),z=xi(Ii),d===null?(H=jd(),H===null&&(H=ya,ee=qu(),H.pooledCache=ee,ee.refCount++,ee!==null&&(H.pooledCacheLanes|=E),H=ee),y.memoizedState={parent:z,cache:H},mp(y),tc(y,Ii,H)):((d.lanes&E)!==0&&(gp(d,y),Hs(y,null,null,E),Yu()),H=d.memoizedState,ee=y.memoizedState,H.parent!==z?(H={parent:z,cache:z},y.memoizedState=H,y.lanes===0&&(y.memoizedState=y.updateQueue.baseState=H),tc(y,Ii,z)):(z=ee.cache,tc(y,Ii,z),z!==H.cache&&Gs(y,[Ii],E,!0))),ss(d,y,y.pendingProps.children,E),y.child;case 29:throw y.pendingProps}throw Error(c(156,y.tag))}function kl(d){d.flags|=4}function cs(d,y){if(y.type!=="stylesheet"||(y.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!Kx(y)){if(y=io.current,y!==null&&((Pa&4194048)===Pa?so!==null:(Pa&62914560)!==Pa&&(Pa&536870912)===0||y!==so))throw Ss=Xu,D0;d.flags|=8192}}function Np(d,y){y!==null&&(d.flags|=4),d.flags&16384&&(y=d.tag!==22?Ka():536870912,d.lanes|=y,Yi|=y)}function p(d,y){if(!Tn)switch(d.tailMode){case"hidden":y=d.tail;for(var E=null;y!==null;)y.alternate!==null&&(E=y),y=y.sibling;E===null?d.tail=null:E.sibling=null;break;case"collapsed":E=d.tail;for(var z=null;E!==null;)E.alternate!==null&&(z=E),E=E.sibling;z===null?y||d.tail===null?d.tail=null:d.tail.sibling=null:z.sibling=null}}function a(d){var y=d.alternate!==null&&d.alternate.child===d.child,E=0,z=0;if(y)for(var H=d.child;H!==null;)E|=H.lanes|H.childLanes,z|=H.subtreeFlags&65011712,z|=H.flags&65011712,H.return=d,H=H.sibling;else for(H=d.child;H!==null;)E|=H.lanes|H.childLanes,z|=H.subtreeFlags,z|=H.flags,H.return=d,H=H.sibling;return d.subtreeFlags|=z,d.childLanes=E,y}function o(d,y,E){var z=y.pendingProps;switch(Nh(y),y.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return a(y),null;case 1:return a(y),null;case 3:return E=y.stateNode,z=null,d!==null&&(z=d.memoizedState.cache),y.memoizedState.cache!==z&&(y.flags|=2048),tl(Ii),er(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(d===null||d.child===null)&&(Bh(y)?kl(y):d===null||d.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Ld())),a(y),null;case 26:return E=y.memoizedState,d===null?(kl(y),E!==null?(a(y),cs(y,E)):(a(y),y.flags&=-16777217)):E?E!==d.memoizedState?(kl(y),a(y),cs(y,E)):(a(y),y.flags&=-16777217):(d.memoizedProps!==z&&kl(y),a(y),y.flags&=-16777217),null;case 27:ur(y),E=Ct.current;var H=y.type;if(d!==null&&y.stateNode!=null)d.memoizedProps!==z&&kl(y);else{if(!z){if(y.stateNode===null)throw Error(c(166));return a(y),null}d=ut.current,Bh(y)?T0(y):(d=fb(H,z,E),y.stateNode=d,kl(y))}return a(y),null;case 5:if(ur(y),E=y.type,d!==null&&y.stateNode!=null)d.memoizedProps!==z&&kl(y);else{if(!z){if(y.stateNode===null)throw Error(c(166));return a(y),null}if(d=ut.current,Bh(y))T0(y);else{switch(H=lg(Ct.current),d){case 1:d=H.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:d=H.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":d=H.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":d=H.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":d=H.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof z.is=="string"?H.createElement("select",{is:z.is}):H.createElement("select"),z.multiple?d.multiple=!0:z.size&&(d.size=z.size);break;default:d=typeof z.is=="string"?H.createElement(E,{is:z.is}):H.createElement(E)}}d[Ye]=y,d[Qe]=z;e:for(H=y.child;H!==null;){if(H.tag===5||H.tag===6)d.appendChild(H.stateNode);else if(H.tag!==4&&H.tag!==27&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===y)break e;for(;H.sibling===null;){if(H.return===null||H.return===y)break e;H=H.return}H.sibling.return=H.return,H=H.sibling}y.stateNode=d;e:switch(hs(d,E,z),E){case"button":case"input":case"select":case"textarea":d=!!z.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&kl(y)}}return a(y),y.flags&=-16777217,null;case 6:if(d&&y.stateNode!=null)d.memoizedProps!==z&&kl(y);else{if(typeof z!="string"&&y.stateNode===null)throw Error(c(166));if(d=Ct.current,Bh(y)){if(d=y.stateNode,E=y.memoizedProps,z=null,H=ns,H!==null)switch(H.tag){case 27:case 5:z=H.memoizedProps}d[Ye]=y,d=!!(d.nodeValue===E||z!==null&&z.suppressHydrationWarning===!0||Nx(d.nodeValue,E)),d||Vu(y)}else d=lg(d).createTextNode(z),d[Ye]=y,y.stateNode=d}return a(y),null;case 13:if(z=y.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(H=Bh(y),z!==null&&z.dehydrated!==null){if(d===null){if(!H)throw Error(c(318));if(H=y.memoizedState,H=H!==null?H.dehydrated:null,!H)throw Error(c(317));H[Ye]=y}else jh(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;a(y),H=!1}else H=Ld(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=H),H=!0;if(!H)return y.flags&256?(fn(y),y):(fn(y),null)}if(fn(y),(y.flags&128)!==0)return y.lanes=E,y;if(E=z!==null,d=d!==null&&d.memoizedState!==null,E){z=y.child,H=null,z.alternate!==null&&z.alternate.memoizedState!==null&&z.alternate.memoizedState.cachePool!==null&&(H=z.alternate.memoizedState.cachePool.pool);var ee=null;z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(ee=z.memoizedState.cachePool.pool),ee!==H&&(z.flags|=2048)}return E!==d&&E&&(y.child.flags|=8192),Np(y,y.updateQueue),a(y),null;case 4:return er(),d===null&&U0(y.stateNode.containerInfo),a(y),null;case 10:return tl(y.type),a(y),null;case 19:if(nt(kn),H=y.memoizedState,H===null)return a(y),null;if(z=(y.flags&128)!==0,ee=H.rendering,ee===null)if(z)p(H,!1);else{if(qr!==0||d!==null&&(d.flags&128)!==0)for(d=y.child;d!==null;){if(ee=ah(d),ee!==null){for(y.flags|=128,p(H,!1),d=ee.updateQueue,y.updateQueue=d,Np(y,d),y.subtreeFlags=0,d=E,E=y.child;E!==null;)cp(E,d),E=E.sibling;return Xe(kn,kn.current&1|2),y.child}d=d.sibling}H.tail!==null&&Er()>us&&(y.flags|=128,z=!0,p(H,!1),y.lanes=4194304)}else{if(!z)if(d=ah(ee),d!==null){if(y.flags|=128,z=!0,d=d.updateQueue,y.updateQueue=d,Np(y,d),p(H,!0),H.tail===null&&H.tailMode==="hidden"&&!ee.alternate&&!Tn)return a(y),null}else 2*Er()-H.renderingStartTime>us&&E!==536870912&&(y.flags|=128,z=!0,p(H,!1),y.lanes=4194304);H.isBackwards?(ee.sibling=y.child,y.child=ee):(d=H.last,d!==null?d.sibling=ee:y.child=ee,H.last=ee)}return H.tail!==null?(y=H.tail,H.rendering=y,H.tail=y.sibling,H.renderingStartTime=Er(),y.sibling=null,d=kn.current,Xe(kn,z?d&1|2:d&1),y):(a(y),null);case 22:case 23:return fn(y),Zc(),z=y.memoizedState!==null,d!==null?d.memoizedState!==null!==z&&(y.flags|=8192):z&&(y.flags|=8192),z?(E&536870912)!==0&&(y.flags&128)===0&&(a(y),y.subtreeFlags&6&&(y.flags|=8192)):a(y),E=y.updateQueue,E!==null&&Np(y,E.retryQueue),E=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),z=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(z=y.memoizedState.cachePool.pool),z!==E&&(y.flags|=2048),d!==null&&nt(nc),null;case 24:return E=null,d!==null&&(E=d.memoizedState.cache),y.memoizedState.cache!==E&&(y.flags|=2048),tl(Ii),a(y),null;case 25:return null;case 30:return null}throw Error(c(156,y.tag))}function m(d,y){switch(Nh(y),y.tag){case 1:return d=y.flags,d&65536?(y.flags=d&-65537|128,y):null;case 3:return tl(Ii),er(),d=y.flags,(d&65536)!==0&&(d&128)===0?(y.flags=d&-65537|128,y):null;case 26:case 27:case 5:return ur(y),null;case 13:if(fn(y),d=y.memoizedState,d!==null&&d.dehydrated!==null){if(y.alternate===null)throw Error(c(340));jh()}return d=y.flags,d&65536?(y.flags=d&-65537|128,y):null;case 19:return nt(kn),null;case 4:return er(),null;case 10:return tl(y.type),null;case 22:case 23:return fn(y),Zc(),d!==null&&nt(nc),d=y.flags,d&65536?(y.flags=d&-65537|128,y):null;case 24:return tl(Ii),null;case 25:return null;default:return null}}function v(d,y){switch(Nh(y),y.tag){case 3:tl(Ii),er();break;case 26:case 27:case 5:ur(y);break;case 4:er();break;case 13:fn(y);break;case 19:nt(kn);break;case 10:tl(y.type);break;case 22:case 23:fn(y),Zc(),d!==null&&nt(nc);break;case 24:tl(Ii)}}function S(d,y){try{var E=y.updateQueue,z=E!==null?E.lastEffect:null;if(z!==null){var H=z.next;E=H;do{if((E.tag&d)===d){z=void 0;var ee=E.create,Pe=E.inst;z=ee(),Pe.destroy=z}E=E.next}while(E!==H)}}catch(He){Ln(y,y.return,He)}}function D(d,y,E){try{var z=y.updateQueue,H=z!==null?z.lastEffect:null;if(H!==null){var ee=H.next;z=ee;do{if((z.tag&d)===d){var Pe=z.inst,He=Pe.destroy;if(He!==void 0){Pe.destroy=void 0,H=y;var wt=E,Ht=He;try{Ht()}catch(ir){Ln(H,wt,ir)}}}z=z.next}while(z!==ee)}}catch(ir){Ln(y,y.return,ir)}}function L(d){var y=d.updateQueue;if(y!==null){var E=d.stateNode;try{vp(y,E)}catch(z){Ln(d,d.return,z)}}}function O(d,y,E){E.props=id(d.type,d.memoizedProps),E.state=d.memoizedState;try{E.componentWillUnmount()}catch(z){Ln(d,y,z)}}function U(d,y){try{var E=d.ref;if(E!==null){switch(d.tag){case 26:case 27:case 5:var z=d.stateNode;break;case 30:z=d.stateNode;break;default:z=d.stateNode}typeof E=="function"?d.refCleanup=E(z):E.current=z}}catch(H){Ln(d,y,H)}}function q(d,y){var E=d.ref,z=d.refCleanup;if(E!==null)if(typeof z=="function")try{z()}catch(H){Ln(d,y,H)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof E=="function")try{E(null)}catch(H){Ln(d,y,H)}else E.current=null}function Z(d){var y=d.type,E=d.memoizedProps,z=d.stateNode;try{e:switch(y){case"button":case"input":case"select":case"textarea":E.autoFocus&&z.focus();break e;case"img":E.src?z.src=E.src:E.srcSet&&(z.srcset=E.srcSet)}}catch(H){Ln(d,d.return,H)}}function X(d,y,E){try{var z=d.stateNode;ob(z,d.type,E,y),z[Qe]=y}catch(H){Ln(d,d.return,H)}}function ae(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&fo(d.type)||d.tag===4}function me(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||ae(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&fo(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function he(d,y,E){var z=d.tag;if(z===5||z===6)d=d.stateNode,y?(E.nodeType===9?E.body:E.nodeName==="HTML"?E.ownerDocument.body:E).insertBefore(d,y):(y=E.nodeType===9?E.body:E.nodeName==="HTML"?E.ownerDocument.body:E,y.appendChild(d),E=E._reactRootContainer,E!=null||y.onclick!==null||(y.onclick=yf));else if(z!==4&&(z===27&&fo(d.type)&&(E=d.stateNode,y=null),d=d.child,d!==null))for(he(d,y,E),d=d.sibling;d!==null;)he(d,y,E),d=d.sibling}function xe(d,y,E){var z=d.tag;if(z===5||z===6)d=d.stateNode,y?E.insertBefore(d,y):E.appendChild(d);else if(z!==4&&(z===27&&fo(d.type)&&(E=d.stateNode),d=d.child,d!==null))for(xe(d,y,E),d=d.sibling;d!==null;)xe(d,y,E),d=d.sibling}function _e(d){var y=d.stateNode,E=d.memoizedProps;try{for(var z=d.type,H=y.attributes;H.length;)y.removeAttributeNode(H[0]);hs(y,z,E),y[Ye]=d,y[Qe]=E}catch(ee){Ln(d,d.return,ee)}}var Me=!1,Be=!1,Oe=!1,Ze=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function We(d,y){if(d=d.containerInfo,Bx=ey,d=rp(d),ap(d)){if("selectionStart"in d)var E={start:d.selectionStart,end:d.selectionEnd};else e:{E=(E=d.ownerDocument)&&E.defaultView||window;var z=E.getSelection&&E.getSelection();if(z&&z.rangeCount!==0){E=z.anchorNode;var H=z.anchorOffset,ee=z.focusNode;z=z.focusOffset;try{E.nodeType,ee.nodeType}catch{E=null;break e}var Pe=0,He=-1,wt=-1,Ht=0,ir=0,br=d,Wt=null;t:for(;;){for(var Xt;br!==E||H!==0&&br.nodeType!==3||(He=Pe+H),br!==ee||z!==0&&br.nodeType!==3||(wt=Pe+z),br.nodeType===3&&(Pe+=br.nodeValue.length),(Xt=br.firstChild)!==null;)Wt=br,br=Xt;for(;;){if(br===d)break t;if(Wt===E&&++Ht===H&&(He=Pe),Wt===ee&&++ir===z&&(wt=Pe),(Xt=br.nextSibling)!==null)break;br=Wt,Wt=br.parentNode}br=Xt}E=He===-1||wt===-1?null:{start:He,end:wt}}else E=null}E=E||{start:0,end:0}}else E=null;for(H0={focusedElem:d,selectionRange:E},ey=!1,Ue=y;Ue!==null;)if(y=Ue,d=y.child,(y.subtreeFlags&1024)!==0&&d!==null)d.return=y,Ue=d;else for(;Ue!==null;){switch(y=Ue,ee=y.alternate,d=y.flags,y.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&ee!==null){d=void 0,E=y,H=ee.memoizedProps,ee=ee.memoizedState,z=E.stateNode;try{var Na=id(E.type,H,E.elementType===E.type);d=z.getSnapshotBeforeUpdate(Na,ee),z.__reactInternalSnapshotBeforeUpdate=d}catch(Ma){Ln(E,E.return,Ma)}}break;case 3:if((d&1024)!==0){if(d=y.stateNode.containerInfo,E=d.nodeType,E===9)xf(d);else if(E===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":xf(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(c(163))}if(d=y.sibling,d!==null){d.return=y.return,Ue=d;break}Ue=y.return}}function qe(d,y,E){var z=E.flags;switch(E.tag){case 0:case 11:case 15:Ot(d,E),z&4&&S(5,E);break;case 1:if(Ot(d,E),z&4)if(d=E.stateNode,y===null)try{d.componentDidMount()}catch(Pe){Ln(E,E.return,Pe)}else{var H=id(E.type,y.memoizedProps);y=y.memoizedState;try{d.componentDidUpdate(H,y,d.__reactInternalSnapshotBeforeUpdate)}catch(Pe){Ln(E,E.return,Pe)}}z&64&&L(E),z&512&&U(E,E.return);break;case 3:if(Ot(d,E),z&64&&(d=E.updateQueue,d!==null)){if(y=null,E.child!==null)switch(E.child.tag){case 27:case 5:y=E.child.stateNode;break;case 1:y=E.child.stateNode}try{vp(d,y)}catch(Pe){Ln(E,E.return,Pe)}}break;case 27:y===null&&z&4&&_e(E);case 26:case 5:Ot(d,E),y===null&&z&4&&Z(E),z&512&&U(E,E.return);break;case 12:Ot(d,E);break;case 13:Ot(d,E),z&4&&mt(d,E),z&64&&(d=E.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(E=Q_.bind(null,E),db(d,E))));break;case 22:if(z=E.memoizedState!==null||Me,!z){y=y!==null&&y.memoizedState!==null||Be,H=Me;var ee=Be;Me=z,(Be=y)&&!ee?dr(d,E,(E.subtreeFlags&8772)!==0):Ot(d,E),Me=H,Be=ee}break;case 30:break;default:Ot(d,E)}}function tt(d){var y=d.alternate;y!==null&&(d.alternate=null,tt(y)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(y=d.stateNode,y!==null&&Jt(y)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var rt=null,Et=!1;function _t(d,y,E){for(E=E.child;E!==null;)st(d,y,E),E=E.sibling}function st(d,y,E){if(Dr&&typeof Dr.onCommitFiberUnmount=="function")try{Dr.onCommitFiberUnmount(kr,E)}catch{}switch(E.tag){case 26:Be||q(E,y),_t(d,y,E),E.memoizedState?E.memoizedState.count--:E.stateNode&&(E=E.stateNode,E.parentNode.removeChild(E));break;case 27:Be||q(E,y);var z=rt,H=Et;fo(E.type)&&(rt=E.stateNode,Et=!1),_t(d,y,E),Hp(E.stateNode),rt=z,Et=H;break;case 5:Be||q(E,y);case 6:if(z=rt,H=Et,rt=null,_t(d,y,E),rt=z,Et=H,rt!==null)if(Et)try{(rt.nodeType===9?rt.body:rt.nodeName==="HTML"?rt.ownerDocument.body:rt).removeChild(E.stateNode)}catch(ee){Ln(E,y,ee)}else try{rt.removeChild(E.stateNode)}catch(ee){Ln(E,y,ee)}break;case 18:rt!==null&&(Et?(d=rt,Gp(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,E.stateNode),Sg(d)):Gp(rt,E.stateNode));break;case 4:z=rt,H=Et,rt=E.stateNode.containerInfo,Et=!0,_t(d,y,E),rt=z,Et=H;break;case 0:case 11:case 14:case 15:Be||D(2,E,y),Be||D(4,E,y),_t(d,y,E);break;case 1:Be||(q(E,y),z=E.stateNode,typeof z.componentWillUnmount=="function"&&O(E,y,z)),_t(d,y,E);break;case 21:_t(d,y,E);break;case 22:Be=(z=Be)||E.memoizedState!==null,_t(d,y,E),Be=z;break;default:_t(d,y,E)}}function mt(d,y){if(y.memoizedState===null&&(d=y.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Sg(d)}catch(E){Ln(y,y.return,E)}}function Bt(d){switch(d.tag){case 13:case 19:var y=d.stateNode;return y===null&&(y=d.stateNode=new Ze),y;case 22:return d=d.stateNode,y=d._retryCache,y===null&&(y=d._retryCache=new Ze),y;default:throw Error(c(435,d.tag))}}function qt(d,y){var E=Bt(d);y.forEach(function(z){var H=ag.bind(null,d,z);E.has(z)||(E.add(z),z.then(H,H))})}function Kt(d,y){var E=y.deletions;if(E!==null)for(var z=0;z<E.length;z++){var H=E[z],ee=d,Pe=y,He=Pe;e:for(;He!==null;){switch(He.tag){case 27:if(fo(He.type)){rt=He.stateNode,Et=!1;break e}break;case 5:rt=He.stateNode,Et=!1;break e;case 3:case 4:rt=He.stateNode.containerInfo,Et=!0;break e}He=He.return}if(rt===null)throw Error(c(160));st(ee,Pe,H),rt=null,Et=!1,ee=H.alternate,ee!==null&&(ee.return=null),H.return=null}if(y.subtreeFlags&13878)for(y=y.child;y!==null;)Ft(y,d),y=y.sibling}var xt=null;function Ft(d,y){var E=d.alternate,z=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Kt(y,d),Mt(d),z&4&&(D(3,d,d.return),S(3,d),D(5,d,d.return));break;case 1:Kt(y,d),Mt(d),z&512&&(Be||E===null||q(E,E.return)),z&64&&Me&&(d=d.updateQueue,d!==null&&(z=d.callbacks,z!==null&&(E=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=E===null?z:E.concat(z))));break;case 26:var H=xt;if(Kt(y,d),Mt(d),z&512&&(Be||E===null||q(E,E.return)),z&4){var ee=E!==null?E.memoizedState:null;if(z=d.memoizedState,E===null)if(z===null)if(d.stateNode===null){e:{z=d.type,E=d.memoizedProps,H=H.ownerDocument||H;t:switch(z){case"title":ee=H.getElementsByTagName("title")[0],(!ee||ee[It]||ee[Ye]||ee.namespaceURI==="http://www.w3.org/2000/svg"||ee.hasAttribute("itemprop"))&&(ee=H.createElement(z),H.head.insertBefore(ee,H.querySelector("head > title"))),hs(ee,z,E),ee[Ye]=d,Lr(ee),z=ee;break e;case"link":var Pe=J0("link","href",H).get(z+(E.href||""));if(Pe){for(var He=0;He<Pe.length;He++)if(ee=Pe[He],ee.getAttribute("href")===(E.href==null||E.href===""?null:E.href)&&ee.getAttribute("rel")===(E.rel==null?null:E.rel)&&ee.getAttribute("title")===(E.title==null?null:E.title)&&ee.getAttribute("crossorigin")===(E.crossOrigin==null?null:E.crossOrigin)){Pe.splice(He,1);break t}}ee=H.createElement(z),hs(ee,z,E),H.head.appendChild(ee);break;case"meta":if(Pe=J0("meta","content",H).get(z+(E.content||""))){for(He=0;He<Pe.length;He++)if(ee=Pe[He],ee.getAttribute("content")===(E.content==null?null:""+E.content)&&ee.getAttribute("name")===(E.name==null?null:E.name)&&ee.getAttribute("property")===(E.property==null?null:E.property)&&ee.getAttribute("http-equiv")===(E.httpEquiv==null?null:E.httpEquiv)&&ee.getAttribute("charset")===(E.charSet==null?null:E.charSet)){Pe.splice(He,1);break t}}ee=H.createElement(z),hs(ee,z,E),H.head.appendChild(ee);break;default:throw Error(c(468,z))}ee[Ye]=d,Lr(ee),z=ee}d.stateNode=z}else Q0(H,d.type,d.stateNode);else d.stateNode=bb(H,z,d.memoizedProps);else ee!==z?(ee===null?E.stateNode!==null&&(E=E.stateNode,E.parentNode.removeChild(E)):ee.count--,z===null?Q0(H,d.type,d.stateNode):bb(H,z,d.memoizedProps)):z===null&&d.stateNode!==null&&X(d,d.memoizedProps,E.memoizedProps)}break;case 27:Kt(y,d),Mt(d),z&512&&(Be||E===null||q(E,E.return)),E!==null&&z&4&&X(d,d.memoizedProps,E.memoizedProps);break;case 5:if(Kt(y,d),Mt(d),z&512&&(Be||E===null||q(E,E.return)),d.flags&32){H=d.stateNode;try{eo(H,"")}catch(Xt){Ln(d,d.return,Xt)}}z&4&&d.stateNode!=null&&(H=d.memoizedProps,X(d,H,E!==null?E.memoizedProps:H)),z&1024&&(Oe=!0);break;case 6:if(Kt(y,d),Mt(d),z&4){if(d.stateNode===null)throw Error(c(162));z=d.memoizedProps,E=d.stateNode;try{E.nodeValue=z}catch(Xt){Ln(d,d.return,Xt)}}break;case 3:if(Y0=null,H=xt,xt=X0(y.containerInfo),Kt(y,d),xt=H,Mt(d),z&4&&E!==null&&E.memoizedState.isDehydrated)try{Sg(y.containerInfo)}catch(Xt){Ln(d,d.return,Xt)}Oe&&(Oe=!1,Qt(d));break;case 4:z=xt,xt=X0(d.stateNode.containerInfo),Kt(y,d),Mt(d),xt=z;break;case 12:Kt(y,d),Mt(d);break;case 13:Kt(y,d),Mt(d),d.child.flags&8192&&d.memoizedState!==null!=(E!==null&&E.memoizedState!==null)&&(ho=Er()),z&4&&(z=d.updateQueue,z!==null&&(d.updateQueue=null,qt(d,z)));break;case 22:H=d.memoizedState!==null;var wt=E!==null&&E.memoizedState!==null,Ht=Me,ir=Be;if(Me=Ht||H,Be=ir||wt,Kt(y,d),Be=ir,Me=Ht,Mt(d),z&8192)e:for(y=d.stateNode,y._visibility=H?y._visibility&-2:y._visibility|1,H&&(E===null||wt||Me||Be||zt(d)),E=null,y=d;;){if(y.tag===5||y.tag===26){if(E===null){wt=E=y;try{if(ee=wt.stateNode,H)Pe=ee.style,typeof Pe.setProperty=="function"?Pe.setProperty("display","none","important"):Pe.display="none";else{He=wt.stateNode;var br=wt.memoizedProps.style,Wt=br!=null&&br.hasOwnProperty("display")?br.display:null;He.style.display=Wt==null||typeof Wt=="boolean"?"":(""+Wt).trim()}}catch(Xt){Ln(wt,wt.return,Xt)}}}else if(y.tag===6){if(E===null){wt=y;try{wt.stateNode.nodeValue=H?"":wt.memoizedProps}catch(Xt){Ln(wt,wt.return,Xt)}}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===d)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break e;for(;y.sibling===null;){if(y.return===null||y.return===d)break e;E===y&&(E=null),y=y.return}E===y&&(E=null),y.sibling.return=y.return,y=y.sibling}z&4&&(z=d.updateQueue,z!==null&&(E=z.retryQueue,E!==null&&(z.retryQueue=null,qt(d,E))));break;case 19:Kt(y,d),Mt(d),z&4&&(z=d.updateQueue,z!==null&&(d.updateQueue=null,qt(d,z)));break;case 30:break;case 21:break;default:Kt(y,d),Mt(d)}}function Mt(d){var y=d.flags;if(y&2){try{for(var E,z=d.return;z!==null;){if(ae(z)){E=z;break}z=z.return}if(E==null)throw Error(c(160));switch(E.tag){case 27:var H=E.stateNode,ee=me(d);xe(d,ee,H);break;case 5:var Pe=E.stateNode;E.flags&32&&(eo(Pe,""),E.flags&=-33);var He=me(d);xe(d,He,Pe);break;case 3:case 4:var wt=E.stateNode.containerInfo,Ht=me(d);he(d,Ht,wt);break;default:throw Error(c(161))}}catch(ir){Ln(d,d.return,ir)}d.flags&=-3}y&4096&&(d.flags&=-4097)}function Qt(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var y=d;Qt(y),y.tag===5&&y.flags&1024&&y.stateNode.reset(),d=d.sibling}}function Ot(d,y){if(y.subtreeFlags&8772)for(y=y.child;y!==null;)qe(d,y.alternate,y),y=y.sibling}function zt(d){for(d=d.child;d!==null;){var y=d;switch(y.tag){case 0:case 11:case 14:case 15:D(4,y,y.return),zt(y);break;case 1:q(y,y.return);var E=y.stateNode;typeof E.componentWillUnmount=="function"&&O(y,y.return,E),zt(y);break;case 27:Hp(y.stateNode);case 26:case 5:q(y,y.return),zt(y);break;case 22:y.memoizedState===null&&zt(y);break;case 30:zt(y);break;default:zt(y)}d=d.sibling}}function dr(d,y,E){for(E=E&&(y.subtreeFlags&8772)!==0,y=y.child;y!==null;){var z=y.alternate,H=d,ee=y,Pe=ee.flags;switch(ee.tag){case 0:case 11:case 15:dr(H,ee,E),S(4,ee);break;case 1:if(dr(H,ee,E),z=ee,H=z.stateNode,typeof H.componentDidMount=="function")try{H.componentDidMount()}catch(Ht){Ln(z,z.return,Ht)}if(z=ee,H=z.updateQueue,H!==null){var He=z.stateNode;try{var wt=H.shared.hiddenCallbacks;if(wt!==null)for(H.shared.hiddenCallbacks=null,H=0;H<wt.length;H++)xp(wt[H],He)}catch(Ht){Ln(z,z.return,Ht)}}E&&Pe&64&&L(ee),U(ee,ee.return);break;case 27:_e(ee);case 26:case 5:dr(H,ee,E),E&&z===null&&Pe&4&&Z(ee),U(ee,ee.return);break;case 12:dr(H,ee,E);break;case 13:dr(H,ee,E),E&&Pe&4&&mt(H,ee);break;case 22:ee.memoizedState===null&&dr(H,ee,E),U(ee,ee.return);break;case 30:break;default:dr(H,ee,E)}y=y.sibling}}function rr(d,y){var E=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),d=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(d=y.memoizedState.cachePool.pool),d!==E&&(d!=null&&d.refCount++,E!=null&&Fh(E))}function yr(d,y){d=null,y.alternate!==null&&(d=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==d&&(y.refCount++,d!=null&&Fh(d))}function _r(d,y,E,z){if(y.subtreeFlags&10256)for(y=y.child;y!==null;)Kr(d,y,E,z),y=y.sibling}function Kr(d,y,E,z){var H=y.flags;switch(y.tag){case 0:case 11:case 15:_r(d,y,E,z),H&2048&&S(9,y);break;case 1:_r(d,y,E,z);break;case 3:_r(d,y,E,z),H&2048&&(d=null,y.alternate!==null&&(d=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==d&&(y.refCount++,d!=null&&Fh(d)));break;case 12:if(H&2048){_r(d,y,E,z),d=y.stateNode;try{var ee=y.memoizedProps,Pe=ee.id,He=ee.onPostCommit;typeof He=="function"&&He(Pe,y.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(wt){Ln(y,y.return,wt)}}else _r(d,y,E,z);break;case 13:_r(d,y,E,z);break;case 23:break;case 22:ee=y.stateNode,Pe=y.alternate,y.memoizedState!==null?ee._visibility&2?_r(d,y,E,z):zr(d,y):ee._visibility&2?_r(d,y,E,z):(ee._visibility|=2,Ar(d,y,E,z,(y.subtreeFlags&10256)!==0)),H&2048&&rr(Pe,y);break;case 24:_r(d,y,E,z),H&2048&&yr(y.alternate,y);break;default:_r(d,y,E,z)}}function Ar(d,y,E,z,H){for(H=H&&(y.subtreeFlags&10256)!==0,y=y.child;y!==null;){var ee=d,Pe=y,He=E,wt=z,Ht=Pe.flags;switch(Pe.tag){case 0:case 11:case 15:Ar(ee,Pe,He,wt,H),S(8,Pe);break;case 23:break;case 22:var ir=Pe.stateNode;Pe.memoizedState!==null?ir._visibility&2?Ar(ee,Pe,He,wt,H):zr(ee,Pe):(ir._visibility|=2,Ar(ee,Pe,He,wt,H)),H&&Ht&2048&&rr(Pe.alternate,Pe);break;case 24:Ar(ee,Pe,He,wt,H),H&&Ht&2048&&yr(Pe.alternate,Pe);break;default:Ar(ee,Pe,He,wt,H)}y=y.sibling}}function zr(d,y){if(y.subtreeFlags&10256)for(y=y.child;y!==null;){var E=d,z=y,H=z.flags;switch(z.tag){case 22:zr(E,z),H&2048&&rr(z.alternate,z);break;case 24:zr(E,z),H&2048&&yr(z.alternate,z);break;default:zr(E,z)}y=y.sibling}}var Hr=8192;function pa(d){if(d.subtreeFlags&Hr)for(d=d.child;d!==null;)oa(d),d=d.sibling}function oa(d){switch(d.tag){case 26:pa(d),d.flags&Hr&&d.memoizedState!==null&&Tb(xt,d.memoizedState,d.memoizedProps);break;case 5:pa(d);break;case 3:case 4:var y=xt;xt=X0(d.stateNode.containerInfo),pa(d),xt=y;break;case 22:d.memoizedState===null&&(y=d.alternate,y!==null&&y.memoizedState!==null?(y=Hr,Hr=16777216,pa(d),Hr=y):pa(d));break;default:pa(d)}}function pn(d){var y=d.alternate;if(y!==null&&(d=y.child,d!==null)){y.child=null;do y=d.sibling,d.sibling=null,d=y;while(d!==null)}}function mn(d){var y=d.deletions;if((d.flags&16)!==0){if(y!==null)for(var E=0;E<y.length;E++){var z=y[E];Ue=z,ia(z,d)}pn(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Ua(d),d=d.sibling}function Ua(d){switch(d.tag){case 0:case 11:case 15:mn(d),d.flags&2048&&D(9,d,d.return);break;case 3:mn(d);break;case 12:mn(d);break;case 22:var y=d.stateNode;d.memoizedState!==null&&y._visibility&2&&(d.return===null||d.return.tag!==13)?(y._visibility&=-3,Wa(d)):mn(d);break;default:mn(d)}}function Wa(d){var y=d.deletions;if((d.flags&16)!==0){if(y!==null)for(var E=0;E<y.length;E++){var z=y[E];Ue=z,ia(z,d)}pn(d)}for(d=d.child;d!==null;){switch(y=d,y.tag){case 0:case 11:case 15:D(8,y,y.return),Wa(y);break;case 22:E=y.stateNode,E._visibility&2&&(E._visibility&=-3,Wa(y));break;default:Wa(y)}d=d.sibling}}function ia(d,y){for(;Ue!==null;){var E=Ue;switch(E.tag){case 0:case 11:case 15:D(8,E,y);break;case 23:case 22:if(E.memoizedState!==null&&E.memoizedState.cachePool!==null){var z=E.memoizedState.cachePool.pool;z!=null&&z.refCount++}break;case 24:Fh(E.memoizedState.cache)}if(z=E.child,z!==null)z.return=E,Ue=z;else e:for(E=d;Ue!==null;){z=Ue;var H=z.sibling,ee=z.return;if(tt(z),z===E){Ue=null;break e}if(H!==null){H.return=ee,Ue=H;break e}Ue=ee}}}var jr={getCacheForType:function(d){var y=xi(Ii),E=y.data.get(d);return E===void 0&&(E=d(),y.data.set(d,E)),E}},Fa=typeof WeakMap=="function"?WeakMap:Map,Zr=0,ya=null,xa=null,Pa=0,wa=0,En=null,ai=!1,Cn=!1,nn=!1,Ga=0,qr=0,vn=0,Qn=0,an=0,zn=0,Yi=0,Ji=null,fi=null,Qi=!1,ho=0,us=1/0,ll=null,ds=null,li=0,No=null,vc=null,_c=0,Sx=0,z0=null,U_=null,Qm=0,L0=null;function Bo(){if((Zr&2)!==0&&Pa!==0)return Pa&-Pa;if(Re.T!==null){var d=ac;return d!==0?d:Rx()}return ye()}function Tx(){zn===0&&(zn=(Pa&536870912)===0||Tn?yi():536870912);var d=io.current;return d!==null&&(d.flags|=32),zn}function jo(d,y,E){(d===ya&&(wa===2||wa===9)||d.cancelPendingCommit!==null)&&(cf(d,0),nu(d,Pa,zn,!1)),yn(d,E),((Zr&2)===0||d!==ya)&&(d===ya&&((Zr&2)===0&&(Qn|=E),qr===4&&nu(d,Pa,zn,!1)),wc(d))}function Ex(d,y,E){if((Zr&6)!==0)throw Error(c(327));var z=!E&&(y&124)===0&&(y&d.expiredLanes)===0||jn(d,y),H=z?eg(d,y):$0(d,y,!0),ee=z;do{if(H===0){Cn&&!z&&nu(d,y,0,!1);break}else{if(E=d.current.alternate,ee&&!G_(E)){H=$0(d,y,!1),ee=!1;continue}if(H===2){if(ee=y,d.errorRecoveryDisabledLanes&ee)var Pe=0;else Pe=d.pendingLanes&-536870913,Pe=Pe!==0?Pe:Pe&536870912?536870912:0;if(Pe!==0){y=Pe;e:{var He=d;H=Ji;var wt=He.current.memoizedState.isDehydrated;if(wt&&(cf(He,Pe).flags|=256),Pe=$0(He,Pe,!1),Pe!==2){if(nn&&!wt){He.errorRecoveryDisabledLanes|=ee,Qn|=ee,H=4;break e}ee=fi,fi=H,ee!==null&&(fi===null?fi=ee:fi.push.apply(fi,ee))}H=Pe}if(ee=!1,H!==2)continue}}if(H===1){cf(d,0),nu(d,y,0,!0);break}e:{switch(z=d,ee=H,ee){case 0:case 1:throw Error(c(345));case 4:if((y&4194048)!==y)break;case 6:nu(z,y,zn,!ai);break e;case 2:fi=null;break;case 3:case 5:break;default:throw Error(c(329))}if((y&62914560)===y&&(H=ho+300-Er(),10<H)){if(nu(z,y,zn,!ai),In(z,0,!0)!==0)break e;z.timeoutHandle=lb(Cx.bind(null,z,E,fi,ll,Qi,y,zn,Qn,Yi,ai,ee,2,-0,0),H);break e}Cx(z,E,fi,ll,Qi,y,zn,Qn,Yi,ai,ee,0,-0,0)}}break}while(!0);wc(d)}function Cx(d,y,E,z,H,ee,Pe,He,wt,Ht,ir,br,Wt,Xt){if(d.timeoutHandle=-1,br=y.subtreeFlags,(br&8192||(br&16785408)===16785408)&&(Kp={stylesheets:null,count:0,unsuspend:Sb},oa(y),br=Eb(),br!==null)){d.cancelPendingCommit=br(X_.bind(null,d,y,ee,E,z,H,Pe,He,wt,ir,1,Wt,Xt)),nu(d,ee,Pe,!Ht);return}X_(d,y,ee,E,z,H,Pe,He,wt)}function G_(d){for(var y=d;;){var E=y.tag;if((E===0||E===11||E===15)&&y.flags&16384&&(E=y.updateQueue,E!==null&&(E=E.stores,E!==null)))for(var z=0;z<E.length;z++){var H=E[z],ee=H.getSnapshot;H=H.value;try{if(!ki(ee(),H))return!1}catch{return!1}}if(E=y.child,y.subtreeFlags&16384&&E!==null)E.return=y,y=E;else{if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function nu(d,y,E,z){y&=~an,y&=~Qn,d.suspendedLanes|=y,d.pingedLanes&=~y,z&&(d.warmLanes|=y),z=d.expirationTimes;for(var H=y;0<H;){var ee=31-na(H),Pe=1<<ee;z[ee]=-1,H&=~Pe}E!==0&&js(d,E,y)}function bc(){return(Zr&6)===0?(Up(0),!1):!0}function es(){if(xa!==null){if(wa===0)var d=xa.return;else d=xa,Sl=Ro=null,Gh(d),rd=null,th=0,d=xa;for(;d!==null;)v(d.alternate,d),d=d.return;xa=null}}function cf(d,y){var E=d.timeoutHandle;E!==-1&&(d.timeoutHandle=-1,P2(E)),E=d.cancelPendingCommit,E!==null&&(d.cancelPendingCommit=null,E()),es(),ya=d,xa=E=Yl(d.current,null),Pa=y,wa=0,En=null,ai=!1,Cn=jn(d,y),nn=!1,Yi=zn=an=Qn=vn=qr=0,fi=Ji=null,Qi=!1,(y&8)!==0&&(y|=y&32);var z=d.entangledLanes;if(z!==0)for(d=d.entanglements,z&=y;0<z;){var H=31-na(z),ee=1<<H;y|=d[H],z&=~ee}return Ga=y,ju(),E}function Bp(d,y){en=null,Re.H=Jc,y===Zu||y===ic?(y=Wc(),wa=3):y===D0?(y=Wc(),wa=4):wa=y===R0?8:y!==null&&typeof y=="object"&&typeof y.then=="function"?6:1,En=y,xa===null&&(qr=1,gc(d,Ri(y,d.current)))}function H_(){var d=Re.H;return Re.H=Jc,d===null?Jc:d}function q_(){var d=Re.A;return Re.A=jr,d}function uf(){qr=4,ai||(Pa&4194048)!==Pa&&io.current!==null||(Cn=!0),(vn&134217727)===0&&(Qn&134217727)===0||ya===null||nu(ya,Pa,zn,!1)}function $0(d,y,E){var z=Zr;Zr|=2;var H=H_(),ee=q_();(ya!==d||Pa!==y)&&(ll=null,cf(d,y)),y=!1;var Pe=qr;e:do try{if(wa!==0&&xa!==null){var He=xa,wt=En;switch(wa){case 8:es(),Pe=6;break e;case 3:case 2:case 9:case 6:io.current===null&&(y=!0);var Ht=wa;if(wa=0,En=null,jp(d,He,wt,Ht),E&&Cn){Pe=0;break e}break;default:Ht=wa,wa=0,En=null,jp(d,He,wt,Ht)}}df(),Pe=qr;break}catch(ir){Bp(d,ir)}while(!0);return y&&d.shellSuspendCounter++,Sl=Ro=null,Zr=z,Re.H=H,Re.A=ee,xa===null&&(ya=null,Pa=0,ju()),Pe}function df(){for(;xa!==null;)W_(xa)}function eg(d,y){var E=Zr;Zr|=2;var z=H_(),H=q_();ya!==d||Pa!==y?(ll=null,us=Er()+500,cf(d,y)):Cn=jn(d,y);e:do try{if(wa!==0&&xa!==null){y=xa;var ee=En;t:switch(wa){case 1:wa=0,En=null,jp(d,y,ee,1);break;case 2:case 9:if(Tr(ee)){wa=0,En=null,K_(y);break}y=function(){wa!==2&&wa!==9||ya!==d||(wa=7),wc(d)},ee.then(y,y);break e;case 3:wa=7;break e;case 4:wa=5;break e;case 7:Tr(ee)?(wa=0,En=null,K_(y)):(wa=0,En=null,jp(d,y,ee,7));break;case 5:var Pe=null;switch(xa.tag){case 26:Pe=xa.memoizedState;case 5:case 27:var He=xa;if(!Pe||Kx(Pe)){wa=0,En=null;var wt=He.sibling;if(wt!==null)xa=wt;else{var Ht=He.return;Ht!==null?(xa=Ht,N0(Ht)):xa=null}break t}}wa=0,En=null,jp(d,y,ee,5);break;case 6:wa=0,En=null,jp(d,y,ee,6);break;case 8:es(),qr=6;break e;default:throw Error(c(462))}}E2();break}catch(ir){Bp(d,ir)}while(!0);return Sl=Ro=null,Re.H=z,Re.A=H,Zr=E,xa!==null?0:(ya=null,Pa=0,ju(),qr)}function E2(){for(;xa!==null&&!$t();)W_(xa)}function W_(d){var y=Li(d.alternate,d,Ga);d.memoizedProps=d.pendingProps,y===null?N0(d):xa=y}function K_(d){var y=d,E=y.alternate;switch(y.tag){case 15:case 0:y=lf(E,y,y.pendingProps,y.type,void 0,Pa);break;case 11:y=lf(E,y,y.pendingProps,y.type.render,y.ref,Pa);break;case 5:Gh(y);default:v(E,y),y=xa=cp(y,Ga),y=Li(E,y,Ga)}d.memoizedProps=d.pendingProps,y===null?N0(d):xa=y}function jp(d,y,E,z){Sl=Ro=null,Gh(y),rd=null,th=0;var H=y.return;try{if(tu(d,H,y,E,Pa)){qr=1,gc(d,Ri(E,d.current)),xa=null;return}}catch(ee){if(H!==null)throw xa=H,ee;qr=1,gc(d,Ri(E,d.current)),xa=null;return}y.flags&32768?(Tn||z===1?d=!0:Cn||(Pa&536870912)!==0?d=!1:(ai=d=!0,(z===2||z===9||z===3||z===6)&&(z=io.current,z!==null&&z.tag===13&&(z.flags|=16384))),Z_(y,d)):N0(y)}function N0(d){var y=d;do{if((y.flags&32768)!==0){Z_(y,ai);return}d=y.return;var E=o(y.alternate,y,Ga);if(E!==null){xa=E;return}if(y=y.sibling,y!==null){xa=y;return}xa=y=d}while(y!==null);qr===0&&(qr=5)}function Z_(d,y){do{var E=m(d.alternate,d);if(E!==null){E.flags&=32767,xa=E;return}if(E=d.return,E!==null&&(E.flags|=32768,E.subtreeFlags=0,E.deletions=null),!y&&(d=d.sibling,d!==null)){xa=d;return}xa=d=E}while(d!==null);qr=6,xa=null}function X_(d,y,E,z,H,ee,Pe,He,wt){d.cancelPendingCommit=null;do ni();while(li!==0);if((Zr&6)!==0)throw Error(c(327));if(y!==null){if(y===d.current)throw Error(c(177));if(ee=y.lanes|y.childLanes,ee|=zh,Xn(d,E,ee,Pe,He,wt),d===ya&&(xa=ya=null,Pa=0),vc=y,No=d,_c=E,Sx=ee,z0=H,U_=z,(y.subtreeFlags&10256)!==0||(y.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,Mx($a,function(){return tg(),null})):(d.callbackNode=null,d.callbackPriority=0),z=(y.flags&13878)!==0,(y.subtreeFlags&13878)!==0||z){z=Re.T,Re.T=null,H=Ge.p,Ge.p=2,Pe=Zr,Zr|=4;try{We(d,y,E)}finally{Zr=Pe,Ge.p=H,Re.T=z}}li=1,B0(),Y_(),hf()}}function B0(){if(li===1){li=0;var d=No,y=vc,E=(y.flags&13878)!==0;if((y.subtreeFlags&13878)!==0||E){E=Re.T,Re.T=null;var z=Ge.p;Ge.p=2;var H=Zr;Zr|=4;try{Ft(y,d);var ee=H0,Pe=rp(d.containerInfo),He=ee.focusedElem,wt=ee.selectionRange;if(Pe!==He&&He&&He.ownerDocument&&_0(He.ownerDocument.documentElement,He)){if(wt!==null&&ap(He)){var Ht=wt.start,ir=wt.end;if(ir===void 0&&(ir=Ht),"selectionStart"in He)He.selectionStart=Ht,He.selectionEnd=Math.min(ir,He.value.length);else{var br=He.ownerDocument||document,Wt=br&&br.defaultView||window;if(Wt.getSelection){var Xt=Wt.getSelection(),Na=He.textContent.length,Ma=Math.min(wt.start,Na),Kn=wt.end===void 0?Ma:Math.min(wt.end,Na);!Xt.extend&&Ma>Kn&&(Pe=Kn,Kn=Ma,Ma=Pe);var Nt=v0(He,Ma),kt=v0(He,Kn);if(Nt&&kt&&(Xt.rangeCount!==1||Xt.anchorNode!==Nt.node||Xt.anchorOffset!==Nt.offset||Xt.focusNode!==kt.node||Xt.focusOffset!==kt.offset)){var Ut=br.createRange();Ut.setStart(Nt.node,Nt.offset),Xt.removeAllRanges(),Ma>Kn?(Xt.addRange(Ut),Xt.extend(kt.node,kt.offset)):(Ut.setEnd(kt.node,kt.offset),Xt.addRange(Ut))}}}}for(br=[],Xt=He;Xt=Xt.parentNode;)Xt.nodeType===1&&br.push({element:Xt,left:Xt.scrollLeft,top:Xt.scrollTop});for(typeof He.focus=="function"&&He.focus(),He=0;He<br.length;He++){var pr=br[He];pr.element.scrollLeft=pr.left,pr.element.scrollTop=pr.top}}ey=!!Bx,H0=Bx=null}finally{Zr=H,Ge.p=z,Re.T=E}}d.current=y,li=2}}function Y_(){if(li===2){li=0;var d=No,y=vc,E=(y.flags&8772)!==0;if((y.subtreeFlags&8772)!==0||E){E=Re.T,Re.T=null;var z=Ge.p;Ge.p=2;var H=Zr;Zr|=4;try{qe(d,y.alternate,y)}finally{Zr=H,Ge.p=z,Re.T=E}}li=3}}function hf(){if(li===4||li===3){li=0,or();var d=No,y=vc,E=_c,z=U_;(y.subtreeFlags&10256)!==0||(y.flags&10256)!==0?li=5:(li=0,vc=No=null,J_(d,d.pendingLanes));var H=d.pendingLanes;if(H===0&&(ds=null),St(E),y=y.stateNode,Dr&&typeof Dr.onCommitFiberRoot=="function")try{Dr.onCommitFiberRoot(kr,y,void 0,(y.current.flags&128)===128)}catch{}if(z!==null){y=Re.T,H=Ge.p,Ge.p=2,Re.T=null;try{for(var ee=d.onRecoverableError,Pe=0;Pe<z.length;Pe++){var He=z[Pe];ee(He.value,{componentStack:He.stack})}}finally{Re.T=y,Ge.p=H}}(_c&3)!==0&&ni(),wc(d),H=d.pendingLanes,(E&4194090)!==0&&(H&42)!==0?d===L0?Qm++:(Qm=0,L0=d):Qm=0,Up(0)}}function J_(d,y){(d.pooledCacheLanes&=y)===0&&(y=d.pooledCache,y!=null&&(d.pooledCache=null,Fh(y)))}function ni(d){return B0(),Y_(),hf(),tg()}function tg(){if(li!==5)return!1;var d=No,y=Sx;Sx=0;var E=St(_c),z=Re.T,H=Ge.p;try{Ge.p=32>E?32:E,Re.T=null,E=z0,z0=null;var ee=No,Pe=_c;if(li=0,vc=No=null,_c=0,(Zr&6)!==0)throw Error(c(331));var He=Zr;if(Zr|=4,Ua(ee.current),Kr(ee,ee.current,Pe,E),Zr=He,Up(0,!1),Dr&&typeof Dr.onPostCommitFiberRoot=="function")try{Dr.onPostCommitFiberRoot(kr,ee)}catch{}return!0}finally{Ge.p=H,Re.T=z,J_(d,y)}}function Dx(d,y,E){y=Ri(E,y),y=lo(d.stateNode,y,2),d=El(d,y,2),d!==null&&(yn(d,2),wc(d))}function Ln(d,y,E){if(d.tag===3)Dx(d,d,E);else for(;y!==null;){if(y.tag===3){Dx(y,d,E);break}else if(y.tag===1){var z=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(ds===null||!ds.has(z))){d=Ri(E,d),E=yc(2),z=El(y,E,2),z!==null&&(eu(E,z,y,d),yn(z,2),wc(z));break}}y=y.return}}function Op(d,y,E){var z=d.pingCache;if(z===null){z=d.pingCache=new Fa;var H=new Set;z.set(y,H)}else H=z.get(y),H===void 0&&(H=new Set,z.set(y,H));H.has(E)||(nn=!0,H.add(E),d=rg.bind(null,d,y,E),y.then(d,d))}function rg(d,y,E){var z=d.pingCache;z!==null&&z.delete(y),d.pingedLanes|=d.suspendedLanes&E,d.warmLanes&=~E,ya===d&&(Pa&E)===E&&(qr===4||qr===3&&(Pa&62914560)===Pa&&300>Er()-ho?(Zr&2)===0&&cf(d,0):an|=E,Yi===Pa&&(Yi=0)),wc(d)}function Px(d,y){y===0&&(y=Ka()),d=Ou(d,y),d!==null&&(yn(d,y),wc(d))}function Q_(d){var y=d.memoizedState,E=0;y!==null&&(E=y.retryLane),Px(d,E)}function ag(d,y){var E=0;switch(d.tag){case 13:var z=d.stateNode,H=d.memoizedState;H!==null&&(E=H.retryLane);break;case 19:z=d.stateNode;break;case 22:z=d.stateNode._retryCache;break;default:throw Error(c(314))}z!==null&&z.delete(y),Px(d,E)}function Mx(d,y){return yt(d,y)}var ff=null,Fp=null,j0=!1,Vp=!1,ng=!1,ld=0;function wc(d){d!==Fp&&d.next===null&&(Fp===null?ff=Fp=d:Fp=Fp.next=d),Vp=!0,j0||(j0=!0,C2())}function Up(d,y){if(!ng&&Vp){ng=!0;do for(var E=!1,z=ff;z!==null;){if(d!==0){var H=z.pendingLanes;if(H===0)var ee=0;else{var Pe=z.suspendedLanes,He=z.pingedLanes;ee=(1<<31-na(42|d)+1)-1,ee&=H&~(Pe&~He),ee=ee&201326741?ee&201326741|1:ee?ee|2:0}ee!==0&&(E=!0,kx(z,ee))}else ee=Pa,ee=In(z,z===ya?ee:0,z.cancelPendingCommit!==null||z.timeoutHandle!==-1),(ee&3)===0||jn(z,ee)||(E=!0,kx(z,ee));z=z.next}while(E);ng=!1}}function eb(){Ax()}function Ax(){Vp=j0=!1;var d=0;ld!==0&&(Fx()&&(d=ld),ld=0);for(var y=Er(),E=null,z=ff;z!==null;){var H=z.next,ee=O0(z,y);ee===0?(z.next=null,E===null?ff=H:E.next=H,H===null&&(Fp=E)):(E=z,(d!==0||(ee&3)!==0)&&(Vp=!0)),z=H}Up(d)}function O0(d,y){for(var E=d.suspendedLanes,z=d.pingedLanes,H=d.expirationTimes,ee=d.pendingLanes&-62914561;0<ee;){var Pe=31-na(ee),He=1<<Pe,wt=H[Pe];wt===-1?((He&E)===0||(He&z)!==0)&&(H[Pe]=Wr(He,y)):wt<=y&&(d.expiredLanes|=He),ee&=~He}if(y=ya,E=Pa,E=In(d,d===y?E:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),z=d.callbackNode,E===0||d===y&&(wa===2||wa===9)||d.cancelPendingCommit!==null)return z!==null&&z!==null&&dt(z),d.callbackNode=null,d.callbackPriority=0;if((E&3)===0||jn(d,E)){if(y=E&-E,y===d.callbackPriority)return y;switch(z!==null&&dt(z),St(E)){case 2:case 8:E=Fr;break;case 32:E=$a;break;case 268435456:E=ja;break;default:E=$a}return z=Sc.bind(null,d),E=yt(E,z),d.callbackPriority=y,d.callbackNode=E,y}return z!==null&&z!==null&&dt(z),d.callbackPriority=2,d.callbackNode=null,2}function Sc(d,y){if(li!==0&&li!==5)return d.callbackNode=null,d.callbackPriority=0,null;var E=d.callbackNode;if(ni()&&d.callbackNode!==E)return null;var z=Pa;return z=In(d,d===ya?z:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),z===0?null:(Ex(d,z,y),O0(d,Er()),d.callbackNode!=null&&d.callbackNode===E?Sc.bind(null,d):null)}function kx(d,y){if(ni())return null;Ex(d,y,!0)}function C2(){M2(function(){(Zr&6)!==0?yt(Pr,eb):Ax()})}function Rx(){return ld===0&&(ld=yi()),ld}function tb(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Mu(""+d)}function rb(d,y){var E=y.ownerDocument.createElement("input");return E.name=y.name,E.value=y.value,d.id&&E.setAttribute("form",d.id),y.parentNode.insertBefore(E,y),d=new FormData(d),E.parentNode.removeChild(E),d}function D2(d,y,E,z,H){if(y==="submit"&&E&&E.stateNode===H){var ee=tb((H[Qe]||null).action),Pe=z.submitter;Pe&&(y=(y=Pe[Qe]||null)?tb(y.formAction):Pe.getAttribute("formAction"),y!==null&&(ee=y,Pe=null));var He=new Ch("action","action",null,z,H);d.push({event:He,listeners:[{instance:null,listener:function(){if(z.defaultPrevented){if(ld!==0){var wt=Pe?rb(H,Pe):new FormData(H);mc(E,{pending:!0,data:wt,method:H.method,action:ee},null,wt)}}else typeof ee=="function"&&(He.preventDefault(),wt=Pe?rb(H,Pe):new FormData(H),mc(E,{pending:!0,data:wt,method:H.method,action:ee},ee,wt))},currentTarget:H}]})}}for(var Ix=0;Ix<Fc.length;Ix++){var zx=Fc[Ix],Lx=zx.toLowerCase(),ab=zx[0].toUpperCase()+zx.slice(1);Rs(Lx,"on"+ab)}Rs(ip,"onAnimationEnd"),Rs(Ih,"onAnimationIteration"),Rs(kd,"onAnimationStart"),Rs("dblclick","onDoubleClick"),Rs("focusin","onFocus"),Rs("focusout","onBlur"),Rs(sp,"onTransitionRun"),Rs(jc,"onTransitionStart"),Rs(op,"onTransitionCancel"),Rs(lp,"onTransitionEnd"),ca("onMouseEnter",["mouseout","mouseover"]),ca("onMouseLeave",["mouseout","mouseover"]),ca("onPointerEnter",["pointerout","pointerover"]),ca("onPointerLeave",["pointerout","pointerover"]),Ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ca("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pf));function F0(d,y){y=(y&4)!==0;for(var E=0;E<d.length;E++){var z=d[E],H=z.event;z=z.listeners;e:{var ee=void 0;if(y)for(var Pe=z.length-1;0<=Pe;Pe--){var He=z[Pe],wt=He.instance,Ht=He.currentTarget;if(He=He.listener,wt!==ee&&H.isPropagationStopped())break e;ee=He,H.currentTarget=Ht;try{ee(H)}catch(ir){zp(ir)}H.currentTarget=null,ee=wt}else for(Pe=0;Pe<z.length;Pe++){if(He=z[Pe],wt=He.instance,Ht=He.currentTarget,He=He.listener,wt!==ee&&H.isPropagationStopped())break e;ee=He,H.currentTarget=Ht;try{ee(H)}catch(ir){zp(ir)}H.currentTarget=null,ee=wt}}}}function gn(d,y){var E=y[bt];E===void 0&&(E=y[bt]=new Set);var z=d+"__bubble";E.has(z)||($x(y,d,2,!1),E.add(z))}function V0(d,y,E){var z=0;y&&(z|=4),$x(E,d,z,y)}var mf="_reactListening"+Math.random().toString(36).slice(2);function U0(d){if(!d[mf]){d[mf]=!0,Qr.forEach(function(E){E!=="selectionchange"&&(nb.has(E)||V0(E,!1,d),V0(E,!0,d))});var y=d.nodeType===9?d:d.ownerDocument;y===null||y[mf]||(y[mf]=!0,V0("selectionchange",!1,y))}}function $x(d,y,E,z){switch(ty(y)){case 2:var H=R2;break;case 8:H=kb;break;default:H=Yx}E=H.bind(null,y,E,d),H=void 0,!wr||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(H=!0),z?H!==void 0?d.addEventListener(y,E,{capture:!0,passive:H}):d.addEventListener(y,E,!0):H!==void 0?d.addEventListener(y,E,{passive:H}):d.addEventListener(y,E,!1)}function G0(d,y,E,z,H){var ee=z;if((y&1)===0&&(y&2)===0&&z!==null)e:for(;;){if(z===null)return;var Pe=z.tag;if(Pe===3||Pe===4){var He=z.stateNode.containerInfo;if(He===H)break;if(Pe===4)for(Pe=z.return;Pe!==null;){var wt=Pe.tag;if((wt===3||wt===4)&&Pe.stateNode.containerInfo===H)return;Pe=Pe.return}for(;He!==null;){if(Pe=Gt(He),Pe===null)return;if(wt=Pe.tag,wt===5||wt===6||wt===26||wt===27){z=ee=Pe;continue e}He=He.parentNode}}z=z.return}to(function(){var Ht=ee,ir=Lm(E),br=[];e:{var Wt=Oc.get(d);if(Wt!==void 0){var Xt=Ch,Na=d;switch(d){case"keypress":if(ku(E)===0)break e;case"keydown":case"keyup":Xt=Vs;break;case"focusin":Na="focus",Xt=wn;break;case"focusout":Na="blur",Xt=wn;break;case"beforeblur":case"afterblur":Xt=wn;break;case"click":if(E.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xt=Yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xt=Ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xt=Mh;break;case ip:case Ih:case kd:Xt=Co;break;case lp:Xt=bx;break;case"scroll":case"scrollend":Xt=Zf;break;case"wheel":Xt=kh;break;case"copy":case"cut":case"paste":Xt=Dh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xt=Ph;break;case"toggle":case"beforetoggle":Xt=Qo}var Ma=(y&4)!==0,Kn=!Ma&&(d==="scroll"||d==="scrollend"),Nt=Ma?Wt!==null?Wt+"Capture":null:Wt;Ma=[];for(var kt=Ht,Ut;kt!==null;){var pr=kt;if(Ut=pr.stateNode,pr=pr.tag,pr!==5&&pr!==26&&pr!==27||Ut===null||Nt===null||(pr=Au(kt,Nt),pr!=null&&Ma.push(iu(kt,pr,Ut))),Kn)break;kt=kt.return}0<Ma.length&&(Wt=new Xt(Wt,Na,null,E,ir),br.push({event:Wt,listeners:Ma}))}}if((y&7)===0){e:{if(Wt=d==="mouseover"||d==="pointerover",Xt=d==="mouseout"||d==="pointerout",Wt&&E!==Ra&&(Na=E.relatedTarget||E.fromElement)&&(Gt(Na)||Na[ct]))break e;if((Xt||Wt)&&(Wt=ir.window===ir?ir:(Wt=ir.ownerDocument)?Wt.defaultView||Wt.parentWindow:window,Xt?(Na=E.relatedTarget||E.toElement,Xt=Ht,Na=Na?Gt(Na):null,Na!==null&&(Kn=_(Na),Ma=Na.tag,Na!==Kn||Ma!==5&&Ma!==27&&Ma!==6)&&(Na=null)):(Xt=null,Na=Ht),Xt!==Na)){if(Ma=Yo,pr="onMouseLeave",Nt="onMouseEnter",kt="mouse",(d==="pointerout"||d==="pointerover")&&(Ma=Ph,pr="onPointerLeave",Nt="onPointerEnter",kt="pointer"),Kn=Xt==null?Wt:Ur(Xt),Ut=Na==null?Wt:Ur(Na),Wt=new Ma(pr,kt+"leave",Xt,E,ir),Wt.target=Kn,Wt.relatedTarget=Ut,pr=null,Gt(ir)===Ht&&(Ma=new Ma(Nt,kt+"enter",Na,E,ir),Ma.target=Ut,Ma.relatedTarget=Kn,pr=Ma),Kn=pr,Xt&&Na)t:{for(Ma=Xt,Nt=Na,kt=0,Ut=Ma;Ut;Ut=gf(Ut))kt++;for(Ut=0,pr=Nt;pr;pr=gf(pr))Ut++;for(;0<kt-Ut;)Ma=gf(Ma),kt--;for(;0<Ut-kt;)Nt=gf(Nt),Ut--;for(;kt--;){if(Ma===Nt||Nt!==null&&Ma===Nt.alternate)break t;Ma=gf(Ma),Nt=gf(Nt)}Ma=null}else Ma=null;Xt!==null&&ig(br,Wt,Xt,Ma,!1),Na!==null&&Kn!==null&&ig(br,Kn,Na,Ma,!0)}}e:{if(Wt=Ht?Ur(Ht):window,Xt=Wt.nodeName&&Wt.nodeName.toLowerCase(),Xt==="select"||Xt==="input"&&Wt.type==="file")var aa=Dd;else if(_l(Wt))if(Oi)aa=Kl;else{aa=x0;var ln=Ki}else Xt=Wt.nodeName,!Xt||Xt.toLowerCase()!=="input"||Wt.type!=="checkbox"&&Wt.type!=="radio"?Ht&&Rc(Ht.elementType)&&(aa=Dd):aa=tp;if(aa&&(aa=aa(d,Ht))){Gr(br,aa,E,ir);break e}ln&&ln(d,Wt,Ht),d==="focusout"&&Ht&&Wt.type==="number"&&Ht.memoizedProps.value!=null&&Qs(Wt,"number",Wt.value)}switch(ln=Ht?Ur(Ht):window,d){case"focusin":(_l(ln)||ln.contentEditable==="true")&&(Bu=ln,Ad=Ht,el=null);break;case"focusout":el=Ad=Bu=null;break;case"mousedown":Nm=!0;break;case"contextmenu":case"mouseup":case"dragend":Nm=!1,w0(br,E,ir);break;case"selectionchange":if(b0)break;case"keydown":case"keyup":w0(br,E,ir)}var da;if(Ed)e:{switch(d){case"compositionstart":var Aa="onCompositionStart";break e;case"compositionend":Aa="onCompositionEnd";break e;case"compositionupdate":Aa="onCompositionUpdate";break e}Aa=void 0}else Rr?Lu(d,E)&&(Aa="onCompositionEnd"):d==="keydown"&&E.keyCode===229&&(Aa="onCompositionStart");Aa&&(g0&&E.locale!=="ko"&&(Rr||Aa!=="onCompositionStart"?Aa==="onCompositionEnd"&&Rr&&(da=Ta()):(va=ir,bs="value"in va?va.value:va.textContent,Rr=!0)),ln=su(Ht,Aa),0<ln.length&&(Aa=new vl(Aa,d,null,E,ir),br.push({event:Aa,listeners:ln}),da?Aa.data=da:(da=ua(E),da!==null&&(Aa.data=da)))),(da=wx?Qf(d,E):ea(d,E))&&(Aa=su(Ht,"onBeforeInput"),0<Aa.length&&(ln=new vl("onBeforeInput","beforeinput",null,E,ir),br.push({event:ln,listeners:Aa}),ln.data=da)),D2(br,d,Ht,E,ir)}F0(br,y)})}function iu(d,y,E){return{instance:d,listener:y,currentTarget:E}}function su(d,y){for(var E=y+"Capture",z=[];d!==null;){var H=d,ee=H.stateNode;if(H=H.tag,H!==5&&H!==26&&H!==27||ee===null||(H=Au(d,E),H!=null&&z.unshift(iu(d,H,ee)),H=Au(d,y),H!=null&&z.push(iu(d,H,ee))),d.tag===3)return z;d=d.return}return[]}function gf(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function ig(d,y,E,z,H){for(var ee=y._reactName,Pe=[];E!==null&&E!==z;){var He=E,wt=He.alternate,Ht=He.stateNode;if(He=He.tag,wt!==null&&wt===z)break;He!==5&&He!==26&&He!==27||Ht===null||(wt=Ht,H?(Ht=Au(E,ee),Ht!=null&&Pe.unshift(iu(E,Ht,wt))):H||(Ht=Au(E,ee),Ht!=null&&Pe.push(iu(E,Ht,wt)))),E=E.return}Pe.length!==0&&d.push({event:y,listeners:Pe})}var ib=/\r\n?/g,sb=/\u0000|\uFFFD/g;function sg(d){return(typeof d=="string"?d:""+d).replace(ib,`
`).replace(sb,"")}function Nx(d,y){return y=sg(y),sg(d)===y}function yf(){}function On(d,y,E,z,H,ee){switch(E){case"children":typeof z=="string"?y==="body"||y==="textarea"&&z===""||eo(d,z):(typeof z=="number"||typeof z=="bigint")&&y!=="body"&&eo(d,""+z);break;case"className":hi(d,"class",z);break;case"tabIndex":hi(d,"tabindex",z);break;case"dir":case"role":case"viewBox":case"width":case"height":hi(d,E,z);break;case"style":Wf(d,z,ee);break;case"data":if(y!=="object"){hi(d,"data",z);break}case"src":case"href":if(z===""&&(y!=="a"||E!=="href")){d.removeAttribute(E);break}if(z==null||typeof z=="function"||typeof z=="symbol"||typeof z=="boolean"){d.removeAttribute(E);break}z=Mu(""+z),d.setAttribute(E,z);break;case"action":case"formAction":if(typeof z=="function"){d.setAttribute(E,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ee=="function"&&(E==="formAction"?(y!=="input"&&On(d,y,"name",H.name,H,null),On(d,y,"formEncType",H.formEncType,H,null),On(d,y,"formMethod",H.formMethod,H,null),On(d,y,"formTarget",H.formTarget,H,null)):(On(d,y,"encType",H.encType,H,null),On(d,y,"method",H.method,H,null),On(d,y,"target",H.target,H,null)));if(z==null||typeof z=="symbol"||typeof z=="boolean"){d.removeAttribute(E);break}z=Mu(""+z),d.setAttribute(E,z);break;case"onClick":z!=null&&(d.onclick=yf);break;case"onScroll":z!=null&&gn("scroll",d);break;case"onScrollEnd":z!=null&&gn("scrollend",d);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(c(61));if(E=z.__html,E!=null){if(H.children!=null)throw Error(c(60));d.innerHTML=E}}break;case"multiple":d.multiple=z&&typeof z!="function"&&typeof z!="symbol";break;case"muted":d.muted=z&&typeof z!="function"&&typeof z!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(z==null||typeof z=="function"||typeof z=="boolean"||typeof z=="symbol"){d.removeAttribute("xlink:href");break}E=Mu(""+z),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",E);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":z!=null&&typeof z!="function"&&typeof z!="symbol"?d.setAttribute(E,""+z):d.removeAttribute(E);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":z&&typeof z!="function"&&typeof z!="symbol"?d.setAttribute(E,""):d.removeAttribute(E);break;case"capture":case"download":z===!0?d.setAttribute(E,""):z!==!1&&z!=null&&typeof z!="function"&&typeof z!="symbol"?d.setAttribute(E,z):d.removeAttribute(E);break;case"cols":case"rows":case"size":case"span":z!=null&&typeof z!="function"&&typeof z!="symbol"&&!isNaN(z)&&1<=z?d.setAttribute(E,z):d.removeAttribute(E);break;case"rowSpan":case"start":z==null||typeof z=="function"||typeof z=="symbol"||isNaN(z)?d.removeAttribute(E):d.setAttribute(E,z);break;case"popover":gn("beforetoggle",d),gn("toggle",d),oi(d,"popover",z);break;case"xlinkActuate":As(d,"http://www.w3.org/1999/xlink","xlink:actuate",z);break;case"xlinkArcrole":As(d,"http://www.w3.org/1999/xlink","xlink:arcrole",z);break;case"xlinkRole":As(d,"http://www.w3.org/1999/xlink","xlink:role",z);break;case"xlinkShow":As(d,"http://www.w3.org/1999/xlink","xlink:show",z);break;case"xlinkTitle":As(d,"http://www.w3.org/1999/xlink","xlink:title",z);break;case"xlinkType":As(d,"http://www.w3.org/1999/xlink","xlink:type",z);break;case"xmlBase":As(d,"http://www.w3.org/XML/1998/namespace","xml:base",z);break;case"xmlLang":As(d,"http://www.w3.org/XML/1998/namespace","xml:lang",z);break;case"xmlSpace":As(d,"http://www.w3.org/XML/1998/namespace","xml:space",z);break;case"is":oi(d,"is",z);break;case"innerText":case"textContent":break;default:(!(2<E.length)||E[0]!=="o"&&E[0]!=="O"||E[1]!=="n"&&E[1]!=="N")&&(E=To.get(E)||E,oi(d,E,z))}}function og(d,y,E,z,H,ee){switch(E){case"style":Wf(d,z,ee);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(c(61));if(E=z.__html,E!=null){if(H.children!=null)throw Error(c(60));d.innerHTML=E}}break;case"children":typeof z=="string"?eo(d,z):(typeof z=="number"||typeof z=="bigint")&&eo(d,""+z);break;case"onScroll":z!=null&&gn("scroll",d);break;case"onScrollEnd":z!=null&&gn("scrollend",d);break;case"onClick":z!=null&&(d.onclick=yf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xa.hasOwnProperty(E))e:{if(E[0]==="o"&&E[1]==="n"&&(H=E.endsWith("Capture"),y=E.slice(2,H?E.length-7:void 0),ee=d[Qe]||null,ee=ee!=null?ee[E]:null,typeof ee=="function"&&d.removeEventListener(y,ee,H),typeof z=="function")){typeof ee!="function"&&ee!==null&&(E in d?d[E]=null:d.hasAttribute(E)&&d.removeAttribute(E)),d.addEventListener(y,z,H);break e}E in d?d[E]=z:z===!0?d.setAttribute(E,""):oi(d,E,z)}}}function hs(d,y,E){switch(y){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gn("error",d),gn("load",d);var z=!1,H=!1,ee;for(ee in E)if(E.hasOwnProperty(ee)){var Pe=E[ee];if(Pe!=null)switch(ee){case"src":z=!0;break;case"srcSet":H=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,y));default:On(d,y,ee,Pe,E,null)}}H&&On(d,y,"srcSet",E.srcSet,E,null),z&&On(d,y,"src",E.src,E,null);return;case"input":gn("invalid",d);var He=ee=Pe=H=null,wt=null,Ht=null;for(z in E)if(E.hasOwnProperty(z)){var ir=E[z];if(ir!=null)switch(z){case"name":H=ir;break;case"type":Pe=ir;break;case"checked":wt=ir;break;case"defaultChecked":Ht=ir;break;case"value":ee=ir;break;case"defaultValue":He=ir;break;case"children":case"dangerouslySetInnerHTML":if(ir!=null)throw Error(c(137,y));break;default:On(d,y,z,ir,E,null)}}Js(d,ee,He,wt,Ht,Pe,H,!1),Du(d);return;case"select":gn("invalid",d),z=Pe=ee=null;for(H in E)if(E.hasOwnProperty(H)&&(He=E[H],He!=null))switch(H){case"value":ee=He;break;case"defaultValue":Pe=He;break;case"multiple":z=He;default:On(d,y,H,He,E,null)}y=ee,E=Pe,d.multiple=!!z,y!=null?Os(d,!!z,y,!1):E!=null&&Os(d,!!z,E,!0);return;case"textarea":gn("invalid",d),ee=H=z=null;for(Pe in E)if(E.hasOwnProperty(Pe)&&(He=E[Pe],He!=null))switch(Pe){case"value":z=He;break;case"defaultValue":H=He;break;case"children":ee=He;break;case"dangerouslySetInnerHTML":if(He!=null)throw Error(c(91));break;default:On(d,y,Pe,He,E,null)}bd(d,z,H,ee),Du(d);return;case"option":for(wt in E)if(E.hasOwnProperty(wt)&&(z=E[wt],z!=null))switch(wt){case"selected":d.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:On(d,y,wt,z,E,null)}return;case"dialog":gn("beforetoggle",d),gn("toggle",d),gn("cancel",d),gn("close",d);break;case"iframe":case"object":gn("load",d);break;case"video":case"audio":for(z=0;z<pf.length;z++)gn(pf[z],d);break;case"image":gn("error",d),gn("load",d);break;case"details":gn("toggle",d);break;case"embed":case"source":case"link":gn("error",d),gn("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ht in E)if(E.hasOwnProperty(Ht)&&(z=E[Ht],z!=null))switch(Ht){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,y));default:On(d,y,Ht,z,E,null)}return;default:if(Rc(y)){for(ir in E)E.hasOwnProperty(ir)&&(z=E[ir],z!==void 0&&og(d,y,ir,z,E,void 0));return}}for(He in E)E.hasOwnProperty(He)&&(z=E[He],z!=null&&On(d,y,He,z,E,null))}function ob(d,y,E,z){switch(y){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var H=null,ee=null,Pe=null,He=null,wt=null,Ht=null,ir=null;for(Xt in E){var br=E[Xt];if(E.hasOwnProperty(Xt)&&br!=null)switch(Xt){case"checked":break;case"value":break;case"defaultValue":wt=br;default:z.hasOwnProperty(Xt)||On(d,y,Xt,null,z,br)}}for(var Wt in z){var Xt=z[Wt];if(br=E[Wt],z.hasOwnProperty(Wt)&&(Xt!=null||br!=null))switch(Wt){case"type":ee=Xt;break;case"name":H=Xt;break;case"checked":Ht=Xt;break;case"defaultChecked":ir=Xt;break;case"value":Pe=Xt;break;case"defaultValue":He=Xt;break;case"children":case"dangerouslySetInnerHTML":if(Xt!=null)throw Error(c(137,y));break;default:Xt!==br&&On(d,y,Wt,Xt,z,br)}}Ys(d,Pe,He,wt,Ht,ir,ee,H);return;case"select":Xt=Pe=He=Wt=null;for(ee in E)if(wt=E[ee],E.hasOwnProperty(ee)&&wt!=null)switch(ee){case"value":break;case"multiple":Xt=wt;default:z.hasOwnProperty(ee)||On(d,y,ee,null,z,wt)}for(H in z)if(ee=z[H],wt=E[H],z.hasOwnProperty(H)&&(ee!=null||wt!=null))switch(H){case"value":Wt=ee;break;case"defaultValue":He=ee;break;case"multiple":Pe=ee;default:ee!==wt&&On(d,y,H,ee,z,wt)}y=He,E=Pe,z=Xt,Wt!=null?Os(d,!!E,Wt,!1):!!z!=!!E&&(y!=null?Os(d,!!E,y,!0):Os(d,!!E,E?[]:"",!1));return;case"textarea":Xt=Wt=null;for(He in E)if(H=E[He],E.hasOwnProperty(He)&&H!=null&&!z.hasOwnProperty(He))switch(He){case"value":break;case"children":break;default:On(d,y,He,null,z,H)}for(Pe in z)if(H=z[Pe],ee=E[Pe],z.hasOwnProperty(Pe)&&(H!=null||ee!=null))switch(Pe){case"value":Wt=H;break;case"defaultValue":Xt=H;break;case"children":break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(c(91));break;default:H!==ee&&On(d,y,Pe,H,z,ee)}Th(d,Wt,Xt);return;case"option":for(var Na in E)if(Wt=E[Na],E.hasOwnProperty(Na)&&Wt!=null&&!z.hasOwnProperty(Na))switch(Na){case"selected":d.selected=!1;break;default:On(d,y,Na,null,z,Wt)}for(wt in z)if(Wt=z[wt],Xt=E[wt],z.hasOwnProperty(wt)&&Wt!==Xt&&(Wt!=null||Xt!=null))switch(wt){case"selected":d.selected=Wt&&typeof Wt!="function"&&typeof Wt!="symbol";break;default:On(d,y,wt,Wt,z,Xt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ma in E)Wt=E[Ma],E.hasOwnProperty(Ma)&&Wt!=null&&!z.hasOwnProperty(Ma)&&On(d,y,Ma,null,z,Wt);for(Ht in z)if(Wt=z[Ht],Xt=E[Ht],z.hasOwnProperty(Ht)&&Wt!==Xt&&(Wt!=null||Xt!=null))switch(Ht){case"children":case"dangerouslySetInnerHTML":if(Wt!=null)throw Error(c(137,y));break;default:On(d,y,Ht,Wt,z,Xt)}return;default:if(Rc(y)){for(var Kn in E)Wt=E[Kn],E.hasOwnProperty(Kn)&&Wt!==void 0&&!z.hasOwnProperty(Kn)&&og(d,y,Kn,void 0,z,Wt);for(ir in z)Wt=z[ir],Xt=E[ir],!z.hasOwnProperty(ir)||Wt===Xt||Wt===void 0&&Xt===void 0||og(d,y,ir,Wt,z,Xt);return}}for(var Nt in E)Wt=E[Nt],E.hasOwnProperty(Nt)&&Wt!=null&&!z.hasOwnProperty(Nt)&&On(d,y,Nt,null,z,Wt);for(br in z)Wt=z[br],Xt=E[br],!z.hasOwnProperty(br)||Wt===Xt||Wt==null&&Xt==null||On(d,y,br,Wt,z,Xt)}var Bx=null,H0=null;function lg(d){return d.nodeType===9?d:d.ownerDocument}function jx(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ox(d,y){if(d===0)switch(y){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&y==="foreignObject"?0:d}function cg(d,y){return d==="textarea"||d==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.children=="bigint"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var q0=null;function Fx(){var d=window.event;return d&&d.type==="popstate"?d===q0?!1:(q0=d,!0):(q0=null,!1)}var lb=typeof setTimeout=="function"?setTimeout:void 0,P2=typeof clearTimeout=="function"?clearTimeout:void 0,cb=typeof Promise=="function"?Promise:void 0,M2=typeof queueMicrotask=="function"?queueMicrotask:typeof cb<"u"?function(d){return cb.resolve(null).then(d).catch(ub)}:lb;function ub(d){setTimeout(function(){throw d})}function fo(d){return d==="head"}function Gp(d,y){var E=y,z=0,H=0;do{var ee=E.nextSibling;if(d.removeChild(E),ee&&ee.nodeType===8)if(E=ee.data,E==="/$"){if(0<z&&8>z){E=z;var Pe=d.ownerDocument;if(E&1&&Hp(Pe.documentElement),E&2&&Hp(Pe.body),E&4)for(E=Pe.head,Hp(E),Pe=E.firstChild;Pe;){var He=Pe.nextSibling,wt=Pe.nodeName;Pe[It]||wt==="SCRIPT"||wt==="STYLE"||wt==="LINK"&&Pe.rel.toLowerCase()==="stylesheet"||E.removeChild(Pe),Pe=He}}if(H===0){d.removeChild(ee),Sg(y);return}H--}else E==="$"||E==="$?"||E==="$!"?H++:z=E.charCodeAt(0)-48;else z=0;E=ee}while(E);Sg(y)}function xf(d){var y=d.firstChild;for(y&&y.nodeType===10&&(y=y.nextSibling);y;){var E=y;switch(y=y.nextSibling,E.nodeName){case"HTML":case"HEAD":case"BODY":xf(E),Jt(E);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(E.rel.toLowerCase()==="stylesheet")continue}d.removeChild(E)}}function W0(d,y,E,z){for(;d.nodeType===1;){var H=E;if(d.nodeName.toLowerCase()!==y.toLowerCase()){if(!z&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(z){if(!d[It])switch(y){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(ee=d.getAttribute("rel"),ee==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(ee!==H.rel||d.getAttribute("href")!==(H.href==null||H.href===""?null:H.href)||d.getAttribute("crossorigin")!==(H.crossOrigin==null?null:H.crossOrigin)||d.getAttribute("title")!==(H.title==null?null:H.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(ee=d.getAttribute("src"),(ee!==(H.src==null?null:H.src)||d.getAttribute("type")!==(H.type==null?null:H.type)||d.getAttribute("crossorigin")!==(H.crossOrigin==null?null:H.crossOrigin))&&ee&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(y==="input"&&d.type==="hidden"){var ee=H.name==null?null:""+H.name;if(H.type==="hidden"&&d.getAttribute("name")===ee)return d}else return d;if(d=Rl(d.nextSibling),d===null)break}return null}function ug(d,y,E){if(y==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!E||(d=Rl(d.nextSibling),d===null))return null;return d}function K0(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState==="complete"}function db(d,y){var E=d.ownerDocument;if(d.data!=="$?"||E.readyState==="complete")y();else{var z=function(){y(),E.removeEventListener("DOMContentLoaded",z)};E.addEventListener("DOMContentLoaded",z),d._reactRetry=z}}function Rl(d){for(;d!=null;d=d.nextSibling){var y=d.nodeType;if(y===1||y===3)break;if(y===8){if(y=d.data,y==="$"||y==="$!"||y==="$?"||y==="F!"||y==="F")break;if(y==="/$")return null}}return d}var Z0=null;function hb(d){d=d.previousSibling;for(var y=0;d;){if(d.nodeType===8){var E=d.data;if(E==="$"||E==="$!"||E==="$?"){if(y===0)return d;y--}else E==="/$"&&y++}d=d.previousSibling}return null}function fb(d,y,E){switch(y=lg(E),d){case"html":if(d=y.documentElement,!d)throw Error(c(452));return d;case"head":if(d=y.head,!d)throw Error(c(453));return d;case"body":if(d=y.body,!d)throw Error(c(454));return d;default:throw Error(c(451))}}function Hp(d){for(var y=d.attributes;y.length;)d.removeAttributeNode(y[0]);Jt(d)}var po=new Map,Vx=new Set;function X0(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var ou=Ge.d;Ge.d={f:Ux,r:pb,D:mb,C:gb,L:A2,m:yb,X:dg,S:xb,M:vb};function Ux(){var d=ou.f(),y=bc();return d||y}function pb(d){var y=cr(d);y!==null&&y.tag===5&&y.type==="form"?Qh(y):ou.r(d)}var vf=typeof document>"u"?null:document;function Gx(d,y,E){var z=vf;if(z&&typeof y=="string"&&y){var H=ti(y);H='link[rel="'+d+'"][href="'+H+'"]',typeof E=="string"&&(H+='[crossorigin="'+E+'"]'),Vx.has(H)||(Vx.add(H),d={rel:d,crossOrigin:E,href:y},z.querySelector(H)===null&&(y=z.createElement("link"),hs(y,"link",d),Lr(y),z.head.appendChild(y)))}}function mb(d){ou.D(d),Gx("dns-prefetch",d,null)}function gb(d,y){ou.C(d,y),Gx("preconnect",d,y)}function A2(d,y,E){ou.L(d,y,E);var z=vf;if(z&&d&&y){var H='link[rel="preload"][as="'+ti(y)+'"]';y==="image"&&E&&E.imageSrcSet?(H+='[imagesrcset="'+ti(E.imageSrcSet)+'"]',typeof E.imageSizes=="string"&&(H+='[imagesizes="'+ti(E.imageSizes)+'"]')):H+='[href="'+ti(d)+'"]';var ee=H;switch(y){case"style":ee=qp(d);break;case"script":ee=Wp(d)}po.has(ee)||(d=B({rel:"preload",href:y==="image"&&E&&E.imageSrcSet?void 0:d,as:y},E),po.set(ee,d),z.querySelector(H)!==null||y==="style"&&z.querySelector(hg(ee))||y==="script"&&z.querySelector(fg(ee))||(y=z.createElement("link"),hs(y,"link",d),Lr(y),z.head.appendChild(y)))}}function yb(d,y){ou.m(d,y);var E=vf;if(E&&d){var z=y&&typeof y.as=="string"?y.as:"script",H='link[rel="modulepreload"][as="'+ti(z)+'"][href="'+ti(d)+'"]',ee=H;switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ee=Wp(d)}if(!po.has(ee)&&(d=B({rel:"modulepreload",href:d},y),po.set(ee,d),E.querySelector(H)===null)){switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(E.querySelector(fg(ee)))return}z=E.createElement("link"),hs(z,"link",d),Lr(z),E.head.appendChild(z)}}}function xb(d,y,E){ou.S(d,y,E);var z=vf;if(z&&d){var H=Jr(z).hoistableStyles,ee=qp(d);y=y||"default";var Pe=H.get(ee);if(!Pe){var He={loading:0,preload:null};if(Pe=z.querySelector(hg(ee)))He.loading=5;else{d=B({rel:"stylesheet",href:d,"data-precedence":y},E),(E=po.get(ee))&&qx(d,E);var wt=Pe=z.createElement("link");Lr(wt),hs(wt,"link",d),wt._p=new Promise(function(Ht,ir){wt.onload=Ht,wt.onerror=ir}),wt.addEventListener("load",function(){He.loading|=1}),wt.addEventListener("error",function(){He.loading|=2}),He.loading|=4,pg(Pe,y,z)}Pe={type:"stylesheet",instance:Pe,count:1,state:He},H.set(ee,Pe)}}}function dg(d,y){ou.X(d,y);var E=vf;if(E&&d){var z=Jr(E).hoistableScripts,H=Wp(d),ee=z.get(H);ee||(ee=E.querySelector(fg(H)),ee||(d=B({src:d,async:!0},y),(y=po.get(H))&&Wx(d,y),ee=E.createElement("script"),Lr(ee),hs(ee,"link",d),E.head.appendChild(ee)),ee={type:"script",instance:ee,count:1,state:null},z.set(H,ee))}}function vb(d,y){ou.M(d,y);var E=vf;if(E&&d){var z=Jr(E).hoistableScripts,H=Wp(d),ee=z.get(H);ee||(ee=E.querySelector(fg(H)),ee||(d=B({src:d,async:!0,type:"module"},y),(y=po.get(H))&&Wx(d,y),ee=E.createElement("script"),Lr(ee),hs(ee,"link",d),E.head.appendChild(ee)),ee={type:"script",instance:ee,count:1,state:null},z.set(H,ee))}}function Hx(d,y,E,z){var H=(H=Ct.current)?X0(H):null;if(!H)throw Error(c(446));switch(d){case"meta":case"title":return null;case"style":return typeof E.precedence=="string"&&typeof E.href=="string"?(y=qp(E.href),E=Jr(H).hoistableStyles,z=E.get(y),z||(z={type:"style",instance:null,count:0,state:null},E.set(y,z)),z):{type:"void",instance:null,count:0,state:null};case"link":if(E.rel==="stylesheet"&&typeof E.href=="string"&&typeof E.precedence=="string"){d=qp(E.href);var ee=Jr(H).hoistableStyles,Pe=ee.get(d);if(Pe||(H=H.ownerDocument||H,Pe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ee.set(d,Pe),(ee=H.querySelector(hg(d)))&&!ee._p&&(Pe.instance=ee,Pe.state.loading=5),po.has(d)||(E={rel:"preload",as:"style",href:E.href,crossOrigin:E.crossOrigin,integrity:E.integrity,media:E.media,hrefLang:E.hrefLang,referrerPolicy:E.referrerPolicy},po.set(d,E),ee||k2(H,d,E,Pe.state))),y&&z===null)throw Error(c(528,""));return Pe}if(y&&z!==null)throw Error(c(529,""));return null;case"script":return y=E.async,E=E.src,typeof E=="string"&&y&&typeof y!="function"&&typeof y!="symbol"?(y=Wp(E),E=Jr(H).hoistableScripts,z=E.get(y),z||(z={type:"script",instance:null,count:0,state:null},E.set(y,z)),z):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,d))}}function qp(d){return'href="'+ti(d)+'"'}function hg(d){return'link[rel="stylesheet"]['+d+"]"}function _b(d){return B({},d,{"data-precedence":d.precedence,precedence:null})}function k2(d,y,E,z){d.querySelector('link[rel="preload"][as="style"]['+y+"]")?z.loading=1:(y=d.createElement("link"),z.preload=y,y.addEventListener("load",function(){return z.loading|=1}),y.addEventListener("error",function(){return z.loading|=2}),hs(y,"link",E),Lr(y),d.head.appendChild(y))}function Wp(d){return'[src="'+ti(d)+'"]'}function fg(d){return"script[async]"+d}function bb(d,y,E){if(y.count++,y.instance===null)switch(y.type){case"style":var z=d.querySelector('style[data-href~="'+ti(E.href)+'"]');if(z)return y.instance=z,Lr(z),z;var H=B({},E,{"data-href":E.href,"data-precedence":E.precedence,href:null,precedence:null});return z=(d.ownerDocument||d).createElement("style"),Lr(z),hs(z,"style",H),pg(z,E.precedence,d),y.instance=z;case"stylesheet":H=qp(E.href);var ee=d.querySelector(hg(H));if(ee)return y.state.loading|=4,y.instance=ee,Lr(ee),ee;z=_b(E),(H=po.get(H))&&qx(z,H),ee=(d.ownerDocument||d).createElement("link"),Lr(ee);var Pe=ee;return Pe._p=new Promise(function(He,wt){Pe.onload=He,Pe.onerror=wt}),hs(ee,"link",z),y.state.loading|=4,pg(ee,E.precedence,d),y.instance=ee;case"script":return ee=Wp(E.src),(H=d.querySelector(fg(ee)))?(y.instance=H,Lr(H),H):(z=E,(H=po.get(ee))&&(z=B({},E),Wx(z,H)),d=d.ownerDocument||d,H=d.createElement("script"),Lr(H),hs(H,"link",z),d.head.appendChild(H),y.instance=H);case"void":return null;default:throw Error(c(443,y.type))}else y.type==="stylesheet"&&(y.state.loading&4)===0&&(z=y.instance,y.state.loading|=4,pg(z,E.precedence,d));return y.instance}function pg(d,y,E){for(var z=E.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),H=z.length?z[z.length-1]:null,ee=H,Pe=0;Pe<z.length;Pe++){var He=z[Pe];if(He.dataset.precedence===y)ee=He;else if(ee!==H)break}ee?ee.parentNode.insertBefore(d,ee.nextSibling):(y=E.nodeType===9?E.head:E,y.insertBefore(d,y.firstChild))}function qx(d,y){d.crossOrigin==null&&(d.crossOrigin=y.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=y.referrerPolicy),d.title==null&&(d.title=y.title)}function Wx(d,y){d.crossOrigin==null&&(d.crossOrigin=y.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=y.referrerPolicy),d.integrity==null&&(d.integrity=y.integrity)}var Y0=null;function J0(d,y,E){if(Y0===null){var z=new Map,H=Y0=new Map;H.set(E,z)}else H=Y0,z=H.get(E),z||(z=new Map,H.set(E,z));if(z.has(d))return z;for(z.set(d,null),E=E.getElementsByTagName(d),H=0;H<E.length;H++){var ee=E[H];if(!(ee[It]||ee[Ye]||d==="link"&&ee.getAttribute("rel")==="stylesheet")&&ee.namespaceURI!=="http://www.w3.org/2000/svg"){var Pe=ee.getAttribute(y)||"";Pe=d+Pe;var He=z.get(Pe);He?He.push(ee):z.set(Pe,[ee])}}return z}function Q0(d,y,E){d=d.ownerDocument||d,d.head.insertBefore(E,y==="title"?d.querySelector("head > title"):null)}function wb(d,y,E){if(E===1||y.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof y.precedence!="string"||typeof y.href!="string"||y.href==="")break;return!0;case"link":if(typeof y.rel!="string"||typeof y.href!="string"||y.href===""||y.onLoad||y.onError)break;switch(y.rel){case"stylesheet":return d=y.disabled,typeof y.precedence=="string"&&d==null;default:return!0}case"script":if(y.async&&typeof y.async!="function"&&typeof y.async!="symbol"&&!y.onLoad&&!y.onError&&y.src&&typeof y.src=="string")return!0}return!1}function Kx(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}var Kp=null;function Sb(){}function Tb(d,y,E){if(Kp===null)throw Error(c(475));var z=Kp;if(y.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var H=qp(E.href),ee=d.querySelector(hg(H));if(ee){d=ee._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(z.count++,z=mg.bind(z),d.then(z,z)),y.state.loading|=4,y.instance=ee,Lr(ee);return}ee=d.ownerDocument||d,E=_b(E),(H=po.get(H))&&qx(E,H),ee=ee.createElement("link"),Lr(ee);var Pe=ee;Pe._p=new Promise(function(He,wt){Pe.onload=He,Pe.onerror=wt}),hs(ee,"link",E),y.instance=ee}z.stylesheets===null&&(z.stylesheets=new Map),z.stylesheets.set(y,d),(d=y.state.preload)&&(y.state.loading&3)===0&&(z.count++,y=mg.bind(z),d.addEventListener("load",y),d.addEventListener("error",y))}}function Eb(){if(Kp===null)throw Error(c(475));var d=Kp;return d.stylesheets&&d.count===0&&yg(d,d.stylesheets),0<d.count?function(y){var E=setTimeout(function(){if(d.stylesheets&&yg(d,d.stylesheets),d.unsuspend){var z=d.unsuspend;d.unsuspend=null,z()}},6e4);return d.unsuspend=y,function(){d.unsuspend=null,clearTimeout(E)}}:null}function mg(){if(this.count--,this.count===0){if(this.stylesheets)yg(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var gg=null;function yg(d,y){d.stylesheets=null,d.unsuspend!==null&&(d.count++,gg=new Map,y.forEach(Cb,d),gg=null,mg.call(d))}function Cb(d,y){if(!(y.state.loading&4)){var E=gg.get(d);if(E)var z=E.get(null);else{E=new Map,gg.set(d,E);for(var H=d.querySelectorAll("link[data-precedence],style[data-precedence]"),ee=0;ee<H.length;ee++){var Pe=H[ee];(Pe.nodeName==="LINK"||Pe.getAttribute("media")!=="not all")&&(E.set(Pe.dataset.precedence,Pe),z=Pe)}z&&E.set(null,z)}H=y.instance,Pe=H.getAttribute("data-precedence"),ee=E.get(Pe)||z,ee===z&&E.set(null,H),E.set(Pe,H),this.count++,z=mg.bind(this),H.addEventListener("load",z),H.addEventListener("error",z),ee?ee.parentNode.insertBefore(H,ee.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(H,d.firstChild)),y.state.loading|=4}}var xg={$$typeof:be,Provider:null,Consumer:null,_currentValue:ze,_currentValue2:ze,_threadCount:0};function vg(d,y,E,z,H,ee,Pe,He){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=la(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=la(0),this.hiddenUpdates=la(null),this.identifierPrefix=z,this.onUncaughtError=H,this.onCaughtError=ee,this.onRecoverableError=Pe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=He,this.incompleteTransitions=new Map}function Zx(d,y,E,z,H,ee,Pe,He,wt,Ht,ir,br){return d=new vg(d,y,E,Pe,He,wt,Ht,br),y=1,ee===!0&&(y|=24),ee=Va(3,null,null,y),d.current=ee,ee.stateNode=d,y=qu(),y.refCount++,d.pooledCache=y,y.refCount++,ee.memoizedState={element:z,isDehydrated:E,cache:y},mp(ee),d}function Db(d){return d?(d=Mo,d):Mo}function Pb(d,y,E,z,H,ee){H=Db(H),z.context===null?z.context=H:z.pendingContext=H,z=rl(y),z.payload={element:E},ee=ee===void 0?null:ee,ee!==null&&(z.callback=ee),E=El(d,z,y),E!==null&&(jo(E,d,y),Kc(E,d,y))}function Mb(d,y){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var E=d.retryLane;d.retryLane=E!==0&&E<y?E:y}}function Xx(d,y){Mb(d,y),(d=d.alternate)&&Mb(d,y)}function Ab(d){if(d.tag===13){var y=Ou(d,67108864);y!==null&&jo(y,d,67108864),Xx(d,67108864)}}var ey=!0;function R2(d,y,E,z){var H=Re.T;Re.T=null;var ee=Ge.p;try{Ge.p=2,Yx(d,y,E,z)}finally{Ge.p=ee,Re.T=H}}function kb(d,y,E,z){var H=Re.T;Re.T=null;var ee=Ge.p;try{Ge.p=8,Yx(d,y,E,z)}finally{Ge.p=ee,Re.T=H}}function Yx(d,y,E,z){if(ey){var H=Vi(z);if(H===null)G0(d,y,z,Oo,E),ry(d,z);else if(Jx(H,d,y,E,z))z.stopPropagation();else if(ry(d,z),y&4&&-1<Rb.indexOf(d)){for(;H!==null;){var ee=cr(H);if(ee!==null)switch(ee.tag){case 3:if(ee=ee.stateNode,ee.current.memoizedState.isDehydrated){var Pe=Dn(ee.pendingLanes);if(Pe!==0){var He=ee;for(He.pendingLanes|=2,He.entangledLanes|=2;Pe;){var wt=1<<31-na(Pe);He.entanglements[1]|=wt,Pe&=~wt}wc(ee),(Zr&6)===0&&(us=Er()+500,Up(0))}}break;case 13:He=Ou(ee,2),He!==null&&jo(He,ee,2),bc(),Xx(ee,2)}if(ee=Vi(z),ee===null&&G0(d,y,z,Oo,E),ee===H)break;H=ee}H!==null&&z.stopPropagation()}else G0(d,y,z,null,E)}}function Vi(d){return d=Lm(d),Zp(d)}var Oo=null;function Zp(d){if(Oo=null,d=Gt(d),d!==null){var y=_(d);if(y===null)d=null;else{var E=y.tag;if(E===13){if(d=w(y),d!==null)return d;d=null}else if(E===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;d=null}else y!==d&&(d=null)}}return Oo=d,null}function ty(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mr()){case Pr:return 2;case Fr:return 8;case $a:case Xr:return 32;case ja:return 268435456;default:return 32}default:return 32}}var Xp=!1,cl=null,sh=null,oh=null,cd=new Map,_g=new Map,lh=[],Rb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ry(d,y){switch(d){case"focusin":case"focusout":cl=null;break;case"dragenter":case"dragleave":sh=null;break;case"mouseover":case"mouseout":oh=null;break;case"pointerover":case"pointerout":cd.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":_g.delete(y.pointerId)}}function Yp(d,y,E,z,H,ee){return d===null||d.nativeEvent!==ee?(d={blockedOn:y,domEventName:E,eventSystemFlags:z,nativeEvent:ee,targetContainers:[H]},y!==null&&(y=cr(y),y!==null&&Ab(y)),d):(d.eventSystemFlags|=z,y=d.targetContainers,H!==null&&y.indexOf(H)===-1&&y.push(H),d)}function Jx(d,y,E,z,H){switch(y){case"focusin":return cl=Yp(cl,d,y,E,z,H),!0;case"dragenter":return sh=Yp(sh,d,y,E,z,H),!0;case"mouseover":return oh=Yp(oh,d,y,E,z,H),!0;case"pointerover":var ee=H.pointerId;return cd.set(ee,Yp(cd.get(ee)||null,d,y,E,z,H)),!0;case"gotpointercapture":return ee=H.pointerId,_g.set(ee,Yp(_g.get(ee)||null,d,y,E,z,H)),!0}return!1}function Ib(d){var y=Gt(d.target);if(y!==null){var E=_(y);if(E!==null){if(y=E.tag,y===13){if(y=w(E),y!==null){d.blockedOn=y,Ce(d.priority,function(){if(E.tag===13){var z=Bo();z=ga(z);var H=Ou(E,z);H!==null&&jo(H,E,z),Xx(E,z)}});return}}else if(y===3&&E.stateNode.current.memoizedState.isDehydrated){d.blockedOn=E.tag===3?E.stateNode.containerInfo:null;return}}}d.blockedOn=null}function bg(d){if(d.blockedOn!==null)return!1;for(var y=d.targetContainers;0<y.length;){var E=Vi(d.nativeEvent);if(E===null){E=d.nativeEvent;var z=new E.constructor(E.type,E);Ra=z,E.target.dispatchEvent(z),Ra=null}else return y=cr(E),y!==null&&Ab(y),d.blockedOn=E,!1;y.shift()}return!0}function wg(d,y,E){bg(d)&&E.delete(y)}function Qx(){Xp=!1,cl!==null&&bg(cl)&&(cl=null),sh!==null&&bg(sh)&&(sh=null),oh!==null&&bg(oh)&&(oh=null),cd.forEach(wg),_g.forEach(wg)}function ay(d,y){d.blockedOn===y&&(d.blockedOn=null,Xp||(Xp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Qx)))}var ny=null;function zb(d){ny!==d&&(ny=d,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ny===d&&(ny=null);for(var y=0;y<d.length;y+=3){var E=d[y],z=d[y+1],H=d[y+2];if(typeof z!="function"){if(Zp(z||E)===null)continue;break}var ee=cr(E);ee!==null&&(d.splice(y,3),y-=3,mc(ee,{pending:!0,data:H,method:E.method,action:z},z,H))}}))}function Sg(d){function y(wt){return ay(wt,d)}cl!==null&&ay(cl,d),sh!==null&&ay(sh,d),oh!==null&&ay(oh,d),cd.forEach(y),_g.forEach(y);for(var E=0;E<lh.length;E++){var z=lh[E];z.blockedOn===d&&(z.blockedOn=null)}for(;0<lh.length&&(E=lh[0],E.blockedOn===null);)Ib(E),E.blockedOn===null&&lh.shift();if(E=(d.ownerDocument||d).$$reactFormReplay,E!=null)for(z=0;z<E.length;z+=3){var H=E[z],ee=E[z+1],Pe=H[Qe]||null;if(typeof ee=="function")Pe||zb(E);else if(Pe){var He=null;if(ee&&ee.hasAttribute("formAction")){if(H=ee,Pe=ee[Qe]||null)He=Pe.formAction;else if(Zp(H)!==null)continue}else He=Pe.action;typeof He=="function"?E[z+1]=He:(E.splice(z,3),z-=3),zb(E)}}}function mo(d){this._internalRoot=d}ch.prototype.render=mo.prototype.render=function(d){var y=this._internalRoot;if(y===null)throw Error(c(409));var E=y.current,z=Bo();Pb(E,z,d,y,null,null)},ch.prototype.unmount=mo.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var y=d.containerInfo;Pb(d.current,2,null,d,null,null),bc(),y[ct]=null}};function ch(d){this._internalRoot=d}ch.prototype.unstable_scheduleHydration=function(d){if(d){var y=ye();d={blockedOn:null,target:d,priority:y};for(var E=0;E<lh.length&&y!==0&&y<lh[E].priority;E++);lh.splice(E,0,d),E===0&&Ib(d)}};var _f=t.version;if(_f!=="19.1.0")throw Error(c(527,_f,"19.1.0"));Ge.findDOMNode=function(d){var y=d._reactInternals;if(y===void 0)throw typeof d.render=="function"?Error(c(188)):(d=Object.keys(d).join(","),Error(c(268,d)));return d=k(y),d=d!==null?N(d):null,d=d===null?null:d.stateNode,d};var ev={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Re,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bf.isDisabled&&bf.supportsFiber)try{kr=bf.inject(ev),Dr=bf}catch{}}return _v.createRoot=function(d,y){if(!h(d))throw Error(c(299));var E=!1,z="",H=Lp,ee=nf,Pe=sd,He=null;return y!=null&&(y.unstable_strictMode===!0&&(E=!0),y.identifierPrefix!==void 0&&(z=y.identifierPrefix),y.onUncaughtError!==void 0&&(H=y.onUncaughtError),y.onCaughtError!==void 0&&(ee=y.onCaughtError),y.onRecoverableError!==void 0&&(Pe=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(He=y.unstable_transitionCallbacks)),y=Zx(d,1,!1,null,null,E,z,H,ee,Pe,He,null),d[ct]=y.current,U0(d),new mo(y)},_v.hydrateRoot=function(d,y,E){if(!h(d))throw Error(c(299));var z=!1,H="",ee=Lp,Pe=nf,He=sd,wt=null,Ht=null;return E!=null&&(E.unstable_strictMode===!0&&(z=!0),E.identifierPrefix!==void 0&&(H=E.identifierPrefix),E.onUncaughtError!==void 0&&(ee=E.onUncaughtError),E.onCaughtError!==void 0&&(Pe=E.onCaughtError),E.onRecoverableError!==void 0&&(He=E.onRecoverableError),E.unstable_transitionCallbacks!==void 0&&(wt=E.unstable_transitionCallbacks),E.formState!==void 0&&(Ht=E.formState)),y=Zx(d,1,!0,y,E??null,z,H,ee,Pe,He,wt,Ht),y.context=Db(null),E=y.current,z=Bo(),z=ga(z),H=rl(z),H.callback=null,El(E,H,z),E=z,y.current.lanes=E,yn(y,E),wc(y),d[ct]=y.current,U0(d),new ch(y)},_v.version="19.1.0",_v}var UC;function IO(){if(UC)return S3.exports;UC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),S3.exports=RO(),S3.exports}var zO=IO();const LO=S_(zO);var V=s0();const ra=S_(V),O4=EO({__proto__:null,default:ra},[V]);var Iw=DA();const PA=S_(Iw);/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function t_(){return t_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])}return e},t_.apply(this,arguments)}var pm;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(pm||(pm={}));const GC="popstate";function $O(e){e===void 0&&(e={});function t(c,h){let{pathname:_,search:w,hash:n}=c.location;return F4("",{pathname:_,search:w,hash:n},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function i(c,h){return typeof h=="string"?h:Q1(h)}return BO(t,i,null,e)}function ys(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function MA(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function NO(){return Math.random().toString(36).substr(2,8)}function HC(e,t){return{usr:e.state,key:e.key,idx:t}}function F4(e,t,i,c){return i===void 0&&(i=null),t_({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?cx(t):t,{state:i,key:t&&t.key||c||NO()})}function Q1(e){let{pathname:t="/",search:i="",hash:c=""}=e;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),c&&c!=="#"&&(t+=c.charAt(0)==="#"?c:"#"+c),t}function cx(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let c=e.indexOf("?");c>=0&&(t.search=e.substr(c),e=e.substr(0,c)),e&&(t.pathname=e)}return t}function BO(e,t,i,c){c===void 0&&(c={});let{window:h=document.defaultView,v5Compat:_=!1}=c,w=h.history,n=pm.Pop,k=null,N=B();N==null&&(N=0,w.replaceState(t_({},w.state,{idx:N}),""));function B(){return(w.state||{idx:null}).idx}function F(){n=pm.Pop;let oe=B(),de=oe==null?null:oe-N;N=oe,k&&k({action:n,location:Y.location,delta:de})}function G(oe,de){n=pm.Push;let ge=F4(Y.location,oe,de);N=B()+1;let be=HC(ge,N),pe=Y.createHref(ge);try{w.pushState(be,"",pe)}catch(we){if(we instanceof DOMException&&we.name==="DataCloneError")throw we;h.location.assign(pe)}_&&k&&k({action:n,location:Y.location,delta:1})}function Q(oe,de){n=pm.Replace;let ge=F4(Y.location,oe,de);N=B();let be=HC(ge,N),pe=Y.createHref(ge);w.replaceState(be,"",pe),_&&k&&k({action:n,location:Y.location,delta:0})}function te(oe){let de=h.location.origin!=="null"?h.location.origin:h.location.href,ge=typeof oe=="string"?oe:Q1(oe);return ge=ge.replace(/ $/,"%20"),ys(de,"No window.location.(origin|href) available to create URL for href: "+ge),new URL(ge,de)}let Y={get action(){return n},get location(){return e(h,w)},listen(oe){if(k)throw new Error("A history only accepts one active listener");return h.addEventListener(GC,F),k=oe,()=>{h.removeEventListener(GC,F),k=null}},createHref(oe){return t(h,oe)},createURL:te,encodeLocation(oe){let de=te(oe);return{pathname:de.pathname,search:de.search,hash:de.hash}},push:G,replace:Q,go(oe){return w.go(oe)}};return Y}var qC;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(qC||(qC={}));function jO(e,t,i){return i===void 0&&(i="/"),OO(e,t,i)}function OO(e,t,i,c){let h=typeof t=="string"?cx(t):t,_=r5(h.pathname||"/",i);if(_==null)return null;let w=AA(e);FO(w);let n=null;for(let k=0;n==null&&k<w.length;++k){let N=QO(_);n=XO(w[k],N)}return n}function AA(e,t,i,c){t===void 0&&(t=[]),i===void 0&&(i=[]),c===void 0&&(c="");let h=(_,w,n)=>{let k={relativePath:n===void 0?_.path||"":n,caseSensitive:_.caseSensitive===!0,childrenIndex:w,route:_};k.relativePath.startsWith("/")&&(ys(k.relativePath.startsWith(c),'Absolute route path "'+k.relativePath+'" nested under path '+('"'+c+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),k.relativePath=k.relativePath.slice(c.length));let N=xm([c,k.relativePath]),B=i.concat(k);_.children&&_.children.length>0&&(ys(_.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+N+'".')),AA(_.children,t,B,N)),!(_.path==null&&!_.index)&&t.push({path:N,score:KO(N,_.index),routesMeta:B})};return e.forEach((_,w)=>{var n;if(_.path===""||!((n=_.path)!=null&&n.includes("?")))h(_,w);else for(let k of kA(_.path))h(_,w,k)}),t}function kA(e){let t=e.split("/");if(t.length===0)return[];let[i,...c]=t,h=i.endsWith("?"),_=i.replace(/\?$/,"");if(c.length===0)return h?[_,""]:[_];let w=kA(c.join("/")),n=[];return n.push(...w.map(k=>k===""?_:[_,k].join("/"))),h&&n.push(...w),n.map(k=>e.startsWith("/")&&k===""?"/":k)}function FO(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:ZO(t.routesMeta.map(c=>c.childrenIndex),i.routesMeta.map(c=>c.childrenIndex)))}const VO=/^:[\w-]+$/,UO=3,GO=2,HO=1,qO=10,WO=-2,WC=e=>e==="*";function KO(e,t){let i=e.split("/"),c=i.length;return i.some(WC)&&(c+=WO),t&&(c+=GO),i.filter(h=>!WC(h)).reduce((h,_)=>h+(VO.test(_)?UO:_===""?HO:qO),c)}function ZO(e,t){return e.length===t.length&&e.slice(0,-1).every((c,h)=>c===t[h])?e[e.length-1]-t[t.length-1]:0}function XO(e,t,i){let{routesMeta:c}=e,h={},_="/",w=[];for(let n=0;n<c.length;++n){let k=c[n],N=n===c.length-1,B=_==="/"?t:t.slice(_.length)||"/",F=YO({path:k.relativePath,caseSensitive:k.caseSensitive,end:N},B),G=k.route;if(!F)return null;Object.assign(h,F.params),w.push({params:h,pathname:xm([_,F.pathname]),pathnameBase:aF(xm([_,F.pathnameBase])),route:G}),F.pathnameBase!=="/"&&(_=xm([_,F.pathnameBase]))}return w}function YO(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,c]=JO(e.path,e.caseSensitive,e.end),h=t.match(i);if(!h)return null;let _=h[0],w=_.replace(/(.)\/+$/,"$1"),n=h.slice(1);return{params:c.reduce((N,B,F)=>{let{paramName:G,isOptional:Q}=B;if(G==="*"){let Y=n[F]||"";w=_.slice(0,_.length-Y.length).replace(/(.)\/+$/,"$1")}const te=n[F];return Q&&!te?N[G]=void 0:N[G]=(te||"").replace(/%2F/g,"/"),N},{}),pathname:_,pathnameBase:w,pattern:e}}function JO(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),MA(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let c=[],h="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,n,k)=>(c.push({paramName:n,isOptional:k!=null}),k?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(c.push({paramName:"*"}),h+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?h+="\\/*$":e!==""&&e!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,t?void 0:"i"),c]}function QO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return MA(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function r5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,c=e.charAt(i);return c&&c!=="/"?null:e.slice(i)||"/"}function eF(e,t){t===void 0&&(t="/");let{pathname:i,search:c="",hash:h=""}=typeof e=="string"?cx(e):e;return{pathname:i?i.startsWith("/")?i:tF(i,t):t,search:nF(c),hash:iF(h)}}function tF(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(h=>{h===".."?i.length>1&&i.pop():h!=="."&&i.push(h)}),i.length>1?i.join("/"):"/"}function P3(e,t,i,c){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(c)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rF(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function a5(e,t){let i=rF(e);return t?i.map((c,h)=>h===i.length-1?c.pathname:c.pathnameBase):i.map(c=>c.pathnameBase)}function n5(e,t,i,c){c===void 0&&(c=!1);let h;typeof e=="string"?h=cx(e):(h=t_({},e),ys(!h.pathname||!h.pathname.includes("?"),P3("?","pathname","search",h)),ys(!h.pathname||!h.pathname.includes("#"),P3("#","pathname","hash",h)),ys(!h.search||!h.search.includes("#"),P3("#","search","hash",h)));let _=e===""||h.pathname==="",w=_?"/":h.pathname,n;if(w==null)n=i;else{let F=t.length-1;if(!c&&w.startsWith("..")){let G=w.split("/");for(;G[0]==="..";)G.shift(),F-=1;h.pathname=G.join("/")}n=F>=0?t[F]:"/"}let k=eF(h,n),N=w&&w!=="/"&&w.endsWith("/"),B=(_||w===".")&&i.endsWith("/");return!k.pathname.endsWith("/")&&(N||B)&&(k.pathname+="/"),k}const xm=e=>e.join("/").replace(/\/\/+/g,"/"),aF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,iF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function sF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const RA=["post","put","patch","delete"];new Set(RA);const oF=["get",...RA];new Set(oF);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function r_(){return r_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])}return e},r_.apply(this,arguments)}const i5=V.createContext(null),lF=V.createContext(null),Dm=V.createContext(null),zw=V.createContext(null),Bf=V.createContext({outlet:null,matches:[],isDataRoute:!1}),IA=V.createContext(null);function cF(e,t){let{relative:i}=t===void 0?{}:t;ux()||ys(!1);let{basename:c,navigator:h}=V.useContext(Dm),{hash:_,pathname:w,search:n}=LA(e,{relative:i}),k=w;return c!=="/"&&(k=w==="/"?c:xm([c,w])),h.createHref({pathname:k,search:n,hash:_})}function ux(){return V.useContext(zw)!=null}function jf(){return ux()||ys(!1),V.useContext(zw).location}function zA(e){V.useContext(Dm).static||V.useLayoutEffect(e)}function xs(){let{isDataRoute:e}=V.useContext(Bf);return e?wF():uF()}function uF(){ux()||ys(!1);let e=V.useContext(i5),{basename:t,future:i,navigator:c}=V.useContext(Dm),{matches:h}=V.useContext(Bf),{pathname:_}=jf(),w=JSON.stringify(a5(h,i.v7_relativeSplatPath)),n=V.useRef(!1);return zA(()=>{n.current=!0}),V.useCallback(function(N,B){if(B===void 0&&(B={}),!n.current)return;if(typeof N=="number"){c.go(N);return}let F=n5(N,JSON.parse(w),_,B.relative==="path");e==null&&t!=="/"&&(F.pathname=F.pathname==="/"?t:xm([t,F.pathname])),(B.replace?c.replace:c.push)(F,B.state,B)},[t,c,w,_,e])}function Lw(){let{matches:e}=V.useContext(Bf),t=e[e.length-1];return t?t.params:{}}function LA(e,t){let{relative:i}=t===void 0?{}:t,{future:c}=V.useContext(Dm),{matches:h}=V.useContext(Bf),{pathname:_}=jf(),w=JSON.stringify(a5(h,c.v7_relativeSplatPath));return V.useMemo(()=>n5(e,JSON.parse(w),_,i==="path"),[e,w,_,i])}function dF(e,t){return hF(e,t)}function hF(e,t,i,c){ux()||ys(!1);let{navigator:h,static:_}=V.useContext(Dm),{matches:w}=V.useContext(Bf),n=w[w.length-1],k=n?n.params:{};n&&n.pathname;let N=n?n.pathnameBase:"/";n&&n.route;let B=jf(),F;if(t){var G;let de=typeof t=="string"?cx(t):t;N==="/"||(G=de.pathname)!=null&&G.startsWith(N)||ys(!1),F=de}else F=B;let Q=F.pathname||"/",te=Q;if(N!=="/"){let de=N.replace(/^\//,"").split("/");te="/"+Q.replace(/^\//,"").split("/").slice(de.length).join("/")}let Y=jO(e,{pathname:te}),oe=yF(Y&&Y.map(de=>Object.assign({},de,{params:Object.assign({},k,de.params),pathname:xm([N,h.encodeLocation?h.encodeLocation(de.pathname).pathname:de.pathname]),pathnameBase:de.pathnameBase==="/"?N:xm([N,h.encodeLocation?h.encodeLocation(de.pathnameBase).pathname:de.pathnameBase])})),w,i,c);return t&&oe?V.createElement(zw.Provider,{value:{location:r_({pathname:"/",search:"",hash:"",state:null,key:"default"},F),navigationType:pm.Pop}},oe):oe}function fF(){let e=bF(),t=sF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,h={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},t),i?V.createElement("pre",{style:h},i):null,null)}const pF=V.createElement(fF,null);class mF extends V.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error!==void 0?V.createElement(Bf.Provider,{value:this.props.routeContext},V.createElement(IA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gF(e){let{routeContext:t,match:i,children:c}=e,h=V.useContext(i5);return h&&h.static&&h.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=i.route.id),V.createElement(Bf.Provider,{value:t},c)}function yF(e,t,i,c){var h;if(t===void 0&&(t=[]),i===void 0&&(i=null),c===void 0&&(c=null),e==null){var _;if(!i)return null;if(i.errors)e=i.matches;else if((_=c)!=null&&_.v7_partialHydration&&t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let w=e,n=(h=i)==null?void 0:h.errors;if(n!=null){let B=w.findIndex(F=>F.route.id&&(n==null?void 0:n[F.route.id])!==void 0);B>=0||ys(!1),w=w.slice(0,Math.min(w.length,B+1))}let k=!1,N=-1;if(i&&c&&c.v7_partialHydration)for(let B=0;B<w.length;B++){let F=w[B];if((F.route.HydrateFallback||F.route.hydrateFallbackElement)&&(N=B),F.route.id){let{loaderData:G,errors:Q}=i,te=F.route.loader&&G[F.route.id]===void 0&&(!Q||Q[F.route.id]===void 0);if(F.route.lazy||te){k=!0,N>=0?w=w.slice(0,N+1):w=[w[0]];break}}}return w.reduceRight((B,F,G)=>{let Q,te=!1,Y=null,oe=null;i&&(Q=n&&F.route.id?n[F.route.id]:void 0,Y=F.route.errorElement||pF,k&&(N<0&&G===0?(SF("route-fallback"),te=!0,oe=null):N===G&&(te=!0,oe=F.route.hydrateFallbackElement||null)));let de=t.concat(w.slice(0,G+1)),ge=()=>{let be;return Q?be=Y:te?be=oe:F.route.Component?be=V.createElement(F.route.Component,null):F.route.element?be=F.route.element:be=B,V.createElement(gF,{match:F,routeContext:{outlet:B,matches:de,isDataRoute:i!=null},children:be})};return i&&(F.route.ErrorBoundary||F.route.errorElement||G===0)?V.createElement(mF,{location:i.location,revalidation:i.revalidation,component:Y,error:Q,children:ge(),routeContext:{outlet:null,matches:de,isDataRoute:!0}}):ge()},null)}var $A=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}($A||{}),NA=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(NA||{});function xF(e){let t=V.useContext(i5);return t||ys(!1),t}function vF(e){let t=V.useContext(lF);return t||ys(!1),t}function _F(e){let t=V.useContext(Bf);return t||ys(!1),t}function BA(e){let t=_F(),i=t.matches[t.matches.length-1];return i.route.id||ys(!1),i.route.id}function bF(){var e;let t=V.useContext(IA),i=vF(),c=BA();return t!==void 0?t:(e=i.errors)==null?void 0:e[c]}function wF(){let{router:e}=xF($A.UseNavigateStable),t=BA(NA.UseNavigateStable),i=V.useRef(!1);return zA(()=>{i.current=!0}),V.useCallback(function(h,_){_===void 0&&(_={}),i.current&&(typeof h=="number"?e.navigate(h):e.navigate(h,r_({fromRouteId:t},_)))},[e,t])}const KC={};function SF(e,t,i){KC[e]||(KC[e]=!0)}function TF(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function V4(e){let{to:t,replace:i,state:c,relative:h}=e;ux()||ys(!1);let{future:_,static:w}=V.useContext(Dm),{matches:n}=V.useContext(Bf),{pathname:k}=jf(),N=xs(),B=n5(t,a5(n,_.v7_relativeSplatPath),k,h==="path"),F=JSON.stringify(B);return V.useEffect(()=>N(JSON.parse(F),{replace:i,state:c,relative:h}),[N,F,h,i,c]),null}function Ni(e){ys(!1)}function EF(e){let{basename:t="/",children:i=null,location:c,navigationType:h=pm.Pop,navigator:_,static:w=!1,future:n}=e;ux()&&ys(!1);let k=t.replace(/^\/*/,"/"),N=V.useMemo(()=>({basename:k,navigator:_,static:w,future:r_({v7_relativeSplatPath:!1},n)}),[k,n,_,w]);typeof c=="string"&&(c=cx(c));let{pathname:B="/",search:F="",hash:G="",state:Q=null,key:te="default"}=c,Y=V.useMemo(()=>{let oe=r5(B,k);return oe==null?null:{location:{pathname:oe,search:F,hash:G,state:Q,key:te},navigationType:h}},[k,B,F,G,Q,te,h]);return Y==null?null:V.createElement(Dm.Provider,{value:N},V.createElement(zw.Provider,{children:i,value:Y}))}function CF(e){let{children:t,location:i}=e;return dF(U4(t),i)}new Promise(()=>{});function U4(e,t){t===void 0&&(t=[]);let i=[];return V.Children.forEach(e,(c,h)=>{if(!V.isValidElement(c))return;let _=[...t,h];if(c.type===V.Fragment){i.push.apply(i,U4(c.props.children,_));return}c.type!==Ni&&ys(!1),!c.props.index||!c.props.children||ys(!1);let w={id:c.props.id||_.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(w.children=U4(c.props.children,_)),i.push(w)}),i}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function G4(){return G4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])}return e},G4.apply(this,arguments)}function DF(e,t){if(e==null)return{};var i={},c=Object.keys(e),h,_;for(_=0;_<c.length;_++)h=c[_],!(t.indexOf(h)>=0)&&(i[h]=e[h]);return i}function PF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function MF(e,t){return e.button===0&&(!t||t==="_self")&&!PF(e)}const AF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],kF="6";try{window.__reactRouterVersion=kF}catch{}const RF="startTransition",ZC=O4[RF];function IF(e){let{basename:t,children:i,future:c,window:h}=e,_=V.useRef();_.current==null&&(_.current=$O({window:h,v5Compat:!0}));let w=_.current,[n,k]=V.useState({action:w.action,location:w.location}),{v7_startTransition:N}=c||{},B=V.useCallback(F=>{N&&ZC?ZC(()=>k(F)):k(F)},[k,N]);return V.useLayoutEffect(()=>w.listen(B),[w,B]),V.useEffect(()=>TF(c),[c]),V.createElement(EF,{basename:t,children:i,location:n.location,navigationType:n.action,navigator:w,future:c})}const zF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pi=V.forwardRef(function(t,i){let{onClick:c,relative:h,reloadDocument:_,replace:w,state:n,target:k,to:N,preventScrollReset:B,viewTransition:F}=t,G=DF(t,AF),{basename:Q}=V.useContext(Dm),te,Y=!1;if(typeof N=="string"&&LF.test(N)&&(te=N,zF))try{let be=new URL(window.location.href),pe=N.startsWith("//")?new URL(be.protocol+N):new URL(N),we=r5(pe.pathname,Q);pe.origin===be.origin&&we!=null?N=we+pe.search+pe.hash:Y=!0}catch{}let oe=cF(N,{relative:h}),de=$F(N,{replace:w,state:n,target:k,preventScrollReset:B,relative:h,viewTransition:F});function ge(be){c&&c(be),be.defaultPrevented||de(be)}return V.createElement("a",G4({},G,{href:te||oe,onClick:Y||_?c:ge,ref:i,target:k}))});var XC;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(XC||(XC={}));var YC;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(YC||(YC={}));function $F(e,t){let{target:i,replace:c,state:h,preventScrollReset:_,relative:w,viewTransition:n}=t===void 0?{}:t,k=xs(),N=jf(),B=LA(e,{relative:w});return V.useCallback(F=>{if(MF(F,i)){F.preventDefault();let G=c!==void 0?c:Q1(N)===Q1(B);k(e,{replace:G,state:h,preventScrollReset:_,relative:w,viewTransition:n})}},[N,k,B,c,h,i,e,_,w,n])}function Sh(e={}){const{strict:t=!0,errorMessage:i="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:c}=e,h=V.createContext(void 0);h.displayName=c;function _(){var w;const n=V.useContext(h);if(!n&&t){const k=new Error(i);throw k.name="ContextError",(w=Error.captureStackTrace)==null||w.call(Error,k,_),k}return n}return[h.Provider,_,h]}function NF(e){return{UNSAFE_getDOMNode(){return e.current}}}function Nn(e){const t=V.useRef(null);return V.useImperativeHandle(e,()=>t.current),t}function BF(e,t){return e&&t&&e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}var jA=e=>e;function s5(e){return Array.isArray(e)}function jF(e){return s5(e)&&e.length===0}function OA(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!s5(e)}function OF(e){return OA(e)&&Object.keys(e).length===0}function md(e){return s5(e)?jF(e):OA(e)?OF(e):e==null||e===""}function FF(e){return typeof e=="function"}var Vt=e=>e?"true":void 0;function FA(e){var t,i,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=FA(e[t]))&&(c&&(c+=" "),c+=i);else for(t in e)e[t]&&(c&&(c+=" "),c+=t);return c}function Br(...e){for(var t=0,i,c,h="";t<e.length;)(i=e[t++])&&(c=FA(i))&&(h&&(h+=" "),h+=c);return h}var o5=(...e)=>{let t=" ";for(const i of e)if(typeof i=="string"&&i.length>0){t=i;break}return t};function VA(e){return`${e}-${Math.floor(Math.random()*1e6)}`}function VF(e){for(const t in e)t.startsWith("on")&&delete e[t];return e}function Ko(e){if(!e||typeof e!="object")return"";try{return JSON.stringify(e)}catch{return""}}function JC(e,t=0){let i;return function(...c){const h=()=>{i=void 0,e.apply(this,c)};i!==void 0&&clearTimeout(i),i=setTimeout(h,t)}}function l5(e,t,i){return Math.min(Math.max(e,t),i)}function UA(e,t=100){return Math.min(Math.max(e,0),t)}var QC={};function $w(e,t,...i){const h=`[Hero UI]${t?` [${t}]`:" "}: ${e}`;typeof console>"u"||QC[h]||(QC[h]=!0)}function GA(e){switch(e){case"buddhist":return 543;case"ethiopic":case"ethioaa":return-8;case"coptic":return-284;case"hebrew":return 3760;case"indian":return-78;case"islamic-civil":case"islamic-tbla":case"islamic-umalqura":return-579;case"persian":return-600;case"roc":case"japanese":case"gregory":default:return 0}}var UF=e=>/(^|\W)[0-9](\W|$)/.test(e)&&!/[^\d\^$\[\]\(\)\*\+\-\.\|]/.test(e);function GF(e,t){if(e!=null){if(FF(e)){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function c5(...e){return t=>{e.forEach(i=>GF(i,t))}}var HF=(e,t)=>{var i;let c=[];const h=(i=V.Children.map(e,w=>V.isValidElement(w)&&w.type===t?(c.push(w),null):w))==null?void 0:i.filter(Boolean),_=c.length>=0?c:void 0;return[h,_]},qF=new Set(["id","type","style","title","role","tabIndex","htmlFor","width","height","abbr","accept","acceptCharset","accessKey","action","allowFullScreen","allowTransparency","alt","async","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","challenge","charset","checked","cite","class","className","cols","colSpan","command","content","contentEditable","contextMenu","controls","coords","crossOrigin","data","dateTime","default","defer","dir","disabled","download","draggable","dropzone","encType","enterKeyHint","for","form","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","headers","hidden","high","href","hrefLang","httpEquiv","icon","inputMode","isMap","itemId","itemProp","itemRef","itemScope","itemType","kind","label","lang","list","loop","manifest","max","maxLength","media","mediaGroup","method","min","minLength","multiple","muted","name","noValidate","open","optimum","pattern","ping","placeholder","poster","preload","radioGroup","referrerPolicy","readOnly","rel","required","rows","rowSpan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","slot","sortable","span","spellCheck","src","srcDoc","srcSet","start","step","target","translate","typeMustMatch","useMap","value","wmode","wrap"]),WF=new Set(["onCopy","onCut","onPaste","onLoad","onError","onWheel","onScroll","onCompositionEnd","onCompositionStart","onCompositionUpdate","onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onSubmit","onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPointerDown","onPointerEnter","onPointerLeave","onPointerUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd"]),eD=/^(data-.*)$/,KF=/^(aria-.*)$/,d1=/^(on[A-Z].*)$/;function Wo(e,t={}){let{labelable:i=!0,enabled:c=!0,propNames:h,omitPropNames:_,omitEventNames:w,omitDataProps:n,omitEventProps:k}=t,N={};if(!c)return e;for(const B in e)_!=null&&_.has(B)||w!=null&&w.has(B)&&d1.test(B)||d1.test(B)&&!WF.has(B)||n&&eD.test(B)||k&&d1.test(B)||(Object.prototype.hasOwnProperty.call(e,B)&&(qF.has(B)||i&&KF.test(B)||h!=null&&h.has(B)||eD.test(B))||d1.test(B))&&(N[B]=e[B]);return N}var[ZF,Pi]=Sh({name:"ProviderContext",strict:!1});const XF=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),YF=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function HA(e){if(Intl.Locale){let i=new Intl.Locale(e).maximize(),c=typeof i.getTextInfo=="function"?i.getTextInfo():i.textInfo;if(c)return c.direction==="rtl";if(i.script)return XF.has(i.script)}let t=e.split("-")[0];return YF.has(t)}const u5={prefix:String(Math.round(Math.random()*1e10)),current:0},qA=ra.createContext(u5),JF=ra.createContext(!1);let QF=!!(typeof window<"u"&&window.document&&window.document.createElement),M3=new WeakMap;function eV(e=!1){let t=V.useContext(qA),i=V.useRef(null);if(i.current===null&&!e){var c,h;let _=(h=ra.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||h===void 0||(c=h.ReactCurrentOwner)===null||c===void 0?void 0:c.current;if(_){let w=M3.get(_);w==null?M3.set(_,{id:t.current,state:_.memoizedState}):_.memoizedState!==w.state&&(t.current=w.id,M3.delete(_))}i.current=++t.current}return i.current}function tV(e){let t=V.useContext(qA);t===u5&&!QF&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let i=eV(!!e),c=`react-aria${t.prefix}`;return e||`${c}-${i}`}function rV(e){let t=ra.useId(),[i]=V.useState(o0()),c=i?"react-aria":`react-aria${u5.prefix}`;return e||`${c}-${t}`}const aV=typeof ra.useId=="function"?rV:tV;function nV(){return!1}function iV(){return!0}function sV(e){return()=>{}}function o0(){return typeof ra.useSyncExternalStore=="function"?ra.useSyncExternalStore(sV,nV,iV):V.useContext(JF)}const oV=Symbol.for("react-aria.i18n.locale");function WA(){let e=typeof window<"u"&&window[oV]||typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:HA(e)?"rtl":"ltr"}}let H4=WA(),$v=new Set;function tD(){H4=WA();for(let e of $v)e(H4)}function KA(){let e=o0(),[t,i]=V.useState(H4);return V.useEffect(()=>($v.size===0&&window.addEventListener("languagechange",tD),$v.add(i),()=>{$v.delete(i),$v.size===0&&window.removeEventListener("languagechange",tD)}),[]),e?{locale:"en-US",direction:"ltr"}:t}const ZA=ra.createContext(null);function lV(e){let{locale:t,children:i}=e,c=KA(),h=ra.useMemo(()=>t?{locale:t,direction:HA(t)?"rtl":"ltr"}:c,[c,t]);return ra.createElement(ZA.Provider,{value:h},i)}function Ms(){let e=KA();return V.useContext(ZA)||e}const cV=Symbol.for("react-aria.i18n.locale"),uV=Symbol.for("react-aria.i18n.strings");let yy;class Of{getStringForLocale(t,i){let h=this.getStringsForLocale(i)[t];if(!h)throw new Error(`Could not find intl message ${t} in ${i} locale`);return h}getStringsForLocale(t){let i=this.strings[t];return i||(i=dV(t,this.strings,this.defaultLocale),this.strings[t]=i),i}static getGlobalDictionaryForPackage(t){if(typeof window>"u")return null;let i=window[cV];if(yy===void 0){let h=window[uV];if(!h)return null;yy={};for(let _ in h)yy[_]=new Of({[i]:h[_]},i)}let c=yy==null?void 0:yy[t];if(!c)throw new Error(`Strings for package "${t}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return c}constructor(t,i="en-US"){this.strings=Object.fromEntries(Object.entries(t).filter(([,c])=>c)),this.defaultLocale=i}}function dV(e,t,i="en-US"){if(t[e])return t[e];let c=hV(e);if(t[c])return t[c];for(let h in t)if(h.startsWith(c+"-"))return t[h];return t[i]}function hV(e){return Intl.Locale?new Intl.Locale(e).language:e.split("-")[0]}const rD=new Map,aD=new Map;class d5{format(t,i){let c=this.strings.getStringForLocale(t,this.locale);return typeof c=="function"?c(i,this):c}plural(t,i,c="cardinal"){let h=i["="+t];if(h)return typeof h=="function"?h():h;let _=this.locale+":"+c,w=rD.get(_);w||(w=new Intl.PluralRules(this.locale,{type:c}),rD.set(_,w));let n=w.select(t);return h=i[n]||i.other,typeof h=="function"?h():h}number(t){let i=aD.get(this.locale);return i||(i=new Intl.NumberFormat(this.locale),aD.set(this.locale,i)),i.format(t)}select(t,i){let c=t[i]||t.other;return typeof c=="function"?c():c}constructor(t,i){this.locale=t,this.strings=i}}const nD=new WeakMap;function fV(e){let t=nD.get(e);return t||(t=new Of(e),nD.set(e,t)),t}function XA(e,t){return t&&Of.getGlobalDictionaryForPackage(t)||fV(e)}function Eu(e,t){let{locale:i}=Ms(),c=XA(e,t);return V.useMemo(()=>new d5(i,c),[i,c])}function Fy(e,t){return e-t*Math.floor(e/t)}const YA=1721426;function Ug(e,t,i,c){t=T_(e,t);let h=t-1,_=-2;return i<=2?_=0:mm(t)&&(_=-1),YA-1+365*h+Math.floor(h/4)-Math.floor(h/100)+Math.floor(h/400)+Math.floor((367*i-362)/12+_+c)}function mm(e){return e%4===0&&(e%100!==0||e%400===0)}function T_(e,t){return e==="BC"?1-t:t}function Nw(e){let t="AD";return e<=0&&(t="BC",e=1-e),[t,e]}const pV={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class Bl{fromJulianDay(t){let i=t,c=i-YA,h=Math.floor(c/146097),_=Fy(c,146097),w=Math.floor(_/36524),n=Fy(_,36524),k=Math.floor(n/1461),N=Fy(n,1461),B=Math.floor(N/365),F=h*400+w*100+k*4+B+(w!==4&&B!==4?1:0),[G,Q]=Nw(F),te=i-Ug(G,Q,1,1),Y=2;i<Ug(G,Q,3,1)?Y=0:mm(Q)&&(Y=1);let oe=Math.floor(((te+Y)*12+373)/367),de=i-Ug(G,Q,oe,1)+1;return new Di(G,Q,oe,de)}toJulianDay(t){return Ug(t.era,t.year,t.month,t.day)}getDaysInMonth(t){return pV[mm(t.year)?"leapyear":"standard"][t.month-1]}getMonthsInYear(t){return 12}getDaysInYear(t){return mm(t.year)?366:365}getYearsInEra(t){return 9999}getEras(){return["BC","AD"]}isInverseEra(t){return t.era==="BC"}balanceDate(t){t.year<=0&&(t.era=t.era==="BC"?"AD":"BC",t.year=1-t.year)}constructor(){this.identifier="gregory"}}const mV={"001":1,AD:1,AE:6,AF:6,AI:1,AL:1,AM:1,AN:1,AR:1,AT:1,AU:1,AX:1,AZ:1,BA:1,BE:1,BG:1,BH:6,BM:1,BN:1,BY:1,CH:1,CL:1,CM:1,CN:1,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DZ:6,EC:1,EE:1,EG:6,ES:1,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,HR:1,HU:1,IE:1,IQ:6,IR:6,IS:1,IT:1,JO:6,KG:1,KW:6,KZ:1,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MK:1,MN:1,MQ:1,MV:5,MY:1,NL:1,NO:1,NZ:1,OM:6,PL:1,QA:6,RE:1,RO:1,RS:1,RU:1,SD:6,SE:1,SI:1,SK:1,SM:1,SY:6,TJ:1,TM:1,TR:1,UA:1,UY:1,UZ:1,VA:1,VN:1,XK:1};function Ds(e,t){return t=Gi(t,e.calendar),e.era===t.era&&e.year===t.year&&e.month===t.month&&e.day===t.day}function iD(e,t){return t=Gi(t,e.calendar),e=Jg(e),t=Jg(t),e.era===t.era&&e.year===t.year&&e.month===t.month}function gV(e,t){return e.calendar.identifier===t.calendar.identifier&&e.era===t.era&&e.year===t.year&&e.month===t.month&&e.day===t.day}function JA(e,t){return Ds(e,Pm(t))}const yV={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};function Bw(e,t,i){let c=e.calendar.toJulianDay(e),h=i?yV[i]:wV(t),_=Math.ceil(c+1-h)%7;return _<0&&(_+=7),_}function QA(e){return Af(Date.now(),e)}function Pm(e){return yh(QA(e))}function ek(e,t){return e.calendar.toJulianDay(e)-t.calendar.toJulianDay(t)}function tk(e,t){return sD(e)-sD(t)}function sD(e){return e.hour*36e5+e.minute*6e4+e.second*1e3+e.millisecond}let A3=null;function Ff(){return A3==null&&(A3=new Intl.DateTimeFormat().resolvedOptions().timeZone),A3}function Jg(e){return e.subtract({days:e.day-1})}function ew(e){return e.add({days:e.calendar.getDaysInMonth(e)-e.day})}function tw(e){return Jg(e.subtract({months:e.month-1}))}function xV(e){return e.calendar.getMinimumMonthInYear?e.calendar.getMinimumMonthInYear(e):1}function vV(e){return e.calendar.getMinimumDayInMonth?e.calendar.getMinimumDayInMonth(e):1}function a_(e,t,i){let c=Bw(e,t,i);return e.subtract({days:c})}function _V(e,t,i){return a_(e,t,i).add({days:6})}const oD=new Map;function bV(e){if(Intl.Locale){let i=oD.get(e);return i||(i=new Intl.Locale(e).maximize().region,i&&oD.set(e,i)),i}let t=e.split("-")[1];return t==="u"?void 0:t}function wV(e){let t=bV(e);return t&&mV[t]||0}function SV(e,t,i){let c=e.calendar.getDaysInMonth(e);return Math.ceil((Bw(Jg(e),t,i)+c)/7)}function rk(e,t){return e&&t?e.compare(t)<=0?e:t:e||t}function ak(e,t){return e&&t?e.compare(t)>=0?e:t:e||t}function Yy(e){e=Gi(e,new Bl);let t=T_(e.era,e.year);return nk(t,e.month,e.day,e.hour,e.minute,e.second,e.millisecond)}function nk(e,t,i,c,h,_,w){let n=new Date;return n.setUTCHours(c,h,_,w),n.setUTCFullYear(e,t-1,i),n.getTime()}function q4(e,t){if(t==="UTC")return 0;if(e>0&&t===Ff())return new Date(e).getTimezoneOffset()*-6e4;let{year:i,month:c,day:h,hour:_,minute:w,second:n}=ik(e,t);return nk(i,c,h,_,w,n,0)-Math.floor(e/1e3)*1e3}const lD=new Map;function ik(e,t){let i=lD.get(t);i||(i=new Intl.DateTimeFormat("en-US",{timeZone:t,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),lD.set(t,i));let c=i.formatToParts(new Date(e)),h={};for(let _ of c)_.type!=="literal"&&(h[_.type]=_.value);return{year:h.era==="BC"||h.era==="B"?-h.year+1:+h.year,month:+h.month,day:+h.day,hour:h.hour==="24"?0:+h.hour,minute:+h.minute,second:+h.second}}const cD=864e5;function TV(e,t,i,c){return(i===c?[i]:[i,c]).filter(_=>EV(e,t,_))}function EV(e,t,i){let c=ik(i,t);return e.year===c.year&&e.month===c.month&&e.day===c.day&&e.hour===c.hour&&e.minute===c.minute&&e.second===c.second}function Pf(e,t,i="compatible"){let c=zf(e);if(t==="UTC")return Yy(c);if(t===Ff()&&i==="compatible"){c=Gi(c,new Bl);let k=new Date,N=T_(c.era,c.year);return k.setFullYear(N,c.month-1,c.day),k.setHours(c.hour,c.minute,c.second,c.millisecond),k.getTime()}let h=Yy(c),_=q4(h-cD,t),w=q4(h+cD,t),n=TV(c,t,h-_,h-w);if(n.length===1)return n[0];if(n.length>1)switch(i){case"compatible":case"earlier":return n[0];case"later":return n[n.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(i){case"earlier":return Math.min(h-_,h-w);case"compatible":case"later":return Math.max(h-_,h-w);case"reject":throw new RangeError("No such absolute time found")}}function sk(e,t,i="compatible"){return new Date(Pf(e,t,i))}function Af(e,t){let i=q4(e,t),c=new Date(e+i),h=c.getUTCFullYear(),_=c.getUTCMonth()+1,w=c.getUTCDate(),n=c.getUTCHours(),k=c.getUTCMinutes(),N=c.getUTCSeconds(),B=c.getUTCMilliseconds();return new Jy(h<1?"BC":"AD",h<1?-h+1:h,_,w,t,i,n,k,N,B)}function yh(e){return new Di(e.calendar,e.era,e.year,e.month,e.day)}function zf(e,t){let i=0,c=0,h=0,_=0;if("timeZone"in e)({hour:i,minute:c,second:h,millisecond:_}=e);else if("hour"in e&&!t)return e;return t&&({hour:i,minute:c,second:h,millisecond:_}=t),new rw(e.calendar,e.era,e.year,e.month,e.day,i,c,h,_)}function uD(e){return new E_(e.hour,e.minute,e.second,e.millisecond)}function Gi(e,t){if(e.calendar.identifier===t.identifier)return e;let i=t.fromJulianDay(e.calendar.toJulianDay(e)),c=e.copy();return c.calendar=t,c.era=i.era,c.year=i.year,c.month=i.month,c.day=i.day,Qg(c),c}function ok(e,t,i){if(e instanceof Jy)return e.timeZone===t?e:lk(e,t);let c=Pf(e,t,i);return Af(c,t)}function CV(e){let t=Yy(e)-e.offset;return new Date(t)}function lk(e,t){let i=Yy(e)-e.offset;return Gi(Af(i,t),e.calendar)}const bv=36e5;function jw(e,t){let i=e.copy(),c="hour"in i?hk(i,t):0;W4(i,t.years||0),i.calendar.balanceYearMonth&&i.calendar.balanceYearMonth(i,e),i.month+=t.months||0,K4(i),ck(i),i.day+=(t.weeks||0)*7,i.day+=t.days||0,i.day+=c,DV(i),i.calendar.balanceDate&&i.calendar.balanceDate(i),i.year<1&&(i.year=1,i.month=1,i.day=1);let h=i.calendar.getYearsInEra(i);if(i.year>h){var _,w;let k=(_=(w=i.calendar).isInverseEra)===null||_===void 0?void 0:_.call(w,i);i.year=h,i.month=k?1:i.calendar.getMonthsInYear(i),i.day=k?1:i.calendar.getDaysInMonth(i)}i.month<1&&(i.month=1,i.day=1);let n=i.calendar.getMonthsInYear(i);return i.month>n&&(i.month=n,i.day=i.calendar.getDaysInMonth(i)),i.day=Math.max(1,Math.min(i.calendar.getDaysInMonth(i),i.day)),i}function W4(e,t){var i,c;!((i=(c=e.calendar).isInverseEra)===null||i===void 0)&&i.call(c,e)&&(t=-t),e.year+=t}function K4(e){for(;e.month<1;)W4(e,-1),e.month+=e.calendar.getMonthsInYear(e);let t=0;for(;e.month>(t=e.calendar.getMonthsInYear(e));)e.month-=t,W4(e,1)}function DV(e){for(;e.day<1;)e.month--,K4(e),e.day+=e.calendar.getDaysInMonth(e);for(;e.day>e.calendar.getDaysInMonth(e);)e.day-=e.calendar.getDaysInMonth(e),e.month++,K4(e)}function ck(e){e.month=Math.max(1,Math.min(e.calendar.getMonthsInYear(e),e.month)),e.day=Math.max(1,Math.min(e.calendar.getDaysInMonth(e),e.day))}function Qg(e){e.calendar.constrainDate&&e.calendar.constrainDate(e),e.year=Math.max(1,Math.min(e.calendar.getYearsInEra(e),e.year)),ck(e)}function h5(e){let t={};for(let i in e)typeof e[i]=="number"&&(t[i]=-e[i]);return t}function uk(e,t){return jw(e,h5(t))}function f5(e,t){let i=e.copy();return t.era!=null&&(i.era=t.era),t.year!=null&&(i.year=t.year),t.month!=null&&(i.month=t.month),t.day!=null&&(i.day=t.day),Qg(i),i}function n_(e,t){let i=e.copy();return t.hour!=null&&(i.hour=t.hour),t.minute!=null&&(i.minute=t.minute),t.second!=null&&(i.second=t.second),t.millisecond!=null&&(i.millisecond=t.millisecond),dk(i),i}function PV(e){e.second+=Math.floor(e.millisecond/1e3),e.millisecond=h1(e.millisecond,1e3),e.minute+=Math.floor(e.second/60),e.second=h1(e.second,60),e.hour+=Math.floor(e.minute/60),e.minute=h1(e.minute,60);let t=Math.floor(e.hour/24);return e.hour=h1(e.hour,24),t}function dk(e){e.millisecond=Math.max(0,Math.min(e.millisecond,1e3)),e.second=Math.max(0,Math.min(e.second,59)),e.minute=Math.max(0,Math.min(e.minute,59)),e.hour=Math.max(0,Math.min(e.hour,23))}function h1(e,t){let i=e%t;return i<0&&(i+=t),i}function hk(e,t){return e.hour+=t.hours||0,e.minute+=t.minutes||0,e.second+=t.seconds||0,e.millisecond+=t.milliseconds||0,PV(e)}function fk(e,t){let i=e.copy();return hk(i,t),i}function MV(e,t){return fk(e,h5(t))}function p5(e,t,i,c){let h=e.copy();switch(t){case"era":{let n=e.calendar.getEras(),k=n.indexOf(e.era);if(k<0)throw new Error("Invalid era: "+e.era);k=kf(k,i,0,n.length-1,c==null?void 0:c.round),h.era=n[k],Qg(h);break}case"year":var _,w;!((_=(w=h.calendar).isInverseEra)===null||_===void 0)&&_.call(w,h)&&(i=-i),h.year=kf(e.year,i,-1/0,9999,c==null?void 0:c.round),h.year===-1/0&&(h.year=1),h.calendar.balanceYearMonth&&h.calendar.balanceYearMonth(h,e);break;case"month":h.month=kf(e.month,i,1,e.calendar.getMonthsInYear(e),c==null?void 0:c.round);break;case"day":h.day=kf(e.day,i,1,e.calendar.getDaysInMonth(e),c==null?void 0:c.round);break;default:throw new Error("Unsupported field "+t)}return e.calendar.balanceDate&&e.calendar.balanceDate(h),Qg(h),h}function m5(e,t,i,c){let h=e.copy();switch(t){case"hour":{let _=e.hour,w=0,n=23;if((c==null?void 0:c.hourCycle)===12){let k=_>=12;w=k?12:0,n=k?23:11}h.hour=kf(_,i,w,n,c==null?void 0:c.round);break}case"minute":h.minute=kf(e.minute,i,0,59,c==null?void 0:c.round);break;case"second":h.second=kf(e.second,i,0,59,c==null?void 0:c.round);break;case"millisecond":h.millisecond=kf(e.millisecond,i,0,999,c==null?void 0:c.round);break;default:throw new Error("Unsupported field "+t)}return h}function kf(e,t,i,c,h=!1){if(h){e+=Math.sign(t),e<i&&(e=c);let _=Math.abs(t);t>0?e=Math.ceil(e/_)*_:e=Math.floor(e/_)*_,e>c&&(e=i)}else e+=t,e<i?e=c-(i-e-1):e>c&&(e=i+(e-c-1));return e}function pk(e,t){let i;if(t.years!=null&&t.years!==0||t.months!=null&&t.months!==0||t.weeks!=null&&t.weeks!==0||t.days!=null&&t.days!==0){let h=jw(zf(e),{years:t.years,months:t.months,weeks:t.weeks,days:t.days});i=Pf(h,e.timeZone)}else i=Yy(e)-e.offset;i+=t.milliseconds||0,i+=(t.seconds||0)*1e3,i+=(t.minutes||0)*6e4,i+=(t.hours||0)*36e5;let c=Af(i,e.timeZone);return Gi(c,e.calendar)}function AV(e,t){return pk(e,h5(t))}function kV(e,t,i,c){switch(t){case"hour":{let h=0,_=23;if((c==null?void 0:c.hourCycle)===12){let te=e.hour>=12;h=te?12:0,_=te?23:11}let w=zf(e),n=Gi(n_(w,{hour:h}),new Bl),k=[Pf(n,e.timeZone,"earlier"),Pf(n,e.timeZone,"later")].filter(te=>Af(te,e.timeZone).day===n.day)[0],N=Gi(n_(w,{hour:_}),new Bl),B=[Pf(N,e.timeZone,"earlier"),Pf(N,e.timeZone,"later")].filter(te=>Af(te,e.timeZone).day===N.day).pop(),F=Yy(e)-e.offset,G=Math.floor(F/bv),Q=F%bv;return F=kf(G,i,Math.floor(k/bv),Math.floor(B/bv),c==null?void 0:c.round)*bv+Q,Gi(Af(F,e.timeZone),e.calendar)}case"minute":case"second":case"millisecond":return m5(e,t,i,c);case"era":case"year":case"month":case"day":{let h=p5(zf(e),t,i,c),_=Pf(h,e.timeZone);return Gi(Af(_,e.timeZone),e.calendar)}default:throw new Error("Unsupported field "+t)}}function RV(e,t,i){let c=zf(e),h=n_(f5(c,t),t);if(h.compare(c)===0)return e;let _=Pf(h,e.timeZone,i);return Gi(Af(_,e.timeZone),e.calendar)}const IV=/^([+-]\d{6}|\d{4})-(\d{2})-(\d{2})$/,zV=/^([+-]\d{6}|\d{4})-(\d{2})-(\d{2})(?:T(\d{2}))?(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?(?:(?:([+-]\d{2})(?::?(\d{2}))?)|Z)$/;function mk(e){let t=e.match(IV);if(!t)throw new Error("Invalid ISO 8601 date string: "+e);let i=new Di(pu(t[1],0,9999),pu(t[2],1,12),1);return i.day=pu(t[3],0,i.calendar.getDaysInMonth(i)),i}function LV(e,t){let i=e.match(zV);if(!i)throw new Error("Invalid ISO 8601 date time string: "+e);let c=pu(i[1],-9999,9999),h=c<1?"BC":"AD",_=new Jy(h,c<1?-c+1:c,pu(i[2],1,12),1,t,0,i[4]?pu(i[4],0,23):0,i[5]?pu(i[5],0,59):0,i[6]?pu(i[6],0,59):0,i[7]?pu(i[7],0,1/0)*1e3:0);_.day=pu(i[3],0,_.calendar.getDaysInMonth(_));var w;return i[8]&&(_.offset=pu(i[8],-23,23)*36e5+pu((w=i[9])!==null&&w!==void 0?w:"0",0,59)*6e4),lk(_,t)}function Lf(e){return LV(e,Ff())}function pu(e,t,i){let c=Number(e);if(c<t||c>i)throw new RangeError(`Value out of range: ${t} <= ${c} <= ${i}`);return c}function gk(e){return`${String(e.hour).padStart(2,"0")}:${String(e.minute).padStart(2,"0")}:${String(e.second).padStart(2,"0")}${e.millisecond?String(e.millisecond/1e3).slice(1):""}`}function yk(e){let t=Gi(e,new Bl),i;return t.era==="BC"?i=t.year===1?"0000":"-"+String(Math.abs(1-t.year)).padStart(6,"00"):i=String(t.year).padStart(4,"0"),`${i}-${String(t.month).padStart(2,"0")}-${String(t.day).padStart(2,"0")}`}function xk(e){return`${yk(e)}T${gk(e)}`}function $V(e){let t=Math.sign(e)<0?"-":"+";e=Math.abs(e);let i=Math.floor(e/36e5),c=e%36e5/6e4;return`${t}${String(i).padStart(2,"0")}:${String(c).padStart(2,"0")}`}function NV(e){return`${xk(e)}${$V(e.offset)}[${e.timeZone}]`}function BV(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dx(e,t,i){BV(e,t),t.set(e,i)}function g5(e){let t=typeof e[0]=="object"?e.shift():new Bl,i;if(typeof e[0]=="string")i=e.shift();else{let w=t.getEras();i=w[w.length-1]}let c=e.shift(),h=e.shift(),_=e.shift();return[t,i,c,h,_]}var jV=new WeakMap;class Di{copy(){return this.era?new Di(this.calendar,this.era,this.year,this.month,this.day):new Di(this.calendar,this.year,this.month,this.day)}add(t){return jw(this,t)}subtract(t){return uk(this,t)}set(t){return f5(this,t)}cycle(t,i,c){return p5(this,t,i,c)}toDate(t){return sk(this,t)}toString(){return yk(this)}compare(t){return ek(this,t)}constructor(...t){dx(this,jV,{writable:!0,value:void 0});let[i,c,h,_,w]=g5(t);this.calendar=i,this.era=c,this.year=h,this.month=_,this.day=w,Qg(this)}}var OV=new WeakMap;class E_{copy(){return new E_(this.hour,this.minute,this.second,this.millisecond)}add(t){return fk(this,t)}subtract(t){return MV(this,t)}set(t){return n_(this,t)}cycle(t,i,c){return m5(this,t,i,c)}toString(){return gk(this)}compare(t){return tk(this,t)}constructor(t=0,i=0,c=0,h=0){dx(this,OV,{writable:!0,value:void 0}),this.hour=t,this.minute=i,this.second=c,this.millisecond=h,dk(this)}}var FV=new WeakMap;class rw{copy(){return this.era?new rw(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new rw(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(t){return jw(this,t)}subtract(t){return uk(this,t)}set(t){return f5(n_(this,t),t)}cycle(t,i,c){switch(t){case"era":case"year":case"month":case"day":return p5(this,t,i,c);default:return m5(this,t,i,c)}}toDate(t,i){return sk(this,t,i)}toString(){return xk(this)}compare(t){let i=ek(this,t);return i===0?tk(this,zf(t)):i}constructor(...t){dx(this,FV,{writable:!0,value:void 0});let[i,c,h,_,w]=g5(t);this.calendar=i,this.era=c,this.year=h,this.month=_,this.day=w,this.hour=t.shift()||0,this.minute=t.shift()||0,this.second=t.shift()||0,this.millisecond=t.shift()||0,Qg(this)}}var VV=new WeakMap;class Jy{copy(){return this.era?new Jy(this.calendar,this.era,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond):new Jy(this.calendar,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond)}add(t){return pk(this,t)}subtract(t){return AV(this,t)}set(t,i){return RV(this,t,i)}cycle(t,i,c){return kV(this,t,i,c)}toDate(){return CV(this)}toString(){return NV(this)}toAbsoluteString(){return this.toDate().toISOString()}compare(t){return this.toDate().getTime()-ok(t,this.timeZone).toDate().getTime()}constructor(...t){dx(this,VV,{writable:!0,value:void 0});let[i,c,h,_,w]=g5(t),n=t.shift(),k=t.shift();this.calendar=i,this.era=c,this.year=h,this.month=_,this.day=w,this.timeZone=n,this.offset=k,this.hour=t.shift()||0,this.minute=t.shift()||0,this.second=t.shift()||0,this.millisecond=t.shift()||0,Qg(this)}}const Vy=[[1868,9,8],[1912,7,30],[1926,12,25],[1989,1,8],[2019,5,1]],UV=[[1912,7,29],[1926,12,24],[1989,1,7],[2019,4,30]],N1=[1867,1911,1925,1988,2018],fm=["meiji","taisho","showa","heisei","reiwa"];function dD(e){const t=Vy.findIndex(([i,c,h])=>e.year<i||e.year===i&&e.month<c||e.year===i&&e.month===c&&e.day<h);return t===-1?Vy.length-1:t===0?0:t-1}function k3(e){let t=N1[fm.indexOf(e.era)];if(!t)throw new Error("Unknown era: "+e.era);return new Di(e.year+t,e.month,e.day)}class GV extends Bl{fromJulianDay(t){let i=super.fromJulianDay(t),c=dD(i);return new Di(this,fm[c],i.year-N1[c],i.month,i.day)}toJulianDay(t){return super.toJulianDay(k3(t))}balanceDate(t){let i=k3(t),c=dD(i);fm[c]!==t.era&&(t.era=fm[c],t.year=i.year-N1[c]),this.constrainDate(t)}constrainDate(t){let i=fm.indexOf(t.era),c=UV[i];if(c!=null){let[h,_,w]=c,n=h-N1[i];t.year=Math.max(1,Math.min(n,t.year)),t.year===n&&(t.month=Math.min(_,t.month),t.month===_&&(t.day=Math.min(w,t.day)))}if(t.year===1&&i>=0){let[,h,_]=Vy[i];t.month=Math.max(h,t.month),t.month===h&&(t.day=Math.max(_,t.day))}}getEras(){return fm}getYearsInEra(t){let i=fm.indexOf(t.era),c=Vy[i],h=Vy[i+1];if(h==null)return 9999-c[0]+1;let _=h[0]-c[0];return(t.month<h[1]||t.month===h[1]&&t.day<h[2])&&_++,_}getDaysInMonth(t){return super.getDaysInMonth(k3(t))}getMinimumMonthInYear(t){let i=hD(t);return i?i[1]:1}getMinimumDayInMonth(t){let i=hD(t);return i&&t.month===i[1]?i[2]:1}constructor(...t){super(...t),this.identifier="japanese"}}function hD(e){if(e.year===1){let t=fm.indexOf(e.era);return Vy[t]}}const vk=-543;class HV extends Bl{fromJulianDay(t){let i=super.fromJulianDay(t),c=T_(i.era,i.year);return new Di(this,c-vk,i.month,i.day)}toJulianDay(t){return super.toJulianDay(fD(t))}getEras(){return["BE"]}getDaysInMonth(t){return super.getDaysInMonth(fD(t))}balanceDate(){}constructor(...t){super(...t),this.identifier="buddhist"}}function fD(e){let[t,i]=Nw(e.year+vk);return new Di(t,i,e.month,e.day)}const aw=1911;function _k(e){return e.era==="minguo"?e.year+aw:1-e.year+aw}function pD(e){let t=e-aw;return t>0?["minguo",t]:["before_minguo",1-t]}class qV extends Bl{fromJulianDay(t){let i=super.fromJulianDay(t),c=T_(i.era,i.year),[h,_]=pD(c);return new Di(this,h,_,i.month,i.day)}toJulianDay(t){return super.toJulianDay(mD(t))}getEras(){return["before_minguo","minguo"]}balanceDate(t){let[i,c]=pD(_k(t));t.era=i,t.year=c}isInverseEra(t){return t.era==="before_minguo"}getDaysInMonth(t){return super.getDaysInMonth(mD(t))}getYearsInEra(t){return t.era==="before_minguo"?9999:9999-aw}constructor(...t){super(...t),this.identifier="roc"}}function mD(e){let[t,i]=Nw(_k(e));return new Di(t,i,e.month,e.day)}const gD=1948320,yD=[0,31,62,93,124,155,186,216,246,276,306,336];class WV{fromJulianDay(t){let i=t-gD,c=1+Math.floor((33*i+3)/12053),h=365*(c-1)+Math.floor((8*c+21)/33),_=i-h,w=_<216?Math.floor(_/31):Math.floor((_-6)/30),n=_-yD[w]+1;return new Di(this,c,w+1,n)}toJulianDay(t){let i=gD-1+365*(t.year-1)+Math.floor((8*t.year+21)/33);return i+=yD[t.month-1],i+=t.day,i}getMonthsInYear(){return 12}getDaysInMonth(t){return t.month<=6?31:t.month<=11||Fy(25*t.year+11,33)<8?30:29}getEras(){return["AP"]}getYearsInEra(){return 9377}constructor(){this.identifier="persian"}}const R3=78,xD=80;class KV extends Bl{fromJulianDay(t){let i=super.fromJulianDay(t),c=i.year-R3,h=t-Ug(i.era,i.year,1,1),_;h<xD?(c--,_=mm(i.year-1)?31:30,h+=_+155+90+10):(_=mm(i.year)?31:30,h-=xD);let w,n;if(h<_)w=1,n=h+1;else{let k=h-_;k<155?(w=Math.floor(k/31)+2,n=k%31+1):(k-=155,w=Math.floor(k/30)+7,n=k%30+1)}return new Di(this,c,w,n)}toJulianDay(t){let i=t.year+R3,[c,h]=Nw(i),_,w;return mm(h)?(_=31,w=Ug(c,h,3,21)):(_=30,w=Ug(c,h,3,22)),t.month===1?w+t.day-1:(w+=_+Math.min(t.month-2,5)*31,t.month>=8&&(w+=(t.month-7)*30),w+=t.day-1,w)}getDaysInMonth(t){return t.month===1&&mm(t.year+R3)||t.month>=2&&t.month<=6?31:30}getYearsInEra(){return 9919}getEras(){return["saka"]}balanceDate(){}constructor(...t){super(...t),this.identifier="indian"}}const nw=1948440,vD=1948439,mu=1300,xy=1600,ZV=460322;function iw(e,t,i,c){return c+Math.ceil(29.5*(i-1))+(t-1)*354+Math.floor((3+11*t)/30)+e-1}function bk(e,t,i){let c=Math.floor((30*(i-t)+10646)/10631),h=Math.min(12,Math.ceil((i-(29+iw(t,c,1,1)))/29.5)+1),_=i-iw(t,c,h,1)+1;return new Di(e,c,h,_)}function _D(e){return(14+11*e)%30<11}class y5{fromJulianDay(t){return bk(this,nw,t)}toJulianDay(t){return iw(nw,t.year,t.month,t.day)}getDaysInMonth(t){let i=29+t.month%2;return t.month===12&&_D(t.year)&&i++,i}getMonthsInYear(){return 12}getDaysInYear(t){return _D(t.year)?355:354}getYearsInEra(){return 9665}getEras(){return["AH"]}constructor(){this.identifier="islamic-civil"}}class XV extends y5{fromJulianDay(t){return bk(this,vD,t)}toJulianDay(t){return iw(vD,t.year,t.month,t.day)}constructor(...t){super(...t),this.identifier="islamic-tbla"}}const YV="qgpUDckO1AbqBmwDrQpVBakGkgepC9QF2gpcBS0NlQZKB1QLagutBa4ETwoXBYsGpQbVCtYCWwmdBE0KJg2VDawFtgm6AlsKKwWVCsoG6Qr0AnYJtgJWCcoKpAvSC9kF3AJtCU0FpQpSC6ULtAW2CVcFlwJLBaMGUgdlC2oFqworBZUMSg2lDcoF1gpXCasESwmlClILagt1BXYCtwhbBFUFqQW0BdoJ3QRuAjYJqgpUDbIN1QXaAlsJqwRVCkkLZAtxC7QFtQpVCiUNkg7JDtQG6QprCasEkwpJDaQNsg25CroEWworBZUKKgtVC1wFvQQ9Ah0JlQpKC1oLbQW2AjsJmwRVBqkGVAdqC2wFrQpVBSkLkgupC9QF2gpaBasKlQVJB2QHqgu1BbYCVgpNDiULUgtqC60FrgIvCZcESwalBqwG1gpdBZ0ETQoWDZUNqgW1BdoCWwmtBJUFygbkBuoK9QS2AlYJqgpUC9IL2QXqAm0JrQSVCkoLpQuyBbUJ1gSXCkcFkwZJB1ULagVrCisFiwpGDaMNygXWCtsEawJLCaUKUgtpC3UFdgG3CFsCKwVlBbQF2gntBG0BtgimClINqQ3UBdoKWwmrBFMGKQdiB6kLsgW1ClUFJQuSDckO0gbpCmsFqwRVCikNVA2qDbUJugQ7CpsETQqqCtUK2gJdCV4ELgqaDFUNsga5BroEXQotBZUKUguoC7QLuQXaAloJSgukDdEO6AZqC20FNQWVBkoNqA3UDdoGWwWdAisGFQtKC5ULqgWuCi4JjwwnBZUGqgbWCl0FnQI=";let Z4,Uy;function B1(e){return ZV+Uy[e-mu]}function Nv(e,t){let i=e-mu,c=1<<11-(t-1);return(Z4[i]&c)===0?29:30}function bD(e,t){let i=B1(e);for(let c=1;c<t;c++)i+=Nv(e,c);return i}function wD(e){return Uy[e+1-mu]-Uy[e-mu]}class JV extends y5{fromJulianDay(t){let i=t-nw,c=B1(mu),h=B1(xy);if(i<c||i>h)return super.fromJulianDay(t);{let _=mu-1,w=1,n=1;for(;n>0;){_++,n=i-B1(_)+1;let k=wD(_);if(n===k){w=12;break}else if(n<k){let N=Nv(_,w);for(w=1;n>N;)n-=N,w++,N=Nv(_,w);break}}return new Di(this,_,w,i-bD(_,w)+1)}}toJulianDay(t){return t.year<mu||t.year>xy?super.toJulianDay(t):nw+bD(t.year,t.month)+(t.day-1)}getDaysInMonth(t){return t.year<mu||t.year>xy?super.getDaysInMonth(t):Nv(t.year,t.month)}getDaysInYear(t){return t.year<mu||t.year>xy?super.getDaysInYear(t):wD(t.year)}constructor(){if(super(),this.identifier="islamic-umalqura",Z4||(Z4=new Uint16Array(Uint8Array.from(atob(YV),t=>t.charCodeAt(0)).buffer)),!Uy){Uy=new Uint32Array(xy-mu+1);let t=0;for(let i=mu;i<=xy;i++){Uy[i-mu]=t;for(let c=1;c<=12;c++)t+=Nv(i,c)}}}}const SD=347997,wk=1080,Sk=24*wk,QV=29,eU=12*wk+793,tU=QV*Sk+eU;function Fg(e){return Fy(e*7+1,19)<7}function j1(e){let t=Math.floor((235*e-234)/19),i=12084+13753*t,c=t*29+Math.floor(i/25920);return Fy(3*(c+1),7)<3&&(c+=1),c}function rU(e){let t=j1(e-1),i=j1(e);return j1(e+1)-i===356?2:i-t===382?1:0}function qv(e){return j1(e)+rU(e)}function Tk(e){return qv(e+1)-qv(e)}function aU(e){let t=Tk(e);switch(t>380&&(t-=30),t){case 353:return 0;case 354:return 1;case 355:return 2}}function f1(e,t){if(t>=6&&!Fg(e)&&t++,t===4||t===7||t===9||t===11||t===13)return 29;let i=aU(e);return t===2?i===2?30:29:t===3?i===0?29:30:t===6?Fg(e)?30:0:30}class nU{fromJulianDay(t){let i=t-SD,c=i*Sk/tU,h=Math.floor((19*c+234)/235)+1,_=qv(h),w=Math.floor(i-_);for(;w<1;)h--,_=qv(h),w=Math.floor(i-_);let n=1,k=0;for(;k<w;)k+=f1(h,n),n++;n--,k-=f1(h,n);let N=w-k;return new Di(this,h,n,N)}toJulianDay(t){let i=qv(t.year);for(let c=1;c<t.month;c++)i+=f1(t.year,c);return i+t.day+SD}getDaysInMonth(t){return f1(t.year,t.month)}getMonthsInYear(t){return Fg(t.year)?13:12}getDaysInYear(t){return Tk(t.year)}getYearsInEra(){return 9999}getEras(){return["AM"]}balanceYearMonth(t,i){i.year!==t.year&&(Fg(i.year)&&!Fg(t.year)&&i.month>6?t.month--:!Fg(i.year)&&Fg(t.year)&&i.month>6&&t.month++)}constructor(){this.identifier="hebrew"}}const X4=1723856,TD=1824665,Y4=5500;function sw(e,t,i,c){return e+365*t+Math.floor(t/4)+30*(i-1)+c-1}function x5(e,t){let i=Math.floor(4*(t-e)/1461),c=1+Math.floor((t-sw(e,i,1,1))/30),h=t+1-sw(e,i,c,1);return[i,c,h]}function Ek(e){return Math.floor(e%4/3)}function Ck(e,t){return t%13!==0?30:Ek(e)+5}class v5{fromJulianDay(t){let[i,c,h]=x5(X4,t),_="AM";return i<=0&&(_="AA",i+=Y4),new Di(this,_,i,c,h)}toJulianDay(t){let i=t.year;return t.era==="AA"&&(i-=Y4),sw(X4,i,t.month,t.day)}getDaysInMonth(t){return Ck(t.year,t.month)}getMonthsInYear(){return 13}getDaysInYear(t){return 365+Ek(t.year)}getYearsInEra(t){return t.era==="AA"?9999:9991}getEras(){return["AA","AM"]}constructor(){this.identifier="ethiopic"}}class iU extends v5{fromJulianDay(t){let[i,c,h]=x5(X4,t);return i+=Y4,new Di(this,"AA",i,c,h)}getEras(){return["AA"]}getYearsInEra(){return 9999}constructor(...t){super(...t),this.identifier="ethioaa"}}class sU extends v5{fromJulianDay(t){let[i,c,h]=x5(TD,t),_="CE";return i<=0&&(_="BCE",i=1-i),new Di(this,_,i,c,h)}toJulianDay(t){let i=t.year;return t.era==="BCE"&&(i=1-i),sw(TD,i,t.month,t.day)}getDaysInMonth(t){let i=t.year;return t.era==="BCE"&&(i=1-i),Ck(i,t.month)}isInverseEra(t){return t.era==="BCE"}balanceDate(t){t.year<=0&&(t.era=t.era==="BCE"?"CE":"BCE",t.year=1-t.year)}getEras(){return["BCE","CE"]}getYearsInEra(t){return t.era==="BCE"?9999:9715}constructor(...t){super(...t),this.identifier="coptic"}}function ow(e){switch(e){case"buddhist":return new HV;case"ethiopic":return new v5;case"ethioaa":return new iU;case"coptic":return new sU;case"hebrew":return new nU;case"indian":return new KV;case"islamic-civil":return new y5;case"islamic-tbla":return new XV;case"islamic-umalqura":return new JV;case"japanese":return new GV;case"persian":return new WV;case"roc":return new qV;case"gregory":default:return new Bl}}let I3=new Map;class gd{format(t){return this.formatter.format(t)}formatToParts(t){return this.formatter.formatToParts(t)}formatRange(t,i){if(typeof this.formatter.formatRange=="function")return this.formatter.formatRange(t,i);if(i<t)throw new RangeError("End date must be >= start date");return`${this.formatter.format(t)}  ${this.formatter.format(i)}`}formatRangeToParts(t,i){if(typeof this.formatter.formatRangeToParts=="function")return this.formatter.formatRangeToParts(t,i);if(i<t)throw new RangeError("End date must be >= start date");let c=this.formatter.formatToParts(t),h=this.formatter.formatToParts(i);return[...c.map(_=>({..._,source:"startRange"})),{type:"literal",value:"  ",source:"shared"},...h.map(_=>({..._,source:"endRange"}))]}resolvedOptions(){let t=this.formatter.resolvedOptions();return cU()&&(this.resolvedHourCycle||(this.resolvedHourCycle=uU(t.locale,this.options)),t.hourCycle=this.resolvedHourCycle,t.hour12=this.resolvedHourCycle==="h11"||this.resolvedHourCycle==="h12"),t.calendar==="ethiopic-amete-alem"&&(t.calendar="ethioaa"),t}constructor(t,i={}){this.formatter=Dk(t,i),this.options=i}}const oU={true:{ja:"h11"},false:{}};function Dk(e,t={}){if(typeof t.hour12=="boolean"&&lU()){t={...t};let h=oU[String(t.hour12)][e.split("-")[0]],_=t.hour12?"h12":"h23";t.hourCycle=h??_,delete t.hour12}let i=e+(t?Object.entries(t).sort((h,_)=>h[0]<_[0]?-1:1).join():"");if(I3.has(i))return I3.get(i);let c=new Intl.DateTimeFormat(e,t);return I3.set(i,c),c}let z3=null;function lU(){return z3==null&&(z3=new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!1}).format(new Date(2020,2,3,0))==="24"),z3}let L3=null;function cU(){return L3==null&&(L3=new Intl.DateTimeFormat("fr",{hour:"numeric",hour12:!1}).resolvedOptions().hourCycle==="h12"),L3}function uU(e,t){if(!t.timeStyle&&!t.hour)return;e=e.replace(/(-u-)?-nu-[a-zA-Z0-9]+/,""),e+=(e.includes("-u-")?"":"-u")+"-nu-latn";let i=Dk(e,{...t,timeZone:void 0}),c=parseInt(i.formatToParts(new Date(2020,2,3,0)).find(_=>_.type==="hour").value,10),h=parseInt(i.formatToParts(new Date(2020,2,3,23)).find(_=>_.type==="hour").value,10);if(c===0&&h===23)return"h23";if(c===24&&h===23)return"h24";if(c===0&&h===11)return"h11";if(c===12&&h===11)return"h12";throw new Error("Unexpected hour cycle result")}const si=typeof document<"u"?ra.useLayoutEffect:()=>{};function Zs(e){const t=V.useRef(null);return si(()=>{t.current=e},[e]),V.useCallback((...i)=>{const c=t.current;return c==null?void 0:c(...i)},[])}function dU(e){let[t,i]=V.useState(e),c=V.useRef(null),h=Zs(()=>{if(!c.current)return;let w=c.current.next();if(w.done){c.current=null;return}t===w.value?h():i(w.value)});si(()=>{c.current&&h()});let _=Zs(w=>{c.current=w(t),h()});return[t,_]}let hU=!!(typeof window<"u"&&window.document&&window.document.createElement),Gy=new Map,ED=new FinalizationRegistry(e=>{Gy.delete(e)});function Ns(e){let[t,i]=V.useState(e),c=V.useRef(null),h=aV(t),_=V.useRef(null);if(ED.register(_,h),hU){const w=Gy.get(h);w&&!w.includes(c)?w.push(c):Gy.set(h,[c])}return si(()=>{let w=h;return()=>{ED.unregister(_),Gy.delete(w)}},[h]),V.useEffect(()=>{let w=c.current;return w&&i(w),()=>{w&&(c.current=null)}}),h}function fU(e,t){if(e===t)return e;let i=Gy.get(e);if(i)return i.forEach(h=>h.current=t),t;let c=Gy.get(t);return c?(c.forEach(h=>h.current=e),e):t}function vm(e=[]){let t=Ns(),[i,c]=dU(t),h=V.useCallback(()=>{c(function*(){yield t,yield document.getElementById(t)?t:void 0})},[t,c]);return si(h,[t,h,...e]),i}function qi(...e){return(...t)=>{for(let i of e)typeof i=="function"&&i(...t)}}const Gn=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},Dc=e=>e&&"window"in e&&e.window===e?e:Gn(e).defaultView||window;function pU(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function mU(e){return pU(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let gU=!1;function l0(){return gU}function ji(e,t){if(!l0())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let i=t;for(;i!==null;){if(i===e)return!0;i.tagName==="SLOT"&&i.assignedSlot?i=i.assignedSlot.parentNode:mU(i)?i=i.host:i=i.parentNode}return!1}const bo=(e=document)=>{var t;if(!l0())return e.activeElement;let i=e.activeElement;for(;i&&"shadowRoot"in i&&(!((t=i.shadowRoot)===null||t===void 0)&&t.activeElement);)i=i.shadowRoot.activeElement;return i};function Vn(e){return l0()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}class yU{get currentNode(){return this._currentNode}set currentNode(t){if(!ji(this.root,t))throw new Error("Cannot set currentNode to a node that is not contained by the root node.");const i=[];let c=t,h=t;for(this._currentNode=t;c&&c!==this.root;)if(c.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const w=c,n=this._doc.createTreeWalker(w,this.whatToShow,{acceptNode:this._acceptNode});i.push(n),n.currentNode=h,this._currentSetFor.add(n),c=h=w.host}else c=c.parentNode;const _=this._doc.createTreeWalker(this.root,this.whatToShow,{acceptNode:this._acceptNode});i.push(_),_.currentNode=h,this._currentSetFor.add(_),this._walkerStack=i}get doc(){return this._doc}firstChild(){let t=this.currentNode,i=this.nextNode();return ji(t,i)?(i&&(this.currentNode=i),i):(this.currentNode=t,null)}lastChild(){let i=this._walkerStack[0].lastChild();return i&&(this.currentNode=i),i}nextNode(){const t=this._walkerStack[0].nextNode();if(t){if(t.shadowRoot){var i;let h;if(typeof this.filter=="function"?h=this.filter(t):!((i=this.filter)===null||i===void 0)&&i.acceptNode&&(h=this.filter.acceptNode(t)),h===NodeFilter.FILTER_ACCEPT)return this.currentNode=t,t;let _=this.nextNode();return _&&(this.currentNode=_),_}return t&&(this.currentNode=t),t}else if(this._walkerStack.length>1){this._walkerStack.shift();let c=this.nextNode();return c&&(this.currentNode=c),c}else return null}previousNode(){const t=this._walkerStack[0];if(t.currentNode===t.root){if(this._currentSetFor.has(t))if(this._currentSetFor.delete(t),this._walkerStack.length>1){this._walkerStack.shift();let h=this.previousNode();return h&&(this.currentNode=h),h}else return null;return null}const i=t.previousNode();if(i){if(i.shadowRoot){var c;let _;if(typeof this.filter=="function"?_=this.filter(i):!((c=this.filter)===null||c===void 0)&&c.acceptNode&&(_=this.filter.acceptNode(i)),_===NodeFilter.FILTER_ACCEPT)return i&&(this.currentNode=i),i;let w=this.lastChild();return w&&(this.currentNode=w),w}return i&&(this.currentNode=i),i}else if(this._walkerStack.length>1){this._walkerStack.shift();let h=this.previousNode();return h&&(this.currentNode=h),h}else return null}nextSibling(){return null}previousSibling(){return null}parentNode(){return null}constructor(t,i,c,h){this._walkerStack=[],this._currentSetFor=new Set,this._acceptNode=w=>{if(w.nodeType===Node.ELEMENT_NODE){const k=w.shadowRoot;if(k){const N=this._doc.createTreeWalker(k,this.whatToShow,{acceptNode:this._acceptNode});return this._walkerStack.unshift(N),NodeFilter.FILTER_ACCEPT}else{var n;if(typeof this.filter=="function")return this.filter(w);if(!((n=this.filter)===null||n===void 0)&&n.acceptNode)return this.filter.acceptNode(w);if(this.filter===null)return NodeFilter.FILTER_ACCEPT}}return NodeFilter.FILTER_SKIP},this._doc=t,this.root=i,this.filter=h??null,this.whatToShow=c??NodeFilter.SHOW_ALL,this._currentNode=i,this._walkerStack.unshift(t.createTreeWalker(i,c,this._acceptNode));const _=i.shadowRoot;if(_){const w=this._doc.createTreeWalker(_,this.whatToShow,{acceptNode:this._acceptNode});this._walkerStack.unshift(w)}}}function xU(e,t,i,c){return l0()?new yU(e,t,i,c):e.createTreeWalker(t,i,c)}function Pk(e){var t,i,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(t=0;t<h;t++)e[t]&&(i=Pk(e[t]))&&(c&&(c+=" "),c+=i)}else for(i in e)e[i]&&(c&&(c+=" "),c+=i);return c}function vU(){for(var e,t,i=0,c="",h=arguments.length;i<h;i++)(e=arguments[i])&&(t=Pk(e))&&(c&&(c+=" "),c+=t);return c}function xr(...e){let t={...e[0]};for(let i=1;i<e.length;i++){let c=e[i];for(let h in c){let _=t[h],w=c[h];typeof _=="function"&&typeof w=="function"&&h[0]==="o"&&h[1]==="n"&&h.charCodeAt(2)>=65&&h.charCodeAt(2)<=90?t[h]=qi(_,w):(h==="className"||h==="UNSAFE_className")&&typeof _=="string"&&typeof w=="string"?t[h]=vU(_,w):h==="id"&&_&&w?t.id=fU(_,w):t[h]=w!==void 0?w:_}}return t}function _5(...e){return e.length===1&&e[0]?e[0]:t=>{for(let i of e)typeof i=="function"?i(t):i!=null&&(i.current=t)}}const _U=new Set(["id"]),bU=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),wU=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),SU=/^(data-.*)$/;function Fl(e,t={}){let{labelable:i,isLink:c,propNames:h}=t,_={};for(const w in e)Object.prototype.hasOwnProperty.call(e,w)&&(_U.has(w)||i&&bU.has(w)||c&&wU.has(w)||h!=null&&h.has(w)||SU.test(w))&&(_[w]=e[w]);return _}function pl(e){if(TU())e.focus({preventScroll:!0});else{let t=EU(e);e.focus(),CU(t)}}let p1=null;function TU(){if(p1==null){p1=!1;try{document.createElement("div").focus({get preventScroll(){return p1=!0,!0}})}catch{}}return p1}function EU(e){let t=e.parentNode,i=[],c=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==c;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&i.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return c instanceof HTMLElement&&i.push({element:c,scrollTop:c.scrollTop,scrollLeft:c.scrollLeft}),i}function CU(e){for(let{element:t,scrollTop:i,scrollLeft:c}of e)t.scrollTop=i,t.scrollLeft=c}function Ow(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(i=>e.test(i.brand)))||e.test(window.navigator.userAgent)}function b5(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Vf(e){let t=null;return()=>(t==null&&(t=e()),t)}const bm=Vf(function(){return b5(/^Mac/i)}),Mk=Vf(function(){return b5(/^iPhone/i)}),Ak=Vf(function(){return b5(/^iPad/i)||bm()&&navigator.maxTouchPoints>1}),Mm=Vf(function(){return Mk()||Ak()}),DU=Vf(function(){return bm()||Mm()}),kk=Vf(function(){return Ow(/AppleWebKit/i)&&!Rk()}),Rk=Vf(function(){return Ow(/Chrome/i)}),hx=Vf(function(){return Ow(/Android/i)}),PU=Vf(function(){return Ow(/Firefox/i)}),Ik=V.createContext({isNative:!0,open:kU,useHref:e=>e});function MU(e){let{children:t,navigate:i,useHref:c}=e,h=V.useMemo(()=>({isNative:!1,open:(_,w,n,k)=>{zk(_,N=>{AU(N,w)?i(n,k):wm(N,w)})},useHref:c||(_=>_)}),[i,c]);return ra.createElement(Ik.Provider,{value:h},t)}function Fw(){return V.useContext(Ik)}function AU(e,t){let i=e.getAttribute("target");return(!i||i==="_self")&&e.origin===location.origin&&!e.hasAttribute("download")&&!t.metaKey&&!t.ctrlKey&&!t.altKey&&!t.shiftKey}function wm(e,t,i=!0){var c,h;let{metaKey:_,ctrlKey:w,altKey:n,shiftKey:k}=t;PU()&&(!((h=window.event)===null||h===void 0||(c=h.type)===null||c===void 0)&&c.startsWith("key"))&&e.target==="_blank"&&(bm()?_=!0:w=!0);let N=kk()&&bm()&&!Ak()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:_,ctrlKey:w,altKey:n,shiftKey:k}):new MouseEvent("click",{metaKey:_,ctrlKey:w,altKey:n,shiftKey:k,bubbles:!0,cancelable:!0});wm.isOpening=i,pl(e),e.dispatchEvent(N),wm.isOpening=!1}wm.isOpening=!1;function zk(e,t){if(e instanceof HTMLAnchorElement)t(e);else if(e.hasAttribute("data-href")){let i=document.createElement("a");i.href=e.getAttribute("data-href"),e.hasAttribute("data-target")&&(i.target=e.getAttribute("data-target")),e.hasAttribute("data-rel")&&(i.rel=e.getAttribute("data-rel")),e.hasAttribute("data-download")&&(i.download=e.getAttribute("data-download")),e.hasAttribute("data-ping")&&(i.ping=e.getAttribute("data-ping")),e.hasAttribute("data-referrer-policy")&&(i.referrerPolicy=e.getAttribute("data-referrer-policy")),e.appendChild(i),t(i),e.removeChild(i)}}function kU(e,t){zk(e,i=>wm(i,t))}function RU(e){let t=Fw();var i;const c=t.useHref((i=e==null?void 0:e.href)!==null&&i!==void 0?i:"");return{href:e!=null&&e.href?c:void 0,target:e==null?void 0:e.target,rel:e==null?void 0:e.rel,download:e==null?void 0:e.download,ping:e==null?void 0:e.ping,referrerPolicy:e==null?void 0:e.referrerPolicy}}let Py=new Map,J4=new Set;function CD(){if(typeof window>"u")return;function e(c){return"propertyName"in c}let t=c=>{if(!e(c)||!c.target)return;let h=Py.get(c.target);h||(h=new Set,Py.set(c.target,h),c.target.addEventListener("transitioncancel",i,{once:!0})),h.add(c.propertyName)},i=c=>{if(!e(c)||!c.target)return;let h=Py.get(c.target);if(h&&(h.delete(c.propertyName),h.size===0&&(c.target.removeEventListener("transitioncancel",i),Py.delete(c.target)),Py.size===0)){for(let _ of J4)_();J4.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",i)}typeof document<"u"&&(document.readyState!=="loading"?CD():document.addEventListener("DOMContentLoaded",CD));function Lk(e){requestAnimationFrame(()=>{Py.size===0?e():J4.add(e)})}function Vw(){let e=V.useRef(new Map),t=V.useCallback((h,_,w,n)=>{let k=n!=null&&n.once?(...N)=>{e.current.delete(w),w(...N)}:w;e.current.set(w,{type:_,eventTarget:h,fn:k,options:n}),h.addEventListener(_,k,n)},[]),i=V.useCallback((h,_,w,n)=>{var k;let N=((k=e.current.get(w))===null||k===void 0?void 0:k.fn)||w;h.removeEventListener(_,N,n),e.current.delete(w)},[]),c=V.useCallback(()=>{e.current.forEach((h,_)=>{i(h.eventTarget,h.type,_,h.options)})},[i]);return V.useEffect(()=>c,[c]),{addGlobalListener:t,removeGlobalListener:i,removeAllGlobalListeners:c}}function C_(e,t){let{id:i,"aria-label":c,"aria-labelledby":h}=e;return i=Ns(i),h&&c?h=[...new Set([i,...h.trim().split(/\s+/)])].join(" "):h&&(h=h.trim().split(/\s+/).join(" ")),!c&&!h&&t&&(c=t),{id:i,"aria-label":c,"aria-labelledby":h}}function IU(e){const t=V.useRef(null);return V.useMemo(()=>({get current(){return t.current},set current(i){t.current=i,typeof e=="function"?e(i):e&&(e.current=i)}}),[e])}function DD(e,t){const i=V.useRef(!0),c=V.useRef(null);V.useEffect(()=>(i.current=!0,()=>{i.current=!1}),[]),V.useEffect(()=>{let h=c.current;i.current?i.current=!1:(!h||t.some((_,w)=>!Object.is(_,h[w])))&&e(),c.current=t},t)}function PD(e,t){const i=V.useRef(!0),c=V.useRef(null);si(()=>(i.current=!0,()=>{i.current=!1}),[]),si(()=>{i.current?i.current=!1:(!c.current||t.some((h,_)=>!Object.is(h,c[_])))&&e(),c.current=t},t)}function zU(){return typeof window.ResizeObserver<"u"}function MD(e){const{ref:t,box:i,onResize:c}=e;V.useEffect(()=>{let h=t==null?void 0:t.current;if(h)if(zU()){const _=new window.ResizeObserver(w=>{w.length&&c()});return _.observe(h,{box:i}),()=>{h&&_.unobserve(h)}}else return window.addEventListener("resize",c,!1),()=>{window.removeEventListener("resize",c,!1)}},[c,t,i])}function $k(e,t){si(()=>{if(e&&e.ref&&t)return e.ref.current=t.current,()=>{e.ref&&(e.ref.current=null)}})}function i_(e,t){if(!e)return!1;let i=window.getComputedStyle(e),c=/(auto|scroll)/.test(i.overflow+i.overflowX+i.overflowY);return c&&t&&(c=e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth),c}function Uw(e,t){let i=e;for(i_(i,t)&&(i=i.parentElement);i&&!i_(i,t);)i=i.parentElement;return i||document.scrollingElement||document.documentElement}function LU(e,t){const i=[];for(;e&&e!==document.documentElement;)i_(e,t)&&i.push(e),e=e.parentElement;return i}let gu=typeof document<"u"&&window.visualViewport;function $U(){let e=o0(),[t,i]=V.useState(()=>e?{width:0,height:0}:AD());return V.useEffect(()=>{let c=()=>{i(h=>{let _=AD();return _.width===h.width&&_.height===h.height?h:_})};return gu?gu.addEventListener("resize",c):window.addEventListener("resize",c),()=>{gu?gu.removeEventListener("resize",c):window.removeEventListener("resize",c)}},[]),t}function AD(){return{width:gu&&(gu==null?void 0:gu.width)||window.innerWidth,height:gu&&(gu==null?void 0:gu.height)||window.innerHeight}}let NU=0;const $3=new Map;function Gw(e){let[t,i]=V.useState();return si(()=>{if(!e)return;let c=$3.get(e);if(c)i(c.element.id);else{let h=`react-aria-description-${NU++}`;i(h);let _=document.createElement("div");_.id=h,_.style.display="none",_.textContent=e,document.body.appendChild(_),c={refCount:0,element:_},$3.set(e,c)}return c.refCount++,()=>{c&&--c.refCount===0&&(c.element.remove(),$3.delete(e))}},[e]),{"aria-describedby":e?t:void 0}}function gm(e,t,i,c){let h=Zs(i),_=i==null;V.useEffect(()=>{if(_||!e.current)return;let w=e.current;return w.addEventListener(t,h,c),()=>{w.removeEventListener(t,h,c)}},[e,t,c,_,h])}function Nk(e,t){let i=kD(e,t,"left"),c=kD(e,t,"top"),h=t.offsetWidth,_=t.offsetHeight,w=e.scrollLeft,n=e.scrollTop,{borderTopWidth:k,borderLeftWidth:N,scrollPaddingTop:B,scrollPaddingRight:F,scrollPaddingBottom:G,scrollPaddingLeft:Q}=getComputedStyle(e),te=w+parseInt(N,10),Y=n+parseInt(k,10),oe=te+e.clientWidth,de=Y+e.clientHeight,ge=parseInt(B,10)||0,be=parseInt(G,10)||0,pe=parseInt(F,10)||0,we=parseInt(Q,10)||0;i<=w+we?w=i-parseInt(N,10)-we:i+h>oe-pe&&(w+=i+h-oe+pe),c<=Y+ge?n=c-parseInt(k,10)-ge:c+_>de-be&&(n+=c+_-de+be),e.scrollLeft=w,e.scrollTop=n}function kD(e,t,i){const c=i==="left"?"offsetLeft":"offsetTop";let h=0;for(;t.offsetParent&&(h+=t[c],t.offsetParent!==e);){if(t.offsetParent.contains(e)){h-=e[c];break}t=t.offsetParent}return h}function lw(e,t){if(e&&document.contains(e)){let w=document.scrollingElement||document.documentElement;if(window.getComputedStyle(w).overflow==="hidden"){let k=LU(e);for(let N of k)Nk(N,e)}else{var i;let{left:k,top:N}=e.getBoundingClientRect();e==null||(i=e.scrollIntoView)===null||i===void 0||i.call(e,{block:"nearest"});let{left:B,top:F}=e.getBoundingClientRect();if(Math.abs(k-B)>1||Math.abs(N-F)>1){var c,h,_;t==null||(h=t.containingElement)===null||h===void 0||(c=h.scrollIntoView)===null||c===void 0||c.call(h,{block:"center",inline:"center"}),(_=e.scrollIntoView)===null||_===void 0||_.call(e,{block:"nearest"})}}}}function Q4(e){return e.mozInputSource===0&&e.isTrusted?!0:hx()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function BU(e){return!hx()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}function Bk(e,t){let i=V.useRef(null);return e&&i.current&&t(e,i.current)&&(e=i.current),i.current=e,e}function D_(e,t,i){let c=V.useRef(t),h=Zs(()=>{i&&i(c.current)});V.useEffect(()=>{var _;let w=e==null||(_=e.current)===null||_===void 0?void 0:_.form;return w==null||w.addEventListener("reset",h),()=>{w==null||w.removeEventListener("reset",h)}},[e,h])}const jU="react-aria-clear-focus",OU="react-aria-focus";function My(e){return bm()?e.metaKey:e.ctrlKey}const w5=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])'],FU=w5.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";w5.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const VU=w5.join(':not([hidden]):not([tabindex="-1"]),');function jk(e){return e.matches(FU)}function UU(e){return e.matches(VU)}function Xs(e,t,i){let[c,h]=V.useState(e||t),_=V.useRef(e!==void 0),w=e!==void 0;V.useEffect(()=>{let N=_.current;N!==w&&console.warn(`WARN: A component changed from ${N?"controlled":"uncontrolled"} to ${w?"controlled":"uncontrolled"}.`),_.current=w},[w]);let n=w?e:c,k=V.useCallback((N,...B)=>{let F=(G,...Q)=>{i&&(Object.is(n,G)||i(G,...Q)),w||(n=G)};typeof N=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),h((Q,...te)=>{let Y=N(w?n:Q,...te);return F(Y,...B),w?Q:Y})):(w||h(N),F(N,...B))},[w,n,i]);return[n,k]}function Wg(e,t=-1/0,i=1/0){return Math.min(Math.max(e,t),i)}function m1(e,t){let i=e,c=t.toString(),h=c.indexOf("."),_=h>=0?c.length-h:0;if(_>0){let w=Math.pow(10,_);i=Math.round(i*w)/w}return i}function Sf(e,t,i,c){t=Number(t),i=Number(i);let h=(e-(isNaN(t)?0:t))%c,_=m1(Math.abs(h)*2>=c?e+Math.sign(h)*(c-Math.abs(h)):e-h,c);return isNaN(t)?!isNaN(i)&&_>i&&(_=Math.floor(m1(i/c,c))*c):_<t?_=t:!isNaN(i)&&_>i&&(_=t+Math.floor(m1((i-t)/c,c))*c),_=m1(_,c),_}function ml(e){e=Bk(e??{},GU);let{locale:t}=Ms();return V.useMemo(()=>new gd(t,e),[t,e])}function GU(e,t){if(e===t)return!0;let i=Object.keys(e),c=Object.keys(t);if(i.length!==c.length)return!1;for(let h of i)if(t[h]!==e[h])return!1;return!0}let N3=new Map,eS=!1;try{eS=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let cw=!1;try{cw=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const Ok={degree:{narrow:{default:"","ja-JP":" ","zh-TW":"","sl-SI":" "}}};class uw{format(t){let i="";if(!eS&&this.options.signDisplay!=null?i=qU(this.numberFormatter,this.options.signDisplay,t):i=this.numberFormatter.format(t),this.options.style==="unit"&&!cw){var c;let{unit:h,unitDisplay:_="short",locale:w}=this.resolvedOptions();if(!h)return i;let n=(c=Ok[h])===null||c===void 0?void 0:c[_];i+=n[w]||n.default}return i}formatToParts(t){return this.numberFormatter.formatToParts(t)}formatRange(t,i){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(t,i);if(i<t)throw new RangeError("End date must be >= start date");return`${this.format(t)}  ${this.format(i)}`}formatRangeToParts(t,i){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(t,i);if(i<t)throw new RangeError("End date must be >= start date");let c=this.numberFormatter.formatToParts(t),h=this.numberFormatter.formatToParts(i);return[...c.map(_=>({..._,source:"startRange"})),{type:"literal",value:"  ",source:"shared"},...h.map(_=>({..._,source:"endRange"}))]}resolvedOptions(){let t=this.numberFormatter.resolvedOptions();return!eS&&this.options.signDisplay!=null&&(t={...t,signDisplay:this.options.signDisplay}),!cw&&this.options.style==="unit"&&(t={...t,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),t}constructor(t,i={}){this.numberFormatter=HU(t,i),this.options=i}}function HU(e,t={}){let{numberingSystem:i}=t;if(i&&e.includes("-nu-")&&(e.includes("-u-")||(e+="-u-"),e+=`-nu-${i}`),t.style==="unit"&&!cw){var c;let{unit:w,unitDisplay:n="short"}=t;if(!w)throw new Error('unit option must be provided with style: "unit"');if(!(!((c=Ok[w])===null||c===void 0)&&c[n]))throw new Error(`Unsupported unit ${w} with unitDisplay = ${n}`);t={...t,style:"decimal"}}let h=e+(t?Object.entries(t).sort((w,n)=>w[0]<n[0]?-1:1).join():"");if(N3.has(h))return N3.get(h);let _=new Intl.NumberFormat(e,t);return N3.set(h,_),_}function qU(e,t,i){if(t==="auto")return e.format(i);if(t==="never")return e.format(Math.abs(i));{let c=!1;if(t==="always"?c=i>0||Object.is(i,0):t==="exceptZero"&&(Object.is(i,-0)||Object.is(i,0)?i=Math.abs(i):c=i>0),c){let h=e.format(-i),_=e.format(i),w=h.replace(_,"").replace(/\u200e|\u061C/,"");return[...w].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),h.replace(_,"!!!").replace(w,"+").replace("!!!",_)}else return e.format(i)}}const WU=new RegExp("^.*\\(.*\\).*$"),KU=["latn","arab","hanidec","deva","beng"];class S5{parse(t){return B3(this.locale,this.options,t).parse(t)}isValidPartialNumber(t,i,c){return B3(this.locale,this.options,t).isValidPartialNumber(t,i,c)}getNumberingSystem(t){return B3(this.locale,this.options,t).options.numberingSystem}constructor(t,i={}){this.locale=t,this.options=i}}const RD=new Map;function B3(e,t,i){let c=ID(e,t);if(!e.includes("-nu-")&&!c.isValidPartialNumber(i)){for(let h of KU)if(h!==c.options.numberingSystem){let _=ID(e+(e.includes("-u-")?"-nu-":"-u-nu-")+h,t);if(_.isValidPartialNumber(i))return _}}return c}function ID(e,t){let i=e+(t?Object.entries(t).sort((h,_)=>h[0]<_[0]?-1:1).join():""),c=RD.get(i);return c||(c=new ZU(e,t),RD.set(i,c)),c}class ZU{parse(t){let i=this.sanitize(t);if(this.symbols.group&&(i=g1(i,this.symbols.group,"")),this.symbols.decimal&&(i=i.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(i=i.replace(this.symbols.minusSign,"-")),i=i.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let w=i.indexOf("-");i=i.replace("-","");let n=i.indexOf(".");n===-1&&(n=i.length),i=i.replace(".",""),n-2===0?i=`0.${i}`:n-2===-1?i=`0.0${i}`:n-2===-2?i="0.00":i=`${i.slice(0,n-2)}.${i.slice(n-2)}`,w>-1&&(i=`-${i}`)}let c=i?+i:NaN;if(isNaN(c))return NaN;if(this.options.style==="percent"){var h,_;let w={...this.options,style:"decimal",minimumFractionDigits:Math.min(((h=this.options.minimumFractionDigits)!==null&&h!==void 0?h:0)+2,20),maximumFractionDigits:Math.min(((_=this.options.maximumFractionDigits)!==null&&_!==void 0?_:0)+2,20)};return new S5(this.locale,w).parse(new uw(this.locale,w).format(c))}return this.options.currencySign==="accounting"&&WU.test(t)&&(c=-1*c),c}sanitize(t){return t=t.replace(this.symbols.literals,""),this.symbols.minusSign&&(t=t.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(t=t.replace(",",this.symbols.decimal),t=t.replace("",this.symbols.decimal)),this.symbols.group&&(t=g1(t,".",this.symbols.group))),this.options.locale==="fr-FR"&&(t=g1(t,".","")),t}isValidPartialNumber(t,i=-1/0,c=1/0){return t=this.sanitize(t),this.symbols.minusSign&&t.startsWith(this.symbols.minusSign)&&i<0?t=t.slice(this.symbols.minusSign.length):this.symbols.plusSign&&t.startsWith(this.symbols.plusSign)&&c>0&&(t=t.slice(this.symbols.plusSign.length)),this.symbols.group&&t.startsWith(this.symbols.group)||this.symbols.decimal&&t.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(t=g1(t,this.symbols.group,"")),t=t.replace(this.symbols.numeral,""),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,"")),t.length===0)}constructor(t,i={}){this.locale=t,this.formatter=new Intl.NumberFormat(t,i),this.options=this.formatter.resolvedOptions(),this.symbols=YU(t,this.formatter,this.options,i);var c,h;this.options.style==="percent"&&(((c=this.options.minimumFractionDigits)!==null&&c!==void 0?c:0)>18||((h=this.options.maximumFractionDigits)!==null&&h!==void 0?h:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const zD=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),XU=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function YU(e,t,i,c){var h,_,w,n;let k=new Intl.NumberFormat(e,{...i,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),N=k.formatToParts(-10000.111),B=k.formatToParts(10000.111),F=XU.map(se=>k.formatToParts(se));var G;let Q=(G=(h=N.find(se=>se.type==="minusSign"))===null||h===void 0?void 0:h.value)!==null&&G!==void 0?G:"-",te=(_=B.find(se=>se.type==="plusSign"))===null||_===void 0?void 0:_.value;!te&&((c==null?void 0:c.signDisplay)==="exceptZero"||(c==null?void 0:c.signDisplay)==="always")&&(te="+");let oe=(w=new Intl.NumberFormat(e,{...i,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(se=>se.type==="decimal"))===null||w===void 0?void 0:w.value,de=(n=N.find(se=>se.type==="group"))===null||n===void 0?void 0:n.value,ge=N.filter(se=>!zD.has(se.type)).map(se=>LD(se.value)),be=F.flatMap(se=>se.filter(ue=>!zD.has(ue.type)).map(ue=>LD(ue.value))),pe=[...new Set([...ge,...be])].sort((se,ue)=>ue.length-se.length),we=pe.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${pe.join("|")}|[\\p{White_Space}]`,"gu"),ke=[...new Intl.NumberFormat(i.locale,{useGrouping:!1}).format(9876543210)].reverse(),Ae=new Map(ke.map((se,ue)=>[se,ue])),re=new RegExp(`[${ke.join("")}]`,"g");return{minusSign:Q,plusSign:te,decimal:oe,group:de,literals:we,numeral:re,index:se=>String(Ae.get(se))}}function g1(e,t,i){return e.replaceAll?e.replaceAll(t,i):e.split(t).join(i)}function LD(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function tS(e={}){let{locale:t}=Ms();return V.useMemo(()=>new uw(t,e),[t,e])}let j3=new Map;function Fk(e){let{locale:t}=Ms(),i=t+(e?Object.entries(e).sort((h,_)=>h[0]<_[0]?-1:1).join():"");if(j3.has(i))return j3.get(i);let c=new Intl.Collator(t,e);return j3.set(i,c),c}function JU(e){let t=Fk({usage:"search",...e}),i=V.useCallback((_,w)=>w.length===0?!0:(_=_.normalize("NFC"),w=w.normalize("NFC"),t.compare(_.slice(0,w.length),w)===0),[t]),c=V.useCallback((_,w)=>w.length===0?!0:(_=_.normalize("NFC"),w=w.normalize("NFC"),t.compare(_.slice(-w.length),w)===0),[t]),h=V.useCallback((_,w)=>{if(w.length===0)return!0;_=_.normalize("NFC"),w=w.normalize("NFC");let n=0,k=w.length;for(;n+k<=_.length;n++){let N=_.slice(n,n+k);if(t.compare(w,N)===0)return!0}return!1},[t]);return V.useMemo(()=>({startsWith:i,endsWith:c,contains:h}),[i,c,h])}const gh={top:"top",bottom:"top",left:"left",right:"left"},dw={top:"bottom",bottom:"top",left:"right",right:"left"},QU={top:"left",left:"top"},rS={top:"height",left:"width"},Vk={width:"totalWidth",height:"totalHeight"},y1={};let Ws=typeof document<"u"?window.visualViewport:null;function $D(e){let t=0,i=0,c=0,h=0,_=0,w=0,n={};var k;let N=((k=Ws==null?void 0:Ws.scale)!==null&&k!==void 0?k:1)>1;if(e.tagName==="BODY"){let te=document.documentElement;c=te.clientWidth,h=te.clientHeight;var B;t=(B=Ws==null?void 0:Ws.width)!==null&&B!==void 0?B:c;var F;i=(F=Ws==null?void 0:Ws.height)!==null&&F!==void 0?F:h,n.top=te.scrollTop||e.scrollTop,n.left=te.scrollLeft||e.scrollLeft,Ws&&(_=Ws.offsetTop,w=Ws.offsetLeft)}else({width:t,height:i,top:_,left:w}=Hy(e)),n.top=e.scrollTop,n.left=e.scrollLeft,c=t,h=i;if(kk()&&(e.tagName==="BODY"||e.tagName==="HTML")&&N){n.top=0,n.left=0;var G;_=(G=Ws==null?void 0:Ws.pageTop)!==null&&G!==void 0?G:0;var Q;w=(Q=Ws==null?void 0:Ws.pageLeft)!==null&&Q!==void 0?Q:0}return{width:t,height:i,totalWidth:c,totalHeight:h,scroll:n,top:_,left:w}}function eG(e){return{top:e.scrollTop,left:e.scrollLeft,width:e.scrollWidth,height:e.scrollHeight}}function ND(e,t,i,c,h,_,w){var n;let k=(n=h.scroll[e])!==null&&n!==void 0?n:0,N=c[rS[e]],B=c.scroll[gh[e]]+_,F=N+c.scroll[gh[e]]-_,G=t-k+w[e]-c[gh[e]],Q=t-k+i+w[e]-c[gh[e]];return G<B?B-G:Q>F?Math.max(F-Q,B-G):0}function tG(e){let t=window.getComputedStyle(e);return{top:parseInt(t.marginTop,10)||0,bottom:parseInt(t.marginBottom,10)||0,left:parseInt(t.marginLeft,10)||0,right:parseInt(t.marginRight,10)||0}}function BD(e){if(y1[e])return y1[e];let[t,i]=e.split(" "),c=gh[t]||"right",h=QU[c];gh[i]||(i="center");let _=rS[c],w=rS[h];return y1[e]={placement:t,crossPlacement:i,axis:c,crossAxis:h,size:_,crossSize:w},y1[e]}function O3(e,t,i,c,h,_,w,n,k,N){let{placement:B,crossPlacement:F,axis:G,crossAxis:Q,size:te,crossSize:Y}=c,oe={};var de;oe[Q]=(de=e[Q])!==null&&de!==void 0?de:0;var ge,be,pe,we;F==="center"?oe[Q]+=(((ge=e[Y])!==null&&ge!==void 0?ge:0)-((be=i[Y])!==null&&be!==void 0?be:0))/2:F!==Q&&(oe[Q]+=((pe=e[Y])!==null&&pe!==void 0?pe:0)-((we=i[Y])!==null&&we!==void 0?we:0)),oe[Q]+=_;const ke=e[Q]-i[Y]+k+N,Ae=e[Q]+e[Y]-k-N;if(oe[Q]=Wg(oe[Q],ke,Ae),B===G){const re=n?w[te]:t[Vk[te]];oe[dw[G]]=Math.floor(re-e[G]+h)}else oe[G]=Math.floor(e[G]+e[te]+h);return oe}function rG(e,t,i,c,h,_,w,n){const k=c?i.height:t[Vk.height];var N;let B=e.top!=null?i.top+e.top:i.top+(k-((N=e.bottom)!==null&&N!==void 0?N:0)-w);var F,G,Q,te,Y,oe;let de=n!=="top"?Math.max(0,t.height+t.top+((F=t.scroll.top)!==null&&F!==void 0?F:0)-B-(((G=h.top)!==null&&G!==void 0?G:0)+((Q=h.bottom)!==null&&Q!==void 0?Q:0)+_)):Math.max(0,B+w-(t.top+((te=t.scroll.top)!==null&&te!==void 0?te:0))-(((Y=h.top)!==null&&Y!==void 0?Y:0)+((oe=h.bottom)!==null&&oe!==void 0?oe:0)+_));return Math.min(t.height-_*2,de)}function jD(e,t,i,c,h,_){let{placement:w,axis:n,size:k}=_;var N,B;if(w===n)return Math.max(0,i[n]-e[n]-((N=e.scroll[n])!==null&&N!==void 0?N:0)+t[n]-((B=c[n])!==null&&B!==void 0?B:0)-c[dw[n]]-h);var F;return Math.max(0,e[k]+e[n]+e.scroll[n]-t[n]-i[n]-i[k]-((F=c[n])!==null&&F!==void 0?F:0)-c[dw[n]]-h)}function aG(e,t,i,c,h,_,w,n,k,N,B,F,G,Q,te,Y){let oe=BD(e),{size:de,crossAxis:ge,crossSize:be,placement:pe,crossPlacement:we}=oe,ke=O3(t,n,i,oe,B,F,N,G,te,Y),Ae=B,re=jD(n,N,t,h,_+B,oe);if(w&&c[de]>re){let ut=BD(`${dw[pe]} ${we}`),Pt=O3(t,n,i,ut,B,F,N,G,te,Y);jD(n,N,t,h,_+B,ut)>re&&(oe=ut,ke=Pt,Ae=B)}let Te="bottom";oe.axis==="top"?oe.placement==="top"?Te="top":oe.placement==="bottom"&&(Te="bottom"):oe.crossAxis==="top"&&(oe.crossPlacement==="top"?Te="bottom":oe.crossPlacement==="bottom"&&(Te="top"));let se=ND(ge,ke[ge],i[be],n,k,_,N);ke[ge]+=se;let ue=rG(ke,n,N,G,h,_,i.height,Te);Q&&Q<ue&&(ue=Q),i.height=Math.min(i.height,ue),ke=O3(t,n,i,oe,Ae,F,N,G,te,Y),se=ND(ge,ke[ge],i[be],n,k,_,N),ke[ge]+=se;let De={},ce=t[ge]+.5*t[be]-ke[ge]-h[gh[ge]];const je=te/2+Y;var Le,Re,Ge,ze;const ot=gh[ge]==="left"?((Le=h.left)!==null&&Le!==void 0?Le:0)+((Re=h.right)!==null&&Re!==void 0?Re:0):((Ge=h.top)!==null&&Ge!==void 0?Ge:0)+((ze=h.bottom)!==null&&ze!==void 0?ze:0),Ee=i[be]-ot-te/2-Y,Ke=t[ge]+te/2-(ke[ge]+h[gh[ge]]),nt=t[ge]+t[be]-te/2-(ke[ge]+h[gh[ge]]),Xe=Wg(ce,Ke,nt);return De[ge]=Wg(Xe,je,Ee),{position:ke,maxHeight:ue,arrowOffsetLeft:De.left,arrowOffsetTop:De.top,placement:oe.placement}}function nG(e){let{placement:t,targetNode:i,overlayNode:c,scrollNode:h,padding:_,shouldFlip:w,boundaryElement:n,offset:k,crossOffset:N,maxHeight:B,arrowSize:F=0,arrowBoundaryOffset:G=0}=e,Q=c instanceof HTMLElement?iG(c):document.documentElement,te=Q===document.documentElement;const Y=window.getComputedStyle(Q).position;let oe=!!Y&&Y!=="static",de=te?Hy(i):OD(i,Q);if(!te){let{marginTop:De,marginLeft:ce}=window.getComputedStyle(i);de.top+=parseInt(De,10)||0,de.left+=parseInt(ce,10)||0}let ge=Hy(c),be=tG(c);var pe,we;ge.width+=((pe=be.left)!==null&&pe!==void 0?pe:0)+((we=be.right)!==null&&we!==void 0?we:0);var ke,Ae;ge.height+=((ke=be.top)!==null&&ke!==void 0?ke:0)+((Ae=be.bottom)!==null&&Ae!==void 0?Ae:0);let re=eG(h),Te=$D(n),se=$D(Q),ue=n.tagName==="BODY"?Hy(Q):OD(Q,n);return Q.tagName==="HTML"&&n.tagName==="BODY"&&(se.scroll.top=0,se.scroll.left=0),aG(t,de,ge,re,be,_,w,Te,se,ue,k,N,oe,B,F,G)}function Hy(e){let{top:t,left:i,width:c,height:h}=e.getBoundingClientRect(),{scrollTop:_,scrollLeft:w,clientTop:n,clientLeft:k}=document.documentElement;return{top:t+_-n,left:i+w-k,width:c,height:h}}function OD(e,t){let i=window.getComputedStyle(e),c;if(i.position==="fixed"){let{top:h,left:_,width:w,height:n}=e.getBoundingClientRect();c={top:h,left:_,width:w,height:n}}else{c=Hy(e);let h=Hy(t),_=window.getComputedStyle(t);h.top+=(parseInt(_.borderTopWidth,10)||0)-t.scrollTop,h.left+=(parseInt(_.borderLeftWidth,10)||0)-t.scrollLeft,c.top-=h.top,c.left-=h.left}return c.top-=parseInt(i.marginTop,10)||0,c.left-=parseInt(i.marginLeft,10)||0,c}function iG(e){let t=e.offsetParent;if(t&&t===document.body&&window.getComputedStyle(t).position==="static"&&!FD(t)&&(t=document.documentElement),t==null)for(t=e.parentElement;t&&!FD(t);)t=t.parentElement;return t||document.documentElement}function FD(e){let t=window.getComputedStyle(e);return t.transform!=="none"||/transform|perspective/.test(t.willChange)||t.filter!=="none"||t.contain==="paint"||"backdropFilter"in t&&t.backdropFilter!=="none"||"WebkitBackdropFilter"in t&&t.WebkitBackdropFilter!=="none"}const Uk=new WeakMap;function sG(e){let{triggerRef:t,isOpen:i,onClose:c}=e;V.useEffect(()=>{if(!i||c===null)return;let h=_=>{let w=_.target;if(!t.current||w instanceof Node&&!w.contains(t.current)||_.target instanceof HTMLInputElement||_.target instanceof HTMLTextAreaElement)return;let n=c||Uk.get(t.current);n&&n()};return window.addEventListener("scroll",h,!0),()=>{window.removeEventListener("scroll",h,!0)}},[i,c,t])}let ps=typeof document<"u"?window.visualViewport:null;function Gk(e){let{direction:t}=Ms(),{arrowSize:i=0,targetRef:c,overlayRef:h,scrollRef:_=h,placement:w="bottom",containerPadding:n=12,shouldFlip:k=!0,boundaryElement:N=typeof document<"u"?document.body:null,offset:B=0,crossOffset:F=0,shouldUpdatePosition:G=!0,isOpen:Q=!0,onClose:te,maxHeight:Y,arrowBoundaryOffset:oe=0}=e,[de,ge]=V.useState(null),be=[G,w,h.current,c.current,_.current,n,k,N,B,F,Q,t,Y,oe,i],pe=V.useRef(ps==null?void 0:ps.scale);V.useEffect(()=>{Q&&(pe.current=ps==null?void 0:ps.scale)},[Q]);let we=V.useCallback(()=>{if(G===!1||!Q||!h.current||!c.current||!N||(ps==null?void 0:ps.scale)!==pe.current)return;let se=null;if(_.current&&_.current.contains(document.activeElement)){var ue;let ze=(ue=document.activeElement)===null||ue===void 0?void 0:ue.getBoundingClientRect(),ot=_.current.getBoundingClientRect();var De;if(se={type:"top",offset:((De=ze==null?void 0:ze.top)!==null&&De!==void 0?De:0)-ot.top},se.offset>ot.height/2){se.type="bottom";var ce;se.offset=((ce=ze==null?void 0:ze.bottom)!==null&&ce!==void 0?ce:0)-ot.bottom}}let je=h.current;if(!Y&&h.current){var Le;je.style.top="0px",je.style.bottom="";var Re;je.style.maxHeight=((Re=(Le=window.visualViewport)===null||Le===void 0?void 0:Le.height)!==null&&Re!==void 0?Re:window.innerHeight)+"px"}let Ge=nG({placement:lG(w,t),overlayNode:h.current,targetNode:c.current,scrollNode:_.current||h.current,padding:n,shouldFlip:k,boundaryElement:N,offset:B,crossOffset:F,maxHeight:Y,arrowSize:i,arrowBoundaryOffset:oe});if(Ge.position){if(je.style.top="",je.style.bottom="",je.style.left="",je.style.right="",Object.keys(Ge.position).forEach(ze=>je.style[ze]=Ge.position[ze]+"px"),je.style.maxHeight=Ge.maxHeight!=null?Ge.maxHeight+"px":"",se&&document.activeElement&&_.current){let ze=document.activeElement.getBoundingClientRect(),ot=_.current.getBoundingClientRect(),Ee=ze[se.type]-ot[se.type];_.current.scrollTop+=Ee-se.offset}ge(Ge)}},be);si(we,be),oG(we),MD({ref:h,onResize:we}),MD({ref:c,onResize:we});let ke=V.useRef(!1);si(()=>{let se,ue=()=>{ke.current=!0,clearTimeout(se),se=setTimeout(()=>{ke.current=!1},500),we()},De=()=>{ke.current&&ue()};return ps==null||ps.addEventListener("resize",ue),ps==null||ps.addEventListener("scroll",De),()=>{ps==null||ps.removeEventListener("resize",ue),ps==null||ps.removeEventListener("scroll",De)}},[we]);let Ae=V.useCallback(()=>{ke.current||te==null||te()},[te,ke]);sG({triggerRef:c,isOpen:Q,onClose:te&&Ae});var re,Te;return{overlayProps:{style:{position:"absolute",zIndex:1e5,...de==null?void 0:de.position,maxHeight:(re=de==null?void 0:de.maxHeight)!==null&&re!==void 0?re:"100vh"}},placement:(Te=de==null?void 0:de.placement)!==null&&Te!==void 0?Te:null,arrowProps:{"aria-hidden":"true",role:"presentation",style:{left:de==null?void 0:de.arrowOffsetLeft,top:de==null?void 0:de.arrowOffsetTop}},updatePosition:we}}function oG(e){si(()=>(window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}),[e])}function lG(e,t){return t==="rtl"?e.replace("start","right").replace("end","left"):e.replace("start","left").replace("end","right")}function cG(e){const t=Dc(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:i,visibility:c}=e.style,h=i!=="none"&&c!=="hidden"&&c!=="collapse";if(h){const{getComputedStyle:_}=e.ownerDocument.defaultView;let{display:w,visibility:n}=_(e);h=w!=="none"&&n!=="hidden"&&n!=="collapse"}return h}function uG(e,t){return!e.hasAttribute("hidden")&&!e.hasAttribute("data-react-aria-prevent-focus")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function Hk(e,t){return e.nodeName!=="#comment"&&cG(e)&&uG(e,t)&&(!e.parentElement||Hk(e.parentElement,e))}let Iy="default",aS="",O1=new WeakMap;function VD(e){if(Mm()){if(Iy==="default"){const t=Gn(e);aS=t.documentElement.style.webkitUserSelect,t.documentElement.style.webkitUserSelect="none"}Iy="disabled"}else if(e instanceof HTMLElement||e instanceof SVGElement){let t="userSelect"in e.style?"userSelect":"webkitUserSelect";O1.set(e,e.style[t]),e.style[t]="none"}}function F3(e){if(Mm()){if(Iy!=="disabled")return;Iy="restoring",setTimeout(()=>{Lk(()=>{if(Iy==="restoring"){const t=Gn(e);t.documentElement.style.webkitUserSelect==="none"&&(t.documentElement.style.webkitUserSelect=aS||""),aS="",Iy="default"}})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&O1.has(e)){let t=O1.get(e),i="userSelect"in e.style?"userSelect":"webkitUserSelect";e.style[i]==="none"&&(e.style[i]=t),e.getAttribute("style")===""&&e.removeAttribute("style"),O1.delete(e)}}const T5=ra.createContext({register:()=>{}});T5.displayName="PressResponderContext";let qk=class{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(t,i){this.nativeEvent=i,this.target=i.target,this.currentTarget=i.currentTarget,this.relatedTarget=i.relatedTarget,this.bubbles=i.bubbles,this.cancelable=i.cancelable,this.defaultPrevented=i.defaultPrevented,this.eventPhase=i.eventPhase,this.isTrusted=i.isTrusted,this.timeStamp=i.timeStamp,this.type=t}};function Wk(e){let t=V.useRef({isFocused:!1,observer:null});si(()=>{const c=t.current;return()=>{c.observer&&(c.observer.disconnect(),c.observer=null)}},[]);let i=Zs(c=>{e==null||e(c)});return V.useCallback(c=>{if(c.target instanceof HTMLButtonElement||c.target instanceof HTMLInputElement||c.target instanceof HTMLTextAreaElement||c.target instanceof HTMLSelectElement){t.current.isFocused=!0;let h=c.target,_=w=>{t.current.isFocused=!1,h.disabled&&i(new qk("blur",w)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};h.addEventListener("focusout",_,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&h.disabled){var w;(w=t.current.observer)===null||w===void 0||w.disconnect();let n=h===document.activeElement?null:document.activeElement;h.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),h.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}}),t.current.observer.observe(h,{attributes:!0,attributeFilter:["disabled"]})}},[i])}let hw=!1;function UD(e){for(;e&&!jk(e);)e=e.parentElement;let t=Dc(e),i=t.document.activeElement;if(!i||i===e)return;hw=!0;let c=!1,h=B=>{(B.target===i||c)&&B.stopImmediatePropagation()},_=B=>{(B.target===i||c)&&(B.stopImmediatePropagation(),!e&&!c&&(c=!0,pl(i),k()))},w=B=>{(B.target===e||c)&&B.stopImmediatePropagation()},n=B=>{(B.target===e||c)&&(B.stopImmediatePropagation(),c||(c=!0,pl(i),k()))};t.addEventListener("blur",h,!0),t.addEventListener("focusout",_,!0),t.addEventListener("focusin",n,!0),t.addEventListener("focus",w,!0);let k=()=>{cancelAnimationFrame(N),t.removeEventListener("blur",h,!0),t.removeEventListener("focusout",_,!0),t.removeEventListener("focusin",n,!0),t.removeEventListener("focus",w,!0),hw=!1,c=!1},N=requestAnimationFrame(k);return k}function dG(e,t){return t.get?t.get.call(e):t.value}function Kk(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function Zk(e,t){var i=Kk(e,t,"get");return dG(e,i)}function hG(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}function fw(e,t,i){var c=Kk(e,t,"set");return hG(e,c,i),i}function fG(e){let t=V.useContext(T5);if(t){let{register:i,...c}=t;e=xr(c,e),i()}return $k(t,e.ref),e}var x1=new WeakMap;let v1=class{continuePropagation(){fw(this,x1,!1)}get shouldStopPropagation(){return Zk(this,x1)}constructor(t,i,c,h){dx(this,x1,{writable:!0,value:void 0}),fw(this,x1,!0);var _;let w=(_=h==null?void 0:h.target)!==null&&_!==void 0?_:c.currentTarget;const n=w==null?void 0:w.getBoundingClientRect();let k,N=0,B,F=null;c.clientX!=null&&c.clientY!=null&&(B=c.clientX,F=c.clientY),n&&(B!=null&&F!=null?(k=B-n.left,N=F-n.top):(k=n.width/2,N=n.height/2)),this.type=t,this.pointerType=i,this.target=c.currentTarget,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.x=k,this.y=N}};const GD=Symbol("linkClicked");function wu(e){let{onPress:t,onPressChange:i,onPressStart:c,onPressEnd:h,onPressUp:_,isDisabled:w,isPressed:n,preventFocusOnPress:k,shouldCancelOnPointerExit:N,allowTextSelectionOnPress:B,ref:F,...G}=fG(e),[Q,te]=V.useState(!1),Y=V.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:oe,removeAllGlobalListeners:de}=Vw(),ge=Zs((re,Te)=>{let se=Y.current;if(w||se.didFirePressStart)return!1;let ue=!0;if(se.isTriggeringEvent=!0,c){let De=new v1("pressstart",Te,re);c(De),ue=De.shouldStopPropagation}return i&&i(!0),se.isTriggeringEvent=!1,se.didFirePressStart=!0,te(!0),ue}),be=Zs((re,Te,se=!0)=>{let ue=Y.current;if(!ue.didFirePressStart)return!1;ue.didFirePressStart=!1,ue.isTriggeringEvent=!0;let De=!0;if(h){let ce=new v1("pressend",Te,re);h(ce),De=ce.shouldStopPropagation}if(i&&i(!1),te(!1),t&&se&&!w){let ce=new v1("press",Te,re);t(ce),De&&(De=ce.shouldStopPropagation)}return ue.isTriggeringEvent=!1,De}),pe=Zs((re,Te)=>{let se=Y.current;if(w)return!1;if(_){se.isTriggeringEvent=!0;let ue=new v1("pressup",Te,re);return _(ue),se.isTriggeringEvent=!1,ue.shouldStopPropagation}return!0}),we=Zs(re=>{let Te=Y.current;if(Te.isPressed&&Te.target){Te.didFirePressStart&&Te.pointerType!=null&&be(vy(Te.target,re),Te.pointerType,!1),Te.isPressed=!1,Te.isOverTarget=!1,Te.activePointerId=null,Te.pointerType=null,de(),B||F3(Te.target);for(let se of Te.disposables)se();Te.disposables=[]}}),ke=Zs(re=>{N&&we(re)}),Ae=V.useMemo(()=>{let re=Y.current,Te={onKeyDown(ue){if(V3(ue.nativeEvent,ue.currentTarget)&&ji(ue.currentTarget,Vn(ue.nativeEvent))){var De;WD(Vn(ue.nativeEvent),ue.key)&&ue.preventDefault();let ce=!0;if(!re.isPressed&&!ue.repeat){re.target=ue.currentTarget,re.isPressed=!0,re.pointerType="keyboard",ce=ge(ue,"keyboard");let je=ue.currentTarget,Le=Re=>{V3(Re,je)&&!Re.repeat&&ji(je,Vn(Re))&&re.target&&pe(vy(re.target,Re),"keyboard")};oe(Gn(ue.currentTarget),"keyup",qi(Le,se),!0)}ce&&ue.stopPropagation(),ue.metaKey&&bm()&&((De=re.metaKeyEvents)===null||De===void 0||De.set(ue.key,ue.nativeEvent))}else ue.key==="Meta"&&(re.metaKeyEvents=new Map)},onClick(ue){if(!(ue&&!ji(ue.currentTarget,Vn(ue.nativeEvent)))&&ue&&ue.button===0&&!re.isTriggeringEvent&&!wm.isOpening){let De=!0;if(w&&ue.preventDefault(),!re.ignoreEmulatedMouseEvents&&!re.isPressed&&(re.pointerType==="virtual"||Q4(ue.nativeEvent))){let ce=ge(ue,"virtual"),je=pe(ue,"virtual"),Le=be(ue,"virtual");De=ce&&je&&Le}else if(re.isPressed&&re.pointerType!=="keyboard"){let ce=re.pointerType||ue.nativeEvent.pointerType||"virtual";De=be(vy(ue.currentTarget,ue),ce,!0),re.isOverTarget=!1,we(ue)}re.ignoreEmulatedMouseEvents=!1,De&&ue.stopPropagation()}}},se=ue=>{var De;if(re.isPressed&&re.target&&V3(ue,re.target)){var ce;WD(Vn(ue),ue.key)&&ue.preventDefault();let Le=Vn(ue);be(vy(re.target,ue),"keyboard",ji(re.target,Vn(ue))),de(),ue.key!=="Enter"&&E5(re.target)&&ji(re.target,Le)&&!ue[GD]&&(ue[GD]=!0,wm(re.target,ue,!1)),re.isPressed=!1,(ce=re.metaKeyEvents)===null||ce===void 0||ce.delete(ue.key)}else if(ue.key==="Meta"&&(!((De=re.metaKeyEvents)===null||De===void 0)&&De.size)){var je;let Le=re.metaKeyEvents;re.metaKeyEvents=void 0;for(let Re of Le.values())(je=re.target)===null||je===void 0||je.dispatchEvent(new KeyboardEvent("keyup",Re))}};if(typeof PointerEvent<"u"){Te.onPointerDown=ce=>{if(ce.button!==0||!ji(ce.currentTarget,Vn(ce.nativeEvent)))return;if(BU(ce.nativeEvent)){re.pointerType="virtual";return}re.pointerType=ce.pointerType;let je=!0;if(!re.isPressed){re.isPressed=!0,re.isOverTarget=!0,re.activePointerId=ce.pointerId,re.target=ce.currentTarget,B||VD(re.target),je=ge(ce,re.pointerType);let Le=Vn(ce.nativeEvent);"releasePointerCapture"in Le&&Le.releasePointerCapture(ce.pointerId),oe(Gn(ce.currentTarget),"pointerup",ue,!1),oe(Gn(ce.currentTarget),"pointercancel",De,!1)}je&&ce.stopPropagation()},Te.onMouseDown=ce=>{if(ji(ce.currentTarget,Vn(ce.nativeEvent))&&ce.button===0){if(k){let je=UD(ce.target);je&&re.disposables.push(je)}ce.stopPropagation()}},Te.onPointerUp=ce=>{!ji(ce.currentTarget,Vn(ce.nativeEvent))||re.pointerType==="virtual"||ce.button===0&&pe(ce,re.pointerType||ce.pointerType)},Te.onPointerEnter=ce=>{ce.pointerId===re.activePointerId&&re.target&&!re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!0,ge(vy(re.target,ce),re.pointerType))},Te.onPointerLeave=ce=>{ce.pointerId===re.activePointerId&&re.target&&re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!1,be(vy(re.target,ce),re.pointerType,!1),ke(ce))};let ue=ce=>{if(ce.pointerId===re.activePointerId&&re.isPressed&&ce.button===0&&re.target){if(ji(re.target,Vn(ce))&&re.pointerType!=null){let je=!1,Le=setTimeout(()=>{re.isPressed&&re.target instanceof HTMLElement&&(je?we(ce):(pl(re.target),re.target.click()))},80);oe(ce.currentTarget,"click",()=>je=!0,!0),re.disposables.push(()=>clearTimeout(Le))}else we(ce);re.isOverTarget=!1}},De=ce=>{we(ce)};Te.onDragStart=ce=>{ji(ce.currentTarget,Vn(ce.nativeEvent))&&we(ce)}}else{Te.onMouseDown=ce=>{if(ce.button!==0||!ji(ce.currentTarget,Vn(ce.nativeEvent)))return;if(re.ignoreEmulatedMouseEvents){ce.stopPropagation();return}if(re.isPressed=!0,re.isOverTarget=!0,re.target=ce.currentTarget,re.pointerType=Q4(ce.nativeEvent)?"virtual":"mouse",Iw.flushSync(()=>ge(ce,re.pointerType))&&ce.stopPropagation(),k){let Le=UD(ce.target);Le&&re.disposables.push(Le)}oe(Gn(ce.currentTarget),"mouseup",ue,!1)},Te.onMouseEnter=ce=>{if(!ji(ce.currentTarget,Vn(ce.nativeEvent)))return;let je=!0;re.isPressed&&!re.ignoreEmulatedMouseEvents&&re.pointerType!=null&&(re.isOverTarget=!0,je=ge(ce,re.pointerType)),je&&ce.stopPropagation()},Te.onMouseLeave=ce=>{if(!ji(ce.currentTarget,Vn(ce.nativeEvent)))return;let je=!0;re.isPressed&&!re.ignoreEmulatedMouseEvents&&re.pointerType!=null&&(re.isOverTarget=!1,je=be(ce,re.pointerType,!1),ke(ce)),je&&ce.stopPropagation()},Te.onMouseUp=ce=>{ji(ce.currentTarget,Vn(ce.nativeEvent))&&!re.ignoreEmulatedMouseEvents&&ce.button===0&&pe(ce,re.pointerType||"mouse")};let ue=ce=>{if(ce.button===0){if(re.ignoreEmulatedMouseEvents){re.ignoreEmulatedMouseEvents=!1;return}re.target&&re.target.contains(ce.target)&&re.pointerType!=null||we(ce),re.isOverTarget=!1}};Te.onTouchStart=ce=>{if(!ji(ce.currentTarget,Vn(ce.nativeEvent)))return;let je=pG(ce.nativeEvent);if(!je)return;re.activePointerId=je.identifier,re.ignoreEmulatedMouseEvents=!0,re.isOverTarget=!0,re.isPressed=!0,re.target=ce.currentTarget,re.pointerType="touch",B||VD(re.target),ge(lm(re.target,ce),re.pointerType)&&ce.stopPropagation(),oe(Dc(ce.currentTarget),"scroll",De,!0)},Te.onTouchMove=ce=>{if(!ji(ce.currentTarget,Vn(ce.nativeEvent)))return;if(!re.isPressed){ce.stopPropagation();return}let je=HD(ce.nativeEvent,re.activePointerId),Le=!0;je&&qD(je,ce.currentTarget)?!re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!0,Le=ge(lm(re.target,ce),re.pointerType)):re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!1,Le=be(lm(re.target,ce),re.pointerType,!1),ke(lm(re.target,ce))),Le&&ce.stopPropagation()},Te.onTouchEnd=ce=>{if(!ji(ce.currentTarget,Vn(ce.nativeEvent)))return;if(!re.isPressed){ce.stopPropagation();return}let je=HD(ce.nativeEvent,re.activePointerId),Le=!0;je&&qD(je,ce.currentTarget)&&re.pointerType!=null?(pe(lm(re.target,ce),re.pointerType),Le=be(lm(re.target,ce),re.pointerType)):re.isOverTarget&&re.pointerType!=null&&(Le=be(lm(re.target,ce),re.pointerType,!1)),Le&&ce.stopPropagation(),re.isPressed=!1,re.activePointerId=null,re.isOverTarget=!1,re.ignoreEmulatedMouseEvents=!0,re.target&&!B&&F3(re.target),de()},Te.onTouchCancel=ce=>{ji(ce.currentTarget,Vn(ce.nativeEvent))&&(ce.stopPropagation(),re.isPressed&&we(lm(re.target,ce)))};let De=ce=>{re.isPressed&&ji(Vn(ce),re.target)&&we({currentTarget:re.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};Te.onDragStart=ce=>{ji(ce.currentTarget,Vn(ce.nativeEvent))&&we(ce)}}return Te},[oe,w,k,de,B,we,ke,be,ge,pe]);return V.useEffect(()=>{let re=Y.current;return()=>{var Te;B||F3((Te=re.target)!==null&&Te!==void 0?Te:void 0);for(let se of re.disposables)se();re.disposables=[]}},[B]),{isPressed:n||Q,pressProps:xr(G,Ae)}}function E5(e){return e.tagName==="A"&&e.hasAttribute("href")}function V3(e,t){const{key:i,code:c}=e,h=t,_=h.getAttribute("role");return(i==="Enter"||i===" "||i==="Spacebar"||c==="Space")&&!(h instanceof Dc(h).HTMLInputElement&&!Xk(h,i)||h instanceof Dc(h).HTMLTextAreaElement||h.isContentEditable)&&!((_==="link"||!_&&E5(h))&&i!=="Enter")}function pG(e){const{targetTouches:t}=e;return t.length>0?t[0]:null}function HD(e,t){const i=e.changedTouches;for(let c=0;c<i.length;c++){const h=i[c];if(h.identifier===t)return h}return null}function lm(e,t){let i=0,c=0;return t.targetTouches&&t.targetTouches.length===1&&(i=t.targetTouches[0].clientX,c=t.targetTouches[0].clientY),{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:i,clientY:c}}function vy(e,t){let i=t.clientX,c=t.clientY;return{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:i,clientY:c}}function mG(e){let t=0,i=0;return e.width!==void 0?t=e.width/2:e.radiusX!==void 0&&(t=e.radiusX),e.height!==void 0?i=e.height/2:e.radiusY!==void 0&&(i=e.radiusY),{top:e.clientY-i,right:e.clientX+t,bottom:e.clientY+i,left:e.clientX-t}}function gG(e,t){return!(e.left>t.right||t.left>e.right||e.top>t.bottom||t.top>e.bottom)}function qD(e,t){let i=t.getBoundingClientRect(),c=mG(e);return gG(i,c)}function yG(e){return e instanceof HTMLInputElement?!1:e instanceof HTMLButtonElement?e.type!=="submit"&&e.type!=="reset":!E5(e)}function WD(e,t){return e instanceof HTMLInputElement?!Xk(e,t):yG(e)}const xG=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Xk(e,t){return e.type==="checkbox"||e.type==="radio"?t===" ":xG.has(e.type)}let c0=null,nS=new Set,Wv=new Map,e0=!1,iS=!1;const vG={Tab:!0,Escape:!0};function Hw(e,t){for(let i of nS)i(e,t)}function _G(e){return!(e.metaKey||!bm()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function pw(e){e0=!0,_G(e)&&(c0="keyboard",Hw("keyboard",e))}function yu(e){c0="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(e0=!0,Hw("pointer",e))}function Yk(e){Q4(e)&&(e0=!0,c0="virtual")}function Jk(e){e.target===window||e.target===document||hw||!e.isTrusted||(!e0&&!iS&&(c0="virtual",Hw("virtual",e)),e0=!1,iS=!1)}function Qk(){hw||(e0=!1,iS=!0)}function sS(e){if(typeof window>"u"||Wv.get(Dc(e)))return;const t=Dc(e),i=Gn(e);let c=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){e0=!0,c.apply(this,arguments)},i.addEventListener("keydown",pw,!0),i.addEventListener("keyup",pw,!0),i.addEventListener("click",Yk,!0),t.addEventListener("focus",Jk,!0),t.addEventListener("blur",Qk,!1),typeof PointerEvent<"u"?(i.addEventListener("pointerdown",yu,!0),i.addEventListener("pointermove",yu,!0),i.addEventListener("pointerup",yu,!0)):(i.addEventListener("mousedown",yu,!0),i.addEventListener("mousemove",yu,!0),i.addEventListener("mouseup",yu,!0)),t.addEventListener("beforeunload",()=>{eR(e)},{once:!0}),Wv.set(t,{focus:c})}const eR=(e,t)=>{const i=Dc(e),c=Gn(e);t&&c.removeEventListener("DOMContentLoaded",t),Wv.has(i)&&(i.HTMLElement.prototype.focus=Wv.get(i).focus,c.removeEventListener("keydown",pw,!0),c.removeEventListener("keyup",pw,!0),c.removeEventListener("click",Yk,!0),i.removeEventListener("focus",Jk,!0),i.removeEventListener("blur",Qk,!1),typeof PointerEvent<"u"?(c.removeEventListener("pointerdown",yu,!0),c.removeEventListener("pointermove",yu,!0),c.removeEventListener("pointerup",yu,!0)):(c.removeEventListener("mousedown",yu,!0),c.removeEventListener("mousemove",yu,!0),c.removeEventListener("mouseup",yu,!0)),Wv.delete(i))};function bG(e){const t=Gn(e);let i;return t.readyState!=="loading"?sS(e):(i=()=>{sS(e)},t.addEventListener("DOMContentLoaded",i)),()=>eR(e,i)}typeof document<"u"&&bG();function t0(){return c0!=="pointer"}function Sm(){return c0}function wG(e){c0=e,Hw(e,null)}const SG=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function TG(e,t,i){let c=Gn(i==null?void 0:i.target);const h=typeof window<"u"?Dc(i==null?void 0:i.target).HTMLInputElement:HTMLInputElement,_=typeof window<"u"?Dc(i==null?void 0:i.target).HTMLTextAreaElement:HTMLTextAreaElement,w=typeof window<"u"?Dc(i==null?void 0:i.target).HTMLElement:HTMLElement,n=typeof window<"u"?Dc(i==null?void 0:i.target).KeyboardEvent:KeyboardEvent;return e=e||c.activeElement instanceof h&&!SG.has(c.activeElement.type)||c.activeElement instanceof _||c.activeElement instanceof w&&c.activeElement.isContentEditable,!(e&&t==="keyboard"&&i instanceof n&&!vG[i.key])}function tR(e,t,i){sS(),V.useEffect(()=>{let c=(h,_)=>{TG(!!(i!=null&&i.isTextInput),h,_)&&e(t0())};return nS.add(c),()=>{nS.delete(c)}},t)}function r0(e){const t=Gn(e),i=bo(t);if(Sm()==="virtual"){let c=i;Lk(()=>{bo(t)===c&&e.isConnected&&pl(e)})}else pl(e)}function P_(e){let{isDisabled:t,onFocus:i,onBlur:c,onFocusChange:h}=e;const _=V.useCallback(k=>{if(k.target===k.currentTarget)return c&&c(k),h&&h(!1),!0},[c,h]),w=Wk(_),n=V.useCallback(k=>{const N=Gn(k.target),B=N?bo(N):bo();k.target===k.currentTarget&&B===Vn(k.nativeEvent)&&(i&&i(k),h&&h(!0),w(k))},[h,i,w]);return{focusProps:{onFocus:!t&&(i||h||c)?n:void 0,onBlur:!t&&(c||h)?_:void 0}}}function KD(e){if(!e)return;let t=!0;return i=>{let c={...i,preventDefault(){i.preventDefault()},isDefaultPrevented(){return i.isDefaultPrevented()},stopPropagation(){t?console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior."):t=!0},continuePropagation(){t=!1},isPropagationStopped(){return t}};e(c),t&&i.stopPropagation()}}function rR(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:KD(e.onKeyDown),onKeyUp:KD(e.onKeyUp)}}}let EG=ra.createContext(null);function CG(e){let t=V.useContext(EG)||{};$k(t,e);let{ref:i,...c}=t;return c}function M_(e,t){let{focusProps:i}=P_(e),{keyboardProps:c}=rR(e),h=xr(i,c),_=CG(t),w=e.isDisabled?{}:_,n=V.useRef(e.autoFocus);V.useEffect(()=>{n.current&&t.current&&r0(t.current),n.current=!1},[t]);let k=e.excludeFromTabOrder?-1:0;return e.isDisabled&&(k=void 0),{focusableProps:xr({...h,tabIndex:k},w)}}function DG({children:e}){let t=V.useMemo(()=>({register:()=>{}}),[]);return ra.createElement(T5.Provider,{value:t},e)}function yd(e){let{isDisabled:t,onBlurWithin:i,onFocusWithin:c,onFocusWithinChange:h}=e,_=V.useRef({isFocusWithin:!1}),{addGlobalListener:w,removeAllGlobalListeners:n}=Vw(),k=V.useCallback(F=>{F.currentTarget.contains(F.target)&&_.current.isFocusWithin&&!F.currentTarget.contains(F.relatedTarget)&&(_.current.isFocusWithin=!1,n(),i&&i(F),h&&h(!1))},[i,h,_,n]),N=Wk(k),B=V.useCallback(F=>{if(!F.currentTarget.contains(F.target))return;const G=Gn(F.target),Q=bo(G);if(!_.current.isFocusWithin&&Q===Vn(F.nativeEvent)){c&&c(F),h&&h(!0),_.current.isFocusWithin=!0,N(F);let te=F.currentTarget;w(G,"focus",Y=>{if(_.current.isFocusWithin&&!ji(te,Y.target)){let oe=new qk("blur",new G.defaultView.FocusEvent("blur",{relatedTarget:Y.target}));oe.target=te,oe.currentTarget=te,k(oe)}},{capture:!0})}},[c,h,N,w,k]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:B,onBlur:k}}}let mw=!1,U3=0;function oS(){mw=!0,setTimeout(()=>{mw=!1},50)}function ZD(e){e.pointerType==="touch"&&oS()}function PG(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",ZD):document.addEventListener("touchend",oS),U3++,()=>{U3--,!(U3>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",ZD):document.removeEventListener("touchend",oS))}}function wo(e){let{onHoverStart:t,onHoverChange:i,onHoverEnd:c,isDisabled:h}=e,[_,w]=V.useState(!1),n=V.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;V.useEffect(PG,[]);let{addGlobalListener:k,removeAllGlobalListeners:N}=Vw(),{hoverProps:B,triggerHoverEnd:F}=V.useMemo(()=>{let G=(Y,oe)=>{if(n.pointerType=oe,h||oe==="touch"||n.isHovered||!Y.currentTarget.contains(Y.target))return;n.isHovered=!0;let de=Y.currentTarget;n.target=de,k(Gn(Y.target),"pointerover",ge=>{n.isHovered&&n.target&&!ji(n.target,ge.target)&&Q(ge,ge.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:de,pointerType:oe}),i&&i(!0),w(!0)},Q=(Y,oe)=>{let de=n.target;n.pointerType="",n.target=null,!(oe==="touch"||!n.isHovered||!de)&&(n.isHovered=!1,N(),c&&c({type:"hoverend",target:de,pointerType:oe}),i&&i(!1),w(!1))},te={};return typeof PointerEvent<"u"?(te.onPointerEnter=Y=>{mw&&Y.pointerType==="mouse"||G(Y,Y.pointerType)},te.onPointerLeave=Y=>{!h&&Y.currentTarget.contains(Y.target)&&Q(Y,Y.pointerType)}):(te.onTouchStart=()=>{n.ignoreEmulatedMouseEvents=!0},te.onMouseEnter=Y=>{!n.ignoreEmulatedMouseEvents&&!mw&&G(Y,"mouse"),n.ignoreEmulatedMouseEvents=!1},te.onMouseLeave=Y=>{!h&&Y.currentTarget.contains(Y.target)&&Q(Y,"mouse")}),{hoverProps:te,triggerHoverEnd:Q}},[t,i,c,h,n,k,N]);return V.useEffect(()=>{h&&F({currentTarget:n.target},n.pointerType)},[h]),{hoverProps:B,isHovered:_}}function MG(e){let{ref:t,onInteractOutside:i,isDisabled:c,onInteractOutsideStart:h}=e,_=V.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),w=Zs(k=>{i&&_1(k,t)&&(h&&h(k),_.current.isPointerDown=!0)}),n=Zs(k=>{i&&i(k)});V.useEffect(()=>{let k=_.current;if(c)return;const N=t.current,B=Gn(N);if(typeof PointerEvent<"u"){let F=G=>{k.isPointerDown&&_1(G,t)&&n(G),k.isPointerDown=!1};return B.addEventListener("pointerdown",w,!0),B.addEventListener("pointerup",F,!0),()=>{B.removeEventListener("pointerdown",w,!0),B.removeEventListener("pointerup",F,!0)}}else{let F=Q=>{k.ignoreEmulatedMouseEvents?k.ignoreEmulatedMouseEvents=!1:k.isPointerDown&&_1(Q,t)&&n(Q),k.isPointerDown=!1},G=Q=>{k.ignoreEmulatedMouseEvents=!0,k.isPointerDown&&_1(Q,t)&&n(Q),k.isPointerDown=!1};return B.addEventListener("mousedown",w,!0),B.addEventListener("mouseup",F,!0),B.addEventListener("touchstart",w,!0),B.addEventListener("touchend",G,!0),()=>{B.removeEventListener("mousedown",w,!0),B.removeEventListener("mouseup",F,!0),B.removeEventListener("touchstart",w,!0),B.removeEventListener("touchend",G,!0)}}},[t,c,w,n])}function _1(e,t){if(e.button>0)return!1;if(e.target){const i=e.target.ownerDocument;if(!i||!i.documentElement.contains(e.target)||e.target.closest("[data-react-aria-top-layer]"))return!1}return t.current?!e.composedPath().includes(t.current):!1}function AG(e,t){let{onScroll:i,isDisabled:c}=e,h=V.useCallback(_=>{_.ctrlKey||(_.preventDefault(),_.stopPropagation(),i&&i({deltaX:_.deltaX,deltaY:_.deltaY}))},[i]);gm(t,"wheel",c?void 0:h)}const kG=500;function aR(e){let{isDisabled:t,onLongPressStart:i,onLongPressEnd:c,onLongPress:h,threshold:_=kG,accessibilityDescription:w}=e;const n=V.useRef(void 0);let{addGlobalListener:k,removeGlobalListener:N}=Vw(),{pressProps:B}=wu({isDisabled:t,onPressStart(G){if(G.continuePropagation(),(G.pointerType==="mouse"||G.pointerType==="touch")&&(i&&i({...G,type:"longpressstart"}),n.current=setTimeout(()=>{G.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),Gn(G.target).activeElement!==G.target&&pl(G.target),h&&h({...G,type:"longpress"}),n.current=void 0},_),G.pointerType==="touch")){let Q=te=>{te.preventDefault()};k(G.target,"contextmenu",Q,{once:!0}),k(window,"pointerup",()=>{setTimeout(()=>{N(G.target,"contextmenu",Q)},30)},{once:!0})}},onPressEnd(G){n.current&&clearTimeout(n.current),c&&(G.pointerType==="mouse"||G.pointerType==="touch")&&c({...G,type:"longpressend"})}}),F=Gw(h&&!t?w:void 0);return{longPressProps:xr(B,F)}}const XD=ra.createContext(null),lS="react-aria-focus-scope-restore";let mi=null;function nR(e){let{children:t,contain:i,restoreFocus:c,autoFocus:h}=e,_=V.useRef(null),w=V.useRef(null),n=V.useRef([]),{parentNode:k}=V.useContext(XD)||{},N=V.useMemo(()=>new uS({scopeRef:n}),[n]);si(()=>{let G=k||Cs.root;if(Cs.getTreeNode(G.scopeRef)&&mi&&!gw(mi,G.scopeRef)){let Q=Cs.getTreeNode(mi);Q&&(G=Q)}G.addChild(N),Cs.addNode(N)},[N,k]),si(()=>{let G=Cs.getTreeNode(n);G&&(G.contain=!!i)},[i]),si(()=>{var G;let Q=(G=_.current)===null||G===void 0?void 0:G.nextSibling,te=[],Y=oe=>oe.stopPropagation();for(;Q&&Q!==w.current;)te.push(Q),Q.addEventListener(lS,Y),Q=Q.nextSibling;return n.current=te,()=>{for(let oe of te)oe.removeEventListener(lS,Y)}},[t]),$G(n,c,i),IG(n,i),NG(n,c,i),LG(n,h),V.useEffect(()=>{const G=bo(Gn(n.current?n.current[0]:void 0));let Q=null;if(Su(G,n.current)){for(let te of Cs.traverse())te.scopeRef&&Su(G,te.scopeRef.current)&&(Q=te);Q===Cs.getTreeNode(n)&&(mi=Q.scopeRef)}},[n]),si(()=>()=>{var G,Q,te;let Y=(te=(Q=Cs.getTreeNode(n))===null||Q===void 0||(G=Q.parent)===null||G===void 0?void 0:G.scopeRef)!==null&&te!==void 0?te:null;(n===mi||gw(n,mi))&&(!Y||Cs.getTreeNode(Y))&&(mi=Y),Cs.removeTreeNode(n)},[n]);let B=V.useMemo(()=>RG(n),[]),F=V.useMemo(()=>({focusManager:B,parentNode:N}),[N,B]);return ra.createElement(XD.Provider,{value:F},ra.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:_}),t,ra.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:w}))}function RG(e){return{focusNext(t={}){let i=e.current,{from:c,tabbable:h,wrap:_,accept:w}=t;var n;let k=c||bo(Gn((n=i[0])!==null&&n!==void 0?n:void 0)),N=i[0].previousElementSibling,B=Gg(i),F=Ho(B,{tabbable:h,accept:w},i);F.currentNode=Su(k,i)?k:N;let G=F.nextNode();return!G&&_&&(F.currentNode=N,G=F.nextNode()),G&&$l(G,!0),G},focusPrevious(t={}){let i=e.current,{from:c,tabbable:h,wrap:_,accept:w}=t;var n;let k=c||bo(Gn((n=i[0])!==null&&n!==void 0?n:void 0)),N=i[i.length-1].nextElementSibling,B=Gg(i),F=Ho(B,{tabbable:h,accept:w},i);F.currentNode=Su(k,i)?k:N;let G=F.previousNode();return!G&&_&&(F.currentNode=N,G=F.previousNode()),G&&$l(G,!0),G},focusFirst(t={}){let i=e.current,{tabbable:c,accept:h}=t,_=Gg(i),w=Ho(_,{tabbable:c,accept:h},i);w.currentNode=i[0].previousElementSibling;let n=w.nextNode();return n&&$l(n,!0),n},focusLast(t={}){let i=e.current,{tabbable:c,accept:h}=t,_=Gg(i),w=Ho(_,{tabbable:c,accept:h},i);w.currentNode=i[i.length-1].nextElementSibling;let n=w.previousNode();return n&&$l(n,!0),n}}}function Gg(e){return e[0].parentElement}function Bv(e){let t=Cs.getTreeNode(mi);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function IG(e,t){let i=V.useRef(void 0),c=V.useRef(void 0);si(()=>{let h=e.current;if(!t){c.current&&(cancelAnimationFrame(c.current),c.current=void 0);return}const _=Gn(h?h[0]:void 0);let w=N=>{if(N.key!=="Tab"||N.altKey||N.ctrlKey||N.metaKey||!Bv(e)||N.isComposing)return;let B=bo(_),F=e.current;if(!F||!Su(B,F))return;let G=Gg(F),Q=Ho(G,{tabbable:!0},F);if(!B)return;Q.currentNode=B;let te=N.shiftKey?Q.previousNode():Q.nextNode();te||(Q.currentNode=N.shiftKey?F[F.length-1].nextElementSibling:F[0].previousElementSibling,te=N.shiftKey?Q.previousNode():Q.nextNode()),N.preventDefault(),te&&$l(te,!0)},n=N=>{(!mi||gw(mi,e))&&Su(Vn(N),e.current)?(mi=e,i.current=Vn(N)):Bv(e)&&!ym(Vn(N),e)?i.current?i.current.focus():mi&&mi.current&&cS(mi.current):Bv(e)&&(i.current=Vn(N))},k=N=>{c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame(()=>{let B=Sm(),F=(B==="virtual"||B===null)&&hx()&&Rk(),G=bo(_);if(!F&&G&&Bv(e)&&!ym(G,e)){mi=e;let te=Vn(N);if(te&&te.isConnected){var Q;i.current=te,(Q=i.current)===null||Q===void 0||Q.focus()}else mi.current&&cS(mi.current)}})};return _.addEventListener("keydown",w,!1),_.addEventListener("focusin",n,!1),h==null||h.forEach(N=>N.addEventListener("focusin",n,!1)),h==null||h.forEach(N=>N.addEventListener("focusout",k,!1)),()=>{_.removeEventListener("keydown",w,!1),_.removeEventListener("focusin",n,!1),h==null||h.forEach(N=>N.removeEventListener("focusin",n,!1)),h==null||h.forEach(N=>N.removeEventListener("focusout",k,!1))}},[e,t]),si(()=>()=>{c.current&&cancelAnimationFrame(c.current)},[c])}function iR(e){return ym(e)}function Su(e,t){return!e||!t?!1:t.some(i=>i.contains(e))}function ym(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:i}of Cs.traverse(Cs.getTreeNode(t)))if(i&&Su(e,i.current))return!0;return!1}function zG(e){return ym(e,mi)}function gw(e,t){var i;let c=(i=Cs.getTreeNode(t))===null||i===void 0?void 0:i.parent;for(;c;){if(c.scopeRef===e)return!0;c=c.parent}return!1}function $l(e,t=!1){if(e!=null&&!t)try{r0(e)}catch{}else if(e!=null)try{e.focus()}catch{}}function sR(e,t=!0){let i=e[0].previousElementSibling,c=Gg(e),h=Ho(c,{tabbable:t},e);h.currentNode=i;let _=h.nextNode();return t&&!_&&(c=Gg(e),h=Ho(c,{tabbable:!1},e),h.currentNode=i,_=h.nextNode()),_}function cS(e,t=!0){$l(sR(e,t))}function LG(e,t){const i=ra.useRef(t);V.useEffect(()=>{if(i.current){mi=e;const c=Gn(e.current?e.current[0]:void 0);!Su(bo(c),mi.current)&&e.current&&cS(e.current)}i.current=!1},[e])}function $G(e,t,i){si(()=>{if(t||i)return;let c=e.current;const h=Gn(c?c[0]:void 0);let _=w=>{let n=Vn(w);Su(n,e.current)?mi=e:iR(n)||(mi=null)};return h.addEventListener("focusin",_,!1),c==null||c.forEach(w=>w.addEventListener("focusin",_,!1)),()=>{h.removeEventListener("focusin",_,!1),c==null||c.forEach(w=>w.removeEventListener("focusin",_,!1))}},[e,t,i])}function YD(e){let t=Cs.getTreeNode(mi);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(t==null?void 0:t.scopeRef)===e}function NG(e,t,i){const c=V.useRef(typeof document<"u"?bo(Gn(e.current?e.current[0]:void 0)):null);si(()=>{let h=e.current;const _=Gn(h?h[0]:void 0);if(!t||i)return;let w=()=>{(!mi||gw(mi,e))&&Su(bo(_),e.current)&&(mi=e)};return _.addEventListener("focusin",w,!1),h==null||h.forEach(n=>n.addEventListener("focusin",w,!1)),()=>{_.removeEventListener("focusin",w,!1),h==null||h.forEach(n=>n.removeEventListener("focusin",w,!1))}},[e,i]),si(()=>{const h=Gn(e.current?e.current[0]:void 0);if(!t)return;let _=w=>{if(w.key!=="Tab"||w.altKey||w.ctrlKey||w.metaKey||!Bv(e)||w.isComposing)return;let n=h.activeElement;if(!ym(n,e)||!YD(e))return;let k=Cs.getTreeNode(e);if(!k)return;let N=k.nodeToRestore,B=Ho(h.body,{tabbable:!0});B.currentNode=n;let F=w.shiftKey?B.previousNode():B.nextNode();if((!N||!N.isConnected||N===h.body)&&(N=void 0,k.nodeToRestore=void 0),(!F||!ym(F,e))&&N){B.currentNode=N;do F=w.shiftKey?B.previousNode():B.nextNode();while(ym(F,e));w.preventDefault(),w.stopPropagation(),F?$l(F,!0):iR(N)?$l(N,!0):n.blur()}};return i||h.addEventListener("keydown",_,!0),()=>{i||h.removeEventListener("keydown",_,!0)}},[e,t,i]),si(()=>{const h=Gn(e.current?e.current[0]:void 0);if(!t)return;let _=Cs.getTreeNode(e);if(_){var w;return _.nodeToRestore=(w=c.current)!==null&&w!==void 0?w:void 0,()=>{let n=Cs.getTreeNode(e);if(!n)return;let k=n.nodeToRestore,N=bo(h);if(t&&k&&(N&&ym(N,e)||N===h.body&&YD(e))){let B=Cs.clone();requestAnimationFrame(()=>{if(h.activeElement===h.body){let F=B.getTreeNode(e);for(;F;){if(F.nodeToRestore&&F.nodeToRestore.isConnected){JD(F.nodeToRestore);return}F=F.parent}for(F=B.getTreeNode(e);F;){if(F.scopeRef&&F.scopeRef.current&&Cs.getTreeNode(F.scopeRef)){let G=sR(F.scopeRef.current,!0);JD(G);return}F=F.parent}}})}}}},[e,t])}function JD(e){e.dispatchEvent(new CustomEvent(lS,{bubbles:!0,cancelable:!0}))&&$l(e)}function Ho(e,t,i){let c=t!=null&&t.tabbable?UU:jk,h=(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE?e:null,_=Gn(h),w=xU(_,e||_,NodeFilter.SHOW_ELEMENT,{acceptNode(n){var k;return!(t==null||(k=t.from)===null||k===void 0)&&k.contains(n)?NodeFilter.FILTER_REJECT:c(n)&&Hk(n)&&(!i||Su(n,i))&&(!(t!=null&&t.accept)||t.accept(n))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(w.currentNode=t.from),w}function C5(e,t={}){return{focusNext(i={}){let c=e.current;if(!c)return null;let{from:h,tabbable:_=t.tabbable,wrap:w=t.wrap,accept:n=t.accept}=i,k=h||bo(Gn(c)),N=Ho(c,{tabbable:_,accept:n});c.contains(k)&&(N.currentNode=k);let B=N.nextNode();return!B&&w&&(N.currentNode=c,B=N.nextNode()),B&&$l(B,!0),B},focusPrevious(i=t){let c=e.current;if(!c)return null;let{from:h,tabbable:_=t.tabbable,wrap:w=t.wrap,accept:n=t.accept}=i,k=h||bo(Gn(c)),N=Ho(c,{tabbable:_,accept:n});if(c.contains(k))N.currentNode=k;else{let F=G3(N);return F&&$l(F,!0),F??null}let B=N.previousNode();if(!B&&w){N.currentNode=c;let F=G3(N);if(!F)return null;B=F}return B&&$l(B,!0),B??null},focusFirst(i=t){let c=e.current;if(!c)return null;let{tabbable:h=t.tabbable,accept:_=t.accept}=i,n=Ho(c,{tabbable:h,accept:_}).nextNode();return n&&$l(n,!0),n},focusLast(i=t){let c=e.current;if(!c)return null;let{tabbable:h=t.tabbable,accept:_=t.accept}=i,w=Ho(c,{tabbable:h,accept:_}),n=G3(w);return n&&$l(n,!0),n??null}}}function G3(e){let t,i;do i=e.lastChild(),i&&(t=i);while(i);return t}class D5{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,i,c){let h=this.fastMap.get(i??null);if(!h)return;let _=new uS({scopeRef:t});h.addChild(_),_.parent=h,this.fastMap.set(t,_),c&&(_.nodeToRestore=c)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(t===null)return;let i=this.fastMap.get(t);if(!i)return;let c=i.parent;for(let _ of this.traverse())_!==i&&i.nodeToRestore&&_.nodeToRestore&&i.scopeRef&&i.scopeRef.current&&Su(_.nodeToRestore,i.scopeRef.current)&&(_.nodeToRestore=i.nodeToRestore);let h=i.children;c&&(c.removeChild(i),h.size>0&&h.forEach(_=>c&&c.addChild(_))),this.fastMap.delete(i.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.size>0)for(let i of t.children)yield*this.traverse(i)}clone(){var t;let i=new D5;var c;for(let h of this.traverse())i.addTreeNode(h.scopeRef,(c=(t=h.parent)===null||t===void 0?void 0:t.scopeRef)!==null&&c!==void 0?c:null,h.nodeToRestore);return i}constructor(){this.fastMap=new Map,this.root=new uS({scopeRef:null}),this.fastMap.set(null,this.root)}}class uS{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){this.children=new Set,this.contain=!1,this.scopeRef=t.scopeRef}}let Cs=new D5;function Ac(e={}){let{autoFocus:t=!1,isTextInput:i,within:c}=e,h=V.useRef({isFocused:!1,isFocusVisible:t||t0()}),[_,w]=V.useState(!1),[n,k]=V.useState(()=>h.current.isFocused&&h.current.isFocusVisible),N=V.useCallback(()=>k(h.current.isFocused&&h.current.isFocusVisible),[]),B=V.useCallback(Q=>{h.current.isFocused=Q,w(Q),N()},[N]);tR(Q=>{h.current.isFocusVisible=Q,N()},[],{isTextInput:i});let{focusProps:F}=P_({isDisabled:c,onFocusChange:B}),{focusWithinProps:G}=yd({isDisabled:!c,onFocusWithinChange:B});return{isFocused:_,isFocusVisible:n,focusProps:c?G:F}}function oR(e){let t=OG(Gn(e));t!==e&&(t&&BG(t,e),e&&jG(e,t))}function BG(e,t){e.dispatchEvent(new FocusEvent("blur",{relatedTarget:t})),e.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:t}))}function jG(e,t){e.dispatchEvent(new FocusEvent("focus",{relatedTarget:t})),e.dispatchEvent(new FocusEvent("focusin",{bubbles:!0,relatedTarget:t}))}function OG(e){let t=bo(e),i=t==null?void 0:t.getAttribute("aria-activedescendant");return i&&e.getElementById(i)||t}const hh=[];function P5(e,t){let{onClose:i,shouldCloseOnBlur:c,isOpen:h,isDismissable:_=!1,isKeyboardDismissDisabled:w=!1,shouldCloseOnInteractOutside:n}=e;V.useEffect(()=>{if(h&&!hh.includes(t))return hh.push(t),()=>{let te=hh.indexOf(t);te>=0&&hh.splice(te,1)}},[h,t]);let k=()=>{hh[hh.length-1]===t&&i&&i()},N=te=>{(!n||n(te.target))&&hh[hh.length-1]===t&&(te.stopPropagation(),te.preventDefault())},B=te=>{(!n||n(te.target))&&(hh[hh.length-1]===t&&(te.stopPropagation(),te.preventDefault()),k())},F=te=>{te.key==="Escape"&&!w&&!te.nativeEvent.isComposing&&(te.stopPropagation(),te.preventDefault(),k())};MG({ref:t,onInteractOutside:_&&h?B:void 0,onInteractOutsideStart:N});let{focusWithinProps:G}=yd({isDisabled:!c,onBlurWithin:te=>{!te.relatedTarget||zG(te.relatedTarget)||(!n||n(te.relatedTarget))&&(i==null||i())}}),Q=te=>{te.target===te.currentTarget&&te.preventDefault()};return{overlayProps:{onKeyDown:F,...G},underlayProps:{onPointerDown:Q}}}function lR(e,t,i){let{type:c}=e,{isOpen:h}=t;V.useEffect(()=>{i&&i.current&&Uk.set(i.current,t.close)});let _;c==="menu"?_=!0:c==="listbox"&&(_="listbox");let w=Ns();return{triggerProps:{"aria-haspopup":_,"aria-expanded":h,"aria-controls":h?w:void 0,onPress:t.toggle},overlayProps:{id:w}}}const H3=typeof document<"u"&&window.visualViewport,FG=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let b1=0,q3;function cR(e={}){let{isDisabled:t}=e;si(()=>{if(!t)return b1++,b1===1&&(Mm()?q3=UG():q3=VG()),()=>{b1--,b1===0&&q3()}},[t])}function VG(){return qi(zy(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),zy(document.documentElement,"overflow","hidden"))}function UG(){let e,t,i=N=>{e=Uw(N.target,!0),!(e===document.documentElement&&e===document.body)&&e instanceof HTMLElement&&window.getComputedStyle(e).overscrollBehavior==="auto"&&(t=zy(e,"overscrollBehavior","contain"))},c=N=>{if(!e||e===document.documentElement||e===document.body){N.preventDefault();return}e.scrollHeight===e.clientHeight&&e.scrollWidth===e.clientWidth&&N.preventDefault()},h=()=>{t&&t()},_=N=>{let B=N.target;GG(B)&&(n(),B.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{B.style.transform="",H3&&(H3.height<window.innerHeight?requestAnimationFrame(()=>{QD(B)}):H3.addEventListener("resize",()=>QD(B),{once:!0}))}))},w=null,n=()=>{if(w)return;let N=()=>{window.scrollTo(0,0)},B=window.pageXOffset,F=window.pageYOffset;w=qi(wv(window,"scroll",N),zy(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),zy(document.documentElement,"overflow","hidden"),zy(document.body,"marginTop",`-${F}px`),()=>{window.scrollTo(B,F)}),window.scrollTo(0,0)},k=qi(wv(document,"touchstart",i,{passive:!1,capture:!0}),wv(document,"touchmove",c,{passive:!1,capture:!0}),wv(document,"touchend",h,{passive:!1,capture:!0}),wv(document,"focus",_,!0));return()=>{t==null||t(),w==null||w(),k()}}function zy(e,t,i){let c=e.style[t];return e.style[t]=i,()=>{e.style[t]=c}}function wv(e,t,i,c){return e.addEventListener(t,i,c),()=>{e.removeEventListener(t,i,c)}}function QD(e){let t=document.scrollingElement||document.documentElement,i=e;for(;i&&i!==t;){let c=Uw(i);if(c!==document.documentElement&&c!==document.body&&c!==i){let h=c.getBoundingClientRect().top,_=i.getBoundingClientRect().top;_>h+i.clientHeight&&(c.scrollTop+=_-h)}i=c.parentElement}}function GG(e){return e instanceof HTMLInputElement&&!FG.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}const dS=ra.createContext(null);function HG(e){let{children:t}=e,i=V.useContext(dS),[c,h]=V.useState(0),_=V.useMemo(()=>({parent:i,modalCount:c,addModal(){h(w=>w+1),i&&i.addModal()},removeModal(){h(w=>w-1),i&&i.removeModal()}}),[i,c]);return ra.createElement(dS.Provider,{value:_},t)}function qG(){let e=V.useContext(dS);return{modalProviderProps:{"aria-hidden":e&&e.modalCount>0?!0:void 0}}}function WG(e){let{modalProviderProps:t}=qG();return ra.createElement("div",{"data-overlay-container":!0,...e,...t})}function uR(e){return ra.createElement(HG,null,ra.createElement(WG,e))}function eP(e){let t=o0(),{portalContainer:i=t?null:document.body,...c}=e;if(ra.useEffect(()=>{if(i!=null&&i.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[i]),!i)return null;let h=ra.createElement(uR,c);return PA.createPortal(h,i)}var dR={};dR={dismiss:""};var hR={};hR={dismiss:""};var fR={};fR={dismiss:"Odstranit"};var pR={};pR={dismiss:"Luk"};var mR={};mR={dismiss:"Schlieen"};var gR={};gR={dismiss:""};var yR={};yR={dismiss:"Dismiss"};var xR={};xR={dismiss:"Descartar"};var vR={};vR={dismiss:"Lpeta"};var _R={};_R={dismiss:"Hylk"};var bR={};bR={dismiss:"Rejeter"};var wR={};wR={dismiss:""};var SR={};SR={dismiss:"Odbaci"};var TR={};TR={dismiss:"Elutasts"};var ER={};ER={dismiss:"Ignora"};var CR={};CR={dismiss:""};var DR={};DR={dismiss:""};var PR={};PR={dismiss:"Atmesti"};var MR={};MR={dismiss:"Nerdt"};var AR={};AR={dismiss:"Lukk"};var kR={};kR={dismiss:"Negeren"};var RR={};RR={dismiss:"Zignoruj"};var IR={};IR={dismiss:"Descartar"};var zR={};zR={dismiss:"Dispensar"};var LR={};LR={dismiss:"Revocare"};var $R={};$R={dismiss:""};var NR={};NR={dismiss:"Zrui"};var BR={};BR={dismiss:"Opusti"};var jR={};jR={dismiss:"Odbaci"};var OR={};OR={dismiss:"Avvisa"};var FR={};FR={dismiss:"Kapat"};var VR={};VR={dismiss:""};var UR={};UR={dismiss:""};var GR={};GR={dismiss:""};var HR={};HR={"ar-AE":dR,"bg-BG":hR,"cs-CZ":fR,"da-DK":pR,"de-DE":mR,"el-GR":gR,"en-US":yR,"es-ES":xR,"et-EE":vR,"fi-FI":_R,"fr-FR":bR,"he-IL":wR,"hr-HR":SR,"hu-HU":TR,"it-IT":ER,"ja-JP":CR,"ko-KR":DR,"lt-LT":PR,"lv-LV":MR,"nb-NO":AR,"nl-NL":kR,"pl-PL":RR,"pt-BR":IR,"pt-PT":zR,"ro-RO":LR,"ru-RU":$R,"sk-SK":NR,"sl-SI":BR,"sr-SP":jR,"sv-SE":OR,"tr-TR":FR,"uk-UA":VR,"zh-CN":UR,"zh-TW":GR};const tP={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function KG(e={}){let{style:t,isFocusable:i}=e,[c,h]=V.useState(!1),{focusWithinProps:_}=yd({isDisabled:!i,onFocusWithinChange:n=>h(n)}),w=V.useMemo(()=>c?t:t?{...tP,...t}:tP,[c]);return{visuallyHiddenProps:{..._,style:w}}}function hS(e){let{children:t,elementType:i="div",isFocusable:c,style:h,..._}=e,{visuallyHiddenProps:w}=KG(e);return ra.createElement(i,xr(_,w),t)}function ZG(e){return e&&e.__esModule?e.default:e}function Qy(e){let{onDismiss:t,...i}=e,c=Eu(ZG(HR),"@react-aria/overlays"),h=C_(i,c.format("dismiss")),_=()=>{t&&t()};return ra.createElement(hS,null,ra.createElement("button",{...h,tabIndex:-1,onClick:_,style:{width:1,height:1}}))}let Sv=new WeakMap,uu=[];function qR(e,t=document.body){let i=new Set(e),c=new Set,h=k=>{for(let G of k.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))i.add(G);let N=G=>{if(i.has(G)||G.parentElement&&c.has(G.parentElement)&&G.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let Q of i)if(G.contains(Q))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},B=document.createTreeWalker(k,NodeFilter.SHOW_ELEMENT,{acceptNode:N}),F=N(k);if(F===NodeFilter.FILTER_ACCEPT&&_(k),F!==NodeFilter.FILTER_REJECT){let G=B.nextNode();for(;G!=null;)_(G),G=B.nextNode()}},_=k=>{var N;let B=(N=Sv.get(k))!==null&&N!==void 0?N:0;k.getAttribute("aria-hidden")==="true"&&B===0||(B===0&&k.setAttribute("aria-hidden","true"),c.add(k),Sv.set(k,B+1))};uu.length&&uu[uu.length-1].disconnect(),h(t);let w=new MutationObserver(k=>{for(let N of k)if(!(N.type!=="childList"||N.addedNodes.length===0)&&![...i,...c].some(B=>B.contains(N.target))){for(let B of N.removedNodes)B instanceof Element&&(i.delete(B),c.delete(B));for(let B of N.addedNodes)(B instanceof HTMLElement||B instanceof SVGElement)&&(B.dataset.liveAnnouncer==="true"||B.dataset.reactAriaTopLayer==="true")?i.add(B):B instanceof Element&&h(B)}});w.observe(t,{childList:!0,subtree:!0});let n={visibleNodes:i,hiddenNodes:c,observe(){w.observe(t,{childList:!0,subtree:!0})},disconnect(){w.disconnect()}};return uu.push(n),()=>{w.disconnect();for(let k of c){let N=Sv.get(k);N!=null&&(N===1?(k.removeAttribute("aria-hidden"),Sv.delete(k)):Sv.set(k,N-1))}n===uu[uu.length-1]?(uu.pop(),uu.length&&uu[uu.length-1].observe()):uu.splice(uu.indexOf(n),1)}}const XG=V.createContext({});function YG(){var e;return(e=V.useContext(XG))!==null&&e!==void 0?e:{}}const WR=ra.createContext(null);function M5(e){let t=o0(),{portalContainer:i=t?null:document.body,isExiting:c}=e,[h,_]=V.useState(!1),w=V.useMemo(()=>({contain:h,setContain:_}),[h,_]),{getContainer:n}=YG();if(!e.portalContainer&&n&&(i=n()),!i)return null;let k=e.children;return e.disableFocusManagement||(k=ra.createElement(nR,{restoreFocus:!0,contain:(e.shouldContainFocus||h)&&!c},k)),k=ra.createElement(WR.Provider,{value:w},ra.createElement(DG,null,k)),PA.createPortal(k,i)}function KR(){let e=V.useContext(WR),t=e==null?void 0:e.setContain;si(()=>{t==null||t(!0)},[t])}const A5=V.createContext({});function qw(e){const t=V.useRef(null);return t.current===null&&(t.current=e()),t.current}const A_=V.createContext(null),s_=V.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class JG extends V.Component{getSnapshotBeforeUpdate(t){const i=this.props.childRef.current;if(i&&t.isPresent&&!this.props.isPresent){const c=i.offsetParent,h=c instanceof HTMLElement&&c.offsetWidth||0,_=this.props.sizeRef.current;_.height=i.offsetHeight||0,_.width=i.offsetWidth||0,_.top=i.offsetTop,_.left=i.offsetLeft,_.right=h-_.width-_.left}return null}componentDidUpdate(){}render(){return this.props.children}}function QG({children:e,isPresent:t,anchorX:i}){const c=V.useId(),h=V.useRef(null),_=V.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:w}=V.useContext(s_);return V.useInsertionEffect(()=>{const{width:n,height:k,top:N,left:B,right:F}=_.current;if(t||!h.current||!n||!k)return;const G=i==="left"?`left: ${B}`:`right: ${F}`;h.current.dataset.motionPopId=c;const Q=document.createElement("style");return w&&(Q.nonce=w),document.head.appendChild(Q),Q.sheet&&Q.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${n}px !important;
            height: ${k}px !important;
            ${G}px !important;
            top: ${N}px !important;
          }
        `),()=>{document.head.removeChild(Q)}},[t]),b.jsx(JG,{isPresent:t,childRef:h,sizeRef:_,children:V.cloneElement(e,{ref:h})})}const eH=({children:e,initial:t,isPresent:i,onExitComplete:c,custom:h,presenceAffectsLayout:_,mode:w,anchorX:n})=>{const k=qw(tH),N=V.useId(),B=V.useCallback(G=>{k.set(G,!0);for(const Q of k.values())if(!Q)return;c&&c()},[k,c]),F=V.useMemo(()=>({id:N,initial:t,isPresent:i,custom:h,onExitComplete:B,register:G=>(k.set(G,!1),()=>k.delete(G))}),_?[Math.random(),B]:[i,B]);return V.useMemo(()=>{k.forEach((G,Q)=>k.set(Q,!1))},[i]),V.useEffect(()=>{!i&&!k.size&&c&&c()},[i]),w==="popLayout"&&(e=b.jsx(QG,{isPresent:i,anchorX:n,children:e})),b.jsx(A_.Provider,{value:F,children:e})};function tH(){return new Map}function ZR(e=!0){const t=V.useContext(A_);if(t===null)return[!0,null];const{isPresent:i,onExitComplete:c,register:h}=t,_=V.useId();V.useEffect(()=>{e&&h(_)},[e]);const w=V.useCallback(()=>e&&c&&c(_),[_,c,e]);return!i&&c?[!1,w]:[!0]}function goe(){return rH(V.useContext(A_))}function rH(e){return e===null?!0:e.isPresent}const w1=e=>e.key||"";function rP(e){const t=[];return V.Children.forEach(e,i=>{V.isValidElement(i)&&t.push(i)}),t}const k5=typeof window<"u",XR=k5?V.useLayoutEffect:V.useEffect,Uf=({children:e,custom:t,initial:i=!0,onExitComplete:c,presenceAffectsLayout:h=!0,mode:_="sync",propagate:w=!1,anchorX:n="left"})=>{const[k,N]=ZR(w),B=V.useMemo(()=>rP(e),[e]),F=w&&!k?[]:B.map(w1),G=V.useRef(!0),Q=V.useRef(B),te=qw(()=>new Map),[Y,oe]=V.useState(B),[de,ge]=V.useState(B);XR(()=>{G.current=!1,Q.current=B;for(let we=0;we<de.length;we++){const ke=w1(de[we]);F.includes(ke)?te.delete(ke):te.get(ke)!==!0&&te.set(ke,!1)}},[de,F.length,F.join("-")]);const be=[];if(B!==Y){let we=[...B];for(let ke=0;ke<de.length;ke++){const Ae=de[ke],re=w1(Ae);F.includes(re)||(we.splice(ke,0,Ae),be.push(Ae))}_==="wait"&&be.length&&(we=be),ge(rP(we)),oe(B);return}const{forceRender:pe}=V.useContext(A5);return b.jsx(b.Fragment,{children:de.map(we=>{const ke=w1(we),Ae=w&&!k?!1:B===de||F.includes(ke),re=()=>{if(te.has(ke))te.set(ke,!0);else return;let Te=!0;te.forEach(se=>{se||(Te=!1)}),Te&&(pe==null||pe(),ge(Q.current),w&&(N==null||N()),c&&c())};return b.jsx(eH,{isPresent:Ae,initial:!G.current||i?void 0:!1,custom:Ae?void 0:t,presenceAffectsLayout:h,mode:_,onExitComplete:Ae?void 0:re,anchorX:n,children:we},ke)})})},Nl=e=>e;let yoe=Nl,YR=Nl;function R5(e){let t;return()=>(t===void 0&&(t=e()),t)}const ex=(e,t,i)=>{const c=t-e;return c===0?1:(i-e)/c},Rf=e=>e*1e3,If=e=>e/1e3,Ww={skipAnimations:!1,useManualTiming:!1};function aH(e){let t=new Set,i=new Set,c=!1,h=!1;const _=new WeakSet;let w={delta:0,timestamp:0,isProcessing:!1};function n(N){_.has(N)&&(k.schedule(N),e()),N(w)}const k={schedule:(N,B=!1,F=!1)=>{const Q=F&&c?t:i;return B&&_.add(N),Q.has(N)||Q.add(N),N},cancel:N=>{i.delete(N),_.delete(N)},process:N=>{if(w=N,c){h=!0;return}c=!0,[t,i]=[i,t],t.forEach(n),t.clear(),c=!1,h&&(h=!1,k.process(N))}};return k}const S1=["read","resolveKeyframes","update","preRender","render","postRender"],nH=40;function JR(e,t){let i=!1,c=!0;const h={delta:0,timestamp:0,isProcessing:!1},_=()=>i=!0,w=S1.reduce((de,ge)=>(de[ge]=aH(_),de),{}),{read:n,resolveKeyframes:k,update:N,preRender:B,render:F,postRender:G}=w,Q=()=>{const de=Ww.useManualTiming?h.timestamp:performance.now();i=!1,h.delta=c?1e3/60:Math.max(Math.min(de-h.timestamp,nH),1),h.timestamp=de,h.isProcessing=!0,n.process(h),k.process(h),N.process(h),B.process(h),F.process(h),G.process(h),h.isProcessing=!1,i&&t&&(c=!1,e(Q))},te=()=>{i=!0,c=!0,h.isProcessing||e(Q)};return{schedule:S1.reduce((de,ge)=>{const be=w[ge];return de[ge]=(pe,we=!1,ke=!1)=>(i||te(),be.schedule(pe,we,ke)),de},{}),cancel:de=>{for(let ge=0;ge<S1.length;ge++)w[S1[ge]].cancel(de)},state:h,steps:w}}const{schedule:Ci,cancel:Tm,state:vo,steps:W3}=JR(typeof requestAnimationFrame<"u"?requestAnimationFrame:Nl,!0),I5=V.createContext({strict:!1}),aP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},tx={};for(const e in aP)tx[e]={isEnabled:t=>aP[e].some(i=>!!t[i])};function fS(e){for(const t in e)tx[t]={...tx[t],...e[t]}}function Tu({children:e,features:t,strict:i=!1}){const[,c]=V.useState(!K3(t)),h=V.useRef(void 0);if(!K3(t)){const{renderer:_,...w}=t;h.current=_,fS(w)}return V.useEffect(()=>{K3(t)&&t().then(({renderer:_,...w})=>{fS(w),h.current=_,c(!0)})},[]),b.jsx(I5.Provider,{value:{renderer:h.current,strict:i},children:e})}function K3(e){return typeof e=="function"}const iH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yw(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||iH.has(e)}let QR=e=>!yw(e);function eI(e){e&&(QR=t=>t.startsWith("on")?!yw(t):e(t))}try{eI(require("@emotion/is-prop-valid").default)}catch{}function sH(e,t,i){const c={};for(const h in e)h==="values"&&typeof e.values=="object"||(QR(h)||i===!0&&yw(h)||!t&&!yw(h)||e.draggable&&h.startsWith("onDrag"))&&(c[h]=e[h]);return c}function tI({children:e,isValidProp:t,...i}){t&&eI(t),i={...V.useContext(s_),...i},i.isStatic=qw(()=>i.isStatic);const c=V.useMemo(()=>i,[JSON.stringify(i.transition),i.transformPagePoint,i.reducedMotion]);return b.jsx(s_.Provider,{value:c,children:e})}function rI(e){if(typeof Proxy>"u")return e;const t=new Map,i=(...c)=>e(...c);return new Proxy(i,{get:(c,h)=>h==="create"?e:(t.has(h)||t.set(h,e(h)),t.get(h))})}const Kw=V.createContext({});function o_(e){return typeof e=="string"||Array.isArray(e)}function Zw(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const z5=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],L5=["initial",...z5];function Xw(e){return Zw(e.animate)||L5.some(t=>o_(e[t]))}function aI(e){return!!(Xw(e)||e.variants)}function oH(e,t){if(Xw(e)){const{initial:i,animate:c}=e;return{initial:i===!1||o_(i)?i:void 0,animate:o_(c)?c:void 0}}return e.inherit!==!1?t:{}}function lH(e){const{initial:t,animate:i}=oH(e,V.useContext(Kw));return V.useMemo(()=>({initial:t,animate:i}),[nP(t),nP(i)])}function nP(e){return Array.isArray(e)?e.join(" "):e}const cH=Symbol.for("motionComponentSymbol");function Ly(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function uH(e,t,i){return V.useCallback(c=>{c&&e.onMount&&e.onMount(c),t&&(c?t.mount(c):t.unmount()),i&&(typeof i=="function"?i(c):Ly(i)&&(i.current=c))},[t])}const $5=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),dH="framerAppearId",nI="data-"+$5(dH),{schedule:N5}=JR(queueMicrotask,!1),iI=V.createContext({});function hH(e,t,i,c,h){var _,w;const{visualElement:n}=V.useContext(Kw),k=V.useContext(I5),N=V.useContext(A_),B=V.useContext(s_).reducedMotion,F=V.useRef(null);c=c||k.renderer,!F.current&&c&&(F.current=c(e,{visualState:t,parent:n,props:i,presenceContext:N,blockInitialAnimation:N?N.initial===!1:!1,reducedMotionConfig:B}));const G=F.current,Q=V.useContext(iI);G&&!G.projection&&h&&(G.type==="html"||G.type==="svg")&&fH(F.current,i,h,Q);const te=V.useRef(!1);V.useInsertionEffect(()=>{G&&te.current&&G.update(i,N)});const Y=i[nI],oe=V.useRef(!!Y&&!(!((_=window.MotionHandoffIsComplete)===null||_===void 0)&&_.call(window,Y))&&((w=window.MotionHasOptimisedAnimation)===null||w===void 0?void 0:w.call(window,Y)));return XR(()=>{G&&(te.current=!0,window.MotionIsMounted=!0,G.updateFeatures(),N5.render(G.render),oe.current&&G.animationState&&G.animationState.animateChanges())}),V.useEffect(()=>{G&&(!oe.current&&G.animationState&&G.animationState.animateChanges(),oe.current&&(queueMicrotask(()=>{var de;(de=window.MotionHandoffMarkAsComplete)===null||de===void 0||de.call(window,Y)}),oe.current=!1))}),G}function fH(e,t,i,c){const{layoutId:h,layout:_,drag:w,dragConstraints:n,layoutScroll:k,layoutRoot:N}=t;e.projection=new i(e.latestValues,t["data-framer-portal-id"]?void 0:sI(e.parent)),e.projection.setOptions({layoutId:h,layout:_,alwaysMeasureLayout:!!w||n&&Ly(n),visualElement:e,animationType:typeof _=="string"?_:"both",initialPromotionConfig:c,layoutScroll:k,layoutRoot:N})}function sI(e){if(e)return e.options.allowProjection!==!1?e.projection:sI(e.parent)}function pH({preloadedFeatures:e,createVisualElement:t,useRender:i,useVisualState:c,Component:h}){var _,w;e&&fS(e);function n(N,B){let F;const G={...V.useContext(s_),...N,layoutId:mH(N)},{isStatic:Q}=G,te=lH(N),Y=c(N,Q);if(!Q&&k5){gH();const oe=yH(G);F=oe.MeasureLayout,te.visualElement=hH(h,Y,G,t,oe.ProjectionNode)}return b.jsxs(Kw.Provider,{value:te,children:[F&&te.visualElement?b.jsx(F,{visualElement:te.visualElement,...G}):null,i(h,N,uH(Y,te.visualElement,B),Y,Q,te.visualElement)]})}n.displayName=`motion.${typeof h=="string"?h:`create(${(w=(_=h.displayName)!==null&&_!==void 0?_:h.name)!==null&&w!==void 0?w:""})`}`;const k=V.forwardRef(n);return k[cH]=h,k}function mH({layoutId:e}){const t=V.useContext(A5).id;return t&&e!==void 0?t+"-"+e:e}function gH(e,t){V.useContext(I5).strict}function yH(e){const{drag:t,layout:i}=tx;if(!t&&!i)return{};const c={...t,...i};return{MeasureLayout:t!=null&&t.isEnabled(e)||i!=null&&i.isEnabled(e)?c.MeasureLayout:void 0,ProjectionNode:c.ProjectionNode}}const xH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function B5(e){return typeof e!="string"||e.includes("-")?!1:!!(xH.indexOf(e)>-1||/[A-Z]/u.test(e))}function iP(e){const t=[{},{}];return e==null||e.values.forEach((i,c)=>{t[0][c]=i.get(),t[1][c]=i.getVelocity()}),t}function j5(e,t,i,c){if(typeof t=="function"){const[h,_]=iP(c);t=t(i!==void 0?i:e.custom,h,_)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[h,_]=iP(c);t=t(i!==void 0?i:e.custom,h,_)}return t}const pS=e=>Array.isArray(e),vH=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),_H=e=>pS(e)?e[e.length-1]||0:e,qo=e=>!!(e&&e.getVelocity);function F1(e){const t=qo(e)?e.get():e;return vH(t)?t.toValue():t}function bH({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:i},c,h,_){const w={latestValues:wH(c,h,_,e),renderState:t()};return i&&(w.onMount=n=>i({props:c,current:n,...w}),w.onUpdate=n=>i(n)),w}const oI=e=>(t,i)=>{const c=V.useContext(Kw),h=V.useContext(A_),_=()=>bH(e,t,c,h);return i?_():qw(_)};function wH(e,t,i,c){const h={},_=c(e,{});for(const G in _)h[G]=F1(_[G]);let{initial:w,animate:n}=e;const k=Xw(e),N=aI(e);t&&N&&!k&&e.inherit!==!1&&(w===void 0&&(w=t.initial),n===void 0&&(n=t.animate));let B=i?i.initial===!1:!1;B=B||w===!1;const F=B?n:w;if(F&&typeof F!="boolean"&&!Zw(F)){const G=Array.isArray(F)?F:[F];for(let Q=0;Q<G.length;Q++){const te=j5(e,G[Q]);if(te){const{transitionEnd:Y,transition:oe,...de}=te;for(const ge in de){let be=de[ge];if(Array.isArray(be)){const pe=B?be.length-1:0;be=be[pe]}be!==null&&(h[ge]=be)}for(const ge in Y)h[ge]=Y[ge]}}}return h}const fx=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],u0=new Set(fx),lI=e=>t=>typeof t=="string"&&t.startsWith(e),O5=lI("--"),SH=lI("var(--"),F5=e=>SH(e)?TH.test(e.split("/*")[0].trim()):!1,TH=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,cI=(e,t)=>t&&typeof e=="number"?t.transform(e):e,$f=(e,t,i)=>i>t?t:i<e?e:i,px={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},l_={...px,transform:e=>$f(0,1,e)},T1={...px,default:1},k_=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),hm=k_("deg"),xh=k_("%"),Ba=k_("px"),EH=k_("vh"),CH=k_("vw"),sP={...xh,parse:e=>xh.parse(e)/100,transform:e=>xh.transform(e*100)},DH={borderWidth:Ba,borderTopWidth:Ba,borderRightWidth:Ba,borderBottomWidth:Ba,borderLeftWidth:Ba,borderRadius:Ba,radius:Ba,borderTopLeftRadius:Ba,borderTopRightRadius:Ba,borderBottomRightRadius:Ba,borderBottomLeftRadius:Ba,width:Ba,maxWidth:Ba,height:Ba,maxHeight:Ba,top:Ba,right:Ba,bottom:Ba,left:Ba,padding:Ba,paddingTop:Ba,paddingRight:Ba,paddingBottom:Ba,paddingLeft:Ba,margin:Ba,marginTop:Ba,marginRight:Ba,marginBottom:Ba,marginLeft:Ba,backgroundPositionX:Ba,backgroundPositionY:Ba},PH={rotate:hm,rotateX:hm,rotateY:hm,rotateZ:hm,scale:T1,scaleX:T1,scaleY:T1,scaleZ:T1,skew:hm,skewX:hm,skewY:hm,distance:Ba,translateX:Ba,translateY:Ba,translateZ:Ba,x:Ba,y:Ba,z:Ba,perspective:Ba,transformPerspective:Ba,opacity:l_,originX:sP,originY:sP,originZ:Ba},oP={...px,transform:Math.round},V5={...DH,...PH,zIndex:oP,size:Ba,fillOpacity:l_,strokeOpacity:l_,numOctaves:oP},MH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},AH=fx.length;function kH(e,t,i){let c="",h=!0;for(let _=0;_<AH;_++){const w=fx[_],n=e[w];if(n===void 0)continue;let k=!0;if(typeof n=="number"?k=n===(w.startsWith("scale")?1:0):k=parseFloat(n)===0,!k||i){const N=cI(n,V5[w]);if(!k){h=!1;const B=MH[w]||w;c+=`${B}(${N}) `}i&&(t[w]=N)}}return c=c.trim(),i?c=i(t,h?"":c):h&&(c="none"),c}function U5(e,t,i){const{style:c,vars:h,transformOrigin:_}=e;let w=!1,n=!1;for(const k in t){const N=t[k];if(u0.has(k)){w=!0;continue}else if(O5(k)){h[k]=N;continue}else{const B=cI(N,V5[k]);k.startsWith("origin")?(n=!0,_[k]=B):c[k]=B}}if(t.transform||(w||i?c.transform=kH(t,e.transform,i):c.transform&&(c.transform="none")),n){const{originX:k="50%",originY:N="50%",originZ:B=0}=_;c.transformOrigin=`${k} ${N} ${B}`}}const RH={offset:"stroke-dashoffset",array:"stroke-dasharray"},IH={offset:"strokeDashoffset",array:"strokeDasharray"};function zH(e,t,i=1,c=0,h=!0){e.pathLength=1;const _=h?RH:IH;e[_.offset]=Ba.transform(-c);const w=Ba.transform(t),n=Ba.transform(i);e[_.array]=`${w} ${n}`}function lP(e,t,i){return typeof e=="string"?e:Ba.transform(t+i*e)}function LH(e,t,i){const c=lP(t,e.x,e.width),h=lP(i,e.y,e.height);return`${c} ${h}`}function G5(e,{attrX:t,attrY:i,attrScale:c,originX:h,originY:_,pathLength:w,pathSpacing:n=1,pathOffset:k=0,...N},B,F){if(U5(e,N,F),B){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:G,style:Q,dimensions:te}=e;G.transform&&(te&&(Q.transform=G.transform),delete G.transform),te&&(h!==void 0||_!==void 0||Q.transform)&&(Q.transformOrigin=LH(te,h!==void 0?h:.5,_!==void 0?_:.5)),t!==void 0&&(G.x=t),i!==void 0&&(G.y=i),c!==void 0&&(G.scale=c),w!==void 0&&zH(G,w,n,k,!1)}const H5=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),uI=()=>({...H5(),attrs:{}}),q5=e=>typeof e=="string"&&e.toLowerCase()==="svg";function dI(e,{style:t,vars:i},c,h){Object.assign(e.style,t,h&&h.getProjectionStyles(c));for(const _ in i)e.style.setProperty(_,i[_])}const hI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fI(e,t,i,c){dI(e,t,void 0,c);for(const h in t.attrs)e.setAttribute(hI.has(h)?h:$5(h),t.attrs[h])}const c_={};function $H(e){for(const t in e)c_[t]=e[t],O5(t)&&(c_[t].isCSSVariable=!0)}function pI(e,{layout:t,layoutId:i}){return u0.has(e)||e.startsWith("origin")||(t||i!==void 0)&&(!!c_[e]||e==="opacity")}function W5(e,t,i){var c;const{style:h}=e,_={};for(const w in h)(qo(h[w])||t.style&&qo(t.style[w])||pI(w,e)||((c=i==null?void 0:i.getValue(w))===null||c===void 0?void 0:c.liveStyle)!==void 0)&&(_[w]=h[w]);return _}function mI(e,t,i){const c=W5(e,t,i);for(const h in e)if(qo(e[h])||qo(t[h])){const _=fx.indexOf(h)!==-1?"attr"+h.charAt(0).toUpperCase()+h.substring(1):h;c[_]=e[h]}return c}function NH(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const cP=["x","y","width","height","cx","cy","r"],BH={useVisualState:oI({scrapeMotionValuesFromProps:mI,createRenderState:uI,onUpdate:({props:e,prevProps:t,current:i,renderState:c,latestValues:h})=>{if(!i)return;let _=!!e.drag;if(!_){for(const n in h)if(u0.has(n)){_=!0;break}}if(!_)return;let w=!t;if(t)for(let n=0;n<cP.length;n++){const k=cP[n];e[k]!==t[k]&&(w=!0)}w&&Ci.read(()=>{NH(i,c),Ci.render(()=>{G5(c,h,q5(i.tagName),e.transformTemplate),fI(i,c)})})}})},jH={useVisualState:oI({scrapeMotionValuesFromProps:W5,createRenderState:H5})};function gI(e,t,i){for(const c in t)!qo(t[c])&&!pI(c,i)&&(e[c]=t[c])}function OH({transformTemplate:e},t){return V.useMemo(()=>{const i=H5();return U5(i,t,e),Object.assign({},i.vars,i.style)},[t])}function FH(e,t){const i=e.style||{},c={};return gI(c,i,e),Object.assign(c,OH(e,t)),c}function VH(e,t){const i={},c=FH(e,t);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,c.userSelect=c.WebkitUserSelect=c.WebkitTouchCallout="none",c.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=c,i}function UH(e,t,i,c){const h=V.useMemo(()=>{const _=uI();return G5(_,t,q5(c),e.transformTemplate),{..._.attrs,style:{..._.style}}},[t]);if(e.style){const _={};gI(_,e.style,e),h.style={..._,...h.style}}return h}function GH(e=!1){return(i,c,h,{latestValues:_},w)=>{const k=(B5(i)?UH:VH)(c,_,w,i),N=sH(c,typeof i=="string",e),B=i!==V.Fragment?{...N,...k,ref:h}:{},{children:F}=c,G=V.useMemo(()=>qo(F)?F.get():F,[F]);return V.createElement(i,{...B,children:G})}}function yI(e,t){return function(c,{forwardMotionProps:h}={forwardMotionProps:!1}){const w={...B5(c)?BH:jH,preloadedFeatures:e,useRender:GH(h),createVisualElement:t,Component:c};return pH(w)}}const HH=yI(),jl=rI(HH);function xI(e,t){if(!Array.isArray(t))return!1;const i=t.length;if(i!==e.length)return!1;for(let c=0;c<i;c++)if(t[c]!==e[c])return!1;return!0}function Yw(e,t,i){const c=e.getProps();return j5(c,t,i!==void 0?i:c.custom,e)}const qH=R5(()=>window.ScrollTimeline!==void 0);class WH{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,i){for(let c=0;c<this.animations.length;c++)this.animations[c][t]=i}attachTimeline(t,i){const c=this.animations.map(h=>{if(qH()&&h.attachTimeline)return h.attachTimeline(t);if(typeof i=="function")return i(h)});return()=>{c.forEach((h,_)=>{h&&h(),this.animations[_].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let i=0;i<this.animations.length;i++)t=Math.max(t,this.animations[i].duration);return t}runAll(t){this.animations.forEach(i=>i[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class KH extends WH{then(t,i){return Promise.all(this.animations).then(t).catch(i)}}function K5(e,t){return e?e[t]||e.default||e:void 0}const mS=2e4;function vI(e){let t=0;const i=50;let c=e.next(t);for(;!c.done&&t<mS;)t+=i,c=e.next(t);return t>=mS?1/0:t}function Z5(e){return typeof e=="function"}function uP(e,t){e.timeline=t,e.onfinish=null}const X5=e=>Array.isArray(e)&&typeof e[0]=="number",ZH={linearEasing:void 0};function XH(e,t){const i=R5(e);return()=>{var c;return(c=ZH[t])!==null&&c!==void 0?c:i()}}const xw=XH(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_I=(e,t,i=10)=>{let c="";const h=Math.max(Math.round(t/i),2);for(let _=0;_<h;_++)c+=e(ex(0,h-1,_))+", ";return`linear(${c.substring(0,c.length-2)})`};function bI(e){return!!(typeof e=="function"&&xw()||!e||typeof e=="string"&&(e in gS||xw())||X5(e)||Array.isArray(e)&&e.every(bI))}const jv=([e,t,i,c])=>`cubic-bezier(${e}, ${t}, ${i}, ${c})`,gS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jv([0,.65,.55,1]),circOut:jv([.55,0,1,.45]),backIn:jv([.31,.01,.66,-.59]),backOut:jv([.33,1.53,.69,.99])};function wI(e,t){if(e)return typeof e=="function"&&xw()?_I(e,t):X5(e)?jv(e):Array.isArray(e)?e.map(i=>wI(i,t)||gS.easeOut):gS[e]}const fd={x:!1,y:!1};function SI(){return fd.x||fd.y}function YH(e,t,i){var c;if(e instanceof Element)return[e];if(typeof e=="string"){let h=document;t&&(h=t.current);const _=(c=i==null?void 0:i[e])!==null&&c!==void 0?c:h.querySelectorAll(e);return _?Array.from(_):[]}return Array.from(e)}function TI(e,t){const i=YH(e),c=new AbortController,h={passive:!0,...t,signal:c.signal};return[i,h,()=>c.abort()]}function dP(e){return!(e.pointerType==="touch"||SI())}function JH(e,t,i={}){const[c,h,_]=TI(e,i),w=n=>{if(!dP(n))return;const{target:k}=n,N=t(k,n);if(typeof N!="function"||!k)return;const B=F=>{dP(F)&&(N(F),k.removeEventListener("pointerleave",B))};k.addEventListener("pointerleave",B,h)};return c.forEach(n=>{n.addEventListener("pointerenter",w,h)}),_}const EI=(e,t)=>t?e===t?!0:EI(e,t.parentElement):!1,Y5=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,QH=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function eq(e){return QH.has(e.tagName)||e.tabIndex!==-1}const Ov=new WeakSet;function hP(e){return t=>{t.key==="Enter"&&e(t)}}function Z3(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const tq=(e,t)=>{const i=e.currentTarget;if(!i)return;const c=hP(()=>{if(Ov.has(i))return;Z3(i,"down");const h=hP(()=>{Z3(i,"up")}),_=()=>Z3(i,"cancel");i.addEventListener("keyup",h,t),i.addEventListener("blur",_,t)});i.addEventListener("keydown",c,t),i.addEventListener("blur",()=>i.removeEventListener("keydown",c),t)};function fP(e){return Y5(e)&&!SI()}function rq(e,t,i={}){const[c,h,_]=TI(e,i),w=n=>{const k=n.currentTarget;if(!fP(n)||Ov.has(k))return;Ov.add(k);const N=t(k,n),B=(Q,te)=>{window.removeEventListener("pointerup",F),window.removeEventListener("pointercancel",G),!(!fP(Q)||!Ov.has(k))&&(Ov.delete(k),typeof N=="function"&&N(Q,{success:te}))},F=Q=>{B(Q,i.useGlobalTarget||EI(k,Q.target))},G=Q=>{B(Q,!1)};window.addEventListener("pointerup",F,h),window.addEventListener("pointercancel",G,h)};return c.forEach(n=>{!eq(n)&&n.getAttribute("tabindex")===null&&(n.tabIndex=0),(i.useGlobalTarget?window:n).addEventListener("pointerdown",w,h),n.addEventListener("focus",N=>tq(N,h),h)}),_}function aq(e){return e==="x"||e==="y"?fd[e]?null:(fd[e]=!0,()=>{fd[e]=!1}):fd.x||fd.y?null:(fd.x=fd.y=!0,()=>{fd.x=fd.y=!1})}const CI=new Set(["width","height","top","left","right","bottom",...fx]);let V1;function nq(){V1=void 0}const vh={now:()=>(V1===void 0&&vh.set(vo.isProcessing||Ww.useManualTiming?vo.timestamp:performance.now()),V1),set:e=>{V1=e,queueMicrotask(nq)}};function J5(e,t){e.indexOf(t)===-1&&e.push(t)}function Q5(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)}function xoe([...e],t,i){const c=t<0?e.length+t:t;if(c>=0&&c<e.length){const h=i<0?e.length+i:i,[_]=e.splice(t,1);e.splice(h,0,_)}return e}class eT{constructor(){this.subscriptions=[]}add(t){return J5(this.subscriptions,t),()=>Q5(this.subscriptions,t)}notify(t,i,c){const h=this.subscriptions.length;if(h)if(h===1)this.subscriptions[0](t,i,c);else for(let _=0;_<h;_++){const w=this.subscriptions[_];w&&w(t,i,c)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function DI(e,t){return t?e*(1e3/t):0}const pP=30,iq=e=>!isNaN(parseFloat(e)),mP={current:void 0};class sq{constructor(t,i={}){this.version="12.0.6",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(c,h=!0)=>{const _=vh.now();this.updatedAt!==_&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(c),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),h&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=i.owner}setCurrent(t){this.current=t,this.updatedAt=vh.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=iq(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,i){this.events[t]||(this.events[t]=new eT);const c=this.events[t].add(i);return t==="change"?()=>{c(),Ci.read(()=>{this.events.change.getSize()||this.stop()})}:c}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,i){this.passiveEffect=t,this.stopPassiveEffect=i}set(t,i=!0){!i||!this.passiveEffect?this.updateAndNotify(t,i):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,i,c){this.set(i),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-c}jump(t,i=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return mP.current&&mP.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=vh.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>pP)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,pP);return DI(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(t){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=t(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function u_(e,t){return new sq(e,t)}function oq(e,t,i){e.hasValue(t)?e.getValue(t).set(i):e.addValue(t,u_(i))}function lq(e,t){const i=Yw(e,t);let{transitionEnd:c={},transition:h={},..._}=i||{};_={..._,...c};for(const w in _){const n=_H(_[w]);oq(e,w,n)}}function cq(e){return!!(qo(e)&&e.add)}function yS(e,t){const i=e.getValue("willChange");if(cq(i))return i.add(t)}function PI(e){return e.props[nI]}const MI={current:!1},AI=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e,uq=1e-7,dq=12;function hq(e,t,i,c,h){let _,w,n=0;do w=t+(i-t)/2,_=AI(w,c,h)-e,_>0?i=w:t=w;while(Math.abs(_)>uq&&++n<dq);return w}function R_(e,t,i,c){if(e===t&&i===c)return Nl;const h=_=>hq(_,0,1,e,i);return _=>_===0||_===1?_:AI(h(_),t,c)}const kI=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,RI=e=>t=>1-e(1-t),II=R_(.33,1.53,.69,.99),tT=RI(II),zI=kI(tT),LI=e=>(e*=2)<1?.5*tT(e):.5*(2-Math.pow(2,-10*(e-1))),rT=e=>1-Math.sin(Math.acos(e)),$I=RI(rT),NI=kI(rT),BI=e=>/^0[^.\s]+$/u.test(e);function fq(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||BI(e):!0}const Kv=e=>Math.round(e*1e5)/1e5,aT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function pq(e){return e==null}const mq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nT=(e,t)=>i=>!!(typeof i=="string"&&mq.test(i)&&i.startsWith(e)||t&&!pq(i)&&Object.prototype.hasOwnProperty.call(i,t)),jI=(e,t,i)=>c=>{if(typeof c!="string")return c;const[h,_,w,n]=c.match(aT);return{[e]:parseFloat(h),[t]:parseFloat(_),[i]:parseFloat(w),alpha:n!==void 0?parseFloat(n):1}},gq=e=>$f(0,255,e),X3={...px,transform:e=>Math.round(gq(e))},Hg={test:nT("rgb","red"),parse:jI("red","green","blue"),transform:({red:e,green:t,blue:i,alpha:c=1})=>"rgba("+X3.transform(e)+", "+X3.transform(t)+", "+X3.transform(i)+", "+Kv(l_.transform(c))+")"};function yq(e){let t="",i="",c="",h="";return e.length>5?(t=e.substring(1,3),i=e.substring(3,5),c=e.substring(5,7),h=e.substring(7,9)):(t=e.substring(1,2),i=e.substring(2,3),c=e.substring(3,4),h=e.substring(4,5),t+=t,i+=i,c+=c,h+=h),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(c,16),alpha:h?parseInt(h,16)/255:1}}const xS={test:nT("#"),parse:yq,transform:Hg.transform},$y={test:nT("hsl","hue"),parse:jI("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:i,alpha:c=1})=>"hsla("+Math.round(e)+", "+xh.transform(Kv(t))+", "+xh.transform(Kv(i))+", "+Kv(l_.transform(c))+")"},Go={test:e=>Hg.test(e)||xS.test(e)||$y.test(e),parse:e=>Hg.test(e)?Hg.parse(e):$y.test(e)?$y.parse(e):xS.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Hg.transform(e):$y.transform(e)},xq=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vq(e){var t,i;return isNaN(e)&&typeof e=="string"&&(((t=e.match(aT))===null||t===void 0?void 0:t.length)||0)+(((i=e.match(xq))===null||i===void 0?void 0:i.length)||0)>0}const OI="number",FI="color",_q="var",bq="var(",gP="${}",wq=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function d_(e){const t=e.toString(),i=[],c={color:[],number:[],var:[]},h=[];let _=0;const n=t.replace(wq,k=>(Go.test(k)?(c.color.push(_),h.push(FI),i.push(Go.parse(k))):k.startsWith(bq)?(c.var.push(_),h.push(_q),i.push(k)):(c.number.push(_),h.push(OI),i.push(parseFloat(k))),++_,gP)).split(gP);return{values:i,split:n,indexes:c,types:h}}function VI(e){return d_(e).values}function UI(e){const{split:t,types:i}=d_(e),c=t.length;return h=>{let _="";for(let w=0;w<c;w++)if(_+=t[w],h[w]!==void 0){const n=i[w];n===OI?_+=Kv(h[w]):n===FI?_+=Go.transform(h[w]):_+=h[w]}return _}}const Sq=e=>typeof e=="number"?0:e;function Tq(e){const t=VI(e);return UI(e)(t.map(Sq))}const Em={test:vq,parse:VI,createTransformer:UI,getAnimatableNone:Tq},Eq=new Set(["brightness","contrast","saturate","opacity"]);function Cq(e){const[t,i]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[c]=i.match(aT)||[];if(!c)return e;const h=i.replace(c,"");let _=Eq.has(t)?1:0;return c!==i&&(_*=100),t+"("+_+h+")"}const Dq=/\b([a-z-]*)\(.*?\)/gu,vS={...Em,getAnimatableNone:e=>{const t=e.match(Dq);return t?t.map(Cq).join(" "):e}},Pq={...V5,color:Go,backgroundColor:Go,outlineColor:Go,fill:Go,stroke:Go,borderColor:Go,borderTopColor:Go,borderRightColor:Go,borderBottomColor:Go,borderLeftColor:Go,filter:vS,WebkitFilter:vS},iT=e=>Pq[e];function GI(e,t){let i=iT(e);return i!==vS&&(i=Em),i.getAnimatableNone?i.getAnimatableNone(t):void 0}const Mq=new Set(["auto","none","0"]);function Aq(e,t,i){let c=0,h;for(;c<e.length&&!h;){const _=e[c];typeof _=="string"&&!Mq.has(_)&&d_(_).values.length&&(h=e[c]),c++}if(h&&i)for(const _ of t)e[_]=GI(i,h)}const yP=e=>e===px||e===Ba,xP=(e,t)=>parseFloat(e.split(", ")[t]),vP=(e,t)=>(i,{transform:c})=>{if(c==="none"||!c)return 0;const h=c.match(/^matrix3d\((.+)\)$/u);if(h)return xP(h[1],t);{const _=c.match(/^matrix\((.+)\)$/u);return _?xP(_[1],e):0}},kq=new Set(["x","y","z"]),Rq=fx.filter(e=>!kq.has(e));function Iq(e){const t=[];return Rq.forEach(i=>{const c=e.getValue(i);c!==void 0&&(t.push([i,c.get()]),c.set(i.startsWith("scale")?1:0))}),t}const rx={width:({x:e},{paddingLeft:t="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),height:({y:e},{paddingTop:t="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:vP(4,13),y:vP(5,14)};rx.translateX=rx.x;rx.translateY=rx.y;const Kg=new Set;let _S=!1,bS=!1;function HI(){if(bS){const e=Array.from(Kg).filter(c=>c.needsMeasurement),t=new Set(e.map(c=>c.element)),i=new Map;t.forEach(c=>{const h=Iq(c);h.length&&(i.set(c,h),c.render())}),e.forEach(c=>c.measureInitialState()),t.forEach(c=>{c.render();const h=i.get(c);h&&h.forEach(([_,w])=>{var n;(n=c.getValue(_))===null||n===void 0||n.set(w)})}),e.forEach(c=>c.measureEndState()),e.forEach(c=>{c.suspendedScrollY!==void 0&&window.scrollTo(0,c.suspendedScrollY)})}bS=!1,_S=!1,Kg.forEach(e=>e.complete()),Kg.clear()}function qI(){Kg.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(bS=!0)})}function zq(){qI(),HI()}class sT{constructor(t,i,c,h,_,w=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=i,this.name=c,this.motionValue=h,this.element=_,this.isAsync=w}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Kg.add(this),_S||(_S=!0,Ci.read(qI),Ci.resolveKeyframes(HI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:i,element:c,motionValue:h}=this;for(let _=0;_<t.length;_++)if(t[_]===null)if(_===0){const w=h==null?void 0:h.get(),n=t[t.length-1];if(w!==void 0)t[0]=w;else if(c&&i){const k=c.readValue(i,n);k!=null&&(t[0]=k)}t[0]===void 0&&(t[0]=n),h&&w===void 0&&h.set(t[0])}else t[_]=t[_-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Kg.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Kg.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const WI=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Lq=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $q(e){const t=Lq.exec(e);if(!t)return[,];const[,i,c,h]=t;return[`--${i??c}`,h]}function KI(e,t,i=1){const[c,h]=$q(e);if(!c)return;const _=window.getComputedStyle(t).getPropertyValue(c);if(_){const w=_.trim();return WI(w)?parseFloat(w):w}return F5(h)?KI(h,t,i+1):h}const ZI=e=>t=>t.test(e),Nq={test:e=>e==="auto",parse:e=>e},XI=[px,Ba,xh,hm,CH,EH,Nq],_P=e=>XI.find(ZI(e));class YI extends sT{constructor(t,i,c,h,_){super(t,i,c,h,_,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:i,name:c}=this;if(!i||!i.current)return;super.readKeyframes();for(let k=0;k<t.length;k++){let N=t[k];if(typeof N=="string"&&(N=N.trim(),F5(N))){const B=KI(N,i.current);B!==void 0&&(t[k]=B),k===t.length-1&&(this.finalKeyframe=N)}}if(this.resolveNoneKeyframes(),!CI.has(c)||t.length!==2)return;const[h,_]=t,w=_P(h),n=_P(_);if(w!==n)if(yP(w)&&yP(n))for(let k=0;k<t.length;k++){const N=t[k];typeof N=="string"&&(t[k]=parseFloat(N))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:i}=this,c=[];for(let h=0;h<t.length;h++)fq(t[h])&&c.push(h);c.length&&Aq(t,c,i)}measureInitialState(){const{element:t,unresolvedKeyframes:i,name:c}=this;if(!t||!t.current)return;c==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rx[c](t.measureViewportBox(),window.getComputedStyle(t.current)),i[0]=this.measuredOrigin;const h=i[i.length-1];h!==void 0&&t.getValue(c,h).jump(h,!1)}measureEndState(){var t;const{element:i,name:c,unresolvedKeyframes:h}=this;if(!i||!i.current)return;const _=i.getValue(c);_&&_.jump(this.measuredOrigin,!1);const w=h.length-1,n=h[w];h[w]=rx[c](i.measureViewportBox(),window.getComputedStyle(i.current)),n!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=n),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([k,N])=>{i.getValue(k).set(N)}),this.resolveNoneKeyframes()}}const bP=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Em.test(e)||e==="0")&&!e.startsWith("url("));function Bq(e){const t=e[0];if(e.length===1)return!0;for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}function jq(e,t,i,c){const h=e[0];if(h===null)return!1;if(t==="display"||t==="visibility")return!0;const _=e[e.length-1],w=bP(h,t),n=bP(_,t);return!w||!n?!1:Bq(e)||(i==="spring"||Z5(i))&&c}const Oq=e=>e!==null;function Jw(e,{repeat:t,repeatType:i="loop"},c){const h=e.filter(Oq),_=t&&i!=="loop"&&t%2===1?0:h.length-1;return!_||c===void 0?h[_]:c}const Fq=40;class JI{constructor({autoplay:t=!0,delay:i=0,type:c="keyframes",repeat:h=0,repeatDelay:_=0,repeatType:w="loop",...n}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=vh.now(),this.options={autoplay:t,delay:i,type:c,repeat:h,repeatDelay:_,repeatType:w,...n},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Fq?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&zq(),this._resolved}onKeyframesResolved(t,i){this.resolvedAt=vh.now(),this.hasAttemptedResolve=!0;const{name:c,type:h,velocity:_,delay:w,onComplete:n,onUpdate:k,isGenerator:N}=this.options;if(!N&&!jq(t,c,h,_))if(MI.current||!w){k&&k(Jw(t,this.options,i)),n&&n(),this.resolveFinishedPromise();return}else this.options.duration=0;const B=this.initPlayback(t,i);B!==!1&&(this._resolved={keyframes:t,finalKeyframe:i,...B},this.onPostResolved())}onPostResolved(){}then(t,i){return this.currentFinishedPromise.then(t,i)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Hi=(e,t,i)=>e+(t-e)*i;function Y3(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function Vq({hue:e,saturation:t,lightness:i,alpha:c}){e/=360,t/=100,i/=100;let h=0,_=0,w=0;if(!t)h=_=w=i;else{const n=i<.5?i*(1+t):i+t-i*t,k=2*i-n;h=Y3(k,n,e+1/3),_=Y3(k,n,e),w=Y3(k,n,e-1/3)}return{red:Math.round(h*255),green:Math.round(_*255),blue:Math.round(w*255),alpha:c}}function vw(e,t){return i=>i>0?t:e}const J3=(e,t,i)=>{const c=e*e,h=i*(t*t-c)+c;return h<0?0:Math.sqrt(h)},Uq=[xS,Hg,$y],Gq=e=>Uq.find(t=>t.test(e));function wP(e){const t=Gq(e);if(!t)return!1;let i=t.parse(e);return t===$y&&(i=Vq(i)),i}const SP=(e,t)=>{const i=wP(e),c=wP(t);if(!i||!c)return vw(e,t);const h={...i};return _=>(h.red=J3(i.red,c.red,_),h.green=J3(i.green,c.green,_),h.blue=J3(i.blue,c.blue,_),h.alpha=Hi(i.alpha,c.alpha,_),Hg.transform(h))},Hq=(e,t)=>i=>t(e(i)),I_=(...e)=>e.reduce(Hq),wS=new Set(["none","hidden"]);function qq(e,t){return wS.has(e)?i=>i<=0?e:t:i=>i>=1?t:e}function Wq(e,t){return i=>Hi(e,t,i)}function oT(e){return typeof e=="number"?Wq:typeof e=="string"?F5(e)?vw:Go.test(e)?SP:Xq:Array.isArray(e)?QI:typeof e=="object"?Go.test(e)?SP:Kq:vw}function QI(e,t){const i=[...e],c=i.length,h=e.map((_,w)=>oT(_)(_,t[w]));return _=>{for(let w=0;w<c;w++)i[w]=h[w](_);return i}}function Kq(e,t){const i={...e,...t},c={};for(const h in i)e[h]!==void 0&&t[h]!==void 0&&(c[h]=oT(e[h])(e[h],t[h]));return h=>{for(const _ in c)i[_]=c[_](h);return i}}function Zq(e,t){var i;const c=[],h={color:0,var:0,number:0};for(let _=0;_<t.values.length;_++){const w=t.types[_],n=e.indexes[w][h[w]],k=(i=e.values[n])!==null&&i!==void 0?i:0;c[_]=k,h[w]++}return c}const Xq=(e,t)=>{const i=Em.createTransformer(t),c=d_(e),h=d_(t);return c.indexes.var.length===h.indexes.var.length&&c.indexes.color.length===h.indexes.color.length&&c.indexes.number.length>=h.indexes.number.length?wS.has(e)&&!h.values.length||wS.has(t)&&!c.values.length?qq(e,t):I_(QI(Zq(c,h),h.values),i):vw(e,t)};function e8(e,t,i){return typeof e=="number"&&typeof t=="number"&&typeof i=="number"?Hi(e,t,i):oT(e)(e,t)}const Yq=5;function t8(e,t,i){const c=Math.max(t-Yq,0);return DI(i-e(c),t-c)}const as={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},TP=.001;function Jq({duration:e=as.duration,bounce:t=as.bounce,velocity:i=as.velocity,mass:c=as.mass}){let h,_,w=1-t;w=$f(as.minDamping,as.maxDamping,w),e=$f(as.minDuration,as.maxDuration,If(e)),w<1?(h=N=>{const B=N*w,F=B*e,G=B-i,Q=SS(N,w),te=Math.exp(-F);return TP-G/Q*te},_=N=>{const F=N*w*e,G=F*i+i,Q=Math.pow(w,2)*Math.pow(N,2)*e,te=Math.exp(-F),Y=SS(Math.pow(N,2),w);return(-h(N)+TP>0?-1:1)*((G-Q)*te)/Y}):(h=N=>{const B=Math.exp(-N*e),F=(N-i)*e+1;return-.001+B*F},_=N=>{const B=Math.exp(-N*e),F=(i-N)*(e*e);return B*F});const n=5/e,k=eW(h,_,n);if(e=Rf(e),isNaN(k))return{stiffness:as.stiffness,damping:as.damping,duration:e};{const N=Math.pow(k,2)*c;return{stiffness:N,damping:w*2*Math.sqrt(c*N),duration:e}}}const Qq=12;function eW(e,t,i){let c=i;for(let h=1;h<Qq;h++)c=c-e(c)/t(c);return c}function SS(e,t){return e*Math.sqrt(1-t*t)}const tW=["duration","bounce"],rW=["stiffness","damping","mass"];function EP(e,t){return t.some(i=>e[i]!==void 0)}function aW(e){let t={velocity:as.velocity,stiffness:as.stiffness,damping:as.damping,mass:as.mass,isResolvedFromDuration:!1,...e};if(!EP(e,rW)&&EP(e,tW))if(e.visualDuration){const i=e.visualDuration,c=2*Math.PI/(i*1.2),h=c*c,_=2*$f(.05,1,1-(e.bounce||0))*Math.sqrt(h);t={...t,mass:as.mass,stiffness:h,damping:_}}else{const i=Jq(e);t={...t,...i,mass:as.mass},t.isResolvedFromDuration=!0}return t}function r8(e=as.visualDuration,t=as.bounce){const i=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:c,restDelta:h}=i;const _=i.keyframes[0],w=i.keyframes[i.keyframes.length-1],n={done:!1,value:_},{stiffness:k,damping:N,mass:B,duration:F,velocity:G,isResolvedFromDuration:Q}=aW({...i,velocity:-If(i.velocity||0)}),te=G||0,Y=N/(2*Math.sqrt(k*B)),oe=w-_,de=If(Math.sqrt(k/B)),ge=Math.abs(oe)<5;c||(c=ge?as.restSpeed.granular:as.restSpeed.default),h||(h=ge?as.restDelta.granular:as.restDelta.default);let be;if(Y<1){const we=SS(de,Y);be=ke=>{const Ae=Math.exp(-Y*de*ke);return w-Ae*((te+Y*de*oe)/we*Math.sin(we*ke)+oe*Math.cos(we*ke))}}else if(Y===1)be=we=>w-Math.exp(-de*we)*(oe+(te+de*oe)*we);else{const we=de*Math.sqrt(Y*Y-1);be=ke=>{const Ae=Math.exp(-Y*de*ke),re=Math.min(we*ke,300);return w-Ae*((te+Y*de*oe)*Math.sinh(re)+we*oe*Math.cosh(re))/we}}const pe={calculatedDuration:Q&&F||null,next:we=>{const ke=be(we);if(Q)n.done=we>=F;else{let Ae=0;Y<1&&(Ae=we===0?Rf(te):t8(be,we,ke));const re=Math.abs(Ae)<=c,Te=Math.abs(w-ke)<=h;n.done=re&&Te}return n.value=n.done?w:ke,n},toString:()=>{const we=Math.min(vI(pe),mS),ke=_I(Ae=>pe.next(we*Ae).value,we,30);return we+"ms "+ke}};return pe}function CP({keyframes:e,velocity:t=0,power:i=.8,timeConstant:c=325,bounceDamping:h=10,bounceStiffness:_=500,modifyTarget:w,min:n,max:k,restDelta:N=.5,restSpeed:B}){const F=e[0],G={done:!1,value:F},Q=re=>n!==void 0&&re<n||k!==void 0&&re>k,te=re=>n===void 0?k:k===void 0||Math.abs(n-re)<Math.abs(k-re)?n:k;let Y=i*t;const oe=F+Y,de=w===void 0?oe:w(oe);de!==oe&&(Y=de-F);const ge=re=>-Y*Math.exp(-re/c),be=re=>de+ge(re),pe=re=>{const Te=ge(re),se=be(re);G.done=Math.abs(Te)<=N,G.value=G.done?de:se};let we,ke;const Ae=re=>{Q(G.value)&&(we=re,ke=r8({keyframes:[G.value,te(G.value)],velocity:t8(be,re,G.value),damping:h,stiffness:_,restDelta:N,restSpeed:B}))};return Ae(0),{calculatedDuration:null,next:re=>{let Te=!1;return!ke&&we===void 0&&(Te=!0,pe(re),Ae(re)),we!==void 0&&re>=we?ke.next(re-we):(!Te&&pe(re),G)}}}const nW=R_(.42,0,1,1),iW=R_(0,0,.58,1),a8=R_(.42,0,.58,1),sW=e=>Array.isArray(e)&&typeof e[0]!="number",oW={linear:Nl,easeIn:nW,easeInOut:a8,easeOut:iW,circIn:rT,circInOut:NI,circOut:$I,backIn:tT,backInOut:zI,backOut:II,anticipate:LI},DP=e=>{if(X5(e)){YR(e.length===4);const[t,i,c,h]=e;return R_(t,i,c,h)}else if(typeof e=="string")return oW[e];return e};function lW(e,t,i){const c=[],h=i||e8,_=e.length-1;for(let w=0;w<_;w++){let n=h(e[w],e[w+1]);if(t){const k=Array.isArray(t)?t[w]||Nl:t;n=I_(k,n)}c.push(n)}return c}function cW(e,t,{clamp:i=!0,ease:c,mixer:h}={}){const _=e.length;if(YR(_===t.length),_===1)return()=>t[0];if(_===2&&t[0]===t[1])return()=>t[1];const w=e[0]===e[1];e[0]>e[_-1]&&(e=[...e].reverse(),t=[...t].reverse());const n=lW(t,c,h),k=n.length,N=B=>{if(w&&B<e[0])return t[0];let F=0;if(k>1)for(;F<e.length-2&&!(B<e[F+1]);F++);const G=ex(e[F],e[F+1],B);return n[F](G)};return i?B=>N($f(e[0],e[_-1],B)):N}function uW(e,t){const i=e[e.length-1];for(let c=1;c<=t;c++){const h=ex(0,t,c);e.push(Hi(i,1,h))}}function dW(e){const t=[0];return uW(t,e.length-1),t}function hW(e,t){return e.map(i=>i*t)}function fW(e,t){return e.map(()=>t||a8).splice(0,e.length-1)}function _w({duration:e=300,keyframes:t,times:i,ease:c="easeInOut"}){const h=sW(c)?c.map(DP):DP(c),_={done:!1,value:t[0]},w=hW(i&&i.length===t.length?i:dW(t),e),n=cW(w,t,{ease:Array.isArray(h)?h:fW(t,h)});return{calculatedDuration:e,next:k=>(_.value=n(k),_.done=k>=e,_)}}const pW=e=>{const t=({timestamp:i})=>e(i);return{start:()=>Ci.update(t,!0),stop:()=>Tm(t),now:()=>vo.isProcessing?vo.timestamp:vh.now()}},mW={decay:CP,inertia:CP,tween:_w,keyframes:_w,spring:r8},gW=e=>e/100;class Qw extends JI{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:k}=this.options;k&&k()};const{name:i,motionValue:c,element:h,keyframes:_}=this.options,w=(h==null?void 0:h.KeyframeResolver)||sT,n=(k,N)=>this.onKeyframesResolved(k,N);this.resolver=new w(_,n,i,c,h),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:i="keyframes",repeat:c=0,repeatDelay:h=0,repeatType:_,velocity:w=0}=this.options,n=Z5(i)?i:mW[i]||_w;let k,N;n!==_w&&typeof t[0]!="number"&&(k=I_(gW,e8(t[0],t[1])),t=[0,100]);const B=n({...this.options,keyframes:t});_==="mirror"&&(N=n({...this.options,keyframes:[...t].reverse(),velocity:-w})),B.calculatedDuration===null&&(B.calculatedDuration=vI(B));const{calculatedDuration:F}=B,G=F+h,Q=G*(c+1)-h;return{generator:B,mirroredGenerator:N,mapPercentToKeyframes:k,calculatedDuration:F,resolvedDuration:G,totalDuration:Q}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,i=!1){const{resolved:c}=this;if(!c){const{keyframes:re}=this.options;return{done:!0,value:re[re.length-1]}}const{finalKeyframe:h,generator:_,mirroredGenerator:w,mapPercentToKeyframes:n,keyframes:k,calculatedDuration:N,totalDuration:B,resolvedDuration:F}=c;if(this.startTime===null)return _.next(0);const{delay:G,repeat:Q,repeatType:te,repeatDelay:Y,onUpdate:oe}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-B/this.speed,this.startTime)),i?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const de=this.currentTime-G*(this.speed>=0?1:-1),ge=this.speed>=0?de<0:de>B;this.currentTime=Math.max(de,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=B);let be=this.currentTime,pe=_;if(Q){const re=Math.min(this.currentTime,B)/F;let Te=Math.floor(re),se=re%1;!se&&re>=1&&(se=1),se===1&&Te--,Te=Math.min(Te,Q+1),!!(Te%2)&&(te==="reverse"?(se=1-se,Y&&(se-=Y/F)):te==="mirror"&&(pe=w)),be=$f(0,1,se)*F}const we=ge?{done:!1,value:k[0]}:pe.next(be);n&&(we.value=n(we.value));let{done:ke}=we;!ge&&N!==null&&(ke=this.speed>=0?this.currentTime>=B:this.currentTime<=0);const Ae=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ke);return Ae&&h!==void 0&&(we.value=Jw(k,this.options,h)),oe&&oe(we.value),Ae&&this.finish(),we}get duration(){const{resolved:t}=this;return t?If(t.calculatedDuration):0}get time(){return If(this.currentTime)}set time(t){t=Rf(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const i=this.playbackSpeed!==t;this.playbackSpeed=t,i&&(this.time=If(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=pW,onPlay:i,startTime:c}=this.options;this.driver||(this.driver=t(_=>this.tick(_))),i&&i();const h=this.driver.now();this.holdTime!==null?this.startTime=h-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=h):this.startTime=c??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}function voe(e){return new Qw(e)}const yW=new Set(["opacity","clipPath","filter","transform"]);function xW(e,t,i,{delay:c=0,duration:h=300,repeat:_=0,repeatType:w="loop",ease:n="easeInOut",times:k}={}){const N={[t]:i};k&&(N.offset=k);const B=wI(n,h);return Array.isArray(B)&&(N.easing=B),e.animate(N,{delay:c,duration:h,easing:Array.isArray(B)?"linear":B,fill:"both",iterations:_+1,direction:w==="reverse"?"alternate":"normal"})}const vW=R5(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),bw=10,_W=2e4;function bW(e){return Z5(e.type)||e.type==="spring"||!bI(e.ease)}function wW(e,t){const i=new Qw({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let c={done:!1,value:e[0]};const h=[];let _=0;for(;!c.done&&_<_W;)c=i.sample(_),h.push(c.value),_+=bw;return{times:void 0,keyframes:h,duration:_-bw,ease:"linear"}}const n8={anticipate:LI,backInOut:zI,circInOut:NI};function SW(e){return e in n8}class PP extends JI{constructor(t){super(t);const{name:i,motionValue:c,element:h,keyframes:_}=this.options;this.resolver=new YI(_,(w,n)=>this.onKeyframesResolved(w,n),i,c,h),this.resolver.scheduleResolve()}initPlayback(t,i){let{duration:c=300,times:h,ease:_,type:w,motionValue:n,name:k,startTime:N}=this.options;if(!n.owner||!n.owner.current)return!1;if(typeof _=="string"&&xw()&&SW(_)&&(_=n8[_]),bW(this.options)){const{onComplete:F,onUpdate:G,motionValue:Q,element:te,...Y}=this.options,oe=wW(t,Y);t=oe.keyframes,t.length===1&&(t[1]=t[0]),c=oe.duration,h=oe.times,_=oe.ease,w="keyframes"}const B=xW(n.owner.current,k,t,{...this.options,duration:c,times:h,ease:_});return B.startTime=N??this.calcStartTime(),this.pendingTimeline?(uP(B,this.pendingTimeline),this.pendingTimeline=void 0):B.onfinish=()=>{const{onComplete:F}=this.options;n.set(Jw(t,this.options,i)),F&&F(),this.cancel(),this.resolveFinishedPromise()},{animation:B,duration:c,times:h,type:w,ease:_,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:i}=t;return If(i)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:i}=t;return If(i.currentTime||0)}set time(t){const{resolved:i}=this;if(!i)return;const{animation:c}=i;c.currentTime=Rf(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:i}=t;return i.playbackRate}set speed(t){const{resolved:i}=this;if(!i)return;const{animation:c}=i;c.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:i}=t;return i.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:i}=t;return i.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:i}=this;if(!i)return Nl;const{animation:c}=i;uP(c,t)}return Nl}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playState==="finished"&&this.updateFinishedPromise(),i.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:i,keyframes:c,duration:h,type:_,ease:w,times:n}=t;if(i.playState==="idle"||i.playState==="finished")return;if(this.time){const{motionValue:N,onUpdate:B,onComplete:F,element:G,...Q}=this.options,te=new Qw({...Q,keyframes:c,duration:h,type:_,ease:w,times:n,isGenerator:!0}),Y=Rf(this.time);N.setWithVelocity(te.sample(Y-bw).value,te.sample(Y).value,bw)}const{onStop:k}=this.options;k&&k(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:i,name:c,repeatDelay:h,repeatType:_,damping:w,type:n}=t;if(!i||!i.owner||!(i.owner.current instanceof HTMLElement))return!1;const{onUpdate:k,transformTemplate:N}=i.owner.getProps();return vW()&&c&&yW.has(c)&&!k&&!N&&!h&&_!=="mirror"&&w!==0&&n!=="inertia"}}const TW={type:"spring",stiffness:500,damping:25,restSpeed:10},EW=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),CW={type:"keyframes",duration:.8},DW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PW=(e,{keyframes:t})=>t.length>2?CW:u0.has(e)?e.startsWith("scale")?EW(t[1]):TW:DW;function MW({when:e,delay:t,delayChildren:i,staggerChildren:c,staggerDirection:h,repeat:_,repeatType:w,repeatDelay:n,from:k,elapsed:N,...B}){return!!Object.keys(B).length}const lT=(e,t,i,c={},h,_)=>w=>{const n=K5(c,e)||{},k=n.delay||c.delay||0;let{elapsed:N=0}=c;N=N-Rf(k);let B={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity(),...n,delay:-N,onUpdate:G=>{t.set(G),n.onUpdate&&n.onUpdate(G)},onComplete:()=>{w(),n.onComplete&&n.onComplete()},name:e,motionValue:t,element:_?void 0:h};MW(n)||(B={...B,...PW(e,B)}),B.duration&&(B.duration=Rf(B.duration)),B.repeatDelay&&(B.repeatDelay=Rf(B.repeatDelay)),B.from!==void 0&&(B.keyframes[0]=B.from);let F=!1;if((B.type===!1||B.duration===0&&!B.repeatDelay)&&(B.duration=0,B.delay===0&&(F=!0)),(MI.current||Ww.skipAnimations)&&(F=!0,B.duration=0,B.delay=0),F&&!_&&t.get()!==void 0){const G=Jw(B.keyframes,n);if(G!==void 0)return Ci.update(()=>{B.onUpdate(G),B.onComplete()}),new KH([])}return!_&&PP.supports(B)?new PP(B):new Qw(B)};function AW({protectedKeys:e,needsAnimating:t},i){const c=e.hasOwnProperty(i)&&t[i]!==!0;return t[i]=!1,c}function i8(e,t,{delay:i=0,transitionOverride:c,type:h}={}){var _;let{transition:w=e.getDefaultTransition(),transitionEnd:n,...k}=t;c&&(w=c);const N=[],B=h&&e.animationState&&e.animationState.getState()[h];for(const F in k){const G=e.getValue(F,(_=e.latestValues[F])!==null&&_!==void 0?_:null),Q=k[F];if(Q===void 0||B&&AW(B,F))continue;const te={delay:i,...K5(w||{},F)};let Y=!1;if(window.MotionHandoffAnimation){const de=PI(e);if(de){const ge=window.MotionHandoffAnimation(de,F,Ci);ge!==null&&(te.startTime=ge,Y=!0)}}yS(e,F),G.start(lT(F,G,Q,e.shouldReduceMotion&&CI.has(F)?{type:!1}:te,e,Y));const oe=G.animation;oe&&N.push(oe)}return n&&Promise.all(N).then(()=>{Ci.update(()=>{n&&lq(e,n)})}),N}function TS(e,t,i={}){var c;const h=Yw(e,t,i.type==="exit"?(c=e.presenceContext)===null||c===void 0?void 0:c.custom:void 0);let{transition:_=e.getDefaultTransition()||{}}=h||{};i.transitionOverride&&(_=i.transitionOverride);const w=h?()=>Promise.all(i8(e,h,i)):()=>Promise.resolve(),n=e.variantChildren&&e.variantChildren.size?(N=0)=>{const{delayChildren:B=0,staggerChildren:F,staggerDirection:G}=_;return kW(e,t,B+N,F,G,i)}:()=>Promise.resolve(),{when:k}=_;if(k){const[N,B]=k==="beforeChildren"?[w,n]:[n,w];return N().then(()=>B())}else return Promise.all([w(),n(i.delay)])}function kW(e,t,i=0,c=0,h=1,_){const w=[],n=(e.variantChildren.size-1)*c,k=h===1?(N=0)=>N*c:(N=0)=>n-N*c;return Array.from(e.variantChildren).sort(RW).forEach((N,B)=>{N.notify("AnimationStart",t),w.push(TS(N,t,{..._,delay:i+k(B)}).then(()=>N.notify("AnimationComplete",t)))}),Promise.all(w)}function RW(e,t){return e.sortNodePosition(t)}function IW(e,t,i={}){e.notify("AnimationStart",t);let c;if(Array.isArray(t)){const h=t.map(_=>TS(e,_,i));c=Promise.all(h)}else if(typeof t=="string")c=TS(e,t,i);else{const h=typeof t=="function"?Yw(e,t,i.custom):t;c=Promise.all(i8(e,h,i))}return c.then(()=>{e.notify("AnimationComplete",t)})}const zW=L5.length;function s8(e){if(!e)return;if(!e.isControllingVariants){const i=e.parent?s8(e.parent)||{}:{};return e.props.initial!==void 0&&(i.initial=e.props.initial),i}const t={};for(let i=0;i<zW;i++){const c=L5[i],h=e.props[c];(o_(h)||h===!1)&&(t[c]=h)}return t}const LW=[...z5].reverse(),$W=z5.length;function NW(e){return t=>Promise.all(t.map(({animation:i,options:c})=>IW(e,i,c)))}function BW(e){let t=NW(e),i=MP(),c=!0;const h=k=>(N,B)=>{var F;const G=Yw(e,B,k==="exit"?(F=e.presenceContext)===null||F===void 0?void 0:F.custom:void 0);if(G){const{transition:Q,transitionEnd:te,...Y}=G;N={...N,...Y,...te}}return N};function _(k){t=k(e)}function w(k){const{props:N}=e,B=s8(e.parent)||{},F=[],G=new Set;let Q={},te=1/0;for(let oe=0;oe<$W;oe++){const de=LW[oe],ge=i[de],be=N[de]!==void 0?N[de]:B[de],pe=o_(be),we=de===k?ge.isActive:null;we===!1&&(te=oe);let ke=be===B[de]&&be!==N[de]&&pe;if(ke&&c&&e.manuallyAnimateOnMount&&(ke=!1),ge.protectedKeys={...Q},!ge.isActive&&we===null||!be&&!ge.prevProp||Zw(be)||typeof be=="boolean")continue;const Ae=jW(ge.prevProp,be);let re=Ae||de===k&&ge.isActive&&!ke&&pe||oe>te&&pe,Te=!1;const se=Array.isArray(be)?be:[be];let ue=se.reduce(h(de),{});we===!1&&(ue={});const{prevResolvedValues:De={}}=ge,ce={...De,...ue},je=Ge=>{re=!0,G.has(Ge)&&(Te=!0,G.delete(Ge)),ge.needsAnimating[Ge]=!0;const ze=e.getValue(Ge);ze&&(ze.liveStyle=!1)};for(const Ge in ce){const ze=ue[Ge],ot=De[Ge];if(Q.hasOwnProperty(Ge))continue;let Ee=!1;pS(ze)&&pS(ot)?Ee=!xI(ze,ot):Ee=ze!==ot,Ee?ze!=null?je(Ge):G.add(Ge):ze!==void 0&&G.has(Ge)?je(Ge):ge.protectedKeys[Ge]=!0}ge.prevProp=be,ge.prevResolvedValues=ue,ge.isActive&&(Q={...Q,...ue}),c&&e.blockInitialAnimation&&(re=!1),re&&(!(ke&&Ae)||Te)&&F.push(...se.map(Ge=>({animation:Ge,options:{type:de}})))}if(G.size){const oe={};G.forEach(de=>{const ge=e.getBaseTarget(de),be=e.getValue(de);be&&(be.liveStyle=!0),oe[de]=ge??null}),F.push({animation:oe})}let Y=!!F.length;return c&&(N.initial===!1||N.initial===N.animate)&&!e.manuallyAnimateOnMount&&(Y=!1),c=!1,Y?t(F):Promise.resolve()}function n(k,N){var B;if(i[k].isActive===N)return Promise.resolve();(B=e.variantChildren)===null||B===void 0||B.forEach(G=>{var Q;return(Q=G.animationState)===null||Q===void 0?void 0:Q.setActive(k,N)}),i[k].isActive=N;const F=w(k);for(const G in i)i[G].protectedKeys={};return F}return{animateChanges:w,setActive:n,setAnimateFunction:_,getState:()=>i,reset:()=>{i=MP(),c=!0}}}function jW(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!xI(t,e):!1}function kg(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function MP(){return{animate:kg(!0),whileInView:kg(),whileHover:kg(),whileTap:kg(),whileDrag:kg(),whileFocus:kg(),exit:kg()}}class Am{constructor(t){this.isMounted=!1,this.node=t}update(){}}class OW extends Am{constructor(t){super(t),t.animationState||(t.animationState=BW(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Zw(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:i}=this.node.prevProps||{};t!==i&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let FW=0;class VW extends Am{constructor(){super(...arguments),this.id=FW++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:i}=this.node.presenceContext,{isPresent:c}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===c)return;const h=this.node.animationState.setActive("exit",!t);i&&!t&&h.then(()=>i(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const o8={animation:{Feature:OW},exit:{Feature:VW}};function h_(e,t,i,c={passive:!0}){return e.addEventListener(t,i,c),()=>e.removeEventListener(t,i)}function z_(e){return{point:{x:e.pageX,y:e.pageY}}}const UW=e=>t=>Y5(t)&&e(t,z_(t));function Zv(e,t,i,c){return h_(e,t,UW(i),c)}const AP=(e,t)=>Math.abs(e-t);function GW(e,t){const i=AP(e.x,t.x),c=AP(e.y,t.y);return Math.sqrt(i**2+c**2)}class l8{constructor(t,i,{transformPagePoint:c,contextWindow:h,dragSnapToOrigin:_=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const F=e4(this.lastMoveEventInfo,this.history),G=this.startEvent!==null,Q=GW(F.offset,{x:0,y:0})>=3;if(!G&&!Q)return;const{point:te}=F,{timestamp:Y}=vo;this.history.push({...te,timestamp:Y});const{onStart:oe,onMove:de}=this.handlers;G||(oe&&oe(this.lastMoveEvent,F),this.startEvent=this.lastMoveEvent),de&&de(this.lastMoveEvent,F)},this.handlePointerMove=(F,G)=>{this.lastMoveEvent=F,this.lastMoveEventInfo=Q3(G,this.transformPagePoint),Ci.update(this.updatePoint,!0)},this.handlePointerUp=(F,G)=>{this.end();const{onEnd:Q,onSessionEnd:te,resumeAnimation:Y}=this.handlers;if(this.dragSnapToOrigin&&Y&&Y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const oe=e4(F.type==="pointercancel"?this.lastMoveEventInfo:Q3(G,this.transformPagePoint),this.history);this.startEvent&&Q&&Q(F,oe),te&&te(F,oe)},!Y5(t))return;this.dragSnapToOrigin=_,this.handlers=i,this.transformPagePoint=c,this.contextWindow=h||window;const w=z_(t),n=Q3(w,this.transformPagePoint),{point:k}=n,{timestamp:N}=vo;this.history=[{...k,timestamp:N}];const{onSessionStart:B}=i;B&&B(t,e4(n,this.history)),this.removeListeners=I_(Zv(this.contextWindow,"pointermove",this.handlePointerMove),Zv(this.contextWindow,"pointerup",this.handlePointerUp),Zv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Tm(this.updatePoint)}}function Q3(e,t){return t?{point:t(e.point)}:e}function kP(e,t){return{x:e.x-t.x,y:e.y-t.y}}function e4({point:e},t){return{point:e,delta:kP(e,c8(t)),offset:kP(e,HW(t)),velocity:qW(t,.1)}}function HW(e){return e[0]}function c8(e){return e[e.length-1]}function qW(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,c=null;const h=c8(e);for(;i>=0&&(c=e[i],!(h.timestamp-c.timestamp>Rf(t)));)i--;if(!c)return{x:0,y:0};const _=If(h.timestamp-c.timestamp);if(_===0)return{x:0,y:0};const w={x:(h.x-c.x)/_,y:(h.y-c.y)/_};return w.x===1/0&&(w.x=0),w.y===1/0&&(w.y=0),w}const u8=1e-4,WW=1-u8,KW=1+u8,d8=.01,ZW=0-d8,XW=0+d8;function gl(e){return e.max-e.min}function YW(e,t,i){return Math.abs(e-t)<=i}function RP(e,t,i,c=.5){e.origin=c,e.originPoint=Hi(t.min,t.max,e.origin),e.scale=gl(i)/gl(t),e.translate=Hi(i.min,i.max,e.origin)-e.originPoint,(e.scale>=WW&&e.scale<=KW||isNaN(e.scale))&&(e.scale=1),(e.translate>=ZW&&e.translate<=XW||isNaN(e.translate))&&(e.translate=0)}function Xv(e,t,i,c){RP(e.x,t.x,i.x,c?c.originX:void 0),RP(e.y,t.y,i.y,c?c.originY:void 0)}function IP(e,t,i){e.min=i.min+t.min,e.max=e.min+gl(t)}function JW(e,t,i){IP(e.x,t.x,i.x),IP(e.y,t.y,i.y)}function zP(e,t,i){e.min=t.min-i.min,e.max=e.min+gl(t)}function Yv(e,t,i){zP(e.x,t.x,i.x),zP(e.y,t.y,i.y)}function QW(e,{min:t,max:i},c){return t!==void 0&&e<t?e=c?Hi(t,e,c.min):Math.max(e,t):i!==void 0&&e>i&&(e=c?Hi(i,e,c.max):Math.min(e,i)),e}function LP(e,t,i){return{min:t!==void 0?e.min+t:void 0,max:i!==void 0?e.max+i-(e.max-e.min):void 0}}function eK(e,{top:t,left:i,bottom:c,right:h}){return{x:LP(e.x,i,h),y:LP(e.y,t,c)}}function $P(e,t){let i=t.min-e.min,c=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,c]=[c,i]),{min:i,max:c}}function tK(e,t){return{x:$P(e.x,t.x),y:$P(e.y,t.y)}}function rK(e,t){let i=.5;const c=gl(e),h=gl(t);return h>c?i=ex(t.min,t.max-c,e.min):c>h&&(i=ex(e.min,e.max-h,t.min)),$f(0,1,i)}function aK(e,t){const i={};return t.min!==void 0&&(i.min=t.min-e.min),t.max!==void 0&&(i.max=t.max-e.min),i}const ES=.35;function nK(e=ES){return e===!1?e=0:e===!0&&(e=ES),{x:NP(e,"left","right"),y:NP(e,"top","bottom")}}function NP(e,t,i){return{min:BP(e,t),max:BP(e,i)}}function BP(e,t){return typeof e=="number"?e:e[t]||0}const jP=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ny=()=>({x:jP(),y:jP()}),OP=()=>({min:0,max:0}),ms=()=>({x:OP(),y:OP()});function hu(e){return[e("x"),e("y")]}function h8({top:e,left:t,right:i,bottom:c}){return{x:{min:t,max:i},y:{min:e,max:c}}}function iK({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function sK(e,t){if(!t)return e;const i=t({x:e.left,y:e.top}),c=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:c.y,right:c.x}}function t4(e){return e===void 0||e===1}function CS({scale:e,scaleX:t,scaleY:i}){return!t4(e)||!t4(t)||!t4(i)}function jg(e){return CS(e)||f8(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function f8(e){return FP(e.x)||FP(e.y)}function FP(e){return e&&e!=="0%"}function ww(e,t,i){const c=e-i,h=t*c;return i+h}function VP(e,t,i,c,h){return h!==void 0&&(e=ww(e,h,c)),ww(e,i,c)+t}function DS(e,t=0,i=1,c,h){e.min=VP(e.min,t,i,c,h),e.max=VP(e.max,t,i,c,h)}function p8(e,{x:t,y:i}){DS(e.x,t.translate,t.scale,t.originPoint),DS(e.y,i.translate,i.scale,i.originPoint)}const UP=.999999999999,GP=1.0000000000001;function oK(e,t,i,c=!1){const h=i.length;if(!h)return;t.x=t.y=1;let _,w;for(let n=0;n<h;n++){_=i[n],w=_.projectionDelta;const{visualElement:k}=_.options;k&&k.props.style&&k.props.style.display==="contents"||(c&&_.options.layoutScroll&&_.scroll&&_!==_.root&&jy(e,{x:-_.scroll.offset.x,y:-_.scroll.offset.y}),w&&(t.x*=w.x.scale,t.y*=w.y.scale,p8(e,w)),c&&jg(_.latestValues)&&jy(e,_.latestValues))}t.x<GP&&t.x>UP&&(t.x=1),t.y<GP&&t.y>UP&&(t.y=1)}function By(e,t){e.min=e.min+t,e.max=e.max+t}function HP(e,t,i,c,h=.5){const _=Hi(e.min,e.max,h);DS(e,t,i,_,c)}function jy(e,t){HP(e.x,t.x,t.scaleX,t.scale,t.originX),HP(e.y,t.y,t.scaleY,t.scale,t.originY)}function m8(e,t){return h8(sK(e.getBoundingClientRect(),t))}function lK(e,t,i){const c=m8(e,i),{scroll:h}=t;return h&&(By(c.x,h.offset.x),By(c.y,h.offset.y)),c}const g8=({current:e})=>e?e.ownerDocument.defaultView:null,cK=new WeakMap;class uK{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ms(),this.visualElement=t}start(t,{snapToCursor:i=!1}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const h=B=>{const{dragSnapToOrigin:F}=this.getProps();F?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(z_(B).point)},_=(B,F)=>{const{drag:G,dragPropagation:Q,onDragStart:te}=this.getProps();if(G&&!Q&&(this.openDragLock&&this.openDragLock(),this.openDragLock=aq(G),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hu(oe=>{let de=this.getAxisMotionValue(oe).get()||0;if(xh.test(de)){const{projection:ge}=this.visualElement;if(ge&&ge.layout){const be=ge.layout.layoutBox[oe];be&&(de=gl(be)*(parseFloat(de)/100))}}this.originPoint[oe]=de}),te&&Ci.postRender(()=>te(B,F)),yS(this.visualElement,"transform");const{animationState:Y}=this.visualElement;Y&&Y.setActive("whileDrag",!0)},w=(B,F)=>{const{dragPropagation:G,dragDirectionLock:Q,onDirectionLock:te,onDrag:Y}=this.getProps();if(!G&&!this.openDragLock)return;const{offset:oe}=F;if(Q&&this.currentDirection===null){this.currentDirection=dK(oe),this.currentDirection!==null&&te&&te(this.currentDirection);return}this.updateAxis("x",F.point,oe),this.updateAxis("y",F.point,oe),this.visualElement.render(),Y&&Y(B,F)},n=(B,F)=>this.stop(B,F),k=()=>hu(B=>{var F;return this.getAnimationState(B)==="paused"&&((F=this.getAxisMotionValue(B).animation)===null||F===void 0?void 0:F.play())}),{dragSnapToOrigin:N}=this.getProps();this.panSession=new l8(t,{onSessionStart:h,onStart:_,onMove:w,onSessionEnd:n,resumeAnimation:k},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:N,contextWindow:g8(this.visualElement)})}stop(t,i){const c=this.isDragging;if(this.cancel(),!c)return;const{velocity:h}=i;this.startAnimation(h);const{onDragEnd:_}=this.getProps();_&&Ci.postRender(()=>_(t,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:i}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:c}=this.getProps();!c&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(t,i,c){const{drag:h}=this.getProps();if(!c||!E1(t,h,this.currentDirection))return;const _=this.getAxisMotionValue(t);let w=this.originPoint[t]+c[t];this.constraints&&this.constraints[t]&&(w=QW(w,this.constraints[t],this.elastic[t])),_.set(w)}resolveConstraints(){var t;const{dragConstraints:i,dragElastic:c}=this.getProps(),h=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,_=this.constraints;i&&Ly(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&h?this.constraints=eK(h.layoutBox,i):this.constraints=!1,this.elastic=nK(c),_!==this.constraints&&h&&this.constraints&&!this.hasMutatedConstraints&&hu(w=>{this.constraints!==!1&&this.getAxisMotionValue(w)&&(this.constraints[w]=aK(h.layoutBox[w],this.constraints[w]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!Ly(t))return!1;const c=t.current,{projection:h}=this.visualElement;if(!h||!h.layout)return!1;const _=lK(c,h.root,this.visualElement.getTransformPagePoint());let w=tK(h.layout.layoutBox,_);if(i){const n=i(iK(w));this.hasMutatedConstraints=!!n,n&&(w=h8(n))}return w}startAnimation(t){const{drag:i,dragMomentum:c,dragElastic:h,dragTransition:_,dragSnapToOrigin:w,onDragTransitionEnd:n}=this.getProps(),k=this.constraints||{},N=hu(B=>{if(!E1(B,i,this.currentDirection))return;let F=k&&k[B]||{};w&&(F={min:0,max:0});const G=h?200:1e6,Q=h?40:1e7,te={type:"inertia",velocity:c?t[B]:0,bounceStiffness:G,bounceDamping:Q,timeConstant:750,restDelta:1,restSpeed:10,..._,...F};return this.startAxisValueAnimation(B,te)});return Promise.all(N).then(n)}startAxisValueAnimation(t,i){const c=this.getAxisMotionValue(t);return yS(this.visualElement,t),c.start(lT(t,c,0,i,this.visualElement,!1))}stopAnimation(){hu(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){hu(t=>{var i;return(i=this.getAxisMotionValue(t).animation)===null||i===void 0?void 0:i.pause()})}getAnimationState(t){var i;return(i=this.getAxisMotionValue(t).animation)===null||i===void 0?void 0:i.state}getAxisMotionValue(t){const i=`_drag${t.toUpperCase()}`,c=this.visualElement.getProps(),h=c[i];return h||this.visualElement.getValue(t,(c.initial?c.initial[t]:void 0)||0)}snapToCursor(t){hu(i=>{const{drag:c}=this.getProps();if(!E1(i,c,this.currentDirection))return;const{projection:h}=this.visualElement,_=this.getAxisMotionValue(i);if(h&&h.layout){const{min:w,max:n}=h.layout.layoutBox[i];_.set(t[i]-Hi(w,n,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:i}=this.getProps(),{projection:c}=this.visualElement;if(!Ly(i)||!c||!this.constraints)return;this.stopAnimation();const h={x:0,y:0};hu(w=>{const n=this.getAxisMotionValue(w);if(n&&this.constraints!==!1){const k=n.get();h[w]=rK({min:k,max:k},this.constraints[w])}});const{transformTemplate:_}=this.visualElement.getProps();this.visualElement.current.style.transform=_?_({},""):"none",c.root&&c.root.updateScroll(),c.updateLayout(),this.resolveConstraints(),hu(w=>{if(!E1(w,t,null))return;const n=this.getAxisMotionValue(w),{min:k,max:N}=this.constraints[w];n.set(Hi(k,N,h[w]))})}addListeners(){if(!this.visualElement.current)return;cK.set(this.visualElement,this);const t=this.visualElement.current,i=Zv(t,"pointerdown",k=>{const{drag:N,dragListener:B=!0}=this.getProps();N&&B&&this.start(k)}),c=()=>{const{dragConstraints:k}=this.getProps();Ly(k)&&k.current&&(this.constraints=this.resolveRefConstraints())},{projection:h}=this.visualElement,_=h.addEventListener("measure",c);h&&!h.layout&&(h.root&&h.root.updateScroll(),h.updateLayout()),Ci.read(c);const w=h_(window,"resize",()=>this.scalePositionWithinConstraints()),n=h.addEventListener("didUpdate",({delta:k,hasLayoutChanged:N})=>{this.isDragging&&N&&(hu(B=>{const F=this.getAxisMotionValue(B);F&&(this.originPoint[B]+=k[B].translate,F.set(F.get()+k[B].translate))}),this.visualElement.render())});return()=>{w(),i(),_(),n&&n()}}getProps(){const t=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:c=!1,dragPropagation:h=!1,dragConstraints:_=!1,dragElastic:w=ES,dragMomentum:n=!0}=t;return{...t,drag:i,dragDirectionLock:c,dragPropagation:h,dragConstraints:_,dragElastic:w,dragMomentum:n}}}function E1(e,t,i){return(t===!0||t===e)&&(i===null||i===e)}function dK(e,t=10){let i=null;return Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x"),i}class hK extends Am{constructor(t){super(t),this.removeGroupControls=Nl,this.removeListeners=Nl,this.controls=new uK(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Nl}unmount(){this.removeGroupControls(),this.removeListeners()}}const qP=e=>(t,i)=>{e&&Ci.postRender(()=>e(t,i))};class fK extends Am{constructor(){super(...arguments),this.removePointerDownListener=Nl}onPointerDown(t){this.session=new l8(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:g8(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:i,onPan:c,onPanEnd:h}=this.node.getProps();return{onSessionStart:qP(t),onStart:qP(i),onMove:c,onEnd:(_,w)=>{delete this.session,h&&Ci.postRender(()=>h(_,w))}}}mount(){this.removePointerDownListener=Zv(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const U1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WP(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Tv={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ba.test(e))e=parseFloat(e);else return e;const i=WP(e,t.target.x),c=WP(e,t.target.y);return`${i}% ${c}%`}},pK={correct:(e,{treeScale:t,projectionDelta:i})=>{const c=e,h=Em.parse(e);if(h.length>5)return c;const _=Em.createTransformer(e),w=typeof h[0]!="number"?1:0,n=i.x.scale*t.x,k=i.y.scale*t.y;h[0+w]/=n,h[1+w]/=k;const N=Hi(n,k,.5);return typeof h[2+w]=="number"&&(h[2+w]/=N),typeof h[3+w]=="number"&&(h[3+w]/=N),_(h)}};class mK extends V.Component{componentDidMount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:c,layoutId:h}=this.props,{projection:_}=t;$H(gK),_&&(i.group&&i.group.add(_),c&&c.register&&h&&c.register(_),_.root.didUpdate(),_.addEventListener("animationComplete",()=>{this.safeToRemove()}),_.setOptions({..._.options,onExitComplete:()=>this.safeToRemove()})),U1.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:i,visualElement:c,drag:h,isPresent:_}=this.props,w=c.projection;return w&&(w.isPresent=_,h||t.layoutDependency!==i||i===void 0?w.willUpdate():this.safeToRemove(),t.isPresent!==_&&(_?w.promote():w.relegate()||Ci.postRender(()=>{const n=w.getStack();(!n||!n.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),N5.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:c}=this.props,{projection:h}=t;h&&(h.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(h),c&&c.deregister&&c.deregister(h))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function y8(e){const[t,i]=ZR(),c=V.useContext(A5);return b.jsx(mK,{...e,layoutGroup:c,switchLayoutGroup:V.useContext(iI),isPresent:t,safeToRemove:i})}const gK={borderRadius:{...Tv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tv,borderTopRightRadius:Tv,borderBottomLeftRadius:Tv,borderBottomRightRadius:Tv,boxShadow:pK};function yK(e,t,i){const c=qo(e)?e:u_(e);return c.start(lT("",c,t,i)),c.animation}function xK(e){return e instanceof SVGElement&&e.tagName!=="svg"}const vK=(e,t)=>e.depth-t.depth;class _K{constructor(){this.children=[],this.isDirty=!1}add(t){J5(this.children,t),this.isDirty=!0}remove(t){Q5(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(vK),this.isDirty=!1,this.children.forEach(t)}}function bK(e,t){const i=vh.now(),c=({timestamp:h})=>{const _=h-i;_>=t&&(Tm(c),e(_-t))};return Ci.read(c,!0),()=>Tm(c)}const x8=["TopLeft","TopRight","BottomLeft","BottomRight"],wK=x8.length,KP=e=>typeof e=="string"?parseFloat(e):e,ZP=e=>typeof e=="number"||Ba.test(e);function SK(e,t,i,c,h,_){h?(e.opacity=Hi(0,i.opacity!==void 0?i.opacity:1,TK(c)),e.opacityExit=Hi(t.opacity!==void 0?t.opacity:1,0,EK(c))):_&&(e.opacity=Hi(t.opacity!==void 0?t.opacity:1,i.opacity!==void 0?i.opacity:1,c));for(let w=0;w<wK;w++){const n=`border${x8[w]}Radius`;let k=XP(t,n),N=XP(i,n);if(k===void 0&&N===void 0)continue;k||(k=0),N||(N=0),k===0||N===0||ZP(k)===ZP(N)?(e[n]=Math.max(Hi(KP(k),KP(N),c),0),(xh.test(N)||xh.test(k))&&(e[n]+="%")):e[n]=N}(t.rotate||i.rotate)&&(e.rotate=Hi(t.rotate||0,i.rotate||0,c))}function XP(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const TK=v8(0,.5,$I),EK=v8(.5,.95,Nl);function v8(e,t,i){return c=>c<e?0:c>t?1:i(ex(e,t,c))}function YP(e,t){e.min=t.min,e.max=t.max}function du(e,t){YP(e.x,t.x),YP(e.y,t.y)}function JP(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function QP(e,t,i,c,h){return e-=t,e=ww(e,1/i,c),h!==void 0&&(e=ww(e,1/h,c)),e}function CK(e,t=0,i=1,c=.5,h,_=e,w=e){if(xh.test(t)&&(t=parseFloat(t),t=Hi(w.min,w.max,t/100)-w.min),typeof t!="number")return;let n=Hi(_.min,_.max,c);e===_&&(n-=t),e.min=QP(e.min,t,i,n,h),e.max=QP(e.max,t,i,n,h)}function eM(e,t,[i,c,h],_,w){CK(e,t[i],t[c],t[h],t.scale,_,w)}const DK=["x","scaleX","originX"],PK=["y","scaleY","originY"];function tM(e,t,i,c){eM(e.x,t,DK,i?i.x:void 0,c?c.x:void 0),eM(e.y,t,PK,i?i.y:void 0,c?c.y:void 0)}function rM(e){return e.translate===0&&e.scale===1}function _8(e){return rM(e.x)&&rM(e.y)}function aM(e,t){return e.min===t.min&&e.max===t.max}function MK(e,t){return aM(e.x,t.x)&&aM(e.y,t.y)}function nM(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function b8(e,t){return nM(e.x,t.x)&&nM(e.y,t.y)}function iM(e){return gl(e.x)/gl(e.y)}function sM(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class AK{constructor(){this.members=[]}add(t){J5(this.members,t),t.scheduleRender()}remove(t){if(Q5(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(t){const i=this.members.findIndex(h=>t===h);if(i===0)return!1;let c;for(let h=i;h>=0;h--){const _=this.members[h];if(_.isPresent!==!1){c=_;break}}return c?(this.promote(c),!0):!1}promote(t,i){const c=this.lead;if(t!==c&&(this.prevLead=c,this.lead=t,t.show(),c)){c.instance&&c.scheduleRender(),t.scheduleRender(),t.resumeFrom=c,i&&(t.resumeFrom.preserveOpacity=!0),c.snapshot&&(t.snapshot=c.snapshot,t.snapshot.latestValues=c.animationValues||c.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:h}=t.options;h===!1&&c.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:i,resumingFrom:c}=t;i.onExitComplete&&i.onExitComplete(),c&&c.options.onExitComplete&&c.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kK(e,t,i){let c="";const h=e.x.translate/t.x,_=e.y.translate/t.y,w=(i==null?void 0:i.z)||0;if((h||_||w)&&(c=`translate3d(${h}px, ${_}px, ${w}px) `),(t.x!==1||t.y!==1)&&(c+=`scale(${1/t.x}, ${1/t.y}) `),i){const{transformPerspective:N,rotate:B,rotateX:F,rotateY:G,skewX:Q,skewY:te}=i;N&&(c=`perspective(${N}px) ${c}`),B&&(c+=`rotate(${B}deg) `),F&&(c+=`rotateX(${F}deg) `),G&&(c+=`rotateY(${G}deg) `),Q&&(c+=`skewX(${Q}deg) `),te&&(c+=`skewY(${te}deg) `)}const n=e.x.scale*t.x,k=e.y.scale*t.y;return(n!==1||k!==1)&&(c+=`scale(${n}, ${k})`),c||"none"}const Og={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Fv=typeof window<"u"&&window.MotionDebug!==void 0,r4=["","X","Y","Z"],RK={visibility:"hidden"},oM=1e3;let IK=0;function a4(e,t,i,c){const{latestValues:h}=t;h[e]&&(i[e]=h[e],t.setStaticValue(e,0),c&&(c[e]=0))}function w8(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const i=PI(t);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:h,layoutId:_}=e.options;window.MotionCancelOptimisedAnimation(i,"transform",Ci,!(h||_))}const{parent:c}=e;c&&!c.hasCheckedOptimisedAppear&&w8(c)}function S8({attachResizeListener:e,defaultParent:t,measureScroll:i,checkIsScrollRoot:c,resetTransform:h}){return class{constructor(w={},n=t==null?void 0:t()){this.id=IK++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Fv&&(Og.totalNodes=Og.resolvedTargetDeltas=Og.recalculatedProjection=0),this.nodes.forEach($K),this.nodes.forEach(FK),this.nodes.forEach(VK),this.nodes.forEach(NK),Fv&&window.MotionDebug.record(Og)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=w,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let k=0;k<this.path.length;k++)this.path[k].shouldResetTransform=!0;this.root===this&&(this.nodes=new _K)}addEventListener(w,n){return this.eventHandlers.has(w)||this.eventHandlers.set(w,new eT),this.eventHandlers.get(w).add(n)}notifyListeners(w,...n){const k=this.eventHandlers.get(w);k&&k.notify(...n)}hasListeners(w){return this.eventHandlers.has(w)}mount(w,n=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=xK(w),this.instance=w;const{layoutId:k,layout:N,visualElement:B}=this.options;if(B&&!B.current&&B.mount(w),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(N||k)&&(this.isLayoutDirty=!0),e){let F;const G=()=>this.root.updateBlockedByResize=!1;e(w,()=>{this.root.updateBlockedByResize=!0,F&&F(),F=bK(G,250),U1.hasAnimatedSinceResize&&(U1.hasAnimatedSinceResize=!1,this.nodes.forEach(cM))})}k&&this.root.registerSharedNode(k,this),this.options.animate!==!1&&B&&(k||N)&&this.addEventListener("didUpdate",({delta:F,hasLayoutChanged:G,hasRelativeLayoutChanged:Q,layout:te})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const Y=this.options.transition||B.getDefaultTransition()||WK,{onLayoutAnimationStart:oe,onLayoutAnimationComplete:de}=B.getProps(),ge=!this.targetLayout||!b8(this.targetLayout,te),be=!G&&Q;if(this.options.layoutRoot||this.resumeFrom||be||G&&(ge||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(F,be);const pe={...K5(Y,"layout"),onPlay:oe,onComplete:de};(B.shouldReduceMotion||this.options.layoutRoot)&&(pe.delay=0,pe.type=!1),this.startAnimation(pe)}else G||cM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=te})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const w=this.getStack();w&&w.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Tm(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(UK),this.animationId++)}getTransformTemplate(){const{visualElement:w}=this.options;return w&&w.getProps().transformTemplate}willUpdate(w=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&w8(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let B=0;B<this.path.length;B++){const F=this.path[B];F.shouldResetTransform=!0,F.updateScroll("snapshot"),F.options.layoutRoot&&F.willUpdate(!1)}const{layoutId:n,layout:k}=this.options;if(n===void 0&&!k)return;const N=this.getTransformTemplate();this.prevTransformTemplateValue=N?N(this.latestValues,""):void 0,this.updateSnapshot(),w&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lM);return}this.isUpdating||this.nodes.forEach(jK),this.isUpdating=!1,this.nodes.forEach(OK),this.nodes.forEach(zK),this.nodes.forEach(LK),this.clearAllSnapshots();const n=vh.now();vo.delta=$f(0,1e3/60,n-vo.timestamp),vo.timestamp=n,vo.isProcessing=!0,W3.update.process(vo),W3.preRender.process(vo),W3.render.process(vo),vo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,N5.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(BK),this.sharedNodes.forEach(GK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ci.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ci.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!gl(this.snapshot.measuredBox.x)&&!gl(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let k=0;k<this.path.length;k++)this.path[k].updateScroll();const w=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ms(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:n}=this.options;n&&n.notify("LayoutMeasure",this.layout.layoutBox,w?w.layoutBox:void 0)}updateScroll(w="measure"){let n=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===w&&(n=!1),n){const k=c(this.instance);this.scroll={animationId:this.root.animationId,phase:w,isRoot:k,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:k}}}resetTransform(){if(!h)return;const w=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,n=this.projectionDelta&&!_8(this.projectionDelta),k=this.getTransformTemplate(),N=k?k(this.latestValues,""):void 0,B=N!==this.prevTransformTemplateValue;w&&(n||jg(this.latestValues)||B)&&(h(this.instance,N),this.shouldResetTransform=!1,this.scheduleRender())}measure(w=!0){const n=this.measurePageBox();let k=this.removeElementScroll(n);return w&&(k=this.removeTransform(k)),KK(k),{animationId:this.root.animationId,measuredBox:n,layoutBox:k,latestValues:{},source:this.id}}measurePageBox(){var w;const{visualElement:n}=this.options;if(!n)return ms();const k=n.measureViewportBox();if(!(((w=this.scroll)===null||w===void 0?void 0:w.wasRoot)||this.path.some(ZK))){const{scroll:B}=this.root;B&&(By(k.x,B.offset.x),By(k.y,B.offset.y))}return k}removeElementScroll(w){var n;const k=ms();if(du(k,w),!((n=this.scroll)===null||n===void 0)&&n.wasRoot)return k;for(let N=0;N<this.path.length;N++){const B=this.path[N],{scroll:F,options:G}=B;B!==this.root&&F&&G.layoutScroll&&(F.wasRoot&&du(k,w),By(k.x,F.offset.x),By(k.y,F.offset.y))}return k}applyTransform(w,n=!1){const k=ms();du(k,w);for(let N=0;N<this.path.length;N++){const B=this.path[N];!n&&B.options.layoutScroll&&B.scroll&&B!==B.root&&jy(k,{x:-B.scroll.offset.x,y:-B.scroll.offset.y}),jg(B.latestValues)&&jy(k,B.latestValues)}return jg(this.latestValues)&&jy(k,this.latestValues),k}removeTransform(w){const n=ms();du(n,w);for(let k=0;k<this.path.length;k++){const N=this.path[k];if(!N.instance||!jg(N.latestValues))continue;CS(N.latestValues)&&N.updateSnapshot();const B=ms(),F=N.measurePageBox();du(B,F),tM(n,N.latestValues,N.snapshot?N.snapshot.layoutBox:void 0,B)}return jg(this.latestValues)&&tM(n,this.latestValues),n}setTargetDelta(w){this.targetDelta=w,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(w){this.options={...this.options,...w,crossfade:w.crossfade!==void 0?w.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(w=!1){var n;const k=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=k.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=k.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=k.isSharedProjectionDirty);const N=!!this.resumingFrom||this!==k;if(!(w||N&&this.isSharedProjectionDirty||this.isProjectionDirty||!((n=this.parent)===null||n===void 0)&&n.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:F,layoutId:G}=this.options;if(!(!this.layout||!(F||G))){if(this.resolvedRelativeTargetAt=vo.timestamp,!this.targetDelta&&!this.relativeTarget){const Q=this.getClosestProjectingParent();Q&&Q.layout&&this.animationProgress!==1?(this.relativeParent=Q,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ms(),this.relativeTargetOrigin=ms(),Yv(this.relativeTargetOrigin,this.layout.layoutBox,Q.layout.layoutBox),du(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ms(),this.targetWithTransforms=ms()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):du(this.target,this.layout.layoutBox),p8(this.target,this.targetDelta)):du(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const Q=this.getClosestProjectingParent();Q&&!!Q.resumingFrom==!!this.resumingFrom&&!Q.options.layoutScroll&&Q.target&&this.animationProgress!==1?(this.relativeParent=Q,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ms(),this.relativeTargetOrigin=ms(),Yv(this.relativeTargetOrigin,this.target,Q.target),du(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Fv&&Og.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||CS(this.parent.latestValues)||f8(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const n=this.getLead(),k=!!this.resumingFrom||this!==n;let N=!0;if((this.isProjectionDirty||!((w=this.parent)===null||w===void 0)&&w.isProjectionDirty)&&(N=!1),k&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(N=!1),this.resolvedRelativeTargetAt===vo.timestamp&&(N=!1),N)return;const{layout:B,layoutId:F}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(B||F))return;du(this.layoutCorrected,this.layout.layoutBox);const G=this.treeScale.x,Q=this.treeScale.y;oK(this.layoutCorrected,this.treeScale,this.path,k),n.layout&&!n.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(n.target=n.layout.layoutBox,n.targetWithTransforms=ms());const{target:te}=n;if(!te){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(JP(this.prevProjectionDelta.x,this.projectionDelta.x),JP(this.prevProjectionDelta.y,this.projectionDelta.y)),Xv(this.projectionDelta,this.layoutCorrected,te,this.latestValues),(this.treeScale.x!==G||this.treeScale.y!==Q||!sM(this.projectionDelta.x,this.prevProjectionDelta.x)||!sM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",te)),Fv&&Og.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(w=!0){var n;if((n=this.options.visualElement)===null||n===void 0||n.scheduleRender(),w){const k=this.getStack();k&&k.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ny(),this.projectionDelta=Ny(),this.projectionDeltaWithTransform=Ny()}setAnimationOrigin(w,n=!1){const k=this.snapshot,N=k?k.latestValues:{},B={...this.latestValues},F=Ny();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!n;const G=ms(),Q=k?k.source:void 0,te=this.layout?this.layout.source:void 0,Y=Q!==te,oe=this.getStack(),de=!oe||oe.members.length<=1,ge=!!(Y&&!de&&this.options.crossfade===!0&&!this.path.some(qK));this.animationProgress=0;let be;this.mixTargetDelta=pe=>{const we=pe/1e3;uM(F.x,w.x,we),uM(F.y,w.y,we),this.setTargetDelta(F),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yv(G,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HK(this.relativeTarget,this.relativeTargetOrigin,G,we),be&&MK(this.relativeTarget,be)&&(this.isProjectionDirty=!1),be||(be=ms()),du(be,this.relativeTarget)),Y&&(this.animationValues=B,SK(B,N,this.latestValues,we,ge,de)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=we},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(w){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Tm(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ci.update(()=>{U1.hasAnimatedSinceResize=!0,this.currentAnimation=yK(0,oM,{...w,onUpdate:n=>{this.mixTargetDelta(n),w.onUpdate&&w.onUpdate(n)},onComplete:()=>{w.onComplete&&w.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const w=this.getStack();w&&w.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(oM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const w=this.getLead();let{targetWithTransforms:n,target:k,layout:N,latestValues:B}=w;if(!(!n||!k||!N)){if(this!==w&&this.layout&&N&&T8(this.options.animationType,this.layout.layoutBox,N.layoutBox)){k=this.target||ms();const F=gl(this.layout.layoutBox.x);k.x.min=w.target.x.min,k.x.max=k.x.min+F;const G=gl(this.layout.layoutBox.y);k.y.min=w.target.y.min,k.y.max=k.y.min+G}du(n,k),jy(n,B),Xv(this.projectionDeltaWithTransform,this.layoutCorrected,n,B)}}registerSharedNode(w,n){this.sharedNodes.has(w)||this.sharedNodes.set(w,new AK),this.sharedNodes.get(w).add(n);const N=n.options.initialPromotionConfig;n.promote({transition:N?N.transition:void 0,preserveFollowOpacity:N&&N.shouldPreserveFollowOpacity?N.shouldPreserveFollowOpacity(n):void 0})}isLead(){const w=this.getStack();return w?w.lead===this:!0}getLead(){var w;const{layoutId:n}=this.options;return n?((w=this.getStack())===null||w===void 0?void 0:w.lead)||this:this}getPrevLead(){var w;const{layoutId:n}=this.options;return n?(w=this.getStack())===null||w===void 0?void 0:w.prevLead:void 0}getStack(){const{layoutId:w}=this.options;if(w)return this.root.sharedNodes.get(w)}promote({needsReset:w,transition:n,preserveFollowOpacity:k}={}){const N=this.getStack();N&&N.promote(this,k),w&&(this.projectionDelta=void 0,this.needsReset=!0),n&&this.setOptions({transition:n})}relegate(){const w=this.getStack();return w?w.relegate(this):!1}resetSkewAndRotation(){const{visualElement:w}=this.options;if(!w)return;let n=!1;const{latestValues:k}=w;if((k.z||k.rotate||k.rotateX||k.rotateY||k.rotateZ||k.skewX||k.skewY)&&(n=!0),!n)return;const N={};k.z&&a4("z",w,N,this.animationValues);for(let B=0;B<r4.length;B++)a4(`rotate${r4[B]}`,w,N,this.animationValues),a4(`skew${r4[B]}`,w,N,this.animationValues);w.render();for(const B in N)w.setStaticValue(B,N[B]),this.animationValues&&(this.animationValues[B]=N[B]);w.scheduleRender()}getProjectionStyles(w){var n,k;if(!this.instance||this.isSVG)return;if(!this.isVisible)return RK;const N={visibility:""},B=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,N.opacity="",N.pointerEvents=F1(w==null?void 0:w.pointerEvents)||"",N.transform=B?B(this.latestValues,""):"none",N;const F=this.getLead();if(!this.projectionDelta||!this.layout||!F.target){const Y={};return this.options.layoutId&&(Y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,Y.pointerEvents=F1(w==null?void 0:w.pointerEvents)||""),this.hasProjected&&!jg(this.latestValues)&&(Y.transform=B?B({},""):"none",this.hasProjected=!1),Y}const G=F.animationValues||F.latestValues;this.applyTransformsToTarget(),N.transform=kK(this.projectionDeltaWithTransform,this.treeScale,G),B&&(N.transform=B(G,N.transform));const{x:Q,y:te}=this.projectionDelta;N.transformOrigin=`${Q.origin*100}% ${te.origin*100}% 0`,F.animationValues?N.opacity=F===this?(k=(n=G.opacity)!==null&&n!==void 0?n:this.latestValues.opacity)!==null&&k!==void 0?k:1:this.preserveOpacity?this.latestValues.opacity:G.opacityExit:N.opacity=F===this?G.opacity!==void 0?G.opacity:"":G.opacityExit!==void 0?G.opacityExit:0;for(const Y in c_){if(G[Y]===void 0)continue;const{correct:oe,applyTo:de,isCSSVariable:ge}=c_[Y],be=N.transform==="none"?G[Y]:oe(G[Y],F);if(de){const pe=de.length;for(let we=0;we<pe;we++)N[de[we]]=be}else ge?this.options.visualElement.renderState.vars[Y]=be:N[Y]=be}return this.options.layoutId&&(N.pointerEvents=F===this?F1(w==null?void 0:w.pointerEvents)||"":"none"),N}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(w=>{var n;return(n=w.currentAnimation)===null||n===void 0?void 0:n.stop()}),this.root.nodes.forEach(lM),this.root.sharedNodes.clear()}}}function zK(e){e.updateLayout()}function LK(e){var t;const i=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&i&&e.hasListeners("didUpdate")){const{layoutBox:c,measuredBox:h}=e.layout,{animationType:_}=e.options,w=i.source!==e.layout.source;_==="size"?hu(F=>{const G=w?i.measuredBox[F]:i.layoutBox[F],Q=gl(G);G.min=c[F].min,G.max=G.min+Q}):T8(_,i.layoutBox,c)&&hu(F=>{const G=w?i.measuredBox[F]:i.layoutBox[F],Q=gl(c[F]);G.max=G.min+Q,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[F].max=e.relativeTarget[F].min+Q)});const n=Ny();Xv(n,c,i.layoutBox);const k=Ny();w?Xv(k,e.applyTransform(h,!0),i.measuredBox):Xv(k,c,i.layoutBox);const N=!_8(n);let B=!1;if(!e.resumeFrom){const F=e.getClosestProjectingParent();if(F&&!F.resumeFrom){const{snapshot:G,layout:Q}=F;if(G&&Q){const te=ms();Yv(te,i.layoutBox,G.layoutBox);const Y=ms();Yv(Y,c,Q.layoutBox),b8(te,Y)||(B=!0),F.options.layoutRoot&&(e.relativeTarget=Y,e.relativeTargetOrigin=te,e.relativeParent=F)}}}e.notifyListeners("didUpdate",{layout:c,snapshot:i,delta:k,layoutDelta:n,hasLayoutChanged:N,hasRelativeLayoutChanged:B})}else if(e.isLead()){const{onExitComplete:c}=e.options;c&&c()}e.options.transition=void 0}function $K(e){Fv&&Og.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function NK(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function BK(e){e.clearSnapshot()}function lM(e){e.clearMeasurements()}function jK(e){e.isLayoutDirty=!1}function OK(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function cM(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function FK(e){e.resolveTargetDelta()}function VK(e){e.calcProjection()}function UK(e){e.resetSkewAndRotation()}function GK(e){e.removeLeadSnapshot()}function uM(e,t,i){e.translate=Hi(t.translate,0,i),e.scale=Hi(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function dM(e,t,i,c){e.min=Hi(t.min,i.min,c),e.max=Hi(t.max,i.max,c)}function HK(e,t,i,c){dM(e.x,t.x,i.x,c),dM(e.y,t.y,i.y,c)}function qK(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const WK={duration:.45,ease:[.4,0,.1,1]},hM=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),fM=hM("applewebkit/")&&!hM("chrome/")?Math.round:Nl;function pM(e){e.min=fM(e.min),e.max=fM(e.max)}function KK(e){pM(e.x),pM(e.y)}function T8(e,t,i){return e==="position"||e==="preserve-aspect"&&!YW(iM(t),iM(i),.2)}function ZK(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const XK=S8({attachResizeListener:(e,t)=>h_(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),n4={current:void 0},E8=S8({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!n4.current){const e=new XK({});e.mount(window),e.setOptions({layoutScroll:!0}),n4.current=e}return n4.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),YK={pan:{Feature:fK},drag:{Feature:hK,ProjectionNode:E8,MeasureLayout:y8}};function mM(e,t,i){const{props:c}=e;e.animationState&&c.whileHover&&e.animationState.setActive("whileHover",i==="Start");const h="onHover"+i,_=c[h];_&&Ci.postRender(()=>_(t,z_(t)))}class JK extends Am{mount(){const{current:t}=this.node;t&&(this.unmount=JH(t,(i,c)=>(mM(this.node,c,"Start"),h=>mM(this.node,h,"End"))))}unmount(){}}class QK extends Am{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=I_(h_(this.node.current,"focus",()=>this.onFocus()),h_(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function gM(e,t,i){const{props:c}=e;e.animationState&&c.whileTap&&e.animationState.setActive("whileTap",i==="Start");const h="onTap"+(i==="End"?"":i),_=c[h];_&&Ci.postRender(()=>_(t,z_(t)))}class eZ extends Am{mount(){const{current:t}=this.node;t&&(this.unmount=rq(t,(i,c)=>(gM(this.node,c,"Start"),(h,{success:_})=>gM(this.node,h,_?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const PS=new WeakMap,i4=new WeakMap,tZ=e=>{const t=PS.get(e.target);t&&t(e)},rZ=e=>{e.forEach(tZ)};function aZ({root:e,...t}){const i=e||document;i4.has(i)||i4.set(i,{});const c=i4.get(i),h=JSON.stringify(t);return c[h]||(c[h]=new IntersectionObserver(rZ,{root:e,...t})),c[h]}function nZ(e,t,i){const c=aZ(t);return PS.set(e,i),c.observe(e),()=>{PS.delete(e),c.unobserve(e)}}const iZ={some:0,all:1};class sZ extends Am{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:i,margin:c,amount:h="some",once:_}=t,w={root:i?i.current:void 0,rootMargin:c,threshold:typeof h=="number"?h:iZ[h]},n=k=>{const{isIntersecting:N}=k;if(this.isInView===N||(this.isInView=N,_&&!N&&this.hasEnteredView))return;N&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",N);const{onViewportEnter:B,onViewportLeave:F}=this.node.getProps(),G=N?B:F;G&&G(k)};return nZ(this.node.current,w,n)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:i}=this.node;["amount","margin","root"].some(oZ(t,i))&&this.startObserver()}unmount(){}}function oZ({viewport:e={}},{viewport:t={}}={}){return i=>e[i]!==t[i]}const C8={inView:{Feature:sZ},tap:{Feature:eZ},focus:{Feature:QK},hover:{Feature:JK}},lZ={layout:{ProjectionNode:E8,MeasureLayout:y8}},MS={current:null},D8={current:!1};function cZ(){if(D8.current=!0,!!k5)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>MS.current=e.matches;e.addListener(t),t()}else MS.current=!1}const uZ=[...XI,Go,Em],dZ=e=>uZ.find(ZI(e)),yM=new WeakMap;function hZ(e,t,i){for(const c in t){const h=t[c],_=i[c];if(qo(h))e.addValue(c,h);else if(qo(_))e.addValue(c,u_(h,{owner:e}));else if(_!==h)if(e.hasValue(c)){const w=e.getValue(c);w.liveStyle===!0?w.jump(h):w.hasAnimated||w.set(h)}else{const w=e.getStaticValue(c);e.addValue(c,u_(w!==void 0?w:h,{owner:e}))}}for(const c in i)t[c]===void 0&&e.removeValue(c);return t}const xM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fZ{scrapeMotionValuesFromProps(t,i,c){return{}}constructor({parent:t,props:i,presenceContext:c,reducedMotionConfig:h,blockInitialAnimation:_,visualState:w},n={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const Q=vh.now();this.renderScheduledAt<Q&&(this.renderScheduledAt=Q,Ci.render(this.render,!1,!0))};const{latestValues:k,renderState:N,onUpdate:B}=w;this.onUpdate=B,this.latestValues=k,this.baseTarget={...k},this.initialValues=i.initial?{...k}:{},this.renderState=N,this.parent=t,this.props=i,this.presenceContext=c,this.depth=t?t.depth+1:0,this.reducedMotionConfig=h,this.options=n,this.blockInitialAnimation=!!_,this.isControllingVariants=Xw(i),this.isVariantNode=aI(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:F,...G}=this.scrapeMotionValuesFromProps(i,{},this);for(const Q in G){const te=G[Q];k[Q]!==void 0&&qo(te)&&te.set(k[Q],!1)}}mount(t){this.current=t,yM.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,c)=>this.bindToMotionValue(c,i)),D8.current||cZ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:MS.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){yM.delete(this.current),this.projection&&this.projection.unmount(),Tm(this.notifyUpdate),Tm(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const i=this.features[t];i&&(i.unmount(),i.isMounted=!1)}this.current=null}bindToMotionValue(t,i){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const c=u0.has(t),h=i.on("change",n=>{this.latestValues[t]=n,this.props.onUpdate&&Ci.preRender(this.notifyUpdate),c&&this.projection&&(this.projection.isTransformDirty=!0)}),_=i.on("renderRequest",this.scheduleRender);let w;window.MotionCheckAppearSync&&(w=window.MotionCheckAppearSync(this,t,i)),this.valueSubscriptions.set(t,()=>{h(),_(),w&&w(),i.owner&&i.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in tx){const i=tx[t];if(!i)continue;const{isEnabled:c,Feature:h}=i;if(!this.features[t]&&h&&c(this.props)&&(this.features[t]=new h(this)),this.features[t]){const _=this.features[t];_.isMounted?_.update():(_.mount(),_.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ms()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,i){this.latestValues[t]=i}update(t,i){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let c=0;c<xM.length;c++){const h=xM[c];this.propEventSubscriptions[h]&&(this.propEventSubscriptions[h](),delete this.propEventSubscriptions[h]);const _="on"+h,w=t[_];w&&(this.propEventSubscriptions[h]=this.on(h,w))}this.prevMotionValues=hZ(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(t),()=>i.variantChildren.delete(t)}addValue(t,i){const c=this.values.get(t);i!==c&&(c&&this.removeValue(t),this.bindToMotionValue(t,i),this.values.set(t,i),this.latestValues[t]=i.get())}removeValue(t){this.values.delete(t);const i=this.valueSubscriptions.get(t);i&&(i(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,i){if(this.props.values&&this.props.values[t])return this.props.values[t];let c=this.values.get(t);return c===void 0&&i!==void 0&&(c=u_(i===null?void 0:i,{owner:this}),this.addValue(t,c)),c}readValue(t,i){var c;let h=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(c=this.getBaseTargetFromProps(this.props,t))!==null&&c!==void 0?c:this.readValueFromInstance(this.current,t,this.options);return h!=null&&(typeof h=="string"&&(WI(h)||BI(h))?h=parseFloat(h):!dZ(h)&&Em.test(i)&&(h=GI(t,i)),this.setBaseTarget(t,qo(h)?h.get():h)),qo(h)?h.get():h}setBaseTarget(t,i){this.baseTarget[t]=i}getBaseTarget(t){var i;const{initial:c}=this.props;let h;if(typeof c=="string"||typeof c=="object"){const w=j5(this.props,c,(i=this.presenceContext)===null||i===void 0?void 0:i.custom);w&&(h=w[t])}if(c&&h!==void 0)return h;const _=this.getBaseTargetFromProps(this.props,t);return _!==void 0&&!qo(_)?_:this.initialValues[t]!==void 0&&h===void 0?void 0:this.baseTarget[t]}on(t,i){return this.events[t]||(this.events[t]=new eT),this.events[t].add(i)}notify(t,...i){this.events[t]&&this.events[t].notify(...i)}}class P8 extends fZ{constructor(){super(...arguments),this.KeyframeResolver=YI}sortInstanceNodePosition(t,i){return t.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(t,i){return t.style?t.style[i]:void 0}removeValueFromRenderState(t,{vars:i,style:c}){delete i[t],delete c[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;qo(t)&&(this.childSubscription=t.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function pZ(e){return window.getComputedStyle(e)}class mZ extends P8{constructor(){super(...arguments),this.type="html",this.renderInstance=dI}readValueFromInstance(t,i){if(u0.has(i)){const c=iT(i);return c&&c.default||0}else{const c=pZ(t),h=(O5(i)?c.getPropertyValue(i):c[i])||0;return typeof h=="string"?h.trim():h}}measureInstanceViewportBox(t,{transformPagePoint:i}){return m8(t,i)}build(t,i,c){U5(t,i,c.transformTemplate)}scrapeMotionValuesFromProps(t,i,c){return W5(t,i,c)}}class gZ extends P8{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ms}getBaseTargetFromProps(t,i){return t[i]}readValueFromInstance(t,i){if(u0.has(i)){const c=iT(i);return c&&c.default||0}return i=hI.has(i)?i:$5(i),t.getAttribute(i)}scrapeMotionValuesFromProps(t,i,c){return mI(t,i,c)}build(t,i,c){G5(t,i,this.isSVGTag,c.transformTemplate)}renderInstance(t,i,c,h){fI(t,i,c,h)}mount(t){this.isSVGTag=q5(t.tagName),super.mount(t)}}const M8=(e,t)=>B5(e)?new gZ(t):new mZ(t,{allowProjection:e!==V.Fragment}),yZ=yI({...o8,...C8,...YK,...lZ},M8),A8=rI(yZ),xZ={renderer:M8,...o8,...C8};var vZ=({children:e,navigate:t,disableAnimation:i,useHref:c,disableRipple:h=!1,skipFramerMotionAnimations:_=i,reducedMotion:w="never",validationBehavior:n,locale:k="en-US",labelPlacement:N,defaultDates:B,createCalendar:F,spinnerVariant:G,...Q})=>{let te=e;t&&(te=b.jsx(MU,{navigate:t,useHref:c,children:te}));const Y=V.useMemo(()=>(i&&_&&(Ww.skipAnimations=!0),{createCalendar:F,defaultDates:B,disableAnimation:i,disableRipple:h,validationBehavior:n,labelPlacement:N,spinnerVariant:G}),[F,B==null?void 0:B.maxDate,B==null?void 0:B.minDate,i,h,n,N,G]);return b.jsx(ZF,{value:Y,children:b.jsx(lV,{locale:k,children:b.jsx(tI,{reducedMotion:w,children:b.jsx(uR,{...Q,children:te})})})})};function e2(e){const t=Pi(),i=t==null?void 0:t.labelPlacement;return V.useMemo(()=>{var c,h;const _=(h=(c=e.labelPlacement)!=null?c:i)!=null?h:"inside";return _==="inside"&&!e.label?"outside":_},[e.labelPlacement,i,e.label])}function Bn(e){return V.forwardRef(e)}var Zo=(e,t,i=!0)=>{if(!t)return[e,{}];const c=t.reduce((h,_)=>_ in e?{...h,[_]:e[_]}:h,{});return i?[Object.keys(e).filter(_=>!t.includes(_)).reduce((_,w)=>({..._,[w]:e[w]}),{}),c]:[e,c]},_Z={default:"bg-default text-default-foreground",primary:"bg-primary text-primary-foreground",secondary:"bg-secondary text-secondary-foreground",success:"bg-success text-success-foreground",warning:"bg-warning text-warning-foreground",danger:"bg-danger text-danger-foreground",foreground:"bg-foreground text-background"},bZ={default:"shadow-lg shadow-default/50 bg-default text-default-foreground",primary:"shadow-lg shadow-primary/40 bg-primary text-primary-foreground",secondary:"shadow-lg shadow-secondary/40 bg-secondary text-secondary-foreground",success:"shadow-lg shadow-success/40 bg-success text-success-foreground",warning:"shadow-lg shadow-warning/40 bg-warning text-warning-foreground",danger:"shadow-lg shadow-danger/40 bg-danger text-danger-foreground"},wZ={default:"bg-transparent border-default text-foreground",primary:"bg-transparent border-primary text-primary",secondary:"bg-transparent border-secondary text-secondary",success:"bg-transparent border-success text-success",warning:"bg-transparent border-warning text-warning",danger:"bg-transparent border-danger text-danger"},SZ={default:"bg-default/40 text-default-700",primary:"bg-primary/20 text-primary-600",secondary:"bg-secondary/20 text-secondary-600",success:"bg-success/20 text-success-700 dark:text-success",warning:"bg-warning/20 text-warning-700 dark:text-warning",danger:"bg-danger/20 text-danger-600 dark:text-danger-500"},TZ={default:"border-default bg-default-100 text-default-foreground",primary:"border-default bg-default-100 text-primary",secondary:"border-default bg-default-100 text-secondary",success:"border-default bg-default-100 text-success",warning:"border-default bg-default-100 text-warning",danger:"border-default bg-default-100 text-danger"},EZ={default:"bg-transparent text-default-foreground",primary:"bg-transparent text-primary",secondary:"bg-transparent text-secondary",success:"bg-transparent text-success",warning:"bg-transparent text-warning",danger:"bg-transparent text-danger"},CZ={default:"border-default text-default-foreground",primary:"border-primary text-primary",secondary:"border-secondary text-secondary",success:"border-success text-success",warning:"border-warning text-warning",danger:"border-danger text-danger"},Yr={solid:_Z,shadow:bZ,bordered:wZ,flat:SZ,faded:TZ,light:EZ,ghost:CZ},C1=["small","medium","large"],AS={theme:{opacity:["disabled"],spacing:["divider"],borderWidth:C1,borderRadius:C1},classGroups:{shadow:[{shadow:C1}],"font-size":[{text:["tiny",...C1]}],"bg-image":["bg-stripe-gradient-default","bg-stripe-gradient-primary","bg-stripe-gradient-secondary","bg-stripe-gradient-success","bg-stripe-gradient-warning","bg-stripe-gradient-danger"]}},vM=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,zl=e=>!e||typeof e!="object"||Object.keys(e).length===0,DZ=(e,t)=>JSON.stringify(e)===JSON.stringify(t);function k8(e,t){e.forEach(function(i){Array.isArray(i)?k8(i,t):t.push(i)})}function R8(e){let t=[];return k8(e,t),t}var I8=(...e)=>R8(e).filter(Boolean),z8=(e,t)=>{let i={},c=Object.keys(e),h=Object.keys(t);for(let _ of c)if(h.includes(_)){let w=e[_],n=t[_];Array.isArray(w)||Array.isArray(n)?i[_]=I8(n,w):typeof w=="object"&&typeof n=="object"?i[_]=z8(w,n):i[_]=n+" "+w}else i[_]=e[_];for(let _ of h)c.includes(_)||(i[_]=t[_]);return i},_M=e=>!e||typeof e!="string"?e:e.replace(/\s+/g," ").trim();const cT="-",PZ=e=>{const t=AZ(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:c}=e;return{getClassGroupId:w=>{const n=w.split(cT);return n[0]===""&&n.length!==1&&n.shift(),L8(n,t)||MZ(w)},getConflictingClassGroupIds:(w,n)=>{const k=i[w]||[];return n&&c[w]?[...k,...c[w]]:k}}},L8=(e,t)=>{var w;if(e.length===0)return t.classGroupId;const i=e[0],c=t.nextPart.get(i),h=c?L8(e.slice(1),c):void 0;if(h)return h;if(t.validators.length===0)return;const _=e.join(cT);return(w=t.validators.find(({validator:n})=>n(_)))==null?void 0:w.classGroupId},bM=/^\[(.+)\]$/,MZ=e=>{if(bM.test(e)){const t=bM.exec(e)[1],i=t==null?void 0:t.substring(0,t.indexOf(":"));if(i)return"arbitrary.."+i}},AZ=e=>{const{theme:t,prefix:i}=e,c={nextPart:new Map,validators:[]};return RZ(Object.entries(e.classGroups),i).forEach(([_,w])=>{kS(w,c,_,t)}),c},kS=(e,t,i,c)=>{e.forEach(h=>{if(typeof h=="string"){const _=h===""?t:wM(t,h);_.classGroupId=i;return}if(typeof h=="function"){if(kZ(h)){kS(h(c),t,i,c);return}t.validators.push({validator:h,classGroupId:i});return}Object.entries(h).forEach(([_,w])=>{kS(w,wM(t,_),i,c)})})},wM=(e,t)=>{let i=e;return t.split(cT).forEach(c=>{i.nextPart.has(c)||i.nextPart.set(c,{nextPart:new Map,validators:[]}),i=i.nextPart.get(c)}),i},kZ=e=>e.isThemeGetter,RZ=(e,t)=>t?e.map(([i,c])=>{const h=c.map(_=>typeof _=="string"?t+_:typeof _=="object"?Object.fromEntries(Object.entries(_).map(([w,n])=>[t+w,n])):_);return[i,h]}):e,IZ=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,i=new Map,c=new Map;const h=(_,w)=>{i.set(_,w),t++,t>e&&(t=0,c=i,i=new Map)};return{get(_){let w=i.get(_);if(w!==void 0)return w;if((w=c.get(_))!==void 0)return h(_,w),w},set(_,w){i.has(_)?i.set(_,w):h(_,w)}}},$8="!",zZ=e=>{const{separator:t,experimentalParseClassName:i}=e,c=t.length===1,h=t[0],_=t.length,w=n=>{const k=[];let N=0,B=0,F;for(let oe=0;oe<n.length;oe++){let de=n[oe];if(N===0){if(de===h&&(c||n.slice(oe,oe+_)===t)){k.push(n.slice(B,oe)),B=oe+_;continue}if(de==="/"){F=oe;continue}}de==="["?N++:de==="]"&&N--}const G=k.length===0?n:n.substring(B),Q=G.startsWith($8),te=Q?G.substring(1):G,Y=F&&F>B?F-B:void 0;return{modifiers:k,hasImportantModifier:Q,baseClassName:te,maybePostfixModifierPosition:Y}};return i?n=>i({className:n,parseClassName:w}):w},LZ=e=>{if(e.length<=1)return e;const t=[];let i=[];return e.forEach(c=>{c[0]==="["?(t.push(...i.sort(),c),i=[]):i.push(c)}),t.push(...i.sort()),t},$Z=e=>({cache:IZ(e.cacheSize),parseClassName:zZ(e),...PZ(e)}),NZ=/\s+/,BZ=(e,t)=>{const{parseClassName:i,getClassGroupId:c,getConflictingClassGroupIds:h}=t,_=[],w=e.trim().split(NZ);let n="";for(let k=w.length-1;k>=0;k-=1){const N=w[k],{modifiers:B,hasImportantModifier:F,baseClassName:G,maybePostfixModifierPosition:Q}=i(N);let te=!!Q,Y=c(te?G.substring(0,Q):G);if(!Y){if(!te){n=N+(n.length>0?" "+n:n);continue}if(Y=c(G),!Y){n=N+(n.length>0?" "+n:n);continue}te=!1}const oe=LZ(B).join(":"),de=F?oe+$8:oe,ge=de+Y;if(_.includes(ge))continue;_.push(ge);const be=h(Y,te);for(let pe=0;pe<be.length;++pe){const we=be[pe];_.push(de+we)}n=N+(n.length>0?" "+n:n)}return n};function jZ(){let e=0,t,i,c="";for(;e<arguments.length;)(t=arguments[e++])&&(i=N8(t))&&(c&&(c+=" "),c+=i);return c}const N8=e=>{if(typeof e=="string")return e;let t,i="";for(let c=0;c<e.length;c++)e[c]&&(t=N8(e[c]))&&(i&&(i+=" "),i+=t);return i};function RS(e,...t){let i,c,h,_=w;function w(k){const N=t.reduce((B,F)=>F(B),e());return i=$Z(N),c=i.cache.get,h=i.cache.set,_=n,n(k)}function n(k){const N=c(k);if(N)return N;const B=BZ(k,i);return h(k,B),B}return function(){return _(jZ.apply(null,arguments))}}const Ei=e=>{const t=i=>i[e]||[];return t.isThemeGetter=!0,t},B8=/^\[(?:([a-z-]+):)?(.+)\]$/i,OZ=/^\d+\/\d+$/,FZ=new Set(["px","full","screen"]),VZ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,UZ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,GZ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,HZ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Tf=e=>qy(e)||FZ.has(e)||OZ.test(e),cm=e=>mx(e,"length",eX),qy=e=>!!e&&!Number.isNaN(Number(e)),s4=e=>mx(e,"number",qy),Ev=e=>!!e&&Number.isInteger(Number(e)),WZ=e=>e.endsWith("%")&&qy(e.slice(0,-1)),hn=e=>B8.test(e),um=e=>VZ.test(e),KZ=new Set(["length","size","percentage"]),ZZ=e=>mx(e,KZ,j8),XZ=e=>mx(e,"position",j8),YZ=new Set(["image","url"]),JZ=e=>mx(e,YZ,rX),QZ=e=>mx(e,"",tX),Cv=()=>!0,mx=(e,t,i)=>{const c=B8.exec(e);return c?c[1]?typeof t=="string"?c[1]===t:t.has(c[1]):i(c[2]):!1},eX=e=>UZ.test(e)&&!GZ.test(e),j8=()=>!1,tX=e=>HZ.test(e),rX=e=>qZ.test(e),IS=()=>{const e=Ei("colors"),t=Ei("spacing"),i=Ei("blur"),c=Ei("brightness"),h=Ei("borderColor"),_=Ei("borderRadius"),w=Ei("borderSpacing"),n=Ei("borderWidth"),k=Ei("contrast"),N=Ei("grayscale"),B=Ei("hueRotate"),F=Ei("invert"),G=Ei("gap"),Q=Ei("gradientColorStops"),te=Ei("gradientColorStopPositions"),Y=Ei("inset"),oe=Ei("margin"),de=Ei("opacity"),ge=Ei("padding"),be=Ei("saturate"),pe=Ei("scale"),we=Ei("sepia"),ke=Ei("skew"),Ae=Ei("space"),re=Ei("translate"),Te=()=>["auto","contain","none"],se=()=>["auto","hidden","clip","visible","scroll"],ue=()=>["auto",hn,t],De=()=>[hn,t],ce=()=>["",Tf,cm],je=()=>["auto",qy,hn],Le=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Re=()=>["solid","dashed","dotted","double","none"],Ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ze=()=>["start","end","center","between","around","evenly","stretch"],ot=()=>["","0",hn],Ee=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ke=()=>[qy,hn];return{cacheSize:500,separator:":",theme:{colors:[Cv],spacing:[Tf,cm],blur:["none","",um,hn],brightness:Ke(),borderColor:[e],borderRadius:["none","","full",um,hn],borderSpacing:De(),borderWidth:ce(),contrast:Ke(),grayscale:ot(),hueRotate:Ke(),invert:ot(),gap:De(),gradientColorStops:[e],gradientColorStopPositions:[WZ,cm],inset:ue(),margin:ue(),opacity:Ke(),padding:De(),saturate:Ke(),scale:Ke(),sepia:ot(),skew:Ke(),space:De(),translate:De()},classGroups:{aspect:[{aspect:["auto","square","video",hn]}],container:["container"],columns:[{columns:[um]}],"break-after":[{"break-after":Ee()}],"break-before":[{"break-before":Ee()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Le(),hn]}],overflow:[{overflow:se()}],"overflow-x":[{"overflow-x":se()}],"overflow-y":[{"overflow-y":se()}],overscroll:[{overscroll:Te()}],"overscroll-x":[{"overscroll-x":Te()}],"overscroll-y":[{"overscroll-y":Te()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[Y]}],"inset-x":[{"inset-x":[Y]}],"inset-y":[{"inset-y":[Y]}],start:[{start:[Y]}],end:[{end:[Y]}],top:[{top:[Y]}],right:[{right:[Y]}],bottom:[{bottom:[Y]}],left:[{left:[Y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ev,hn]}],basis:[{basis:ue()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",hn]}],grow:[{grow:ot()}],shrink:[{shrink:ot()}],order:[{order:["first","last","none",Ev,hn]}],"grid-cols":[{"grid-cols":[Cv]}],"col-start-end":[{col:["auto",{span:["full",Ev,hn]},hn]}],"col-start":[{"col-start":je()}],"col-end":[{"col-end":je()}],"grid-rows":[{"grid-rows":[Cv]}],"row-start-end":[{row:["auto",{span:[Ev,hn]},hn]}],"row-start":[{"row-start":je()}],"row-end":[{"row-end":je()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",hn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",hn]}],gap:[{gap:[G]}],"gap-x":[{"gap-x":[G]}],"gap-y":[{"gap-y":[G]}],"justify-content":[{justify:["normal",...ze()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ze(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ze(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[ge]}],px:[{px:[ge]}],py:[{py:[ge]}],ps:[{ps:[ge]}],pe:[{pe:[ge]}],pt:[{pt:[ge]}],pr:[{pr:[ge]}],pb:[{pb:[ge]}],pl:[{pl:[ge]}],m:[{m:[oe]}],mx:[{mx:[oe]}],my:[{my:[oe]}],ms:[{ms:[oe]}],me:[{me:[oe]}],mt:[{mt:[oe]}],mr:[{mr:[oe]}],mb:[{mb:[oe]}],ml:[{ml:[oe]}],"space-x":[{"space-x":[Ae]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Ae]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",hn,t]}],"min-w":[{"min-w":[hn,t,"min","max","fit"]}],"max-w":[{"max-w":[hn,t,"none","full","min","max","fit","prose",{screen:[um]},um]}],h:[{h:[hn,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[hn,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[hn,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[hn,t,"auto","min","max","fit"]}],"font-size":[{text:["base",um,cm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",s4]}],"font-family":[{font:[Cv]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",hn]}],"line-clamp":[{"line-clamp":["none",qy,s4]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Tf,hn]}],"list-image":[{"list-image":["none",hn]}],"list-style-type":[{list:["none","disc","decimal",hn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[de]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[de]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Re(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Tf,cm]}],"underline-offset":[{"underline-offset":["auto",Tf,hn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:De()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",hn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",hn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[de]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Le(),XZ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ZZ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},JZ]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[te]}],"gradient-via-pos":[{via:[te]}],"gradient-to-pos":[{to:[te]}],"gradient-from":[{from:[Q]}],"gradient-via":[{via:[Q]}],"gradient-to":[{to:[Q]}],rounded:[{rounded:[_]}],"rounded-s":[{"rounded-s":[_]}],"rounded-e":[{"rounded-e":[_]}],"rounded-t":[{"rounded-t":[_]}],"rounded-r":[{"rounded-r":[_]}],"rounded-b":[{"rounded-b":[_]}],"rounded-l":[{"rounded-l":[_]}],"rounded-ss":[{"rounded-ss":[_]}],"rounded-se":[{"rounded-se":[_]}],"rounded-ee":[{"rounded-ee":[_]}],"rounded-es":[{"rounded-es":[_]}],"rounded-tl":[{"rounded-tl":[_]}],"rounded-tr":[{"rounded-tr":[_]}],"rounded-br":[{"rounded-br":[_]}],"rounded-bl":[{"rounded-bl":[_]}],"border-w":[{border:[n]}],"border-w-x":[{"border-x":[n]}],"border-w-y":[{"border-y":[n]}],"border-w-s":[{"border-s":[n]}],"border-w-e":[{"border-e":[n]}],"border-w-t":[{"border-t":[n]}],"border-w-r":[{"border-r":[n]}],"border-w-b":[{"border-b":[n]}],"border-w-l":[{"border-l":[n]}],"border-opacity":[{"border-opacity":[de]}],"border-style":[{border:[...Re(),"hidden"]}],"divide-x":[{"divide-x":[n]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[n]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[de]}],"divide-style":[{divide:Re()}],"border-color":[{border:[h]}],"border-color-x":[{"border-x":[h]}],"border-color-y":[{"border-y":[h]}],"border-color-s":[{"border-s":[h]}],"border-color-e":[{"border-e":[h]}],"border-color-t":[{"border-t":[h]}],"border-color-r":[{"border-r":[h]}],"border-color-b":[{"border-b":[h]}],"border-color-l":[{"border-l":[h]}],"divide-color":[{divide:[h]}],"outline-style":[{outline:["",...Re()]}],"outline-offset":[{"outline-offset":[Tf,hn]}],"outline-w":[{outline:[Tf,cm]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[de]}],"ring-offset-w":[{"ring-offset":[Tf,cm]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",um,QZ]}],"shadow-color":[{shadow:[Cv]}],opacity:[{opacity:[de]}],"mix-blend":[{"mix-blend":[...Ge(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ge()}],filter:[{filter:["","none"]}],blur:[{blur:[i]}],brightness:[{brightness:[c]}],contrast:[{contrast:[k]}],"drop-shadow":[{"drop-shadow":["","none",um,hn]}],grayscale:[{grayscale:[N]}],"hue-rotate":[{"hue-rotate":[B]}],invert:[{invert:[F]}],saturate:[{saturate:[be]}],sepia:[{sepia:[we]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[i]}],"backdrop-brightness":[{"backdrop-brightness":[c]}],"backdrop-contrast":[{"backdrop-contrast":[k]}],"backdrop-grayscale":[{"backdrop-grayscale":[N]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[B]}],"backdrop-invert":[{"backdrop-invert":[F]}],"backdrop-opacity":[{"backdrop-opacity":[de]}],"backdrop-saturate":[{"backdrop-saturate":[be]}],"backdrop-sepia":[{"backdrop-sepia":[we]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[w]}],"border-spacing-x":[{"border-spacing-x":[w]}],"border-spacing-y":[{"border-spacing-y":[w]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",hn]}],duration:[{duration:Ke()}],ease:[{ease:["linear","in","out","in-out",hn]}],delay:[{delay:Ke()}],animate:[{animate:["none","spin","ping","pulse","bounce",hn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[pe]}],"scale-x":[{"scale-x":[pe]}],"scale-y":[{"scale-y":[pe]}],rotate:[{rotate:[Ev,hn]}],"translate-x":[{"translate-x":[re]}],"translate-y":[{"translate-y":[re]}],"skew-x":[{"skew-x":[ke]}],"skew-y":[{"skew-y":[ke]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",hn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",hn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":De()}],"scroll-mx":[{"scroll-mx":De()}],"scroll-my":[{"scroll-my":De()}],"scroll-ms":[{"scroll-ms":De()}],"scroll-me":[{"scroll-me":De()}],"scroll-mt":[{"scroll-mt":De()}],"scroll-mr":[{"scroll-mr":De()}],"scroll-mb":[{"scroll-mb":De()}],"scroll-ml":[{"scroll-ml":De()}],"scroll-p":[{"scroll-p":De()}],"scroll-px":[{"scroll-px":De()}],"scroll-py":[{"scroll-py":De()}],"scroll-ps":[{"scroll-ps":De()}],"scroll-pe":[{"scroll-pe":De()}],"scroll-pt":[{"scroll-pt":De()}],"scroll-pr":[{"scroll-pr":De()}],"scroll-pb":[{"scroll-pb":De()}],"scroll-pl":[{"scroll-pl":De()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",hn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Tf,cm,s4]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},aX=(e,{cacheSize:t,prefix:i,separator:c,experimentalParseClassName:h,extend:_={},override:w={}})=>{Vv(e,"cacheSize",t),Vv(e,"prefix",i),Vv(e,"separator",c),Vv(e,"experimentalParseClassName",h);for(const n in w)nX(e[n],w[n]);for(const n in _)iX(e[n],_[n]);return e},Vv=(e,t,i)=>{i!==void 0&&(e[t]=i)},nX=(e,t)=>{if(t)for(const i in t)Vv(e,i,t[i])},iX=(e,t)=>{if(t)for(const i in t){const c=t[i];c!==void 0&&(e[i]=(e[i]||[]).concat(c))}},O8=(e,...t)=>typeof e=="function"?RS(IS,e,...t):RS(()=>aX(IS(),e),...t),sX=RS(IS);var oX={twMerge:!0,twMergeConfig:{},responsiveVariants:!1},F8=e=>e||void 0,f_=(...e)=>F8(R8(e).filter(Boolean).join(" ")),o4=null,Df={},zS=!1,Dv=(...e)=>t=>t.twMerge?((!o4||zS)&&(zS=!1,o4=zl(Df)?sX:O8({...Df,extend:{theme:Df.theme,classGroups:Df.classGroups,conflictingClassGroupModifiers:Df.conflictingClassGroupModifiers,conflictingClassGroups:Df.conflictingClassGroups,...Df.extend}})),F8(o4(f_(e)))):f_(e),SM=(e,t)=>{for(let i in t)e.hasOwnProperty(i)?e[i]=f_(e[i],t[i]):e[i]=t[i];return e},lX=(e,t)=>{let{extend:i=null,slots:c={},variants:h={},compoundVariants:_=[],compoundSlots:w=[],defaultVariants:n={}}=e,k={...oX,...t},N=i!=null&&i.base?f_(i.base,e==null?void 0:e.base):e==null?void 0:e.base,B=i!=null&&i.variants&&!zl(i.variants)?z8(h,i.variants):h,F=i!=null&&i.defaultVariants&&!zl(i.defaultVariants)?{...i.defaultVariants,...n}:n;!zl(k.twMergeConfig)&&!DZ(k.twMergeConfig,Df)&&(zS=!0,Df=k.twMergeConfig);let G=zl(i==null?void 0:i.slots),Q=zl(c)?{}:{base:f_(e==null?void 0:e.base,G&&(i==null?void 0:i.base)),...c},te=G?Q:SM({...i==null?void 0:i.slots},zl(Q)?{base:e==null?void 0:e.base}:Q),Y=zl(i==null?void 0:i.compoundVariants)?_:I8(i==null?void 0:i.compoundVariants,_),oe=ge=>{if(zl(B)&&zl(c)&&G)return Dv(N,ge==null?void 0:ge.class,ge==null?void 0:ge.className)(k);if(Y&&!Array.isArray(Y))throw new TypeError(`The "compoundVariants" prop must be an array. Received: ${typeof Y}`);if(w&&!Array.isArray(w))throw new TypeError(`The "compoundSlots" prop must be an array. Received: ${typeof w}`);let be=(De,ce,je=[],Le)=>{let Re=je;if(typeof ce=="string")Re=Re.concat(_M(ce).split(" ").map(Ge=>`${De}:${Ge}`));else if(Array.isArray(ce))Re=Re.concat(ce.reduce((Ge,ze)=>Ge.concat(`${De}:${ze}`),[]));else if(typeof ce=="object"&&typeof Le=="string"){for(let Ge in ce)if(ce.hasOwnProperty(Ge)&&Ge===Le){let ze=ce[Ge];if(ze&&typeof ze=="string"){let ot=_M(ze);Re[Le]?Re[Le]=Re[Le].concat(ot.split(" ").map(Ee=>`${De}:${Ee}`)):Re[Le]=ot.split(" ").map(Ee=>`${De}:${Ee}`)}else Array.isArray(ze)&&ze.length>0&&(Re[Le]=ze.reduce((ot,Ee)=>ot.concat(`${De}:${Ee}`),[]))}}return Re},pe=(De,ce=B,je=null,Le=null)=>{var Re;let Ge=ce[De];if(!Ge||zl(Ge))return null;let ze=(Re=Le==null?void 0:Le[De])!=null?Re:ge==null?void 0:ge[De];if(ze===null)return null;let ot=vM(ze),Ee=Array.isArray(k.responsiveVariants)&&k.responsiveVariants.length>0||k.responsiveVariants===!0,Ke=F==null?void 0:F[De],nt=[];if(typeof ot=="object"&&Ee)for(let[Pt,Ct]of Object.entries(ot)){let Zt=Ge[Ct];if(Pt==="initial"){Ke=Ct;continue}Array.isArray(k.responsiveVariants)&&!k.responsiveVariants.includes(Pt)||(nt=be(Pt,Zt,nt,je))}let Xe=ot!=null&&typeof ot!="object"?ot:vM(Ke),ut=Ge[Xe||"false"];return typeof nt=="object"&&typeof je=="string"&&nt[je]?SM(nt,ut):nt.length>0?(nt.push(ut),je==="base"?nt.join(" "):nt):ut},we=()=>B?Object.keys(B).map(De=>pe(De,B)):null,ke=(De,ce)=>{if(!B||typeof B!="object")return null;let je=new Array;for(let Le in B){let Re=pe(Le,B,De,ce),Ge=De==="base"&&typeof Re=="string"?Re:Re&&Re[De];Ge&&(je[je.length]=Ge)}return je},Ae={};for(let De in ge)ge[De]!==void 0&&(Ae[De]=ge[De]);let re=(De,ce)=>{var je;let Le=typeof(ge==null?void 0:ge[De])=="object"?{[De]:(je=ge[De])==null?void 0:je.initial}:{};return{...F,...Ae,...Le,...ce}},Te=(De=[],ce)=>{let je=[];for(let{class:Le,className:Re,...Ge}of De){let ze=!0;for(let[ot,Ee]of Object.entries(Ge)){let Ke=re(ot,ce)[ot];if(Array.isArray(Ee)){if(!Ee.includes(Ke)){ze=!1;break}}else{let nt=Xe=>Xe==null||Xe===!1;if(nt(Ee)&&nt(Ke))continue;if(Ke!==Ee){ze=!1;break}}}ze&&(Le&&je.push(Le),Re&&je.push(Re))}return je},se=De=>{let ce=Te(Y,De);if(!Array.isArray(ce))return ce;let je={};for(let Le of ce)if(typeof Le=="string"&&(je.base=Dv(je.base,Le)(k)),typeof Le=="object")for(let[Re,Ge]of Object.entries(Le))je[Re]=Dv(je[Re],Ge)(k);return je},ue=De=>{if(w.length<1)return null;let ce={};for(let{slots:je=[],class:Le,className:Re,...Ge}of w){if(!zl(Ge)){let ze=!0;for(let ot of Object.keys(Ge)){let Ee=re(ot,De)[ot];if(Ee===void 0||(Array.isArray(Ge[ot])?!Ge[ot].includes(Ee):Ge[ot]!==Ee)){ze=!1;break}}if(!ze)continue}for(let ze of je)ce[ze]=ce[ze]||[],ce[ze].push([Le,Re])}return ce};if(!zl(c)||!G){let De={};if(typeof te=="object"&&!zl(te))for(let ce of Object.keys(te))De[ce]=je=>{var Le,Re;return Dv(te[ce],ke(ce,je),((Le=se(je))!=null?Le:[])[ce],((Re=ue(je))!=null?Re:[])[ce],je==null?void 0:je.class,je==null?void 0:je.className)(k)};return De}return Dv(N,we(),Te(Y),ge==null?void 0:ge.class,ge==null?void 0:ge.className)(k)},de=()=>{if(!(!B||typeof B!="object"))return Object.keys(B)};return oe.variantKeys=de(),oe.extend=i,oe.base=N,oe.slots=te,oe.variants=B,oe.defaultVariants=F,oe.compoundSlots=w,oe.compoundVariants=Y,oe},Hn=(e,t)=>{var i,c,h;return lX(e,{...t,twMerge:(i=t==null?void 0:t.twMerge)!=null?i:!0,twMergeConfig:{...t==null?void 0:t.twMergeConfig,theme:{...(c=t==null?void 0:t.twMergeConfig)==null?void 0:c.theme,...AS.theme},classGroups:{...(h=t==null?void 0:t.twMergeConfig)==null?void 0:h.classGroups,...AS.classGroups}}})},TM=Hn({slots:{base:"relative inline-flex flex-col gap-2 items-center justify-center",wrapper:"relative flex",label:"text-foreground dark:text-foreground-dark font-regular",circle1:"absolute w-full h-full rounded-full",circle2:"absolute w-full h-full rounded-full",dots:"relative rounded-full mx-auto",spinnerBars:["absolute","animate-fade-out","rounded-full","w-[25%]","h-[8%]","left-[calc(37.5%)]","top-[calc(46%)]","spinner-bar-animation"]},variants:{size:{sm:{wrapper:"w-5 h-5",circle1:"border-2",circle2:"border-2",dots:"size-1",label:"text-small"},md:{wrapper:"w-8 h-8",circle1:"border-3",circle2:"border-3",dots:"size-1.5",label:"text-medium"},lg:{wrapper:"w-10 h-10",circle1:"border-3",circle2:"border-3",dots:"size-2",label:"text-large"}},color:{current:{circle1:"border-b-current",circle2:"border-b-current",dots:"bg-current",spinnerBars:"bg-current"},white:{circle1:"border-b-white",circle2:"border-b-white",dots:"bg-white",spinnerBars:"bg-white"},default:{circle1:"border-b-default",circle2:"border-b-default",dots:"bg-default",spinnerBars:"bg-default"},primary:{circle1:"border-b-primary",circle2:"border-b-primary",dots:"bg-primary",spinnerBars:"bg-primary"},secondary:{circle1:"border-b-secondary",circle2:"border-b-secondary",dots:"bg-secondary",spinnerBars:"bg-secondary"},success:{circle1:"border-b-success",circle2:"border-b-success",dots:"bg-success",spinnerBars:"bg-success"},warning:{circle1:"border-b-warning",circle2:"border-b-warning",dots:"bg-warning",spinnerBars:"bg-warning"},danger:{circle1:"border-b-danger",circle2:"border-b-danger",dots:"bg-danger",spinnerBars:"bg-danger"}},labelColor:{foreground:{label:"text-foreground"},primary:{label:"text-primary"},secondary:{label:"text-secondary"},success:{label:"text-success"},warning:{label:"text-warning"},danger:{label:"text-danger"}},variant:{default:{circle1:["animate-spinner-ease-spin","border-solid","border-t-transparent","border-l-transparent","border-r-transparent"],circle2:["opacity-75","animate-spinner-linear-spin","border-dotted","border-t-transparent","border-l-transparent","border-r-transparent"]},gradient:{circle1:["border-0","bg-gradient-to-b","from-transparent","via-transparent","to-primary","animate-spinner-linear-spin","[animation-duration:1s]","[-webkit-mask:radial-gradient(closest-side,rgba(0,0,0,0.0)calc(100%-3px),rgba(0,0,0,1)calc(100%-3px))]"],circle2:["hidden"]},wave:{wrapper:"translate-y-3/4",dots:["animate-sway","spinner-dot-animation"]},dots:{wrapper:"translate-y-2/4",dots:["animate-blink","spinner-dot-blink-animation"]},spinner:{},simple:{wrapper:"text-foreground h-5 w-5 animate-spin",circle1:"opacity-25",circle2:"opacity-75"}}},defaultVariants:{size:"md",color:"primary",labelColor:"foreground",variant:"default"},compoundVariants:[{variant:"gradient",color:"current",class:{circle1:"to-current"}},{variant:"gradient",color:"white",class:{circle1:"to-white"}},{variant:"gradient",color:"default",class:{circle1:"to-default"}},{variant:"gradient",color:"primary",class:{circle1:"to-primary"}},{variant:"gradient",color:"secondary",class:{circle1:"to-secondary"}},{variant:"gradient",color:"success",class:{circle1:"to-success"}},{variant:"gradient",color:"warning",class:{circle1:"to-warning"}},{variant:"gradient",color:"danger",class:{circle1:"to-danger"}},{variant:"wave",size:"sm",class:{wrapper:"w-5 h-5"}},{variant:"wave",size:"md",class:{wrapper:"w-8 h-8"}},{variant:"wave",size:"lg",class:{wrapper:"w-12 h-12"}},{variant:"dots",size:"sm",class:{wrapper:"w-5 h-5"}},{variant:"dots",size:"md",class:{wrapper:"w-8 h-8"}},{variant:"dots",size:"lg",class:{wrapper:"w-12 h-12"}},{variant:"simple",size:"sm",class:{wrapper:"w-5 h-5"}},{variant:"simple",size:"md",class:{wrapper:"w-8 h-8"}},{variant:"simple",size:"lg",class:{wrapper:"w-12 h-12"}},{variant:"simple",color:"current",class:{wrapper:"text-current"}},{variant:"simple",color:"white",class:{wrapper:"text-white"}},{variant:"simple",color:"default",class:{wrapper:"text-default"}},{variant:"simple",color:"primary",class:{wrapper:"text-primary"}},{variant:"simple",color:"secondary",class:{wrapper:"text-secondary"}},{variant:"simple",color:"success",class:{wrapper:"text-success"}},{variant:"simple",color:"warning",class:{wrapper:"text-warning"}},{variant:"simple",color:"danger",class:{wrapper:"text-danger"}}]}),bh=["outline-none","data-[focus-visible=true]:z-10","data-[focus-visible=true]:outline-2","data-[focus-visible=true]:outline-focus","data-[focus-visible=true]:outline-offset-2"],t2=["outline-none","group-data-[focus-visible=true]:z-10","group-data-[focus-visible=true]:ring-2","group-data-[focus-visible=true]:ring-focus","group-data-[focus-visible=true]:ring-offset-2","group-data-[focus-visible=true]:ring-offset-background"],_y={default:["[&+.border-medium.border-default]:ms-[calc(theme(borderWidth.medium)*-1)]"],primary:["[&+.border-medium.border-primary]:ms-[calc(theme(borderWidth.medium)*-1)]"],secondary:["[&+.border-medium.border-secondary]:ms-[calc(theme(borderWidth.medium)*-1)]"],success:["[&+.border-medium.border-success]:ms-[calc(theme(borderWidth.medium)*-1)]"],warning:["[&+.border-medium.border-warning]:ms-[calc(theme(borderWidth.medium)*-1)]"],danger:["[&+.border-medium.border-danger]:ms-[calc(theme(borderWidth.medium)*-1)]"]},V8=["font-inherit","text-[100%]","leading-[1.15]","m-0","p-0","overflow-visible","box-border","absolute","top-0","w-full","h-full","opacity-[0.0001]","z-[1]","cursor-pointer","disabled:cursor-default"],cX=Hn({slots:{base:"relative z-[100]"},variants:{disableAnimation:{false:{base:""},true:{base:["data-[placement=bottom-right]:bottom-0 data-[placement=bottom-right]:right-0 w-full px-2 sm:w-auto sm:px-0 data-[placement=bottom-right]:fixed data-[placement=bottom-right]:flex data-[placement=bottom-right]:flex-col","data-[placement=bottom-left]:bottom-0 data-[placement=bottom-left]:left-0 w-full px-2 sm:w-auto sm:px-0 data-[placement=bottom-left]:fixed data-[placement=bottom-left]:flex data-[placement=bottom-left]:flex-col","data-[placement=bottom-center]:bottom-0 data-[placement=bottom-center]:fixed w-full px-2 sm:w-auto sm:px-0 data-[placement=bottom-center]:flex data-[placement=bottom-center]:flex-col data-[placement=bottom-center]:left-1/2 data-[placement=bottom-center]:-translate-x-1/2","data-[placement=top-right]:top-0 data-[placement=top-right]:right-0 w-full px-2 sm:w-auto sm:px-0 data-[placement=top-right]:fixed data-[placement=top-right]:flex data-[placement=top-right]:flex-col","data-[placement=top-left]:top-0 data-[placement=top-left]:left-0 w-full px-2 sm:w-auto sm:px-0 data-[placement=top-left]:fixed data-[placement=top-left]:flex data-[placement=top-left]:flex-col","data-[placement=top-center]:top-0 data-[placement=top-center]:fixed w-full px-2 sm:w-auto sm:px-0 data-[placement=top-center]:flex data-[placement=top-center]:flex-col data-[placement=top-center]:left-1/2 data-[placement=top-center]:-translate-x-1/2"]}}},defaultVariants:{disableAnimation:!1}}),EM=Hn({slots:{base:["flex gap-x-4 items-center","group","cursor-pointer","relative","z-50","box-border","outline-none","p-3 sm:mx-1","my-1","w-full sm:w-[356px]","min-h-4"],wrapper:["flex flex-col gap-y-0"],title:["text-sm","me-4","font-medium","text-foreground"],description:["text-sm","me-4","text-default-500"],icon:["w-6 h-6 flex-none fill-current"],loadingIcon:["w-6 h-6 flex-none fill-current"],content:["flex flex-grow flex-row gap-x-4 items-center relative"],progressTrack:["absolute inset-0 pointer-events-none bg-transparent overflow-hidden"],progressIndicator:["h-full bg-default-400 opacity-20"],motionDiv:["fixed","px-4 sm:px-0","data-[placement=bottom-right]:bottom-0 data-[placement=bottom-right]:right-0 data-[placement=bottom-right]:mx-auto w-full sm:data-[placement=bottom-right]:w-max mb-1 sm:data-[placement=bottom-right]:mr-2","data-[placement=bottom-left]:bottom-0 data-[placement=bottom-left]:left-0 data-[placement=bottom-left]:mx-auto w-full sm:data-[placement=bottom-left]:w-max mb-1 sm:data-[placement=bottom-left]:ml-2","data-[placement=bottom-center]:bottom-0 data-[placement=bottom-center]:left-0 data-[placement=bottom-center]:right-0 w-full sm:data-[placement=bottom-center]:w-max sm:data-[placement=bottom-center]:mx-auto","data-[placement=top-right]:top-0 data-[placement=top-right]:right-0 data-[placement=top-right]:mx-auto w-full sm:data-[placement=top-right]:w-max sm:data-[placement=top-right]:mr-2","data-[placement=top-left]:top-0 data-[placement=top-left]:left-0 data-[placement=top-left]:mx-auto w-full sm:data-[placement=top-left]:w-max sm:data-[placement=top-left]:ml-2","data-[placement=top-center]:top-0 data-[placement=top-center]:left-0 data-[placement=top-center]:right-0 w-full sm:data-[placement=top-center]:w-max sm:data-[placement=top-center]:mx-auto"],closeButton:["opacity-0 pointer-events-none group-hover:pointer-events-auto p-0 group-hover:opacity-100 w-6 h-6 min-w-4 absolute -right-2 -top-2 items-center justify-center bg-transparent text-default-400 hover:text-default-600 border border-3 border-transparent","data-[hidden=true]:hidden"],closeIcon:["rounded-full w-full h-full p-0.5 border border-default-400 bg-default-100"]},variants:{size:{sm:{icon:"w-5 h-5",loadingIcon:"w-5 h-5"},md:{},lg:{}},variant:{flat:"bg-content1 border border-default-100",solid:Yr.solid.default,bordered:"bg-background border border-default-200"},color:{default:"",foreground:{progressIndicator:"h-full opacity-20 bg-foreground-400"},primary:{progressIndicator:"h-full opacity-20 bg-primary-400"},secondary:{progressIndicator:"h-full opacity-20 bg-secondary-400"},success:{progressIndicator:"h-full opacity-20 bg-success-400"},warning:{progressIndicator:"h-full opacity-20 bg-warning-400"},danger:{progressIndicator:"h-full opacity-20 bg-danger-400"}},radius:{none:{base:"rounded-none",progressTrack:"rounded-none"},sm:{base:"rounded-small",progressTrack:"rounded-small"},md:{base:"rounded-medium",progressTrack:"rounded-medium"},lg:{base:"rounded-large",progressTrack:"rounded-large"},full:{base:"rounded-full",closeButton:"-top-px -right-px",progressTrack:"rounded-full"}},disableAnimation:{true:{closeButton:"transition-none",base:"data-[animation=exiting]:opacity-0"},false:{closeButton:"transition-opacity ease-in duration-300",base:["data-[animation=exiting]:transform","data-[animation=exiting]:delay-100","data-[animation=exiting]:data-[placement=bottom-right]:translate-x-28","data-[animation=exiting]:data-[placement=bottom-left]:-translate-x-28","data-[animation=exiting]:data-[placement=bottom-center]:translate-y-28","data-[animation=exiting]:data-[placement=top-right]:translate-x-28","data-[animation=exiting]:data-[placement=top-left]:-translate-x-28","data-[animation=exiting]:data-[placement=top-center]:-translate-y-28","data-[animation=exiting]:opacity-0","data-[animation=exiting]:duration-200"]}},shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}}},defaultVariants:{size:"md",variant:"flat",radius:"md",shadow:"sm"},compoundVariants:[{variant:"flat",color:"foreground",class:{base:"bg-foreground text-background",closeButton:"text-foreground-400 hover:text-foreground-600",closeIcon:"border border-foreground-400 bg-foreground-100",title:"text-background-600",description:"text-background-500"}},{variant:"flat",color:"primary",class:{base:"bg-primary-50 text-primary-600 border-primary-100",closeButton:"text-primary-400 hover:text-primary-600",closeIcon:"border border-primary-400 bg-primary-100",title:"text-primary-600",description:"text-primary-500"}},{variant:"flat",color:"secondary",class:{base:"bg-secondary-50 text-secondary-600 border-secondary-100",closeButton:"text-secondary-400 hover:text-secondary-600",closeIcon:"border border-secondary-400 bg-secondary-100",title:"text-secondary-600",description:"text-secondary-500"}},{variant:"flat",color:"success",class:{base:"bg-success-50 text-success-600 border-success-100",closeButton:"text-success-400 hover:text-success-600",closeIcon:"border border-success-400 bg-success-100",title:"text-success-600",description:"text-success-500"}},{variant:"flat",color:"warning",class:{base:"bg-warning-50 text-warning-600 border-warning-100",closeButton:"text-warning-400 hover:text-warning-600",closeIcon:"border border-warning-400 bg-warning-100",title:"text-warning-600",description:"text-warning-500"}},{variant:"flat",color:"danger",class:{base:"bg-danger-50 text-danger-600 border-danger-100",closeButton:"text-danger-400 hover:text-danger-600",closeIcon:"border border-danger-400 bg-danger-100",title:"text-danger-600",description:"text-danger-500"}},{variant:"bordered",color:"foreground",class:{base:"bg-foreground border-foreground-400 text-background",closeButton:"text-foreground-400 hover:text-foreground-600",closeIcon:"border border-foreground-400 bg-foreground-100",title:"text-background-600",description:"text-background-500"}},{variant:"bordered",color:"primary",class:{base:"border-primary-400 text-primary-600",closeButton:"text-primary-400 hover:text-primary-600",closeIcon:"border border-primary-400 bg-primary-100",title:"text-primary-600",description:"text-primary-500"}},{variant:"bordered",color:"secondary",class:{base:"border-secondary-400 text-secondary-600",closeButton:"text-secondary-400 hover:text-secondary-600",closeIcon:"border border-secondary-400 bg-secondary-100",title:"text-secondary-600",description:"text-secondary-500"}},{variant:"bordered",color:"success",class:{base:"border-success-400 text-success-600",closeButton:"text-success-400 hover:text-success-600",closeIcon:"border border-success-400 bg-success-100",title:"text-success-600",description:"text-success-500"}},{variant:"bordered",color:"warning",class:{base:"border-warning-400 text-warning-600",closeButton:"text-warning-400 hover:text-warning-600",closeIcon:"border border-warning-400 bg-warning-100",title:"text-warning-600",description:"text-warning-500"}},{variant:"bordered",color:"danger",class:{base:"border-danger-400 text-danger-600",closeButton:"text-danger-400 hover:text-danger-600",closeIcon:"border border-danger-400 bg-danger-100",title:"text-danger-600",description:"text-danger-500"}},{variant:"solid",color:"foreground",class:{base:Yr.solid.foreground,closeButton:"text-foreground-400 hover:text-foreground-600",closeIcon:"border border-foreground-400 bg-foreground-100",title:"text-background",description:"text-background"}},{variant:"solid",color:"primary",class:{base:Yr.solid.primary,closeButton:"text-primary-400 hover:text-primary-600",closeIcon:"border border-primary-400 bg-primary-100",title:"text-primary-foreground",description:"text-primary-foreground"}},{variant:"solid",color:"secondary",class:{base:Yr.solid.secondary,closeButton:"text-secondary-400 hover:text-secondary-600",closeIcon:"border border-secondary-400 bg-secondary-100",title:"text-secondary-foreground",description:"text-secondary-foreground"}},{variant:"solid",color:"success",class:{base:Yr.solid.success,closeButton:"text-success-400 hover:text-success-600",closeIcon:"border border-success-400 bg-success-100",title:"text-success-foreground",description:"text-success-foreground"}},{variant:"solid",color:"warning",class:{base:Yr.solid.warning,closeButton:"text-warning-400 hover:text-warning-600",closeIcon:"border border-warning-400 bg-warning-100",title:"text-warning-foreground",description:"text-warning-foreground"}},{variant:"solid",color:"danger",class:{base:Yr.solid.danger,closeButton:"text-danger-400 hover:text-danger-600",closeIcon:"border border-danger-400 bg-danger-100",title:"text-danger-foreground",description:"text-danger-foreground"}}]}),Sw=Hn({slots:{base:["z-0","relative","bg-transparent","before:content-['']","before:hidden","before:z-[-1]","before:absolute","before:rotate-45","before:w-2.5","before:h-2.5","before:rounded-sm","data-[arrow=true]:before:block","data-[placement=top]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=top]:before:left-1/2","data-[placement=top]:before:-translate-x-1/2","data-[placement=top-start]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=top-start]:before:left-3","data-[placement=top-end]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=top-end]:before:right-3","data-[placement=bottom]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=bottom]:before:left-1/2","data-[placement=bottom]:before:-translate-x-1/2","data-[placement=bottom-start]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=bottom-start]:before:left-3","data-[placement=bottom-end]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=bottom-end]:before:right-3","data-[placement=left]:before:-right-[calc(theme(spacing.5)/4_-_2px)]","data-[placement=left]:before:top-1/2","data-[placement=left]:before:-translate-y-1/2","data-[placement=left-start]:before:-right-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=left-start]:before:top-1/4","data-[placement=left-end]:before:-right-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=left-end]:before:bottom-1/4","data-[placement=right]:before:-left-[calc(theme(spacing.5)/4_-_2px)]","data-[placement=right]:before:top-1/2","data-[placement=right]:before:-translate-y-1/2","data-[placement=right-start]:before:-left-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=right-start]:before:top-1/4","data-[placement=right-end]:before:-left-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=right-end]:before:bottom-1/4",...bh],content:["z-10","px-2.5","py-1","w-full","inline-flex","flex-col","items-center","justify-center","box-border","subpixel-antialiased","outline-none","box-border"],trigger:["z-10"],backdrop:["hidden"],arrow:[]},variants:{size:{sm:{content:"text-tiny"},md:{content:"text-small"},lg:{content:"text-medium"}},color:{default:{base:"before:bg-content1 before:shadow-small",content:"bg-content1"},foreground:{base:"before:bg-foreground",content:Yr.solid.foreground},primary:{base:"before:bg-primary",content:Yr.solid.primary},secondary:{base:"before:bg-secondary",content:Yr.solid.secondary},success:{base:"before:bg-success",content:Yr.solid.success},warning:{base:"before:bg-warning",content:Yr.solid.warning},danger:{base:"before:bg-danger",content:Yr.solid.danger}},radius:{none:{content:"rounded-none"},sm:{content:"rounded-small"},md:{content:"rounded-medium"},lg:{content:"rounded-large"},full:{content:"rounded-full"}},shadow:{none:{content:"shadow-none"},sm:{content:"shadow-small"},md:{content:"shadow-medium"},lg:{content:"shadow-large"}},backdrop:{transparent:{},opaque:{backdrop:"bg-overlay/50 backdrop-opacity-disabled"},blur:{backdrop:"backdrop-blur-sm backdrop-saturate-150 bg-overlay/30"}},triggerScaleOnOpen:{true:{trigger:["aria-expanded:scale-[0.97]","aria-expanded:opacity-70","subpixel-antialiased"]},false:{}},disableAnimation:{true:{base:"animate-none"}},isTriggerDisabled:{true:{trigger:"opacity-disabled pointer-events-none"},false:{}}},defaultVariants:{color:"default",radius:"lg",size:"md",shadow:"md",backdrop:"transparent",triggerScaleOnOpen:!0},compoundVariants:[{backdrop:["opaque","blur"],class:{backdrop:"block w-full h-full fixed inset-0 -z-30"}}]}),CM=Hn({slots:{base:"flex flex-col gap-2 w-full",label:"",labelWrapper:"flex justify-between",value:"",track:"z-0 relative bg-default-300/50 overflow-hidden rtl:rotate-180",indicator:"h-full"},variants:{color:{default:{indicator:"bg-default-400"},primary:{indicator:"bg-primary"},secondary:{indicator:"bg-secondary"},success:{indicator:"bg-success"},warning:{indicator:"bg-warning"},danger:{indicator:"bg-danger"}},size:{sm:{label:"text-small",value:"text-small",track:"h-1"},md:{label:"text-medium",value:"text-medium",track:"h-3"},lg:{label:"text-large",value:"text-large",track:"h-5"}},radius:{none:{track:"rounded-none",indicator:"rounded-none"},sm:{track:"rounded-small",indicator:"rounded-small"},md:{track:"rounded-medium",indicator:"rounded-medium"},lg:{track:"rounded-large",indicator:"rounded-large"},full:{track:"rounded-full",indicator:"rounded-full"}},isStriped:{true:{indicator:"bg-stripe-gradient-default bg-stripe-size"}},isIndeterminate:{true:{indicator:["absolute","w-full","origin-left","animate-indeterminate-bar"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:{},false:{indicator:"transition-transform !duration-500"}}},defaultVariants:{color:"primary",size:"md",radius:"full",isStriped:!1,isIndeterminate:!1,isDisabled:!1},compoundVariants:[{disableAnimation:!0,isIndeterminate:!1,class:{indicator:"!transition-none motion-reduce:transition-none"}},{color:"primary",isStriped:!0,class:{indicator:"bg-stripe-gradient-primary bg-stripe-size"}},{color:"secondary",isStriped:!0,class:{indicator:"bg-stripe-gradient-secondary bg-stripe-size"}},{color:"success",isStriped:!0,class:{indicator:"bg-stripe-gradient-success bg-stripe-size"}},{color:"warning",isStriped:!0,class:{indicator:"bg-stripe-gradient-warning bg-stripe-size"}},{color:"danger",isStriped:!0,class:{indicator:"bg-stripe-gradient-danger bg-stripe-size"}}]},{twMerge:!0}),DM=Hn({slots:{base:"flex flex-col justify-center gap-1 max-w-fit items-center",label:"",svgWrapper:"relative block",svg:"z-0 relative overflow-hidden",track:"h-full stroke-default-300/50",indicator:"h-full stroke-current",value:"absolute font-normal inset-0 flex items-center justify-center"},variants:{color:{default:{svg:"text-default-400"},primary:{svg:"text-primary"},secondary:{svg:"text-secondary"},success:{svg:"text-success"},warning:{svg:"text-warning"},danger:{svg:"text-danger"}},size:{sm:{svg:"w-8 h-8",label:"text-small",value:"text-[0.5rem]"},md:{svg:"w-10 h-10",label:"text-small",value:"text-[0.55rem]"},lg:{svg:"w-12 h-12",label:"text-medium",value:"text-[0.6rem]"}},isIndeterminate:{true:{svg:"animate-spinner-ease-spin"}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:{},false:{indicator:"transition-all !duration-500"}}},defaultVariants:{color:"primary",size:"md",isDisabled:!1},compoundVariants:[{disableAnimation:!0,isIndeterminate:!1,class:{svg:"!transition-none motion-reduce:transition-none"}}]}),uX=Hn({slots:{base:"group relative max-w-fit inline-flex items-center justify-start cursor-pointer tap-highlight-transparent p-2 -m-2 select-none",wrapper:["relative","inline-flex","items-center","justify-center","flex-shrink-0","overflow-hidden","border-solid","border-medium","box-border","border-default","rounded-full","group-data-[hover-unselected=true]:bg-default-100",...t2],hiddenInput:V8,labelWrapper:"flex flex-col ml-1",control:["z-10","w-2","h-2","opacity-0","scale-0","origin-center","rounded-full","group-data-[selected=true]:opacity-100","group-data-[selected=true]:scale-100"],label:"relative text-foreground select-none",description:"relative text-foreground-400"},variants:{color:{default:{control:"bg-default-500 text-default-foreground",wrapper:"group-data-[selected=true]:border-default-500"},primary:{control:"bg-primary text-primary-foreground",wrapper:"group-data-[selected=true]:border-primary"},secondary:{control:"bg-secondary text-secondary-foreground",wrapper:"group-data-[selected=true]:border-secondary"},success:{control:"bg-success text-success-foreground",wrapper:"group-data-[selected=true]:border-success"},warning:{control:"bg-warning text-warning-foreground",wrapper:"group-data-[selected=true]:border-warning"},danger:{control:"bg-danger text-danger-foreground",wrapper:"group-data-[selected=true]:border-danger"}},size:{sm:{wrapper:"w-4 h-4",control:"w-1.5 h-1.5",labelWrapper:"ml-1",label:"text-small",description:"text-tiny"},md:{wrapper:"w-5 h-5",control:"w-2 h-2",labelWrapper:"ms-2",label:"text-medium",description:"text-small"},lg:{wrapper:"w-6 h-6",control:"w-2.5 h-2.5",labelWrapper:"ms-2",label:"text-large",description:"text-medium"}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},isInvalid:{true:{control:"bg-danger text-danger-foreground",wrapper:"border-danger group-data-[selected=true]:border-danger",label:"text-danger",description:"text-danger-300"}},disableAnimation:{true:{},false:{wrapper:["group-data-[pressed=true]:scale-95","transition-transform-colors","motion-reduce:transition-none"],control:"transition-transform-opacity motion-reduce:transition-none",label:"transition-colors motion-reduce:transition-none",description:"transition-colors motion-reduce:transition-none"}}},defaultVariants:{color:"primary",size:"md",isDisabled:!1,isInvalid:!1}}),dX=Hn({slots:{base:"relative flex flex-col gap-2",label:"relative text-foreground-500",wrapper:"flex flex-col flex-wrap gap-2 data-[orientation=horizontal]:flex-row",description:"text-tiny text-foreground-400",errorMessage:"text-tiny text-danger"},variants:{isRequired:{true:{label:"after:content-['*'] after:text-danger after:ml-0.5"}},isInvalid:{true:{description:"text-danger"}},disableAnimation:{true:{},false:{description:"transition-colors !duration-150 motion-reduce:transition-none"}}},defaultVariants:{isInvalid:!1,isRequired:!1}}),PM=Hn({slots:{base:"group flex flex-col data-[hidden=true]:hidden",label:["absolute","z-10","pointer-events-none","origin-top-left","flex-shrink-0","rtl:origin-top-right","subpixel-antialiased","block","text-small","text-foreground-500"],mainWrapper:"h-full",inputWrapper:"relative w-full inline-flex tap-highlight-transparent flex-row items-center shadow-sm px-3 gap-3",innerWrapper:"inline-flex w-full items-center h-full box-border",input:["w-full font-normal bg-transparent !outline-none placeholder:text-foreground-500 focus-visible:outline-none","data-[has-start-content=true]:ps-1.5","data-[has-end-content=true]:pe-1.5","file:cursor-pointer file:bg-transparent file:border-0","autofill:bg-transparent bg-clip-text"],clearButton:["p-2","-m-2","z-10","absolute","end-3","start-auto","pointer-events-none","appearance-none","outline-none","select-none","opacity-0","hover:!opacity-100","cursor-pointer","active:!opacity-70","rounded-full",...bh],helperWrapper:"hidden group-data-[has-helper=true]:flex p-1 relative flex-col gap-1.5",description:"text-tiny text-foreground-400",errorMessage:"text-tiny text-danger"},variants:{variant:{flat:{inputWrapper:["bg-default-100","data-[hover=true]:bg-default-200","group-data-[focus=true]:bg-default-100"]},faded:{inputWrapper:["bg-default-100","border-medium","border-default-200","data-[hover=true]:border-default-400 focus-within:border-default-400"],value:"group-data-[has-value=true]:text-default-foreground"},bordered:{inputWrapper:["border-medium","border-default-200","data-[hover=true]:border-default-400","group-data-[focus=true]:border-default-foreground"]},underlined:{inputWrapper:["!px-1","!pb-0","!gap-0","relative","box-border","border-b-medium","shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","border-default-200","!rounded-none","hover:border-default-300","after:content-['']","after:w-0","after:origin-center","after:bg-default-foreground","after:absolute","after:left-1/2","after:-translate-x-1/2","after:-bottom-[2px]","after:h-[2px]","group-data-[focus=true]:after:w-full"],innerWrapper:"pb-1",label:"group-data-[filled-within=true]:text-foreground"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{label:"text-tiny",inputWrapper:"h-8 min-h-8 px-2 rounded-small",input:"text-small",clearButton:"text-medium"},md:{inputWrapper:"h-10 min-h-10 rounded-medium",input:"text-small",clearButton:"text-large"},lg:{label:"text-medium",inputWrapper:"h-12 min-h-12 rounded-large",input:"text-medium",clearButton:"text-large"}},radius:{none:{inputWrapper:"rounded-none"},sm:{inputWrapper:"rounded-small"},md:{inputWrapper:"rounded-medium"},lg:{inputWrapper:"rounded-large"},full:{inputWrapper:"rounded-full"}},labelPlacement:{outside:{mainWrapper:"flex flex-col"},"outside-left":{base:"flex-row items-center flex-nowrap data-[has-helper=true]:items-start",inputWrapper:"flex-1",mainWrapper:"flex flex-col",label:"relative text-foreground pe-2 ps-2 pointer-events-auto"},inside:{label:"cursor-text",inputWrapper:"flex-col items-start justify-center gap-0",innerWrapper:"group-data-[has-label=true]:items-end"}},fullWidth:{true:{base:"w-full"},false:{}},isClearable:{true:{input:"peer pe-6 input-search-cancel-button-none",clearButton:["peer-data-[filled=true]:pointer-events-auto","peer-data-[filled=true]:opacity-70 peer-data-[filled=true]:block","peer-data-[filled=true]:scale-100"]}},isDisabled:{true:{base:"opacity-disabled pointer-events-none",inputWrapper:"pointer-events-none",label:"pointer-events-none"}},isInvalid:{true:{label:"!text-danger",input:"!placeholder:text-danger !text-danger"}},isRequired:{true:{label:"after:content-['*'] after:text-danger after:ms-0.5"}},isMultiline:{true:{label:"relative",inputWrapper:"!h-auto",innerWrapper:"items-start group-data-[has-label=true]:items-start",input:"resize-none data-[hide-scroll=true]:scrollbar-hide",clearButton:"absolute top-2 right-2 rtl:right-auto rtl:left-2 z-10"}},disableAnimation:{true:{input:"transition-none",inputWrapper:"transition-none",label:"transition-none"},false:{inputWrapper:"transition-background motion-reduce:transition-none !duration-150",label:["will-change-auto","!duration-200","!ease-out","motion-reduce:transition-none","transition-[transform,color,left,opacity]"],clearButton:["scale-90","ease-out","duration-150","transition-[opacity,transform]","motion-reduce:transition-none","motion-reduce:scale-100"]}}},defaultVariants:{variant:"flat",color:"default",size:"md",fullWidth:!0,isDisabled:!1,isMultiline:!1},compoundVariants:[{variant:"flat",color:"default",class:{input:"group-data-[has-value=true]:text-default-foreground"}},{variant:"flat",color:"primary",class:{inputWrapper:["bg-primary-100","data-[hover=true]:bg-primary-50","text-primary","group-data-[focus=true]:bg-primary-50","placeholder:text-primary"],input:"placeholder:text-primary",label:"text-primary"}},{variant:"flat",color:"secondary",class:{inputWrapper:["bg-secondary-100","text-secondary","data-[hover=true]:bg-secondary-50","group-data-[focus=true]:bg-secondary-50","placeholder:text-secondary"],input:"placeholder:text-secondary",label:"text-secondary"}},{variant:"flat",color:"success",class:{inputWrapper:["bg-success-100","text-success-600","dark:text-success","placeholder:text-success-600","dark:placeholder:text-success","data-[hover=true]:bg-success-50","group-data-[focus=true]:bg-success-50"],input:"placeholder:text-success-600 dark:placeholder:text-success",label:"text-success-600 dark:text-success"}},{variant:"flat",color:"warning",class:{inputWrapper:["bg-warning-100","text-warning-600","dark:text-warning","placeholder:text-warning-600","dark:placeholder:text-warning","data-[hover=true]:bg-warning-50","group-data-[focus=true]:bg-warning-50"],input:"placeholder:text-warning-600 dark:placeholder:text-warning",label:"text-warning-600 dark:text-warning"}},{variant:"flat",color:"danger",class:{inputWrapper:["bg-danger-100","text-danger","dark:text-danger-500","placeholder:text-danger","dark:placeholder:text-danger-500","data-[hover=true]:bg-danger-50","group-data-[focus=true]:bg-danger-50"],input:"placeholder:text-danger dark:placeholder:text-danger-500",label:"text-danger dark:text-danger-500"}},{variant:"faded",color:"primary",class:{label:"text-primary",inputWrapper:"data-[hover=true]:border-primary focus-within:border-primary"}},{variant:"faded",color:"secondary",class:{label:"text-secondary",inputWrapper:"data-[hover=true]:border-secondary focus-within:border-secondary"}},{variant:"faded",color:"success",class:{label:"text-success",inputWrapper:"data-[hover=true]:border-success focus-within:border-success"}},{variant:"faded",color:"warning",class:{label:"text-warning",inputWrapper:"data-[hover=true]:border-warning focus-within:border-warning"}},{variant:"faded",color:"danger",class:{label:"text-danger",inputWrapper:"data-[hover=true]:border-danger focus-within:border-danger"}},{variant:"underlined",color:"default",class:{input:"group-data-[has-value=true]:text-foreground"}},{variant:"underlined",color:"primary",class:{inputWrapper:"after:bg-primary",label:"text-primary"}},{variant:"underlined",color:"secondary",class:{inputWrapper:"after:bg-secondary",label:"text-secondary"}},{variant:"underlined",color:"success",class:{inputWrapper:"after:bg-success",label:"text-success"}},{variant:"underlined",color:"warning",class:{inputWrapper:"after:bg-warning",label:"text-warning"}},{variant:"underlined",color:"danger",class:{inputWrapper:"after:bg-danger",label:"text-danger"}},{variant:"bordered",color:"primary",class:{inputWrapper:"group-data-[focus=true]:border-primary",label:"text-primary"}},{variant:"bordered",color:"secondary",class:{inputWrapper:"group-data-[focus=true]:border-secondary",label:"text-secondary"}},{variant:"bordered",color:"success",class:{inputWrapper:"group-data-[focus=true]:border-success",label:"text-success"}},{variant:"bordered",color:"warning",class:{inputWrapper:"group-data-[focus=true]:border-warning",label:"text-warning"}},{variant:"bordered",color:"danger",class:{inputWrapper:"group-data-[focus=true]:border-danger",label:"text-danger"}},{labelPlacement:"inside",color:"default",class:{label:"group-data-[filled-within=true]:text-default-600"}},{labelPlacement:"outside",color:"default",class:{label:"group-data-[filled-within=true]:text-foreground"}},{radius:"full",size:["sm"],class:{inputWrapper:"px-3"}},{radius:"full",size:"md",class:{inputWrapper:"px-4"}},{radius:"full",size:"lg",class:{inputWrapper:"px-5"}},{disableAnimation:!1,variant:["faded","bordered"],class:{inputWrapper:"transition-colors motion-reduce:transition-none"}},{disableAnimation:!1,variant:"underlined",class:{inputWrapper:"after:transition-width motion-reduce:after:transition-none"}},{variant:["flat","faded"],class:{inputWrapper:[...t2]}},{isInvalid:!0,variant:"flat",class:{inputWrapper:["!bg-danger-50","data-[hover=true]:!bg-danger-100","group-data-[focus=true]:!bg-danger-50"]}},{isInvalid:!0,variant:"bordered",class:{inputWrapper:"!border-danger group-data-[focus=true]:!border-danger"}},{isInvalid:!0,variant:"underlined",class:{inputWrapper:"after:!bg-danger"}},{labelPlacement:"inside",size:"sm",class:{inputWrapper:"h-12 py-1.5 px-3"}},{labelPlacement:"inside",size:"md",class:{inputWrapper:"h-14 py-2"}},{labelPlacement:"inside",size:"lg",class:{inputWrapper:"h-16 py-2.5 gap-0"}},{labelPlacement:"inside",size:"sm",variant:["bordered","faded"],class:{inputWrapper:"py-1"}},{labelPlacement:["inside","outside"],class:{label:["group-data-[filled-within=true]:pointer-events-auto"]}},{labelPlacement:"outside",isMultiline:!1,class:{base:"relative justify-end",label:["pb-0","z-20","top-1/2","-translate-y-1/2","group-data-[filled-within=true]:start-0"]}},{labelPlacement:["inside"],class:{label:["group-data-[filled-within=true]:scale-85"]}},{labelPlacement:["inside"],variant:"flat",class:{innerWrapper:"pb-0.5"}},{variant:"underlined",size:"sm",class:{innerWrapper:"pb-1"}},{variant:"underlined",size:["md","lg"],class:{innerWrapper:"pb-1.5"}},{labelPlacement:"inside",size:["sm","md"],class:{label:"text-small"}},{labelPlacement:"inside",isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px)]"]}},{labelPlacement:"inside",isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px)]"]}},{labelPlacement:"inside",isMultiline:!1,size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px)]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_5px)]"]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_3.5px)]"]}},{labelPlacement:"inside",variant:"underlined",size:"lg",isMultiline:!1,class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_4px)]"]}},{labelPlacement:"outside",size:"sm",isMultiline:!1,class:{label:["start-2","text-tiny","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.tiny)/2_+_16px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_8px)]"}},{labelPlacement:"outside",size:"md",isMultiline:!1,class:{label:["start-3","end-auto","text-small","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_20px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_10px)]"}},{labelPlacement:"outside",size:"lg",isMultiline:!1,class:{label:["start-3","end-auto","text-medium","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_24px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_12px)]"}},{labelPlacement:"outside-left",size:"sm",class:{label:"group-data-[has-helper=true]:pt-2"}},{labelPlacement:"outside-left",size:"md",class:{label:"group-data-[has-helper=true]:pt-3"}},{labelPlacement:"outside-left",size:"lg",class:{label:"group-data-[has-helper=true]:pt-4"}},{labelPlacement:["outside","outside-left"],isMultiline:!0,class:{inputWrapper:"py-2"}},{labelPlacement:"outside",isMultiline:!0,class:{label:"pb-1.5"}},{labelPlacement:"inside",isMultiline:!0,class:{label:"pb-0.5",input:"pt-0"}},{isMultiline:!0,disableAnimation:!1,class:{input:"transition-height !duration-100 motion-reduce:transition-none"}},{labelPlacement:["inside","outside"],class:{label:["pe-2","max-w-full","text-ellipsis","overflow-hidden"]}},{isMultiline:!0,radius:"full",class:{inputWrapper:"data-[has-multiple-rows=true]:rounded-large"}},{isClearable:!0,isMultiline:!0,class:{clearButton:["group-data-[has-value=true]:opacity-70 group-data-[has-value=true]:block","group-data-[has-value=true]:scale-100","group-data-[has-value=true]:pointer-events-auto"]}}]}),hX=Hn({slots:{base:"w-full relative flex flex-col gap-1 p-1 overflow-clip",list:"w-full flex flex-col gap-0.5 outline-none",emptyContent:["h-10","px-2","py-1.5","w-full","h-full","text-foreground-400","text-start"]}}),MM=Hn({slots:{base:["flex","group","gap-2","items-center","justify-between","relative","px-2","py-1.5","w-full","h-full","box-border","rounded-small","subpixel-antialiased","outline-none","cursor-pointer","tap-highlight-transparent",...bh,"data-[focus-visible=true]:dark:ring-offset-background-content1"],wrapper:"w-full flex flex-col items-start justify-center",title:"flex-1 text-small font-normal",description:["w-full","text-tiny","text-foreground-500","group-hover:text-current"],selectedIcon:["text-inherit","w-3","h-3","flex-shrink-0"],shortcut:["px-1","py-0.5","rounded","font-sans","text-foreground-500","text-tiny","border-small","border-default-300","group-hover:border-current"]},variants:{variant:{solid:{base:""},bordered:{base:"border-medium border-transparent bg-transparent"},light:{base:"bg-transparent"},faded:{base:["border-small border-transparent hover:border-default data-[hover=true]:bg-default-100","data-[selectable=true]:focus:border-default data-[selectable=true]:focus:bg-default-100"]},flat:{base:""},shadow:{base:"data-[hover=true]:shadow-lg"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},showDivider:{true:{base:["mb-1.5","after:content-['']","after:absolute","after:-bottom-1","after:left-0","after:right-0","after:h-divider","after:bg-divider"]},false:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{},false:{base:"data-[hover=true]:transition-colors"}},hasTitleTextChild:{true:{title:"truncate"}},hasDescriptionTextChild:{true:{description:"truncate"}}},defaultVariants:{variant:"solid",color:"default",showDivider:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:["data-[hover=true]:bg-default","data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:bg-default","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"solid",color:"primary",class:{base:["data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground","data-[selectable=true]:focus:bg-primary data-[selectable=true]:focus:text-primary-foreground"]}},{variant:"solid",color:"secondary",class:{base:["data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground","data-[selectable=true]:focus:bg-secondary data-[selectable=true]:focus:text-secondary-foreground"]}},{variant:"solid",color:"success",class:{base:["data-[hover=true]:bg-success data-[hover=true]:text-success-foreground","data-[selectable=true]:focus:bg-success data-[selectable=true]:focus:text-success-foreground"]}},{variant:"solid",color:"warning",class:{base:["data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground","data-[selectable=true]:focus:bg-warning data-[selectable=true]:focus:text-warning-foreground"]}},{variant:"solid",color:"danger",class:{base:["data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground","data-[selectable=true]:focus:bg-danger data-[selectable=true]:focus:text-danger-foreground"]}},{variant:"shadow",color:"default",class:{base:["data-[hover=true]:shadow-default/50 data-[hover=true]:bg-default data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:shadow-default/50 data-[selectable=true]:focus:bg-default data-[selectable=true]:focus:text-default-foreground"]}},{variant:"shadow",color:"primary",class:{base:["data-[hover=true]:shadow-primary/30 data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground","data-[selectable=true]:focus:shadow-primary/30 data-[selectable=true]:focus:bg-primary data-[selectable=true]:focus:text-primary-foreground"]}},{variant:"shadow",color:"secondary",class:{base:["data-[hover=true]:shadow-secondary/30 data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground","data-[selectable=true]:focus:shadow-secondary/30 data-[selectable=true]:focus:bg-secondary data-[selectable=true]:focus:text-secondary-foreground"]}},{variant:"shadow",color:"success",class:{base:["data-[hover=true]:shadow-success/30 data-[hover=true]:bg-success data-[hover=true]:text-success-foreground","data-[selectable=true]:focus:shadow-success/30 data-[selectable=true]:focus:bg-success data-[selectable=true]:focus:text-success-foreground"]}},{variant:"shadow",color:"warning",class:{base:["data-[hover=true]:shadow-warning/30 data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground","data-[selectable=true]:focus:shadow-warning/30 data-[selectable=true]:focus:bg-warning data-[selectable=true]:focus:text-warning-foreground"]}},{variant:"shadow",color:"danger",class:{base:["data-[hover=true]:shadow-danger/30 data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground","data-[selectable=true]:focus:shadow-danger/30 data-[selectable=true]:focus:bg-danger data-[selectable=true]:focus:text-danger-foreground"]}},{variant:"bordered",color:"default",class:{base:["data-[hover=true]:border-default","data-[selectable=true]:focus:border-default"]}},{variant:"bordered",color:"primary",class:{base:["data-[hover=true]:border-primary data-[hover=true]:text-primary","data-[selectable=true]:focus:border-primary data-[selectable=true]:focus:text-primary"]}},{variant:"bordered",color:"secondary",class:{base:["data-[hover=true]:border-secondary data-[hover=true]:text-secondary","data-[selectable=true]:focus:border-secondary data-[selectable=true]:focus:text-secondary"]}},{variant:"bordered",color:"success",class:{base:["data-[hover=true]:border-success data-[hover=true]:text-success","data-[selectable=true]:focus:border-success data-[selectable=true]:focus:text-success"]}},{variant:"bordered",color:"warning",class:{base:["data-[hover=true]:border-warning data-[hover=true]:text-warning","data-[selectable=true]:focus:border-warning data-[selectable=true]:focus:text-warning"]}},{variant:"bordered",color:"danger",class:{base:["data-[hover=true]:border-danger data-[hover=true]:text-danger","data-[selectable=true]:focus:border-danger data-[selectable=true]:focus:text-danger"]}},{variant:"flat",color:"default",class:{base:["data-[hover=true]:bg-default/40","data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:bg-default/40","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"flat",color:"primary",class:{base:["data-[hover=true]:bg-primary/20 data-[hover=true]:text-primary","data-[selectable=true]:focus:bg-primary/20 data-[selectable=true]:focus:text-primary"]}},{variant:"flat",color:"secondary",class:{base:["data-[hover=true]:bg-secondary/20 data-[hover=true]:text-secondary","data-[selectable=true]:focus:bg-secondary/20 data-[selectable=true]:focus:text-secondary"]}},{variant:"flat",color:"success",class:{base:["data-[hover=true]:bg-success/20 data-[hover=true]:text-success","data-[selectable=true]:focus:bg-success/20 data-[selectable=true]:focus:text-success"]}},{variant:"flat",color:"warning",class:{base:["data-[hover=true]:bg-warning/20 data-[hover=true]:text-warning","data-[selectable=true]:focus:bg-warning/20 data-[selectable=true]:focus:text-warning"]}},{variant:"flat",color:"danger",class:{base:["data-[hover=true]:bg-danger/20 data-[hover=true]:text-danger","data-[selectable=true]:focus:bg-danger/20 data-[selectable=true]:focus:text-danger"]}},{variant:"faded",color:"default",class:{base:["data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"faded",color:"primary",class:{base:["data-[hover=true]:text-primary","data-[selectable=true]:focus:text-primary"]}},{variant:"faded",color:"secondary",class:{base:["data-[hover=true]:text-secondary","data-[selectable=true]:focus:text-secondary"]}},{variant:"faded",color:"success",class:{base:["data-[hover=true]:text-success","data-[selectable=true]:focus:text-success"]}},{variant:"faded",color:"warning",class:{base:["data-[hover=true]:text-warning","data-[selectable=true]:focus:text-warning"]}},{variant:"faded",color:"danger",class:{base:["data-[hover=true]:text-danger","data-[selectable=true]:focus:text-danger"]}},{variant:"light",color:"default",class:{base:["data-[hover=true]:text-default-500","data-[selectable=true]:focus:text-default-500"]}},{variant:"light",color:"primary",class:{base:["data-[hover=true]:text-primary","data-[selectable=true]:focus:text-primary"]}},{variant:"light",color:"secondary",class:{base:["data-[hover=true]:text-secondary","data-[selectable=true]:focus:text-secondary"]}},{variant:"light",color:"success",class:{base:["data-[hover=true]:text-success","data-[selectable=true]:focus:text-success"]}},{variant:"light",color:"warning",class:{base:["data-[hover=true]:text-warning","data-[selectable=true]:focus:text-warning"]}},{variant:"light",color:"danger",class:{base:["data-[hover=true]:text-danger","data-[selectable=true]:focus:text-danger"]}}]}),fX=Hn({slots:{base:"relative mb-2",heading:"pl-1 text-tiny text-foreground-500",group:"data-[has-title=true]:pt-1",divider:"mt-2"}}),AM=Hn({slots:{wrapper:["flex","w-screen","h-[100dvh]","fixed","inset-0","z-50","overflow-x-auto","justify-center","h-[--visual-viewport-height]"],base:["flex","flex-col","relative","bg-white","z-50","w-full","box-border","bg-content1","outline-none","mx-1","my-1","sm:mx-6","sm:my-16"],backdrop:"z-50",header:"flex py-4 px-6 flex-initial text-large font-semibold",body:"flex flex-1 flex-col gap-3 px-6 py-2",footer:"flex flex-row gap-2 px-6 py-4 justify-end",closeButton:["absolute","appearance-none","outline-none","select-none","top-1","end-1","p-2","text-foreground-500","rounded-full","hover:bg-default-100","active:bg-default-200","tap-highlight-transparent",...bh]},variants:{size:{xs:{base:"max-w-xs"},sm:{base:"max-w-sm"},md:{base:"max-w-md"},lg:{base:"max-w-lg"},xl:{base:"max-w-xl"},"2xl":{base:"max-w-2xl"},"3xl":{base:"max-w-3xl"},"4xl":{base:"max-w-4xl"},"5xl":{base:"max-w-5xl"},full:{base:"my-0 mx-0 sm:mx-0 sm:my-0 max-w-full h-[100dvh] min-h-[100dvh] !rounded-none"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"}},placement:{auto:{wrapper:"items-end sm:items-center"},center:{wrapper:"items-center sm:items-center"},top:{wrapper:"items-start sm:items-start"},"top-center":{wrapper:"items-start sm:items-center"},bottom:{wrapper:"items-end sm:items-end"},"bottom-center":{wrapper:"items-end sm:items-center"}},shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},backdrop:{transparent:{backdrop:"hidden"},opaque:{backdrop:"bg-overlay/50 backdrop-opacity-disabled"},blur:{backdrop:"backdrop-blur-md backdrop-saturate-150 bg-overlay/30"}},scrollBehavior:{normal:{base:"overflow-y-hidden"},inside:{base:"max-h-[calc(100%_-_8rem)]",body:"overflow-y-auto"},outside:{wrapper:"items-start sm:items-start overflow-y-auto",base:"my-16"}},disableAnimation:{false:{wrapper:["[--scale-enter:100%]","[--scale-exit:100%]","[--slide-enter:0px]","[--slide-exit:80px]","sm:[--scale-enter:100%]","sm:[--scale-exit:103%]","sm:[--slide-enter:0px]","sm:[--slide-exit:0px]"]}}},defaultVariants:{size:"md",radius:"lg",shadow:"sm",placement:"auto",backdrop:"opaque",scrollBehavior:"normal"},compoundVariants:[{backdrop:["opaque","blur"],class:{backdrop:"w-screen h-screen fixed inset-0"}}]}),kM=Hn({slots:{base:"group flex flex-col data-[hidden=true]:hidden",label:["absolute","z-10","pointer-events-none","origin-top-left","flex-shrink-0","rtl:origin-top-right","subpixel-antialiased","block","text-small","text-foreground-500"],mainWrapper:"h-full",inputWrapper:"relative w-full inline-flex tap-highlight-transparent flex-row items-center shadow-sm px-3 gap-3",innerWrapper:"inline-flex w-full items-center h-full box-border",input:["w-full font-normal bg-transparent !outline-none placeholder:text-foreground-500 focus-visible:outline-none","data-[has-start-content=true]:ps-1.5","data-[has-end-content=true]:pe-1.5","autofill:bg-transparent bg-clip-text"],clearButton:["p-2","-m-2","z-10","end-3","start-auto","pointer-events-none","appearance-none","outline-none","select-none","opacity-0","hover:!opacity-100","cursor-pointer","active:!opacity-70","rounded-full",...bh],stepperButton:["bg-transparent","flex","justify-center","items-center","before:absolute","before:w-8","before:h-8","before:rounded-full","after:shadow-small","after:bg-background","data-[focused=true]:z-10","min-w-5","w-5","h-5","overflow-visible","transition-opacity","data-[hover=true]:opacity-70","data-[pressed=true]:opacity-disabled"],stepperWrapper:["flex","flex-col","ps-1","h-full","justify-center"],helperWrapper:"hidden group-data-[has-helper=true]:flex py-2 relative flex-col gap-1.5",description:"text-tiny text-foreground-400",errorMessage:"text-tiny text-danger"},variants:{variant:{flat:{inputWrapper:["bg-default-100","data-[hover=true]:bg-default-200","group-data-[focus=true]:bg-default-100"]},faded:{inputWrapper:["bg-default-100","border-medium","border-default-200","data-[hover=true]:border-default-400 focus-within:border-default-400"],value:"group-data-[has-value=true]:text-default-foreground"},bordered:{inputWrapper:["border-medium","border-default-200","data-[hover=true]:border-default-400","group-data-[focus=true]:border-default-foreground"]},underlined:{inputWrapper:["!px-1","!pb-0","!gap-0","relative","box-border","border-b-medium","shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","border-default-200","!rounded-none","hover:border-default-300","after:content-['']","after:w-0","after:origin-center","after:bg-default-foreground","after:absolute","after:left-1/2","after:-translate-x-1/2","after:-bottom-[2px]","after:h-[2px]","group-data-[focus=true]:after:w-full"],innerWrapper:"pb-1",label:"group-data-[filled-within=true]:text-foreground"}},color:{default:{},primary:{stepperButton:"text-primary"},secondary:{stepperButton:"text-secondary"},success:{stepperButton:"text-success"},warning:{stepperButton:"text-warning"},danger:{stepperButton:"text-danger"}},size:{sm:{label:"text-tiny",inputWrapper:"h-8 min-h-8 px-2 rounded-small",input:"text-small",clearButton:"text-medium"},md:{inputWrapper:"h-10 min-h-10 rounded-medium",input:"text-small",clearButton:"text-large"},lg:{label:"text-medium",inputWrapper:"h-12 min-h-12 rounded-large",input:"text-medium",clearButton:"text-large"}},radius:{none:{inputWrapper:"rounded-none"},sm:{inputWrapper:"rounded-small"},md:{inputWrapper:"rounded-medium"},lg:{inputWrapper:"rounded-large"},full:{inputWrapper:"rounded-full"}},labelPlacement:{outside:{mainWrapper:"flex flex-col",stepperButton:"min-w-3 w-3 h-3"},"outside-left":{base:"flex-row items-center flex-nowrap data-[has-helper=true]:items-start",inputWrapper:"flex-1",mainWrapper:"flex flex-col",label:"relative text-foreground pe-2 ps-2 pointer-events-auto",stepperButton:"min-w-3 w-3 h-3"},inside:{label:"cursor-text",inputWrapper:"flex-col items-start justify-center gap-0",innerWrapper:"group-data-[has-label=true]:items-end"}},fullWidth:{true:{base:"w-full"},false:{}},isClearable:{true:{input:"peer pe-6 input-search-cancel-button-none",clearButton:["peer-data-[filled=true]:pointer-events-auto","peer-data-[filled=true]:opacity-70 peer-data-[filled=true]:block","peer-data-[filled=true]:scale-100"]}},isDisabled:{true:{base:"opacity-disabled pointer-events-none",inputWrapper:"pointer-events-none",label:"pointer-events-none"}},isInvalid:{true:{label:"!text-danger",input:"!placeholder:text-danger !text-danger"}},isRequired:{true:{label:"after:content-['*'] after:text-danger after:ms-0.5"}},disableAnimation:{true:{input:"transition-none",inputWrapper:"transition-none",label:"transition-none"},false:{inputWrapper:"transition-background motion-reduce:transition-none !duration-150",label:["will-change-auto","!duration-200","!ease-out","motion-reduce:transition-none","transition-[transform,color,left,opacity]"],clearButton:["scale-90","ease-out","duration-150","transition-[opacity,transform]","motion-reduce:transition-none","motion-reduce:scale-100"]}}},defaultVariants:{variant:"flat",color:"default",size:"md",fullWidth:!0,labelPlacement:"inside",isDisabled:!1},compoundVariants:[{variant:"flat",color:"default",class:{input:"group-data-[has-value=true]:text-default-foreground"}},{variant:"flat",color:"primary",class:{inputWrapper:["bg-primary-100","data-[hover=true]:bg-primary-50","text-primary","group-data-[focus=true]:bg-primary-50","placeholder:text-primary"],input:"placeholder:text-primary",label:"text-primary"}},{variant:"flat",color:"secondary",class:{inputWrapper:["bg-secondary-100","text-secondary","data-[hover=true]:bg-secondary-50","group-data-[focus=true]:bg-secondary-50","placeholder:text-secondary"],input:"placeholder:text-secondary",label:"text-secondary"}},{variant:"flat",color:"success",class:{inputWrapper:["bg-success-100","text-success-600","dark:text-success","placeholder:text-success-600","dark:placeholder:text-success","data-[hover=true]:bg-success-50","group-data-[focus=true]:bg-success-50"],input:"placeholder:text-success-600 dark:placeholder:text-success",label:"text-success-600 dark:text-success"}},{variant:"flat",color:"warning",class:{inputWrapper:["bg-warning-100","text-warning-600","dark:text-warning","placeholder:text-warning-600","dark:placeholder:text-warning","data-[hover=true]:bg-warning-50","group-data-[focus=true]:bg-warning-50"],input:"placeholder:text-warning-600 dark:placeholder:text-warning",label:"text-warning-600 dark:text-warning"}},{variant:"flat",color:"danger",class:{inputWrapper:["bg-danger-100","text-danger","dark:text-danger-500","placeholder:text-danger","dark:placeholder:text-danger-500","data-[hover=true]:bg-danger-50","group-data-[focus=true]:bg-danger-50"],input:"placeholder:text-danger dark:placeholder:text-danger-500",label:"text-danger dark:text-danger-500"}},{variant:"faded",color:"primary",class:{label:"text-primary",inputWrapper:"data-[hover=true]:border-primary focus-within:border-primary"}},{variant:"faded",color:"secondary",class:{label:"text-secondary",inputWrapper:"data-[hover=true]:border-secondary focus-within:border-secondary"}},{variant:"faded",color:"success",class:{label:"text-success",inputWrapper:"data-[hover=true]:border-success focus-within:border-success"}},{variant:"faded",color:"warning",class:{label:"text-warning",inputWrapper:"data-[hover=true]:border-warning focus-within:border-warning"}},{variant:"faded",color:"danger",class:{label:"text-danger",inputWrapper:"data-[hover=true]:border-danger focus-within:border-danger"}},{variant:"underlined",color:"default",class:{input:"group-data-[has-value=true]:text-foreground"}},{variant:"underlined",color:"primary",class:{inputWrapper:"after:bg-primary",label:"text-primary"}},{variant:"underlined",color:"secondary",class:{inputWrapper:"after:bg-secondary",label:"text-secondary"}},{variant:"underlined",color:"success",class:{inputWrapper:"after:bg-success",label:"text-success"}},{variant:"underlined",color:"warning",class:{inputWrapper:"after:bg-warning",label:"text-warning"}},{variant:"underlined",color:"danger",class:{inputWrapper:"after:bg-danger",label:"text-danger"}},{variant:"bordered",color:"primary",class:{inputWrapper:"group-data-[focus=true]:border-primary",label:"text-primary"}},{variant:"bordered",color:"secondary",class:{inputWrapper:"group-data-[focus=true]:border-secondary",label:"text-secondary"}},{variant:"bordered",color:"success",class:{inputWrapper:"group-data-[focus=true]:border-success",label:"text-success"}},{variant:"bordered",color:"warning",class:{inputWrapper:"group-data-[focus=true]:border-warning",label:"text-warning"}},{variant:"bordered",color:"danger",class:{inputWrapper:"group-data-[focus=true]:border-danger",label:"text-danger"}},{labelPlacement:"inside",color:"default",class:{label:"group-data-[filled-within=true]:text-default-600"}},{labelPlacement:"outside",color:"default",class:{label:"group-data-[filled-within=true]:text-foreground"}},{radius:"full",size:["sm"],class:{inputWrapper:"px-3"}},{radius:"full",size:"md",class:{inputWrapper:"px-4"}},{radius:"full",size:"lg",class:{inputWrapper:"px-5"}},{disableAnimation:!1,variant:["faded","bordered"],class:{inputWrapper:"transition-colors motion-reduce:transition-none"}},{disableAnimation:!1,variant:"underlined",class:{inputWrapper:"after:transition-width motion-reduce:after:transition-none"}},{variant:["flat","faded"],class:{inputWrapper:[...t2]}},{isInvalid:!0,variant:"flat",class:{inputWrapper:["!bg-danger-50","data-[hover=true]:!bg-danger-100","group-data-[focus=true]:!bg-danger-50"]}},{isInvalid:!0,variant:"bordered",class:{inputWrapper:"!border-danger group-data-[focus=true]:!border-danger"}},{isInvalid:!0,variant:"underlined",class:{inputWrapper:"after:!bg-danger"}},{labelPlacement:"inside",size:"sm",class:{inputWrapper:"h-12 py-1.5 px-3"}},{labelPlacement:"inside",size:"md",class:{inputWrapper:"h-14 py-2"}},{labelPlacement:"inside",size:"lg",class:{inputWrapper:"h-16 py-2.5 gap-0"}},{labelPlacement:"inside",size:"sm",variant:["bordered","faded"],class:{inputWrapper:"py-1"}},{labelPlacement:["inside","outside"],class:{label:["group-data-[filled-within=true]:pointer-events-auto"]}},{labelPlacement:"outside",class:{base:"relative justify-end",label:["pb-0","z-20","top-1/2","-translate-y-1/2","group-data-[filled-within=true]:start-0"]}},{labelPlacement:["inside"],class:{label:["group-data-[filled-within=true]:scale-85"]}},{labelPlacement:"inside",size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px)]"]}},{labelPlacement:"inside",size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px)]"]}},{labelPlacement:"inside",size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px)]"]}},{labelPlacement:["inside"],variant:"flat",class:{innerWrapper:"pb-0.5"}},{variant:"underlined",size:"sm",class:{innerWrapper:"pb-1"}},{variant:"underlined",size:["md","lg"],class:{innerWrapper:"pb-1.5"}},{labelPlacement:"inside",size:["sm","md"],class:{label:"text-small",stepperButton:"before:h-6"}},{labelPlacement:"inside",variant:["faded","bordered"],size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:"underlined",size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_5px)]"]}},{labelPlacement:"inside",variant:"underlined",size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_3.5px)]"]}},{labelPlacement:"inside",variant:"underlined",size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_4px)]"]}},{labelPlacement:"outside",size:"sm",class:{label:["start-2","text-tiny","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.tiny)/2_+_16px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_8px)]",stepperButton:"before:h-4"}},{labelPlacement:"outside",size:"md",class:{label:["start-3","end-auto","text-small","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_20px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_10px)]",stepperButton:"before:h-4"}},{labelPlacement:"outside",size:"lg",class:{label:["start-3","end-auto","text-medium","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_24px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_12px)]",stepperButton:"min-4 w-4 h-4 before:h-6"}},{labelPlacement:"outside-left",size:"sm",class:{label:"group-data-[has-helper=true]:pt-2",stepperButton:"before:h-4"}},{labelPlacement:"outside-left",size:"md",class:{label:"group-data-[has-helper=true]:pt-3",stepperButton:"before:h-4"}},{labelPlacement:"outside-left",size:"lg",class:{label:"group-data-[has-helper=true]:pt-4",stepperButton:"min-4 w-4 h-4 before:h-6"}},{labelPlacement:["inside","outside"],class:{label:["pe-2","max-w-full","text-ellipsis","overflow-hidden"]}}]}),pX=Hn({base:"shrink-0 bg-divider border-none",variants:{orientation:{horizontal:"w-full h-divider",vertical:"h-full w-divider"}},defaultVariants:{orientation:"horizontal"}}),mX=Hn({slots:{base:["absolute","m-0","sm:m-0","overflow-y-auto"]},variants:{size:{xs:{base:"max-w-xs max-h-[20rem]"},sm:{base:"max-w-sm max-h-[24rem]"},md:{base:"max-w-md max-h-[28rem]"},lg:{base:"max-w-lg max-h-[32rem]"},xl:{base:"max-w-xl max-h-[36rem]"},"2xl":{base:"max-w-2xl max-h-[42rem]"},"3xl":{base:"max-w-3xl max-h-[48rem]"},"4xl":{base:"max-w-4xl max-h-[56rem]"},"5xl":{base:"max-w-5xl max-h-[64rem]"},full:{base:"max-w-full max-h-full h-[100dvh] !rounded-none"}},placement:{top:{base:"inset-x-0 top-0 max-w-[none] rounded-t-none"},right:{base:"inset-y-0 right-0 max-h-[none] rounded-r-none"},bottom:{base:"inset-x-0 bottom-0 max-w-[none] rounded-b-none"},left:{base:"inset-y-0 left-0 max-h-[none] rounded-l-none"}}}}),gX=Hn({base:["w-full","p-1","min-w-[200px]"]});Hn({slots:{base:["flex","group","gap-2","items-center","justify-between","relative","px-2","py-1.5","w-full","h-full","box-border","rounded-small","outline-none","cursor-pointer","tap-highlight-transparent","data-[pressed=true]:opacity-70",...bh,"data-[focus-visible=true]:dark:ring-offset-background-content1"],wrapper:"w-full flex flex-col items-start justify-center",title:"flex-1 text-small font-normal truncate",description:["w-full","text-tiny","text-foreground-500","group-hover:text-current"],selectedIcon:["text-inherit","w-3","h-3","flex-shrink-0"],shortcut:["px-1","py-0.5","rounded","font-sans","text-foreground-500","text-tiny","border-small","border-default-300","group-hover:border-current"]},variants:{variant:{solid:{base:""},bordered:{base:"border-medium border-transparent bg-transparent"},light:{base:"bg-transparent"},faded:{base:"border-small border-transparent hover:border-default data-[hover=true]:bg-default-100"},flat:{base:""},shadow:{base:"data-[hover=true]:shadow-lg"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{},false:{}}},defaultVariants:{variant:"solid",color:"default"},compoundVariants:[{variant:"solid",color:"default",class:{base:"data-[hover=true]:bg-default data-[hover=true]:text-default-foreground"}},{variant:"solid",color:"primary",class:{base:"data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground"}},{variant:"solid",color:"secondary",class:{base:"data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground"}},{variant:"solid",color:"success",class:{base:"data-[hover=true]:bg-success data-[hover=true]:text-success-foreground"}},{variant:"solid",color:"warning",class:{base:"data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground"}},{variant:"solid",color:"danger",class:{base:"data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground"}},{variant:"shadow",color:"default",class:{base:"data-[hover=true]:shadow-default/50 data-[hover=true]:bg-default data-[hover=true]:text-default-foreground"}},{variant:"shadow",color:"primary",class:{base:"data-[hover=true]:shadow-primary/30 data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground"}},{variant:"shadow",color:"secondary",class:{base:"data-[hover=true]:shadow-secondary/30 data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground"}},{variant:"shadow",color:"success",class:{base:"data-[hover=true]:shadow-success/30 data-[hover=true]:bg-success data-[hover=true]:text-success-foreground"}},{variant:"shadow",color:"warning",class:{base:"data-[hover=true]:shadow-warning/30 data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground"}},{variant:"shadow",color:"danger",class:{base:"data-[hover=true]:shadow-danger/30 data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground"}},{variant:"bordered",color:"default",class:{base:"data-[hover=true]:border-default"}},{variant:"bordered",color:"primary",class:{base:"data-[hover=true]:border-primary data-[hover=true]:text-primary"}},{variant:"bordered",color:"secondary",class:{base:"data-[hover=true]:border-secondary data-[hover=true]:text-secondary"}},{variant:"bordered",color:"success",class:{base:"data-[hover=true]:border-success data-[hover=true]:text-success"}},{variant:"bordered",color:"warning",class:{base:"data-[hover=true]:border-warning data-[hover=true]:text-warning"}},{variant:"bordered",color:"danger",class:{base:"data-[hover=true]:border-danger data-[hover=true]:text-danger"}},{variant:"flat",color:"default",class:{base:"data-[hover=true]:bg-default/40 data-[hover=true]:text-default-foreground"}},{variant:"flat",color:"primary",class:{base:"data-[hover=true]:bg-primary/20 data-[hover=true]:text-primary"}},{variant:"flat",color:"secondary",class:{base:"data-[hover=true]:bg-secondary/20 data-[hover=true]:text-secondary"}},{variant:"flat",color:"success",class:{base:"data-[hover=true]:bg-success/20 data-[hover=true]:text-success "}},{variant:"flat",color:"warning",class:{base:"data-[hover=true]:bg-warning/20 data-[hover=true]:text-warning"}},{variant:"flat",color:"danger",class:{base:"data-[hover=true]:bg-danger/20 data-[hover=true]:text-danger"}},{variant:"faded",color:"default",class:{base:"data-[hover=true]:text-default-foreground"}},{variant:"faded",color:"primary",class:{base:"data-[hover=true]:text-primary"}},{variant:"faded",color:"secondary",class:{base:"data-[hover=true]:text-secondary"}},{variant:"faded",color:"success",class:{base:"data-[hover=true]:text-success"}},{variant:"faded",color:"warning",class:{base:"data-[hover=true]:text-warning"}},{variant:"faded",color:"danger",class:{base:"data-[hover=true]:text-danger"}},{variant:"light",color:"default",class:{base:"data-[hover=true]:text-default-500"}},{variant:"light",color:"primary",class:{base:"data-[hover=true]:text-primary"}},{variant:"light",color:"secondary",class:{base:"data-[hover=true]:text-secondary"}},{variant:"light",color:"success",class:{base:"data-[hover=true]:text-success"}},{variant:"light",color:"warning",class:{base:"data-[hover=true]:text-warning"}},{variant:"light",color:"danger",class:{base:"data-[hover=true]:text-danger"}}]});Hn({slots:{base:"relative mb-2",heading:"pl-1 text-tiny text-foreground-500",group:"data-[has-title=true]:pt-1",divider:"mt-2"}});Hn({base:"w-full flex flex-col gap-0.5 p-1"});var yX=Hn({base:"flex flex-col gap-2 items-start"}),RM=Hn({slots:{base:["relative","flex","flex-col","w-fit"],wrapper:["group","flex items-center","has-[:disabled]:opacity-60"],input:["absolute","inset-0","border-none","outline-none","bg-transparent","text-transparent"],segmentWrapper:["inline-flex","gap-x-1","py-2"],segment:["h-10","w-10","font-semibold","flex","justify-center","items-center","border-default-200","data-[active=true]:border-default-400","data-[active=true]:scale-110","shadow-sm","hover:bg-danger",...bh],passwordChar:["w-1","h-1","bg-default-800","rounded-full"],caret:["animate-[appearance-in_1s_infinite]","font-extralight","h-full","w-full","flex","justify-center","items-center","text-2xl","h-[50%]","w-px","bg-foreground"],helperWrapper:["text-tiny","mt-0.5","font-extralight",""],errorMessage:["text-tiny text-danger w-full"],description:["text-tiny text-foreground-400"]},variants:{variant:{flat:{segment:["border-transparent","bg-default-100","data-[active=true]:bg-default-200"]},faded:{segment:["bg-default-100","border-medium"]},bordered:{segment:["border-medium"]},underlined:{segment:["shadow-none","relative","box-border","!rounded-none","border-b-medium","shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","border-default-200","after:content-['']","after:w-0","after:origin-center","after:bg-default-foreground","after:absolute","after:left-1/2","after:-translate-x-1/2","after:-bottom-[2px]","after:h-[2px]","data-[active=true]:border-default-300","data-[active=true]:after:w-full","data-[active=true]:scale-100"]}},isDisabled:{true:{segment:"opacity-disabled pointer-events-none",input:"pointer-events-none"}},isInvalid:{true:{}},isReadOnly:{true:{caret:"bg-transparent",segment:"transition-none data-[active=true]:scale-100"}},fullWidth:{true:{base:"w-full"}},radius:{none:{segment:"rounded-none"},sm:{segment:"rounded-sm"},md:{segment:"rounded-md"},lg:{segment:"rounded-lg"},full:{segment:"rounded-full"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{segment:"h-8 min-h-8 w-8 min-w-8 text-small"},md:{segment:"h-10 min-h-10 w-10 min-w-10 text-small"},lg:{segment:"h-12 min-h-12 w-12 min-w-12 text-medium"}},disableAnimation:{true:{segment:"transition-none",caret:"animate-none"},false:{segment:"transition duration-150"}}},defaultVariants:{variant:"flat",color:"default",radius:"md",size:"md"},compoundVariants:[{variant:"flat",color:"default",class:{segment:["bg-default-100","data-[active=true]:bg-default-200"]}},{variant:"flat",color:"primary",class:{segment:["bg-primary-100","data-[active=true]:bg-primary-200","text-primary"],caret:["bg-primary"],passwordChar:["bg-primary"]}},{variant:"flat",color:"secondary",class:{segment:["bg-secondary-100","data-[active=true]:bg-secondary-200","text-secondary"],caret:["bg-secondary"],passwordChar:["bg-secondary"]}},{variant:"flat",color:"success",class:{segment:["bg-success-100","data-[active=true]:bg-success-200","text-success"],caret:["bg-success"],passwordChar:["bg-success"]}},{variant:"flat",color:"warning",class:{segment:["bg-warning-100","data-[active=true]:bg-warning-200","text-warning"],caret:["bg-warning"],passwordChar:["bg-warning"]}},{variant:"flat",color:"danger",class:{segment:["bg-danger-100","data-[active=true]:bg-danger-200","text-danger"],caret:["bg-danger"],passwordChar:["bg-danger"]}},{variant:"faded",color:"default",class:{segment:""}},{variant:"faded",color:"primary",class:{segment:["bg-primary-100","text-primary","border-primary-200","data-[active=true]:border-primary"],caret:["bg-primary"],passwordChar:["bg-primary"]}},{variant:"faded",color:"secondary",class:{segment:["bg-secondary-100","text-secondary","border-secondary-200","data-[active=true]:border-secondary"],caret:["bg-secondary"],passwordChar:["bg-secondary"]}},{variant:"faded",color:"success",class:{segment:["bg-success-100","text-success","border-success-200","data-[active=true]:border-success"],caret:["bg-success"],passwordChar:["bg-success"]}},{variant:"faded",color:"warning",class:{segment:["bg-warning-100","text-warning","border-warning-200","data-[active=true]:border-warning"],caret:["bg-warning"],passwordChar:["bg-warning"]}},{variant:"faded",color:"danger",class:{segment:["bg-danger-100","text-danger","border-danger-200","data-[active=true]:border-danger"],caret:["bg-danger"],passwordChar:["bg-danger"]}},{variant:"bordered",color:"default",class:{segment:"data-[has-value=true]:text-default-foreground data-[active=true]:border-foreground"}},{variant:"bordered",color:"primary",class:{segment:["border-primary-200","text-primary","data-[active=true]:border-primary"],caret:["bg-primary"],passwordChar:["bg-primary"]}},{variant:"bordered",color:"secondary",class:{segment:["border-secondary-200","text-secondary","data-[active=true]:border-secondary"],caret:["bg-secondary"],passwordChar:["bg-secondary"]}},{variant:"bordered",color:"success",class:{segment:["border-success-200","text-success","data-[active=true]:border-success"],caret:["bg-success"],passwordChar:["bg-success"]}},{variant:"bordered",color:"warning",class:{segment:["border-warning-200","text-warning","data-[active=true]:border-warning"],caret:["bg-warning"],passwordChar:["bg-warning"]}},{variant:"bordered",color:"danger",class:{segment:["border-danger-200","text-danger","data-[active=true]:border-danger"],caret:["bg-danger"],passwordChar:["bg-danger"]}},{variant:"underlined",color:"default",class:{segment:"data-[has-value=true]:text-default-foreground after:bg-foreground"}},{variant:"underlined",color:"primary",class:{segment:["border-primary-200","text-primary","after:bg-primary"],caret:["bg-primary"],passwordChar:["bg-primary"]}},{variant:"underlined",color:"secondary",class:{segment:["border-secondary-200","text-secondary","after:bg-secondary"],caret:["bg-secondary"],passwordChar:["bg-secondary"]}},{variant:"underlined",color:"success",class:{segment:["border-success-200","text-success","after:bg-success"],caret:["bg-success"],passwordChar:["bg-success"]}},{variant:"underlined",color:"warning",class:{segment:["border-warning-200","text-warning","after:bg-warning"],caret:["bg-warning"],passwordChar:["bg-warning"]}},{variant:"underlined",color:"danger",class:{segment:["border-danger-200","text-danger","after:bg-danger"],caret:["bg-danger"],passwordChar:["bg-danger"]}},{variant:"flat",isInvalid:!0,class:{segment:["bg-danger-50","data-[active=true]:bg-danger-100","text-danger"],caret:["bg-danger"]}},{variant:"faded",isInvalid:!0,class:{segment:["bg-danger-50","text-danger","border-danger-200","data-[active=true]:border-danger-400"],caret:["bg-danger"]}},{variant:"bordered",isInvalid:!0,class:{segment:["border-danger-200","text-danger","data-[active=true]:border-danger-400"],caret:["bg-danger"]}},{variant:"underlined",isInvalid:!0,class:{segment:["border-danger-200","text-danger","data-[active=true]:after:bg-danger-400"],caret:["bg-danger"]}},{disableAnimation:!1,variant:"underlined",class:{segment:"after:transition-width motion-reduce:after:transition-none"}}]}),U8=Hn({base:["z-0","group","relative","inline-flex","items-center","justify-center","box-border","appearance-none","outline-none","select-none","whitespace-nowrap","min-w-max","font-normal","subpixel-antialiased","overflow-hidden","tap-highlight-transparent","data-[pressed=true]:scale-[0.97]",...bh],variants:{variant:{solid:"",bordered:"border-medium bg-transparent",light:"bg-transparent",flat:"",faded:"border-medium",shadow:"",ghost:"border-medium bg-transparent"},size:{sm:"px-3 min-w-16 h-8 text-tiny gap-2 rounded-small",md:"px-4 min-w-20 h-10 text-small gap-2 rounded-medium",lg:"px-6 min-w-24 h-12 text-medium gap-3 rounded-large"},color:{default:"",primary:"",secondary:"",success:"",warning:"",danger:""},radius:{none:"rounded-none",sm:"rounded-small",md:"rounded-medium",lg:"rounded-large",full:"rounded-full"},fullWidth:{true:"w-full"},isDisabled:{true:"opacity-disabled pointer-events-none"},isInGroup:{true:"[&:not(:first-child):not(:last-child)]:rounded-none"},isIconOnly:{true:"px-0 !gap-0",false:"[&>svg]:max-w-[theme(spacing.8)]"},disableAnimation:{true:"!transition-none data-[pressed=true]:scale-100",false:"transition-transform-colors-opacity motion-reduce:transition-none"}},defaultVariants:{size:"md",variant:"solid",color:"default",fullWidth:!1,isDisabled:!1,isInGroup:!1},compoundVariants:[{variant:"solid",color:"default",class:Yr.solid.default},{variant:"solid",color:"primary",class:Yr.solid.primary},{variant:"solid",color:"secondary",class:Yr.solid.secondary},{variant:"solid",color:"success",class:Yr.solid.success},{variant:"solid",color:"warning",class:Yr.solid.warning},{variant:"solid",color:"danger",class:Yr.solid.danger},{variant:"shadow",color:"default",class:Yr.shadow.default},{variant:"shadow",color:"primary",class:Yr.shadow.primary},{variant:"shadow",color:"secondary",class:Yr.shadow.secondary},{variant:"shadow",color:"success",class:Yr.shadow.success},{variant:"shadow",color:"warning",class:Yr.shadow.warning},{variant:"shadow",color:"danger",class:Yr.shadow.danger},{variant:"bordered",color:"default",class:Yr.bordered.default},{variant:"bordered",color:"primary",class:Yr.bordered.primary},{variant:"bordered",color:"secondary",class:Yr.bordered.secondary},{variant:"bordered",color:"success",class:Yr.bordered.success},{variant:"bordered",color:"warning",class:Yr.bordered.warning},{variant:"bordered",color:"danger",class:Yr.bordered.danger},{variant:"flat",color:"default",class:Yr.flat.default},{variant:"flat",color:"primary",class:Yr.flat.primary},{variant:"flat",color:"secondary",class:Yr.flat.secondary},{variant:"flat",color:"success",class:Yr.flat.success},{variant:"flat",color:"warning",class:Yr.flat.warning},{variant:"flat",color:"danger",class:Yr.flat.danger},{variant:"faded",color:"default",class:Yr.faded.default},{variant:"faded",color:"primary",class:Yr.faded.primary},{variant:"faded",color:"secondary",class:Yr.faded.secondary},{variant:"faded",color:"success",class:Yr.faded.success},{variant:"faded",color:"warning",class:Yr.faded.warning},{variant:"faded",color:"danger",class:Yr.faded.danger},{variant:"light",color:"default",class:[Yr.light.default,"data-[hover=true]:bg-default/40"]},{variant:"light",color:"primary",class:[Yr.light.primary,"data-[hover=true]:bg-primary/20"]},{variant:"light",color:"secondary",class:[Yr.light.secondary,"data-[hover=true]:bg-secondary/20"]},{variant:"light",color:"success",class:[Yr.light.success,"data-[hover=true]:bg-success/20"]},{variant:"light",color:"warning",class:[Yr.light.warning,"data-[hover=true]:bg-warning/20"]},{variant:"light",color:"danger",class:[Yr.light.danger,"data-[hover=true]:bg-danger/20"]},{variant:"ghost",color:"default",class:[Yr.ghost.default,"data-[hover=true]:!bg-default"]},{variant:"ghost",color:"primary",class:[Yr.ghost.primary,"data-[hover=true]:!bg-primary data-[hover=true]:!text-primary-foreground"]},{variant:"ghost",color:"secondary",class:[Yr.ghost.secondary,"data-[hover=true]:!bg-secondary data-[hover=true]:!text-secondary-foreground"]},{variant:"ghost",color:"success",class:[Yr.ghost.success,"data-[hover=true]:!bg-success data-[hover=true]:!text-success-foreground"]},{variant:"ghost",color:"warning",class:[Yr.ghost.warning,"data-[hover=true]:!bg-warning data-[hover=true]:!text-warning-foreground"]},{variant:"ghost",color:"danger",class:[Yr.ghost.danger,"data-[hover=true]:!bg-danger data-[hover=true]:!text-danger-foreground"]},{isInGroup:!0,class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,size:"sm",class:"rounded-none first:rounded-s-small last:rounded-e-small"},{isInGroup:!0,size:"md",class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,size:"lg",class:"rounded-none first:rounded-s-large last:rounded-e-large"},{isInGroup:!0,isRounded:!0,class:"rounded-none first:rounded-s-full last:rounded-e-full"},{isInGroup:!0,radius:"none",class:"rounded-none first:rounded-s-none last:rounded-e-none"},{isInGroup:!0,radius:"sm",class:"rounded-none first:rounded-s-small last:rounded-e-small"},{isInGroup:!0,radius:"md",class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,radius:"lg",class:"rounded-none first:rounded-s-large last:rounded-e-large"},{isInGroup:!0,radius:"full",class:"rounded-none first:rounded-s-full last:rounded-e-full"},{isInGroup:!0,variant:["ghost","bordered"],color:"default",className:_y.default},{isInGroup:!0,variant:["ghost","bordered"],color:"primary",className:_y.primary},{isInGroup:!0,variant:["ghost","bordered"],color:"secondary",className:_y.secondary},{isInGroup:!0,variant:["ghost","bordered"],color:"success",className:_y.success},{isInGroup:!0,variant:["ghost","bordered"],color:"warning",className:_y.warning},{isInGroup:!0,variant:["ghost","bordered"],color:"danger",className:_y.danger},{isIconOnly:!0,size:"sm",class:"min-w-8 w-8 h-8"},{isIconOnly:!0,size:"md",class:"min-w-10 w-10 h-10"},{isIconOnly:!0,size:"lg",class:"min-w-12 w-12 h-12"},{variant:["solid","faded","flat","bordered","shadow"],class:"data-[hover=true]:opacity-hover"}]});Hn({base:"inline-flex items-center justify-center h-auto",variants:{fullWidth:{true:"w-full"}},defaultVariants:{fullWidth:!1}});var IM=Hn({slots:{base:["relative w-fit max-w-full shadow-small inline-block overflow-y-hidden","rounded-large overflow-x-auto bg-default-50 dark:bg-background","w-[calc(var(--visible-months)_*_var(--calendar-width))]"],prevButton:["order-1"],nextButton:["order-3"],headerWrapper:["px-4 py-2 flex items-center justify-between gap-2 bg-content1 overflow-hidden rtl:flex-row-reverse","[&_.chevron-icon]:flex-none","after:content-['']","after:bg-content1 origin-top","after:w-full after:h-0","after:absolute after:top-0 after:left-0"],header:"flex w-full items-center justify-center gap-2 z-10 order-2",title:"text-default-500 text-small font-medium",content:"w-[calc(var(--visible-months)_*_var(--calendar-width))]",gridWrapper:"flex max-w-full overflow-hidden pb-2 h-auto relative",grid:"w-full border-collapse z-0",gridHeader:"bg-content1 shadow-[0px_20px_20px_0px_rgb(0_0_0/0.05)]",gridHeaderRow:"px-4 pb-2 flex justify-center text-default-400",gridHeaderCell:"flex w-8 justify-center items-center font-medium text-small",gridBody:"",gridBodyRow:"flex justify-center items-center first:mt-2",cell:"py-0.5 px-0",cellButton:["w-8 h-8 flex items-center text-foreground justify-center rounded-full","box-border appearance-none select-none whitespace-nowrap font-normal","subpixel-antialiased overflow-hidden tap-highlight-transparent","data-[disabled=true]:text-default-300","data-[disabled=true]:cursor-default","data-[readonly=true]:cursor-default","data-[disabled=true]:transition-none","data-[unavailable=true]:text-default-300","data-[unavailable=true]:cursor-default","data-[unavailable=true]:line-through",...bh],pickerWrapper:"absolute inset-x-0 top-0 flex w-full h-[var(--picker-height)] justify-center opacity-0 pointer-events-none",pickerMonthList:"items-start",pickerYearList:"items-center",pickerHighlight:"h-8 bg-default-200 absolute w-[calc(100%_-_16px)] rounded-medium z-0 top-1/2 -translate-y-1/2 pointer-events-none",pickerItem:["w-full flex text-foreground items-center h-8 leading-[32px] min-h-[32px] snap-center text-large z-20","data-[pressed=true]:opacity-50",...bh],helperWrapper:"px-4 pb-2 max-w-[270px] flex justify-start flex-wrap items-center",errorMessage:"text-small text-danger break-words max-w-full"},variants:{color:{foreground:{},primary:{},secondary:{},success:{},warning:{},danger:{}},isRange:{true:{cellButton:["relative","overflow-visible","before:content-[''] before:absolute before:inset-0 before:z-[-1] before:rounded-none","data-[outside-month=true]:before:hidden","data-[selected=true]:data-[range-selection=true]:data-[outside-month=true]:bg-transparent","data-[selected=true]:data-[range-selection=true]:data-[outside-month=true]:text-default-300","data-[range-start=true]:before:rounded-s-full","data-[selection-start=true]:before:rounded-s-full","data-[range-end=true]:before:rounded-e-full","data-[selection-end=true]:before:rounded-e-full","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:rounded-full","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:rounded-full"]},false:{}},hideDisabledDates:{true:{cellButton:"data-[disabled=true]:data-[outside-month=true]:opacity-0"},false:{}},isHeaderWrapperExpanded:{true:{headerWrapper:["[&_.chevron-icon]:rotate-180","after:h-full","after:z-0"],pickerWrapper:"opacity-100 pointer-events-auto z-10",gridWrapper:"h-[var(--picker-height)] overflow-y-hidden",grid:"opacity-0 pointer-events-none",nextButton:"opacity-0 pointer-events-none",prevButton:"opacity-0 pointer-events-none"},false:{}},showMonthAndYearPickers:{true:{base:"[--picker-height:224px]",header:"h-8 bg-default-100 rounded-full"},false:{}},showShadow:{true:{cellButton:"data-[selected=true]:shadow-md"},false:{cellButton:"shadow-none data-[selected=true]:shadow-none"}},disableAnimation:{true:{cellButton:"transition-none"},false:{headerWrapper:["[&_.chevron-icon]:transition-transform","after:transition-height"],grid:"transition-opacity",cellButton:["origin-center transition-[transform,background-color,color] !duration-150"],pickerWrapper:"transition-opacity !duration-250",pickerItem:"transition-opacity"}},isRTL:{true:{nextButton:"order-1",prevButton:"order-3"},false:{}}},defaultVariants:{color:"primary",showShadow:!1,hideDisabledDates:!1,showMonthAndYearPickers:!1,isRTL:!1},compoundVariants:[{isRange:!1,color:"foreground",class:{cellButton:["data-[hover=true]:bg-default-200","data-[selected=true]:bg-foreground","data-[selected=true]:text-background","data-[hover=true]:bg-foreground-200","data-[hover=true]:text-foreground-600","data-[selected=true]:data-[hover=true]:bg-foreground","data-[selected=true]:data-[hover=true]:text-background"]}},{isRange:!1,color:"primary",class:{cellButton:["data-[selected=true]:bg-primary","data-[selected=true]:text-primary-foreground","data-[hover=true]:bg-primary-50","data-[hover=true]:text-primary-400","data-[selected=true]:data-[hover=true]:bg-primary","data-[selected=true]:data-[hover=true]:text-primary-foreground"]}},{isRange:!1,color:"secondary",class:{cellButton:["data-[selected=true]:bg-secondary","data-[selected=true]:text-secondary-foreground","data-[hover=true]:bg-secondary-50","data-[hover=true]:text-secondary-400","data-[selected=true]:data-[hover=true]:bg-secondary","data-[selected=true]:data-[hover=true]:text-secondary-foreground"]}},{isRange:!1,color:"success",class:{cellButton:["data-[selected=true]:bg-success","data-[selected=true]:text-success-foreground","data-[hover=true]:bg-success-100","data-[hover=true]:text-success-600","dark:data-[hover=true]:bg-success-50","dark:data-[hover=true]:text-success-500","data-[selected=true]:data-[hover=true]:bg-success","dark:data-[selected=true]:data-[hover=true]:bg-success","dark:data-[selected=true]:data-[hover=true]:text-success-foreground","data-[selected=true]:data-[hover=true]:text-success-foreground"]}},{isRange:!1,color:"warning",class:{cellButton:["data-[selected=true]:bg-warning","data-[selected=true]:text-warning-foreground","data-[hover=true]:bg-warning-100","data-[hover=true]:text-warning-600","dark:data-[hover=true]:bg-warning-50","dark:data-[hover=true]:text-warning-500","data-[selected=true]:data-[hover=true]:bg-warning","dark:data-[selected=true]:data-[hover=true]:bg-warning","dark:data-[selected=true]:data-[hover=true]:text-warning-foreground","data-[selected=true]:data-[hover=true]:text-warning-foreground"]}},{isRange:!1,color:"danger",class:{cellButton:["data-[selected=true]:bg-danger","data-[selected=true]:text-danger-foreground","data-[hover=true]:bg-danger-100","data-[hover=true]:text-danger-500","dark:data-[hover=true]:bg-danger-50","dark:data-[hover=true]:text-danger-500","data-[selected=true]:data-[hover=true]:bg-danger","dark:data-[selected=true]:data-[hover=true]:bg-danger","dark:data-[selected=true]:data-[hover=true]:text-danger-foreground","data-[selected=true]:data-[hover=true]:text-danger-foreground"]}},{isRange:!0,color:"foreground",class:{cellButton:["data-[selected=true]:data-[range-selection=true]:before:bg-foreground/10","data-[selected=true]:data-[range-selection=true]:text-foreground","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:bg-foreground","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:text-background","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:bg-foreground","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:text-background"]}},{isRange:!0,color:"primary",class:{cellButton:["data-[selected=true]:data-[range-selection=true]:before:bg-primary-50","data-[selected=true]:data-[range-selection=true]:text-primary","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:bg-primary","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:text-primary-foreground","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:bg-primary","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:text-primary-foreground"]}},{isRange:!0,color:"secondary",class:{cellButton:["data-[selected=true]:data-[range-selection=true]:before:bg-secondary-50","data-[selected=true]:data-[range-selection=true]:text-secondary","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:bg-secondary","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:text-secondary-foreground","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:bg-secondary","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:text-secondary-foreground"]}},{isRange:!0,color:"success",class:{cellButton:["data-[selected=true]:data-[range-selection=true]:before:bg-success-100","data-[selected=true]:data-[range-selection=true]:text-success-600","dark:data-[selected=true]:data-[range-selection=true]:before:bg-success-50","dark:data-[selected=true]:data-[range-selection=true]:text-success-500","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:bg-success","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:text-success-foreground","dark:data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:text-success-foreground","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:bg-success","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:text-success-foreground","dark:data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:text-success-foreground"]}},{isRange:!0,color:"warning",class:{cellButton:["data-[selected=true]:data-[range-selection=true]:before:bg-warning-100","dark:data-[selected=true]:data-[range-selection=true]:before:bg-warning-50","data-[selected=true]:data-[range-selection=true]:text-warning-500","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:bg-warning","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:text-warning-foreground","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:bg-warning","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:text-warning-foreground"]}},{isRange:!0,color:"danger",class:{cellButton:["data-[selected=true]:data-[range-selection=true]:before:bg-danger-50","data-[selected=true]:data-[range-selection=true]:text-danger-500","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:bg-danger","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:text-danger-foreground","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:bg-danger","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:text-danger-foreground"]}},{showShadow:!0,color:"foreground",class:{cellButton:"data-[selected=true]:shadow-foreground/40"}},{showShadow:!0,color:"primary",class:{cellButton:"data-[selected=true]:shadow-primary/40"}},{showShadow:!0,color:"secondary",class:{cellButton:"data-[selected=true]:shadow-secondary/40"}},{showShadow:!0,color:"success",class:{cellButton:"data-[selected=true]:shadow-success/40"}},{showShadow:!0,color:"warning",class:{cellButton:"data-[selected=true]:shadow-warning/40"}},{showShadow:!0,color:"danger",class:{cellButton:"data-[selected=true]:shadow-danger/40"}},{showShadow:!0,isRange:!0,class:{cellButton:["data-[selected=true]:shadow-none","data-[selected=true]:data-[selection-start=true]:shadow-md","data-[selected=true]:data-[selection-end=true]:shadow-md"]}}],compoundSlots:[{slots:["prevButton","nextButton"],class:["text-medium","text-default-400"]},{slots:["pickerMonthList","pickerYearList"],class:["flex flex-col px-4 overflow-y-scroll scrollbar-hide snap-y snap-mandatory","[--scroll-shadow-size:100px]","[mask-image:linear-gradient(#000,#000,transparent_0,#000_var(--scroll-shadow-size),#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]"]}]}),xX=Hn({slots:{base:"group relative max-w-fit inline-flex items-center justify-start cursor-pointer tap-highlight-transparent p-2 -m-2 select-none",wrapper:["relative","inline-flex","items-center","justify-center","flex-shrink-0","overflow-hidden","before:content-['']","before:absolute","before:inset-0","before:border-solid","before:border-2","before:box-border","before:border-default","after:content-['']","after:absolute","after:inset-0","after:scale-50","after:opacity-0","after:origin-center","group-data-[selected=true]:after:scale-100","group-data-[selected=true]:after:opacity-100","group-data-[hover=true]:before:bg-default-100",...t2],hiddenInput:V8,icon:"z-10 w-4 h-3 opacity-0 group-data-[selected=true]:opacity-100 pointer-events-none",label:"relative text-foreground select-none"},variants:{color:{default:{wrapper:"after:bg-default after:text-default-foreground text-default-foreground"},primary:{wrapper:"after:bg-primary after:text-primary-foreground text-primary-foreground"},secondary:{wrapper:"after:bg-secondary after:text-secondary-foreground text-secondary-foreground"},success:{wrapper:"after:bg-success after:text-success-foreground text-success-foreground"},warning:{wrapper:"after:bg-warning after:text-warning-foreground text-warning-foreground"},danger:{wrapper:"after:bg-danger after:text-danger-foreground text-danger-foreground"}},size:{sm:{wrapper:["w-4 h-4 me-2","rounded-[calc(theme(borderRadius.medium)*0.5)]","before:rounded-[calc(theme(borderRadius.medium)*0.5)]","after:rounded-[calc(theme(borderRadius.medium)*0.5)]"],label:"text-small",icon:"w-3 h-2"},md:{wrapper:["w-5 h-5 me-2","rounded-[calc(theme(borderRadius.medium)*0.6)]","before:rounded-[calc(theme(borderRadius.medium)*0.6)]","after:rounded-[calc(theme(borderRadius.medium)*0.6)]"],label:"text-medium",icon:"w-4 h-3"},lg:{wrapper:["w-6 h-6 me-2","rounded-[calc(theme(borderRadius.medium)*0.7)]","before:rounded-[calc(theme(borderRadius.medium)*0.7)]","after:rounded-[calc(theme(borderRadius.medium)*0.7)]"],label:"text-large",icon:"w-5 h-4"}},radius:{none:{wrapper:"rounded-none before:rounded-none after:rounded-none"},sm:{wrapper:["rounded-[calc(theme(borderRadius.medium)*0.5)]","before:rounded-[calc(theme(borderRadius.medium)*0.5)]","after:rounded-[calc(theme(borderRadius.medium)*0.5)]"]},md:{wrapper:["rounded-[calc(theme(borderRadius.medium)*0.6)]","before:rounded-[calc(theme(borderRadius.medium)*0.6)]","after:rounded-[calc(theme(borderRadius.medium)*0.6)]"]},lg:{wrapper:["rounded-[calc(theme(borderRadius.medium)*0.7)]","before:rounded-[calc(theme(borderRadius.medium)*0.7)]","after:rounded-[calc(theme(borderRadius.medium)*0.7)]"]},full:{wrapper:"rounded-full before:rounded-full after:rounded-full"}},lineThrough:{true:{label:["inline-flex","items-center","justify-center","before:content-['']","before:absolute","before:bg-foreground","before:w-0","before:h-0.5","group-data-[selected=true]:opacity-60","group-data-[selected=true]:before:w-full"]}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},isInvalid:{true:{wrapper:"before:border-danger",label:"text-danger"}},disableAnimation:{true:{wrapper:"transition-none",icon:"transition-none",label:"transition-none"},false:{wrapper:["before:transition-colors","group-data-[pressed=true]:scale-95","transition-transform","after:transition-transform-opacity","after:!ease-linear","after:!duration-200","motion-reduce:transition-none"],icon:"transition-opacity motion-reduce:transition-none",label:"transition-colors-opacity before:transition-width motion-reduce:transition-none"}}},defaultVariants:{color:"primary",size:"md",isDisabled:!1,lineThrough:!1}});Hn({slots:{base:"relative flex flex-col gap-2",label:"relative text-medium text-foreground-500",wrapper:"flex flex-col flex-wrap gap-2 data-[orientation=horizontal]:flex-row",description:"text-small text-foreground-400",errorMessage:"text-small text-danger"},variants:{isRequired:{true:{label:"after:content-['*'] after:text-danger after:ml-0.5"}},isInvalid:{true:{description:"text-danger"}},disableAnimation:{true:{},false:{description:"transition-colors !duration-150 motion-reduce:transition-none"}}},defaultVariants:{isInvalid:!1,isRequired:!1}});var p_=Hn({slots:{base:"group flex flex-col",label:["block subpixel-antialiased text-small text-default-600","group-data-[required=true]:after:content-['*'] group-data-[required=true]:after:text-danger group-data-[required=true]:after:ml-0.5","group-data-[invalid=true]:text-danger"],inputWrapper:["relative px-3 gap-3 w-full inline-flex flex-row items-center","cursor-text tap-highlight-transparent shadow-sm"],input:"flex h-full gap-x-0.5 w-full font-normal",innerWrapper:["flex items-center text-default-400 w-full gap-x-2 h-6","group-data-[invalid=true]:text-danger"],segment:["group first:-ml-0.5 [&:not(:first-child)]:-ml-1 px-0.5 my-auto box-content tabular-nums text-start","inline-block outline-none focus:shadow-sm rounded-md","text-foreground-500 data-[editable=true]:text-foreground","data-[editable=true]:data-[placeholder=true]:text-foreground-500","data-[invalid=true]:text-danger-300 data-[invalid=true]:data-[editable=true]:text-danger","data-[invalid=true]:focus:bg-danger-400/50 dark:data-[invalid=true]:focus:bg-danger-400/20","data-[invalid=true]:data-[editable=true]:focus:text-danger"],helperWrapper:"hidden group-data-[has-helper=true]:flex p-1 relative flex-col gap-1.5",description:"text-tiny text-foreground-400",errorMessage:"text-tiny text-danger"},variants:{variant:{flat:{inputWrapper:["bg-default-100","hover:bg-default-200","focus-within:hover:bg-default-100","group-data-[invalid=true]:bg-danger-50","group-data-[invalid=true]:hover:bg-danger-100","group-data-[invalid=true]:focus-within:hover:bg-danger-50"]},faded:{inputWrapper:["bg-default-100","border-medium","border-default-200","hover:border-default-400","group-data-[invalid=true]:bg-danger-50","group-data-[invalid=true]:hover:bg-danger-100","group-data-[invalid=true]:focus-within:hover:bg-danger-50"]},bordered:{inputWrapper:["border-medium","border-default-200","hover:border-default-400","focus-within:border-default-foreground","focus-within:hover:border-default-foreground","group-data-[invalid=true]:border-danger","group-data-[invalid=true]:hover:border-danger","group-data-[invalid=true]:focus-within:hover:border-danger"]},underlined:{inputWrapper:["px-1","pb-1","gap-0","relative","box-border","border-b-medium","shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","border-default-200","!rounded-none","hover:border-default-300","after:content-['']","after:w-0","after:origin-center","after:bg-default-foreground","after:absolute","after:left-1/2","after:-translate-x-1/2","after:-bottom-[2px]","after:h-[2px]","focus-within:after:w-full","group-data-[invalid=true]:after:bg-danger"]}},color:{default:{segment:"focus:bg-default-400/50 data-[editable=true]:focus:text-default-foreground"},primary:{segment:"focus:bg-primary-400/50 data-[editable=true]:focus:text-primary"},secondary:{segment:"focus:bg-secondary-400/50 data-[editable=true]:focus:text-secondary"},success:{segment:"focus:bg-success-400/50 dark:focus:bg-success-400/20 data-[editable=true]:focus:text-success"},warning:{segment:"focus:bg-warning-400/50 dark:focus:bg-warning-400/20 data-[editable=true]:focus:text-warning"},danger:{segment:"focus:bg-danger-400/50 dark:focus:bg-danger-400/20 data-[editable=true]:focus:text-danger"}},size:{sm:{label:"text-tiny",input:"text-small",inputWrapper:"h-8 min-h-8 px-2 rounded-small"},md:{input:"text-small",inputWrapper:"h-10 min-h-10 rounded-medium",clearButton:"text-large"},lg:{label:"text-medium",input:"text-medium",inputWrapper:"h-12 min-h-12 rounded-large"}},radius:{none:{inputWrapper:"rounded-none"},sm:{inputWrapper:"rounded-small"},md:{inputWrapper:"rounded-medium"},lg:{inputWrapper:"rounded-large"},full:{inputWrapper:"rounded-full"}},labelPlacement:{outside:{base:"flex flex-col data-[has-helper=true]:pb-[calc(theme(fontSize.tiny)_+8px)] gap-y-1.5",label:"w-full text-foreground",helperWrapper:"absolute top-[calc(100%_+_2px)] start-0"},"outside-left":{base:"flex-row items-center data-[has-helper=true]:pb-[calc(theme(fontSize.tiny)_+_8px)] gap-x-2 flex-nowrap",label:"relative text-foreground",inputWrapper:"relative flex-1",helperWrapper:"absolute top-[calc(100%_+_2px)] start-0"},inside:{label:"w-full text-tiny cursor-text",inputWrapper:"flex-col items-start justify-center gap-0"}},fullWidth:{true:{base:"w-full",inputWrapper:"w-full"}},isDisabled:{true:{base:"opacity-disabled pointer-events-none",inputWrapper:"pointer-events-none",label:"pointer-events-none"}},disableAnimation:{true:{label:"transition-none",input:"transition-none",inputWrapper:"transition-none"},false:{label:["!ease-out","!duration-200","will-change-auto","motion-reduce:transition-none","transition-[color,opacity]"],inputWrapper:"transition-background motion-reduce:transition-none !duration-150",segment:"transition-colors motion-reduce:transition-none"}}},defaultVariants:{variant:"flat",color:"default",size:"md",fullWidth:!0,isDisabled:!1},compoundVariants:[{variant:"flat",color:"primary",class:{innerWrapper:"text-primary",inputWrapper:["bg-primary-100","hover:bg-primary-50","focus-within:bg-primary-50"],segment:"text-primary-300 data-[editable=true]:data-[placeholder=true]:text-primary-300 data-[editable=true]:text-primary",label:"text-primary"}},{variant:"flat",color:"secondary",class:{innerWrapper:"text-secondary",inputWrapper:["bg-secondary-100","hover:bg-secondary-50","focus-within:bg-secondary-50"],segment:"text-secondary-300 data-[editable=true]:data-[placeholder=true]:text-secondary-300 data-[editable=true]:text-secondary",label:"text-secondary"}},{variant:"flat",color:"success",class:{innerWrapper:"text-success-600 dark:text-success",inputWrapper:["bg-success-100","hover:bg-success-50","focus-within:bg-success-50"],segment:"text-success-400 data-[editable=true]:data-[placeholder=true]:text-success-400 data-[editable=true]:text-success-600 data-[editable=true]:focus:text-success-600",label:"text-success-600 dark:text-success"}},{variant:"flat",color:"warning",class:{innerWrapper:"text-warning-600 dark:text-warning",inputWrapper:["bg-warning-100","hover:bg-warning-50","focus-within:bg-warning-50"],segment:"text-warning-400 data-[editable=true]:data-[placeholder=true]:text-warning-400 data-[editable=true]:text-warning-600 data-[editable=true]:focus:text-warning-600",label:"text-warning-600 dark:text-warning"}},{variant:"flat",color:"danger",class:{innerWrapper:"text-danger",inputWrapper:["bg-danger-100","hover:bg-danger-50","focus-within:bg-danger-50"],segment:"text-danger-300 data-[editable=true]:data-[placeholder=true]:text-danger-300 data-[editable=true]:text-danger",label:"text-danger"}},{variant:"faded",color:"primary",class:{innerWrapper:"text-primary",inputWrapper:["hover:border-primary","focus-within:border-primary","focus-within:hover:border-primary"],label:"text-primary"}},{variant:"faded",color:"secondary",class:{innerWrapper:"text-secondary",inputWrapper:["hover:border-secondary","focus-within:border-secondary","focus-within:hover:border-secondary"],label:"text-secondary"}},{variant:"faded",color:"success",class:{innerWrapper:"text-success",inputWrapper:["hover:border-success","focus-within:border-success","focus-within:hover:border-success"],label:"text-success"}},{variant:"faded",color:"warning",class:{innerWrapper:"text-warning",inputWrapper:["hover:border-warning","focus-within:border-warning","focus-within:hover:border-warning"],label:"text-warning"}},{variant:"faded",color:"danger",class:{innerWrapper:"text-danger",inputWrapper:["hover:border-danger","focus-within:border-danger","focus-within:hover:border-danger"],label:"text-danger"}},{variant:"bordered",color:"primary",class:{innerWrapper:"text-primary",inputWrapper:["focus-within:border-primary","focus-within:hover:border-primary"],label:"text-primary"}},{variant:"bordered",color:"secondary",class:{innerWrapper:"text-secondary",inputWrapper:["focus-within:border-secondary","focus-within:hover:border-secondary"],label:"text-secondary"}},{variant:"bordered",color:"success",class:{innerWrapper:"text-success",inputWrapper:["focus-within:border-success","focus-within:hover:border-success"],label:"text-success"}},{variant:"bordered",color:"warning",class:{innerWrapper:"text-warning",inputWrapper:["focus-within:border-warning","focus-within:hover:border-warning"],label:"text-warning"}},{variant:"bordered",color:"danger",class:{innerWrapper:"text-danger",inputWrapper:["focus-within:border-danger","focus-within:hover:border-danger"],label:"text-danger"}},{variant:"underlined",color:"primary",class:{innerWrapper:"text-primary",inputWrapper:"after:bg-primary",label:"text-primary"}},{variant:"underlined",color:"secondary",class:{innerWrapper:"text-secondary",inputWrapper:"after:bg-secondary",label:"text-secondary"}},{variant:"underlined",color:"success",class:{innerWrapper:"text-success",inputWrapper:"after:bg-success",label:"text-success"}},{variant:"underlined",color:"warning",class:{innerWrapper:"text-warning",inputWrapper:"after:bg-warning",label:"text-warning"}},{variant:"underlined",color:"danger",class:{innerWrapper:"text-danger",inputWrapper:"after:bg-danger",label:"text-danger"}},{labelPlacement:"inside",size:"sm",class:{inputWrapper:"h-12 py-1.5 px-3"}},{labelPlacement:"inside",size:"md",class:{inputWrapper:"h-14 py-2"}},{labelPlacement:"inside",size:"lg",class:{label:"text-medium",inputWrapper:"h-16 py-2.5 gap-0"}},{disableAnimation:!1,variant:["faded","bordered"],class:{inputWrapper:"transition-colors motion-reduce:transition-none"}},{disableAnimation:!1,variant:"underlined",class:{inputWrapper:"after:transition-width motion-reduce:after:transition-none"}}]}),G8=Hn({slots:{base:"group w-full",selectorButton:"-mx-2 text-inherit",selectorIcon:"text-lg text-inherit pointer-events-none flex-shrink-0",popoverContent:"p-0 w-full",calendar:"w-[calc(var(--visible-months)_*_var(--calendar-width))] shadow-none",calendarContent:"w-[calc(var(--visible-months)_*_var(--calendar-width))]",timeInputLabel:"font-medium",timeInput:"px-5 pb-4 flex-wrap gap-x-6"}});Hn({extend:G8,slots:{calendar:"group",bottomContent:"flex flex-col gap-y-2",timeInputWrapper:"flex flex-col group-data-[has-multiple-months=true]:flex-row",separator:"-mx-1 text-inherit"}});var zM=Hn({slots:{base:"flex flex-grow flex-row w-full items-start py-3 px-4 gap-x-1",mainWrapper:"h-full flex-grow min-h-10 ms-2 flex flex-col box-border items-start text-inherit justify-center",title:"text-small w-full font-medium block text-inherit leading-5",description:"pl-[1px] text-small font-normal text-inherit",closeButton:"relative text-inherit translate-x-1 -translate-y-1",iconWrapper:"flex-none relative w-9 h-9 rounded-full grid place-items-center",alertIcon:"fill-current w-6 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},variants:{color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},variant:{solid:{},flat:{},faded:{base:"border-small"},bordered:{base:"border-small bg-transparent"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},hideIcon:{true:{iconWrapper:"hidden"}},hideIconWrapper:{true:{base:"gap-x-0",iconWrapper:"!bg-transparent !shadow-none !border-none"}},hasContent:{false:{base:"items-start",mainWrapper:"justify-center items-center"}}},defaultVariants:{color:"default",variant:"flat",radius:"md",hideIcon:!1,hideIconWrapper:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:Yr.solid.default,closeButton:"data-[hover]:bg-default-100",alertIcon:"text-default-foreground"}},{variant:"solid",color:"primary",class:{base:Yr.solid.primary}},{variant:"solid",color:"secondary",class:{base:Yr.solid.secondary}},{variant:"solid",color:"success",class:{base:Yr.solid.success}},{variant:"solid",color:"warning",class:{base:Yr.solid.warning}},{variant:"solid",color:"danger",class:{base:Yr.solid.danger}},{variant:["flat","faded"],color:"default",class:{base:[Yr.flat.default,"bg-default-100 dark:bg-default-50/50","text-default-foreground"],description:"text-default-600",closeButton:"text-default-400",iconWrapper:"bg-default-50 dark:bg-default-100 border-default-200"}},{variant:["flat","faded"],color:"primary",class:{base:[Yr.flat.primary,"bg-primary-50 dark:bg-primary-50/50"],closeButton:"text-primary-500 data-[hover]:bg-primary-200",iconWrapper:"bg-primary-50 dark:bg-primary-100 border-primary-100"}},{variant:["flat","faded"],color:"secondary",class:{base:[Yr.flat.secondary,"bg-secondary-50 dark:bg-secondary-50/50"],closeButton:"text-secondary-500 data-[hover]:bg-secondary-200",iconWrapper:"bg-secondary-50 dark:bg-secondary-100 border-secondary-100"}},{variant:["flat","faded"],color:"success",class:{base:[Yr.flat.success,"bg-success-50 dark:bg-success-50/50"],closeButton:"text-success-500 data-[hover]:bg-success-200",iconWrapper:"bg-success-50 dark:bg-success-100 border-success-100"}},{variant:["flat","faded"],color:"warning",class:{base:[Yr.flat.warning,"bg-warning-50 dark:bg-warning-50/50"],closeButton:"text-warning-500 data-[hover]:bg-warning-200",iconWrapper:"bg-warning-50 dark:bg-warning-100 border-warning-100"}},{variant:["flat","faded"],color:"danger",class:{base:[Yr.flat.danger,"bg-danger-50 dark:bg-danger-50/50"],closeButton:"text-danger-500 data-[hover]:bg-danger-200",iconWrapper:"bg-danger-50 dark:bg-danger-100 border-danger-100"}},{variant:"faded",color:"default",class:{base:"border-default-300 dark:border-default-200"}},{variant:"faded",color:"primary",class:{base:"border-primary-200 dark:border-primary-100"}},{variant:"faded",color:"secondary",class:{base:"border-secondary-200"}},{variant:"faded",color:"success",class:{base:"border-success-300 dark:border-success-100"}},{variant:"faded",color:"warning",class:{base:"border-warning-300 dark:border-warning-100"}},{variant:"faded",color:"danger",class:{base:"border-danger-200 dark:border-danger-100"}},{variant:"bordered",color:"default",class:{base:[Yr.bordered.default],description:"text-default-600",closeButton:"text-default-400"}},{variant:"bordered",color:"primary",class:{base:[Yr.bordered.primary],closeButton:"data-[hover]:bg-primary-50"}},{variant:"bordered",color:"secondary",class:{base:[Yr.bordered.secondary],closeButton:"data-[hover]:bg-secondary-50"}},{variant:"bordered",color:"success",class:{base:[Yr.bordered.success],closeButton:"data-[hover]:bg-success-50"}},{variant:"bordered",color:"warning",class:{base:[Yr.bordered.warning],closeButton:"data-[hover]:bg-warning-100"}},{variant:"bordered",color:"danger",class:{base:[Yr.bordered.danger],closeButton:"data-[hover]:bg-danger-50"}},{variant:["flat","bordered","faded"],class:{iconWrapper:"shadow-small"}},{variant:["flat","faded"],class:{iconWrapper:"shadow-small border-1"}},{variant:"bordered",color:"default",class:{iconWrapper:"bg-default-200 dark:bg-default-100"}},{variant:"bordered",color:"primary",class:{iconWrapper:"bg-primary-100 dark:bg-primary-50"}},{variant:"bordered",color:"secondary",class:{iconWrapper:"bg-secondary-100 dark:bg-secondary-50"}},{variant:"bordered",color:"success",class:{iconWrapper:"bg-success-100 dark:bg-success-50"}},{variant:"bordered",color:"warning",class:{iconWrapper:"bg-warning-100 dark:bg-warning-50"}},{variant:"bordered",color:"danger",class:{iconWrapper:"bg-danger-100 dark:bg-danger-50"}}]}),vX=(e,t)=>{if(!e&&!t)return{};const i=new Set([...Object.keys(e||{}),...Object.keys(t||{})]);return Array.from(i).reduce((c,h)=>({...c,[h]:Br(e==null?void 0:e[h],t==null?void 0:t[h])}),{})};function H8(e){var t,i,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=H8(e[t]))&&(c&&(c+=" "),c+=i);else for(t in e)e[t]&&(c&&(c+=" "),c+=t);return c}function _X(){for(var e,t,i=0,c="";i<arguments.length;)(e=arguments[i++])&&(t=H8(e))&&(c&&(c+=" "),c+=t);return c}var bX=O8({extend:AS});function Zg(...e){return bX(_X(e))}const wX="modulepreload",SX=function(e){return"/"+e},LM={},km=function(t,i,c){let h=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const w=document.querySelector("meta[property=csp-nonce]"),n=(w==null?void 0:w.nonce)||(w==null?void 0:w.getAttribute("nonce"));h=Promise.allSettled(i.map(k=>{if(k=SX(k),k in LM)return;LM[k]=!0;const N=k.endsWith(".css"),B=N?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${k}"]${B}`))return;const F=document.createElement("link");if(F.rel=N?"stylesheet":wX,N||(F.as="script"),F.crossOrigin="",F.href=k,n&&F.setAttribute("nonce",n),document.head.appendChild(F),N)return new Promise((G,Q)=>{F.addEventListener("load",G),F.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${k}`)))})}))}function _(w){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=w,window.dispatchEvent(n),!n.defaultPrevented)throw w}return h.then(w=>{for(const n of w||[])n.status==="rejected"&&_(n.reason);return t().catch(_)})};function LS(e){return DU()?e.altKey:e.ctrlKey}function G1(e,t){var i,c;let h=`[data-key="${CSS.escape(String(t))}"]`,_=(i=e.current)===null||i===void 0?void 0:i.dataset.collection;return _&&(h=`[data-collection="${CSS.escape(_)}"]${h}`),(c=e.current)===null||c===void 0?void 0:c.querySelector(h)}const q8=new WeakMap;function TX(e){let t=Ns();return q8.set(e,t),t}function EX(e){return q8.get(e)}const CX=1e3;function DX(e){let{keyboardDelegate:t,selectionManager:i,onTypeSelect:c}=e,h=V.useRef({search:"",timeout:void 0}).current,_=w=>{let n=PX(w.key);if(!(!n||w.ctrlKey||w.metaKey||!w.currentTarget.contains(w.target))){if(n===" "&&h.search.trim().length>0&&(w.preventDefault(),"continuePropagation"in w||w.stopPropagation()),h.search+=n,t.getKeyForSearch!=null){let k=t.getKeyForSearch(h.search,i.focusedKey);k==null&&(k=t.getKeyForSearch(h.search)),k!=null&&(i.setFocusedKey(k),c&&c(k))}clearTimeout(h.timeout),h.timeout=setTimeout(()=>{h.search=""},CX)}};return{typeSelectProps:{onKeyDownCapture:t.getKeyForSearch?_:void 0}}}function PX(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function MX(e){let{selectionManager:t,keyboardDelegate:i,ref:c,autoFocus:h=!1,shouldFocusWrap:_=!1,disallowEmptySelection:w=!1,disallowSelectAll:n=!1,selectOnFocus:k=t.selectionBehavior==="replace",disallowTypeAhead:N=!1,shouldUseVirtualFocus:B,allowsTabNavigation:F=!1,isVirtualized:G,scrollRef:Q=c,linkBehavior:te="action"}=e,{direction:Y}=Ms(),oe=Fw(),de=Le=>{var Re;if(Le.altKey&&Le.key==="Tab"&&Le.preventDefault(),!(!((Re=c.current)===null||Re===void 0)&&Re.contains(Le.target)))return;const Ge=(Se,ur)=>{if(Se!=null){if(t.isLink(Se)&&te==="selection"&&k&&!LS(Le)){Iw.flushSync(()=>{t.setFocusedKey(Se,ur)});let Sr=G1(c,Se),yt=t.getItemProps(Se);Sr&&oe.open(Sr,Le,yt.href,yt.routerOptions);return}if(t.setFocusedKey(Se,ur),t.isLink(Se)&&te==="override")return;Le.shiftKey&&t.selectionMode==="multiple"?t.extendSelection(Se):k&&!LS(Le)&&t.replaceSelection(Se)}};switch(Le.key){case"ArrowDown":if(i.getKeyBelow){var ze,ot,Ee;let Se=t.focusedKey!=null?(ze=i.getKeyBelow)===null||ze===void 0?void 0:ze.call(i,t.focusedKey):(ot=i.getFirstKey)===null||ot===void 0?void 0:ot.call(i);Se==null&&_&&(Se=(Ee=i.getFirstKey)===null||Ee===void 0?void 0:Ee.call(i,t.focusedKey)),Se!=null&&(Le.preventDefault(),Ge(Se))}break;case"ArrowUp":if(i.getKeyAbove){var Ke,nt,Xe;let Se=t.focusedKey!=null?(Ke=i.getKeyAbove)===null||Ke===void 0?void 0:Ke.call(i,t.focusedKey):(nt=i.getLastKey)===null||nt===void 0?void 0:nt.call(i);Se==null&&_&&(Se=(Xe=i.getLastKey)===null||Xe===void 0?void 0:Xe.call(i,t.focusedKey)),Se!=null&&(Le.preventDefault(),Ge(Se))}break;case"ArrowLeft":if(i.getKeyLeftOf){var ut,Pt,Ct;let Se=t.focusedKey!=null?(ut=i.getKeyLeftOf)===null||ut===void 0?void 0:ut.call(i,t.focusedKey):null;Se==null&&_&&(Se=Y==="rtl"?(Pt=i.getFirstKey)===null||Pt===void 0?void 0:Pt.call(i,t.focusedKey):(Ct=i.getLastKey)===null||Ct===void 0?void 0:Ct.call(i,t.focusedKey)),Se!=null&&(Le.preventDefault(),Ge(Se,Y==="rtl"?"first":"last"))}break;case"ArrowRight":if(i.getKeyRightOf){var Zt,Dt,er;let Se=t.focusedKey!=null?(Zt=i.getKeyRightOf)===null||Zt===void 0?void 0:Zt.call(i,t.focusedKey):null;Se==null&&_&&(Se=Y==="rtl"?(Dt=i.getLastKey)===null||Dt===void 0?void 0:Dt.call(i,t.focusedKey):(er=i.getFirstKey)===null||er===void 0?void 0:er.call(i,t.focusedKey)),Se!=null&&(Le.preventDefault(),Ge(Se,Y==="rtl"?"last":"first"))}break;case"Home":if(i.getFirstKey){if(t.focusedKey===null&&Le.shiftKey)return;Le.preventDefault();let Se=i.getFirstKey(t.focusedKey,My(Le));t.setFocusedKey(Se),Se!=null&&(My(Le)&&Le.shiftKey&&t.selectionMode==="multiple"?t.extendSelection(Se):k&&t.replaceSelection(Se))}break;case"End":if(i.getLastKey){if(t.focusedKey===null&&Le.shiftKey)return;Le.preventDefault();let Se=i.getLastKey(t.focusedKey,My(Le));t.setFocusedKey(Se),Se!=null&&(My(Le)&&Le.shiftKey&&t.selectionMode==="multiple"?t.extendSelection(Se):k&&t.replaceSelection(Se))}break;case"PageDown":if(i.getKeyPageBelow&&t.focusedKey!=null){let Se=i.getKeyPageBelow(t.focusedKey);Se!=null&&(Le.preventDefault(),Ge(Se))}break;case"PageUp":if(i.getKeyPageAbove&&t.focusedKey!=null){let Se=i.getKeyPageAbove(t.focusedKey);Se!=null&&(Le.preventDefault(),Ge(Se))}break;case"a":My(Le)&&t.selectionMode==="multiple"&&n!==!0&&(Le.preventDefault(),t.selectAll());break;case"Escape":!w&&t.selectedKeys.size!==0&&(Le.stopPropagation(),Le.preventDefault(),t.clearSelection());break;case"Tab":if(!F){if(Le.shiftKey)c.current.focus();else{let Se=Ho(c.current,{tabbable:!0}),ur,Sr;do Sr=Se.lastChild(),Sr&&(ur=Sr);while(Sr);ur&&!ur.contains(document.activeElement)&&pl(ur)}break}}},ge=V.useRef({top:0,left:0});gm(Q,"scroll",G?void 0:()=>{var Le,Re,Ge,ze;ge.current={top:(Ge=(Le=Q.current)===null||Le===void 0?void 0:Le.scrollTop)!==null&&Ge!==void 0?Ge:0,left:(ze=(Re=Q.current)===null||Re===void 0?void 0:Re.scrollLeft)!==null&&ze!==void 0?ze:0}});let be=Le=>{if(t.isFocused){Le.currentTarget.contains(Le.target)||t.setFocused(!1);return}if(Le.currentTarget.contains(Le.target)){if(t.setFocused(!0),t.focusedKey==null){var Re,Ge;let Ee=nt=>{nt!=null&&(t.setFocusedKey(nt),k&&!t.isSelected(nt)&&t.replaceSelection(nt))},Ke=Le.relatedTarget;var ze,ot;Ke&&Le.currentTarget.compareDocumentPosition(Ke)&Node.DOCUMENT_POSITION_FOLLOWING?Ee((ze=t.lastSelectedKey)!==null&&ze!==void 0?ze:(Re=i.getLastKey)===null||Re===void 0?void 0:Re.call(i)):Ee((ot=t.firstSelectedKey)!==null&&ot!==void 0?ot:(Ge=i.getFirstKey)===null||Ge===void 0?void 0:Ge.call(i))}else!G&&Q.current&&(Q.current.scrollTop=ge.current.top,Q.current.scrollLeft=ge.current.left);if(t.focusedKey!=null&&Q.current){let Ee=G1(c,t.focusedKey);Ee instanceof HTMLElement&&(!Ee.contains(document.activeElement)&&!B&&pl(Ee),Sm()==="keyboard"&&lw(Ee,{containingElement:c.current}))}}},pe=Le=>{Le.currentTarget.contains(Le.relatedTarget)||t.setFocused(!1)},we=V.useRef(!1);gm(c,OU,B?Le=>{let{detail:Re}=Le;Le.stopPropagation(),t.setFocused(!0),(Re==null?void 0:Re.focusStrategy)==="first"&&(we.current=!0)}:void 0);let ke=Zs(()=>{var Le,Re;let Ge=(Re=(Le=i.getFirstKey)===null||Le===void 0?void 0:Le.call(i))!==null&&Re!==void 0?Re:null;Ge==null?(oR(c.current),t.collection.size>0&&(we.current=!1)):(t.setFocusedKey(Ge),we.current=!1)});PD(()=>{we.current&&ke()},[t.collection,ke]);let Ae=Zs(()=>{t.collection.size>0&&(we.current=!1)});PD(()=>{Ae()},[t.focusedKey,Ae]),gm(c,jU,B?Le=>{var Re;Le.stopPropagation(),t.setFocused(!1),!((Re=Le.detail)===null||Re===void 0)&&Re.clearFocusKey&&t.setFocusedKey(null)}:void 0);const re=V.useRef(h),Te=V.useRef(!1);V.useEffect(()=>{if(re.current){var Le,Re;let ot=null;var Ge;h==="first"&&(ot=(Ge=(Le=i.getFirstKey)===null||Le===void 0?void 0:Le.call(i))!==null&&Ge!==void 0?Ge:null);var ze;h==="last"&&(ot=(ze=(Re=i.getLastKey)===null||Re===void 0?void 0:Re.call(i))!==null&&ze!==void 0?ze:null);let Ee=t.selectedKeys;if(Ee.size){for(let Ke of Ee)if(t.canSelectItem(Ke)){ot=Ke;break}}t.setFocused(!0),t.setFocusedKey(ot),ot==null&&!B&&c.current&&r0(c.current),t.collection.size>0&&(re.current=!1,Te.current=!0)}});let se=V.useRef(t.focusedKey);V.useEffect(()=>{if(t.isFocused&&t.focusedKey!=null&&(t.focusedKey!==se.current||Te.current)&&Q.current&&c.current){let Le=Sm(),Re=G1(c,t.focusedKey);if(!(Re instanceof HTMLElement))return;(Le==="keyboard"||Te.current)&&(Nk(Q.current,Re),Le!=="virtual"&&lw(Re,{containingElement:c.current}))}!B&&t.isFocused&&t.focusedKey==null&&se.current!=null&&c.current&&r0(c.current),se.current=t.focusedKey,Te.current=!1}),gm(c,"react-aria-focus-scope-restore",Le=>{Le.preventDefault(),t.setFocused(!0)});let ue={onKeyDown:de,onFocus:be,onBlur:pe,onMouseDown(Le){Q.current===Le.target&&Le.preventDefault()}},{typeSelectProps:De}=DX({keyboardDelegate:i,selectionManager:t});N||(ue=xr(De,ue));let ce;B||(ce=t.focusedKey==null?0:-1);let je=TX(t.collection);return{collectionProps:xr(ue,{tabIndex:ce,"data-collection":je})}}function AX(e){let{id:t,selectionManager:i,key:c,ref:h,shouldSelectOnPressUp:_,shouldUseVirtualFocus:w,focus:n,isDisabled:k,onAction:N,allowsDifferentPressOrigin:B,linkBehavior:F="action"}=e,G=Fw();t=Ns(t);let Q=ze=>{if(ze.pointerType==="keyboard"&&LS(ze))i.toggleSelection(c);else{if(i.selectionMode==="none")return;if(i.isLink(c)){if(F==="selection"&&h.current){let ot=i.getItemProps(c);G.open(h.current,ze,ot.href,ot.routerOptions),i.setSelectedKeys(i.selectedKeys);return}else if(F==="override"||F==="none")return}i.selectionMode==="single"?i.isSelected(c)&&!i.disallowEmptySelection?i.toggleSelection(c):i.replaceSelection(c):ze&&ze.shiftKey?i.extendSelection(c):i.selectionBehavior==="toggle"||ze&&(My(ze)||ze.pointerType==="touch"||ze.pointerType==="virtual")?i.toggleSelection(c):i.replaceSelection(c)}};V.useEffect(()=>{c===i.focusedKey&&i.isFocused&&(w?oR(h.current):n?n():document.activeElement!==h.current&&h.current&&r0(h.current))},[h,c,i.focusedKey,i.childFocusStrategy,i.isFocused,w]),k=k||i.isDisabled(c);let te={};!w&&!k?te={tabIndex:c===i.focusedKey?0:-1,onFocus(ze){ze.target===h.current&&i.setFocusedKey(c)}}:k&&(te.onMouseDown=ze=>{ze.preventDefault()});let Y=i.isLink(c)&&F==="override",oe=i.isLink(c)&&F!=="selection"&&F!=="none",de=!k&&i.canSelectItem(c)&&!Y,ge=(N||oe)&&!k,be=ge&&(i.selectionBehavior==="replace"?!de:!de||i.isEmpty),pe=ge&&de&&i.selectionBehavior==="replace",we=be||pe,ke=V.useRef(null),Ae=we&&de,re=V.useRef(!1),Te=V.useRef(!1),se=ze=>{if(N&&N(),oe&&h.current){let ot=i.getItemProps(c);G.open(h.current,ze,ot.href,ot.routerOptions)}},ue={};_?(ue.onPressStart=ze=>{ke.current=ze.pointerType,re.current=Ae,ze.pointerType==="keyboard"&&(!we||NM())&&Q(ze)},B?(ue.onPressUp=be?void 0:ze=>{ze.pointerType==="mouse"&&de&&Q(ze)},ue.onPress=be?se:ze=>{ze.pointerType!=="keyboard"&&ze.pointerType!=="mouse"&&de&&Q(ze)}):ue.onPress=ze=>{if(be||pe&&ze.pointerType!=="mouse"){if(ze.pointerType==="keyboard"&&!$M())return;se(ze)}else ze.pointerType!=="keyboard"&&de&&Q(ze)}):(ue.onPressStart=ze=>{ke.current=ze.pointerType,re.current=Ae,Te.current=be,de&&(ze.pointerType==="mouse"&&!be||ze.pointerType==="keyboard"&&(!ge||NM()))&&Q(ze)},ue.onPress=ze=>{(ze.pointerType==="touch"||ze.pointerType==="pen"||ze.pointerType==="virtual"||ze.pointerType==="keyboard"&&we&&$M()||ze.pointerType==="mouse"&&Te.current)&&(we?se(ze):de&&Q(ze))}),te["data-collection"]=EX(i.collection),te["data-key"]=c,ue.preventFocusOnPress=w,w&&(ue=xr(ue,{onPressStart(ze){ze.pointerType!=="touch"&&(i.setFocused(!0),i.setFocusedKey(c))},onPress(ze){ze.pointerType==="touch"&&(i.setFocused(!0),i.setFocusedKey(c))}}));let{pressProps:De,isPressed:ce}=wu(ue),je=pe?ze=>{ke.current==="mouse"&&(ze.stopPropagation(),ze.preventDefault(),se(ze))}:void 0,{longPressProps:Le}=aR({isDisabled:!Ae,onLongPress(ze){ze.pointerType==="touch"&&(Q(ze),i.setSelectionBehavior("toggle"))}}),Re=ze=>{ke.current==="touch"&&re.current&&ze.preventDefault()},Ge=i.isLink(c)?ze=>{wm.isOpening||ze.preventDefault()}:void 0;return{itemProps:xr(te,de||be||w?De:{},Ae?Le:{},{onDoubleClick:je,onDragStartCapture:Re,onClick:Ge,id:t},w?{onMouseDown:ze=>ze.preventDefault()}:void 0),isPressed:ce,isSelected:i.isSelected(c),isFocused:i.isFocused&&i.focusedKey===c,isDisabled:k,allowsSelection:de,hasAction:we}}function $M(){let e=window.event;return(e==null?void 0:e.key)==="Enter"}function NM(){let e=window.event;return(e==null?void 0:e.key)===" "||(e==null?void 0:e.code)==="Space"}class BM{getItemRect(t){let i=this.ref.current;if(!i)return null;let c=t!=null?G1(this.ref,t):null;if(!c)return null;let h=i.getBoundingClientRect(),_=c.getBoundingClientRect();return{x:_.left-h.left+i.scrollLeft,y:_.top-h.top+i.scrollTop,width:_.width,height:_.height}}getContentSize(){let t=this.ref.current;var i,c;return{width:(i=t==null?void 0:t.scrollWidth)!==null&&i!==void 0?i:0,height:(c=t==null?void 0:t.scrollHeight)!==null&&c!==void 0?c:0}}getVisibleRect(){let t=this.ref.current;var i,c,h,_;return{x:(i=t==null?void 0:t.scrollLeft)!==null&&i!==void 0?i:0,y:(c=t==null?void 0:t.scrollTop)!==null&&c!==void 0?c:0,width:(h=t==null?void 0:t.offsetWidth)!==null&&h!==void 0?h:0,height:(_=t==null?void 0:t.offsetHeight)!==null&&_!==void 0?_:0}}constructor(t){this.ref=t}}class kX{isDisabled(t){var i;return this.disabledBehavior==="all"&&(((i=t.props)===null||i===void 0?void 0:i.isDisabled)||this.disabledKeys.has(t.key))}findNextNonDisabled(t,i){let c=t;for(;c!=null;){let h=this.collection.getItem(c);if((h==null?void 0:h.type)==="item"&&!this.isDisabled(h))return c;c=i(c)}return null}getNextKey(t){let i=t;return i=this.collection.getKeyAfter(i),this.findNextNonDisabled(i,c=>this.collection.getKeyAfter(c))}getPreviousKey(t){let i=t;return i=this.collection.getKeyBefore(i),this.findNextNonDisabled(i,c=>this.collection.getKeyBefore(c))}findKey(t,i,c){let h=t,_=this.layoutDelegate.getItemRect(h);if(!_||h==null)return null;let w=_;do{if(h=i(h),h==null)break;_=this.layoutDelegate.getItemRect(h)}while(_&&c(w,_)&&h!=null);return h}isSameRow(t,i){return t.y===i.y||t.x!==i.x}isSameColumn(t,i){return t.x===i.x||t.y!==i.y}getKeyBelow(t){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(t,i=>this.getNextKey(i),this.isSameRow):this.getNextKey(t)}getKeyAbove(t){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(t,i=>this.getPreviousKey(i),this.isSameRow):this.getPreviousKey(t)}getNextColumn(t,i){return i?this.getPreviousKey(t):this.getNextKey(t)}getKeyRightOf(t){let i=this.direction==="ltr"?"getKeyRightOf":"getKeyLeftOf";return this.layoutDelegate[i]?(t=this.layoutDelegate[i](t),this.findNextNonDisabled(t,c=>this.layoutDelegate[i](c))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(t,this.direction==="rtl"):this.findKey(t,c=>this.getNextColumn(c,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(t,this.direction==="rtl"):null}getKeyLeftOf(t){let i=this.direction==="ltr"?"getKeyLeftOf":"getKeyRightOf";return this.layoutDelegate[i]?(t=this.layoutDelegate[i](t),this.findNextNonDisabled(t,c=>this.layoutDelegate[i](c))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(t,this.direction==="ltr"):this.findKey(t,c=>this.getNextColumn(c,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(t,this.direction==="ltr"):null}getFirstKey(){let t=this.collection.getFirstKey();return this.findNextNonDisabled(t,i=>this.collection.getKeyAfter(i))}getLastKey(){let t=this.collection.getLastKey();return this.findNextNonDisabled(t,i=>this.collection.getKeyBefore(i))}getKeyPageAbove(t){let i=this.ref.current,c=this.layoutDelegate.getItemRect(t);if(!c)return null;if(i&&!i_(i))return this.getFirstKey();let h=t;if(this.orientation==="horizontal"){let _=Math.max(0,c.x+c.width-this.layoutDelegate.getVisibleRect().width);for(;c&&c.x>_&&h!=null;)h=this.getKeyAbove(h),c=h==null?null:this.layoutDelegate.getItemRect(h)}else{let _=Math.max(0,c.y+c.height-this.layoutDelegate.getVisibleRect().height);for(;c&&c.y>_&&h!=null;)h=this.getKeyAbove(h),c=h==null?null:this.layoutDelegate.getItemRect(h)}return h??this.getFirstKey()}getKeyPageBelow(t){let i=this.ref.current,c=this.layoutDelegate.getItemRect(t);if(!c)return null;if(i&&!i_(i))return this.getLastKey();let h=t;if(this.orientation==="horizontal"){let _=Math.min(this.layoutDelegate.getContentSize().width,c.y-c.width+this.layoutDelegate.getVisibleRect().width);for(;c&&c.x<_&&h!=null;)h=this.getKeyBelow(h),c=h==null?null:this.layoutDelegate.getItemRect(h)}else{let _=Math.min(this.layoutDelegate.getContentSize().height,c.y-c.height+this.layoutDelegate.getVisibleRect().height);for(;c&&c.y<_&&h!=null;)h=this.getKeyBelow(h),c=h==null?null:this.layoutDelegate.getItemRect(h)}return h??this.getLastKey()}getKeyForSearch(t,i){if(!this.collator)return null;let c=this.collection,h=i||this.getFirstKey();for(;h!=null;){let _=c.getItem(h);if(!_)return null;let w=_.textValue.slice(0,t.length);if(_.textValue&&this.collator.compare(w,t)===0)return h;h=this.getNextKey(h)}return null}constructor(...t){if(t.length===1){let i=t[0];this.collection=i.collection,this.ref=i.ref,this.collator=i.collator,this.disabledKeys=i.disabledKeys||new Set,this.disabledBehavior=i.disabledBehavior||"all",this.orientation=i.orientation||"vertical",this.direction=i.direction,this.layout=i.layout||"stack",this.layoutDelegate=i.layoutDelegate||new BM(i.ref)}else this.collection=t[0],this.disabledKeys=t[1],this.ref=t[2],this.collator=t[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all",this.layoutDelegate=new BM(this.ref);this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function RX(e){let{selectionManager:t,collection:i,disabledKeys:c,ref:h,keyboardDelegate:_,layoutDelegate:w}=e,n=Fk({usage:"search",sensitivity:"base"}),k=t.disabledBehavior,N=V.useMemo(()=>_||new kX({collection:i,disabledKeys:c,disabledBehavior:k,ref:h,collator:n,layoutDelegate:w}),[_,w,i,c,h,n,k]),{collectionProps:B}=MX({...e,ref:h,selectionManager:t,keyboardDelegate:N});return{listProps:B}}var IX=e=>b.jsxs("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:[b.jsx("path",{d:"M7.75 2.5a.75.75 0 0 0-1.5 0v1.58c-1.44.115-2.384.397-3.078 1.092c-.695.694-.977 1.639-1.093 3.078h19.842c-.116-1.44-.398-2.384-1.093-3.078c-.694-.695-1.639-.977-3.078-1.093V2.5a.75.75 0 0 0-1.5 0v1.513C15.585 4 14.839 4 14 4h-4c-.839 0-1.585 0-2.25.013z",fill:"currentColor"}),b.jsx("path",{clipRule:"evenodd",d:"M2 12c0-.839 0-1.585.013-2.25h19.974C22 10.415 22 11.161 22 12v2c0 3.771 0 5.657-1.172 6.828C19.657 22 17.771 22 14 22h-4c-3.771 0-5.657 0-6.828-1.172C2 19.657 2 17.771 2 14zm15 2a1 1 0 1 0 0-2a1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2a1 1 0 0 0 0 2m-4-5a1 1 0 1 1-2 0a1 1 0 0 1 2 0m0 4a1 1 0 1 1-2 0a1 1 0 0 1 2 0m-6-3a1 1 0 1 0 0-2a1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2a1 1 0 0 0 0 2",fill:"currentColor",fillRule:"evenodd"})]}),W8=e=>b.jsx("svg",{className:"fill-current",fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...e,children:b.jsx("path",{clipRule:"evenodd",d:"M3 10.417C3 7.219 3 5.62 3.378 5.082C3.755 4.545 5.258 4.03 8.265 3.001L8.838 2.805C10.405 2.268 11.188 2 12 2C12.812 2 13.595 2.268 15.162 2.805L15.735 3.001C18.742 4.03 20.245 4.545 20.622 5.082C21 5.62 21 7.22 21 10.417V11.991C21 17.629 16.761 20.366 14.101 21.527C13.38 21.842 13.02 22 12 22C10.98 22 10.62 21.842 9.899 21.527C7.239 20.365 3 17.63 3 11.991V10.417ZM12 7.25C12.1989 7.25 12.3897 7.32902 12.5303 7.46967C12.671 7.61032 12.75 7.80109 12.75 8V12C12.75 12.1989 12.671 12.3897 12.5303 12.5303C12.3897 12.671 12.1989 12.75 12 12.75C11.8011 12.75 11.6103 12.671 11.4697 12.5303C11.329 12.3897 11.25 12.1989 11.25 12V8C11.25 7.80109 11.329 7.61032 11.4697 7.46967C11.6103 7.32902 11.8011 7.25 12 7.25ZM12 16C12.2652 16 12.5196 15.8946 12.7071 15.7071C12.8946 15.5196 13 15.2652 13 15C13 14.7348 12.8946 14.4804 12.7071 14.2929C12.5196 14.1054 12.2652 14 12 14C11.7348 14 11.4804 14.1054 11.2929 14.2929C11.1054 14.4804 11 14.7348 11 15C11 15.2652 11.1054 15.5196 11.2929 15.7071C11.4804 15.8946 11.7348 16 12 16Z",fill:"currentColor",fillRule:"evenodd"})}),K8=e=>b.jsx("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...e,children:b.jsx("path",{d:`
          M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2Z
          M16.78 9.7L11.11 15.37C10.97 15.51 10.78 15.59 10.58 15.59C10.38 15.59 10.19 15.51 10.05 15.37L7.22 12.54
          C6.93 12.25 6.93 11.77 7.22 11.48C7.51 11.19 7.99 11.19 8.28 11.48L10.58 13.78L15.72 8.64
          C16.01 8.35 16.49 8.35 16.78 8.64C17.07 8.93 17.07 9.4 16.78 9.7Z
        `})}),jM=e=>b.jsx("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...e,children:b.jsx("path",{d:"M12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22ZM12.75 16C12.75 16.41 12.41 16.75 12 16.75C11.59 16.75 11.25 16.41 11.25 16L11.25 11C11.25 10.59 11.59 10.25 12 10.25C12.41 10.25 12.75 10.59 12.75 11L12.75 16ZM11.08 7.62C11.13 7.49 11.2 7.39 11.29 7.29C11.39 7.2 11.5 7.13 11.62 7.08C11.74 7.03 11.87 7 12 7C12.13 7 12.26 7.03 12.38 7.08C12.5 7.13 12.61 7.2 12.71 7.29C12.8 7.39 12.87 7.49 12.92 7.62C12.97 7.74 13 7.87 13 8C13 8.13 12.97 8.26 12.92 8.38C12.87 8.5 12.8 8.61 12.71 8.71C12.61 8.8 12.5 8.87 12.38 8.92C12.14 9.02 11.86 9.02 11.62 8.92C11.5 8.87 11.39 8.8 11.29 8.71C11.2 8.61 11.13 8.5 11.08 8.38C11.03 8.26 11 8.13 11 8C11 7.87 11.03 7.74 11.08 7.62Z"})}),l4=e=>b.jsx("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...e,children:b.jsx("path",{d:"M12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22ZM12.75 16C12.75 16.41 12.41 16.75 12 16.75C11.59 16.75 11.25 16.41 11.25 16L11.25 11C11.25 10.59 11.59 10.25 12 10.25C12.41 10.25 12.75 10.59 12.75 11L12.75 16ZM11.08 7.62C11.13 7.49 11.2 7.39 11.29 7.29C11.39 7.2 11.5 7.13 11.62 7.08C11.74 7.03 11.87 7 12 7C12.13 7 12.26 7.03 12.38 7.08C12.5 7.13 12.61 7.2 12.71 7.29C12.8 7.39 12.87 7.49 12.92 7.62C12.97 7.74 13 7.87 13 8C13 8.13 12.97 8.26 12.92 8.38C12.87 8.5 12.8 8.61 12.71 8.71C12.61 8.8 12.5 8.87 12.38 8.92C12.14 9.02 11.86 9.02 11.62 8.92C11.5 8.87 11.39 8.8 11.29 8.71C11.2 8.61 11.13 8.5 11.08 8.38C11.03 8.26 11 8.13 11 8C11 7.87 11.03 7.74 11.08 7.62Z"})}),zX=({strokeWidth:e=1.5,...t})=>b.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:e,viewBox:"0 0 24 24",width:"1em",...t,children:b.jsx("path",{d:"m18 15-6-6-6 6"})}),uT=e=>b.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:b.jsx("path",{d:"M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z",fill:"currentColor"})}),dT=e=>{const{isSelected:t,isIndeterminate:i,disableAnimation:c,...h}=e;return b.jsx("svg",{"aria-hidden":"true",className:"fill-current",fill:"none",focusable:"false",height:"1em",role:"presentation",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:"1em",...h,children:b.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})},Z8=e=>b.jsx("svg",{className:"fill-current",fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",...e,children:b.jsx("path",{d:"M17.51 3.85L11.57 0.42C10.6 -0.14 9.4 -0.14 8.42 0.42L2.49 3.85C1.52 4.41 0.919998 5.45 0.919998 6.58V13.42C0.919998 14.54 1.52 15.58 2.49 16.15L8.43 19.58C9.4 20.14 10.6 20.14 11.58 19.58L17.52 16.15C18.49 15.59 19.09 14.55 19.09 13.42V6.58C19.08 5.45 18.48 4.42 17.51 3.85ZM9.25 5.75C9.25 5.34 9.59 5 10 5C10.41 5 10.75 5.34 10.75 5.75V11C10.75 11.41 10.41 11.75 10 11.75C9.59 11.75 9.25 11.41 9.25 11V5.75ZM10.92 14.63C10.87 14.75 10.8 14.86 10.71 14.96C10.52 15.15 10.27 15.25 10 15.25C9.87 15.25 9.74 15.22 9.62 15.17C9.49 15.12 9.39 15.05 9.29 14.96C9.2 14.86 9.13 14.75 9.07 14.63C9.02 14.51 9 14.38 9 14.25C9 13.99 9.1 13.73 9.29 13.54C9.39 13.45 9.49 13.38 9.62 13.33C9.99 13.17 10.43 13.26 10.71 13.54C10.8 13.64 10.87 13.74 10.92 13.87C10.97 13.99 11 14.12 11 14.25C11 14.38 10.97 14.51 10.92 14.63Z"})}),LX=({strokeWidth:e=1.5,...t})=>b.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:e,viewBox:"0 0 24 24",width:"1em",...t,children:b.jsx("path",{d:"m6 9 6 6 6-6"})});function $X(){const[e,t]=V.useState({width:null,height:null}),i=V.useRef(null);return[V.useCallback(h=>{if(i.current&&(i.current.disconnect(),i.current=null),(h==null?void 0:h.nodeType)===Node.ELEMENT_NODE){const _=new ResizeObserver(([w])=>{if(w&&w.borderBoxSize){const{inlineSize:n,blockSize:k}=w.borderBoxSize[0];t({width:n,height:k})}});_.observe(h),i.current=_}},[]),e]}var X8=V.forwardRef((e,t)=>{const{children:i,...c}=e;let[h,_]=$X();return b.jsx(Tu,{features:xZ,children:b.jsx(jl.div,{ref:t,animate:{width:_.width&&(_==null?void 0:_.width)>0?_.width:"auto",height:_.height&&_.height>0?_.height:"auto"},children:b.jsx("div",{ref:h,...c,children:i})})})});X8.displayName="HeroUI - ResizablePanel";var Xg={ease:[.36,.66,.4,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1]},ax={scaleSpring:{enter:{transform:"scale(1)",opacity:1,transition:{type:"spring",bounce:0,duration:.2}},exit:{transform:"scale(0.85)",opacity:0,transition:{type:"easeOut",duration:.15}}},scaleSpringOpacity:{initial:{opacity:0,transform:"scale(0.8)"},enter:{opacity:1,transform:"scale(1)",transition:{type:"spring",bounce:0,duration:.3}},exit:{opacity:0,transform:"scale(0.96)",transition:{type:"easeOut",bounce:0,duration:.15}}},fade:{enter:{opacity:1,transition:{duration:.4,ease:Xg.ease}},exit:{opacity:0,transition:{duration:.3,ease:Xg.ease}}}};class NX{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(t){let i=this.keyMap.get(t);var c;return i&&(c=i.prevKey)!==null&&c!==void 0?c:null}getKeyAfter(t){let i=this.keyMap.get(t);var c;return i&&(c=i.nextKey)!==null&&c!==void 0?c:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(t){var i;return(i=this.keyMap.get(t))!==null&&i!==void 0?i:null}at(t){const i=[...this.getKeys()];return this.getItem(i[t])}constructor(t,{expandedKeys:i}={}){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.iterable=t,i=i||new Set;let c=n=>{if(this.keyMap.set(n.key,n),n.childNodes&&(n.type==="section"||i.has(n.key)))for(let k of n.childNodes)c(k)};for(let n of t)c(n);let h=null,_=0;for(let[n,k]of this.keyMap)h?(h.nextKey=n,k.prevKey=h.key):(this.firstKey=n,k.prevKey=void 0),k.type==="item"&&(k.index=_++),h=k,h.nextKey=void 0;var w;this.lastKey=(w=h==null?void 0:h.key)!==null&&w!==void 0?w:null}}class pd extends Set{constructor(t,i,c){super(t),t instanceof pd?(this.anchorKey=i??t.anchorKey,this.currentKey=c??t.currentKey):(this.anchorKey=i??null,this.currentKey=c??null)}}function BX(e,t){if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0}function jX(e){let{selectionMode:t="none",disallowEmptySelection:i=!1,allowDuplicateSelectionEvents:c,selectionBehavior:h="toggle",disabledBehavior:_="all"}=e,w=V.useRef(!1),[,n]=V.useState(!1),k=V.useRef(null),N=V.useRef(null),[,B]=V.useState(null),F=V.useMemo(()=>OM(e.selectedKeys),[e.selectedKeys]),G=V.useMemo(()=>OM(e.defaultSelectedKeys,new pd),[e.defaultSelectedKeys]),[Q,te]=Xs(F,G,e.onSelectionChange),Y=V.useMemo(()=>e.disabledKeys?new Set(e.disabledKeys):new Set,[e.disabledKeys]),[oe,de]=V.useState(h);h==="replace"&&oe==="toggle"&&typeof Q=="object"&&Q.size===0&&de("replace");let ge=V.useRef(h);return V.useEffect(()=>{h!==ge.current&&(de(h),ge.current=h)},[h]),{selectionMode:t,disallowEmptySelection:i,selectionBehavior:oe,setSelectionBehavior:de,get isFocused(){return w.current},setFocused(be){w.current=be,n(be)},get focusedKey(){return k.current},get childFocusStrategy(){return N.current},setFocusedKey(be,pe="first"){k.current=be,N.current=pe,B(be)},selectedKeys:Q,setSelectedKeys(be){(c||!BX(be,Q))&&te(be)},disabledKeys:Y,disabledBehavior:_}}function OM(e,t){return e?e==="all"?"all":new pd(e):t}function Y8(e){return null}Y8.getCollectionNode=function*(t,i){let{childItems:c,title:h,children:_}=t,w=t.title||t.children,n=t.textValue||(typeof w=="string"?w:"")||t["aria-label"]||"";!n&&!(i!=null&&i.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:t,rendered:w,textValue:n,"aria-label":t["aria-label"],hasChildNodes:OX(t),*childNodes(){if(c)for(let k of c)yield{type:"item",value:k};else if(h){let k=[];ra.Children.forEach(_,N=>{k.push({type:"item",element:N})}),yield*k}}}};function OX(e){return e.hasChildItems!=null?e.hasChildItems:!!(e.childItems||e.title&&ra.Children.count(e.children)>0)}let FX=Y8;class VX{build(t,i){return this.context=i,FM(()=>this.iterateCollection(t))}*iterateCollection(t){let{children:i,items:c}=t;if(ra.isValidElement(i)&&i.type===ra.Fragment)yield*this.iterateCollection({children:i.props.children,items:c});else if(typeof i=="function"){if(!c)throw new Error("props.children was a function but props.items is missing");let h=0;for(let _ of c)yield*this.getFullNode({value:_,index:h},{renderer:i}),h++}else{let h=[];ra.Children.forEach(i,w=>{w&&h.push(w)});let _=0;for(let w of h){let n=this.getFullNode({element:w,index:_},{});for(let k of n)_++,yield k}}}getKey(t,i,c,h){if(t.key!=null)return t.key;if(i.type==="cell"&&i.key!=null)return`${h}${i.key}`;let _=i.value;if(_!=null){var w;let n=(w=_.key)!==null&&w!==void 0?w:_.id;if(n==null)throw new Error("No key found for item");return n}return h?`${h}.${i.index}`:`$.${i.index}`}getChildState(t,i){return{renderer:i.renderer||t.renderer}}*getFullNode(t,i,c,h){if(ra.isValidElement(t.element)&&t.element.type===ra.Fragment){let oe=[];ra.Children.forEach(t.element.props.children,ge=>{oe.push(ge)});var _;let de=(_=t.index)!==null&&_!==void 0?_:0;for(const ge of oe)yield*this.getFullNode({element:ge,index:de++},i,c,h);return}let w=t.element;if(!w&&t.value&&i&&i.renderer){let oe=this.cache.get(t.value);if(oe&&(!oe.shouldInvalidate||!oe.shouldInvalidate(this.context))){oe.index=t.index,oe.parentKey=h?h.key:null,yield oe;return}w=i.renderer(t.value)}if(ra.isValidElement(w)){let oe=w.type;if(typeof oe!="function"&&typeof oe.getCollectionNode!="function"){let pe=w.type;throw new Error(`Unknown element <${pe}> in collection.`)}let de=oe.getCollectionNode(w.props,this.context);var n;let ge=(n=t.index)!==null&&n!==void 0?n:0,be=de.next();for(;!be.done&&be.value;){let pe=be.value;t.index=ge;var k;let we=(k=pe.key)!==null&&k!==void 0?k:null;we==null&&(we=pe.element?null:this.getKey(w,t,i,c));let Ae=[...this.getFullNode({...pe,key:we,index:ge,wrapper:UX(t.wrapper,pe.wrapper)},this.getChildState(i,pe),c?`${c}${w.key}`:w.key,h)];for(let re of Ae){var N,B;re.value=(B=(N=pe.value)!==null&&N!==void 0?N:t.value)!==null&&B!==void 0?B:null,re.value&&this.cache.set(re.value,re);var F;if(t.type&&re.type!==t.type)throw new Error(`Unsupported type <${c4(re.type)}> in <${c4((F=h==null?void 0:h.type)!==null&&F!==void 0?F:"unknown parent type")}>. Only <${c4(t.type)}> is supported.`);ge++,yield re}be=de.next(Ae)}return}if(t.key==null||t.type==null)return;let G=this;var Q,te;let Y={type:t.type,props:t.props,key:t.key,parentKey:h?h.key:null,value:(Q=t.value)!==null&&Q!==void 0?Q:null,level:h?h.level+1:0,index:t.index,rendered:t.rendered,textValue:(te=t.textValue)!==null&&te!==void 0?te:"","aria-label":t["aria-label"],wrapper:t.wrapper,shouldInvalidate:t.shouldInvalidate,hasChildNodes:t.hasChildNodes||!1,childNodes:FM(function*(){if(!t.hasChildNodes||!t.childNodes)return;let oe=0;for(let de of t.childNodes()){de.key!=null&&(de.key=`${Y.key}${de.key}`);let ge=G.getFullNode({...de,index:oe},G.getChildState(i,de),Y.key,Y);for(let be of ge)oe++,yield be}})};yield Y}constructor(){this.cache=new WeakMap}}function FM(e){let t=[],i=null;return{*[Symbol.iterator](){for(let c of t)yield c;i||(i=e());for(let c of i)t.push(c),yield c}}}function UX(e,t){if(e&&t)return i=>e(t(i));if(e)return e;if(t)return t}function c4(e){return e[0].toUpperCase()+e.slice(1)}function GX(e,t,i){let c=V.useMemo(()=>new VX,[]),{children:h,items:_,collection:w}=e;return V.useMemo(()=>{if(w)return w;let k=c.build({children:h,items:_},i);return t(k)},[c,h,_,w,i,t])}function J8(e,t){return typeof t.getChildren=="function"?t.getChildren(e.key):e.childNodes}function HX(e){return qX(e)}function qX(e,t){for(let i of e)return i}function u4(e,t,i){if(t.parentKey===i.parentKey)return t.index-i.index;let c=[...VM(e,t),t],h=[...VM(e,i),i],_=c.slice(0,h.length).findIndex((w,n)=>w!==h[n]);return _!==-1?(t=c[_],i=h[_],t.index-i.index):c.findIndex(w=>w===i)>=0?1:(h.findIndex(w=>w===t)>=0,-1)}function VM(e,t){let i=[],c=t;for(;(c==null?void 0:c.parentKey)!=null;)c=e.getItem(c.parentKey),c&&i.unshift(c);return i}const UM=new WeakMap;function WX(e){let t=UM.get(e);if(t!=null)return t;let i=0,c=h=>{for(let _ of h)_.type==="section"?c(J8(_,e)):i++};return c(e),UM.set(e,i),i}class hT{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(t){this.state.setSelectionBehavior(t)}get isFocused(){return this.state.isFocused}setFocused(t){this.state.setFocused(t)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(t,i){(t==null||this.collection.getItem(t))&&this.state.setFocusedKey(t,i)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(t){if(this.state.selectionMode==="none")return!1;let i=this.getKey(t);return i==null?!1:this.state.selectedKeys==="all"?this.canSelectItem(i):this.state.selectedKeys.has(i)}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let t=this.getSelectAllKeys(),i=this.state.selectedKeys;return this._isSelectAll=t.every(c=>i.has(c)),this._isSelectAll}get firstSelectedKey(){let t=null;for(let c of this.state.selectedKeys){let h=this.collection.getItem(c);(!t||h&&u4(this.collection,h,t)<0)&&(t=h)}var i;return(i=t==null?void 0:t.key)!==null&&i!==void 0?i:null}get lastSelectedKey(){let t=null;for(let c of this.state.selectedKeys){let h=this.collection.getItem(c);(!t||h&&u4(this.collection,h,t)>0)&&(t=h)}var i;return(i=t==null?void 0:t.key)!==null&&i!==void 0?i:null}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(t){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(t);return}let i=this.getKey(t);if(i==null)return;let c;if(this.state.selectedKeys==="all")c=new pd([i],i,i);else{let w=this.state.selectedKeys;var h;let n=(h=w.anchorKey)!==null&&h!==void 0?h:i;c=new pd(w,n,i);var _;for(let k of this.getKeyRange(n,(_=w.currentKey)!==null&&_!==void 0?_:i))c.delete(k);for(let k of this.getKeyRange(i,n))this.canSelectItem(k)&&c.add(k)}this.state.setSelectedKeys(c)}getKeyRange(t,i){let c=this.collection.getItem(t),h=this.collection.getItem(i);return c&&h?u4(this.collection,c,h)<=0?this.getKeyRangeInternal(t,i):this.getKeyRangeInternal(i,t):[]}getKeyRangeInternal(t,i){var c;if(!((c=this.layoutDelegate)===null||c===void 0)&&c.getKeyRange)return this.layoutDelegate.getKeyRange(t,i);let h=[],_=t;for(;_!=null;){let w=this.collection.getItem(_);if(w&&(w.type==="item"||w.type==="cell"&&this.allowsCellSelection)&&h.push(_),_===i)return h;_=this.collection.getKeyAfter(_)}return[]}getKey(t){let i=this.collection.getItem(t);if(!i||i.type==="cell"&&this.allowsCellSelection)return t;for(;i&&i.type!=="item"&&i.parentKey!=null;)i=this.collection.getItem(i.parentKey);return!i||i.type!=="item"?null:i.key}toggleSelection(t){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(t)){this.replaceSelection(t);return}let i=this.getKey(t);if(i==null)return;let c=new pd(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);c.has(i)?c.delete(i):this.canSelectItem(i)&&(c.add(i),c.anchorKey=i,c.currentKey=i),!(this.disallowEmptySelection&&c.size===0)&&this.state.setSelectedKeys(c)}replaceSelection(t){if(this.selectionMode==="none")return;let i=this.getKey(t);if(i==null)return;let c=this.canSelectItem(i)?new pd([i],i,i):new pd;this.state.setSelectedKeys(c)}setSelectedKeys(t){if(this.selectionMode==="none")return;let i=new pd;for(let c of t){let h=this.getKey(c);if(h!=null&&(i.add(h),this.selectionMode==="single"))break}this.state.setSelectedKeys(i)}getSelectAllKeys(){let t=[],i=c=>{for(;c!=null;){if(this.canSelectItem(c)){var h;let w=this.collection.getItem(c);(w==null?void 0:w.type)==="item"&&t.push(c);var _;w!=null&&w.hasChildNodes&&(this.allowsCellSelection||w.type!=="item")&&i((_=(h=HX(J8(w,this.collection)))===null||h===void 0?void 0:h.key)!==null&&_!==void 0?_:null)}c=this.collection.getKeyAfter(c)}};return i(this.collection.getFirstKey()),t}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new pd)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(t,i){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(t)&&!this.disallowEmptySelection?this.toggleSelection(t):this.replaceSelection(t):this.selectionBehavior==="toggle"||i&&(i.pointerType==="touch"||i.pointerType==="virtual")?this.toggleSelection(t):this.replaceSelection(t))}isSelectionEqual(t){if(t===this.state.selectedKeys)return!0;let i=this.selectedKeys;if(t.size!==i.size)return!1;for(let c of t)if(!i.has(c))return!1;for(let c of i)if(!t.has(c))return!1;return!0}canSelectItem(t){var i;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(t))return!1;let c=this.collection.getItem(t);return!(!c||!(c==null||(i=c.props)===null||i===void 0)&&i.isDisabled||c.type==="cell"&&!this.allowsCellSelection)}isDisabled(t){var i,c;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(t)||!!(!((c=this.collection.getItem(t))===null||c===void 0||(i=c.props)===null||i===void 0)&&i.isDisabled))}isLink(t){var i,c;return!!(!((c=this.collection.getItem(t))===null||c===void 0||(i=c.props)===null||i===void 0)&&i.href)}getItemProps(t){var i;return(i=this.collection.getItem(t))===null||i===void 0?void 0:i.props}withCollection(t){return new hT(t,this.state,{allowsCellSelection:this.allowsCellSelection,layoutDelegate:this.layoutDelegate||void 0})}constructor(t,i,c){this.collection=t,this.state=i;var h;this.allowsCellSelection=(h=c==null?void 0:c.allowsCellSelection)!==null&&h!==void 0?h:!1,this._isSelectAll=null,this.layoutDelegate=(c==null?void 0:c.layoutDelegate)||null}}function KX(e){let{onExpandedChange:t}=e,[i,c]=Xs(e.expandedKeys?new Set(e.expandedKeys):void 0,e.defaultExpandedKeys?new Set(e.defaultExpandedKeys):new Set,t),h=jX(e),_=V.useMemo(()=>e.disabledKeys?new Set(e.disabledKeys):new Set,[e.disabledKeys]),w=GX(e,V.useCallback(k=>new NX(k,{expandedKeys:i}),[i]),null);return V.useEffect(()=>{h.focusedKey!=null&&!w.getItem(h.focusedKey)&&h.setFocusedKey(null)},[w,h.focusedKey]),{collection:w,expandedKeys:i,disabledKeys:_,toggleKey:k=>{c(ZX(i,k))},setExpandedKeys:c,selectionManager:new hT(w,h)}}function ZX(e,t){let i=new Set(e);return i.has(t)?i.delete(t):i.add(t),i}function XX(e){let t=Wo(e,{enabled:typeof e.elementType=="string"}),i;return e.orientation==="vertical"&&(i="vertical"),e.elementType!=="hr"?{separatorProps:{...t,role:"separator","aria-orientation":i}}:{separatorProps:t}}function YX(e){const{as:t,className:i,orientation:c,...h}=e;let _=t||"hr";_==="hr"&&c==="vertical"&&(_="div");const{separatorProps:w}=XX({elementType:typeof _=="string"?_:"hr",orientation:c}),n=V.useMemo(()=>pX({orientation:c,className:i}),[c,i]),k=V.useCallback((N={})=>({className:n,role:"separator","data-orientation":c,...w,...h,...N}),[n,c,w,h]);return{Component:_,getDividerProps:k}}var Q8=Bn((e,t)=>{const{Component:i,getDividerProps:c}=YX({...e});return b.jsx(i,{ref:t,...c()})});Q8.displayName="HeroUI.Divider";var JX=Q8,fT=e=>{const t={top:{originY:1},bottom:{originY:0},left:{originX:1},right:{originX:0},"top-start":{originX:0,originY:1},"top-end":{originX:1,originY:1},"bottom-start":{originX:0,originY:0},"bottom-end":{originX:1,originY:0},"right-start":{originX:0,originY:0},"right-end":{originX:0,originY:1},"left-start":{originX:1,originY:0},"left-end":{originX:1,originY:1}};return(t==null?void 0:t[e])||{}},e7=e=>({top:"top",bottom:"bottom",left:"left",right:"right","top-start":"top start","top-end":"top end","bottom-start":"bottom start","bottom-end":"bottom end","left-start":"left top","left-end":"left bottom","right-start":"right top","right-end":"right bottom"})[e],QX=(e,t)=>{if(t.includes("-")){const[i]=t.split("-");if(i.includes(e))return!1}return!0},Tw=(e,t)=>{if(t.includes("-")){const[,i]=t.split("-");return`${e}-${i}`}return e},Pv=new WeakMap,Ll=[];function eY(e,t=document.body){let i=new Set(e),c=new Set,h=k=>{for(let G of k.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))i.add(G);let N=G=>{if(i.has(G)||G.parentElement&&c.has(G.parentElement)&&G.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let Q of i)if(G.contains(Q))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},B=document.createTreeWalker(k,NodeFilter.SHOW_ELEMENT,{acceptNode:N}),F=N(k);if(F===NodeFilter.FILTER_ACCEPT&&_(k),F!==NodeFilter.FILTER_REJECT){let G=B.nextNode();for(;G!=null;)_(G),G=B.nextNode()}},_=k=>{var N;let B=(N=Pv.get(k))!=null?N:0;k.getAttribute("aria-hidden")==="true"&&B===0||(B===0&&k.setAttribute("aria-hidden","true"),c.add(k),Pv.set(k,B+1))};Ll.length&&Ll[Ll.length-1].disconnect(),h(t);let w=new MutationObserver(k=>{for(let N of k)if(!(N.type!=="childList"||N.addedNodes.length===0)&&![...i,...c].some(B=>B.contains(N.target))){for(let B of N.removedNodes)B instanceof Element&&(i.delete(B),c.delete(B));for(let B of N.addedNodes)(B instanceof HTMLElement||B instanceof SVGElement)&&(B.dataset.liveAnnouncer==="true"||B.dataset.reactAriaTopLayer==="true")?i.add(B):B instanceof Element&&h(B)}});w.observe(t,{childList:!0,subtree:!0});let n={visibleNodes:i,hiddenNodes:c,observe(){w.observe(t,{childList:!0,subtree:!0})},disconnect(){w.disconnect()}};return Ll.push(n),()=>{w.disconnect();for(let k of c){let N=Pv.get(k);N!=null&&(N===1?(k.removeAttribute("aria-hidden"),Pv.delete(k)):Pv.set(k,N-1))}n===Ll[Ll.length-1]?(Ll.pop(),Ll.length&&Ll[Ll.length-1].observe()):Ll.splice(Ll.indexOf(n),1)}}function tY(e){let t=Ll[Ll.length-1];if(t&&!t.visibleNodes.has(e))return t.visibleNodes.add(e),()=>{t.visibleNodes.delete(e)}}var pT=(e,t,i)=>{const c=t==null?void 0:t.current;if(!c||!c.contains(e)){const h=document.querySelectorAll("body > span[data-focus-scope-start]");let _=[];if(h.forEach(w=>{_.push(w.nextElementSibling)}),_.length===1)return i.close(),!1}return!c||!c.contains(e)},gx=globalThis!=null&&globalThis.document?V.useLayoutEffect:V.useEffect,[boe,rY]=Sh({name:"ButtonGroupContext",strict:!1});function r2(e,t){let{elementType:i="button",isDisabled:c,onPress:h,onPressStart:_,onPressEnd:w,onPressChange:n,preventFocusOnPress:k,allowFocusWhenDisabled:N,onClick:B,href:F,target:G,rel:Q,type:te="button",allowTextSelectionOnPress:Y,role:oe}=e,de;i==="button"?de={type:te,disabled:c}:de={role:"button",href:i==="a"&&!c?F:void 0,target:i==="a"?G:void 0,type:i==="input"?te:void 0,disabled:i==="input"?c:void 0,"aria-disabled":!c||i==="input"?void 0:c,rel:i==="a"?Q:void 0};let ge=Mm()||hx();B&&typeof B=="function"&&oe!=="link"&&!(e.hasOwnProperty("aria-expanded")&&e.hasOwnProperty("aria-controls"))&&$w("onClick is deprecated, please use onPress instead. See: https://github.com/heroui-inc/heroui/issues/4292","useButton");const be=re=>{ge&&(B==null||B(re)),h==null||h(re)};let{pressProps:pe,isPressed:we}=wu({onPressStart:_,onPressEnd:w,onPressChange:n,onPress:be,isDisabled:c,preventFocusOnPress:k,allowTextSelectionOnPress:Y,ref:t}),{focusableProps:ke}=M_(e,t);N&&(ke.tabIndex=c?-1:ke.tabIndex);let Ae=xr(ke,pe,Fl(e,{labelable:!0}));return{isPressed:we,buttonProps:xr(de,Ae,{"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],"aria-current":e["aria-current"],onClick:re=>{te==="button"&&ge||B==null||B(re)}})}}var aY=()=>km(()=>import("./index-BxFlUVnv.js"),[]).then(e=>e.default),t7=e=>{const{ripples:t=[],motionProps:i,color:c="currentColor",style:h,onClear:_}=e;return b.jsx(b.Fragment,{children:t.map(w=>{const n=l5(.01*w.size,.2,w.size>100?.75:.5);return b.jsx(Tu,{features:aY,children:b.jsx(Uf,{mode:"popLayout",children:b.jsx(jl.span,{animate:{transform:"scale(2)",opacity:0},className:"heroui-ripple",exit:{opacity:0},initial:{transform:"scale(0)",opacity:.35},style:{position:"absolute",backgroundColor:c,borderRadius:"100%",transformOrigin:"center",pointerEvents:"none",overflow:"hidden",inset:0,zIndex:0,top:w.y,left:w.x,width:`${w.size}px`,height:`${w.size}px`,...h},transition:{duration:n},onAnimationComplete:()=>{_(w.key)},...i})})},w.key)})})};t7.displayName="HeroUI.Ripple";var nY=t7;function iY(e={}){const[t,i]=V.useState([]),c=V.useCallback(_=>{const w=_.target,n=Math.max(w.clientWidth,w.clientHeight);i(k=>[...k,{key:VA(k.length.toString()),size:n,x:_.x-n/2,y:_.y-n/2}])},[]),h=V.useCallback(_=>{i(w=>w.filter(n=>n.key!==_))},[]);return{ripples:t,onClear:h,onPress:c,...e}}function sY(e){var t,i,c,h,_,w,n,k,N;const B=rY(),F=Pi(),G=!!B,{ref:Q,as:te,children:Y,startContent:oe,endContent:de,autoFocus:ge,className:be,spinner:pe,isLoading:we=!1,disableRipple:ke=!1,fullWidth:Ae=(t=B==null?void 0:B.fullWidth)!=null?t:!1,radius:re=B==null?void 0:B.radius,size:Te=(i=B==null?void 0:B.size)!=null?i:"md",color:se=(c=B==null?void 0:B.color)!=null?c:"default",variant:ue=(h=B==null?void 0:B.variant)!=null?h:"solid",disableAnimation:De=(w=(_=B==null?void 0:B.disableAnimation)!=null?_:F==null?void 0:F.disableAnimation)!=null?w:!1,isDisabled:ce=(n=B==null?void 0:B.isDisabled)!=null?n:!1,isIconOnly:je=(k=B==null?void 0:B.isIconOnly)!=null?k:!1,spinnerPlacement:Le="start",onPress:Re,onClick:Ge,...ze}=e,ot=te||"button",Ee=typeof ot=="string",Ke=Nn(Q),nt=(N=ke||(F==null?void 0:F.disableRipple))!=null?N:De,{isFocusVisible:Xe,isFocused:ut,focusProps:Pt}=Ac({autoFocus:ge}),Ct=ce||we,Zt=V.useMemo(()=>U8({size:Te,color:se,variant:ue,radius:re,fullWidth:Ae,isDisabled:Ct,isInGroup:G,disableAnimation:De,isIconOnly:je,className:be}),[Te,se,ue,re,Ae,Ct,G,je,De,be]),{onPress:Dt,onClear:er,ripples:Se}=iY(),ur=V.useCallback(Xr=>{nt||Ct||De||Ke.current&&Dt(Xr)},[nt,Ct,De,Ke,Dt]),{buttonProps:Sr,isPressed:yt}=r2({elementType:te,isDisabled:Ct,onPress:qi(Re,ur),onClick:Ge,...ze},Ke),{isHovered:dt,hoverProps:$t}=wo({isDisabled:Ct}),or=V.useCallback((Xr={})=>({"data-disabled":Vt(Ct),"data-focus":Vt(ut),"data-pressed":Vt(yt),"data-focus-visible":Vt(Xe),"data-hover":Vt(dt),"data-loading":Vt(we),...xr(Sr,Pt,$t,Wo(ze,{enabled:Ee}),Wo(Xr)),className:Zt}),[we,Ct,ut,yt,Ee,Xe,dt,Sr,Pt,$t,ze,Zt]),Er=Xr=>V.isValidElement(Xr)?V.cloneElement(Xr,{"aria-hidden":!0,focusable:!1,tabIndex:-1}):null,mr=Er(oe),Pr=Er(de),Fr=V.useMemo(()=>({sm:"sm",md:"sm",lg:"md"})[Te],[Te]),$a=V.useCallback(()=>({ripples:Se,onClear:er}),[Se,er]);return{Component:ot,children:Y,domRef:Ke,spinner:pe,styles:Zt,startContent:mr,endContent:Pr,isLoading:we,spinnerPlacement:Le,spinnerSize:Fr,disableRipple:nt,getButtonProps:or,getRippleProps:$a,isIconOnly:je}}function oY(e){var t,i;const[c,h]=Zo(e,TM.variantKeys),_=Pi(),w=(i=(t=e==null?void 0:e.variant)!=null?t:_==null?void 0:_.spinnerVariant)!=null?i:"default",{children:n,className:k,classNames:N,label:B,...F}=c,G=V.useMemo(()=>TM({...h}),[Ko(h)]),Q=Br(N==null?void 0:N.base,k),te=B||n,Y=V.useMemo(()=>te&&typeof te=="string"?te:F["aria-label"]?"":"Loading",[n,te,F["aria-label"]]),oe=V.useCallback(()=>({"aria-label":Y,className:G.base({class:Q}),...F}),[Y,G,Q,F]);return{label:te,slots:G,classNames:N,variant:w,getSpinnerProps:oe}}var r7=Bn((e,t)=>{const{slots:i,classNames:c,label:h,variant:_,getSpinnerProps:w}=oY({...e});return _==="wave"||_==="dots"?b.jsxs("div",{ref:t,...w(),children:[b.jsx("div",{className:i.wrapper({class:c==null?void 0:c.wrapper}),children:[...new Array(3)].map((n,k)=>b.jsx("i",{className:i.dots({class:c==null?void 0:c.dots}),style:{"--dot-index":k}},`dot-${k}`))}),h&&b.jsx("span",{className:i.label({class:c==null?void 0:c.label}),children:h})]}):_==="simple"?b.jsxs("div",{ref:t,...w(),children:[b.jsxs("svg",{className:i.wrapper({class:c==null?void 0:c.wrapper}),fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:i.circle1({class:c==null?void 0:c.circle1}),cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:i.circle2({class:c==null?void 0:c.circle2}),d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",fill:"currentColor"})]}),h&&b.jsx("span",{className:i.label({class:c==null?void 0:c.label}),children:h})]}):_==="spinner"?b.jsxs("div",{ref:t,...w(),children:[b.jsx("div",{className:i.wrapper({class:c==null?void 0:c.wrapper}),children:[...new Array(12)].map((n,k)=>b.jsx("i",{className:i.spinnerBars({class:c==null?void 0:c.spinnerBars}),style:{"--bar-index":k}},`star-${k}`))}),h&&b.jsx("span",{className:i.label({class:c==null?void 0:c.label}),children:h})]}):b.jsxs("div",{ref:t,...w(),children:[b.jsxs("div",{className:i.wrapper({class:c==null?void 0:c.wrapper}),children:[b.jsx("i",{className:i.circle1({class:c==null?void 0:c.circle1})}),b.jsx("i",{className:i.circle2({class:c==null?void 0:c.circle2})})]}),h&&b.jsx("span",{className:i.label({class:c==null?void 0:c.label}),children:h})]})});r7.displayName="HeroUI.Spinner";var mT=r7,a7=Bn((e,t)=>{const{Component:i,domRef:c,children:h,spinnerSize:_,spinner:w=b.jsx(mT,{color:"current",size:_}),spinnerPlacement:n,startContent:k,endContent:N,isLoading:B,disableRipple:F,getButtonProps:G,getRippleProps:Q,isIconOnly:te}=sY({...e,ref:t});return b.jsxs(i,{ref:c,...G(),children:[k,B&&n==="start"&&w,B&&te?null:h,B&&n==="end"&&w,N,!F&&b.jsx(nY,{...Q()})]})});a7.displayName="HeroUI.Button";var $r=a7;const n7={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},i7={...n7,customError:!0,valid:!1},Ay={isInvalid:!1,validationDetails:n7,validationErrors:[]},s7=V.createContext({}),nx="__formValidationState"+Date.now();function Rm(e){if(e[nx]){let{realtimeValidation:t,displayValidation:i,updateValidation:c,resetValidation:h,commitValidation:_}=e[nx];return{realtimeValidation:t,displayValidation:i,updateValidation:c,resetValidation:h,commitValidation:_}}return lY(e)}function lY(e){let{isInvalid:t,validationState:i,name:c,value:h,builtinValidation:_,validate:w,validationBehavior:n="aria"}=e;i&&(t||(t=i==="invalid"));let k=t!==void 0?{isInvalid:t,validationErrors:[],validationDetails:i7}:null,N=V.useMemo(()=>{if(!w||h==null)return null;let se=cY(w,h);return GM(se)},[w,h]);_!=null&&_.validationDetails.valid&&(_=void 0);let B=V.useContext(s7),F=V.useMemo(()=>c?Array.isArray(c)?c.flatMap(se=>$S(B[se])):$S(B[c]):[],[B,c]),[G,Q]=V.useState(B),[te,Y]=V.useState(!1);B!==G&&(Q(B),Y(!1));let oe=V.useMemo(()=>GM(te?[]:F),[te,F]),de=V.useRef(Ay),[ge,be]=V.useState(Ay),pe=V.useRef(Ay),we=()=>{if(!ke)return;Ae(!1);let se=N||_||de.current;d4(se,pe.current)||(pe.current=se,be(se))},[ke,Ae]=V.useState(!1);return V.useEffect(we),{realtimeValidation:k||oe||N||_||Ay,displayValidation:n==="native"?k||oe||ge:k||oe||N||_||ge,updateValidation(se){n==="aria"&&!d4(ge,se)?be(se):de.current=se},resetValidation(){let se=Ay;d4(se,pe.current)||(pe.current=se,be(se)),n==="native"&&Ae(!1),Y(!0)},commitValidation(){n==="native"&&Ae(!0),Y(!0)}}}function $S(e){return e?Array.isArray(e)?e:[e]:[]}function cY(e,t){if(typeof e=="function"){let i=e(t);if(i&&typeof i!="boolean")return $S(i)}return[]}function GM(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:i7}:null}function d4(e,t){return e===t?!0:!!e&&!!t&&e.isInvalid===t.isInvalid&&e.validationErrors.length===t.validationErrors.length&&e.validationErrors.every((i,c)=>i===t.validationErrors[c])&&Object.entries(e.validationDetails).every(([i,c])=>t.validationDetails[i]===c)}function L_(e,t,i){let{validationBehavior:c,focus:h}=e;si(()=>{if(c==="native"&&(i!=null&&i.current)&&!i.current.disabled){let k=t.realtimeValidation.isInvalid?t.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";i.current.setCustomValidity(k),i.current.hasAttribute("title")||(i.current.title=""),t.realtimeValidation.isInvalid||t.updateValidation(dY(i.current))}});let _=Zs(()=>{t.resetValidation()}),w=Zs(k=>{var N;t.displayValidation.isInvalid||t.commitValidation();let B=i==null||(N=i.current)===null||N===void 0?void 0:N.form;if(!k.defaultPrevented&&i&&B&&hY(B)===i.current){var F;h?h():(F=i.current)===null||F===void 0||F.focus(),wG("keyboard")}k.preventDefault()}),n=Zs(()=>{t.commitValidation()});V.useEffect(()=>{let k=i==null?void 0:i.current;if(!k)return;let N=k.form;return k.addEventListener("invalid",w),k.addEventListener("change",n),N==null||N.addEventListener("reset",_),()=>{k.removeEventListener("invalid",w),k.removeEventListener("change",n),N==null||N.removeEventListener("reset",_)}},[i,w,n,_,c])}function uY(e){let t=e.validity;return{badInput:t.badInput,customError:t.customError,patternMismatch:t.patternMismatch,rangeOverflow:t.rangeOverflow,rangeUnderflow:t.rangeUnderflow,stepMismatch:t.stepMismatch,tooLong:t.tooLong,tooShort:t.tooShort,typeMismatch:t.typeMismatch,valueMissing:t.valueMissing,valid:t.valid}}function dY(e){return{isInvalid:!e.validity.valid,validationDetails:uY(e),validationErrors:e.validationMessage?[e.validationMessage]:[]}}function hY(e){for(let t=0;t<e.elements.length;t++){let i=e.elements[t];if(!i.validity.valid)return i}return null}const gT=typeof document<"u"?ra.useLayoutEffect:()=>{};function Vg(e){const t=V.useRef(null);return gT(()=>{t.current=e},[e]),V.useCallback((...i)=>{const c=t.current;return c==null?void 0:c(...i)},[])}let NS=new Map;typeof FinalizationRegistry<"u"&&new FinalizationRegistry(e=>{NS.delete(e)});function fY(e,t){if(e===t)return e;let i=NS.get(e);if(i)return i.forEach(h=>h.current=t),t;let c=NS.get(t);return c?(c.forEach(h=>h.current=e),e):t}function o7(...e){return(...t)=>{for(let i of e)typeof i=="function"&&i(...t)}}const bu=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},a0=e=>e&&"window"in e&&e.window===e?e:bu(e).defaultView||window;function pY(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function mY(e){return pY(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}function Es(e,t){if(!l0())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let i=t;for(;i!==null;){if(i===e)return!0;i.tagName==="SLOT"&&i.assignedSlot?i=i.assignedSlot.parentNode:mY(i)?i=i.host:i=i.parentNode}return!1}const Ew=(e=document)=>{var t;if(!l0())return e.activeElement;let i=e.activeElement;for(;i&&"shadowRoot"in i&&(!((t=i.shadowRoot)===null||t===void 0)&&t.activeElement);)i=i.shadowRoot.activeElement;return i};function Bi(e){return l0()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function l7(e){var t,i,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(t=0;t<h;t++)e[t]&&(i=l7(e[t]))&&(c&&(c+=" "),c+=i)}else for(i in e)e[i]&&(c&&(c+=" "),c+=i);return c}function gY(){for(var e,t,i=0,c="",h=arguments.length;i<h;i++)(e=arguments[i])&&(t=l7(e))&&(c&&(c+=" "),c+=t);return c}function Yg(...e){let t={...e[0]};for(let i=1;i<e.length;i++){let c=e[i];for(let h in c){let _=t[h],w=c[h];typeof _=="function"&&typeof w=="function"&&h[0]==="o"&&h[1]==="n"&&h.charCodeAt(2)>=65&&h.charCodeAt(2)<=90?t[h]=o7(_,w):(h==="className"||h==="UNSAFE_className")&&typeof _=="string"&&typeof w=="string"?t[h]=gY(_,w):h==="id"&&_&&w?t.id=fY(_,w):t[h]=w!==void 0?w:_}}return t}const yY=new Set(["id"]),xY=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),vY=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),_Y=/^(data-.*)$/;function bY(e,t={}){let{labelable:i,isLink:c,propNames:h}=t,_={};for(const w in e)Object.prototype.hasOwnProperty.call(e,w)&&(yY.has(w)||i&&xY.has(w)||c&&vY.has(w)||h!=null&&h.has(w)||_Y.test(w))&&(_[w]=e[w]);return _}function ix(e){if(wY())e.focus({preventScroll:!0});else{let t=SY(e);e.focus(),TY(t)}}let D1=null;function wY(){if(D1==null){D1=!1;try{document.createElement("div").focus({get preventScroll(){return D1=!0,!0}})}catch{}}return D1}function SY(e){let t=e.parentNode,i=[],c=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==c;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&i.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return c instanceof HTMLElement&&i.push({element:c,scrollTop:c.scrollTop,scrollLeft:c.scrollLeft}),i}function TY(e){for(let{element:t,scrollTop:i,scrollLeft:c}of e)t.scrollTop=i,t.scrollLeft=c}function a2(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(i=>e.test(i.brand)))||e.test(window.navigator.userAgent)}function yT(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Im(e){let t=null;return()=>(t==null&&(t=e()),t)}const m_=Im(function(){return yT(/^Mac/i)}),EY=Im(function(){return yT(/^iPhone/i)}),c7=Im(function(){return yT(/^iPad/i)||m_()&&navigator.maxTouchPoints>1}),u7=Im(function(){return EY()||c7()}),CY=Im(function(){return a2(/AppleWebKit/i)&&!DY()}),DY=Im(function(){return a2(/Chrome/i)}),d7=Im(function(){return a2(/Android/i)}),PY=Im(function(){return a2(/Firefox/i)});function g_(e,t,i=!0){var c,h;let{metaKey:_,ctrlKey:w,altKey:n,shiftKey:k}=t;PY()&&(!((h=window.event)===null||h===void 0||(c=h.type)===null||c===void 0)&&c.startsWith("key"))&&e.target==="_blank"&&(m_()?_=!0:w=!0);let N=CY()&&m_()&&!c7()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:_,ctrlKey:w,altKey:n,shiftKey:k}):new MouseEvent("click",{metaKey:_,ctrlKey:w,altKey:n,shiftKey:k,bubbles:!0,cancelable:!0});g_.isOpening=i,ix(e),e.dispatchEvent(N),g_.isOpening=!1}g_.isOpening=!1;let ky=new Map,BS=new Set;function HM(){if(typeof window>"u")return;function e(c){return"propertyName"in c}let t=c=>{if(!e(c)||!c.target)return;let h=ky.get(c.target);h||(h=new Set,ky.set(c.target,h),c.target.addEventListener("transitioncancel",i,{once:!0})),h.add(c.propertyName)},i=c=>{if(!e(c)||!c.target)return;let h=ky.get(c.target);if(h&&(h.delete(c.propertyName),h.size===0&&(c.target.removeEventListener("transitioncancel",i),ky.delete(c.target)),ky.size===0)){for(let _ of BS)_();BS.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",i)}typeof document<"u"&&(document.readyState!=="loading"?HM():document.addEventListener("DOMContentLoaded",HM));function h7(e){requestAnimationFrame(()=>{ky.size===0?e():BS.add(e)})}function MY(){let e=V.useRef(new Map),t=V.useCallback((h,_,w,n)=>{let k=n!=null&&n.once?(...N)=>{e.current.delete(w),w(...N)}:w;e.current.set(w,{type:_,eventTarget:h,fn:k,options:n}),h.addEventListener(_,k,n)},[]),i=V.useCallback((h,_,w,n)=>{var k;let N=((k=e.current.get(w))===null||k===void 0?void 0:k.fn)||w;h.removeEventListener(_,N,n),e.current.delete(w)},[]),c=V.useCallback(()=>{e.current.forEach((h,_)=>{i(h.eventTarget,h.type,_,h.options)})},[i]);return V.useEffect(()=>c,[c]),{addGlobalListener:t,removeGlobalListener:i,removeAllGlobalListeners:c}}function f7(e,t){gT(()=>{if(e&&e.ref&&t)return e.ref.current=t.current,()=>{e.ref&&(e.ref.current=null)}})}function jS(e){return e.mozInputSource===0&&e.isTrusted?!0:d7()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function AY(e){return!d7()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}function kY(e,t,i){let c=V.useRef(t),h=Vg(()=>{i&&i(c.current)});V.useEffect(()=>{var _;let w=e==null||(_=e.current)===null||_===void 0?void 0:_.form;return w==null||w.addEventListener("reset",h),()=>{w==null||w.removeEventListener("reset",h)}},[e,h])}const p7=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])'],RY=p7.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";p7.push('[tabindex]:not([tabindex="-1"]):not([disabled])');function IY(e){return e.matches(RY)}let Oy="default",OS="",H1=new WeakMap;function qM(e){if(u7()){if(Oy==="default"){const t=bu(e);OS=t.documentElement.style.webkitUserSelect,t.documentElement.style.webkitUserSelect="none"}Oy="disabled"}else if(e instanceof HTMLElement||e instanceof SVGElement){let t="userSelect"in e.style?"userSelect":"webkitUserSelect";H1.set(e,e.style[t]),e.style[t]="none"}}function h4(e){if(u7()){if(Oy!=="disabled")return;Oy="restoring",setTimeout(()=>{h7(()=>{if(Oy==="restoring"){const t=bu(e);t.documentElement.style.webkitUserSelect==="none"&&(t.documentElement.style.webkitUserSelect=OS||""),OS="",Oy="default"}})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&H1.has(e)){let t=H1.get(e),i="userSelect"in e.style?"userSelect":"webkitUserSelect";e.style[i]==="none"&&(e.style[i]=t),e.getAttribute("style")===""&&e.removeAttribute("style"),H1.delete(e)}}const m7=ra.createContext({register:()=>{}});m7.displayName="PressResponderContext";class zY{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(t,i){this.nativeEvent=i,this.target=i.target,this.currentTarget=i.currentTarget,this.relatedTarget=i.relatedTarget,this.bubbles=i.bubbles,this.cancelable=i.cancelable,this.defaultPrevented=i.defaultPrevented,this.eventPhase=i.eventPhase,this.isTrusted=i.isTrusted,this.timeStamp=i.timeStamp,this.type=t}}function LY(e){let t=V.useRef({isFocused:!1,observer:null});gT(()=>{const c=t.current;return()=>{c.observer&&(c.observer.disconnect(),c.observer=null)}},[]);let i=Vg(c=>{e==null||e(c)});return V.useCallback(c=>{if(c.target instanceof HTMLButtonElement||c.target instanceof HTMLInputElement||c.target instanceof HTMLTextAreaElement||c.target instanceof HTMLSelectElement){t.current.isFocused=!0;let h=c.target,_=w=>{t.current.isFocused=!1,h.disabled&&i(new zY("blur",w)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};h.addEventListener("focusout",_,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&h.disabled){var w;(w=t.current.observer)===null||w===void 0||w.disconnect();let n=h===document.activeElement?null:document.activeElement;h.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),h.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}}),t.current.observer.observe(h,{attributes:!0,attributeFilter:["disabled"]})}},[i])}let Cw=!1;function WM(e){for(;e&&!IY(e);)e=e.parentElement;let t=a0(e),i=t.document.activeElement;if(!i||i===e)return;Cw=!0;let c=!1,h=B=>{(B.target===i||c)&&B.stopImmediatePropagation()},_=B=>{(B.target===i||c)&&(B.stopImmediatePropagation(),!e&&!c&&(c=!0,ix(i),k()))},w=B=>{(B.target===e||c)&&B.stopImmediatePropagation()},n=B=>{(B.target===e||c)&&(B.stopImmediatePropagation(),c||(c=!0,ix(i),k()))};t.addEventListener("blur",h,!0),t.addEventListener("focusout",_,!0),t.addEventListener("focusin",n,!0),t.addEventListener("focus",w,!0);let k=()=>{cancelAnimationFrame(N),t.removeEventListener("blur",h,!0),t.removeEventListener("focusout",_,!0),t.removeEventListener("focusin",n,!0),t.removeEventListener("focus",w,!0),Cw=!1,c=!1},N=requestAnimationFrame(k);return k}function $Y(e){let t=V.useContext(m7);if(t){let{register:i,...c}=t;e=Yg(c,e),i()}return f7(t,e.ref),e}var P1=new WeakMap;class M1{continuePropagation(){fw(this,P1,!1)}get shouldStopPropagation(){return Zk(this,P1)}constructor(t,i,c,h){dx(this,P1,{writable:!0,value:void 0}),fw(this,P1,!0);var _;let w=(_=h==null?void 0:h.target)!==null&&_!==void 0?_:c.currentTarget;const n=w==null?void 0:w.getBoundingClientRect();let k,N=0,B,F=null;c.clientX!=null&&c.clientY!=null&&(B=c.clientX,F=c.clientY),n&&(B!=null&&F!=null?(k=B-n.left,N=F-n.top):(k=n.width/2,N=n.height/2)),this.type=t,this.pointerType=i,this.target=c.currentTarget,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.x=k,this.y=N}}const KM=Symbol("linkClicked");function ZM(e){let{onPress:t,onPressChange:i,onPressStart:c,onPressEnd:h,onPressUp:_,isDisabled:w,isPressed:n,preventFocusOnPress:k,shouldCancelOnPointerExit:N,allowTextSelectionOnPress:B,ref:F,...G}=$Y(e),[Q,te]=V.useState(!1),Y=V.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:oe,removeAllGlobalListeners:de}=MY(),ge=Vg((re,Te)=>{let se=Y.current;if(w||se.didFirePressStart)return!1;let ue=!0;if(se.isTriggeringEvent=!0,c){let De=new M1("pressstart",Te,re);c(De),ue=De.shouldStopPropagation}return i&&i(!0),se.isTriggeringEvent=!1,se.didFirePressStart=!0,te(!0),ue}),be=Vg((re,Te,se=!0)=>{let ue=Y.current;if(!ue.didFirePressStart)return!1;ue.didFirePressStart=!1,ue.isTriggeringEvent=!0;let De=!0;if(h){let ce=new M1("pressend",Te,re);h(ce),De=ce.shouldStopPropagation}if(i&&i(!1),te(!1),t&&se&&!w){let ce=new M1("press",Te,re);t(ce),De&&(De=ce.shouldStopPropagation)}return ue.isTriggeringEvent=!1,De}),pe=Vg((re,Te)=>{let se=Y.current;if(w)return!1;if(_){se.isTriggeringEvent=!0;let ue=new M1("pressup",Te,re);return _(ue),se.isTriggeringEvent=!1,ue.shouldStopPropagation}return!0}),we=Vg(re=>{let Te=Y.current;if(Te.isPressed&&Te.target){Te.didFirePressStart&&Te.pointerType!=null&&be(by(Te.target,re),Te.pointerType,!1),Te.isPressed=!1,Te.isOverTarget=!1,Te.activePointerId=null,Te.pointerType=null,de(),B||h4(Te.target);for(let se of Te.disposables)se();Te.disposables=[]}}),ke=Vg(re=>{N&&we(re)}),Ae=V.useMemo(()=>{let re=Y.current,Te={onKeyDown(ue){if(f4(ue.nativeEvent,ue.currentTarget)&&Es(ue.currentTarget,Bi(ue.nativeEvent))){var De;JM(Bi(ue.nativeEvent),ue.key)&&ue.preventDefault();let ce=!0;if(!re.isPressed&&!ue.repeat){re.target=ue.currentTarget,re.isPressed=!0,re.pointerType="keyboard",ce=ge(ue,"keyboard");let je=ue.currentTarget,Le=Re=>{f4(Re,je)&&!Re.repeat&&Es(je,Bi(Re))&&re.target&&pe(by(re.target,Re),"keyboard")};oe(bu(ue.currentTarget),"keyup",o7(Le,se),!0)}ce&&ue.stopPropagation(),ue.metaKey&&m_()&&((De=re.metaKeyEvents)===null||De===void 0||De.set(ue.key,ue.nativeEvent))}else ue.key==="Meta"&&(re.metaKeyEvents=new Map)},onClick(ue){if(!(ue&&!Es(ue.currentTarget,Bi(ue.nativeEvent)))&&ue&&ue.button===0&&!re.isTriggeringEvent&&!g_.isOpening){let De=!0;if(w&&ue.preventDefault(),!re.ignoreEmulatedMouseEvents&&!re.isPressed&&(re.pointerType==="virtual"||jS(ue.nativeEvent))){let ce=ge(ue,"virtual"),je=pe(ue,"virtual"),Le=be(ue,"virtual");De=ce&&je&&Le}else if(re.isPressed&&re.pointerType!=="keyboard"){let ce=re.pointerType||ue.nativeEvent.pointerType||"virtual";De=be(by(ue.currentTarget,ue),ce,!0),re.isOverTarget=!1,we(ue)}re.ignoreEmulatedMouseEvents=!1,De&&ue.stopPropagation()}}},se=ue=>{var De;if(re.isPressed&&re.target&&f4(ue,re.target)){var ce;JM(Bi(ue),ue.key)&&ue.preventDefault();let Le=Bi(ue);be(by(re.target,ue),"keyboard",Es(re.target,Bi(ue))),de(),ue.key!=="Enter"&&xT(re.target)&&Es(re.target,Le)&&!ue[KM]&&(ue[KM]=!0,g_(re.target,ue,!1)),re.isPressed=!1,(ce=re.metaKeyEvents)===null||ce===void 0||ce.delete(ue.key)}else if(ue.key==="Meta"&&(!((De=re.metaKeyEvents)===null||De===void 0)&&De.size)){var je;let Le=re.metaKeyEvents;re.metaKeyEvents=void 0;for(let Re of Le.values())(je=re.target)===null||je===void 0||je.dispatchEvent(new KeyboardEvent("keyup",Re))}};if(typeof PointerEvent<"u"){Te.onPointerDown=ce=>{if(ce.button!==0||!Es(ce.currentTarget,Bi(ce.nativeEvent)))return;if(AY(ce.nativeEvent)){re.pointerType="virtual";return}re.pointerType=ce.pointerType;let je=!0;if(!re.isPressed){re.isPressed=!0,re.isOverTarget=!0,re.activePointerId=ce.pointerId,re.target=ce.currentTarget,B||qM(re.target),je=ge(ce,re.pointerType);let Le=Bi(ce.nativeEvent);"releasePointerCapture"in Le&&Le.releasePointerCapture(ce.pointerId),oe(bu(ce.currentTarget),"pointerup",ue,!1),oe(bu(ce.currentTarget),"pointercancel",De,!1)}je&&ce.stopPropagation()},Te.onMouseDown=ce=>{if(Es(ce.currentTarget,Bi(ce.nativeEvent))&&ce.button===0){if(k){let je=WM(ce.target);je&&re.disposables.push(je)}ce.stopPropagation()}},Te.onPointerUp=ce=>{!Es(ce.currentTarget,Bi(ce.nativeEvent))||re.pointerType==="virtual"||ce.button===0&&pe(ce,re.pointerType||ce.pointerType)},Te.onPointerEnter=ce=>{ce.pointerId===re.activePointerId&&re.target&&!re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!0,ge(by(re.target,ce),re.pointerType))},Te.onPointerLeave=ce=>{ce.pointerId===re.activePointerId&&re.target&&re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!1,be(by(re.target,ce),re.pointerType,!1),ke(ce))};let ue=ce=>{if(ce.pointerId===re.activePointerId&&re.isPressed&&ce.button===0&&re.target){if(Es(re.target,Bi(ce))&&re.pointerType!=null){let je=!1,Le=setTimeout(()=>{re.isPressed&&re.target instanceof HTMLElement&&(je?we(ce):(ix(re.target),re.target.click()))},80);oe(ce.currentTarget,"click",()=>je=!0,!0),re.disposables.push(()=>clearTimeout(Le))}else we(ce);re.isOverTarget=!1}},De=ce=>{we(ce)};Te.onDragStart=ce=>{Es(ce.currentTarget,Bi(ce.nativeEvent))&&we(ce)}}else{Te.onMouseDown=ce=>{if(ce.button!==0||!Es(ce.currentTarget,Bi(ce.nativeEvent)))return;if(re.ignoreEmulatedMouseEvents){ce.stopPropagation();return}if(re.isPressed=!0,re.isOverTarget=!0,re.target=ce.currentTarget,re.pointerType=jS(ce.nativeEvent)?"virtual":"mouse",Iw.flushSync(()=>ge(ce,re.pointerType))&&ce.stopPropagation(),k){let Le=WM(ce.target);Le&&re.disposables.push(Le)}oe(bu(ce.currentTarget),"mouseup",ue,!1)},Te.onMouseEnter=ce=>{if(!Es(ce.currentTarget,Bi(ce.nativeEvent)))return;let je=!0;re.isPressed&&!re.ignoreEmulatedMouseEvents&&re.pointerType!=null&&(re.isOverTarget=!0,je=ge(ce,re.pointerType)),je&&ce.stopPropagation()},Te.onMouseLeave=ce=>{if(!Es(ce.currentTarget,Bi(ce.nativeEvent)))return;let je=!0;re.isPressed&&!re.ignoreEmulatedMouseEvents&&re.pointerType!=null&&(re.isOverTarget=!1,je=be(ce,re.pointerType,!1),ke(ce)),je&&ce.stopPropagation()},Te.onMouseUp=ce=>{Es(ce.currentTarget,Bi(ce.nativeEvent))&&!re.ignoreEmulatedMouseEvents&&ce.button===0&&pe(ce,re.pointerType||"mouse")};let ue=ce=>{if(ce.button===0){if(re.ignoreEmulatedMouseEvents){re.ignoreEmulatedMouseEvents=!1;return}re.target&&re.target.contains(ce.target)&&re.pointerType!=null||we(ce),re.isOverTarget=!1}};Te.onTouchStart=ce=>{if(!Es(ce.currentTarget,Bi(ce.nativeEvent)))return;let je=NY(ce.nativeEvent);if(!je)return;re.activePointerId=je.identifier,re.ignoreEmulatedMouseEvents=!0,re.isOverTarget=!0,re.isPressed=!0,re.target=ce.currentTarget,re.pointerType="touch",B||qM(re.target),ge(dm(re.target,ce),re.pointerType)&&ce.stopPropagation(),oe(a0(ce.currentTarget),"scroll",De,!0)},Te.onTouchMove=ce=>{if(!Es(ce.currentTarget,Bi(ce.nativeEvent)))return;if(!re.isPressed){ce.stopPropagation();return}let je=XM(ce.nativeEvent,re.activePointerId),Le=!0;je&&YM(je,ce.currentTarget)?!re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!0,Le=ge(dm(re.target,ce),re.pointerType)):re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!1,Le=be(dm(re.target,ce),re.pointerType,!1),ke(dm(re.target,ce))),Le&&ce.stopPropagation()},Te.onTouchEnd=ce=>{if(!Es(ce.currentTarget,Bi(ce.nativeEvent)))return;if(!re.isPressed){ce.stopPropagation();return}let je=XM(ce.nativeEvent,re.activePointerId),Le=!0;je&&YM(je,ce.currentTarget)&&re.pointerType!=null?(pe(dm(re.target,ce),re.pointerType),Le=be(dm(re.target,ce),re.pointerType)):re.isOverTarget&&re.pointerType!=null&&(Le=be(dm(re.target,ce),re.pointerType,!1)),Le&&ce.stopPropagation(),re.isPressed=!1,re.activePointerId=null,re.isOverTarget=!1,re.ignoreEmulatedMouseEvents=!0,re.target&&!B&&h4(re.target),de()},Te.onTouchCancel=ce=>{Es(ce.currentTarget,Bi(ce.nativeEvent))&&(ce.stopPropagation(),re.isPressed&&we(dm(re.target,ce)))};let De=ce=>{re.isPressed&&Es(Bi(ce),re.target)&&we({currentTarget:re.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};Te.onDragStart=ce=>{Es(ce.currentTarget,Bi(ce.nativeEvent))&&we(ce)}}return Te},[oe,w,k,de,B,we,ke,be,ge,pe]);return V.useEffect(()=>{let re=Y.current;return()=>{var Te;B||h4((Te=re.target)!==null&&Te!==void 0?Te:void 0);for(let se of re.disposables)se();re.disposables=[]}},[B]),{isPressed:n||Q,pressProps:Yg(G,Ae)}}function xT(e){return e.tagName==="A"&&e.hasAttribute("href")}function f4(e,t){const{key:i,code:c}=e,h=t,_=h.getAttribute("role");return(i==="Enter"||i===" "||i==="Spacebar"||c==="Space")&&!(h instanceof a0(h).HTMLInputElement&&!g7(h,i)||h instanceof a0(h).HTMLTextAreaElement||h.isContentEditable)&&!((_==="link"||!_&&xT(h))&&i!=="Enter")}function NY(e){const{targetTouches:t}=e;return t.length>0?t[0]:null}function XM(e,t){const i=e.changedTouches;for(let c=0;c<i.length;c++){const h=i[c];if(h.identifier===t)return h}return null}function dm(e,t){let i=0,c=0;return t.targetTouches&&t.targetTouches.length===1&&(i=t.targetTouches[0].clientX,c=t.targetTouches[0].clientY),{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:i,clientY:c}}function by(e,t){let i=t.clientX,c=t.clientY;return{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:i,clientY:c}}function BY(e){let t=0,i=0;return e.width!==void 0?t=e.width/2:e.radiusX!==void 0&&(t=e.radiusX),e.height!==void 0?i=e.height/2:e.radiusY!==void 0&&(i=e.radiusY),{top:e.clientY-i,right:e.clientX+t,bottom:e.clientY+i,left:e.clientX-t}}function jY(e,t){return!(e.left>t.right||t.left>e.right||e.top>t.bottom||t.top>e.bottom)}function YM(e,t){let i=t.getBoundingClientRect(),c=BY(e);return jY(i,c)}function OY(e){return e instanceof HTMLInputElement?!1:e instanceof HTMLButtonElement?e.type!=="submit"&&e.type!=="reset":!xT(e)}function JM(e,t){return e instanceof HTMLInputElement?!g7(e,t):OY(e)}const FY=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function g7(e,t){return e.type==="checkbox"||e.type==="radio"?t===" ":FY.has(e.type)}let $_=null,VY=new Set,Jv=new Map,n0=!1,FS=!1;function vT(e,t){for(let i of VY)i(e,t)}function UY(e){return!(e.metaKey||!m_()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function Dw(e){n0=!0,UY(e)&&($_="keyboard",vT("keyboard",e))}function xu(e){$_="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(n0=!0,vT("pointer",e))}function y7(e){jS(e)&&(n0=!0,$_="virtual")}function x7(e){e.target===window||e.target===document||Cw||!e.isTrusted||(!n0&&!FS&&($_="virtual",vT("virtual",e)),n0=!1,FS=!1)}function v7(){Cw||(n0=!1,FS=!0)}function QM(e){if(typeof window>"u"||Jv.get(a0(e)))return;const t=a0(e),i=bu(e);let c=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){n0=!0,c.apply(this,arguments)},i.addEventListener("keydown",Dw,!0),i.addEventListener("keyup",Dw,!0),i.addEventListener("click",y7,!0),t.addEventListener("focus",x7,!0),t.addEventListener("blur",v7,!1),typeof PointerEvent<"u"?(i.addEventListener("pointerdown",xu,!0),i.addEventListener("pointermove",xu,!0),i.addEventListener("pointerup",xu,!0)):(i.addEventListener("mousedown",xu,!0),i.addEventListener("mousemove",xu,!0),i.addEventListener("mouseup",xu,!0)),t.addEventListener("beforeunload",()=>{_7(e)},{once:!0}),Jv.set(t,{focus:c})}const _7=(e,t)=>{const i=a0(e),c=bu(e);t&&c.removeEventListener("DOMContentLoaded",t),Jv.has(i)&&(i.HTMLElement.prototype.focus=Jv.get(i).focus,c.removeEventListener("keydown",Dw,!0),c.removeEventListener("keyup",Dw,!0),c.removeEventListener("click",y7,!0),i.removeEventListener("focus",x7,!0),i.removeEventListener("blur",v7,!1),typeof PointerEvent<"u"?(c.removeEventListener("pointerdown",xu,!0),c.removeEventListener("pointermove",xu,!0),c.removeEventListener("pointerup",xu,!0)):(c.removeEventListener("mousedown",xu,!0),c.removeEventListener("mousemove",xu,!0),c.removeEventListener("mouseup",xu,!0)),Jv.delete(i))};function GY(e){const t=bu(e);let i;return t.readyState!=="loading"?QM(e):(i=()=>{QM(e)},t.addEventListener("DOMContentLoaded",i)),()=>_7(e,i)}typeof document<"u"&&GY();function HY(){return $_}function qY(e){const t=bu(e),i=Ew(t);if(HY()==="virtual"){let c=i;h7(()=>{Ew(t)===c&&e.isConnected&&ix(e)})}else ix(e)}function WY(e){let{isDisabled:t,onFocus:i,onBlur:c,onFocusChange:h}=e;const _=V.useCallback(k=>{if(k.target===k.currentTarget)return c&&c(k),h&&h(!1),!0},[c,h]),w=LY(_),n=V.useCallback(k=>{const N=bu(k.target),B=N?Ew(N):Ew();k.target===k.currentTarget&&B===Bi(k.nativeEvent)&&(i&&i(k),h&&h(!0),w(k))},[h,i,w]);return{focusProps:{onFocus:!t&&(i||h||c)?n:void 0,onBlur:!t&&(c||h)?_:void 0}}}function e6(e){if(!e)return;let t=!0;return i=>{let c={...i,preventDefault(){i.preventDefault()},isDefaultPrevented(){return i.isDefaultPrevented()},stopPropagation(){t?console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior."):t=!0},continuePropagation(){t=!1},isPropagationStopped(){return t}};e(c),t&&i.stopPropagation()}}function KY(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:e6(e.onKeyDown),onKeyUp:e6(e.onKeyUp)}}}let ZY=ra.createContext(null);function XY(e){let t=V.useContext(ZY)||{};f7(t,e);let{ref:i,...c}=t;return c}function YY(e,t){let{focusProps:i}=WY(e),{keyboardProps:c}=KY(e),h=Yg(i,c),_=XY(t),w=e.isDisabled?{}:_,n=V.useRef(e.autoFocus);V.useEffect(()=>{n.current&&t.current&&qY(t.current),n.current=!1},[t]);let k=e.excludeFromTabOrder?-1:0;return e.isDisabled&&(k=void 0),{focusableProps:Yg({...h,tabIndex:k},w)}}function JY(e,t,i){let{isDisabled:c=!1,isReadOnly:h=!1,value:_,name:w,children:n,"aria-label":k,"aria-labelledby":N,validationState:B="valid",isInvalid:F}=e,G=ke=>{ke.stopPropagation(),t.setSelected(ke.target.checked)},Q=n!=null,te=k!=null||N!=null;!Q&&!te&&console.warn("If you do not provide children, you must specify an aria-label for accessibility");let{pressProps:Y,isPressed:oe}=ZM({isDisabled:c}),{pressProps:de,isPressed:ge}=ZM({onPress(){var ke;t.toggle(),(ke=i.current)===null||ke===void 0||ke.focus()},isDisabled:c||h}),{focusableProps:be}=YY(e,i),pe=Yg(Y,be),we=bY(e,{labelable:!0});return kY(i,t.isSelected,t.setSelected),{labelProps:Yg(de,{onClick:ke=>ke.preventDefault()}),inputProps:Yg(we,{"aria-invalid":F||B==="invalid"||void 0,"aria-errormessage":e["aria-errormessage"],"aria-controls":e["aria-controls"],"aria-readonly":h||void 0,onChange:G,disabled:c,..._==null?{}:{value:_},name:w,type:"checkbox",...pe}),isSelected:t.isSelected,isPressed:oe||ge,isDisabled:c,isReadOnly:h,isInvalid:F||B==="invalid"}}function b7(e,t,i){let c=Rm({...e,value:t.isSelected}),{isInvalid:h,validationErrors:_,validationDetails:w}=c.displayValidation,{labelProps:n,inputProps:k,isSelected:N,isPressed:B,isDisabled:F,isReadOnly:G}=JY({...e,isInvalid:h},t,i);L_(e,c,i);let{isIndeterminate:Q,isRequired:te,validationBehavior:Y="aria"}=e;V.useEffect(()=>{i.current&&(i.current.indeterminate=!!Q)});let{pressProps:oe}=wu({isDisabled:F||G,onPress(){let{[nx]:de}=e,{commitValidation:ge}=de||c;ge()}});return{labelProps:xr(n,oe),inputProps:{...k,checked:N,"aria-required":te&&Y==="aria"||void 0,required:te&&Y==="native"},isSelected:N,isPressed:B,isDisabled:F,isReadOnly:G,isInvalid:h,validationErrors:_,validationDetails:w}}const QY=new WeakMap;function w7(e){let{id:t,label:i,"aria-labelledby":c,"aria-label":h,labelElementType:_="label"}=e;t=Ns(t);let w=Ns(),n={};i?(c=c?`${w} ${c}`:w,n={id:w,htmlFor:_==="label"?t:void 0}):!c&&!h&&console.warn("If you do not provide a visible label, you must specify an aria-label or aria-labelledby attribute for accessibility");let k=C_({id:t,"aria-label":h,"aria-labelledby":c});return{labelProps:n,fieldProps:k}}function n2(e){let{description:t,errorMessage:i,isInvalid:c,validationState:h}=e,{labelProps:_,fieldProps:w}=w7(e),n=vm([!!t,!!i,c,h]),k=vm([!!t,!!i,c,h]);return w=xr(w,{"aria-describedby":[n,k,e["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:_,fieldProps:w,descriptionProps:{id:n},errorMessageProps:{id:k}}}function S7(e={}){let{isReadOnly:t}=e,[i,c]=Xs(e.isSelected,e.defaultSelected||!1,e.onChange);function h(w){t||c(w)}function _(){t||c(!i)}return{isSelected:i,setSelected:h,toggle:_}}function eJ(e,t,i){const c=S7({isReadOnly:e.isReadOnly||t.isReadOnly,isSelected:t.isSelected(e.value),onChange(oe){oe?t.addValue(e.value):t.removeValue(e.value),e.onChange&&e.onChange(oe)}});let{name:h,descriptionId:_,errorMessageId:w,validationBehavior:n}=QY.get(t);var k;n=(k=e.validationBehavior)!==null&&k!==void 0?k:n;let{realtimeValidation:N}=Rm({...e,value:c.isSelected,name:void 0,validationBehavior:"aria"}),B=V.useRef(Ay),F=()=>{t.setInvalid(e.value,N.isInvalid?N:B.current)};V.useEffect(F);let G=t.realtimeValidation.isInvalid?t.realtimeValidation:N,Q=n==="native"?t.displayValidation:G;var te;let Y=b7({...e,isReadOnly:e.isReadOnly||t.isReadOnly,isDisabled:e.isDisabled||t.isDisabled,name:e.name||h,isRequired:(te=e.isRequired)!==null&&te!==void 0?te:t.isRequired,validationBehavior:n,[nx]:{realtimeValidation:G,displayValidation:Q,resetValidation:t.resetValidation,commitValidation:t.commitValidation,updateValidation(oe){B.current=oe,F()}}},c,i);return{...Y,inputProps:{...Y.inputProps,"aria-describedby":[e["aria-describedby"],t.isInvalid?w:null,_].filter(Boolean).join(" ")||void 0}}}var t6=Symbol("default");function Gf(e,t){let i=V.useContext(e);if(t===null)return null;if(i&&typeof i=="object"&&"slots"in i&&i.slots){let c=new Intl.ListFormat().format(Object.keys(i.slots).map(_=>`"${_}"`));if(!t&&!i.slots[t6])throw new Error(`A slot prop is required. Valid slot names are ${c}.`);let h=t||t6;if(!i.slots[h])throw new Error(`Invalid slot "${t}". Valid slot names are ${c}.`);return i.slots[h]}return i}function tJ(e,t,i){let c=Gf(i,e.slot)||{},{ref:h,..._}=c,w=IU(V.useMemo(()=>_5(t,h),[t,h])),n=xr(_,e);return"style"in _&&_.style&&"style"in e&&e.style&&(typeof _.style=="function"||typeof e.style=="function"?n.style=k=>{let N=typeof _.style=="function"?_.style(k):_.style,B={...k.defaultStyle,...N},F=typeof e.style=="function"?e.style({...k,defaultStyle:B}):e.style;return{...B,...F}}:n.style={..._.style,...e.style}),[n,w]}var wh=V.createContext(null);V.forwardRef(function(t,i){[t,i]=tJ(t,i,wh);let{validationErrors:c,validationBehavior:h="native",children:_,className:w,...n}=t;const k=V.useMemo(()=>yX({className:w}),[w]);return b.jsx("form",{noValidate:h!=="native",...n,ref:i,className:k,children:b.jsx(wh.Provider,{value:{...t,validationBehavior:h},children:b.jsx(s7.Provider,{value:c??{},children:_})})})});var[woe,rJ]=Sh({name:"CheckboxGroupContext",strict:!1});function aJ(e){const{isSelected:t,disableAnimation:i,...c}=e;return b.jsx("svg",{"aria-hidden":"true",fill:"none",role:"presentation",stroke:"currentColor",strokeDasharray:22,strokeDashoffset:t?44:66,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,style:!i&&t?{transition:"stroke-dashoffset 250ms linear 0.2s"}:{},viewBox:"0 0 17 18",...c,children:b.jsx("polyline",{points:"1 9 7 14 15 4"})})}function nJ(e){const{isSelected:t,disableAnimation:i,...c}=e;return b.jsx("svg",{stroke:"currentColor",strokeWidth:3,viewBox:"0 0 24 24",...c,children:b.jsx("line",{x1:"21",x2:"3",y1:"12",y2:"12"})})}function iJ(e){const{isIndeterminate:t,...i}=e,c=t?nJ:aJ;return b.jsx(c,{...i})}function VS(e,t=[]){const i=V.useRef(e);return gx(()=>{i.current=e}),V.useCallback((...c)=>{var h;return(h=i.current)==null?void 0:h.call(i,...c)},t)}function sJ(e={}){var t,i,c,h,_,w,n,k;const N=Pi(),B=rJ(),{validationBehavior:F}=Gf(wh)||{},G=!!B,{as:Q,ref:te,value:Y="",children:oe,icon:de,name:ge,isRequired:be,isReadOnly:pe=!1,autoFocus:we=!1,isSelected:ke,size:Ae=(t=B==null?void 0:B.size)!=null?t:"md",color:re=(i=B==null?void 0:B.color)!=null?i:"primary",radius:Te=B==null?void 0:B.radius,lineThrough:se=(c=B==null?void 0:B.lineThrough)!=null?c:!1,isDisabled:ue=(h=B==null?void 0:B.isDisabled)!=null?h:!1,disableAnimation:De=(w=(_=B==null?void 0:B.disableAnimation)!=null?_:N==null?void 0:N.disableAnimation)!=null?w:!1,validationState:ce,isInvalid:je=ce?ce==="invalid":(n=B==null?void 0:B.isInvalid)!=null?n:!1,isIndeterminate:Le=!1,validationBehavior:Re=G?B.validationBehavior:(k=F??(N==null?void 0:N.validationBehavior))!=null?k:"native",defaultSelected:Ge,classNames:ze,className:ot,onValueChange:Ee,validate:Ke,...nt}=e,Xe=Q||"label",ut=V.useRef(null),Pt=V.useRef(null);let Ct=e.onChange;G&&(Ct=qi(()=>{B.groupState.resetValidation()},Ct));const Zt=V.useId(),Dt=V.useMemo(()=>({name:ge,value:Y,children:oe,autoFocus:we,defaultSelected:Ge,isIndeterminate:Le,isRequired:be,isInvalid:je,isSelected:ke,isDisabled:ue,isReadOnly:pe,"aria-label":o5(nt["aria-label"],oe),"aria-labelledby":nt["aria-labelledby"]||Zt,onChange:Ee}),[ge,Y,oe,we,Ge,Le,be,je,ke,ue,pe,nt["aria-label"],nt["aria-labelledby"],Zt,Ee]),er=S7(Dt),Se={isInvalid:je,isRequired:be,validate:Ke,validationState:ce,validationBehavior:Re},{inputProps:ur,isSelected:Sr,isDisabled:yt,isReadOnly:dt,isPressed:$t,isInvalid:or}=G?eJ({...Dt,...Se},B.groupState,Pt):b7({...Dt,...Se},er,Pt),Er=yt||dt,mr=ce==="invalid"||je||or,Pr=Er?!1:$t,{hoverProps:Fr,isHovered:$a}=wo({isDisabled:ur.disabled}),{focusProps:Xr,isFocused:ja,isFocusVisible:fr}=Ac({autoFocus:ur.autoFocus}),Sa=V.useMemo(()=>xX({color:re,size:Ae,radius:Te,isInvalid:mr,lineThrough:se,isDisabled:yt,disableAnimation:De}),[re,Ae,Te,mr,se,yt,De]);gx(()=>{if(!Pt.current)return;const qa=!!Pt.current.checked;er.setSelected(qa)},[Pt.current]);const kr=VS(Ct),Dr=V.useCallback(qa=>{if(dt||yt){qa.preventDefault();return}kr==null||kr(qa)},[dt,yt,kr]),Nr=Br(ze==null?void 0:ze.base,ot),na=V.useCallback(()=>({ref:ut,className:Sa.base({class:Nr}),"data-disabled":Vt(yt),"data-selected":Vt(Sr||Le),"data-invalid":Vt(mr),"data-hover":Vt($a),"data-focus":Vt(ja),"data-pressed":Vt(Pr),"data-readonly":Vt(ur.readOnly),"data-focus-visible":Vt(fr),"data-indeterminate":Vt(Le),...xr(Fr,nt)}),[Sa,Nr,yt,Sr,Le,mr,$a,ja,Pr,ur.readOnly,fr,Fr,nt]),Sn=V.useCallback((qa={})=>({...qa,"aria-hidden":!0,className:Br(Sa.wrapper({class:Br(ze==null?void 0:ze.wrapper,qa==null?void 0:qa.className)}))}),[Sa,ze==null?void 0:ze.wrapper]),Zn=V.useCallback(()=>({ref:c5(Pt,te),...xr(ur,Xr),className:Sa.hiddenInput({class:ze==null?void 0:ze.hiddenInput}),onChange:qi(ur.onChange,Dr)}),[ur,Xr,Dr,ze==null?void 0:ze.hiddenInput]),on=V.useCallback(()=>({id:Zt,className:Sa.label({class:ze==null?void 0:ze.label})}),[Sa,ze==null?void 0:ze.label,yt,Sr,mr]),Ha=V.useCallback(()=>({isSelected:Sr,isIndeterminate:Le,disableAnimation:De,className:Sa.icon({class:ze==null?void 0:ze.icon})}),[Sa,ze==null?void 0:ze.icon,Sr,Le,De]);return{Component:Xe,icon:de,children:oe,isSelected:Sr,isDisabled:yt,isInvalid:mr,isFocused:ja,isHovered:$a,isFocusVisible:fr,getBaseProps:na,getWrapperProps:Sn,getInputProps:Zn,getLabelProps:on,getIconProps:Ha}}var T7=Bn((e,t)=>{const{Component:i,children:c,icon:h=b.jsx(iJ,{}),getBaseProps:_,getWrapperProps:w,getInputProps:n,getIconProps:k,getLabelProps:N}=sJ({...e,ref:t}),B=typeof h=="function"?h(k()):V.cloneElement(h,k());return b.jsxs(i,{..._(),children:[b.jsx("input",{...n()}),b.jsx("span",{...w(),children:B}),c&&b.jsx("span",{...N(),children:c})]})});T7.displayName="HeroUI.Checkbox";var gi=T7;const r6=e=>typeof e=="object"&&e!=null&&e.nodeType===1,a6=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",A1=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const i=getComputedStyle(e,null);return a6(i.overflowY,t)||a6(i.overflowX,t)||(c=>{const h=(_=>{if(!_.ownerDocument||!_.ownerDocument.defaultView)return null;try{return _.ownerDocument.defaultView.frameElement}catch{return null}})(c);return!!h&&(h.clientHeight<c.scrollHeight||h.clientWidth<c.scrollWidth)})(e)}return!1},k1=(e,t,i,c,h,_,w,n)=>_<e&&w>t||_>e&&w<t?0:_<=e&&n<=i||w>=t&&n>=i?_-e-c:w>t&&n<i||_<e&&n>i?w-t+h:0,oJ=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},n6=(e,t)=>{var i,c,h,_;if(typeof document>"u")return[];const{scrollMode:w,block:n,inline:k,boundary:N,skipOverflowHiddenElements:B}=t,F=typeof N=="function"?N:Re=>Re!==N;if(!r6(e))throw new TypeError("Invalid target");const G=document.scrollingElement||document.documentElement,Q=[];let te=e;for(;r6(te)&&F(te);){if(te=oJ(te),te===G){Q.push(te);break}te!=null&&te===document.body&&A1(te)&&!A1(document.documentElement)||te!=null&&A1(te,B)&&Q.push(te)}const Y=(c=(i=window.visualViewport)==null?void 0:i.width)!=null?c:innerWidth,oe=(_=(h=window.visualViewport)==null?void 0:h.height)!=null?_:innerHeight,{scrollX:de,scrollY:ge}=window,{height:be,width:pe,top:we,right:ke,bottom:Ae,left:re}=e.getBoundingClientRect(),{top:Te,right:se,bottom:ue,left:De}=(Re=>{const Ge=window.getComputedStyle(Re);return{top:parseFloat(Ge.scrollMarginTop)||0,right:parseFloat(Ge.scrollMarginRight)||0,bottom:parseFloat(Ge.scrollMarginBottom)||0,left:parseFloat(Ge.scrollMarginLeft)||0}})(e);let ce=n==="start"||n==="nearest"?we-Te:n==="end"?Ae+ue:we+be/2-Te+ue,je=k==="center"?re+pe/2-De+se:k==="end"?ke+se:re-De;const Le=[];for(let Re=0;Re<Q.length;Re++){const Ge=Q[Re],{height:ze,width:ot,top:Ee,right:Ke,bottom:nt,left:Xe}=Ge.getBoundingClientRect();if(w==="if-needed"&&we>=0&&re>=0&&Ae<=oe&&ke<=Y&&(Ge===G&&!A1(Ge)||we>=Ee&&Ae<=nt&&re>=Xe&&ke<=Ke))return Le;const ut=getComputedStyle(Ge),Pt=parseInt(ut.borderLeftWidth,10),Ct=parseInt(ut.borderTopWidth,10),Zt=parseInt(ut.borderRightWidth,10),Dt=parseInt(ut.borderBottomWidth,10);let er=0,Se=0;const ur="offsetWidth"in Ge?Ge.offsetWidth-Ge.clientWidth-Pt-Zt:0,Sr="offsetHeight"in Ge?Ge.offsetHeight-Ge.clientHeight-Ct-Dt:0,yt="offsetWidth"in Ge?Ge.offsetWidth===0?0:ot/Ge.offsetWidth:0,dt="offsetHeight"in Ge?Ge.offsetHeight===0?0:ze/Ge.offsetHeight:0;if(G===Ge)er=n==="start"?ce:n==="end"?ce-oe:n==="nearest"?k1(ge,ge+oe,oe,Ct,Dt,ge+ce,ge+ce+be,be):ce-oe/2,Se=k==="start"?je:k==="center"?je-Y/2:k==="end"?je-Y:k1(de,de+Y,Y,Pt,Zt,de+je,de+je+pe,pe),er=Math.max(0,er+ge),Se=Math.max(0,Se+de);else{er=n==="start"?ce-Ee-Ct:n==="end"?ce-nt+Dt+Sr:n==="nearest"?k1(Ee,nt,ze,Ct,Dt+Sr,ce,ce+be,be):ce-(Ee+ze/2)+Sr/2,Se=k==="start"?je-Xe-Pt:k==="center"?je-(Xe+ot/2)+ur/2:k==="end"?je-Ke+Zt+ur:k1(Xe,Ke,ot,Pt,Zt+ur,je,je+pe,pe);const{scrollLeft:$t,scrollTop:or}=Ge;er=dt===0?0:Math.max(0,Math.min(or+er/dt,Ge.scrollHeight-ze/dt+Sr)),Se=yt===0?0:Math.max(0,Math.min($t+Se/yt,Ge.scrollWidth-ot/yt+ur)),ce+=or-er,je+=$t-Se}Le.push({el:Ge,top:er,left:Se})}return Le},lJ=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function cJ(e,t){if(!e.isConnected||!(c=>{let h=c;for(;h&&h.parentNode;){if(h.parentNode===document)return!0;h=h.parentNode instanceof ShadowRoot?h.parentNode.host:h.parentNode}return!1})(e))return;if((c=>typeof c=="object"&&typeof c.behavior=="function")(t))return t.behavior(n6(e,t));const i=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:c,top:h,left:_}of n6(e,lJ(t)))c.scroll({top:h,left:_,behavior:i})}let uJ=Math.round(Math.random()*1e10),dJ=0;function hJ(e){let t=V.useMemo(()=>e.name||`radio-group-${uJ}-${++dJ}`,[e.name]);var i;let[c,h]=Xs(e.value,(i=e.defaultValue)!==null&&i!==void 0?i:null,e.onChange),[_,w]=V.useState(null),n=Rm({...e,value:c}),k=B=>{!e.isReadOnly&&!e.isDisabled&&(h(B),n.commitValidation())},N=n.displayValidation.isInvalid;return{...n,name:t,selectedValue:c,setSelectedValue:k,lastFocusedValue:_,setLastFocusedValue:w,isDisabled:e.isDisabled||!1,isReadOnly:e.isReadOnly||!1,isRequired:e.isRequired||!1,validationState:e.validationState||(N?"invalid":null),isInvalid:N}}const E7=new WeakMap;function fJ(e,t,i){let{value:c,children:h,"aria-label":_,"aria-labelledby":w}=e;const n=e.isDisabled||t.isDisabled;let k=h!=null,N=_!=null||w!=null;!k&&!N&&console.warn("If you do not provide children, you must specify an aria-label for accessibility");let B=t.selectedValue===c,F=re=>{re.stopPropagation(),t.setSelectedValue(c)},{pressProps:G,isPressed:Q}=wu({isDisabled:n}),{pressProps:te,isPressed:Y}=wu({isDisabled:n,onPress(){var re;t.setSelectedValue(c),(re=i.current)===null||re===void 0||re.focus()}}),{focusableProps:oe}=M_(xr(e,{onFocus:()=>t.setLastFocusedValue(c)}),i),de=xr(G,oe),ge=Fl(e,{labelable:!0}),be=-1;t.selectedValue!=null?t.selectedValue===c&&(be=0):(t.lastFocusedValue===c||t.lastFocusedValue==null)&&(be=0),n&&(be=void 0);let{name:pe,descriptionId:we,errorMessageId:ke,validationBehavior:Ae}=E7.get(t);return D_(i,t.selectedValue,t.setSelectedValue),L_({validationBehavior:Ae},t,i),{labelProps:xr(te,{onClick:re=>re.preventDefault()}),inputProps:xr(ge,{...de,type:"radio",name:pe,tabIndex:be,disabled:n,required:t.isRequired&&Ae==="native",checked:B,value:c,onChange:F,"aria-describedby":[e["aria-describedby"],t.isInvalid?ke:null,we].filter(Boolean).join(" ")||void 0}),isDisabled:n,isSelected:B,isPressed:Q||Y}}function pJ(e,t){let{name:i,isReadOnly:c,isRequired:h,isDisabled:_,orientation:w="vertical",validationBehavior:n="aria"}=e,{direction:k}=Ms(),{isInvalid:N,validationErrors:B,validationDetails:F}=t.displayValidation,{labelProps:G,fieldProps:Q,descriptionProps:te,errorMessageProps:Y}=n2({...e,labelElementType:"span",isInvalid:t.isInvalid,errorMessage:e.errorMessage||B}),oe=Fl(e,{labelable:!0}),{focusWithinProps:de}=yd({onBlurWithin(pe){var we;(we=e.onBlur)===null||we===void 0||we.call(e,pe),t.selectedValue||t.setLastFocusedValue(null)},onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange}),ge=pe=>{let we;switch(pe.key){case"ArrowRight":k==="rtl"&&w!=="vertical"?we="prev":we="next";break;case"ArrowLeft":k==="rtl"&&w!=="vertical"?we="next":we="prev";break;case"ArrowDown":we="next";break;case"ArrowUp":we="prev";break;default:return}pe.preventDefault();let ke=Ho(pe.currentTarget,{from:pe.target}),Ae;we==="next"?(Ae=ke.nextNode(),Ae||(ke.currentNode=pe.currentTarget,Ae=ke.firstChild())):(Ae=ke.previousNode(),Ae||(ke.currentNode=pe.currentTarget,Ae=ke.lastChild())),Ae&&(Ae.focus(),t.setSelectedValue(Ae.value))},be=Ns(i);return E7.set(t,{name:be,descriptionId:te.id,errorMessageId:Y.id,validationBehavior:n}),{radioGroupProps:xr(oe,{role:"radiogroup",onKeyDown:ge,"aria-invalid":t.isInvalid||void 0,"aria-errormessage":e["aria-errormessage"],"aria-readonly":c||void 0,"aria-required":h||void 0,"aria-disabled":_||void 0,"aria-orientation":w,...Q,...de}),labelProps:G,descriptionProps:te,errorMessageProps:Y,isInvalid:N,validationErrors:B,validationDetails:F}}function mJ(e){var t,i;const c=Pi(),{validationBehavior:h}=Gf(wh)||{},{as:_,ref:w,classNames:n,children:k,label:N,value:B,name:F,isInvalid:G,validationState:Q,validationBehavior:te=(t=h??(c==null?void 0:c.validationBehavior))!=null?t:"native",size:Y="md",color:oe="primary",isDisabled:de=!1,disableAnimation:ge=(i=c==null?void 0:c.disableAnimation)!=null?i:!1,orientation:be="vertical",isRequired:pe=!1,isReadOnly:we,errorMessage:ke,description:Ae,className:re,onChange:Te,onValueChange:se,...ue}=e,De=_||"div",ce=typeof De=="string",je=Nn(w),Le=V.useMemo(()=>({...ue,value:B,name:F,"aria-label":o5(ue["aria-label"],N),isRequired:pe,isReadOnly:we,isInvalid:Q==="invalid"||G,orientation:be,validationBehavior:te,onChange:se}),[ue,B,F,N,pe,we,G,Q,te,be,se]),Re=hJ(Le),{labelProps:Ge,radioGroupProps:ze,errorMessageProps:ot,descriptionProps:Ee,isInvalid:Ke,validationErrors:nt,validationDetails:Xe}=pJ(Le,Re),ut=Le.isInvalid||Ke||Re.isInvalid,Pt=V.useMemo(()=>({size:Y,color:oe,groupState:Re,isRequired:pe,isInvalid:ut,isDisabled:de,disableAnimation:ge,onChange:Te}),[Y,oe,pe,de,ut,Te,ge,Re.name,Re.isDisabled,Re.isReadOnly,Re.isRequired,Re.selectedValue,Re.lastFocusedValue]),Ct=V.useMemo(()=>dX({isRequired:pe,isInvalid:ut,disableAnimation:ge}),[ut,pe,ge]),Zt=Br(n==null?void 0:n.base,re),Dt=V.useCallback(()=>({ref:je,className:Ct.base({class:Zt}),...xr(ze,Wo(ue,{enabled:ce}))}),[je,Ct,Zt,ze,ue]),er=V.useCallback(()=>({className:Ct.label({class:n==null?void 0:n.label}),...Ge}),[Ct,n==null?void 0:n.label,Ge,n==null?void 0:n.label]),Se=V.useCallback(()=>({className:Ct.wrapper({class:n==null?void 0:n.wrapper}),role:"presentation","data-orientation":be}),[Ct,n==null?void 0:n.wrapper,be,Ct.wrapper]),ur=V.useCallback((yt={})=>({...yt,...Ee,className:Ct.description({class:Br(n==null?void 0:n.description,yt==null?void 0:yt.className)})}),[Ct,n==null?void 0:n.description,Ee,Ct.description]),Sr=V.useCallback((yt={})=>({...yt,...ot,className:Ct.errorMessage({class:Br(n==null?void 0:n.errorMessage,yt==null?void 0:yt.className)})}),[Ct,n==null?void 0:n.errorMessage,ot]);return{Component:De,children:k,label:N,context:Pt,description:Ae,isInvalid:ut,errorMessage:typeof ke=="function"?ke({isInvalid:ut,validationErrors:nt,validationDetails:Xe}):ke||(nt==null?void 0:nt.join(" ")),getGroupProps:Dt,getLabelProps:er,getWrapperProps:Se,getDescriptionProps:ur,getErrorMessageProps:Sr}}var[gJ,yJ]=Sh({name:"RadioGroupContext",strict:!1}),C7=Bn((e,t)=>{const{Component:i,children:c,label:h,context:_,description:w,isInvalid:n,errorMessage:k,getGroupProps:N,getLabelProps:B,getWrapperProps:F,getDescriptionProps:G,getErrorMessageProps:Q}=mJ({...e,ref:t});return b.jsxs(i,{...N(),children:[h&&b.jsx("span",{...B(),children:h}),b.jsx("div",{...F(),children:b.jsx(gJ,{value:_,children:c})}),n&&k?b.jsx("div",{...Q(),children:k}):w?b.jsx("div",{...G(),children:w}):null]})});C7.displayName="HeroUI.RadioGroup";var i6=C7;function xJ(e){var t,i,c,h,_;const w=Pi(),n=yJ(),{as:k,ref:N,classNames:B,id:F,value:G,children:Q,description:te,size:Y=(t=n==null?void 0:n.size)!=null?t:"md",color:oe=(i=n==null?void 0:n.color)!=null?i:"primary",isDisabled:de=(c=n==null?void 0:n.isDisabled)!=null?c:!1,disableAnimation:ge=(_=(h=n==null?void 0:n.disableAnimation)!=null?h:w==null?void 0:w.disableAnimation)!=null?_:!1,onChange:be=n==null?void 0:n.onChange,autoFocus:pe=!1,className:we,...ke}=e,Ae=k||"label",re=Nn(N),Te=V.useRef(null),se=V.useId(),ue=V.useId(),De=V.useMemo(()=>{var $t;return($t=n.isRequired)!=null?$t:!1},[n.isRequired]),ce=n.isInvalid,je=V.useMemo(()=>{const $t=[ke["aria-describedby"],ue].filter(Boolean).join(" ")||void 0;return{id:F,isRequired:De,isDisabled:de,"aria-label":ke["aria-label"],"aria-labelledby":ke["aria-labelledby"]||se,"aria-describedby":$t}},[F,de,De,te,ke["aria-label"],ke["aria-labelledby"],ke["aria-describedby"],ue]),{inputProps:Le,isDisabled:Re,isSelected:Ge,isPressed:ze}=fJ({value:G,children:typeof Q=="function"?!0:Q,...je},n.groupState,Te),{focusProps:ot,isFocused:Ee,isFocusVisible:Ke}=Ac({autoFocus:pe}),nt=Re||Le.readOnly,{hoverProps:Xe,isHovered:ut}=wo({isDisabled:nt}),Pt=nt?!1:ze,Ct=V.useMemo(()=>uX({color:oe,size:Y,isInvalid:ce,isDisabled:Re,disableAnimation:ge}),[oe,Y,Re,ce,ge]),Zt=Br(B==null?void 0:B.base,we),Dt=V.useCallback(($t={})=>({...$t,ref:re,className:Ct.base({class:Zt}),"data-disabled":Vt(Re),"data-focus":Vt(Ee),"data-focus-visible":Vt(Ke),"data-selected":Vt(Ge),"data-invalid":Vt(ce),"data-hover":Vt(ut),"data-pressed":Vt(Pt),"data-hover-unselected":Vt(ut&&!Ge),"data-readonly":Vt(Le.readOnly),"aria-required":Vt(De),...xr(Xe,ke)}),[Ct,Zt,re,Re,Ee,Ke,Ge,ce,ut,Pt,Le.readOnly,De,ke]),er=V.useCallback(($t={})=>({...$t,"aria-hidden":!0,className:Br(Ct.wrapper({class:Br(B==null?void 0:B.wrapper,$t.className)}))}),[Ct,B==null?void 0:B.wrapper]),Se=V.useCallback(($t={})=>({ref:Te,...xr($t,Le,ot),className:Ct.hiddenInput({class:B==null?void 0:B.hiddenInput}),onChange:qi(Le.onChange,be)}),[Le,ot,be]),ur=V.useCallback(($t={})=>({...$t,id:se,className:Ct.label({class:B==null?void 0:B.label})}),[Ct,B==null?void 0:B.label,Re,Ge,ce]),Sr=V.useCallback(($t={})=>({...$t,className:Ct.labelWrapper({class:B==null?void 0:B.labelWrapper})}),[Ct,B==null?void 0:B.labelWrapper]),yt=V.useCallback(($t={})=>({...$t,className:Ct.control({class:B==null?void 0:B.control})}),[Ct,B==null?void 0:B.control]),dt=V.useCallback(($t={})=>({...$t,id:ue,className:Ct.description({class:B==null?void 0:B.description})}),[Ct,B==null?void 0:B.description]);return{Component:Ae,children:Q,isSelected:Ge,isDisabled:Re,isInvalid:ce,isFocusVisible:Ke,description:te,getBaseProps:Dt,getWrapperProps:er,getInputProps:Se,getLabelProps:ur,getLabelWrapperProps:Sr,getControlProps:yt,getDescriptionProps:dt}}var D7=Bn((e,t)=>{const{Component:i,children:c,description:h,getBaseProps:_,getWrapperProps:w,getInputProps:n,getLabelProps:k,getLabelWrapperProps:N,getControlProps:B,getDescriptionProps:F}=xJ({...e,ref:t});return b.jsxs(i,{..._(),children:[b.jsx("input",{...n()}),b.jsx("span",{...w(),children:b.jsx("span",{...B()})}),b.jsxs("div",{...N(),children:[c&&b.jsx("span",{...k(),children:c}),h&&b.jsx("span",{...F(),children:h})]})]})});D7.displayName="HeroUI.Radio";var R1=D7;function N_(e){let[t,i]=Xs(e.isOpen,e.defaultOpen||!1,e.onOpenChange);const c=V.useCallback(()=>{i(!0)},[i]),h=V.useCallback(()=>{i(!1)},[i]),_=V.useCallback(()=>{i(!t)},[i,t]);return{isOpen:t,setOpen:i,open:c,close:h,toggle:_}}const vJ=1500,s6=500;let Rg={},_J=0,Mv=!1,Ef=null,Ig=null;function bJ(e={}){let{delay:t=vJ,closeDelay:i=s6}=e,{isOpen:c,open:h,close:_}=N_(e),w=V.useMemo(()=>`${++_J}`,[]),n=V.useRef(null),k=V.useRef(_),N=()=>{Rg[w]=G},B=()=>{for(let te in Rg)te!==w&&(Rg[te](!0),delete Rg[te])},F=()=>{n.current&&clearTimeout(n.current),n.current=null,B(),N(),Mv=!0,h(),Ef&&(clearTimeout(Ef),Ef=null),Ig&&(clearTimeout(Ig),Ig=null)},G=te=>{te||i<=0?(n.current&&clearTimeout(n.current),n.current=null,k.current()):n.current||(n.current=setTimeout(()=>{n.current=null,k.current()},i)),Ef&&(clearTimeout(Ef),Ef=null),Mv&&(Ig&&clearTimeout(Ig),Ig=setTimeout(()=>{delete Rg[w],Ig=null,Mv=!1},Math.max(s6,i)))},Q=()=>{B(),N(),!c&&!Ef&&!Mv?Ef=setTimeout(()=>{Ef=null,Mv=!0,F()},t):c||F()};return V.useEffect(()=>{k.current=_},[_]),V.useEffect(()=>()=>{n.current&&clearTimeout(n.current),Rg[w]&&delete Rg[w]},[w]),{isOpen:c,open:te=>{!te&&t>0&&!n.current?Q():F()},close:G}}function wJ(e,t){let i=Fl(e,{labelable:!0}),{hoverProps:c}=wo({onHoverStart:()=>t==null?void 0:t.open(!0),onHoverEnd:()=>t==null?void 0:t.close()});return{tooltipProps:xr(i,c,{role:"tooltip"})}}function SJ(e,t,i){let{isDisabled:c,trigger:h}=e,_=Ns(),w=V.useRef(!1),n=V.useRef(!1),k=()=>{(w.current||n.current)&&t.open(n.current)},N=de=>{!w.current&&!n.current&&t.close(de)};V.useEffect(()=>{let de=ge=>{i&&i.current&&ge.key==="Escape"&&(ge.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener("keydown",de,!0),()=>{document.removeEventListener("keydown",de,!0)}},[i,t]);let B=()=>{h!=="focus"&&(Sm()==="pointer"?w.current=!0:w.current=!1,k())},F=()=>{h!=="focus"&&(n.current=!1,w.current=!1,N())},G=()=>{n.current=!1,w.current=!1,N(!0)},Q=()=>{t0()&&(n.current=!0,k())},te=()=>{n.current=!1,w.current=!1,N(!0)},{hoverProps:Y}=wo({isDisabled:c,onHoverStart:B,onHoverEnd:F}),{focusableProps:oe}=M_({isDisabled:c,onFocus:Q,onBlur:te},i);return{triggerProps:{"aria-describedby":t.isOpen?_:void 0,...xr(oe,Y,{onPointerDown:G,onKeyDown:G,tabIndex:void 0})},tooltipProps:{id:_}}}function TJ(e){var t,i;const c=Pi(),[h,_]=Zo(e,Sw.variantKeys),{ref:w,as:n,isOpen:k,content:N,children:B,defaultOpen:F,onOpenChange:G,isDisabled:Q,trigger:te,shouldFlip:Y=!0,containerPadding:oe=12,placement:de="top",delay:ge=0,closeDelay:be=500,showArrow:pe=!1,offset:we=7,crossOffset:ke=0,isDismissable:Ae,shouldCloseOnBlur:re=!0,portalContainer:Te,isKeyboardDismissDisabled:se=!1,updatePositionDeps:ue=[],shouldCloseOnInteractOutside:De,className:ce,onClose:je,motionProps:Le,classNames:Re,...Ge}=h,ze=n||"div",ot=(i=(t=e==null?void 0:e.disableAnimation)!=null?t:c==null?void 0:c.disableAnimation)!=null?i:!1,Ee=bJ({delay:ge,closeDelay:be,isDisabled:Q,defaultOpen:F,isOpen:k,onOpenChange:or=>{G==null||G(or),or||je==null||je()}}),Ke=V.useRef(null),nt=V.useRef(null),Xe=V.useId(),ut=Ee.isOpen&&!Q;V.useImperativeHandle(w,()=>NF(nt));const{triggerProps:Pt,tooltipProps:Ct}=SJ({isDisabled:Q,trigger:te},Ee,Ke),{tooltipProps:Zt}=wJ({isOpen:ut,...xr(h,Ct)},Ee),{overlayProps:Dt,placement:er,updatePosition:Se}=Gk({isOpen:ut,targetRef:Ke,placement:e7(de),overlayRef:nt,offset:pe?we+3:we,crossOffset:ke,shouldFlip:Y,containerPadding:oe});gx(()=>{ue.length&&Se()},ue);const{overlayProps:ur}=P5({isOpen:ut,onClose:Ee.close,isDismissable:Ae,shouldCloseOnBlur:re,isKeyboardDismissDisabled:se,shouldCloseOnInteractOutside:De},nt),Sr=V.useMemo(()=>{var or,Er,mr;return Sw({..._,disableAnimation:ot,radius:(or=e==null?void 0:e.radius)!=null?or:"md",size:(Er=e==null?void 0:e.size)!=null?Er:"md",shadow:(mr=e==null?void 0:e.shadow)!=null?mr:"sm"})},[Ko(_),ot,e==null?void 0:e.radius,e==null?void 0:e.size,e==null?void 0:e.shadow]),yt=V.useCallback((or={},Er=null)=>({...xr(Pt,or),ref:c5(Er,Ke),"aria-describedby":ut?Xe:void 0}),[Pt,ut,Xe,Ee]),dt=V.useCallback(()=>({ref:nt,"data-slot":"base","data-open":Vt(ut),"data-arrow":Vt(pe),"data-disabled":Vt(Q),"data-placement":Tw(er||"top",de),...xr(Zt,ur,Ge),style:xr(Dt.style,Ge.style,h.style),className:Sr.base({class:Re==null?void 0:Re.base}),id:Xe}),[Sr,ut,pe,Q,er,de,Zt,ur,Ge,Dt,h,Xe]),$t=V.useCallback(()=>({"data-slot":"content","data-open":Vt(ut),"data-arrow":Vt(pe),"data-disabled":Vt(Q),"data-placement":Tw(er||"top",de),className:Sr.content({class:Br(Re==null?void 0:Re.content,ce)})}),[Sr,ut,pe,Q,er,de,Re]);return{Component:ze,content:N,children:B,isOpen:ut,triggerRef:Ke,showArrow:pe,portalContainer:Te,placement:de,disableAnimation:ot,isDisabled:Q,motionProps:Le,getTooltipContentProps:$t,getTriggerProps:yt,getTooltipProps:dt}}var EJ=()=>km(()=>import("./index-BxFlUVnv.js"),[]).then(e=>e.default),P7=Bn((e,t)=>{var i;const{Component:c,children:h,content:_,isOpen:w,portalContainer:n,placement:k,disableAnimation:N,motionProps:B,getTriggerProps:F,getTooltipProps:G,getTooltipContentProps:Q}=TJ({...e,ref:t});let te;try{if(V.Children.count(h)!==1)throw new Error;if(!V.isValidElement(h))te=b.jsx("p",{...F(),children:h});else{const we=h,ke=(i=we.props.ref)!=null?i:we.ref;te=V.cloneElement(we,F(we.props,ke))}}catch{te=b.jsx("span",{}),$w("Tooltip must have only one child node. Please, check your code.")}const{ref:Y,id:oe,style:de,...ge}=G(),be=b.jsx("div",{ref:Y,id:oe,style:de,children:b.jsx(Tu,{features:EJ,children:b.jsx(jl.div,{animate:"enter",exit:"exit",initial:"exit",variants:ax.scaleSpring,...xr(B,ge),style:{...fT(k)},children:b.jsx(c,{...Q(),children:_})})})});return b.jsxs(b.Fragment,{children:[te,N&&w?b.jsx(eP,{portalContainer:n,children:b.jsx("div",{ref:Y,id:oe,style:de,...ge,children:b.jsx(c,{...Q(),children:_})})}):b.jsx(Uf,{children:w?b.jsx(eP,{portalContainer:n,children:be}):null})]})});P7.displayName="HeroUI.Tooltip";var CJ=P7;function M7(e={}){const{rerender:t=!1,delay:i=0}=e,c=V.useRef(!1),[h,_]=V.useState(!1);return V.useEffect(()=>{c.current=!0;let w=null;return t&&(i>0?w=setTimeout(()=>{_(!0)},i):_(!0)),()=>{c.current=!1,t&&_(!1),w&&clearTimeout(w)}},[t]),[V.useCallback(()=>c.current,[]),h]}function A7(e){let{value:t=0,minValue:i=0,maxValue:c=100,valueLabel:h,isIndeterminate:_,formatOptions:w={style:"percent"}}=e,n=Fl(e,{labelable:!0}),{labelProps:k,fieldProps:N}=w7({...e,labelElementType:"span"});t=Wg(t,i,c);let B=(t-i)/(c-i),F=tS(w);if(!_&&!h){let G=w.style==="percent"?B:t;h=F.format(G)}return{progressBarProps:xr(n,{...N,"aria-valuenow":_?void 0:t,"aria-valuemin":i,"aria-valuemax":c,"aria-valuetext":_?void 0:h,role:"progressbar"}),labelProps:k}}function DJ(e){var t,i,c;const h=Pi(),[_,w]=Zo(e,DM.variantKeys),{ref:n,as:k,id:N,className:B,classNames:F,label:G,valueLabel:Q,value:te=void 0,minValue:Y=0,maxValue:oe=100,strokeWidth:de,showValueLabel:ge=!1,formatOptions:be={style:"percent"},...pe}=_,we=k||"div",ke=Nn(n),Ae=Br(F==null?void 0:F.base,B),[,re]=M7({rerender:!0,delay:100}),Te=((t=e.isIndeterminate)!=null?t:!0)&&te===void 0,se=(c=(i=e.disableAnimation)!=null?i:h==null?void 0:h.disableAnimation)!=null?c:!1,{progressBarProps:ue,labelProps:De}=A7({id:N,label:G,value:te,minValue:Y,maxValue:oe,valueLabel:Q,formatOptions:be,isIndeterminate:Te,"aria-labelledby":e["aria-labelledby"],"aria-label":e["aria-label"]}),ce=V.useMemo(()=>DM({...w,disableAnimation:se,isIndeterminate:Te}),[Ko(w),se,Te]),je=se?!0:re,Le=16,Re=de||(e.size==="sm"?2:3),Ge=16-Re,ze=2*Ge*Math.PI,ot=V.useMemo(()=>je?Te?.25:te?UA((te-Y)/(oe-Y),1):0:0,[je,te,Y,oe,Te]),Ee=ze-ot*ze,Ke=V.useCallback((Ct={})=>({ref:ke,"data-indeterminate":Vt(Te),"data-disabled":Vt(e.isDisabled),className:ce.base({class:Ae}),...xr(ue,pe,Ct)}),[ke,ce,Te,e.isDisabled,Ae,ue,pe]),nt=V.useCallback((Ct={})=>({className:ce.label({class:F==null?void 0:F.label}),...xr(De,Ct)}),[ce,F,De]),Xe=V.useCallback((Ct={})=>({viewBox:"0 0 32 32",fill:"none",strokeWidth:Re,className:ce.svg({class:F==null?void 0:F.svg}),...Ct}),[Re,ce,F]),ut=V.useCallback((Ct={})=>({cx:Le,cy:Le,r:Ge,role:"presentation",strokeDasharray:`${ze} ${ze}`,strokeDashoffset:Ee,transform:"rotate(-90 16 16)",strokeLinecap:"round",className:ce.indicator({class:F==null?void 0:F.indicator}),...Ct}),[ce,F,Ee,ze,Ge]),Pt=V.useCallback((Ct={})=>({cx:Le,cy:Le,r:Ge,role:"presentation",strokeDasharray:`${ze} ${ze}`,strokeDashoffset:0,transform:"rotate(-90 16 16)",strokeLinecap:"round",className:ce.track({class:F==null?void 0:F.track}),...Ct}),[ce,F,ze,Ge]);return{Component:we,domRef:ke,slots:ce,classNames:F,label:G,showValueLabel:ge,getProgressBarProps:Ke,getLabelProps:nt,getSvgProps:Xe,getIndicatorProps:ut,getTrackProps:Pt}}var k7=Bn((e,t)=>{const{Component:i,slots:c,classNames:h,label:_,showValueLabel:w,getProgressBarProps:n,getLabelProps:k,getSvgProps:N,getIndicatorProps:B,getTrackProps:F}=DJ({ref:t,...e}),G=n();return b.jsxs(i,{...G,children:[b.jsxs("div",{className:c.svgWrapper({class:h==null?void 0:h.svgWrapper}),children:[b.jsxs("svg",{...N(),children:[b.jsx("circle",{...F()}),b.jsx("circle",{...B()})]}),w&&b.jsx("span",{className:c.value({class:h==null?void 0:h.value}),children:G["aria-valuetext"]})]}),_&&b.jsx("span",{...k(),children:_})]})});k7.displayName="HeroUI.CircularProgress";var i2=k7;function PJ(e){var t,i;const c=Pi(),[h,_]=Zo(e,CM.variantKeys),{ref:w,as:n,id:k,className:N,classNames:B,label:F,valueLabel:G,value:Q=0,minValue:te=0,maxValue:Y=100,showValueLabel:oe=!1,formatOptions:de={style:"percent"},...ge}=h,be=n||"div",pe=Nn(w),we=Br(B==null?void 0:B.base,N),[,ke]=M7({rerender:!0,delay:100}),Ae=e.isIndeterminate,re=(i=(t=e.disableAnimation)!=null?t:c==null?void 0:c.disableAnimation)!=null?i:!1,{progressBarProps:Te,labelProps:se}=A7({id:k,label:F,value:Q,minValue:te,maxValue:Y,valueLabel:G,formatOptions:de,isIndeterminate:Ae,"aria-labelledby":e["aria-labelledby"],"aria-label":e["aria-label"]}),ue=V.useMemo(()=>CM({..._,disableAnimation:re}),[Ko(_),re]),De=re?!0:ke,ce=V.useMemo(()=>Ae||!De?void 0:UA((Q-te)/(Y-te)*100),[De,Ae,Q,te,Y]),je=V.useCallback((Re={})=>({ref:pe,"data-indeterminate":Vt(Ae),"data-disabled":Vt(e.isDisabled),className:ue.base({class:we}),...xr(Te,ge,Re)}),[pe,ue,Ae,e.isDisabled,we,Te,ge]),Le=V.useCallback((Re={})=>({className:ue.label({class:B==null?void 0:B.label}),...xr(se,Re)}),[ue,B,se]);return{Component:be,domRef:pe,slots:ue,classNames:B,label:F,percentage:ce,showValueLabel:oe,getProgressBarProps:je,getLabelProps:Le}}var R7=Bn((e,t)=>{const{Component:i,slots:c,classNames:h,label:_,percentage:w,showValueLabel:n,getProgressBarProps:k,getLabelProps:N}=PJ({...e,ref:t}),B=k(),F=_||n;return b.jsxs(i,{...B,children:[F?b.jsxs("div",{className:c.labelWrapper({class:h==null?void 0:h.labelWrapper}),children:[_&&b.jsx("span",{...N(),children:_}),n&&b.jsx("span",{className:c.value({class:h==null?void 0:h.value}),children:B["aria-valuetext"]})]}):null,b.jsx("div",{className:c.track({class:h==null?void 0:h.track}),children:b.jsx("div",{className:c.indicator({class:h==null?void 0:h.indicator}),style:{transform:`translateX(-${100-(w||0)}%)`}})})]})});R7.displayName="HeroUI.Progress";var MJ=R7;function I7(e,t){let{inputElementType:i="input",isDisabled:c=!1,isRequired:h=!1,isReadOnly:_=!1,type:w="text",validationBehavior:n="aria"}=e,[k,N]=Xs(e.value,e.defaultValue||"",e.onChange),{focusableProps:B}=M_(e,t),F=Rm({...e,value:k}),{isInvalid:G,validationErrors:Q,validationDetails:te}=F.displayValidation,{labelProps:Y,fieldProps:oe,descriptionProps:de,errorMessageProps:ge}=n2({...e,isInvalid:G,errorMessage:e.errorMessage||Q}),be=Fl(e,{labelable:!0});const pe={type:w,pattern:e.pattern};return D_(t,k,N),L_(e,F,t),V.useEffect(()=>{if(t.current instanceof Dc(t.current).HTMLTextAreaElement){let we=t.current;Object.defineProperty(we,"defaultValue",{get:()=>we.value,set:()=>{},configurable:!0})}},[t]),{labelProps:Y,inputProps:xr(be,i==="input"?pe:void 0,{disabled:c,readOnly:_,required:h&&n==="native","aria-required":h&&n==="aria"||void 0,"aria-invalid":G||void 0,"aria-errormessage":e["aria-errormessage"],"aria-activedescendant":e["aria-activedescendant"],"aria-autocomplete":e["aria-autocomplete"],"aria-haspopup":e["aria-haspopup"],"aria-controls":e["aria-controls"],value:k,onChange:we=>N(we.target.value),autoComplete:e.autoComplete,autoCapitalize:e.autoCapitalize,maxLength:e.maxLength,minLength:e.minLength,name:e.name,placeholder:e.placeholder,inputMode:e.inputMode,autoCorrect:e.autoCorrect,spellCheck:e.spellCheck,[parseInt(ra.version,10)>=17?"enterKeyHint":"enterkeyhint"]:e.enterKeyHint,onCopy:e.onCopy,onCut:e.onCut,onPaste:e.onPaste,onCompositionEnd:e.onCompositionEnd,onCompositionStart:e.onCompositionStart,onCompositionUpdate:e.onCompositionUpdate,onSelect:e.onSelect,onBeforeInput:e.onBeforeInput,onInput:e.onInput,...B,...oe}),descriptionProps:de,errorMessageProps:ge,isInvalid:G,validationErrors:Q,validationDetails:te}}function o6(){return typeof window<"u"&&window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"}function AJ(e,t,i){let c=Zs(F=>{let G=i.current;if(!G)return;let Q=null;switch(F.inputType){case"historyUndo":case"historyRedo":return;case"insertLineBreak":return;case"deleteContent":case"deleteByCut":case"deleteByDrag":Q=G.value.slice(0,G.selectionStart)+G.value.slice(G.selectionEnd);break;case"deleteContentForward":Q=G.selectionEnd===G.selectionStart?G.value.slice(0,G.selectionStart)+G.value.slice(G.selectionEnd+1):G.value.slice(0,G.selectionStart)+G.value.slice(G.selectionEnd);break;case"deleteContentBackward":Q=G.selectionEnd===G.selectionStart?G.value.slice(0,G.selectionStart-1)+G.value.slice(G.selectionStart):G.value.slice(0,G.selectionStart)+G.value.slice(G.selectionEnd);break;case"deleteSoftLineBackward":case"deleteHardLineBackward":Q=G.value.slice(G.selectionStart);break;default:F.data!=null&&(Q=G.value.slice(0,G.selectionStart)+F.data+G.value.slice(G.selectionEnd));break}(Q==null||!t.validate(Q))&&F.preventDefault()});V.useEffect(()=>{if(!o6()||!i.current)return;let F=i.current;return F.addEventListener("beforeinput",c,!1),()=>{F.removeEventListener("beforeinput",c,!1)}},[i,c]);let h=o6()?null:F=>{let G=F.target.value.slice(0,F.target.selectionStart)+F.data+F.target.value.slice(F.target.selectionEnd);t.validate(G)||F.preventDefault()},{labelProps:_,inputProps:w,descriptionProps:n,errorMessageProps:k,...N}=I7(e,i),B=V.useRef(null);return{inputProps:xr(w,{onBeforeInput:h,onCompositionStart(){let{value:F,selectionStart:G,selectionEnd:Q}=i.current;B.current={value:F,selectionStart:G,selectionEnd:Q}},onCompositionEnd(){if(i.current&&!t.validate(i.current.value)){let{value:F,selectionStart:G,selectionEnd:Q}=B.current;i.current.value=F,i.current.setSelectionRange(G,Q),t.setInputValue(F)}}}),labelProps:_,descriptionProps:n,errorMessageProps:k,...N}}function z7(e){var t,i,c,h,_,w,n;const k=Pi(),{validationBehavior:N}=Gf(wh)||{},[B,F]=Zo(e,PM.variantKeys),{ref:G,as:Q,type:te,label:Y,baseRef:oe,wrapperRef:de,description:ge,className:be,classNames:pe,autoFocus:we,startContent:ke,endContent:Ae,onClear:re,onChange:Te,validationState:se,validationBehavior:ue=(t=N??(k==null?void 0:k.validationBehavior))!=null?t:"native",innerWrapperRef:De,onValueChange:ce=()=>{},...je}=B,Le=V.useCallback(Gt=>{ce(Gt??"")},[ce]),[Re,Ge]=V.useState(!1),ze=Q||"div",ot=(c=(i=e.disableAnimation)!=null?i:k==null?void 0:k.disableAnimation)!=null?c:!1,Ee=Nn(G),Ke=Nn(oe),nt=Nn(de),Xe=Nn(De),[ut,Pt]=Xs(B.value,(h=B.defaultValue)!=null?h:"",Le),Ct=te==="file",Zt=((n=(w=(_=Ee==null?void 0:Ee.current)==null?void 0:_.files)==null?void 0:w.length)!=null?n:0)>0,Dt=["date","time","month","week","range"].includes(te),er=!md(ut)||Dt||Zt,Se=er||Re,ur=te==="hidden",Sr=e.isMultiline,yt=Br(pe==null?void 0:pe.base,be,er?"is-filled":""),dt=V.useCallback(()=>{var Gt;Ct?Ee.current.value="":Pt(""),re==null||re(),(Gt=Ee.current)==null||Gt.focus()},[Pt,re,Ct]);gx(()=>{Ee.current&&Pt(Ee.current.value)},[Ee.current]);const{labelProps:$t,inputProps:or,isInvalid:Er,validationErrors:mr,validationDetails:Pr,descriptionProps:Fr,errorMessageProps:$a}=I7({...e,validationBehavior:ue,autoCapitalize:e.autoCapitalize,value:ut,"aria-label":o5(e["aria-label"],e.label,e.placeholder),inputElementType:Sr?"textarea":"input",onChange:Pt},Ee);Ct&&(delete or.value,delete or.onChange);const{isFocusVisible:Xr,isFocused:ja,focusProps:fr}=Ac({autoFocus:we,isTextInput:!0}),{isHovered:Sa,hoverProps:kr}=wo({isDisabled:!!(e!=null&&e.isDisabled)}),{isHovered:Dr,hoverProps:Nr}=wo({isDisabled:!!(e!=null&&e.isDisabled)}),{focusProps:na,isFocusVisible:Sn}=Ac(),{focusWithinProps:Zn}=yd({onFocusWithinChange:Ge}),{pressProps:on}=wu({isDisabled:!!(e!=null&&e.isDisabled)||!!(e!=null&&e.isReadOnly),onPress:dt}),Ha=se==="invalid"||Er,qa=e2({labelPlacement:e.labelPlacement,label:Y}),Dn=typeof B.errorMessage=="function"?B.errorMessage({isInvalid:Ha,validationErrors:mr,validationDetails:Pr}):B.errorMessage||(mr==null?void 0:mr.join(" ")),In=!!re||e.isClearable,jn=!!Y||!!ge||!!Dn,Wr=!!B.placeholder,yi=!!Y,Ka=!!ge||!!Dn,la=qa==="outside"||qa==="outside-left",yn=qa==="inside",Xn=Ee.current?(!Ee.current.value||Ee.current.value===""||!ut||ut==="")&&Wr:!1,js=qa==="outside-left",qn=!!ke,ga=la?qa==="outside-left"||Wr||qa==="outside"&&qn:!1,St=qa==="outside"&&!Wr&&!qn,ye=V.useMemo(()=>PM({...F,isInvalid:Ha,labelPlacement:qa,isClearable:In,disableAnimation:ot}),[Ko(F),Ha,qa,In,qn,ot]),Ce=V.useCallback((Gt={})=>({ref:Ke,className:ye.base({class:yt}),"data-slot":"base","data-filled":Vt(er||Wr||qn||Xn||Ct),"data-filled-within":Vt(Se||Wr||qn||Xn||Ct),"data-focus-within":Vt(Re),"data-focus-visible":Vt(Xr),"data-readonly":Vt(e.isReadOnly),"data-focus":Vt(ja),"data-hover":Vt(Sa||Dr),"data-required":Vt(e.isRequired),"data-invalid":Vt(Ha),"data-disabled":Vt(e.isDisabled),"data-has-elements":Vt(jn),"data-has-helper":Vt(Ka),"data-has-label":Vt(yi),"data-has-value":Vt(!Xn),"data-hidden":Vt(ur),...Zn,...Gt}),[ye,yt,er,ja,Sa,Dr,Ha,Ka,yi,jn,Xn,qn,Re,Xr,Se,Wr,Zn,ur,e.isReadOnly,e.isRequired,e.isDisabled]),Fe=V.useCallback((Gt={})=>({"data-slot":"label",className:ye.label({class:pe==null?void 0:pe.label}),...xr($t,Nr,Gt)}),[ye,Dr,$t,pe==null?void 0:pe.label]),Ye=V.useCallback(Gt=>{Gt.key==="Escape"&&ut&&(In||re)&&!e.isReadOnly&&(Pt(""),re==null||re())},[ut,Pt,re,In,e.isReadOnly]),Qe=V.useCallback((Gt={})=>({"data-slot":"input","data-filled":Vt(er),"data-filled-within":Vt(Se),"data-has-start-content":Vt(qn),"data-has-end-content":Vt(!!Ae),className:ye.input({class:Br(pe==null?void 0:pe.input,er?"is-filled":"",Sr?"pe-0":"",te==="password"?"[&::-ms-reveal]:hidden":"")}),...xr(fr,or,Wo(je,{enabled:!0,labelable:!0,omitEventNames:new Set(Object.keys(or))}),Gt),"aria-readonly":Vt(e.isReadOnly),onChange:qi(or.onChange,Te),onKeyDown:qi(or.onKeyDown,Gt.onKeyDown,Ye),ref:Ee}),[ye,ut,fr,or,je,er,Se,qn,Ae,pe==null?void 0:pe.input,e.isReadOnly,e.isRequired,Te,Ye]),ct=V.useCallback((Gt={})=>({ref:nt,"data-slot":"input-wrapper","data-hover":Vt(Sa||Dr),"data-focus-visible":Vt(Xr),"data-focus":Vt(ja),className:ye.inputWrapper({class:Br(pe==null?void 0:pe.inputWrapper,er?"is-filled":"")}),...xr(Gt,kr),onClick:cr=>{Ee.current&&cr.currentTarget===cr.target&&Ee.current.focus()},style:{cursor:"text",...Gt.style}}),[ye,Sa,Dr,Xr,ja,ut,pe==null?void 0:pe.inputWrapper]),bt=V.useCallback((Gt={})=>({...Gt,ref:Xe,"data-slot":"inner-wrapper",onClick:cr=>{Ee.current&&cr.currentTarget===cr.target&&Ee.current.focus()},className:ye.innerWrapper({class:Br(pe==null?void 0:pe.innerWrapper,Gt==null?void 0:Gt.className)})}),[ye,pe==null?void 0:pe.innerWrapper]),ft=V.useCallback((Gt={})=>({...Gt,"data-slot":"main-wrapper",className:ye.mainWrapper({class:Br(pe==null?void 0:pe.mainWrapper,Gt==null?void 0:Gt.className)})}),[ye,pe==null?void 0:pe.mainWrapper]),pt=V.useCallback((Gt={})=>({...Gt,"data-slot":"helper-wrapper",className:ye.helperWrapper({class:Br(pe==null?void 0:pe.helperWrapper,Gt==null?void 0:Gt.className)})}),[ye,pe==null?void 0:pe.helperWrapper]),At=V.useCallback((Gt={})=>({...Gt,...Fr,"data-slot":"description",className:ye.description({class:Br(pe==null?void 0:pe.description,Gt==null?void 0:Gt.className)})}),[ye,pe==null?void 0:pe.description]),It=V.useCallback((Gt={})=>({...Gt,...$a,"data-slot":"error-message",className:ye.errorMessage({class:Br(pe==null?void 0:pe.errorMessage,Gt==null?void 0:Gt.className)})}),[ye,$a,pe==null?void 0:pe.errorMessage]),Jt=V.useCallback((Gt={})=>({...Gt,type:"button",tabIndex:-1,disabled:e.isDisabled,"aria-label":"clear input","data-slot":"clear-button","data-focus-visible":Vt(Sn),className:ye.clearButton({class:Br(pe==null?void 0:pe.clearButton,Gt==null?void 0:Gt.className)}),...xr(on,na)}),[ye,Sn,on,na,pe==null?void 0:pe.clearButton]);return{Component:ze,classNames:pe,domRef:Ee,label:Y,description:ge,startContent:ke,endContent:Ae,labelPlacement:qa,isClearable:In,hasHelper:Ka,hasStartContent:qn,isLabelOutside:ga,isOutsideLeft:js,isLabelOutsideAsPlaceholder:St,shouldLabelBeOutside:la,shouldLabelBeInside:yn,hasPlaceholder:Wr,isInvalid:Ha,errorMessage:Dn,getBaseProps:Ce,getLabelProps:Fe,getInputProps:Qe,getMainWrapperProps:ft,getInputWrapperProps:ct,getInnerWrapperProps:bt,getHelperWrapperProps:pt,getDescriptionProps:At,getErrorMessageProps:It,getClearButtonProps:Jt}}var L7=Bn((e,t)=>{const{Component:i,label:c,description:h,isClearable:_,startContent:w,endContent:n,labelPlacement:k,hasHelper:N,isOutsideLeft:B,shouldLabelBeOutside:F,errorMessage:G,isInvalid:Q,getBaseProps:te,getLabelProps:Y,getInputProps:oe,getInnerWrapperProps:de,getInputWrapperProps:ge,getMainWrapperProps:be,getHelperWrapperProps:pe,getDescriptionProps:we,getErrorMessageProps:ke,getClearButtonProps:Ae}=z7({...e,ref:t}),re=c?b.jsx("label",{...Y(),children:c}):null,Te=V.useMemo(()=>_?b.jsx("button",{...Ae(),children:n||b.jsx(uT,{})}):n,[_,Ae]),se=V.useMemo(()=>{const ce=Q&&G;return!N||!(ce||h)?null:b.jsx("div",{...pe(),children:ce?b.jsx("div",{...ke(),children:G}):b.jsx("div",{...we(),children:h})})},[N,Q,G,h,pe,ke,we]),ue=V.useMemo(()=>b.jsxs("div",{...de(),children:[w,b.jsx("input",{...oe()}),Te]}),[w,Te,oe,de]),De=V.useMemo(()=>F?b.jsxs("div",{...be(),children:[b.jsxs("div",{...ge(),children:[B?null:re,ue]}),se]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{...ge(),children:[re,ue]}),se]}),[k,se,F,re,ue,G,h,be,ge,ke,we]);return b.jsxs(i,{...te(),children:[B?re:null,De]})});L7.displayName="HeroUI.Input";var Za=L7;function Pw(){return Pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var c in i)({}).hasOwnProperty.call(i,c)&&(e[c]=i[c])}return e},Pw.apply(null,arguments)}function kJ(e,t){if(e==null)return{};var i={};for(var c in e)if({}.hasOwnProperty.call(e,c)){if(t.indexOf(c)!==-1)continue;i[c]=e[c]}return i}var RJ=V.useLayoutEffect,IJ=function(t){var i=ra.useRef(t);return RJ(function(){i.current=t}),i},l6=function(t,i){if(typeof t=="function"){t(i);return}t.current=i},zJ=function(t,i){var c=ra.useRef();return ra.useCallback(function(h){t.current=h,c.current&&l6(c.current,null),c.current=i,i&&l6(i,h)},[i])},c6={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},LJ=function(t){Object.keys(c6).forEach(function(i){t.style.setProperty(i,c6[i],"important")})},u6=LJ,dl=null,d6=function(t,i){var c=t.scrollHeight;return i.sizingStyle.boxSizing==="border-box"?c+i.borderSize:c-i.paddingSize};function $J(e,t,i,c){i===void 0&&(i=1),c===void 0&&(c=1/0),dl||(dl=document.createElement("textarea"),dl.setAttribute("tabindex","-1"),dl.setAttribute("aria-hidden","true"),u6(dl)),dl.parentNode===null&&document.body.appendChild(dl);var h=e.paddingSize,_=e.borderSize,w=e.sizingStyle,n=w.boxSizing;Object.keys(w).forEach(function(G){var Q=G;dl.style[Q]=w[Q]}),u6(dl),dl.value=t;var k=d6(dl,e);dl.value=t,k=d6(dl,e),dl.value="x";var N=dl.scrollHeight-h,B=N*i;n==="border-box"&&(B=B+h+_),k=Math.max(B,k);var F=N*c;return n==="border-box"&&(F=F+h+_),k=Math.min(F,k),[k,N]}var h6=function(){},NJ=function(t,i){return t.reduce(function(c,h){return c[h]=i[h],c},{})},BJ=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],jJ=!!document.documentElement.currentStyle,OJ=function(t){var i=window.getComputedStyle(t);if(i===null)return null;var c=NJ(BJ,i),h=c.boxSizing;if(h==="")return null;jJ&&h==="border-box"&&(c.width=parseFloat(c.width)+parseFloat(c.borderRightWidth)+parseFloat(c.borderLeftWidth)+parseFloat(c.paddingRight)+parseFloat(c.paddingLeft)+"px");var _=parseFloat(c.paddingBottom)+parseFloat(c.paddingTop),w=parseFloat(c.borderBottomWidth)+parseFloat(c.borderTopWidth);return{sizingStyle:c,paddingSize:_,borderSize:w}},FJ=OJ;function _T(e,t,i){var c=IJ(i);V.useLayoutEffect(function(){var h=function(w){return c.current(w)};if(e)return e.addEventListener(t,h),function(){return e.removeEventListener(t,h)}},[])}var VJ=function(t,i){_T(document.body,"reset",function(c){t.current.form===c.target&&i(c)})},UJ=function(t){_T(window,"resize",t)},GJ=function(t){_T(document.fonts,"loadingdone",t)},HJ=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],qJ=function(t,i){var c=t.cacheMeasurements,h=t.maxRows,_=t.minRows,w=t.onChange,n=w===void 0?h6:w,k=t.onHeightChange,N=k===void 0?h6:k,B=kJ(t,HJ),F=B.value!==void 0,G=V.useRef(null),Q=zJ(G,i),te=V.useRef(0),Y=V.useRef(),oe=function(){var be=G.current,pe=c&&Y.current?Y.current:FJ(be);if(pe){Y.current=pe;var we=$J(pe,be.value||be.placeholder||"x",_,h),ke=we[0],Ae=we[1];te.current!==ke&&(te.current=ke,be.style.setProperty("height",ke+"px","important"),N(ke,{rowHeight:Ae}))}},de=function(be){F||oe(),n(be)};return V.useLayoutEffect(oe),VJ(G,function(){if(!F){var ge=G.current.value;requestAnimationFrame(function(){var be=G.current;be&&ge!==be.value&&oe()})}}),UJ(oe),GJ(oe),V.createElement("textarea",Pw({},B,{onChange:de,ref:Q}))},WJ=V.forwardRef(qJ),$7=Bn(({style:e,minRows:t=3,maxRows:i=8,cacheMeasurements:c=!1,disableAutosize:h=!1,onHeightChange:_,...w},n)=>{const{Component:k,label:N,description:B,startContent:F,endContent:G,hasHelper:Q,shouldLabelBeOutside:te,shouldLabelBeInside:Y,isInvalid:oe,errorMessage:de,getBaseProps:ge,getLabelProps:be,getInputProps:pe,getInnerWrapperProps:we,getInputWrapperProps:ke,getHelperWrapperProps:Ae,getDescriptionProps:re,getErrorMessageProps:Te,isClearable:se,getClearButtonProps:ue}=z7({...w,ref:n,isMultiline:!0}),[De,ce]=V.useState(t>1),[je,Le]=V.useState(!1),Re=N?b.jsx("label",{...be(),children:N}):null,Ge=pe(),ze=(ut,Pt)=>{if(t===1&&ce(ut>=Pt.rowHeight*2),i>t){const Ct=ut>=i*Pt.rowHeight;Le(Ct)}_==null||_(ut,Pt)},ot=h?b.jsx("textarea",{...Ge,style:xr(Ge.style,e??{})}):b.jsx(WJ,{...Ge,cacheMeasurements:c,"data-hide-scroll":Vt(!je),maxRows:i,minRows:t,style:xr(Ge.style,e??{}),onHeightChange:ze}),Ee=V.useMemo(()=>se?b.jsx("button",{...ue(),children:b.jsx(uT,{})}):null,[se,ue]),Ke=V.useMemo(()=>F||G?b.jsxs("div",{...we(),children:[F,ot,G]}):b.jsx("div",{...we(),children:ot}),[F,Ge,G,we]),nt=oe&&de,Xe=nt||B;return b.jsxs(k,{...ge(),children:[te?Re:null,b.jsxs("div",{...ke(),"data-has-multiple-rows":Vt(De),children:[Y?Re:null,Ke,Ee]}),Q&&Xe?b.jsx("div",{...Ae(),children:nt?b.jsx("div",{...Te(),children:de}):b.jsx("div",{...re(),children:B})}):null]})});$7.displayName="HeroUI.Textarea";var p4=$7;function KJ(e,t){const{groupRef:i,triggerRef:c,popoverRef:h,showArrow:_,offset:w=7,crossOffset:n=0,scrollRef:k,shouldFlip:N,boundaryElement:B,isDismissable:F=!0,shouldCloseOnBlur:G=!0,shouldCloseOnScroll:Q=!0,placement:te="top",containerPadding:Y,shouldCloseOnInteractOutside:oe,isNonModal:de,isKeyboardDismissDisabled:ge,updatePositionDeps:be=[],...pe}=e,we=de??!0,ke=pe.trigger==="SubmenuTrigger",{overlayProps:Ae,underlayProps:re}=P5({isOpen:t.isOpen,onClose:t.close,shouldCloseOnBlur:G,isDismissable:F||ke,isKeyboardDismissDisabled:ge,shouldCloseOnInteractOutside:oe||(ce=>pT(ce,c,t))},h),{overlayProps:Te,arrowProps:se,placement:ue,updatePosition:De}=Gk({...pe,shouldFlip:N,crossOffset:n,targetRef:c,overlayRef:h,isOpen:t.isOpen,scrollRef:k,boundaryElement:B,containerPadding:Y,placement:e7(te),offset:_?w+3:w,onClose:we&&!ke&&Q?t.close:()=>{}});return gx(()=>{be.length&&De()},be),V.useEffect(()=>{var ce,je;if(t.isOpen&&h.current)return we?tY((ce=i==null?void 0:i.current)!=null?ce:h.current):eY([(je=i==null?void 0:i.current)!=null?je:h.current])},[we,t.isOpen,h,i]),{popoverProps:xr(Ae,Te),arrowProps:se,underlayProps:re,placement:ue}}var ZJ="top";function N7(e){var t,i,c;const h=Pi(),[_,w]=Zo(e,Sw.variantKeys),{as:n,ref:k,children:N,state:B,triggerRef:F,scrollRef:G,defaultOpen:Q,onOpenChange:te,isOpen:Y,isNonModal:oe=!0,shouldFlip:de=!0,containerPadding:ge=12,shouldBlockScroll:be=!1,isDismissable:pe=!0,shouldCloseOnBlur:we,portalContainer:ke,updatePositionDeps:Ae,dialogProps:re,placement:Te=ZJ,triggerType:se="dialog",showArrow:ue=!1,offset:De=7,crossOffset:ce=0,boundaryElement:je,isKeyboardDismissDisabled:Le,shouldCloseOnInteractOutside:Re,shouldCloseOnScroll:Ge,motionProps:ze,className:ot,classNames:Ee,onClose:Ke,...nt}=_,Xe=n||"div",ut=Nn(k),Pt=V.useRef(null),Ct=V.useRef(!1),Zt=F||Pt,Dt=(i=(t=e.disableAnimation)!=null?t:h==null?void 0:h.disableAnimation)!=null?i:!1,er=N_({isOpen:Y,defaultOpen:Q,onOpenChange:Dr=>{te==null||te(Dr),Dr||Ke==null||Ke()}}),Se=B||er,{popoverProps:ur,underlayProps:Sr,placement:yt}=KJ({triggerRef:Zt,isNonModal:oe,popoverRef:ut,placement:Te,offset:De,scrollRef:G,isDismissable:pe,shouldCloseOnBlur:we,boundaryElement:je,crossOffset:ce,shouldFlip:de,containerPadding:ge,updatePositionDeps:Ae,isKeyboardDismissDisabled:Le,shouldCloseOnScroll:Ge,shouldCloseOnInteractOutside:Re},Se),dt=V.useMemo(()=>yt?QX(yt,Te)?yt:Te:null,[yt,Te]),{triggerProps:$t}=lR({type:se},Se,Zt),{isFocusVisible:or,isFocused:Er,focusProps:mr}=Ac(),Pr=V.useMemo(()=>Sw({...w}),[Ko(w)]),Fr=Br(Ee==null?void 0:Ee.base,ot);cR({isDisabled:!(be&&Se.isOpen)});const $a=(Dr={})=>({ref:ut,...xr(ur,nt,Dr),style:xr(ur.style,nt.style,Dr.style)}),Xr=(Dr={})=>({"data-slot":"base","data-open":Vt(Se.isOpen),"data-focus":Vt(Er),"data-arrow":Vt(ue),"data-focus-visible":Vt(or),"data-placement":yt?Tw(yt,Te):void 0,...xr(mr,re,Dr),className:Pr.base({class:Br(Fr)}),style:{outline:"none"}}),ja=V.useCallback((Dr={})=>({"data-slot":"content","data-open":Vt(Se.isOpen),"data-arrow":Vt(ue),"data-placement":yt?Tw(yt,Te):void 0,className:Pr.content({class:Br(Ee==null?void 0:Ee.content,Dr.className)})}),[Pr,Se.isOpen,ue,dt,Te,Ee,yt]),fr=V.useCallback(Dr=>{var Nr;let na;return Dr.pointerType==="touch"&&((e==null?void 0:e.backdrop)==="blur"||(e==null?void 0:e.backdrop)==="opaque")?na=setTimeout(()=>{Ct.current=!0},100):Ct.current=!0,(Nr=$t.onPress)==null||Nr.call($t,Dr),()=>{clearTimeout(na)}},[$t==null?void 0:$t.onPress]),Sa=V.useCallback((Dr={},Nr=null)=>{const{isDisabled:na,...Sn}=Dr;return{"data-slot":"trigger",...xr({"aria-haspopup":"dialog"},$t,Sn),onPress:fr,isDisabled:na,className:Pr.trigger({class:Br(Ee==null?void 0:Ee.trigger,Dr.className),isTriggerDisabled:na}),ref:_5(Nr,Zt)}},[Se,$t,fr,Zt]),kr=V.useCallback((Dr={})=>({"data-slot":"backdrop",className:Pr.backdrop({class:Ee==null?void 0:Ee.backdrop}),onClick:Nr=>{if(!Ct.current){Nr.preventDefault();return}Se.close(),Ct.current=!1},...Sr,...Dr}),[Pr,Se.isOpen,Ee,Sr]);return V.useEffect(()=>{if(Se.isOpen&&(ut!=null&&ut.current))return qR([ut==null?void 0:ut.current])},[Se.isOpen,ut]),{state:Se,Component:Xe,children:N,classNames:Ee,showArrow:ue,triggerRef:Zt,placement:dt,isNonModal:oe,popoverRef:ut,portalContainer:ke,isOpen:Se.isOpen,onClose:Se.close,disableAnimation:Dt,shouldBlockScroll:be,backdrop:(c=e.backdrop)!=null?c:"transparent",motionProps:ze,getBackdropProps:kr,getPopoverProps:$a,getTriggerProps:Sa,getDialogProps:Xr,getContentProps:ja}}function bT(e,t){let{role:i="dialog"}=e,c=vm();c=e["aria-label"]?void 0:c;let h=V.useRef(!1);return V.useEffect(()=>{if(t.current&&!t.current.contains(document.activeElement)){r0(t.current);let _=setTimeout(()=>{document.activeElement===t.current&&(h.current=!0,t.current&&(t.current.blur(),r0(t.current)),h.current=!1)},500);return()=>{clearTimeout(_)}}},[t]),KR(),{dialogProps:{...Fl(e,{labelable:!0}),role:i,tabIndex:-1,"aria-labelledby":e["aria-labelledby"]||c,onBlur:_=>{h.current&&_.stopPropagation()}},titleProps:{id:c}}}var B7=()=>km(()=>import("./index-BxFlUVnv.js"),[]).then(e=>e.default),j7=Bn(({children:e,motionProps:t,placement:i,disableAnimation:c,style:h={},transformOrigin:_={},...w},n)=>{let k=h;return _.originX!==void 0||_.originY!==void 0?k={...k,transformOrigin:_}:i&&(k={...k,...fT(i==="center"?"top":i)}),c?b.jsx("div",{...w,ref:n,children:e}):b.jsx(Tu,{features:B7,children:b.jsx(jl.div,{ref:n,animate:"enter",exit:"exit",initial:"initial",style:k,variants:ax.scaleSpringOpacity,...xr(w,t),children:e})})});j7.displayName="HeroUI.FreeSoloPopoverWrapper";var O7=Bn(({children:e,transformOrigin:t,disableDialogFocus:i=!1,...c},h)=>{const{Component:_,state:w,placement:n,backdrop:k,portalContainer:N,disableAnimation:B,motionProps:F,isNonModal:G,getPopoverProps:Q,getBackdropProps:te,getDialogProps:Y,getContentProps:oe}=N7({...c,ref:h}),de=V.useRef(null),{dialogProps:ge,titleProps:be}=bT({},de),pe=Y({...!i&&{ref:de},...ge}),we=V.useMemo(()=>k==="transparent"?null:B?b.jsx("div",{...te()}):b.jsx(Tu,{features:B7,children:b.jsx(jl.div,{animate:"enter",exit:"exit",initial:"exit",variants:ax.fade,...te()})}),[k,B,te]);return b.jsxs(M5,{portalContainer:N,children:[!G&&we,b.jsx(_,{...Q(),children:b.jsxs(j7,{disableAnimation:B,motionProps:F,placement:n,tabIndex:-1,transformOrigin:t,...pe,children:[!G&&b.jsx(Qy,{onDismiss:w.close}),b.jsx("div",{...oe(),children:typeof e=="function"?e(be):e}),b.jsx(Qy,{onDismiss:w.close})]})})]})});O7.displayName="HeroUI.FreeSoloPopover";var XJ=O7,[YJ,F7]=Sh({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),f6=()=>km(()=>import("./index-BxFlUVnv.js"),[]).then(e=>e.default),V7=e=>{const{as:t,children:i,className:c,...h}=e,{Component:_,placement:w,backdrop:n,motionProps:k,disableAnimation:N,getPopoverProps:B,getDialogProps:F,getBackdropProps:G,getContentProps:Q,isNonModal:te,onClose:Y}=F7(),oe=V.useRef(null),{dialogProps:de,titleProps:ge}=bT({},oe),be=F({ref:oe,...de,...h}),pe=t||_||"div",we=b.jsxs(b.Fragment,{children:[!te&&b.jsx(Qy,{onDismiss:Y}),b.jsx(pe,{...be,children:b.jsx("div",{...Q({className:c}),children:typeof i=="function"?i(ge):i})}),b.jsx(Qy,{onDismiss:Y})]}),ke=V.useMemo(()=>n==="transparent"?null:N?b.jsx("div",{...G()}):b.jsx(Tu,{features:f6,children:b.jsx(jl.div,{animate:"enter",exit:"exit",initial:"exit",variants:ax.fade,...G()})}),[n,N,G]),Ae=w?fT(w==="center"?"top":w):void 0,re=b.jsx(b.Fragment,{children:N?we:b.jsx(Tu,{features:f6,children:b.jsx(jl.div,{animate:"enter",exit:"exit",initial:"initial",style:Ae,variants:ax.scaleSpringOpacity,...k,children:we})})});return b.jsxs("div",{...B(),children:[ke,re]})};V7.displayName="HeroUI.PopoverContent";var JJ=V7,U7=e=>{var t;const{triggerRef:i,getTriggerProps:c}=F7(),{children:h,..._}=e,w=V.useMemo(()=>typeof h=="string"?b.jsx("p",{children:h}):V.Children.only(h),[h]),n=(t=w.props.ref)!=null?t:w.ref,{onPress:k,isDisabled:N,...B}=V.useMemo(()=>c(xr(_,w.props),n),[c,w.props,_,n]),[,F]=HF(h,$r),{buttonProps:G}=r2({onPress:k,isDisabled:N},i),Q=V.useMemo(()=>(F==null?void 0:F[0])!==void 0,[F]);return Q||delete B.preventFocusOnPress,V.cloneElement(w,xr(B,Q?{onPress:k,isDisabled:N}:G))};U7.displayName="HeroUI.PopoverTrigger";var QJ=U7,G7=Bn((e,t)=>{const{children:i,...c}=e,h=N7({...c,ref:t}),[_,w]=V.Children.toArray(i),n=b.jsx(M5,{portalContainer:h.portalContainer,children:w});return b.jsxs(YJ,{value:h,children:[_,h.disableAnimation&&h.isOpen?n:b.jsx(Uf,{children:h.isOpen?n:null})]})});G7.displayName="HeroUI.Popover";var eQ=G7,[tQ,H7]=Sh({name:"DropdownContext",errorMessage:"useDropdownContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Dropdown />`"});function rQ(e){const{isSelected:t,disableAnimation:i,...c}=e;return b.jsx("svg",{"aria-hidden":"true","data-selected":t,role:"presentation",viewBox:"0 0 17 18",...c,children:b.jsx("polyline",{fill:"none",points:"1 9 7 14 15 4",stroke:"currentColor",strokeDasharray:22,strokeDashoffset:t?44:66,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,style:i?{}:{transition:"stroke-dashoffset 200ms ease"}})})}var q7={};q7={longPressMessage:"     Alt +    "};var W7={};W7={longPressMessage:"    Alt+  ,    "};var K7={};K7={longPressMessage:"Dlouhm stiskem nebo stisknutm klves Alt + ipka dol otevete nabdku"};var Z7={};Z7={longPressMessage:"Langt tryk eller tryk p Alt + pil ned for at bne menuen"};var X7={};X7={longPressMessage:"Drcken Sie lange oder drcken Sie Alt + Nach-unten, um das Men zu ffnen"};var Y7={};Y7={longPressMessage:"    Alt +       "};var J7={};J7={longPressMessage:"Long press or press Alt + ArrowDown to open menu"};var Q7={};Q7={longPressMessage:"Mantenga pulsado o pulse Alt + flecha abajo para abrir el men"};var ez={};ez={longPressMessage:"Men avamiseks vajutage pikalt vi vajutage klahve Alt + allanool"};var tz={};tz={longPressMessage:"Avaa valikko painamalla pohjassa tai nppinyhdistelmll Alt + Alanuoli"};var rz={};rz={longPressMessage:"Appuyez de manire prolonge ou appuyez sur Alt+Flche vers le bas pour ouvrir le menu."};var az={};az={longPressMessage:"     Alt + ArrowDown    "};var nz={};nz={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dolje za otvaranje izbornika"};var iz={};iz={longPressMessage:"Nyomja meg hosszan, vagy nyomja meg az Alt + lefele nyl gombot a men megnyitshoz"};var sz={};sz={longPressMessage:"Premere a lungo o premere Alt + Freccia gi per aprire il menu"};var oz={};oz={longPressMessage:" Alt+"};var lz={};lz={longPressMessage:"  Alt +     "};var cz={};cz={longPressMessage:"Nordami atidaryti meniu, nuspaud palaikykite arba paspauskite Alt + ArrowDown."};var uz={};uz={longPressMessage:"Lai atvrtu izvlni, turiet nospiestu vai nospiediet taustiu kombinciju Alt + lejupvrst bultia"};var dz={};dz={longPressMessage:"Langt trykk eller trykk Alt + PilNed for  pne menyen"};var hz={};hz={longPressMessage:"Druk lang op Alt + pijl-omlaag of druk op Alt om het menu te openen"};var fz={};fz={longPressMessage:"Nacinij i przytrzymaj lub nacinij klawisze Alt + Strzaka w d, aby otworzy menu"};var pz={};pz={longPressMessage:"Pressione e segure ou pressione Alt + Seta para baixo para abrir o menu"};var mz={};mz={longPressMessage:"Prima continuamente ou prima Alt + Seta Para Baixo para abrir o menu"};var gz={};gz={longPressMessage:"Apsai lung sau apsai pe Alt + sgeat n jos pentru a deschide meniul"};var yz={};yz={longPressMessage:"     Alt +  ,   "};var xz={};xz={longPressMessage:"Ponuku otvorte dlhm stlaenm alebo stlaenm klvesu Alt + klvesu so pkou nadol"};var vz={};vz={longPressMessage:"Za odprtje menija pritisnite in drite gumb ali pritisnite Alt+puica navzdol"};var _z={};_z={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dole da otvorite meni"};var bz={};bz={longPressMessage:"Hll nedtryckt eller tryck p Alt + pil nedt fr att ppna menyn"};var wz={};wz={longPressMessage:"Meny amak iin uzun basn veya Alt + Aa Ok tuuna basn"};var Sz={};Sz={longPressMessage:"      Alt   ,   "};var Tz={};Tz={longPressMessage:" Alt + "};var Ez={};Ez={longPressMessage:" Alt+"};var Cz={};Cz={"ar-AE":q7,"bg-BG":W7,"cs-CZ":K7,"da-DK":Z7,"de-DE":X7,"el-GR":Y7,"en-US":J7,"es-ES":Q7,"et-EE":ez,"fi-FI":tz,"fr-FR":rz,"he-IL":az,"hr-HR":nz,"hu-HU":iz,"it-IT":sz,"ja-JP":oz,"ko-KR":lz,"lt-LT":cz,"lv-LV":uz,"nb-NO":dz,"nl-NL":hz,"pl-PL":fz,"pt-BR":pz,"pt-PT":mz,"ro-RO":gz,"ru-RU":yz,"sk-SK":xz,"sl-SI":vz,"sr-SP":_z,"sv-SE":bz,"tr-TR":wz,"uk-UA":Sz,"zh-CN":Tz,"zh-TW":Ez};function aQ(e){return e&&e.__esModule?e.default:e}function nQ(e,t,i){let{type:c="menu",isDisabled:h,trigger:_="press"}=e,w=Ns(),{triggerProps:n,overlayProps:k}=lR({type:c},t,i),N=Q=>{if(!h&&!(_==="longPress"&&!Q.altKey)&&i&&i.current)switch(Q.key){case"Enter":case" ":if(_==="longPress")return;case"ArrowDown":"continuePropagation"in Q||Q.stopPropagation(),Q.preventDefault(),t.toggle("first");break;case"ArrowUp":"continuePropagation"in Q||Q.stopPropagation(),Q.preventDefault(),t.toggle("last");break;default:"continuePropagation"in Q&&Q.continuePropagation()}},B=Eu(aQ(Cz),"@react-aria/menu"),{longPressProps:F}=aR({isDisabled:h||_!=="longPress",accessibilityDescription:B.format("longPressMessage"),onLongPressStart(){t.close()},onLongPress(){t.open("first")}}),G={preventFocusOnPress:!0,onPressStart(Q){Q.pointerType!=="touch"&&Q.pointerType!=="keyboard"&&!h&&(pl(Q.target),t.open(Q.pointerType==="virtual"?"first":null))},onPress(Q){Q.pointerType==="touch"&&!h&&t.toggle()}};return delete n.onPress,{menuTriggerProps:{...n,..._==="press"?G:F,id:w,onKeyDown:N},menuProps:{...k,"aria-labelledby":w,autoFocus:t.focusStrategy||!0,onClose:t.close}}}const Dz=new WeakMap;function iQ(e,t,i){let{shouldFocusWrap:c=!0,onKeyDown:h,onKeyUp:_,...w}=e;!e["aria-label"]&&!e["aria-labelledby"]&&console.warn("An aria-label or aria-labelledby prop is required for accessibility.");let n=Fl(e,{labelable:!0}),{listProps:k}=RX({...w,ref:i,selectionManager:t.selectionManager,collection:t.collection,disabledKeys:t.disabledKeys,shouldFocusWrap:c,linkBehavior:"override"});return Dz.set(t,{onClose:e.onClose,onAction:e.onAction,shouldUseVirtualFocus:e.shouldUseVirtualFocus}),{menuProps:xr(n,{onKeyDown:h,onKeyUp:_},{role:"menu",...k,onKeyDown:N=>{var B;(N.key!=="Escape"||e.shouldUseVirtualFocus)&&((B=k.onKeyDown)===null||B===void 0||B.call(k,N))}})}}function sQ(e,t,i){let{id:c,key:h,closeOnSelect:_,isVirtualized:w,"aria-haspopup":n,onPressStart:k,onPressUp:N,onPress:B,onPressChange:F,onPressEnd:G,onHoverStart:Q,onHoverChange:te,onHoverEnd:Y,onKeyDown:oe,onKeyUp:de,onFocus:ge,onFocusChange:be,onBlur:pe,selectionManager:we=t.selectionManager}=e,ke=!!n,Ae=ke&&e["aria-expanded"]==="true";var re;let Te=(re=e.isDisabled)!==null&&re!==void 0?re:we.isDisabled(h);var se;let ue=(se=e.isSelected)!==null&&se!==void 0?se:we.isSelected(h),De=Dz.get(t),ce=t.collection.getItem(h),je=e.onClose||De.onClose,Le=Fw(),Re=$t=>{var or;if(!ke){if(!(ce==null||(or=ce.props)===null||or===void 0)&&or.onAction?ce.props.onAction():e.onAction&&e.onAction(h),De.onAction){let Er=De.onAction;Er(h)}$t.target instanceof HTMLAnchorElement&&ce&&Le.open($t.target,$t,ce.props.href,ce.props.routerOptions)}},Ge="menuitem";ke||(we.selectionMode==="single"?Ge="menuitemradio":we.selectionMode==="multiple"&&(Ge="menuitemcheckbox"));let ze=vm(),ot=vm(),Ee=vm(),Ke={id:c,"aria-disabled":Te||void 0,role:Ge,"aria-label":e["aria-label"],"aria-labelledby":ze,"aria-describedby":[ot,Ee].filter(Boolean).join(" ")||void 0,"aria-controls":e["aria-controls"],"aria-haspopup":n,"aria-expanded":e["aria-expanded"]};we.selectionMode!=="none"&&!ke&&(Ke["aria-checked"]=ue),w&&(Ke["aria-posinset"]=ce==null?void 0:ce.index,Ke["aria-setsize"]=WX(t.collection));let nt=$t=>{$t.pointerType==="keyboard"&&Re($t),k==null||k($t)},Xe=()=>{!ke&&je&&(_??(we.selectionMode!=="multiple"||we.isLink(h)))&&je()},ut=$t=>{$t.pointerType==="mouse"&&(Re($t),Xe()),N==null||N($t)},Pt=$t=>{$t.pointerType!=="keyboard"&&$t.pointerType!=="mouse"&&(Re($t),Xe()),B==null||B($t)},{itemProps:Ct,isFocused:Zt}=AX({id:c,selectionManager:we,key:h,ref:i,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,linkBehavior:"none",shouldUseVirtualFocus:De.shouldUseVirtualFocus}),{pressProps:Dt,isPressed:er}=wu({onPressStart:nt,onPress:Pt,onPressUp:ut,onPressChange:F,onPressEnd:G,isDisabled:Te}),{hoverProps:Se}=wo({isDisabled:Te,onHoverStart($t){!t0()&&!(Ae&&n)&&(we.setFocused(!0),we.setFocusedKey(h)),Q==null||Q($t)},onHoverChange:te,onHoverEnd:Y}),{keyboardProps:ur}=rR({onKeyDown:$t=>{if($t.repeat){$t.continuePropagation();return}switch($t.key){case" ":!Te&&we.selectionMode==="none"&&!ke&&_!==!1&&je&&je();break;case"Enter":!Te&&_!==!1&&!ke&&je&&je();break;default:ke||$t.continuePropagation(),oe==null||oe($t);break}},onKeyUp:de}),{focusProps:Sr}=P_({onBlur:pe,onFocus:ge,onFocusChange:be}),yt=Fl(ce==null?void 0:ce.props);delete yt.id;let dt=RU(ce==null?void 0:ce.props);return{menuItemProps:{...Ke,...xr(yt,dt,ke?{onFocus:Ct.onFocus,"data-collection":Ct["data-collection"],"data-key":Ct["data-key"]}:Ct,Dt,Se,ur,Sr,De.shouldUseVirtualFocus||ke?{onMouseDown:$t=>$t.preventDefault()}:void 0),tabIndex:Ct.tabIndex!=null&&Ae&&!De.shouldUseVirtualFocus?-1:Ct.tabIndex},labelProps:{id:ze},descriptionProps:{id:ot},keyboardShortcutProps:{id:Ee},isFocused:Zt,isFocusVisible:Zt&&we.isFocused&&t0()&&!Ae,isSelected:ue,isPressed:er,isDisabled:Te}}function oQ(e){let{heading:t,"aria-label":i}=e,c=Ns();return{itemProps:{role:"presentation"},headingProps:t?{id:c,role:"presentation"}:{},groupProps:{role:"group","aria-label":i,"aria-labelledby":t?c:void 0}}}var lQ=700;function Pz(){return o0()||typeof window>"u"?!1:window.screen.width<=lQ}function cQ(e){var t,i;const c=Pi(),[h,_]=Zo(e,MM.variantKeys),{as:w,item:n,state:k,shortcut:N,description:B,startContent:F,endContent:G,isVirtualized:Q,selectedIcon:te,className:Y,classNames:oe,onAction:de,autoFocus:ge,onPress:be,onPressStart:pe,onPressUp:we,onPressEnd:ke,onPressChange:Ae,onHoverStart:re,onHoverChange:Te,onHoverEnd:se,hideSelectedIcon:ue=!1,isReadOnly:De=!1,closeOnSelect:ce,onClose:je,onClick:Le,...Re}=h,Ge=(i=(t=e.disableAnimation)!=null?t:c==null?void 0:c.disableAnimation)!=null?i:!1,ze=V.useRef(null),ot=w||(Re!=null&&Re.href?"a":"li"),Ee=typeof ot=="string",{rendered:Ke,key:nt}=n,Xe=k.disabledKeys.has(nt)||e.isDisabled,ut=k.selectionManager.selectionMode!=="none",Pt=Pz(),{isFocusVisible:Ct,focusProps:Zt}=Ac({autoFocus:ge});Le&&typeof Le=="function"&&$w("onClick is deprecated, please use onPress instead. See: https://github.com/heroui-inc/heroui/issues/4292","MenuItem");const Dt=V.useCallback(Dr=>{Le==null||Le(Dr),be==null||be(Dr)},[Le,be]),{isPressed:er,isFocused:Se,isSelected:ur,isDisabled:Sr,menuItemProps:yt,labelProps:dt,descriptionProps:$t,keyboardShortcutProps:or}=sQ({key:nt,onClose:je,isDisabled:Xe,onPress:Dt,onPressStart:pe,onPressUp:we,onPressEnd:ke,onPressChange:Ae,"aria-label":h["aria-label"],closeOnSelect:ce,isVirtualized:Q,onAction:de},k,ze);let{hoverProps:Er,isHovered:mr}=wo({isDisabled:Sr,onHoverStart(Dr){t0()||(k.selectionManager.setFocused(!0),k.selectionManager.setFocusedKey(nt)),re==null||re(Dr)},onHoverChange:Te,onHoverEnd:se}),Pr=yt;const Fr=V.useMemo(()=>MM({..._,isDisabled:Sr,disableAnimation:Ge,hasTitleTextChild:typeof Ke=="string",hasDescriptionTextChild:typeof B=="string"}),[Ko(_),Sr,Ge,Ke,B]),$a=Br(oe==null?void 0:oe.base,Y);De&&(Pr=VF(Pr));const Xr=(Dr={})=>({ref:ze,...xr(De?{}:Zt,Wo(Re,{enabled:Ee}),Pr,Er,Dr),"data-focus":Vt(Se),"data-selectable":Vt(ut),"data-hover":Vt(Pt?mr||er:mr),"data-disabled":Vt(Sr),"data-selected":Vt(ur),"data-pressed":Vt(er),"data-focus-visible":Vt(Ct),className:Fr.base({class:Br($a,Dr.className)})}),ja=(Dr={})=>({...xr(dt,Dr),className:Fr.title({class:oe==null?void 0:oe.title})}),fr=(Dr={})=>({...xr($t,Dr),className:Fr.description({class:oe==null?void 0:oe.description})}),Sa=(Dr={})=>({...xr(or,Dr),className:Fr.shortcut({class:oe==null?void 0:oe.shortcut})}),kr=V.useCallback((Dr={})=>({"aria-hidden":Vt(!0),"data-disabled":Vt(Sr),className:Fr.selectedIcon({class:oe==null?void 0:oe.selectedIcon}),...Dr}),[Sr,Fr,oe]);return{Component:ot,domRef:ze,slots:Fr,classNames:oe,isSelectable:ut,isSelected:ur,isDisabled:Sr,rendered:Ke,shortcut:N,description:B,startContent:F,endContent:G,selectedIcon:te,disableAnimation:Ge,getItemProps:Xr,getLabelProps:ja,hideSelectedIcon:ue,getDescriptionProps:fr,getKeyboardShortcutProps:Sa,getSelectedIconProps:kr}}var Mz=e=>{const{Component:t,slots:i,classNames:c,rendered:h,shortcut:_,description:w,isSelectable:n,isSelected:k,isDisabled:N,selectedIcon:B,startContent:F,endContent:G,disableAnimation:Q,hideSelectedIcon:te,getItemProps:Y,getLabelProps:oe,getDescriptionProps:de,getKeyboardShortcutProps:ge,getSelectedIconProps:be}=cQ(e),pe=V.useMemo(()=>{const we=b.jsx(rQ,{disableAnimation:Q,isSelected:k});return typeof B=="function"?B({icon:we,isSelected:k,isDisabled:N}):B||we},[B,k,N,Q]);return b.jsxs(t,{...Y(),children:[F,w?b.jsxs("div",{className:i.wrapper({class:c==null?void 0:c.wrapper}),children:[b.jsx("span",{...oe(),children:h}),b.jsx("span",{...de(),children:w})]}):b.jsx("span",{...oe(),children:h}),_&&b.jsx("kbd",{...ge(),children:_}),n&&!te&&b.jsx("span",{...be(),children:pe}),G]})};Mz.displayName="HeroUI.MenuItem";var Az=Mz,kz=Bn(({item:e,state:t,as:i,variant:c,color:h,disableAnimation:_,onAction:w,closeOnSelect:n,className:k,classNames:N,showDivider:B=!1,hideSelectedIcon:F,dividerProps:G={},itemClasses:Q,title:te,...Y},oe)=>{const de=i||"li",ge=V.useMemo(()=>fX(),[]),be=Br(N==null?void 0:N.base,k),pe=Br(N==null?void 0:N.divider,G==null?void 0:G.className),{itemProps:we,headingProps:ke,groupProps:Ae}=oQ({heading:e.rendered,"aria-label":e["aria-label"]});return b.jsxs(de,{"data-slot":"base",...xr(we,Y),className:ge.base({class:be}),children:[e.rendered&&b.jsx("span",{...ke,className:ge.heading({class:N==null?void 0:N.heading}),"data-slot":"heading",children:e.rendered}),b.jsxs("ul",{...Ae,className:ge.group({class:N==null?void 0:N.group}),"data-has-title":!!e.rendered,"data-slot":"group",children:[[...e.childNodes].map(re=>{const{key:Te,props:se}=re;let ue=b.jsx(Az,{classNames:Q,closeOnSelect:n,color:h,disableAnimation:_,hideSelectedIcon:F,item:re,state:t,variant:c,onAction:w,...se},Te);return re.wrapper&&(ue=re.wrapper(ue)),ue}),B&&b.jsx(JX,{as:"li",className:ge.divider({class:pe}),...G})]})]})});kz.displayName="HeroUI.MenuSection";var uQ=kz;function dQ(e){var t;const i=Pi(),{as:c,ref:h,variant:_,color:w,children:n,disableAnimation:k=(t=i==null?void 0:i.disableAnimation)!=null?t:!1,onAction:N,closeOnSelect:B,itemClasses:F,className:G,state:Q,topContent:te,bottomContent:Y,hideEmptyContent:oe=!1,hideSelectedIcon:de=!1,emptyContent:ge="No items.",menuProps:be,onClose:pe,classNames:we,...ke}=e,Ae=c||"ul",re=Nn(h),Te=typeof Ae=="string",se=KX({...ke,...be,children:n}),ue=Q||se,{menuProps:De}=iQ({...ke,...be,onAction:N},ue,re),ce=V.useMemo(()=>hX({className:G}),[G]),je=Br(we==null?void 0:we.base,G);return{Component:Ae,state:ue,variant:_,color:w,disableAnimation:k,onClose:pe,topContent:te,bottomContent:Y,closeOnSelect:B,className:G,itemClasses:F,getBaseProps:(ze={})=>({ref:re,"data-slot":"base",className:ce.base({class:je}),...Wo(ke,{enabled:Te}),...ze}),getListProps:(ze={})=>({"data-slot":"list",className:ce.list({class:we==null?void 0:we.list}),...De,...ze}),hideEmptyContent:oe,hideSelectedIcon:de,getEmptyContentProps:(ze={})=>({children:ge,className:ce.emptyContent({class:we==null?void 0:we.emptyContent}),...ze})}}var hQ=Bn(function(t,i){const{Component:c,state:h,closeOnSelect:_,color:w,disableAnimation:n,hideSelectedIcon:k,hideEmptyContent:N,variant:B,onClose:F,topContent:G,bottomContent:Q,itemClasses:te,getBaseProps:Y,getListProps:oe,getEmptyContentProps:de}=dQ({...t,ref:i}),ge=b.jsxs(c,{...oe(),children:[!h.collection.size&&!N&&b.jsx("li",{children:b.jsx("div",{...de()})}),[...h.collection].map(be=>{const pe={closeOnSelect:_,color:w,disableAnimation:n,item:be,state:h,variant:B,onClose:F,hideSelectedIcon:k,...be.props},we=vX(te,pe==null?void 0:pe.classNames);if(be.type==="section")return b.jsx(uQ,{...pe,itemClasses:we},be.key);let ke=b.jsx(Az,{...pe,classNames:we},be.key);return be.wrapper&&(ke=be.wrapper(ke)),ke})]});return b.jsxs("div",{...Y(),children:[G,ge,Q]})}),fQ=hQ,pQ=FX,_m=pQ,mQ=Bn(function(t,i){const{getMenuProps:c}=H7();return b.jsx(JJ,{children:b.jsx(nR,{contain:!0,restoreFocus:!0,children:b.jsx(fQ,{...c(t,i)})})})}),wT=mQ,Rz=e=>{const{getMenuTriggerProps:t}=H7(),{children:i,...c}=e;return b.jsx(QJ,{...t(c),children:i})};Rz.displayName="HeroUI.DropdownTrigger";var ST=Rz;function gQ(e){let t=N_(e),[i,c]=V.useState(null),[h,_]=V.useState([]),w=()=>{_([]),t.close()};return{focusStrategy:i,...t,open(N=null){c(N),t.open()},toggle(N=null){c(N),t.toggle()},close(){w()},expandedKeysStack:h,openSubmenu:(N,B)=>{_(F=>B>F.length?F:[...F.slice(0,B),N])},closeSubmenu:(N,B)=>{_(F=>F[B]===N?F.slice(0,B):F)}}}var yQ=(e,t)=>{if(e){const i=Array.isArray(e.children)?e.children:[...(e==null?void 0:e.items)||[]];if(i&&i.length)return i.find(h=>{if(h&&h.key===t)return h})||{}}return null},xQ=(e,t,i)=>{const c=i||yQ(e,t);return c&&c.props&&"closeOnSelect"in c.props?c.props.closeOnSelect:e==null?void 0:e.closeOnSelect};function vQ(e){var t;const i=Pi(),{as:c,triggerRef:h,isOpen:_,defaultOpen:w,onOpenChange:n,isDisabled:k,type:N="menu",trigger:B="press",placement:F="bottom",closeOnSelect:G=!0,shouldBlockScroll:Q=!0,classNames:te,disableAnimation:Y=(t=i==null?void 0:i.disableAnimation)!=null?t:!1,onClose:oe,className:de,...ge}=e,be=c||"div",pe=V.useRef(null),we=h||pe,ke=V.useRef(null),Ae=V.useRef(null),re=gQ({trigger:B,isOpen:_,defaultOpen:w,onOpenChange:Re=>{n==null||n(Re),Re||oe==null||oe()}}),{menuTriggerProps:Te,menuProps:se}=nQ({type:N,trigger:B,isDisabled:k},re,we),ue=V.useMemo(()=>gX({className:de}),[de]),De=Re=>{Re!==void 0&&!Re||G&&re.close()},ce=(Re={})=>{const Ge=xr(ge,Re);return{state:re,placement:F,ref:Ae,disableAnimation:Y,shouldBlockScroll:Q,scrollRef:ke,triggerRef:we,...Ge,classNames:{...te,...Re.classNames,content:Br(ue,te==null?void 0:te.content,Re.className)},shouldCloseOnInteractOutside:Ge!=null&&Ge.shouldCloseOnInteractOutside?Ge.shouldCloseOnInteractOutside:ze=>pT(ze,pe,re)}},je=(Re={})=>{const{onPress:Ge,onPressStart:ze,...ot}=Te;return xr(ot,{isDisabled:k},Re)},Le=(Re,Ge=null)=>({ref:c5(Ge,ke),menuProps:se,closeOnSelect:G,...xr(Re,{onAction:(ze,ot)=>{const Ee=xQ(Re,ze,ot);De(Ee)},onClose:re.close})});return{Component:be,menuRef:ke,menuProps:se,closeOnSelect:G,onClose:re.close,autoFocus:re.focusStrategy||!0,disableAnimation:Y,getPopoverProps:ce,getMenuProps:Le,getMenuTriggerProps:je}}var Iz=e=>{const{children:t,...i}=e,c=vQ(i),[h,_]=ra.Children.toArray(t);return b.jsx(tQ,{value:c,children:b.jsxs(eQ,{...c.getPopoverProps(),children:[h,_]})})};Iz.displayName="HeroUI.Dropdown";var TT=Iz,[_Q,s2]=Sh({name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Modal />`"}),zz=Bn((e,t)=>{const{as:i,children:c,className:h,..._}=e,{slots:w,classNames:n,bodyId:k,setBodyMounted:N}=s2(),B=Nn(t),F=i||"div";return V.useEffect(()=>(N(!0),()=>N(!1)),[N]),b.jsx(F,{ref:B,className:w.body({class:Br(n==null?void 0:n.body,h)}),id:k,..._,children:c})});zz.displayName="HeroUI.ModalBody";var Lz=zz,bQ={enter:{scale:"var(--scale-enter)",y:"var(--slide-enter)",opacity:1,willChange:"auto",transition:{scale:{duration:.4,ease:Xg.ease},opacity:{duration:.4,ease:Xg.ease},y:{type:"spring",bounce:0,duration:.6}}},exit:{scale:"var(--scale-exit)",y:"var(--slide-exit)",opacity:0,willChange:"transform",transition:{duration:.3,ease:Xg.ease}}},p6=()=>km(()=>import("./index-BxFlUVnv.js"),[]).then(e=>e.default),$z=e=>{const{as:t,children:i,role:c="dialog",...h}=e,{Component:_,domRef:w,slots:n,classNames:k,motionProps:N,backdrop:B,closeButton:F,hideCloseButton:G,disableAnimation:Q,getDialogProps:te,getBackdropProps:Y,getCloseButtonProps:oe,onClose:de}=s2(),ge=t||_||"div",be=$U(),{dialogProps:pe}=bT({role:c},w),we=V.isValidElement(F)?V.cloneElement(F,oe()):b.jsx("button",{...oe(),children:b.jsx(dT,{})}),ke=V.useCallback(De=>{De.key==="Tab"&&De.nativeEvent.isComposing&&(De.stopPropagation(),De.preventDefault())},[]),Ae=te(xr(pe,h)),re=b.jsxs(ge,{...Ae,onKeyDown:qi(Ae.onKeyDown,ke),children:[b.jsx(Qy,{onDismiss:de}),!G&&we,typeof i=="function"?i(de):i,b.jsx(Qy,{onDismiss:de})]}),Te=V.useMemo(()=>B==="transparent"?null:Q?b.jsx("div",{...Y()}):b.jsx(Tu,{features:p6,children:b.jsx(jl.div,{animate:"enter",exit:"exit",initial:"exit",variants:ax.fade,...Y()})}),[B,Q,Y]),se={"--visual-viewport-height":be.height+"px"},ue=Q?b.jsx("div",{className:n.wrapper({class:k==null?void 0:k.wrapper}),"data-slot":"wrapper",style:se,children:re}):b.jsx(Tu,{features:p6,children:b.jsx(jl.div,{animate:"enter",className:n.wrapper({class:k==null?void 0:k.wrapper}),"data-slot":"wrapper",exit:"exit",initial:"exit",variants:bQ,...N,style:se,children:re})});return b.jsxs("div",{tabIndex:-1,children:[Te,ue]})};$z.displayName="HeroUI.ModalContent";var wQ=$z,Nz=Bn((e,t)=>{const{as:i,children:c,className:h,..._}=e,{slots:w,classNames:n}=s2(),k=Nn(t),N=i||"footer";return b.jsx(N,{ref:k,className:w.footer({class:Br(n==null?void 0:n.footer,h)}),..._,children:c})});Nz.displayName="HeroUI.ModalFooter";var ET=Nz,Bz=Bn((e,t)=>{const{as:i,children:c,className:h,..._}=e,{slots:w,classNames:n,headerId:k,setHeaderMounted:N}=s2(),B=Nn(t),F=i||"header";return V.useEffect(()=>(N(!0),()=>N(!1)),[N]),b.jsx(F,{ref:B,className:w.header({class:Br(n==null?void 0:n.header,h)}),id:k,..._,children:c})});Bz.displayName="HeroUI.ModalHeader";var CT=Bz;function SQ(e={shouldBlockScroll:!0},t,i){let{overlayProps:c,underlayProps:h}=P5({...e,isOpen:t.isOpen,onClose:t.close},i);return cR({isDisabled:!t.isOpen||!e.shouldBlockScroll}),KR(),V.useEffect(()=>{if(t.isOpen&&i.current)return qR([i.current])},[t.isOpen,i]),{modalProps:xr(c),underlayProps:h}}function TQ(e){var t,i,c;const h=Pi(),[_,w]=Zo(e,AM.variantKeys),{ref:n,as:k,className:N,classNames:B,isOpen:F,defaultOpen:G,onOpenChange:Q,motionProps:te,closeButton:Y,isDismissable:oe=!0,hideCloseButton:de=!1,shouldBlockScroll:ge=!0,portalContainer:be,isKeyboardDismissDisabled:pe=!1,onClose:we,...ke}=_,Ae=k||"section",re=Nn(n),Te=V.useRef(null),[se,ue]=V.useState(!1),[De,ce]=V.useState(!1),je=(i=(t=e.disableAnimation)!=null?t:h==null?void 0:h.disableAnimation)!=null?i:!1,Le=V.useId(),Re=V.useId(),Ge=V.useId(),ze=N_({isOpen:F,defaultOpen:G,onOpenChange:er=>{Q==null||Q(er),er||we==null||we()}}),{modalProps:ot,underlayProps:Ee}=SQ({isDismissable:oe,shouldBlockScroll:ge,isKeyboardDismissDisabled:pe},ze,re),{buttonProps:Ke}=r2({onPress:ze.close},Te),{isFocusVisible:nt,focusProps:Xe}=Ac(),ut=Br(B==null?void 0:B.base,N),Pt=V.useMemo(()=>AM({...w,disableAnimation:je}),[Ko(w),je]),Ct=(er={},Se=null)=>{var ur;return{ref:_5(Se,re),...xr(ot,ke,er),className:Pt.base({class:Br(ut,er.className)}),id:Le,"data-open":Vt(ze.isOpen),"data-dismissable":Vt(oe),"aria-modal":Vt(!0),"data-placement":(ur=e==null?void 0:e.placement)!=null?ur:"right","aria-labelledby":se?Re:void 0,"aria-describedby":De?Ge:void 0}},Zt=V.useCallback((er={})=>({className:Pt.backdrop({class:B==null?void 0:B.backdrop}),onClick:()=>ze.close(),...Ee,...er}),[Pt,B,Ee]),Dt=()=>({role:"button",tabIndex:0,"aria-label":"Close","data-focus-visible":Vt(nt),className:Pt.closeButton({class:B==null?void 0:B.closeButton}),...xr(Ke,Xe)});return{Component:Ae,slots:Pt,domRef:re,headerId:Re,bodyId:Ge,motionProps:te,classNames:B,isDismissable:oe,closeButton:Y,hideCloseButton:de,portalContainer:be,shouldBlockScroll:ge,backdrop:(c=e.backdrop)!=null?c:"opaque",isOpen:ze.isOpen,onClose:ze.close,disableAnimation:je,setBodyMounted:ce,setHeaderMounted:ue,getDialogProps:Ct,getBackdropProps:Zt,getCloseButtonProps:Dt}}var jz=Bn((e,t)=>{const{children:i,...c}=e,h=TQ({...c,ref:t}),_=b.jsx(M5,{portalContainer:h.portalContainer,children:i});return b.jsx(_Q,{value:h,children:h.disableAnimation&&h.isOpen?_:b.jsx(Uf,{children:h.isOpen?_:null})})});jz.displayName="HeroUI.Modal";var EQ=jz;function CQ(e={}){const{id:t,defaultOpen:i,isOpen:c,onClose:h,onOpen:_,onChange:w=()=>{}}=e,n=VS(_),k=VS(h),[N,B]=Xs(c,i||!1,w),F=V.useId(),G=t||F,Q=c!==void 0,te=V.useCallback(()=>{Q||B(!1),k==null||k()},[Q,k]),Y=V.useCallback(()=>{Q||B(!0),n==null||n()},[Q,n]),oe=V.useCallback(()=>{(N?te:Y)()},[N,Y,te]);return{isOpen:!!N,onOpen:Y,onClose:te,onOpenChange:oe,isControlled:Q,getButtonProps:(de={})=>({...de,"aria-expanded":N,"aria-controls":G,onClick:qi(de.onClick,oe)}),getDisclosureProps:(de={})=>({...de,hidden:!N,id:G})}}const Oz=7e3;let fu=null;function US(e,t="assertive",i=Oz){fu?fu.announce(e,t,i):(fu=new PQ,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?fu.announce(e,t,i):setTimeout(()=>{fu!=null&&fu.isAttached()&&(fu==null||fu.announce(e,t,i))},100))}function DQ(e){fu&&fu.clear(e)}class PQ{isAttached(){var t;return(t=this.node)===null||t===void 0?void 0:t.isConnected}createLog(t){let i=document.createElement("div");return i.setAttribute("role","log"),i.setAttribute("aria-live",t),i.setAttribute("aria-relevant","additions"),i}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(t,i="assertive",c=Oz){var h,_;if(!this.node)return;let w=document.createElement("div");typeof t=="object"?(w.setAttribute("role","img"),w.setAttribute("aria-labelledby",t["aria-labelledby"])):w.textContent=t,i==="assertive"?(h=this.assertiveLog)===null||h===void 0||h.appendChild(w):(_=this.politeLog)===null||_===void 0||_.appendChild(w),t!==""&&setTimeout(()=>{w.remove()},c)}clear(t){this.node&&((!t||t==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!t||t==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}function MQ(e){var t,i,c,h,_,w,n;const[k,N]=Zo(e,IM.variantKeys),B=Pi(),{locale:F,direction:G}=Ms(),Q=G==="rtl",te=ow(new gd(F).resolvedOptions().calendar),Y=GA(te.identifier),{ref:oe,as:de,children:ge,className:be,topContent:pe,bottomContent:we,showHelper:ke=!0,firstDayOfWeek:Ae,calendarWidth:re=256,visibleMonths:Te=1,weekdayStyle:se="narrow",navButtonProps:ue={},isHeaderExpanded:De,isHeaderDefaultExpanded:ce,onHeaderExpandedChange:je=()=>{},createCalendar:Le=(t=B==null?void 0:B.createCalendar)!=null?t:null,minValue:Re=(c=(i=B==null?void 0:B.defaultDates)==null?void 0:i.minDate)!=null?c:new Di(te,1900+Y,1,1),maxValue:Ge=(_=(h=B==null?void 0:B.defaultDates)==null?void 0:h.maxDate)!=null?_:new Di(te,2099+Y,12,31),prevButtonProps:ze,nextButtonProps:ot,errorMessage:Ee,classNames:Ke,...nt}=k,Xe=de||"div",ut=l5(Te,1,3),Pt=e.showMonthAndYearPickers&&ut===1,Ct=Nn(oe),Zt=V.useCallback(Fr=>{je(Fr||!1)},[je]),[Dt,er]=Xs(De,ce??!1,Zt),Se=V.useMemo(()=>({months:ut}),[ut]),ur=ut>1,Sr=typeof Xe=="string",yt=V.useMemo(()=>IM({...N,showMonthAndYearPickers:Pt,isRange:!!e.isRange,isHeaderWrapperExpanded:Dt,className:be,isRTL:Q}),[Ko(N),Pt,Dt,be]),dt=(n=(w=e.disableAnimation)!=null?w:B==null?void 0:B.disableAnimation)!=null?n:!1,$t={size:"sm",variant:"light",radius:"full",isIconOnly:!0,disableAnimation:dt,...ue},or={"data-slot":"base","data-has-multiple-months":Vt(ur),style:{"--visible-months":typeof ut=="number"?`${ut}`:ut,"--calendar-width":typeof re=="number"?`${re}px`:re}};return{Component:Xe,children:ge,domRef:Ct,slots:yt,locale:F,minValue:Re,maxValue:Ge,baseProps:or,showHelper:ke,firstDayOfWeek:Ae,weekdayStyle:se,visibleMonths:ut,visibleDuration:Se,shouldFilterDOMProps:Sr,isHeaderExpanded:Dt,showMonthAndYearPickers:Pt,disableAnimation:dt,createCalendar:Le,getPrevButtonProps:(Fr={})=>({"data-slot":"prev-button",tabIndex:Dt?-1:0,className:yt.prevButton({class:Ke==null?void 0:Ke.prevButton}),...xr($t,ze,Fr)}),getNextButtonProps:(Fr={})=>({"data-slot":"next-button",tabIndex:Dt?-1:0,className:yt.nextButton({class:Ke==null?void 0:Ke.nextButton}),...xr($t,ot,Fr)}),getErrorMessageProps:(Fr={})=>({"data-slot":"error-message",className:yt.errorMessage({class:Ke==null?void 0:Ke.errorMessage}),...Fr}),setIsHeaderExpanded:er,topContent:pe,bottomContent:we,errorMessage:Ee,classNames:Ke,otherProps:nt}}var Fz={};Fz={dateRange:e=>`${e.startDate}  ${e.endDate}`,dateSelected:e=>`${e.date} `,finishRangeSelectionPrompt:"     ",maximumDate:"  ",minimumDate:"  ",next:"",previous:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>`  : ${e.dateRange}`,startRangeSelectionPrompt:"     ",todayDate:e=>` ${e.date}`,todayDateSelected:e=>` ${e.date} `};var Vz={};Vz={dateRange:e=>`${e.startDate}  ${e.endDate}`,dateSelected:e=>`  ${e.date}`,finishRangeSelectionPrompt:",       ",maximumDate:"  ",minimumDate:"  ",next:"",previous:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>` : ${e.dateRange}`,startRangeSelectionPrompt:",        ",todayDate:e=>`, ${e.date}`,todayDateSelected:e=>`, ${e.date}  `};var Uz={};Uz={dateRange:e=>`${e.startDate} a ${e.endDate}`,dateSelected:e=>`Vybrno ${e.date}`,finishRangeSelectionPrompt:"Kliknutm dokonte vbr rozsahu dat",maximumDate:"Posledn dostupn datum",minimumDate:"Prvn dostupn datum",next:"Dal",previous:"Pedchoz",selectedDateDescription:e=>`Vybran datum: ${e.date}`,selectedRangeDescription:e=>`Vybran obdob: ${e.dateRange}`,startRangeSelectionPrompt:"Kliknutm zahjte vbr rozsahu dat",todayDate:e=>`Dnes, ${e.date}`,todayDateSelected:e=>`Dnes, vybrno ${e.date}`};var Gz={};Gz={dateRange:e=>`${e.startDate} til ${e.endDate}`,dateSelected:e=>`${e.date} valgt`,finishRangeSelectionPrompt:"Klik for at fuldfre valg af datoomrde",maximumDate:"Sidste ledige dato",minimumDate:"Frste ledige dato",next:"Nste",previous:"Forrige",selectedDateDescription:e=>`Valgt dato: ${e.date}`,selectedRangeDescription:e=>`Valgt interval: ${e.dateRange}`,startRangeSelectionPrompt:"Klik for at starte valg af datoomrde",todayDate:e=>`I dag, ${e.date}`,todayDateSelected:e=>`I dag, ${e.date} valgt`};var Hz={};Hz={dateRange:e=>`${e.startDate} bis ${e.endDate}`,dateSelected:e=>`${e.date} ausgewhlt`,finishRangeSelectionPrompt:"Klicken, um die Auswahl des Datumsbereichs zu beenden",maximumDate:"Letztes verfgbares Datum",minimumDate:"Erstes verfgbares Datum",next:"Weiter",previous:"Zurck",selectedDateDescription:e=>`Ausgewhltes Datum: ${e.date}`,selectedRangeDescription:e=>`Ausgewhlter Bereich: ${e.dateRange}`,startRangeSelectionPrompt:"Klicken, um die Auswahl des Datumsbereichs zu beginnen",todayDate:e=>`Heute, ${e.date}`,todayDateSelected:e=>`Heute, ${e.date} ausgewhlt`};var qz={};qz={dateRange:e=>`${e.startDate}  ${e.endDate}`,dateSelected:e=>` ${e.date}`,finishRangeSelectionPrompt:"        ",maximumDate:"  ",minimumDate:"  ",next:"",previous:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>` : ${e.dateRange}`,startRangeSelectionPrompt:"        ",todayDate:e=>`, ${e.date}`,todayDateSelected:e=>`,  ${e.date}`};var Wz={};Wz={previous:"Previous",next:"Next",selectedDateDescription:e=>`Selected Date: ${e.date}`,selectedRangeDescription:e=>`Selected Range: ${e.dateRange}`,todayDate:e=>`Today, ${e.date}`,todayDateSelected:e=>`Today, ${e.date} selected`,dateSelected:e=>`${e.date} selected`,startRangeSelectionPrompt:"Click to start selecting date range",finishRangeSelectionPrompt:"Click to finish selecting date range",minimumDate:"First available date",maximumDate:"Last available date",dateRange:e=>`${e.startDate} to ${e.endDate}`};var Kz={};Kz={dateRange:e=>`${e.startDate} a ${e.endDate}`,dateSelected:e=>`${e.date} seleccionado`,finishRangeSelectionPrompt:"Haga clic para terminar de seleccionar rango de fechas",maximumDate:"ltima fecha disponible",minimumDate:"Primera fecha disponible",next:"Siguiente",previous:"Anterior",selectedDateDescription:e=>`Fecha seleccionada: ${e.date}`,selectedRangeDescription:e=>`Intervalo seleccionado: ${e.dateRange}`,startRangeSelectionPrompt:"Haga clic para comenzar a seleccionar un rango de fechas",todayDate:e=>`Hoy, ${e.date}`,todayDateSelected:e=>`Hoy, ${e.date} seleccionado`};var Zz={};Zz={dateRange:e=>`${e.startDate} kuni ${e.endDate}`,dateSelected:e=>`${e.date} valitud`,finishRangeSelectionPrompt:"Klpsake kuupevavahemiku valimise lpetamiseks",maximumDate:"Viimane saadaolev kuupev",minimumDate:"Esimene saadaolev kuupev",next:"Jrgmine",previous:"Eelmine",selectedDateDescription:e=>`Valitud kuupev: ${e.date}`,selectedRangeDescription:e=>`Valitud vahemik: ${e.dateRange}`,startRangeSelectionPrompt:"Klpsake kuupevavahemiku valimiseks",todayDate:e=>`Tna, ${e.date}`,todayDateSelected:e=>`Tna, ${e.date} valitud`};var Xz={};Xz={dateRange:e=>`${e.startDate}  ${e.endDate}`,dateSelected:e=>`${e.date} valittu`,finishRangeSelectionPrompt:"Lopeta pivmralueen valinta napsauttamalla tt.",maximumDate:"Viimeinen varattavissa oleva pivmr",minimumDate:"Ensimminen varattavissa oleva pivmr",next:"Seuraava",previous:"Edellinen",selectedDateDescription:e=>`Valittu pivmr: ${e.date}`,selectedRangeDescription:e=>`Valittu aikavli: ${e.dateRange}`,startRangeSelectionPrompt:"Aloita pivmralueen valinta napsauttamalla tt.",todayDate:e=>`Tnn, ${e.date}`,todayDateSelected:e=>`Tnn, ${e.date} valittu`};var Yz={};Yz={dateRange:e=>`${e.startDate}  ${e.endDate}`,dateSelected:e=>`${e.date} slectionn`,finishRangeSelectionPrompt:"Cliquer pour finir de slectionner la plage de dates",maximumDate:"Dernire date disponible",minimumDate:"Premire date disponible",next:"Suivant",previous:"Prcdent",selectedDateDescription:e=>`Date slectionne: ${e.date}`,selectedRangeDescription:e=>`Plage slectionne: ${e.dateRange}`,startRangeSelectionPrompt:"Cliquer pour commencer  slectionner la plage de dates",todayDate:e=>`Aujourd'hui, ${e.date}`,todayDateSelected:e=>`Aujourdhui, ${e.date} slectionn`};var Jz={};Jz={dateRange:e=>`${e.startDate}  ${e.endDate}`,dateSelected:e=>`${e.date} `,finishRangeSelectionPrompt:"      ",maximumDate:"  ",minimumDate:"  ",next:"",previous:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>` : ${e.dateRange}`,startRangeSelectionPrompt:"     ",todayDate:e=>`, ${e.date}`,todayDateSelected:e=>`, ${e.date} `};var Qz={};Qz={dateRange:e=>`${e.startDate} do ${e.endDate}`,dateSelected:e=>`${e.date} odabran`,finishRangeSelectionPrompt:"Kliknite da dovrite raspon odabranih datuma",maximumDate:"Posljednji raspoloivi datum",minimumDate:"Prvi raspoloivi datum",next:"Sljedei",previous:"Prethodni",selectedDateDescription:e=>`Odabrani datum: ${e.date}`,selectedRangeDescription:e=>`Odabrani raspon: ${e.dateRange}`,startRangeSelectionPrompt:"Kliknite da zaponete raspon odabranih datuma",todayDate:e=>`Danas, ${e.date}`,todayDateSelected:e=>`Danas, odabran ${e.date}`};var eL={};eL={dateRange:e=>`${e.startDate}${e.endDate}`,dateSelected:e=>`${e.date} kivlasztva`,finishRangeSelectionPrompt:"Kattintson a dtumtartomny kijellsnek befejezshez",maximumDate:"Utols elrhet dtum",minimumDate:"Az els elrhet dtum",next:"Kvetkez",previous:"Elz",selectedDateDescription:e=>`Kijellt dtum: ${e.date}`,selectedRangeDescription:e=>`Kijellt tartomny: ${e.dateRange}`,startRangeSelectionPrompt:"Kattintson a dtumtartomny kijellsnek indtshoz",todayDate:e=>`Ma, ${e.date}`,todayDateSelected:e=>`Ma, ${e.date} kijellve`};var tL={};tL={dateRange:e=>`Da ${e.startDate} a ${e.endDate}`,dateSelected:e=>`${e.date} selezionata`,finishRangeSelectionPrompt:"Fai clic per completare la selezione dellintervallo di date",maximumDate:"Ultima data disponibile",minimumDate:"Prima data disponibile",next:"Successivo",previous:"Precedente",selectedDateDescription:e=>`Data selezionata: ${e.date}`,selectedRangeDescription:e=>`Intervallo selezionato: ${e.dateRange}`,startRangeSelectionPrompt:"Fai clic per selezionare lintervallo di date",todayDate:e=>`Oggi, ${e.date}`,todayDateSelected:e=>`Oggi, ${e.date} selezionata`};var rL={};rL={dateRange:e=>`${e.startDate}  ${e.endDate}`,dateSelected:e=>`${e.date} `,finishRangeSelectionPrompt:"",maximumDate:"",minimumDate:"",next:"",previous:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>` : ${e.dateRange}`,startRangeSelectionPrompt:"",todayDate:e=>`${e.date}`,todayDateSelected:e=>`${e.date} `};var aL={};aL={dateRange:e=>`${e.startDate} ~ ${e.endDate}`,dateSelected:e=>`${e.date} `,finishRangeSelectionPrompt:"    .",maximumDate:"   ",minimumDate:"   ",next:"",previous:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>` : ${e.dateRange}`,startRangeSelectionPrompt:"    .",todayDate:e=>`, ${e.date}`,todayDateSelected:e=>`, ${e.date} `};var nL={};nL={dateRange:e=>`Nuo ${e.startDate} iki ${e.endDate}`,dateSelected:e=>`Pasirinkta ${e.date}`,finishRangeSelectionPrompt:"Spustelkite, kad baigtumte pasirinkti dat interval",maximumDate:"Paskutin galima data",minimumDate:"Pirmoji galima data",next:"Paskesnis",previous:"Ankstesnis",selectedDateDescription:e=>`Pasirinkta data: ${e.date}`,selectedRangeDescription:e=>`Pasirinktas intervalas: ${e.dateRange}`,startRangeSelectionPrompt:"Spustelkite, kad pradtumte pasirinkti dat interval",todayDate:e=>`iandien, ${e.date}`,todayDateSelected:e=>`iandien, pasirinkta ${e.date}`};var iL={};iL={dateRange:e=>`No ${e.startDate} ldz ${e.endDate}`,dateSelected:e=>`Atlasts: ${e.date}`,finishRangeSelectionPrompt:"Noklikiniet, lai pabeigtu datumu diapazona atlasi",maximumDate:"Pdjais pieejamais datums",minimumDate:"Pirmais pieejamais datums",next:"Tlk",previous:"Atpaka",selectedDateDescription:e=>`Atlastais datums: ${e.date}`,selectedRangeDescription:e=>`Atlastais diapazons: ${e.dateRange}`,startRangeSelectionPrompt:"Noklikiniet, lai sktu datumu diapazona atlasi",todayDate:e=>`odien, ${e.date}`,todayDateSelected:e=>`Atlasta odiena, ${e.date}`};var sL={};sL={dateRange:e=>`${e.startDate} til ${e.endDate}`,dateSelected:e=>`${e.date} valgt`,finishRangeSelectionPrompt:"Klikk for  fullfre valg av datoomrde",maximumDate:"Siste tilgjengelige dato",minimumDate:"Frste tilgjengelige dato",next:"Neste",previous:"Forrige",selectedDateDescription:e=>`Valgt dato: ${e.date}`,selectedRangeDescription:e=>`Valgt omrde: ${e.dateRange}`,startRangeSelectionPrompt:"Klikk for  starte valg av datoomrde",todayDate:e=>`I dag, ${e.date}`,todayDateSelected:e=>`I dag, ${e.date} valgt`};var oL={};oL={dateRange:e=>`${e.startDate} tot ${e.endDate}`,dateSelected:e=>`${e.date} geselecteerd`,finishRangeSelectionPrompt:"Klik om de selectie van het datumbereik te voltooien",maximumDate:"Laatste beschikbare datum",minimumDate:"Eerste beschikbare datum",next:"Volgende",previous:"Vorige",selectedDateDescription:e=>`Geselecteerde datum: ${e.date}`,selectedRangeDescription:e=>`Geselecteerd bereik: ${e.dateRange}`,startRangeSelectionPrompt:"Klik om het datumbereik te selecteren",todayDate:e=>`Vandaag, ${e.date}`,todayDateSelected:e=>`Vandaag, ${e.date} geselecteerd`};var lL={};lL={dateRange:e=>`${e.startDate} do ${e.endDate}`,dateSelected:e=>`Wybrano ${e.date}`,finishRangeSelectionPrompt:"Kliknij, aby zakoczy wybr zakresu dat",maximumDate:"Ostatnia dostpna data",minimumDate:"Pierwsza dostpna data",next:"Dalej",previous:"Wstecz",selectedDateDescription:e=>`Wybrana data: ${e.date}`,selectedRangeDescription:e=>`Wybrany zakres: ${e.dateRange}`,startRangeSelectionPrompt:"Kliknij, aby rozpocz wybr zakresu dat",todayDate:e=>`Dzisiaj, ${e.date}`,todayDateSelected:e=>`Dzisiaj wybrano ${e.date}`};var cL={};cL={dateRange:e=>`${e.startDate} a ${e.endDate}`,dateSelected:e=>`${e.date} selecionado`,finishRangeSelectionPrompt:"Clique para concluir a seleo do intervalo de datas",maximumDate:"ltima data disponvel",minimumDate:"Primeira data disponvel",next:"Prximo",previous:"Anterior",selectedDateDescription:e=>`Data selecionada: ${e.date}`,selectedRangeDescription:e=>`Intervalo selecionado: ${e.dateRange}`,startRangeSelectionPrompt:"Clique para iniciar a seleo do intervalo de datas",todayDate:e=>`Hoje, ${e.date}`,todayDateSelected:e=>`Hoje, ${e.date} selecionado`};var uL={};uL={dateRange:e=>`${e.startDate} a ${e.endDate}`,dateSelected:e=>`${e.date} selecionado`,finishRangeSelectionPrompt:"Clique para terminar de selecionar o intervalo de datas",maximumDate:"ltima data disponvel",minimumDate:"Primeira data disponvel",next:"Prximo",previous:"Anterior",selectedDateDescription:e=>`Data selecionada: ${e.date}`,selectedRangeDescription:e=>`Intervalo selecionado: ${e.dateRange}`,startRangeSelectionPrompt:"Clique para comear a selecionar o intervalo de datas",todayDate:e=>`Hoje, ${e.date}`,todayDateSelected:e=>`Hoje, ${e.date} selecionado`};var dL={};dL={dateRange:e=>`De la ${e.startDate} pn la ${e.endDate}`,dateSelected:e=>`${e.date} selectat`,finishRangeSelectionPrompt:"Apsai pentru a finaliza selecia razei pentru dat",maximumDate:"Ultima dat disponibil",minimumDate:"Prima dat disponibil",next:"Urmtorul",previous:"nainte",selectedDateDescription:e=>`Dat selectat: ${e.date}`,selectedRangeDescription:e=>`Interval selectat: ${e.dateRange}`,startRangeSelectionPrompt:"Apsai pentru a ncepe selecia razei pentru dat",todayDate:e=>`Astzi, ${e.date}`,todayDateSelected:e=>`Azi, ${e.date} selectat`};var hL={};hL={dateRange:e=>` ${e.startDate}  ${e.endDate}`,dateSelected:e=>` ${e.date}`,finishRangeSelectionPrompt:",     ",maximumDate:"  ",minimumDate:"  ",next:"",previous:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>` : ${e.dateRange}`,startRangeSelectionPrompt:",     ",todayDate:e=>`, ${e.date}`,todayDateSelected:e=>`,  ${e.date}`};var fL={};fL={dateRange:e=>`Od ${e.startDate} do ${e.endDate}`,dateSelected:e=>`Vybrat dtum ${e.date}`,finishRangeSelectionPrompt:"Kliknutm dokonte vber rozsahu dtumov",maximumDate:"Posledn dostupn dtum",minimumDate:"Prv dostupn dtum",next:"Nasledujce",previous:"Predchdzajce",selectedDateDescription:e=>`Vybrat dtum: ${e.date}`,selectedRangeDescription:e=>`Vybrat rozsah: ${e.dateRange}`,startRangeSelectionPrompt:"Kliknutm spustte vber rozsahu dtumov",todayDate:e=>`Dnes ${e.date}`,todayDateSelected:e=>`Vybrat dnen dtum ${e.date}`};var pL={};pL={dateRange:e=>`${e.startDate} do ${e.endDate}`,dateSelected:e=>`${e.date} izbrano`,finishRangeSelectionPrompt:"Kliknite za dokonanje izbire datumskega obsega",maximumDate:"Zadnji razpololjivi datum",minimumDate:"Prvi razpololjivi datum",next:"Naprej",previous:"Nazaj",selectedDateDescription:e=>`Izbrani datum: ${e.date}`,selectedRangeDescription:e=>`Izbrano obmoje: ${e.dateRange}`,startRangeSelectionPrompt:"Kliknite za zaetek izbire datumskega obsega",todayDate:e=>`Danes, ${e.date}`,todayDateSelected:e=>`Danes, ${e.date} izbrano`};var mL={};mL={dateRange:e=>`${e.startDate} do ${e.endDate}`,dateSelected:e=>`${e.date} izabran`,finishRangeSelectionPrompt:"Kliknite da dovrite opseg izabranih datuma",maximumDate:"Zadnji raspoloivi datum",minimumDate:"Prvi raspoloivi datum",next:"Sledei",previous:"Prethodni",selectedDateDescription:e=>`Izabrani datum: ${e.date}`,selectedRangeDescription:e=>`Izabrani period: ${e.dateRange}`,startRangeSelectionPrompt:"Kliknite da zaponete opseg izabranih datuma",todayDate:e=>`Danas, ${e.date}`,todayDateSelected:e=>`Danas, izabran ${e.date}`};var gL={};gL={dateRange:e=>`${e.startDate} till ${e.endDate}`,dateSelected:e=>`${e.date} har valts`,finishRangeSelectionPrompt:"Klicka fr att avsluta val av datumintervall",maximumDate:"Sista tillgngliga datum",minimumDate:"Frsta tillgngliga datum",next:"Nsta",previous:"Fregende",selectedDateDescription:e=>`Valt datum: ${e.date}`,selectedRangeDescription:e=>`Valt intervall: ${e.dateRange}`,startRangeSelectionPrompt:"Klicka fr att vlja datumintervall",todayDate:e=>`Idag, ${e.date}`,todayDateSelected:e=>`Idag, ${e.date} har valts`};var yL={};yL={dateRange:e=>`${e.startDate} - ${e.endDate}`,dateSelected:e=>`${e.date} seildi`,finishRangeSelectionPrompt:"Tarih aral seimini tamamlamak iin tklayn",maximumDate:"Son msait tarih",minimumDate:"lk msait tarih",next:"Sonraki",previous:"nceki",selectedDateDescription:e=>`Seilen Tarih: ${e.date}`,selectedRangeDescription:e=>`Seilen Aralk: ${e.dateRange}`,startRangeSelectionPrompt:"Tarih aral seimini balatmak iin tklayn",todayDate:e=>`Bugn, ${e.date}`,todayDateSelected:e=>`Bugn, ${e.date} seildi`};var xL={};xL={dateRange:e=>`${e.startDate}  ${e.endDate}`,dateSelected:e=>` ${e.date}`,finishRangeSelectionPrompt:",     ",maximumDate:"  ",minimumDate:"  ",next:"",previous:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>` : ${e.dateRange}`,startRangeSelectionPrompt:",     ",todayDate:e=>`, ${e.date}`,todayDateSelected:e=>`,  ${e.date}`};var vL={};vL={dateRange:e=>`${e.startDate}  ${e.endDate}`,dateSelected:e=>` ${e.date}`,finishRangeSelectionPrompt:"",maximumDate:"",minimumDate:"",next:"",previous:"",selectedDateDescription:e=>`${e.date}`,selectedRangeDescription:e=>`${e.dateRange}`,startRangeSelectionPrompt:"",todayDate:e=>` ${e.date}`,todayDateSelected:e=>` ${e.date}`};var _L={};_L={dateRange:e=>`${e.startDate}  ${e.endDate}`,dateSelected:e=>` ${e.date}`,finishRangeSelectionPrompt:"",maximumDate:"",minimumDate:"",next:"",previous:"",selectedDateDescription:e=>`${e.date}`,selectedRangeDescription:e=>`${e.dateRange}`,startRangeSelectionPrompt:"",todayDate:e=>`${e.date}`,todayDateSelected:e=>`${e.date}`};var B_={};B_={"ar-AE":Fz,"bg-BG":Vz,"cs-CZ":Uz,"da-DK":Gz,"de-DE":Hz,"el-GR":qz,"en-US":Wz,"es-ES":Kz,"et-EE":Zz,"fi-FI":Xz,"fr-FR":Yz,"he-IL":Jz,"hr-HR":Qz,"hu-HU":eL,"it-IT":tL,"ja-JP":rL,"ko-KR":aL,"lt-LT":nL,"lv-LV":iL,"nb-NO":sL,"nl-NL":oL,"pl-PL":lL,"pt-BR":cL,"pt-PT":uL,"ro-RO":dL,"ru-RU":hL,"sk-SK":fL,"sl-SI":pL,"sr-SP":mL,"sv-SE":gL,"tr-TR":yL,"uk-UA":xL,"zh-CN":vL,"zh-TW":_L};function bL(e){return e&&e.__esModule?e.default:e}const DT=new WeakMap;function y_(e){return(e==null?void 0:e.calendar.identifier)==="gregory"&&e.era==="BC"?"short":void 0}function AQ(e){let t=Eu(bL(B_),"@react-aria/calendar"),i,c;var h;"highlightedRange"in e?{start:i,end:c}=e.highlightedRange||{}:i=c=(h=e.value)!==null&&h!==void 0?h:void 0;let _=ml({weekday:"long",month:"long",year:"numeric",day:"numeric",era:y_(i)||y_(c),timeZone:e.timeZone}),w="anchorDate"in e?e.anchorDate:null;return V.useMemo(()=>{if(!w&&i&&c)if(Ds(i,c)){let n=_.format(i.toDate(e.timeZone));return t.format("selectedDateDescription",{date:n})}else{let n=HS(_,t,i,c,e.timeZone);return t.format("selectedRangeDescription",{dateRange:n})}return""},[i,c,w,e.timeZone,t,_])}function GS(e,t,i,c){let h=Eu(bL(B_),"@react-aria/calendar"),_=y_(e)||y_(t),w=ml({month:"long",year:"numeric",era:_,calendar:e.calendar.identifier,timeZone:i}),n=ml({month:"long",year:"numeric",day:"numeric",era:_,calendar:e.calendar.identifier,timeZone:i});return V.useMemo(()=>{if(Ds(e,Jg(e))){if(Ds(t,ew(e)))return w.format(e.toDate(i));if(Ds(t,ew(t)))return c?HS(w,h,e,t,i):w.formatRange(e.toDate(i),t.toDate(i))}return c?HS(n,h,e,t,i):n.formatRange(e.toDate(i),t.toDate(i))},[e,t,w,n,h,i,c])}function HS(e,t,i,c,h){let _=e.formatRangeToParts(i.toDate(h),c.toDate(h)),w=-1;for(let N=0;N<_.length;N++){let B=_[N];if(B.source==="shared"&&B.type==="literal")w=N;else if(B.source==="endRange")break}let n="",k="";for(let N=0;N<_.length;N++)N<w?n+=_[N].value:N>w&&(k+=_[N].value);return t.format("dateRange",{startDate:n,endDate:k})}function kQ(e){return e&&e.__esModule?e.default:e}function RQ(e,t){let i=Eu(kQ(B_),"@react-aria/calendar"),c=Fl(e),h=GS(t.visibleRange.start,t.visibleRange.end,t.timeZone,!1),_=GS(t.visibleRange.start,t.visibleRange.end,t.timeZone,!0);DD(()=>{t.isFocused||US(_)},[_]);let w=AQ(t);DD(()=>{w&&US(w,"polite",4e3)},[w]);let n=vm([!!e.errorMessage,e.isInvalid,e.validationState]);DT.set(t,{ariaLabel:e["aria-label"],ariaLabelledBy:e["aria-labelledby"],errorMessageId:n,selectedDateDescription:w});let[k,N]=V.useState(!1),B=e.isDisabled||t.isNextVisibleRangeInvalid();B&&k&&(N(!1),t.setFocused(!0));let[F,G]=V.useState(!1),Q=e.isDisabled||t.isPreviousVisibleRangeInvalid();Q&&F&&(G(!1),t.setFocused(!0));let te=C_({id:e.id,"aria-label":[e["aria-label"],_].filter(Boolean).join(", "),"aria-labelledby":e["aria-labelledby"]});return{calendarProps:xr(c,te,{role:"application","aria-describedby":e["aria-describedby"]||void 0}),nextButtonProps:{onPress:()=>t.focusNextPage(),"aria-label":i.format("next"),isDisabled:B,onFocusChange:N},prevButtonProps:{onPress:()=>t.focusPreviousPage(),"aria-label":i.format("previous"),isDisabled:Q,onFocusChange:G},errorMessageProps:{id:n},title:h}}function IQ(e,t){return RQ(e,t)}function zQ(e,t){let{startDate:i=t.visibleRange.start,endDate:c=t.visibleRange.end,firstDayOfWeek:h}=e,{direction:_}=Ms(),w=te=>{switch(te.key){case"Enter":case" ":te.preventDefault(),t.selectFocusedDate();break;case"PageUp":te.preventDefault(),te.stopPropagation(),t.focusPreviousSection(te.shiftKey);break;case"PageDown":te.preventDefault(),te.stopPropagation(),t.focusNextSection(te.shiftKey);break;case"End":te.preventDefault(),te.stopPropagation(),t.focusSectionEnd();break;case"Home":te.preventDefault(),te.stopPropagation(),t.focusSectionStart();break;case"ArrowLeft":te.preventDefault(),te.stopPropagation(),_==="rtl"?t.focusNextDay():t.focusPreviousDay();break;case"ArrowUp":te.preventDefault(),te.stopPropagation(),t.focusPreviousRow();break;case"ArrowRight":te.preventDefault(),te.stopPropagation(),_==="rtl"?t.focusPreviousDay():t.focusNextDay();break;case"ArrowDown":te.preventDefault(),te.stopPropagation(),t.focusNextRow();break;case"Escape":"setAnchorDate"in t&&(te.preventDefault(),t.setAnchorDate(null));break}},n=GS(i,c,t.timeZone,!0),{ariaLabel:k,ariaLabelledBy:N}=DT.get(t),B=C_({"aria-label":[k,n].filter(Boolean).join(", "),"aria-labelledby":N}),F=ml({weekday:e.weekdayStyle||"narrow",timeZone:t.timeZone}),{locale:G}=Ms(),Q=V.useMemo(()=>{let te=a_(Pm(t.timeZone),G,h);return[...new Array(7).keys()].map(Y=>{let de=te.add({days:Y}).toDate(t.timeZone);return F.format(de)})},[G,t.timeZone,F,h]);return{gridProps:xr(B,{role:"grid","aria-readonly":t.isReadOnly||void 0,"aria-disabled":t.isDisabled||void 0,"aria-multiselectable":"highlightedRange"in t||void 0,onKeyDown:w,onFocus:()=>t.setFocused(!0),onBlur:()=>t.setFocused(!1)}),headerProps:{"aria-hidden":!0},weekDays:Q}}function LQ(e){return e&&e.__esModule?e.default:e}function $Q(e,t,i){let{date:c,isDisabled:h}=e,{errorMessageId:_,selectedDateDescription:w}=DT.get(t),n=Eu(LQ(B_),"@react-aria/calendar"),k=ml({weekday:"long",day:"numeric",month:"long",year:"numeric",era:y_(c),timeZone:t.timeZone}),N=t.isSelected(c),B=t.isCellFocused(c);h=h||t.isCellDisabled(c);let F=t.isCellUnavailable(c),G=!h&&!F,Q=t.isValueInvalid&&!!("highlightedRange"in t?!t.anchorDate&&t.highlightedRange&&c.compare(t.highlightedRange.start)>=0&&c.compare(t.highlightedRange.end)<=0:t.value&&Ds(t.value,c));Q&&(N=!0),c=Bk(c,gV);let te=V.useMemo(()=>c.toDate(t.timeZone),[c,t.timeZone]),Y=JA(c,t.timeZone),oe=V.useMemo(()=>{let ue="";return"highlightedRange"in t&&t.value&&!t.anchorDate&&(Ds(c,t.value.start)||Ds(c,t.value.end))&&(ue=w+", "),ue+=k.format(te),Y?ue=n.format(N?"todayDateSelected":"todayDate",{date:ue}):N&&(ue=n.format("dateSelected",{date:ue})),t.minValue&&Ds(c,t.minValue)?ue+=", "+n.format("minimumDate"):t.maxValue&&Ds(c,t.maxValue)&&(ue+=", "+n.format("maximumDate")),ue},[k,te,n,N,Y,c,t,w]),de="";"anchorDate"in t&&B&&!t.isReadOnly&&G&&(t.anchorDate?de=n.format("finishRangeSelectionPrompt"):de=n.format("startRangeSelectionPrompt"));let ge=Gw(de),be=V.useRef(!1),pe=V.useRef(!1),we=V.useRef(void 0),{pressProps:ke,isPressed:Ae}=wu({shouldCancelOnPointerExit:"anchorDate"in t&&!!t.anchorDate,preventFocusOnPress:!0,isDisabled:!G||t.isReadOnly,onPressStart(ue){if(t.isReadOnly){t.setFocusedDate(c);return}if("highlightedRange"in t&&!t.anchorDate&&(ue.pointerType==="mouse"||ue.pointerType==="touch")){if(t.highlightedRange&&!Q){if(Ds(c,t.highlightedRange.start)){t.setAnchorDate(t.highlightedRange.end),t.setFocusedDate(c),t.setDragging(!0),pe.current=!0;return}else if(Ds(c,t.highlightedRange.end)){t.setAnchorDate(t.highlightedRange.start),t.setFocusedDate(c),t.setDragging(!0),pe.current=!0;return}}let De=()=>{t.setDragging(!0),we.current=void 0,t.selectDate(c),t.setFocusedDate(c),be.current=!0};ue.pointerType==="touch"?we.current=setTimeout(De,200):De()}},onPressEnd(){pe.current=!1,be.current=!1,clearTimeout(we.current),we.current=void 0},onPress(){!("anchorDate"in t)&&!t.isReadOnly&&(t.selectDate(c),t.setFocusedDate(c))},onPressUp(ue){if(!t.isReadOnly&&("anchorDate"in t&&we.current&&(t.selectDate(c),t.setFocusedDate(c)),"anchorDate"in t))if(pe.current)t.setAnchorDate(c);else if(t.anchorDate&&!be.current)t.selectDate(c),t.setFocusedDate(c);else if(ue.pointerType==="keyboard"&&!t.anchorDate){t.selectDate(c);let De=c.add({days:1});t.isInvalid(De)&&(De=c.subtract({days:1})),t.isInvalid(De)||t.setFocusedDate(De)}else ue.pointerType==="virtual"&&(t.selectDate(c),t.setFocusedDate(c))}}),re;h||(re=Ds(c,t.focusedDate)?0:-1),V.useEffect(()=>{B&&i.current&&(pl(i.current),Sm()!=="pointer"&&document.activeElement===i.current&&lw(i.current,{containingElement:Uw(i.current)}))},[B,i]);let Te=ml({day:"numeric",timeZone:t.timeZone,calendar:c.calendar.identifier}),se=V.useMemo(()=>Te.formatToParts(te).find(ue=>ue.type==="day").value,[Te,te]);return{cellProps:{role:"gridcell","aria-disabled":!G||void 0,"aria-selected":N||void 0,"aria-invalid":Q||void 0},buttonProps:xr(ke,{onFocus(){h||t.setFocusedDate(c)},tabIndex:re,role:"button","aria-disabled":!G||void 0,"aria-label":oe,"aria-invalid":Q||void 0,"aria-describedby":[Q?_:void 0,ge["aria-describedby"]].filter(Boolean).join(" ")||void 0,onPointerEnter(ue){"highlightDate"in t&&(ue.pointerType!=="touch"||t.isDragging)&&G&&t.highlightDate(c)},onPointerDown(ue){"releasePointerCapture"in ue.target&&ue.target.releasePointerCapture(ue.pointerId)},onContextMenu(ue){ue.preventDefault()}}),isPressed:Ae,isFocused:B,isSelected:N,isDisabled:h,isUnavailable:F,isOutsideVisibleRange:c.compare(t.visibleRange.start)<0||c.compare(t.visibleRange.end)>0,isInvalid:Q,formattedDate:se}}function m4(e,t,i){return t!=null&&e.compare(t)<0||i!=null&&e.compare(i)>0}function m6(e,t,i,c,h){let _={};for(let n in t)_[n]=Math.floor(t[n]/2),_[n]>0&&t[n]%2===0&&_[n]--;let w=qg(e,t,i).subtract(_);return x_(e,w,t,i,c,h)}function qg(e,t,i,c,h){let _=e;return t.years?_=tw(e):t.months?_=Jg(e):t.weeks&&(_=a_(e,i)),x_(e,_,t,i,c,h)}function qS(e,t,i,c,h){let _={...t};_.days?_.days--:_.weeks?_.weeks--:_.months?_.months--:_.years&&_.years--;let w=qg(e,t,i).subtract(_);return x_(e,w,t,i,c,h)}function x_(e,t,i,c,h,_){if(h&&e.compare(h)>=0){let w=ak(t,qg(yh(h),i,c));w&&(t=w)}if(_&&e.compare(_)<=0){let w=rk(t,qS(yh(_),i,c));w&&(t=w)}return t}function zg(e,t,i){if(t){let c=ak(e,yh(t));c&&(e=c)}if(i){let c=rk(e,yh(i));c&&(e=c)}return e}function NQ(e,t,i){if(!i)return e;for(;e.compare(t)>=0&&i(e);)e=e.subtract({days:1});return e.compare(t)>=0?e:null}function BQ(e){let t=V.useMemo(()=>new gd(e.locale),[e.locale]),i=V.useMemo(()=>t.resolvedOptions(),[t]),{locale:c,createCalendar:h,visibleDuration:_={months:1},minValue:w,maxValue:n,selectionAlignment:k,isDateUnavailable:N,pageBehavior:B="visible",firstDayOfWeek:F}=e,G=V.useMemo(()=>h(i.calendar),[h,i.calendar]);var Q;let[te,Y]=Xs(e.value,(Q=e.defaultValue)!==null&&Q!==void 0?Q:null,e.onChange),oe=V.useMemo(()=>te?Gi(yh(te),G):null,[te,G]),de=V.useMemo(()=>te&&"timeZone"in te?te.timeZone:i.timeZone,[te,i.timeZone]),ge=V.useMemo(()=>e.focusedValue?zg(Gi(yh(e.focusedValue),G),w,n):void 0,[e.focusedValue,G,w,n]),be=V.useMemo(()=>zg(e.defaultFocusedValue?Gi(yh(e.defaultFocusedValue),G):oe||Gi(Pm(de),G),w,n),[e.defaultFocusedValue,oe,de,G,w,n]),[pe,we]=Xs(ge,be,e.onFocusChange),[ke,Ae]=V.useState(()=>{switch(k){case"start":return qg(pe,_,c,w,n);case"end":return qS(pe,_,c,w,n);case"center":default:return m6(pe,_,c,w,n)}}),[re,Te]=V.useState(e.autoFocus||!1),se=V.useMemo(()=>{let Ke={..._};return Ke.days?Ke.days--:Ke.days=-1,ke.add(Ke)},[ke,_]),[ue,De]=V.useState(G.identifier);if(G.identifier!==ue){let Ke=Gi(pe,G);Ae(m6(Ke,_,c,w,n)),we(Ke),De(G.identifier)}m4(pe,w,n)?we(zg(pe,w,n)):pe.compare(ke)<0?Ae(qS(pe,_,c,w,n)):pe.compare(se)>0&&Ae(qg(pe,_,c,w,n));function ce(Ke){Ke=zg(Ke,w,n),we(Ke)}function je(Ke){if(!e.isDisabled&&!e.isReadOnly){let nt=Ke;if(nt===null){Y(null);return}if(nt=zg(nt,w,n),nt=NQ(nt,ke,N),!nt)return;nt=Gi(nt,(te==null?void 0:te.calendar)||new Bl),te&&"hour"in te?Y(te.set(nt)):Y(nt)}}let Le=V.useMemo(()=>oe?N&&N(oe)?!0:m4(oe,w,n):!1,[oe,N,w,n]),Re=e.isInvalid||e.validationState==="invalid"||Le,Ge=Re?"invalid":null,ze=V.useMemo(()=>B==="visible"?_:g4(_),[B,_]);var ot,Ee;return{isDisabled:(ot=e.isDisabled)!==null&&ot!==void 0?ot:!1,isReadOnly:(Ee=e.isReadOnly)!==null&&Ee!==void 0?Ee:!1,value:oe,setValue:je,visibleRange:{start:ke,end:se},minValue:w,maxValue:n,focusedDate:pe,timeZone:de,validationState:Ge,isValueInvalid:Re,setFocusedDate(Ke){ce(Ke),Te(!0)},focusNextDay(){ce(pe.add({days:1}))},focusPreviousDay(){ce(pe.subtract({days:1}))},focusNextRow(){_.days?this.focusNextPage():(_.weeks||_.months||_.years)&&ce(pe.add({weeks:1}))},focusPreviousRow(){_.days?this.focusPreviousPage():(_.weeks||_.months||_.years)&&ce(pe.subtract({weeks:1}))},focusNextPage(){let Ke=ke.add(ze);we(zg(pe.add(ze),w,n)),Ae(qg(x_(pe,Ke,ze,c,w,n),ze,c))},focusPreviousPage(){let Ke=ke.subtract(ze);we(zg(pe.subtract(ze),w,n)),Ae(qg(x_(pe,Ke,ze,c,w,n),ze,c))},focusSectionStart(){_.days?ce(ke):_.weeks?ce(a_(pe,c)):(_.months||_.years)&&ce(Jg(pe))},focusSectionEnd(){_.days?ce(se):_.weeks?ce(_V(pe,c)):(_.months||_.years)&&ce(ew(pe))},focusNextSection(Ke){if(!Ke&&!_.days){ce(pe.add(g4(_)));return}_.days?this.focusNextPage():_.weeks?ce(pe.add({months:1})):(_.months||_.years)&&ce(pe.add({years:1}))},focusPreviousSection(Ke){if(!Ke&&!_.days){ce(pe.subtract(g4(_)));return}_.days?this.focusPreviousPage():_.weeks?ce(pe.subtract({months:1})):(_.months||_.years)&&ce(pe.subtract({years:1}))},selectFocusedDate(){N&&N(pe)||je(pe)},selectDate(Ke){je(Ke)},isFocused:re,setFocused:Te,isInvalid(Ke){return m4(Ke,w,n)},isSelected(Ke){return oe!=null&&Ds(Ke,oe)&&!this.isCellDisabled(Ke)&&!this.isCellUnavailable(Ke)},isCellFocused(Ke){return re&&pe&&Ds(Ke,pe)},isCellDisabled(Ke){return e.isDisabled||Ke.compare(ke)<0||Ke.compare(se)>0||this.isInvalid(Ke)},isCellUnavailable(Ke){return e.isDateUnavailable?e.isDateUnavailable(Ke):!1},isPreviousVisibleRangeInvalid(){let Ke=ke.subtract({days:1});return Ds(Ke,ke)||this.isInvalid(Ke)},isNextVisibleRangeInvalid(){let Ke=se.add({days:1});return Ds(Ke,se)||this.isInvalid(Ke)},getDatesInWeek(Ke,nt=ke){let Xe=nt.add({weeks:Ke}),ut=[];Xe=a_(Xe,c,F);let Pt=Bw(Xe,c,F);for(let Ct=0;Ct<Pt;Ct++)ut.push(null);for(;ut.length<7;){ut.push(Xe);let Ct=Xe.add({days:1});if(Ds(Xe,Ct))break;Xe=Ct}for(;ut.length<7;)ut.push(null);return ut}}}function g4(e){let t={...e};for(let i in e)t[i]=1;return t}function jQ({buttonPickerProps:e,className:t,...i}){const{Component:c,slots:h,children:_,domRef:w,locale:n,minValue:k,maxValue:N,showHelper:B,firstDayOfWeek:F,weekdayStyle:G,visibleDuration:Q,baseProps:te,disableAnimation:Y,shouldFilterDOMProps:oe,isHeaderExpanded:de,visibleMonths:ge,createCalendar:be,showMonthAndYearPickers:pe,getPrevButtonProps:we,getNextButtonProps:ke,getErrorMessageProps:Ae,setIsHeaderExpanded:re,topContent:Te,bottomContent:se,errorMessage:ue,classNames:De,otherProps:ce}=MQ(i),je=V.useRef(null),Le=BQ({...i,locale:n,minValue:k,maxValue:N,visibleDuration:Q,createCalendar:!be||typeof be!="function"?ow:be}),{title:Re,calendarProps:Ge,prevButtonProps:ze,nextButtonProps:ot,errorMessageProps:Ee}=IQ(i,Le),Ke=Br(De==null?void 0:De.base,t),nt={...xr(e,{isDisabled:i.isDisabled}),onPress:qi(e==null?void 0:e.onPress,()=>re(!de))},Xe=(Pt={})=>({...te,Component:c,showHelper:B,firstDayOfWeek:F,topContent:Te,bottomContent:se,buttonPickerProps:nt,calendarRef:w,calendarProps:Ge,prevButtonProps:we(ze),nextButtonProps:ke(ot),errorMessageProps:Ae(Ee),className:h.base({class:Ke}),errorMessage:ue,...Wo(ce,{enabled:oe}),...Pt}),ut=V.useMemo(()=>({state:Le,slots:h,headerRef:je,weekdayStyle:G,isHeaderExpanded:de,setIsHeaderExpanded:re,visibleMonths:ge,classNames:De,showMonthAndYearPickers:pe,disableAnimation:Y}),[Le,h,De,G,de,re,ge,Y,pe]);return{Component:c,children:_,domRef:w,context:ut,state:Le,slots:h,title:Re,classNames:De,getBaseCalendarProps:Xe}}var OQ=e=>b.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 16 16",width:"1em",...e,children:b.jsx("path",{d:"M10 3.33334L6 8.00001L10 12.6667",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})}),FQ=e=>b.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 16 16",width:"1em",...e,children:b.jsx("path",{d:"M6 3.33334L10 8.00001L6 12.6667",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})}),VQ=e=>b.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:b.jsx("path",{d:"M19 9L12 15L5 9",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})}),[UQ,o2]=Sh({name:"CalendarContext",strict:!0,errorMessage:"useContext: `context` is undefined. Seems you forgot to wrap component within the CalendarProvider"}),GQ={type:"spring",bounce:0,duration:.3},wL={enter:e=>({x:`${e*100}%`}),center:{x:"0%"},exit:e=>({x:`${e*-100}%`})};function HQ(e){const{direction:t,date:i,currentMonth:c,buttonPickerProps:h}=e,{state:_,slots:w,headerRef:n,showMonthAndYearPickers:k,isHeaderExpanded:N,setIsHeaderExpanded:B,disableAnimation:F,classNames:G}=o2(),te=ml({month:"long",era:c.calendar.identifier==="gregory"&&c.era==="BC"?"short":void 0,calendar:c.calendar.identifier,timeZone:_.timeZone,year:"numeric"}).format(i.toDate(_.timeZone)),Y=b.jsx(b.Fragment,{children:F?b.jsx("span",{"aria-hidden":!0,className:w==null?void 0:w.title({class:G==null?void 0:G.title}),"data-slot":"title",children:te},c.month):b.jsx(jl.span,{animate:"center","aria-hidden":!0,className:w==null?void 0:w.title({class:G==null?void 0:G.title}),custom:t,"data-slot":"title",exit:"exit",initial:"enter",variants:N?{}:wL,children:te},c.month)}),oe={ref:n,className:w==null?void 0:w.header({class:G==null?void 0:G.header}),"data-slot":"header"},de=V.useCallback(ge=>{ge.key==="Escape"&&(ge.preventDefault(),ge.stopPropagation(),B==null||B(!1))},[B]);return k?b.jsx($r,{...oe,"aria-label":"switch to year and month view",disableAnimation:F,endContent:b.jsx(VQ,{className:"chevron-icon"}),onKeyDown:de,...h,children:Y}):b.jsx("header",{...oe,children:Y})}function qQ(e){const{state:t,slots:i,isPickerVisible:c,currentMonth:h,classNames:_,firstDayOfWeek:w,...n}=e,k=V.useRef(null),{cellProps:N,buttonProps:B,isPressed:F,isSelected:G,isDisabled:Q,isFocused:te,isInvalid:Y,formattedDate:oe}=$Q({...n,isDisabled:!iD(n.date,h)||c},t,k),de=t.isCellUnavailable(n.date),ge=!Q&&!Y&&t.isCellUnavailable(n.date.add({days:1})),be=!Q&&!Y&&t.isCellUnavailable(n.date.subtract({days:1})),pe="highlightedRange"in t&&t.highlightedRange,we=G&&pe?Ds(n.date,pe.start):!1,ke=G&&pe?Ds(n.date,pe.end):!1,{locale:Ae}=Ms(),re=Bw(n.date,Ae,w),Te=G&&(be||re===0||n.date.day===1),se=G&&(ge||re===6||n.date.day===h.calendar.getDaysInMonth(h)),{focusProps:ue,isFocusVisible:De}=Ac(),{hoverProps:ce,isHovered:je}=wo({isDisabled:Q||de||t.isReadOnly});return b.jsx("td",{className:i==null?void 0:i.cell({class:_==null?void 0:_.cell}),"data-slot":"cell",...N,children:b.jsx("span",{...xr(B,ce,ue),ref:k,className:i==null?void 0:i.cellButton({class:_==null?void 0:_.cellButton}),"data-disabled":Vt(Q&&!Y),"data-focus-visible":Vt(te&&De),"data-hover":Vt(je),"data-invalid":Vt(Y),"data-outside-month":Vt(!iD(n.date,h)),"data-pressed":Vt(F&&!t.isReadOnly),"data-range-end":Vt(se),"data-range-selection":Vt(G&&"highlightedRange"in t),"data-range-start":Vt(Te),"data-readonly":Vt(t.isReadOnly),"data-selected":Vt(G),"data-selection-end":Vt(ke),"data-selection-start":Vt(we),"data-today":Vt(JA(n.date,t.timeZone)),"data-unavailable":Vt(de),children:b.jsx("span",{children:oe})})})}function WQ(e){const{startDate:t,direction:i,currentMonth:c,firstDayOfWeek:h}=e,{locale:_}=Ms(),w=SV(t,_,h),{state:n,slots:k,weekdayStyle:N,isHeaderExpanded:B,disableAnimation:F,classNames:G}=o2(),{gridProps:Q,headerProps:te,weekDays:Y}=zQ({...e,weekdayStyle:N,endDate:ew(t),firstDayOfWeek:h},n),oe=[...new Array(w).keys()].map(de=>b.jsx("tr",{className:k==null?void 0:k.gridBodyRow({class:G==null?void 0:G.gridBodyRow}),"data-slot":"grid-body-row",inert:jA(!!B),children:n.getDatesInWeek(de,t).map((ge,be)=>ge?b.jsx(qQ,{classNames:G,currentMonth:t,date:ge,firstDayOfWeek:h,isPickerVisible:B,slots:k,state:n},be):b.jsx("td",{},be))},de));return b.jsxs("table",{...Q,"aria-hidden":Vt(B),className:k==null?void 0:k.grid({class:G==null?void 0:G.grid}),"data-slot":"grid",tabIndex:-1,children:[b.jsx("thead",{...te,className:k==null?void 0:k.gridHeader({class:G==null?void 0:G.gridHeader}),"data-slot":"grid-header",children:b.jsx("tr",{className:k==null?void 0:k.gridHeaderRow({class:G==null?void 0:G.gridHeaderRow}),"data-slot":"grid-header-row",children:Y.map((de,ge)=>b.jsx("th",{className:k==null?void 0:k.gridHeaderCell({class:G==null?void 0:G.gridHeaderCell}),"data-slot":"grid-header-cell",children:b.jsx("span",{children:de})},ge))})}),F?b.jsx("tbody",{className:k==null?void 0:k.gridBody({class:G==null?void 0:G.gridBody}),"data-slot":"grid-body",tabIndex:B?-1:0,children:oe},c):b.jsx(jl.tbody,{animate:"center",className:k==null?void 0:k.gridBody({class:G==null?void 0:G.gridBody}),custom:i,"data-slot":"grid-body",exit:"exit",initial:"enter",variants:wL,children:oe},c)]})}function KQ(e,t){const i=[];if(!e||!t)return i;let c=tw(e);for(;c.compare(t)<=0;)i.push(c),c=tw(c.add({years:1}));return i}function ZQ(e,t){return e.add({months:t})}function XQ(e){const i=[tw(e)];for(;i.length<12;){const c=i[i.length-1];i.push(ZQ(c,1))}return i}var g6=200;function YQ(e){var t;const{date:i,currentMonth:c}=e,{slots:h,state:_,headerRef:w,isHeaderExpanded:n,setIsHeaderExpanded:k,classNames:N}=o2(),B=V.useRef(null),F=V.useRef(null),G=V.useRef(null),Q=V.useRef(),te=V.useRef(),Y=ml({month:"long",era:c.calendar.identifier==="gregory"&&c.era==="BC"?"short":void 0,calendar:c.calendar.identifier,timeZone:_.timeZone}),oe=ml({year:"numeric",timeZone:_.timeZone}),de=(t=KQ(_.minValue,_.maxValue))==null?void 0:t.map(Te=>({value:Te.year,label:oe.format(Te.toDate(_.timeZone))})),ge=XQ(i).map(Te=>({value:Te.month,label:Y.format(Te.toDate(_.timeZone))}));function be(Te){return Te.current||(Te.current=new Map),Te.current}function pe(Te,se,ue){const De=be(ue==="months"?Q:te);Te?De.set(se,Te):De.delete(se)}const we=V.useCallback((Te,se,ue)=>{if(!(Te.target instanceof HTMLElement))return;const De=be(ue==="months"?Q:te),je=Array.from(De.values()).find(Ge=>{const ze=Ge.getBoundingClientRect(),ot=se==null?void 0:se.getBoundingClientRect();return ot?BF(ze,ot):!1}),Le=Number(je==null?void 0:je.getAttribute("data-value"));if(!Le)return;let Re=_.focusedDate.set(ue==="months"?{month:Le}:{year:Le});_.setFocusedDate(Re)},[_,n]);V.useEffect(()=>{n&&(ke(i.month,"months",!1),ke(i.year,"years",!1))},[n]),V.useEffect(()=>{const Te=G.current,se=F.current,ue=B.current;if(!ue)return;const De=JC(je=>we(je,ue,"months"),g6),ce=JC(je=>we(je,ue,"years"),g6);return Te==null||Te.addEventListener("scroll",De),se==null||se.addEventListener("scroll",ce),()=>{De&&(Te==null||Te.removeEventListener("scroll",De)),ce&&(se==null||se.removeEventListener("scroll",ce))}},[we]);function ke(Te,se,ue=!0){const De=se==="months"?Q:te,ce=se==="months"?G:F,Le=be(De).get(Te);Le&&cJ(Le,{scrollMode:"always",behavior:ue?"smooth":"auto",boundary:ce.current})}const Ae=V.useCallback((Te,se)=>{const ue=Te.target,De=Number(ue.getAttribute("data-value"));De&&ke(De,se)},[_]),re=V.useCallback((Te,se,ue)=>{var De;const ce=be(ue==="months"?Q:te);if(!ce.get(se))return;let Le=se;switch(Te.key){case"ArrowDown":Le=se+1;break;case"ArrowUp":Le=se-1;break;case"Home":Le=0;break;case"End":Le=ge.length-1;break;case"PageUp":Le=se-3;break;case"PageDown":Le=se+3;break;case"Escape":case"Enter":case" ":k==null||k(!1),(De=w==null?void 0:w.current)==null||De.focus();return}const Re=ce.get(Le);Re==null||Re.focus()},[_]);return{state:_,slots:h,classNames:N,years:de,months:ge,highlightRef:B,monthsListRef:G,yearsListRef:F,getItemRef:pe,isHeaderExpanded:n,onPickerItemPressed:Ae,onPickerItemKeyDown:re}}var WS=V.forwardRef(({children:e,autoFocus:t,isDisabled:i,onKeyDown:c,...h},_)=>{const w=Nn(_),{buttonProps:n,isPressed:k}=r2({elementType:"button",isDisabled:i,onKeyDown:c,...h},w),{isFocusVisible:N,isFocused:B,focusProps:F}=Ac({autoFocus:t}),{isHovered:G,hoverProps:Q}=wo({isDisabled:i});return b.jsx("button",{ref:w,"data-disabled":Vt(i),"data-focus":Vt(B),"data-focus-visible":Vt(N),"data-hover":Vt(G),"data-pressed":Vt(k),"data-slot":"picker-item",...xr(F,Q,n,Wo(h,{enabled:!0})),children:e})});WS.displayName="CalendarPickerItem";var y6=3;function JQ(e){const{state:t,slots:i,months:c,years:h,highlightRef:_,monthsListRef:w,yearsListRef:n,classNames:k,getItemRef:N,isHeaderExpanded:B,onPickerItemPressed:F,onPickerItemKeyDown:G}=YQ(e),Q=V.useCallback(Y=>b.jsx("div",{"aria-hidden":"true",className:i==null?void 0:i.pickerItem({class:k==null?void 0:k.pickerItem}),"data-slot":"picker-item-empty",tabIndex:-1,...Y,children:""}),[i,k==null?void 0:k.pickerItem]),te=V.useCallback(({children:Y})=>b.jsxs(b.Fragment,{children:[Array.from({length:y6},(oe,de)=>b.jsx(Q,{},de)),Y,Array.from({length:y6},(oe,de)=>b.jsx(Q,{},de))]}),[Q]);return b.jsxs("div",{className:i==null?void 0:i.pickerWrapper({class:k==null?void 0:k.pickerWrapper}),"data-slot":"picker-wrapper",inert:jA(!B),children:[b.jsx("div",{ref:_,className:i==null?void 0:i.pickerHighlight({class:k==null?void 0:k.pickerHighlight}),"data-slot":"picker-highlight"}),b.jsx("div",{ref:w,className:i==null?void 0:i.pickerMonthList({class:k==null?void 0:k.pickerMonthList}),"data-slot":"picker-month-list",children:b.jsx(te,{children:c.map(Y=>{var oe;return b.jsx(WS,{ref:de=>N(de,Y.value,"months"),className:i==null?void 0:i.pickerItem({class:k==null?void 0:k.pickerItem}),"data-value":Y.value,tabIndex:!B||((oe=t.focusedDate)==null?void 0:oe.month)!==Y.value?-1:0,onKeyDown:de=>G(de,Y.value,"months"),onPress:de=>F(de,"months"),children:Y.label},`picker-month-${Y.value}`)})})}),b.jsx("div",{ref:n,className:i==null?void 0:i.pickerYearList({class:k==null?void 0:k.pickerYearList}),"data-slot":"picker-year-list",children:b.jsx(te,{children:h.map(Y=>{var oe;return b.jsx(WS,{ref:de=>N(de,Y.value,"years"),className:i==null?void 0:i.pickerItem({class:k==null?void 0:k.pickerItem}),"data-value":Y.value,tabIndex:!B||((oe=t.focusedDate)==null?void 0:oe.year)!==Y.value?-1:0,onKeyDown:de=>G(de,Y.value,"years"),onPress:de=>F(de,"years"),children:Y.label},`picker-year-${Y.value}`)})})})]})}var QQ=()=>km(()=>import("./index-BxFlUVnv.js"),[]).then(e=>e.default),SL=V.forwardRef((e,t)=>b.jsx("div",{ref:t,...e}));SL.displayName="HeroUI - PopLayoutWrapper";function eee(e){const{Component:t="div",showHelper:i,topContent:c,bottomContent:h,calendarProps:_,nextButtonProps:w,prevButtonProps:n,buttonPickerProps:k,errorMessageProps:N,calendarRef:B,errorMessage:F,firstDayOfWeek:G,...Q}=e,{state:te,slots:Y,visibleMonths:oe,showMonthAndYearPickers:de,disableAnimation:ge,classNames:be}=o2(),[pe,we]=V.useState(0),{direction:ke}=Ms(),Ae=te.visibleRange.start,re=[],Te=[],se=ke==="rtl";for(let De=0;De<oe;De++){let ce=Ae.add({months:De});re.push(b.jsxs(V.Fragment,{children:[De===0&&b.jsx($r,{...se?w:n,onPress:qi(se?w.onPress:n.onPress,()=>we(-1)),children:b.jsx(OQ,{})}),b.jsx(HQ,{buttonPickerProps:k,currentMonth:Ae,date:ce,direction:pe}),De===oe-1&&b.jsx($r,{...se?n:w,onPress:qi(se?n.onPress:w.onPress,()=>we(1)),children:b.jsx(FQ,{})})]},`calendar-header-${De}`));const je=V.createElement(WQ,{...e,key:`calendar-month-${De}`,currentMonth:Ae.month,direction:pe,firstDayOfWeek:G,startDate:ce});Te.push(de?b.jsxs(V.Fragment,{children:[je,b.jsx(JQ,{currentMonth:Ae,date:ce})]},`calendar-month-with-pickers-${De}`):je)}const ue=b.jsxs(b.Fragment,{children:[b.jsx("div",{className:Y==null?void 0:Y.headerWrapper({class:be==null?void 0:be.headerWrapper}),"data-slot":"header-wrapper",children:re},"header-wrapper"),b.jsx("div",{className:Y==null?void 0:Y.gridWrapper({class:be==null?void 0:be.gridWrapper}),"data-slot":"grid-wrapper",children:Te},"grid-wrapper")]});return b.jsxs(t,{...xr(_,Q),ref:B,children:[c,b.jsx(hS,{children:b.jsx("h2",{children:_["aria-label"]})}),ge?b.jsx("div",{className:Y==null?void 0:Y.content({class:be==null?void 0:be.content}),"data-slot":"content",children:ue}):b.jsx(X8,{className:Y==null?void 0:Y.content({class:be==null?void 0:be.content}),"data-slot":"content",children:b.jsx(Uf,{custom:pe,initial:!1,mode:"popLayout",children:b.jsx(SL,{children:b.jsx(tI,{transition:GQ,children:b.jsx(Tu,{features:QQ,children:ue})})})})}),b.jsx(hS,{children:b.jsx("button",{"aria-label":w["aria-label"],disabled:w.isDisabled,tabIndex:-1,onClick:()=>te.focusNextPage()})}),te.isValueInvalid&&i&&b.jsx("div",{className:Y==null?void 0:Y.helperWrapper({class:be==null?void 0:be.helperWrapper}),"data-slot":"helper-wrapper",children:b.jsx("span",{...N,className:Y==null?void 0:Y.errorMessage({class:be==null?void 0:be.errorMessage}),"data-slot":"error-message",children:F||"Selected date unavailable."})}),h]})}var tee=Bn(function(t,i){const{context:c,getBaseCalendarProps:h}=jQ({...t,ref:i});return b.jsx(UQ,{value:c,children:b.jsx(eee,{...h()})})}),ree=tee,TL={};TL={calendar:"",day:"",dayPeriod:"/",endDate:" ",era:"",hour:"",minute:"",month:"",second:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>`  : ${e.startDate}  ${e.endDate}`,selectedTimeDescription:e=>` : ${e.time}`,startDate:" ",timeZoneName:"",weekday:"",year:""};var EL={};EL={calendar:"",day:"",dayPeriod:"../..",endDate:" ",era:"",hour:"",minute:"",month:"",second:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>` : ${e.startDate}  ${e.endDate}`,selectedTimeDescription:e=>` : ${e.time}`,startDate:" ",timeZoneName:" ",weekday:"  ",year:""};var CL={};CL={calendar:"Kalend",day:"den",dayPeriod:"st dne",endDate:"Konen datum",era:"letopoet",hour:"hodina",minute:"minuta",month:"msc",second:"sekunda",selectedDateDescription:e=>`Vybran datum: ${e.date}`,selectedRangeDescription:e=>`Vybran obdob: ${e.startDate} a ${e.endDate}`,selectedTimeDescription:e=>`Vybran as: ${e.time}`,startDate:"Poten datum",timeZoneName:"asov psmo",weekday:"den v tdnu",year:"rok"};var DL={};DL={calendar:"Kalender",day:"dag",dayPeriod:"AM/PM",endDate:"Slutdato",era:"ra",hour:"time",minute:"minut",month:"mned",second:"sekund",selectedDateDescription:e=>`Valgt dato: ${e.date}`,selectedRangeDescription:e=>`Valgt interval: ${e.startDate} til ${e.endDate}`,selectedTimeDescription:e=>`Valgt tidspunkt: ${e.time}`,startDate:"Startdato",timeZoneName:"tidszone",weekday:"ugedag",year:"r"};var PL={};PL={calendar:"Kalender",day:"Tag",dayPeriod:"Tageshlfte",endDate:"Enddatum",era:"Epoche",hour:"Stunde",minute:"Minute",month:"Monat",second:"Sekunde",selectedDateDescription:e=>`Ausgewhltes Datum: ${e.date}`,selectedRangeDescription:e=>`Ausgewhlter Bereich: ${e.startDate} bis ${e.endDate}`,selectedTimeDescription:e=>`Ausgewhlte Zeit: ${e.time}`,startDate:"Anfangsdatum",timeZoneName:"Zeitzone",weekday:"Wochentag",year:"Jahr"};var ML={};ML={calendar:"",day:"",dayPeriod:"../..",endDate:" ",era:"",hour:"",minute:"",month:"",second:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>` : ${e.startDate}  ${e.endDate}`,selectedTimeDescription:e=>` : ${e.time}`,startDate:" ",timeZoneName:" ",weekday:"",year:""};var AL={};AL={era:"era",year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",dayPeriod:"AM/PM",calendar:"Calendar",startDate:"Start Date",endDate:"End Date",weekday:"day of the week",timeZoneName:"time zone",selectedDateDescription:e=>`Selected Date: ${e.date}`,selectedRangeDescription:e=>`Selected Range: ${e.startDate} to ${e.endDate}`,selectedTimeDescription:e=>`Selected Time: ${e.time}`};var kL={};kL={calendar:"Calendario",day:"da",dayPeriod:"a.m./p.m.",endDate:"Fecha final",era:"era",hour:"hora",minute:"minuto",month:"mes",second:"segundo",selectedDateDescription:e=>`Fecha seleccionada: ${e.date}`,selectedRangeDescription:e=>`Rango seleccionado: ${e.startDate} a ${e.endDate}`,selectedTimeDescription:e=>`Hora seleccionada: ${e.time}`,startDate:"Fecha de inicio",timeZoneName:"zona horaria",weekday:"da de la semana",year:"ao"};var RL={};RL={calendar:"Kalender",day:"pev",dayPeriod:"enne/prast lunat",endDate:"Lppkuupev",era:"ajastu",hour:"tund",minute:"minut",month:"kuu",second:"sekund",selectedDateDescription:e=>`Valitud kuupev: ${e.date}`,selectedRangeDescription:e=>`Valitud vahemik: ${e.startDate} kuni ${e.endDate}`,selectedTimeDescription:e=>`Valitud aeg: ${e.time}`,startDate:"Alguskuupev",timeZoneName:"ajavnd",weekday:"ndalapev",year:"aasta"};var IL={};IL={calendar:"Kalenteri",day:"piv",dayPeriod:"vuorokaudenaika",endDate:"Pttymispiv",era:"aikakausi",hour:"tunti",minute:"minuutti",month:"kuukausi",second:"sekunti",selectedDateDescription:e=>`Valittu pivmr: ${e.date}`,selectedRangeDescription:e=>`Valittu aikavli: ${e.startDate}  ${e.endDate}`,selectedTimeDescription:e=>`Valittu aika: ${e.time}`,startDate:"Alkamispiv",timeZoneName:"aikavyhyke",weekday:"viikonpiv",year:"vuosi"};var zL={};zL={calendar:"Calendrier",day:"jour",dayPeriod:"cadran",endDate:"Date de fin",era:"re",hour:"heure",minute:"minute",month:"mois",second:"seconde",selectedDateDescription:e=>`Date slectionne: ${e.date}`,selectedRangeDescription:e=>`Plage slectionne: ${e.startDate} au ${e.endDate}`,selectedTimeDescription:e=>`Heure choisie: ${e.time}`,startDate:"Date de dbut",timeZoneName:"fuseau horaire",weekday:"jour de la semaine",year:"anne"};var LL={};LL={calendar:" ",day:"",dayPeriod:"/",endDate:" ",era:"",hour:"",minute:"",month:"",second:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>` : ${e.startDate}  ${e.endDate}`,selectedTimeDescription:e=>` : ${e.time}`,startDate:" ",timeZoneName:" ",weekday:" ",year:""};var $L={};$L={calendar:"Kalendar",day:"dan",dayPeriod:"AM/PM",endDate:"Datum zavretka",era:"era",hour:"sat",minute:"minuta",month:"mjesec",second:"sekunda",selectedDateDescription:e=>`Odabrani datum: ${e.date}`,selectedRangeDescription:e=>`Odabrani raspon: ${e.startDate} do ${e.endDate}`,selectedTimeDescription:e=>`Odabrano vrijeme: ${e.time}`,startDate:"Datum poetka",timeZoneName:"vremenska zona",weekday:"dan u tjednu",year:"godina"};var NL={};NL={calendar:"Naptr",day:"nap",dayPeriod:"napszak",endDate:"Befejez dtum",era:"ra",hour:"ra",minute:"perc",month:"hnap",second:"msodperc",selectedDateDescription:e=>`Kijellt dtum: ${e.date}`,selectedRangeDescription:e=>`Kijellt tartomny: ${e.startDate}${e.endDate}`,selectedTimeDescription:e=>`Kijellt id: ${e.time}`,startDate:"Kezd dtum",timeZoneName:"idzna",weekday:"ht napja",year:"v"};var BL={};BL={calendar:"Calendario",day:"giorno",dayPeriod:"AM/PM",endDate:"Data finale",era:"era",hour:"ora",minute:"minuto",month:"mese",second:"secondo",selectedDateDescription:e=>`Data selezionata: ${e.date}`,selectedRangeDescription:e=>`Intervallo selezionato: da ${e.startDate} a ${e.endDate}`,selectedTimeDescription:e=>`Ora selezionata: ${e.time}`,startDate:"Data iniziale",timeZoneName:"fuso orario",weekday:"giorno della settimana",year:"anno"};var jL={};jL={calendar:"",day:"",dayPeriod:"/",endDate:"",era:"",hour:"",minute:"",month:"",second:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>` : ${e.startDate}  ${e.endDate}`,selectedTimeDescription:e=>` : ${e.time}`,startDate:"",timeZoneName:"",weekday:"",year:""};var OL={};OL={calendar:"",day:"",dayPeriod:"/",endDate:"",era:"",hour:"",minute:"",month:"",second:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>` : ${e.startDate} ~ ${e.endDate}`,selectedTimeDescription:e=>` : ${e.time}`,startDate:"",timeZoneName:"",weekday:"",year:""};var FL={};FL={calendar:"Kalendorius",day:"diena",dayPeriod:"iki piet / po piet",endDate:"Pabaigos data",era:"era",hour:"valanda",minute:"minut",month:"mnuo",second:"sekund",selectedDateDescription:e=>`Pasirinkta data: ${e.date}`,selectedRangeDescription:e=>`Pasirinktas intervalas: nuo ${e.startDate} iki ${e.endDate}`,selectedTimeDescription:e=>`Pasirinktas laikas: ${e.time}`,startDate:"Pradios data",timeZoneName:"laiko juosta",weekday:"savaits diena",year:"metai"};var VL={};VL={calendar:"Kalendrs",day:"diena",dayPeriod:"priekpusdien/pcpusdien",endDate:"Beigu datums",era:"ra",hour:"stundas",minute:"mintes",month:"mnesis",second:"sekundes",selectedDateDescription:e=>`Atlastais datums: ${e.date}`,selectedRangeDescription:e=>`Atlastais diapazons: no ${e.startDate} ldz ${e.endDate}`,selectedTimeDescription:e=>`Atlastais laiks: ${e.time}`,startDate:"Skuma datums",timeZoneName:"laika josla",weekday:"nedas diena",year:"gads"};var UL={};UL={calendar:"Kalender",day:"dag",dayPeriod:"a.m./p.m.",endDate:"Sluttdato",era:"tidsalder",hour:"time",minute:"minutt",month:"mned",second:"sekund",selectedDateDescription:e=>`Valgt dato: ${e.date}`,selectedRangeDescription:e=>`Valgt omrde: ${e.startDate} til ${e.endDate}`,selectedTimeDescription:e=>`Valgt tid: ${e.time}`,startDate:"Startdato",timeZoneName:"tidssone",weekday:"ukedag",year:"r"};var GL={};GL={calendar:"Kalender",day:"dag",dayPeriod:"a.m./p.m.",endDate:"Einddatum",era:"tijdperk",hour:"uur",minute:"minuut",month:"maand",second:"seconde",selectedDateDescription:e=>`Geselecteerde datum: ${e.date}`,selectedRangeDescription:e=>`Geselecteerd bereik: ${e.startDate} tot ${e.endDate}`,selectedTimeDescription:e=>`Geselecteerde tijd: ${e.time}`,startDate:"Startdatum",timeZoneName:"tijdzone",weekday:"dag van de week",year:"jaar"};var HL={};HL={calendar:"Kalendarz",day:"dzie",dayPeriod:"rano / po poudniu / wieczorem",endDate:"Data kocowa",era:"era",hour:"godzina",minute:"minuta",month:"miesic",second:"sekunda",selectedDateDescription:e=>`Wybrana data: ${e.date}`,selectedRangeDescription:e=>`Wybrany zakres: ${e.startDate} do ${e.endDate}`,selectedTimeDescription:e=>`Wybrany czas: ${e.time}`,startDate:"Data pocztkowa",timeZoneName:"strefa czasowa",weekday:"dzie tygodnia",year:"rok"};var qL={};qL={calendar:"Calendrio",day:"dia",dayPeriod:"AM/PM",endDate:"Data final",era:"era",hour:"hora",minute:"minuto",month:"ms",second:"segundo",selectedDateDescription:e=>`Data selecionada: ${e.date}`,selectedRangeDescription:e=>`Intervalo selecionado: ${e.startDate} a ${e.endDate}`,selectedTimeDescription:e=>`Hora selecionada: ${e.time}`,startDate:"Data inicial",timeZoneName:"fuso horrio",weekday:"dia da semana",year:"ano"};var WL={};WL={calendar:"Calendrio",day:"dia",dayPeriod:"am/pm",endDate:"Data de Trmino",era:"era",hour:"hora",minute:"minuto",month:"ms",second:"segundo",selectedDateDescription:e=>`Data selecionada: ${e.date}`,selectedRangeDescription:e=>`Intervalo selecionado: ${e.startDate} a ${e.endDate}`,selectedTimeDescription:e=>`Hora selecionada: ${e.time}`,startDate:"Data de Incio",timeZoneName:"fuso horrio",weekday:"dia da semana",year:"ano"};var KL={};KL={calendar:"Calendar",day:"zi",dayPeriod:"a.m/p.m.",endDate:"Dat final",era:"er",hour:"or",minute:"minut",month:"lun",second:"secund",selectedDateDescription:e=>`Dat selectat: ${e.date}`,selectedRangeDescription:e=>`Interval selectat: de la ${e.startDate} pn la ${e.endDate}`,selectedTimeDescription:e=>`Ora selectat: ${e.time}`,startDate:"Dat nceput",timeZoneName:"fus orar",weekday:"ziua din sptmn",year:"an"};var ZL={};ZL={calendar:"",day:"",dayPeriod:"AM/PM",endDate:" ",era:"",hour:"",minute:"",month:"",second:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>` :  ${e.startDate}  ${e.endDate}`,selectedTimeDescription:e=>` : ${e.time}`,startDate:" ",timeZoneName:" ",weekday:" ",year:""};var XL={};XL={calendar:"Kalendr",day:"de",dayPeriod:"AM/PM",endDate:"Dtum ukonenia",era:"letopoet",hour:"hodina",minute:"minta",month:"mesiac",second:"sekunda",selectedDateDescription:e=>`Vybrat dtum: ${e.date}`,selectedRangeDescription:e=>`Vybrat rozsah: od ${e.startDate} do ${e.endDate}`,selectedTimeDescription:e=>`Vybrat as: ${e.time}`,startDate:"Dtum zaatia",timeZoneName:"asov psmo",weekday:"de tda",year:"rok"};var YL={};YL={calendar:"Koledar",day:"dan",dayPeriod:"dop/pop",endDate:"Datum konca",era:"doba",hour:"ura",minute:"minuta",month:"mesec",second:"sekunda",selectedDateDescription:e=>`Izbrani datum: ${e.date}`,selectedRangeDescription:e=>`Izbrano obmoje: ${e.startDate} do ${e.endDate}`,selectedTimeDescription:e=>`Izbrani as: ${e.time}`,startDate:"Datum zaetka",timeZoneName:"asovni pas",weekday:"dan v tednu",year:"leto"};var JL={};JL={calendar:"Kalendar",day:"",dayPeriod:" / ",endDate:"Datum zavretka",era:"",hour:"",minute:"",month:"",second:"",selectedDateDescription:e=>`Izabrani datum: ${e.date}`,selectedRangeDescription:e=>`Izabrani opseg: od ${e.startDate} do ${e.endDate}`,selectedTimeDescription:e=>`Izabrano vreme: ${e.time}`,startDate:"Datum poetka",timeZoneName:" ",weekday:"  ",year:""};var QL={};QL={calendar:"Kalender",day:"dag",dayPeriod:"fm/em",endDate:"Slutdatum",era:"era",hour:"timme",minute:"minut",month:"mnad",second:"sekund",selectedDateDescription:e=>`Valt datum: ${e.date}`,selectedRangeDescription:e=>`Valt intervall: ${e.startDate} till ${e.endDate}`,selectedTimeDescription:e=>`Vald tid: ${e.time}`,startDate:"Startdatum",timeZoneName:"tidszon",weekday:"veckodag",year:"r"};var e$={};e$={calendar:"Takvim",day:"gn",dayPeriod:"/S",endDate:"Biti Tarihi",era:"a",hour:"saat",minute:"dakika",month:"ay",second:"saniye",selectedDateDescription:e=>`Seilen Tarih: ${e.date}`,selectedRangeDescription:e=>`Seilen Aralk: ${e.startDate} - ${e.endDate}`,selectedTimeDescription:e=>`Seilen Zaman: ${e.time}`,startDate:"Balang Tarihi",timeZoneName:"saat dilimi",weekday:"haftann gn",year:"yl"};var t$={};t$={calendar:"",day:"",dayPeriod:"/",endDate:" ",era:"",hour:"",minute:"",month:"",second:"",selectedDateDescription:e=>` : ${e.date}`,selectedRangeDescription:e=>` : ${e.startDate}  ${e.endDate}`,selectedTimeDescription:e=>` : ${e.time}`,startDate:" ",timeZoneName:" ",weekday:" ",year:""};var r$={};r$={calendar:"",day:"",dayPeriod:"/",endDate:"",era:"",hour:"",minute:"",month:"",second:"",selectedDateDescription:e=>`${e.date}`,selectedRangeDescription:e=>`${e.startDate}  ${e.endDate}`,selectedTimeDescription:e=>`${e.time}`,startDate:"",timeZoneName:"",weekday:"",year:""};var a$={};a$={calendar:"",day:"",dayPeriod:"/",endDate:"",era:"",hour:"",minute:"",month:"",second:"",selectedDateDescription:e=>`${e.date}`,selectedRangeDescription:e=>`${e.startDate}  ${e.endDate}`,selectedTimeDescription:e=>`${e.time}`,startDate:"",timeZoneName:"",weekday:"",year:""};var l2={};l2={"ar-AE":TL,"bg-BG":EL,"cs-CZ":CL,"da-DK":DL,"de-DE":PL,"el-GR":ML,"en-US":AL,"es-ES":kL,"et-EE":RL,"fi-FI":IL,"fr-FR":zL,"he-IL":LL,"hr-HR":$L,"hu-HU":NL,"it-IT":BL,"ja-JP":jL,"ko-KR":OL,"lt-LT":FL,"lv-LV":VL,"nb-NO":UL,"nl-NL":GL,"pl-PL":HL,"pt-BR":qL,"pt-PT":WL,"ro-RO":KL,"ru-RU":ZL,"sk-SK":XL,"sl-SI":YL,"sr-SP":JL,"sv-SE":QL,"tr-TR":e$,"uk-UA":t$,"zh-CN":r$,"zh-TW":a$};function n$(e,t,i){let{direction:c}=Ms(),h=V.useMemo(()=>C5(t),[t]),_=k=>{if(k.currentTarget.contains(k.target)&&(k.altKey&&(k.key==="ArrowDown"||k.key==="ArrowUp")&&"setOpen"in e&&(k.preventDefault(),k.stopPropagation(),e.setOpen(!0)),!i))switch(k.key){case"ArrowLeft":if(k.preventDefault(),k.stopPropagation(),c==="rtl"){if(t.current){let N=k.target,B=x6(t.current,N.getBoundingClientRect().left,-1);B&&B.focus()}}else h.focusPrevious();break;case"ArrowRight":if(k.preventDefault(),k.stopPropagation(),c==="rtl"){if(t.current){let N=k.target,B=x6(t.current,N.getBoundingClientRect().left,1);B&&B.focus()}}else h.focusNext();break}},w=()=>{var k;if(!t.current)return;let N=(k=window.event)===null||k===void 0?void 0:k.target,B=Ho(t.current,{tabbable:!0});if(N&&(B.currentNode=N,N=B.previousNode()),!N){let F;do F=B.lastChild(),F&&(N=F);while(F)}for(;N!=null&&N.hasAttribute("data-placeholder");){let F=B.previousNode();if(F&&F.hasAttribute("data-placeholder"))N=F;else break}N&&N.focus()},{pressProps:n}=wu({preventFocusOnPress:!0,allowTextSelectionOnPress:!0,onPressStart(k){k.pointerType==="mouse"&&w()},onPress(k){k.pointerType!=="mouse"&&w()}});return xr(n,{onKeyDown:_})}function x6(e,t,i){let c=Ho(e,{tabbable:!0}),h=c.nextNode(),_=null,w=1/0;for(;h;){let k=h.getBoundingClientRect().left-t,N=Math.abs(k);Math.sign(k)===i&&N<w&&(_=h,w=N),h=c.nextNode()}return _}function aee(e){return e&&e.__esModule?e.default:e}const i$=new WeakMap,q1="__role_"+Date.now(),nee="__focusManager_"+Date.now();function s$(e,t,i){var c;let{isInvalid:h,validationErrors:_,validationDetails:w}=t.displayValidation,{labelProps:n,fieldProps:k,descriptionProps:N,errorMessageProps:B}=n2({...e,labelElementType:"span",isInvalid:h,errorMessage:e.errorMessage||_}),F=V.useRef(null),{focusWithinProps:G}=yd({...e,onFocusWithin(se){var ue;F.current=t.value,(ue=e.onFocus)===null||ue===void 0||ue.call(e,se)},onBlurWithin:se=>{var ue;t.confirmPlaceholder(),t.value!==F.current&&t.commitValidation(),(ue=e.onBlur)===null||ue===void 0||ue.call(e,se)},onFocusWithinChange:e.onFocusChange}),Q=Eu(aee(l2),"@react-aria/datepicker"),te=t.maxGranularity==="hour"?"selectedTimeDescription":"selectedDateDescription",Y=t.maxGranularity==="hour"?"time":"date",oe=t.value?Q.format(te,{[Y]:t.formatValue({month:"long"})}):"",de=Gw(oe),ge=e[q1]==="presentation"?k["aria-describedby"]:[de["aria-describedby"],k["aria-describedby"]].filter(Boolean).join(" ")||void 0,be=e[nee],pe=V.useMemo(()=>be||C5(i),[be,i]),we=n$(t,i,e[q1]==="presentation");i$.set(t,{ariaLabel:e["aria-label"],ariaLabelledBy:[n.id,e["aria-labelledby"]].filter(Boolean).join(" ")||void 0,ariaDescribedBy:ge,focusManager:pe});let ke=V.useRef(e.autoFocus),Ae;e[q1]==="presentation"?Ae={role:"presentation"}:Ae=xr(k,{role:"group","aria-disabled":e.isDisabled||void 0,"aria-describedby":ge}),V.useEffect(()=>{ke.current&&pe.focusFirst(),ke.current=!1},[pe]),D_(e.inputRef,t.value,t.setValue),L_({...e,focus(){pe.focusFirst()}},t,e.inputRef);let re={type:"hidden",name:e.name,value:((c=t.value)===null||c===void 0?void 0:c.toString())||"",disabled:e.isDisabled};e.validationBehavior==="native"&&(re.type="text",re.hidden=!0,re.required=e.isRequired,re.onChange=()=>{});let Te=Fl(e);return{labelProps:{...n,onClick:()=>{pe.focusFirst()}},fieldProps:xr(Te,Ae,we,G,{onKeyDown(se){e.onKeyDown&&e.onKeyDown(se)},onKeyUp(se){e.onKeyUp&&e.onKeyUp(se)},style:{unicodeBidi:"isolate"}}),inputProps:re,descriptionProps:N,errorMessageProps:B,isInvalid:h,validationErrors:_,validationDetails:w}}function iee(e,t,i){var c;let h=s$(e,t,i);return h.inputProps.value=((c=t.timeValue)===null||c===void 0?void 0:c.toString())||"",h}function see(e){return e&&e.__esModule?e.default:e}function oee(e,t,i){let c=Ns(),h=Ns(),_=Ns(),w=Eu(see(l2),"@react-aria/datepicker"),{isInvalid:n,validationErrors:k,validationDetails:N}=t.displayValidation,{labelProps:B,fieldProps:F,descriptionProps:G,errorMessageProps:Q}=n2({...e,labelElementType:"span",isInvalid:n,errorMessage:e.errorMessage||k}),te=n$(t,i),Y=F["aria-labelledby"]||F.id,{locale:oe}=Ms(),de=t.formatValue(oe,{month:"long"}),ge=de?w.format("selectedDateDescription",{date:de}):"",be=Gw(ge),pe=[be["aria-describedby"],F["aria-describedby"]].filter(Boolean).join(" ")||void 0,we=Fl(e),ke=V.useMemo(()=>C5(i),[i]),Ae=V.useRef(!1),{focusWithinProps:re}=yd({...e,isDisabled:t.isOpen,onBlurWithin:Te=>{let se=document.getElementById(h);if(!(se!=null&&se.contains(Te.relatedTarget))){var ue,De;Ae.current=!1,(ue=e.onBlur)===null||ue===void 0||ue.call(e,Te),(De=e.onFocusChange)===null||De===void 0||De.call(e,!1)}},onFocusWithin:Te=>{if(!Ae.current){var se,ue;Ae.current=!0,(se=e.onFocus)===null||se===void 0||se.call(e,Te),(ue=e.onFocusChange)===null||ue===void 0||ue.call(e,!0)}}});return{groupProps:xr(we,te,F,be,re,{role:"group","aria-disabled":e.isDisabled||null,"aria-labelledby":Y,"aria-describedby":pe,onKeyDown(Te){t.isOpen||e.onKeyDown&&e.onKeyDown(Te)},onKeyUp(Te){t.isOpen||e.onKeyUp&&e.onKeyUp(Te)}}),labelProps:{...B,onClick:()=>{ke.focusFirst()}},fieldProps:{...F,id:_,[q1]:"presentation","aria-describedby":pe,value:t.value,onChange:t.setValue,placeholderValue:e.placeholderValue,hideTimeZone:e.hideTimeZone,hourCycle:e.hourCycle,shouldForceLeadingZeros:e.shouldForceLeadingZeros,granularity:e.granularity,isDisabled:e.isDisabled,isReadOnly:e.isReadOnly,isRequired:e.isRequired,validationBehavior:e.validationBehavior,[nx]:t,autoFocus:e.autoFocus,name:e.name},descriptionProps:G,errorMessageProps:Q,buttonProps:{...be,id:c,"aria-haspopup":"dialog","aria-label":w.format("calendar"),"aria-labelledby":`${c} ${Y}`,"aria-describedby":pe,"aria-expanded":t.isOpen,isDisabled:e.isDisabled||e.isReadOnly,onPress:()=>t.setOpen(!0)},dialogProps:{id:h,"aria-labelledby":`${c} ${Y}`},calendarProps:{autoFocus:!0,value:t.dateValue,onChange:t.setDateValue,minValue:e.minValue,maxValue:e.maxValue,isDisabled:e.isDisabled,isReadOnly:e.isReadOnly,isDateUnavailable:e.isDateUnavailable,defaultFocusedValue:t.dateValue?void 0:e.placeholderValue,isInvalid:t.isInvalid,errorMessage:typeof e.errorMessage=="function"?e.errorMessage(t.displayValidation):e.errorMessage||t.displayValidation.validationErrors.join(" ")},isInvalid:n,validationErrors:k,validationDetails:N}}function lee(e){return e&&e.__esModule?e.default:e}function cee(){let{locale:e}=Ms(),t=XA(lee(l2),"@react-aria/datepicker");return V.useMemo(()=>{try{return new Intl.DisplayNames(e,{type:"dateTimeField"})}catch{return new uee(e,t)}},[e,t])}class uee{of(t){return this.dictionary.getStringForLocale(t,this.locale)}constructor(t,i){this.locale=t,this.dictionary=i}}var o$={};o$={Empty:""};var l$={};l$={Empty:""};var c$={};c$={Empty:"Przdn"};var u$={};u$={Empty:"Tom"};var d$={};d$={Empty:"Leer"};var h$={};h$={Empty:""};var f$={};f$={Empty:"Empty"};var p$={};p$={Empty:"Vaco"};var m$={};m$={Empty:"Thjenda"};var g$={};g$={Empty:"Tyhj"};var y$={};y$={Empty:"Vide"};var x$={};x$={Empty:""};var v$={};v$={Empty:"Prazno"};var _$={};_$={Empty:"res"};var b$={};b$={Empty:"Vuoto"};var w$={};w$={Empty:""};var S$={};S$={Empty:" "};var T$={};T$={Empty:"Tuias"};var E$={};E$={Empty:"Tuks"};var C$={};C$={Empty:"Tom"};var D$={};D$={Empty:"Leeg"};var P$={};P$={Empty:"Pusty"};var M$={};M$={Empty:"Vazio"};var A$={};A$={Empty:"Vazio"};var k$={};k$={Empty:"Gol"};var R$={};R$={Empty:" "};var I$={};I$={Empty:"Przdne"};var z$={};z$={Empty:"Prazen"};var L$={};L$={Empty:"Prazno"};var $$={};$$={Empty:"Tomt"};var N$={};N$={Empty:"Bo"};var B$={};B$={Empty:""};var j$={};j$={Empty:""};var O$={};O$={Empty:""};var F$={};F$={"ar-AE":o$,"bg-BG":l$,"cs-CZ":c$,"da-DK":u$,"de-DE":d$,"el-GR":h$,"en-US":f$,"es-ES":p$,"et-EE":m$,"fi-FI":g$,"fr-FR":y$,"he-IL":x$,"hr-HR":v$,"hu-HU":_$,"it-IT":b$,"ja-JP":w$,"ko-KR":S$,"lt-LT":T$,"lv-LV":E$,"nb-NO":C$,"nl-NL":D$,"pl-PL":P$,"pt-BR":M$,"pt-PT":A$,"ro-RO":k$,"ru-RU":R$,"sk-SK":I$,"sl-SI":z$,"sr-SP":L$,"sv-SE":$$,"tr-TR":N$,"uk-UA":B$,"zh-CN":j$,"zh-TW":O$};const dee=typeof document<"u"?ra.useLayoutEffect:()=>{};function v6(e){const t=V.useRef(null);return dee(()=>{t.current=e},[e]),V.useCallback((...i)=>{const c=t.current;return c==null?void 0:c(...i)},[])}function hee(){let e=V.useRef(new Map),t=V.useCallback((h,_,w,n)=>{let k=n!=null&&n.once?(...N)=>{e.current.delete(w),w(...N)}:w;e.current.set(w,{type:_,eventTarget:h,fn:k,options:n}),h.addEventListener(_,k,n)},[]),i=V.useCallback((h,_,w,n)=>{var k;let N=((k=e.current.get(w))===null||k===void 0?void 0:k.fn)||w;h.removeEventListener(_,N,n),e.current.delete(w)},[]),c=V.useCallback(()=>{e.current.forEach((h,_)=>{i(h.eventTarget,h.type,_,h.options)})},[i]);return V.useEffect(()=>c,[c]),{addGlobalListener:t,removeGlobalListener:i,removeAllGlobalListeners:c}}const fee=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),pee=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function mee(e){if(Intl.Locale){let i=new Intl.Locale(e).maximize(),c=typeof i.getTextInfo=="function"?i.getTextInfo():i.textInfo;if(c)return c.direction==="rtl";if(i.script)return fee.has(i.script)}let t=e.split("-")[0];return pee.has(t)}const gee=Symbol.for("react-aria.i18n.locale");function V$(){let e=typeof window<"u"&&window[gee]||typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:mee(e)?"rtl":"ltr"}}let KS=V$(),Uv=new Set;function _6(){KS=V$();for(let e of Uv)e(KS)}function yee(){let e=o0(),[t,i]=V.useState(KS);return V.useEffect(()=>(Uv.size===0&&window.addEventListener("languagechange",_6),Uv.add(i),()=>{Uv.delete(i),Uv.size===0&&window.removeEventListener("languagechange",_6)}),[]),e?{locale:"en-US",direction:"ltr"}:t}const xee=ra.createContext(null);function vee(){let e=yee();return V.useContext(xee)||e}const b6=new WeakMap;function _ee(e){let t=b6.get(e);return t||(t=new Of(e),b6.set(e,t)),t}function bee(e,t){return t&&Of.getGlobalDictionaryForPackage(t)||_ee(e)}function wee(e,t){let{locale:i}=vee(),c=bee(e,t);return V.useMemo(()=>new d5(i,c),[i,c])}function See(e){return e&&e.__esModule?e.default:e}function U$(e){const t=V.useRef(void 0);let{value:i,textValue:c,minValue:h,maxValue:_,isDisabled:w,isReadOnly:n,isRequired:k,onIncrement:N,onIncrementPage:B,onDecrement:F,onDecrementPage:G,onDecrementToMin:Q,onIncrementToMax:te}=e;const Y=wee(See(F$),"@react-aria/spinbutton"),oe=()=>clearTimeout(t.current);V.useEffect(()=>()=>oe(),[]);let de=ue=>{if(!(ue.ctrlKey||ue.metaKey||ue.shiftKey||ue.altKey||n))switch(ue.key){case"PageUp":if(B){ue.preventDefault(),B==null||B();break}case"ArrowUp":case"Up":N&&(ue.preventDefault(),N==null||N());break;case"PageDown":if(G){ue.preventDefault(),G==null||G();break}case"ArrowDown":case"Down":F&&(ue.preventDefault(),F==null||F());break;case"Home":Q&&(ue.preventDefault(),Q==null||Q());break;case"End":te&&(ue.preventDefault(),te==null||te());break}},ge=V.useRef(!1),be=()=>{ge.current=!0},pe=()=>{ge.current=!1},we=c===""?Y.format("Empty"):(c||`${i}`).replace("-","");V.useEffect(()=>{ge.current&&(DQ("assertive"),US(we,"assertive"))},[we]);const ke=v6(ue=>{oe(),N==null||N(),t.current=window.setTimeout(()=>{(_===void 0||isNaN(_)||i===void 0||isNaN(i)||i<_)&&ke(60)},ue)}),Ae=v6(ue=>{oe(),F==null||F(),t.current=window.setTimeout(()=>{(h===void 0||isNaN(h)||i===void 0||isNaN(i)||i>h)&&Ae(60)},ue)});let re=ue=>{ue.preventDefault()},{addGlobalListener:Te,removeAllGlobalListeners:se}=hee();return{spinButtonProps:{role:"spinbutton","aria-valuenow":i!==void 0&&!isNaN(i)?i:void 0,"aria-valuetext":we,"aria-valuemin":h,"aria-valuemax":_,"aria-disabled":w||void 0,"aria-readonly":n||void 0,"aria-required":k||void 0,onKeyDown:de,onFocus:be,onBlur:pe},incrementButtonProps:{onPressStart:()=>{ke(400),Te(window,"contextmenu",re)},onPressEnd:()=>{oe(),se()},onFocus:be,onBlur:pe},decrementButtonProps:{onPressStart:()=>{Ae(400),Te(window,"contextmenu",re)},onPressEnd:()=>{oe(),se()},onFocus:be,onBlur:pe}}}function Tee(e,t,i){let c=V.useRef(""),{locale:h,direction:_}=Ms(),w=cee(),{ariaLabel:n,ariaLabelledBy:k,ariaDescribedBy:N,focusManager:B}=i$.get(t),F=e.isPlaceholder?"":e.text,G=V.useMemo(()=>t.dateFormatter.resolvedOptions(),[t.dateFormatter]),Q=ml({month:"long",timeZone:G.timeZone}),te=ml({hour:"numeric",hour12:G.hour12,timeZone:G.timeZone});if(e.type==="month"&&!e.isPlaceholder){let Ee=Q.format(t.dateValue);F=Ee!==F?`${F}  ${Ee}`:Ee}else e.type==="hour"&&!e.isPlaceholder&&(F=te.format(t.dateValue));let{spinButtonProps:Y}=U$({value:e.value,textValue:F,minValue:e.minValue,maxValue:e.maxValue,isDisabled:t.isDisabled,isReadOnly:t.isReadOnly||!e.isEditable,isRequired:t.isRequired,onIncrement:()=>{c.current="",t.increment(e.type)},onDecrement:()=>{c.current="",t.decrement(e.type)},onIncrementPage:()=>{c.current="",t.incrementPage(e.type)},onDecrementPage:()=>{c.current="",t.decrementPage(e.type)},onIncrementToMax:()=>{c.current="",e.maxValue!==void 0&&t.setSegment(e.type,e.maxValue)},onDecrementToMin:()=>{c.current="",e.minValue!==void 0&&t.setSegment(e.type,e.minValue)}}),oe=V.useMemo(()=>new S5(h,{maximumFractionDigits:0}),[h]),de=()=>{if(e.text===e.placeholder&&B.focusPrevious(),oe.isValidPartialNumber(e.text)&&!t.isReadOnly&&!e.isPlaceholder){let Ee=e.text.slice(0,-1),Ke=oe.parse(Ee);Ee=Ke===0?"":Ee,Ee.length===0||Ke===0?t.clearSegment(e.type):t.setSegment(e.type,Ke),c.current=Ee}else e.type==="dayPeriod"&&t.clearSegment(e.type)},ge=Ee=>{if(Ee.key==="a"&&(bm()?Ee.metaKey:Ee.ctrlKey)&&Ee.preventDefault(),!(Ee.ctrlKey||Ee.metaKey||Ee.shiftKey||Ee.altKey))switch(Ee.key){case"Backspace":case"Delete":Ee.preventDefault(),Ee.stopPropagation(),de();break}},{startsWith:be}=JU({sensitivity:"base"}),pe=ml({hour:"numeric",hour12:!0}),we=V.useMemo(()=>{let Ee=new Date;return Ee.setHours(0),pe.formatToParts(Ee).find(Ke=>Ke.type==="dayPeriod").value},[pe]),ke=V.useMemo(()=>{let Ee=new Date;return Ee.setHours(12),pe.formatToParts(Ee).find(Ke=>Ke.type==="dayPeriod").value},[pe]),Ae=ml({year:"numeric",era:"narrow",timeZone:"UTC"}),re=V.useMemo(()=>{if(e.type!=="era")return[];let Ee=Gi(new Di(1,1,1),t.calendar),Ke=t.calendar.getEras().map(Xe=>{let ut=Ee.set({year:1,month:1,day:1,era:Xe}).toDate("UTC"),Ct=Ae.formatToParts(ut).find(Zt=>Zt.type==="era").value;return{era:Xe,formatted:Ct}}),nt=Eee(Ke.map(Xe=>Xe.formatted));if(nt)for(let Xe of Ke)Xe.formatted=Xe.formatted.slice(nt);return Ke},[Ae,t.calendar,e.type]),Te=Ee=>{if(t.isDisabled||t.isReadOnly)return;let Ke=c.current+Ee;switch(e.type){case"dayPeriod":if(be(we,Ee))t.setSegment("dayPeriod",0);else if(be(ke,Ee))t.setSegment("dayPeriod",12);else break;B.focusNext();break;case"era":{let nt=re.find(Xe=>be(Xe.formatted,Ee));nt&&(t.setSegment("era",nt.era),B.focusNext());break}case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!oe.isValidPartialNumber(Ke))return;let nt=oe.parse(Ke),Xe=nt,ut=e.minValue===0;if(e.type==="hour"&&t.dateFormatter.resolvedOptions().hour12){switch(t.dateFormatter.resolvedOptions().hourCycle){case"h11":nt>11&&(Xe=oe.parse(Ee));break;case"h12":ut=!1,nt>12&&(Xe=oe.parse(Ee));break}e.value!==void 0&&e.value>=12&&nt>1&&(nt+=12)}else e.maxValue!==void 0&&nt>e.maxValue&&(Xe=oe.parse(Ee));if(isNaN(nt))return;let Pt=Xe!==0||ut;Pt&&t.setSegment(e.type,Xe),e.maxValue!==void 0&&(+(nt+"0")>e.maxValue||Ke.length>=String(e.maxValue).length)?(c.current="",Pt&&B.focusNext()):c.current=Ke;break}}},se=()=>{c.current="",i.current&&lw(i.current,{containingElement:Uw(i.current)});let Ee=window.getSelection();Ee==null||Ee.collapse(i.current)},ue=V.useRef(typeof document<"u"?document:null);gm(ue,"selectionchange",()=>{var Ee;let Ke=window.getSelection();Ke!=null&&Ke.anchorNode&&(!((Ee=i.current)===null||Ee===void 0)&&Ee.contains(Ke==null?void 0:Ke.anchorNode))&&Ke.collapse(i.current)});let De=V.useRef("");gm(i,"beforeinput",Ee=>{if(i.current)switch(Ee.preventDefault(),Ee.inputType){case"deleteContentBackward":case"deleteContentForward":oe.isValidPartialNumber(e.text)&&!t.isReadOnly&&de();break;case"insertCompositionText":De.current=i.current.textContent,i.current.textContent=i.current.textContent;break;default:Ee.data!=null&&Te(Ee.data);break}}),gm(i,"input",Ee=>{let{inputType:Ke,data:nt}=Ee;switch(Ke){case"insertCompositionText":i.current&&(i.current.textContent=De.current),nt!=null&&(be(we,nt)||be(ke,nt))&&Te(nt);break}}),si(()=>{let Ee=i.current;return()=>{document.activeElement===Ee&&(B.focusPrevious()||B.focusNext())}},[i,B]);let ce=Mm()||e.type==="timeZoneName"?{role:"textbox","aria-valuemax":null,"aria-valuemin":null,"aria-valuetext":null,"aria-valuenow":null}:{},je=V.useMemo(()=>t.segments.find(Ee=>Ee.isEditable),[t.segments]);e!==je&&!t.isInvalid&&(N=void 0);let Le=Ns(),Re=!t.isDisabled&&!t.isReadOnly&&e.isEditable,Ge=e.type==="literal"?"":w.of(e.type),ze=C_({"aria-label":`${Ge}${n?`, ${n}`:""}${k?", ":""}`,"aria-labelledby":k});if(e.type==="literal")return{segmentProps:{"aria-hidden":!0}};let ot={caretColor:"transparent"};if(_==="rtl"){ot.unicodeBidi="embed";let Ee=G[e.type];(Ee==="numeric"||Ee==="2-digit")&&(ot.direction="ltr")}return{segmentProps:xr(Y,ze,{id:Le,...ce,"aria-invalid":t.isInvalid?"true":void 0,"aria-describedby":N,"aria-readonly":t.isReadOnly||!e.isEditable?"true":void 0,"data-placeholder":e.isPlaceholder||void 0,contentEditable:Re,suppressContentEditableWarning:Re,spellCheck:Re?"false":void 0,autoCorrect:Re?"off":void 0,[parseInt(ra.version,10)>=17?"enterKeyHint":"enterkeyhint"]:Re?"next":void 0,inputMode:t.isDisabled||e.type==="dayPeriod"||e.type==="era"||!Re?void 0:"numeric",tabIndex:t.isDisabled?void 0:0,onKeyDown:ge,onFocus:se,style:ot,onPointerDown(Ee){Ee.stopPropagation()},onMouseDown(Ee){Ee.stopPropagation()}})}}function Eee(e){e.sort();let t=e[0],i=e[e.length-1];for(let c=0;c<t.length;c++)if(t[c]!==i[c])return c;return 0}var Cee=({state:e,segment:t,slots:i,classNames:c,...h})=>{const _=V.useRef(null);let{segmentProps:w}=Tee(t,e,_);return b.jsx("div",{...xr(w,h),ref:_,className:i.segment({class:c==null?void 0:c.segment}),"data-editable":Vt(t.isEditable),"data-invalid":Vt(e.isInvalid),"data-placeholder":Vt(t.isPlaceholder),"data-slot":"segment","data-type":t.type,style:{...w.style},children:t.text})},PT=V.forwardRef((e,t)=>{const{as:i,state:c,slots:h,inputProps:_,classNames:w,...n}=e,k=i||"div";return b.jsxs(k,{...n,ref:t,children:[c.segments.map((N,B)=>b.jsx(Cee,{classNames:w,segment:N,slots:h,state:c},B)),b.jsx("input",{..._})]})});PT.displayName="HeroUI.DateInputField";var MT=Bn((e,t)=>{const{as:i,label:c,children:h,description:_,startContent:w,endContent:n,errorMessage:k,shouldLabelBeOutside:N,isInvalid:B,groupProps:F,labelProps:G,wrapperProps:Q,helperWrapperProps:te,errorMessageProps:Y,descriptionProps:oe,validationErrors:de,validationDetails:ge,...be}=e,pe=i||"div",we=c?b.jsx("span",{...G,children:c}):null,ke=typeof k=="function"?k({isInvalid:B,validationErrors:de,validationDetails:ge}):k||(de==null?void 0:de.join(" ")),Ae=!!_||!!ke,re=V.useMemo(()=>Ae?b.jsx("div",{...te,children:B&&ke?b.jsx("div",{...Y,children:ke}):_?b.jsx("div",{...oe,children:_}):null}):null,[Ae,ke,_,te,Y,oe]);return b.jsxs(pe,{...be,ref:t,"data-has-helper":Vt(Ae),children:[N?we:null,b.jsxs("div",{...F,children:[N?null:we,b.jsxs("div",{...Q,children:[w,h,n]}),N?re:null]}),N?null:re]})});MT.displayName="HeroUI.DateInputGroup";var G$={};G$={rangeOverflow:e=>`    ${e.maxValue}   .`,rangeReversed:"       .",rangeUnderflow:e=>`    ${e.minValue}   .`,unavailableDate:"   ."};var H$={};H$={rangeOverflow:e=>`    ${e.maxValue}  -.`,rangeReversed:"      .",rangeUnderflow:e=>`    ${e.minValue}  -.`,unavailableDate:"    ."};var q$={};q$={rangeOverflow:e=>`Hodnota mus bt ${e.maxValue} nebo dvj.`,rangeReversed:"Datum zahjen mus pedchzet datu ukonen.",rangeUnderflow:e=>`Hodnota mus bt ${e.minValue} nebo pozdj.`,unavailableDate:"Vybran datum nen k dispozici."};var W$={};W$={rangeOverflow:e=>`Vrdien skal vre ${e.maxValue} eller tidligere.`,rangeReversed:"Startdatoen skal vre fr slutdatoen.",rangeUnderflow:e=>`Vrdien skal vre ${e.minValue} eller nyere.`,unavailableDate:"Den valgte dato er ikke tilgngelig."};var K$={};K$={rangeOverflow:e=>`Der Wert muss ${e.maxValue} oder frher sein.`,rangeReversed:"Das Anfangsdatum muss vor dem Enddatum liegen.",rangeUnderflow:e=>`Der Wert muss ${e.minValue} oder spter sein.`,unavailableDate:"Das ausgewhlte Datum ist nicht verfgbar."};var Z$={};Z$={rangeOverflow:e=>`     ${e.maxValue}  .`,rangeReversed:"          .",rangeUnderflow:e=>`     ${e.minValue}  .`,unavailableDate:"     ."};var X$={};X$={rangeUnderflow:e=>`Value must be ${e.minValue} or later.`,rangeOverflow:e=>`Value must be ${e.maxValue} or earlier.`,rangeReversed:"Start date must be before end date.",unavailableDate:"Selected date unavailable."};var Y$={};Y$={rangeOverflow:e=>`El valor debe ser ${e.maxValue} o anterior.`,rangeReversed:"La fecha de inicio debe ser anterior a la fecha de finalizacin.",rangeUnderflow:e=>`El valor debe ser ${e.minValue} o posterior.`,unavailableDate:"Fecha seleccionada no disponible."};var J$={};J$={rangeOverflow:e=>`Vrtus peab olema ${e.maxValue} vi varasem.`,rangeReversed:"Alguskuupev peab olema enne lppkuupeva.",rangeUnderflow:e=>`Vrtus peab olema ${e.minValue} vi hilisem.`,unavailableDate:"Valitud kuupev pole saadaval."};var Q$={};Q$={rangeOverflow:e=>`Arvon on oltava ${e.maxValue} tai sit aikaisempi.`,rangeReversed:"Aloituspivn on oltava ennen lopetuspiv.",rangeUnderflow:e=>`Arvon on oltava ${e.minValue} tai sit myhisempi.`,unavailableDate:"Valittu pivmr ei ole kytettviss."};var eN={};eN={rangeOverflow:e=>`La valeur doit tre ${e.maxValue} ou antrieure.`,rangeReversed:"La date de dbut doit tre antrieure  la date de fin.",rangeUnderflow:e=>`La valeur doit tre ${e.minValue} ou ultrieure.`,unavailableDate:"La date slectionne nest pas disponible."};var tN={};tN={rangeOverflow:e=>`   ${e.maxValue}   .`,rangeReversed:"      .",rangeUnderflow:e=>`   ${e.minValue}   .`,unavailableDate:"   ."};var rN={};rN={rangeOverflow:e=>`Vrijednost mora biti ${e.maxValue} ili ranije.`,rangeReversed:"Datum poetka mora biti prije datuma zavretka.",rangeUnderflow:e=>`Vrijednost mora biti ${e.minValue} ili kasnije.`,unavailableDate:"Odabrani datum nije dostupan."};var aN={};aN={rangeOverflow:e=>`Az rtknek ${e.maxValue} vagy korbbinak kell lennie.`,rangeReversed:"A kezd dtumnak a befejez dtumnl korbbinak kell lennie.",rangeUnderflow:e=>`Az rtknek ${e.minValue} vagy ksbbinek kell lennie.`,unavailableDate:"A kivlasztott dtum nem rhet el."};var nN={};nN={rangeOverflow:e=>`Il valore deve essere ${e.maxValue} o precedente.`,rangeReversed:"La data di inizio deve essere antecedente alla data di fine.",rangeUnderflow:e=>`Il valore deve essere ${e.minValue} o successivo.`,unavailableDate:"Data selezionata non disponibile."};var iN={};iN={rangeOverflow:e=>` ${e.maxValue} `,rangeReversed:"",rangeUnderflow:e=>` ${e.minValue} `,unavailableDate:""};var sN={};sN={rangeOverflow:e=>` ${e.maxValue}  .`,rangeReversed:"   .",rangeUnderflow:e=>` ${e.minValue}  .`,unavailableDate:"    ."};var oN={};oN={rangeOverflow:e=>`Reikm turi bti ${e.maxValue} arba ankstesn.`,rangeReversed:"Pradios data turi bti ankstesn nei pabaigos data.",rangeUnderflow:e=>`Reikm turi bti ${e.minValue} arba naujesn.`,unavailableDate:"Pasirinkta data nepasiekiama."};var lN={};lN={rangeOverflow:e=>`Vrtbai ir jbt ${e.maxValue} vai agrkai.`,rangeReversed:"Skuma datumam ir jbt pirms beigu datuma.",rangeUnderflow:e=>`Vrtbai ir jbt ${e.minValue} vai vlkai.`,unavailableDate:"Atlastais datums nav pieejams."};var cN={};cN={rangeOverflow:e=>`Verdien m vre ${e.maxValue} eller tidligere.`,rangeReversed:"Startdatoen m vre fr sluttdatoen.",rangeUnderflow:e=>`Verdien m vre ${e.minValue} eller senere.`,unavailableDate:"Valgt dato utilgjengelig."};var uN={};uN={rangeOverflow:e=>`Waarde moet ${e.maxValue} of eerder zijn.`,rangeReversed:"De startdatum moet voor de einddatum liggen.",rangeUnderflow:e=>`Waarde moet ${e.minValue} of later zijn.`,unavailableDate:"Geselecteerde datum niet beschikbaar."};var dN={};dN={rangeOverflow:e=>`Warto musi mie warto ${e.maxValue} lub wczeniejsz.`,rangeReversed:"Data rozpoczcia musi by wczeniejsza ni data zakoczenia.",rangeUnderflow:e=>`Warto musi mie warto ${e.minValue} lub pniejsz.`,unavailableDate:"Wybrana data jest niedostpna."};var hN={};hN={rangeOverflow:e=>`O valor deve ser ${e.maxValue} ou anterior.`,rangeReversed:"A data inicial deve ser anterior  data final.",rangeUnderflow:e=>`O valor deve ser ${e.minValue} ou posterior.`,unavailableDate:"Data selecionada indisponvel."};var fN={};fN={rangeOverflow:e=>`O valor tem de ser ${e.maxValue} ou anterior.`,rangeReversed:"A data de incio deve ser anterior  data de fim.",rangeUnderflow:e=>`O valor tem de ser ${e.minValue} ou posterior.`,unavailableDate:"Data selecionada indisponvel."};var pN={};pN={rangeOverflow:e=>`Valoarea trebuie s fie ${e.maxValue} sau anterioar.`,rangeReversed:"Data de nceput trebuie s fie anterioar datei de sfrit.",rangeUnderflow:e=>`Valoarea trebuie s fie ${e.minValue} sau ulterioar.`,unavailableDate:"Data selectat nu este disponibil."};var mN={};mN={rangeOverflow:e=>`     ${e.maxValue}.`,rangeReversed:"     .",rangeUnderflow:e=>`     ${e.minValue}.`,unavailableDate:"  ."};var gN={};gN={rangeOverflow:e=>`Hodnota mus by ${e.maxValue} alebo skoria.`,rangeReversed:"Dtum zaiatku mus by skor ako dtum konca.",rangeUnderflow:e=>`Hodnota mus by ${e.minValue} alebo neskoria.`,unavailableDate:"Vybrat dtum je nedostupn."};var yN={};yN={rangeOverflow:e=>`Vrednost mora biti ${e.maxValue} ali stareja.`,rangeReversed:"Zaetni datum mora biti pred konnim datumom.",rangeUnderflow:e=>`Vrednost mora biti ${e.minValue} ali noveja.`,unavailableDate:"Izbrani datum ni na voljo."};var xN={};xN={rangeOverflow:e=>`Vrednost mora da bude ${e.maxValue} ili starija.`,rangeReversed:"Datum poetka mora biti pre datuma zavretka.",rangeUnderflow:e=>`Vrednost mora da bude ${e.minValue} ili novija.`,unavailableDate:"Izabrani datum nije dostupan."};var vN={};vN={rangeOverflow:e=>`Vrdet mste vara ${e.maxValue} eller tidigare.`,rangeReversed:"Startdatumet mste vara fre slutdatumet.",rangeUnderflow:e=>`Vrdet mste vara ${e.minValue} eller senare.`,unavailableDate:"Det valda datumet r inte tillgngligt."};var _N={};_N={rangeOverflow:e=>`Deer, ${e.maxValue} veya ncesi olmaldr.`,rangeReversed:"Balang tarihi biti tarihinden nce olmaldr.",rangeUnderflow:e=>`Deer, ${e.minValue} veya sonras olmaldr.`,unavailableDate:"Seilen tarih kullanlamyor."};var bN={};bN={rangeOverflow:e=>`     ${e.maxValue}.`,rangeReversed:"     .",rangeUnderflow:e=>`     ${e.minValue}.`,unavailableDate:"  ."};var wN={};wN={rangeOverflow:e=>` ${e.maxValue} `,rangeReversed:"",rangeUnderflow:e=>` ${e.minValue} `,unavailableDate:""};var SN={};SN={rangeOverflow:e=>` ${e.maxValue} `,rangeReversed:"",rangeUnderflow:e=>` ${e.minValue} `,unavailableDate:""};var TN={};TN={"ar-AE":G$,"bg-BG":H$,"cs-CZ":q$,"da-DK":W$,"de-DE":K$,"el-GR":Z$,"en-US":X$,"es-ES":Y$,"et-EE":J$,"fi-FI":Q$,"fr-FR":eN,"he-IL":tN,"hr-HR":rN,"hu-HU":aN,"it-IT":nN,"ja-JP":iN,"ko-KR":sN,"lt-LT":oN,"lv-LV":lN,"nb-NO":cN,"nl-NL":uN,"pl-PL":dN,"pt-BR":hN,"pt-PT":fN,"ro-RO":pN,"ru-RU":mN,"sk-SK":gN,"sl-SI":yN,"sr-SP":xN,"sv-SE":vN,"tr-TR":_N,"uk-UA":bN,"zh-CN":wN,"zh-TW":SN};function Dee(e){return e&&e.__esModule?e.default:e}const Pee=new Of(Dee(TN));function Mee(){return typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US"}function EN(e,t,i,c,h){let _=e!=null&&i!=null&&e.compare(i)>0,w=e!=null&&t!=null&&e.compare(t)<0,n=e!=null&&(c==null?void 0:c(e))||!1,k=_||w||n,N=[];if(k){let B=Mee(),F=Of.getGlobalDictionaryForPackage("@react-stately/datepicker")||Pee,G=new d5(B,F),Q=new gd(B,Wy({},h)),te=Q.resolvedOptions().timeZone;w&&t!=null&&N.push(G.format("rangeUnderflow",{minValue:Q.format(t.toDate(te))})),_&&i!=null&&N.push(G.format("rangeOverflow",{maxValue:Q.format(i.toDate(te))})),n&&N.push(G.format("unavailableDate"))}return{isInvalid:k,validationErrors:N,validationDetails:{badInput:n,customError:!1,patternMismatch:!1,rangeOverflow:_,rangeUnderflow:w,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!k}}}const Aee={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit"},kee={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};function Wy(e,t){e={...t.shouldForceLeadingZeros?kee:Aee,...e};let c=t.granularity||"minute",h=Object.keys(e);var _;let w=h.indexOf((_=t.maxGranularity)!==null&&_!==void 0?_:"year");w<0&&(w=0);let n=h.indexOf(c);if(n<0&&(n=2),w>n)throw new Error("maxGranularity must be greater than granularity");let k=h.slice(w,n+1).reduce((B,F)=>(B[F]=e[F],B),{});return t.hourCycle!=null&&(k.hour12=t.hourCycle===12),k.timeZone=t.timeZone||"UTC",(c==="hour"||c==="minute"||c==="second")&&t.timeZone&&!t.hideTimeZone&&(k.timeZoneName="short"),t.showEra&&w===0&&(k.era="short"),k}function w6(e){return e&&"hour"in e?e:new E_}function CN(e,t){if(e===null)return null;if(e)return Gi(e,t)}function Av(e,t,i,c){if(e)return CN(e,i);let h=Gi(QA(c??Ff()).set({hour:0,minute:0,second:0,millisecond:0}),i);return t==="year"||t==="month"||t==="day"?yh(h):c?h:zf(h)}function DN(e,t){let i=e&&"timeZone"in e?e.timeZone:void 0,c=e&&"minute"in e?"minute":"day";if(e&&t&&!(t in e))throw new Error("Invalid granularity "+t+" for value "+e.toString());let[h,_]=V.useState([c,i]);e&&(h[0]!==c||h[1]!==i)&&_([c,i]),t||(t=e?c:h[0]);let w=e?i:h[1];return[t,w]}function Ree(e){let t=N_(e),[i,c]=Xs(e.value,e.defaultValue||null,e.onChange),h=i||e.placeholderValue||null,[_,w]=DN(h,e.granularity),n=i!=null?i.toDate(w??"UTC"):null,k=_==="hour"||_==="minute"||_==="second";var N;let B=(N=e.shouldCloseOnSelect)!==null&&N!==void 0?N:!0,[F,G]=V.useState(null),[Q,te]=V.useState(null);if(i&&(F=i,"hour"in i&&(Q=i)),h&&!(_ in h))throw new Error("Invalid granularity "+_+" for value "+h.toString());let Y=(i==null?void 0:i.calendar.identifier)==="gregory"&&i.era==="BC",oe=V.useMemo(()=>({granularity:_,timeZone:w,hideTimeZone:e.hideTimeZone,hourCycle:e.hourCycle,shouldForceLeadingZeros:e.shouldForceLeadingZeros,showEra:Y}),[_,e.hourCycle,e.shouldForceLeadingZeros,w,e.hideTimeZone,Y]),{minValue:de,maxValue:ge,isDateUnavailable:be}=e,pe=V.useMemo(()=>EN(i,de,ge,be,oe),[i,de,ge,be,oe]),we=Rm({...e,value:i,builtinValidation:pe}),ke=we.displayValidation.isInvalid,Ae=e.validationState||(ke?"invalid":null),re=(ue,De)=>{c("timeZone"in De?De.set(yh(ue)):zf(ue,De)),G(null),te(null),we.commitValidation()};return{...we,value:i,setValue:c,dateValue:F,timeValue:Q,setDateValue:ue=>{let De=typeof B=="function"?B():B;k?Q||De?re(ue,Q||w6(e.defaultValue||e.placeholderValue)):G(ue):(c(ue),we.commitValidation()),De&&t.setOpen(!1)},setTimeValue:ue=>{F&&ue?re(F,ue):te(ue)},granularity:_,hasTime:k,...t,setOpen(ue){!ue&&!i&&F&&k&&re(F,Q||w6(e.defaultValue||e.placeholderValue)),t.setOpen(ue)},validationState:Ae,isInvalid:ke,formatValue(ue,De){if(!n)return"";let ce=Wy(De,oe);return new gd(ue,ce).format(n)},getDateFormatter(ue,De){let ce={...oe,...De},je=Wy({},ce);return new gd(ue,je)}}}const Iee=new Of({ach:{year:"mwaka",month:"dwe",day:"nino"},af:{year:"jjjj",month:"mm",day:"dd"},am:{year:"",month:"",day:""},an:{year:"aaaa",month:"mm",day:"dd"},ar:{year:"",month:"",day:""},ast:{year:"aaaa",month:"mm",day:"dd"},az:{year:"iiii",month:"aa",day:"gg"},be:{year:"",month:"",day:""},bg:{year:"",month:"",day:""},bn:{year:"yyyy",month:"",day:"dd"},br:{year:"bbbb",month:"mm",day:"dd"},bs:{year:"gggg",month:"mm",day:"dd"},ca:{year:"aaaa",month:"mm",day:"dd"},cak:{year:"jjjj",month:"ii",day:"q'q'"},ckb:{year:"",month:"",day:""},cs:{year:"rrrr",month:"mm",day:"dd"},cy:{year:"bbbb",month:"mm",day:"dd"},da:{year:"",month:"mm",day:"dd"},de:{year:"jjjj",month:"mm",day:"tt"},dsb:{year:"llll",month:"mm",day:""},el:{year:"",month:"",day:""},en:{year:"yyyy",month:"mm",day:"dd"},eo:{year:"jjjj",month:"mm",day:"tt"},es:{year:"aaaa",month:"mm",day:"dd"},et:{year:"aaaa",month:"kk",day:"pp"},eu:{year:"uuuu",month:"hh",day:"ee"},fa:{year:"",month:"",day:""},ff:{year:"hhhh",month:"ll",day:""},fi:{year:"vvvv",month:"kk",day:"pp"},fr:{year:"aaaa",month:"mm",day:"jj"},fy:{year:"jjjj",month:"mm",day:"dd"},ga:{year:"bbbb",month:"mm",day:"ll"},gd:{year:"bbbb",month:"mm",day:"ll"},gl:{year:"aaaa",month:"mm",day:"dd"},he:{year:"",month:"",day:""},hr:{year:"gggg",month:"mm",day:"dd"},hsb:{year:"llll",month:"mm",day:"dd"},hu:{year:"",month:"hh",day:"nn"},ia:{year:"aaaa",month:"mm",day:"dd"},id:{year:"tttt",month:"bb",day:"hh"},it:{year:"aaaa",month:"mm",day:"gg"},ja:{year:"",month:"",day:""},ka:{year:"",month:"",day:""},kk:{year:"",month:"",day:""},kn:{year:"",month:"",day:""},ko:{year:"",month:"",day:""},lb:{year:"jjjj",month:"mm",day:"dd"},lo:{year:"",month:"",day:""},lt:{year:"mmmm",month:"mm",day:"dd"},lv:{year:"gggg",month:"mm",day:"dd"},meh:{year:"aaaa",month:"mm",day:"dd"},ml:{year:"",month:"",day:""},ms:{year:"tttt",month:"mm",day:"hh"},nl:{year:"jjjj",month:"mm",day:"dd"},nn:{year:"",month:"mm",day:"dd"},no:{year:"",month:"mm",day:"dd"},oc:{year:"aaaa",month:"mm",day:"jj"},pl:{year:"rrrr",month:"mm",day:"dd"},pt:{year:"aaaa",month:"mm",day:"dd"},rm:{year:"oooo",month:"mm",day:"dd"},ro:{year:"aaaa",month:"ll",day:"zz"},ru:{year:"",month:"",day:""},sc:{year:"aaaa",month:"mm",day:"dd"},scn:{year:"aaaa",month:"mm",day:"jj"},sk:{year:"rrrr",month:"mm",day:"dd"},sl:{year:"llll",month:"mm",day:"dd"},sr:{year:"",month:"",day:""},sv:{year:"",month:"mm",day:"dd"},szl:{year:"rrrr",month:"mm",day:"dd"},tg:{year:"",month:"",day:""},th:{year:"",month:"",day:""},tr:{year:"yyyy",month:"aa",day:"gg"},uk:{year:"",month:"",day:""},"zh-CN":{year:"",month:"",day:""},"zh-TW":{year:"",month:"",day:""}},"en");function zee(e,t,i){return e==="era"||e==="dayPeriod"?t:e==="year"||e==="month"||e==="day"?Iee.getStringForLocale(e,i):""}const W1={year:!0,month:!0,day:!0,hour:!0,minute:!0,second:!0,dayPeriod:!0,era:!0},S6={year:5,month:2,day:7,hour:2,minute:15,second:15},Lee={dayperiod:"dayPeriod"};function PN(e){let{locale:t,createCalendar:i,hideTimeZone:c,isDisabled:h=!1,isReadOnly:_=!1,isRequired:w=!1,minValue:n,maxValue:k,isDateUnavailable:N}=e,B=e.value||e.defaultValue||e.placeholderValue||null,[F,G]=DN(B,e.granularity),Q=G||"UTC";if(B&&!(F in B))throw new Error("Invalid granularity "+F+" for value "+B.toString());let te=V.useMemo(()=>new gd(t),[t]),Y=V.useMemo(()=>i(te.resolvedOptions().calendar),[i,te]);var oe;let[de,ge]=Xs(e.value,(oe=e.defaultValue)!==null&&oe!==void 0?oe:null,e.onChange),be=V.useMemo(()=>{var Dt;return(Dt=CN(de,Y))!==null&&Dt!==void 0?Dt:null},[de,Y]),[pe,we]=V.useState(()=>Av(e.placeholderValue,F,Y,G)),ke=be||pe,Ae=Y.identifier==="gregory"&&ke.era==="BC",re=V.useMemo(()=>{var Dt;return{granularity:F,maxGranularity:(Dt=e.maxGranularity)!==null&&Dt!==void 0?Dt:"year",timeZone:G,hideTimeZone:c,hourCycle:e.hourCycle,showEra:Ae,shouldForceLeadingZeros:e.shouldForceLeadingZeros}},[e.maxGranularity,F,e.hourCycle,e.shouldForceLeadingZeros,G,c,Ae]),Te=V.useMemo(()=>Wy({},re),[re]),se=V.useMemo(()=>new gd(t,Te),[t,Te]),ue=V.useMemo(()=>se.resolvedOptions(),[se]),De=V.useMemo(()=>se.formatToParts(new Date).filter(Dt=>W1[Dt.type]).reduce((Dt,er)=>(Dt[er.type]=!0,Dt),{}),[se]),[ce,je]=V.useState(()=>e.value||e.defaultValue?{...De}:{}),Le=V.useRef(null),Re=V.useRef(Y.identifier);V.useEffect(()=>{Y.identifier!==Re.current&&(Re.current=Y.identifier,we(Dt=>Object.keys(ce).length>0?Gi(Dt,Y):Av(e.placeholderValue,F,Y,G)))},[Y,F,ce,G,e.placeholderValue]),de&&Object.keys(ce).length<Object.keys(De).length&&(ce={...De},je(ce)),de==null&&Object.keys(ce).length===Object.keys(De).length&&(ce={},je(ce),we(Av(e.placeholderValue,F,Y,G)));let Ge=be&&Object.keys(ce).length>=Object.keys(De).length?be:pe,ze=Dt=>{if(e.isDisabled||e.isReadOnly)return;let er=Object.keys(ce),Se=Object.keys(De);Dt==null?(ge(null),we(Av(e.placeholderValue,F,Y,G)),je({})):er.length>=Se.length||er.length===Se.length-1&&De.dayPeriod&&!ce.dayPeriod&&Le.current!=="dayPeriod"?(Dt=Gi(Dt,(B==null?void 0:B.calendar)||new Bl),ge(Dt)):we(Dt),Le.current=null},ot=V.useMemo(()=>Ge.toDate(Q),[Ge,Q]),Ee=V.useMemo(()=>$ee(ot,ce,se,ue,Ge,Y,t,F),[ot,ce,se,ue,Ge,Y,t,F]);De.era&&ce.year&&!ce.era?(ce.era=!0,je({...ce})):!De.era&&ce.era&&(delete ce.era,je({...ce}));let Ke=Dt=>{ce[Dt]=!0,Dt==="year"&&De.era&&(ce.era=!0),je({...ce})},nt=(Dt,er)=>{if(ce[Dt])ze(Nee(Ge,Dt,er,ue));else{Ke(Dt);let Se=Object.keys(ce),ur=Object.keys(De);(Se.length>=ur.length||Se.length===ur.length-1&&De.dayPeriod&&!ce.dayPeriod)&&ze(Ge)}},Xe=V.useMemo(()=>EN(de,n,k,N,re),[de,n,k,N,re]),ut=Rm({...e,value:de,builtinValidation:Xe}),Pt=ut.displayValidation.isInvalid,Ct=e.validationState||(Pt?"invalid":null);var Zt;return{...ut,value:be,dateValue:ot,calendar:Y,setValue:ze,segments:Ee,dateFormatter:se,validationState:Ct,isInvalid:Pt,granularity:F,maxGranularity:(Zt=e.maxGranularity)!==null&&Zt!==void 0?Zt:"year",isDisabled:h,isReadOnly:_,isRequired:w,increment(Dt){nt(Dt,1)},decrement(Dt){nt(Dt,-1)},incrementPage(Dt){nt(Dt,S6[Dt]||1)},decrementPage(Dt){nt(Dt,-(S6[Dt]||1))},setSegment(Dt,er){Ke(Dt),ze(Bee(Ge,Dt,er,ue))},confirmPlaceholder(){if(e.isDisabled||e.isReadOnly)return;let Dt=Object.keys(ce),er=Object.keys(De);Dt.length===er.length-1&&De.dayPeriod&&!ce.dayPeriod&&(ce={...De},je(ce),ze(Ge.copy()))},clearSegment(Dt){delete ce[Dt],Le.current=Dt,je({...ce});let er=Av(e.placeholderValue,F,Y,G),Se=Ge;if(Dt==="dayPeriod"&&"hour"in Ge&&"hour"in er){let ur=Ge.hour>=12,Sr=er.hour>=12;ur&&!Sr?Se=Ge.set({hour:Ge.hour-12}):!ur&&Sr&&(Se=Ge.set({hour:Ge.hour+12}))}else Dt==="hour"&&"hour"in Ge&&Ge.hour>=12&&ce.dayPeriod?Se=Ge.set({hour:er.hour+12}):Dt in Ge&&(Se=Ge.set({[Dt]:er[Dt]}));ge(null),ze(Se)},formatValue(Dt){if(!be)return"";let er=Wy(Dt,re);return new gd(t,er).format(ot)},getDateFormatter(Dt,er){let Se={...re,...er},ur=Wy({},Se);return new gd(Dt,ur)}}}function $ee(e,t,i,c,h,_,w,n){let k=["hour","minute","second"],N=i.formatToParts(e),B=[];for(let F of N){let G=W1[F.type];F.type==="era"&&_.getEras().length===1&&(G=!1);let Q=W1[F.type]&&!t[F.type],te=W1[F.type]?zee(F.type,F.value,w):null,Y={type:Lee[F.type]||F.type,text:Q?te:F.value,...I1(h,F.type,c),isPlaceholder:Q,placeholder:te,isEditable:G};F.type==="hour"?(B.push({type:"literal",text:"",...I1(h,"literal",c),isPlaceholder:!1,placeholder:"",isEditable:!1}),B.push(Y),F.type===n&&B.push({type:"literal",text:"",...I1(h,"literal",c),isPlaceholder:!1,placeholder:"",isEditable:!1})):k.includes(F.type)&&F.type===n?(B.push(Y),B.push({type:"literal",text:"",...I1(h,"literal",c),isPlaceholder:!1,placeholder:"",isEditable:!1})):B.push(Y)}return B}function I1(e,t,i){switch(t){case"era":{let c=e.calendar.getEras();return{value:c.indexOf(e.era),minValue:0,maxValue:c.length-1}}case"year":return{value:e.year,minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,minValue:xV(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:vV(e),maxValue:e.calendar.getDaysInMonth(e)}}if("hour"in e)switch(t){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12};case"hour":if(i.hour12){let c=e.hour>=12;return{value:e.hour,minValue:c?12:0,maxValue:c?23:11}}return{value:e.hour,minValue:0,maxValue:23};case"minute":return{value:e.minute,minValue:0,maxValue:59};case"second":return{value:e.second,minValue:0,maxValue:59}}return{}}function Nee(e,t,i,c){switch(t){case"era":case"year":case"month":case"day":return e.cycle(t,i,{round:t==="year"})}if("hour"in e)switch(t){case"dayPeriod":{let h=e.hour,_=h>=12;return e.set({hour:_?h-12:h+12})}case"hour":case"minute":case"second":return e.cycle(t,i,{round:t!=="hour",hourCycle:c.hour12?12:24})}throw new Error("Unknown segment: "+t)}function Bee(e,t,i,c){switch(t){case"day":case"month":case"year":case"era":return e.set({[t]:i})}if("hour"in e&&typeof i=="number")switch(t){case"dayPeriod":{let h=e.hour,_=h>=12;return i>=12===_?e:e.set({hour:_?h-12:h+12})}case"hour":if(c.hour12){let _=e.hour>=12;!_&&i===12&&(i=0),_&&i<12&&(i+=12)}case"minute":case"second":return e.set({[t]:i})}throw new Error("Unknown segment: "+t)}function jee(e){let{placeholderValue:t=new E_,minValue:i,maxValue:c,granularity:h,validate:_}=e;var w;let[n,k]=Xs(e.value,(w=e.defaultValue)!==null&&w!==void 0?w:null,e.onChange),N=n||t,B=N&&"day"in N?N:void 0,F=e.defaultValue&&"timeZone"in e.defaultValue?e.defaultValue.timeZone:void 0,G=V.useMemo(()=>{let be=N&&"timeZone"in N?N.timeZone:void 0;return(be||F)&&t?ok(kv(t),be||F):kv(t)},[t,N,F]),Q=V.useMemo(()=>kv(i,B),[i,B]),te=V.useMemo(()=>kv(c,B),[c,B]),Y=V.useMemo(()=>n&&"day"in n?uD(n):n,[n]),oe=V.useMemo(()=>n==null?null:kv(n),[n]);return{...PN({...e,value:oe,defaultValue:void 0,minValue:Q,maxValue:te,onChange:be=>{k(B||F?be:be&&uD(be))},granularity:h||"minute",maxGranularity:"hour",placeholderValue:G??void 0,createCalendar:()=>new Bl,validate:V.useCallback(()=>_==null?void 0:_(n),[_,n])}),timeValue:Y}}function kv(e,t=Pm(Ff())){return e?"day"in e?e:zf(t,e):null}function Oee(e){var t,i,c,h,_,w,n;const k=Pi(),{validationBehavior:N}=Gf(wh)||{},[B,F]=Zo(e,p_.variantKeys),{locale:G}=Ms(),Q=ow(new gd(G).resolvedOptions().calendar),te=GA(Q.identifier),{ref:Y,as:oe,label:de,inputRef:ge,description:be,startContent:pe,endContent:we,className:ke,classNames:Ae,validationState:re,groupProps:Te={},labelProps:se,fieldProps:ue,innerWrapperProps:De,errorMessageProps:ce,descriptionProps:je,validationBehavior:Le=(t=N??(k==null?void 0:k.validationBehavior))!=null?t:"native",shouldForceLeadingZeros:Re=!0,minValue:Ge=(c=(i=k==null?void 0:k.defaultDates)==null?void 0:i.minDate)!=null?c:new Di(Q,1900+te,1,1),maxValue:ze=(_=(h=k==null?void 0:k.defaultDates)==null?void 0:h.maxDate)!=null?_:new Di(Q,2099+te,12,31),createCalendar:ot=(w=k==null?void 0:k.createCalendar)!=null?w:null,isInvalid:Ee=re?re==="invalid":!1,errorMessage:Ke}=B,nt=Nn(Y),Xe=Nn(ge),ut=(n=e.disableAnimation)!=null?n:k==null?void 0:k.disableAnimation,Pt=PN({...e,label:de,locale:G,minValue:Ge,maxValue:ze,validationBehavior:Le,shouldForceLeadingZeros:Re,createCalendar:!ot||typeof ot!="function"?ow:ot}),{labelProps:Ct,fieldProps:Zt,inputProps:Dt,validationErrors:er,validationDetails:Se,descriptionProps:ur,errorMessageProps:Sr,isInvalid:yt}=s$({...e,label:de,validationBehavior:Le,inputRef:Xe},Pt,nt),dt=Br(Ae==null?void 0:Ae.base,ke),$t=Ee||yt,or=e2({labelPlacement:e.labelPlacement,label:de}),Er=or==="outside"||or==="outside-left",mr=V.useMemo(()=>p_({...F,disableAnimation:ut,labelPlacement:or}),[Ko(F),ut,or]),Pr=Nr=>({...xr(Ct,se,Nr),"data-slot":"label",className:mr.label({class:Br(Ae==null?void 0:Ae.label,void 0)})}),Fr=Nr=>({...Nr,...Dt,ref:Xe}),$a=(Nr={})=>({ref:nt,"data-slot":"input-field",...xr(Zt,ue,Nr),className:mr.input({class:Br(Ae==null?void 0:Ae.input,Nr==null?void 0:Nr.className)})}),Xr=(Nr={})=>({...Nr,...Te,"data-slot":"input-wrapper",className:mr.inputWrapper({class:Ae==null?void 0:Ae.inputWrapper}),onClick:Zt.onClick}),ja=Nr=>{const na=xr(De,Nr);return{...na,"data-slot":"inner-wrapper",className:mr.innerWrapper({class:Zg(Ae==null?void 0:Ae.innerWrapper,na==null?void 0:na.className)})}},fr=Nr=>({...Nr,"data-slot":"helper-wrapper",className:mr.helperWrapper({class:Br(Ae==null?void 0:Ae.helperWrapper,void 0)})}),Sa=(Nr={})=>({...xr(Sr,ce,Nr),"data-slot":"error-message",className:mr.errorMessage({class:Br(Ae==null?void 0:Ae.errorMessage,Nr==null?void 0:Nr.className)})}),kr=(Nr={})=>({...xr(ur,je,Nr),"data-slot":"description",className:mr.description({class:Br(Ae==null?void 0:Ae.description,Nr==null?void 0:Nr.className)})});return{state:Pt,domRef:nt,slots:mr,classNames:Ae,labelPlacement:or,getBaseGroupProps:()=>({as:oe,label:de,description:be,endContent:we,errorMessage:Ke,isInvalid:$t,startContent:pe,validationDetails:Se,validationErrors:er,shouldLabelBeOutside:Er,"data-slot":"base","data-required":Vt(e.isRequired),"data-disabled":Vt(e.isDisabled),"data-readonly":Vt(e.isReadOnly),"data-invalid":Vt($t),"data-has-start-content":Vt(!!pe),"data-has-end-content":Vt(!!we),descriptionProps:kr(),errorMessageProps:Sa(),groupProps:Xr(),helperWrapperProps:fr(),labelProps:Pr(),wrapperProps:ja(),className:mr.base({class:dt})}),getFieldProps:$a,getInputProps:Fr}}var Fee=Bn(function(t,i){const{state:c,slots:h,classNames:_,getBaseGroupProps:w,getInputProps:n,getFieldProps:k}=Oee({...t,ref:i});return b.jsx(MT,{...w(),children:b.jsx(PT,{classNames:_,inputProps:n(),slots:h,state:c,...k()})})}),Vee=Fee;function Uee(e){var t,i;const c=Pi(),{validationBehavior:h}=Gf(wh)||{},[_,w]=Zo(e,p_.variantKeys),{ref:n,as:k,label:N,inputRef:B,description:F,startContent:G,endContent:Q,className:te,classNames:Y,groupProps:oe={},labelProps:de,fieldProps:ge,errorMessageProps:be,descriptionProps:pe,validationBehavior:we=(t=h??(c==null?void 0:c.validationBehavior))!=null?t:"native",shouldForceLeadingZeros:ke=!0,minValue:Ae,maxValue:re,isInvalid:Te,errorMessage:se}=_,ue=Nn(n),De=Nn(B),{locale:ce}=Ms(),je=(i=e.disableAnimation)!=null?i:c==null?void 0:c.disableAnimation,Le=jee({...e,label:N,locale:ce,minValue:Ae,maxValue:re,validationBehavior:we,isInvalid:Te,shouldForceLeadingZeros:ke}),{labelProps:Re,fieldProps:Ge,inputProps:ze,validationErrors:ot,validationDetails:Ee,descriptionProps:Ke,errorMessageProps:nt,isInvalid:Xe}=iee({...e,label:N,validationBehavior:we,inputRef:De},Le,ue),ut=Br(Y==null?void 0:Y.base,te),Pt=e2({labelPlacement:e.labelPlacement,label:N}),Ct=Pt==="outside"||Pt==="outside-left",Zt=V.useMemo(()=>p_({...w,disableAnimation:je,labelPlacement:Pt}),[Ko(w),Pt,je]),Dt=Er=>({...xr(Re,de,Er),"data-slot":"label",className:Zt.label({class:Br(Y==null?void 0:Y.label,void 0)})}),er=Er=>({...Er,...ze,ref:De}),Se=(Er={})=>({ref:ue,"data-slot":"input",...xr(Ge,ge,Er),className:Zt.input({class:Br(Y==null?void 0:Y.input,Er==null?void 0:Er.className)})}),ur=(Er={})=>({...Er,...oe,"data-slot":"input-wrapper",className:Zt.inputWrapper({class:Y==null?void 0:Y.inputWrapper}),onClick:Ge.onClick}),Sr=Er=>({...Er,"data-slot":"inner-wrapper",className:Zt.innerWrapper({class:Y==null?void 0:Y.innerWrapper})}),yt=Er=>({...Er,"data-slot":"helper-wrapper",className:Zt.helperWrapper({class:Br(Y==null?void 0:Y.helperWrapper,void 0)})}),dt=(Er={})=>({...xr(nt,be,Er),"data-slot":"error-message",className:Zt.errorMessage({class:Br(Y==null?void 0:Y.errorMessage,Er==null?void 0:Er.className)})}),$t=(Er={})=>({...xr(Ke,pe,Er),"data-slot":"description",className:Zt.description({class:Br(Y==null?void 0:Y.description,Er==null?void 0:Er.className)})});return{state:Le,domRef:ue,slots:Zt,classNames:Y,labelPlacement:Pt,getBaseGroupProps:()=>({as:k,label:N,description:F,endContent:Q,errorMessage:se,isInvalid:Xe,startContent:G,validationDetails:Ee,validationErrors:ot,shouldLabelBeOutside:Ct,"data-slot":"base","data-required":Vt(e.isRequired),"data-disabled":Vt(e.isDisabled),"data-readonly":Vt(e.isReadOnly),"data-invalid":Vt(Xe),"data-has-start-content":Vt(!!G),"data-has-end-content":Vt(!!Q),descriptionProps:$t(),errorMessageProps:dt(),groupProps:ur(),helperWrapperProps:yt(),labelProps:Dt(),wrapperProps:Sr(),className:Zt.base({class:ut})}),getFieldProps:Se,getInputProps:er}}var Gee=Bn(function(t,i){const{state:c,slots:h,classNames:_,getBaseGroupProps:w,getInputProps:n,getFieldProps:k}=Uee({...t,ref:i});return b.jsx(MT,{...w(),children:b.jsx(PT,{classNames:_,inputProps:n(),slots:h,state:c,...k()})})}),MN=Gee,Hee={"ar-AE":{endTime:" ",startTime:" ",time:""},"bg-BG":{endTime:" ",startTime:" ",time:""},"cs-CZ":{endTime:"Konen as",startTime:"Poten as",time:"as"},"da-DK":{endTime:"Sluttidspunkt",startTime:"Starttidspunkt",time:"Klokkeslt"},"de-DE":{endTime:"Endzeit",startTime:"Startzeit",time:"Uhrzeit"},"el-GR":{endTime:" ",startTime:" ",time:""},"en-US":{time:"Time",startTime:"Start time",endTime:"End time"},"es-ES":{endTime:"Hora de finalizacin",startTime:"Hora de inicio",time:"Hora"},"et-EE":{endTime:"Lpuaeg",startTime:"Algusaeg",time:"Aeg"},"fi-FI":{endTime:"Pttymisaika",startTime:"Alkamisaika",time:"Aika"},"fr-FR":{endTime:"Heure de fin",startTime:"Heure de dbut",time:"Heure"},"he-IL":{endTime:" ",startTime:" ",time:""},"hr-HR":{endTime:"Vrijeme zavretka",startTime:"Vrijeme poetka",time:"Vrijeme"},"hu-HU":{endTime:"Befejezs ideje",startTime:"Kezds ideje",time:"Id"},"it-IT":{endTime:"Ora di fine",startTime:"Ora di inizio",time:"Ora"},"ja-JP":{endTime:"",startTime:"",time:""},"ko-KR":{endTime:" ",startTime:" ",time:""},"it-LT":{endTime:"Pabaigos laikas",startTime:"Pradios laikas",time:"Laikas"},"lv-LV":{endTime:"Beigu laiks",startTime:"Skuma laiks",time:"Laiks"},"nb-NO":{endTime:"Sluttid",startTime:"Starttid",time:"Tid"},"nl-NL":{endTime:"Eindtijd",startTime:"Starttijd",time:"Tijd"},"pl-PL":{endTime:"Godzina kocowa",startTime:"Godzina pocztkowa",time:"Godzina"},"pt-BR":{endTime:"Hora final",startTime:"Hora inicial",time:"Hora"},"pt-PT":{endTime:"Terminar tempo",startTime:"Iniciar tempo",time:"Tempo"},"ro-RO":{endTime:"Ora de sfrit",startTime:"Ora de nceput",time:"Ora"},"ru-RU":{endTime:" ",startTime:" ",time:""},"sk-SK":{endTime:"as ukonenia",startTime:"as zaiatku",time:"as"},"sl-SI":{endTime:"Konni as",startTime:"Zaetni as",time:"as"},"sr-SP":{endTime:"Zavrno vreme",startTime:"Poetno vreme",time:"Vreme"},"sv-SE":{endTime:"Sluttid",startTime:"Starttid",time:"Tid"},"tr-TR":{endTime:"Biti saati",startTime:"Balang saati",time:"Saat"},"uk-UA":{endTime:" ",startTime:" ",time:""},"zh-CN":{endTime:"",startTime:"",time:""},"zh-TW":{endTime:"",startTime:"",time:""}};function qee(e){var t,i,c,h;const _=Pi(),[w,n]=Zo(e,p_.variantKeys),{as:k,ref:N,label:B,endContent:F,selectorIcon:G,inputRef:Q,isInvalid:te,errorMessage:Y,description:oe,startContent:de,validationState:ge,validationBehavior:be,visibleMonths:pe=1,firstDayOfWeek:we,pageBehavior:ke="visible",calendarWidth:Ae=256,isDateUnavailable:re,shouldForceLeadingZeros:Te,showMonthAndYearPickers:se=!1,selectorButtonProps:ue={},popoverProps:De={},timeInputProps:ce={},calendarProps:je={},CalendarTopContent:Le,CalendarBottomContent:Re,createCalendar:Ge}=w,{isHeaderExpanded:ze,isHeaderDefaultExpanded:ot,onHeaderExpandedChange:Ee,...Ke}=je,nt=V.useCallback(Xr=>{Ee==null||Ee(Xr||!1)},[Ee]),[Xe,ut]=Xs(ze,ot??!1,nt),Pt=Nn(N),Ct=(i=(t=e.disableAnimation)!=null?t:_==null?void 0:_.disableAnimation)!=null?i:!1;let Zt=Eu(Hee);const Dt=e.color==="default"||!e.color,er=pe>1,Se=e==null?void 0:e.placeholderValue,ur=Se&&"hour"in Se?Se:null,Sr=e.minValue&&"hour"in e.minValue?e.minValue:null,yt=e.maxValue&&"hour"in e.maxValue?e.maxValue:null,dt={popoverProps:xr({offset:13,placement:"bottom",triggerScaleOnOpen:!1,disableAnimation:Ct},De),selectorButtonProps:xr({isIconOnly:!0,radius:"full",size:"sm",variant:"light",disableAnimation:Ct},ue),calendarProps:xr({showHelper:!1,visibleMonths:pe,pageBehavior:ke,isDateUnavailable:re,showMonthAndYearPickers:se,isHeaderExpanded:Xe,onHeaderExpandedChange:ut,color:Dt?"primary":e.color,disableAnimation:Ct,firstDayOfWeek:we},Ke)},$t={as:k,label:B,ref:Pt,inputRef:Q,description:oe,validationState:ge,shouldForceLeadingZeros:Te,isInvalid:te,errorMessage:Y,validationBehavior:be,"data-invalid":Vt(e==null?void 0:e.isInvalid)},or={...ce,size:"sm",labelPlacement:"outside-left",label:(ce==null?void 0:ce.label)||Zt.format("time"),placeholderValue:ur,hourCycle:w.hourCycle,hideTimeZone:w.hideTimeZone,validationBehavior:be},Er={...dt.popoverProps,children:(h=(c=dt.popoverProps)==null?void 0:c.children)!=null?h:[],triggerRef:Pt},mr={...dt.calendarProps,calendarWidth:Ae,"data-slot":"calendar"},Pr={...dt.selectorButtonProps,"data-slot":"selector-button"};return{domRef:Pt,startContent:de,endContent:F,selectorIcon:G,createCalendar:Ge,stringFormatter:Zt,hasMultipleMonths:er,slotsProps:dt,timeMinValue:Sr,timeMaxValue:yt,visibleMonths:pe,isCalendarHeaderExpanded:Xe,disableAnimation:Ct,CalendarTopContent:Le,CalendarBottomContent:Re,variantProps:n,dateInputProps:$t,timeInputProps:or,popoverProps:Er,calendarProps:mr,userTimeInputProps:ce,selectorButtonProps:Pr,selectorIconProps:{"data-slot":"selector-icon"},onClose:()=>{ze===void 0&&ut(!1)}}}function Wee({className:e,classNames:t,...i}){var c,h,_;const w=Pi(),{validationBehavior:n}=Gf(wh)||{},k=(_=(h=(c=i.validationBehavior)!=null?c:n)!=null?h:w==null?void 0:w.validationBehavior)!=null?_:"native",{domRef:N,startContent:B,endContent:F,selectorIcon:G,createCalendar:Q,isCalendarHeaderExpanded:te,disableAnimation:Y,CalendarTopContent:oe,slotsProps:de,timeMinValue:ge,timeMaxValue:be,CalendarBottomContent:pe,dateInputProps:we,timeInputProps:ke,popoverProps:Ae,calendarProps:re,variantProps:Te,userTimeInputProps:se,selectorButtonProps:ue,selectorIconProps:De,onClose:ce}=qee({...i,validationBehavior:k});let je=Ree({...i,validationBehavior:k,shouldCloseOnSelect:()=>!je.hasTime,onOpenChange:dt=>{dt||ce()}});const Le=V.useRef(null),Re=Br(t==null?void 0:t.base,e),Ge=V.useMemo(()=>G8({...Te,className:e}),[Ko(Te),e]);let{groupProps:ze,labelProps:ot,fieldProps:Ee,buttonProps:Ke,dialogProps:nt,calendarProps:Xe,descriptionProps:ut,errorMessageProps:Pt}=oee({...i,validationBehavior:k},je,N);i.maxValue&&"hour"in i.maxValue&&i.maxValue;const Ct=je.granularity==="hour"||je.granularity==="minute"||je.granularity==="second"?je.granularity:null,Zt=!!Ct;return{state:je,startContent:B,endContent:F,selectorIcon:G,showTimeField:Zt,isCalendarHeaderExpanded:te,disableAnimation:Y,CalendarTopContent:oe,CalendarBottomContent:pe,getDateInputProps:()=>({...we,classNames:t,groupProps:ze,labelProps:ot,createCalendar:Q,errorMessageProps:Pt,descriptionProps:ut,...xr(Te,Ee,{minValue:i.minValue,maxValue:i.maxValue,fullWidth:!0,disableAnimation:Y}),className:Ge.base({class:Re}),innerWrapperProps:{ref:Le},"data-open":Vt(je.isOpen)}),getPopoverProps:(dt={})=>{var $t,or;return{state:je,dialogProps:nt,...Ae,triggerRef:Le,classNames:{content:Ge.popoverContent({class:Br(t==null?void 0:t.popoverContent,(or=($t=de.popoverProps)==null?void 0:$t.classNames)==null?void 0:or.content,dt.className)})},shouldCloseOnInteractOutside:Ae!=null&&Ae.shouldCloseOnInteractOutside?Ae.shouldCloseOnInteractOutside:Er=>pT(Er,Le,je)}},getSelectorButtonProps:()=>({...Ke,...ue,onPress:je.toggle,className:Ge.selectorButton({class:t==null?void 0:t.selectorButton})}),getCalendarProps:()=>{var dt,$t;return{...Xe,...re,classNames:{...re.classNames,base:Ge.calendar({class:Br(t==null?void 0:t.base,(dt=re.classNames)==null?void 0:dt.base)}),content:Ge.calendarContent({class:Br(t==null?void 0:t.calendarContent,($t=re.classNames)==null?void 0:$t.content)})}}},getTimeInputProps:()=>{var dt,$t;return Zt?{...ke,value:je.timeValue,onChange:je.setTimeValue,granularity:Ct,minValue:ge??void 0,maxValue:be??void 0,classNames:{base:Ge.timeInput({class:Br(t==null?void 0:t.timeInput,(dt=se==null?void 0:se.classNames)==null?void 0:dt.base)}),label:Ge.timeInputLabel({class:Br(t==null?void 0:t.timeInputLabel,($t=se==null?void 0:se.classNames)==null?void 0:$t.label)})}}:{}},getSelectorIconProps:()=>({...De,className:Ge.selectorIcon({class:t==null?void 0:t.selectorIcon})})}}var Kee=Bn(function(t,i){const{selectorButtonPlacement:c="end",...h}=t,{state:_,startContent:w,endContent:n,selectorIcon:k,showTimeField:N,disableAnimation:B,isCalendarHeaderExpanded:F,getDateInputProps:G,getPopoverProps:Q,getTimeInputProps:te,getSelectorButtonProps:Y,getSelectorIconProps:oe,getCalendarProps:de,CalendarTopContent:ge,CalendarBottomContent:be}=Wee({...h,ref:i}),pe=V.isValidElement(k)?V.cloneElement(k,oe()):b.jsx(IX,{...oe()}),we=V.useMemo(()=>F?null:N?b.jsxs(b.Fragment,{children:[b.jsx(MN,{...te()}),be]}):be,[_,N,be,F]),ke=V.useMemo(()=>F?null:ge,[N,ge,F]),Ae=_.isOpen?b.jsx(XJ,{...Q(),children:b.jsx(ree,{...de(),bottomContent:we,topContent:ke})}):null,re={...G(),endContent:c==="end"?b.jsx($r,{...Y(),children:n||pe}):n,startContent:c==="start"?b.jsx($r,{...Y(),children:w||pe}):w};return b.jsxs(b.Fragment,{children:[b.jsx(Vee,{...re}),B?Ae:b.jsx(Uf,{children:Ae})]})}),yx=Kee;function Zee(e){const[t,i]=Zo(e,zM.variantKeys),{as:c,title:h,children:_,description:w,onClose:n,isClosable:k,ref:N,icon:B,startContent:F,endContent:G,isVisible:Q,isDefaultVisible:te,onVisibleChange:Y,closeButtonProps:oe={size:"sm"},className:de,classNames:ge,...be}=t,[pe,we]=Xs(Q,te??!0,Y),Ae=typeof(c||"div")=="string",re=Nn(N),Te=V.useCallback(()=>{we(!1),n==null||n()},[we,n]),se=Br(ge==null?void 0:ge.base,de),ue=V.useMemo(()=>zM({hasContent:!md(w)||!md(_),...i}),[w,Ko(i)]),De=V.useCallback(()=>({"data-visible":Vt(pe),"data-closeable":Vt(k),"data-has-title":Vt(!md(h)),"data-has-description":Vt(!md(w)),...xr(Wo(be,{enabled:Ae}),Wo(t)),className:ue.base({class:se})}),[ue,se]),ce=V.useCallback(()=>({className:ue.mainWrapper({class:ge==null?void 0:ge.mainWrapper})}),[ue,ge==null?void 0:ge.mainWrapper]),je=V.useCallback(()=>({className:ue.description({class:ge==null?void 0:ge.description})}),[ue,ge==null?void 0:ge.description]),Le=V.useCallback(()=>({className:ue.title({class:ge==null?void 0:ge.title})}),[ue,ge==null?void 0:ge.title]),Re=V.useCallback(()=>({...oe,className:ue.closeButton({class:ge==null?void 0:ge.closeButton})}),[ue,ge==null?void 0:ge.closeButton]),Ge=V.useCallback(()=>({className:ue.alertIcon({class:ge==null?void 0:ge.alertIcon})}),[ue,ge==null?void 0:ge.alertIcon]),ze=V.useCallback(()=>({className:ue.iconWrapper({class:ge==null?void 0:ge.iconWrapper})}),[ue,ge==null?void 0:ge.iconWrapper]);return{title:h,icon:B,children:_,description:w,isClosable:k,domRef:re,endContent:G,startContent:F,getBaseProps:De,getMainWrapperProps:ce,getDescriptionProps:je,getTitleProps:Le,color:i.color,getCloseButtonProps:Re,handleClose:Te,isVisible:pe,onClose:n,getAlertIconProps:Ge,getIconWrapperProps:ze}}var T6={primary:jM,secondary:jM,success:K8,warning:W8,danger:Z8},AN=Bn((e,t)=>{const{title:i,icon:c,children:h,description:_,endContent:w,startContent:n,isClosable:k,domRef:N,handleClose:B,getBaseProps:F,getMainWrapperProps:G,getDescriptionProps:Q,getTitleProps:te,getCloseButtonProps:Y,color:oe,isVisible:de,onClose:ge,getAlertIconProps:be,getIconWrapperProps:pe}=Zee({...e,ref:t});if(!de)return null;const we=c&&V.isValidElement(c)?V.cloneElement(c,be()):null,ke=T6[oe]||T6.primary;return b.jsxs("div",{ref:N,role:"alert",...F(),children:[n,b.jsx("div",{...pe(),children:we||b.jsx(ke,{...be()})}),b.jsxs("div",{...G(),children:[!md(i)&&b.jsx("div",{...te(),children:i}),!md(_)&&b.jsx("div",{...Q(),children:_}),h]}),w,(k||ge)&&b.jsx($r,{isIconOnly:!0,"aria-label":"Close",radius:"full",variant:"light",onPress:B,...Y(),children:b.jsx(dT,{height:20,width:20})})]})});AN.displayName="HeroUI.Alert";var Xee=AN;function Yee(e){const{ref:t,className:i,classNames:c,placement:h="right",scrollBehavior:_="inside",size:w="md",motionProps:n,...k}=e,N=Nn(t),B=V.useMemo(()=>{if(!md(n))return n;const te=h==="left"||h==="right"?"x":"y";return{variants:{enter:{[te]:0,transition:{[te]:{duration:.2,ease:Xg.easeOut}}},exit:{[te]:h==="top"||h==="left"?"-100%":"100%",transition:{[te]:{duration:.1,ease:Xg.easeIn}}}}}},[h,n]),F=Br(c==null?void 0:c.base,i),G=V.useMemo(()=>mX({size:w,placement:h}),[w,h]),Q=V.useCallback(()=>({classNames:{...c,base:G.base({class:F})},motionProps:B,scrollBehavior:_,size:w,...k}),[F,c,B,_,w,k]);return{domRef:N,getModalProps:Q}}var kN=Bn(({children:e,...t},i)=>{const{domRef:c,getModalProps:h}=Yee({...t,ref:i});return b.jsx(EQ,{ref:c,...h(),children:e})});kN.displayName="HeroUI.Drawer";var Jee=kN,[Qee,ete]=Sh({name:"InputOtpContext",errorMessage:"useInputOtpContext: `context` is undefined. Seems like you forgot to wrap all input-otp components within `<InputOtp />`"}),tte=({...e})=>{var t;const{classNames:i,slots:c,type:h}=ete(),_=Br(i==null?void 0:i.passwordChar),w=Br(i==null?void 0:i.caret),n=Br(i==null?void 0:i.segment),k=V.useMemo(()=>{var N,B;return e.isActive&&!e.char?b.jsx("div",{className:Zg((N=c.caret)==null?void 0:N.call(c,{class:w}))}):e.char?h==="password"?b.jsx("div",{className:Zg((B=c.passwordChar)==null?void 0:B.call(c,{class:_}))}):b.jsx("div",{children:e.char}):b.jsx("div",{children:e.placeholderChar})},[e.char,e.isActive,e.placeholderChar,h]);return b.jsx("div",{className:Zg((t=c.segment)==null?void 0:t.call(c,{class:n})),"data-active":Vt(e.isActive),"data-focus":Vt(e.isFocused&&e.isActive),"data-focus-visible":Vt(e.isFocusVisible&&e.isActive),"data-has-value":Vt(!!e.char),"data-slot":"segment2",role:"presentation",children:k})};function rte(e){var t,i,c,h;const _=Pi(),{validationBehavior:w}=Gf(wh)||{},[n,k]=Zo(e,RM.variantKeys),{ref:N,baseRef:B,as:F,className:G,classNames:Q,length:te=4,autoFocus:Y,"aria-label":oe="One-time password input",onValueChange:de=()=>{},allowedKeys:ge="^[0-9]*$",validationBehavior:be=(t=w??(_==null?void 0:_.validationBehavior))!=null?t:"native",type:pe,name:we,maxLength:ke,minLength:Ae,textAlign:re="center",onComplete:Te=()=>{},pushPasswordManagerStrategy:se,pasteTransformer:ue,containerClassName:De,noScriptCSSFallback:ce,onChange:je,inputMode:Le,...Re}=n,Ge=F||"div",ze=Nn(N),ot=Nn(B),{isFocusVisible:Ee,isFocused:Ke,focusProps:nt}=Ac({autoFocus:Y,isTextInput:!0}),Xe=V.useCallback(kr=>{de(kr??"")},[de]),[ut,Pt]=Xs(n.value,(i=n.defaultValue)!=null?i:"",Xe),Ct=(h=(c=e.disableAnimation)!=null?c:_==null?void 0:_.disableAnimation)!=null?h:!1,Zt=e.isDisabled,Dt=Br(Q==null?void 0:Q.base,G),er=Rm({...n,validationBehavior:be,value:ut});D_(ze,ut,Pt),L_({...n,validationBehavior:be},er,ze);const{isInvalid:Se,validationErrors:ur,validationDetails:Sr}=er.displayValidation,yt=e.isReadOnly,dt=e.isRequired,$t=e.isInvalid||Se,or=typeof n.errorMessage=="function"?n.errorMessage({isInvalid:$t,validationErrors:ur,validationDetails:Sr}):n.errorMessage||(ur==null?void 0:ur.join(" ")),Er=n.description,mr=!!Er||!!or,Pr=V.useMemo(()=>RM({...k,disableAnimation:Ct,isInvalid:$t,isReadOnly:yt}),[Ko(k),Ct,$t,yt]),Fr=V.useCallback((kr={})=>({ref:ot,className:Pr.base({class:Dt}),"data-slot":"base","data-disabled":Vt(Zt),"data-invalid":Vt($t),"data-required":Vt(e==null?void 0:e.isRequired),"data-readonly":Vt(e==null?void 0:e.isReadOnly),"data-filled":Vt(ut.length===te),"aria-label":oe,"aria-required":Vt(e.isRequired),"aria-readonly":Vt(e==null?void 0:e.isReadOnly),role:"base",...xr(Wo(Re,{enabled:!0}),Wo(kr)),onChange:Dr=>{var Nr;const na=(Nr=Dr.target)==null?void 0:Nr.value;new RegExp(ge).test(na)&&(je==null||je(Dr))}}),[ot,Pr,Dt,Zt,$t,dt,yt,ut,te]),$a=V.useCallback((kr={})=>{var Dr;return{...nt,required:dt,disabled:Zt,readOnly:yt,pattern:ge,maxLength:ke??te,minLength:Ae??te,textAlign:re,ref:ze,name:we,value:ut,autoFocus:Y,onChange:Pt,onBlur:qi(nt.onBlur,kr==null?void 0:kr.onBlur),onComplete:Te,pushPasswordManagerStrategy:se,pasteTransformer:ue,noScriptCSSFallback:ce,inputMode:Le??(UF(ge)?"numeric":"text"),containerClassName:(Dr=Pr.wrapper)==null?void 0:Dr.call(Pr,{class:Br(Q==null?void 0:Q.wrapper,De)}),...kr}},[Le,dt,Zt,yt,ge,ze,we,ut,te,Pt,n.onBlur,Te,Y]),Xr=V.useCallback((kr={})=>({className:Pr.segmentWrapper({class:Br(Q==null?void 0:Q.segmentWrapper,kr==null?void 0:kr.className)}),"data-slot":"segment-wrapper","data-disabled":Vt(Zt),"aria-label":oe,...kr}),[Q==null?void 0:Q.segmentWrapper,Zt]),ja=V.useCallback((kr={})=>({className:Pr.helperWrapper({class:Br(Q==null?void 0:Q.helperWrapper,kr==null?void 0:kr.className)}),"data-slot":"helper-wrapper",...kr}),[Q==null?void 0:Q.helperWrapper]),fr=V.useCallback((kr={})=>({className:Pr.errorMessage({class:Br(Q==null?void 0:Q.errorMessage,kr==null?void 0:kr.className)}),"data-slot":"error-message",...kr}),[Q==null?void 0:Q.errorMessage]),Sa=V.useCallback((kr={})=>({className:Pr.description({class:Br(Q==null?void 0:Q.description,kr==null?void 0:kr.className)}),"data-slot":"description",...kr}),[Q==null?void 0:Q.description]);return{Component:Ge,inputRef:ze,length:te,value:ut,type:pe,slots:Pr,hasHelper:mr,classNames:Q,isInvalid:$t,description:Er,errorMessage:or,isFocusVisible:Ee,isFocused:Ke,getBaseProps:Fr,getInputOtpProps:$a,getSegmentWrapperProps:Xr,getHelperWrapperProps:ja,getErrorMessageProps:fr,getDescriptionProps:Sa}}var ate=Object.defineProperty,nte=Object.defineProperties,ite=Object.getOwnPropertyDescriptors,Mw=Object.getOwnPropertySymbols,RN=Object.prototype.hasOwnProperty,IN=Object.prototype.propertyIsEnumerable,E6=(e,t,i)=>t in e?ate(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ste=(e,t)=>{for(var i in t||(t={}))RN.call(t,i)&&E6(e,i,t[i]);if(Mw)for(var i of Mw(t))IN.call(t,i)&&E6(e,i,t[i]);return e},ote=(e,t)=>nte(e,ite(t)),lte=(e,t)=>{var i={};for(var c in e)RN.call(e,c)&&t.indexOf(c)<0&&(i[c]=e[c]);if(e!=null&&Mw)for(var c of Mw(e))t.indexOf(c)<0&&IN.call(e,c)&&(i[c]=e[c]);return i};function cte(e){let t=setTimeout(e,0),i=setTimeout(e,10),c=setTimeout(e,50);return[t,i,c]}function ute(e){let t=V.useRef();return V.useEffect(()=>{t.current=e}),t.current}var dte=18,zN=40,hte=`${zN}px`,fte=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function pte({containerRef:e,inputRef:t,pushPasswordManagerStrategy:i,isFocused:c}){let[h,_]=V.useState(!1),[w,n]=V.useState(!1),[k,N]=V.useState(!1),B=V.useMemo(()=>i==="none"?!1:(i==="increase-width"||i==="experimental-no-flickering")&&h&&w,[h,w,i]),F=V.useCallback(()=>{let G=e.current,Q=t.current;if(!G||!Q||k||i==="none")return;let te=G,Y=te.getBoundingClientRect().left+te.offsetWidth,oe=te.getBoundingClientRect().top+te.offsetHeight/2,de=Y-dte,ge=oe;document.querySelectorAll(fte).length===0&&document.elementFromPoint(de,ge)===G||(_(!0),N(!0))},[e,t,k,i]);return V.useEffect(()=>{let G=e.current;if(!G||i==="none")return;function Q(){let Y=window.innerWidth-G.getBoundingClientRect().right;n(Y>=zN)}Q();let te=setInterval(Q,1e3);return()=>{clearInterval(te)}},[e,i]),V.useEffect(()=>{let G=c||document.activeElement===t.current;if(i==="none"||!G)return;let Q=setTimeout(F,0),te=setTimeout(F,2e3),Y=setTimeout(F,5e3),oe=setTimeout(()=>{N(!0)},6e3);return()=>{clearTimeout(Q),clearTimeout(te),clearTimeout(Y),clearTimeout(oe)}},[t,c,i,F]),{hasPWMBadge:h,willPushPWMBadge:B,PWM_BADGE_SPACE_WIDTH:hte}}var mte=V.createContext({}),LN=V.forwardRef((e,t)=>{var i=e,{value:c,onChange:h,maxLength:_,textAlign:w="left",pattern:n,placeholder:k,inputMode:N="numeric",onComplete:B,pushPasswordManagerStrategy:F="increase-width",pasteTransformer:G,containerClassName:Q,noScriptCSSFallback:te=gte,render:Y,children:oe}=i,de=lte(i,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),ge,be,pe,we,ke;let[Ae,re]=V.useState(typeof de.defaultValue=="string"?de.defaultValue:""),Te=c??Ae,se=ute(Te),ue=V.useCallback(dt=>{h==null||h(dt),re(dt)},[h]),De=V.useMemo(()=>n?typeof n=="string"?new RegExp(n):n:null,[n]),ce=V.useRef(null),je=V.useRef(null),Le=V.useRef({value:Te,onChange:ue,isIOS:typeof window<"u"&&((be=(ge=window==null?void 0:window.CSS)==null?void 0:ge.supports)==null?void 0:be.call(ge,"-webkit-touch-callout","none"))}),Re=V.useRef({prev:[(pe=ce.current)==null?void 0:pe.selectionStart,(we=ce.current)==null?void 0:we.selectionEnd,(ke=ce.current)==null?void 0:ke.selectionDirection]});V.useImperativeHandle(t,()=>ce.current,[]),V.useEffect(()=>{let dt=ce.current,$t=je.current;if(!dt||!$t)return;Le.current.value!==dt.value&&Le.current.onChange(dt.value),Re.current.prev=[dt.selectionStart,dt.selectionEnd,dt.selectionDirection];function or(){if(document.activeElement!==dt){nt(null),ut(null);return}let Pr=dt.selectionStart,Fr=dt.selectionEnd,$a=dt.selectionDirection,Xr=dt.maxLength,ja=dt.value,fr=Re.current.prev,Sa=-1,kr=-1,Dr;if(ja.length!==0&&Pr!==null&&Fr!==null){let Zn=Pr===Fr,on=Pr===ja.length&&ja.length<Xr;if(Zn&&!on){let Ha=Pr;if(Ha===0)Sa=0,kr=1,Dr="forward";else if(Ha===Xr)Sa=Ha-1,kr=Ha,Dr="backward";else if(Xr>1&&ja.length>1){let qa=0;if(fr[0]!==null&&fr[1]!==null){Dr=Ha<fr[1]?"backward":"forward";let Dn=fr[0]===fr[1]&&fr[0]<Xr;Dr==="backward"&&!Dn&&(qa=-1)}Sa=qa+Ha,kr=qa+Ha+1}}Sa!==-1&&kr!==-1&&Sa!==kr&&ce.current.setSelectionRange(Sa,kr,Dr)}let Nr=Sa!==-1?Sa:Pr,na=kr!==-1?kr:Fr,Sn=Dr??$a;nt(Nr),ut(na),Re.current.prev=[Nr,na,Sn]}if(document.addEventListener("selectionchange",or,{capture:!0}),or(),document.activeElement===dt&&Ee(!0),!document.getElementById("input-otp-style")){let Pr=document.createElement("style");if(Pr.id="input-otp-style",document.head.appendChild(Pr),Pr.sheet){let Fr="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Rv(Pr.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Rv(Pr.sheet,`[data-input-otp]:autofill { ${Fr} }`),Rv(Pr.sheet,`[data-input-otp]:-webkit-autofill { ${Fr} }`),Rv(Pr.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Rv(Pr.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Er=()=>{$t&&$t.style.setProperty("--root-height",`${dt.clientHeight}px`)};Er();let mr=new ResizeObserver(Er);return mr.observe(dt),()=>{document.removeEventListener("selectionchange",or,{capture:!0}),mr.disconnect()}},[]);let[Ge,ze]=V.useState(!1),[ot,Ee]=V.useState(!1),[Ke,nt]=V.useState(null),[Xe,ut]=V.useState(null);V.useEffect(()=>{cte(()=>{var dt,$t,or,Er;(dt=ce.current)==null||dt.dispatchEvent(new Event("input"));let mr=($t=ce.current)==null?void 0:$t.selectionStart,Pr=(or=ce.current)==null?void 0:or.selectionEnd,Fr=(Er=ce.current)==null?void 0:Er.selectionDirection;mr!==null&&Pr!==null&&(nt(mr),ut(Pr),Re.current.prev=[mr,Pr,Fr])})},[Te,ot]),V.useEffect(()=>{se!==void 0&&Te!==se&&se.length<_&&Te.length===_&&(B==null||B(Te))},[_,B,se,Te]);let Pt=pte({containerRef:je,inputRef:ce,pushPasswordManagerStrategy:F,isFocused:ot}),Ct=V.useCallback(dt=>{let $t=dt.currentTarget.value.slice(0,_);if($t.length>0&&De&&!De.test($t)){dt.preventDefault();return}typeof se=="string"&&$t.length<se.length&&document.dispatchEvent(new Event("selectionchange")),ue($t)},[_,ue,se,De]),Zt=V.useCallback(()=>{var dt;if(ce.current){let $t=Math.min(ce.current.value.length,_-1),or=ce.current.value.length;(dt=ce.current)==null||dt.setSelectionRange($t,or),nt($t),ut(or)}Ee(!0)},[_]),Dt=V.useCallback(dt=>{var $t,or;let Er=ce.current;if(!G&&(!Le.current.isIOS||!dt.clipboardData||!Er))return;let mr=dt.clipboardData.getData("text/plain"),Pr=G?G(mr):mr;console.log({_content:mr,content:Pr}),dt.preventDefault();let Fr=($t=ce.current)==null?void 0:$t.selectionStart,$a=(or=ce.current)==null?void 0:or.selectionEnd,Xr=(Fr!==$a?Te.slice(0,Fr)+Pr+Te.slice($a):Te.slice(0,Fr)+Pr+Te.slice(Fr)).slice(0,_);if(Xr.length>0&&De&&!De.test(Xr))return;Er.value=Xr,ue(Xr);let ja=Math.min(Xr.length,_-1),fr=Xr.length;Er.setSelectionRange(ja,fr),nt(ja),ut(fr)},[_,ue,De,Te]),er=V.useMemo(()=>({position:"relative",cursor:de.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[de.disabled]),Se=V.useMemo(()=>({position:"absolute",inset:0,width:Pt.willPushPWMBadge?`calc(100% + ${Pt.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:Pt.willPushPWMBadge?`inset(0 ${Pt.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:w,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[Pt.PWM_BADGE_SPACE_WIDTH,Pt.willPushPWMBadge,w]),ur=V.useMemo(()=>V.createElement("input",ote(ste({autoComplete:de.autoComplete||"one-time-code"},de),{"data-input-otp":!0,"data-input-otp-placeholder-shown":Te.length===0||void 0,"data-input-otp-mss":Ke,"data-input-otp-mse":Xe,inputMode:N,pattern:De==null?void 0:De.source,"aria-placeholder":k,style:Se,maxLength:_,value:Te,ref:ce,onPaste:dt=>{var $t;Dt(dt),($t=de.onPaste)==null||$t.call(de,dt)},onChange:Ct,onMouseOver:dt=>{var $t;ze(!0),($t=de.onMouseOver)==null||$t.call(de,dt)},onMouseLeave:dt=>{var $t;ze(!1),($t=de.onMouseLeave)==null||$t.call(de,dt)},onFocus:dt=>{var $t;Zt(),($t=de.onFocus)==null||$t.call(de,dt)},onBlur:dt=>{var $t;Ee(!1),($t=de.onBlur)==null||$t.call(de,dt)}})),[Ct,Zt,Dt,N,Se,_,Xe,Ke,de,De==null?void 0:De.source,Te]),Sr=V.useMemo(()=>({slots:Array.from({length:_}).map((dt,$t)=>{var or;let Er=ot&&Ke!==null&&Xe!==null&&(Ke===Xe&&$t===Ke||$t>=Ke&&$t<Xe),mr=Te[$t]!==void 0?Te[$t]:null,Pr=Te[0]!==void 0?null:(or=k==null?void 0:k[$t])!=null?or:null;return{char:mr,placeholderChar:Pr,isActive:Er,hasFakeCaret:Er&&mr===null}}),isFocused:ot,isHovering:!de.disabled&&Ge}),[ot,Ge,_,Xe,Ke,de.disabled,Te]),yt=V.useMemo(()=>Y?Y(Sr):V.createElement(mte.Provider,{value:Sr},oe),[oe,Sr,Y]);return V.createElement(V.Fragment,null,te!==null&&V.createElement("noscript",null,V.createElement("style",null,te)),V.createElement("div",{ref:je,"data-input-otp-container":!0,style:er,className:Q},yt,V.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},ur)))});LN.displayName="Input";function Rv(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var gte=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,$N=Bn((e,t)=>{const i=rte({...e,ref:t}),{Component:c,hasHelper:h,isInvalid:_,errorMessage:w,description:n,isFocusVisible:k,isFocused:N,getBaseProps:B,getInputOtpProps:F,getSegmentWrapperProps:G,getHelperWrapperProps:Q,getErrorMessageProps:te,getDescriptionProps:Y}=i,oe=V.useMemo(()=>h?b.jsx("div",{...Q(),children:_&&w?b.jsx("div",{...te(),children:w}):b.jsx("div",{...Y(),children:n})}):null,[h,_,w,n,Q,te,Y]);return b.jsx(Qee,{value:i,children:b.jsxs(c,{...B(),children:[b.jsx(LN,{...F(),render:({slots:de})=>b.jsx("div",{...G(),children:de.map((ge,be)=>b.jsx(tte,{...ge,isFocusVisible:k,isFocused:N},be))})}),oe]})})});$N.displayName="HeroUI.InputOtp";var C6=$N,NN=({direction:e,...t})=>b.jsx($r,{disableRipple:!0,isIconOnly:!0,...t,children:e=="up"?b.jsx(zX,{}):b.jsx(LX,{})});NN.displayName="HeroUI.NumberInputStepper";var D6=NN;function yte(e){let{minValue:t,maxValue:i,step:c,formatOptions:h,value:_,defaultValue:w=NaN,onChange:n,locale:k,isDisabled:N,isReadOnly:B}=e;_===null&&(_=NaN),_!==void 0&&!isNaN(_)&&(c!==void 0&&!isNaN(c)?_=Sf(_,t,i,c):_=Wg(_,t,i)),isNaN(w)||(c!==void 0&&!isNaN(c)?w=Sf(w,t,i,c):w=Wg(w,t,i));let[F,G]=Xs(_,isNaN(w)?NaN:w,n),[Q,te]=V.useState(()=>isNaN(F)?"":new uw(k,h).format(F)),Y=V.useMemo(()=>new S5(k,h),[k,h]),oe=V.useMemo(()=>Y.getNumberingSystem(Q),[Y,Q]),de=V.useMemo(()=>new uw(k,{...h,numberingSystem:oe}),[k,h,oe]),ge=V.useMemo(()=>de.resolvedOptions(),[de]),be=V.useCallback(nt=>isNaN(nt)||nt===null?"":de.format(nt),[de]),pe=Rm({...e,value:F}),we=c!==void 0&&!isNaN(c)?c:1;ge.style==="percent"&&(c===void 0||isNaN(c))&&(we=.01);let[ke,Ae]=V.useState(F),[re,Te]=V.useState(k),[se,ue]=V.useState(h);(!Object.is(F,ke)||k!==re||h!==se)&&(te(be(F)),Ae(F),Te(k),ue(h));let De=V.useMemo(()=>Y.parse(Q),[Y,Q]),ce=()=>{if(!Q.length){G(NaN),te(_===void 0?"":be(F));return}if(isNaN(De)){te(be(F));return}let nt;c===void 0||isNaN(c)?nt=Wg(De,t,i):nt=Sf(De,t,i,c),nt=Y.parse(be(nt)),G(nt),te(be(_===void 0?nt:F))},je=(nt,Xe=0)=>{let ut=De;if(isNaN(ut)){let Pt=isNaN(Xe)?0:Xe;return Sf(Pt,t,i,we)}else{let Pt=Sf(ut,t,i,we);return nt==="+"&&Pt>ut||nt==="-"&&Pt<ut?Pt:Sf(y4(nt,ut,we),t,i,we)}},Le=()=>{let nt=je("+",t);nt===F&&te(be(nt)),G(nt),pe.commitValidation()},Re=()=>{let nt=je("-",i);nt===F&&te(be(nt)),G(nt),pe.commitValidation()},Ge=()=>{i!=null&&(G(Sf(i,t,i,we)),pe.commitValidation())},ze=()=>{t!=null&&(G(t),pe.commitValidation())},ot=V.useMemo(()=>!N&&!B&&(isNaN(De)||i===void 0||isNaN(i)||Sf(De,t,i,we)>De||y4("+",De,we)<=i),[N,B,t,i,we,De]),Ee=V.useMemo(()=>!N&&!B&&(isNaN(De)||t===void 0||isNaN(t)||Sf(De,t,i,we)<De||y4("-",De,we)>=t),[N,B,t,i,we,De]);return{...pe,validate:nt=>Y.isValidPartialNumber(nt,t,i),increment:Le,incrementToMax:Ge,decrement:Re,decrementToMin:ze,canIncrement:ot,canDecrement:Ee,minValue:t,maxValue:i,numberValue:De,setNumberValue:G,setInputValue:te,inputValue:Q,commit:ce}}function y4(e,t,i){let c=e==="+"?t+i:t-i;if(t%1!==0||i%1!==0){const h=t.toString().split("."),_=i.toString().split("."),w=h[1]&&h[1].length||0,n=_[1]&&_[1].length||0,k=Math.pow(10,Math.max(w,n));t=Math.round(t*k),i=Math.round(i*k),c=e==="+"?t+i:t-i,c/=k}return c}var BN={};BN={decrease:e=>` ${e.fieldLabel}`,increase:e=>` ${e.fieldLabel}`,numberField:" "};var jN={};jN={decrease:e=>` ${e.fieldLabel}`,increase:e=>` ${e.fieldLabel}`,numberField:"  "};var ON={};ON={decrease:e=>`Snit ${e.fieldLabel}`,increase:e=>`Zvit ${e.fieldLabel}`,numberField:"seln pole"};var FN={};FN={decrease:e=>`Reducer ${e.fieldLabel}`,increase:e=>`g ${e.fieldLabel}`,numberField:"Talfelt"};var VN={};VN={decrease:e=>`${e.fieldLabel} verringern`,increase:e=>`${e.fieldLabel} erhhen`,numberField:"Nummernfeld"};var UN={};UN={decrease:e=>` ${e.fieldLabel}`,increase:e=>` ${e.fieldLabel}`,numberField:" "};var GN={};GN={decrease:e=>`Decrease ${e.fieldLabel}`,increase:e=>`Increase ${e.fieldLabel}`,numberField:"Number field"};var HN={};HN={decrease:e=>`Reducir ${e.fieldLabel}`,increase:e=>`Aumentar ${e.fieldLabel}`,numberField:"Campo de nmero"};var qN={};qN={decrease:e=>`Vhenda ${e.fieldLabel}`,increase:e=>`Suurenda ${e.fieldLabel}`,numberField:"Numbri vli"};var WN={};WN={decrease:e=>`Vhenn ${e.fieldLabel}`,increase:e=>`Lis ${e.fieldLabel}`,numberField:"Numerokentt"};var KN={};KN={decrease:e=>`Diminuer ${e.fieldLabel}`,increase:e=>`Augmenter ${e.fieldLabel}`,numberField:"Champ de nombre"};var ZN={};ZN={decrease:e=>` ${e.fieldLabel}`,increase:e=>` ${e.fieldLabel}`,numberField:" "};var XN={};XN={decrease:e=>`Smanji ${e.fieldLabel}`,increase:e=>`Poveaj ${e.fieldLabel}`,numberField:"Polje broja"};var YN={};YN={decrease:e=>`${e.fieldLabel} cskkentse`,increase:e=>`${e.fieldLabel} nvelse`,numberField:"Szmmez"};var JN={};JN={decrease:e=>`Riduci ${e.fieldLabel}`,increase:e=>`Aumenta ${e.fieldLabel}`,numberField:"Campo numero"};var QN={};QN={decrease:e=>`${e.fieldLabel}`,increase:e=>`${e.fieldLabel}`,numberField:""};var eB={};eB={decrease:e=>`${e.fieldLabel} `,increase:e=>`${e.fieldLabel} `,numberField:" "};var tB={};tB={decrease:e=>`Sumainti ${e.fieldLabel}`,increase:e=>`Padidinti ${e.fieldLabel}`,numberField:"Numerio laukas"};var rB={};rB={decrease:e=>`Samazinana ${e.fieldLabel}`,increase:e=>`Palielinana ${e.fieldLabel}`,numberField:"Skaitu lauks"};var aB={};aB={decrease:e=>`Reduser ${e.fieldLabel}`,increase:e=>`k ${e.fieldLabel}`,numberField:"Tallfelt"};var nB={};nB={decrease:e=>`${e.fieldLabel} verlagen`,increase:e=>`${e.fieldLabel} verhogen`,numberField:"Getalveld"};var iB={};iB={decrease:e=>`Zmniejsz ${e.fieldLabel}`,increase:e=>`Zwiksz ${e.fieldLabel}`,numberField:"Pole numeru"};var sB={};sB={decrease:e=>`Diminuir ${e.fieldLabel}`,increase:e=>`Aumentar ${e.fieldLabel}`,numberField:"Campo de nmero"};var oB={};oB={decrease:e=>`Diminuir ${e.fieldLabel}`,increase:e=>`Aumentar ${e.fieldLabel}`,numberField:"Campo numrico"};var lB={};lB={decrease:e=>`Scdere ${e.fieldLabel}`,increase:e=>`Cretere ${e.fieldLabel}`,numberField:"Cmp numeric"};var cB={};cB={decrease:e=>` ${e.fieldLabel}`,increase:e=>` ${e.fieldLabel}`,numberField:" "};var uB={};uB={decrease:e=>`Zni ${e.fieldLabel}`,increase:e=>`Zvi ${e.fieldLabel}`,numberField:"seln pole"};var dB={};dB={decrease:e=>`Upadati ${e.fieldLabel}`,increase:e=>`Poveajte ${e.fieldLabel}`,numberField:"tevilno polje"};var hB={};hB={decrease:e=>`Smanji ${e.fieldLabel}`,increase:e=>`Poveaj ${e.fieldLabel}`,numberField:"Polje broja"};var fB={};fB={decrease:e=>`Minska ${e.fieldLabel}`,increase:e=>`ka ${e.fieldLabel}`,numberField:"Nummerflt"};var pB={};pB={decrease:e=>`${e.fieldLabel} azalt`,increase:e=>`${e.fieldLabel} arttr`,numberField:"Say alan"};var mB={};mB={decrease:e=>` ${e.fieldLabel}`,increase:e=>` ${e.fieldLabel}`,numberField:" "};var gB={};gB={decrease:e=>` ${e.fieldLabel}`,increase:e=>` ${e.fieldLabel}`,numberField:""};var yB={};yB={decrease:e=>` ${e.fieldLabel}`,increase:e=>` ${e.fieldLabel}`,numberField:""};var xB={};xB={"ar-AE":BN,"bg-BG":jN,"cs-CZ":ON,"da-DK":FN,"de-DE":VN,"el-GR":UN,"en-US":GN,"es-ES":HN,"et-EE":qN,"fi-FI":WN,"fr-FR":KN,"he-IL":ZN,"hr-HR":XN,"hu-HU":YN,"it-IT":JN,"ja-JP":QN,"ko-KR":eB,"lt-LT":tB,"lv-LV":rB,"nb-NO":aB,"nl-NL":nB,"pl-PL":iB,"pt-BR":sB,"pt-PT":oB,"ro-RO":lB,"ru-RU":cB,"sk-SK":uB,"sl-SI":dB,"sr-SP":hB,"sv-SE":fB,"tr-TR":pB,"uk-UA":mB,"zh-CN":gB,"zh-TW":yB};function xte(e){return e&&e.__esModule?e.default:e}function vte(e,t,i){let{id:c,decrementAriaLabel:h,incrementAriaLabel:_,isDisabled:w,isReadOnly:n,isRequired:k,minValue:N,maxValue:B,autoFocus:F,label:G,formatOptions:Q,onBlur:te=()=>{},onFocus:Y,onFocusChange:oe,onKeyDown:de,onKeyUp:ge,description:be,errorMessage:pe,isWheelDisabled:we,...ke}=e,{increment:Ae,incrementToMax:re,decrement:Te,decrementToMin:se,numberValue:ue,inputValue:De,commit:ce,commitValidation:je}=t;const Le=Eu(xte(xB),"@react-aria/numberfield");let Re=Ns(c),{focusProps:Ge}=P_({onBlur(){ce()}}),ze=tS(Q),ot=V.useMemo(()=>ze.resolvedOptions(),[ze]),Ee=tS({...Q,currencySign:void 0}),Ke=V.useMemo(()=>isNaN(ue)?"":Ee.format(ue),[Ee,ue]),{spinButtonProps:nt,incrementButtonProps:Xe,decrementButtonProps:ut}=U$({isDisabled:w,isReadOnly:n,isRequired:k,maxValue:B,minValue:N,onIncrement:Ae,onIncrementToMax:re,onDecrement:Te,onDecrementToMin:se,value:ue,textValue:Ke}),[Pt,Ct]=V.useState(!1),{focusWithinProps:Zt}=yd({isDisabled:w,onFocusWithinChange:Ct}),Dt=V.useCallback(on=>{Math.abs(on.deltaY)<=Math.abs(on.deltaX)||(on.deltaY>0?Ae():on.deltaY<0&&Te())},[Te,Ae]);AG({onScroll:Dt,isDisabled:we||w||n||!Pt},i);var Se;let ur=((Se=ot.maximumFractionDigits)!==null&&Se!==void 0?Se:0)>0,Sr=t.minValue===void 0||isNaN(t.minValue)||t.minValue<0,yt="numeric";Mk()?Sr?yt="text":ur&&(yt="decimal"):hx()&&(Sr?yt="numeric":ur&&(yt="decimal"));let dt=on=>{t.validate(on)&&t.setInputValue(on)},$t=Fl(e),or=V.useCallback(on=>{on.key==="Enter"?(ce(),je()):on.continuePropagation()},[ce,je]),{isInvalid:Er,validationErrors:mr,validationDetails:Pr}=t.displayValidation,{labelProps:Fr,inputProps:$a,descriptionProps:Xr,errorMessageProps:ja}=AJ({...ke,...$t,name:void 0,label:G,autoFocus:F,isDisabled:w,isReadOnly:n,isRequired:k,validate:void 0,[nx]:t,value:De,defaultValue:void 0,autoComplete:"off","aria-label":e["aria-label"]||void 0,"aria-labelledby":e["aria-labelledby"]||void 0,id:Re,type:"text",inputMode:yt,onChange:dt,onBlur:te,onFocus:Y,onFocusChange:oe,onKeyDown:V.useMemo(()=>qi(or,de),[or,de]),onKeyUp:ge,description:be,errorMessage:pe},t,i);D_(i,t.numberValue,t.setNumberValue);let fr=xr(nt,Ge,$a,{role:null,"aria-roledescription":Mm()?null:Le.format("numberField"),"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null,autoCorrect:"off",spellCheck:"false"});e.validationBehavior==="native"&&(fr["aria-required"]=void 0);let Sa=on=>{var Ha;document.activeElement!==i.current&&(on.pointerType==="mouse"?(Ha=i.current)===null||Ha===void 0||Ha.focus():on.target.focus())},kr=e["aria-label"]||(typeof e.label=="string"?e.label:""),Dr;kr||(Dr=e.label!=null?Fr.id:e["aria-labelledby"]);let Nr=Ns(),na=Ns(),Sn=xr(Xe,{"aria-label":_||Le.format("increase",{fieldLabel:kr}).trim(),id:Dr&&!_?Nr:null,"aria-labelledby":Dr&&!_?`${Nr} ${Dr}`:null,"aria-controls":Re,excludeFromTabOrder:!0,preventFocusOnPress:!0,allowFocusWhenDisabled:!0,isDisabled:!t.canIncrement,onPressStart:Sa}),Zn=xr(ut,{"aria-label":h||Le.format("decrease",{fieldLabel:kr}).trim(),id:Dr&&!h?na:null,"aria-labelledby":Dr&&!h?`${na} ${Dr}`:null,"aria-controls":Re,excludeFromTabOrder:!0,preventFocusOnPress:!0,allowFocusWhenDisabled:!0,isDisabled:!t.canDecrement,onPressStart:Sa});return{groupProps:{...Zt,role:"group","aria-disabled":w,"aria-invalid":Er?"true":void 0},labelProps:Fr,inputProps:fr,incrementButtonProps:Sn,decrementButtonProps:Zn,errorMessageProps:ja,descriptionProps:Xr,isInvalid:Er,validationErrors:mr,validationDetails:Pr}}function _te(e){var t,i,c;const h=Pi(),{validationBehavior:_}=Gf(wh)||{},[w,n]=Zo(e,kM.variantKeys),{ref:k,as:N,label:B,baseRef:F,wrapperRef:G,description:Q,className:te,classNames:Y,autoFocus:oe,startContent:de,endContent:ge,onClear:be,onChange:pe,validationBehavior:we=(t=_??(h==null?void 0:h.validationBehavior))!=null?t:"native",innerWrapperRef:ke,onValueChange:Ae,hideStepper:re,...Te}=w,[se,ue]=V.useState(!1),De=N||"div",ce=(c=(i=e.disableAnimation)!=null?i:h==null?void 0:h.disableAnimation)!=null?c:!1,je=Nn(k),Le=Nn(F),Re=Nn(G),Ge=Nn(ke),{locale:ze}=Ms(),ot=yte({...e,validationBehavior:we,locale:ze,onChange:qi(Ae,pe)}),{groupProps:Ee,labelProps:Ke,inputProps:nt,incrementButtonProps:Xe,decrementButtonProps:ut,descriptionProps:Pt,errorMessageProps:Ct,isInvalid:Zt,validationErrors:Dt,validationDetails:er}=vte({...e,validationBehavior:we},ot,je),Se=isNaN(ot.numberValue)?"":ot.numberValue,ur=!md(Se),Sr=ur||se,yt=Br(Y==null?void 0:Y.base,te,ur?"is-filled":""),dt=V.useCallback(()=>{var pt;ot.setInputValue(""),be==null||be(),(pt=je.current)==null||pt.focus()},[ot.setInputValue,be]);gx(()=>{je.current&&ot.setInputValue(je.current.value)},[je.current]);const{isFocusVisible:$t,isFocused:or,focusProps:Er}=Ac({autoFocus:oe,isTextInput:!0}),{isHovered:mr,hoverProps:Pr}=wo({isDisabled:!!(e!=null&&e.isDisabled)}),{isHovered:Fr,hoverProps:$a}=wo({isDisabled:!!(e!=null&&e.isDisabled)}),{focusProps:Xr,isFocusVisible:ja}=Ac(),{focusWithinProps:fr}=yd({onFocusWithinChange:ue}),{pressProps:Sa}=wu({isDisabled:!!(e!=null&&e.isDisabled)||!!(e!=null&&e.isReadOnly),onPress:dt}),kr=e2({labelPlacement:e.labelPlacement,label:B}),Dr=typeof w.errorMessage=="function"?w.errorMessage({isInvalid:Zt,validationErrors:Dt,validationDetails:er}):w.errorMessage||(Dt==null?void 0:Dt.join(" ")),Nr=!!be||e.isClearable,na=!!B||!!Q||!!Dr,Sn=!!w.placeholder,Zn=!!B,on=!!Q||!!Dr,Ha=kr==="outside"||kr==="outside-left",qa=kr==="inside",Dn=je.current?(!je.current.value||je.current.value===""||!Se)&&Sn:!1,In=kr==="outside-left",jn=!!de,Wr=Ha?kr==="outside-left"||Sn||kr==="outside"&&jn:!1,yi=kr==="outside"&&!Sn&&!jn,Ka=V.useMemo(()=>kM({...n,isInvalid:Zt,isClearable:Nr,disableAnimation:ce}),[Ko(n),Zt,Nr,jn,ce]),la=V.useCallback(pt=>{pt.key==="Escape"&&Se&&(Nr||be)&&!e.isReadOnly&&(ot.setInputValue(""),be==null||be())},[Se,ot.setInputValue,be,Nr,e.isReadOnly]),yn=V.useCallback((pt={})=>({ref:Le,className:Ka.base({class:yt}),"data-slot":"base","data-filled":Vt(ur||Sn||jn||Dn),"data-filled-within":Vt(Sr||Sn||jn||Dn),"data-focus-within":Vt(se),"data-focus-visible":Vt($t),"data-readonly":Vt(e.isReadOnly),"data-focus":Vt(or),"data-hover":Vt(mr||Fr),"data-required":Vt(e.isRequired),"data-invalid":Vt(Zt),"data-disabled":Vt(e.isDisabled),"data-has-elements":Vt(na),"data-has-helper":Vt(on),"data-has-label":Vt(Zn),"data-has-value":Vt(!Dn),...fr,...pt}),[Ka,yt,ur,or,mr,Fr,Zt,on,Zn,na,Dn,jn,se,$t,Sn,fr,e.isReadOnly,e.isRequired,e.isDisabled]),Xn=V.useCallback((pt={})=>({"data-slot":"label",className:Ka.label({class:Y==null?void 0:Y.label}),...xr(Ke,$a,pt)}),[Ka,Fr,Ke,Y==null?void 0:Y.label]),js=V.useCallback((pt={})=>({"data-slot":"input","data-filled":Vt(ur),"data-has-start-content":Vt(jn),"data-has-end-content":Vt(!!ge),className:Ka.input({class:Br(Y==null?void 0:Y.input,ur?"is-filled":"")}),...xr(Er,nt,Wo(Te,{enabled:!0,labelable:!0,omitEventNames:new Set(Object.keys(nt)),omitPropNames:new Set(["value"])}),pt),"aria-readonly":Vt(e.isReadOnly),onChange:qi(nt.onChange,pe),onKeyDown:qi(nt.onKeyDown,pt.onKeyDown,la),ref:je}),[Ka,Er,nt,Te,ur,jn,ge,Y==null?void 0:Y.input,e.isReadOnly,e.isRequired,pe,la]),qn=V.useCallback((pt={})=>({name:e.name,value:Se,"data-slot":"hidden-input",type:"hidden",...pt}),[Se,e.name]),ga=V.useCallback((pt={})=>({ref:Re,"data-slot":"input-wrapper","data-hover":Vt(mr||Fr),"data-focus-visible":Vt($t),"data-focus":Vt(or),className:Ka.inputWrapper({class:Br(Y==null?void 0:Y.inputWrapper,ur?"is-filled":"")}),...xr(pt,Pr),onClick:At=>{je.current&&At.currentTarget===At.target&&je.current.focus()},style:{cursor:"text",...pt.style}}),[Ka,mr,Fr,$t,or,Se,Y==null?void 0:Y.inputWrapper]),St=V.useCallback((pt={})=>({ref:Ge,"data-slot":"inner-wrapper",onClick:At=>{je.current&&At.currentTarget===At.target&&je.current.focus()},className:Ka.innerWrapper({class:Br(Y==null?void 0:Y.innerWrapper,pt==null?void 0:pt.className)}),...xr(Ee,pt)}),[Ka,Y==null?void 0:Y.innerWrapper]),ye=V.useCallback((pt={})=>({...pt,"data-slot":"main-wrapper",className:Ka.mainWrapper({class:Br(Y==null?void 0:Y.mainWrapper,pt==null?void 0:pt.className)})}),[Ka,Y==null?void 0:Y.mainWrapper]),Ce=V.useCallback((pt={})=>({...pt,"data-slot":"helper-wrapper",className:Ka.helperWrapper({class:Br(Y==null?void 0:Y.helperWrapper,pt==null?void 0:pt.className)})}),[Ka,Y==null?void 0:Y.helperWrapper]),Fe=V.useCallback((pt={})=>({...pt,...Pt,"data-slot":"description",className:Ka.description({class:Br(Y==null?void 0:Y.label,pt==null?void 0:pt.className)})}),[Ka,Y==null?void 0:Y.description]),Ye=V.useCallback((pt={})=>({...pt,...Ct,"data-slot":"error-message",className:Ka.errorMessage({class:Br(Y==null?void 0:Y.errorMessage,pt==null?void 0:pt.className)})}),[Ka,Ct,Y==null?void 0:Y.errorMessage]),Qe=V.useCallback((pt={})=>({...pt,type:"button",tabIndex:-1,disabled:e.isDisabled,"aria-label":"clear input","data-slot":"clear-button","data-focus-visible":Vt(ja),className:Ka.clearButton({class:Br(Y==null?void 0:Y.clearButton,pt==null?void 0:pt.className)}),...xr(Sa,Xr)}),[Ka,ja,Sa,Xr,Y==null?void 0:Y.clearButton]),ct=V.useCallback((pt={})=>({...pt,"data-slot":"stepper-wrapper",className:Ka.stepperWrapper({class:Br(Y==null?void 0:Y.stepperWrapper,pt==null?void 0:pt.className)})}),[Ka]),bt=V.useCallback((pt={})=>({...pt,type:"button",disabled:e.isDisabled,"data-slot":"increase-button",className:Ka.stepperButton({class:Br(Y==null?void 0:Y.stepperButton,pt==null?void 0:pt.className)}),...xr(Xe,pt)}),[Ka]),ft=V.useCallback((pt={})=>({type:"button",disabled:e.isDisabled,"data-slot":"decrease-button",className:Ka.stepperButton({class:Br(Y==null?void 0:Y.stepperButton,pt==null?void 0:pt.className)}),...xr(ut,pt)}),[Ka]);return{Component:De,classNames:Y,domRef:je,label:B,description:Q,startContent:de,endContent:ge,labelPlacement:kr,isClearable:Nr,hasHelper:on,hasStartContent:jn,isLabelOutside:Wr,isOutsideLeft:In,isLabelOutsideAsPlaceholder:yi,shouldLabelBeOutside:Ha,shouldLabelBeInside:qa,hasPlaceholder:Sn,isInvalid:Zt,errorMessage:Dr,hideStepper:re,incrementButtonProps:Xe,decrementButtonProps:ut,getBaseProps:yn,getLabelProps:Xn,getNumberInputProps:js,getHiddenNumberInputProps:qn,getMainWrapperProps:ye,getInputWrapperProps:ga,getInnerWrapperProps:St,getHelperWrapperProps:Ce,getDescriptionProps:Fe,getErrorMessageProps:Ye,getClearButtonProps:Qe,getStepperIncreaseButtonProps:bt,getStepperDecreaseButtonProps:ft,getStepperWrapperProps:ct}}var vB=Bn((e,t)=>{const{Component:i,label:c,description:h,isClearable:_,startContent:w,endContent:n,labelPlacement:k,hasHelper:N,isOutsideLeft:B,shouldLabelBeOutside:F,errorMessage:G,isInvalid:Q,hideStepper:te,getBaseProps:Y,getLabelProps:oe,getNumberInputProps:de,getHiddenNumberInputProps:ge,getInnerWrapperProps:be,getInputWrapperProps:pe,getMainWrapperProps:we,getHelperWrapperProps:ke,getDescriptionProps:Ae,getErrorMessageProps:re,getClearButtonProps:Te,getStepperIncreaseButtonProps:se,getStepperDecreaseButtonProps:ue,getStepperWrapperProps:De}=_te({...e,ref:t}),ce=c?b.jsx("label",{...oe(),children:c}):null,je=V.useMemo(()=>_?b.jsxs(b.Fragment,{children:[b.jsx("button",{...Te(),children:b.jsx(uT,{})}),n]}):n,[_,Te]),Le=V.useMemo(()=>{const ze=Q&&G;return!N||!(ze||h)?null:b.jsx("div",{...ke(),children:ze?b.jsx("div",{...re(),children:G}):b.jsx("div",{...Ae(),children:h})})},[N,Q,G,h,ke,re,Ae]),Re=V.useMemo(()=>b.jsxs("div",{...be(),children:[w,b.jsx("input",{...de()}),b.jsx("input",{...ge()}),je,!te&&b.jsxs("div",{...De(),children:[b.jsx(D6,{...se(),direction:"up"}),b.jsx(D6,{...ue(),direction:"down"})]})]}),[w,je,de,be]),Ge=V.useMemo(()=>F?b.jsxs("div",{...we(),children:[b.jsxs("div",{...pe(),children:[B?null:ce,Re]}),Le]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{...pe(),children:[ce,Re]}),Le]}),[k,Le,F,ce,Re,G,h,we,pe,re,Ae]);return b.jsxs(i,{...Y(),children:[B?ce:null,Ge]})});vB.displayName="HeroUI.NumberInput";var gs=vB,_B={};_B={close:"",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} `,other:()=>`${t.number(e.count)} `})}.`};var bB={};bB={close:"",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} `,other:()=>`${t.number(e.count)} `})}.`};var wB={};wB={close:"Zavt",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} oznmen`,other:()=>`${t.number(e.count)} oznmen`})}.`};var SB={};SB={close:"Luk",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} besked`,other:()=>`${t.number(e.count)} beskeder`})}.`};var TB={};TB={close:"Schlieen",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} Benachrichtigung`,other:()=>`${t.number(e.count)} Benachrichtigungen`})}.`};var EB={};EB={close:"",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} `,other:()=>`${t.number(e.count)} `})}.`};var CB={};CB={close:"Close",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notification`,other:()=>`${t.number(e.count)} notifications`})}.`};var DB={};DB={close:"Cerrar",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notificacin`,other:()=>`${t.number(e.count)} notificaciones`})}.`};var PB={};PB={close:"Sule",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} teatis`,other:()=>`${t.number(e.count)} teatist`})}.`};var MB={};MB={close:"Sulje",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} ilmoitus`,other:()=>`${t.number(e.count)} ilmoitusta`})}.`};var AB={};AB={close:"Fermer",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notification`,other:()=>`${t.number(e.count)} notifications`})}.`};var kB={};kB={close:"",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} `,other:()=>`${t.number(e.count)} `})}.`};var RB={};RB={close:"Zatvori",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} obavijest`,other:()=>`${t.number(e.count)} obavijesti`})}.`};var IB={};IB={close:"Bezrs",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} rtests`,other:()=>`${t.number(e.count)} rtests`})}.`};var zB={};zB={close:"Chiudi",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notifica`,other:()=>`${t.number(e.count)} notifiche`})}.`};var LB={};LB={close:"",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} `,other:()=>`${t.number(e.count)} `})}`};var $B={};$B={close:"",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} `,other:()=>`${t.number(e.count)} `})}.`};var NB={};NB={close:"Udaryti",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} praneimas`,other:()=>`${t.number(e.count)} praneimai`})}.`};var BB={};BB={close:"Aizvrt",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} paziojums`,other:()=>`${t.number(e.count)} paziojumi`})}.`};var jB={};jB={close:"Lukk",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} varsling`,other:()=>`${t.number(e.count)} varsler`})}.`};var OB={};OB={close:"Sluiten",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} melding`,other:()=>`${t.number(e.count)} meldingen`})}.`};var FB={};FB={close:"Zamknij",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} powiadomienie`,few:()=>`${t.number(e.count)} powiadomienia`,many:()=>`${t.number(e.count)} powiadomie`,other:()=>`${t.number(e.count)} powiadomienia`})}.`};var VB={};VB={close:"Fechar",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notificao`,other:()=>`${t.number(e.count)} notificaes`})}.`};var UB={};UB={close:"Fechar",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notificao`,other:()=>`${t.number(e.count)} notificaes`})}.`};var GB={};GB={close:"nchidei",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notificare`,other:()=>`${t.number(e.count)} notificri`})}.`};var HB={};HB={close:"",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} `,other:()=>`${t.number(e.count)} `})}.`};var qB={};qB={close:"Zatvori",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} oznmenie`,few:()=>`${t.number(e.count)} oznmenia`,other:()=>`${t.number(e.count)} oznmen`})}.`};var WB={};WB={close:"Zapri",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} obvestilo`,two:()=>`${t.number(e.count)} obvestili`,few:()=>`${t.number(e.count)} obvestila`,other:()=>`${t.number(e.count)} obvestil`})}.`};var KB={};KB={close:"Zatvori",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} obavetenje`,other:()=>`${t.number(e.count)} obavetenja`})}.`};var ZB={};ZB={close:"Stng",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} meddelande`,other:()=>`${t.number(e.count)} meddelanden`})}.`};var XB={};XB={close:"Kapat",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} bildirim`,other:()=>`${t.number(e.count)} bildirim`})}.`};var YB={};YB={close:"",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} `,other:()=>`${t.number(e.count)} `})}.`};var JB={};JB={close:"",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} `,other:()=>`${t.number(e.count)} `})}`};var QB={};QB={close:"",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} `,other:()=>`${t.number(e.count)} `})}`};var AT={};AT={"ar-AE":_B,"bg-BG":bB,"cs-CZ":wB,"da-DK":SB,"de-DE":TB,"el-GR":EB,"en-US":CB,"es-ES":DB,"et-EE":PB,"fi-FI":MB,"fr-FR":AB,"he-IL":kB,"hr-HR":RB,"hu-HU":IB,"it-IT":zB,"ja-JP":LB,"ko-KR":$B,"lt-LT":NB,"lv-LV":BB,"nb-NO":jB,"nl-NL":OB,"pl-PL":FB,"pt-BR":VB,"pt-PT":UB,"ro-RO":GB,"ru-RU":HB,"sk-SK":qB,"sl-SI":WB,"sr-SP":KB,"sv-SE":ZB,"tr-TR":XB,"uk-UA":YB,"zh-CN":JB,"zh-TW":QB};function bte(e){return e&&e.__esModule?e.default:e}function wte(e,t,i){let{key:c,timer:h,timeout:_,animation:w}=e.toast;V.useEffect(()=>{if(!(h==null||_==null))return h.reset(_),()=>{h.pause()}},[h,_]);let[n,k]=ra.useState(!1);V.useEffect(()=>{(w==="entering"||w==="queued")&&k(!0)},[w]);let N=Ns(),B=vm(),F=Eu(bte(AT),"@react-aria/toast");return{toastProps:{role:"alertdialog","aria-modal":"false","aria-label":e["aria-label"],"aria-labelledby":e["aria-labelledby"]||N,"aria-describedby":e["aria-describedby"]||B,"aria-details":e["aria-details"],"aria-hidden":w==="exiting"?"true":void 0,tabIndex:0},contentProps:{role:"alert","aria-atomic":"true",style:{visibility:n||w===null?"visible":"hidden"}},titleProps:{id:N},descriptionProps:{id:B},closeButtonProps:{"aria-label":F.format("close"),onPress:()=>t.close(c)}}}var x4={exports:{}},v4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P6;function Ste(){if(P6)return v4;P6=1;var e=s0();function t(F,G){return F===G&&(F!==0||1/F===1/G)||F!==F&&G!==G}var i=typeof Object.is=="function"?Object.is:t,c=e.useState,h=e.useEffect,_=e.useLayoutEffect,w=e.useDebugValue;function n(F,G){var Q=G(),te=c({inst:{value:Q,getSnapshot:G}}),Y=te[0].inst,oe=te[1];return _(function(){Y.value=Q,Y.getSnapshot=G,k(Y)&&oe({inst:Y})},[F,Q,G]),h(function(){return k(Y)&&oe({inst:Y}),F(function(){k(Y)&&oe({inst:Y})})},[F]),w(Q),Q}function k(F){var G=F.getSnapshot;F=F.value;try{var Q=G();return!i(F,Q)}catch{return!0}}function N(F,G){return G()}var B=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?N:n;return v4.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:B,v4}var M6;function Tte(){return M6||(M6=1,x4.exports=Ste()),x4.exports}var ej=Tte();const tj=1,_4=Symbol.for("react-aria-landmark-manager");function Ete(e){return document.addEventListener("react-aria-landmark-manager-change",e),()=>document.removeEventListener("react-aria-landmark-manager-change",e)}function A6(){if(typeof document>"u")return null;let e=document[_4];return e&&e.version>=tj?e:(document[_4]=new Dte,document.dispatchEvent(new CustomEvent("react-aria-landmark-manager-change")),document[_4])}function Cte(){return ej.useSyncExternalStore(Ete,A6,A6)}class Dte{setupIfNeeded(){this.isListening||(document.addEventListener("keydown",this.f6Handler,{capture:!0}),document.addEventListener("focusin",this.focusinHandler,{capture:!0}),document.addEventListener("focusout",this.focusoutHandler,{capture:!0}),this.isListening=!0)}teardownIfNeeded(){!this.isListening||this.landmarks.length>0||this.refCount>0||(document.removeEventListener("keydown",this.f6Handler,{capture:!0}),document.removeEventListener("focusin",this.focusinHandler,{capture:!0}),document.removeEventListener("focusout",this.focusoutHandler,{capture:!0}),this.isListening=!1)}focusLandmark(t,i){var c,h;(h=this.landmarks.find(_=>_.ref.current===t))===null||h===void 0||(c=h.focus)===null||c===void 0||c.call(h,i)}getLandmarksByRole(t){return new Set(this.landmarks.filter(i=>i.role===t))}getLandmarkByRole(t){return this.landmarks.find(i=>i.role===t)}addLandmark(t){if(this.setupIfNeeded(),this.landmarks.find(h=>h.ref===t.ref)||!t.ref.current)return;if(this.landmarks.filter(h=>h.role==="main").length>1&&console.error('Page can contain no more than one landmark with the role "main".'),this.landmarks.length===0){this.landmarks=[t],this.checkLabels(t.role);return}let i=0,c=this.landmarks.length-1;for(;i<=c;){let h=Math.floor((i+c)/2),_=t.ref.current.compareDocumentPosition(this.landmarks[h].ref.current);!!(_&Node.DOCUMENT_POSITION_PRECEDING||_&Node.DOCUMENT_POSITION_CONTAINS)?i=h+1:c=h-1}this.landmarks.splice(i,0,t),this.checkLabels(t.role)}updateLandmark(t){let i=this.landmarks.findIndex(c=>c.ref===t.ref);i>=0&&(this.landmarks[i]={...this.landmarks[i],...t},this.checkLabels(this.landmarks[i].role))}removeLandmark(t){this.landmarks=this.landmarks.filter(i=>i.ref!==t),this.teardownIfNeeded()}checkLabels(t){let i=this.getLandmarksByRole(t);if(i.size>1){let c=[...i].filter(h=>!h.label);if(c.length>0)console.warn(`Page contains more than one landmark with the '${t}' role. If two or more landmarks on a page share the same role, all must be labeled with an aria-label or aria-labelledby attribute: `,c.map(h=>h.ref.current));else{let h=[...i].map(w=>w.label);h.filter((w,n)=>h.indexOf(w)!==n).forEach(w=>{console.warn(`Page contains more than one landmark with the '${t}' role and '${w}' label. If two or more landmarks on a page share the same role, they must have unique labels: `,[...i].filter(n=>n.label===w).map(n=>n.ref.current))})}}}closestLandmark(t){let i=new Map(this.landmarks.map(h=>[h.ref.current,h])),c=t;for(;c&&!i.has(c)&&c!==document.body&&c.parentElement;)c=c.parentElement;return i.get(c)}getNextLandmark(t,{backward:i}){var c;let h=this.closestLandmark(t),_=i?this.landmarks.length-1:0;h&&(_=this.landmarks.indexOf(h)+(i?-1:1));let w=()=>{if(_<0){if(!t.dispatchEvent(new CustomEvent("react-aria-landmark-navigation",{detail:{direction:"backward"},bubbles:!0,cancelable:!0})))return!0;_=this.landmarks.length-1}else if(_>=this.landmarks.length){if(!t.dispatchEvent(new CustomEvent("react-aria-landmark-navigation",{detail:{direction:"forward"},bubbles:!0,cancelable:!0})))return!0;_=0}return _<0||_>=this.landmarks.length};if(w())return;let n=_;for(;!((c=this.landmarks[_].ref.current)===null||c===void 0)&&c.closest("[aria-hidden=true]");){if(_+=i?-1:1,w())return;if(_===n)break}return this.landmarks[_]}f6Handler(t){t.key==="F6"&&(t.altKey?this.focusMain():this.navigate(t.target,t.shiftKey))&&(t.preventDefault(),t.stopPropagation())}focusMain(){let t=this.getLandmarkByRole("main");return t&&t.ref.current&&document.contains(t.ref.current)?(this.focusLandmark(t.ref.current,"forward"),!0):!1}navigate(t,i){let c=this.getNextLandmark(t,{backward:i});if(!c)return!1;if(c.lastFocused){let h=c.lastFocused;if(document.body.contains(h))return h.focus(),!0}return c.ref.current&&document.contains(c.ref.current)?(this.focusLandmark(c.ref.current,i?"backward":"forward"),!0):!1}focusinHandler(t){let i=this.closestLandmark(t.target);i&&i.ref.current!==t.target&&this.updateLandmark({ref:i.ref,lastFocused:t.target});let c=t.relatedTarget;if(c){let h=this.closestLandmark(c);h&&h.ref.current===c&&h.blur()}}focusoutHandler(t){let i=t.target,c=t.relatedTarget;if(!c||c===document){let h=this.closestLandmark(i);h&&h.ref.current===i&&h.blur()}}createLandmarkController(){let t=this;return t.refCount++,t.setupIfNeeded(),{navigate(i,c){let h=(c==null?void 0:c.from)||document.activeElement;return t.navigate(h,i==="backward")},focusNext(i){let c=(i==null?void 0:i.from)||document.activeElement;return t.navigate(c,!1)},focusPrevious(i){let c=(i==null?void 0:i.from)||document.activeElement;return t.navigate(c,!0)},focusMain(){return t.focusMain()},dispose(){t&&(t.refCount--,t.teardownIfNeeded(),t=null)}}}registerLandmark(t){return this.landmarks.find(i=>i.ref===t.ref)?this.updateLandmark(t):this.addLandmark(t),()=>this.removeLandmark(t.ref)}constructor(){this.landmarks=[],this.isListening=!1,this.refCount=0,this.version=tj,this.f6Handler=this.f6Handler.bind(this),this.focusinHandler=this.focusinHandler.bind(this),this.focusoutHandler=this.focusoutHandler.bind(this)}}function Pte(e,t){const{role:i,"aria-label":c,"aria-labelledby":h,focus:_}=e;let w=Cte(),n=c||h,[k,N]=V.useState(!1),B=V.useCallback(()=>{N(!0)},[N]),F=V.useCallback(()=>{N(!1)},[N]);return si(()=>{if(w)return w.registerLandmark({ref:t,label:n,role:i,focus:_||B,blur:F})},[w,n,t,i,_,B,F]),V.useEffect(()=>{var G;k&&((G=t.current)===null||G===void 0||G.focus())},[k,t]),{landmarkProps:{role:i,tabIndex:k?-1:void 0,"aria-label":c,"aria-labelledby":h}}}function Mte(e){return e&&e.__esModule?e.default:e}function Ate(e,t,i){let c=Eu(Mte(AT),"@react-aria/toast"),{landmarkProps:h}=Pte({role:"region","aria-label":e["aria-label"]||c.format("notifications",{count:t.visibleToasts.length})},i),{hoverProps:_}=wo({onHoverStart:t.pauseAll,onHoverEnd:t.resumeAll}),w=V.useRef([]),n=V.useRef(t.visibleToasts),k=V.useRef(null);si(()=>{if(k.current===-1||t.visibleToasts.length===0||!i.current){w.current=[],n.current=t.visibleToasts;return}if(w.current=[...i.current.querySelectorAll('[role="alertdialog"]')],n.current.length===t.visibleToasts.length&&t.visibleToasts.every((Q,te)=>Q.key===n.current[te].key)){n.current=t.visibleToasts;return}let F=n.current.map((Q,te)=>({...Q,i:te,isRemoved:!t.visibleToasts.some(Y=>Q.key===Y.key)})),G=F.findIndex(Q=>Q.i===k.current);if(G>-1){let Q=0,te,Y;for(;Q<=G;)F[Q].isRemoved||(Y=Math.max(0,Q-1)),Q++;for(;Q<F.length;){if(!F[Q].isRemoved){te=Q-1;break}Q++}Y===void 0&&te===void 0&&(Y=0),Y>=0&&Y<w.current.length?pl(w.current[Y]):te>=0&&te<w.current.length&&pl(w.current[te])}n.current=t.visibleToasts},[t.visibleToasts,i]);let N=V.useRef(null),{focusWithinProps:B}=yd({onFocusWithin:F=>{t.pauseAll(),N.current=F.relatedTarget},onBlurWithin:()=>{t.resumeAll(),N.current=null}});return V.useEffect(()=>{t.visibleToasts.length===0&&N.current&&document.body.contains(N.current)&&(Sm()==="pointer"?pl(N.current):N.current.focus(),N.current=null)},[i,t.visibleToasts.length]),V.useEffect(()=>()=>{N.current&&document.body.contains(N.current)&&(Sm()==="pointer"?pl(N.current):N.current.focus(),N.current=null)},[i]),{regionProps:xr(h,_,B,{tabIndex:-1,"data-react-aria-top-layer":!0,onFocus:F=>{let G=F.target.closest('[role="alertdialog"]');k.current=w.current.findIndex(Q=>Q===G)},onBlur:()=>{k.current=-1}})}}var k6=100,R6=20;function kte(e){var t,i;const[c,h]=Zo(e,EM.variantKeys),{ref:_,as:w,title:n,description:k,className:N,classNames:B,toast:F,endContent:G,closeIcon:Q,hideIcon:te=!1,placement:Y="bottom-right",isRegionExpanded:oe,hideCloseButton:de=!1,state:ge,total:be=1,index:pe=0,heights:we,promise:ke,setHeights:Ae,toastOffset:re=0,motionProps:Te,timeout:se=6e3,shouldShowTimeoutProgress:ue=!1,icon:De,onClose:ce,severity:je,maxVisibleToasts:Le,...Re}=c,{isHovered:Ge,hoverProps:ze}=wo({isDisabled:!1}),ot=Pi(),Ee=(i=(t=e==null?void 0:e.disableAnimation)!=null?t:ot==null?void 0:ot.disableAnimation)!=null?i:!1,Ke=Pz();let nt=Y;Ke&&(Y.includes("top")?nt="top-center":nt="bottom-center");const Xe=V.useRef(null),ut=V.useRef(null),Pt=V.useRef(0),Ct=V.useRef(null),Zt=V.useRef(0),Dt=V.useRef(0);V.useEffect(()=>{Ct.current&&(Ct.current.style.width="0%")},[]);const[er,Se]=V.useState(!!ke);V.useEffect(()=>{ke&&ke.finally(()=>{Se(!1)})},[ke]),V.useEffect(()=>{const ga=St=>{if(!se||er)return;if(ut.current===null&&(ut.current=St),Ge||oe||pe!=be-1){Zt.current+=St-ut.current,ut.current=null,Xe.current=requestAnimationFrame(ga);return}const ye=St-ut.current+Zt.current;Dt.current=ye,Dt.current>=se&&ge.close(F.key),Pt.current=Math.min(ye/se*100,100),Ct.current&&(Ct.current.style.width=`${ue?Pt.current:0}%`),Pt.current<100&&(Xe.current=requestAnimationFrame(ga))};return Xe.current=requestAnimationFrame(ga),()=>{Xe.current!==null&&cancelAnimationFrame(Xe.current)}},[se,ue,ge,Ge,pe,be,oe,er]);const ur=w||"div",Sr=De,yt=Nn(_),dt=Br(N,B==null?void 0:B.base),{toastProps:$t,contentProps:or,titleProps:Er,descriptionProps:mr,closeButtonProps:Pr}=wte(c,ge),[Fr,$a]=V.useState(!1);V.useEffect(()=>{$a(!0)},[]);const[Xr,ja]=V.useState(0);V.useLayoutEffect(()=>{if(!yt.current||!Fr)return;const ga=yt.current,St=ga.style.height;ga.style.height="auto";const ye=getComputedStyle(ga),Ce=parseFloat(ye.marginTop),Fe=parseFloat(ye.marginBottom),Ye=ga.getBoundingClientRect().height+Ce+Fe;ga.style.height=St,ja(ct=>ct!==Ye?Ye:ct);const Qe=[...we];Qe.length>pe?Qe[pe]=Ye:Qe.push(Ye),Ae(Qe)},[Fr,be,Ae,pe]);let fr=4;for(let ga=pe+1;ga<be;ga++)fr+=we[ga];const Sa=we[we.length-1],kr=V.useMemo(()=>EM({...h,disableAnimation:Ee}),[Ko(h)]),Dr=nt.includes("top")?1:-1,Nr={hidden:{opacity:0,y:-50*Dr},visible:{opacity:1,y:0},exit:{opacity:0,y:-50*Dr}},[na,Sn]=V.useState(!1),[Zn,on]=V.useState(0),Ha=(ga,St)=>{const ye=nt.includes("right"),Ce=nt.includes("left"),Fe=nt==="top-center",Ye=nt==="bottom-center";if(ye&&ga>=k6||Ce&&ga<=-100||Fe&&St<=-20||Ye&&St>=R6)return!0},qa=ga=>{const St={top:0,bottom:0,right:0,left:0};return ga==="bottom-center"?(St.bottom=1,St):ga==="top-center"?(St.top=1,St):ga.includes("right")?(St.right=1,St):ga.includes("left")?(St.left=1,St):(St.left=1,St.right=1,St)};let Dn;na&&nt==="bottom-center"||nt==="top-center"?Dn=Math.max(0,1-Zn/(R6+5)):na&&(Dn=Math.max(0,1-Zn/(k6+20)));const In=V.useCallback((ga={})=>({ref:yt,className:kr.base({class:Br(dt,B==null?void 0:B.base)}),"data-has-title":Vt(!md(n)),"data-has-description":Vt(!md(k)),"data-placement":nt,"data-drag-value":Zn,"data-toast":!0,"aria-label":"toast",style:{opacity:Dn},...xr(ga,Re,$t,ze)}),[kr,B,$t,ze,F,F.key,Dn]),jn=V.useCallback((ga={})=>({className:kr.wrapper({class:B==null?void 0:B.wrapper}),...ga}),[]),Wr=V.useCallback((ga={})=>({"aria-label":"descriptionIcon",className:kr.icon({class:B==null?void 0:B.icon}),...ga}),[]),yi=V.useCallback((ga={})=>({className:kr.loadingIcon({class:B==null?void 0:B.loadingIcon}),...ga}),[]),Ka=V.useCallback((ga={})=>({className:kr.content({class:B==null?void 0:B.content}),...xr(ga,Re,or)}),[or]),la=V.useCallback((ga={})=>({className:kr.title({class:B==null?void 0:B.title}),...xr(ga,Re,Er)}),[Er]),yn=V.useCallback((ga={})=>({className:kr.description({class:B==null?void 0:B.description}),...xr(ga,Re,mr)}),[mr]),Xn=V.useCallback((ga={})=>({className:kr.closeButton({class:B==null?void 0:B.closeButton}),"aria-label":"closeButton","data-hidden":Vt(de),...xr(ga,Pr,{onPress:qi(()=>{setTimeout(()=>document.body.focus(),0)},ce)})}),[Pr,ce]),js=V.useCallback((ga={})=>({className:kr.closeIcon({class:B==null?void 0:B.closeIcon}),"aria-label":"closeIcon",...ga}),[]),qn=V.useCallback((ga={})=>{const St=oe?Le-1:Math.min(2,Le-1),ye=be-pe-1<=St,Ce=nt==="bottom-center"||nt==="top-center"?"y":"x",Fe={left:0,right:0,top:0,bottom:0},Ye=qa(nt),Qe=nt.includes("top")?{top:oe||na?fr+re:(be-1-pe)*8+re,bottom:"auto"}:nt.includes("bottom")?{bottom:oe||na?fr+re:(be-1-pe)*8+re,top:"auto"}:{};return{animate:{opacity:ye?1:0,pointerEvents:ye?"all":"none",scaleX:oe||na?1:1-(be-1-pe)*.1,height:oe||na?Xr:Sa,y:0,...Qe},drag:Ce,dragConstraints:Fe,exit:{opacity:0},initial:{opacity:0,scale:1,y:-40*Dr},transition:{duration:.3,ease:"easeOut"},variants:Nr,dragElastic:Ye,onDragEnd:(ct,bt)=>{const{x:ft,y:pt}=bt.offset;if(Sn(!1),Ha(ft,pt)){const At=we;At.splice(pe,1),Ae([...At]),ge.close(F.key);return}on(0)},onDrag:(ct,bt)=>{let ft=0;nt==="top-center"?ft=-bt.offset.y:nt==="bottom-center"?ft=bt.offset.y:nt.includes("right")?ft=bt.offset.x:nt.includes("left")&&(ft=-bt.offset.x),ft>=0&&on(ft)},onDragStart:()=>{Sn(!0)},"data-drag":Vt(na),"data-placement":nt,"data-drag-value":Zn,className:kr.motionDiv({class:B==null?void 0:B.motionDiv}),...ga,...Te}},[Pr,be,pe,nt,oe,fr,Dr,Xr,Sa,Nr,B,na,Vt,Sn,Ha,kr,re,Le]);return{Component:ur,title:n,description:k,icon:De,loadingIcon:Sr,domRef:yt,severity:je,closeIcon:Q,classNames:B,color:h.color,hideIcon:te,placement:nt,state:ge,toast:F,disableAnimation:Ee,isProgressBarVisible:!!se,total:be,index:pe,getWrapperProps:jn,getToastProps:In,getTitleProps:la,getContentProps:Ka,getDescriptionProps:yn,getCloseButtonProps:Xn,getIconProps:Wr,getMotionDivProps:qn,getCloseIconProps:js,getLoadingIconProps:yi,progressBarRef:Ct,endContent:G,slots:kr,isRegionExpanded:oe,liftHeight:fr,frontHeight:Sa,initialHeight:Xr,isLoading:er}}var Rte=()=>km(()=>import("./src-UW24ZMRV-qybyjZUV.js"),[]).then(e=>e.default),rj=e=>{const{ripples:t=[],motionProps:i,color:c="currentColor",style:h,onClear:_}=e;return b.jsx(b.Fragment,{children:t.map(w=>{const n=l5(.01*w.size,.2,w.size>100?.75:.5);return b.jsx(Tu,{features:Rte,children:b.jsx(Uf,{mode:"popLayout",children:b.jsx(jl.span,{animate:{transform:"scale(2)",opacity:0},className:"heroui-ripple",exit:{opacity:0},initial:{transform:"scale(0)",opacity:.35},style:{position:"absolute",backgroundColor:c,borderRadius:"100%",transformOrigin:"center",pointerEvents:"none",overflow:"hidden",inset:0,zIndex:0,top:w.y,left:w.x,width:`${w.size}px`,height:`${w.size}px`,...h},transition:{duration:n},onAnimationComplete:()=>{_(w.key)},...i})})},w.key)})})};rj.displayName="HeroUI.Ripple";var Ite=rj;function zte(e={}){const[t,i]=V.useState([]),c=V.useCallback(_=>{const w=_.target,n=Math.max(w.clientWidth,w.clientHeight);i(k=>[...k,{key:VA(k.length.toString()),size:n,x:_.x-n/2,y:_.y-n/2}])},[]),h=V.useCallback(_=>{i(w=>w.filter(n=>n.key!==_))},[]);return{ripples:t,onClear:h,onPress:c,...e}}function Lte(e={}){let{autoFocus:t=!1,isTextInput:i,within:c}=e,h=V.useRef({isFocused:!1,isFocusVisible:t||t0()}),[_,w]=V.useState(!1),[n,k]=V.useState(()=>h.current.isFocused&&h.current.isFocusVisible),N=V.useCallback(()=>k(h.current.isFocused&&h.current.isFocusVisible),[]),B=V.useCallback(Q=>{h.current.isFocused=Q,w(Q),N()},[N]);tR(Q=>{h.current.isFocusVisible=Q,N()},[],{isTextInput:i});let{focusProps:F}=P_({isDisabled:c,onFocusChange:B}),{focusWithinProps:G}=yd({isDisabled:!c,onFocusWithinChange:B});return{isFocused:_,isFocusVisible:n,focusProps:c?G:F}}function $te(e,t){let{elementType:i="button",isDisabled:c,onPress:h,onPressStart:_,onPressEnd:w,onPressChange:n,preventFocusOnPress:k,allowFocusWhenDisabled:N,onClick:B,href:F,target:G,rel:Q,type:te="button",allowTextSelectionOnPress:Y,role:oe}=e,de;i==="button"?de={type:te,disabled:c}:de={role:"button",href:i==="a"&&!c?F:void 0,target:i==="a"?G:void 0,type:i==="input"?te:void 0,disabled:i==="input"?c:void 0,"aria-disabled":!c||i==="input"?void 0:c,rel:i==="a"?Q:void 0};let ge=Mm()||hx();B&&typeof B=="function"&&oe!=="link"&&!(e.hasOwnProperty("aria-expanded")&&e.hasOwnProperty("aria-controls"))&&$w("onClick is deprecated, please use onPress instead. See: https://github.com/heroui-inc/heroui/issues/4292","useButton");const be=re=>{ge&&(B==null||B(re)),h==null||h(re)};let{pressProps:pe,isPressed:we}=wu({onPressStart:_,onPressEnd:w,onPressChange:n,onPress:be,isDisabled:c,preventFocusOnPress:k,allowTextSelectionOnPress:Y,ref:t}),{focusableProps:ke}=M_(e,t);N&&(ke.tabIndex=c?-1:ke.tabIndex);let Ae=xr(ke,pe,Fl(e,{labelable:!0}));return{isPressed:we,buttonProps:xr(de,Ae,{"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],"aria-current":e["aria-current"],onClick:re=>{te==="button"&&ge||B==null||B(re)}})}}var[Soe,Nte]=Sh({name:"ButtonGroupContext",strict:!1});function Bte(e){var t,i,c,h,_,w,n,k,N;const B=Nte(),F=Pi(),G=!!B,{ref:Q,as:te,children:Y,startContent:oe,endContent:de,autoFocus:ge,className:be,spinner:pe,isLoading:we=!1,disableRipple:ke=!1,fullWidth:Ae=(t=B==null?void 0:B.fullWidth)!=null?t:!1,radius:re=B==null?void 0:B.radius,size:Te=(i=B==null?void 0:B.size)!=null?i:"md",color:se=(c=B==null?void 0:B.color)!=null?c:"default",variant:ue=(h=B==null?void 0:B.variant)!=null?h:"solid",disableAnimation:De=(w=(_=B==null?void 0:B.disableAnimation)!=null?_:F==null?void 0:F.disableAnimation)!=null?w:!1,isDisabled:ce=(n=B==null?void 0:B.isDisabled)!=null?n:!1,isIconOnly:je=(k=B==null?void 0:B.isIconOnly)!=null?k:!1,spinnerPlacement:Le="start",onPress:Re,onClick:Ge,...ze}=e,ot=te||"button",Ee=typeof ot=="string",Ke=Nn(Q),nt=(N=ke||(F==null?void 0:F.disableRipple))!=null?N:De,{isFocusVisible:Xe,isFocused:ut,focusProps:Pt}=Lte({autoFocus:ge}),Ct=ce||we,Zt=V.useMemo(()=>U8({size:Te,color:se,variant:ue,radius:re,fullWidth:Ae,isDisabled:Ct,isInGroup:G,disableAnimation:De,isIconOnly:je,className:be}),[Te,se,ue,re,Ae,Ct,G,je,De,be]),{onPress:Dt,onClear:er,ripples:Se}=zte(),ur=V.useCallback(Xr=>{nt||Ct||De||Ke.current&&Dt(Xr)},[nt,Ct,De,Ke,Dt]),{buttonProps:Sr,isPressed:yt}=$te({elementType:te,isDisabled:Ct,onPress:qi(Re,ur),onClick:Ge,...ze},Ke),{isHovered:dt,hoverProps:$t}=wo({isDisabled:Ct}),or=V.useCallback((Xr={})=>({"data-disabled":Vt(Ct),"data-focus":Vt(ut),"data-pressed":Vt(yt),"data-focus-visible":Vt(Xe),"data-hover":Vt(dt),"data-loading":Vt(we),...xr(Sr,Pt,$t,Wo(ze,{enabled:Ee}),Wo(Xr)),className:Zt}),[we,Ct,ut,yt,Ee,Xe,dt,Sr,Pt,$t,ze,Zt]),Er=Xr=>V.isValidElement(Xr)?V.cloneElement(Xr,{"aria-hidden":!0,focusable:!1,tabIndex:-1}):null,mr=Er(oe),Pr=Er(de),Fr=V.useMemo(()=>({sm:"sm",md:"sm",lg:"md"})[Te],[Te]),$a=V.useCallback(()=>({ripples:Se,onClear:er}),[Se,er]);return{Component:ot,children:Y,domRef:Ke,spinner:pe,styles:Zt,startContent:mr,endContent:Pr,isLoading:we,spinnerPlacement:Le,spinnerSize:Fr,disableRipple:nt,getButtonProps:or,getRippleProps:$a,isIconOnly:je}}var aj=Bn((e,t)=>{const{Component:i,domRef:c,children:h,spinnerSize:_,spinner:w=b.jsx(mT,{color:"current",size:_}),spinnerPlacement:n,startContent:k,endContent:N,isLoading:B,disableRipple:F,getButtonProps:G,getRippleProps:Q,isIconOnly:te}=Bte({...e,ref:t});return b.jsxs(i,{ref:c,...G(),children:[k,B&&n==="start"&&w,B&&te?null:h,B&&n==="end"&&w,N,!F&&b.jsx(Ite,{...Q()})]})});aj.displayName="HeroUI.Button";var jte=aj,Ote=()=>km(()=>import("./index-DYrpkc2C.js"),[]).then(e=>e.domMax),b4={default:l4,primary:l4,secondary:l4,success:K8,warning:W8,danger:Z8},nj=Bn((e,t)=>{const{severity:i,Component:c,icon:h,loadingIcon:_,domRef:w,endContent:n,color:k,hideIcon:N,closeIcon:B,disableAnimation:F,progressBarRef:G,classNames:Q,slots:te,getWrapperProps:Y,isProgressBarVisible:oe,getToastProps:de,getContentProps:ge,getTitleProps:be,getDescriptionProps:pe,getCloseButtonProps:we,getIconProps:ke,getMotionDivProps:Ae,getCloseIconProps:re,getLoadingIconProps:Te,isLoading:se}=kte({...e,ref:t}),ue=h&&V.isValidElement(h)?V.cloneElement(h,ke()):null,De=i?b4[i]:b4[k]||b4.default,ce=_&&V.isValidElement(_)?V.cloneElement(_,Te()):null,je=se?ce||b.jsx(mT,{"aria-label":"loadingIcon",classNames:{wrapper:Te().className},color:"current"}):null,Le=B&&V.isValidElement(B)?V.cloneElement(B,{}):null,Re=b.jsxs(c,{ref:w,...de(),children:[b.jsxs("div",{...ge(),children:[N&&!se?null:je||ue||b.jsx(De,{...ke()}),b.jsxs("div",{...Y(),children:[b.jsx("div",{...be(),children:e.toast.content.title}),b.jsx("div",{...pe(),children:e.toast.content.description})]})]}),oe&&b.jsx("div",{className:te.progressTrack({class:Q==null?void 0:Q.progressTrack}),children:b.jsx("div",{ref:G,className:te.progressIndicator({class:Q==null?void 0:Q.progressIndicator})})}),b.jsx(jte,{isIconOnly:!0,...we(),children:Le||b.jsx(dT,{...re()})}),n]});return b.jsx(b.Fragment,{children:F?Re:b.jsx(Tu,{features:Ote,children:b.jsx(Uf,{children:b.jsx(jl.div,{...Ae(),children:b.jsx(jl.div,{animate:{opacity:1},exit:{opacity:0},initial:{opacity:0},transition:{duration:.25,ease:"easeOut",delay:.1},children:Re},"inner-div")})})})})});nj.displayName="HeroUI.Toast";var Fte=nj;function Vte({toastQueue:e,placement:t,disableAnimation:i,maxVisibleToasts:c,toastOffset:h,toastProps:_={},className:w,classNames:n,...k}){var N,B;const F=V.useRef(null),{regionProps:G}=Ate(k,e,F),{hoverProps:Q,isHovered:te}=wo({isDisabled:!1}),[Y,oe]=V.useState(!1),de=V.useMemo(()=>cX({disableAnimation:i}),[i]),ge=Br(n==null?void 0:n.base,w);V.useEffect(()=>{function Ae(re){F.current&&!F.current.contains(re.target)&&oe(!1)}return document.addEventListener("touchstart",Ae),()=>{document.removeEventListener("touchstart",Ae)}},[]);const[be,pe]=V.useState([]),we=(B=(N=e.visibleToasts)==null?void 0:N.length)!=null?B:0,ke=V.useCallback(()=>{oe(!0)},[]);return b.jsx("div",{...xr(G,Q),ref:F,className:de.base({class:ge}),"data-placement":t,onTouchStart:ke,children:e.visibleToasts.map((Ae,re)=>i&&we-re>c?null:i||we-re<=4||te&&we-re<=c+1?b.jsx(Fte,{state:e,toast:Ae,...xr(_,Ae.content),disableAnimation:i,heights:be,index:re,isRegionExpanded:te||Y,maxVisibleToasts:c,placement:t,setHeights:pe,toastOffset:h,total:we},Ae.key):null)})}function Ute(e){let t=V.useCallback(h=>e.subscribe(h),[e]),i=V.useCallback(()=>e.visibleToasts,[e]);return{visibleToasts:ej.useSyncExternalStore(t,i,i),add:(h,_)=>e.add(h,_),close:h=>e.close(h),remove:h=>e.remove(h),pauseAll:()=>e.pauseAll(),resumeAll:()=>e.resumeAll()}}class Gte{subscribe(t){return this.subscriptions.add(t),()=>this.subscriptions.delete(t)}add(t,i={}){let c=Math.random().toString(36),h={...i,content:t,key:c,timer:i.timeout?new Hte(()=>this.close(c),i.timeout):void 0},_=0,w=this.queue.length;for(;_<w;){let k=Math.floor((_+w)/2);(h.priority||0)>(this.queue[k].priority||0)?w=k:_=k+1}this.queue.splice(_,0,h),h.animation=_<this.maxVisibleToasts?"entering":"queued";let n=this.maxVisibleToasts;for(;n<this.queue.length;)this.queue[n++].animation="queued";return this.updateVisibleToasts({action:"add"}),c}close(t){let i=this.queue.findIndex(_=>_.key===t);if(i>=0){var c,h;(c=(h=this.queue[i]).onClose)===null||c===void 0||c.call(h),this.queue.splice(i,1)}this.updateVisibleToasts({action:"close",key:t})}remove(t){this.updateVisibleToasts({action:"remove",key:t})}updateVisibleToasts(t){let{action:i,key:c}=t,h=this.queue.slice(0,this.maxVisibleToasts);if(i==="add"&&this.hasExitAnimation){let _=this.visibleToasts.filter(w=>!h.some(n=>w.key===n.key)).map(w=>({...w,animation:"exiting"}));this.visibleToasts=_.concat(h).sort((w,n)=>{var k,N;return((k=n.priority)!==null&&k!==void 0?k:0)-((N=w.priority)!==null&&N!==void 0?N:0)})}else i==="close"&&this.hasExitAnimation?this.visibleToasts=this.visibleToasts.map(_=>_.key!==c?_:{..._,animation:"exiting"}):this.visibleToasts=h;for(let _ of this.subscriptions)_()}pauseAll(){for(let t of this.visibleToasts)t.timer&&t.timer.pause()}resumeAll(){for(let t of this.visibleToasts)t.timer&&t.timer.resume()}constructor(t){this.queue=[],this.subscriptions=new Set,this.visibleToasts=[];var i;this.maxVisibleToasts=(i=t==null?void 0:t.maxVisibleToasts)!==null&&i!==void 0?i:1;var c;this.hasExitAnimation=(c=t==null?void 0:t.hasExitAnimation)!==null&&c!==void 0?c:!1}}class Hte{reset(t){this.remaining=t,this.resume()}pause(){this.timerId!=null&&(clearTimeout(this.timerId),this.timerId=null,this.remaining-=Date.now()-this.startTime)}resume(){this.remaining<=0||(this.startTime=Date.now(),this.timerId=setTimeout(()=>{this.timerId=null,this.remaining=0,this.callback()},this.remaining))}constructor(t,i){this.startTime=null,this.remaining=i,this.callback=t}}var Qv=null,qte=()=>(Qv||(Qv=new Gte({maxVisibleToasts:1/0})),Qv),Wte=({placement:e="bottom-right",disableAnimation:t=!1,maxVisibleToasts:i=3,toastOffset:c=0,toastProps:h={},regionProps:_})=>{var w;const n=Ute(qte()),k=Pi(),N=(w=t??(k==null?void 0:k.disableAnimation))!=null?w:!1;return n.visibleToasts.length==0?null:b.jsx(Vte,{disableAnimation:N,maxVisibleToasts:i,placement:e,toastOffset:c,toastProps:h,toastQueue:n,..._})},ka=({...e})=>{Qv&&Qv.add(e)};const ma="https://api.gatorpool.app";console.log("Environment:","production");console.log("Fetch base:",ma);const d0="/assets/logo-GclM95Hg.png";function c2(){const[e,t]=V.useState(!1),[i,c]=V.useState(!1);return V.useEffect(()=>{fetch(ma+"/v1/auth/verify",{method:"POST",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},credentials:"include",body:JSON.stringify({})}).then(h=>h.json()).then(h=>{h.success?c(!0):c(!1)}).catch(h=>{c(!1)})},[]),b.jsx(b.Fragment,{children:b.jsx("nav",{className:"bg-white dark:bg-[#0c0c0c] border-b-1 border-neutral-200 dark:border-neutral-800 fixed z-30 text-black dark:text-white w-full shadow",children:b.jsxs("div",{className:"max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"flex items-center justify-between h-20",children:[b.jsxs("div",{className:"flex flex-row md:justify-between w-full items-center",children:[b.jsx("div",{className:"flex flex-row space-x-6 items-center",children:b.jsxs("div",{className:"flex flex-row items-center",children:[b.jsx("img",{src:d0,alt:"GatorPool",className:"w-12 h-12 rounded-full bg-secondary"}),b.jsx("span",{className:"ml-1 text-xl font-semibold",children:"GatorPool"})]})}),b.jsxs("div",{className:"flex flex-row ml-auto md:mb- space-x-0 lg:space-x-4",children:[b.jsxs("div",{className:"hidden md:flex space-x-2",children:[b.jsx(pi,{to:"/",className:"block font-RobotoRegular text-lg rounded-full text-black dark:text-white px-4 py-2 ",children:"Home"}),b.jsx(pi,{to:"/about",className:"block font-RobotoRegular text-lg rounded-full text-black dark:text-white px-4 py-2 ",children:"About"}),b.jsx(pi,{to:"/safety",className:"block font-RobotoRegular text-lg rounded-full text-black dark:text-white px-4 py-2",children:"Safety"})]}),i?b.jsx(pi,{to:"/dashboard",className:"block font-RobotoRegular text-sm md:text-lg rounded-full text-black dark:text-white px-3 py-2 ",children:"Dashboard"}):b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(pi,{to:"/auth/signup",className:"block font-RobotoRegular text-sm md:text-lg rounded-full text-black dark:text-white px-3 py-2 ",children:"Try Now"}),b.jsx(pi,{to:"/auth/signin",className:"block font-RobotoRegular text-sm md:text-lg rounded-full text-black dark:text-white px-3 py-2 ",children:"Login"})]})]})]}),b.jsx("div",{className:"md:hidden",children:b.jsx("button",{onClick:()=>t(!e),className:"text-black dark:text-white mt-2 md:mt-0 focus:outline-none",children:b.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e?b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})})]}),e&&b.jsxs("div",{className:"md:hidden flex flex-col space-y-2 mt-2",children:[b.jsx(pi,{to:"/",className:"block py-2 px-4 text-black dark:text-white",children:"Home"}),b.jsx(pi,{to:"/about",className:"block font-RobotoRegular py-2 px-4 text-black dark:text-white hover:bg-primarynewdark",children:"About"}),b.jsx(pi,{to:"/safety",className:"block font-RobotoRegular py-2 px-4 text-black dark:text-white hover:bg-primarynewdark",children:"Safety"})]})]})})})}var K1={exports:{}},Kte=K1.exports,I6;function Zte(){return I6||(I6=1,function(e,t){(function(i,c){e.exports=c()})(Kte,function(){var i,c,h;function _(n,k){if(!i)i=k;else if(!c)c=k;else{var N="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+i+")(sharedChunk); ("+c+")(sharedChunk); self.onerror = null;",B={};i(B),h=k(B),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(h.workerUrl=window.URL.createObjectURL(new Blob([N],{type:"text/javascript"})))}}_(["exports"],function(n){function k(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var N,B={},F={};function G(){if(N)return F;N=1,Object.defineProperty(F,"__esModule",{value:!0}),F.setMatrixArrayType=function(g){F.ARRAY_TYPE=r=g},F.toRadian=function(g){return g*u},F.equals=function(g,f){return Math.abs(g-f)<=l*Math.max(1,Math.abs(g),Math.abs(f))},F.RANDOM=F.ARRAY_TYPE=F.EPSILON=void 0;var l=1e-6;F.EPSILON=l;var r=typeof Float32Array<"u"?Float32Array:Array;F.ARRAY_TYPE=r;var s=Math.random;F.RANDOM=s;var u=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var g=0,f=arguments.length;f--;)g+=arguments[f]*arguments[f];return Math.sqrt(g)}),F}var Q,te={};function Y(){if(Q)return te;function l(f){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},l(f)}Q=1,Object.defineProperty(te,"__esModule",{value:!0}),te.create=function(){var f=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f},te.clone=function(f){var x=new r.ARRAY_TYPE(4);return x[0]=f[0],x[1]=f[1],x[2]=f[2],x[3]=f[3],x},te.copy=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=x[2],f[3]=x[3],f},te.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f},te.fromValues=function(f,x,C,M){var $=new r.ARRAY_TYPE(4);return $[0]=f,$[1]=x,$[2]=C,$[3]=M,$},te.set=function(f,x,C,M,$){return f[0]=x,f[1]=C,f[2]=M,f[3]=$,f},te.transpose=function(f,x){if(f===x){var C=x[1];f[1]=x[2],f[2]=C}else f[0]=x[0],f[1]=x[2],f[2]=x[1],f[3]=x[3];return f},te.invert=function(f,x){var C=x[0],M=x[1],$=x[2],T=x[3],A=C*T-$*M;return A?(f[0]=T*(A=1/A),f[1]=-M*A,f[2]=-$*A,f[3]=C*A,f):null},te.adjoint=function(f,x){var C=x[0];return f[0]=x[3],f[1]=-x[1],f[2]=-x[2],f[3]=C,f},te.determinant=function(f){return f[0]*f[3]-f[2]*f[1]},te.multiply=u,te.rotate=function(f,x,C){var M=x[0],$=x[1],T=x[2],A=x[3],I=Math.sin(C),P=Math.cos(C);return f[0]=M*P+T*I,f[1]=$*P+A*I,f[2]=M*-I+T*P,f[3]=$*-I+A*P,f},te.scale=function(f,x,C){var M=x[1],$=x[2],T=x[3],A=C[0],I=C[1];return f[0]=x[0]*A,f[1]=M*A,f[2]=$*I,f[3]=T*I,f},te.fromRotation=function(f,x){var C=Math.sin(x),M=Math.cos(x);return f[0]=M,f[1]=C,f[2]=-C,f[3]=M,f},te.fromScaling=function(f,x){return f[0]=x[0],f[1]=0,f[2]=0,f[3]=x[1],f},te.str=function(f){return"mat2("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")"},te.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3])},te.LDU=function(f,x,C,M){return f[2]=M[2]/M[0],C[0]=M[0],C[1]=M[1],C[3]=M[3]-f[2]*C[1],[f,x,C]},te.add=function(f,x,C){return f[0]=x[0]+C[0],f[1]=x[1]+C[1],f[2]=x[2]+C[2],f[3]=x[3]+C[3],f},te.subtract=g,te.exactEquals=function(f,x){return f[0]===x[0]&&f[1]===x[1]&&f[2]===x[2]&&f[3]===x[3]},te.equals=function(f,x){var C=f[0],M=f[1],$=f[2],T=f[3],A=x[0],I=x[1],P=x[2],R=x[3];return Math.abs(C-A)<=r.EPSILON*Math.max(1,Math.abs(C),Math.abs(A))&&Math.abs(M-I)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(I))&&Math.abs($-P)<=r.EPSILON*Math.max(1,Math.abs($),Math.abs(P))&&Math.abs(T-R)<=r.EPSILON*Math.max(1,Math.abs(T),Math.abs(R))},te.multiplyScalar=function(f,x,C){return f[0]=x[0]*C,f[1]=x[1]*C,f[2]=x[2]*C,f[3]=x[3]*C,f},te.multiplyScalarAndAdd=function(f,x,C,M){return f[0]=x[0]+C[0]*M,f[1]=x[1]+C[1]*M,f[2]=x[2]+C[2]*M,f[3]=x[3]+C[3]*M,f},te.sub=te.mul=void 0;var r=function(f,x){if(f&&f.__esModule)return f;if(f===null||l(f)!=="object"&&typeof f!="function")return{default:f};var C=s(void 0);if(C&&C.has(f))return C.get(f);var M={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in f)if(T!=="default"&&Object.prototype.hasOwnProperty.call(f,T)){var A=$?Object.getOwnPropertyDescriptor(f,T):null;A&&(A.get||A.set)?Object.defineProperty(M,T,A):M[T]=f[T]}return M.default=f,C&&C.set(f,M),M}(G());function s(f){if(typeof WeakMap!="function")return null;var x=new WeakMap,C=new WeakMap;return(s=function(M){return M?C:x})(f)}function u(f,x,C){var M=x[0],$=x[1],T=x[2],A=x[3],I=C[0],P=C[1],R=C[2],j=C[3];return f[0]=M*I+T*P,f[1]=$*I+A*P,f[2]=M*R+T*j,f[3]=$*R+A*j,f}function g(f,x,C){return f[0]=x[0]-C[0],f[1]=x[1]-C[1],f[2]=x[2]-C[2],f[3]=x[3]-C[3],f}return te.mul=u,te.sub=g,te}var oe,de={};function ge(){if(oe)return de;function l(f){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},l(f)}oe=1,Object.defineProperty(de,"__esModule",{value:!0}),de.create=function(){var f=new r.ARRAY_TYPE(6);return r.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[4]=0,f[5]=0),f[0]=1,f[3]=1,f},de.clone=function(f){var x=new r.ARRAY_TYPE(6);return x[0]=f[0],x[1]=f[1],x[2]=f[2],x[3]=f[3],x[4]=f[4],x[5]=f[5],x},de.copy=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=x[2],f[3]=x[3],f[4]=x[4],f[5]=x[5],f},de.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=0,f[5]=0,f},de.fromValues=function(f,x,C,M,$,T){var A=new r.ARRAY_TYPE(6);return A[0]=f,A[1]=x,A[2]=C,A[3]=M,A[4]=$,A[5]=T,A},de.set=function(f,x,C,M,$,T,A){return f[0]=x,f[1]=C,f[2]=M,f[3]=$,f[4]=T,f[5]=A,f},de.invert=function(f,x){var C=x[0],M=x[1],$=x[2],T=x[3],A=x[4],I=x[5],P=C*T-M*$;return P?(f[0]=T*(P=1/P),f[1]=-M*P,f[2]=-$*P,f[3]=C*P,f[4]=($*I-T*A)*P,f[5]=(M*A-C*I)*P,f):null},de.determinant=function(f){return f[0]*f[3]-f[1]*f[2]},de.multiply=u,de.rotate=function(f,x,C){var M=x[0],$=x[1],T=x[2],A=x[3],I=x[4],P=x[5],R=Math.sin(C),j=Math.cos(C);return f[0]=M*j+T*R,f[1]=$*j+A*R,f[2]=M*-R+T*j,f[3]=$*-R+A*j,f[4]=I,f[5]=P,f},de.scale=function(f,x,C){var M=x[1],$=x[2],T=x[3],A=x[4],I=x[5],P=C[0],R=C[1];return f[0]=x[0]*P,f[1]=M*P,f[2]=$*R,f[3]=T*R,f[4]=A,f[5]=I,f},de.translate=function(f,x,C){var M=x[0],$=x[1],T=x[2],A=x[3],I=x[4],P=x[5],R=C[0],j=C[1];return f[0]=M,f[1]=$,f[2]=T,f[3]=A,f[4]=M*R+T*j+I,f[5]=$*R+A*j+P,f},de.fromRotation=function(f,x){var C=Math.sin(x),M=Math.cos(x);return f[0]=M,f[1]=C,f[2]=-C,f[3]=M,f[4]=0,f[5]=0,f},de.fromScaling=function(f,x){return f[0]=x[0],f[1]=0,f[2]=0,f[3]=x[1],f[4]=0,f[5]=0,f},de.fromTranslation=function(f,x){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=x[0],f[5]=x[1],f},de.str=function(f){return"mat2d("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+")"},de.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],1)},de.add=function(f,x,C){return f[0]=x[0]+C[0],f[1]=x[1]+C[1],f[2]=x[2]+C[2],f[3]=x[3]+C[3],f[4]=x[4]+C[4],f[5]=x[5]+C[5],f},de.subtract=g,de.multiplyScalar=function(f,x,C){return f[0]=x[0]*C,f[1]=x[1]*C,f[2]=x[2]*C,f[3]=x[3]*C,f[4]=x[4]*C,f[5]=x[5]*C,f},de.multiplyScalarAndAdd=function(f,x,C,M){return f[0]=x[0]+C[0]*M,f[1]=x[1]+C[1]*M,f[2]=x[2]+C[2]*M,f[3]=x[3]+C[3]*M,f[4]=x[4]+C[4]*M,f[5]=x[5]+C[5]*M,f},de.exactEquals=function(f,x){return f[0]===x[0]&&f[1]===x[1]&&f[2]===x[2]&&f[3]===x[3]&&f[4]===x[4]&&f[5]===x[5]},de.equals=function(f,x){var C=f[0],M=f[1],$=f[2],T=f[3],A=f[4],I=f[5],P=x[0],R=x[1],j=x[2],W=x[3],K=x[4],ne=x[5];return Math.abs(C-P)<=r.EPSILON*Math.max(1,Math.abs(C),Math.abs(P))&&Math.abs(M-R)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(R))&&Math.abs($-j)<=r.EPSILON*Math.max(1,Math.abs($),Math.abs(j))&&Math.abs(T-W)<=r.EPSILON*Math.max(1,Math.abs(T),Math.abs(W))&&Math.abs(A-K)<=r.EPSILON*Math.max(1,Math.abs(A),Math.abs(K))&&Math.abs(I-ne)<=r.EPSILON*Math.max(1,Math.abs(I),Math.abs(ne))},de.sub=de.mul=void 0;var r=function(f,x){if(f&&f.__esModule)return f;if(f===null||l(f)!=="object"&&typeof f!="function")return{default:f};var C=s(void 0);if(C&&C.has(f))return C.get(f);var M={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in f)if(T!=="default"&&Object.prototype.hasOwnProperty.call(f,T)){var A=$?Object.getOwnPropertyDescriptor(f,T):null;A&&(A.get||A.set)?Object.defineProperty(M,T,A):M[T]=f[T]}return M.default=f,C&&C.set(f,M),M}(G());function s(f){if(typeof WeakMap!="function")return null;var x=new WeakMap,C=new WeakMap;return(s=function(M){return M?C:x})(f)}function u(f,x,C){var M=x[0],$=x[1],T=x[2],A=x[3],I=x[4],P=x[5],R=C[0],j=C[1],W=C[2],K=C[3],ne=C[4],ie=C[5];return f[0]=M*R+T*j,f[1]=$*R+A*j,f[2]=M*W+T*K,f[3]=$*W+A*K,f[4]=M*ne+T*ie+I,f[5]=$*ne+A*ie+P,f}function g(f,x,C){return f[0]=x[0]-C[0],f[1]=x[1]-C[1],f[2]=x[2]-C[2],f[3]=x[3]-C[3],f[4]=x[4]-C[4],f[5]=x[5]-C[5],f}return de.mul=u,de.sub=g,de}var be,pe={};function we(){if(be)return pe;function l(f){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},l(f)}be=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.create=function(){var f=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f},pe.fromMat4=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=x[2],f[3]=x[4],f[4]=x[5],f[5]=x[6],f[6]=x[8],f[7]=x[9],f[8]=x[10],f},pe.clone=function(f){var x=new r.ARRAY_TYPE(9);return x[0]=f[0],x[1]=f[1],x[2]=f[2],x[3]=f[3],x[4]=f[4],x[5]=f[5],x[6]=f[6],x[7]=f[7],x[8]=f[8],x},pe.copy=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=x[2],f[3]=x[3],f[4]=x[4],f[5]=x[5],f[6]=x[6],f[7]=x[7],f[8]=x[8],f},pe.fromValues=function(f,x,C,M,$,T,A,I,P){var R=new r.ARRAY_TYPE(9);return R[0]=f,R[1]=x,R[2]=C,R[3]=M,R[4]=$,R[5]=T,R[6]=A,R[7]=I,R[8]=P,R},pe.set=function(f,x,C,M,$,T,A,I,P,R){return f[0]=x,f[1]=C,f[2]=M,f[3]=$,f[4]=T,f[5]=A,f[6]=I,f[7]=P,f[8]=R,f},pe.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},pe.transpose=function(f,x){if(f===x){var C=x[1],M=x[2],$=x[5];f[1]=x[3],f[2]=x[6],f[3]=C,f[5]=x[7],f[6]=M,f[7]=$}else f[0]=x[0],f[1]=x[3],f[2]=x[6],f[3]=x[1],f[4]=x[4],f[5]=x[7],f[6]=x[2],f[7]=x[5],f[8]=x[8];return f},pe.invert=function(f,x){var C=x[0],M=x[1],$=x[2],T=x[3],A=x[4],I=x[5],P=x[6],R=x[7],j=x[8],W=j*A-I*R,K=-j*T+I*P,ne=R*T-A*P,ie=C*W+M*K+$*ne;return ie?(f[0]=W*(ie=1/ie),f[1]=(-j*M+$*R)*ie,f[2]=(I*M-$*A)*ie,f[3]=K*ie,f[4]=(j*C-$*P)*ie,f[5]=(-I*C+$*T)*ie,f[6]=ne*ie,f[7]=(-R*C+M*P)*ie,f[8]=(A*C-M*T)*ie,f):null},pe.adjoint=function(f,x){var C=x[0],M=x[1],$=x[2],T=x[3],A=x[4],I=x[5],P=x[6],R=x[7],j=x[8];return f[0]=A*j-I*R,f[1]=$*R-M*j,f[2]=M*I-$*A,f[3]=I*P-T*j,f[4]=C*j-$*P,f[5]=$*T-C*I,f[6]=T*R-A*P,f[7]=M*P-C*R,f[8]=C*A-M*T,f},pe.determinant=function(f){var x=f[3],C=f[4],M=f[5],$=f[6],T=f[7],A=f[8];return f[0]*(A*C-M*T)+f[1]*(-A*x+M*$)+f[2]*(T*x-C*$)},pe.multiply=u,pe.translate=function(f,x,C){var M=x[0],$=x[1],T=x[2],A=x[3],I=x[4],P=x[5],R=x[6],j=x[7],W=x[8],K=C[0],ne=C[1];return f[0]=M,f[1]=$,f[2]=T,f[3]=A,f[4]=I,f[5]=P,f[6]=K*M+ne*A+R,f[7]=K*$+ne*I+j,f[8]=K*T+ne*P+W,f},pe.rotate=function(f,x,C){var M=x[0],$=x[1],T=x[2],A=x[3],I=x[4],P=x[5],R=x[6],j=x[7],W=x[8],K=Math.sin(C),ne=Math.cos(C);return f[0]=ne*M+K*A,f[1]=ne*$+K*I,f[2]=ne*T+K*P,f[3]=ne*A-K*M,f[4]=ne*I-K*$,f[5]=ne*P-K*T,f[6]=R,f[7]=j,f[8]=W,f},pe.scale=function(f,x,C){var M=C[0],$=C[1];return f[0]=M*x[0],f[1]=M*x[1],f[2]=M*x[2],f[3]=$*x[3],f[4]=$*x[4],f[5]=$*x[5],f[6]=x[6],f[7]=x[7],f[8]=x[8],f},pe.fromTranslation=function(f,x){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=x[0],f[7]=x[1],f[8]=1,f},pe.fromRotation=function(f,x){var C=Math.sin(x),M=Math.cos(x);return f[0]=M,f[1]=C,f[2]=0,f[3]=-C,f[4]=M,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},pe.fromScaling=function(f,x){return f[0]=x[0],f[1]=0,f[2]=0,f[3]=0,f[4]=x[1],f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},pe.fromMat2d=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=0,f[3]=x[2],f[4]=x[3],f[5]=0,f[6]=x[4],f[7]=x[5],f[8]=1,f},pe.fromQuat=function(f,x){var C=x[0],M=x[1],$=x[2],T=x[3],A=C+C,I=M+M,P=$+$,R=C*A,j=M*A,W=M*I,K=$*A,ne=$*I,ie=$*P,J=T*A,le=T*I,fe=T*P;return f[0]=1-W-ie,f[3]=j-fe,f[6]=K+le,f[1]=j+fe,f[4]=1-R-ie,f[7]=ne-J,f[2]=K-le,f[5]=ne+J,f[8]=1-R-W,f},pe.normalFromMat4=function(f,x){var C=x[0],M=x[1],$=x[2],T=x[3],A=x[4],I=x[5],P=x[6],R=x[7],j=x[8],W=x[9],K=x[10],ne=x[11],ie=x[12],J=x[13],le=x[14],fe=x[15],ve=C*I-M*A,Ne=C*P-$*A,$e=C*R-T*A,Ie=M*P-$*I,Je=M*R-T*I,Ve=$*R-T*P,et=j*J-W*ie,it=j*le-K*ie,at=j*fe-ne*ie,lt=W*le-K*J,gt=W*fe-ne*J,vt=K*fe-ne*le,ht=ve*vt-Ne*gt+$e*lt+Ie*at-Je*it+Ve*et;return ht?(f[0]=(I*vt-P*gt+R*lt)*(ht=1/ht),f[1]=(P*at-A*vt-R*it)*ht,f[2]=(A*gt-I*at+R*et)*ht,f[3]=($*gt-M*vt-T*lt)*ht,f[4]=(C*vt-$*at+T*it)*ht,f[5]=(M*at-C*gt-T*et)*ht,f[6]=(J*Ve-le*Je+fe*Ie)*ht,f[7]=(le*$e-ie*Ve-fe*Ne)*ht,f[8]=(ie*Je-J*$e+fe*ve)*ht,f):null},pe.projection=function(f,x,C){return f[0]=2/x,f[1]=0,f[2]=0,f[3]=0,f[4]=-2/C,f[5]=0,f[6]=-1,f[7]=1,f[8]=1,f},pe.str=function(f){return"mat3("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+")"},pe.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8])},pe.add=function(f,x,C){return f[0]=x[0]+C[0],f[1]=x[1]+C[1],f[2]=x[2]+C[2],f[3]=x[3]+C[3],f[4]=x[4]+C[4],f[5]=x[5]+C[5],f[6]=x[6]+C[6],f[7]=x[7]+C[7],f[8]=x[8]+C[8],f},pe.subtract=g,pe.multiplyScalar=function(f,x,C){return f[0]=x[0]*C,f[1]=x[1]*C,f[2]=x[2]*C,f[3]=x[3]*C,f[4]=x[4]*C,f[5]=x[5]*C,f[6]=x[6]*C,f[7]=x[7]*C,f[8]=x[8]*C,f},pe.multiplyScalarAndAdd=function(f,x,C,M){return f[0]=x[0]+C[0]*M,f[1]=x[1]+C[1]*M,f[2]=x[2]+C[2]*M,f[3]=x[3]+C[3]*M,f[4]=x[4]+C[4]*M,f[5]=x[5]+C[5]*M,f[6]=x[6]+C[6]*M,f[7]=x[7]+C[7]*M,f[8]=x[8]+C[8]*M,f},pe.exactEquals=function(f,x){return f[0]===x[0]&&f[1]===x[1]&&f[2]===x[2]&&f[3]===x[3]&&f[4]===x[4]&&f[5]===x[5]&&f[6]===x[6]&&f[7]===x[7]&&f[8]===x[8]},pe.equals=function(f,x){var C=f[0],M=f[1],$=f[2],T=f[3],A=f[4],I=f[5],P=f[6],R=f[7],j=f[8],W=x[0],K=x[1],ne=x[2],ie=x[3],J=x[4],le=x[5],fe=x[6],ve=x[7],Ne=x[8];return Math.abs(C-W)<=r.EPSILON*Math.max(1,Math.abs(C),Math.abs(W))&&Math.abs(M-K)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(K))&&Math.abs($-ne)<=r.EPSILON*Math.max(1,Math.abs($),Math.abs(ne))&&Math.abs(T-ie)<=r.EPSILON*Math.max(1,Math.abs(T),Math.abs(ie))&&Math.abs(A-J)<=r.EPSILON*Math.max(1,Math.abs(A),Math.abs(J))&&Math.abs(I-le)<=r.EPSILON*Math.max(1,Math.abs(I),Math.abs(le))&&Math.abs(P-fe)<=r.EPSILON*Math.max(1,Math.abs(P),Math.abs(fe))&&Math.abs(R-ve)<=r.EPSILON*Math.max(1,Math.abs(R),Math.abs(ve))&&Math.abs(j-Ne)<=r.EPSILON*Math.max(1,Math.abs(j),Math.abs(Ne))},pe.sub=pe.mul=void 0;var r=function(f,x){if(f&&f.__esModule)return f;if(f===null||l(f)!=="object"&&typeof f!="function")return{default:f};var C=s(void 0);if(C&&C.has(f))return C.get(f);var M={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in f)if(T!=="default"&&Object.prototype.hasOwnProperty.call(f,T)){var A=$?Object.getOwnPropertyDescriptor(f,T):null;A&&(A.get||A.set)?Object.defineProperty(M,T,A):M[T]=f[T]}return M.default=f,C&&C.set(f,M),M}(G());function s(f){if(typeof WeakMap!="function")return null;var x=new WeakMap,C=new WeakMap;return(s=function(M){return M?C:x})(f)}function u(f,x,C){var M=x[0],$=x[1],T=x[2],A=x[3],I=x[4],P=x[5],R=x[6],j=x[7],W=x[8],K=C[0],ne=C[1],ie=C[2],J=C[3],le=C[4],fe=C[5],ve=C[6],Ne=C[7],$e=C[8];return f[0]=K*M+ne*A+ie*R,f[1]=K*$+ne*I+ie*j,f[2]=K*T+ne*P+ie*W,f[3]=J*M+le*A+fe*R,f[4]=J*$+le*I+fe*j,f[5]=J*T+le*P+fe*W,f[6]=ve*M+Ne*A+$e*R,f[7]=ve*$+Ne*I+$e*j,f[8]=ve*T+Ne*P+$e*W,f}function g(f,x,C){return f[0]=x[0]-C[0],f[1]=x[1]-C[1],f[2]=x[2]-C[2],f[3]=x[3]-C[3],f[4]=x[4]-C[4],f[5]=x[5]-C[5],f[6]=x[6]-C[6],f[7]=x[7]-C[7],f[8]=x[8]-C[8],f}return pe.mul=u,pe.sub=g,pe}var ke,Ae={};function re(){if(ke)return Ae;function l(T){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},l(T)}ke=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.create=function(){var T=new r.ARRAY_TYPE(16);return r.ARRAY_TYPE!=Float32Array&&(T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=0,T[12]=0,T[13]=0,T[14]=0),T[0]=1,T[5]=1,T[10]=1,T[15]=1,T},Ae.clone=function(T){var A=new r.ARRAY_TYPE(16);return A[0]=T[0],A[1]=T[1],A[2]=T[2],A[3]=T[3],A[4]=T[4],A[5]=T[5],A[6]=T[6],A[7]=T[7],A[8]=T[8],A[9]=T[9],A[10]=T[10],A[11]=T[11],A[12]=T[12],A[13]=T[13],A[14]=T[14],A[15]=T[15],A},Ae.copy=function(T,A){return T[0]=A[0],T[1]=A[1],T[2]=A[2],T[3]=A[3],T[4]=A[4],T[5]=A[5],T[6]=A[6],T[7]=A[7],T[8]=A[8],T[9]=A[9],T[10]=A[10],T[11]=A[11],T[12]=A[12],T[13]=A[13],T[14]=A[14],T[15]=A[15],T},Ae.fromValues=function(T,A,I,P,R,j,W,K,ne,ie,J,le,fe,ve,Ne,$e){var Ie=new r.ARRAY_TYPE(16);return Ie[0]=T,Ie[1]=A,Ie[2]=I,Ie[3]=P,Ie[4]=R,Ie[5]=j,Ie[6]=W,Ie[7]=K,Ie[8]=ne,Ie[9]=ie,Ie[10]=J,Ie[11]=le,Ie[12]=fe,Ie[13]=ve,Ie[14]=Ne,Ie[15]=$e,Ie},Ae.set=function(T,A,I,P,R,j,W,K,ne,ie,J,le,fe,ve,Ne,$e,Ie){return T[0]=A,T[1]=I,T[2]=P,T[3]=R,T[4]=j,T[5]=W,T[6]=K,T[7]=ne,T[8]=ie,T[9]=J,T[10]=le,T[11]=fe,T[12]=ve,T[13]=Ne,T[14]=$e,T[15]=Ie,T},Ae.identity=u,Ae.transpose=function(T,A){if(T===A){var I=A[1],P=A[2],R=A[3],j=A[6],W=A[7],K=A[11];T[1]=A[4],T[2]=A[8],T[3]=A[12],T[4]=I,T[6]=A[9],T[7]=A[13],T[8]=P,T[9]=j,T[11]=A[14],T[12]=R,T[13]=W,T[14]=K}else T[0]=A[0],T[1]=A[4],T[2]=A[8],T[3]=A[12],T[4]=A[1],T[5]=A[5],T[6]=A[9],T[7]=A[13],T[8]=A[2],T[9]=A[6],T[10]=A[10],T[11]=A[14],T[12]=A[3],T[13]=A[7],T[14]=A[11],T[15]=A[15];return T},Ae.invert=function(T,A){var I=A[0],P=A[1],R=A[2],j=A[3],W=A[4],K=A[5],ne=A[6],ie=A[7],J=A[8],le=A[9],fe=A[10],ve=A[11],Ne=A[12],$e=A[13],Ie=A[14],Je=A[15],Ve=I*K-P*W,et=I*ne-R*W,it=I*ie-j*W,at=P*ne-R*K,lt=P*ie-j*K,gt=R*ie-j*ne,vt=J*$e-le*Ne,ht=J*Ie-fe*Ne,Rt=J*Je-ve*Ne,Yt=le*Ie-fe*$e,Lt=le*Je-ve*$e,nr=fe*Je-ve*Ie,ar=Ve*nr-et*Lt+it*Yt+at*Rt-lt*ht+gt*vt;return ar?(T[0]=(K*nr-ne*Lt+ie*Yt)*(ar=1/ar),T[1]=(R*Lt-P*nr-j*Yt)*ar,T[2]=($e*gt-Ie*lt+Je*at)*ar,T[3]=(fe*lt-le*gt-ve*at)*ar,T[4]=(ne*Rt-W*nr-ie*ht)*ar,T[5]=(I*nr-R*Rt+j*ht)*ar,T[6]=(Ie*it-Ne*gt-Je*et)*ar,T[7]=(J*gt-fe*it+ve*et)*ar,T[8]=(W*Lt-K*Rt+ie*vt)*ar,T[9]=(P*Rt-I*Lt-j*vt)*ar,T[10]=(Ne*lt-$e*it+Je*Ve)*ar,T[11]=(le*it-J*lt-ve*Ve)*ar,T[12]=(K*ht-W*Yt-ne*vt)*ar,T[13]=(I*Yt-P*ht+R*vt)*ar,T[14]=($e*et-Ne*at-Ie*Ve)*ar,T[15]=(J*at-le*et+fe*Ve)*ar,T):null},Ae.adjoint=function(T,A){var I=A[0],P=A[1],R=A[2],j=A[3],W=A[4],K=A[5],ne=A[6],ie=A[7],J=A[8],le=A[9],fe=A[10],ve=A[11],Ne=A[12],$e=A[13],Ie=A[14],Je=A[15];return T[0]=K*(fe*Je-ve*Ie)-le*(ne*Je-ie*Ie)+$e*(ne*ve-ie*fe),T[1]=-(P*(fe*Je-ve*Ie)-le*(R*Je-j*Ie)+$e*(R*ve-j*fe)),T[2]=P*(ne*Je-ie*Ie)-K*(R*Je-j*Ie)+$e*(R*ie-j*ne),T[3]=-(P*(ne*ve-ie*fe)-K*(R*ve-j*fe)+le*(R*ie-j*ne)),T[4]=-(W*(fe*Je-ve*Ie)-J*(ne*Je-ie*Ie)+Ne*(ne*ve-ie*fe)),T[5]=I*(fe*Je-ve*Ie)-J*(R*Je-j*Ie)+Ne*(R*ve-j*fe),T[6]=-(I*(ne*Je-ie*Ie)-W*(R*Je-j*Ie)+Ne*(R*ie-j*ne)),T[7]=I*(ne*ve-ie*fe)-W*(R*ve-j*fe)+J*(R*ie-j*ne),T[8]=W*(le*Je-ve*$e)-J*(K*Je-ie*$e)+Ne*(K*ve-ie*le),T[9]=-(I*(le*Je-ve*$e)-J*(P*Je-j*$e)+Ne*(P*ve-j*le)),T[10]=I*(K*Je-ie*$e)-W*(P*Je-j*$e)+Ne*(P*ie-j*K),T[11]=-(I*(K*ve-ie*le)-W*(P*ve-j*le)+J*(P*ie-j*K)),T[12]=-(W*(le*Ie-fe*$e)-J*(K*Ie-ne*$e)+Ne*(K*fe-ne*le)),T[13]=I*(le*Ie-fe*$e)-J*(P*Ie-R*$e)+Ne*(P*fe-R*le),T[14]=-(I*(K*Ie-ne*$e)-W*(P*Ie-R*$e)+Ne*(P*ne-R*K)),T[15]=I*(K*fe-ne*le)-W*(P*fe-R*le)+J*(P*ne-R*K),T},Ae.determinant=function(T){var A=T[0],I=T[1],P=T[2],R=T[3],j=T[4],W=T[5],K=T[6],ne=T[7],ie=T[8],J=T[9],le=T[10],fe=T[11],ve=T[12],Ne=T[13],$e=T[14],Ie=T[15];return(A*W-I*j)*(le*Ie-fe*$e)-(A*K-P*j)*(J*Ie-fe*Ne)+(A*ne-R*j)*(J*$e-le*Ne)+(I*K-P*W)*(ie*Ie-fe*ve)-(I*ne-R*W)*(ie*$e-le*ve)+(P*ne-R*K)*(ie*Ne-J*ve)},Ae.multiply=g,Ae.translate=function(T,A,I){var P,R,j,W,K,ne,ie,J,le,fe,ve,Ne,$e=I[0],Ie=I[1],Je=I[2];return A===T?(T[12]=A[0]*$e+A[4]*Ie+A[8]*Je+A[12],T[13]=A[1]*$e+A[5]*Ie+A[9]*Je+A[13],T[14]=A[2]*$e+A[6]*Ie+A[10]*Je+A[14],T[15]=A[3]*$e+A[7]*Ie+A[11]*Je+A[15]):(R=A[1],j=A[2],W=A[3],K=A[4],ne=A[5],ie=A[6],J=A[7],le=A[8],fe=A[9],ve=A[10],Ne=A[11],T[0]=P=A[0],T[1]=R,T[2]=j,T[3]=W,T[4]=K,T[5]=ne,T[6]=ie,T[7]=J,T[8]=le,T[9]=fe,T[10]=ve,T[11]=Ne,T[12]=P*$e+K*Ie+le*Je+A[12],T[13]=R*$e+ne*Ie+fe*Je+A[13],T[14]=j*$e+ie*Ie+ve*Je+A[14],T[15]=W*$e+J*Ie+Ne*Je+A[15]),T},Ae.scale=function(T,A,I){var P=I[0],R=I[1],j=I[2];return T[0]=A[0]*P,T[1]=A[1]*P,T[2]=A[2]*P,T[3]=A[3]*P,T[4]=A[4]*R,T[5]=A[5]*R,T[6]=A[6]*R,T[7]=A[7]*R,T[8]=A[8]*j,T[9]=A[9]*j,T[10]=A[10]*j,T[11]=A[11]*j,T[12]=A[12],T[13]=A[13],T[14]=A[14],T[15]=A[15],T},Ae.rotate=function(T,A,I,P){var R,j,W,K,ne,ie,J,le,fe,ve,Ne,$e,Ie,Je,Ve,et,it,at,lt,gt,vt,ht,Rt,Yt,Lt=P[0],nr=P[1],ar=P[2],gr=Math.hypot(Lt,nr,ar);return gr<r.EPSILON?null:(Lt*=gr=1/gr,nr*=gr,ar*=gr,R=Math.sin(I),j=Math.cos(I),ne=A[1],ie=A[2],J=A[3],fe=A[5],ve=A[6],Ne=A[7],Ie=A[9],Je=A[10],Ve=A[11],et=Lt*Lt*(W=1-j)+j,lt=Lt*nr*W-ar*R,gt=nr*nr*W+j,vt=ar*nr*W+Lt*R,ht=Lt*ar*W+nr*R,Rt=nr*ar*W-Lt*R,Yt=ar*ar*W+j,T[0]=(K=A[0])*et+(le=A[4])*(it=nr*Lt*W+ar*R)+($e=A[8])*(at=ar*Lt*W-nr*R),T[1]=ne*et+fe*it+Ie*at,T[2]=ie*et+ve*it+Je*at,T[3]=J*et+Ne*it+Ve*at,T[4]=K*lt+le*gt+$e*vt,T[5]=ne*lt+fe*gt+Ie*vt,T[6]=ie*lt+ve*gt+Je*vt,T[7]=J*lt+Ne*gt+Ve*vt,T[8]=K*ht+le*Rt+$e*Yt,T[9]=ne*ht+fe*Rt+Ie*Yt,T[10]=ie*ht+ve*Rt+Je*Yt,T[11]=J*ht+Ne*Rt+Ve*Yt,A!==T&&(T[12]=A[12],T[13]=A[13],T[14]=A[14],T[15]=A[15]),T)},Ae.rotateX=function(T,A,I){var P=Math.sin(I),R=Math.cos(I),j=A[4],W=A[5],K=A[6],ne=A[7],ie=A[8],J=A[9],le=A[10],fe=A[11];return A!==T&&(T[0]=A[0],T[1]=A[1],T[2]=A[2],T[3]=A[3],T[12]=A[12],T[13]=A[13],T[14]=A[14],T[15]=A[15]),T[4]=j*R+ie*P,T[5]=W*R+J*P,T[6]=K*R+le*P,T[7]=ne*R+fe*P,T[8]=ie*R-j*P,T[9]=J*R-W*P,T[10]=le*R-K*P,T[11]=fe*R-ne*P,T},Ae.rotateY=function(T,A,I){var P=Math.sin(I),R=Math.cos(I),j=A[0],W=A[1],K=A[2],ne=A[3],ie=A[8],J=A[9],le=A[10],fe=A[11];return A!==T&&(T[4]=A[4],T[5]=A[5],T[6]=A[6],T[7]=A[7],T[12]=A[12],T[13]=A[13],T[14]=A[14],T[15]=A[15]),T[0]=j*R-ie*P,T[1]=W*R-J*P,T[2]=K*R-le*P,T[3]=ne*R-fe*P,T[8]=j*P+ie*R,T[9]=W*P+J*R,T[10]=K*P+le*R,T[11]=ne*P+fe*R,T},Ae.rotateZ=function(T,A,I){var P=Math.sin(I),R=Math.cos(I),j=A[0],W=A[1],K=A[2],ne=A[3],ie=A[4],J=A[5],le=A[6],fe=A[7];return A!==T&&(T[8]=A[8],T[9]=A[9],T[10]=A[10],T[11]=A[11],T[12]=A[12],T[13]=A[13],T[14]=A[14],T[15]=A[15]),T[0]=j*R+ie*P,T[1]=W*R+J*P,T[2]=K*R+le*P,T[3]=ne*R+fe*P,T[4]=ie*R-j*P,T[5]=J*R-W*P,T[6]=le*R-K*P,T[7]=fe*R-ne*P,T},Ae.fromTranslation=function(T,A){return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=A[0],T[13]=A[1],T[14]=A[2],T[15]=1,T},Ae.fromScaling=function(T,A){return T[0]=A[0],T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=A[1],T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=A[2],T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},Ae.fromRotation=function(T,A,I){var P,R,j,W=I[0],K=I[1],ne=I[2],ie=Math.hypot(W,K,ne);return ie<r.EPSILON?null:(W*=ie=1/ie,K*=ie,ne*=ie,P=Math.sin(A),R=Math.cos(A),T[0]=W*W*(j=1-R)+R,T[1]=K*W*j+ne*P,T[2]=ne*W*j-K*P,T[3]=0,T[4]=W*K*j-ne*P,T[5]=K*K*j+R,T[6]=ne*K*j+W*P,T[7]=0,T[8]=W*ne*j+K*P,T[9]=K*ne*j-W*P,T[10]=ne*ne*j+R,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T)},Ae.fromXRotation=function(T,A){var I=Math.sin(A),P=Math.cos(A);return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=P,T[6]=I,T[7]=0,T[8]=0,T[9]=-I,T[10]=P,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},Ae.fromYRotation=function(T,A){var I=Math.sin(A),P=Math.cos(A);return T[0]=P,T[1]=0,T[2]=-I,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=I,T[9]=0,T[10]=P,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},Ae.fromZRotation=function(T,A){var I=Math.sin(A),P=Math.cos(A);return T[0]=P,T[1]=I,T[2]=0,T[3]=0,T[4]=-I,T[5]=P,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},Ae.fromRotationTranslation=f,Ae.fromQuat2=function(T,A){var I=new r.ARRAY_TYPE(3),P=-A[0],R=-A[1],j=-A[2],W=A[3],K=A[4],ne=A[5],ie=A[6],J=A[7],le=P*P+R*R+j*j+W*W;return le>0?(I[0]=2*(K*W+J*P+ne*j-ie*R)/le,I[1]=2*(ne*W+J*R+ie*P-K*j)/le,I[2]=2*(ie*W+J*j+K*R-ne*P)/le):(I[0]=2*(K*W+J*P+ne*j-ie*R),I[1]=2*(ne*W+J*R+ie*P-K*j),I[2]=2*(ie*W+J*j+K*R-ne*P)),f(T,A,I),T},Ae.getTranslation=function(T,A){return T[0]=A[12],T[1]=A[13],T[2]=A[14],T},Ae.getScaling=x,Ae.getRotation=function(T,A){var I=new r.ARRAY_TYPE(3);x(I,A);var P=1/I[0],R=1/I[1],j=1/I[2],W=A[0]*P,K=A[1]*R,ne=A[2]*j,ie=A[4]*P,J=A[5]*R,le=A[6]*j,fe=A[8]*P,ve=A[9]*R,Ne=A[10]*j,$e=W+J+Ne,Ie=0;return $e>0?(Ie=2*Math.sqrt($e+1),T[3]=.25*Ie,T[0]=(le-ve)/Ie,T[1]=(fe-ne)/Ie,T[2]=(K-ie)/Ie):W>J&&W>Ne?(Ie=2*Math.sqrt(1+W-J-Ne),T[3]=(le-ve)/Ie,T[0]=.25*Ie,T[1]=(K+ie)/Ie,T[2]=(fe+ne)/Ie):J>Ne?(Ie=2*Math.sqrt(1+J-W-Ne),T[3]=(fe-ne)/Ie,T[0]=(K+ie)/Ie,T[1]=.25*Ie,T[2]=(le+ve)/Ie):(Ie=2*Math.sqrt(1+Ne-W-J),T[3]=(K-ie)/Ie,T[0]=(fe+ne)/Ie,T[1]=(le+ve)/Ie,T[2]=.25*Ie),T},Ae.fromRotationTranslationScale=function(T,A,I,P){var R=A[0],j=A[1],W=A[2],K=A[3],ne=R+R,ie=j+j,J=W+W,le=R*ne,fe=R*ie,ve=R*J,Ne=j*ie,$e=j*J,Ie=W*J,Je=K*ne,Ve=K*ie,et=K*J,it=P[0],at=P[1],lt=P[2];return T[0]=(1-(Ne+Ie))*it,T[1]=(fe+et)*it,T[2]=(ve-Ve)*it,T[3]=0,T[4]=(fe-et)*at,T[5]=(1-(le+Ie))*at,T[6]=($e+Je)*at,T[7]=0,T[8]=(ve+Ve)*lt,T[9]=($e-Je)*lt,T[10]=(1-(le+Ne))*lt,T[11]=0,T[12]=I[0],T[13]=I[1],T[14]=I[2],T[15]=1,T},Ae.fromRotationTranslationScaleOrigin=function(T,A,I,P,R){var j=A[0],W=A[1],K=A[2],ne=A[3],ie=j+j,J=W+W,le=K+K,fe=j*ie,ve=j*J,Ne=j*le,$e=W*J,Ie=W*le,Je=K*le,Ve=ne*ie,et=ne*J,it=ne*le,at=P[0],lt=P[1],gt=P[2],vt=R[0],ht=R[1],Rt=R[2],Yt=(1-($e+Je))*at,Lt=(ve+it)*at,nr=(Ne-et)*at,ar=(ve-it)*lt,gr=(1-(fe+Je))*lt,jt=(Ie+Ve)*lt,Mr=(Ne+et)*gt,sr=(Ie-Ve)*gt,Cr=(1-(fe+$e))*gt;return T[0]=Yt,T[1]=Lt,T[2]=nr,T[3]=0,T[4]=ar,T[5]=gr,T[6]=jt,T[7]=0,T[8]=Mr,T[9]=sr,T[10]=Cr,T[11]=0,T[12]=I[0]+vt-(Yt*vt+ar*ht+Mr*Rt),T[13]=I[1]+ht-(Lt*vt+gr*ht+sr*Rt),T[14]=I[2]+Rt-(nr*vt+jt*ht+Cr*Rt),T[15]=1,T},Ae.fromQuat=function(T,A){var I=A[0],P=A[1],R=A[2],j=A[3],W=I+I,K=P+P,ne=R+R,ie=I*W,J=P*W,le=P*K,fe=R*W,ve=R*K,Ne=R*ne,$e=j*W,Ie=j*K,Je=j*ne;return T[0]=1-le-Ne,T[1]=J+Je,T[2]=fe-Ie,T[3]=0,T[4]=J-Je,T[5]=1-ie-Ne,T[6]=ve+$e,T[7]=0,T[8]=fe+Ie,T[9]=ve-$e,T[10]=1-ie-le,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},Ae.frustum=function(T,A,I,P,R,j,W){var K=1/(I-A),ne=1/(R-P),ie=1/(j-W);return T[0]=2*j*K,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=2*j*ne,T[6]=0,T[7]=0,T[8]=(I+A)*K,T[9]=(R+P)*ne,T[10]=(W+j)*ie,T[11]=-1,T[12]=0,T[13]=0,T[14]=W*j*2*ie,T[15]=0,T},Ae.perspectiveNO=C,Ae.perspectiveZO=function(T,A,I,P,R){var j,W=1/Math.tan(A/2);return T[0]=W/I,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=W,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=-1,T[12]=0,T[13]=0,T[15]=0,R!=null&&R!==1/0?(T[10]=R*(j=1/(P-R)),T[14]=R*P*j):(T[10]=-1,T[14]=-P),T},Ae.perspectiveFromFieldOfView=function(T,A,I,P){var R=Math.tan(A.upDegrees*Math.PI/180),j=Math.tan(A.downDegrees*Math.PI/180),W=Math.tan(A.leftDegrees*Math.PI/180),K=Math.tan(A.rightDegrees*Math.PI/180),ne=2/(W+K),ie=2/(R+j);return T[0]=ne,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=ie,T[6]=0,T[7]=0,T[8]=-(W-K)*ne*.5,T[9]=(R-j)*ie*.5,T[10]=P/(I-P),T[11]=-1,T[12]=0,T[13]=0,T[14]=P*I/(I-P),T[15]=0,T},Ae.orthoNO=M,Ae.orthoZO=function(T,A,I,P,R,j,W){var K=1/(A-I),ne=1/(P-R),ie=1/(j-W);return T[0]=-2*K,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=-2*ne,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=ie,T[11]=0,T[12]=(A+I)*K,T[13]=(R+P)*ne,T[14]=j*ie,T[15]=1,T},Ae.lookAt=function(T,A,I,P){var R,j,W,K,ne,ie,J,le,fe,ve,Ne=A[0],$e=A[1],Ie=A[2],Je=P[0],Ve=P[1],et=P[2],it=I[0],at=I[1],lt=I[2];return Math.abs(Ne-it)<r.EPSILON&&Math.abs($e-at)<r.EPSILON&&Math.abs(Ie-lt)<r.EPSILON?u(T):(J=Ne-it,le=$e-at,fe=Ie-lt,R=Ve*(fe*=ve=1/Math.hypot(J,le,fe))-et*(le*=ve),j=et*(J*=ve)-Je*fe,W=Je*le-Ve*J,(ve=Math.hypot(R,j,W))?(R*=ve=1/ve,j*=ve,W*=ve):(R=0,j=0,W=0),K=le*W-fe*j,ne=fe*R-J*W,ie=J*j-le*R,(ve=Math.hypot(K,ne,ie))?(K*=ve=1/ve,ne*=ve,ie*=ve):(K=0,ne=0,ie=0),T[0]=R,T[1]=K,T[2]=J,T[3]=0,T[4]=j,T[5]=ne,T[6]=le,T[7]=0,T[8]=W,T[9]=ie,T[10]=fe,T[11]=0,T[12]=-(R*Ne+j*$e+W*Ie),T[13]=-(K*Ne+ne*$e+ie*Ie),T[14]=-(J*Ne+le*$e+fe*Ie),T[15]=1,T)},Ae.targetTo=function(T,A,I,P){var R=A[0],j=A[1],W=A[2],K=P[0],ne=P[1],ie=P[2],J=R-I[0],le=j-I[1],fe=W-I[2],ve=J*J+le*le+fe*fe;ve>0&&(J*=ve=1/Math.sqrt(ve),le*=ve,fe*=ve);var Ne=ne*fe-ie*le,$e=ie*J-K*fe,Ie=K*le-ne*J;return(ve=Ne*Ne+$e*$e+Ie*Ie)>0&&(Ne*=ve=1/Math.sqrt(ve),$e*=ve,Ie*=ve),T[0]=Ne,T[1]=$e,T[2]=Ie,T[3]=0,T[4]=le*Ie-fe*$e,T[5]=fe*Ne-J*Ie,T[6]=J*$e-le*Ne,T[7]=0,T[8]=J,T[9]=le,T[10]=fe,T[11]=0,T[12]=R,T[13]=j,T[14]=W,T[15]=1,T},Ae.str=function(T){return"mat4("+T[0]+", "+T[1]+", "+T[2]+", "+T[3]+", "+T[4]+", "+T[5]+", "+T[6]+", "+T[7]+", "+T[8]+", "+T[9]+", "+T[10]+", "+T[11]+", "+T[12]+", "+T[13]+", "+T[14]+", "+T[15]+")"},Ae.frob=function(T){return Math.hypot(T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],T[8],T[9],T[10],T[11],T[12],T[13],T[14],T[15])},Ae.add=function(T,A,I){return T[0]=A[0]+I[0],T[1]=A[1]+I[1],T[2]=A[2]+I[2],T[3]=A[3]+I[3],T[4]=A[4]+I[4],T[5]=A[5]+I[5],T[6]=A[6]+I[6],T[7]=A[7]+I[7],T[8]=A[8]+I[8],T[9]=A[9]+I[9],T[10]=A[10]+I[10],T[11]=A[11]+I[11],T[12]=A[12]+I[12],T[13]=A[13]+I[13],T[14]=A[14]+I[14],T[15]=A[15]+I[15],T},Ae.subtract=$,Ae.multiplyScalar=function(T,A,I){return T[0]=A[0]*I,T[1]=A[1]*I,T[2]=A[2]*I,T[3]=A[3]*I,T[4]=A[4]*I,T[5]=A[5]*I,T[6]=A[6]*I,T[7]=A[7]*I,T[8]=A[8]*I,T[9]=A[9]*I,T[10]=A[10]*I,T[11]=A[11]*I,T[12]=A[12]*I,T[13]=A[13]*I,T[14]=A[14]*I,T[15]=A[15]*I,T},Ae.multiplyScalarAndAdd=function(T,A,I,P){return T[0]=A[0]+I[0]*P,T[1]=A[1]+I[1]*P,T[2]=A[2]+I[2]*P,T[3]=A[3]+I[3]*P,T[4]=A[4]+I[4]*P,T[5]=A[5]+I[5]*P,T[6]=A[6]+I[6]*P,T[7]=A[7]+I[7]*P,T[8]=A[8]+I[8]*P,T[9]=A[9]+I[9]*P,T[10]=A[10]+I[10]*P,T[11]=A[11]+I[11]*P,T[12]=A[12]+I[12]*P,T[13]=A[13]+I[13]*P,T[14]=A[14]+I[14]*P,T[15]=A[15]+I[15]*P,T},Ae.exactEquals=function(T,A){return T[0]===A[0]&&T[1]===A[1]&&T[2]===A[2]&&T[3]===A[3]&&T[4]===A[4]&&T[5]===A[5]&&T[6]===A[6]&&T[7]===A[7]&&T[8]===A[8]&&T[9]===A[9]&&T[10]===A[10]&&T[11]===A[11]&&T[12]===A[12]&&T[13]===A[13]&&T[14]===A[14]&&T[15]===A[15]},Ae.equals=function(T,A){var I=T[0],P=T[1],R=T[2],j=T[3],W=T[4],K=T[5],ne=T[6],ie=T[7],J=T[8],le=T[9],fe=T[10],ve=T[11],Ne=T[12],$e=T[13],Ie=T[14],Je=T[15],Ve=A[0],et=A[1],it=A[2],at=A[3],lt=A[4],gt=A[5],vt=A[6],ht=A[7],Rt=A[8],Yt=A[9],Lt=A[10],nr=A[11],ar=A[12],gr=A[13],jt=A[14],Mr=A[15];return Math.abs(I-Ve)<=r.EPSILON*Math.max(1,Math.abs(I),Math.abs(Ve))&&Math.abs(P-et)<=r.EPSILON*Math.max(1,Math.abs(P),Math.abs(et))&&Math.abs(R-it)<=r.EPSILON*Math.max(1,Math.abs(R),Math.abs(it))&&Math.abs(j-at)<=r.EPSILON*Math.max(1,Math.abs(j),Math.abs(at))&&Math.abs(W-lt)<=r.EPSILON*Math.max(1,Math.abs(W),Math.abs(lt))&&Math.abs(K-gt)<=r.EPSILON*Math.max(1,Math.abs(K),Math.abs(gt))&&Math.abs(ne-vt)<=r.EPSILON*Math.max(1,Math.abs(ne),Math.abs(vt))&&Math.abs(ie-ht)<=r.EPSILON*Math.max(1,Math.abs(ie),Math.abs(ht))&&Math.abs(J-Rt)<=r.EPSILON*Math.max(1,Math.abs(J),Math.abs(Rt))&&Math.abs(le-Yt)<=r.EPSILON*Math.max(1,Math.abs(le),Math.abs(Yt))&&Math.abs(fe-Lt)<=r.EPSILON*Math.max(1,Math.abs(fe),Math.abs(Lt))&&Math.abs(ve-nr)<=r.EPSILON*Math.max(1,Math.abs(ve),Math.abs(nr))&&Math.abs(Ne-ar)<=r.EPSILON*Math.max(1,Math.abs(Ne),Math.abs(ar))&&Math.abs($e-gr)<=r.EPSILON*Math.max(1,Math.abs($e),Math.abs(gr))&&Math.abs(Ie-jt)<=r.EPSILON*Math.max(1,Math.abs(Ie),Math.abs(jt))&&Math.abs(Je-Mr)<=r.EPSILON*Math.max(1,Math.abs(Je),Math.abs(Mr))},Ae.sub=Ae.mul=Ae.ortho=Ae.perspective=void 0;var r=function(T,A){if(T&&T.__esModule)return T;if(T===null||l(T)!=="object"&&typeof T!="function")return{default:T};var I=s(void 0);if(I&&I.has(T))return I.get(T);var P={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in T)if(j!=="default"&&Object.prototype.hasOwnProperty.call(T,j)){var W=R?Object.getOwnPropertyDescriptor(T,j):null;W&&(W.get||W.set)?Object.defineProperty(P,j,W):P[j]=T[j]}return P.default=T,I&&I.set(T,P),P}(G());function s(T){if(typeof WeakMap!="function")return null;var A=new WeakMap,I=new WeakMap;return(s=function(P){return P?I:A})(T)}function u(T){return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T}function g(T,A,I){var P=A[0],R=A[1],j=A[2],W=A[3],K=A[4],ne=A[5],ie=A[6],J=A[7],le=A[8],fe=A[9],ve=A[10],Ne=A[11],$e=A[12],Ie=A[13],Je=A[14],Ve=A[15],et=I[0],it=I[1],at=I[2],lt=I[3];return T[0]=et*P+it*K+at*le+lt*$e,T[1]=et*R+it*ne+at*fe+lt*Ie,T[2]=et*j+it*ie+at*ve+lt*Je,T[3]=et*W+it*J+at*Ne+lt*Ve,T[4]=(et=I[4])*P+(it=I[5])*K+(at=I[6])*le+(lt=I[7])*$e,T[5]=et*R+it*ne+at*fe+lt*Ie,T[6]=et*j+it*ie+at*ve+lt*Je,T[7]=et*W+it*J+at*Ne+lt*Ve,T[8]=(et=I[8])*P+(it=I[9])*K+(at=I[10])*le+(lt=I[11])*$e,T[9]=et*R+it*ne+at*fe+lt*Ie,T[10]=et*j+it*ie+at*ve+lt*Je,T[11]=et*W+it*J+at*Ne+lt*Ve,T[12]=(et=I[12])*P+(it=I[13])*K+(at=I[14])*le+(lt=I[15])*$e,T[13]=et*R+it*ne+at*fe+lt*Ie,T[14]=et*j+it*ie+at*ve+lt*Je,T[15]=et*W+it*J+at*Ne+lt*Ve,T}function f(T,A,I){var P=A[0],R=A[1],j=A[2],W=A[3],K=P+P,ne=R+R,ie=j+j,J=P*K,le=P*ne,fe=P*ie,ve=R*ne,Ne=R*ie,$e=j*ie,Ie=W*K,Je=W*ne,Ve=W*ie;return T[0]=1-(ve+$e),T[1]=le+Ve,T[2]=fe-Je,T[3]=0,T[4]=le-Ve,T[5]=1-(J+$e),T[6]=Ne+Ie,T[7]=0,T[8]=fe+Je,T[9]=Ne-Ie,T[10]=1-(J+ve),T[11]=0,T[12]=I[0],T[13]=I[1],T[14]=I[2],T[15]=1,T}function x(T,A){var I=A[4],P=A[5],R=A[6],j=A[8],W=A[9],K=A[10];return T[0]=Math.hypot(A[0],A[1],A[2]),T[1]=Math.hypot(I,P,R),T[2]=Math.hypot(j,W,K),T}function C(T,A,I,P,R){var j,W=1/Math.tan(A/2);return T[0]=W/I,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=W,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=-1,T[12]=0,T[13]=0,T[15]=0,R!=null&&R!==1/0?(T[10]=(R+P)*(j=1/(P-R)),T[14]=2*R*P*j):(T[10]=-1,T[14]=-2*P),T}function M(T,A,I,P,R,j,W){var K=1/(A-I),ne=1/(P-R),ie=1/(j-W);return T[0]=-2*K,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=-2*ne,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=2*ie,T[11]=0,T[12]=(A+I)*K,T[13]=(R+P)*ne,T[14]=(W+j)*ie,T[15]=1,T}function $(T,A,I){return T[0]=A[0]-I[0],T[1]=A[1]-I[1],T[2]=A[2]-I[2],T[3]=A[3]-I[3],T[4]=A[4]-I[4],T[5]=A[5]-I[5],T[6]=A[6]-I[6],T[7]=A[7]-I[7],T[8]=A[8]-I[8],T[9]=A[9]-I[9],T[10]=A[10]-I[10],T[11]=A[11]-I[11],T[12]=A[12]-I[12],T[13]=A[13]-I[13],T[14]=A[14]-I[14],T[15]=A[15]-I[15],T}return Ae.perspective=C,Ae.ortho=M,Ae.mul=g,Ae.sub=$,Ae}var Te,se={},ue={};function De(){if(Te)return ue;function l(R){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},l(R)}Te=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.create=u,ue.clone=function(R){var j=new r.ARRAY_TYPE(3);return j[0]=R[0],j[1]=R[1],j[2]=R[2],j},ue.length=g,ue.fromValues=function(R,j,W){var K=new r.ARRAY_TYPE(3);return K[0]=R,K[1]=j,K[2]=W,K},ue.copy=function(R,j){return R[0]=j[0],R[1]=j[1],R[2]=j[2],R},ue.set=function(R,j,W,K){return R[0]=j,R[1]=W,R[2]=K,R},ue.add=function(R,j,W){return R[0]=j[0]+W[0],R[1]=j[1]+W[1],R[2]=j[2]+W[2],R},ue.subtract=f,ue.multiply=x,ue.divide=C,ue.ceil=function(R,j){return R[0]=Math.ceil(j[0]),R[1]=Math.ceil(j[1]),R[2]=Math.ceil(j[2]),R},ue.floor=function(R,j){return R[0]=Math.floor(j[0]),R[1]=Math.floor(j[1]),R[2]=Math.floor(j[2]),R},ue.min=function(R,j,W){return R[0]=Math.min(j[0],W[0]),R[1]=Math.min(j[1],W[1]),R[2]=Math.min(j[2],W[2]),R},ue.max=function(R,j,W){return R[0]=Math.max(j[0],W[0]),R[1]=Math.max(j[1],W[1]),R[2]=Math.max(j[2],W[2]),R},ue.round=function(R,j){return R[0]=Math.round(j[0]),R[1]=Math.round(j[1]),R[2]=Math.round(j[2]),R},ue.scale=function(R,j,W){return R[0]=j[0]*W,R[1]=j[1]*W,R[2]=j[2]*W,R},ue.scaleAndAdd=function(R,j,W,K){return R[0]=j[0]+W[0]*K,R[1]=j[1]+W[1]*K,R[2]=j[2]+W[2]*K,R},ue.distance=M,ue.squaredDistance=$,ue.squaredLength=T,ue.negate=function(R,j){return R[0]=-j[0],R[1]=-j[1],R[2]=-j[2],R},ue.inverse=function(R,j){return R[0]=1/j[0],R[1]=1/j[1],R[2]=1/j[2],R},ue.normalize=function(R,j){var W=j[0],K=j[1],ne=j[2],ie=W*W+K*K+ne*ne;return ie>0&&(ie=1/Math.sqrt(ie)),R[0]=j[0]*ie,R[1]=j[1]*ie,R[2]=j[2]*ie,R},ue.dot=A,ue.cross=function(R,j,W){var K=j[0],ne=j[1],ie=j[2],J=W[0],le=W[1],fe=W[2];return R[0]=ne*fe-ie*le,R[1]=ie*J-K*fe,R[2]=K*le-ne*J,R},ue.lerp=function(R,j,W,K){var ne=j[0],ie=j[1],J=j[2];return R[0]=ne+K*(W[0]-ne),R[1]=ie+K*(W[1]-ie),R[2]=J+K*(W[2]-J),R},ue.hermite=function(R,j,W,K,ne,ie){var J=ie*ie,le=J*(2*ie-3)+1,fe=J*(ie-2)+ie,ve=J*(ie-1),Ne=J*(3-2*ie);return R[0]=j[0]*le+W[0]*fe+K[0]*ve+ne[0]*Ne,R[1]=j[1]*le+W[1]*fe+K[1]*ve+ne[1]*Ne,R[2]=j[2]*le+W[2]*fe+K[2]*ve+ne[2]*Ne,R},ue.bezier=function(R,j,W,K,ne,ie){var J=1-ie,le=J*J,fe=ie*ie,ve=le*J,Ne=3*ie*le,$e=3*fe*J,Ie=fe*ie;return R[0]=j[0]*ve+W[0]*Ne+K[0]*$e+ne[0]*Ie,R[1]=j[1]*ve+W[1]*Ne+K[1]*$e+ne[1]*Ie,R[2]=j[2]*ve+W[2]*Ne+K[2]*$e+ne[2]*Ie,R},ue.random=function(R,j){j=j||1;var W=2*r.RANDOM()*Math.PI,K=2*r.RANDOM()-1,ne=Math.sqrt(1-K*K)*j;return R[0]=Math.cos(W)*ne,R[1]=Math.sin(W)*ne,R[2]=K*j,R},ue.transformMat4=function(R,j,W){var K=j[0],ne=j[1],ie=j[2],J=W[3]*K+W[7]*ne+W[11]*ie+W[15];return R[0]=(W[0]*K+W[4]*ne+W[8]*ie+W[12])/(J=J||1),R[1]=(W[1]*K+W[5]*ne+W[9]*ie+W[13])/J,R[2]=(W[2]*K+W[6]*ne+W[10]*ie+W[14])/J,R},ue.transformMat3=function(R,j,W){var K=j[0],ne=j[1],ie=j[2];return R[0]=K*W[0]+ne*W[3]+ie*W[6],R[1]=K*W[1]+ne*W[4]+ie*W[7],R[2]=K*W[2]+ne*W[5]+ie*W[8],R},ue.transformQuat=function(R,j,W){var K=W[0],ne=W[1],ie=W[2],J=j[0],le=j[1],fe=j[2],ve=ne*fe-ie*le,Ne=ie*J-K*fe,$e=K*le-ne*J,Ie=ne*$e-ie*Ne,Je=ie*ve-K*$e,Ve=K*Ne-ne*ve,et=2*W[3];return Ne*=et,$e*=et,Je*=2,Ve*=2,R[0]=J+(ve*=et)+(Ie*=2),R[1]=le+Ne+Je,R[2]=fe+$e+Ve,R},ue.rotateX=function(R,j,W,K){var ne=[],ie=[];return ne[0]=j[0]-W[0],ne[1]=j[1]-W[1],ne[2]=j[2]-W[2],ie[0]=ne[0],ie[1]=ne[1]*Math.cos(K)-ne[2]*Math.sin(K),ie[2]=ne[1]*Math.sin(K)+ne[2]*Math.cos(K),R[0]=ie[0]+W[0],R[1]=ie[1]+W[1],R[2]=ie[2]+W[2],R},ue.rotateY=function(R,j,W,K){var ne=[],ie=[];return ne[0]=j[0]-W[0],ne[1]=j[1]-W[1],ne[2]=j[2]-W[2],ie[0]=ne[2]*Math.sin(K)+ne[0]*Math.cos(K),ie[1]=ne[1],ie[2]=ne[2]*Math.cos(K)-ne[0]*Math.sin(K),R[0]=ie[0]+W[0],R[1]=ie[1]+W[1],R[2]=ie[2]+W[2],R},ue.rotateZ=function(R,j,W,K){var ne=[],ie=[];return ne[0]=j[0]-W[0],ne[1]=j[1]-W[1],ne[2]=j[2]-W[2],ie[0]=ne[0]*Math.cos(K)-ne[1]*Math.sin(K),ie[1]=ne[0]*Math.sin(K)+ne[1]*Math.cos(K),ie[2]=ne[2],R[0]=ie[0]+W[0],R[1]=ie[1]+W[1],R[2]=ie[2]+W[2],R},ue.angle=function(R,j){var W=R[0],K=R[1],ne=R[2],ie=j[0],J=j[1],le=j[2],fe=Math.sqrt(W*W+K*K+ne*ne)*Math.sqrt(ie*ie+J*J+le*le),ve=fe&&A(R,j)/fe;return Math.acos(Math.min(Math.max(ve,-1),1))},ue.zero=function(R){return R[0]=0,R[1]=0,R[2]=0,R},ue.str=function(R){return"vec3("+R[0]+", "+R[1]+", "+R[2]+")"},ue.exactEquals=function(R,j){return R[0]===j[0]&&R[1]===j[1]&&R[2]===j[2]},ue.equals=function(R,j){var W=R[0],K=R[1],ne=R[2],ie=j[0],J=j[1],le=j[2];return Math.abs(W-ie)<=r.EPSILON*Math.max(1,Math.abs(W),Math.abs(ie))&&Math.abs(K-J)<=r.EPSILON*Math.max(1,Math.abs(K),Math.abs(J))&&Math.abs(ne-le)<=r.EPSILON*Math.max(1,Math.abs(ne),Math.abs(le))},ue.forEach=ue.sqrLen=ue.len=ue.sqrDist=ue.dist=ue.div=ue.mul=ue.sub=void 0;var r=function(R,j){if(R&&R.__esModule)return R;if(R===null||l(R)!=="object"&&typeof R!="function")return{default:R};var W=s(void 0);if(W&&W.has(R))return W.get(R);var K={},ne=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ie in R)if(ie!=="default"&&Object.prototype.hasOwnProperty.call(R,ie)){var J=ne?Object.getOwnPropertyDescriptor(R,ie):null;J&&(J.get||J.set)?Object.defineProperty(K,ie,J):K[ie]=R[ie]}return K.default=R,W&&W.set(R,K),K}(G());function s(R){if(typeof WeakMap!="function")return null;var j=new WeakMap,W=new WeakMap;return(s=function(K){return K?W:j})(R)}function u(){var R=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0),R}function g(R){return Math.hypot(R[0],R[1],R[2])}function f(R,j,W){return R[0]=j[0]-W[0],R[1]=j[1]-W[1],R[2]=j[2]-W[2],R}function x(R,j,W){return R[0]=j[0]*W[0],R[1]=j[1]*W[1],R[2]=j[2]*W[2],R}function C(R,j,W){return R[0]=j[0]/W[0],R[1]=j[1]/W[1],R[2]=j[2]/W[2],R}function M(R,j){return Math.hypot(j[0]-R[0],j[1]-R[1],j[2]-R[2])}function $(R,j){var W=j[0]-R[0],K=j[1]-R[1],ne=j[2]-R[2];return W*W+K*K+ne*ne}function T(R){var j=R[0],W=R[1],K=R[2];return j*j+W*W+K*K}function A(R,j){return R[0]*j[0]+R[1]*j[1]+R[2]*j[2]}ue.sub=f,ue.mul=x,ue.div=C,ue.dist=M,ue.sqrDist=$,ue.len=g,ue.sqrLen=T;var I,P=(I=u(),function(R,j,W,K,ne,ie){var J,le;for(j||(j=3),W||(W=0),le=K?Math.min(K*j+W,R.length):R.length,J=W;J<le;J+=j)I[0]=R[J],I[1]=R[J+1],I[2]=R[J+2],ne(I,I,ie),R[J]=I[0],R[J+1]=I[1],R[J+2]=I[2];return R});return ue.forEach=P,ue}var ce,je,Le={};function Re(){if(ce)return Le;function l(P){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},l(P)}ce=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.create=u,Le.clone=function(P){var R=new r.ARRAY_TYPE(4);return R[0]=P[0],R[1]=P[1],R[2]=P[2],R[3]=P[3],R},Le.fromValues=function(P,R,j,W){var K=new r.ARRAY_TYPE(4);return K[0]=P,K[1]=R,K[2]=j,K[3]=W,K},Le.copy=function(P,R){return P[0]=R[0],P[1]=R[1],P[2]=R[2],P[3]=R[3],P},Le.set=function(P,R,j,W,K){return P[0]=R,P[1]=j,P[2]=W,P[3]=K,P},Le.add=function(P,R,j){return P[0]=R[0]+j[0],P[1]=R[1]+j[1],P[2]=R[2]+j[2],P[3]=R[3]+j[3],P},Le.subtract=g,Le.multiply=f,Le.divide=x,Le.ceil=function(P,R){return P[0]=Math.ceil(R[0]),P[1]=Math.ceil(R[1]),P[2]=Math.ceil(R[2]),P[3]=Math.ceil(R[3]),P},Le.floor=function(P,R){return P[0]=Math.floor(R[0]),P[1]=Math.floor(R[1]),P[2]=Math.floor(R[2]),P[3]=Math.floor(R[3]),P},Le.min=function(P,R,j){return P[0]=Math.min(R[0],j[0]),P[1]=Math.min(R[1],j[1]),P[2]=Math.min(R[2],j[2]),P[3]=Math.min(R[3],j[3]),P},Le.max=function(P,R,j){return P[0]=Math.max(R[0],j[0]),P[1]=Math.max(R[1],j[1]),P[2]=Math.max(R[2],j[2]),P[3]=Math.max(R[3],j[3]),P},Le.round=function(P,R){return P[0]=Math.round(R[0]),P[1]=Math.round(R[1]),P[2]=Math.round(R[2]),P[3]=Math.round(R[3]),P},Le.scale=function(P,R,j){return P[0]=R[0]*j,P[1]=R[1]*j,P[2]=R[2]*j,P[3]=R[3]*j,P},Le.scaleAndAdd=function(P,R,j,W){return P[0]=R[0]+j[0]*W,P[1]=R[1]+j[1]*W,P[2]=R[2]+j[2]*W,P[3]=R[3]+j[3]*W,P},Le.distance=C,Le.squaredDistance=M,Le.length=$,Le.squaredLength=T,Le.negate=function(P,R){return P[0]=-R[0],P[1]=-R[1],P[2]=-R[2],P[3]=-R[3],P},Le.inverse=function(P,R){return P[0]=1/R[0],P[1]=1/R[1],P[2]=1/R[2],P[3]=1/R[3],P},Le.normalize=function(P,R){var j=R[0],W=R[1],K=R[2],ne=R[3],ie=j*j+W*W+K*K+ne*ne;return ie>0&&(ie=1/Math.sqrt(ie)),P[0]=j*ie,P[1]=W*ie,P[2]=K*ie,P[3]=ne*ie,P},Le.dot=function(P,R){return P[0]*R[0]+P[1]*R[1]+P[2]*R[2]+P[3]*R[3]},Le.cross=function(P,R,j,W){var K=j[0]*W[1]-j[1]*W[0],ne=j[0]*W[2]-j[2]*W[0],ie=j[0]*W[3]-j[3]*W[0],J=j[1]*W[2]-j[2]*W[1],le=j[1]*W[3]-j[3]*W[1],fe=j[2]*W[3]-j[3]*W[2],ve=R[0],Ne=R[1],$e=R[2],Ie=R[3];return P[0]=Ne*fe-$e*le+Ie*J,P[1]=-ve*fe+$e*ie-Ie*ne,P[2]=ve*le-Ne*ie+Ie*K,P[3]=-ve*J+Ne*ne-$e*K,P},Le.lerp=function(P,R,j,W){var K=R[0],ne=R[1],ie=R[2],J=R[3];return P[0]=K+W*(j[0]-K),P[1]=ne+W*(j[1]-ne),P[2]=ie+W*(j[2]-ie),P[3]=J+W*(j[3]-J),P},Le.random=function(P,R){var j,W,K,ne,ie,J;R=R||1;do ie=(j=2*r.RANDOM()-1)*j+(W=2*r.RANDOM()-1)*W;while(ie>=1);do J=(K=2*r.RANDOM()-1)*K+(ne=2*r.RANDOM()-1)*ne;while(J>=1);var le=Math.sqrt((1-ie)/J);return P[0]=R*j,P[1]=R*W,P[2]=R*K*le,P[3]=R*ne*le,P},Le.transformMat4=function(P,R,j){var W=R[0],K=R[1],ne=R[2],ie=R[3];return P[0]=j[0]*W+j[4]*K+j[8]*ne+j[12]*ie,P[1]=j[1]*W+j[5]*K+j[9]*ne+j[13]*ie,P[2]=j[2]*W+j[6]*K+j[10]*ne+j[14]*ie,P[3]=j[3]*W+j[7]*K+j[11]*ne+j[15]*ie,P},Le.transformQuat=function(P,R,j){var W=R[0],K=R[1],ne=R[2],ie=j[0],J=j[1],le=j[2],fe=j[3],ve=fe*W+J*ne-le*K,Ne=fe*K+le*W-ie*ne,$e=fe*ne+ie*K-J*W,Ie=-ie*W-J*K-le*ne;return P[0]=ve*fe+Ie*-ie+Ne*-le-$e*-J,P[1]=Ne*fe+Ie*-J+$e*-ie-ve*-le,P[2]=$e*fe+Ie*-le+ve*-J-Ne*-ie,P[3]=R[3],P},Le.zero=function(P){return P[0]=0,P[1]=0,P[2]=0,P[3]=0,P},Le.str=function(P){return"vec4("+P[0]+", "+P[1]+", "+P[2]+", "+P[3]+")"},Le.exactEquals=function(P,R){return P[0]===R[0]&&P[1]===R[1]&&P[2]===R[2]&&P[3]===R[3]},Le.equals=function(P,R){var j=P[0],W=P[1],K=P[2],ne=P[3],ie=R[0],J=R[1],le=R[2],fe=R[3];return Math.abs(j-ie)<=r.EPSILON*Math.max(1,Math.abs(j),Math.abs(ie))&&Math.abs(W-J)<=r.EPSILON*Math.max(1,Math.abs(W),Math.abs(J))&&Math.abs(K-le)<=r.EPSILON*Math.max(1,Math.abs(K),Math.abs(le))&&Math.abs(ne-fe)<=r.EPSILON*Math.max(1,Math.abs(ne),Math.abs(fe))},Le.forEach=Le.sqrLen=Le.len=Le.sqrDist=Le.dist=Le.div=Le.mul=Le.sub=void 0;var r=function(P,R){if(P&&P.__esModule)return P;if(P===null||l(P)!=="object"&&typeof P!="function")return{default:P};var j=s(void 0);if(j&&j.has(P))return j.get(P);var W={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ne in P)if(ne!=="default"&&Object.prototype.hasOwnProperty.call(P,ne)){var ie=K?Object.getOwnPropertyDescriptor(P,ne):null;ie&&(ie.get||ie.set)?Object.defineProperty(W,ne,ie):W[ne]=P[ne]}return W.default=P,j&&j.set(P,W),W}(G());function s(P){if(typeof WeakMap!="function")return null;var R=new WeakMap,j=new WeakMap;return(s=function(W){return W?j:R})(P)}function u(){var P=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0,P[2]=0,P[3]=0),P}function g(P,R,j){return P[0]=R[0]-j[0],P[1]=R[1]-j[1],P[2]=R[2]-j[2],P[3]=R[3]-j[3],P}function f(P,R,j){return P[0]=R[0]*j[0],P[1]=R[1]*j[1],P[2]=R[2]*j[2],P[3]=R[3]*j[3],P}function x(P,R,j){return P[0]=R[0]/j[0],P[1]=R[1]/j[1],P[2]=R[2]/j[2],P[3]=R[3]/j[3],P}function C(P,R){return Math.hypot(R[0]-P[0],R[1]-P[1],R[2]-P[2],R[3]-P[3])}function M(P,R){var j=R[0]-P[0],W=R[1]-P[1],K=R[2]-P[2],ne=R[3]-P[3];return j*j+W*W+K*K+ne*ne}function $(P){return Math.hypot(P[0],P[1],P[2],P[3])}function T(P){var R=P[0],j=P[1],W=P[2],K=P[3];return R*R+j*j+W*W+K*K}Le.sub=g,Le.mul=f,Le.div=x,Le.dist=C,Le.sqrDist=M,Le.len=$,Le.sqrLen=T;var A,I=(A=u(),function(P,R,j,W,K,ne){var ie,J;for(R||(R=4),j||(j=0),J=W?Math.min(W*R+j,P.length):P.length,ie=j;ie<J;ie+=R)A[0]=P[ie],A[1]=P[ie+1],A[2]=P[ie+2],A[3]=P[ie+3],K(A,A,ne),P[ie]=A[0],P[ie+1]=A[1],P[ie+2]=A[2],P[ie+3]=A[3];return P});return Le.forEach=I,Le}function Ge(){if(je)return se;function l(Ve){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},l(Ve)}je=1,Object.defineProperty(se,"__esModule",{value:!0}),se.create=C,se.identity=function(Ve){return Ve[0]=0,Ve[1]=0,Ve[2]=0,Ve[3]=1,Ve},se.setAxisAngle=M,se.getAxisAngle=function(Ve,et){var it=2*Math.acos(et[3]),at=Math.sin(it/2);return at>r.EPSILON?(Ve[0]=et[0]/at,Ve[1]=et[1]/at,Ve[2]=et[2]/at):(Ve[0]=1,Ve[1]=0,Ve[2]=0),it},se.getAngle=function(Ve,et){var it=j(Ve,et);return Math.acos(2*it*it-1)},se.multiply=$,se.rotateX=function(Ve,et,it){it*=.5;var at=et[0],lt=et[1],gt=et[2],vt=et[3],ht=Math.sin(it),Rt=Math.cos(it);return Ve[0]=at*Rt+vt*ht,Ve[1]=lt*Rt+gt*ht,Ve[2]=gt*Rt-lt*ht,Ve[3]=vt*Rt-at*ht,Ve},se.rotateY=function(Ve,et,it){it*=.5;var at=et[0],lt=et[1],gt=et[2],vt=et[3],ht=Math.sin(it),Rt=Math.cos(it);return Ve[0]=at*Rt-gt*ht,Ve[1]=lt*Rt+vt*ht,Ve[2]=gt*Rt+at*ht,Ve[3]=vt*Rt-lt*ht,Ve},se.rotateZ=function(Ve,et,it){it*=.5;var at=et[0],lt=et[1],gt=et[2],vt=et[3],ht=Math.sin(it),Rt=Math.cos(it);return Ve[0]=at*Rt+lt*ht,Ve[1]=lt*Rt-at*ht,Ve[2]=gt*Rt+vt*ht,Ve[3]=vt*Rt-gt*ht,Ve},se.calculateW=function(Ve,et){var it=et[0],at=et[1],lt=et[2];return Ve[0]=it,Ve[1]=at,Ve[2]=lt,Ve[3]=Math.sqrt(Math.abs(1-it*it-at*at-lt*lt)),Ve},se.exp=T,se.ln=A,se.pow=function(Ve,et,it){return A(Ve,et),R(Ve,Ve,it),T(Ve,Ve),Ve},se.slerp=I,se.random=function(Ve){var et=r.RANDOM(),it=r.RANDOM(),at=r.RANDOM(),lt=Math.sqrt(1-et),gt=Math.sqrt(et);return Ve[0]=lt*Math.sin(2*Math.PI*it),Ve[1]=lt*Math.cos(2*Math.PI*it),Ve[2]=gt*Math.sin(2*Math.PI*at),Ve[3]=gt*Math.cos(2*Math.PI*at),Ve},se.invert=function(Ve,et){var it=et[0],at=et[1],lt=et[2],gt=et[3],vt=it*it+at*at+lt*lt+gt*gt,ht=vt?1/vt:0;return Ve[0]=-it*ht,Ve[1]=-at*ht,Ve[2]=-lt*ht,Ve[3]=gt*ht,Ve},se.conjugate=function(Ve,et){return Ve[0]=-et[0],Ve[1]=-et[1],Ve[2]=-et[2],Ve[3]=et[3],Ve},se.fromMat3=P,se.fromEuler=function(Ve,et,it,at){var lt=.5*Math.PI/180;et*=lt,it*=lt,at*=lt;var gt=Math.sin(et),vt=Math.cos(et),ht=Math.sin(it),Rt=Math.cos(it),Yt=Math.sin(at),Lt=Math.cos(at);return Ve[0]=gt*Rt*Lt-vt*ht*Yt,Ve[1]=vt*ht*Lt+gt*Rt*Yt,Ve[2]=vt*Rt*Yt-gt*ht*Lt,Ve[3]=vt*Rt*Lt+gt*ht*Yt,Ve},se.str=function(Ve){return"quat("+Ve[0]+", "+Ve[1]+", "+Ve[2]+", "+Ve[3]+")"},se.setAxes=se.sqlerp=se.rotationTo=se.equals=se.exactEquals=se.normalize=se.sqrLen=se.squaredLength=se.len=se.length=se.lerp=se.dot=se.scale=se.mul=se.add=se.set=se.copy=se.fromValues=se.clone=void 0;var r=x(G()),s=x(we()),u=x(De()),g=x(Re());function f(Ve){if(typeof WeakMap!="function")return null;var et=new WeakMap,it=new WeakMap;return(f=function(at){return at?it:et})(Ve)}function x(Ve,et){if(Ve&&Ve.__esModule)return Ve;if(Ve===null||l(Ve)!=="object"&&typeof Ve!="function")return{default:Ve};var it=f(et);if(it&&it.has(Ve))return it.get(Ve);var at={},lt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var gt in Ve)if(gt!=="default"&&Object.prototype.hasOwnProperty.call(Ve,gt)){var vt=lt?Object.getOwnPropertyDescriptor(Ve,gt):null;vt&&(vt.get||vt.set)?Object.defineProperty(at,gt,vt):at[gt]=Ve[gt]}return at.default=Ve,it&&it.set(Ve,at),at}function C(){var Ve=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(Ve[0]=0,Ve[1]=0,Ve[2]=0),Ve[3]=1,Ve}function M(Ve,et,it){it*=.5;var at=Math.sin(it);return Ve[0]=at*et[0],Ve[1]=at*et[1],Ve[2]=at*et[2],Ve[3]=Math.cos(it),Ve}function $(Ve,et,it){var at=et[0],lt=et[1],gt=et[2],vt=et[3],ht=it[0],Rt=it[1],Yt=it[2],Lt=it[3];return Ve[0]=at*Lt+vt*ht+lt*Yt-gt*Rt,Ve[1]=lt*Lt+vt*Rt+gt*ht-at*Yt,Ve[2]=gt*Lt+vt*Yt+at*Rt-lt*ht,Ve[3]=vt*Lt-at*ht-lt*Rt-gt*Yt,Ve}function T(Ve,et){var it=et[0],at=et[1],lt=et[2],gt=et[3],vt=Math.sqrt(it*it+at*at+lt*lt),ht=Math.exp(gt),Rt=vt>0?ht*Math.sin(vt)/vt:0;return Ve[0]=it*Rt,Ve[1]=at*Rt,Ve[2]=lt*Rt,Ve[3]=ht*Math.cos(vt),Ve}function A(Ve,et){var it=et[0],at=et[1],lt=et[2],gt=et[3],vt=Math.sqrt(it*it+at*at+lt*lt),ht=vt>0?Math.atan2(vt,gt)/vt:0;return Ve[0]=it*ht,Ve[1]=at*ht,Ve[2]=lt*ht,Ve[3]=.5*Math.log(it*it+at*at+lt*lt+gt*gt),Ve}function I(Ve,et,it,at){var lt,gt,vt,ht,Rt,Yt=et[0],Lt=et[1],nr=et[2],ar=et[3],gr=it[0],jt=it[1],Mr=it[2],sr=it[3];return(gt=Yt*gr+Lt*jt+nr*Mr+ar*sr)<0&&(gt=-gt,gr=-gr,jt=-jt,Mr=-Mr,sr=-sr),1-gt>r.EPSILON?(lt=Math.acos(gt),vt=Math.sin(lt),ht=Math.sin((1-at)*lt)/vt,Rt=Math.sin(at*lt)/vt):(ht=1-at,Rt=at),Ve[0]=ht*Yt+Rt*gr,Ve[1]=ht*Lt+Rt*jt,Ve[2]=ht*nr+Rt*Mr,Ve[3]=ht*ar+Rt*sr,Ve}function P(Ve,et){var it,at=et[0]+et[4]+et[8];if(at>0)it=Math.sqrt(at+1),Ve[3]=.5*it,Ve[0]=(et[5]-et[7])*(it=.5/it),Ve[1]=(et[6]-et[2])*it,Ve[2]=(et[1]-et[3])*it;else{var lt=0;et[4]>et[0]&&(lt=1),et[8]>et[3*lt+lt]&&(lt=2);var gt=(lt+1)%3,vt=(lt+2)%3;it=Math.sqrt(et[3*lt+lt]-et[3*gt+gt]-et[3*vt+vt]+1),Ve[lt]=.5*it,Ve[3]=(et[3*gt+vt]-et[3*vt+gt])*(it=.5/it),Ve[gt]=(et[3*gt+lt]+et[3*lt+gt])*it,Ve[vt]=(et[3*vt+lt]+et[3*lt+vt])*it}return Ve}se.clone=g.clone,se.fromValues=g.fromValues,se.copy=g.copy,se.set=g.set,se.add=g.add,se.mul=$;var R=g.scale;se.scale=R;var j=g.dot;se.dot=j,se.lerp=g.lerp;var W=g.length;se.length=W,se.len=W;var K=g.squaredLength;se.squaredLength=K,se.sqrLen=K;var ne=g.normalize;se.normalize=ne,se.exactEquals=g.exactEquals,se.equals=g.equals;var ie,J,le,fe=(ie=u.create(),J=u.fromValues(1,0,0),le=u.fromValues(0,1,0),function(Ve,et,it){var at=u.dot(et,it);return at<-.999999?(u.cross(ie,J,et),u.len(ie)<1e-6&&u.cross(ie,le,et),u.normalize(ie,ie),M(Ve,ie,Math.PI),Ve):at>.999999?(Ve[0]=0,Ve[1]=0,Ve[2]=0,Ve[3]=1,Ve):(u.cross(ie,et,it),Ve[0]=ie[0],Ve[1]=ie[1],Ve[2]=ie[2],Ve[3]=1+at,ne(Ve,Ve))});se.rotationTo=fe;var ve,Ne,$e=(ve=C(),Ne=C(),function(Ve,et,it,at,lt,gt){return I(ve,et,lt,gt),I(Ne,it,at,gt),I(Ve,ve,Ne,2*gt*(1-gt)),Ve});se.sqlerp=$e;var Ie,Je=(Ie=s.create(),function(Ve,et,it,at){return Ie[0]=it[0],Ie[3]=it[1],Ie[6]=it[2],Ie[1]=at[0],Ie[4]=at[1],Ie[7]=at[2],Ie[2]=-et[0],Ie[5]=-et[1],Ie[8]=-et[2],ne(Ve,P(Ve,Ie))});return se.setAxes=Je,se}var ze,ot={};function Ee(){if(ze)return ot;function l(I){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},l(I)}ze=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.create=function(){var I=new r.ARRAY_TYPE(8);return r.ARRAY_TYPE!=Float32Array&&(I[0]=0,I[1]=0,I[2]=0,I[4]=0,I[5]=0,I[6]=0,I[7]=0),I[3]=1,I},ot.clone=function(I){var P=new r.ARRAY_TYPE(8);return P[0]=I[0],P[1]=I[1],P[2]=I[2],P[3]=I[3],P[4]=I[4],P[5]=I[5],P[6]=I[6],P[7]=I[7],P},ot.fromValues=function(I,P,R,j,W,K,ne,ie){var J=new r.ARRAY_TYPE(8);return J[0]=I,J[1]=P,J[2]=R,J[3]=j,J[4]=W,J[5]=K,J[6]=ne,J[7]=ie,J},ot.fromRotationTranslationValues=function(I,P,R,j,W,K,ne){var ie=new r.ARRAY_TYPE(8);ie[0]=I,ie[1]=P,ie[2]=R,ie[3]=j;var J=.5*W,le=.5*K,fe=.5*ne;return ie[4]=J*j+le*R-fe*P,ie[5]=le*j+fe*I-J*R,ie[6]=fe*j+J*P-le*I,ie[7]=-J*I-le*P-fe*R,ie},ot.fromRotationTranslation=x,ot.fromTranslation=function(I,P){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=.5*P[0],I[5]=.5*P[1],I[6]=.5*P[2],I[7]=0,I},ot.fromRotation=function(I,P){return I[0]=P[0],I[1]=P[1],I[2]=P[2],I[3]=P[3],I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},ot.fromMat4=function(I,P){var R=s.create();u.getRotation(R,P);var j=new r.ARRAY_TYPE(3);return u.getTranslation(j,P),x(I,R,j),I},ot.copy=C,ot.identity=function(I){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},ot.set=function(I,P,R,j,W,K,ne,ie,J){return I[0]=P,I[1]=R,I[2]=j,I[3]=W,I[4]=K,I[5]=ne,I[6]=ie,I[7]=J,I},ot.getDual=function(I,P){return I[0]=P[4],I[1]=P[5],I[2]=P[6],I[3]=P[7],I},ot.setDual=function(I,P){return I[4]=P[0],I[5]=P[1],I[6]=P[2],I[7]=P[3],I},ot.getTranslation=function(I,P){var R=P[4],j=P[5],W=P[6],K=P[7],ne=-P[0],ie=-P[1],J=-P[2],le=P[3];return I[0]=2*(R*le+K*ne+j*J-W*ie),I[1]=2*(j*le+K*ie+W*ne-R*J),I[2]=2*(W*le+K*J+R*ie-j*ne),I},ot.translate=function(I,P,R){var j=P[0],W=P[1],K=P[2],ne=P[3],ie=.5*R[0],J=.5*R[1],le=.5*R[2],fe=P[4],ve=P[5],Ne=P[6],$e=P[7];return I[0]=j,I[1]=W,I[2]=K,I[3]=ne,I[4]=ne*ie+W*le-K*J+fe,I[5]=ne*J+K*ie-j*le+ve,I[6]=ne*le+j*J-W*ie+Ne,I[7]=-j*ie-W*J-K*le+$e,I},ot.rotateX=function(I,P,R){var j=-P[0],W=-P[1],K=-P[2],ne=P[3],ie=P[4],J=P[5],le=P[6],fe=P[7],ve=ie*ne+fe*j+J*K-le*W,Ne=J*ne+fe*W+le*j-ie*K,$e=le*ne+fe*K+ie*W-J*j,Ie=fe*ne-ie*j-J*W-le*K;return s.rotateX(I,P,R),I[4]=ve*(ne=I[3])+Ie*(j=I[0])+Ne*(K=I[2])-$e*(W=I[1]),I[5]=Ne*ne+Ie*W+$e*j-ve*K,I[6]=$e*ne+Ie*K+ve*W-Ne*j,I[7]=Ie*ne-ve*j-Ne*W-$e*K,I},ot.rotateY=function(I,P,R){var j=-P[0],W=-P[1],K=-P[2],ne=P[3],ie=P[4],J=P[5],le=P[6],fe=P[7],ve=ie*ne+fe*j+J*K-le*W,Ne=J*ne+fe*W+le*j-ie*K,$e=le*ne+fe*K+ie*W-J*j,Ie=fe*ne-ie*j-J*W-le*K;return s.rotateY(I,P,R),I[4]=ve*(ne=I[3])+Ie*(j=I[0])+Ne*(K=I[2])-$e*(W=I[1]),I[5]=Ne*ne+Ie*W+$e*j-ve*K,I[6]=$e*ne+Ie*K+ve*W-Ne*j,I[7]=Ie*ne-ve*j-Ne*W-$e*K,I},ot.rotateZ=function(I,P,R){var j=-P[0],W=-P[1],K=-P[2],ne=P[3],ie=P[4],J=P[5],le=P[6],fe=P[7],ve=ie*ne+fe*j+J*K-le*W,Ne=J*ne+fe*W+le*j-ie*K,$e=le*ne+fe*K+ie*W-J*j,Ie=fe*ne-ie*j-J*W-le*K;return s.rotateZ(I,P,R),I[4]=ve*(ne=I[3])+Ie*(j=I[0])+Ne*(K=I[2])-$e*(W=I[1]),I[5]=Ne*ne+Ie*W+$e*j-ve*K,I[6]=$e*ne+Ie*K+ve*W-Ne*j,I[7]=Ie*ne-ve*j-Ne*W-$e*K,I},ot.rotateByQuatAppend=function(I,P,R){var j=R[0],W=R[1],K=R[2],ne=R[3],ie=P[0],J=P[1],le=P[2],fe=P[3];return I[0]=ie*ne+fe*j+J*K-le*W,I[1]=J*ne+fe*W+le*j-ie*K,I[2]=le*ne+fe*K+ie*W-J*j,I[3]=fe*ne-ie*j-J*W-le*K,I[4]=(ie=P[4])*ne+(fe=P[7])*j+(J=P[5])*K-(le=P[6])*W,I[5]=J*ne+fe*W+le*j-ie*K,I[6]=le*ne+fe*K+ie*W-J*j,I[7]=fe*ne-ie*j-J*W-le*K,I},ot.rotateByQuatPrepend=function(I,P,R){var j=P[0],W=P[1],K=P[2],ne=P[3],ie=R[0],J=R[1],le=R[2],fe=R[3];return I[0]=j*fe+ne*ie+W*le-K*J,I[1]=W*fe+ne*J+K*ie-j*le,I[2]=K*fe+ne*le+j*J-W*ie,I[3]=ne*fe-j*ie-W*J-K*le,I[4]=j*(fe=R[7])+ne*(ie=R[4])+W*(le=R[6])-K*(J=R[5]),I[5]=W*fe+ne*J+K*ie-j*le,I[6]=K*fe+ne*le+j*J-W*ie,I[7]=ne*fe-j*ie-W*J-K*le,I},ot.rotateAroundAxis=function(I,P,R,j){if(Math.abs(j)<r.EPSILON)return C(I,P);var W=Math.hypot(R[0],R[1],R[2]);j*=.5;var K=Math.sin(j),ne=K*R[0]/W,ie=K*R[1]/W,J=K*R[2]/W,le=Math.cos(j),fe=P[0],ve=P[1],Ne=P[2],$e=P[3];I[0]=fe*le+$e*ne+ve*J-Ne*ie,I[1]=ve*le+$e*ie+Ne*ne-fe*J,I[2]=Ne*le+$e*J+fe*ie-ve*ne,I[3]=$e*le-fe*ne-ve*ie-Ne*J;var Ie=P[4],Je=P[5],Ve=P[6],et=P[7];return I[4]=Ie*le+et*ne+Je*J-Ve*ie,I[5]=Je*le+et*ie+Ve*ne-Ie*J,I[6]=Ve*le+et*J+Ie*ie-Je*ne,I[7]=et*le-Ie*ne-Je*ie-Ve*J,I},ot.add=function(I,P,R){return I[0]=P[0]+R[0],I[1]=P[1]+R[1],I[2]=P[2]+R[2],I[3]=P[3]+R[3],I[4]=P[4]+R[4],I[5]=P[5]+R[5],I[6]=P[6]+R[6],I[7]=P[7]+R[7],I},ot.multiply=M,ot.scale=function(I,P,R){return I[0]=P[0]*R,I[1]=P[1]*R,I[2]=P[2]*R,I[3]=P[3]*R,I[4]=P[4]*R,I[5]=P[5]*R,I[6]=P[6]*R,I[7]=P[7]*R,I},ot.lerp=function(I,P,R,j){var W=1-j;return $(P,R)<0&&(j=-j),I[0]=P[0]*W+R[0]*j,I[1]=P[1]*W+R[1]*j,I[2]=P[2]*W+R[2]*j,I[3]=P[3]*W+R[3]*j,I[4]=P[4]*W+R[4]*j,I[5]=P[5]*W+R[5]*j,I[6]=P[6]*W+R[6]*j,I[7]=P[7]*W+R[7]*j,I},ot.invert=function(I,P){var R=A(P);return I[0]=-P[0]/R,I[1]=-P[1]/R,I[2]=-P[2]/R,I[3]=P[3]/R,I[4]=-P[4]/R,I[5]=-P[5]/R,I[6]=-P[6]/R,I[7]=P[7]/R,I},ot.conjugate=function(I,P){return I[0]=-P[0],I[1]=-P[1],I[2]=-P[2],I[3]=P[3],I[4]=-P[4],I[5]=-P[5],I[6]=-P[6],I[7]=P[7],I},ot.normalize=function(I,P){var R=A(P);if(R>0){R=Math.sqrt(R);var j=P[0]/R,W=P[1]/R,K=P[2]/R,ne=P[3]/R,ie=P[4],J=P[5],le=P[6],fe=P[7],ve=j*ie+W*J+K*le+ne*fe;I[0]=j,I[1]=W,I[2]=K,I[3]=ne,I[4]=(ie-j*ve)/R,I[5]=(J-W*ve)/R,I[6]=(le-K*ve)/R,I[7]=(fe-ne*ve)/R}return I},ot.str=function(I){return"quat2("+I[0]+", "+I[1]+", "+I[2]+", "+I[3]+", "+I[4]+", "+I[5]+", "+I[6]+", "+I[7]+")"},ot.exactEquals=function(I,P){return I[0]===P[0]&&I[1]===P[1]&&I[2]===P[2]&&I[3]===P[3]&&I[4]===P[4]&&I[5]===P[5]&&I[6]===P[6]&&I[7]===P[7]},ot.equals=function(I,P){var R=I[0],j=I[1],W=I[2],K=I[3],ne=I[4],ie=I[5],J=I[6],le=I[7],fe=P[0],ve=P[1],Ne=P[2],$e=P[3],Ie=P[4],Je=P[5],Ve=P[6],et=P[7];return Math.abs(R-fe)<=r.EPSILON*Math.max(1,Math.abs(R),Math.abs(fe))&&Math.abs(j-ve)<=r.EPSILON*Math.max(1,Math.abs(j),Math.abs(ve))&&Math.abs(W-Ne)<=r.EPSILON*Math.max(1,Math.abs(W),Math.abs(Ne))&&Math.abs(K-$e)<=r.EPSILON*Math.max(1,Math.abs(K),Math.abs($e))&&Math.abs(ne-Ie)<=r.EPSILON*Math.max(1,Math.abs(ne),Math.abs(Ie))&&Math.abs(ie-Je)<=r.EPSILON*Math.max(1,Math.abs(ie),Math.abs(Je))&&Math.abs(J-Ve)<=r.EPSILON*Math.max(1,Math.abs(J),Math.abs(Ve))&&Math.abs(le-et)<=r.EPSILON*Math.max(1,Math.abs(le),Math.abs(et))},ot.sqrLen=ot.squaredLength=ot.len=ot.length=ot.dot=ot.mul=ot.setReal=ot.getReal=void 0;var r=f(G()),s=f(Ge()),u=f(re());function g(I){if(typeof WeakMap!="function")return null;var P=new WeakMap,R=new WeakMap;return(g=function(j){return j?R:P})(I)}function f(I,P){if(I&&I.__esModule)return I;if(I===null||l(I)!=="object"&&typeof I!="function")return{default:I};var R=g(P);if(R&&R.has(I))return R.get(I);var j={},W=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in I)if(K!=="default"&&Object.prototype.hasOwnProperty.call(I,K)){var ne=W?Object.getOwnPropertyDescriptor(I,K):null;ne&&(ne.get||ne.set)?Object.defineProperty(j,K,ne):j[K]=I[K]}return j.default=I,R&&R.set(I,j),j}function x(I,P,R){var j=.5*R[0],W=.5*R[1],K=.5*R[2],ne=P[0],ie=P[1],J=P[2],le=P[3];return I[0]=ne,I[1]=ie,I[2]=J,I[3]=le,I[4]=j*le+W*J-K*ie,I[5]=W*le+K*ne-j*J,I[6]=K*le+j*ie-W*ne,I[7]=-j*ne-W*ie-K*J,I}function C(I,P){return I[0]=P[0],I[1]=P[1],I[2]=P[2],I[3]=P[3],I[4]=P[4],I[5]=P[5],I[6]=P[6],I[7]=P[7],I}function M(I,P,R){var j=P[0],W=P[1],K=P[2],ne=P[3],ie=R[4],J=R[5],le=R[6],fe=R[7],ve=P[4],Ne=P[5],$e=P[6],Ie=P[7],Je=R[0],Ve=R[1],et=R[2],it=R[3];return I[0]=j*it+ne*Je+W*et-K*Ve,I[1]=W*it+ne*Ve+K*Je-j*et,I[2]=K*it+ne*et+j*Ve-W*Je,I[3]=ne*it-j*Je-W*Ve-K*et,I[4]=j*fe+ne*ie+W*le-K*J+ve*it+Ie*Je+Ne*et-$e*Ve,I[5]=W*fe+ne*J+K*ie-j*le+Ne*it+Ie*Ve+$e*Je-ve*et,I[6]=K*fe+ne*le+j*J-W*ie+$e*it+Ie*et+ve*Ve-Ne*Je,I[7]=ne*fe-j*ie-W*J-K*le+Ie*it-ve*Je-Ne*Ve-$e*et,I}ot.getReal=s.copy,ot.setReal=s.copy,ot.mul=M;var $=s.dot;ot.dot=$;var T=s.length;ot.length=T,ot.len=T;var A=s.squaredLength;return ot.squaredLength=A,ot.sqrLen=A,ot}var Ke,nt,Xe={};function ut(){if(Ke)return Xe;function l(P){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},l(P)}Ke=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.create=u,Xe.clone=function(P){var R=new r.ARRAY_TYPE(2);return R[0]=P[0],R[1]=P[1],R},Xe.fromValues=function(P,R){var j=new r.ARRAY_TYPE(2);return j[0]=P,j[1]=R,j},Xe.copy=function(P,R){return P[0]=R[0],P[1]=R[1],P},Xe.set=function(P,R,j){return P[0]=R,P[1]=j,P},Xe.add=function(P,R,j){return P[0]=R[0]+j[0],P[1]=R[1]+j[1],P},Xe.subtract=g,Xe.multiply=f,Xe.divide=x,Xe.ceil=function(P,R){return P[0]=Math.ceil(R[0]),P[1]=Math.ceil(R[1]),P},Xe.floor=function(P,R){return P[0]=Math.floor(R[0]),P[1]=Math.floor(R[1]),P},Xe.min=function(P,R,j){return P[0]=Math.min(R[0],j[0]),P[1]=Math.min(R[1],j[1]),P},Xe.max=function(P,R,j){return P[0]=Math.max(R[0],j[0]),P[1]=Math.max(R[1],j[1]),P},Xe.round=function(P,R){return P[0]=Math.round(R[0]),P[1]=Math.round(R[1]),P},Xe.scale=function(P,R,j){return P[0]=R[0]*j,P[1]=R[1]*j,P},Xe.scaleAndAdd=function(P,R,j,W){return P[0]=R[0]+j[0]*W,P[1]=R[1]+j[1]*W,P},Xe.distance=C,Xe.squaredDistance=M,Xe.length=$,Xe.squaredLength=T,Xe.negate=function(P,R){return P[0]=-R[0],P[1]=-R[1],P},Xe.inverse=function(P,R){return P[0]=1/R[0],P[1]=1/R[1],P},Xe.normalize=function(P,R){var j=R[0],W=R[1],K=j*j+W*W;return K>0&&(K=1/Math.sqrt(K)),P[0]=R[0]*K,P[1]=R[1]*K,P},Xe.dot=function(P,R){return P[0]*R[0]+P[1]*R[1]},Xe.cross=function(P,R,j){var W=R[0]*j[1]-R[1]*j[0];return P[0]=P[1]=0,P[2]=W,P},Xe.lerp=function(P,R,j,W){var K=R[0],ne=R[1];return P[0]=K+W*(j[0]-K),P[1]=ne+W*(j[1]-ne),P},Xe.random=function(P,R){R=R||1;var j=2*r.RANDOM()*Math.PI;return P[0]=Math.cos(j)*R,P[1]=Math.sin(j)*R,P},Xe.transformMat2=function(P,R,j){var W=R[0],K=R[1];return P[0]=j[0]*W+j[2]*K,P[1]=j[1]*W+j[3]*K,P},Xe.transformMat2d=function(P,R,j){var W=R[0],K=R[1];return P[0]=j[0]*W+j[2]*K+j[4],P[1]=j[1]*W+j[3]*K+j[5],P},Xe.transformMat3=function(P,R,j){var W=R[0],K=R[1];return P[0]=j[0]*W+j[3]*K+j[6],P[1]=j[1]*W+j[4]*K+j[7],P},Xe.transformMat4=function(P,R,j){var W=R[0],K=R[1];return P[0]=j[0]*W+j[4]*K+j[12],P[1]=j[1]*W+j[5]*K+j[13],P},Xe.rotate=function(P,R,j,W){var K=R[0]-j[0],ne=R[1]-j[1],ie=Math.sin(W),J=Math.cos(W);return P[0]=K*J-ne*ie+j[0],P[1]=K*ie+ne*J+j[1],P},Xe.angle=function(P,R){var j=P[0],W=P[1],K=R[0],ne=R[1],ie=Math.sqrt(j*j+W*W)*Math.sqrt(K*K+ne*ne);return Math.acos(Math.min(Math.max(ie&&(j*K+W*ne)/ie,-1),1))},Xe.zero=function(P){return P[0]=0,P[1]=0,P},Xe.str=function(P){return"vec2("+P[0]+", "+P[1]+")"},Xe.exactEquals=function(P,R){return P[0]===R[0]&&P[1]===R[1]},Xe.equals=function(P,R){var j=P[0],W=P[1],K=R[0],ne=R[1];return Math.abs(j-K)<=r.EPSILON*Math.max(1,Math.abs(j),Math.abs(K))&&Math.abs(W-ne)<=r.EPSILON*Math.max(1,Math.abs(W),Math.abs(ne))},Xe.forEach=Xe.sqrLen=Xe.sqrDist=Xe.dist=Xe.div=Xe.mul=Xe.sub=Xe.len=void 0;var r=function(P,R){if(P&&P.__esModule)return P;if(P===null||l(P)!=="object"&&typeof P!="function")return{default:P};var j=s(void 0);if(j&&j.has(P))return j.get(P);var W={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ne in P)if(ne!=="default"&&Object.prototype.hasOwnProperty.call(P,ne)){var ie=K?Object.getOwnPropertyDescriptor(P,ne):null;ie&&(ie.get||ie.set)?Object.defineProperty(W,ne,ie):W[ne]=P[ne]}return W.default=P,j&&j.set(P,W),W}(G());function s(P){if(typeof WeakMap!="function")return null;var R=new WeakMap,j=new WeakMap;return(s=function(W){return W?j:R})(P)}function u(){var P=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0),P}function g(P,R,j){return P[0]=R[0]-j[0],P[1]=R[1]-j[1],P}function f(P,R,j){return P[0]=R[0]*j[0],P[1]=R[1]*j[1],P}function x(P,R,j){return P[0]=R[0]/j[0],P[1]=R[1]/j[1],P}function C(P,R){return Math.hypot(R[0]-P[0],R[1]-P[1])}function M(P,R){var j=R[0]-P[0],W=R[1]-P[1];return j*j+W*W}function $(P){return Math.hypot(P[0],P[1])}function T(P){var R=P[0],j=P[1];return R*R+j*j}Xe.len=$,Xe.sub=g,Xe.mul=f,Xe.div=x,Xe.dist=C,Xe.sqrDist=M,Xe.sqrLen=T;var A,I=(A=u(),function(P,R,j,W,K,ne){var ie,J;for(R||(R=2),j||(j=0),J=W?Math.min(W*R+j,P.length):P.length,ie=j;ie<J;ie+=R)A[0]=P[ie],A[1]=P[ie+1],K(A,A,ne),P[ie]=A[0],P[ie+1]=A[1];return P});return Xe.forEach=I,Xe}function Pt(){if(nt)return B;function l(P){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},l(P)}nt=1,Object.defineProperty(B,"__esModule",{value:!0}),B.vec4=B.vec3=B.vec2=B.quat2=B.quat=B.mat4=B.mat3=B.mat2d=B.mat2=B.glMatrix=void 0;var r=I(G());B.glMatrix=r;var s=I(Y());B.mat2=s;var u=I(ge());B.mat2d=u;var g=I(we());B.mat3=g;var f=I(re());B.mat4=f;var x=I(Ge());B.quat=x;var C=I(Ee());B.quat2=C;var M=I(ut());B.vec2=M;var $=I(De());B.vec3=$;var T=I(Re());function A(P){if(typeof WeakMap!="function")return null;var R=new WeakMap,j=new WeakMap;return(A=function(W){return W?j:R})(P)}function I(P,R){if(P&&P.__esModule)return P;if(P===null||l(P)!=="object"&&typeof P!="function")return{default:P};var j=A(R);if(j&&j.has(P))return j.get(P);var W={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ne in P)if(ne!=="default"&&Object.prototype.hasOwnProperty.call(P,ne)){var ie=K?Object.getOwnPropertyDescriptor(P,ne):null;ie&&(ie.get||ie.set)?Object.defineProperty(W,ne,ie):W[ne]=P[ne]}return W.default=P,j&&j.set(P,W),W}return B.vec4=T,B}var Ct,Zt,Dt,er,Se=Pt(),ur=function(){if(Zt)return Ct;function l(r,s,u,g){this.cx=3*r,this.bx=3*(u-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(g-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=s,this.p2x=u,this.p2y=g}return Zt=1,Ct=l,l.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,s){if(s===void 0&&(s=1e-6),r<0)return 0;if(r>1)return 1;for(var u=r,g=0;g<8;g++){var f=this.sampleCurveX(u)-r;if(Math.abs(f)<s)return u;var x=this.sampleCurveDerivativeX(u);if(Math.abs(x)<1e-6)break;u-=f/x}var C=0,M=1;for(u=r,g=0;g<20&&(f=this.sampleCurveX(u),!(Math.abs(f-r)<s));g++)r>f?C=u:M=u,u=.5*(M-C)+C;return u},solve:function(r,s){return this.sampleCurveY(this.solveCurveX(r,s))}},Ct}(),Sr=k(ur);function yt(){if(er)return Dt;function l(r,s){this.x=r,this.y=s}return er=1,Dt=l,l.prototype={clone:function(){return new l(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,s){return this.clone()._rotateAround(r,s)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var s=r.x-this.x,u=r.y-this.y;return s*s+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,s){return Math.atan2(this.x*s-this.y*r,this.x*r+this.y*s)},_matMult:function(r){var s=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=s,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var s=Math.cos(r),u=Math.sin(r),g=u*this.x+s*this.y;return this.x=s*this.x-u*this.y,this.y=g,this},_rotateAround:function(r,s){var u=Math.cos(r),g=Math.sin(r),f=s.y+g*(this.x-s.x)+u*(this.y-s.y);return this.x=s.x+u*(this.x-s.x)-g*(this.y-s.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},l.convert=function(r){return r instanceof l?r:Array.isArray(r)?new l(r[0],r[1]):r},Dt}var dt=k(yt());function $t(l,r){if(Array.isArray(l)){if(!Array.isArray(r)||l.length!==r.length)return!1;for(let s=0;s<l.length;s++)if(!$t(l[s],r[s]))return!1;return!0}if(typeof l=="object"&&l!==null&&r!==null){if(typeof r!="object"||Object.keys(l).length!==Object.keys(r).length)return!1;for(const s in l)if(!$t(l[s],r[s]))return!1;return!0}return l===r}const or=Math.PI/180,Er=180/Math.PI;function mr(l){return l*or}function Pr(l){return l*Er}const Fr=[[0,0],[1,0],[1,1],[0,1]];function $a(l){if(l<=0)return 0;if(l>=1)return 1;const r=l*l,s=r*l;return 4*(l<.5?s:3*(l-r)+s-.75)}function Xr(l,r,s,u){const g=new Sr(l,r,s,u);return function(f){return g.solve(f)}}const ja=Xr(.25,.1,.25,1);function fr(l,r,s){return Math.min(s,Math.max(r,l))}function Sa(l,r,s){return(s=fr((s-l)/(r-l),0,1))*s*(3-2*s)}function kr(l,r,s){const u=s-r,g=((l-r)%u+u)%u+r;return g===r?s:g}function Dr(l,r,s){if(!l.length)return s(null,[]);let u=l.length;const g=new Array(l.length);let f=null;l.forEach((x,C)=>{r(x,(M,$)=>{M&&(f=M),g[C]=$,--u==0&&s(f,g)})})}function Nr(l,...r){for(const s of r)for(const u in s)l[u]=s[u];return l}let na=1;function Sn(){return na++}function Zn(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))}function on(l,r){l.forEach(s=>{r[s]&&(r[s]=r[s].bind(r))})}function Ha(l,r){return l.indexOf(r,l.length-r.length)!==-1}function qa(l,r,s){const u={};for(const g in l)u[g]=r.call(this,l[g],g,l);return u}function Dn(l,r,s){const u={};for(const g in l)r.call(this,l[g],g,l)&&(u[g]=l[g]);return u}function In(l){return Array.isArray(l)?l.map(In):typeof l=="object"&&l?qa(l,In):l}const jn={};function Wr(l){jn[l]||(typeof console<"u"&&console.warn(l),jn[l]=!0)}function yi(l,r,s){return(s.y-l.y)*(r.x-l.x)>(r.y-l.y)*(s.x-l.x)}function Ka(l){let r=0;for(let s,u,g=0,f=l.length,x=f-1;g<f;x=g++)s=l[g],u=l[x],r+=(u.x-s.x)*(s.y+u.y);return r}function la([l,r,s]){const u=mr(r+90),g=mr(s);return{x:l*Math.cos(u)*Math.sin(g),y:l*Math.sin(u)*Math.sin(g),z:l*Math.cos(g),azimuthal:r,polar:s}}function yn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Xn(l){const r={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,u,g,f)=>{const x=g||f;return r[u]=!x||x.toLowerCase(),""}),r["max-age"]){const s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r}let js=null;function qn(l,r){return[l[4*r],l[4*r+1],l[4*r+2],l[4*r+3]]}function ga(l,r,s,u){for(;r<s;){const g=r+s>>1;l[g]<u?r=g+1:s=g}return r}function St(l,r,s,u){for(;r<s;){const g=r+s>>1;l[g]<=u?r=g+1:s=g}return r}function ye(l){return l>0?1/(1.001-l):1+l}function Ce(l){return l>0?1-1/(1.001-l):-l}const Fe={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Fe.API_URL)return null;try{const l=new URL(Fe.API_URL);return l.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":l.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Ye(l){return Fe.API_URL_REGEX.test(l)}function Qe(l){return Fe.API_SPRITE_REGEX.test(l)}let ct,bt,ft,pt,At,It;function Jt(){return ct==null&&(ct=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),ct}const Gt={now:()=>pt!==void 0?pt:performance.now(),setNow(l){pt=l},restoreNow(){pt=void 0},frame(l){const r=requestAnimationFrame(l);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(l,r=0){const{width:s,height:u}=l;At||(At=document.createElement("canvas"));const g=At.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(s>At.width||u>At.height)&&(At.width=s,At.height=u),g.clearRect(-r,-r,s+2*r,u+2*r),g.drawImage(l,0,0,s,u),g.getImageData(-r,-r,s+2*r,u+2*r)},resolveURL:l=>(bt||(bt=document.createElement("a")),bt.href=l,bt.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(ft==null&&(ft=window.matchMedia("(prefers-reduced-motion: reduce)")),ft.matches)},hasCanvasFingerprintNoise(){if(It!==void 0)return It;if(!Jt())return It=!1,!1;const l=new OffscreenCanvas(85,1),r=l.getContext("2d",{willReadFrequently:!0});let s=0;for(let g=0;g<l.width;++g)r.fillStyle=`rgba(${s++},${s++},${s++}, 255)`,r.fillRect(g,0,1,1);const u=r.getImageData(0,0,l.width,l.height);s=0;for(let g=0;g<u.data.length;++g)if(g%4!=3&&s++!==u.data[g])return It=!0,!0;return It=!1,!1}};function cr(l,r){const s=l.indexOf("?");if(s<0)return`${l}?${new URLSearchParams(r).toString()}`;const u=new URLSearchParams(l.slice(s));for(const g in r)u.set(g,r[g]);return`${l.slice(0,s)}?${u.toString()}`}function Ur(l,r={persistentParams:[]}){const s=l.indexOf("?");if(s<0)return l;const u=new URLSearchParams,g=new URLSearchParams(l.slice(s));for(const x of r.persistentParams){const C=g.get(x);C&&u.set(x,C)}const f=u.toString();return`${l.slice(0,s)}${f.length>0?`?${f}`:""}`}const Jr="mapbox-tiles";let Lr=500,Qr=50;const Xa=["language","worldview","jobid"];let Ca,ca;function Ya(){try{return caches}catch{}}function Ja(){const l=Ya();l&&Ca==null&&(Ca=l.open(Jr))}let ei=1/0;const _s={supported:!1,testSupport:function(l){!As&&hi&&(So?Vl(l):oi=l)}};let oi,hi,As=!1,So=!1;const Hf=typeof self<"u"?self:{};function Vl(l){const r=l.createTexture();l.bindTexture(l.TEXTURE_2D,r);try{if(l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,hi),l.isContextLost())return;_s.supported=!0}catch{}l.deleteTexture(r),As=!0}Hf.document&&(hi=Hf.document.createElement("img"),hi.onload=function(){oi&&Vl(oi),oi=null,So=!0},hi.onerror=function(){As=!0,oi=null},hi.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ul={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Ul);class xd extends Error{constructor(r,s,u){s===401&&Ye(u)&&(r+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(r),this.status=s,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const vd=yn()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,yl=function(l,r){if(!(/^file:/.test(s=l.url)||/^file:/.test(vd())&&!/^\w+:/.test(s))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(u,g){const f=new AbortController,x=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:vd(),referrerPolicy:u.referrerPolicy,signal:f.signal});let C=!1,M=!1;const $=(T=x.url).indexOf("sku=")>0&&Ye(T);var T;u.type==="json"&&x.headers.set("Accept","application/json");const A=(P,R,j)=>{if(M)return;if(P&&P.message!=="SecurityError"&&Wr(P.toString()),R&&j)return I(R);const W=Date.now();fetch(x).then(K=>{if(K.ok){const ne=$?K.clone():null;return I(K,ne,W)}return g(new xd(K.statusText,K.status,u.url))}).catch(K=>{K.name!=="AbortError"&&g(new Error(`${K.message} ${u.url}`))})},I=(P,R,j)=>{(u.type==="arrayBuffer"?P.arrayBuffer():u.type==="json"?P.json():P.text()).then(W=>{M||(R&&j&&function(K,ne,ie){if(Ja(),Ca==null)return;const J=Xn(ne.headers.get("Cache-Control")||"");if(J["no-store"])return;const le={status:ne.status,statusText:ne.statusText,headers:new Headers};ne.headers.forEach((Ne,$e)=>le.headers.set($e,Ne)),J["max-age"]&&le.headers.set("Expires",new Date(ie+1e3*J["max-age"]).toUTCString());const fe=le.headers.get("Expires");if(!fe||new Date(fe).getTime()-ie<42e4)return;let ve=Ur(K.url,{persistentParams:Xa});if(ne.status===206){const Ne=K.headers.get("Range");if(!Ne)return;le.status=200,ve=cr(ve,{range:Ne})}(function(Ne,$e){if(ca===void 0)try{new Response(new ReadableStream),ca=!0}catch{ca=!1}ca?$e(Ne.body):Ne.blob().then($e)})(ne,Ne=>{const $e=new Response((Ie=ne.status)!==200&&Ie!==404&&[101,103,204,205,304].includes(Ie)?null:Ne,le);var Ie;Ja(),Ca!=null&&Ca.then(Je=>Je.put(ve,$e)).catch(Je=>Wr(Je.message))})}(x,R,j),C=!0,g(null,W,P.headers.get("Cache-Control"),P.headers.get("Expires")))}).catch(W=>{M||g(new Error(W.message))})};return $?function(P,R){if(Ja(),Ca==null)return R(null);Ca.then(j=>{let W=Ur(P.url,{persistentParams:Xa});const K=P.headers.get("Range");K&&(W=cr(W,{range:K})),j.match(W).then(ne=>{const ie=function(J){if(!J)return!1;const le=new Date(J.headers.get("Expires")||0),fe=Xn(J.headers.get("Cache-Control")||"");return le>Date.now()&&!fe["no-cache"]}(ne);j.delete(W),ie&&j.put(W,ne.clone()),R(null,ne,ie)}).catch(R)}).catch(R)}(x,A):A(null,null),{cancel:()=>{M=!0,C||f.abort()}}}(l,r);if(yn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,r,void 0,!0)}var s;return function(u,g){const f=new XMLHttpRequest;f.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(f.responseType="arraybuffer");for(const x in u.headers)f.setRequestHeader(x,u.headers[x]);return u.type==="json"&&(f.responseType="text",f.setRequestHeader("Accept","application/json")),f.withCredentials=u.credentials==="include",f.onerror=()=>{g(new Error(f.statusText))},f.onload=()=>{if((f.status>=200&&f.status<300||f.status===0)&&f.response!==null){let x=f.response;if(u.type==="json")try{x=JSON.parse(f.response)}catch(C){return g(C)}g(null,x,f.getResponseHeader("Cache-Control"),f.getResponseHeader("Expires"))}else g(new xd(f.statusText,f.status,u.url))},f.send(u.body),{cancel:()=>f.abort()}}(l,r)},Wi=function(l,r){return yl(Nr(l,{type:"arrayBuffer"}),r)};function qf(l){const r=document.createElement("a");return r.href=l,r.protocol===location.protocol&&r.host===location.host}const h0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Du,_d;Du=[],_d=0;const Pu=function(l,r){if(_s.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*"),_d>=Fe.MAX_PARALLEL_IMAGE_REQUESTS){const f={requestParameters:l,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return Du.push(f),f}_d++;let s=!1;const u=()=>{if(!s)for(s=!0,_d--;Du.length&&_d<Fe.MAX_PARALLEL_IMAGE_REQUESTS;){const f=Du.shift(),{requestParameters:x,callback:C,cancelled:M}=f;M||(f.cancel=Pu(x,C).cancel)}},g=Wi(l,(f,x,C,M)=>{u(),f?r(f):x&&(self.createImageBitmap?function($,T){const A=new Blob([new Uint8Array($)],{type:"image/png"});createImageBitmap(A).then(I=>{T(null,I)}).catch(I=>{T(new Error(`Could not load image because of ${I.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(x,($,T)=>r($,T,C,M)):function($,T){const A=new Image;A.onload=()=>{T(null,A),URL.revokeObjectURL(A.src),A.onload=null,requestAnimationFrame(()=>{A.src=h0})},A.onerror=()=>T(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const I=new Blob([new Uint8Array($)],{type:"image/png"});A.src=$.byteLength?URL.createObjectURL(I):h0}(x,($,T)=>r($,T,C,M)))});return{cancel:()=>{g.cancel(),u()}}};var zm,ti,Ys,Js={exports:{}},Qs={exports:{}},Os={exports:{}},Th=function(){if(Ys)return Js.exports;Ys=1;var l=(zm||(zm=1,Qs.exports=function(s,u){var g,f,x,C,M,$,T,A;for(f=s.length-(g=3&s.length),x=u,M=3432918353,$=461845907,A=0;A<f;)T=255&s.charCodeAt(A)|(255&s.charCodeAt(++A))<<8|(255&s.charCodeAt(++A))<<16|(255&s.charCodeAt(++A))<<24,++A,x=27492+(65535&(C=5*(65535&(x=(x^=T=(65535&(T=(T=(65535&T)*M+(((T>>>16)*M&65535)<<16)&4294967295)<<15|T>>>17))*$+(((T>>>16)*$&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(T=0,g){case 3:T^=(255&s.charCodeAt(A+2))<<16;case 2:T^=(255&s.charCodeAt(A+1))<<8;case 1:x^=T=(65535&(T=(T=(65535&(T^=255&s.charCodeAt(A)))*M+(((T>>>16)*M&65535)<<16)&4294967295)<<15|T>>>17))*$+(((T>>>16)*$&65535)<<16)&4294967295}return x^=s.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),Qs.exports),r=(ti||(ti=1,Os.exports=function(s,u){for(var g,f=s.length,x=u^f,C=0;f>=4;)g=1540483477*(65535&(g=255&s.charCodeAt(C)|(255&s.charCodeAt(++C))<<8|(255&s.charCodeAt(++C))<<16|(255&s.charCodeAt(++C))<<24))+((1540483477*(g>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),f-=4,++C;switch(f){case 3:x^=(255&s.charCodeAt(C+2))<<16;case 2:x^=(255&s.charCodeAt(C+1))<<8;case 1:x=1540483477*(65535&(x^=255&s.charCodeAt(C)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),Os.exports);return Js.exports=l,Js.exports.murmur3=l,Js.exports.murmur2=r,Js.exports}(),bd=k(Th);class eo{constructor(r,...s){Nr(this,s[0]||{}),this.type=r}}class kc extends eo{constructor(r,s={}){super("error",Nr({error:r},s))}}function Eh(l,r,s){s[l]&&s[l].indexOf(r)!==-1||(s[l]=s[l]||[],s[l].push(r))}function Wf(l,r,s){if(s&&s[l]){const u=s[l].indexOf(r);u!==-1&&s[l].splice(u,1)}}class Rc{on(r,s){return this._listeners=this._listeners||{},Eh(r,s,this._listeners),this}off(r,s){return Wf(r,s,this._listeners),Wf(r,s,this._oneTimeListeners),this}once(r,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Eh(r,s,this._oneTimeListeners),this):new Promise(u=>this.once(r,u))}fire(r,s){const u=typeof r=="string"?new eo(r,s):r,g=u.type;if(this.listens(g)){u.target=this;const f=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const M of f)M.call(this,u);const x=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const M of x)Wf(g,M,this._oneTimeListeners),M.call(this,u);const C=this._eventedParent;C&&(Nr(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(u))}else u instanceof kc&&console.error(u.error);return this}listens(r){return!!(this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r))}setEventedParent(r,s){return this._eventedParent=r,this._eventedParentData=s,this}}var To,Kf={},Mu=function(){if(To)return Kf;To=1;var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(f){return(f=Math.round(f))<0?0:f>255?255:f}function s(f){return r(f[f.length-1]==="%"?parseFloat(f)/100*255:parseInt(f))}function u(f){return(x=f[f.length-1]==="%"?parseFloat(f)/100:parseFloat(f))<0?0:x>1?1:x;var x}function g(f,x,C){return C<0?C+=1:C>1&&(C-=1),6*C<1?f+(x-f)*C*6:2*C<1?x:3*C<2?f+(x-f)*(2/3-C)*6:f}try{Kf.parseCSSColor=function(f){var x,C=f.replace(/ /g,"").toLowerCase();if(C in l)return l[C].slice();if(C[0]==="#")return C.length===4?(x=parseInt(C.substr(1),16))>=0&&x<=4095?[(3840&x)>>4|(3840&x)>>8,240&x|(240&x)>>4,15&x|(15&x)<<4,1]:null:C.length===7&&(x=parseInt(C.substr(1),16))>=0&&x<=16777215?[(16711680&x)>>16,(65280&x)>>8,255&x,1]:null;var M=C.indexOf("("),$=C.indexOf(")");if(M!==-1&&$+1===C.length){var T=C.substr(0,M),A=C.substr(M+1,$-(M+1)).split(","),I=1;switch(T){case"rgba":if(A.length!==4)return null;I=u(A.pop());case"rgb":return A.length!==3?null:[s(A[0]),s(A[1]),s(A[2]),I];case"hsla":if(A.length!==4)return null;I=u(A.pop());case"hsl":if(A.length!==3)return null;var P=(parseFloat(A[0])%360+360)%360/360,R=u(A[1]),j=u(A[2]),W=j<=.5?j*(R+1):j+R-j*R,K=2*j-W;return[r(255*g(K,W,P+1/3)),r(255*g(K,W,P)),r(255*g(K,W,P-1/3)),I];default:return null}}return null}}catch{}return Kf}();class Ra{constructor(r,s,u,g=1){this.r=r,this.g=s,this.b=u,this.a=g}static parse(r){if(!r)return;if(r instanceof Ra)return r;if(typeof r!="string")return;const s=Mu.parseCSSColor(r);return s?new Ra(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toStringPremultipliedAlpha(){const[r,s,u,g]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(r)},${Math.round(s)},${Math.round(u)},${g})`}toString(){const[r,s,u,g]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*r)},${Math.round(255*s)},${Math.round(255*u)},${g})`}toRenderColor(r){const{r:s,g:u,b:g,a:f}=this;return new Lm(r,s,u,g,f)}clone(){return new Ra(this.r,this.g,this.b,this.a)}}class Lm{constructor(r,s,u,g,f){if(r){const x=r.image.height,C=x*x;s=f===0?0:s/f*(x-1),u=f===0?0:u/f*(x-1),g=f===0?0:g/f*(x-1);const M=Math.floor(s),$=Math.floor(u),T=Math.floor(g),A=Math.ceil(s),I=Math.ceil(u),P=Math.ceil(g),R=s-M,j=u-$,W=g-T,K=r.image.data,ne=4*(M+$*C+T*x),ie=4*(M+$*C+P*x),J=4*(M+I*C+T*x),le=4*(M+I*C+P*x),fe=4*(A+$*C+T*x),ve=4*(A+$*C+P*x),Ne=4*(A+I*C+T*x),$e=4*(A+I*C+P*x);if(ne<0||$e>=K.length)throw new Error("out of range");this.r=Or(Or(Or(K[ne],K[ie],W),Or(K[J],K[le],W),j),Or(Or(K[fe],K[ve],W),Or(K[Ne],K[$e],W),j),R)/255*f,this.g=Or(Or(Or(K[ne+1],K[ie+1],W),Or(K[J+1],K[le+1],W),j),Or(Or(K[fe+1],K[ve+1],W),Or(K[Ne+1],K[$e+1],W),j),R)/255*f,this.b=Or(Or(Or(K[ne+2],K[ie+2],W),Or(K[J+2],K[le+2],W),j),Or(Or(K[fe+2],K[ve+2],W),Or(K[Ne+2],K[$e+2],W),j),R)/255*f,this.a=f}else this.r=s,this.g=u,this.b=g,this.a=f}toArray(){const{r,g:s,b:u,a:g}=this;return g===0?[0,0,0,0]:[255*r/g,255*s/g,255*u/g,g]}toHslaArray(){if(this.a===0)return[0,0,0,0];const{r,g:s,b:u,a:g}=this,f=Math.min(Math.max(r/g,0),1),x=Math.min(Math.max(s/g,0),1),C=Math.min(Math.max(u/g,0),1),M=Math.min(f,x,C),$=Math.max(f,x,C),T=(M+$)/2;if(M===$)return[0,0,100*T,g];const A=$-M,I=T>.5?A/(2-$-M):A/($+M);let P=0;return $===f?P=(x-C)/A+(x<C?6:0):$===x?P=(C-f)/A+2:$===C&&(P=(f-x)/A+4),P*=60,[Math.min(Math.max(P,0),360),Math.min(Math.max(100*I,0),100),Math.min(Math.max(100*T,0),100),g]}toArray01(){const{r,g:s,b:u,a:g}=this;return g===0?[0,0,0,0]:[r/g,s/g,u/g,g]}toArray01Scaled(r){const{r:s,g:u,b:g,a:f}=this;return f===0?[0,0,0]:[s/f*r,u/f*r,g/f*r]}toArray01PremultipliedAlpha(){const{r,g:s,b:u,a:g}=this;return[r,s,u,g]}toArray01Linear(){const{r,g:s,b:u,a:g}=this;return g===0?[0,0,0,0]:[Math.pow(r/g,2.2),Math.pow(s/g,2.2),Math.pow(u/g,2.2),g]}}function Or(l,r,s){return l*(1-s)+r*s}function Ic(l,r,s){return l.map((u,g)=>Or(u,r[g],s))}Ra.black=new Ra(0,0,0,1),Ra.white=new Ra(1,1,1,1),Ra.transparent=new Ra(0,0,0,0),Ra.red=new Ra(1,0,0,1),Ra.blue=new Ra(0,0,1,1);var Ia=Object.freeze({__proto__:null,array:Ic,color:function(l,r,s){return new Ra(Or(l.r,r.r,s),Or(l.g,r.g,s),Or(l.b,r.b,s),Or(l.a,r.a,s))},number:Or});function wd(l,...r){for(const s of r)for(const u in s)l[u]=s[u];return l}class to extends Error{constructor(r,s){super(s),this.message=s,this.key=r}}class Au{constructor(r,s=[]){this.parent=r,this.bindings={};for(const[u,g]of s)this.bindings[u]=g}concat(r){return new Au(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Fs={kind:"null"},wr={kind:"number"},za={kind:"string"},va={kind:"boolean"},bs={kind:"color"},xl={kind:"object"},Ta={kind:"value"},ku={kind:"collator"},Eo={kind:"formatted"},zc={kind:"resolvedImage"};function Pn(l,r){return{kind:"array",itemType:l,N:r}}function Qa(l){if(l.kind==="array"){const r=Qa(l.itemType);return typeof l.N=="number"?`array<${r}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${r}>`}return l.kind}const Ch=[Fs,wr,za,va,bs,Eo,xl,Pn(Ta),zc];function Gl(l,r){if(r.kind==="error")return null;if(l.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Gl(l.itemType,r.itemType))&&(typeof l.N!="number"||l.N===r.N))return null}else{if(l.kind===r.kind)return null;if(l.kind==="value"){for(const s of Ch)if(!Gl(s,r))return null}}return`Expected ${Qa(l)} but found ${Qa(r)} instead.`}function Zf(l,r){return r.some(s=>s.kind===l.kind)}function Lc(l,r){return r.some(s=>s==="null"?l===null:s==="array"?Array.isArray(l):s==="object"?l&&!Array.isArray(l)&&typeof l=="object":s===typeof l)}class Sd{constructor(r,s,u){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,s){return this.collator.compare(r,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Hl{constructor(r,s,u,g,f){this.text=r.normalize?r.normalize():r,this.image=s,this.scale=u,this.fontStack=g,this.textColor=f}}class Mi{constructor(r){this.sections=r}static fromString(r){return new Mi([new Hl(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.namePrimary)}static factory(r){return r instanceof Mi?r:Mi.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}serialize(){const r=["format"];for(const s of this.sections){if(s.image){r.push(["image",s.image.namePrimary]);continue}r.push(s.text);const u={};s.fontStack&&(u["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(u["font-scale"]=s.scale),s.textColor&&(u["text-color"]=["rgba"].concat(s.textColor.toRenderColor(null).toArray())),r.push(u)}return r}}class Yo{constructor(r,s){if(this.id=r,this.options=s||{params:{}},this.options.transform){const{a:u,b:g,c:f,d:x,e:C,f:M}=this.options.transform;this.options.transform=new DOMMatrix([u,g,f,x,C,M])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}static deserializeId(r){return JSON.parse(r).id}static deserializeFromString(r){const s=JSON.parse(r),{a:u,b:g,c:f,d:x,e:C,f:M}=s.options.transform;return new DOMMatrix([u,g,f,x,C,M]),new Yo(s.id,s.options)}scaleSelf(r){return this.options.transform=this.options.transform.scale(r),this}serialize(){const r={id:this.id};this.options&&(r.options=this.options);const{a:s,b:u,c:g,d:f,e:x,f:C}=this.options.transform;return r.options.transform={a:s,b:u,c:g,d:f,e:x,f:C},JSON.stringify(r)}}class Ai{constructor(r){this.namePrimary=r.namePrimary,r.nameSecondary&&(this.nameSecondary=r.nameSecondary),r.optionsPrimary&&(this.optionsPrimary=r.optionsPrimary),r.optionsSecondary&&(this.optionsSecondary=r.optionsSecondary),this.available=r.available}toString(){return this.namePrimary&&this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}getPrimary(){return new Yo(this.namePrimary,{params:this.optionsPrimary&&this.optionsPrimary.params||{}})}getSerializedPrimary(){return this.getPrimary().serialize()}getSecondary(){return this.nameSecondary?new Yo(this.nameSecondary,{params:this.optionsSecondary&&this.optionsSecondary.params||{}}):null}static from(r){return typeof r=="string"?Ai.build(r):r}static build(r,s,u,g){return r?new Ai({namePrimary:r,nameSecondary:s,optionsPrimary:u,optionsSecondary:g,available:!1}):null}}function Ru(l,r,s,u){return typeof l=="number"&&l>=0&&l<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[l,r,s,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[l,r,s,u]:[l,r,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Iu(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof Ra||l instanceof Sd||l instanceof Mi||l instanceof Ai)return!0;if(Array.isArray(l)){for(const r of l)if(!Iu(r))return!1;return!0}if(typeof l=="object"){for(const r in l)if(!Iu(l[r]))return!1;return!0}return!1}function wn(l){if(l===null)return Fs;if(typeof l=="string")return za;if(typeof l=="boolean")return va;if(typeof l=="number")return wr;if(l instanceof Ra)return bs;if(l instanceof Sd)return ku;if(l instanceof Mi)return Eo;if(l instanceof Ai)return zc;if(Array.isArray(l)){const r=l.length;let s;for(const u of l){const g=wn(u);if(s){if(s===g)continue;s=Ta;break}s=g}return Pn(s||Ta,r)}return xl}function Jo(l){const r=typeof l;return l===null?"":r==="string"||r==="number"||r==="boolean"?String(l):l instanceof Ra?l.toStringPremultipliedAlpha():l instanceof Mi||l instanceof Ai?l.toString():JSON.stringify(l)}class Co{constructor(r,s){this.type=r,this.value=s}static parse(r,s){if(r.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Iu(r[1]))return s.error("invalid value");const u=r[1];let g=wn(u);const f=s.expectedType;return g.kind!=="array"||g.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(g=f),new Co(g,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ra?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof Mi?this.value.serialize():this.value}}class ri{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const Dh={string:za,number:wr,boolean:va,object:xl};class Do{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let u,g=1;const f=r[0];if(f==="array"){let C,M;if(r.length>2){const $=r[1];if(typeof $!="string"||!($ in Dh)||$==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);C=Dh[$],g++}else C=Ta;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);M=r[2],g++}u=Pn(C,M)}else u=Dh[f];const x=[];for(;g<r.length;g++){const C=s.parse(r[g],g,Ta);if(!C)return null;x.push(C)}return new Do(u,x)}evaluate(r){for(let s=0;s<this.args.length;s++){const u=this.args[s].evaluate(r);if(!Gl(this.type,wn(u)))return u;if(s===this.args.length-1)throw new ri(`The expression ${JSON.stringify(this.args[s].serialize())} evaluated to ${Qa(wn(u))} but was expected to be of type ${Qa(this.type)}.`)}return null}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=this.type,s=[r.kind];if(r.kind==="array"){const u=r.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){s.push(u.kind);const g=r.N;(typeof g=="number"||this.args.length>1)&&s.push(g)}}return s.concat(this.args.map(u=>u.serialize()))}}class vl{constructor(r){this.type=Eo,this.sections=r}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const u=r[1];if(!Array.isArray(u)&&typeof u=="object")return s.error("First argument must be an image or text section.");const g=[];let f=!1;for(let x=1;x<=r.length-1;++x){const C=r[x];if(f&&typeof C=="object"&&!Array.isArray(C)){f=!1;let M=null;if(C["font-scale"]&&(M=s.parseObjectValue(C["font-scale"],x,"font-scale",wr),!M))return null;let $=null;if(C["text-font"]&&($=s.parseObjectValue(C["text-font"],x,"text-font",Pn(za)),!$))return null;let T=null;if(C["text-color"]&&(T=s.parseObjectValue(C["text-color"],x,"text-color",bs),!T))return null;const A=g[g.length-1];A.scale=M,A.font=$,A.textColor=T}else{const M=s.parse(r[x],x,Ta);if(!M)return null;const $=M.type.kind;if($!=="string"&&$!=="value"&&$!=="null"&&$!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,g.push({content:M,scale:null,font:null,textColor:null})}}return new vl(g)}evaluate(r){return new Mi(this.sections.map(s=>{const u=s.content.evaluate(r);return wn(u)===zc?new Hl("",u,null,null,null):new Hl(Jo(u),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null)}))}eachChild(r){for(const s of this.sections)r(s.content),s.scale&&r(s.scale),s.font&&r(s.font),s.textColor&&r(s.textColor)}outputDefined(){return!1}serialize(){const r=["format"];for(const s of this.sections){r.push(s.content.serialize());const u={};s.scale&&(u["font-scale"]=s.scale.serialize()),s.font&&(u["text-font"]=s.font.serialize()),s.textColor&&(u["text-color"]=s.textColor.serialize()),r.push(u)}return r}}class Td{constructor(r,s,u,g){this._imageWarnHistory={},this.type=zc,this.inputPrimary=r,this.inputSecondary=s,this.inputPrimaryParams=u,this.inputSecondaryParams=g}static parse(r,s){if(r.length<2)return s.error("Expected two or more arguments.");let u=1;const g=[];function f(){if(u<r.length){const C=s.parse(r[u],u++,za);return C?(g.push({image:C,options:void 0}),!0):(s.error(g.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function x(){if(u<r.length){if((C=r[u])===null||typeof C!="object"||Array.isArray(C))return!0;const M=r[u].params,$=s.concat(u);if(!M)return u++,!0;if(typeof M!="object"||M.constructor!==Object)return $.error('Image options "params" should be an object'),!1;const T={},A=$.concat(void 0,"params");for(const I in M){if(!I)return A.error("Image parameter name should be non-empty"),!1;const P=A.concat(void 0,I).parse(M[I],void 0,bs,void 0,{typeAnnotation:"coerce"});if(!P)return!1;T[I]=P}return g[g.length-1].options=T,u++,!0}var C;return!0}for(let C=0;C<2;C++)if(!f()||!x())return;return new Td(g[0].image,g[1]?g[1].image:void 0,g[0].options,g[1]?g[1].options:void 0)}evaluateParams(r,s){const u={};if(s){for(const g in s)if(s[g])try{const f=s[g].evaluate(r),x=`Ignoring image parameter "${g}" with semi-transparent color ${f.toString()}`;if(f.a!==1){this._imageWarnHistory[x]||(console.warn(x),this._imageWarnHistory[x]=!0);continue}u[g]=f}catch{continue}if(Object.keys(u).length!==0)return{params:u}}}evaluate(r){const s=Ai.build(this.inputPrimary.evaluate(r),this.inputSecondary?this.inputSecondary.evaluate(r):void 0,this.inputPrimaryParams?this.evaluateParams(r,this.inputPrimaryParams):void 0,this.inputSecondaryParams?this.evaluateParams(r,this.inputSecondaryParams):void 0);return s&&r.availableImages&&(s.available=r.availableImages.indexOf(s.namePrimary)>-1,s.nameSecondary&&s.available&&r.availableImages&&(s.available=r.availableImages.indexOf(s.nameSecondary)>-1)),s}eachChild(r){if(r(this.inputPrimary),this.inputPrimaryParams)for(const s in this.inputPrimaryParams)this.inputPrimaryParams[s]&&r(this.inputPrimaryParams[s]);if(this.inputSecondary&&(r(this.inputSecondary),this.inputSecondaryParams))for(const s in this.inputSecondaryParams)this.inputSecondaryParams[s]&&r(this.inputSecondaryParams[s])}outputDefined(){return!1}serializeParams(r){const s={};if(r){for(const u in r)r[u]&&(s[u]=r[u].serialize());return{params:s}}}serialize(){const r=["image",this.inputPrimary.serialize()];return this.inputPrimaryParams&&r.push(this.serializeParams(this.inputPrimaryParams)),this.inputSecondary&&(r.push(this.inputSecondary.serialize()),this.inputSecondaryParams&&r.push(this.serializeParams(this.inputSecondaryParams))),r}}function zu(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}const vx={"to-boolean":va,"to-color":bs,"to-number":wr,"to-string":za};class ql{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const u=r[0],g=[];let f=Fs;if(u==="to-array"){if(!Array.isArray(r[1]))return null;const x=r[1].length;if(s.expectedType){if(s.expectedType.kind!=="array")return s.error(`Expected ${s.expectedType.kind} but found array.`);f=Pn(s.expectedType.itemType,x)}else{if(!(x>0&&Iu(r[1][0])))return null;f=Pn(wn(r[1][0]),x)}for(let C=0;C<x;C++){const M=r[1][C];let $;if(zu(M)==="array")$=s.parse(M,void 0,f.itemType);else{const T=zu(M);if(T!==f.itemType.kind)return s.error(`Expected ${f.itemType.kind} but found ${T}.`);$=s.registry.literal.parse(["literal",M===void 0?null:M],s)}if(!$)return null;g.push($)}}else{if((u==="to-boolean"||u==="to-string")&&r.length!==2)return s.error("Expected one argument.");f=vx[u];for(let x=1;x<r.length;x++){const C=s.parse(r[x],x,Ta);if(!C)return null;g.push(C)}}return new ql(f,g)}evaluate(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){let s,u;for(const g of this.args){if(s=g.evaluate(r),u=null,s instanceof Ra)return s;if(typeof s=="string"){const f=r.parseColor(s);if(f)return f}else if(Array.isArray(s)&&(u=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Ru(s[0],s[1],s[2],s[3]),!u))return new Ra(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new ri(u||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}if(this.type.kind==="number"){let s=null;for(const u of this.args){if(s=u.evaluate(r),s===null)return 0;const g=Number(s);if(!isNaN(g))return g}throw new ri(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?Mi.fromString(Jo(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?Ai.build(Jo(this.args[0].evaluate(r))):this.type.kind==="array"?this.args.map(s=>s.evaluate(r)):Jo(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){if(this.type.kind==="formatted")return new vl([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Td(this.args[0]).serialize();const r=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(s=>{r.push(s.serialize())}),r}}const Xf=["Unknown","Point","LineString","Polygon"];class Yf{constructor(r,s){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=r,this.options=s}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Xf[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(r){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const r=this.featureDistanceData.center,s=this.featureDistanceData.scale,{x:u,y:g}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(u*s-r[0])+this.featureDistanceData.bearing[1]*(g*s-r[1])}return 0}parseColor(r){let s=this._parseColorCache[r];return s||(s=this._parseColorCache[r]=Ra.parse(r)),s}getConfig(r){return this.options?this.options.get(r):null}}class Vs{constructor(r,s,u,g,f){this.name=r,this.type=s,this._evaluate=u,this.args=g,this._overloadIndex=f}evaluate(r){if(!this._evaluate){const s=Vs.definitions[this.name];this._evaluate=Array.isArray(s)?s[2]:s.overloads[this._overloadIndex][1]}return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(r=>r.serialize()))}static parse(r,s){const u=r[0],g=Vs.definitions[u];if(!g)return s.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const f=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,C=[];let M=null,$=-1;for(const[T,A]of x){if(Array.isArray(T)&&T.length!==r.length-1)continue;C.push(T),$++,M=new zh(s.registry,s.path,null,s.scope,void 0,s._scope,s.options);const I=[];let P=!1;for(let R=1;R<r.length;R++){const j=r[R],W=Array.isArray(T)?T[R-1]:T.type,K=M.parse(j,1+I.length,W);if(!K){P=!0;break}I.push(K)}if(!P)if(Array.isArray(T)&&T.length!==I.length)M.error(`Expected ${T.length} arguments, but found ${I.length} instead.`);else{for(let R=0;R<I.length;R++){const j=Array.isArray(T)?T[R]:T.type,W=I[R];M.concat(R+1).checkSubtype(j,W.type)}if(M.errors.length===0)return new Vs(u,f,A,I,$)}}if(C.length===1)s.errors.push(...M.errors);else{const T=(C.length?C:x.map(([I])=>I)).map(Jf).join(" | "),A=[];for(let I=1;I<r.length;I++){const P=s.parse(r[I],1+A.length);if(!P)return null;A.push(Qa(P.type))}s.error(`Expected arguments of type ${T}, but found (${A.join(", ")}) instead.`)}return null}static register(r,s){Vs.definitions=s;for(const u in s)r[u]=Vs}}function Jf(l){return Array.isArray(l)?`(${l.map(Qa).join(", ")})`:`(${Qa(l.type)}...)`}class Ph{constructor(r,s,u){this.type=ku,this.locale=u,this.caseSensitive=r,this.diacriticSensitive=s}static parse(r,s){if(r.length!==2)return s.error("Expected one argument.");const u=r[1];if(typeof u!="object"||Array.isArray(u))return s.error("Collator options argument must be an object.");const g=u["case-sensitive"]===void 0?s.parse(!1,1,va):s.parseObjectValue(u["case-sensitive"],1,"case-sensitive",va);if(!g)return null;const f=u["diacritic-sensitive"]===void 0?s.parse(!1,1,va):s.parseObjectValue(u["diacritic-sensitive"],1,"diacritic-sensitive",va);if(!f)return null;let x=null;return u.locale&&(x=s.parseObjectValue(u.locale,1,"locale",za),!x)?null:new Ph(g,f,x)}evaluate(r){return new Sd(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}serialize(){const r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]}}function f0(l,r,s=0,u=l.length-1,g=_x){for(;u>s;){if(u-s>600){const M=u-s+1,$=r-s+1,T=Math.log(M),A=.5*Math.exp(2*T/3),I=.5*Math.sqrt(T*A*(M-A)/M)*($-M/2<0?-1:1);f0(l,r,Math.max(s,Math.floor(r-$*A/M+I)),Math.min(u,Math.floor(r+(M-$)*A/M+I)),g)}const f=l[r];let x=s,C=u;for(Mh(l,s,r),g(l[u],f)>0&&Mh(l,s,u);x<C;){for(Mh(l,x,C),x++,C--;g(l[x],f)<0;)x++;for(;g(l[C],f)>0;)C--}g(l[s],f)===0?Mh(l,s,C):(C++,Mh(l,C,u)),C<=r&&(s=C+1),r<=C&&(u=C-1)}}function Mh(l,r,s){const u=l[r];l[r]=l[s],l[s]=u}function _x(l,r){return l<r?-1:l>r?1:0}function bx(l){let r=0;for(let s,u,g=0,f=l.length,x=f-1;g<f;x=g++)s=l[g],u=l[x],r+=(u.x-s.x)*(s.y+u.y);return r}function Ah(l,r){l[0]=Math.min(l[0],r[0]),l[1]=Math.min(l[1],r[1]),l[2]=Math.max(l[2],r[0]),l[3]=Math.max(l[3],r[1])}function kh(l,r){return!(l[0]<=r[0]||l[2]>=r[2]||l[1]<=r[1]||l[3]>=r[3])}function p0(l,r,s){const u=l[0]-r[0],g=l[1]-r[1],f=l[0]-s[0],x=l[1]-s[1];return u*x-f*g==0&&u*f<=0&&g*x<=0}function Qo(l,r,s=!1){let u=!1;for(let C=0,M=r.length;C<M;C++){const $=r[C];for(let T=0,A=$.length,I=A-1;T<A;I=T++){const P=$[I],R=$[T];if(p0(l,P,R))return s;(f=P)[1]>(g=l)[1]!=(x=R)[1]>g[1]&&g[0]<(x[0]-f[0])*(g[1]-f[1])/(x[1]-f[1])+f[0]&&(u=!u)}}var g,f,x;return u}function m0(l,r,s,u){const g=u[0]-s[0],f=u[1]-s[1],x=(l[0]-s[0])*f-g*(l[1]-s[1]),C=(r[0]-s[0])*f-g*(r[1]-s[1]);return x>0&&C<0||x<0&&C>0}function Ed(l,r,s,u){return(g=[u[0]-s[0],u[1]-s[1]])[0]*(f=[r[0]-l[0],r[1]-l[1]])[1]-g[1]*f[0]!=0&&!(!m0(l,r,s,u)||!m0(s,u,l,r));var g,f}const Us=8192;function wx(l,r){const s=(180+l[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,g=Math.pow(2,r.z);return[Math.round(s*g*Us),Math.round(u*g*Us)]}function g0(l,r){for(let s=0;s<r.length;s++)if(Qo(l,r[s]))return!0;return!1}function y0(l,r,s){for(const u of s)for(let g=0,f=u.length,x=f-1;g<f;x=g++)if(Ed(l,r,u[x],u[g]))return!0;return!1}function $m(l,r){for(let s=0;s<l.length;++s)if(!Qo(l[s],r))return!1;for(let s=0;s<l.length-1;++s)if(y0(l[s],l[s+1],r))return!1;return!0}function Lu(l,r){for(let s=0;s<r.length;s++)if($m(l,r[s]))return!0;return!1}function ua(l,r,s){const u=[];for(let g=0;g<l.length;g++){const f=[];for(let x=0;x<l[g].length;x++){const C=wx(l[g][x],s);Ah(r,C),f.push(C)}u.push(f)}return u}function Rr(l,r,s){const u=[];for(let g=0;g<l.length;g++){const f=ua(l[g],r,s);u.push(f)}return u}function Qf(l,r,s,u){if(l[0]<s[0]||l[0]>s[2]){const g=.5*u;let f=l[0]-s[0]>g?-u:s[0]-l[0]>g?u:0;f===0&&(f=l[0]-s[2]>g?-u:s[2]-l[0]>g?u:0),l[0]+=f}Ah(r,l)}function ea(l,r,s,u){const g=Math.pow(2,u.z)*Us,f=[u.x*Us,u.y*Us],x=[];if(!l)return x;for(const C of l)for(const M of C){const $=[M.x+f[0],M.y+f[1]];Qf($,r,s,g),x.push($)}return x}function ep(l,r,s,u){const g=Math.pow(2,u.z)*Us,f=[u.x*Us,u.y*Us],x=[];if(!l)return x;for(const M of l){const $=[];for(const T of M){const A=[T.x+f[0],T.y+f[1]];Ah(r,A),$.push(A)}x.push($)}if(r[2]-r[0]<=g/2){(C=r)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const M of x)for(const $ of M)Qf($,r,s,g)}var C;return x}class _l{constructor(r,s){this.type=va,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Iu(r[1])){const u=r[1];if(u.type==="FeatureCollection")for(let g=0;g<u.features.length;++g){const f=u.features[g].geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new _l(u,u.features[g].geometry)}else if(u.type==="Feature"){const g=u.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new _l(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new _l(u,u)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,u){const g=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(!x)return!1;if(u.type==="Polygon"){const C=ua(u.coordinates,f,x),M=ea(s.geometry(),g,f,x);if(!kh(g,f))return!1;for(const $ of M)if(!Qo($,C))return!1}if(u.type==="MultiPolygon"){const C=Rr(u.coordinates,f,x),M=ea(s.geometry(),g,f,x);if(!kh(g,f))return!1;for(const $ of M)if(!g0($,C))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,u){const g=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(!x)return!1;if(u.type==="Polygon"){const C=ua(u.coordinates,f,x),M=ep(s.geometry(),g,f,x);if(!kh(g,f))return!1;for(const $ of M)if(!$m($,C))return!1}if(u.type==="MultiPolygon"){const C=Rr(u.coordinates,f,x),M=ep(s.geometry(),g,f,x);if(!kh(g,f))return!1;for(const $ of M)if(!Lu($,C))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Gr={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},$u=1/298.257223563,$c=$u*(2-$u),Cd=Math.PI/180;class Wl{static fromTile(r,s,u){const g=Math.PI*(1-2*(r+.5)/Math.pow(2,s)),f=Math.atan(.5*(Math.exp(g)-Math.exp(-g)))/Cd;return new Wl(f,u)}static get units(){return Gr}constructor(r,s){if(r===void 0)throw new Error("No latitude given.");if(s&&!Gr[s])throw new Error(`Unknown unit ${s}. Use one of: ${Object.keys(Gr).join(", ")}`);const u=6378.137*Cd*(s?Gr[s]:1),g=Math.cos(r*Cd),f=1/(1-$c*(1-g*g)),x=Math.sqrt(f);this.kx=u*x*g,this.ky=u*x*f*(1-$c)}distance(r,s){const u=ws(r[0]-s[0])*this.kx,g=(r[1]-s[1])*this.ky;return Math.sqrt(u*u+g*g)}bearing(r,s){const u=ws(s[0]-r[0])*this.kx;return Math.atan2(u,(s[1]-r[1])*this.ky)/Cd}destination(r,s,u){const g=u*Cd;return this.offset(r,Math.sin(g)*s,Math.cos(g)*s)}offset(r,s,u){return[r[0]+s/this.kx,r[1]+u/this.ky]}lineDistance(r){let s=0;for(let u=0;u<r.length-1;u++)s+=this.distance(r[u],r[u+1]);return s}area(r){let s=0;for(let u=0;u<r.length;u++){const g=r[u];for(let f=0,x=g.length,C=x-1;f<x;C=f++)s+=ws(g[f][0]-g[C][0])*(g[f][1]+g[C][1])*(u?-1:1)}return Math.abs(s)/2*this.kx*this.ky}along(r,s){let u=0;if(s<=0)return r[0];for(let g=0;g<r.length-1;g++){const f=r[g],x=r[g+1],C=this.distance(f,x);if(u+=C,u>s)return Oi(f,x,(s-(u-C))/C)}return r[r.length-1]}pointToSegmentDistance(r,s,u){let[g,f]=s,x=ws(u[0]-g)*this.kx,C=(u[1]-f)*this.ky;if(x!==0||C!==0){const M=(ws(r[0]-g)*this.kx*x+(r[1]-f)*this.ky*C)/(x*x+C*C);M>1?(g=u[0],f=u[1]):M>0&&(g+=x/this.kx*M,f+=C/this.ky*M)}return x=ws(r[0]-g)*this.kx,C=(r[1]-f)*this.ky,Math.sqrt(x*x+C*C)}pointOnLine(r,s){let u=1/0,g=r[0][0],f=r[0][1],x=0,C=0;for(let M=0;M<r.length-1;M++){let $=r[M][0],T=r[M][1],A=ws(r[M+1][0]-$)*this.kx,I=(r[M+1][1]-T)*this.ky,P=0;A===0&&I===0||(P=(ws(s[0]-$)*this.kx*A+(s[1]-T)*this.ky*I)/(A*A+I*I),P>1?($=r[M+1][0],T=r[M+1][1]):P>0&&($+=A/this.kx*P,T+=I/this.ky*P)),A=ws(s[0]-$)*this.kx,I=(s[1]-T)*this.ky;const R=A*A+I*I;R<u&&(u=R,g=$,f=T,x=M,C=P)}return{point:[g,f],index:x,t:Math.max(0,Math.min(1,C))}}lineSlice(r,s,u){let g=this.pointOnLine(u,r),f=this.pointOnLine(u,s);if(g.index>f.index||g.index===f.index&&g.t>f.t){const $=g;g=f,f=$}const x=[g.point],C=g.index+1,M=f.index;!Dd(u[C],x[0])&&C<=M&&x.push(u[C]);for(let $=C+1;$<=M;$++)x.push(u[$]);return Dd(u[M],f.point)||x.push(f.point),x}lineSliceAlong(r,s,u){let g=0;const f=[];for(let x=0;x<u.length-1;x++){const C=u[x],M=u[x+1],$=this.distance(C,M);if(g+=$,g>r&&f.length===0&&f.push(Oi(C,M,(r-(g-$))/$)),g>=s)return f.push(Oi(C,M,(s-(g-$))/$)),f;g>r&&f.push(M)}return f}bufferPoint(r,s){const u=s/this.ky,g=s/this.kx;return[r[0]-g,r[1]-u,r[0]+g,r[1]+u]}bufferBBox(r,s){const u=s/this.ky,g=s/this.kx;return[r[0]-g,r[1]-u,r[2]+g,r[3]+u]}insideBBox(r,s){return ws(r[0]-s[0])>=0&&ws(r[0]-s[2])<=0&&r[1]>=s[1]&&r[1]<=s[3]}}function Dd(l,r){return l[0]===r[0]&&l[1]===r[1]}function Oi(l,r,s){const u=ws(r[0]-l[0]);return[l[0]+u*s,l[1]+(r[1]-l[1])*s]}function ws(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}class Pd{constructor(r=[],s=(u,g)=>u<g?-1:u>g?1:0){if(this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:s,compare:u}=this,g=s[r];for(;r>0;){const f=r-1>>1,x=s[f];if(u(g,x)>=0)break;s[r]=x,r=f}s[r]=g}_down(r){const{data:s,compare:u}=this,g=this.length>>1,f=s[r];for(;r<g;){let x=1+(r<<1);const C=x+1;if(C<this.length&&u(s[C],s[x])<0&&(x=C),u(s[x],f)>=0)break;s[r]=s[x],r=x}s[r]=f}}var lr=8192;function Rh(l,r){return r.dist-l.dist}const bl=100,Ki=50;function x0(l){const r=[1/0,1/0,-1/0,-1/0];if(r.length!==l.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!==l[s])return!1;return!0}function tp(l){return l[1]-l[0]+1}function Kl(l,r){const s=l[1]>=l[0]&&l[1]<r;return s||console.warn("Distance Expression: Index is out of range"),s}function Md(l,r){if(l[0]>l[1])return[null,null];const s=tp(l);if(r){if(s===2)return[l,null];const u=Math.floor(s/2);return[[l[0],l[0]+u],[l[0]+u,l[1]]]}{if(s===1)return[l,null];const u=Math.floor(s/2)-1;return[[l[0],l[0]+u],[l[0]+u+1,l[1]]]}}function ki(l,r){const s=[1/0,1/0,-1/0,-1/0];if(!Kl(r,l.length))return s;for(let u=r[0];u<=r[1];++u)Ah(s,l[u]);return s}function wl(l){const r=[1/0,1/0,-1/0,-1/0];for(let s=0;s<l.length;++s)for(let u=0;u<l[s].length;++u)Ah(r,l[s][u]);return r}function Nu(l,r,s){if(x0(l)||x0(r))return NaN;let u=0,g=0;return l[2]<r[0]&&(u=r[0]-l[2]),l[0]>r[2]&&(u=l[0]-r[2]),l[1]>r[3]&&(g=l[1]-r[3]),l[3]<r[1]&&(g=r[1]-l[3]),s.distance([0,0],[u,g])}function v0(l){return 360*l-180}function _0(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function rp(l,r){const s=Math.pow(2,r.z),u=(l.y/lr+r.y)/s;return[v0((l.x/lr+r.x)/s),_0(u)]}function ap(l,r){const s=[];for(let u=0;u<l.length;++u)s.push(rp(l[u],r));return s}function b0(l,r,s){const u=s.pointOnLine(r,l).point;return s.distance(l,u)}function Bu(l,r,s,u,g){const f=s.slice(u[0],u[1]+1);let x=1/0;for(let C=r[0];C<=r[1];++C)if((x=Math.min(x,b0(l[C],f,g)))===0)return 0;return x}function Ad(l,r,s,u,g){const f=Math.min(g.pointToSegmentDistance(l,s,u),g.pointToSegmentDistance(r,s,u)),x=Math.min(g.pointToSegmentDistance(s,l,r),g.pointToSegmentDistance(u,l,r));return Math.min(f,x)}function el(l,r,s,u,g){if(!Kl(r,l.length)||!Kl(u,s.length))return NaN;let f=1/0;for(let x=r[0];x<r[1];++x)for(let C=u[0];C<u[1];++C){if(Ed(l[x],l[x+1],s[C],s[C+1]))return 0;f=Math.min(f,Ad(l[x],l[x+1],s[C],s[C+1],g))}return f}function Nm(l,r,s,u,g){if(!Kl(r,l.length)||!Kl(u,s.length))return NaN;let f=1/0;for(let x=r[0];x<=r[1];++x)for(let C=u[0];C<=u[1];++C)if((f=Math.min(f,g.distance(l[x],s[C])))===0)return f;return f}function w0(l,r,s){if(Qo(l,r,!0))return 0;let u=1/0;for(const g of r){const f=g.length;if(f<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(g[0]!==g[f-1]&&(u=Math.min(u,s.pointToSegmentDistance(l,g[f-1],g[0])))===0||(u=Math.min(u,b0(l,g,s)))===0)return u}return u}function Zl(l,r,s,u){if(!Kl(r,l.length))return NaN;for(let f=r[0];f<=r[1];++f)if(Qo(l[f],s,!0))return 0;let g=1/0;for(let f=r[0];f<r[1];++f)for(const x of s)for(let C=0,M=x.length,$=M-1;C<M;$=C++){if(Ed(l[f],l[f+1],x[$],x[C]))return 0;g=Math.min(g,Ad(l[f],l[f+1],x[$],x[C],u))}return g}function Nc(l,r){for(const s of l)for(let u=0;u<=s.length-1;++u)if(Qo(s[u],r,!0))return!0;return!1}function np(l,r,s,u=1/0){const g=wl(l),f=wl(r);if(u!==1/0&&Nu(g,f,s)>=u)return u;if(kh(g,f)){if(Nc(l,r))return 0}else if(Nc(r,l))return 0;let x=u;for(const C of l)for(let M=0,$=C.length,T=$-1;M<$;T=M++)for(const A of r)for(let I=0,P=A.length,R=P-1;I<P;R=I++){if(Ed(C[T],C[M],A[R],A[I]))return 0;x=Math.min(x,Ad(C[T],C[M],A[R],A[I],s))}return x}function ks(l,r,s,u,g,f,x){if(f===null||x===null)return;const C=Nu(ki(u,f),ki(g,x),s);C<r&&l.push({dist:C,range1:f,range2:x})}function Bc(l,r,s,u,g=1/0){let f=Math.min(u.distance(l[0],s[0][0]),g);if(f===0)return f;const x=new Pd([{dist:0,range1:[0,l.length-1],range2:[0,0]}],Rh),C=r?Ki:bl,M=wl(s);for(;x.length;){const $=x.pop();if($.dist>=f)continue;const T=$.range1;if(tp(T)<=C){if(!Kl(T,l.length))return NaN;if(r){const A=Zl(l,T,s,u);if((f=Math.min(f,A))===0)return f}else for(let A=T[0];A<=T[1];++A){const I=w0(l[A],s,u);if((f=Math.min(f,I))===0)return f}}else{const A=Md(T,r);if(A[0]!==null){const I=Nu(ki(l,A[0]),M,u);I<f&&x.push({dist:I,range1:A[0],range2:[0,0]})}if(A[1]!==null){const I=Nu(ki(l,A[1]),M,u);I<f&&x.push({dist:I,range1:A[1],range2:[0,0]})}}}return f}function ip(l,r,s,u,g,f=1/0){let x=Math.min(f,g.distance(l[0],s[0]));if(x===0)return x;const C=new Pd([{dist:0,range1:[0,l.length-1],range2:[0,s.length-1]}],Rh),M=r?Ki:bl,$=u?Ki:bl;for(;C.length;){const T=C.pop();if(T.dist>=x)continue;const A=T.range1,I=T.range2;if(tp(A)<=M&&tp(I)<=$){if(!Kl(A,l.length)||!Kl(I,s.length))return NaN;if(r&&u?x=Math.min(x,el(l,A,s,I,g)):r||u?r&&!u?x=Math.min(x,Bu(s,I,l,A,g)):!r&&u&&(x=Math.min(x,Bu(l,A,s,I,g))):x=Math.min(x,Nm(l,A,s,I,g)),x===0)return x}else{const P=Md(A,r),R=Md(I,u);ks(C,x,g,l,s,P[0],R[0]),ks(C,x,g,l,s,P[0],R[1]),ks(C,x,g,l,s,P[1],R[0]),ks(C,x,g,l,s,P[1],R[1])}}return x}function Ih(l,r,s,u,g=1/0){let f=g;const x=ki(l,[0,l.length-1]);for(const C of s)if(!(f!==1/0&&Nu(x,ki(C,[0,C.length-1]),u)>=f)&&(f=Math.min(f,ip(l,r,C,!0,u,f)),f===0))return f;return f}function kd(l,r,s,u,g=1/0){let f=g;const x=ki(l,[0,l.length-1]);for(const C of s){if(f!==1/0&&Nu(x,wl(C),u)>=f)continue;const M=Bc(l,r,C,u,f);if(isNaN(M))return M;if((f=Math.min(f,M))===0)return f}return f}function sp(l){return l==="Point"||l==="MultiPoint"||l==="LineString"||l==="MultiLineString"||l==="Polygon"||l==="MultiPolygon"}class jc{constructor(r,s){this.type=wr,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'distance' expression requires either one argument, but found ' ${r.length-1} instead.`);if(Iu(r[1])){const u=r[1];if(u.type==="FeatureCollection"){for(let g=0;g<u.features.length;++g)if(sp(u.features[g].geometry.type))return new jc(u,u.features[g].geometry)}else if(u.type==="Feature"){if(sp(u.geometry.type))return new jc(u,u.geometry)}else if(sp(u.type))return new jc(u,u)}return s.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(r){const s=r.geometry(),u=r.canonicalID();if(s!=null&&u!=null){if(r.geometryType()==="Point")return function(g,f,x){const C=[];for(const $ of g)for(const T of $)C.push(rp(T,f));const M=new Wl(C[0][1],"meters");return x.type==="Point"||x.type==="MultiPoint"||x.type==="LineString"?ip(C,!1,x.type==="Point"?[x.coordinates]:x.coordinates,x.type==="LineString",M):x.type==="MultiLineString"?Ih(C,!1,x.coordinates,M):x.type==="Polygon"||x.type==="MultiPolygon"?kd(C,!1,x.type==="Polygon"?[x.coordinates]:x.coordinates,M):null}(s,u,this.geometries);if(r.geometryType()==="LineString")return function(g,f,x){const C=[];for(const $ of g){const T=[];for(const A of $)T.push(rp(A,f));C.push(T)}const M=new Wl(C[0][0][1],"meters");if(x.type==="Point"||x.type==="MultiPoint"||x.type==="LineString")return Ih(x.type==="Point"?[x.coordinates]:x.coordinates,x.type==="LineString",C,M);if(x.type==="MultiLineString"){let $=1/0;for(let T=0;T<x.coordinates.length;T++){const A=Ih(x.coordinates[T],!0,C,M,$);if(isNaN(A))return A;if(($=Math.min($,A))===0)return $}return $}if(x.type==="Polygon"||x.type==="MultiPolygon"){let $=1/0;for(let T=0;T<C.length;T++){const A=kd(C[T],!0,x.type==="Polygon"?[x.coordinates]:x.coordinates,M,$);if(isNaN(A))return A;if(($=Math.min($,A))===0)return $}return $}return null}(s,u,this.geometries);if(r.geometryType()==="Polygon")return function(g,f,x){const C=[];for(const $ of function(T,A){const I=T.length;if(I<=1)return[T];const P=[];let R,j;for(let W=0;W<I;W++){const K=bx(T[W]);K!==0&&(T[W].area=Math.abs(K),j===void 0&&(j=K<0),j===K<0?(R&&P.push(R),R=[T[W]]):R.push(T[W]))}return R&&P.push(R),P}(g)){const T=[];for(let A=0;A<$.length;++A)T.push(ap($[A],f));C.push(T)}const M=new Wl(C[0][0][0][1],"meters");if(x.type==="Point"||x.type==="MultiPoint"||x.type==="LineString")return kd(x.type==="Point"?[x.coordinates]:x.coordinates,x.type==="LineString",C,M);if(x.type==="MultiLineString"){let $=1/0;for(let T=0;T<x.coordinates.length;T++){const A=kd(x.coordinates[T],!0,C,M,$);if(isNaN(A))return A;if(($=Math.min($,A))===0)return $}return $}return x.type==="Polygon"||x.type==="MultiPolygon"?function($,T,A){let I=1/0;for(const P of $)for(const R of T){const j=np(P,R,A,I);if(isNaN(j))return j;if((I=Math.min(I,j))===0)return I}return I}(x.type==="Polygon"?[x.coordinates]:x.coordinates,C,M):null}(s,u,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function op(l,r){switch(l){case"string":return Jo(r);case"number":return+r;case"boolean":return!!r;case"color":return Ra.parse(r);case"formatted":return Mi.fromString(Jo(r));case"resolvedImage":return Ai.build(Jo(r))}return r}function lp(l,r,s,u){return u!==void 0&&(l=u*Math.round(l/u)),r!==void 0&&l<r&&(l=r),s!==void 0&&l>s&&(l=s),l}class Oc{constructor(r,s,u){this.type=r,this.key=s,this.scope=u}static parse(r,s){let u=s.expectedType;if(u==null&&(u=Ta),r.length<2||r.length>3)return s.error("Invalid number of arguments for 'config' expression.");const g=s.parse(r[1],1);if(!(g instanceof Co))return s.error("Key name of 'config' expression must be a string literal.");if(r.length>=3){const f=s.parse(r[2],2);return f instanceof Co?new Oc(u,Jo(g.value),Jo(f.value)):s.error("Scope of 'config' expression must be a string literal.")}return new Oc(u,Jo(g.value))}evaluate(r){const s=[this.key,this.scope,r.scope].filter(Boolean).join(""),u=r.getConfig(s);if(!u)return null;const{type:g,value:f,values:x,minValue:C,maxValue:M,stepValue:$}=u,T=u.default.evaluate(r);let A=T;if(f){const I=r.scope;r.scope=(I||"").split("").slice(1).join(""),A=f.evaluate(r),r.scope=I}return g&&(A=op(g,A)),A===void 0||C===void 0&&M===void 0&&$===void 0||(typeof A=="number"?A=lp(A,C,M,$):Array.isArray(A)&&(A=A.map(I=>typeof I=="number"?lp(I,C,M,$):I))),f!==void 0&&A!==void 0&&x&&!x.includes(A)&&(A=T,g&&(A=op(g,A))),(g&&g!==this.type||A!==void 0&&wn(A)!==this.type)&&(A=op(this.type.kind,A)),A}eachChild(){}outputDefined(){return!1}serialize(){const r=["config",this.key];return this.scope&&r.concat(this.key),r}}function Fc(l){if(l instanceof Vs&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof _l||l instanceof jc)return!1;let r=!0;return l.eachChild(s=>{r&&!Fc(s)&&(r=!1)}),r}function Rs(l){if(l instanceof Vs&&l.name==="feature-state")return!1;let r=!0;return l.eachChild(s=>{r&&!Rs(s)&&(r=!1)}),r}function Vc(l){if(l instanceof Oc)return new Set([l.key]);let r=new Set;return l.eachChild(s=>{r=new Set([...r,...Vc(s)])}),r}function Ri(l,r){if(l instanceof Vs&&r.indexOf(l.name)>=0)return!1;let s=!0;return l.eachChild(u=>{s&&!Ri(u,r)&&(s=!1)}),s}class Zi{constructor(r,s){this.type=s.type,this.name=r,this.boundExpression=s}static parse(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const u=r[1];return s.scope.has(u)?new Zi(u,s.scope.get(u)):s.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Xl{constructor(r,s=[],u,g=new Au,f=[],x,C){this.registry=r,this.path=s,this.key=s.map(M=>typeof M=="string"?`['${M}']`:`[${M}]`).join(""),this.scope=g,this.errors=f,this.expectedType=u,this._scope=x,this.options=C}parse(r,s,u,g,f={}){return s||u?this.concat(s,null,u,g)._parse(r,f):this._parse(r,f)}parseObjectValue(r,s,u,g,f,x={}){return this.concat(s,u,g,f)._parse(r,x)}_parse(r,s){function u(g,f,x){return x==="assert"?new Do(f,[g]):x==="coerce"?new ql(f,[g]):g}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=typeof r[0]=="string"?this.registry[r[0]]:void 0;if(g){let f=g.parse(r,this);if(!f)return null;if(this.expectedType){const x=this.expectedType,C=f.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||C.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string"){if(this.checkSubtype(x,C))return null}else f=u(f,x,s.typeAnnotation||"coerce");else f=u(f,x,s.typeAnnotation||"assert")}if(!(f instanceof Co)&&f.type.kind!=="resolvedImage"&&ju(f)){const x=new Yf(this._scope,this.options);try{f=new Co(f.type,f.evaluate(x))}catch(C){return this.error(C.message),null}}return f}return ql.parse(["to-array",r],this)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,s,u,g){let f=typeof r=="number"?this.path.concat(r):this.path;f=typeof s=="string"?f.concat(s):f;const x=g?this.scope.concat(g):this.scope;return new Xl(this.registry,f,u||null,x,this.errors,this._scope,this.options)}error(r,...s){const u=`${this.key}${s.map(g=>`[${g}]`).join("")}`;this.errors.push(new to(u,r))}checkSubtype(r,s){const u=Gl(r,s);return u&&this.error(u),u}}var zh=Xl;function ju(l){if(l instanceof Zi)return ju(l.boundExpression);if(l instanceof Vs&&l.name==="error"||l instanceof Ph||l instanceof _l||l instanceof jc||l instanceof Oc)return!1;const r=l instanceof ql||l instanceof Do;let s=!0;return l.eachChild(u=>{s=r?s&&ju(u):s&&u instanceof Co}),!!s&&Fc(l)&&Ri(l,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function Po(l,r){const s=l.length-1;let u,g,f=0,x=s,C=0;for(;f<=x;)if(C=Math.floor((f+x)/2),u=l[C],g=l[C+1],u<=r){if(C===s||r<g)return C;f=C+1}else{if(!(u>r))throw new ri("Input is not a number.");x=C-1}return 0}class _a{constructor(r,s,u){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(const[g,f]of u)this.labels.push(g),this.outputs.push(f)}static parse(r,s){if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");const u=s.parse(r[1],1,wr);if(!u)return null;const g=[];let f=null;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);for(let x=1;x<r.length;x+=2){const C=x===1?-1/0:r[x],M=r[x+1],$=x,T=x+1;if(typeof C!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(g.length&&g[g.length-1][0]>=C)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',$);const A=s.parse(M,T,f);if(!A)return null;f=f||A.type,g.push([C,A])}return new _a(f,u,g)}evaluate(r){const s=this.labels,u=this.outputs;if(s.length===1)return u[0].evaluate(r);const g=this.input.evaluate(r);if(g<=s[0])return u[0].evaluate(r);const f=s.length;return g>=s[f-1]?u[f-1].evaluate(r):u[Po(s,g)].evaluate(r)}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){const r=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&r.push(this.labels[s]),r.push(this.outputs[s].serialize());return r}}const Ou=.95047,Bm=1.08883,Lh=4/29,Mo=6/29,S0=3*Mo*Mo,Va=Mo*Mo*Mo,jm=Math.PI/180,Yl=180/Math.PI;function cp(l){return l>Va?Math.pow(l,1/3):l/S0+Lh}function Rd(l){return l>Mo?l*l*l:S0*(l-Lh)}function Jl(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function $h(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function up(l){const r=$h(l.r),s=$h(l.g),u=$h(l.b),g=cp((.4124564*r+.3575761*s+.1804375*u)/Ou),f=cp((.2126729*r+.7151522*s+.072175*u)/1);return{l:116*f-16,a:500*(g-f),b:200*(f-cp((.0193339*r+.119192*s+.9503041*u)/Bm)),alpha:l.a}}function Fu(l){let r=(l.l+16)/116,s=isNaN(l.a)?r:r+l.a/500,u=isNaN(l.b)?r:r-l.b/200;return r=1*Rd(r),s=Ou*Rd(s),u=Bm*Rd(u),new Ra(Jl(3.2404542*s-1.5371385*r-.4985314*u),Jl(-.969266*s+1.8760108*r+.041556*u),Jl(.0556434*s-.2040259*r+1.0572252*u),l.alpha)}function Id(l,r,s){const u=r-l;return l+s*(u>180||u<-180?u-360*Math.round(u/360):u)}const Uc={forward:up,reverse:Fu,interpolate:function(l,r,s){return{l:Or(l.l,r.l,s),a:Or(l.a,r.a,s),b:Or(l.b,r.b,s),alpha:Or(l.alpha,r.alpha,s)}}},Gc={forward:function(l){const{l:r,a:s,b:u}=up(l),g=Math.atan2(u,s)*Yl;return{h:g<0?g+360:g,c:Math.sqrt(s*s+u*u),l:r,alpha:l.a}},reverse:function(l){const r=l.h*jm,s=l.c;return Fu({l:l.l,a:Math.cos(r)*s,b:Math.sin(r)*s,alpha:l.alpha})},interpolate:function(l,r,s){return{h:Id(l.h,r.h,s),c:Or(l.c,r.c,s),l:Or(l.l,r.l,s),alpha:Or(l.alpha,r.alpha,s)}}};var ro=Object.freeze({__proto__:null,hcl:Gc,lab:Uc});class Yn{constructor(r,s,u,g,f,x){this.type=r,this.operator=s,this.interpolation=u,this.input=g,this.dynamicStops=f,this.labels=[],this.outputs=[];for(const[C,M]of x)this.labels.push(C),this.outputs.push(M)}static interpolationFactor(r,s,u,g){let f=0;if(r.name==="exponential")f=Ql(s,r.base,u,g);else if(r.name==="linear")f=Ql(s,1,u,g);else if(r.name==="cubic-bezier"){const x=r.controlPoints;f=new Sr(x[0],x[1],x[2],x[3]).solve(Ql(s,1,u,g))}return f}static parse(r,s){let[u,g,f,...x]=r;if(!Array.isArray(g)||g.length===0)return s.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const $=g[1];if(typeof $!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:$}}else{if(g[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const $=g.slice(1);if($.length!==4||$.some(T=>typeof T!="number"||T<0||T>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:$}}}if(r.length-1<3)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length-1>3&&(r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(f=s.parse(f,2,wr),!f)return null;const C=[];let M=null;if(u==="interpolate-hcl"||u==="interpolate-lab"?M=bs:s.expectedType&&s.expectedType.kind!=="value"&&(M=s.expectedType),r.length-1==3){const $=s.parse(x[0],3,Ta);return $?new Yn(M,u,g,f,$,C):null}for(let $=0;$<x.length;$+=2){const T=x[$],A=x[$+1],I=$+3,P=$+4;if(typeof T!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(C.length&&C[C.length-1][0]>=T)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const R=s.parse(A,P,M);if(!R)return null;M=M||R.type,C.push([T,R])}return M.kind==="number"||M.kind==="color"||M.kind==="array"&&M.itemType.kind==="number"&&typeof M.N=="number"?new Yn(M,u,g,f,null,C):s.error(`Type ${Qa(M)} is not interpolatable.`)}evaluate(r){let s=this.labels,u=this.outputs;if(this.dynamicStops){const T=this.dynamicStops.evaluate(r);if(T.length%2!=0)throw new ri("Expected an even number of arguments.");s=[],u=[];for(let A=0;A<T.length;A+=2){const I=T[A],P=new Co(wr,T[A+1]);if(typeof I!="number")throw new ri('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.');if(s.length&&s[s.length-1]>=I)throw new ri('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.');s.push(I),u.push(P)}if(s.length===0)throw new ri("Expected at least one input/output pair.")}if(s.length===1)return u[0].evaluate(r);const g=this.input.evaluate(r);if(g<=s[0])return u[0].evaluate(r);const f=s.length;if(g>=s[f-1])return u[f-1].evaluate(r);const x=Po(s,g),C=Yn.interpolationFactor(this.interpolation,g,s[x],s[x+1]),M=u[x].evaluate(r),$=u[x+1].evaluate(r);return this.operator==="interpolate"?Ia[this.type.kind.toLowerCase()](M,$,C):this.operator==="interpolate-hcl"?Gc.reverse(Gc.interpolate(Gc.forward(M),Gc.forward($),C)):Uc.reverse(Uc.interpolate(Uc.forward(M),Uc.forward($),C))}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){let r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,r,this.input.serialize()];if(this.dynamicStops)s.push(this.dynamicStops.serialize());else for(let u=0;u<this.labels.length;u++)s.push(this.labels[u],this.outputs[u].serialize());return s}}function Ql(l,r,s,u){const g=u-s,f=l-s;return g===0?0:r===1?f/g:(Math.pow(r,f)-1)/(Math.pow(r,g)-1)}class Ao{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expectected at least one argument.");let u=null;const g=s.expectedType;g&&g.kind!=="value"&&(u=g);const f=[];for(const C of r.slice(1)){const M=s.parse(C,1+f.length,u,void 0,{typeAnnotation:"omit"});if(!M)return null;u=u||M.type,f.push(M)}const x=g&&f.some(C=>Gl(g,C.type));return new Ao(x?Ta:u,f)}evaluate(r){let s,u=null,g=0;for(const f of this.args){if(g++,u=f.evaluate(r),u&&u instanceof Ai&&!u.available&&(s||(s=u),u=null,g===this.args.length))return s;if(u!==null)break}return u}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=["coalesce"];return this.eachChild(s=>{r.push(s.serialize())}),r}}class ko{constructor(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const s of this.bindings)r(s[1]);r(this.result)}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const u=[];for(let f=1;f<r.length-1;f+=2){const x=r[f];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,f);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",f);const C=s.parse(r[f+1],f+1);if(!C)return null;u.push([x,C])}const g=s.parse(r[r.length-1],r.length-1,s.expectedType,u);return g?new ko(u,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const r=["let"];for(const[s,u]of this.bindings)r.push(s,u.serialize());return r.push(this.result.serialize()),r}}class ec{constructor(r,s,u){this.type=r,this.index=s,this.input=u}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,wr),g=s.parse(r[2],2,Pn(s.expectedType||Ta));return u&&g?new ec(g.type.itemType,u,g):null}evaluate(r){const s=this.index.evaluate(r),u=this.input.evaluate(r);if(s<0)throw new ri(`Array index out of bounds: ${s} < 0.`);if(s>u.length-1)throw new ri(`Array index out of bounds: ${s} > ${u.length-1}.`);if(s===Math.floor(s))return u[s];const g=Math.floor(s),f=Math.ceil(s),x=u[g],C=u[f];if(typeof x!="number"||typeof C!="number")throw new ri(`Cannot interpolate between non-number values at index ${s}.`);const M=s-g;return x*(1-M)+C*M}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class dp{constructor(r,s){this.type=va,this.needle=r,this.haystack=s}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,Ta),g=s.parse(r[2],2,Ta);return u&&g?Zf(u.type,[va,za,wr,Fs,Ta])?new dp(u,g):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qa(u.type)} instead`):null}evaluate(r){const s=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(u==null)return!1;if(!Lc(s,["boolean","string","number","null"]))throw new ri(`Expected first argument to be of type boolean, string, number or null, but found ${Qa(wn(s))} instead.`);if(!Lc(u,["string","array"]))throw new ri(`Expected second argument to be of type array or string, but found ${Qa(wn(u))} instead.`);return u.indexOf(s)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class zd{constructor(r,s,u){this.type=wr,this.needle=r,this.haystack=s,this.fromIndex=u}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,Ta),g=s.parse(r[2],2,Ta);if(!u||!g)return null;if(!Zf(u.type,[va,za,wr,Fs,Ta]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qa(u.type)} instead`);if(r.length===4){const f=s.parse(r[3],3,wr);return f?new zd(u,g,f):null}return new zd(u,g)}evaluate(r){const s=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!Lc(s,["boolean","string","number","null"]))throw new ri(`Expected first argument to be of type boolean, string, number or null, but found ${Qa(wn(s))} instead.`);if(!Lc(u,["string","array"]))throw new ri(`Expected second argument to be of type array or string, but found ${Qa(wn(u))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(r);return u.indexOf(s,g)}return u.indexOf(s)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Nh{constructor(r,s,u,g,f,x){this.inputType=r,this.type=s,this.input=u,this.cases=g,this.outputs=f,this.otherwise=x}static parse(r,s){if(r.length<5)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return s.error("Expected an even number of arguments.");let u,g;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);const f={},x=[];for(let $=2;$<r.length-1;$+=2){let T=r[$];const A=r[$+1];Array.isArray(T)||(T=[T]);const I=s.concat($);if(T.length===0)return I.error("Expected at least one branch label.");for(const R of T){if(typeof R!="number"&&typeof R!="string")return I.error("Branch labels must be numbers or strings.");if(typeof R=="number"&&Math.abs(R)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof R=="number"&&Math.floor(R)!==R)return I.error("Numeric branch labels must be integer values.");if(u){if(I.checkSubtype(u,wn(R)))return null}else u=wn(R);if(f[String(R)]!==void 0)return I.error("Branch labels must be unique.");f[String(R)]=x.length}const P=s.parse(A,$,g);if(!P)return null;g=g||P.type,x.push(P)}const C=s.parse(r[1],1,Ta);if(!C)return null;const M=s.parse(r[r.length-1],r.length-1,g);return M?C.type.kind!=="value"&&s.concat(1).checkSubtype(u,C.type)?null:new Nh(u,g,C,f,x,M):null}evaluate(r){const s=this.input.evaluate(r);return(wn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),u=[],g={};for(const x of s){const C=g[this.cases[x]];C===void 0?(g[this.cases[x]]=u.length,u.push([this.cases[x],[x]])):u[C][1].push(x)}const f=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,C]of u)r.push(C.length===1?f(C[0]):C.map(f)),r.push(this.outputs[x].serialize());return r.push(this.otherwise.serialize()),r}}class ns{constructor(r,s,u){this.type=r,this.branches=s,this.otherwise=u}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return s.error("Expected an odd number of arguments.");let u;s.expectedType&&s.expectedType.kind!=="value"&&(u=s.expectedType);const g=[];for(let x=1;x<r.length-1;x+=2){const C=s.parse(r[x],x,va);if(!C)return null;const M=s.parse(r[x+1],x+1,u);if(!M)return null;g.push([C,M]),u=u||M.type}const f=s.parse(r[r.length-1],r.length-1,u);return f?new ns(u,g,f):null}evaluate(r){for(const[s,u]of this.branches)if(s.evaluate(r))return u.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[s,u]of this.branches)r(s),r(u);r(this.otherwise)}outputDefined(){return this.branches.every(([r,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["case"];return this.eachChild(s=>{r.push(s.serialize())}),r}}class Jn{constructor(r,s,u,g){this.type=r,this.input=s,this.beginIndex=u,this.endIndex=g}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,Ta),g=s.parse(r[2],2,wr);if(!u||!g)return null;if(!Zf(u.type,[Pn(Ta),za,Ta]))return s.error(`Expected first argument to be of type array or string, but found ${Qa(u.type)} instead`);if(r.length===4){const f=s.parse(r[3],3,wr);return f?new Jn(u.type,u,g,f):null}return new Jn(u.type,u,g)}evaluate(r){const s=this.input.evaluate(r),u=this.beginIndex.evaluate(r);if(!Lc(s,["string","array"]))throw new ri(`Expected first argument to be of type array or string, but found ${Qa(wn(s))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(r);return s.slice(u,g)}return s.slice(u)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Tn(l,r){return l==="=="||l==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Hc(l,r,s,u){return u.compare(r,s)===0}function Is(l,r,s){const u=l!=="=="&&l!=="!=";return class ij{constructor(f,x,C){this.type=va,this.lhs=f,this.rhs=x,this.collator=C,this.hasUntypedArgument=f.type.kind==="value"||x.type.kind==="value"}static parse(f,x){if(f.length!==3&&f.length!==4)return x.error("Expected two or three arguments.");const C=f[0];let M=x.parse(f[1],1,Ta);if(!M)return null;if(!Tn(C,M.type))return x.concat(1).error(`"${C}" comparisons are not supported for type '${Qa(M.type)}'.`);let $=x.parse(f[2],2,Ta);if(!$)return null;if(!Tn(C,$.type))return x.concat(2).error(`"${C}" comparisons are not supported for type '${Qa($.type)}'.`);if(M.type.kind!==$.type.kind&&M.type.kind!=="value"&&$.type.kind!=="value")return x.error(`Cannot compare types '${Qa(M.type)}' and '${Qa($.type)}'.`);u&&(M.type.kind==="value"&&$.type.kind!=="value"?M=new Do($.type,[M]):M.type.kind!=="value"&&$.type.kind==="value"&&($=new Do(M.type,[$])));let T=null;if(f.length===4){if(M.type.kind!=="string"&&$.type.kind!=="string"&&M.type.kind!=="value"&&$.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(T=x.parse(f[3],3,ku),!T)return null}return new ij(M,$,T)}evaluate(f){const x=this.lhs.evaluate(f),C=this.rhs.evaluate(f);if(u&&this.hasUntypedArgument){const M=wn(x),$=wn(C);if(M.kind!==$.kind||M.kind!=="string"&&M.kind!=="number")throw new ri(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${M.kind}, ${$.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const M=wn(x),$=wn(C);if(M.kind!=="string"||$.kind!=="string")return r(f,x,C)}return this.collator?s(f,x,C,this.collator.evaluate(f)):r(f,x,C)}eachChild(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)}outputDefined(){return!0}serialize(){const f=[l];return this.eachChild(x=>{f.push(x.serialize())}),f}}}const Om=Is("==",function(l,r,s){return r===s},Hc),Vu=Is("!=",function(l,r,s){return r!==s},function(l,r,s,u){return!Hc(0,r,s,u)}),T0=Is("<",function(l,r,s){return r<s},function(l,r,s,u){return u.compare(r,s)<0}),E0=Is(">",function(l,r,s){return r>s},function(l,r,s,u){return u.compare(r,s)>0}),Bh=Is("<=",function(l,r,s){return r<=s},function(l,r,s,u){return u.compare(r,s)<=0}),jh=Is(">=",function(l,r,s){return r>=s},function(l,r,s,u){return u.compare(r,s)>=0});class Ld{constructor(r,s,u,g,f,x){this.type=za,this.number=r,this.locale=s,this.currency=u,this.unit=g,this.minFractionDigits=f,this.maxFractionDigits=x}static parse(r,s){if(r.length!==3)return s.error("Expected two arguments.");const u=s.parse(r[1],1,wr);if(!u)return null;const g=r[2];if(typeof g!="object"||Array.isArray(g))return s.error("NumberFormat options argument must be an object.");let f=null;if(g.locale&&(f=s.parseObjectValue(g.locale,2,"locale",za),!f))return null;let x=null;if(g.currency&&(x=s.parseObjectValue(g.currency,2,"currency",za),!x))return null;let C=null;if(g.unit&&(C=s.parseObjectValue(g.unit,2,"unit",za),!C))return null;let M=null;if(g["min-fraction-digits"]&&(M=s.parseObjectValue(g["min-fraction-digits"],2,"min-fraction-digits",wr),!M))return null;let $=null;return g["max-fraction-digits"]&&($=s.parseObjectValue(g["max-fraction-digits"],2,"max-fraction-digits",wr),!$)?null:new Ld(u,f,x,C,M,$)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(r):void 0,unit:this.unit?this.unit.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.unit&&r(this.unit),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.unit&&(r.unit=this.unit.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]}}class Uu{constructor(r){this.type=wr,this.input=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const u=s.parse(r[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Qa(u.type)} instead.`):new Uu(u):null}evaluate(r){const s=this.input.evaluate(r);if(typeof s=="string"||Array.isArray(s))return s.length;throw new ri(`Expected value to be of type string or array, but found ${Qa(wn(s))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){const r=["length"];return this.eachChild(s=>{r.push(s.serialize())}),r}}function Oh(l){return function(){l=1831565813+(l|=0)|0;let r=Math.imul(l^l>>>15,1|l);return r=r+Math.imul(r^r>>>7,61|r)^r,((r^r>>>14)>>>0)/4294967296}}const Ro={"==":Om,"!=":Vu,">":E0,"<":T0,">=":jh,"<=":Bh,array:Do,at:ec,boolean:Do,case:ns,coalesce:Ao,collator:Ph,format:vl,image:Td,in:dp,"index-of":zd,interpolate:Yn,"interpolate-hcl":Yn,"interpolate-lab":Yn,length:Uu,let:ko,literal:Co,match:Nh,number:Do,"number-format":Ld,object:Do,slice:Jn,step:_a,string:Do,"to-boolean":ql,"to-color":ql,"to-number":ql,"to-string":ql,var:Zi,within:_l,distance:jc,config:Oc};function Sl(l,[r,s,u,g]){r=r.evaluate(l),s=s.evaluate(l),u=u.evaluate(l);const f=g?g.evaluate(l):1,x=Ru(r,s,u,f);if(x)throw new ri(x);return new Ra(r/255*f,s/255*f,u/255*f,f)}function tc(l,[r,s,u,g]){r=r.evaluate(l),s=s.evaluate(l),u=u.evaluate(l);const f=g?g.evaluate(l):1,x=function($,T,A,I){return typeof $=="number"&&$>=0&&$<=360?typeof T=="number"&&T>=0&&T<=100&&typeof A=="number"&&A>=0&&A<=100?I===void 0||typeof I=="number"&&I>=0&&I<=1?null:`Invalid hsla value [${[$,T,A,I].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof I=="number"?[$,T,A,I]:[$,T,A]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof I=="number"?[$,T,A,I]:[$,T,A]).join(", ")}]: 'h' must be between 0 and 360.`}(r,s,u,f);if(x)throw new ri(x);const C=`hsla(${r}, ${s}%, ${u}%, ${f})`,M=Ra.parse(C);if(!M)throw new ri(`Failed to parse HSLA color: ${C}`);return M}function tl(l,r){return l in r}function $d(l,r){const s=r[l];return s===void 0?null:s}function Gs(l){return{type:l}}function Gu(l){return{result:"success",value:l}}function Io(l){return{result:"error",value:l}}function rc(l,r){return!!l&&!!l.parameters&&l.parameters.indexOf(r)>-1}function xi(l){return l["property-type"]==="data-driven"}function Hu(l){return rc(l.expression,"measure-light")}function Fm(l){return rc(l.expression,"zoom")}function Vm(l){return!!l.expression&&l.expression.interpolated}function hp(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)}function C0(l){return l}function Ii(l,r){const s=r.type==="color",u=l.stops&&typeof l.stops[0][0]=="object",g=u||!(u||l.property!==void 0),f=l.type||(Vm(r)?"exponential":"interval");if(s&&((l=wd({},l)).stops&&(l.stops=l.stops.map($=>[$[0],Ra.parse($[1])])),l.default=Ra.parse(l.default?l.default:r.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!ro[l.colorSpace])throw new Error(`Unknown color space: ${l.colorSpace}`);let x,C,M;if(f==="exponential")x=Vh;else if(f==="interval")x=Nd;else if(f==="categorical"){x=Fh,C=Object.create(null);for(const $ of l.stops)C[$[0]]=$[1];M=typeof l.stops[0][0]}else{if(f!=="identity")throw new Error(`Unknown function type "${f}"`);x=ac}if(u){const $={},T=[];for(let P=0;P<l.stops.length;P++){const R=l.stops[P],j=R[0].zoom;$[j]===void 0&&($[j]={zoom:j,type:l.type,property:l.property,default:l.default,stops:[]},T.push(j)),$[j].stops.push([R[0].value,R[1]])}const A=[];for(const P of T)A.push([$[P].zoom,Ii($[P],r)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:Yn.interpolationFactor.bind(void 0,I),zoomStops:A.map(P=>P[0]),evaluate:({zoom:P},R)=>Vh({stops:A,base:l.base},r,P).evaluate(P,R)}}if(g){const $=f==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:$,interpolationFactor:Yn.interpolationFactor.bind(void 0,$),zoomStops:l.stops.map(T=>T[0]),evaluate:({zoom:T})=>x(l,r,T,C,M)}}return{kind:"source",evaluate($,T){const A=T&&T.properties?T.properties[l.property]:void 0;return A===void 0?qu(l.default,r.default):x(l,r,A,C,M)}}}function qu(l,r,s){return l!==void 0?l:r!==void 0?r:s!==void 0?s:void 0}function Fh(l,r,s,u,g){return qu(typeof s===g?u[s]:void 0,l.default,r.default)}function Nd(l,r,s){if(zu(s)!=="number")return qu(l.default,r.default);const u=l.stops.length;if(u===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[u-1][0])return l.stops[u-1][1];const g=Po(l.stops.map(f=>f[0]),s);return l.stops[g][1]}function Vh(l,r,s){const u=l.base!==void 0?l.base:1;if(zu(s)!=="number")return qu(l.default,r.default);const g=l.stops.length;if(g===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[g-1][0])return l.stops[g-1][1];const f=Po(l.stops.map(T=>T[0]),s),x=function(T,A,I,P){const R=P-I,j=T-I;return R===0?0:A===1?j/R:(Math.pow(A,j)-1)/(Math.pow(A,R)-1)}(s,u,l.stops[f][0],l.stops[f+1][0]),C=l.stops[f][1],M=l.stops[f+1][1];let $=Ia[r.type]||C0;if(l.colorSpace&&l.colorSpace!=="rgb"){const T=ro[l.colorSpace];$=(A,I)=>T.reverse(T.interpolate(T.forward(A),T.forward(I),x))}return typeof C.evaluate=="function"?{evaluate(...T){const A=C.evaluate.apply(void 0,T),I=M.evaluate.apply(void 0,T);if(A!==void 0&&I!==void 0)return $(A,I,x)}}:$(C,M,x)}function ac(l,r,s){return r.type==="color"?s=Ra.parse(s):r.type==="formatted"?s=Mi.fromString(s.toString()):r.type==="resolvedImage"?s=Ai.build(s.toString()):zu(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0),qu(s,l.default,r.default)}Vs.register(Ro,{error:[{kind:"error"},[za],(l,[r])=>{throw new ri(r.evaluate(l))}],typeof:[za,[Ta],(l,[r])=>Qa(wn(r.evaluate(l)))],"to-rgba":[Pn(wr,4),[bs],(l,[r])=>r.evaluate(l).toRenderColor(null).toArray()],"to-hsla":[Pn(wr,4),[bs],(l,[r])=>r.evaluate(l).toRenderColor(null).toHslaArray()],rgb:[bs,[wr,wr,wr],Sl],rgba:[bs,[wr,wr,wr,wr],Sl],hsl:[bs,[wr,wr,wr],tc],hsla:[bs,[wr,wr,wr,wr],tc],has:{type:va,overloads:[[[za],(l,[r])=>tl(r.evaluate(l),l.properties())],[[za,xl],(l,[r,s])=>tl(r.evaluate(l),s.evaluate(l))]]},get:{type:Ta,overloads:[[[za],(l,[r])=>$d(r.evaluate(l),l.properties())],[[za,xl],(l,[r,s])=>$d(r.evaluate(l),s.evaluate(l))]]},"feature-state":[Ta,[za],(l,[r])=>$d(r.evaluate(l),l.featureState||{})],properties:[xl,[],l=>l.properties()],"geometry-type":[za,[],l=>l.geometryType()],id:[Ta,[],l=>l.id()],zoom:[wr,[],l=>l.globals.zoom],pitch:[wr,[],l=>l.globals.pitch||0],"distance-from-center":[wr,[],l=>l.distanceFromCenter()],"measure-light":[wr,[za],(l,[r])=>l.measureLight(r.evaluate(l))],"heatmap-density":[wr,[],l=>l.globals.heatmapDensity||0],"line-progress":[wr,[],l=>l.globals.lineProgress||0],"raster-value":[wr,[],l=>l.globals.rasterValue||0],"raster-particle-speed":[wr,[],l=>l.globals.rasterParticleSpeed||0],"sky-radial-progress":[wr,[],l=>l.globals.skyRadialProgress||0],accumulated:[Ta,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[wr,Gs(wr),(l,r)=>{let s=0;for(const u of r)s+=u.evaluate(l);return s}],"*":[wr,Gs(wr),(l,r)=>{let s=1;for(const u of r)s*=u.evaluate(l);return s}],"-":{type:wr,overloads:[[[wr,wr],(l,[r,s])=>r.evaluate(l)-s.evaluate(l)],[[wr],(l,[r])=>-r.evaluate(l)]]},"/":[wr,[wr,wr],(l,[r,s])=>r.evaluate(l)/s.evaluate(l)],"%":[wr,[wr,wr],(l,[r,s])=>r.evaluate(l)%s.evaluate(l)],ln2:[wr,[],()=>Math.LN2],pi:[wr,[],()=>Math.PI],e:[wr,[],()=>Math.E],"^":[wr,[wr,wr],(l,[r,s])=>Math.pow(r.evaluate(l),s.evaluate(l))],sqrt:[wr,[wr],(l,[r])=>Math.sqrt(r.evaluate(l))],log10:[wr,[wr],(l,[r])=>Math.log(r.evaluate(l))/Math.LN10],ln:[wr,[wr],(l,[r])=>Math.log(r.evaluate(l))],log2:[wr,[wr],(l,[r])=>Math.log(r.evaluate(l))/Math.LN2],sin:[wr,[wr],(l,[r])=>Math.sin(r.evaluate(l))],cos:[wr,[wr],(l,[r])=>Math.cos(r.evaluate(l))],tan:[wr,[wr],(l,[r])=>Math.tan(r.evaluate(l))],asin:[wr,[wr],(l,[r])=>Math.asin(r.evaluate(l))],acos:[wr,[wr],(l,[r])=>Math.acos(r.evaluate(l))],atan:[wr,[wr],(l,[r])=>Math.atan(r.evaluate(l))],min:[wr,Gs(wr),(l,r)=>Math.min(...r.map(s=>s.evaluate(l)))],max:[wr,Gs(wr),(l,r)=>Math.max(...r.map(s=>s.evaluate(l)))],abs:[wr,[wr],(l,[r])=>Math.abs(r.evaluate(l))],round:[wr,[wr],(l,[r])=>{const s=r.evaluate(l);return s<0?-Math.round(-s):Math.round(s)}],floor:[wr,[wr],(l,[r])=>Math.floor(r.evaluate(l))],ceil:[wr,[wr],(l,[r])=>Math.ceil(r.evaluate(l))],"filter-==":[va,[za,Ta],(l,[r,s])=>l.properties()[r.value]===s.value],"filter-id-==":[va,[Ta],(l,[r])=>l.id()===r.value],"filter-type-==":[va,[za],(l,[r])=>l.geometryType()===r.value],"filter-<":[va,[za,Ta],(l,[r,s])=>{const u=l.properties()[r.value],g=s.value;return typeof u==typeof g&&u<g}],"filter-id-<":[va,[Ta],(l,[r])=>{const s=l.id(),u=r.value;return typeof s==typeof u&&s<u}],"filter->":[va,[za,Ta],(l,[r,s])=>{const u=l.properties()[r.value],g=s.value;return typeof u==typeof g&&u>g}],"filter-id->":[va,[Ta],(l,[r])=>{const s=l.id(),u=r.value;return typeof s==typeof u&&s>u}],"filter-<=":[va,[za,Ta],(l,[r,s])=>{const u=l.properties()[r.value],g=s.value;return typeof u==typeof g&&u<=g}],"filter-id-<=":[va,[Ta],(l,[r])=>{const s=l.id(),u=r.value;return typeof s==typeof u&&s<=u}],"filter->=":[va,[za,Ta],(l,[r,s])=>{const u=l.properties()[r.value],g=s.value;return typeof u==typeof g&&u>=g}],"filter-id->=":[va,[Ta],(l,[r])=>{const s=l.id(),u=r.value;return typeof s==typeof u&&s>=u}],"filter-has":[va,[Ta],(l,[r])=>r.value in l.properties()],"filter-has-id":[va,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[va,[Pn(za)],(l,[r])=>r.value.indexOf(l.geometryType())>=0],"filter-id-in":[va,[Pn(Ta)],(l,[r])=>r.value.indexOf(l.id())>=0],"filter-in-small":[va,[za,Pn(Ta)],(l,[r,s])=>s.value.indexOf(l.properties()[r.value])>=0],"filter-in-large":[va,[za,Pn(Ta)],(l,[r,s])=>function(u,g,f,x){for(;f<=x;){const C=f+x>>1;if(g[C]===u)return!0;g[C]>u?x=C-1:f=C+1}return!1}(l.properties()[r.value],s.value,0,s.value.length-1)],all:{type:va,overloads:[[[va,va],(l,[r,s])=>r.evaluate(l)&&s.evaluate(l)],[Gs(va),(l,r)=>{for(const s of r)if(!s.evaluate(l))return!1;return!0}]]},any:{type:va,overloads:[[[va,va],(l,[r,s])=>r.evaluate(l)||s.evaluate(l)],[Gs(va),(l,r)=>{for(const s of r)if(s.evaluate(l))return!0;return!1}]]},"!":[va,[va],(l,[r])=>!r.evaluate(l)],"is-supported-script":[va,[za],(l,[r])=>{const s=l.globals&&l.globals.isSupportedScript;return!s||s(r.evaluate(l))}],upcase:[za,[za],(l,[r])=>r.evaluate(l).toUpperCase()],downcase:[za,[za],(l,[r])=>r.evaluate(l).toLowerCase()],concat:[za,Gs(Ta),(l,r)=>r.map(s=>Jo(s.evaluate(l))).join("")],"resolved-locale":[za,[ku],(l,[r])=>r.evaluate(l).resolvedLocale()],random:[wr,[wr,wr,Ta],(l,r)=>{const[s,u,g]=r.map(x=>x.evaluate(l));if(s>u||s===u)return s;let f;if(typeof g=="string")f=function(x){let C=0;if(x.length===0)return C;for(let M=0;M<x.length;M++)C=(C<<5)-C+x.charCodeAt(M),C|=0;return C}(g);else{if(typeof g!="number")throw new ri(`Invalid seed input: ${g}`);f=g}return s+Oh(f)()*(u-s)}]});class qc{constructor(r,s,u,g){this.expression=r,this._warningHistory={},this._evaluator=new Yf(u,g),this._defaultValue=s?function(f){return f.type==="color"&&(hp(f.default)||Array.isArray(f.default))?new Ra(0,0,0,0):f.type==="color"?Ra.parse(f.default)||null:f.default===void 0?null:f.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null,this.configDependencies=Vc(r)}evaluateWithoutErrorHandling(r,s,u,g,f,x,C,M){return this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=u,this._evaluator.canonical=g||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=x,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=M||null,this.expression.evaluate(this._evaluator)}evaluate(r,s,u,g,f,x,C,M){this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=u||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=x||null,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=M||null;try{const $=this.expression.evaluate(this._evaluator);if($==null||typeof $=="number"&&$!=$)return this._defaultValue;if(this._enumValues&&!($ in this._enumValues))throw new ri(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify($)} instead.`);return $}catch($){return this._warningHistory[$.message]||(this._warningHistory[$.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${$.message}`)),this._defaultValue}}}function fp(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in Ro}function Bd(l,r,s,u){const g=new zh(Ro,[],r?function(x){const C={color:bs,string:za,number:wr,enum:za,boolean:va,formatted:Eo,resolvedImage:zc};return x.type==="array"?Pn(C[x.value]||Ta,x.length):C[x.type]}(r):void 0,void 0,void 0,s,u),f=g.parse(l,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Gu(new qc(f,r,s,u)):Io(g.errors)}class Um{constructor(r,s,u,g){this.kind=r,this._styleExpression=s,this.isLightConstant=u,this.isLineProgressConstant=g,this.isStateDependent=r!=="constant"&&!Rs(s.expression),this.configDependencies=Vc(s.expression)}evaluateWithoutErrorHandling(r,s,u,g,f,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,u,g,f,x)}evaluate(r,s,u,g,f,x){return this._styleExpression.evaluate(r,s,u,g,f,x)}}class Wu{constructor(r,s,u,g,f,x){this.kind=r,this.zoomStops=u,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!Rs(s.expression),this.isLightConstant=f,this.isLineProgressConstant=x,this.configDependencies=Vc(s.expression),this.interpolationType=g}evaluateWithoutErrorHandling(r,s,u,g,f,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,u,g,f,x)}evaluate(r,s,u,g,f,x){return this._styleExpression.evaluate(r,s,u,g,f,x)}interpolationFactor(r,s,u){return this.interpolationType?Yn.interpolationFactor(this.interpolationType,r,s,u):0}}function nc(l,r,s,u){if((l=Bd(l,r,s,u)).result==="error")return l;const g=l.value.expression,f=Fc(g);if(!f&&!xi(r))return Io([new to("","data expressions not supported")]);const x=Ri(g,["zoom","pitch","distance-from-center"]);if(!x&&!Fm(r))return Io([new to("","zoom expressions not supported")]);const C=Ri(g,["measure-light"]);if(!C&&!Hu(r))return Io([new to("","measure-light expression not supported")]);const M=Ri(g,["line-progress"]);if(!M&&!function(A){return rc(A.expression,"line-progress")}(r))return Io([new to("","line-progress expression not supported")]);const $=r.expression&&r.expression.relaxZoomRestriction,T=Ku(g);return T||x||$?T instanceof to?Io([T]):T instanceof Yn&&!Vm(r)?Io([new to("",'"interpolate" expressions cannot be used with this property')]):Gu(T?new Wu(f&&M?"camera":"composite",l.value,T.labels,T instanceof Yn?T.interpolation:void 0,C,M):new Um(f&&M?"constant":"source",l.value,C,M)):Io([new to("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class jd{constructor(r,s){this._parameters=r,this._specification=s,wd(this,Ii(this._parameters,this._specification))}static deserialize(r){return new jd(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Ku(l){let r=null;if(l instanceof ko)r=Ku(l.result);else if(l instanceof Ao){for(const s of l.args)if(r=Ku(s),r)break}else(l instanceof _a||l instanceof Yn)&&l.input instanceof Vs&&l.input.name==="zoom"&&(r=l);return r instanceof to||l.eachChild(s=>{const u=Ku(s);u instanceof to?r=u:r&&u&&r!==u&&(r=new to("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}var pp,Zu,D0=function(){if(Zu)return pp;Zu=1,pp=r;var l=3;function r(s,u,g){var f=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var x=new Int32Array(this.arrayBuffer);s=x[0],this.d=(u=x[1])+2*(g=x[2]);for(var C=0;C<this.d*this.d;C++){var M=x[l+C],$=x[l+C+1];f.push(M===$?null:x.subarray(M,$))}var T=x[l+f.length+1];this.keys=x.subarray(x[l+f.length],T),this.bboxes=x.subarray(T),this.insert=this._insertReadonly}else{this.d=u+2*g;for(var A=0;A<this.d*this.d;A++)f.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=s,this.padding=g,this.scale=u/s,this.uid=0;var I=g/u*s;this.min=-I,this.max=s+I}return r.prototype.insert=function(s,u,g,f,x){this._forEachCell(u,g,f,x,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(f),this.bboxes.push(x)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(s,u,g,f,x,C){this.cells[x].push(C)},r.prototype.query=function(s,u,g,f,x){var C=this.min,M=this.max;if(s<=C&&u<=C&&M<=g&&M<=f&&!x)return Array.prototype.slice.call(this.keys);var $=[];return this._forEachCell(s,u,g,f,this._queryCell,$,{},x),$},r.prototype._queryCell=function(s,u,g,f,x,C,M,$){var T=this.cells[x];if(T!==null)for(var A=this.keys,I=this.bboxes,P=0;P<T.length;P++){var R=T[P];if(M[R]===void 0){var j=4*R;($?$(I[j+0],I[j+1],I[j+2],I[j+3]):s<=I[j+2]&&u<=I[j+3]&&g>=I[j+0]&&f>=I[j+1])?(M[R]=!0,C.push(A[R])):M[R]=!1}}},r.prototype._forEachCell=function(s,u,g,f,x,C,M,$){for(var T=this._convertToCellCoord(s),A=this._convertToCellCoord(u),I=this._convertToCellCoord(g),P=this._convertToCellCoord(f),R=T;R<=I;R++)for(var j=A;j<=P;j++){var W=this.d*j+R;if((!$||$(this._convertFromCellCoord(R),this._convertFromCellCoord(j),this._convertFromCellCoord(R+1),this._convertFromCellCoord(j+1)))&&x.call(this,s,u,g,f,W,C,M,$))return}},r.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},r.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,u=l+this.cells.length+1+1,g=0,f=0;f<this.cells.length;f++)g+=this.cells[f].length;var x=new Int32Array(u+g+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;for(var C=u,M=0;M<s.length;M++){var $=s[M];x[l+M]=C,x.set($,C),C+=$.length}return x[l+s.length]=C,x.set(this.keys,C),x[l+s.length+1]=C+=this.keys.length,x.set(this.bboxes,C),C+=this.bboxes.length,x.buffer},pp}(),ic=k(D0);const Xu={};function Tr(l,r,s={}){Object.defineProperty(l,"_classRegistryKey",{value:r,writable:!1}),Xu[r]={klass:l,omit:s.omit||[]}}Tr(Object,"Object"),ic.serialize=function(l,r){const s=l.toArrayBuffer();return r&&r.add(s),{buffer:s}},ic.deserialize=function(l){return new ic(l.buffer)},Object.defineProperty(ic,"name",{value:"Grid"}),Tr(ic,"Grid"),typeof DOMMatrix<"u"&&Tr(DOMMatrix,"DOMMatrix"),Tr(Ra,"Color"),Tr(Error,"Error"),Tr(Mi,"Formatted"),Tr(Hl,"FormattedSection"),Tr(xd,"AJAXError"),Tr(Ai,"ResolvedImage"),Tr(jd,"StylePropertyFunction"),Tr(qc,"StyleExpression",{omit:["_evaluator"]}),Tr(Yo,"ImageIdWithOptions"),Tr(Wu,"ZoomDependentExpression"),Tr(Um,"ZoomConstantExpression"),Tr(Vs,"CompoundExpression",{omit:["_evaluate"]});for(const l in Ro)Xu[Ro[l]._classRegistryKey]||Tr(Ro[l],`Expression${l}`);function Od(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function Gm(l){return self.ImageBitmap&&l instanceof ImageBitmap}function Ss(l,r){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp)return l;if(Od(l)||Gm(l))return r&&r.add(l),l;if(ArrayBuffer.isView(l))return r&&r.add(l.buffer),l;if(l instanceof ImageData)return r&&r.add(l.data.buffer),l;if(Array.isArray(l)){const s=[];for(const u of l)s.push(Ss(u,r));return s}if(l instanceof Map){const s={$name:"Map"};for(const[u,g]of l.entries())s[u]=Ss(g);return s}if(l instanceof Set){const s={$name:"Set"};let u=0;for(const g of l.values())s[++u]=Ss(g);return s}if(typeof l=="object"){const s=l.constructor,u=s._classRegistryKey;if(!u)throw new Error(`Can't serialize object of unregistered class "${u}".`);const g=s.serialize?s.serialize(l,r):{};if(!s.serialize){for(const f in l)l.hasOwnProperty(f)&&(Xu[u].omit.indexOf(f)>=0||(g[f]=Ss(l[f],r)));l instanceof Error&&(g.message=l.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(g.$name=u),g}throw new Error("can't serialize object of type "+typeof l)}function Wc(l){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||Od(l)||Gm(l)||ArrayBuffer.isView(l)||l instanceof ImageData)return l;if(Array.isArray(l))return l.map(Wc);if(typeof l=="object"){const r=l.$name||"Object";if(r==="Map"){const g=new Map;for(const f of Object.keys(l))f!=="$name"&&g.set(f,Wc(l[f]));return g}if(r==="Set"){const g=new Set;for(const f of Object.keys(l))f!=="$name"&&g.add(Wc(l[f]));return g}const{klass:s}=Xu[r];if(!s)throw new Error(`Can't deserialize unregistered class "${r}".`);if(s.deserialize)return s.deserialize(l);const u=Object.create(s.prototype);for(const g of Object.keys(l))g!=="$name"&&(u[g]=Wc(l[g]));return u}throw new Error("can't deserialize object of type "+typeof l)}const Ir={"Latin-1 Supplement":l=>l>=128&&l<=255,Arabic:l=>l>=1536&&l<=1791,"Arabic Supplement":l=>l>=1872&&l<=1919,"Arabic Extended-A":l=>l>=2208&&l<=2303,"Hangul Jamo":l=>l>=4352&&l<=4607,"Unified Canadian Aboriginal Syllabics":l=>l>=5120&&l<=5759,Khmer:l=>l>=6016&&l<=6143,"Unified Canadian Aboriginal Syllabics Extended":l=>l>=6320&&l<=6399,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"CJK Radicals Supplement":l=>l>=11904&&l<=12031,"Kangxi Radicals":l=>l>=12032&&l<=12255,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Bopomofo:l=>l>=12544&&l<=12591,"Hangul Compatibility Jamo":l=>l>=12592&&l<=12687,Kanbun:l=>l>=12688&&l<=12703,"Bopomofo Extended":l=>l>=12704&&l<=12735,"CJK Strokes":l=>l>=12736&&l<=12783,"Katakana Phonetic Extensions":l=>l>=12784&&l<=12799,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"CJK Unified Ideographs Extension A":l=>l>=13312&&l<=19903,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Yi Syllables":l=>l>=40960&&l<=42127,"Yi Radicals":l=>l>=42128&&l<=42191,"Hangul Jamo Extended-A":l=>l>=43360&&l<=43391,"Hangul Syllables":l=>l>=44032&&l<=55215,"Hangul Jamo Extended-B":l=>l>=55216&&l<=55295,"Private Use Area":l=>l>=57344&&l<=63743,"CJK Compatibility Ideographs":l=>l>=63744&&l<=64255,"Arabic Presentation Forms-A":l=>l>=64336&&l<=65023,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Arabic Presentation Forms-B":l=>l>=65136&&l<=65279,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519,Osage:l=>l>=66736&&l<=66815,"CJK Unified Ideographs Extension B":l=>l>=131072&&l<=173791};function Tl(l){for(const r of l)if(rl(r.charCodeAt(0)))return!0;return!1}function mp(l){for(const r of l)if(!gp(r.charCodeAt(0)))return!1;return!0}function gp(l){return!(Ir.Arabic(l)||Ir["Arabic Supplement"](l)||Ir["Arabic Extended-A"](l)||Ir["Arabic Presentation Forms-A"](l)||Ir["Arabic Presentation Forms-B"](l))}function rl(l){return!(l!==746&&l!==747&&(l<4352||!(Ir["Bopomofo Extended"](l)||Ir.Bopomofo(l)||Ir["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||Ir["CJK Compatibility Ideographs"](l)||Ir["CJK Compatibility"](l)||Ir["CJK Radicals Supplement"](l)||Ir["CJK Strokes"](l)||!(!Ir["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||Ir["CJK Unified Ideographs Extension A"](l)||Ir["CJK Unified Ideographs"](l)||Ir["Enclosed CJK Letters and Months"](l)||Ir["Hangul Compatibility Jamo"](l)||Ir["Hangul Jamo Extended-A"](l)||Ir["Hangul Jamo Extended-B"](l)||Ir["Hangul Jamo"](l)||Ir["Hangul Syllables"](l)||Ir.Hiragana(l)||Ir["Ideographic Description Characters"](l)||Ir.Kanbun(l)||Ir["Kangxi Radicals"](l)||Ir["Katakana Phonetic Extensions"](l)||Ir.Katakana(l)&&l!==12540||!(!Ir["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!Ir["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||Ir["Unified Canadian Aboriginal Syllabics"](l)||Ir["Unified Canadian Aboriginal Syllabics Extended"](l)||Ir["Vertical Forms"](l)||Ir["Yijing Hexagram Symbols"](l)||Ir["Yi Syllables"](l)||Ir["Yi Radicals"](l))))}function El(l){return!(rl(l)||function(r){return!!(Ir["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Ir["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Ir["Letterlike Symbols"](r)||Ir["Number Forms"](r)||Ir["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Ir["Control Pictures"](r)&&r!==9251||Ir["Optical Character Recognition"](r)||Ir["Enclosed Alphanumerics"](r)||Ir["Geometric Shapes"](r)||Ir["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Ir["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Ir["CJK Symbols and Punctuation"](r)||Ir.Katakana(r)||Ir["Private Use Area"](r)||Ir["CJK Compatibility Forms"](r)||Ir["Small Form Variants"](r)||Ir["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(l))}function Kc(l){return l>=1424&&l<=2303||Ir["Arabic Presentation Forms-A"](l)||Ir["Arabic Presentation Forms-B"](l)}function Uh(l,r){return!(!r&&Kc(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||Ir.Khmer(l))}function yp(l){for(const r of l)if(Kc(r.charCodeAt(0)))return!0;return!1}const Yu="deferred",Hs="loading",xp="loaded";let vp=null,zi="unavailable",al=null;const Fd=function(l){l&&typeof l=="string"&&l.indexOf("NetworkError")>-1&&(zi="error"),vp&&vp(l)};function Vd(){Zc.fire(new eo("pluginStateChange",{pluginStatus:zi,pluginURL:al}))}const Zc=new Rc,nl=function(){return zi},en=function(){if(zi!==Yu||!al)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");zi=Hs,Vd(),al&&Wi({url:al},l=>{l?Fd(l):(zi=xp,Vd())})},rn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>zi===xp||rn.applyArabicShaping!=null,isLoading:()=>zi===Hs,setState(l){zi=l.pluginStatus,al=l.pluginURL},isParsed:()=>rn.applyArabicShaping!=null&&rn.processBidirectionalText!=null&&rn.processStyledBidirectionalText!=null,getPluginURL:()=>al};class Ea{constructor(r,s){this.zoom=r,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.transition=s.transition,this.pitch=s.pitch,this.brightness=s.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(r){return function(s,u){for(const g of s)if(!Uh(g.charCodeAt(0),u))return!1;return!0}(r,rn.isLoaded())}}class sc{constructor(r,s,u,g){this.property=r,this.value=s,this.expression=function(f,x,C,M){if(hp(f))return new jd(f,x);if(fp(f)||Array.isArray(f)&&f.length>0){const $=nc(f,x,C,M);if($.result==="error")throw new Error($.value.map(T=>`${T.key}: ${T.message}`).join(", "));return $.value}{let $=f;return typeof f=="string"&&x.type==="color"&&($=Ra.parse(f)),{kind:"constant",configDependencies:new Set,evaluate:()=>$}}}(s===void 0?r.specification.default:s,r.specification,u,g)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,s,u){return this.property.possiblyEvaluate(this,r,s,u)}}class oc{constructor(r,s,u){this.property=r,this.value=new sc(r,void 0,s,u)}transitioned(r,s){return new Cl(this.property,this.value,s,Nr({},r.transition,this.transition),r.now)}untransitioned(){return new Cl(this.property,this.value,null,{},0)}}class il{constructor(r,s,u){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues),this._scope=s,this._options=u,this.configDependencies=new Set}getValue(r){return In(this._values[r].value.value)}setValue(r,s){this._values.hasOwnProperty(r)||(this._values[r]=new oc(this._values[r].property,this._scope,this._options)),this._values[r].value=new sc(this._values[r].property,s===null?void 0:In(s),this._scope,this._options),this._values[r].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[r].value.expression.configDependencies]))}setTransitionOrValue(r,s){s&&(this._options=s);const u=this._properties.properties;if(r)for(const g in r){const f=r[g];if(Ha(g,"-transition")){const x=g.slice(0,-11);u[x]&&this.setTransition(x,f)}else u.hasOwnProperty(g)&&this.setValue(g,f)}}getTransition(r){return In(this._values[r].transition)}setTransition(r,s){this._values.hasOwnProperty(r)||(this._values[r]=new oc(this._values[r].property)),this._values[r].transition=In(s)||void 0}serialize(){const r={};for(const s of Object.keys(this._values)){const u=this.getValue(s);u!==void 0&&(r[s]=u);const g=this.getTransition(s);g!==void 0&&(r[`${s}-transition`]=g)}return r}transitioned(r,s){const u=new Ud(this._properties);for(const g of Object.keys(this._values))u._values[g]=this._values[g].transitioned(r,s._values[g]);return u}untransitioned(){const r=new Ud(this._properties);for(const s of Object.keys(this._values))r._values[s]=this._values[s].untransitioned();return r}}class Cl{constructor(r,s,u,g,f){const x=g.delay||0,C=g.duration||0;f=f||0,this.property=r,this.value=s,this.begin=f+x,this.end=this.begin+C,r.specification.transition&&(g.delay||g.duration)&&(this.prior=u)}possiblyEvaluate(r,s,u){const g=r.now||0,f=this.value.possiblyEvaluate(r,s,u),x=this.prior;if(x){if(g>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(g<this.begin)return x.possiblyEvaluate(r,s,u);{const C=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,s,u),f,$a(C))}}return f}}class Ud{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,s,u){const g=new Wn(this._properties);for(const f of Object.keys(this._values))g._values[f]=this._values[f].possiblyEvaluate(r,s,u);return g}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Gd{constructor(r,s,u){this._properties=r,this._values=Object.create(r.defaultPropertyValues),this._scope=s,this._options=u,this.configDependencies=new Set}getValue(r){return In(this._values[r].value)}setValue(r,s){this._values[r]=new sc(this._values[r].property,s===null?void 0:In(s),this._scope,this._options),this._values[r].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[r].expression.configDependencies]))}serialize(){const r={};for(const s of Object.keys(this._values)){const u=this.getValue(s);u!==void 0&&(r[s]=u)}return r}possiblyEvaluate(r,s,u){const g=new Wn(this._properties);for(const f of Object.keys(this._values))g._values[f]=this._values[f].possiblyEvaluate(r,s,u);return g}}class Hd{constructor(r,s,u){this.property=r,this.value=s,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,s,u,g){return this.property.evaluate(this.value,this.parameters,r,s,u,g)}}class Wn{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class tr{constructor(r){this.specification=r}possiblyEvaluate(r,s){return r.expression.evaluate(s)}interpolate(r,s,u){const g=Ia[this.specification.type];return g?g(r,s,u):r}}class vr{constructor(r,s){this.specification=r,this.overrides=s}possiblyEvaluate(r,s,u,g){return new Hd(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(s,null,{},u,g)}:r.expression,s)}interpolate(r,s,u){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new Hd(this,{kind:"constant",value:void 0},r.parameters);const g=Ia[this.specification.type];return g?new Hd(this,{kind:"constant",value:g(r.value.value,s.value.value,u)},r.parameters):r}evaluate(r,s,u,g,f,x){return r.kind==="constant"?r.value:r.evaluate(s,u,g,f,x)}}class lc{constructor(r){this.specification=r}possiblyEvaluate(r,s,u,g){return!!r.expression.evaluate(s,null,{},u,g)}interpolate(){return!1}}class Mn{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const s=new Ea(0,{});for(const u in r){const g=r[u];g.specification.overridable&&this.overridableProperties.push(u);const f=this.defaultPropertyValues[u]=new sc(g,void 0),x=this.defaultTransitionablePropertyValues[u]=new oc(g);this.defaultTransitioningPropertyValues[u]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=f.possiblyEvaluate(s)}}}Tr(vr,"DataDrivenProperty"),Tr(tr,"DataConstantProperty"),Tr(lc,"ColorRampProperty");var Tt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow","experimental":true},"rain":{"type":"rain","experimental":true},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor","experimental":true},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"metadata":{"type":"*"},"selectors":{"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"type":"string","required":true},"properties":{"type":"selectorProperty","required":false},"featureNamespace":{"type":"string","required":false}},"selectorProperty":{"experimental":true,"*":{"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-quality":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]},"experimental":true},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant"},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","experimental":true,"private":true,"expression":{},"property-type":"data-constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"line-cross-slope":{"type":"number","experimental":true,"expression":{},"property-type":"constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","experimental":true,"private":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.4,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","property-type":"data-constant","default":0.71,"minimum":0,"maximum":5,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.57,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","property-type":"data-constant","default":0.7,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}},"buildingFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"flat","property-type":"data-constant"},"fill-extrusion-base-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"terrain","property-type":"data-constant"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"experimental":true,"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function _p(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function qd(l){if(Array.isArray(l))return l.map(qd);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const r={};for(const s in l)r[s]=qd(l[s]);return r}return _p(l)}function Gh(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const r of l.slice(1))if(!Gh(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}function zs(l,r="",s=null,u="fill"){if(l==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Gh(l)||(l=Xc(l));const g=l;let f=!0;try{f=function(T){if(!Dl(T))return T;let A=qd(T);return bp(A),A=vi(A),A}(g)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(g,null,2)}
        `)}let x=null,C=null;if(u!=="background"&&u!=="sky"&&u!=="slot"){C=Tt[`filter_${u}`];const T=Bd(f,C,r,s);if(T.result==="error")throw new Error(T.value.map(A=>`${A.key}: ${A.message}`).join(", "));x=(A,I,P)=>T.value.evaluate(A,I,{},P)}let M=null,$=null;if(f!==g){const T=Bd(g,C,r,s);if(T.result==="error")throw new Error(T.value.map(A=>`${A.key}: ${A.message}`).join(", "));M=(A,I,P,R,j)=>T.value.evaluate(A,I,{},P,void 0,void 0,R,j),$=!Fc(T.value.expression)}return{filter:x,dynamicFilter:M||void 0,needGeometry:Ls(f),needFeature:!!$}}function vi(l){if(!Array.isArray(l))return l;const r=function(s){if(wp.has(s[0])){for(let u=1;u<s.length;u++)if(Dl(s[u]))return!0}return s}(l);return r===!0?r:r.map(s=>vi(s))}function bp(l){let r=!1;const s=[];if(l[0]==="case"){for(let u=1;u<l.length-1;u+=2)r=r||Dl(l[u]),s.push(l[u+1]);s.push(l[l.length-1])}else if(l[0]==="match"){r=r||Dl(l[1]);for(let u=2;u<l.length-1;u+=2)s.push(l[u+1]);s.push(l[l.length-1])}else if(l[0]==="step"){r=r||Dl(l[1]);for(let u=1;u<l.length-1;u+=2)s.push(l[u+1])}r&&(l.length=0,l.push("any",...s));for(let u=1;u<l.length;u++)bp(l[u])}function Dl(l){if(!Array.isArray(l))return!1;if((r=l[0])==="pitch"||r==="distance-from-center")return!0;var r;for(let s=1;s<l.length;s++)if(Dl(l[s]))return!0;return!1}const wp=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Hm(l,r){return l<r?-1:l>r?1:0}function Ls(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let r=1;r<l.length;r++)if(Ls(l[r]))return!0;return!1}function Xc(l){if(!l)return!0;const r=l[0];return l.length<=1?r!=="any":r==="=="?Wd(l[1],l[2],"=="):r==="!="?Hh(Wd(l[1],l[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Wd(l[1],l[2],r):r==="any"?(s=l.slice(1),["any"].concat(s.map(Xc))):r==="all"?["all"].concat(l.slice(1).map(Xc)):r==="none"?["all"].concat(l.slice(1).map(Xc).map(Hh)):r==="in"?Ju(l[1],l.slice(2)):r==="!in"?Hh(Ju(l[1],l.slice(2))):r==="has"?qm(l[1]):r!=="!has"||Hh(qm(l[1]));var s}function Wd(l,r,s){switch(l){case"$type":return[`filter-type-${s}`,r];case"$id":return[`filter-id-${s}`,r];default:return[`filter-${s}`,l,r]}}function Ju(l,r){if(r.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(s=>typeof s!=typeof r[0])?["filter-in-large",l,["literal",r.sort(Hm)]]:["filter-in-small",l,["literal",r]]}}function qm(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Hh(l){return["!",l]}const zo="";function Lo(l,r){return r?`${l}${zo}${r}`:l}const Yc="-transition",P0=new Set(["fill","line","background","hillshade","raster"]);class is extends Rc{constructor(r,s,u,g,f){if(super(),this.id=r.id,this.fqid=Lo(this.id,u),this.type=r.type,this.scope=u,this.lut=g,this.options=f,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,r.type!=="custom"){if(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type&&r.type!=="background"&&r.type!=="sky"&&r.type!=="slot"){this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter;const x=Bd(this.filter,Tt[`filter_${r.type}`]);x.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,...x.value.configDependencies]))}if(r.slot&&(this.slot=r.slot),s.layout&&(this._unevaluatedLayout=new Gd(s.layout,this.scope,f),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),s.paint){this._transitionablePaint=new il(s.paint,this.scope,f);for(const x in r.paint)this.setPaintProperty(x,r.paint[x]);for(const x in r.layout)this.setLayoutProperty(x,r.layout[x]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Wn(s.paint)}}}onAdd(r){}onRemove(r){}isDraped(r){return!this.is3D()&&P0.has(this.type)}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,s){if(this.type==="custom"&&r==="visibility")return void(this.visibility=s);const u=this._unevaluatedLayout;u._properties.properties[r]&&(u.setValue(r,s),this.configDependencies=new Set([...this.configDependencies,...u.configDependencies]),r==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(r){return Ha(r,Yc)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,s){const u=this._transitionablePaint,g=u._properties.properties;if(Ha(r,Yc)){const A=r.slice(0,-11);return g[A]&&u.setTransition(A,s||void 0),!1}if(!g[r])return!1;const f=u._values[r],x=f.value.isDataDriven(),C=f.value;u.setValue(r,s),this.configDependencies=new Set([...this.configDependencies,...u.configDependencies]),this._handleSpecialPaintPropertyUpdate(r);const M=u._values[r].value,$=M.isDataDriven(),T=Ha(r,"pattern")||r==="line-dasharray";return $||x||T||this._handleOverridablePaintPropertyUpdate(r,C,M)}_handleSpecialPaintPropertyUpdate(r){}getProgramIds(){return null}getDefaultProgramParams(r,s,u){return null}_handleOverridablePaintPropertyUpdate(r,s,u){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,s){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,s)}serialize(){return Dn({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(r,s)=>!(r===void 0||s==="layout"&&!Object.keys(r).length||s==="paint"&&!Object.keys(r).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const r in this.paint._values){const s=this.paint.get(r);if(s instanceof Hd&&xi(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}compileFilter(r){this._filterCompiled||(this._featureFilter=zs(this.filter,this.scope,r),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(r){this._stats&&(r.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(r){}queryIntersectsFeature(r,s,u,g,f,x,C,M,$){}}const M0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class qh{constructor(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class xn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,s){return r._trim(),s&&(r.isTransferred=!0,s.add(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...r){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...r){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Oa(l,r=1){let s=0,u=0;return{members:l.map(g=>{const f=M0[g.type].BYTES_PER_ELEMENT,x=s=Wh(s,Math.max(r,f)),C=g.components||1;return u=Math.max(u,f),s+=f*C,{name:g.name,type:g.type,components:C,offset:x}}),size:Wh(s,Math.max(u,r)),alignment:r}}function Wh(l,r){return Math.ceil(l/r)*r}class ao extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s){const u=this.length;return this.resize(u+1),this.emplace(u,r,s)}emplace(r,s,u){const g=2*r;return this.int16[g+0]=s,this.int16[g+1]=u,r}}ao.prototype.bytesPerElement=4,Tr(ao,"StructArrayLayout2i4");class Kd extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u)}emplace(r,s,u,g){const f=3*r;return this.int16[f+0]=s,this.int16[f+1]=u,this.int16[f+2]=g,r}}Kd.prototype.bytesPerElement=6,Tr(Kd,"StructArrayLayout3i6");class cc extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,g){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,u,g)}emplace(r,s,u,g,f){const x=4*r;return this.int16[x+0]=s,this.int16[x+1]=u,this.int16[x+2]=g,this.int16[x+3]=f,r}}cc.prototype.bytesPerElement=8,Tr(cc,"StructArrayLayout4i8");class Sp extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,u,g,f)}emplace(r,s,u,g,f,x){const C=5*r;return this.int16[C+0]=s,this.int16[C+1]=u,this.int16[C+2]=g,this.int16[C+3]=f,this.int16[C+4]=x,r}}Sp.prototype.bytesPerElement=10,Tr(Sp,"StructArrayLayout5i10");class no extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C){const M=this.length;return this.resize(M+1),this.emplace(M,r,s,u,g,f,x,C)}emplace(r,s,u,g,f,x,C,M){const $=6*r,T=12*r,A=3*r;return this.int16[$+0]=s,this.int16[$+1]=u,this.uint8[T+4]=g,this.uint8[T+5]=f,this.uint8[T+6]=x,this.uint8[T+7]=C,this.float32[A+2]=M,r}}no.prototype.bytesPerElement=12,Tr(no,"StructArrayLayout2i4ub1f12");class uc extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,u,g)}emplace(r,s,u,g,f){const x=4*r;return this.float32[x+0]=s,this.float32[x+1]=u,this.float32[x+2]=g,this.float32[x+3]=f,r}}uc.prototype.bytesPerElement=16,Tr(uc,"StructArrayLayout4f16");class dc extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u)}emplace(r,s,u,g){const f=3*r;return this.float32[f+0]=s,this.float32[f+1]=u,this.float32[f+2]=g,r}}dc.prototype.bytesPerElement=12,Tr(dc,"StructArrayLayout3f12");class hc extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,u,g,f)}emplace(r,s,u,g,f,x){const C=6*r,M=3*r;return this.uint16[C+0]=s,this.uint16[C+1]=u,this.uint16[C+2]=g,this.uint16[C+3]=f,this.float32[M+2]=x,r}}hc.prototype.bytesPerElement=12,Tr(hc,"StructArrayLayout4ui1f12");class fc extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,g){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,u,g)}emplace(r,s,u,g,f){const x=4*r;return this.uint16[x+0]=s,this.uint16[x+1]=u,this.uint16[x+2]=g,this.uint16[x+3]=f,r}}fc.prototype.bytesPerElement=8,Tr(fc,"StructArrayLayout4ui8");class Qu extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x){const C=this.length;return this.resize(C+1),this.emplace(C,r,s,u,g,f,x)}emplace(r,s,u,g,f,x,C){const M=6*r;return this.int16[M+0]=s,this.int16[M+1]=u,this.int16[M+2]=g,this.int16[M+3]=f,this.int16[M+4]=x,this.int16[M+5]=C,r}}Qu.prototype.bytesPerElement=12,Tr(Qu,"StructArrayLayout6i12");class Tp extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C,M,$,T,A,I){const P=this.length;return this.resize(P+1),this.emplace(P,r,s,u,g,f,x,C,M,$,T,A,I)}emplace(r,s,u,g,f,x,C,M,$,T,A,I,P){const R=12*r;return this.int16[R+0]=s,this.int16[R+1]=u,this.int16[R+2]=g,this.int16[R+3]=f,this.uint16[R+4]=x,this.uint16[R+5]=C,this.uint16[R+6]=M,this.uint16[R+7]=$,this.int16[R+8]=T,this.int16[R+9]=A,this.int16[R+10]=I,this.int16[R+11]=P,r}}Tp.prototype.bytesPerElement=24,Tr(Tp,"StructArrayLayout4i4ui4i24");class Zd extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x){const C=this.length;return this.resize(C+1),this.emplace(C,r,s,u,g,f,x)}emplace(r,s,u,g,f,x,C){const M=10*r,$=5*r;return this.int16[M+0]=s,this.int16[M+1]=u,this.int16[M+2]=g,this.float32[$+2]=f,this.float32[$+3]=x,this.float32[$+4]=C,r}}Zd.prototype.bytesPerElement=20,Tr(Zd,"StructArrayLayout3i3f20");class ed extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint32[1*r+0]=s,r}}ed.prototype.bytesPerElement=4,Tr(ed,"StructArrayLayout1ul4");class pc extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s){const u=this.length;return this.resize(u+1),this.emplace(u,r,s)}emplace(r,s,u){const g=2*r;return this.uint16[g+0]=s,this.uint16[g+1]=u,r}}pc.prototype.bytesPerElement=4,Tr(pc,"StructArrayLayout2ui4");class Ep extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C,M,$,T,A,I,P){const R=this.length;return this.resize(R+1),this.emplace(R,r,s,u,g,f,x,C,M,$,T,A,I,P)}emplace(r,s,u,g,f,x,C,M,$,T,A,I,P,R){const j=20*r,W=10*r;return this.int16[j+0]=s,this.int16[j+1]=u,this.int16[j+2]=g,this.int16[j+3]=f,this.int16[j+4]=x,this.float32[W+3]=C,this.float32[W+4]=M,this.float32[W+5]=$,this.float32[W+6]=T,this.int16[j+14]=A,this.uint32[W+8]=I,this.uint16[j+18]=P,this.uint16[j+19]=R,r}}Ep.prototype.bytesPerElement=40,Tr(Ep,"StructArrayLayout5i4f1i1ul2ui40");class Kh extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C){const M=this.length;return this.resize(M+1),this.emplace(M,r,s,u,g,f,x,C)}emplace(r,s,u,g,f,x,C,M){const $=8*r;return this.int16[$+0]=s,this.int16[$+1]=u,this.int16[$+2]=g,this.int16[$+4]=f,this.int16[$+5]=x,this.int16[$+6]=C,this.int16[$+7]=M,r}}Kh.prototype.bytesPerElement=16,Tr(Kh,"StructArrayLayout3i2i2i16");class Zh extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,u,g,f)}emplace(r,s,u,g,f,x){const C=4*r,M=8*r;return this.float32[C+0]=s,this.float32[C+1]=u,this.float32[C+2]=g,this.int16[M+6]=f,this.int16[M+7]=x,r}}Zh.prototype.bytesPerElement=16,Tr(Zh,"StructArrayLayout2f1f2i16");class Cp extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x){const C=this.length;return this.resize(C+1),this.emplace(C,r,s,u,g,f,x)}emplace(r,s,u,g,f,x,C){const M=20*r,$=5*r;return this.uint8[M+0]=s,this.uint8[M+1]=u,this.float32[$+1]=g,this.float32[$+2]=f,this.float32[$+3]=x,this.float32[$+4]=C,r}}Cp.prototype.bytesPerElement=20,Tr(Cp,"StructArrayLayout2ub4f20");class Fi extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u)}emplace(r,s,u,g){const f=3*r;return this.uint16[f+0]=s,this.uint16[f+1]=u,this.uint16[f+2]=g,r}}Fi.prototype.bytesPerElement=6,Tr(Fi,"StructArrayLayout3ui6");class Xh extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C,M,$,T,A,I,P,R,j,W,K,ne,ie,J,le){const fe=this.length;return this.resize(fe+1),this.emplace(fe,r,s,u,g,f,x,C,M,$,T,A,I,P,R,j,W,K,ne,ie,J,le)}emplace(r,s,u,g,f,x,C,M,$,T,A,I,P,R,j,W,K,ne,ie,J,le,fe){const ve=30*r,Ne=15*r,$e=60*r;return this.int16[ve+0]=s,this.int16[ve+1]=u,this.int16[ve+2]=g,this.float32[Ne+2]=f,this.float32[Ne+3]=x,this.uint16[ve+8]=C,this.uint16[ve+9]=M,this.uint32[Ne+5]=$,this.uint32[Ne+6]=T,this.uint32[Ne+7]=A,this.uint16[ve+16]=I,this.uint16[ve+17]=P,this.uint16[ve+18]=R,this.float32[Ne+10]=j,this.float32[Ne+11]=W,this.uint8[$e+48]=K,this.uint8[$e+49]=ne,this.uint8[$e+50]=ie,this.uint32[Ne+13]=J,this.int16[ve+28]=le,this.uint8[$e+58]=fe,r}}Xh.prototype.bytesPerElement=60,Tr(Xh,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Yh extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C,M,$,T,A,I,P,R,j,W,K,ne,ie,J,le,fe,ve,Ne,$e,Ie,Je,Ve,et,it,at,lt){const gt=this.length;return this.resize(gt+1),this.emplace(gt,r,s,u,g,f,x,C,M,$,T,A,I,P,R,j,W,K,ne,ie,J,le,fe,ve,Ne,$e,Ie,Je,Ve,et,it,at,lt)}emplace(r,s,u,g,f,x,C,M,$,T,A,I,P,R,j,W,K,ne,ie,J,le,fe,ve,Ne,$e,Ie,Je,Ve,et,it,at,lt,gt){const vt=20*r,ht=40*r,Rt=80*r;return this.float32[vt+0]=s,this.float32[vt+1]=u,this.int16[ht+4]=g,this.int16[ht+5]=f,this.int16[ht+6]=x,this.int16[ht+7]=C,this.int16[ht+8]=M,this.int16[ht+9]=$,this.int16[ht+10]=T,this.int16[ht+11]=A,this.int16[ht+12]=I,this.uint16[ht+13]=P,this.uint16[ht+14]=R,this.uint16[ht+15]=j,this.uint16[ht+16]=W,this.uint16[ht+17]=K,this.uint16[ht+18]=ne,this.uint16[ht+19]=ie,this.uint16[ht+20]=J,this.uint16[ht+21]=le,this.uint16[ht+22]=fe,this.uint16[ht+23]=ve,this.uint16[ht+24]=Ne,this.uint16[ht+25]=$e,this.uint16[ht+26]=Ie,this.uint16[ht+27]=Je,this.uint32[vt+14]=Ve,this.float32[vt+15]=et,this.float32[vt+16]=it,this.float32[vt+17]=at,this.float32[vt+18]=lt,this.uint8[Rt+76]=gt,r}}Yh.prototype.bytesPerElement=80,Tr(Yh,"StructArrayLayout2f9i15ui1ul4f1ub80");class td extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.float32[1*r+0]=s,r}}td.prototype.bytesPerElement=4,Tr(td,"StructArrayLayout1f4");class Ts extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,u,g,f)}emplace(r,s,u,g,f,x){const C=5*r;return this.float32[C+0]=s,this.float32[C+1]=u,this.float32[C+2]=g,this.float32[C+3]=f,this.float32[C+4]=x,r}}Ts.prototype.bytesPerElement=20,Tr(Ts,"StructArrayLayout5f20");class Jh extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C){const M=this.length;return this.resize(M+1),this.emplace(M,r,s,u,g,f,x,C)}emplace(r,s,u,g,f,x,C,M){const $=7*r;return this.float32[$+0]=s,this.float32[$+1]=u,this.float32[$+2]=g,this.float32[$+3]=f,this.float32[$+4]=x,this.float32[$+5]=C,this.float32[$+6]=M,r}}Jh.prototype.bytesPerElement=28,Tr(Jh,"StructArrayLayout7f28");class Dp extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C,M,$,T,A){const I=this.length;return this.resize(I+1),this.emplace(I,r,s,u,g,f,x,C,M,$,T,A)}emplace(r,s,u,g,f,x,C,M,$,T,A,I){const P=11*r;return this.float32[P+0]=s,this.float32[P+1]=u,this.float32[P+2]=g,this.float32[P+3]=f,this.float32[P+4]=x,this.float32[P+5]=C,this.float32[P+6]=M,this.float32[P+7]=$,this.float32[P+8]=T,this.float32[P+9]=A,this.float32[P+10]=I,r}}Dp.prototype.bytesPerElement=44,Tr(Dp,"StructArrayLayout11f44");class Wm extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C,M,$){const T=this.length;return this.resize(T+1),this.emplace(T,r,s,u,g,f,x,C,M,$)}emplace(r,s,u,g,f,x,C,M,$,T){const A=9*r;return this.float32[A+0]=s,this.float32[A+1]=u,this.float32[A+2]=g,this.float32[A+3]=f,this.float32[A+4]=x,this.float32[A+5]=C,this.float32[A+6]=M,this.float32[A+7]=$,this.float32[A+8]=T,r}}Wm.prototype.bytesPerElement=36,Tr(Wm,"StructArrayLayout9f36");class mc extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s){const u=this.length;return this.resize(u+1),this.emplace(u,r,s)}emplace(r,s,u){const g=2*r;return this.float32[g+0]=s,this.float32[g+1]=u,r}}mc.prototype.bytesPerElement=8,Tr(mc,"StructArrayLayout2f8");class Xd extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,g){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,u,g)}emplace(r,s,u,g,f){const x=6*r;return this.uint32[3*r+0]=s,this.uint16[x+2]=u,this.uint16[x+3]=g,this.uint16[x+4]=f,r}}Xd.prototype.bytesPerElement=12,Tr(Xd,"StructArrayLayout1ul3ui12");class Qh extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint16[1*r+0]=s,r}}Qh.prototype.bytesPerElement=2,Tr(Qh,"StructArrayLayout1ui2");class ef extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C,M,$,T,A,I,P,R,j,W){const K=this.length;return this.resize(K+1),this.emplace(K,r,s,u,g,f,x,C,M,$,T,A,I,P,R,j,W)}emplace(r,s,u,g,f,x,C,M,$,T,A,I,P,R,j,W,K){const ne=16*r;return this.float32[ne+0]=s,this.float32[ne+1]=u,this.float32[ne+2]=g,this.float32[ne+3]=f,this.float32[ne+4]=x,this.float32[ne+5]=C,this.float32[ne+6]=M,this.float32[ne+7]=$,this.float32[ne+8]=T,this.float32[ne+9]=A,this.float32[ne+10]=I,this.float32[ne+11]=P,this.float32[ne+12]=R,this.float32[ne+13]=j,this.float32[ne+14]=W,this.float32[ne+15]=K,r}}ef.prototype.bytesPerElement=64,Tr(ef,"StructArrayLayout16f64");class Yd extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C){const M=this.length;return this.resize(M+1),this.emplace(M,r,s,u,g,f,x,C)}emplace(r,s,u,g,f,x,C,M){const $=10*r,T=5*r;return this.uint16[$+0]=s,this.uint16[$+1]=u,this.uint16[$+2]=g,this.uint16[$+3]=f,this.float32[T+2]=x,this.float32[T+3]=C,this.float32[T+4]=M,r}}Yd.prototype.bytesPerElement=20,Tr(Yd,"StructArrayLayout4ui3f20");class Pp extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.int16[1*r+0]=s,r}}Pp.prototype.bytesPerElement=2,Tr(Pp,"StructArrayLayout1i2");class Mp extends xn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint8[1*r+0]=s,r}}Mp.prototype.bytesPerElement=1,Tr(Mp,"StructArrayLayout1ub1");class tf extends qh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}tf.prototype.size=40;class Km extends Ep{get(r){return new tf(this,r)}}Tr(Km,"CollisionBoxArray");class Jd extends qh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(r){this._structArray.uint8[this._pos1+49]=r}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(r){this._structArray.uint8[this._pos1+50]=r}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(r){this._structArray.uint32[this._pos4+13]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(r){this._structArray.uint8[this._pos1+58]=r}}Jd.prototype.size=60;class Ap extends Xh{get(r){return new Jd(this,r)}}Tr(Ap,"PlacedSymbolArray");class rf extends qh{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(r){this._structArray.uint32[this._pos4+14]=r}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(r){this._structArray.float32[this._pos4+18]=r}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}rf.prototype.size=80;class Zm extends Yh{get(r){return new rf(this,r)}}Tr(Zm,"SymbolInstanceArray");class Qd extends td{getoffsetX(r){return this.float32[1*r+0]}}Tr(Qd,"GlyphOffsetArray");class Jc extends ao{getx(r){return this.int16[2*r+0]}gety(r){return this.int16[2*r+1]}}Tr(Jc,"SymbolLineVertexArray");class $s extends qh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}$s.prototype.size=12;class eh extends Xd{get(r){return new $s(this,r)}}Tr(eh,"FeatureIndexArray");class A0 extends pc{geta_centroid_pos0(r){return this.uint16[2*r+0]}geta_centroid_pos1(r){return this.uint16[2*r+1]}}Tr(A0,"FillExtrusionCentroidArray");class rd extends qh{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}rd.prototype.size=6;class th extends Kd{get(r){return new rd(this,r)}}Tr(th,"FillExtrusionWallArray");const kp=Oa([{name:"a_pos",components:2,type:"Int16"}],4),ad=Oa([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class An{constructor(r=[]){this.segments=r}_prepareSegment(r,s,u,g){let f=this.segments[this.segments.length-1];return r>An.MAX_VERTEX_ARRAY_LENGTH&&Wr(`Max vertices per segment is ${An.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!f||f.vertexLength+r>An.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==g)&&(f={vertexOffset:s,primitiveOffset:u,vertexLength:0,primitiveLength:0},g!==void 0&&(f.sortKey=g),this.segments.push(f)),f}prepareSegment(r,s,u,g){return this._prepareSegment(r,s.length,u.length,g)}get(){return this.segments}destroy(){for(const r of this.segments)for(const s in r.vaos)r.vaos[s].destroy()}static simpleSegment(r,s,u,g){return new An([{vertexOffset:r,primitiveOffset:s,vertexLength:u,primitiveLength:g,vaos:{},sortKey:0}])}}function af(l,r){return 256*(l=fr(Math.floor(l),0,255))+fr(Math.floor(r),0,255)}An.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Tr(An,"SegmentVector");const k0=Oa([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),rh=Oa([{name:"a_dash",components:4,type:"Uint16"}]);class Qc{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(r,s,u,g){this.ids.push(io(r)),this.positions.push(s,u,g)}eachPosition(r,s){const u=io(r);let g=0,f=this.ids.length-1;for(;g<f;){const x=g+f>>1;this.ids[x]>=u?f=x:g=x+1}for(;this.ids[g]===u;)s(this.positions[3*g],this.positions[3*g+1],this.positions[3*g+2]),g++}static serialize(r,s){const u=new Float64Array(r.ids),g=new Uint32Array(r.positions);return so(u,g,0,u.length-1),s&&(s.add(u.buffer),s.add(g.buffer)),{ids:u,positions:g}}static deserialize(r){const s=new Qc;let u;s.ids=r.ids,s.positions=r.positions;for(const g of s.ids)g!==u&&s.uniqueIds.push(g),u=g;return s.indexed=!0,s}}function io(l){const r=+l;return!isNaN(r)&&Number.MIN_SAFE_INTEGER<=r&&r<=Number.MAX_SAFE_INTEGER?r:bd(String(l))}function so(l,r,s,u){for(;s<u;){const g=l[s+u>>1];let f=s-1,x=u+1;for(;;){do f++;while(l[f]<g);do x--;while(l[x]>g);if(f>=x)break;$o(l,f,x),$o(r,3*f,3*x),$o(r,3*f+1,3*x+1),$o(r,3*f+2,3*x+2)}x-s<u-x?(so(l,r,s,x),s=x+1):(so(l,r,x+1,u),u=x)}}function $o(l,r,s){const u=l[r];l[r]=l[s],l[s]=u}Tr(Qc,"FeaturePositionMap");class Pl{constructor(r){this.gl=r.gl,this.initialized=!1}fetchUniformLocation(r,s){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(r,s),this.initialized=!0),!!this.location}set(r,s,u){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class oo extends Pl{constructor(r){super(r),this.current=0}set(r,s,u){this.fetchUniformLocation(r,s)&&this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}}class fn extends Pl{constructor(r){super(r),this.current=0}set(r,s,u){this.fetchUniformLocation(r,s)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class kn extends Pl{constructor(r){super(r),this.current=[0,0]}set(r,s,u){this.fetchUniformLocation(r,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1])))}}class ah extends Pl{constructor(r){super(r),this.current=[0,0,0]}set(r,s,u){this.fetchUniformLocation(r,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2])))}}class nd extends Pl{constructor(r){super(r),this.current=[0,0,0,0]}set(r,s,u){this.fetchUniformLocation(r,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class Rp extends Pl{constructor(r){super(r),this.current=Ra.transparent.toRenderColor(null)}set(r,s,u){this.fetchUniformLocation(r,s)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const Ip=new Float32Array(16);class nh extends Pl{constructor(r){super(r),this.current=Ip}set(r,s,u){if(this.fetchUniformLocation(r,s)){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let g=1;g<16;g++)if(u[g]!==this.current[g]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}}}const id=new Float32Array(9),zp=new Float32Array(4);class Lp extends Pl{constructor(r){super(r),this.current=zp}set(r,s,u){if(this.fetchUniformLocation(r,s)){for(let g=0;g<4;g++)if(u[g]!==this.current[g]){this.current=u,this.gl.uniformMatrix2fv(this.location,!1,u);break}}}}function nf(l){return[af(255*l.r,255*l.g),af(255*l.b,255*l.a)]}class sd{constructor(r,s,u,g){this.value=r,this.uniformNames=s.map(f=>`u_${f}`),this.type=u,this.context=g}setUniform(r,s,u,g,f){const x=g.constantOr(this.value);s.set(r,f,x instanceof Ra?x.toRenderColor(this.ignoreLut?null:this.context.lut):x)}getBinding(r,s){return this.type==="color"?new Rp(r):new fn(r)}}class gc{constructor(r,s){this.uniformNames=s.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(r){this.pixelRatio=r.pixelRatio||1,this.pattern=r.tl.concat(r.br)}setUniform(r,s,u,g,f){const x=f==="u_pattern"||f==="u_dash"?this.pattern:f==="u_pixel_ratio"?this.pixelRatio:null;x&&s.set(r,f,x)}getBinding(r,s){return s==="u_pattern"||s==="u_dash"?new nd(r):new fn(r)}}class Ml{constructor(r,s,u,g){this.expression=r,this.type=u,this.maxValue=0,this.paintVertexAttributes=s.map(f=>({name:`a_${f}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(r,s,u,g,f,x,C){const M=this.paintVertexArray.length,$=this.expression.evaluate(new Ea(0,{brightness:x}),s,{},f,g,C);this.paintVertexArray.resize(r),this._setPaintValue(M,r,$,this.context)}updatePaintArray(r,s,u,g,f,x,C){const M=this.expression.evaluate({zoom:0,brightness:C},u,g,void 0,f);this._setPaintValue(r,s,M,this.context)}_setPaintValue(r,s,u,g){if(this.type==="color"){const f=nf(u.toRenderColor(this.ignoreLut?null:g.lut));for(let x=r;x<s;x++)this.paintVertexArray.emplace(x,f[0],f[1])}else{for(let f=r;f<s;f++)this.paintVertexArray.emplace(f,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class lo{constructor(r,s,u,g,f,x){this.expression=r,this.uniformNames=s.map(C=>`u_${C}_t`),this.type=u,this.useIntegerZoom=g,this.context=f,this.maxValue=0,this.paintVertexAttributes=s.map(C=>({name:`a_${C}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,s,u,g,f,x,C){const M=this.expression.evaluate(new Ea(this.context.zoom,{brightness:x}),s,{},f,g,C),$=this.expression.evaluate(new Ea(this.context.zoom+1,{brightness:x}),s,{},f,g,C),T=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(T,r,M,$,this.context)}updatePaintArray(r,s,u,g,f,x,C){const M=this.expression.evaluate({zoom:this.context.zoom,brightness:C},u,g,void 0,f),$=this.expression.evaluate({zoom:this.context.zoom+1,brightness:C},u,g,void 0,f);this._setPaintValue(r,s,M,$,this.context)}_setPaintValue(r,s,u,g,f){if(this.type==="color"){const x=nf(u.toRenderColor(this.ignoreLut?null:f.lut)),C=nf(u.toRenderColor(this.ignoreLut?null:f.lut));for(let M=r;M<s;M++)this.paintVertexArray.emplace(M,x[0],x[1],C[0],C[1])}else{for(let x=r;x<s;x++)this.paintVertexArray.emplace(x,u,g);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(g))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,s,u,g,f){const x=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,C=fr(this.expression.interpolationFactor(x,this.context.zoom,this.context.zoom+1),0,1);s.set(r,f,C)}getBinding(r,s){return new fn(r)}}class yc{constructor(r,s,u,g,f){this.expression=r,this.layerId=f,this.paintVertexAttributes=(u==="array"?rh:k0).members;for(let x=0;x<s.length;++x);this.paintVertexArray=new g}populatePaintArray(r,s,u,g){const f=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValues(f,r,s.patterns&&s.patterns[this.layerId],u)}updatePaintArray(r,s,u,g,f,x,C){this._setPaintValues(r,s,u.patterns&&u.patterns[this.layerId],x)}_setPaintValues(r,s,u,g){if(!g||!u)return;const f=g[u];if(!f)return;const{tl:x,br:C,pixelRatio:M}=f;for(let $=r;$<s;$++)this.paintVertexArray.emplace($,x[0],x[1],C[0],C[1],M)}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class eu{constructor(r,s,u=()=>!0){this.binders={},this._buffers=[],this.context=s;const g=[];for(const f in r.paint._values){const x=r.paint.get(f),C=r.paint.get(`${f}-use-theme`);if(f.endsWith("-use-theme")||!u(f)||!(x instanceof Hd&&xi(x.property.specification)))continue;const M=_i(f,r.type),$=x.value,T=x.property.specification.type,A=!!x.property.useIntegerZoom,I=f==="line-dasharray"||f.endsWith("pattern"),P=f==="line-dasharray"&&r.layout.get("line-cap").value.kind!=="constant";if($.kind!=="constant"||P)if($.kind==="source"||P||I){const R=ih(f,T,"source");this.binders[f]=I?new yc($,M,T,R,r.id):new Ml($,M,T,R),g.push(`/a_${f}`)}else{const R=ih(f,T,"composite");this.binders[f]=new lo($,M,T,A,s,R),g.push(`/z_${f}`)}else this.binders[f]=I?new gc($.value,M):new sd($.value,M,T,s),g.push(`/u_${f}`);C&&(this.binders[f].ignoreLut=C.constantOr("default")==="none",this.binders[f].checkUseTheme=!0)}this.cacheKey=g.sort().join("")}getMaxValue(r){const s=this.binders[r];return s instanceof Ml||s instanceof lo?s.maxValue:0}populatePaintArrays(r,s,u,g,f,x,C){for(const M in this.binders){const $=this.binders[M];$.context=this.context,($ instanceof Ml||$ instanceof lo||$ instanceof yc)&&$.populatePaintArray(r,s,u,g,f,x,C)}}setConstantPatternPositions(r){for(const s in this.binders){const u=this.binders[s];u instanceof gc&&u.setConstantPatternPositions(r)}}updatePaintArrays(r,s,u,g,f,x,C,M,$){let T=!1;const A=Object.keys(r),I=A.length!==0&&!M,P=I?A:s.uniqueIds;this.context.lut=f.lut;for(const R in this.binders){const j=this.binders[R];if(j.context=this.context,(j instanceof Ml||j instanceof lo||j instanceof yc)&&(j.expression.isStateDependent===!0||j.expression.isLightConstant===!1)){const W=f.paint.get(R);j.expression=W.value;for(const K of P){const ne=r[K.toString()];s.eachPosition(K,(ie,J,le)=>{const fe=g.feature(ie);j.updatePaintArray(J,le,fe,ne,x,C,$)})}if(!I)for(const K of u.uniqueIds){const ne=r[K.toString()];u.eachPosition(K,(ie,J,le)=>{const fe=g.feature(ie);j.updatePaintArray(J,le,fe,ne,x,C,$)})}T=!0}}return T}defines(){const r=[];for(const s in this.binders){const u=this.binders[s];(u instanceof sd||u instanceof gc)&&r.push(...u.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return r}getBinderAttributes(){const r=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof Ml||u instanceof lo||u instanceof yc)for(let g=0;g<u.paintVertexAttributes.length;g++)r.push(u.paintVertexAttributes[g].name)}return r}getBinderUniforms(){const r=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof sd||u instanceof gc||u instanceof lo)for(const g of u.uniformNames)r.push(g)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r){const s=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof sd||g instanceof gc||g instanceof lo)for(const f of g.uniformNames)s.push({name:f,property:u,binding:g.getBinding(r,f)})}return s}setUniforms(r,s,u,g,f){for(const{name:x,property:C,binding:M}of u){if(this.binders[C].checkUseTheme&&this.binders[C]instanceof sd){const $=g.get(`${C}-use-theme`);$.isConstant()&&(this.binders[C].ignoreLut=$.constantOr("default")==="none")}this.binders[C].setUniform(r,M,f,g.get(C),x)}}updatePaintBuffers(){this._buffers=[];for(const r in this.binders){const s=this.binders[r];(s instanceof Ml||s instanceof lo||s instanceof yc)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(r){for(const s in this.binders){const u=this.binders[s];(u instanceof Ml||u instanceof lo||u instanceof yc)&&u.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const s=this.binders[r];(s instanceof Ml||s instanceof lo||s instanceof yc)&&s.destroy()}}}class tu{constructor(r,s,u=()=>!0){this.programConfigurations={};for(const g of r)this.programConfigurations[g.id]=new eu(g,s,u);this.needsUpload=!1,this._featureMap=new Qc,this._featureMapWithoutIds=new Qc,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(r,s,u,g,f,x,C,M){for(const $ in this.programConfigurations)this.programConfigurations[$].populatePaintArrays(r,s,g,f,x,C,M);s.id!==void 0?this._featureMap.add(s.id,u,this._bufferOffset,r):(this._featureMapWithoutIds.add(this._idlessCounter,u,this._bufferOffset,r),this._idlessCounter+=1),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,s,u,g,f,x,C){for(const M of u)this.needsUpload=this.programConfigurations[M.id].updatePaintArrays(r,this._featureMap,this._featureMapWithoutIds,s,M,g,f,x,C||0)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}const R0={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function _i(l,r){return R0[l]||[l.replace(`${r}-`,"").replace(/-/g,"_")]}const ss={"line-pattern":{source:hc,composite:hc},"fill-pattern":{source:hc,composite:hc},"fill-extrusion-pattern":{source:hc,composite:hc},"line-dasharray":{source:fc,composite:fc}},I0={color:{source:mc,composite:uc},number:{source:td,composite:mc}};function ih(l,r,s){const u=ss[l];return u&&u[s]||I0[r][s]}Tr(sd,"ConstantBinder"),Tr(gc,"PatternConstantBinder"),Tr(Ml,"SourceExpressionBinder"),Tr(yc,"PatternCompositeBinder"),Tr(lo,"CompositeExpressionBinder"),Tr(eu,"ProgramConfiguration",{omit:["_buffers"]}),Tr(tu,"ProgramConfigurationSet");const os=lr/Math.PI/2,sf=5,Xm=6,of=16383,xc=64,lf=[xc,32,16],co=-os,uo=os;function ru(l,r,s,u=os){return s=mr(s),[l*Math.sin(s)*u,-r*u,l*Math.cos(s)*u]}function Al(l,r,s){return ru(Math.cos(mr(l)),Math.sin(mr(l)),r,s)}const au=63710088e-1,$p=2*Math.PI*au;class La{constructor(r,s){if(isNaN(r)||isNaN(s))throw new Error(`Invalid LngLat object: (${r}, ${s})`);if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new La(kr(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const s=Math.PI/180,u=this.lat*s,g=r.lat*s,f=Math.sin(u)*Math.sin(g)+Math.cos(u)*Math.cos(g)*Math.cos((r.lng-this.lng)*s);return au*Math.acos(Math.min(f,1))}toBounds(r=0){const s=360*r/40075017,u=s/Math.cos(Math.PI/180*this.lat);return new sl({lng:this.lng-u,lat:this.lat-s},{lng:this.lng+u,lat:this.lat+s})}toEcef(r){return Al(this.lat,this.lng,os+r*os/au)}static convert(r){if(r instanceof La)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new La(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new La(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class sl{constructor(r,s){if(r)if(s)this.setSouthWest(r).setNorthEast(s);else if(r.length===4){const u=r;this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]])}else{const u=r;this.setSouthWest(u[0]).setNorthEast(u[1])}}setNorthEast(r){return this._ne=r instanceof La?new La(r.lng,r.lat):La.convert(r),this}setSouthWest(r){return this._sw=r instanceof La?new La(r.lng,r.lat):La.convert(r),this}extend(r){const s=this._sw,u=this._ne;let g,f;if(r instanceof La)g=r,f=r;else{if(!(r instanceof sl))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(sl.convert(r)):this.extend(La.convert(r)):typeof r=="object"&&r!==null&&r.hasOwnProperty("lat")&&(r.hasOwnProperty("lon")||r.hasOwnProperty("lng"))?this.extend(La.convert(r)):this;if(g=r._sw,f=r._ne,!g||!f)return this}return s||u?(s.lng=Math.min(g.lng,s.lng),s.lat=Math.min(g.lat,s.lat),u.lng=Math.max(f.lng,u.lng),u.lat=Math.max(f.lat,u.lat)):(this._sw=new La(g.lng,g.lat),this._ne=new La(f.lng,f.lat)),this}getCenter(){return new La((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new La(this.getWest(),this.getNorth())}getSouthEast(){return new La(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:s,lat:u}=La.convert(r);let g=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&g}static convert(r){if(r)return r instanceof sl?r:new sl(r)}}const Ym=0,Jm=25.5;function od(l){return $p*Math.cos(l*Math.PI/180)}function ol(l){return(180+l)/360}function ls(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function Xi(l,r){return l/od(r)}function qs(l){return 360*l-180}function Li(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function kl(l,r){return l*od(Li(r))}const cs=85.051129;function Np(l){return Math.cos(mr(fr(l,-85.051129,cs)))}function p(l,r){const s=fr(r,Ym,Jm),u=Math.pow(2,s);return Np(l)*$p/(512*u)}function a(l){return 1/Math.cos(l*Math.PI/180)}function o(l,r=0){const s=Math.exp(Math.PI*(1-(l.y+r/lr)/(1<<l.z)*2));return 80150034*s/(s*s+1)/lr/(1<<l.z)}class m{constructor(r,s,u=0){this.x=+r,this.y=+s,this.z=+u}static fromLngLat(r,s=0){const u=La.convert(r);return new m(ol(u.lng),ls(u.lat),Xi(s,u.lat))}toLngLat(){return new La(qs(this.x),Li(this.y))}toAltitude(){return kl(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/$p*a(Li(this.y))}}function v(l,r,s,u,g,f,x,C,M){const $=(r+u)/2,T=(s+g)/2,A=new dt($,T);C(A),function(I,P,R,j,W,K){const ne=R-W,ie=j-K;return Math.abs((j-P)*ne-(R-I)*ie)/Math.hypot(ne,ie)}(A.x,A.y,f.x,f.y,x.x,x.y)>=M?(v(l,r,s,$,T,f,A,C,M),v(l,$,T,u,g,A,x,C,M)):l.push(x)}function S(l,r,s){let u=l[0],g=u.x,f=u.y;r(u);const x=[u];for(let C=1;C<l.length;C++){const M=l[C],{x:$,y:T}=M;r(M),v(x,g,f,$,T,u,M,r,s),g=$,f=T,u=M}return x}function D(l,r,s,u){if(u(r,s)){const g=r.add(s)._mult(.5);D(l,r,g,u),D(l,g,s,u)}else l.push(s)}function L(l,r){let s=l[0];const u=[s];for(let g=1;g<l.length;g++){const f=l[g];D(u,s,f,r),s=f}return u}const O=Math.pow(2,14)-1,U=-O-1;function q(l,r){const s=Math.round(l.x*r),u=Math.round(l.y*r);return l.x=fr(s,U,O),l.y=fr(u,U,O),(s<l.x||s>l.x+1||u<l.y||u>l.y+1)&&Wr("Geometry exceeds allowed extent, reduce your vector tile buffer size"),l}function Z(l,r,s){const u=l.loadGeometry(),g=l.extent,f=lr/g;if(r&&s&&s.projection.isReprojectedInTileSpace){const x=1<<r.z,{scale:C,x:M,y:$,projection:T}=s,A=I=>{const P=qs((r.x+I.x/g)/x),R=Li((r.y+I.y/g)/x),j=T.project(P,R);I.x=(j.x*C-M)*g,I.y=(j.y*C-$)*g};for(let I=0;I<u.length;I++)if(l.type!==1)u[I]=S(u[I],A,1);else{const P=[];for(const R of u[I])R.x<0||R.x>=g||R.y<0||R.y>=g||(A(R),P.push(R));u[I]=P}}for(const x of u)for(const C of x)q(C,f);return u}function X(l,r){return{type:l.type,id:l.id,properties:l.properties,geometry:r?Z(l):[]}}function ae(l,r,s,u,g){l.emplaceBack(2*r+(u+1)/2,2*s+(g+1)/2)}function me(l,r,s){l.emplaceBack(r.x,r.y,r.z,s[0]*16384,s[1]*16384,s[2]*16384)}class he{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.hasPattern=!1,this.projection=r.projection,this.layoutVertexArray=new ao,this.indexArray=new Fi,this.segments=new An,this.programConfigurations=new tu(r.layers,{zoom:r.zoom,lut:r.lut}),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}updateFootprints(r,s){}populate(r,s,u,g){const f=this.layers[0],x=[];let C=null;f.type==="circle"&&(C=f.layout.get("circle-sort-key"));for(const{feature:$,id:T,index:A,sourceLayerIndex:I}of r){const P=this.layers[0]._featureFilter.needGeometry,R=X($,P);if(!this.layers[0]._featureFilter.filter(new Ea(this.zoom),R,u))continue;const j=C?C.evaluate(R,{},u):void 0,W={id:T,properties:$.properties,type:$.type,sourceLayerIndex:I,index:A,geometry:P?R.geometry:Z($,u,g),patterns:{},sortKey:j};x.push(W)}C&&x.sort(($,T)=>$.sortKey-T.sortKey);let M=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new Qu,M=g.projection);for(const $ of x){const{geometry:T,index:A,sourceLayerIndex:I}=$,P=r[A].feature;this.addFeature($,T,A,s.availableImages,u,M,s.brightness),s.featureIndex.insert(P,T,A,I,this.index)}}update(r,s,u,g,f,x,C){this.programConfigurations.updatePaintArrays(r,s,f,u,g,x,C)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,kp.members),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,ad.members))),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(r,s,u,g,f,x,C){for(const M of s)for(const $ of M){const T=$.x,A=$.y;if(T<0||T>=lr||A<0||A>=lr)continue;if(x){const R=x.projectTilePoint(T,A,f),j=x.upVector(f,T,A),W=this.globeExtVertexArray;me(W,R,j),me(W,R,j),me(W,R,j),me(W,R,j)}const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),P=I.vertexLength;ae(this.layoutVertexArray,T,A,-1,-1),ae(this.layoutVertexArray,T,A,1,-1),ae(this.layoutVertexArray,T,A,1,1),ae(this.layoutVertexArray,T,A,-1,1),this.indexArray.emplaceBack(P,P+1,P+2),this.indexArray.emplaceBack(P,P+2,P+3),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,{},g,f,C)}}function xe(l,r){for(let s=0;s<l.length;s++)if(tt(r,l[s]))return!0;for(let s=0;s<r.length;s++)if(tt(l,r[s]))return!0;return!!Oe(l,r)}function _e(l,r,s){return!!tt(l,r)||!!Ue(r,l,s)}function Me(l,r){if(l.length===1)return qe(r,l[0]);for(let s=0;s<r.length;s++){const u=r[s];for(let g=0;g<u.length;g++)if(tt(l,u[g]))return!0}for(let s=0;s<l.length;s++)if(qe(r,l[s]))return!0;for(let s=0;s<r.length;s++)if(Oe(l,r[s]))return!0;return!1}function Be(l,r,s){if(l.length>1){if(Oe(l,r))return!0;for(let u=0;u<r.length;u++)if(Ue(r[u],l,s))return!0}for(let u=0;u<l.length;u++)if(Ue(l[u],r,s))return!0;return!1}function Oe(l,r){if(l.length===0||r.length===0)return!1;for(let s=0;s<l.length-1;s++){const u=l[s],g=l[s+1];for(let f=0;f<r.length-1;f++)if(Ze(u,g,r[f],r[f+1]))return!0}return!1}function Ze(l,r,s,u){return yi(l,s,u)!==yi(r,s,u)&&yi(l,r,s)!==yi(l,r,u)}function Ue(l,r,s){const u=s*s;if(r.length===1)return l.distSqr(r[0])<u;for(let g=1;g<r.length;g++)if(We(l,r[g-1],r[g])<u)return!0;return!1}function We(l,r,s){const u=r.distSqr(s);if(u===0)return l.distSqr(r);const g=((l.x-r.x)*(s.x-r.x)+(l.y-r.y)*(s.y-r.y))/u;return l.distSqr(g<0?r:g>1?s:s.sub(r)._mult(g)._add(r))}function qe(l,r){let s,u,g,f=!1;for(let x=0;x<l.length;x++){s=l[x];for(let C=0,M=s.length-1;C<s.length;M=C++)u=s[C],g=s[M],u.y>r.y!=g.y>r.y&&r.x<(g.x-u.x)*(r.y-u.y)/(g.y-u.y)+u.x&&(f=!f)}return f}function tt(l,r){let s=!1;for(let u=0,g=l.length-1;u<l.length;g=u++){const f=l[u],x=l[g];f.y>r.y!=x.y>r.y&&r.x<(x.x-f.x)*(r.y-f.y)/(x.y-f.y)+f.x&&(s=!s)}return s}function rt(l,r,s,u,g){for(const x of l)if(r<=x.x&&s<=x.y&&u>=x.x&&g>=x.y)return!0;const f=[new dt(r,s),new dt(r,g),new dt(u,g),new dt(u,s)];if(l.length>2){for(const x of f)if(tt(l,x))return!0}for(let x=0;x<l.length-1;x++)if(Et(l[x],l[x+1],f))return!0;return!1}function Et(l,r,s){const u=s[0],g=s[2];if(l.x<u.x&&r.x<u.x||l.x>g.x&&r.x>g.x||l.y<u.y&&r.y<u.y||l.y>g.y&&r.y>g.y)return!1;const f=yi(l,r,s[0]);return f!==yi(l,r,s[1])||f!==yi(l,r,s[2])||f!==yi(l,r,s[3])}function _t(l,r,s,u,g,f){let x=r.y-l.y,C=l.x-r.x;if(f=f||0){const M=x*x+C*C;if(M===0)return!0;const $=Math.sqrt(M);x/=$,C/=$}return!((s.x-l.x)*x+(s.y-l.y)*C-f<0||(u.x-l.x)*x+(u.y-l.y)*C-f<0||(g.x-l.x)*x+(g.y-l.y)*C-f<0)}function st(l,r,s,u,g,f,x){return!(_t(l,r,u,g,f,x)||_t(r,s,u,g,f,x)||_t(s,l,u,g,f,x)||_t(u,g,l,r,s,x)||_t(g,f,l,r,s,x)||_t(f,u,l,r,s,x))}function mt(l,r,s){const u=r.paint.get(l).value;return u.kind==="constant"?u.value:s.programConfigurations.get(r.id).getMaxValue(l)}function Bt(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function qt(l,r,s,u,g){if(!r[0]&&!r[1])return l;const f=dt.convert(r)._mult(g);s==="viewport"&&f._rotate(-u);const x=[];for(let C=0;C<l.length;C++)x.push(l[C].sub(f));return x}function Kt(l,r,s,u){const g=dt.convert(l)._mult(u);return r==="viewport"&&g._rotate(-s),g}let xt,Ft;Tr(he,"CircleBucket",{omit:["layers"]});var Mt,Qt={exports:{}},Ot=(Mt||(Mt=1,function(l,r){(function(s){function u(f,x,C){var M=g(256*f,256*(x=Math.pow(2,C)-x-1),C),$=g(256*(f+1),256*(x+1),C);return M[0]+","+M[1]+","+$[0]+","+$[1]}function g(f,x,C){var M=2*Math.PI*6378137/256/Math.pow(2,C);return[f*M-2*Math.PI*6378137/2,x*M-2*Math.PI*6378137/2]}s.getURL=function(f,x,C,M,$,T){return T=T||{},f+"?"+["bbox="+u(C,M,$),"format="+(T.format||"image/png"),"service="+(T.service||"WMS"),"version="+(T.version||"1.1.1"),"request="+(T.request||"GetMap"),"srs="+(T.srs||"EPSG:3857"),"width="+(T.width||256),"height="+(T.height||256),"layers="+x].join("&")},s.getTileBBox=u,s.getMercCoords=g,Object.defineProperty(s,"__esModule",{value:!0})})(r)}(0,Qt.exports)),Qt.exports);class zt{constructor(r,s,u){this.z=r,this.x=s,this.y=u,this.key=yr(0,r,r,s,u)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,s){const u=Ot.getTileBBox(this.x,this.y,this.z),g=function(f,x,C){let M,$="";for(let T=f;T>0;T--)M=1<<T-1,$+=(x&M?1:0)+(C&M?2:0);return $}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class dr{constructor(r,s){this.wrap=r,this.canonical=s,this.key=yr(r,s.z,s.z,s.x,s.y)}}class rr{constructor(r,s,u,g,f){this.overscaledZ=r,this.wrap=s,this.canonical=new zt(u,+g,+f),this.key=s===0&&r===u?this.canonical.key:yr(s,r,u,g,f)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){const s=this.canonical.z-r;return r>this.canonical.z?new rr(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new rr(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(r,s=!0){if(this.overscaledZ===r&&s)return this.key;if(r>this.canonical.z)return yr(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-r;return yr(this.wrap*+s,r,r,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(r){if(r.wrap!==this.wrap)return!1;const s=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.z<this.canonical.z&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s}children(r){if(this.overscaledZ>=r)return[new rr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,u=2*this.canonical.x,g=2*this.canonical.y;return[new rr(s,this.wrap,s,u,g),new rr(s,this.wrap,s,u+1,g),new rr(s,this.wrap,s,u,g+1),new rr(s,this.wrap,s,u+1,g+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new rr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new rr(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new dr(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function yr(l,r,s,u,g){const f=1<<Math.min(s,22);let x=f*(g%f)+u%f;return l&&s<22&&(x+=f*f*((l<0?-2*l-1:2*l)%(1<<2*(22-s)))),16*(32*x+s)+(r-s)}const _r=[l=>{let r=l.canonical.x-1,s=l.wrap;return r<0&&(r=(1<<l.canonical.z)-1,s--),new rr(l.overscaledZ,s,l.canonical.z,r,l.canonical.y)},l=>{let r=l.canonical.x+1,s=l.wrap;return r===1<<l.canonical.z&&(r=0,s++),new rr(l.overscaledZ,s,l.canonical.z,r,l.canonical.y)},l=>new rr(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,(l.canonical.y===0?1<<l.canonical.z:l.canonical.y)-1),l=>new rr(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y===(1<<l.canonical.z)-1?0:l.canonical.y+1)];Tr(zt,"CanonicalTileID"),Tr(rr,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Kr=Oa([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Ar}=Kr,zr=Oa([{name:"a_pos_3",components:3,type:"Int16"}]);var Hr=Oa([{name:"a_pos",type:"Int16",components:2}]);class pa{constructor(r,s){this.pos=r,this.dir=s}intersectsPlane(r,s,u){const g=Se.vec3.dot(s,this.dir);if(Math.abs(g)<1e-6)return!1;const f=((r[0]-this.pos[0])*s[0]+(r[1]-this.pos[1])*s[1]+(r[2]-this.pos[2])*s[2])/g;return u[0]=this.pos[0]+this.dir[0]*f,u[1]=this.pos[1]+this.dir[1]*f,u[2]=this.pos[2]+this.dir[2]*f,!0}closestPointOnSphere(r,s,u){if(Se.vec3.equals(this.pos,r)||s===0)return u[0]=u[1]=u[2]=0,!1;const[g,f,x]=this.dir,C=this.pos[0]-r[0],M=this.pos[1]-r[1],$=this.pos[2]-r[2],T=g*g+f*f+x*x,A=2*(C*g+M*f+$*x),I=A*A-4*T*(C*C+M*M+$*$-s*s);if(I<0){const P=Math.max(-A/2,0),R=C+g*P,j=M+f*P,W=$+x*P,K=Math.hypot(R,j,W);return u[0]=R*s/K,u[1]=j*s/K,u[2]=W*s/K,!1}{const P=(-A-Math.sqrt(I))/(2*T);if(P<0){const R=Math.hypot(C,M,$);return u[0]=C*s/R,u[1]=M*s/R,u[2]=$*s/R,!1}return u[0]=C+g*P,u[1]=M+f*P,u[2]=$+x*P,!0}}}class oa{constructor(r,s,u,g,f){this.TL=r,this.TR=s,this.BR=u,this.BL=g,this.horizon=f}static fromInvProjectionMatrix(r,s,u){const g=[-1,1,1],f=[1,1,1],x=[1,-1,1],C=[-1,-1,1],M=Se.vec3.transformMat4(g,g,r),$=Se.vec3.transformMat4(f,f,r),T=Se.vec3.transformMat4(x,x,r),A=Se.vec3.transformMat4(C,C,r);return new oa(M,$,T,A,s/u)}}function pn(l,r,s){let u=1/0,g=-1/0;const f=[];for(const x of l){Se.vec3.sub(f,x,r);const C=Se.vec3.dot(f,s);u=Math.min(u,C),g=Math.max(g,C)}return[u,g]}function mn(l,r){let s=!0;for(let u=0;u<l.planes.length;u++){const g=l.planes[u];let f=0;for(let x=0;x<r.length;x++)f+=Se.vec3.dot(g,r[x])+g[3]>=0;if(f===0)return 0;f!==r.length&&(s=!1)}return s?2:1}function Ua(l,r){for(const s of l.projections){const u=pn(r,l.points[0],s.axis);if(s.projection[1]<u[0]||s.projection[0]>u[1])return 0}return 1}function Wa(l,r){let s=0;const u=[0,0,0,0];for(let g=0;g<l.length;g++)u[0]=l[g][0],u[1]=l[g][1],u[2]=l[g][2],u[3]=1,Se.vec4.dot(u,r)>=0&&s++;return s}class ia{constructor(r,s){this.points=r||new Array(8).fill([0,0,0]),this.planes=s||new Array(6).fill([0,0,0,0]),this.bounds=jr.fromPoints(this.points),this.projections=[],this.frustumEdges=[Se.vec3.sub([],this.points[2],this.points[3]),Se.vec3.sub([],this.points[0],this.points[3]),Se.vec3.sub([],this.points[4],this.points[0]),Se.vec3.sub([],this.points[5],this.points[1]),Se.vec3.sub([],this.points[6],this.points[2]),Se.vec3.sub([],this.points[7],this.points[3])];for(const u of this.frustumEdges){const g=[0,-u[2],u[1]],f=[u[2],0,-u[0]];this.projections.push({axis:g,projection:pn(this.points,this.points[0],g)}),this.projections.push({axis:f,projection:pn(this.points,this.points[0],f)})}}static fromInvProjectionMatrix(r,s,u,g){const f=Math.pow(2,u),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map($=>{const T=Se.vec4.transformMat4([],$,r),A=1/T[3]/s*f;return Se.vec4.mul(T,T,[A,A,g?1/T[3]:A,A])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map($=>{const T=Se.vec3.sub([],x[$[0]],x[$[1]]),A=Se.vec3.sub([],x[$[2]],x[$[1]]),I=Se.vec3.normalize([],Se.vec3.cross([],T,A)),P=-Se.vec3.dot(I,x[$[1]]);return I.concat(P)}),M=[];for(let $=0;$<x.length;$++)M.push([x[$][0],x[$][1],x[$][2]]);return new ia(M,C)}intersectsPrecise(r,s,u){for(let g=0;g<s.length;g++)if(!Wa(r,s[g]))return 0;for(let g=0;g<this.planes.length;g++)if(!Wa(r,this.planes[g]))return 0;for(const g of u)for(const f of this.frustumEdges){const x=Se.vec3.cross([],g,f),C=Se.vec3.length(x);if(C===0)continue;Se.vec3.scale(x,x,1/C);const M=pn(this.points,this.points[0],x),$=pn(r,this.points[0],x);if(M[0]>$[1]||$[0]>M[1])return 0}return 1}containsPoint(r){for(const s of this.planes){const u=s[3];if(Se.vec3.dot([s[0],s[1],s[2]],r)+u<0)return!1}return!0}}class jr{static fromPoints(r){const s=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const g of r)Se.vec3.min(s,s,g),Se.vec3.max(u,u,g);return new jr(s,u)}static fromTileIdAndHeight(r,s,u){const g=1<<r.canonical.z,f=r.canonical.x,x=r.canonical.y;return new jr([f/g,x/g,s],[(f+1)/g,(x+1)/g,u])}static applyTransform(r,s){const u=r.getCorners();for(let g=0;g<u.length;++g)Se.vec3.transformMat4(u[g],u[g],s);return jr.fromPoints(u)}static applyTransformFast(r,s){const u=[s[12],s[13],s[14]],g=[...u];for(let f=0;f<3;f++)for(let x=0;x<3;x++){const C=s[4*x+f],M=C*r.min[x],$=C*r.max[x];u[f]+=Math.min(M,$),g[f]+=Math.max(M,$)}return new jr(u,g)}static projectAabbCorners(r,s){const u=r.getCorners();for(let g=0;g<u.length;++g)Se.vec3.transformMat4(u[g],u[g],s);return u}constructor(r,s){this.min=r,this.max=s,this.center=Se.vec3.scale([],Se.vec3.add([],this.min,this.max),.5)}quadrant(r){const s=[r%2==0,r<2],u=Se.vec3.clone(this.min),g=Se.vec3.clone(this.max);for(let f=0;f<s.length;f++)u[f]=s[f]?this.min[f]:this.center[f],g[f]=s[f]?this.center[f]:this.max[f];return g[2]=this.max[2],new jr(u,g)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}distanceZ(r){return Math.max(Math.min(this.max[2],r[2]),this.min[2])-r[2]}getCorners(){const r=this.min,s=this.max;return[[r[0],r[1],r[2]],[s[0],r[1],r[2]],[s[0],s[1],r[2]],[r[0],s[1],r[2]],[r[0],r[1],s[2]],[s[0],r[1],s[2]],[s[0],s[1],s[2]],[r[0],s[1],s[2]]]}intersects(r){return this.intersectsAabb(r.bounds)?mn(r,this.getCorners()):0}intersectsFlat(r){return this.intersectsAabb(r.bounds)?mn(r,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(r,s){return s||this.intersects(r)?Ua(r,this.getCorners()):0}intersectsPreciseFlat(r,s){return s||this.intersectsFlat(r)?Ua(r,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(r){for(let s=0;s<3;++s)if(this.min[s]>r.max[s]||r.min[s]>this.max[s])return!1;return!0}intersectsAabbXY(r){return!(this.min[0]>r.max[0]||r.min[0]>this.max[0]||this.min[1]>r.max[1]||r.min[1]>this.max[1])}encapsulate(r){for(let s=0;s<3;s++)this.min[s]=Math.min(this.min[s],r.min[s]),this.max[s]=Math.max(this.max[s],r.max[s])}encapsulatePoint(r){for(let s=0;s<3;s++)this.min[s]=Math.min(this.min[s],r[s]),this.max[s]=Math.max(this.max[s],r[s])}closestPoint(r){return[Math.max(Math.min(this.max[0],r[0]),this.min[0]),Math.max(Math.min(this.max[1],r[1]),this.min[1]),Math.max(Math.min(this.max[2],r[2]),this.min[2])]}}function Fa(l){return l*os/au}Tr(jr,"Aabb");const Zr=[new jr([co,co,co],[uo,uo,uo]),new jr([co,co,co],[0,0,uo]),new jr([0,co,co],[uo,0,uo]),new jr([co,0,co],[0,uo,uo]),new jr([0,0,co],[uo,uo,uo])];function ya(l,r,s,u=!0){const g=Se.vec3.scale([],l._camera.position,l.worldSize),f=[r,s,1,1];Se.vec4.transformMat4(f,f,l.pixelMatrixInverse),Se.vec4.scale(f,f,1/f[3]);const x=Se.vec3.sub([],f,g),C=Se.vec3.normalize([],x),M=l.globeMatrix,$=[M[12],M[13],M[14]],T=Se.vec3.sub([],$,g),A=Se.vec3.length(T),I=Se.vec3.normalize([],T),P=l.worldSize/(2*Math.PI),R=Se.vec3.dot(I,C),j=Math.asin(P/A);if(j<Math.acos(R)){if(!u)return null;const Je=[],Ve=[];Se.vec3.scale(Je,C,A/R),Se.vec3.normalize(Ve,Se.vec3.sub(Ve,Je,T)),Se.vec3.normalize(C,Se.vec3.add(C,T,Se.vec3.scale(C,Ve,Math.tan(j)*A)))}const W=[];new pa(g,C).closestPointOnSphere($,P,W);const K=Se.vec3.normalize([],qn(M,0)),ne=Se.vec3.normalize([],qn(M,1)),ie=Se.vec3.normalize([],qn(M,2)),J=Se.vec3.dot(K,W),le=Se.vec3.dot(ne,W),fe=Se.vec3.dot(ie,W),ve=Pr(Math.asin(-le/P));let Ne=Pr(Math.atan2(J,fe));Ne=l.center.lng+function(Je,Ve){const et=(Ve-Je+180)%360-180;return et<-180?et+360:et}(l.center.lng,Ne);const $e=ol(Ne),Ie=fr(ls(ve),0,1);return new m($e,Ie)}class xa{constructor(r,s,u){this.a=Se.vec3.sub([],r,u),this.b=Se.vec3.sub([],s,u),this.center=u;const g=Se.vec3.normalize([],this.a),f=Se.vec3.normalize([],this.b);this.angle=Math.acos(Se.vec3.dot(g,f))}}function Pa(l,r){if(l.angle===0)return null;let s;return s=l.a[r]===0?1/l.angle*.5*Math.PI:1/l.angle*Math.atan(l.b[r]/l.a[r]/Math.sin(l.angle)-1/Math.tan(l.angle)),s<0||s>1?null:function(u,g,f,x){const C=Math.sin(f);return u*(Math.sin((1-x)*f)/C)+g*(Math.sin(x*f)/C)}(l.a[r],l.b[r],l.angle,fr(s,0,1))+l.center[r]}function wa(l){if(l.z<=1)return Zr[l.z+2*l.y+l.x];const r=Ga(nn(l));return jr.fromPoints(r)}function En(l,r,s){return Se.vec3.scale(l,l,1-s),Se.vec3.scaleAndAdd(l,l,r,s)}function ai(l,r,s){for(const u of l)Se.vec3.transformMat4(u,u,r),Se.vec3.scale(u,u,s)}function Cn(l,r,s,u){const g=r/l.worldSize,f=l.globeMatrix;if(s.z<=1){const $e=wa(s).getCorners();return ai($e,f,g),jr.fromPoints($e)}const x=nn(s,u),C=Ga(x,os+Fa(l._tileCoverLift));ai(C,f,g);const M=Number.MAX_VALUE,$=[-M,-M,-M],T=[M,M,M];if(x.contains(l.center)){for(const Je of C)Se.vec3.min(T,T,Je),Se.vec3.max($,$,Je);$[2]=0;const $e=l.point,Ie=[$e.x*g,$e.y*g,0];return Se.vec3.min(T,T,Ie),Se.vec3.max($,$,Ie),new jr(T,$)}if(l._tileCoverLift>0){for(const $e of C)Se.vec3.min(T,T,$e),Se.vec3.max($,$,$e);return new jr(T,$)}const A=[f[12]*g,f[13]*g,f[14]*g],I=x.getCenter(),P=fr(l.center.lat,-85.051129,cs),R=fr(I.lat,-85.051129,cs),j=ol(l.center.lng),W=ls(P);let K=j-ol(I.lng);const ne=W-ls(R);K>.5?K-=1:K<-.5&&(K+=1);let ie=0;if(Math.abs(K)>Math.abs(ne))ie=K>=0?1:3;else{ie=ne>=0?0:2;const $e=[f[4]*g,f[5]*g,f[6]*g],Ie=-Math.sin(mr(ne>=0?x.getSouth():x.getNorth()))*os;Se.vec3.scaleAndAdd(A,A,$e,Ie)}const J=C[ie],le=C[(ie+1)%4],fe=new xa(J,le,A),ve=[Pa(fe,0)||J[0],Pa(fe,1)||J[1],Pa(fe,2)||J[2]],Ne=Qi(l.zoom);if(Ne>0){const $e=function({x:Je,y:Ve,z:et},it,at,lt,gt){const vt=1/(1<<et);let ht=Je*vt,Rt=ht+vt,Yt=Ve*vt,Lt=Yt+vt,nr=0;const ar=(ht+Rt)/2-lt;return ar>.5?nr=-1:ar<-.5&&(nr=1),ht=((ht+nr)*it-(lt*=it))*at+lt,Rt=((Rt+nr)*it-lt)*at+lt,Yt=(Yt*it-(gt*=it))*at+gt,Lt=(Lt*it-gt)*at+gt,[[ht,Lt,0],[Rt,Lt,0],[Rt,Yt,0],[ht,Yt,0]]}(s,r,l._pixelsPerMercatorPixel,j,W);for(let Je=0;Je<C.length;Je++)En(C[Je],$e[Je],Ne);const Ie=Se.vec3.add([],$e[ie],$e[(ie+1)%4]);Se.vec3.scale(Ie,Ie,.5),En(ve,Ie,Ne)}for(const $e of C)Se.vec3.min(T,T,$e),Se.vec3.max($,$,$e);return T[2]=Math.min(J[2],le[2]),Se.vec3.min(T,T,ve),Se.vec3.max($,$,ve),new jr(T,$)}function nn({x:l,y:r,z:s},u=!1){const g=1/(1<<s),f=new La(qs(l*g),r===(1<<s)-1&&u?-90:Li((r+1)*g)),x=new La(qs((l+1)*g),r===0&&u?90:Li(r*g));return new sl(f,x)}function Ga(l,r=os){const s=mr(l.getNorth()),u=mr(l.getSouth()),g=Math.cos(s),f=Math.cos(u),x=Math.sin(s),C=Math.sin(u),M=l.getWest(),$=l.getEast();return[ru(f,C,M,r),ru(f,C,$,r),ru(g,x,$,r),ru(g,x,M,r)]}function qr(l,r,s,u){const g=1<<s.z,f=(l/lr+s.x)/g;return Al(Li((r/lr+s.y)/g),qs(f),u)}function vn({min:l,max:r}){return of/Math.max(r[0]-l[0],r[1]-l[1],r[2]-l[2])}const Qn=new Float64Array(16);function an(l){const r=vn(l),s=Se.mat4.fromScaling(Qn,[r,r,r]);return Se.mat4.translate(s,s,Se.vec3.negate([],l.min))}function zn(l){const r=Se.mat4.fromTranslation(Qn,l.min),s=1/vn(l);return Se.mat4.scale(r,r,[s,s,s])}function Yi(l){const r=lr/(2*Math.PI);return l/(2*Math.PI)/r}function Ji(l,r){return lr/(512*Math.pow(2,l))*vn(wa(r))}function fi(l,r,s,u,g){const f=Yi(s),x=[l,r,-s/(2*Math.PI)],C=Se.mat4.identity(new Float64Array(16));return Se.mat4.translate(C,C,x),Se.mat4.scale(C,C,[f,f,f]),Se.mat4.rotateX(C,C,mr(-g)),Se.mat4.rotateY(C,C,mr(-u)),C}function Qi(l){return Sa(sf,Xm,l)}function ho(l,r){const s=Al(r.lat,r.lng),u=function(f){const x=Al(f._center.lat,f._center.lng),C=Se.vec3.fromValues(0,1,0);let M=Se.vec3.cross([],C,x);const $=Se.mat4.fromRotation([],-f.angle,x);M=Se.vec3.transformMat4(M,M,$),Se.mat4.fromRotation($,-f._pitch,M);const T=Se.vec3.normalize([],x);return Se.vec3.scale(T,T,Fa(f.cameraToCenterDistance/f.pixelsPerMeter)),Se.vec3.transformMat4(T,T,$),Se.vec3.add([],x,T)}(l),g=Se.vec3.subtract([],u,s);return Se.vec3.angle(g,s)}function us(l,r){return ho(l,r)>Math.PI/2*1.01}const ll=mr(85),ds=Math.cos(ll),li=Math.sin(ll),No=Se.mat4.create(),vc=l=>{const r=[];return l.paint.get("circle-pitch-alignment")==="map"&&r.push("PITCH_WITH_MAP"),l.paint.get("circle-pitch-scale")==="map"&&r.push("SCALE_WITH_MAP"),r};function _c(l,r,s,u,g,f,x,C,M){if(f&&l.queryGeometry.isAboveHorizon)return!1;f&&(M*=l.pixelToTileUnitsFactor);const $=l.tileID.canonical,T=s.projection.upVectorScale($,s.center.lat,s.worldSize).metersToTile;for(const A of r)for(const I of A){const P=I.add(C),R=g&&s.elevation?s.elevation.exaggeration()*g.getElevationAt(P.x,P.y,!0):0,j=s.projection.projectTilePoint(P.x,P.y,$);if(R>0){const ie=s.projection.upVector($,P.x,P.y);j.x+=ie[0]*T*R,j.y+=ie[1]*T*R,j.z+=ie[2]*T*R}const W=f?P:Sx(j.x,j.y,j.z,u),K=f?l.tilespaceRays.map(ie=>Qm(ie,R)):l.queryGeometry.screenGeometry,ne=Se.vec4.transformMat4([],[j.x,j.y,j.z,1],u);if(!x&&f?M*=ne[3]/s.cameraToCenterDistance:x&&!f&&(M*=s.cameraToCenterDistance/ne[3]),f){const ie=Li((I.y/lr+$.y)/(1<<$.z));M/=s.projection.pixelsPerMeter(ie,1)/Xi(1,ie)}if(_e(K,W,M))return!0}return!1}function Sx(l,r,s,u){const g=Se.vec4.transformMat4([],[l,r,s,1],u);return new dt(g[0]/g[3],g[1]/g[3])}const z0=Se.vec3.fromValues(0,0,0),U_=Se.vec3.fromValues(0,0,1);function Qm(l,r){const s=Se.vec3.create();return z0[2]=r,l.intersectsPlane(z0,U_,s),new dt(s[0],s[1])}class L0 extends he{}let Bo,Tx,jo,Ex;function Cx(l,{width:r,height:s},u,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==r*s*u)throw new RangeError("mismatched image size")}else g=new Uint8Array(r*s*u);return l.width=r,l.height=s,l.data=g,l}function G_(l,r,s){const{width:u,height:g}=r;u===l.width&&g===l.height||(nu(l,r,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,u),height:Math.min(l.height,g)},s,null),l.width=u,l.height=g,l.data=r.data)}function nu(l,r,s,u,g,f,x,C){if(g.width===0||g.height===0)return r;if(g.width>l.width||g.height>l.height||s.x>l.width-g.width||s.y>l.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>r.width||g.height>r.height||u.x>r.width-g.width||u.y>r.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const M=l.data,$=r.data,T=f===4&&C;for(let A=0;A<g.height;A++){const I=((s.y+A)*l.width+s.x)*f,P=((u.y+A)*r.width+u.x)*f;if(T)for(let R=0;R<g.width;R++){const j=I+R*f+3,W=P+R*f;$[W+0]=255,$[W+1]=255,$[W+2]=255,$[W+3]=M[j]}else if(x)for(let R=0;R<g.width;R++){const j=I+R*f,W=P+R*f,K=M[j+3],ne=new Ra(M[j+0]/255*K,M[j+1]/255*K,M[j+2]/255*K,K).toRenderColor(x).toArray();$[W+0]=ne[0],$[W+1]=ne[1],$[W+2]=ne[2],$[W+3]=ne[3]}else for(let R=0;R<g.width*f;R++)$[P+R]=M[I+R]}return r}Tr(L0,"HeatmapBucket",{omit:["layers"]});class bc{constructor(r,s){Cx(this,r,1,s)}resize(r){G_(this,new bc(r),1)}clone(){return new bc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,u,g,f){nu(r,s,u,g,f,1,null)}}class es{constructor(r,s){Cx(this,r,4,s)}resize(r){G_(this,new es(r),4)}replace(r,s){s?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new es({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,u,g,f,x,C){nu(r,s,u,g,f,4,x,C)}}class cf{constructor(r,s){this.width=r.width,this.height=r.height,this.data=s instanceof Uint8Array?new Float32Array(s.buffer):s}}function Bp(l){const r={},s=l.resolution||256,u=l.clips?l.clips.length:1,g=l.image||new es({width:s,height:u}),f=(x,C,M)=>{r[l.evaluationKey]=M;const $=l.expression.evaluate(r);$&&(g.data[x+C+0]=Math.floor(255*$.r/$.a),g.data[x+C+1]=Math.floor(255*$.g/$.a),g.data[x+C+2]=Math.floor(255*$.b/$.a),g.data[x+C+3]=Math.floor(255*$.a))};if(l.clips)for(let x=0,C=0;x<u;++x,C+=4*s)for(let M=0,$=0;M<s;M++,$+=4){const T=M/(s-1),{start:A,end:I}=l.clips[x];f(C,$,A*(1-T)+I*T)}else for(let x=0,C=0;x<s;x++,C+=4)f(0,C,x/(s-1));return g}Tr(bc,"AlphaImage"),Tr(es,"RGBAImage");const H_=Oa([{name:"a_pos",components:2,type:"Int16"}],4),{members:q_}=H_;function uf(l,r,s=2){const u=r&&r.length,g=u?r[0]*s:l.length;let f=$0(l,0,g,s,!0);const x=[];if(!f||f.next===f.prev)return x;let C,M,$;if(u&&(f=function(T,A,I,P){const R=[];for(let j=0,W=A.length;j<W;j++){const K=$0(T,A[j]*P,j<W-1?A[j+1]*P:T.length,P,!1);K===K.next&&(K.steiner=!0),R.push(Y_(K))}R.sort(N0);for(let j=0;j<R.length;j++)I=Z_(R[j],I);return I}(l,r,f,s)),l.length>80*s){C=1/0,M=1/0;let T=-1/0,A=-1/0;for(let I=s;I<g;I+=s){const P=l[I],R=l[I+1];P<C&&(C=P),R<M&&(M=R),P>T&&(T=P),R>A&&(A=R)}$=Math.max(T-C,A-M),$=$!==0?32767/$:0}return eg(f,x,s,C,M,$,0),x}function $0(l,r,s,u,g){let f;if(g===function(x,C,M,$){let T=0;for(let A=C,I=M-$;A<M;A+=$)T+=(x[I]-x[A])*(x[A+1]+x[I+1]),I=A;return T}(l,r,s,u)>0)for(let x=r;x<s;x+=u)f=Q_(x/u|0,l[x],l[x+1],f);else for(let x=s-u;x>=r;x-=u)f=Q_(x/u|0,l[x],l[x+1],f);return f&&tg(f,f.next)&&(ag(f),f=f.next),f}function df(l,r){if(!l)return l;r||(r=l);let s,u=l;do if(s=!1,u.steiner||!tg(u,u.next)&&ni(u.prev,u,u.next)!==0)u=u.next;else{if(ag(u),u=r=u.prev,u===u.next)break;s=!0}while(s||u!==r);return r}function eg(l,r,s,u,g,f,x){if(!l)return;!x&&f&&function(M,$,T,A){let I=M;do I.z===0&&(I.z=B0(I.x,I.y,$,T,A)),I.prevZ=I.prev,I.nextZ=I.next,I=I.next;while(I!==M);I.prevZ.nextZ=null,I.prevZ=null,function(P){let R,j=1;do{let W,K=P;P=null;let ne=null;for(R=0;K;){R++;let ie=K,J=0;for(let fe=0;fe<j&&(J++,ie=ie.nextZ,ie);fe++);let le=j;for(;J>0||le>0&&ie;)J!==0&&(le===0||!ie||K.z<=ie.z)?(W=K,K=K.nextZ,J--):(W=ie,ie=ie.nextZ,le--),ne?ne.nextZ=W:P=W,W.prevZ=ne,ne=W;K=ie}ne.nextZ=null,j*=2}while(R>1)}(I)}(l,u,g,f);let C=l;for(;l.prev!==l.next;){const M=l.prev,$=l.next;if(f?W_(l,u,g,f):E2(l))r.push(M.i,l.i,$.i),ag(l),l=$.next,C=$.next;else if((l=$)===C){x?x===1?eg(l=K_(df(l),r),r,s,u,g,f,2):x===2&&jp(l,r,s,u,g,f):eg(df(l),r,s,u,g,f,1);break}}}function E2(l){const r=l.prev,s=l,u=l.next;if(ni(r,s,u)>=0)return!1;const g=r.x,f=s.x,x=u.x,C=r.y,M=s.y,$=u.y,T=g<f?g<x?g:x:f<x?f:x,A=C<M?C<$?C:$:M<$?M:$,I=g>f?g>x?g:x:f>x?f:x,P=C>M?C>$?C:$:M>$?M:$;let R=u.next;for(;R!==r;){if(R.x>=T&&R.x<=I&&R.y>=A&&R.y<=P&&hf(g,C,f,M,x,$,R.x,R.y)&&ni(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function W_(l,r,s,u){const g=l.prev,f=l,x=l.next;if(ni(g,f,x)>=0)return!1;const C=g.x,M=f.x,$=x.x,T=g.y,A=f.y,I=x.y,P=C<M?C<$?C:$:M<$?M:$,R=T<A?T<I?T:I:A<I?A:I,j=C>M?C>$?C:$:M>$?M:$,W=T>A?T>I?T:I:A>I?A:I,K=B0(P,R,r,s,u),ne=B0(j,W,r,s,u);let ie=l.prevZ,J=l.nextZ;for(;ie&&ie.z>=K&&J&&J.z<=ne;){if(ie.x>=P&&ie.x<=j&&ie.y>=R&&ie.y<=W&&ie!==g&&ie!==x&&hf(C,T,M,A,$,I,ie.x,ie.y)&&ni(ie.prev,ie,ie.next)>=0||(ie=ie.prevZ,J.x>=P&&J.x<=j&&J.y>=R&&J.y<=W&&J!==g&&J!==x&&hf(C,T,M,A,$,I,J.x,J.y)&&ni(J.prev,J,J.next)>=0))return!1;J=J.nextZ}for(;ie&&ie.z>=K;){if(ie.x>=P&&ie.x<=j&&ie.y>=R&&ie.y<=W&&ie!==g&&ie!==x&&hf(C,T,M,A,$,I,ie.x,ie.y)&&ni(ie.prev,ie,ie.next)>=0)return!1;ie=ie.prevZ}for(;J&&J.z<=ne;){if(J.x>=P&&J.x<=j&&J.y>=R&&J.y<=W&&J!==g&&J!==x&&hf(C,T,M,A,$,I,J.x,J.y)&&ni(J.prev,J,J.next)>=0)return!1;J=J.nextZ}return!0}function K_(l,r){let s=l;do{const u=s.prev,g=s.next.next;!tg(u,g)&&Dx(u,s,s.next,g)&&rg(u,g)&&rg(g,u)&&(r.push(u.i,s.i,g.i),ag(s),ag(s.next),s=l=g),s=s.next}while(s!==l);return df(s)}function jp(l,r,s,u,g,f){let x=l;do{let C=x.next.next;for(;C!==x.prev;){if(x.i!==C.i&&J_(x,C)){let M=Px(x,C);return x=df(x,x.next),M=df(M,M.next),eg(x,r,s,u,g,f,0),void eg(M,r,s,u,g,f,0)}C=C.next}x=x.next}while(x!==l)}function N0(l,r){return l.x-r.x}function Z_(l,r){const s=function(g,f){let x=f;const C=g.x,M=g.y;let $,T=-1/0;do{if(M<=x.y&&M>=x.next.y&&x.next.y!==x.y){const j=x.x+(M-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(j<=C&&j>T&&(T=j,$=x.x<x.next.x?x:x.next,j===C))return $}x=x.next}while(x!==f);if(!$)return null;const A=$,I=$.x,P=$.y;let R=1/0;x=$;do{if(C>=x.x&&x.x>=I&&C!==x.x&&hf(M<P?C:T,M,I,P,M<P?T:C,M,x.x,x.y)){const j=Math.abs(M-x.y)/(C-x.x);rg(x,g)&&(j<R||j===R&&(x.x>$.x||x.x===$.x&&X_($,x)))&&($=x,R=j)}x=x.next}while(x!==A);return $}(l,r);if(!s)return r;const u=Px(s,l);return df(u,u.next),df(s,s.next)}function X_(l,r){return ni(l.prev,l,r.prev)<0&&ni(r.next,l,l.next)<0}function B0(l,r,s,u,g){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-s)*g|0)|l<<8))|l<<4))|l<<2))|l<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-u)*g|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Y_(l){let r=l,s=l;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==l);return s}function hf(l,r,s,u,g,f,x,C){return(g-x)*(r-C)>=(l-x)*(f-C)&&(l-x)*(u-C)>=(s-x)*(r-C)&&(s-x)*(f-C)>=(g-x)*(u-C)}function J_(l,r){return l.next.i!==r.i&&l.prev.i!==r.i&&!function(s,u){let g=s;do{if(g.i!==s.i&&g.next.i!==s.i&&g.i!==u.i&&g.next.i!==u.i&&Dx(g,g.next,s,u))return!0;g=g.next}while(g!==s);return!1}(l,r)&&(rg(l,r)&&rg(r,l)&&function(s,u){let g=s,f=!1;const x=(s.x+u.x)/2,C=(s.y+u.y)/2;do g.y>C!=g.next.y>C&&g.next.y!==g.y&&x<(g.next.x-g.x)*(C-g.y)/(g.next.y-g.y)+g.x&&(f=!f),g=g.next;while(g!==s);return f}(l,r)&&(ni(l.prev,l,r.prev)||ni(l,r.prev,r))||tg(l,r)&&ni(l.prev,l,l.next)>0&&ni(r.prev,r,r.next)>0)}function ni(l,r,s){return(r.y-l.y)*(s.x-r.x)-(r.x-l.x)*(s.y-r.y)}function tg(l,r){return l.x===r.x&&l.y===r.y}function Dx(l,r,s,u){const g=Op(ni(l,r,s)),f=Op(ni(l,r,u)),x=Op(ni(s,u,l)),C=Op(ni(s,u,r));return g!==f&&x!==C||!(g!==0||!Ln(l,s,r))||!(f!==0||!Ln(l,u,r))||!(x!==0||!Ln(s,l,u))||!(C!==0||!Ln(s,r,u))}function Ln(l,r,s){return r.x<=Math.max(l.x,s.x)&&r.x>=Math.min(l.x,s.x)&&r.y<=Math.max(l.y,s.y)&&r.y>=Math.min(l.y,s.y)}function Op(l){return l>0?1:l<0?-1:0}function rg(l,r){return ni(l.prev,l,l.next)<0?ni(l,r,l.next)>=0&&ni(l,l.prev,r)>=0:ni(l,r,l.prev)<0||ni(l,l.next,r)<0}function Px(l,r){const s=Mx(l.i,l.x,l.y),u=Mx(r.i,r.x,r.y),g=l.next,f=r.prev;return l.next=r,r.prev=l,s.next=g,g.prev=s,u.next=s,s.prev=u,f.next=u,u.prev=f,u}function Q_(l,r,s,u){const g=Mx(l,r,s);return u?(g.next=u.next,g.prev=u,u.next.prev=g,u.next=g):(g.prev=g,g.next=g),g}function ag(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Mx(l,r,s){return{i:l,x:r,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function ff(l,r){const s=l.length;if(s<=1)return[l];const u=[];let g,f;for(let x=0;x<s;x++){const C=Ka(l[x]);C!==0&&(l[x].area=Math.abs(C),f===void 0&&(f=C<0),f===C<0?(g&&u.push(g),g=[l[x]]):g.push(l[x]))}if(g&&u.push(g),r>1)for(let x=0;x<u.length;x++)u[x].length<=r||(f0(u[x],r,1,u[x].length-1,Fp),u[x]=u[x].slice(0,r));return u}function Fp(l,r){return r.area-l.area}function j0(l,r){if(!l)return null;const s=typeof l=="string"?l:l.getPrimary().id;r[s]||(r[s]=[]);const u=Ai.from(l).getPrimary();return r[s].push(u),u.serialize()}function Vp(l,r,s){const u=s.patternDependencies;let g=!1;for(const f of r){const x=f.paint.get(`${l}-pattern`);x.isConstant()||(g=!0),j0(x.constantOr(null),u)&&(g=!0)}return g}function ng(l,r,s,u,g){const f=g.patternDependencies;for(const x of r){const C=x.paint.get(`${l}-pattern`).value;if(C.kind!=="constant"){let M=C.evaluate({zoom:u},s,{},g.availableImages);M=M&&M.name?M.name:M;const $=j0(M,f);$&&(s.patterns[x.id]=$)}}return s}class ld{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ao,this.indexArray=new Fi,this.indexArray2=new pc,this.programConfigurations=new tu(r.layers,{zoom:r.zoom,lut:r.lut}),this.segments=new An,this.segments2=new An,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.projection=r.projection}updateFootprints(r,s){}populate(r,s,u,g){this.hasPattern=Vp("fill",this.layers,s);const f=this.layers[0].layout.get("fill-sort-key"),x=[];for(const{feature:C,id:M,index:$,sourceLayerIndex:T}of r){const A=this.layers[0]._featureFilter.needGeometry,I=X(C,A);if(!this.layers[0]._featureFilter.filter(new Ea(this.zoom),I,u))continue;const P=f?f.evaluate(I,{},u,s.availableImages):void 0,R={id:M,properties:C.properties,type:C.type,sourceLayerIndex:T,index:$,geometry:A?I.geometry:Z(C,u,g),patterns:{},sortKey:P};x.push(R)}f&&x.sort((C,M)=>C.sortKey-M.sortKey);for(const C of x){const{geometry:M,index:$,sourceLayerIndex:T}=C;if(this.hasPattern){const A=ng("fill",this.layers,C,this.zoom,s);this.patternFeatures.push(A)}else this.addFeature(C,M,$,u,{},s.availableImages,s.brightness);s.featureIndex.insert(r[$].feature,M,$,T,this.index)}}update(r,s,u,g,f,x,C){this.programConfigurations.updatePaintArrays(r,s,f,u,g,x,C)}addFeatures(r,s,u,g,f,x){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,s,u,g,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,q_),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,s,u,g,f,x=[],C){for(const M of ff(s,500)){let $=0;for(const j of M)$+=j.length;const T=this.segments.prepareSegment($,this.layoutVertexArray,this.indexArray),A=T.vertexLength,I=[],P=[];for(const j of M){if(j.length===0)continue;j!==M[0]&&P.push(I.length/2);const W=this.segments2.prepareSegment(j.length,this.layoutVertexArray,this.indexArray2),K=W.vertexLength;this.layoutVertexArray.emplaceBack(j[0].x,j[0].y),this.indexArray2.emplaceBack(K+j.length-1,K),I.push(j[0].x),I.push(j[0].y);for(let ne=1;ne<j.length;ne++)this.layoutVertexArray.emplaceBack(j[ne].x,j[ne].y),this.indexArray2.emplaceBack(K+ne-1,K+ne),I.push(j[ne].x),I.push(j[ne].y);W.vertexLength+=j.length,W.primitiveLength+=j.length}const R=uf(I,P);for(let j=0;j<R.length;j+=3)this.indexArray.emplaceBack(A+R[j],A+R[j+1],A+R[j+2]);T.vertexLength+=$,T.primitiveLength+=R.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,f,x,g,C)}}let wc,Up,eb,Ax;Tr(ld,"FillBucket",{omit:["layers","patternFeatures"]});class O0{constructor(r,s,u,g){if(this.triangleCount=s.length/3,this.min=new dt(0,0),this.max=new dt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||r.length===0)return;const[f,x]=[r[0].clone(),r[0].clone()];for(let A=1;A<r.length;++A){const I=r[A];f.x=Math.min(f.x,I.x),f.y=Math.min(f.y,I.y),x.x=Math.max(x.x,I.x),x.y=Math.max(x.y,I.y)}if(g){const A=Math.ceil(Math.max(x.x-f.x,x.y-f.y)/g);u=Math.max(u,A)}if(u===0)return;this.min=f,this.max=x;const C=this.max.sub(this.min);C.x=Math.max(C.x,1),C.y=Math.max(C.y,1);const M=Math.max(C.x,C.y)/u;this.cellsX=Math.max(1,Math.ceil(C.x/M)),this.cellsY=Math.max(1,Math.ceil(C.y/M)),this.xScale=1/M,this.yScale=1/M;const $=[];for(let A=0;A<this.triangleCount;A++){const I=r[s[3*A+0]].sub(this.min),P=r[s[3*A+1]].sub(this.min),R=r[s[3*A+2]].sub(this.min),j=Sc(Math.floor(Math.min(I.x,P.x,R.x)),this.xScale,this.cellsX),W=Sc(Math.floor(Math.max(I.x,P.x,R.x)),this.xScale,this.cellsX),K=Sc(Math.floor(Math.min(I.y,P.y,R.y)),this.yScale,this.cellsY),ne=Sc(Math.floor(Math.max(I.y,P.y,R.y)),this.yScale,this.cellsY),ie=new dt(0,0),J=new dt(0,0),le=new dt(0,0),fe=new dt(0,0);for(let ve=K;ve<=ne;++ve){ie.y=J.y=ve*M,le.y=fe.y=(ve+1)*M;for(let Ne=j;Ne<=W;++Ne)ie.x=le.x=Ne*M,J.x=fe.x=(Ne+1)*M,(st(I,P,R,ie,J,fe)||st(I,P,R,ie,fe,le))&&$.push({cellIdx:ve*this.cellsX+Ne,triIdx:A})}}if($.length===0)return;$.sort((A,I)=>A.cellIdx-I.cellIdx||A.triIdx-I.triIdx);let T=0;for(;T<$.length;){const A=$[T].cellIdx,I={start:this.payload.length,len:0};for(;T<$.length&&$[T].cellIdx===A;)++I.len,this.payload.push($[T++].triIdx);this.cells[A]=I}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(r,s){if(this.triangleCount===0||this.cells.length===0||r.x>this.max.x||this.min.x>r.x||r.y>this.max.y||this.min.y>r.y)return;const u=Sc(r.x-this.min.x,this.xScale,this.cellsX),g=Sc(r.y-this.min.y,this.yScale,this.cellsY),f=this.cells[g*this.cellsX+u];if(f){this._lazyInitLookup();for(let x=0;x<f.len;x++){const C=this.payload[f.start+x],M=Math.floor(C/8),$=1<<C%8;if(!(this.lookup[M]&$)&&(this.lookup[M]|=$,s.push(C),s.length===this.triangleCount))return}}}query(r,s,u){if(this.triangleCount===0||this.cells.length===0||r.x>this.max.x||this.min.x>s.x||r.y>this.max.y||this.min.y>s.y)return;this._lazyInitLookup();const g=Sc(r.x-this.min.x,this.xScale,this.cellsX),f=Sc(s.x-this.min.x,this.xScale,this.cellsX),x=Sc(r.y-this.min.y,this.yScale,this.cellsY),C=Sc(s.y-this.min.y,this.yScale,this.cellsY);for(let M=x;M<=C;M++)for(let $=g;$<=f;$++){const T=this.cells[M*this.cellsX+$];if(T)for(let A=0;A<T.len;A++){const I=this.payload[T.start+A],P=Math.floor(I/8),R=1<<I%8;if(!(this.lookup[P]&R)&&(this.lookup[P]|=R,u.push(I),u.length===this.triangleCount))return}}}}function Sc(l,r,s){return Math.max(0,Math.min(s-1,Math.floor(l*r)))}Tr(O0,"TriangleGridIndex");class kx{constructor(r){this.zoom=r.zoom,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.footprints=[]}updateFootprints(r,s){for(const u of this.footprints)s.push({footprint:u,id:r})}populate(r,s,u,g){const f=[];for(const{feature:x,id:C,index:M,sourceLayerIndex:$}of r){const T=this.layers[0]._featureFilter.needGeometry,A=X(x,T);if(!this.layers[0]._featureFilter.filter(new Ea(this.zoom),A,u))continue;const I={id:C,properties:x.properties,type:x.type,sourceLayerIndex:$,index:M,geometry:T?A.geometry:Z(x,u,g),patterns:{}};f.push(I)}for(const x of f){const{geometry:C,index:M,sourceLayerIndex:$}=x;this.addFeature(x,C,M,u,{},s.availableImages,s.brightness),s.featureIndex.insert(r[M].feature,C,M,$,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(r){}update(r,s,u,g,f,x,C){}destroy(){}addFeature(r,s,u,g,f,x=[],C){for(const M of ff(s,2)){const $=[],T=[],A=[],I=new dt(1/0,1/0),P=new dt(-1/0,-1/0);for(const W of M)if(W.length!==0){W!==M[0]&&A.push(T.length/2);for(let K=0;K<W.length;K++)T.push(W[K].x),T.push(W[K].y),$.push(W[K]),I.x=Math.min(I.x,W[K].x),I.y=Math.min(I.y,W[K].y),P.x=Math.max(P.x,W[K].x),P.y=Math.max(P.y,W[K].y)}const R=uf(T,A),j=new O0($,R,8,256);this.footprints.push({vertices:$,indices:R,grid:j,min:I,max:P})}}}Tr(kx,"ClipBucket",{omit:["layers"]});const C2=Oa([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Rx=Oa([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),tb=Oa([{name:"a_centroid_pos",components:2,type:"Uint16"}]),rb=Oa([{name:"a_join_normal_inside",components:3,type:"Int16"}]),D2=Oa([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),Ix=Oa([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:zx}=C2;var Lx,ab,pf,nb,F0,gn,V0,mf={};function U0(){if(ab)return Lx;ab=1;var l=yt();function r(g,f,x,C,M){this.properties={},this.extent=x,this.type=0,this._pbf=g,this._geometry=-1,this._keys=C,this._values=M,g.readFields(s,this,f)}function s(g,f,x){g==1?f.id=x.readVarint():g==2?function(C,M){for(var $=C.readVarint()+C.pos;C.pos<$;){var T=M._keys[C.readVarint()],A=M._values[C.readVarint()];M.properties[T]=A}}(x,f):g==3?f.type=x.readVarint():g==4&&(f._geometry=x.pos)}function u(g){for(var f,x,C=0,M=0,$=g.length,T=$-1;M<$;T=M++)C+=((x=g[T]).x-(f=g[M]).x)*(f.y+x.y);return C}return Lx=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var f,x=g.readVarint()+g.pos,C=1,M=0,$=0,T=0,A=[];g.pos<x;){if(M<=0){var I=g.readVarint();C=7&I,M=I>>3}if(M--,C===1||C===2)$+=g.readSVarint(),T+=g.readSVarint(),C===1&&(f&&A.push(f),f=[]),f.push(new l($,T));else{if(C!==7)throw new Error("unknown command "+C);f&&f.push(f[0].clone())}}return f&&A.push(f),A},r.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var f=g.readVarint()+g.pos,x=1,C=0,M=0,$=0,T=1/0,A=-1/0,I=1/0,P=-1/0;g.pos<f;){if(C<=0){var R=g.readVarint();x=7&R,C=R>>3}if(C--,x===1||x===2)(M+=g.readSVarint())<T&&(T=M),M>A&&(A=M),($+=g.readSVarint())<I&&(I=$),$>P&&(P=$);else if(x!==7)throw new Error("unknown command "+x)}return[T,I,A,P]},r.prototype.toGeoJSON=function(g,f,x){var C,M,$=this.extent*Math.pow(2,x),T=this.extent*g,A=this.extent*f,I=this.loadGeometry(),P=r.types[this.type];function R(K){for(var ne=0;ne<K.length;ne++){var ie=K[ne];K[ne]=[360*(ie.x+T)/$-180,360/Math.PI*Math.atan(Math.exp((180-360*(ie.y+A)/$)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(C=0;C<I.length;C++)j[C]=I[C][0];R(I=j);break;case 2:for(C=0;C<I.length;C++)R(I[C]);break;case 3:for(I=function(K){var ne=K.length;if(ne<=1)return[K];for(var ie,J,le=[],fe=0;fe<ne;fe++){var ve=u(K[fe]);ve!==0&&(J===void 0&&(J=ve<0),J===ve<0?(ie&&le.push(ie),ie=[K[fe]]):ie.push(K[fe]))}return ie&&le.push(ie),le}(I),C=0;C<I.length;C++)for(M=0;M<I[C].length;M++)R(I[C][M])}I.length===1?I=I[0]:P="Multi"+P;var W={type:"Feature",geometry:{type:P,coordinates:I},properties:this.properties};return"id"in this&&(W.id=this.id),W},Lx}function $x(){if(nb)return pf;nb=1;var l=U0();function r(u,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(s,this,g),this.length=this._features.length}function s(u,g,f){u===15?g.version=f.readVarint():u===1?g.name=f.readString():u===5?g.extent=f.readVarint():u===2?g._features.push(f.pos):u===3?g._keys.push(f.readString()):u===4&&g._values.push(function(x){for(var C=null,M=x.readVarint()+x.pos;x.pos<M;){var $=x.readVarint()>>3;C=$===1?x.readString():$===2?x.readFloat():$===3?x.readDouble():$===4?x.readVarint64():$===5?x.readVarint():$===6?x.readSVarint():$===7?x.readBoolean():null}return C}(f))}return pf=r,r.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var g=this._pbf.readVarint()+this._pbf.pos;return new l(this._pbf,g,this.extent,this._keys,this._values)},pf}function G0(){return V0||(V0=1,mf.VectorTile=function(){if(gn)return F0;gn=1;var l=$x();function r(s,u,g){if(s===3){var f=new l(g,g.readVarint()+g.pos);f.length&&(u[f.name]=f)}}return F0=function(s,u){this.layers=s.readFields(r,{},u)},F0}(),mf.VectorTileFeature=U0(),mf.VectorTileLayer=$x()),mf}var iu=G0();class su extends dt{constructor(r,s,u){super(r,s),this.z=u}}class gf extends su{constructor(r,s,u,g){super(r,s,u),this.w=g}}function ig(l,r,s,u){const g=[],f=u===0?(x,C,M,$,T,A)=>{x.push(new dt(A,M+(A-C)/($-C)*(T-M)))}:(x,C,M,$,T,A)=>{x.push(new dt(C+(A-M)/(T-M)*($-C),A))};for(const x of l){const C=[];for(const M of x){if(M.length<=2)continue;const $=[];for(let I=0;I<M.length-1;I++){const P=M[I].x,R=M[I].y,j=M[I+1].x,W=M[I+1].y,K=u===0?P:R,ne=u===0?j:W;K<r?ne>r&&f($,P,R,j,W,r):K>s?ne<s&&f($,P,R,j,W,s):$.push(M[I]),ne<r&&K>=r&&f($,P,R,j,W,r),ne>s&&K<=s&&f($,P,R,j,W,s)}let T=M[M.length-1];const A=u===0?T.x:T.y;A>=r&&A<=s&&$.push(T),$.length&&(T=$[$.length-1],$[0].x===T.x&&$[0].y===T.y||$.push($[0]),C.push($))}C.length&&g.push(C)}return g}function ib(l,r,s,u){const g=s==="x"?"y":"x",f=(u-l[s])/(r[s]-l[s]);l[g]=l[g]+(r[g]-l[g])*f,l[s]=u,l.hasOwnProperty("z")&&(l.z=Or(l.z,r.z,f)),l.hasOwnProperty("w")&&(l.w=Or(l.w,r.w,f))}function sb(l,r,s,u){const g=s,f=u;for(const x of["x","y"]){let C=l,M=r;C[x]>=M[x]&&(C=r,M=l),C[x]<g&&M[x]>g&&ib(C,M,x,g),C[x]<f&&M[x]>f&&ib(M,C,x,f)}}const sg=Number.MAX_SAFE_INTEGER;function Nx(l,r,s,u){return l.order<r||l.order===sg||!(l.clipMask&s)||function(g,f){return f.length!==0&&f.find(x=>x===g)===void 0}(u,l.clipScope)}function yf(l,r){return l.x-r.x||l.y-r.y}function On(l,r){return yf(l.min,r.min)===0&&yf(l.max,r.max)===0}function og(l,r){return!(l.min.x>r.max.x||l.max.x<r.min.x||l.min.y>r.max.y||l.max.y<r.min.y)}function hs(l,r){if(l.length!==r.length)return!1;for(let s=0;s<l.length;s++)if(l[s].sourceId!==r[s].sourceId||!On(l[s],r[s])||l[s].order!==r[s].order||l[s].clipMask!==r[s].clipMask||!$t(l[s].clipScope,r[s].clipScope))return!1;return!0}function ob(l,r,s){const u=1/lr,g=1/(1<<s.canonical.z),f=(r.x*u+s.canonical.x)*g+s.wrap,x=(r.y*u+s.canonical.y)*g;return{min:new dt((l.x*u+s.canonical.x)*g+s.wrap,(l.y*u+s.canonical.y)*g),max:new dt(f,x)}}function Bx(l,r,s){const u=1<<s.canonical.z,g=((r.x-s.wrap)*u-s.canonical.x)*lr,f=(r.y*u-s.canonical.y)*lr;return{min:new dt(((l.x-s.wrap)*u-s.canonical.x)*lr,(l.y*u-s.canonical.y)*lr),max:new dt(g,f)}}function H0(l,r,s,u,g,f,x){const C=l.indices,M=l.vertices,$=[];for(let T=u;T<u+g;T+=3){const A=r[s[T+0]+f],I=r[s[T+1]+f],P=r[s[T+2]+f],R=Math.min(A.x,I.x,P.x),j=Math.max(A.x,I.x,P.x),W=Math.min(A.y,I.y,P.y),K=Math.max(A.y,I.y,P.y);$.length=0,l.grid.query(new dt(R,W),new dt(j,K),$);for(let ne=0;ne<$.length;ne++){const ie=$[ne];if(st(M[C[3*ie+0]],M[C[3*ie+1]],M[C[3*ie+2]],A,I,P,x))return!0}}return!1}function lg(l,r,s,u){if(!l||!s)return!1;let g=l.vertices;if(!r.canonical.equals(u.canonical)||r.wrap!==u.wrap){if(s.vertices.length<l.vertices.length)return lg(s,u,l,r);const f=r.canonical,x=u.canonical,C=Math.pow(2,x.z-f.z);g=l.vertices.map(M=>new dt((M.x+f.x*lr)*C-x.x*lr,(M.y+f.y*lr)*C-x.y*lr))}return H0(s,g,l.indices,0,l.indices.length,0,0)}function jx(l,r,s,u){const g=Math.pow(2,u.z-s.z);return new dt((l+s.x*lr)*g-u.x*lr,(r+s.y*lr)*g-u.y*lr)}function Ox(l,r){const s=[];r.grid.queryPoint(l,s);const u=r.indices,g=r.vertices;for(let f=0;f<s.length;f++){const x=s[f];if(tt([g[u[3*x+0]],g[u[3*x+1]],g[u[3*x+2]]],l))return!0}return!1}const cg=[new dt(0,0),new dt(lr,0),new dt(lr,lr),new dt(0,lr)];function q0(l,r){const s=[];let u=[];if(!r||l.length<2)return[l];if(l.length===2)return Et(l[0],l[1],cg)?[l]:[];for(let g=0;g<l.length+2;g++){const f=l[g%l.length],x=l[(g+1)%l.length],C=Et(g===0?l[l.length-1]:l[(g-1)%l.length],f,cg),M=Et(f,x,cg),$=C||M;$&&u.push(f),$&&M||u.length>0&&(u.length>1&&s.push(u),u=[])}return u.length>1&&s.push(u),s}const Fx=iu.VectorTileFeature.types,lb=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],P2=["fill-extrusion-flood-light-ground-radius"],cb=Math.pow(2,13),M2=Math.pow(2,15)-1,ub=new dt(0,1),fo=2147483648;function Gp(l,r,s,u,g,f,x,C){l.emplaceBack((r<<1)+x,(s<<1)+f,(Math.floor(u*cb)<<1)+g,Math.round(C))}function xf(l,r,s){l.emplaceBack(r.x*lr,r.y*lr,s?1:0)}function W0(l,r,s,u,g,f){l.emplaceBack(r.x,r.y,(s.x<<1)+u,(s.y<<1)+g,f)}function ug(l,r,s){l.emplaceBack(r.x,r.y,r.z,s[0]*16384,s[1]*16384,s[2]*16384)}class K0{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class db{constructor(){this.centroidXY=new dt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new dt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new dt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new dt(this.max.x-this.min.x,this.max.y-this.min.y)}}class Rl{constructor(){this.acc=new dt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(r,s){r.min.x===Number.MAX_VALUE&&(r.min.x=r.max.x=s.x,r.min.y=r.max.y=s.y)}appendEdge(r,s,u){this.accCount++,this.acc._add(s);let g=!!this.borders;s.x<r.min.x?(r.min.x=s.x,g=!0):s.x>r.max.x&&(r.max.x=s.x,g=!0),s.y<r.min.y?(r.min.y=s.y,g=!0):s.y>r.max.y&&(r.max.y=s.y,g=!0),((s.x===0||s.x===lr)&&s.x===u.x)!=((s.y===0||s.y===lr)&&s.y===u.y)&&this.processBorderOverlap(s,u),g&&this.checkBorderIntersection(s,u)}checkBorderIntersection(r,s){s.x<0!=r.x<0&&this.addBorderIntersection(0,Or(s.y,r.y,(0-s.x)/(r.x-s.x))),s.x>lr!=r.x>lr&&this.addBorderIntersection(1,Or(s.y,r.y,(lr-s.x)/(r.x-s.x))),s.y<0!=r.y<0&&this.addBorderIntersection(2,Or(s.x,r.x,(0-s.y)/(r.y-s.y))),s.y>lr!=r.y>lr&&this.addBorderIntersection(3,Or(s.x,r.x,(lr-s.y)/(r.y-s.y)))}addBorderIntersection(r,s){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[r];s<u[0]&&(u[0]=s),s>u[1]&&(u[1]=s)}processBorderOverlap(r,s){if(r.x===s.x){if(r.y===s.y)return;const u=r.x===0?0:1;this.addBorderIntersection(u,s.y),this.addBorderIntersection(u,r.y)}else{const u=r.y===0?2:3;this.addBorderIntersection(u,s.x),this.addBorderIntersection(u,r.x)}}centroid(){return this.accCount===0?new dt(0,0):new dt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((r,s)=>r+ +(s[0]!==Number.MAX_VALUE),0):0}}function Z0(l,r){const s=l.add(r)._unit(),u=fr(l.x*s.x+l.y*s.y,-1,1);var g,f,x;return x=Math.acos(u),Math.min(4,Math.max(-4,Math.tan(x)))/4*M2*((g=l).x*(f=r).y-g.y*f.x<0?-1:1)}const hb=[l=>l.x<0,l=>l.x>lr,l=>l.y<0,l=>l.y>lr];function fb(l,r,s,u){const g=[4];if(u===0)return g;s._mult(u);const f=l.sub(s),x=r.sub(s),C=[l,r,f,x];for(let M=0;M<4;M++)for(const $ of C)if(hb[M]($)){g.push(M);break}return g}class Hp{constructor(r){this.vertexArray=new Sp,this.indexArray=new Fi,this.programConfigurations=new tu(r.layers,{zoom:r.zoom,lut:r.lut},s=>P2.includes(s)),this._segments=new An,this.hiddenByLandmarkVertexArray=new Mp,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new An}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(r,s,u,g=!1){const f=r.length;if(f>2){let x=Math.max(0,this._segments.get().length-1);const C=this._segments._prepareSegment(4*f,this.vertexArray.length,2*this._segmentToGroundQuads[x].length);let M;x!==this._segments.get().length-1&&(x++,this._segmentToGroundQuads[x]=[],this._segmentToRegionTriCounts[x]=[0,0,0,0,0]);{const $=r[0],T=r[1];M=Z0($.sub(r[f-1])._perp()._unit(),T.sub($)._perp()._unit())}for(let $=0;$<f;$++){const T=$===f-1?0:$+1,A=r[$],I=r[T],P=r[T===f-1?0:T+1],R=I.sub(A)._perp()._unit(),j=Z0(R,P.sub(I)._perp()._unit()),W=M,K=j;if(Ux(A,I,s)||g&&pb(A,s)&&pb(I,s)){M=j;continue}const ne=C.vertexLength;W0(this.vertexArray,A,I,1,1,W),W0(this.vertexArray,A,I,1,0,W),W0(this.vertexArray,A,I,0,1,K),W0(this.vertexArray,A,I,0,0,K),C.vertexLength+=4;const ie=fb(A,I,R,u);for(const J of ie)this._segmentToGroundQuads[x].push({id:ne,region:J}),this._segmentToRegionTriCounts[x][J]+=2,C.primitiveLength+=2;M=j}}}prepareBorderSegments(){if(!this.hasData())return;const r=this._segments.get(),s=r.length;for(let u=0;u<s;u++)this._segmentToGroundQuads[u].sort((g,f)=>g.region-f.region);for(let u=0;u<s;u++){const g=this._segmentToGroundQuads[u],f=r[u],x=this._segmentToRegionTriCounts[u];x.reduce((M,$)=>M+$,0);let C=0;for(let M=0;M<=4;M++){const $=x[M];if($!==0){let T=this.regionSegments[M];T||(T=this.regionSegments[M]=new An);const A={vertexOffset:f.vertexOffset,primitiveOffset:f.primitiveOffset+C,vertexLength:f.vertexLength,primitiveLength:$};T.get().push(A)}C+=$}for(let M=0;M<g.length;M++){const $=g[M].id;this.indexArray.emplaceBack($,$+1,$+3),this.indexArray.emplaceBack($,$+3,$+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(r,s,u,g,f,x){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,r,s,u,g,f,x)}upload(r){this.hasData()&&(this.vertexBuffer=r.createVertexBuffer(this.vertexArray,Rx.members),this.indexBuffer=r.createIndexBuffer(this.indexArray))}uploadPaintProperties(r){this.hasData()&&this.programConfigurations.upload(r)}update(r,s,u,g,f,x,C){this.hasData()&&this.programConfigurations.updatePaintArrays(r,s,u,g,f,x,C)}updateHiddenByLandmark(r){if(!this.hasData())return;const s=r.groundVertexCount+r.groundVertexArrayOffset;if(r.groundVertexCount===0)return;const u=r.flags&fo?1:0;for(let g=r.groundVertexArrayOffset;g<s;++g)this.hiddenByLandmarkVertexArray.emplace(g,u);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(r){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=r.createVertexBuffer(this.hiddenByLandmarkVertexArray,D2.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let r=0;r<=4;r++){const s=this.regionSegments[r];s&&s.destroy()}}}}class po{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=r.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Fi,this.footprintVertices=new ao,this.footprintSegments=[],this.layoutVertexArray=new cc,this.centroidVertexArray=new A0,this.wallVertexArray=new th,this.indexArray=new Fi,this.programConfigurations=new tu(r.layers,{zoom:r.zoom,lut:r.lut},s=>lb.includes(s)),this.segments=new An,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.groundEffect=new Hp(r),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(r,s){}populate(r,s,u,g){this.features=[],this.hasPattern=Vp("fill-extrusion",this.layers,s),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=o(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:f,id:x,index:C,sourceLayerIndex:M}of r){const $=this.layers[0]._featureFilter.needGeometry,T=X(f,$);if(!this.layers[0]._featureFilter.filter(new Ea(this.zoom),T,u))continue;const A={id:x,sourceLayerIndex:M,index:C,geometry:$?T.geometry:Z(f,u,g),properties:f.properties,type:f.type,patterns:{}},I=this.layoutVertexArray.length,P=Fx[A.type]==="Polygon";if(this.hasPattern)this.features.push(ng("fill-extrusion",this.layers,A,this.zoom,s));else if(this.wallMode)for(const R of A.geometry)for(const j of q0(R,P))this.addFeature(A,[j],C,u,{},s.availableImages,g,s.brightness);else this.addFeature(A,A.geometry,C,u,{},s.availableImages,g,s.brightness);s.featureIndex.insert(f,A.geometry,C,M,this.index,I)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(r,s,u,g,f,x){for(const C of this.features){const M=Fx[C.type]==="Polygon",{geometry:$}=C;if(this.wallMode)for(const T of $)for(const A of q0(T,M))this.addFeature(C,[A],C.index,s,u,g,f,x);else this.addFeature(C,$,C.index,s,u,g,f,x)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(r,s,u,g,f,x,C){this.programConfigurations.updatePaintArrays(r,s,f,u,g,x,C),this.groundEffect.update(r,s,f,u,g,x,C)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,zx),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.wallVertexBuffer=r.createVertexBuffer(this.wallVertexArray,rb.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=r.createVertexBuffer(this.layoutVertexExtArray,Ix.members,!0)),this.groundEffect.upload(r)),this.groundEffect.uploadPaintProperties(r),this.programConfigurations.upload(r),this.uploaded=!0}uploadCentroid(r){this.groundEffect.uploadHiddenByLandmark(r),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,tb.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,s,u,g,f,x,C,M){const $=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(r,{})/this.tileToMeter,T=[new dt(0,0),new dt(lr,lr)],A=C.projection,I=A.name==="globe",P=this.wallMode||Fx[r.type]==="Polygon",R=new Rl;R.centroidDataIndex=this.centroidData.length;const j=new db,W=this.layers[0].paint.get("fill-extrusion-base").evaluate(r,{},g)<=0,K=this.layers[0].paint.get("fill-extrusion-height").evaluate(r,{},g);let ne;if(j.height=K,j.vertexArrayOffset=this.layoutVertexArray.length,j.groundVertexArrayOffset=this.groundEffect.vertexArray.length,I&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Qu),this.wallMode){if(I)return void Wr("Non zero fill-extrusion-line-width is not yet supported on globe.");if(s.length!==1)return;ne=function(Ie){const Je=Ie[0].x===Ie[Ie.length-1].x&&Ie[0].y===Ie[Ie.length-1].y;(function(gr){let jt=0;const Mr=gr.length;for(let sr=0;sr<Mr;sr++)jt+=(gr[(sr+1)%Mr].x-gr[sr].x)*(gr[(sr+1)%Mr].y+gr[sr].y);return jt>=0})(Ie)||(Ie=Ie.reverse());const et={geometry:[],joinNormals:[],indices:[]},it=[],at=[],lt=[];let gt=Ie.length;for(;gt>=2&&Ie[gt-1].equals(Ie[gt-2]);)gt--;if(gt<(Je?3:2))return et;let vt,ht,Rt,Yt,Lt,nr=0;for(;nr<gt-1&&Ie[nr].equals(Ie[nr+1]);)nr++;Je&&(vt=Ie[gt-2],Lt=Ie[nr].sub(vt)._unit()._perp());for(let gr=nr;gr<gt;gr++){if(Rt=gr===gt-1?Je?Ie[nr+1]:void 0:Ie[gr+1],Rt&&Ie[gr].equals(Rt))continue;Lt&&(Yt=Lt),vt&&(ht=vt),vt=Ie[gr],Lt=Rt?Rt.sub(vt)._unit()._perp():Yt,Yt=Yt||Lt;let jt=Yt.add(Lt);jt.x===0&&jt.y===0||jt._unit();const Mr=jt.x*Lt.x+jt.y*Lt.y,sr=Mr!==0?1/Mr:1/0,Cr=Yt.x*Lt.y-Yt.y*Lt.x>0;let Vr="miter";const sa=2;Vr==="miter"&&sr>sa&&(Vr="bevel"),Vr==="bevel"&&(sr>100&&(Vr="flipbevel"),sr<sa&&(Vr="miter"));const ha=(ba,fa,Da,_n)=>{const cn=new dt(ba.x,ba.y),ta=new dt(ba.x,ba.y);cn.x+=fa.x*_n,cn.y+=fa.y*_n,ta.x-=fa.x*Math.max(Da,1),ta.y-=fa.y*Math.max(Da,1),lt.push(fa),it.push(cn),at.push(ta)};if(Vr==="miter")jt._mult(sr),ha(vt,jt,0,0);else if(Vr==="flipbevel")jt=Lt.mult(-1),ha(vt,jt,0,0),ha(vt,jt.mult(-1),0,0);else{const ba=-Math.sqrt(sr*sr-1),fa=Cr?ba:0,Da=Cr?0:ba;ht&&ha(vt,Yt,fa,Da),Rt&&ha(vt,Lt,fa,Da)}}et.geometry=[...it,...at.reverse(),it[0]],et.joinNormals=[...lt,...lt.reverse(),lt[lt.length-1]];const ar=et.geometry.length-1;for(let gr=0;gr<ar/2;gr++)if(gr+1<ar/2){let jt=gr,Mr=gr+1,sr=ar-1-gr,Cr=ar-2-gr;jt=jt===0?ar-1:jt-1,Mr=Mr===0?ar-1:Mr-1,sr=sr===0?ar-1:sr-1,Cr=Cr===0?ar-1:Cr-1,et.indices.push(sr),et.indices.push(Mr),et.indices.push(jt),et.indices.push(sr),et.indices.push(Cr),et.indices.push(Mr)}return et}(s[0]),s=[ne.geometry]}const ie=(Ie,Je)=>Ie<(Je.length-1)/2||Ie===Je.length-1,J=this.wallMode?[s]:ff(s,500);for(let Ie=J.length-1;Ie>=0;Ie--){const Je=J[Ie];(Je.length===0||(le=Je[0]).every(Ve=>Ve.x<=0)||le.every(Ve=>Ve.x>=lr)||le.every(Ve=>Ve.y<=0)||le.every(Ve=>Ve.y>=lr))&&J.splice(Ie,1)}var le;let fe;if(I)fe=gb(J,T,g);else{fe=[];for(const Ie of J)fe.push({polygon:Ie,bounds:T})}const ve=P?this.edgeRadius:0,Ne=ve>0&&this.zoom<17,$e=(Ie,Je)=>{if(Ie.length===0)return!1;const Ve=Ie[Ie.length-1];return Je.x===Ve.x&&Je.y===Ve.y};for(const{polygon:Ie,bounds:Je}of fe){let Ve=0,et=0;for(const gt of Ie)P&&!gt[0].equals(gt[gt.length-1])&&gt.push(gt[0]),et+=P?gt.length-1:gt.length;const it=this.segments.prepareSegment((P?5:4)*et,this.layoutVertexArray,this.indexArray);j.footprintSegIdx<0&&(j.footprintSegIdx=this.footprintSegments.length),j.polygonSegIdx<0&&(j.polygonSegIdx=this.polygonSegments.length);const at={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},lt=new K0;if(lt.vertexOffset=this.footprintVertices.length,lt.indexOffset=3*this.footprintIndices.length,lt.ringIndices=[],P){const gt=[],vt=[];Ve=it.vertexLength;for(let Rt=0;Rt<Ie.length;Rt++){const Yt=Ie[Rt];Yt.length&&Rt!==0&&vt.push(gt.length/2);const Lt=[];let nr,ar;nr=Yt[1].sub(Yt[0])._perp()._unit(),lt.ringIndices.push(Yt.length-1);for(let gr=1;gr<Yt.length;gr++){const jt=Yt[gr],Mr=Yt[gr===Yt.length-1?1:gr+1],sr=jt.clone();if(ve){ar=Mr.sub(jt)._perp()._unit();const Cr=nr.add(ar)._unit(),Vr=ve*Math.min(4,1/(nr.x*Cr.x+nr.y*Cr.y));sr.x+=Vr*Cr.x,sr.y+=Vr*Cr.y,sr.x=Math.round(sr.x),sr.y=Math.round(sr.y),nr=ar}if(!W||ve!==0&&!Ne||$e(Lt,sr)||Lt.push(sr),Gp(this.layoutVertexArray,sr.x,sr.y,0,0,1,1,0),this.wallMode){const Cr=ie(gr,Yt);xf(this.wallVertexArray,ne.joinNormals[gr],!Cr)}it.vertexLength++,this.footprintVertices.emplaceBack(jt.x,jt.y),gt.push(jt.x,jt.y),I&&ug(this.layoutVertexExtArray,A.projectTilePoint(sr.x,sr.y,g),A.upVector(g,sr.x,sr.y))}W&&(ve===0||Ne)&&(Lt.length!==0&&$e(Lt,Lt[0])&&Lt.pop(),this.groundEffect.addData(Lt,Je,$))}const ht=this.wallMode?ne.indices:uf(gt,vt);for(let Rt=0;Rt<ht.length;Rt+=3)this.footprintIndices.emplaceBack(lt.vertexOffset+ht[Rt+0],lt.vertexOffset+ht[Rt+1],lt.vertexOffset+ht[Rt+2]),this.indexArray.emplaceBack(Ve+ht[Rt],Ve+ht[Rt+2],Ve+ht[Rt+1]),it.primitiveLength++;lt.indexCount+=ht.length,lt.vertexCount+=this.footprintVertices.length-lt.vertexOffset}for(let gt=0;gt<Ie.length;gt++){const vt=Ie[gt];R.startRing(j,vt[0]);let ht=vt.length>4&&vf(vt[vt.length-2],vt[0],vt[1]),Rt=ve?X0(vt[vt.length-2],vt[0],vt[1],ve):0;const Yt=[];let Lt,nr,ar;nr=vt[1].sub(vt[0])._perp()._unit();let gr=!0;for(let jt=1,Mr=0;jt<vt.length;jt++){let sr=vt[jt-1],Cr=vt[jt];const Vr=vt[jt===vt.length-1?1:jt+1];if(R.appendEdge(j,Cr,sr),Ux(Cr,sr,Je)){ve&&(nr=Vr.sub(Cr)._perp()._unit(),gr=!gr);continue}const sa=Cr.sub(sr)._perp(),ha=sa.x/(Math.abs(sa.x)+Math.abs(sa.y)),ba=sa.y>0?1:0,fa=sr.dist(Cr);if(Mr+fa>32768&&(Mr=0),ve){ar=Vr.sub(Cr)._perp()._unit();let ta=ou(sr,Cr,Vr,Vx(nr,ar),ve);isNaN(ta)&&(ta=0);const un=Cr.sub(sr)._unit();sr=sr.add(un.mult(Rt))._round(),Cr=Cr.add(un.mult(-ta))._round(),Rt=ta,nr=ar,W&&this.zoom>=17&&($e(Yt,sr)||Yt.push(sr),$e(Yt,Cr)||Yt.push(Cr))}const Da=it.vertexLength,_n=vt.length>4&&vf(sr,Cr,Vr);let cn=Gx(Mr,ht,gr);if(Gp(this.layoutVertexArray,sr.x,sr.y,ha,ba,0,0,cn),Gp(this.layoutVertexArray,sr.x,sr.y,ha,ba,0,1,cn),this.wallMode){const ta=ie(jt-1,vt),un=ne.joinNormals[jt-1];xf(this.wallVertexArray,un,ta),xf(this.wallVertexArray,un,ta)}if(Mr+=fa,cn=Gx(Mr,_n,!gr),ht=_n,Gp(this.layoutVertexArray,Cr.x,Cr.y,ha,ba,0,0,cn),Gp(this.layoutVertexArray,Cr.x,Cr.y,ha,ba,0,1,cn),this.wallMode){const ta=ie(jt,vt),un=ne.joinNormals[jt];xf(this.wallVertexArray,un,ta),xf(this.wallVertexArray,un,ta)}if(it.vertexLength+=4,this.indexArray.emplaceBack(Da+0,Da+1,Da+2),this.indexArray.emplaceBack(Da+1,Da+3,Da+2),it.primitiveLength+=2,ve){const ta=Ve+(jt===1?vt.length-2:jt-2),un=jt===1?Ve:ta+1;if(this.indexArray.emplaceBack(Da+1,ta,Da+3),this.indexArray.emplaceBack(ta,un,Da+3),it.primitiveLength+=2,Lt===void 0&&(Lt=Da),!Ux(Vr,vt[jt],Je)){const sn=jt===vt.length-1?Lt:it.vertexLength;this.indexArray.emplaceBack(Da+2,Da+3,sn),this.indexArray.emplaceBack(Da+3,sn+1,sn),this.indexArray.emplaceBack(Da+3,un,sn+1),it.primitiveLength+=3}gr=!gr}if(I){const ta=this.layoutVertexExtArray,un=A.projectTilePoint(sr.x,sr.y,g),sn=A.projectTilePoint(Cr.x,Cr.y,g),bn=A.upVector(g,sr.x,sr.y),wi=A.upVector(g,Cr.x,Cr.y);ug(ta,un,bn),ug(ta,un,bn),ug(ta,sn,wi),ug(ta,sn,wi)}}P&&(Ve+=vt.length-1),W&&ve&&this.zoom>=17&&(Yt.length!==0&&$e(Yt,Yt[0])&&Yt.pop(),this.groundEffect.addData(Yt,Je,$,ve>0))}this.footprintSegments.push(lt),at.triangleCount=this.indexArray.length-at.triangleArrayOffset,this.polygonSegments.push(at),++j.footprintSegLen,++j.polygonSegLen}if(j.vertexCount=this.layoutVertexArray.length-j.vertexArrayOffset,j.groundVertexCount=this.groundEffect.vertexArray.length-j.groundVertexArrayOffset,j.vertexCount!==0){if(j.centroidXY=R.borders?ub:this.encodeCentroid(R,j),this.centroidData.push(j),R.borders){this.featuresOnBorder.push(R);const Ie=this.featuresOnBorder.length-1;for(let Je=0;Je<R.borders.length;Je++)R.borders[Je][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[Je].push(Ie)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,f,x,g,M),this.groundEffect.addPaintPropertiesData(r,u,f,x,g,M),this.maxHeight=Math.max(this.maxHeight,K)}}sortBorders(){for(let r=0;r<this.borderFeatureIndices.length;r++)this.borderFeatureIndices[r].sort((s,u)=>this.featuresOnBorder[s].borders[r][0]-this.featuresOnBorder[u].borders[r][0])}splitToSubtiles(){const r=[];for(let C=0;C<this.centroidData.length;C++){const M=this.centroidData[C],$=+(M.min.y+M.max.y>lr),T=2*$+(+(M.min.x+M.max.x>lr)^$);for(let A=0;A<M.polygonSegLen;A++){const I=M.polygonSegIdx+A;r.push({centroidIdx:C,subtile:T,polygonSegmentIdx:I,triangleSegmentIdx:this.polygonSegments[I].triangleSegIdx})}}const s=new Fi;r.sort((C,M)=>C.triangleSegmentIdx===M.triangleSegmentIdx?C.subtile-M.subtile:C.triangleSegmentIdx-M.triangleSegmentIdx);let u=0,g=0,f=0;for(const C of r){if(C.triangleSegmentIdx!==u)break;f++}const x=r.length;for(;g!==r.length;){u=r[g].triangleSegmentIdx;let C=0,M=g,$=g;for(let T=M;T<f&&r[T].subtile===C;T++)$++;for(;M!==f;){const T=r[M];C=T.subtile;const A=this.centroidData[T.centroidIdx].min.clone(),I=this.centroidData[T.centroidIdx].max.clone(),P={vertexOffset:this.segments.segments[u].vertexOffset,primitiveOffset:s.length,vertexLength:this.segments.segments[u].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let R=M;R<$;R++){const j=r[R],W=this.polygonSegments[j.polygonSegmentIdx],K=this.centroidData[j.centroidIdx].min,ne=this.centroidData[j.centroidIdx].max,ie=this.indexArray.uint16;for(let J=W.triangleArrayOffset;J<W.triangleArrayOffset+W.triangleCount;J++)s.emplaceBack(ie[3*J],ie[3*J+1],ie[3*J+2]);P.primitiveLength+=W.triangleCount,A.x=Math.min(A.x,K.x),A.y=Math.min(A.y,K.y),I.x=Math.max(I.x,ne.x),I.y=Math.max(I.y,ne.y)}P.primitiveLength>0&&this.triangleSubSegments.push({segment:P,min:A,max:I}),M=$;for(let R=M;R<f&&r[R].subtile===r[M].subtile;R++)$++}g=f;for(let T=g;T<x&&r[T].triangleSegmentIdx===r[g].triangleSegmentIdx;T++)f++}s._trim(),this.indexArray=s}getVisibleSegments(r,s,u){const g=new An;if(this.wallMode){for(const j of this.triangleSubSegments)g.segments.push(j.segment);return g}let f=0,x=0;const C=1<<r.canonical.z;if(s){const j=s.getMinMaxForTile(r);j&&(f=j.min,x=j.max)}x+=this.maxHeight;const M=r.toUnwrapped();let $;const T=[M.canonical.x/C+M.wrap,M.canonical.y/C],A=[(M.canonical.x+1)/C+M.wrap,(M.canonical.y+1)/C],I=(j,W,K)=>[j[0]*(1-K[0])+W[0]*K[0],j[1]*(1-K[1])+W[1]*K[1]],P=[],R=[];for(const j of this.triangleSubSegments){P[0]=j.min.x/lr,P[1]=j.min.y/lr,R[0]=j.max.x/lr,R[1]=j.max.y/lr;const W=I(T,A,P),K=I(T,A,R);if(new jr([W[0],W[1],f],[K[0],K[1],x]).intersectsPrecise(u)===0){$&&(g.segments.push($),$=void 0);continue}const ne=j.segment;$&&$.vertexOffset!==ne.vertexOffset&&(g.segments.push($),$=void 0),$?($.vertexLength+=ne.vertexLength,$.primitiveLength+=ne.primitiveLength):$={vertexOffset:ne.vertexOffset,primitiveLength:ne.primitiveLength,vertexLength:ne.vertexLength,primitiveOffset:ne.primitiveOffset,sortKey:void 0,vaos:{}}}return $&&g.segments.push($),g}encodeCentroid(r,s){const u=r.centroid(),g=s.span(),f=Math.min(7,Math.round(g.x*this.tileToMeter/10)),x=Math.min(7,Math.round(g.y*this.tileToMeter/10));return new dt(fr(u.x,1,lr-1)<<3|f,fr(u.y,1,lr-1)<<3|x)}encodeBorderCentroid(r){if(!r.borders)return new dt(0,0);const s=r.borders,u=Number.MAX_VALUE;if(s[0][0]!==u||s[1][0]!==u){const g=s[0][0]!==u?0:1;return new dt(6|(s[0][0]!==u?0:65528),(s[g][0]+s[g][1])/2<<3|6)}{const g=s[2][0]!==u?2:3;return new dt((s[g][0]+s[g][1])/2<<3|6,6|(s[2][0]!==u?0:65528))}}showCentroid(r){const s=this.centroidData[r.centroidDataIndex];s.flags&=fo,s.centroidXY.x=0,s.centroidXY.y=0,this.writeCentroidToBuffer(s)}writeCentroidToBuffer(r){this.groundEffect.updateHiddenByLandmark(r);const s=r.vertexArrayOffset,u=r.vertexCount+r.vertexArrayOffset,g=r.flags&fo?ub:r.centroidXY,f=this.centroidVertexArray.geta_centroid_pos0(s);if(this.centroidVertexArray.geta_centroid_pos1(s)!==g.y||f!==g.x){for(let x=s;x<u;++x)this.centroidVertexArray.emplace(x,g.x,g.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const r of this.centroidData)this.writeCentroidToBuffer(r)}updateReplacement(r,s,u){if(s.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=s.updateTime;const g=s.getReplacementRegionsForTile(r.toUnwrapped());if(hs(this.activeReplacements,g))return;if(this.activeReplacements=g,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const x of this.centroidData)x.flags&=2147483647;const f=[];for(const x of this.activeReplacements){if(x.order<u)continue;const C=Math.max(1,Math.pow(2,x.footprintTileId.canonical.z-r.canonical.z));for(const M of this.centroidData)if(!(M.flags&fo||x.min.x>M.max.x||M.min.x>x.max.x||x.min.y>M.max.y||M.min.y>x.max.y))for(let $=0;$<M.footprintSegLen;$++){const T=this.footprintSegments[M.footprintSegIdx+$];if(f.length=0,A2(this.footprintVertices,T.vertexOffset,T.vertexCount,x.footprintTileId.canonical,r.canonical,f),H0(x.footprint,f,this.footprintIndices.uint16,T.indexOffset,T.indexCount,-T.vertexOffset,-C)){M.flags|=fo;break}}}for(const x of this.centroidData)this.writeCentroidToBuffer(x);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(r,s,u){let g=!1;for(let f=0;f<u.footprintSegLen;f++){const x=this.footprintSegments[u.footprintSegIdx+f];let C=0;for(const M of x.ringIndices){for(let $=C,T=M+C-1;$<M+C;T=$++){const A=this.footprintVertices.int16[2*($+x.vertexOffset)+0],I=this.footprintVertices.int16[2*($+x.vertexOffset)+1],P=this.footprintVertices.int16[2*(T+x.vertexOffset)+1];I>s!=P>s&&r<(this.footprintVertices.int16[2*(T+x.vertexOffset)+0]-A)*(s-I)/(P-I)+A&&(g=!g)}C=M}}return g}getHeightAtTileCoord(r,s){let u=Number.NEGATIVE_INFINITY,g=!0;const f=4*(r+lr)*lr+(s+lr);if(this.partLookup.hasOwnProperty(f)){const x=this.partLookup[f];return x?{height:x.height,hidden:!!(x.flags&fo)}:void 0}for(const x of this.centroidData)r>x.max.x||x.min.x>r||s>x.max.y||x.min.y>s||this.footprintContainsPoint(r,s,x)&&x&&x.height>u&&(u=x.height,this.partLookup[f]=x,g=!!(x.flags&fo));if(u!==Number.NEGATIVE_INFINITY)return{height:u,hidden:g};this.partLookup[f]=void 0}}function Vx(l,r){const s=l.add(r)._unit();return l.x*s.x+l.y*s.y}function X0(l,r,s,u){const g=r.sub(l)._perp()._unit(),f=s.sub(r)._perp()._unit();return ou(l,r,s,Vx(g,f),u)}function ou(l,r,s,u,g){const f=Math.sqrt(1-u*u);return Math.min(l.dist(r)/3,r.dist(s)/3,g*f/u)}function Ux(l,r,s){return l.x<s[0].x&&r.x<s[0].x||l.x>s[1].x&&r.x>s[1].x||l.y<s[0].y&&r.y<s[0].y||l.y>s[1].y&&r.y>s[1].y}function pb(l,r){return l.x<r[0].x||l.x>r[1].x||l.y<r[0].y||l.y>r[1].y}function vf(l,r,s){if(l.x<0||l.x>=lr||r.x<0||r.x>=lr||s.x<0||s.x>=lr)return!1;const u=s.sub(r),g=u.perp(),f=l.sub(r);return(u.x*f.x+u.y*f.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(f.x*f.x+f.y*f.y))>-.866&&g.x*f.x+g.y*f.y<0}function Gx(l,r,s){const u=r?2|l:-3&l;return s?1|u:-2&u}function mb(){const l=Math.PI/32,r=Math.tan(l),s=au;return s*Math.sqrt(1+2*r*r)-s}function gb(l,r,s){const u=1<<s.z,g=qs(s.x/u),f=qs((s.x+1)/u),x=Li(s.y/u),C=Li((s.y+1)/u);return function(M,$,T,A,I=0,P){const R=[];if(!M.length||!T||!A)return R;const j=(fe,ve)=>{for(const Ne of fe)R.push({polygon:Ne,bounds:ve})},W=Math.ceil(Math.log2(T)),K=Math.ceil(Math.log2(A)),ne=W-K,ie=[];for(let fe=0;fe<Math.abs(ne);fe++)ie.push(ne>0?0:1);for(let fe=0;fe<Math.min(W,K);fe++)ie.push(0),ie.push(1);let J=M;if(J=ig(J,$[0].y-I,$[1].y+I,1),J=ig(J,$[0].x-I,$[1].x+I,0),!J.length)return R;const le=[];for(ie.length?le.push({polygons:J,bounds:$,depth:0}):j(J,$);le.length;){const fe=le.pop(),ve=fe.depth,Ne=ie[ve],$e=fe.bounds[0],Ie=fe.bounds[1],Je=Ne===0?$e.x:$e.y,Ve=Ne===0?Ie.x:Ie.y,et=P?P(Ne,Je,Ve):.5*(Je+Ve),it=ig(fe.polygons,Je-I,et+I,Ne),at=ig(fe.polygons,et-I,Ve+I,Ne);if(it.length){const lt=[$e,new dt(Ne===0?et:Ie.x,Ne===1?et:Ie.y)];ie.length>ve+1?le.push({polygons:it,bounds:lt,depth:ve+1}):j(it,lt)}if(at.length){const lt=[new dt(Ne===0?et:$e.x,Ne===1?et:$e.y),Ie];ie.length>ve+1?le.push({polygons:at,bounds:lt,depth:ve+1}):j(at,lt)}}return R}(l,r,Math.ceil((f-g)/11.25),Math.ceil((x-C)/11.25),1,(M,$,T)=>{if(M===0)return .5*($+T);{const A=Li((s.y+$/lr)/u);return(ls(.5*(Li((s.y+T/lr)/u)+A))*u-s.y)*lr}})}function A2(l,r,s,u,g,f){const x=Math.pow(2,u.z-g.z);for(let C=0;C<s;C++){let M=l.int16[2*(C+r)+0],$=l.int16[2*(C+r)+1];M=(M+g.x*lr)*x-u.x*lr,$=($+g.y*lr)*x-u.y*lr,f.push(new dt(M,$))}}let yb,xb;function dg(l,r){return l.x*r.x+l.y*r.y}function vb(l,r){if(l.length===1){let s=0;const u=r[s++];let g;for(;!g||u.equals(g);)if(g=r[s++],!g)return 1/0;for(;s<r.length;s++){const f=r[s],x=l[0],C=g.sub(u),M=f.sub(u),$=x.sub(u),T=dg(C,C),A=dg(C,M),I=dg(M,M),P=dg($,C),R=dg($,M),j=T*I-A*A,W=(I*P-A*R)/j,K=(T*R-A*P)/j,ne=u.z*(1-W-K)+g.z*W+f.z*K;if(isFinite(ne))return ne}return 1/0}{let s=1/0;for(const u of r)s=Math.min(s,u.z);return s}}function Hx(l,r,s,u,g,f,x,C){const M=x*g.getElevationAt(l,r,!0,!0),$=f[0]!==0,T=$?f[1]===0?x*(f[0]/7-450):x*function(A,I,P){const R=Math.floor(I[0]/8),j=Math.floor(I[1]/8),W=10*(I[0]-8*R),K=10*(I[1]-8*j),ne=A.getElevationAt(R,j,!0,!0),ie=A.getMeterToDEM(P),J=Math.floor(.5*(W*ie-1)),le=Math.floor(.5*(K*ie-1)),fe=A.tileCoordToPixel(R,j),ve=2*J+1,Ne=2*le+1,$e=function(at,lt,gt,vt,ht){return[at.getElevationAtPixel(lt,gt,!0),at.getElevationAtPixel(lt+ht,gt,!0),at.getElevationAtPixel(lt,gt+ht,!0),at.getElevationAtPixel(lt+vt,gt+ht,!0)]}(A,fe.x-J,fe.y-le,ve,Ne),Ie=Math.abs($e[0]-$e[1]),Je=Math.abs($e[2]-$e[3]),Ve=Math.abs($e[0]-$e[2])+Math.abs($e[1]-$e[3]),et=Math.min(.25,.5*ie*(Ie+Je)/ve),it=Math.min(.25,.5*ie*Ve/Ne);return ne+Math.max(et*W,it*K)}(g,f,C):M;return{base:M+(s===0?-1:s),top:$?Math.max(T+u,M+s+2):M+u}}Tr(po,"FillExtrusionBucket",{omit:["layers","features"]}),Tr(db,"PartData"),Tr(K0,"FootprintSegment"),Tr(Rl,"BorderCentroidData"),Tr(Hp,"GroundEffect");const qp=Oa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),hg=Oa([{name:"a_z_offset_width",components:2,type:"Float32"}],4),{members:_b}=qp,k2=Oa([{name:"a_packed",components:4,type:"Float32"}]),{members:Wp}=k2,fg=Oa([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:bb}=fg;class pg{constructor(r,s){this.width=r,this.height=s,this.nextRow=0,this.image=new bc({width:r,height:s}),this.positions={},this.uploaded=!1}getDash(r,s){const u=this.getKey(r,s);return this.positions[u]}trim(){const r=this.width,s=this.height=Zn(this.nextRow);this.image.resize({width:r,height:s})}getKey(r,s){return r.join(",")+s}getDashRanges(r,s,u){const g=[];let f=r.length%2==1?-r[r.length-1]*u:0,x=r[0]*u,C=!0;g.push({left:f,right:x,isDash:C,zeroLength:r[0]===0});let M=r[0];for(let $=1;$<r.length;$++){C=!C;const T=r[$];f=M*u,M+=T,x=M*u,g.push({left:f,right:x,isDash:C,zeroLength:T===0})}return g}addRoundDash(r,s,u){const g=s/2;for(let f=-u;f<=u;f++){const x=this.width*(this.nextRow+u+f);let C=0,M=r[C];for(let $=0;$<this.width;$++){$/M.right>1&&(M=r[++C]);const T=Math.abs($-M.left),A=Math.abs($-M.right),I=Math.min(T,A);let P;const R=f/u*(g+1);if(M.isDash){const j=g-Math.abs(R);P=Math.sqrt(I*I+j*j)}else P=g-Math.sqrt(I*I+R*R);this.image.data[x+$]=Math.max(0,Math.min(255,P+128))}}}addRegularDash(r,s){for(let M=r.length-1;M>=0;--M){const $=r[M],T=r[M+1];$.zeroLength?r.splice(M,1):T&&T.isDash===$.isDash&&(T.left=$.left,r.splice(M,1))}const u=r[0],g=r[r.length-1];u.isDash===g.isDash&&(u.left=g.left-this.width,g.right=u.right+this.width);const f=this.width*this.nextRow;let x=0,C=r[x];for(let M=0;M<this.width;M++){M/C.right>1&&(C=r[++x]);const $=Math.abs(M-C.left),T=Math.abs(M-C.right),A=Math.min($,T);this.image.data[f+M]=Math.max(0,Math.min(255,(C.isDash?A:-A)+s+128))}}addDash(r,s){const u=this.getKey(r,s);if(this.positions[u])return this.positions[u];const g=s==="round",f=g?7:0,x=2*f+1;if(this.nextRow+x>this.height)return Wr("LineAtlas out of space"),null;r.length===0&&r.push(1);let C=0;for(let T=0;T<r.length;T++)r[T]<0&&(Wr("Negative value is found in line dasharray, replacing values with 0"),r[T]=0),C+=r[T];if(C!==0){const T=this.width/C,A=this.getDashRanges(r,this.width,T);g?this.addRoundDash(A,T,f):this.addRegularDash(A,s==="square"?.5*T:0)}const M=this.nextRow+f;this.nextRow+=x;const $={tl:[M,f],br:[C,0]};return this.positions[u]=$,$}}Tr(pg,"LineAtlas");const qx=iu.VectorTileFeature.types,Wx=Math.cos(Math.PI/180*37.5),Y0=Math.cos(Math.PI/180*5);class J0{constructor(r){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.zoom=r.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.projection=r.projection,this.hasPattern=!1,this.hasZOffset=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new no,this.layoutVertexArray2=new uc,this.patternVertexArray=new dc,this.indexArray=new Fi,this.programConfigurations=new tu(r.layers,{zoom:r.zoom,lut:r.lut}),this.segments=new An,this.maxLineLength=0,this.zOffsetVertexArray=new mc,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.tessellationStep=r.tessellationStep?r.tessellationStep:lr/64}updateFootprints(r,s){}populate(r,s,u,g){this.hasPattern=Vp("line",this.layers,s);const f=this.layers[0].layout.get("line-sort-key");this.tileToMeter=o(u),this.hasZOffset=!this.layers[0].isDraped();const x=this.layers[0].layout.get("line-elevation-reference");this.hasZOffset&&x==="none"&&Wr(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`);const C=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.hasZOffset&&C!==void 0;const M=[];for(const{feature:I,id:P,index:R,sourceLayerIndex:j}of r){const W=this.layers[0]._featureFilter.needGeometry,K=X(I,W);if(!this.layers[0]._featureFilter.filter(new Ea(this.zoom),K,u))continue;const ne=f?f.evaluate(K,{},u):void 0,ie={id:P,properties:I.properties,type:I.type,sourceLayerIndex:j,index:R,geometry:W?K.geometry:Z(I,u,g),patterns:{},sortKey:ne};M.push(ie)}f&&M.sort((I,P)=>I.sortKey-P.sortKey);const{lineAtlas:$,featureIndex:T}=s,A=this.addConstantDashes($);for(const I of M){const{geometry:P,index:R,sourceLayerIndex:j}=I;if(A&&this.addFeatureDashes(I,$),this.hasPattern){const W=ng("line",this.layers,I,this.zoom,s);this.patternFeatures.push(W)}else this.addFeature(I,P,R,u,$.positions,s.availableImages,s.brightness);T.insert(r[R].feature,P,R,j,this.index)}}addConstantDashes(r){let s=!1;for(const u of this.layers){const g=u.paint.get("line-dasharray").value,f=u.layout.get("line-cap").value;if(g.kind!=="constant"||f.kind!=="constant")s=!0;else{const x=f.value,C=g.value;if(!C)continue;r.addDash(C,x)}}return s}addFeatureDashes(r,s){const u=this.zoom;for(const g of this.layers){const f=g.paint.get("line-dasharray").value,x=g.layout.get("line-cap").value;if(f.kind==="constant"&&x.kind==="constant")continue;let C,M;if(f.kind==="constant"){if(C=f.value,!C)continue}else C=f.evaluate({zoom:u},r);M=x.kind==="constant"?x.value:x.evaluate({zoom:u},r),s.addDash(C,M),r.patterns[g.id]=s.getKey(C,M)}}update(r,s,u,g,f,x,C){this.programConfigurations.updatePaintArrays(r,s,f,u,g,x,C)}addFeatures(r,s,u,g,f,x){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,s,u,g,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,Wp)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=r.createVertexBuffer(this.patternVertexArray,bb)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=r.createVertexBuffer(this.zOffsetVertexArray,hg.members,!0)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,_b),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,s,u,g,f,x,C){const M=this.layers[0].layout,$=M.get("line-join").evaluate(r,{}),T=M.get("line-cap").evaluate(r,{}),A=M.get("line-miter-limit"),I=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(r),this.lineFeature=r,this.zOffsetValue=M.get("line-z-offset").value;const P=this.layers[0].paint.get("line-width").value;P.kind!=="constant"&&P.isLineProgressConstant===!1&&(this.variableWidthValue=P);for(const R of s)this.addLine(R,r,g,$,T,A,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,f,x,g,C)}addLine(r,s,u,g,f,x,C){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const M=g==="none";if(this.patternJoinNone=this.hasPattern&&M,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ie=0;ie<r.length-1;ie++)this.totalDistance+=r[ie].dist(r[ie+1]);this.totalFeatureLength=this.totalDistance/(this.lineClips.end-this.lineClips.start),this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const $=qx[s.type]==="Polygon";let T=r.length;for(;T>=2&&r[T-1].equals(r[T-2]);)T--;let A=0;for(;A<T-1&&r[A].equals(r[A+1]);)A++;if(T<($?3:2))return;g==="bevel"&&(x=1.05);const I=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let P,R,j,W,K,ne;this.e1=this.e2=-1,$&&(P=r[T-2],K=r[A].sub(P)._unit()._perp());for(let ie=A;ie<T;ie++){if(j=ie===T-1?$?r[A+1]:void 0:r[ie+1],j&&r[ie].equals(j))continue;K&&(W=K),P&&(R=P),P=r[ie],ne=this.evaluateLineProgressFeatures(R?R.dist(P):0),K=j?j.sub(P)._unit()._perp():W,W=W||K;const J=R&&j;let le=J?g:$||M?"butt":f;const fe=W.x*K.x+W.y*K.y;if(M){const it=function(at){if(at.patternJoinNone){const lt=at.segmentPoints.length/2,gt=at.lineSoFar-at.segmentStart;for(let vt=0;vt<lt;++vt){const ht=at.segmentPoints[2*vt+1],Rt=Math.round(at.segmentPoints[2*vt])+.5+.25*ht;at.patternVertexArray.emplaceBack(Rt,gt,at.segmentStart),at.patternVertexArray.emplaceBack(Rt,gt,at.segmentStart)}at.segmentPoints.length=0}at.e1=at.e2=-1};if(J&&fe<Y0){this.updateDistance(R,P),this.addCurrentVertex(P,W,1,1,I,ne),it(this),this.addCurrentVertex(P,K,-1,-1,I,ne);continue}if(R){if(!j){this.updateDistance(R,P),this.addCurrentVertex(P,W,1,1,I,ne),it(this);continue}le="miter"}}let ve=W.add(K);ve.x===0&&ve.y===0||ve._unit();const Ne=ve.x*K.x+ve.y*K.y,$e=Ne!==0?1/Ne:1/0,Ie=2*Math.sqrt(2-2*Ne),Je=Ne<Wx&&R&&j,Ve=W.x*K.y-W.y*K.x>0,et=this.overscaling<=16?15*lr/(512*this.overscaling):0;if(J&&le==="round"){if($e<C)le="miter";else if($e<=2){const it=Q0(P,-10,lr+10);le=this.hasZOffset&&(it||this.hasCrossSlope)?"miter":"fakeround"}}if(le==="miter"&&$e>x&&(le="bevel"),le==="bevel"&&($e>2&&(le="flipbevel"),$e<x&&(le="miter")),R&&!(le==="miter"&&Je)&&this.updateDistance(R,P),le==="miter")if(Je){const it=P.dist(R);if(it>2*et){const lt=P.sub(P.sub(R)._mult(et/it)._round());this.updateDistance(R,lt),this.addCurrentVertex(lt,W,0,0,I,ne),R=lt}this.updateDistance(R,P),ve._mult($e),this.addCurrentVertex(P,ve,0,0,I,ne);const at=P.dist(j);if(at>2*et){const lt=P.add(j.sub(P)._mult(et/at)._round());this.updateDistance(P,lt),this.addCurrentVertex(lt,K,0,0,I,ne),P=lt}}else ve._mult($e),this.addCurrentVertex(P,ve,0,0,I,ne);else if(le==="flipbevel"){if($e>100)ve=K.mult(-1);else{const it=$e*W.add(K).mag()/W.sub(K).mag();ve._perp()._mult(it*(Ve?-1:1))}this.addCurrentVertex(P,ve,0,0,I,ne),this.addCurrentVertex(P,ve.mult(-1),0,0,I,ne)}else if(le==="bevel"||le==="fakeround"){ne!=null&&R&&this.addCurrentVertex(P,W,-1,-1,I,ne);const it=P.dist(R)<=2*et&&le!=="bevel",at=ve.mult(Ve?1:-1);at._mult($e);const lt=K.mult(Ve?-1:1),gt=W.mult(Ve?-1:1),vt=this.evaluateLineProgressFeatures(this.distance);if(ne==null&&(this.addHalfVertex(P,at.x,at.y,!1,!Ve,0,I,vt),it||this.addHalfVertex(P,at.x+2*gt.x,at.y+2*gt.y,!1,Ve,0,I,vt)),le==="fakeround"){const ht=Math.round(180*Ie/Math.PI/20);this.addHalfVertex(P,gt.x,gt.y,!1,Ve,0,I,vt);for(let Rt=0;Rt<ht;Rt++){let Yt=Rt/ht;if(Yt!==.5){const nr=Yt-.5;Yt+=Yt*nr*(Yt-1)*((1.0904+fe*(fe*(3.55645-1.43519*fe)-3.2452))*nr*nr+(.848013+fe*(.215638*fe-1.06021)))}const Lt=lt.sub(gt)._mult(Yt)._add(gt)._unit();this.addHalfVertex(P,Lt.x,Lt.y,!1,Ve,0,I,vt)}this.addHalfVertex(P,lt.x,lt.y,!1,Ve,0,I,vt)}it||ne!=null||this.addHalfVertex(P,at.x+2*lt.x,at.y+2*lt.y,!1,Ve,0,I,vt),ne!=null&&j&&this.addCurrentVertex(P,K,1,1,I,ne)}else le==="butt"?this.addCurrentVertex(P,ve,0,0,I,ne):le==="square"?(R||this.addCurrentVertex(P,ve,-1,-1,I,ne),this.addCurrentVertex(P,ve,0,0,I,ne),R&&this.addCurrentVertex(P,ve,1,1,I,ne)):le==="round"&&(R&&(this.addCurrentVertex(P,W,0,0,I,ne),this.addCurrentVertex(P,W,1,1,I,ne,!0)),j&&(this.addCurrentVertex(P,K,-1,-1,I,ne,!0),this.addCurrentVertex(P,K,0,0,I,ne)))}}addVerticesTo(r,s,u,g,f,x,C,M,$,T){const A=(s.w-r.w)/this.tessellationStep|0;let I=0;const P=this.scaledDistance;if(A>1){this.lineSoFar=r.w;const j=(s.x-r.x)/A,W=(s.y-r.y)/A,K=(s.z-r.z)/A,ne=(s.w-r.w)/A;for(let ie=1;ie<A;++ie){r.x+=j,r.y+=W,r.z+=K,this.lineSoFar+=ne,I+=ne;const J=this.evaluateLineProgressFeatures(this.prevDistance+I);this.scaledDistance=(this.prevDistance+I)/this.totalDistance,this.addHalfVertex(r,u,g,T,!1,C,$,J),this.addHalfVertex(r,f,x,T,!0,-M,$,J)}}this.lineSoFar=s.w,this.scaledDistance=P;const R=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(s,u,g,T,!1,C,$,R),this.addHalfVertex(s,f,x,T,!0,-M,$,R)}evaluateLineProgressFeatures(r){if(!this.variableWidthValue&&!this.hasZOffset)return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+r)/this.totalFeatureLength):Wr(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let s=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(s=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.hasZOffset?this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:s}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:s}:{zOffset:0,variableWidth:s}}addCurrentVertex(r,s,u,g,f,x,C=!1){const M=s.x+s.y*u,$=s.y-s.x*u,T=s.y*g-s.x,A=-s.y-s.x*g;if(x!=null){const I=this.hasZOffset,P=-10,R=lr+10,j=x.zOffset,W=new gf(r.x,r.y,j,this.lineSoFar),K=!!I&&Q0(r,P,R),ne=this.lineSoFar,ie=this.distance;if(this.currentVertex)if(K){const J=this.currentVertexIsOutside,le=this.currentVertex,fe=new gf(r.x,r.y,j,this.lineSoFar);if(sb(le,fe,P,R),!Q0(fe,P,R)){if(J){this.e1=this.e2=-1,this.distance-=le.dist(W),this.lineSoFar=le.w;const ve=this.evaluateLineProgressFeatures(le.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(le,M,$,C,!1,u,f,ve),this.addHalfVertex(le,T,A,C,!0,-g,f,ve),this.prevDistance=this.distance}this.distance=this.prevDistance+le.dist(fe),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(le,fe,M,$,T,A,u,g,f,C),this.distance=ie,this.scaledDistance=this.distance/this.totalDistance}}else{const J=this.currentVertex;if(this.currentVertexIsOutside){sb(J,W,P,R),this.e1=this.e2=-1,this.distance-=J.dist(W),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=J.w;const le=this.evaluateLineProgressFeatures(J.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(J,M,$,C,!1,u,f,le),this.addHalfVertex(J,T,A,C,!0,-g,f,le),this.prevDistance=this.distance,this.distance=ie,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(J,W,M,$,T,A,u,g,f,C)}else K||(this.addHalfVertex(r,M,$,C,!1,u,f,x),this.addHalfVertex(r,T,A,C,!0,-g,f,x));this.currentVertex=W,this.currentVertexIsOutside=K,this.lineSoFar=ne}else this.addHalfVertex(r,M,$,C,!1,u,f,x),this.addHalfVertex(r,T,A,C,!0,-g,f,x)}addHalfVertex({x:r,y:s},u,g,f,x,C,M,$){this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),x||this.segmentPoints.push(this.lineSoFar-this.segmentStart,C)),this.layoutVertexArray.emplaceBack((r<<1)+(f?1:0),(s<<1)+(x?1:0),Math.round(63*u)+128,Math.round(63*g)+128,1+(C===0?0:C<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const T=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),M.primitiveLength++),x?this.e2=T:this.e1=T,$!=null&&this.zOffsetVertexArray.emplaceBack($.zOffset,$.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(r,s){this.prevDistance=this.distance,this.distance+=r.dist(s),this.updateScaledDistance()}}function Q0(l,r,s){return l.x<r||l.x>s||l.y<r||l.y>s}let wb,Kx;function Kp(l,r,s){return r*(lr/(l.tileSize*Math.pow(2,s-l.tileID.overscaledZ)))}Tr(J0,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const Sb=(l,r,s)=>(1-s)*l+s*r;function Tb(l,r){return 1/Kp(l,1,r.tileZoom)}function Eb(l,r,s,u){return l.translatePosMatrix(u||r.tileID.projMatrix,r,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const mg=l=>{const r=[];gg(l)&&r.push("RENDER_LINE_DASH"),l.paint.get("line-gradient")&&r.push("RENDER_LINE_GRADIENT");const s=l.paint.get("line-trim-offset");s[0]===0&&s[1]===0||r.push("RENDER_LINE_TRIM_OFFSET"),l.paint.get("line-border-width").constantOr(1)!==0&&r.push("RENDER_LINE_BORDER");const u=l.layout.get("line-join").constantOr("miter")==="none",g=!!l.paint.get("line-pattern").constantOr(1);return u&&g&&r.push("LINE_JOIN_NONE"),r};function gg(l){const r=l.paint.get("line-dasharray").value;return r.value||r.kind!=="constant"}let yg;const Cb=()=>yg||(yg={layout:wb||(wb=new Mn({"line-cap":new vr(Tt.layout_line["line-cap"]),"line-join":new vr(Tt.layout_line["line-join"]),"line-miter-limit":new tr(Tt.layout_line["line-miter-limit"]),"line-round-limit":new tr(Tt.layout_line["line-round-limit"]),"line-sort-key":new vr(Tt.layout_line["line-sort-key"]),"line-z-offset":new vr(Tt.layout_line["line-z-offset"]),"line-elevation-reference":new tr(Tt.layout_line["line-elevation-reference"]),"line-cross-slope":new tr(Tt.layout_line["line-cross-slope"]),visibility:new tr(Tt.layout_line.visibility),"line-width-unit":new tr(Tt.layout_line["line-width-unit"])})),paint:Kx||(Kx=new Mn({"line-opacity":new vr(Tt.paint_line["line-opacity"]),"line-color":new vr(Tt.paint_line["line-color"]),"line-translate":new tr(Tt.paint_line["line-translate"]),"line-translate-anchor":new tr(Tt.paint_line["line-translate-anchor"]),"line-width":new vr(Tt.paint_line["line-width"]),"line-gap-width":new vr(Tt.paint_line["line-gap-width"]),"line-offset":new vr(Tt.paint_line["line-offset"]),"line-blur":new vr(Tt.paint_line["line-blur"]),"line-dasharray":new vr(Tt.paint_line["line-dasharray"]),"line-pattern":new vr(Tt.paint_line["line-pattern"]),"line-gradient":new lc(Tt.paint_line["line-gradient"]),"line-trim-offset":new tr(Tt.paint_line["line-trim-offset"]),"line-trim-fade-range":new tr(Tt.paint_line["line-trim-fade-range"]),"line-trim-color":new tr(Tt.paint_line["line-trim-color"]),"line-emissive-strength":new tr(Tt.paint_line["line-emissive-strength"]),"line-border-width":new vr(Tt.paint_line["line-border-width"]),"line-border-color":new vr(Tt.paint_line["line-border-color"]),"line-occlusion-opacity":new tr(Tt.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},yg);class xg extends vr{possiblyEvaluate(r,s){return s=new Ea(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,transition:s.transition}),super.possiblyEvaluate(r,s)}evaluate(r,s,u,g){return s=Nr({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(r,s,u,g)}}let vg;function Zx(l,r){return r>0?r+2*l:l}const Db=Oa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Pb=Oa([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Mb=Oa([{name:"a_projected_pos",components:4,type:"Float32"}],4);Oa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Xx=Oa([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),Ab=Oa([{name:"a_texb",components:2,type:"Uint16"}]),ey=Oa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),R2=Oa([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);Oa([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const kb=Oa([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Yx=Oa([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Oa([{name:"triangle",components:3,type:"Uint16"}]),Oa([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Oa([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),Oa([{type:"Float32",name:"offsetX"}]),Oa([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Vi=24;const Oo=128;function Zp(l,r,s,u,g){if(l.kind==="camera")return l.maxSize;if(l.kind==="composite"){const f=r.possiblyEvaluate(new Ea(l.maxZoom),s).evaluate(g,{},s),x=r.possiblyEvaluate(new Ea(l.minZoom),s).evaluate(g,{},s);return Math.max(f,x)}return r.possiblyEvaluate(new Ea(u)).evaluate(g,{},s)}function ty(l,r){const{expression:s}=r;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Ea(l+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:g}=s;let f=0;for(;f<u.length&&u[f]<=l;)f++;f=Math.max(0,f-1);let x=f;for(;x<u.length&&u[x]<l+1;)x++;x=Math.min(u.length-1,x);const C=u[f],M=u[x];return s.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:M,interpolationType:g}:{kind:"camera",minZoom:C,maxZoom:M,minSize:s.evaluate(new Ea(C)),maxSize:s.evaluate(new Ea(M)),interpolationType:g}}}function Xp(l,{uSize:r,uSizeT:s},{lowerSize:u,upperSize:g}){return l.kind==="source"?u/Oo:l.kind==="composite"?Or(u/Oo,g/Oo,s):r}function cl(l,r,s=1){let u=0,g=0;if(l.kind==="constant")g=l.layoutSize*s;else if(l.kind!=="source"){const{interpolationType:f,minZoom:x,maxZoom:C}=l,M=f?fr(Yn.interpolationFactor(f,r,x,C),0,1):0;l.kind==="camera"?g=Or(l.minSize,l.maxSize,M)*s:u=M*s}return{uSizeT:u,uSize:g}}var sh=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Oo,evaluateSizeForFeature:Xp,evaluateSizeForZoom:cl,getRasterizedIconSize:Zp,getSizeData:ty});function oh(l,r,s){return l.sections.forEach(u=>{u.text=function(g,f,x){const C=f.layout.get("text-transform").evaluate(x,{});return C==="uppercase"?g=g.toLocaleUpperCase():C==="lowercase"&&(g=g.toLocaleLowerCase()),rn.applyArabicShaping&&(g=rn.applyArabicShaping(g)),g}(u.text,r,s)}),l}const cd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function _g(l){return l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""}function lh(l){return l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""||l===""}var Rb,ry,Yp,Jx={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Ib(){return Rb||(Rb=1,Jx.read=function(l,r,s,u,g){var f,x,C=8*g-u-1,M=(1<<C)-1,$=M>>1,T=-7,A=s?g-1:0,I=s?-1:1,P=l[r+A];for(A+=I,f=P&(1<<-T)-1,P>>=-T,T+=C;T>0;f=256*f+l[r+A],A+=I,T-=8);for(x=f&(1<<-T)-1,f>>=-T,T+=u;T>0;x=256*x+l[r+A],A+=I,T-=8);if(f===0)f=1-$;else{if(f===M)return x?NaN:1/0*(P?-1:1);x+=Math.pow(2,u),f-=$}return(P?-1:1)*x*Math.pow(2,f-u)},Jx.write=function(l,r,s,u,g,f){var x,C,M,$=8*f-g-1,T=(1<<$)-1,A=T>>1,I=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=u?0:f-1,R=u?1:-1,j=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(C=isNaN(r)?1:0,x=T):(x=Math.floor(Math.log(r)/Math.LN2),r*(M=Math.pow(2,-x))<1&&(x--,M*=2),(r+=x+A>=1?I/M:I*Math.pow(2,1-A))*M>=2&&(x++,M/=2),x+A>=T?(C=0,x=T):x+A>=1?(C=(r*M-1)*Math.pow(2,g),x+=A):(C=r*Math.pow(2,A-1)*Math.pow(2,g),x=0));g>=8;l[s+P]=255&C,P+=R,C/=256,g-=8);for(x=x<<g|C,$+=g;$>0;l[s+P]=255&x,P+=R,x/=256,$-=8);l[s+P-R]|=128*j}),Jx}function bg(){if(Yp)return ry;Yp=1,ry=r;var l=Ib();function r(J){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(J)?J:new Uint8Array(J||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var s=4294967296,u=1/s,g=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function f(J){return J.type===r.Bytes?J.readVarint()+J.pos:J.pos+1}function x(J,le,fe){return fe?4294967296*le+(J>>>0):4294967296*(le>>>0)+(J>>>0)}function C(J,le,fe){var ve=le<=16383?1:le<=2097151?2:le<=268435455?3:Math.floor(Math.log(le)/(7*Math.LN2));fe.realloc(ve);for(var Ne=fe.pos-1;Ne>=J;Ne--)fe.buf[Ne+ve]=fe.buf[Ne]}function M(J,le){for(var fe=0;fe<J.length;fe++)le.writeVarint(J[fe])}function $(J,le){for(var fe=0;fe<J.length;fe++)le.writeSVarint(J[fe])}function T(J,le){for(var fe=0;fe<J.length;fe++)le.writeFloat(J[fe])}function A(J,le){for(var fe=0;fe<J.length;fe++)le.writeDouble(J[fe])}function I(J,le){for(var fe=0;fe<J.length;fe++)le.writeBoolean(J[fe])}function P(J,le){for(var fe=0;fe<J.length;fe++)le.writeFixed32(J[fe])}function R(J,le){for(var fe=0;fe<J.length;fe++)le.writeSFixed32(J[fe])}function j(J,le){for(var fe=0;fe<J.length;fe++)le.writeFixed64(J[fe])}function W(J,le){for(var fe=0;fe<J.length;fe++)le.writeSFixed64(J[fe])}function K(J,le){return(J[le]|J[le+1]<<8|J[le+2]<<16)+16777216*J[le+3]}function ne(J,le,fe){J[fe]=le,J[fe+1]=le>>>8,J[fe+2]=le>>>16,J[fe+3]=le>>>24}function ie(J,le){return(J[le]|J[le+1]<<8|J[le+2]<<16)+(J[le+3]<<24)}return r.prototype={destroy:function(){this.buf=null},readFields:function(J,le,fe){for(fe=fe||this.length;this.pos<fe;){var ve=this.readVarint(),Ne=ve>>3,$e=this.pos;this.type=7&ve,J(Ne,le,this),this.pos===$e&&this.skip(ve)}return le},readMessage:function(J,le){return this.readFields(J,le,this.readVarint()+this.pos)},readFixed32:function(){var J=K(this.buf,this.pos);return this.pos+=4,J},readSFixed32:function(){var J=ie(this.buf,this.pos);return this.pos+=4,J},readFixed64:function(){var J=K(this.buf,this.pos)+K(this.buf,this.pos+4)*s;return this.pos+=8,J},readSFixed64:function(){var J=K(this.buf,this.pos)+ie(this.buf,this.pos+4)*s;return this.pos+=8,J},readFloat:function(){var J=l.read(this.buf,this.pos,!0,23,4);return this.pos+=4,J},readDouble:function(){var J=l.read(this.buf,this.pos,!0,52,8);return this.pos+=8,J},readVarint:function(J){var le,fe,ve=this.buf;return le=127&(fe=ve[this.pos++]),fe<128?le:(le|=(127&(fe=ve[this.pos++]))<<7,fe<128?le:(le|=(127&(fe=ve[this.pos++]))<<14,fe<128?le:(le|=(127&(fe=ve[this.pos++]))<<21,fe<128?le:function(Ne,$e,Ie){var Je,Ve,et=Ie.buf;if(Je=(112&(Ve=et[Ie.pos++]))>>4,Ve<128||(Je|=(127&(Ve=et[Ie.pos++]))<<3,Ve<128)||(Je|=(127&(Ve=et[Ie.pos++]))<<10,Ve<128)||(Je|=(127&(Ve=et[Ie.pos++]))<<17,Ve<128)||(Je|=(127&(Ve=et[Ie.pos++]))<<24,Ve<128)||(Je|=(1&(Ve=et[Ie.pos++]))<<31,Ve<128))return x(Ne,Je,$e);throw new Error("Expected varint not more than 10 bytes")}(le|=(15&(fe=ve[this.pos]))<<28,J,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var J=this.readVarint();return J%2==1?(J+1)/-2:J/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var J=this.readVarint()+this.pos,le=this.pos;return this.pos=J,J-le>=12&&g?function(fe,ve,Ne){return g.decode(fe.subarray(ve,Ne))}(this.buf,le,J):function(fe,ve,Ne){for(var $e="",Ie=ve;Ie<Ne;){var Je,Ve,et,it=fe[Ie],at=null,lt=it>239?4:it>223?3:it>191?2:1;if(Ie+lt>Ne)break;lt===1?it<128&&(at=it):lt===2?(192&(Je=fe[Ie+1]))==128&&(at=(31&it)<<6|63&Je)<=127&&(at=null):lt===3?(Ve=fe[Ie+2],(192&(Je=fe[Ie+1]))==128&&(192&Ve)==128&&((at=(15&it)<<12|(63&Je)<<6|63&Ve)<=2047||at>=55296&&at<=57343)&&(at=null)):lt===4&&(Ve=fe[Ie+2],et=fe[Ie+3],(192&(Je=fe[Ie+1]))==128&&(192&Ve)==128&&(192&et)==128&&((at=(15&it)<<18|(63&Je)<<12|(63&Ve)<<6|63&et)<=65535||at>=1114112)&&(at=null)),at===null?(at=65533,lt=1):at>65535&&(at-=65536,$e+=String.fromCharCode(at>>>10&1023|55296),at=56320|1023&at),$e+=String.fromCharCode(at),Ie+=lt}return $e}(this.buf,le,J)},readBytes:function(){var J=this.readVarint()+this.pos,le=this.buf.subarray(this.pos,J);return this.pos=J,le},readPackedVarint:function(J,le){if(this.type!==r.Bytes)return J.push(this.readVarint(le));var fe=f(this);for(J=J||[];this.pos<fe;)J.push(this.readVarint(le));return J},readPackedSVarint:function(J){if(this.type!==r.Bytes)return J.push(this.readSVarint());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readSVarint());return J},readPackedBoolean:function(J){if(this.type!==r.Bytes)return J.push(this.readBoolean());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readBoolean());return J},readPackedFloat:function(J){if(this.type!==r.Bytes)return J.push(this.readFloat());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readFloat());return J},readPackedDouble:function(J){if(this.type!==r.Bytes)return J.push(this.readDouble());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readDouble());return J},readPackedFixed32:function(J){if(this.type!==r.Bytes)return J.push(this.readFixed32());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readFixed32());return J},readPackedSFixed32:function(J){if(this.type!==r.Bytes)return J.push(this.readSFixed32());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readSFixed32());return J},readPackedFixed64:function(J){if(this.type!==r.Bytes)return J.push(this.readFixed64());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readFixed64());return J},readPackedSFixed64:function(J){if(this.type!==r.Bytes)return J.push(this.readSFixed64());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readSFixed64());return J},skip:function(J){var le=7&J;if(le===r.Varint)for(;this.buf[this.pos++]>127;);else if(le===r.Bytes)this.pos=this.readVarint()+this.pos;else if(le===r.Fixed32)this.pos+=4;else{if(le!==r.Fixed64)throw new Error("Unimplemented type: "+le);this.pos+=8}},writeTag:function(J,le){this.writeVarint(J<<3|le)},realloc:function(J){for(var le=this.length||16;le<this.pos+J;)le*=2;if(le!==this.length){var fe=new Uint8Array(le);fe.set(this.buf),this.buf=fe,this.length=le}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(J){this.realloc(4),ne(this.buf,J,this.pos),this.pos+=4},writeSFixed32:function(J){this.realloc(4),ne(this.buf,J,this.pos),this.pos+=4},writeFixed64:function(J){this.realloc(8),ne(this.buf,-1&J,this.pos),ne(this.buf,Math.floor(J*u),this.pos+4),this.pos+=8},writeSFixed64:function(J){this.realloc(8),ne(this.buf,-1&J,this.pos),ne(this.buf,Math.floor(J*u),this.pos+4),this.pos+=8},writeVarint:function(J){(J=+J||0)>268435455||J<0?function(le,fe){var ve,Ne;if(le>=0?(ve=le%4294967296|0,Ne=le/4294967296|0):(Ne=~(-le/4294967296),4294967295^(ve=~(-le%4294967296))?ve=ve+1|0:(ve=0,Ne=Ne+1|0)),le>=18446744073709552e3||le<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");fe.realloc(10),function($e,Ie,Je){Je.buf[Je.pos++]=127&$e|128,$e>>>=7,Je.buf[Je.pos++]=127&$e|128,$e>>>=7,Je.buf[Je.pos++]=127&$e|128,$e>>>=7,Je.buf[Je.pos++]=127&$e|128,Je.buf[Je.pos]=127&($e>>>=7)}(ve,0,fe),function($e,Ie){var Je=(7&$e)<<4;Ie.buf[Ie.pos++]|=Je|(($e>>>=3)?128:0),$e&&(Ie.buf[Ie.pos++]=127&$e|(($e>>>=7)?128:0),$e&&(Ie.buf[Ie.pos++]=127&$e|(($e>>>=7)?128:0),$e&&(Ie.buf[Ie.pos++]=127&$e|(($e>>>=7)?128:0),$e&&(Ie.buf[Ie.pos++]=127&$e|(($e>>>=7)?128:0),$e&&(Ie.buf[Ie.pos++]=127&$e)))))}(Ne,fe)}(J,this):(this.realloc(4),this.buf[this.pos++]=127&J|(J>127?128:0),J<=127||(this.buf[this.pos++]=127&(J>>>=7)|(J>127?128:0),J<=127||(this.buf[this.pos++]=127&(J>>>=7)|(J>127?128:0),J<=127||(this.buf[this.pos++]=J>>>7&127))))},writeSVarint:function(J){this.writeVarint(J<0?2*-J-1:2*J)},writeBoolean:function(J){this.writeVarint(!!J)},writeString:function(J){J=String(J),this.realloc(4*J.length),this.pos++;var le=this.pos;this.pos=function(ve,Ne,$e){for(var Ie,Je,Ve=0;Ve<Ne.length;Ve++){if((Ie=Ne.charCodeAt(Ve))>55295&&Ie<57344){if(!Je){Ie>56319||Ve+1===Ne.length?(ve[$e++]=239,ve[$e++]=191,ve[$e++]=189):Je=Ie;continue}if(Ie<56320){ve[$e++]=239,ve[$e++]=191,ve[$e++]=189,Je=Ie;continue}Ie=Je-55296<<10|Ie-56320|65536,Je=null}else Je&&(ve[$e++]=239,ve[$e++]=191,ve[$e++]=189,Je=null);Ie<128?ve[$e++]=Ie:(Ie<2048?ve[$e++]=Ie>>6|192:(Ie<65536?ve[$e++]=Ie>>12|224:(ve[$e++]=Ie>>18|240,ve[$e++]=Ie>>12&63|128),ve[$e++]=Ie>>6&63|128),ve[$e++]=63&Ie|128)}return $e}(this.buf,J,this.pos);var fe=this.pos-le;fe>=128&&C(le,fe,this),this.pos=le-1,this.writeVarint(fe),this.pos+=fe},writeFloat:function(J){this.realloc(4),l.write(this.buf,J,this.pos,!0,23,4),this.pos+=4},writeDouble:function(J){this.realloc(8),l.write(this.buf,J,this.pos,!0,52,8),this.pos+=8},writeBytes:function(J){var le=J.length;this.writeVarint(le),this.realloc(le);for(var fe=0;fe<le;fe++)this.buf[this.pos++]=J[fe]},writeRawMessage:function(J,le){this.pos++;var fe=this.pos;J(le,this);var ve=this.pos-fe;ve>=128&&C(fe,ve,this),this.pos=fe-1,this.writeVarint(ve),this.pos+=ve},writeMessage:function(J,le,fe){this.writeTag(J,r.Bytes),this.writeRawMessage(le,fe)},writePackedVarint:function(J,le){le.length&&this.writeMessage(J,M,le)},writePackedSVarint:function(J,le){le.length&&this.writeMessage(J,$,le)},writePackedBoolean:function(J,le){le.length&&this.writeMessage(J,I,le)},writePackedFloat:function(J,le){le.length&&this.writeMessage(J,T,le)},writePackedDouble:function(J,le){le.length&&this.writeMessage(J,A,le)},writePackedFixed32:function(J,le){le.length&&this.writeMessage(J,P,le)},writePackedSFixed32:function(J,le){le.length&&this.writeMessage(J,R,le)},writePackedFixed64:function(J,le){le.length&&this.writeMessage(J,j,le)},writePackedSFixed64:function(J,le){le.length&&this.writeMessage(J,W,le)},writeBytesField:function(J,le){this.writeTag(J,r.Bytes),this.writeBytes(le)},writeFixed32Field:function(J,le){this.writeTag(J,r.Fixed32),this.writeFixed32(le)},writeSFixed32Field:function(J,le){this.writeTag(J,r.Fixed32),this.writeSFixed32(le)},writeFixed64Field:function(J,le){this.writeTag(J,r.Fixed64),this.writeFixed64(le)},writeSFixed64Field:function(J,le){this.writeTag(J,r.Fixed64),this.writeSFixed64(le)},writeVarintField:function(J,le){this.writeTag(J,r.Varint),this.writeVarint(le)},writeSVarintField:function(J,le){this.writeTag(J,r.Varint),this.writeSVarint(le)},writeStringField:function(J,le){this.writeTag(J,r.Bytes),this.writeString(le)},writeFloatField:function(J,le){this.writeTag(J,r.Fixed32),this.writeFloat(le)},writeDoubleField:function(J,le){this.writeTag(J,r.Fixed64),this.writeDouble(le)},writeBooleanField:function(J,le){this.writeVarintField(J,!!le)}},ry}var wg=k(bg());const Qx=3;function ay(l,r,s){r.glyphs=[],l===1&&s.readMessage(ny,r)}function ny(l,r,s){if(l===3){const{id:u,bitmap:g,width:f,height:x,left:C,top:M,advance:$}=s.readMessage(zb,{});r.glyphs.push({id:u,bitmap:new bc({width:f+2*Qx,height:x+2*Qx},g),metrics:{width:f,height:x,left:C,top:M,advance:$}})}else l===4?r.ascender=s.readSVarint():l===5&&(r.descender=s.readSVarint())}function zb(l,r,s){l===1?r.id=s.readVarint():l===2?r.bitmap=s.readBytes():l===3?r.width=s.readVarint():l===4?r.height=s.readVarint():l===5?r.left=s.readSVarint():l===6?r.top=s.readSVarint():l===7&&(r.advance=s.readVarint())}const Sg=Qx,mo={horizontal:1,vertical:2,horizontalOnly:3};class ch{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(r,s){const u=new ch;return u.scale=r||1,u.fontStack=s,u}static forImage(r){const s=new ch;return s.image=r,s}}class _f{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,s){const u=new _f;for(let g=0;g<r.sections.length;g++){const f=r.sections[g];f.image?u.addImageSection(f):u.addTextSection(f,s)}return u}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSections(){return this.sections}getSectionIndex(r){return this.sectionIndex[r]}getCodePoint(r){return this.text.codePointAt(r)}verticalizePunctuation(r){this.text=function(s,u){let g="";for(let f=0;f<s.length;f++){const x=s.charCodeAt(f+1)||null,C=s.charCodeAt(f-1)||null;g+=!u&&(x&&El(x)&&!cd[s[f+1]]||C&&El(C)&&!cd[s[f-1]])||!cd[s[f]]?s[f]:cd[s[f]]}return g}(this.text,r)}trim(){let r=0;for(let u=0;u<this.text.length&&bf[this.text.charCodeAt(u)];u++)r++;let s=this.text.length;for(let u=this.text.length-1;u>=0&&u>=r&&bf[this.text.charCodeAt(u)];u--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)}substring(r,s){const u=new _f;return u.text=this.text.substring(r,s),u.sectionIndex=this.sectionIndex.slice(r,s),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,s)=>Math.max(r,this.sections[s].scale),0)}addTextSection(r,s){this.text+=r.text,this.sections.push(ch.forText(r.scale,r.fontStack||s));const u=this.sections.length-1;for(let g=0;g<r.text.length;++g)this.sectionIndex.push(u)}addImageSection(r){const s=r.image&&r.image.namePrimary?r.image.getPrimary():null;if(!s)return void Wr("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCodePoint(u),this.sections.push(ch.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Wr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ev(l,r,s,u,g,f,x,C,M,$,T,A,I,P,R){const j=_f.fromFeature(l,g);A===mo.vertical&&j.verticalizePunctuation(I);let W=[];const K=function(fe,ve,Ne,$e,Ie,Je){if(!fe)return[];const Ve=[],et=function(gt,vt,ht,Rt,Yt,Lt){let nr=0;for(let ar=0;ar<gt.length();ar++){const gr=gt.getSection(ar);nr+=y(gt.getCodePoint(ar),gr,Rt,Yt,vt,Lt)}return nr/Math.max(1,Math.ceil(nr/ht))}(fe,ve,Ne,$e,Ie,Je),it=fe.text.indexOf("")>=0;let at=0;for(let gt=0;gt<fe.length();gt++){const vt=fe.getSection(gt),ht=fe.getCodePoint(gt);if(bf[ht]||(at+=y(ht,vt,$e,Ie,ve,Je)),gt<fe.length()-1){const Rt=!((lt=ht)<11904||!(Ir["Bopomofo Extended"](lt)||Ir.Bopomofo(lt)||Ir["CJK Compatibility Forms"](lt)||Ir["CJK Compatibility Ideographs"](lt)||Ir["CJK Compatibility"](lt)||Ir["CJK Radicals Supplement"](lt)||Ir["CJK Strokes"](lt)||Ir["CJK Symbols and Punctuation"](lt)||Ir["CJK Unified Ideographs Extension A"](lt)||Ir["CJK Unified Ideographs"](lt)||Ir["Enclosed CJK Letters and Months"](lt)||Ir["Halfwidth and Fullwidth Forms"](lt)||Ir.Hiragana(lt)||Ir["Ideographic Description Characters"](lt)||Ir["Kangxi Radicals"](lt)||Ir["Katakana Phonetic Extensions"](lt)||Ir.Katakana(lt)||Ir["Vertical Forms"](lt)||Ir["Yi Radicals"](lt)||Ir["Yi Syllables"](lt)));(d[ht]||Rt||vt.image)&&Ve.push(H(gt+1,at,et,Ve,z(ht,fe.getCodePoint(gt+1),Rt&&it),!1))}}var lt;return ee(H(fe.length(),at,et,Ve,0,!0))}(j,$,f,r,u,P),{processBidirectionalText:ne,processStyledBidirectionalText:ie}=rn;if(ne&&j.sections.length===1){const fe=ne(j.toString(),K);for(const ve of fe){const Ne=new _f;Ne.text=ve,Ne.sections=j.sections;for(let $e=0;$e<ve.length;$e++)Ne.sectionIndex.push(0);W.push(Ne)}}else if(ie){const fe=ie(j.text,j.sectionIndex,K);for(const ve of fe){const Ne=new _f;Ne.text=ve[0],Ne.sectionIndex=ve[1],Ne.sections=j.sections,W.push(Ne)}}else W=function(fe,ve){const Ne=[],$e=fe.text;let Ie=0;for(const Je of ve)Ne.push(fe.substring(Ie,Je)),Ie=Je;return Ie<$e.length&&Ne.push(fe.substring(Ie,$e.length)),Ne}(j,K);const J=[],le={positionedLines:J,text:j.toString(),top:T[1],bottom:T[1],left:T[0],right:T[0],writingMode:A,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(fe,ve,Ne,$e,Ie,Je,Ve,et,it,at,lt,gt){let vt=0,ht=0,Rt=0;const Yt=et==="right"?1:et==="left"?0:.5;let Lt=!1;for(const sr of Ie){const Cr=sr.getSections();for(const Vr of Cr){if(Vr.image)continue;const sa=ve[Vr.fontStack];if(sa&&(Lt=sa.ascender!==void 0&&sa.descender!==void 0,!Lt))break}if(!Lt)break}let nr=0;for(const sr of Ie){sr.trim();const Cr=sr.getMaxScale(),Vr=(Cr-1)*Vi,sa={positionedGlyphs:[],lineOffset:0};fe.positionedLines[nr]=sa;const ha=sa.positionedGlyphs;let ba=0;if(!sr.length()){ht+=Je,++nr;continue}let fa=0,Da=0;for(let cn=0;cn<sr.length();cn++){const ta=sr.getSection(cn),un=sr.getSectionIndex(cn),sn=sr.getCodePoint(cn);let bn=ta.scale,wi=null,Si=null,ci=null,Fo=Vi,Rn=0;const $n=!(it===mo.horizontal||!lt&&!rl(sn)||lt&&(bf[sn]||(ar=sn,Ir.Arabic(ar)||Ir["Arabic Supplement"](ar)||Ir["Arabic Extended-A"](ar)||Ir["Arabic Presentation Forms-A"](ar)||Ir["Arabic Presentation Forms-B"](ar))));if(ta.image){const go=$e[ta.image.serialize()];if(!go)continue;ci=ta.image.id,fe.iconsInText=fe.iconsInText||!0,Si=go.paddedRect;const Ti=go.displaySize;bn=bn*Vi/gt,wi={width:Ti[0],height:Ti[1],left:0,top:-3,advance:$n?Ti[1]:Ti[0],localGlyph:!1},Rn=Lt?-wi.height*bn:Cr*Vi-17-Ti[1]*bn,Fo=wi.advance;const ul=($n?Ti[0]:Ti[1])*bn-Vi*Cr;ul>0&&ul>ba&&(ba=ul)}else{const go=Ne[ta.fontStack];if(!go)continue;go[sn]&&(Si=go[sn]);const Ti=ve[ta.fontStack];if(!Ti)continue;const ul=Ti.glyphs[sn];if(!ul)continue;if(wi=ul.metrics,Fo=sn!==8203?Vi:0,Lt){const Ui=Ti.ascender!==void 0?Math.abs(Ti.ascender):0,uh=Ti.descender!==void 0?Math.abs(Ti.descender):0,am=(Ui+uh)*bn;fa<am&&(fa=am,Da=(Ui-uh)/2*bn),Rn=-Ui*bn}else Rn=(Cr-bn)*Vi-17}$n?(fe.verticalizable=!0,ha.push({glyph:sn,imageName:ci,x:vt,y:ht+Rn,vertical:$n,scale:bn,localGlyph:wi.localGlyph,fontStack:ta.fontStack,sectionIndex:un,metrics:wi,rect:Si}),vt+=Fo*bn+at):(ha.push({glyph:sn,imageName:ci,x:vt,y:ht+Rn,vertical:$n,scale:bn,localGlyph:wi.localGlyph,fontStack:ta.fontStack,sectionIndex:un,metrics:wi,rect:Si}),vt+=wi.advance*bn+at)}ha.length!==0&&(Rt=Math.max(vt-at,Rt),Lt?He(ha,Yt,ba,Da,Je*Cr/2):He(ha,Yt,ba,0,Je/2)),vt=0;const _n=Je*Cr+ba;sa.lineOffset=Math.max(ba,Vr),ht+=_n,++nr}var ar;const gr=ht,{horizontalAlign:jt,verticalAlign:Mr}=Pe(Ve);(function(sr,Cr,Vr,sa,ha,ba){const fa=(Cr-Vr)*ha,Da=-ba*sa;for(const _n of sr)for(const cn of _n.positionedGlyphs)cn.x+=fa,cn.y+=Da})(fe.positionedLines,Yt,jt,Mr,Rt,gr),fe.top+=-Mr*gr,fe.bottom=fe.top+gr,fe.left+=-jt*Rt,fe.right=fe.left+Rt,fe.hasBaseline=Lt}(le,r,s,u,W,x,C,M,A,$,I,R),!function(fe){for(const ve of fe)if(ve.positionedGlyphs.length!==0)return!1;return!0}(J)&&le}const bf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},d={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function y(l,r,s,u,g,f){if(r.image){const x=u[r.image.serialize()];return x?x.displaySize[0]*r.scale*Vi/f+g:0}{const x=s[r.fontStack],C=x&&x.glyphs[l];return C?C.metrics.advance*r.scale+g:0}}function E(l,r,s,u){const g=Math.pow(l-r,2);return u?l<r?g/2:2*g:g+Math.abs(s)*s}function z(l,r,s){let u=0;return l===10&&(u-=1e4),s&&(u+=150),l!==40&&l!==65288||(u+=50),r!==41&&r!==65289||(u+=50),u}function H(l,r,s,u,g,f){let x=null,C=E(r,s,g,f);for(const M of u){const $=E(r-M.x,s,g,f)+M.badness;$<=C&&(x=M,C=$)}return{index:l,x:r,priorBreak:x,badness:C}}function ee(l){return l?ee(l.priorBreak).concat(l.index):[]}function Pe(l){let r=.5,s=.5;switch(l){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function He(l,r,s,u,g){if(!(r||s||u||g))return;const f=l.length-1,x=l[f],C=(x.x+x.metrics.advance*x.scale)*r;for(let M=0;M<=f;M++)l[M].x-=C,l[M].y+=s+u+g}function wt(l,r,s,u){const{horizontalAlign:g,verticalAlign:f}=Pe(u),x=s[0]-l.displaySize[0]*g,C=s[1]-l.displaySize[1]*f;return{imagePrimary:l,imageSecondary:r,top:C,bottom:C+l.displaySize[1],left:x,right:x+l.displaySize[0]}}function Ht(l,r,s,u,g,f){const x=l.imagePrimary;let C;if(x.content){const W=x.content,K=x.pixelRatio||1;C=[W[0]/K,W[1]/K,x.displaySize[0]-W[2]/K,x.displaySize[1]-W[3]/K]}const M=r.left*f,$=r.right*f;let T,A,I,P;s==="width"||s==="both"?(P=g[0]+M-u[3],A=g[0]+$+u[1]):(P=g[0]+(M+$-x.displaySize[0])/2,A=P+x.displaySize[0]);const R=r.top*f,j=r.bottom*f;return s==="height"||s==="both"?(T=g[1]+R-u[0],I=g[1]+j+u[2]):(T=g[1]+(R+j-x.displaySize[1])/2,I=T+x.displaySize[1]),{imagePrimary:x,imageSecondary:void 0,top:T,right:A,bottom:I,left:P,collisionPadding:C}}class ir extends dt{constructor(r,s,u,g,f){super(r,s),this.angle=g,this.z=u,f!==void 0&&(this.segment=f)}clone(){return new ir(this.x,this.y,this.z,this.angle,this.segment)}}function br(l,r,s,u,g){if(r.segment===void 0)return!0;let f=r,x=r.segment+1,C=0;for(;C>-s/2;){if(x--,x<0)return!1;C-=l[x].dist(f),f=l[x]}C+=l[x].dist(l[x+1]),x++;const M=[];let $=0;for(;C<s/2;){const T=l[x],A=l[x+1];if(!A)return!1;let I=l[x-1].angleTo(T)-T.angleTo(A);for(I=Math.abs((I+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:C,angleDelta:I}),$+=I;C-M[0].distance>u;)$-=M.shift().angleDelta;if($>g)return!1;x++,C+=T.dist(A)}return!0}function Wt(l){let r=0;for(let s=0;s<l.length-1;s++)r+=l[s].dist(l[s+1]);return r}function Xt(l,r,s){return l?.6*r*s:0}function Na(l,r){return Math.max(l?l.right-l.left:0,r?r.right-r.left:0)}function Ma(l,r,s,u,g,f){const x=Xt(s,g,f),C=Na(s,u)*f;let M=0;const $=Wt(l)/2;for(let T=0;T<l.length-1;T++){const A=l[T],I=l[T+1],P=A.dist(I);if(M+P>$){const R=($-M)/P,j=Or(A.x,I.x,R),W=Or(A.y,I.y,R),K=new ir(j,W,0,I.angleTo(A),T);return!x||br(l,K,C,x,r)?K:void 0}M+=P}}function Kn(l,r,s,u,g,f,x,C,M){const $=Xt(u,f,x),T=Na(u,g),A=T*x,I=l[0].x===0||l[0].x===M||l[0].y===0||l[0].y===M;return r-A<r/4&&(r=A+r/4),Nt(l,I?r/2*C%r:(T/2+2*f)*x*C%r,r,$,s,A,I,!1,M)}function Nt(l,r,s,u,g,f,x,C,M){const $=f/2,T=Wt(l);let A=0,I=r-s,P=[];for(let R=0;R<l.length-1;R++){const j=l[R],W=l[R+1],K=j.dist(W),ne=W.angleTo(j);for(;I+s<A+K;){I+=s;const ie=(I-A)/K,J=Or(j.x,W.x,ie),le=Or(j.y,W.y,ie);if(J>=0&&J<M&&le>=0&&le<M&&I-$>=0&&I+$<=T){const fe=new ir(J,le,0,ne,R);u&&!br(l,fe,f,u,g)||P.push(fe)}}A+=K}return C||P.length||x||(P=Nt(l,A/2,s,u,g,f,x,!0,M)),P}function kt(l,r,s,u,g){const f=[];for(let x=0;x<l.length;x++){const C=l[x];let M;for(let $=0;$<C.length-1;$++){let T=C[$],A=C[$+1];T.x<r&&A.x<r||(T.x<r?T=new dt(r,T.y+(r-T.x)/(A.x-T.x)*(A.y-T.y))._round():A.x<r&&(A=new dt(r,T.y+(r-T.x)/(A.x-T.x)*(A.y-T.y))._round()),T.y<s&&A.y<s||(T.y<s?T=new dt(T.x+(s-T.y)/(A.y-T.y)*(A.x-T.x),s)._round():A.y<s&&(A=new dt(T.x+(s-T.y)/(A.y-T.y)*(A.x-T.x),s)._round()),T.x>=u&&A.x>=u||(T.x>=u?T=new dt(u,T.y+(u-T.x)/(A.x-T.x)*(A.y-T.y))._round():A.x>=u&&(A=new dt(u,T.y+(u-T.x)/(A.x-T.x)*(A.y-T.y))._round()),T.y>=g&&A.y>=g||(T.y>=g?T=new dt(T.x+(g-T.y)/(A.y-T.y)*(A.x-T.x),g)._round():A.y>=g&&(A=new dt(T.x+(g-T.y)/(A.y-T.y)*(A.x-T.x),g)._round()),M&&T.equals(M[M.length-1])||(M=[T],f.push(M)),M.push(A)))))}}return f}function Ut(l){let r=0,s=0;for(const x of l)r+=x.w*x.h,s=Math.max(s,x.w);l.sort((x,C)=>C.h-x.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}];let g=0,f=0;for(const x of l)for(let C=u.length-1;C>=0;C--){const M=u[C];if(!(x.w>M.w||x.h>M.h)){if(x.x=M.x,x.y=M.y,f=Math.max(f,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===M.w&&x.h===M.h){const $=u.pop();C<u.length&&(u[C]=$)}else x.h===M.h?(M.x+=x.w,M.w-=x.w):x.w===M.w?(M.y+=x.h,M.h-=x.h):(u.push({x:M.x+x.w,y:M.y,w:M.w-x.w,h:x.h}),M.y+=x.h,M.h-=x.h);break}}return{w:g,h:f,fill:r/(g*f)||0}}Tr(ir,"Anchor");const pr=1;class aa{constructor(r,{pixelRatio:s,version:u,stretchX:g,stretchY:f,content:x},C){this.paddedRect=r,this.pixelRatio=s,this.stretchX=g,this.stretchY=f,this.content=x,this.version=u,this.padding=C}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.pixelRatio,(this.paddedRect.h-2*this.padding)/this.pixelRatio]}}class ln{constructor(r,s,u){const g={},f={};this.haveRenderCallbacks=[];const x=[];this.addImages(r,g,pr,x),this.addImages(s,f,2,x);const{w:C,h:M}=Ut(x),$=new es({width:C||1,height:M||1});for(const T in r){const A=r[T],I=g[T].paddedRect;es.copy(A.data,$,{x:0,y:0},{x:I.x+pr,y:I.y+pr},A.data,u,A.sdf)}for(const T in s){const A=s[T],I=f[T].paddedRect;let P=f[T].padding;const R=I.x+P,j=I.y+P,W=A.data.width,K=A.data.height;P=P>1?P-1:P,es.copy(A.data,$,{x:0,y:0},{x:R,y:j},A.data,u),es.copy(A.data,$,{x:0,y:K-P},{x:R,y:j-P},{width:W,height:P},u),es.copy(A.data,$,{x:0,y:0},{x:R,y:j+K},{width:W,height:P},u),es.copy(A.data,$,{x:W-P,y:0},{x:R-P,y:j},{width:P,height:K},u),es.copy(A.data,$,{x:0,y:0},{x:R+W,y:j},{width:P,height:K},u),es.copy(A.data,$,{x:W-P,y:K-P},{x:R-P,y:j-P},{width:P,height:P},u),es.copy(A.data,$,{x:0,y:K-P},{x:R+W,y:j-P},{width:P,height:P},u),es.copy(A.data,$,{x:0,y:0},{x:R+W,y:j+K},{width:P,height:P},u),es.copy(A.data,$,{x:W-P,y:0},{x:R-P,y:j+K},{width:P,height:P},u)}this.image=$,this.iconPositions=g,this.patternPositions=f}addImages(r,s,u,g){for(const f in r){const x=r[f],C={x:0,y:0,w:x.data.width+2*u,h:x.data.height+2*u};g.push(C),s[f]=new aa(C,x,u),x.hasRenderCallback&&this.haveRenderCallbacks.push(Yo.deserializeId(f))}}patchUpdatedImages(r,s,u){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(g=>r.hasImage(g,u)),r.dispatchRenderCallbacks(this.haveRenderCallbacks,u);for(const g in r.getUpdatedImages(u)){for(const f of Object.keys(this.iconPositions))Yo.deserializeId(f)===g&&this.patchUpdatedImage(this.iconPositions[f],r.getImage(g,u),s);for(const f of Object.keys(this.patternPositions))Yo.deserializeId(f)===g&&this.patchUpdatedImage(this.patternPositions[f],r.getImage(g,u),s)}}patchUpdatedImage(r,s,u){if(!r||!s||r.version===s.version)return;r.version=s.version;const[g,f]=r.tl;u.update(s.data,{position:{x:g,y:f}})}}Tr(aa,"ImagePosition"),Tr(ln,"ImageAtlas");const da=1e20;function Aa(l,r,s,u,g,f,x,C,M){for(let $=r;$<r+u;$++)fs(l,s*f+$,f,g,x,C,M);for(let $=s;$<s+g;$++)fs(l,$*f+r,1,u,x,C,M)}function fs(l,r,s,u,g,f,x){f[0]=0,x[0]=-1e20,x[1]=da,g[0]=l[r];for(let C=1,M=0,$=0;C<u;C++){g[C]=l[r+C*s];const T=C*C;do{const A=f[M];$=(g[C]-g[A]+T-A*A)/(C-A)/2}while($<=x[M]&&--M>-1);M++,f[M]=C,x[M]=$,x[M+1]=da}for(let C=0,M=0;C<u;C++){for(;x[M+1]<C;)M++;const $=f[M],T=C-$;l[r+C*s]=g[$]+T*T}}const tn=2,lu={none:0,ideographs:1,all:2};class Jp{constructor(r,s,u){this.requestManager=r,this.localGlyphMode=s,this.localFontFamily=u,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(r,s){this.urls[s]=r}getGlyphs(r,s,u){const g=[],f=this.urls[s]||Fe.GLYPHS_URL;for(const x in r)for(const C of r[x])g.push({stack:x,id:C});Dr(g,({stack:x,id:C},M)=>{let $=this.entries[x];$||($=this.entries[x]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let T=$.glyphs[C];if(T!==void 0)return void M(null,{stack:x,id:C,glyph:T});if(T=this._tinySDF($,x,C),T)return $.glyphs[C]=T,void M(null,{stack:x,id:C,glyph:T});const A=Math.floor(C/256);if(256*A>65535)return Wr("glyphs > 65535 not supported"),void M(null,{stack:x,id:C,glyph:T});if($.ranges[A])return void M(null,{stack:x,id:C,glyph:T});let I=$.requests[A];I||(I=$.requests[A]=[],Jp.loadGlyphRange(x,A,f,this.requestManager,(P,R)=>{if(R){$.ascender=R.ascender,$.descender=R.descender;for(const j in R.glyphs)this._doesCharSupportLocalGlyph(+j)||($.glyphs[+j]=R.glyphs[+j]);$.ranges[A]=!0}for(const j of I)j(P,R);delete $.requests[A]})),I.push((P,R)=>{P?M(P):R&&M(null,{stack:x,id:C,glyph:R.glyphs[C]||null})})},(x,C)=>{if(x)u(x);else if(C){const M={};for(const{stack:$,id:T,glyph:A}of C)M[$]===void 0&&(M[$]={}),M[$].glyphs===void 0&&(M[$].glyphs={}),M[$].glyphs[T]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics},M[$].ascender=this.entries[$].ascender,M[$].descender=this.entries[$].descender;u(null,M)}})}_doesCharSupportLocalGlyph(r){return this.localGlyphMode!==lu.none&&(this.localGlyphMode===lu.all?!!this.localFontFamily:!!this.localFontFamily&&(Ir["CJK Unified Ideographs"](r)||Ir["Hangul Syllables"](r)||Ir.Hiragana(r)||Ir.Katakana(r)||Ir["CJK Symbols and Punctuation"](r)||Ir["CJK Unified Ideographs Extension A"](r)||Ir["CJK Unified Ideographs Extension B"](r)||Ir.Osage(r)))}_tinySDF(r,s,u){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(u))return;let f=r.tinySDF;if(!f){let j="400";/bold/i.test(s)?j="900":/medium/i.test(s)?j="500":/light/i.test(s)&&(j="200"),f=r.tinySDF=new Jp.TinySDF({fontFamily:g,fontWeight:j,fontSize:24*tn,buffer:3*tn,radius:8*tn}),f.fontWeight=j}if(this.localGlyphs[f.fontWeight][u])return this.localGlyphs[f.fontWeight][u];const x=String.fromCodePoint(u),{data:C,width:M,height:$,glyphWidth:T,glyphHeight:A,glyphLeft:I,glyphTop:P,glyphAdvance:R}=f.draw(x);return this.localGlyphs[f.fontWeight][u]={id:u,bitmap:new bc({width:M,height:$},C),metrics:{width:T/tn,height:A/tn,left:I/tn,top:P/tn-27,advance:R/tn,localGlyph:!0}}}}Jp.loadGlyphRange=function(l,r,s,u,g){const f=256*r,x=f+255,C=u.transformRequest(u.normalizeGlyphsURL(s).replace("{fontstack}",l).replace("{range}",`${f}-${x}`),Ul.Glyphs);Wi(C,(M,$)=>{if(M)g(M);else if($){const T={},A=function(I){return new wg(I).readFields(ay,{})}($);for(const I of A.glyphs)T[I.id]=I;g(null,{glyphs:T,ascender:A.ascender,descender:A.descender})}})},Jp.TinySDF=class{constructor({fontSize:l=24,buffer:r=3,radius:s=8,cutoff:u=.25,fontFamily:g="sans-serif",fontWeight:f="normal",fontStyle:x="normal"}={}){this.buffer=r,this.cutoff=u,this.radius=s;const C=this.size=l+4*r,M=this._createCanvas(C),$=this.ctx=M.getContext("2d",{willReadFrequently:!0});$.font=`${x} ${f} ${l}px ${g}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(l){const r=document.createElement("canvas");return r.width=r.height=l,r}draw(l){const{width:r,actualBoundingBoxAscent:s,actualBoundingBoxDescent:u,actualBoundingBoxLeft:g,actualBoundingBoxRight:f}=this.ctx.measureText(l),x=Math.ceil(s),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(f-g))),M=Math.min(this.size-this.buffer,x+Math.ceil(u)),$=C+2*this.buffer,T=M+2*this.buffer,A=Math.max($*T,0),I=new Uint8ClampedArray(A),P={data:I,width:$,height:T,glyphWidth:C,glyphHeight:M,glyphTop:x,glyphLeft:0,glyphAdvance:r};if(C===0||M===0)return P;const{ctx:R,buffer:j,gridInner:W,gridOuter:K}=this;R.clearRect(j,j,C,M),R.fillText(l,j,j+x);const ne=R.getImageData(j,j,C,M);K.fill(da,0,A),W.fill(0,0,A);for(let ie=0;ie<M;ie++)for(let J=0;J<C;J++){const le=ne.data[4*(ie*C+J)+3]/255;if(le===0)continue;const fe=(ie+j)*$+J+j;if(le===1)K[fe]=0,W[fe]=da;else{const ve=.5-le;K[fe]=ve>0?ve*ve:0,W[fe]=ve<0?ve*ve:0}}Aa(K,0,0,$,T,$,this.f,this.v,this.z),Aa(W,j,j,C,M,$,this.f,this.v,this.z);for(let ie=0;ie<A;ie++){const J=Math.sqrt(K[ie])-Math.sqrt(W[ie]);I[ie]=Math.round(255-255*(J/this.radius+this.cutoff))}return P}};const Tg=pr;function VT(l,r){return l+r[1]-r[0]}function UT(l,r,s,u,g=1){const f=[],x=l.imagePrimary,C=x.pixelRatio,M=x.paddedRect.w-2*Tg,$=x.paddedRect.h-2*Tg,T=(l.right-l.left)*g,A=(l.bottom-l.top)*g,I=x.stretchX||[[0,M]],P=x.stretchY||[[0,$]],R=I.reduce(VT,0),j=P.reduce(VT,0),W=M-R,K=$-j;let ne=0,ie=R,J=0,le=j,fe=0,ve=W,Ne=0,$e=K;if(x.content&&u){const Je=x.content;ne=Lb(I,0,Je[0]),J=Lb(P,0,Je[1]),ie=Lb(I,Je[0],Je[2]),le=Lb(P,Je[1],Je[3]),fe=Je[0]-ne,Ne=Je[1]-J,ve=Je[2]-Je[0]-ie,$e=Je[3]-Je[1]-le}const Ie=(Je,Ve,et,it)=>{const at=$b(Je.stretch-ne,ie,T,l.left*g),lt=Nb(Je.fixed-fe,ve,Je.stretch,R),gt=$b(Ve.stretch-J,le,A,l.top*g),vt=Nb(Ve.fixed-Ne,$e,Ve.stretch,j),ht=$b(et.stretch-ne,ie,T,l.left*g),Rt=Nb(et.fixed-fe,ve,et.stretch,R),Yt=$b(it.stretch-J,le,A,l.top*g),Lt=Nb(it.fixed-Ne,$e,it.stretch,j),nr=new dt(at,gt),ar=new dt(ht,gt),gr=new dt(ht,Yt),jt=new dt(at,Yt),Mr=new dt(lt/C,vt/C),sr=new dt(Rt/C,Lt/C),Cr=r*Math.PI/180;if(Cr){const Da=Math.sin(Cr),_n=Math.cos(Cr),cn=[_n,-Da,Da,_n];nr._matMult(cn),ar._matMult(cn),jt._matMult(cn),gr._matMult(cn)}const Vr=Je.stretch+Je.fixed,sa=et.stretch+et.fixed,ha=Ve.stretch+Ve.fixed,ba=it.stretch+it.fixed,fa=l.imageSecondary;return{tl:nr,tr:ar,bl:jt,br:gr,texPrimary:{x:x.paddedRect.x+Tg+Vr,y:x.paddedRect.y+Tg+ha,w:sa-Vr,h:ba-ha},texSecondary:fa?{x:fa.paddedRect.x+Tg+Vr,y:fa.paddedRect.y+Tg+ha,w:sa-Vr,h:ba-ha}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Mr,pixelOffsetBR:sr,minFontScaleX:ve/C/T,minFontScaleY:$e/C/A,isSDF:s}};if(u&&(x.stretchX||x.stretchY)){const Je=GT(I,W,R),Ve=GT(P,K,j);for(let et=0;et<Je.length-1;et++){const it=Je[et],at=Je[et+1];for(let lt=0;lt<Ve.length-1;lt++)f.push(Ie(it,Ve[lt],at,Ve[lt+1]))}}else f.push(Ie({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:$+1}));return f}function Lb(l,r,s){let u=0;for(const g of l)u+=Math.max(r,Math.min(s,g[1]))-Math.max(r,Math.min(s,g[0]));return u}function GT(l,r,s){const u=[{fixed:-1,stretch:0}];for(const[g,f]of l){const x=u[u.length-1];u.push({fixed:g-x.stretch,stretch:x.stretch}),u.push({fixed:g-x.stretch,stretch:x.stretch+(f-g)})}return u.push({fixed:r+Tg,stretch:s}),u}function $b(l,r,s,u){return l/r*s+u}function Nb(l,r,s,u){return l-r*s/u}function Fj(l,r,s,u){const g=r+l.positionedLines[u].lineOffset;return u===0?s+g/2:s+(g+(r+l.positionedLines[u-1].lineOffset))/2}function Vj(l,r=1,s=!1){let u=1/0,g=1/0,f=-1/0,x=-1/0;const C=l[0];for(let P=0;P<C.length;P++){const R=C[P];(!P||R.x<u)&&(u=R.x),(!P||R.y<g)&&(g=R.y),(!P||R.x>f)&&(f=R.x),(!P||R.y>x)&&(x=R.y)}const M=Math.min(f-u,x-g);let $=M/2;const T=new Pd([],Uj);if(M===0)return new dt(u,g);for(let P=u;P<f;P+=M)for(let R=g;R<x;R+=M)T.push(new iy(P+$,R+$,$,l));let A=function(P){let R=0,j=0,W=0;const K=P[0];for(let ne=0,ie=K.length,J=ie-1;ne<ie;J=ne++){const le=K[ne],fe=K[J],ve=le.x*fe.y-fe.x*le.y;j+=(le.x+fe.x)*ve,W+=(le.y+fe.y)*ve,R+=3*ve}return new iy(j/R,W/R,0,P)}(l),I=T.length;for(;T.length;){const P=T.pop();(P.d>A.d||!A.d)&&(A=P,s&&console.log("found best %d after %d probes",Math.round(1e4*P.d)/1e4,I)),P.max-A.d<=r||($=P.h/2,T.push(new iy(P.p.x-$,P.p.y-$,$,l)),T.push(new iy(P.p.x+$,P.p.y-$,$,l)),T.push(new iy(P.p.x-$,P.p.y+$,$,l)),T.push(new iy(P.p.x+$,P.p.y+$,$,l)),I+=4)}return s&&(console.log(`num probes: ${I}`),console.log(`best distance: ${A.d}`)),A.p}function Uj(l,r){return r.max-l.max}class iy{constructor(r,s,u,g){this.p=new dt(r,s),this.h=u,this.d=function(f,x){let C=!1,M=1/0;for(let $=0;$<x.length;$++){const T=x[$];for(let A=0,I=T.length,P=I-1;A<I;P=A++){const R=T[A],j=T[P];R.y>f.y!=j.y>f.y&&f.x<(j.x-R.x)*(f.y-R.y)/(j.y-R.y)+R.x&&(C=!C),M=Math.min(M,We(f,R,j))}}return(C?1:-1)*Math.sqrt(M)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const I2=Number.POSITIVE_INFINITY,Gj=Math.sqrt(2);function HT(l,[r,s]){let u=0,g=0;if(s===I2){r<0&&(r=0);const f=r/Gj;switch(l){case"top-right":case"top-left":g=f-7;break;case"bottom-right":case"bottom-left":g=7-f;break;case"bottom":g=7-r;break;case"top":g=r-7}switch(l){case"top-right":case"bottom-right":u=-f;break;case"top-left":case"bottom-left":u=f;break;case"left":u=r;break;case"right":u=-r}}else{switch(r=Math.abs(r),s=Math.abs(s),l){case"top-right":case"top-left":case"top":g=s-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-s}switch(l){case"top-right":case"bottom-right":case"right":u=-r;break;case"top-left":case"bottom-left":case"left":u=r}}return[u,g]}function z2(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Hj(l,r,s,u,g,f,x,C,M,$,T,A,I,P,R,j){let W=f.textMaxSize.evaluate(r,{},I);W===void 0?W=x*f.textScaleFactor:W*=f.textScaleFactor;const K=l.layers[0].layout,ne=K.get("icon-offset").evaluate(r,{},I),ie=WT(s.horizontal)||s.vertical,J=P.name==="globe",le=Vi,fe=x*f.textScaleFactor/le,ve=l.tilePixelRatio*W/le,Ne=(lt=l.overscaling,l.zoom>18&&lt>2&&(lt>>=1),Math.max(lr/(512*lt),1)*K.get("symbol-spacing")),$e=K.get("text-padding")*l.tilePixelRatio,Ie=K.get("icon-padding")*l.tilePixelRatio,Je=mr(K.get("text-max-angle")),Ve=K.get("text-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",et=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",it=K.get("symbol-placement"),at=Ne/2;var lt;const gt=K.get("icon-text-fit").evaluate(r,{},I),vt=K.get("icon-text-fit-padding").evaluate(r,{},I),ht=gt!=="none";let Rt;l.hasAnyIconTextFit===!1&&ht&&(l.hasAnyIconTextFit=!0),u&&ht&&(l.allowVerticalPlacement&&s.vertical&&(Rt=Ht(u,s.vertical,gt,vt,ne,fe)),ie&&(u=Ht(u,ie,gt,vt,ne,fe)));const Yt=(Lt,nr,ar)=>{if(nr.x<0||nr.x>=lr||nr.y<0||nr.y>=lr)return;let gr=null;if(J){const{x:jt,y:Mr,z:sr}=P.projectTilePoint(nr.x,nr.y,ar);gr={anchor:new ir(jt,Mr,sr,0,void 0),up:P.upVector(ar,nr.x,nr.y)}}(function(jt,Mr,sr,Cr,Vr,sa,ha,ba,fa,Da,_n,cn,ta,un,sn,bn,wi,Si,ci,Fo,Rn,$n,go,Ti,ul,Ui,uh,am){const nm=jt.addToLineVertexArray(Mr,Cr);let wf,im,sm,u1,EC,CC,DC,PC=0,MC=0,AC=0,kC=0,m3=-1,g3=-1;const dh={};let RC=bd("");const Mg=sr?sr.anchor:Mr,y3=fa.layout.get("icon-text-fit").evaluate(Rn,{},Ui)!=="none";let x3=0,v3=0;if(fa._unevaluatedLayout.getValue("text-radial-offset")===void 0?[x3,v3]=fa.layout.get("text-offset").evaluate(Rn,{},Ui).map(Ec=>Ec*Vi):(x3=fa.layout.get("text-radial-offset").evaluate(Rn,{},Ui)*Vi,v3=I2),jt.allowVerticalPlacement&&Vr.vertical){const Ec=Vr.vertical;if(sn)CC=L2(Ec),ba&&(DC=L2(ba));else{const Il=fa.layout.get("text-rotate").evaluate(Rn,{},Ui)+90;sm=Bb(Da,Mg,Mr,_n,cn,ta,Ec,un,Il,bn),ba&&(u1=Bb(Da,Mg,Mr,_n,cn,ta,ba,Si,Il))}}if(sa){const Ec=jt.iconSizeData,Il=Ti?Zp(jt.iconSizeData,jt.layers[0]._unevaluatedLayout._values["icon-size"],Ui,jt.zoom,Rn):1,gy=fa.layout.get("icon-rotate").evaluate(Rn,{},Ui),IC=UT(sa,gy,go,y3,Ti?1/Il:$n.iconScaleFactor),b3=ba?UT(ba,gy,go,y3,$n.iconScaleFactor):void 0;im=Bb(Da,Mg,Mr,_n,cn,ta,sa,Si,gy,null,Ti?$n.iconScaleFactor*Il:1),PC=4*IC.length;let Ag=null;Ec.kind==="source"?(Ag=[Oo*fa.layout.get("icon-size").evaluate(Rn,{},Ui)*$n.iconScaleFactor],Ag[0]>Qp&&Wr(`${jt.layerIds[0]}: Value for "icon-size" is >= ${tv}. Reduce your "icon-size".`)):Ec.kind==="composite"&&(Ag=[Oo*$n.compositeIconSizes[0].evaluate(Rn,{},Ui)*$n.iconScaleFactor,Oo*$n.compositeIconSizes[1].evaluate(Rn,{},Ui)*$n.iconScaleFactor],(Ag[0]>Qp||Ag[1]>Qp)&&Wr(`${jt.layerIds[0]}: Value for "icon-size" is >= ${tv}. Reduce your "icon-size".`)),jt.addSymbols(jt.icon,IC,Ag,Fo,ci,Rn,!1,sr,Mr,nm.lineStartIndex,nm.lineLength,-1,ul,Ui,uh,am),m3=jt.icon.placedSymbolArray.length-1,b3&&(MC=4*b3.length,jt.addSymbols(jt.icon,b3,Ag,Fo,ci,Rn,mo.vertical,sr,Mr,nm.lineStartIndex,nm.lineLength,-1,ul,Ui,uh,am),g3=jt.icon.placedSymbolArray.length-1)}for(const Ec in Vr.horizontal){const Il=Vr.horizontal[Ec];wf||(RC=bd(Il.text),sn?EC=L2(Il):wf=Bb(Da,Mg,Mr,_n,cn,ta,Il,un,fa.layout.get("text-rotate").evaluate(Rn,{},Ui),bn));const gy=Il.positionedLines.length===1;if(AC+=qT(jt,sr,Mr,Il,ha,fa,sn,Rn,bn,nm,Vr.vertical?mo.horizontal:mo.horizontalOnly,gy?Object.keys(Vr.horizontal):[Ec],dh,m3,$n,ul,Ui,uh),gy)break}Vr.vertical&&(kC+=qT(jt,sr,Mr,Vr.vertical,ha,fa,sn,Rn,bn,nm,mo.vertical,["vertical"],dh,g3,$n,ul,Ui,uh));let om=-1;const _3=(Ec,Il)=>Ec?Math.max(Ec,Il):Il;om=_3(EC,om),om=_3(CC,om),om=_3(DC,om);const TO=om>-1?1:0;jt.glyphOffsetArray.length>=65535&&Wr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Rn.sortKey!==void 0&&jt.addToSortKeyRanges(jt.symbolInstances.length,Rn.sortKey),jt.symbolInstances.emplaceBack(Mr.x,Mr.y,Mg.x,Mg.y,Mg.z,dh.right>=0?dh.right:-1,dh.center>=0?dh.center:-1,dh.left>=0?dh.left:-1,dh.vertical>=0?dh.vertical:-1,m3,g3,RC,wf!==void 0?wf:jt.collisionBoxArray.length,wf!==void 0?wf+1:jt.collisionBoxArray.length,sm!==void 0?sm:jt.collisionBoxArray.length,sm!==void 0?sm+1:jt.collisionBoxArray.length,im!==void 0?im:jt.collisionBoxArray.length,im!==void 0?im+1:jt.collisionBoxArray.length,u1||jt.collisionBoxArray.length,u1?u1+1:jt.collisionBoxArray.length,_n,AC,kC,PC,MC,TO,0,x3,v3,om,0,y3?1:0)})(l,nr,gr,Lt,s,u,g,Rt,l.layers[0],l.collisionBoxArray,r.index,r.sourceLayerIndex,l.index,$e,Ve,M,0,Ie,et,ne,r,f,$,T,A,I,R,j)};if(it==="line")for(const Lt of kt(r.geometry,0,0,lr,lr)){const nr=Kn(Lt,Ne,Je,s.vertical||ie,u,le,ve,l.overscaling,lr);for(const ar of nr)ie&&qj(l,ie.text,at,ar)||Yt(Lt,ar,I)}else if(it==="line-center"){for(const Lt of r.geometry)if(Lt.length>1){const nr=Ma(Lt,Je,s.vertical||ie,u,le,ve);nr&&Yt(Lt,nr,I)}}else if(r.type==="Polygon")for(const Lt of ff(r.geometry,0)){const nr=Vj(Lt,16);Yt(Lt[0],new ir(nr.x,nr.y,0,0,void 0),I)}else if(r.type==="LineString")for(const Lt of r.geometry)Yt(Lt,new ir(Lt[0].x,Lt[0].y,0,0,void 0),I);else if(r.type==="Point")for(const Lt of r.geometry)for(const nr of Lt)Yt([nr],new ir(nr.x,nr.y,0,0,void 0),I)}const tv=255,Qp=tv*Oo;function qT(l,r,s,u,g,f,x,C,M,$,T,A,I,P,R,j,W,K){const ne=function(le,fe,ve,Ne,$e,Ie,Je,Ve){const et=[];if(fe.positionedLines.length===0)return et;const it=Ne.layout.get("text-rotate").evaluate(Ie,{})*Math.PI/180,at=function(Rt){const Yt=Rt[0],Lt=Rt[1],nr=Yt*Lt;return nr>0?[Yt,-Lt]:nr<0?[-Yt,Lt]:Yt===0?[Lt,Yt]:[Lt,-Yt]}(ve);let lt=Math.abs(fe.top-fe.bottom);for(const Rt of fe.positionedLines)lt-=Rt.lineOffset;const gt=fe.positionedLines.length,vt=lt/gt;let ht=fe.top-ve[1];for(let Rt=0;Rt<gt;++Rt){const Yt=fe.positionedLines[Rt];ht=Fj(fe,vt,ht,Rt);for(const Lt of Yt.positionedGlyphs){if(!Lt.rect)continue;const nr=Lt.rect||{};let ar=Sg+1,gr=!0,jt=1,Mr=0;if(Lt.imageName){const ci=Je[Ai.build(Lt.imageName).getSerializedPrimary()];if(!ci)continue;if(ci.sdf){Wr("SDF images are not supported in formatted text and will be ignored.");continue}gr=!1,jt=ci.pixelRatio,ar=pr/jt}const sr=($e||Ve)&&Lt.vertical,Cr=Lt.metrics.advance*Lt.scale/2,Vr=Lt.metrics,sa=Lt.rect;if(sa===null)continue;Ve&&fe.verticalizable&&(Mr=Lt.imageName?Cr-Lt.metrics.width*Lt.scale/2:0);const ha=$e?[Lt.x+Cr,Lt.y]:[0,0];let ba=[0,0],fa=[0,0],Da=!1;$e||(sr?(fa=[Lt.x+Cr+at[0],Lt.y+at[1]-Mr],Da=!0):ba=[Lt.x+Cr+ve[0],Lt.y+ve[1]-Mr]);const _n=sa.w*Lt.scale/(jt*(Lt.localGlyph?tn:1)),cn=sa.h*Lt.scale/(jt*(Lt.localGlyph?tn:1));let ta,un,sn,bn;if(sr){const ci=Lt.y-ht,Fo=new dt(-Cr,Cr-ci),Rn=-Math.PI/2,$n=new dt(...fa);ta=new dt(-Cr+ba[0],ba[1]),ta._rotateAround(Rn,Fo)._add($n),ta.x+=-ci+Cr,ta.y-=(Vr.left-ar)*Lt.scale;const go=Lt.imageName?Vr.advance*Lt.scale:Vi*Lt.scale,Ti=String.fromCodePoint(Lt.glyph);_g(Ti)?ta.x+=(1-ar)*Lt.scale:lh(Ti)?ta.x+=go-Vr.height*Lt.scale+(-ar-1)*Lt.scale:ta.x+=Lt.imageName||Vr.width+2*ar===sa.w&&Vr.height+2*ar===sa.h?(go-cn)/2:(go-(Vr.height+2*ar)*Lt.scale)/2,un=new dt(ta.x,ta.y-_n),sn=new dt(ta.x+cn,ta.y),bn=new dt(ta.x+cn,ta.y-_n)}else{const ci=(Vr.left-ar)*Lt.scale-Cr+ba[0],Fo=(-Vr.top-ar)*Lt.scale+ba[1],Rn=ci+_n,$n=Fo+cn;ta=new dt(ci,Fo),un=new dt(Rn,Fo),sn=new dt(ci,$n),bn=new dt(Rn,$n)}if(it){let ci;ci=$e?new dt(0,0):Da?new dt(at[0],at[1]):new dt(ve[0],ve[1]),ta._rotateAround(it,ci),un._rotateAround(it,ci),sn._rotateAround(it,ci),bn._rotateAround(it,ci)}const wi=new dt(0,0),Si=new dt(0,0);et.push({tl:ta,tr:un,bl:sn,br:bn,texPrimary:nr,texSecondary:void 0,writingMode:fe.writingMode,glyphOffset:ha,sectionIndex:Lt.sectionIndex,isSDF:gr,pixelOffsetTL:wi,pixelOffsetBR:Si,minFontScaleX:0,minFontScaleY:0})}}return et}(0,u,M,f,x,C,g,l.allowVerticalPlacement),ie=l.textSizeData;let J=null;ie.kind==="source"?(J=[Oo*f.layout.get("text-size").evaluate(C,{},W)*R.textScaleFactor],J[0]>Qp&&Wr(`${l.layerIds[0]}: Value for "text-size" is >= ${tv}. Reduce your "text-size".`)):ie.kind==="composite"&&(J=[Oo*R.compositeTextSizes[0].evaluate(C,{},W)*R.textScaleFactor,Oo*R.compositeTextSizes[1].evaluate(C,{},W)*R.textScaleFactor],(J[0]>Qp||J[1]>Qp)&&Wr(`${l.layerIds[0]}: Value for "text-size" is >= ${tv}. Reduce your "text-size".`)),l.addSymbols(l.text,ne,J,M,x,C,T,r,s,$.lineStartIndex,$.lineLength,P,j,W,K,!1);for(const le of A)I[le]=l.text.placedSymbolArray.length-1;return 4*ne.length}function WT(l){for(const r in l)return l[r];return null}function Bb(l,r,s,u,g,f,x,C,M,$,T=1){let A=x.top/T,I=x.bottom/T,P=x.left/T,R=x.right/T;const j=x.collisionPadding;if(j&&(P-=j[0],A-=j[1],R+=j[2],I+=j[3]),M){const W=new dt(P,A),K=new dt(R,A),ne=new dt(P,I),ie=new dt(R,I),J=mr(M);let le=new dt(0,0);$&&(le=new dt($[0],$[1])),W._rotateAround(J,le),K._rotateAround(J,le),ne._rotateAround(J,le),ie._rotateAround(J,le),P=Math.min(W.x,K.x,ne.x,ie.x),R=Math.max(W.x,K.x,ne.x,ie.x),A=Math.min(W.y,K.y,ne.y,ie.y),I=Math.max(W.y,K.y,ne.y,ie.y)}return l.emplaceBack(r.x,r.y,r.z,s.x,s.y,P,A,R,I,C,u,g,f),l.length-1}function L2(l){l.collisionPadding&&(l.top-=l.collisionPadding[1],l.bottom+=l.collisionPadding[3]);const r=l.bottom-l.top;return r>0?Math.max(10,r):null}function qj(l,r,s,u){const g=l.compareText;if(r in g){const f=g[r];for(let x=f.length-1;x>=0;x--)if(u.dist(f[x])<s)return!0}else g[r]=[];return g[r].push(u),!1}function KT(l,r){const s=l.fovAboveCenter,u=l.elevation?l.elevation.getMinElevationBelowMSL()*r:0,g=(l._camera.position[2]*l.worldSize-u)/Math.cos(l._pitch),f=Math.sin(s)*g/Math.sin(Math.max(Math.PI/2-l._pitch-s,.01));let x=Math.sin(l._pitch)*f+g;const C=g*(1/l._horizonShift);return l.elevation&&l.elevation.exaggeration()!==0||(x*=1+Math.max(l.zoom-17,0)),Math.min(1.01*x,C)}function rv(l,r){if(!r.isReprojectedInTileSpace)return{scale:1<<l.z,x:l.x,y:l.y,x2:l.x+1,y2:l.y+1,projection:r};const s=Math.pow(2,-l.z),u=l.x*s,g=(l.x+1)*s,f=l.y*s,x=(l.y+1)*s,C=qs(u),M=qs(g),$=Li(f),T=Li(x),A=r.project(C,$),I=r.project(M,$),P=r.project(M,T),R=r.project(C,T);let j=Math.min(A.x,I.x,P.x,R.x),W=Math.min(A.y,I.y,P.y,R.y),K=Math.max(A.x,I.x,P.x,R.x),ne=Math.max(A.y,I.y,P.y,R.y);const ie=s/16;function J(fe,ve,Ne,$e,Ie,Je){const Ve=(Ne+Ie)/2,et=($e+Je)/2,it=r.project(qs(Ve),Li(et)),at=Math.max(0,j-it.x,W-it.y,it.x-K,it.y-ne);j=Math.min(j,it.x),K=Math.max(K,it.x),W=Math.min(W,it.y),ne=Math.max(ne,it.y),at>ie&&(J(fe,it,Ne,$e,Ve,et),J(it,ve,Ve,et,Ie,Je))}J(A,I,u,f,g,f),J(I,P,g,f,g,x),J(P,R,g,x,u,x),J(R,A,u,x,u,f),j-=ie,W-=ie,K+=ie,ne+=ie;const le=1/Math.max(K-j,ne-W);return{scale:le,x:j*le,y:W*le,x2:K*le,y2:ne*le,projection:r}}function ZT(l,{x:r,y:s},u=0){return new dt(((r-u)*l.scale-l.x)*lr,(s*l.scale-l.y)*lr)}const Wj=Se.mat4.identity(new Float32Array(16));class em{constructor(r){this.spec=r,this.name=r.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(r,s){return{x:0,y:0,z:0}}unproject(r,s){return new La(0,0)}projectTilePoint(r,s,u){return{x:r,y:s,z:0}}locationPoint(r,s,u=!0){return r._coordinatePoint(r.locationCoordinate(s),u)}pixelsPerMeter(r,s){return Xi(1,r)*s}pixelSpaceConversion(r,s,u){return 1}farthestPixelDistance(r){return KT(r,r.pixelsPerMeter)}pointCoordinate(r,s,u,g){const f=r.horizonLineFromTop(!1),x=new dt(s,Math.max(f,u));return r.rayIntersectionCoordinate(r.pointRayIntersection(x,g))}pointCoordinate3D(r,s,u){const g=new dt(s,u);if(r.elevation)return r.elevation.pointCoordinate(g);{const f=this.pointCoordinate(r,g.x,g.y,0);return[f.x,f.y,f.z]}}isPointAboveHorizon(r,s){if(r.elevation&&r.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(r,s.x,s.y);const u=r.horizonLineFromTop();return s.y<u}createInversionMatrix(r,s){return Wj}createTileMatrix(r,s,u){let g,f,x;const C=u.canonical,M=Se.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const $=rv(C,this);g=1,f=$.x+u.wrap*$.scale,x=$.y,Se.mat4.scale(M,M,[g/$.scale,g/$.scale,r.pixelsPerMeter/s])}else g=s/r.zoomScale(C.z),f=(C.x+Math.pow(2,C.z)*u.wrap)*g,x=C.y*g;return Se.mat4.translate(M,M,[f,x,0]),Se.mat4.scale(M,M,[g/lr,g/lr,1]),M}upVector(r,s,u){return[0,0,1]}upVectorScale(r,s,u){return{metersToTile:1}}}class Kj extends em{constructor(r){super(r),this.range=[4,7],this.center=r.center||[-96,37.5];const[s,u]=this.parallels=r.parallels||[29.5,45.5],g=Math.sin(mr(s));this.n=(g+Math.sin(mr(u)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(r,s){const{n:u,c:g,r0:f}=this,x=mr(r-this.center[0]),C=mr(s),M=Math.sqrt(g-2*u*Math.sin(C))/u;return{x:M*Math.sin(x*u),y:M*Math.cos(x*u)-f,z:0}}unproject(r,s){const{n:u,c:g,r0:f}=this,x=f+s;let C=Math.atan2(r,Math.abs(x))*Math.sign(x);x*u<0&&(C-=Math.PI*Math.sign(r)*Math.sign(x));const M=mr(this.center[0])*u;C=kr(C,-Math.PI-M,Math.PI-M);const $=fr(Pr(C/u)+this.center[0],-180,180),T=Math.asin(fr((g-(r*r+x*x)*u*u)/(2*u),-1,1)),A=fr(Pr(T),-85.051129,cs);return new La($,A)}}const av=1.340264,nv=-.081106,iv=893e-6,sv=.003796,jb=Math.sqrt(3)/2;class Zj extends em{project(r,s){s=s/180*Math.PI,r=r/180*Math.PI;const u=Math.asin(jb*Math.sin(s)),g=u*u,f=g*g*g;return{x:.5*(r*Math.cos(u)/(jb*(av+3*nv*g+f*(7*iv+9*sv*g)))/Math.PI+.5),y:1-.5*(u*(av+nv*g+f*(iv+sv*g))/Math.PI+1),z:0}}unproject(r,s){r=(2*r-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,g=u*u,f=g*g*g;for(let T,A,I,P=0;P<12&&(A=u*(av+nv*g+f*(iv+sv*g))-s,I=av+3*nv*g+f*(7*iv+9*sv*g),T=A/I,u=fr(u-T,-Math.PI/3,Math.PI/3),g=u*u,f=g*g*g,!(Math.abs(T)<1e-12));++P);const x=jb*r*(av+3*nv*g+f*(7*iv+9*sv*g))/Math.cos(u),C=Math.asin(Math.sin(u)/jb),M=fr(180*x/Math.PI,-180,180),$=fr(180*C/Math.PI,-85.051129,cs);return new La(M,$)}}class Xj extends em{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0}project(r,s){return{x:.5+r/360,y:.5-s/360,z:0}}unproject(r,s){const u=360*(r-.5),g=fr(360*(.5-s),-85.051129,cs);return new La(u,g)}}const sy=Math.PI/2;function Ob(l){return Math.tan((sy+l)/2)}class Yj extends em{constructor(r){super(r),this.center=r.center||[0,30];const[s,u]=this.parallels=r.parallels||[30,30];let g=mr(s),f=mr(u);this.southernCenter=g+f<0,this.southernCenter&&(g=-g,f=-f);const x=Math.cos(g),C=Ob(g);this.n=g===f?Math.sin(g):Math.log(x/Math.cos(f))/Math.log(Ob(f)/C),this.f=x*Math.pow(Ob(g),this.n)/this.n}project(r,s){s=mr(s),this.southernCenter&&(s=-s),r=mr(r-this.center[0]);const u=1e-6,{n:g,f}=this;f>0?s<-sy+u&&(s=-sy+u):s>sy-u&&(s=sy-u);const x=f/Math.pow(Ob(s),g);let C=x*Math.sin(g*r),M=f-x*Math.cos(g*r);return C=.5*(C/Math.PI+.5),M=.5*(M/Math.PI+.5),{x:C,y:this.southernCenter?M:1-M,z:0}}unproject(r,s){r=(2*r-.5)*Math.PI,this.southernCenter&&(s=1-s),s=(2*(1-s)-.5)*Math.PI;const{n:u,f:g}=this,f=g-s,x=Math.sign(f),C=Math.sign(u)*Math.sqrt(r*r+f*f);let M=Math.atan2(r,Math.abs(f))*x;f*u<0&&(M-=Math.PI*Math.sign(r)*x);const $=fr(Pr(M/u)+this.center[0],-180,180),T=fr(Pr(2*Math.atan(Math.pow(g/C,1/u))-sy),-85.051129,cs);return new La($,this.southernCenter?-T:T)}}class XT extends em{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(r,s){return{x:ol(r),y:ls(s),z:0}}unproject(r,s){const u=qs(r),g=Li(s);return new La(u,g)}}const YT=mr(cs);class Jj extends em{project(r,s){const u=(s=mr(s))*s,g=u*u;return{x:.5*((r=mr(r))*(.8707-.131979*u+g*(g*(.003971*u-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(s*(1.007226+u*(.015085+g*(.028874*u-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(r,s){r=(2*r-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,g=25,f=0,x=u*u;do{x=u*u;const $=x*x;f=(u*(1.007226+x*(.015085+$*(.028874*x-.044475-.005916*$)))-s)/(1.007226+x*(.045255+$*(.259866*x-.311325-.005916*11*$))),u=fr(u-f,-YT,YT)}while(Math.abs(f)>1e-6&&--g>0);x=u*u;const C=fr(Pr(r/(.8707+x*(x*(x*x*x*(.003971-.001529*x)-.013791)-.131979))),-180,180),M=Pr(u);return new La(C,M)}}const JT=mr(cs);class Qj extends em{project(r,s){s=mr(s),r=mr(r);const u=Math.cos(s),g=2/Math.PI,f=Math.acos(u*Math.cos(r/2)),x=Math.sin(f)/f,C=.5*(r*g+2*u*Math.sin(r/2)/x)||0,M=.5*(s+Math.sin(s)/x)||0;return{x:.5*(C/Math.PI+.5),y:1-.5*(M/Math.PI+1),z:0}}unproject(r,s){let u=r=(2*r-.5)*Math.PI,g=s=(2*(1-s)-1)*Math.PI,f=25;const x=1e-6;let C=0,M=0;do{const $=Math.cos(g),T=Math.sin(g),A=2*T*$,I=T*T,P=$*$,R=Math.cos(u/2),j=Math.sin(u/2),W=2*R*j,K=j*j,ne=1-P*R*R,ie=ne?1/ne:0,J=ne?Math.acos($*R)*Math.sqrt(1/ne):0,le=.5*(2*J*$*j+2*u/Math.PI)-r,fe=.5*(J*T+g)-s,ve=.5*ie*(P*K+J*$*R*I)+1/Math.PI,Ne=ie*(W*A/4-J*T*j),$e=.125*ie*(A*j-J*T*P*W),Ie=.5*ie*(I*R+J*K*$)+.5,Je=Ne*$e-Ie*ve;C=(fe*Ne-le*Ie)/Je,M=(le*$e-fe*ve)/Je,u=fr(u-C,-Math.PI,Math.PI),g=fr(g-M,-JT,JT)}while((Math.abs(C)>x||Math.abs(M)>x)&&--f>0);return new La(Pr(u),Pr(g))}}class QT extends em{constructor(r){super(r),this.center=r.center||[0,0],this.parallels=r.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(mr(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(r,s){const{scale:u,cosPhi:g}=this;return{x:mr(r)*g*u+.5,y:-Math.sin(mr(s))/g*u+.5,z:0}}unproject(r,s){const{scale:u,cosPhi:g}=this,f=-(s-.5)/u,x=fr(Pr((r-.5)/u)/g,-180,180),C=Math.asin(fr(f*g,-1,1)),M=fr(Pr(C),-85.051129,cs);return new La(x,M)}}class e9 extends XT{constructor(r){super(r),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(r,s,u){const g=qr(r,s,u),f=an(wa(u));return Se.vec3.transformMat4(g,g,f),{x:g[0],y:g[1],z:g[2]}}locationPoint(r,s){const u=Al(s.lat,s.lng),g=Se.vec3.normalize([],u),f=r.elevation?r.elevation.getAtPointOrZero(r.locationCoordinate(s),r._centerAltitude):r._centerAltitude,x=Xi(1,0)*lr*f;Se.vec3.scaleAndAdd(u,u,g,x);const C=Se.mat4.identity(new Float64Array(16));return Se.mat4.multiply(C,r.pixelMatrix,r.globeMatrix),Se.vec3.transformMat4(u,u,C),new dt(u[0],u[1])}pixelsPerMeter(r,s){return Xi(1,0)*s}pixelSpaceConversion(r,s,u){const g=Xi(1,r)*s,f=Or(Xi(1,45)*s,g,u);return this.pixelsPerMeter(r,s)/f}createTileMatrix(r,s,u){const g=zn(wa(u.canonical));return Se.mat4.multiply(new Float64Array(16),r.globeMatrix,g)}createInversionMatrix(r,s){const{center:u}=r,g=an(wa(s));return Se.mat4.rotateY(g,g,mr(u.lng)),Se.mat4.rotateX(g,g,mr(u.lat)),Se.mat4.scale(g,g,[r._pixelsPerMercatorPixel,r._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(r,s,u,g){return ya(r,s,u,!0)||new m(0,0)}pointCoordinate3D(r,s,u){const g=this.pointCoordinate(r,s,u,0);return[g.x,g.y,g.z]}isPointAboveHorizon(r,s){return!ya(r,s.x,s.y,!1)}farthestPixelDistance(r){const s=function(g,f){const x=g.cameraToCenterDistance,C=g._centerAltitude*f,M=g._camera,$=g._camera.forward(),T=Se.vec3.add([],Se.vec3.scale([],$,-x),[0,0,C]),A=g.worldSize/(2*Math.PI),I=[0,0,-A],P=g.width/g.height,R=Math.tan(g.fovAboveCenter),j=Se.vec3.scale([],M.up(),R),W=Se.vec3.scale([],M.right(),R*P),K=Se.vec3.normalize([],Se.vec3.add([],Se.vec3.add([],$,j),W)),ne=[];let ie;if(new pa(T,K).closestPointOnSphere(I,A,ne)){const J=Se.vec3.add([],ne,I),le=Se.vec3.sub([],J,T);ie=Math.cos(g.fovAboveCenter)*Se.vec3.length(le)}else{const J=Se.vec3.sub([],T,I),le=Se.vec3.sub([],I,T);Se.vec3.normalize(le,le);const fe=Se.vec3.length(J)-A;ie=Math.sqrt(fe*(fe+2*A));const ve=Math.acos(ie/(A+fe))-Math.acos(Se.vec3.dot($,le));ie*=Math.cos(ve)}return 1.01*ie}(r,this.pixelsPerMeter(r.center.lat,r.worldSize)),u=Qi(r.zoom);if(u>0){const g=KT(r,Xi(1,r.center.lat)*r.worldSize),f=r.worldSize/(2*Math.PI),x=Math.max(r.width,r.height)/r.worldSize*Math.PI;return Or(s,g+f*(1-Math.cos(x)),Math.pow(u,10))}return s}upVector(r,s,u){return qr(s,u,r,1)}upVectorScale(r){return{metersToTile:Fa(vn(wa(r)))}}}function eE(l){const r=l.parallels,s=!!r&&Math.abs(r[0]+r[1])<.01;switch(l.name){case"mercator":return new XT(l);case"equirectangular":return new Xj(l);case"naturalEarth":return new Jj(l);case"equalEarth":return new Zj(l);case"winkelTripel":return new Qj(l);case"albers":return s?new QT(l):new Kj(l);case"lambertConformalConic":return s?new QT(l):new Yj(l);case"globe":return new e9(l)}throw new Error(`Invalid projection name: ${l.name}`)}const t9=iu.VectorTileFeature.types,r9=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Fb(l,r,s,u,g,f,x,C,M,$,T,A,I){const P=C?Math.min(Qp,Math.round(C[0])):0,R=C?Math.min(Qp,Math.round(C[1])):0;l.emplaceBack(r,s,Math.round(32*u),Math.round(32*g),f,x,(P<<1)+(M?1:0),R,16*$,16*T,256*A,256*I)}function Vb(l,r,s){l.emplaceBack(r,s)}function Ub(l,r,s,u,g,f,x){l.emplaceBack(r,s,u,g,f,x)}function Gb(l,r,s,u,g){l.emplaceBack(r,s,u,g),l.emplaceBack(r,s,u,g),l.emplaceBack(r,s,u,g),l.emplaceBack(r,s,u,g)}function a9(l){for(const r of l.sections)if(yp(r.text))return!0;return!1}class $2{constructor(r){this.layoutVertexArray=new Tp,this.indexArray=new Fi,this.programConfigurations=r,this.segments=new An,this.dynamicLayoutVertexArray=new uc,this.opacityVertexArray=new ed,this.placedSymbolArray=new Ap,this.iconTransitioningVertexArray=new pc,this.globeExtVertexArray=new Zd,this.zOffsetVertexArray=new td}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(r,s,u,g,f){this.isEmpty()||(u&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Db.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,Mb.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,r9,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=r.createVertexBuffer(this.iconTransitioningVertexArray,Ab.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,Pb.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||f)&&(this.zOffsetVertexBuffer=r.createVertexBuffer(this.zOffsetVertexArray,Xx.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||g)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Tr($2,"SymbolBuffers");class N2{constructor(r,s,u){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new u,this.segments=new An,this.collisionVertexArray=new Cp,this.collisionVertexArrayExt=new uc}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,ey.members,!0),this.collisionVertexBufferExt=r.createVertexBuffer(this.collisionVertexArrayExt,R2.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Tr(N2,"CollisionBuffers");class Hb{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.lut=r.lut,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.fqid),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Se.mat4.identity([]),this.placementViewportMatrix=Se.mat4.identity([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ty(this.zoom,s["text-size"]),this.iconSizeData=ty(this.zoom,s["icon-size"]);const u=this.layers[0].layout,g=u.get("symbol-sort-key"),f=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(x=>mo[x]),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID,this.projection=r.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=u.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new $2(new tu(this.layers,{zoom:this.zoom,lut:this.lut},r=>r.startsWith("text")||r.startsWith("symbol"))),this.icon=new $2(new tu(this.layers,{zoom:this.zoom,lut:this.lut},r=>r.startsWith("icon")||r.startsWith("symbol"))),this.glyphOffsetArray=new Qd,this.lineVertexArray=new Jc,this.symbolInstances=new Zm}calculateGlyphDependencies(r,s,u,g,f){for(const x of r){const C=x.codePointAt(0);if(C===void 0)break;if(s[C]=!0,g&&f&&C<=65535){const M=cd[x];M&&(s[M.charCodeAt(0)]=!0)}}}updateFootprints(r,s){}updateReplacement(r,s){if(s.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=s.updateTime;const u=s.getReplacementRegionsForTile(r.toUnwrapped(),!0);return!hs(this.activeReplacements,u)&&(this.activeReplacements=u,!0)}populate(r,s,u,g){const f=this.layers[0],x=f.layout,C=this.projection.name==="globe",M=x.get("text-font"),$=x.get("text-field"),T=x.get("icon-image"),[A,I]=x.get("icon-size-scale-range"),P=fr(s.scaleFactor||1,A,I),R=($.value.kind!=="constant"||$.value.value instanceof Mi&&!$.value.value.isEmpty()||$.value.value.toString().length>0)&&(M.value.kind!=="constant"||M.value.value.length>0),j=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,W=x.get("symbol-sort-key");if(this.features=[],!R&&!j)return;const K=s.iconDependencies,ne=s.glyphDependencies,ie=s.availableImages,J=new Ea(this.zoom);for(const{feature:le,id:fe,index:ve,sourceLayerIndex:Ne}of r){const $e=f._featureFilter.needGeometry,Ie=X(le,$e);if(!f._featureFilter.filter(J,Ie,u))continue;if($e||(Ie.geometry=Z(le,u,g)),C&&le.type!==1&&u.z<=5){const at=Ie.geometry,lt=.98078528056,gt=(vt,ht)=>{const Rt=qr(vt.x,vt.y,u,1),Yt=qr(ht.x,ht.y,u,1);return Se.vec3.dot(Rt,Yt)<lt};for(let vt=0;vt<at.length;vt++)at[vt]=L(at[vt],gt)}let Je,Ve;if(R){const at=f.getValueAndResolveTokens("text-field",Ie,u,ie),lt=Mi.factory(at);a9(lt)&&(this.hasRTLText=!0),(!this.hasRTLText||nl()==="unavailable"||this.hasRTLText&&rn.isParsed())&&(Je=oh(lt,f,Ie))}if(j){const at=f.getValueAndResolveTokens("icon-image",Ie,u,ie);Ve=at instanceof Ai?at:Ai.build(at)}if(!Je&&!Ve)continue;const et=this.sortFeaturesByKey?W.evaluate(Ie,{},u):void 0,it={id:fe,text:Je,icon:Ve,index:ve,sourceLayerIndex:Ne,geometry:Ie.geometry,properties:le.properties,type:t9[le.type],sortKey:et};if(this.features.push(it),Ve){const at=Zp(this.iconSizeData,this.layers[0]._unevaluatedLayout._values["icon-size"],u,this.zoom,it)*P*this.pixelRatio,lt=Ve.getPrimary().scaleSelf(at);if(K[lt.id]=K[lt.id]||[],K[lt.id].push(lt),Ve.nameSecondary){const gt=Ve.getSecondary().scaleSelf(at);K[gt.id]=K[gt.id]||[],K[gt.id].push(gt)}}if(Je){const at=M.evaluate(Ie,{},u).join(","),lt=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(mo.vertical)>=0;for(const gt of Je.sections)if(gt.image){const vt=gt.image.getPrimary().scaleSelf(this.pixelRatio);K[vt.id]=K[vt.id]||[],K[vt.id].push(vt)}else{const vt=Tl(Je.toString()),ht=gt.fontStack||at,Rt=ne[ht]=ne[ht]||{};this.calculateGlyphDependencies(gt.text,Rt,lt,this.allowVerticalPlacement,vt)}}}x.get("symbol-placement")==="line"&&(this.features=function(le){const fe={},ve={},Ne=[];let $e=0;function Ie(it){Ne.push(le[it]),$e++}function Je(it,at,lt){const gt=ve[it];return delete ve[it],ve[at]=gt,Ne[gt].geometry[0].pop(),Ne[gt].geometry[0]=Ne[gt].geometry[0].concat(lt[0]),gt}function Ve(it,at,lt){const gt=fe[at];return delete fe[at],fe[it]=gt,Ne[gt].geometry[0].shift(),Ne[gt].geometry[0]=lt[0].concat(Ne[gt].geometry[0]),gt}function et(it,at,lt){const gt=lt?at[0][at[0].length-1]:at[0][0];return`${it}:${gt.x}:${gt.y}`}for(let it=0;it<le.length;it++){const at=le[it],lt=at.geometry,gt=at.text?at.text.toString():null;if(!gt){Ie(it);continue}const vt=et(gt,lt),ht=et(gt,lt,!0);if(vt in ve&&ht in fe&&ve[vt]!==fe[ht]){const Rt=Ve(vt,ht,lt),Yt=Je(vt,ht,Ne[Rt].geometry);delete fe[vt],delete ve[ht],ve[et(gt,Ne[Yt].geometry,!0)]=Yt,Ne[Rt].geometry=null}else vt in ve?Je(vt,ht,lt):ht in fe?Ve(vt,ht,lt):(Ie(it),fe[vt]=$e-1,ve[ht]=$e-1)}return Ne.filter(it=>it.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((le,fe)=>le.sortKey-fe.sortKey)}update(r,s,u,g,f,x,C){this.text.programConfigurations.updatePaintArrays(r,s,f,u,g,x,C),this.icon.programConfigurations.updatePaintArrays(r,s,f,u,g,x,C)}updateZOffset(){const r=(f,x,C)=>{u+=x,u>f.length&&f.resize(u);for(let M=-x;M<0;M++)f.emplace(M+u,C)},s=(f,x,C)=>{g+=x,g>f.length&&f.resize(g);for(let M=-x;M<0;M++)f.emplace(M+g,C)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let u=0,g=0;for(let f=0;f<this.symbolInstances.length;f++){const x=this.symbolInstances.get(f),{numHorizontalGlyphVertices:C,numVerticalGlyphVertices:M,numIconVertices:$}=x,T=x.zOffset,A=$>0;if((C>0||M>0)&&(r(this.text.zOffsetVertexArray,C,T),r(this.text.zOffsetVertexArray,M,T)),A){const{placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:P}=x;I>=0&&s(this.icon.zOffsetVertexArray,$,T),P>=0&&s(this.icon.zOffsetVertexArray,x.numVerticalIconVertices,T)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=eE(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,s){const u=this.lineVertexArray.length;if(r.segment!==void 0)for(const{x:g,y:f}of s)this.lineVertexArray.emplaceBack(g,f);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(r,s,u,g,f,x,C,M,$,T,A,I,P,R,j,W){const K=r.indexArray,ne=r.layoutVertexArray,ie=r.globeExtVertexArray,J=r.segments.prepareSegment(4*s.length,ne,K,this.canOverlap?x.sortKey:void 0),le=this.glyphOffsetArray.length,fe=J.vertexLength,ve=this.allowVerticalPlacement&&C===mo.vertical?Math.PI/2:0,Ne=x.text&&x.text.sections;for(let Ie=0;Ie<s.length;Ie++){const{tl:Je,tr:Ve,bl:et,br:it,texPrimary:at,texSecondary:lt,pixelOffsetTL:gt,pixelOffsetBR:vt,minFontScaleX:ht,minFontScaleY:Rt,glyphOffset:Yt,isSDF:Lt,sectionIndex:nr}=s[Ie],ar=J.vertexLength,gr=Yt[1];if(Fb(ne,$.x,$.y,Je.x,gr+Je.y,at.x,at.y,u,Lt,gt.x,gt.y,ht,Rt),Fb(ne,$.x,$.y,Ve.x,gr+Ve.y,at.x+at.w,at.y,u,Lt,vt.x,gt.y,ht,Rt),Fb(ne,$.x,$.y,et.x,gr+et.y,at.x,at.y+at.h,u,Lt,gt.x,vt.y,ht,Rt),Fb(ne,$.x,$.y,it.x,gr+it.y,at.x+at.w,at.y+at.h,u,Lt,vt.x,vt.y,ht,Rt),M){const{x:jt,y:Mr,z:sr}=M.anchor,[Cr,Vr,sa]=M.up;Ub(ie,jt,Mr,sr,Cr,Vr,sa),Ub(ie,jt,Mr,sr,Cr,Vr,sa),Ub(ie,jt,Mr,sr,Cr,Vr,sa),Ub(ie,jt,Mr,sr,Cr,Vr,sa),Gb(r.dynamicLayoutVertexArray,jt,Mr,sr,ve)}else Gb(r.dynamicLayoutVertexArray,$.x,$.y,$.z,ve);if(W){const jt=lt||at;Vb(r.iconTransitioningVertexArray,jt.x,jt.y),Vb(r.iconTransitioningVertexArray,jt.x+jt.w,jt.y),Vb(r.iconTransitioningVertexArray,jt.x,jt.y+jt.h),Vb(r.iconTransitioningVertexArray,jt.x+jt.w,jt.y+jt.h)}K.emplaceBack(ar,ar+1,ar+2),K.emplaceBack(ar+1,ar+2,ar+3),J.vertexLength+=4,J.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Yt[0]),Ie!==s.length-1&&nr===s[Ie+1].sectionIndex||r.programConfigurations.populatePaintArrays(ne.length,x,x.index,{},P,R,j,Ne&&Ne[nr])}const $e=M?M.anchor:$;r.placedSymbolArray.emplaceBack($e.x,$e.y,$e.z,$.x,$.y,le,this.glyphOffsetArray.length-le,fe,T,A,$.segment,u?u[0]:0,u?u[1]:0,g[0],g[1],C,0,!1,0,I,0)}_commitLayoutVertex(r,s,u,g,f,x,C){r.emplaceBack(s,u,g,f,x,Math.round(C.x),Math.round(C.y))}_addCollisionDebugVertices(r,s,u,g,f,x,C){const M=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),$=M.vertexLength,T=C.tileAnchorX,A=C.tileAnchorY;for(let P=0;P<4;P++)u.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(u.collisionVertexArrayExt,s,r.padding,C.zOffset),this._commitLayoutVertex(u.layoutVertexArray,g,f,x,T,A,new dt(r.x1,r.y1)),this._commitLayoutVertex(u.layoutVertexArray,g,f,x,T,A,new dt(r.x2,r.y1)),this._commitLayoutVertex(u.layoutVertexArray,g,f,x,T,A,new dt(r.x2,r.y2)),this._commitLayoutVertex(u.layoutVertexArray,g,f,x,T,A,new dt(r.x1,r.y2)),M.vertexLength+=4;const I=u.indexArray;I.emplaceBack($,$+1),I.emplaceBack($+1,$+2),I.emplaceBack($+2,$+3),I.emplaceBack($+3,$),M.primitiveLength+=4}_addTextDebugCollisionBoxes(r,s,u,g,f,x){for(let C=g;C<f;C++){const M=u.get(C),$=this.getSymbolInstanceTextSize(r,x,s,C);this._addCollisionDebugVertices(M,$,this.textCollisionBox,M.projectedAnchorX,M.projectedAnchorY,M.projectedAnchorZ,x)}}_addIconDebugCollisionBoxes(r,s,u,g,f,x){for(let C=g;C<f;C++){const M=u.get(C),$=this.getSymbolInstanceIconSize(r,s,x.placedIconSymbolIndex);this._addCollisionDebugVertices(M,$,this.iconCollisionBox,M.projectedAnchorX,M.projectedAnchorY,M.projectedAnchorZ,x)}}generateCollisionDebugBuffers(r,s,u){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new N2(Kh,kb.members,pc),this.iconCollisionBox=new N2(Kh,kb.members,pc);const g=cl(this.iconSizeData,r),f=cl(this.textSizeData,r,u);for(let x=0;x<this.symbolInstances.length;x++){const C=this.symbolInstances.get(x);this._addTextDebugCollisionBoxes(f,r,s,C.textBoxStartIndex,C.textBoxEndIndex,C),this._addTextDebugCollisionBoxes(f,r,s,C.verticalTextBoxStartIndex,C.verticalTextBoxEndIndex,C),this._addIconDebugCollisionBoxes(g,r,s,C.iconBoxStartIndex,C.iconBoxEndIndex,C),this._addIconDebugCollisionBoxes(g,r,s,C.verticalIconBoxStartIndex,C.verticalIconBoxEndIndex,C)}}getSymbolInstanceTextSize(r,s,u,g){const f=this.text.placedSymbolArray.get(s.rightJustifiedTextSymbolIndex>=0?s.rightJustifiedTextSymbolIndex:s.centerJustifiedTextSymbolIndex>=0?s.centerJustifiedTextSymbolIndex:s.leftJustifiedTextSymbolIndex>=0?s.leftJustifiedTextSymbolIndex:s.verticalPlacedTextSymbolIndex>=0?s.verticalPlacedTextSymbolIndex:g),x=Xp(this.textSizeData,r,f)/Vi;return this.tilePixelRatio*x}getSymbolInstanceIconSize(r,s,u){const g=this.icon.placedSymbolArray.get(u),f=Xp(this.iconSizeData,r,g);return this.tilePixelRatio*f}_commitDebugCollisionVertexUpdate(r,s,u,g){r.emplaceBack(s,-u,-u,g),r.emplaceBack(s,u,-u,g),r.emplaceBack(s,u,u,g),r.emplaceBack(s,-u,u,g)}_updateTextDebugCollisionBoxes(r,s,u,g,f,x,C){for(let M=g;M<f;M++){const $=u.get(M),T=this.getSymbolInstanceTextSize(r,x,s,M);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,T,$.padding,x.zOffset)}}_updateIconDebugCollisionBoxes(r,s,u,g,f,x,C){for(let M=g;M<f;M++){const $=u.get(M),T=this.getSymbolInstanceIconSize(r,s,x.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,T,$.padding,x.zOffset)}}updateCollisionDebugBuffers(r,s,u,g){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const f=cl(this.iconSizeData,r,g),x=cl(this.textSizeData,r,u);for(let C=0;C<this.symbolInstances.length;C++){const M=this.symbolInstances.get(C);this._updateTextDebugCollisionBoxes(x,r,s,M.textBoxStartIndex,M.textBoxEndIndex,M,u),this._updateTextDebugCollisionBoxes(x,r,s,M.verticalTextBoxStartIndex,M.verticalTextBoxEndIndex,M,u),this._updateIconDebugCollisionBoxes(f,r,s,M.iconBoxStartIndex,M.iconBoxEndIndex,M,g),this._updateIconDebugCollisionBoxes(f,r,s,M.verticalIconBoxStartIndex,M.verticalIconBoxEndIndex,M,g)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(r,s,u,g,f,x,C,M,$){const T={};if(s<u){const{x1:A,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ne,tileAnchorX:ie,tileAnchorY:J,featureIndex:le}=r.get(s);T.textBox={x1:A,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ne,tileAnchorX:ie,tileAnchorY:J},T.textFeatureIndex=le}if(g<f){const{x1:A,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ne,tileAnchorX:ie,tileAnchorY:J,featureIndex:le}=r.get(g);T.verticalTextBox={x1:A,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ne,tileAnchorX:ie,tileAnchorY:J},T.verticalTextFeatureIndex=le}if(x<C){const{x1:A,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ne,tileAnchorX:ie,tileAnchorY:J,featureIndex:le}=r.get(x);T.iconBox={x1:A,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ne,tileAnchorX:ie,tileAnchorY:J},T.iconFeatureIndex=le}if(M<$){const{x1:A,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ne,tileAnchorX:ie,tileAnchorY:J,featureIndex:le}=r.get(M);T.verticalIconBox={x1:A,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ne,tileAnchorX:ie,tileAnchorY:J},T.verticalIconFeatureIndex=le}return T}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const u=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(r,s){const u=r.placedSymbolArray.get(s),g=u.vertexStartIndex+4*u.numGlyphs;for(let f=u.vertexStartIndex;f<g;f+=4)r.indexArray.emplaceBack(f,f+1,f+2),r.indexArray.emplaceBack(f+1,f+2,f+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(r),u=Math.cos(r),g=[],f=[],x=[];for(let C=0;C<this.symbolInstances.length;++C){x.push(C);const M=this.symbolInstances.get(C);g.push(0|Math.round(s*M.tileAnchorX+u*M.tileAnchorY)),f.push(M.featureIndex)}return x.sort((C,M)=>g[C]-g[M]||f[M]-f[C]),x}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let r=0;r<this.symbolInstances.length;++r)this.symbolInstanceIndexesSortedZOffset.push(r)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((r,s)=>this.symbolInstances.get(s).zOffset-this.symbolInstances.get(r).zOffset)}addToSortKeyRanges(r,s){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===s?u.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const u=this.symbolInstances.get(s);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:f,leftJustifiedTextSymbolIndex:x,verticalPlacedTextSymbolIndex:C,placedIconSymbolIndex:M,verticalPlacedIconSymbolIndex:$}=u;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),f>=0&&f!==g&&this.addIndicesForPlacedSymbol(this.text,f),x>=0&&x!==f&&x!==g&&this.addIndicesForPlacedSymbol(this.text,x),C>=0&&this.addIndicesForPlacedSymbol(this.text,C),M>=0&&this.addIndicesForPlacedSymbol(this.icon,M),$>=0&&this.addIndicesForPlacedSymbol(this.icon,$)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let tE,rE,B2;Tr(Hb,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Hb.addDynamicAttributes=Gb;class aE{constructor(r){this.type=r.property.overrides?r.property.overrides.runtimeType:Fs,this.defaultValue=r}evaluate(r){if(r.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Tr(aE,"FormatSectionOverride",{omit:["defaultValue"]});const j2=()=>B2||(B2={layout:tE||(tE=new Mn({"symbol-placement":new tr(Tt.layout_symbol["symbol-placement"]),"symbol-spacing":new tr(Tt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new tr(Tt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vr(Tt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new tr(Tt.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new tr(Tt.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new tr(Tt.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new tr(Tt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new tr(Tt.layout_symbol["icon-ignore-placement"]),"icon-optional":new tr(Tt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new tr(Tt.layout_symbol["icon-rotation-alignment"]),"icon-size":new vr(Tt.layout_symbol["icon-size"]),"icon-size-scale-range":new tr(Tt.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new vr(Tt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new vr(Tt.layout_symbol["icon-text-fit-padding"]),"icon-image":new vr(Tt.layout_symbol["icon-image"]),"icon-rotate":new vr(Tt.layout_symbol["icon-rotate"]),"icon-padding":new tr(Tt.layout_symbol["icon-padding"]),"icon-keep-upright":new tr(Tt.layout_symbol["icon-keep-upright"]),"icon-offset":new vr(Tt.layout_symbol["icon-offset"]),"icon-anchor":new vr(Tt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new tr(Tt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new tr(Tt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new tr(Tt.layout_symbol["text-rotation-alignment"]),"text-field":new vr(Tt.layout_symbol["text-field"]),"text-font":new vr(Tt.layout_symbol["text-font"]),"text-size":new vr(Tt.layout_symbol["text-size"]),"text-size-scale-range":new tr(Tt.layout_symbol["text-size-scale-range"]),"text-max-width":new vr(Tt.layout_symbol["text-max-width"]),"text-line-height":new vr(Tt.layout_symbol["text-line-height"]),"text-letter-spacing":new vr(Tt.layout_symbol["text-letter-spacing"]),"text-justify":new vr(Tt.layout_symbol["text-justify"]),"text-radial-offset":new vr(Tt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new tr(Tt.layout_symbol["text-variable-anchor"]),"text-anchor":new vr(Tt.layout_symbol["text-anchor"]),"text-max-angle":new tr(Tt.layout_symbol["text-max-angle"]),"text-writing-mode":new tr(Tt.layout_symbol["text-writing-mode"]),"text-rotate":new vr(Tt.layout_symbol["text-rotate"]),"text-padding":new tr(Tt.layout_symbol["text-padding"]),"text-keep-upright":new tr(Tt.layout_symbol["text-keep-upright"]),"text-transform":new vr(Tt.layout_symbol["text-transform"]),"text-offset":new vr(Tt.layout_symbol["text-offset"]),"text-allow-overlap":new tr(Tt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new tr(Tt.layout_symbol["text-ignore-placement"]),"text-optional":new tr(Tt.layout_symbol["text-optional"]),visibility:new tr(Tt.layout_symbol.visibility)})),paint:rE||(rE=new Mn({"icon-opacity":new vr(Tt.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new vr(Tt.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new vr(Tt.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new vr(Tt.paint_symbol["text-emissive-strength"]),"icon-color":new vr(Tt.paint_symbol["icon-color"]),"icon-halo-color":new vr(Tt.paint_symbol["icon-halo-color"]),"icon-halo-width":new vr(Tt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vr(Tt.paint_symbol["icon-halo-blur"]),"icon-translate":new tr(Tt.paint_symbol["icon-translate"]),"icon-translate-anchor":new tr(Tt.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new vr(Tt.paint_symbol["icon-image-cross-fade"]),"text-opacity":new vr(Tt.paint_symbol["text-opacity"]),"text-occlusion-opacity":new vr(Tt.paint_symbol["text-occlusion-opacity"]),"text-color":new vr(Tt.paint_symbol["text-color"],{runtimeType:bs,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new vr(Tt.paint_symbol["text-halo-color"]),"text-halo-width":new vr(Tt.paint_symbol["text-halo-width"]),"text-halo-blur":new vr(Tt.paint_symbol["text-halo-blur"]),"text-translate":new tr(Tt.paint_symbol["text-translate"]),"text-translate-anchor":new tr(Tt.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new tr(Tt.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new tr(Tt.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new tr(Tt.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new tr(Tt.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new vr(Tt.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},B2);class qb extends is{constructor(r,s,u,g){super(r,j2(),s,u,g),this._colorAdjustmentMatrix=Se.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=r.paint!==void 0&&("icon-occlusion-opacity"in r.paint||"text-occlusion-opacity"in r.paint)}recalculate(r,s){super.recalculate(r,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const g=[];for(const f of u)g.indexOf(f)<0&&g.push(f);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(r,s,u,g){return this._saturation===r&&this._contrast===s&&this._brightnessMin===u&&this._brightnessMax===g||(this._colorAdjustmentMatrix=function(f,x,C,M){f=Ce(f),x=ye(x);const $=Se.mat4.create(),T=f/3,A=1-2*T,I=[A,T,T,0,T,A,T,0,T,T,A,0,0,0,0,1],P=.5-.5*x,R=M-C;return Se.mat4.multiply($,[R,0,0,0,0,R,0,0,0,0,R,0,C,C,C,1],[x,0,0,0,0,x,0,0,0,0,x,0,P,P,P,1]),Se.mat4.multiply($,$,I),$}(r,s,u,g),this._saturation=r,this._contrast=s,this._brightnessMin=u,this._brightnessMax=g),this._colorAdjustmentMatrix}getValueAndResolveTokens(r,s,u,g){const f=this.layout.get(r).evaluate(s,{},u,g),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||fp(x.value)||!f?f:function(C,M){return M.replace(/{([^{}]+)}/g,($,T)=>T in C?String(C[T]):"")}(s.properties,f)}createBucket(r){return new Hb(r)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const r of j2().paint.overridableProperties){if(!qb.hasPaintOverride(this.layout,r))continue;const s=this.paint.get(r),u=new aE(s),g=new qc(u,s.property.specification,this.scope,this.options);let f=null;f=s.value.kind==="constant"||s.value.kind==="source"?new Um("source",g):new Wu("composite",g,s.value.zoomStops,s.value._interpolationType),this.paint._values[r]=new Hd(s.property,f,s.parameters)}}_handleOverridablePaintPropertyUpdate(r,s,u){return!(!this.layout||s.isDataDriven()||u.isDataDriven())&&qb.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,s){const u=r.get("text-field"),g=j2().paint.properties[s];let f=!1;const x=C=>{for(const M of C)if(g.overrides&&g.overrides.hasOverride(M))return void(f=!0)};if(u.value.kind==="constant"&&u.value.value instanceof Mi)x(u.value.value.sections);else if(u.value.kind==="source"){const C=$=>{f||($ instanceof Co&&wn($.value)===Eo?x($.value.sections):$ instanceof vl?x($.sections):$.eachChild(C))},M=u.value;M._styleExpression&&C(M._styleExpression.expression)}return f}getProgramIds(){return["symbol"]}getDefaultProgramParams(r,s,u){return{config:new eu(this,{zoom:s,lut:u}),overrideFog:!1}}}let nE,iE,sE,oE;var O2=Oa([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function F2(l){switch(l){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function V2(l){switch(l){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class U2{constructor(r,s,u,g){this.context=r,this.format=u,this.useMipmap=g&&g.useMipmap,this.texture=r.gl.createTexture(),this.update(s,{premultiply:g&&g.premultiply})}update(r,s){const u=r&&r instanceof HTMLVideoElement&&r.width===0?r.videoWidth:r.width,g=r&&r instanceof HTMLVideoElement&&r.height===0?r.videoHeight:r.height,{context:f}=this,{gl:x}=f,{x:C,y:M}=s&&s.position?s.position:{x:0,y:0},$=C+u,T=M+g;!this.size||this.size[0]===$&&this.size[1]===T||(x.bindTexture(x.TEXTURE_2D,null),x.deleteTexture(this.texture),this.texture=x.createTexture(),this.size=null),x.bindTexture(x.TEXTURE_2D,this.texture),f.pixelStoreUnpackFlipY.set(!1),f.pixelStoreUnpack.set(1),f.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA8&&(!s||s.premultiply!==!1));const A=r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||ImageBitmap&&r instanceof ImageBitmap;if(!this.size&&$>0&&T>0){const I=this.useMipmap?Math.floor(Math.log2(Math.max($,T)))+1:1;x.texStorage2D(x.TEXTURE_2D,I,this.format,$,T),this.size=[$,T]}if(this.size)if(A)x.texSubImage2D(x.TEXTURE_2D,0,C,M,F2(this.format),V2(this.format),r);else{const I=r.data;I&&x.texSubImage2D(x.TEXTURE_2D,0,C,M,u,g,F2(this.format),V2(this.format),I)}this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(r,s,u=!1){const{context:g}=this,{gl:f}=g;f.bindTexture(f.TEXTURE_2D,this.texture),r!==this.minFilter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,r),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.useMipmap&&!u?r===f.NEAREST?f.NEAREST_MIPMAP_NEAREST:f.LINEAR_MIPMAP_LINEAR:r),this.minFilter=r),s!==this.wrapS&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,s),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,s),this.wrapS=s)}bindExtraParam(r,s,u,g){const{context:f}=this,{gl:x}=f;x.bindTexture(x.TEXTURE_2D,this.texture),s!==this.magFilter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,s),this.magFilter=s),r!==this.minFilter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,this.useMipmap?r===x.NEAREST?x.NEAREST_MIPMAP_NEAREST:x.LINEAR_MIPMAP_LINEAR:r),this.minFilter=r),u!==this.wrapS&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,u),this.wrapS=u),g!==this.wrapT&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,g),this.wrapT=g)}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class Wb{constructor(r,s){this.context=r,this.texture=s}bind(r,s){const{context:u}=this,{gl:g}=u;g.bindTexture(g.TEXTURE_2D,this.texture),r!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,r),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,r),this.minFilter=r),s!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,s),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,s),this.wrapS=s)}}function Kb(l,r,s,u,g,f,x,C){const M=[l,r,1,s,u,1,g,f,1],$=[x,C,1],T=Se.mat3.adjoint([],M),[A,I,P]=Se.vec3.transformMat3($,$,T);return Se.mat3.multiply(M,M,[A,0,0,0,I,0,0,0,P])}function lE(l,r,s,u,g,f,x,C){const M=function($,T,A,I,P,R,j,W){const K=Kb(0,0,1,0,1,1,0,1),ne=Kb($,T,A,I,P,R,j,W),ie=Se.mat3.adjoint([],K);return Se.mat3.multiply(ne,ne,ie)}(l,r,s,u,g,f,x,C);return[M[2]/M[8]/lr,M[5]/M[8]/lr]}function Zb(l){return[l[0],Math.min(Math.max(l[1],-85.051129),cs)]}class cE extends Rc{constructor(r,s,u,g){super(),this.id=r,this.dispatcher=u,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(g),this.options=s,this._dirty=!1}load(r,s){if(this._loaded=s||!1,this.fire(new eo("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return r&&(this.coordinates=r),this._loaded=!0,void this._finishLoading();this._imageRequest=Pu(this.map._requestManager.transformRequest(this.url,Ul.Image),(u,g)=>{this._imageRequest=null,this._loaded=!0,u?this.fire(new kc(u)):g&&(this.image=g instanceof HTMLImageElement?Gt.getImageData(g):g,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,r&&(this.coordinates=r),this._finishLoading())})}loaded(){return this._loaded}updateImage(r){return r.url?(this._imageRequest&&r.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=r.url,this.load(r.coordinates,this._loaded),this):this}setTexture(r){if(!(r.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new Wb(this.map.painter.context,r.handle),this.width=r.dimensions[0],this.height=r.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new eo("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(r){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof Wb||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(r){if(this.coordinates=r,this._boundsArray=void 0,this._unsupportedCoords=!1,!r.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let s=r[0][1],u=r[0][1];for(const f of r)f[1]>u&&(u=f[1]),f[1]<s&&(s=f[1]);const g=(u+s)/2;if(g>cs?this.onNorthPole=!0:g<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const f=r.map(m.fromLngLat);this.tileID=function(x){let C=1/0,M=1/0,$=-1/0,T=-1/0;for(const j of x)C=Math.min(C,j.x),M=Math.min(M,j.y),$=Math.max($,j.x),T=Math.max(T,j.y);const A=Math.max($-C,T-M),I=Math.max(0,Math.floor(-Math.log(A)/Math.LN2)),P=Math.pow(2,I);let R=Math.floor((C+$)/2*P);return R>1&&(R-=1),new zt(I,R,Math.floor((M+T)/2*P))}(f),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new eo("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(r){for(const K in this.tiles){const ne=this.tiles[K];ne.state!=="loaded"&&(ne.state="loaded",ne.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const s=rv(new zt(0,0,0),this.map.transform.projection),u=[s.projection.project(this.coordinates[0][0],this.coordinates[0][1]),s.projection.project(this.coordinates[1][0],this.coordinates[1][1]),s.projection.project(this.coordinates[2][0],this.coordinates[2][1]),s.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(K){const ne=K[1].x-K[0].x,ie=K[1].y-K[0].y,J=K[2].x-K[1].x,le=K[2].y-K[1].y,fe=K[3].x-K[2].x,ve=K[3].y-K[2].y,Ne=K[0].x-K[3].x,$e=K[0].y-K[3].y,Ie=ne*le-J*ie,Je=J*ve-fe*le,Ve=fe*$e-Ne*ve,et=Ne*ie-ne*$e;return Ie>0&&Je>0&&Ve>0&&et>0||Ie<0&&Je<0&&Ve<0&&et<0}(u))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const g=rv(this.tileID,this.map.transform.projection),[f,x,C,M]=this.coordinates.map(K=>{const ne=g.projection.project(K[0],K[1]);return ZT(g,ne)._round()});this.perspectiveTransform=lE(f.x,f.y,x.x,x.y,C.x,C.y,M.x,M.y);const $=this._boundsArray=new cc;$.emplaceBack(f.x,f.y,0,0),$.emplaceBack(x.x,x.y,lr,0),$.emplaceBack(M.x,M.y,0,lr),$.emplaceBack(C.x,C.y,lr,lr),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=r.createVertexBuffer($,O2.members),this.boundsSegments=An.simpleSegment(0,0,4,2);const T=[],A=[Zb((I=this.coordinates)[0]),Zb(I[1]),Zb(I[2]),Zb(I[3])];var I;const[P,R,j,W]=function(K){let ne=K[0][0],ie=ne,J=K[0][1],le=J;for(let fe=1;fe<K.length;fe++)K[fe][0]<ne?ne=K[fe][0]:K[fe][0]>ie&&(ie=K[fe][0]),K[fe][1]<J?J=K[fe][1]:K[fe][1]>le&&(le=K[fe][1]);return[ne,J,ie-ne,le-J]}(A);{const K=new cc,[ne,ie,J,le]=function(gt){let vt=gt[0].x,ht=vt,Rt=gt[0].y,Yt=Rt;for(let Lt=1;Lt<gt.length;Lt++)gt[Lt].x<vt?vt=gt[Lt].x:gt[Lt].x>ht&&(ht=gt[Lt].x),gt[Lt].y<Rt?Rt=gt[Lt].y:gt[Lt].y>Yt&&(Yt=gt[Lt].y);return[vt,Rt,ht-vt,Yt-Rt]}(u),fe=gt=>[(gt.x-ne)/J,(gt.y-ie)/le],[ve,Ne,$e,Ie]=u.map(fe),Je=function(gt,vt,ht,Rt,Yt,Lt,nr,ar){const gr=Kb(0,0,1,0,1,1,0,1),jt=Kb(gt,vt,ht,Rt,Yt,Lt,nr,ar),Mr=Se.mat3.adjoint([],jt);return Se.mat3.multiply(gr,gr,Mr)}(ve[0],ve[1],Ne[0],Ne[1],$e[0],$e[1],Ie[0],Ie[1]);this.elevatedGlobePerspectiveTransform=lE(ve[0],ve[1],Ne[0],Ne[1],$e[0],$e[1],Ie[0],Ie[1]);const Ve=(gt,vt)=>{T.push(gt.lng);const ht=Math.round((gt.lng-P)/j*lr),Rt=Math.round((gt.lat-R)/W*lr),Yt=fe(vt),Lt=Se.vec3.transformMat3([],[Yt[0],Yt[1],1],Je),nr=Math.round(Lt[0]/Lt[2]*lr),ar=Math.round(Lt[1]/Lt[2]*lr);K.emplaceBack(ht,Rt,nr,ar)},et=u[3].x-u[0].x,it=u[3].y-u[0].y,at=u[2].x-u[1].x,lt=u[2].y-u[1].y;for(let gt=0;gt<65;gt++){const vt=gt/64,ht=[u[0].x+vt*et,u[0].y+vt*it],Rt=[u[1].x+vt*at,u[1].y+vt*lt],Yt=Rt[0]-ht[0],Lt=Rt[1]-ht[1];for(let nr=0;nr<65;nr++){const ar=nr/64,gr={x:ht[0]+Yt*ar,y:ht[1]+Lt*ar};Ve(s.projection.unproject(gr.x,gr.y),gr)}}this.elevatedGlobeVertexBuffer=r.createVertexBuffer(K,O2.members)}{this.maxLongitudeTriangleSize=0;let K=[],ne=new Fi;const ie=(J,le,fe)=>{ne.emplaceBack(J,le,fe);const ve=T[J],Ne=T[le],$e=T[fe],Ie=Math.min(Math.min(ve,Ne),$e),Je=Math.max(Math.max(ve,Ne),$e)-Ie;Je>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=Je),K.push(Ie+Je/2)};for(let J=0;J<64;J++)for(let le=0;le<64;le++){const fe=65*J+le,ve=fe+1,Ne=fe+65,$e=Ne+1;ie(fe,Ne,ve),ie(ve,Ne,$e)}[K,ne]=function(J,le){const fe=Array.from({length:J.length},($e,Ie)=>Ie);fe.sort(($e,Ie)=>J[$e]-J[Ie]);const ve=[],Ne=new Fi;for(let $e=0;$e<fe.length;$e++){const Ie=fe[$e];ve.push(J[Ie]);const Je=3*Ie,Ve=Je+1;Ne.emplaceBack(le.uint16[Je],le.uint16[Ve],le.uint16[Ve+1])}return[ve,Ne]}(K,ne),this.elevatedGlobeTrianglesCenterLongitudes=K,this.elevatedGlobeIndexBuffer=r.createIndexBuffer(ne)}this.elevatedGlobeSegments=An.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,j/lr,0,W/lr,0,0,R,P,0])}prepare(){const r=Object.keys(this.tiles).length!==0;if(this.tileID&&!r)return;const s=this.map.painter.context,u=s.gl;!this._dirty||this.texture instanceof Wb||(this.texture?this.texture.update(this.image):(this.texture=new U2(s,this.image,u.RGBA8),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this._dirty=!1),r&&this._prepareData(s)}loadTile(r,s){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},s(null)):(r.state="errored",s(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(r){const s=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!s)return null;const u=this.elevatedGlobeTrianglesCenterLongitudes;let g=(f=r+180)+360*Math.round((u[0]-f)/360);var f;const x=new An,C=(A,I)=>{x.segments.push({vertexOffset:0,primitiveOffset:A,vertexLength:s.segments[0].vertexLength,primitiveLength:I,sortKey:void 0,vaos:{}})},M=.51*this.maxLongitudeTriangleSize;if(Math.abs(u[0]-g)<=M){const A=St(u,0,u.length,g+M);return A===u.length||C(A,ga(u,A+1,u.length,g+360-M)-A),x}g<u[0]&&(g+=360);const $=ga(u,0,u.length,g-M);if($===u.length)return C(0,u.length),x;C(0,$-0);const T=St(u,$+1,u.length,g+M);return T!==u.length&&C(T,u.length-T),x}}const n9=(Math.pow(256,2)-1)/16907520;class uE extends is{constructor(r,s,u,g){super(r,{layout:sE||(sE=new Mn({visibility:new tr(Tt.layout_raster.visibility)})),paint:oE||(oE=new Mn({"raster-opacity":new tr(Tt.paint_raster["raster-opacity"]),"raster-color":new lc(Tt.paint_raster["raster-color"]),"raster-color-mix":new tr(Tt.paint_raster["raster-color-mix"]),"raster-color-range":new tr(Tt.paint_raster["raster-color-range"]),"raster-hue-rotate":new tr(Tt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new tr(Tt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new tr(Tt.paint_raster["raster-brightness-max"]),"raster-saturation":new tr(Tt.paint_raster["raster-saturation"]),"raster-contrast":new tr(Tt.paint_raster["raster-contrast"]),"raster-resampling":new tr(Tt.paint_raster["raster-resampling"]),"raster-fade-duration":new tr(Tt.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new tr(Tt.paint_raster["raster-emissive-strength"]),"raster-array-band":new tr(Tt.paint_raster["raster-array-band"]),"raster-elevation":new tr(Tt.paint_raster["raster-elevation"]),"raster-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},s,u,g),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(r){return!(r&&r._source instanceof cE&&(r._source.onNorthPole||r._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(r){r!=="raster-color"&&r!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(r){if(!this.hasColorMap()||!this._curRampRange)return;const s=this._transitionablePaint._values["raster-color"].value.expression,[u,g]=r||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(u)&&isNaN(g)||u===this._curRampRange[0]&&g===this._curRampRange[1]||(this.colorRamp=Bp({expression:s,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:u,end:g}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[u,g])}}let dE,hE,fE,pE,mE;class gE extends is{constructor(r,s,u,g){super(r,{layout:dE||(dE=new Mn({visibility:new tr(Tt["layout_raster-particle"].visibility)})),paint:hE||(hE=new Mn({"raster-particle-array-band":new tr(Tt["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new tr(Tt["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new lc(Tt["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new tr(Tt["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new tr(Tt["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new tr(Tt["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new tr(Tt["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new tr(Tt["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},s,u,g),this._updateColorRamp(),this.lastInvalidatedAt=Gt.now()}onRemove(r){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(r){return!1}_handleSpecialPaintPropertyUpdate(r){r!=="raster-particle-color"&&r!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),r==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const r=this._transitionablePaint._values["raster-particle-color"].value.expression,s=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=Bp({expression:r,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:s}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Gt.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class i9 extends is{constructor(r,s){super(r,{},s,null),this.implementation=r,r.slot&&(this.slot=r.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(r){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(r){this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)}onRemove(r){this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)}}function G2(l,r,s){const u=[0,0,1],g=Se.quat.identity([]);return Se.quat.rotateY(g,g,s?-mr(l)+Math.PI:mr(l)),Se.quat.rotateX(g,g,-mr(r)),Se.vec3.transformQuat(u,u,g),Se.vec3.normalize(u,u)}function yE(l,r){const s=Xb(l.projection,l.zoom,l.width,l.height),u=function(f,x,C,M,$){const T=new La(C.lng-180*tm,C.lat),A=new La(C.lng+180*tm,C.lat),I=f.project(T.lng,T.lat),P=f.project(A.lng,A.lat),R=-Math.atan2(P.y-I.y,P.x-I.x),j=m.fromLngLat(C);j.y=fr(j.y,-1+tm,1-tm);const W=j.toLngLat(),K=f.project(W.lng,W.lat),ne=m.fromLngLat(W);ne.x+=tm;const ie=ne.toLngLat(),J=f.project(ie.lng,ie.lat),le=vE(J.x-K.x,J.y-K.y,R),fe=m.fromLngLat(W);fe.y+=tm;const ve=fe.toLngLat(),Ne=f.project(ve.lng,ve.lat),$e=vE(Ne.x-K.x,Ne.y-K.y,R),Ie=Math.abs(le.x)/Math.abs($e.y),Je=Se.mat4.identity([]);Se.mat4.rotateZ(Je,Je,-R*(1-($?0:M)));const Ve=Se.mat4.identity([]);return Se.mat4.scale(Ve,Ve,[1,1-(1-Ie)*M,1]),Ve[4]=-$e.x/$e.y*M,Se.mat4.rotateZ(Ve,Ve,R),Se.mat4.multiply(Ve,Je,Ve),Ve}(l.projection,0,l.center,s,r),g=xE(l);return Se.mat4.scale(u,u,[g,g,1]),u}function xE(l){const r=l.projection,s=Xb(l.projection,l.zoom,l.width,l.height),u=H2(r,l.center),g=H2(r,La.convert(r.center));return Math.pow(2,u*s+(1-s)*g)}function Xb(l,r,s,u,g=1/0){const f=l.range;if(!f)return 0;const x=Math.min(g,Math.max(s,u)),C=Math.log(x/1024)/Math.LN2;return Sa(f[0]+C,f[1]+C,r)}const tm=1/4e4;function H2(l,r){const s=fr(r.lat,-85.051129,cs),u=new La(r.lng-180*tm,s),g=new La(r.lng+180*tm,s),f=l.project(u.lng,s),x=l.project(g.lng,s),C=m.fromLngLat(u),M=m.fromLngLat(g),$=x.x-f.x,T=x.y-f.y,A=M.x-C.x,I=M.y-C.y,P=Math.sqrt((A*A+I*I)/($*$+T*T));return Math.log(P)/Math.LN2}function vE(l,r,s){const u=Math.cos(s),g=Math.sin(s);return{x:l*u-r*g,y:l*g+r*u}}function _E(l,r,s){Se.mat4.identity(l),Se.mat4.rotateZ(l,l,mr(r[2])),Se.mat4.rotateX(l,l,mr(r[0])),Se.mat4.rotateY(l,l,mr(r[1])),Se.mat4.scale(l,l,s),Se.mat4.multiply(l,l,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function Yb(l,r,s,u,g,f,x,C){const M=[s[0]-r[0],s[1]-r[1],0],$=[u[0]-r[0],u[1]-r[1],0];if(Se.vec3.length(M)<1e-12||Se.vec3.length($)<1e-12)return Se.quat.identity(l);const T=Se.vec3.cross([],M,$);Se.vec3.normalize(T,T),Se.vec3.subtract($,u,r),M[2]=(f-g)*C,$[2]=(x-g)*C;const A=M;return Se.vec3.cross(A,M,$),Se.vec3.normalize(A,A),Se.quat.rotationTo(l,T,A)}function q2(l,r,s=!1){const u=Qi(r.zoom),g=function(f,x,C){const M=x.worldSize,$=[f[12],f[13],f[14]],T=Li($[1]/M),A=qs($[0]/M),I=Se.mat4.identity([]),P=Xi(1,T)*M,R=Xi(1,0)*M*p(T,x.zoom),j=1/Yi(M);let W=R*j;if(C){const J=Xb(x.projection,x.zoom,x.width,x.height,1024);W=j*x.projection.pixelSpaceConversion(x.center.lat,M,J)}const K=Al(T,A);Se.vec3.add(K,K,Se.vec3.scale([],Se.vec3.normalize([],K),P*W*$[2]));const ne=function(J){const le=[J[0],J[1],J[2]];let fe=[0,1,0];const ve=Se.vec3.cross([],fe,le);return Se.vec3.cross(fe,le,ve),Se.vec3.squaredLength(fe)===0&&(fe=[0,1,0],Se.vec3.cross(ve,le,fe)),Se.vec3.normalize(ve,ve),Se.vec3.normalize(fe,fe),Se.vec3.normalize(le,le),[ve[0],ve[1],ve[2],0,fe[0],fe[1],fe[2],0,le[0],le[1],le[2],0,J[0],J[1],J[2],1]}(K);Se.mat4.scale(I,I,[W,W,W*P]),Se.mat4.translate(I,I,[-$[0],-$[1],-$[2]]);const ie=Se.mat4.multiply([],x.globeMatrix,ne);return Se.mat4.multiply(ie,ie,I),Se.mat4.multiply(ie,ie,f),ie}(l,r,s);if(u>0){const f=function(x,C){const M=C.worldSize,$=Xi(1,0)*M*p(C.center.lat,C.zoom)/Yi(M),T=Xi(1,C.center.lat)*M,A=Se.mat4.identity([]);return Se.mat4.rotateY(A,A,mr(C.center.lng)),Se.mat4.rotateX(A,A,mr(C.center.lat)),Se.mat4.translate(A,A,[0,0,os]),Se.mat4.scale(A,A,[$,$,$*T]),Se.mat4.translate(A,A,[C.point.x-.5*M,C.point.y-.5*M,0]),Se.mat4.multiply(A,A,x),Se.mat4.multiply(A,C.globeMatrix,A)}(l,r);return function(x,C,M){const $=(R,j,W)=>{const K=Se.vec3.length(R),ne=Se.vec3.length(j),ie=En(R,j,W);return Se.vec3.scale(ie,ie,1/Se.vec3.length(ie)*Or(K,ne,W))},T=$([x[0],x[1],x[2]],[C[0],C[1],C[2]],M),A=$([x[4],x[5],x[6]],[C[4],C[5],C[6]],M),I=$([x[8],x[9],x[10]],[C[8],C[9],C[10]],M),P=En([x[12],x[13],x[14]],[C[12],C[13],C[14]],M);return[T[0],T[1],T[2],0,A[0],A[1],A[2],0,I[0],I[1],I[2],0,P[0],P[1],P[2],1]}(g,f,u)}return g}function bE(l,r,s,u){const g=jr.projectAabbCorners(u,s);let f=Number.MAX_VALUE,x=-1;for(let $=0;$<g.length;++$){const T=g[$];T[0]=(.5*T[0]+.5)*r.width,T[1]=(.5-.5*T[1])*r.height,T[2]<f&&(x=$,f=T[2])}const C=$=>new dt(g[$][0],g[$][1]);let M;switch(x){case 0:case 6:M=[C(1),C(5),C(4),C(7),C(3),C(2),C(1)];break;case 1:case 7:M=[C(0),C(4),C(5),C(6),C(2),C(3),C(0)];break;case 3:case 5:M=[C(1),C(0),C(4),C(7),C(6),C(2),C(1)];break;default:M=[C(1),C(5),C(6),C(7),C(3),C(0),C(1)]}if(xe(l,M))return f}const s9=Oa([{name:"a_pos_3f",components:3,type:"Float32"}]),o9=Oa([{name:"a_color_3f",components:3,type:"Float32"}]),l9=Oa([{name:"a_color_4f",components:4,type:"Float32"}]),c9=Oa([{name:"a_uv_2f",components:2,type:"Float32"}]),u9=Oa([{name:"a_normal_3f",components:3,type:"Float32"}]),d9=Oa([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),h9=Oa([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),wE={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class Jb{constructor(r,s,u,g){this.message=(r?`${r}: `:"")+u,g&&(this.identifier=g),s!=null&&s.__line__&&(this.line=s.__line__)}}function SE(l,r){const s=l.indexOf("://")===-1;try{return new URL(l,s&&r?"http://example.com":void 0),!0}catch{return!1}}class TE{constructor(r,s){this.feature=r,this.instancedDataOffset=s,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class EE{constructor(){this.instancedDataArray=new ef,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class W2{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.projection=r.projection,this.index=r.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(r,s){}populate(r,s,u,g){this.tileToMeter=o(u);const f=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:x,id:C,index:M,sourceLayerIndex:$}of r){const T=C??(x.properties&&x.properties.hasOwnProperty("id")?x.properties.id:void 0),A=X(x,f);if(!this.layers[0]._featureFilter.filter(new Ea(this.zoom),A,u))continue;const I={id:T,sourceLayerIndex:$,index:M,geometry:f?A.geometry:Z(x,u,g),properties:x.properties,type:x.type,patterns:{}},P=this.addFeature(I,I.geometry,A);P&&s.featureIndex.insert(x,I.geometry,M,$,this.index,this.instancesPerModel[P].instancedDataArray.length,lr/32)}this.lookup=null}update(r,s,u,g){for(const f in this.instancesPerModel){const x=this.instancesPerModel[f];for(const C in r)x.idToFeaturesIndex.hasOwnProperty(C)&&(this.evaluate(x.features[x.idToFeaturesIndex[C]],r[C],x,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let r=!1;for(const s in this.instancesPerModel){const u=this.instancesPerModel[s];for(const g of u.features){const f=this.layers[0],x=g.feature,C=this.canonical,M=f.paint.get("model-rotation").evaluate(x,{},C),$=f.paint.get("model-scale").evaluate(x,{},C),T=f.paint.get("model-translation").evaluate(x,{},C);Se.vec3.exactEquals(g.rotation,M)&&Se.vec3.exactEquals(g.scale,$)&&Se.vec3.exactEquals(g.translation,T)||(this.evaluate(g,g.featureStates,u,!0),r=!0)}}return r}updateReplacement(r,s,u,g){if(s.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=s.updateTime;const f=s.getReplacementRegionsForTile(r.toUnwrapped(),!0);if(hs(this.activeReplacements,f))return!1;this.activeReplacements=f;let x=!1;for(const C in this.instancesPerModel){const M=this.instancesPerModel[C],$=M.instancedDataArray;for(const T of M.features){const A=T.instancedDataOffset,I=T.instancedDataCount;for(let P=0;P<I;P++){const R=16*(P+A);let j=$.float32[R+0];const W=j>lr;j=W?j-lr:j;const K=Math.floor(j),ne=$.float32[R+1];let ie=!1;for(const J of this.activeReplacements)if(!Nx(J,u,wE.Model,g)&&!(J.min.x>K||K>J.max.x||J.min.y>ne||ne>J.max.y)&&(ie=Ox(jx(K,ne,r.canonical,J.footprintTileId.canonical),J.footprint),ie))break;$.float32[R]=ie?j+lr:j,x=x||ie!==W}}}return x}isEmpty(){for(const r in this.instancesPerModel)if(this.instancesPerModel[r].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(r){if(!this.uploaded)for(const s in this.instancesPerModel){const u=this.instancesPerModel[s];u.instancedDataArray.length<0||u.instancedDataArray.length===0||(u.instancedDataBuffer?u.instancedDataBuffer.updateData(u.instancedDataArray):u.instancedDataBuffer=r.createVertexBuffer(u.instancedDataArray,d9.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const s in this.instancesPerModel){const u=this.instancesPerModel[s];u.instancedDataArray.length!==0&&u.instancedDataBuffer&&u.instancedDataBuffer.destroy()}const r=this.layers[0].modelManager;if(r&&this.modelUris)for(const s of this.modelUris)r.removeModel(s,"")}addFeature(r,s,u){const g=this.layers[0],f=g.layout.get("model-id").evaluate(u,{},this.canonical);if(!f)return Wr(`modelId is not evaluated for layer ${g.id} and it is not going to get rendered.`),f;SE(f,!1)&&(this.modelUris.includes(f)||this.modelUris.push(f)),this.instancesPerModel[f]||(this.instancesPerModel[f]=new EE);const x=this.instancesPerModel[f],C=x.instancedDataArray,M=new TE(u,C.length);for(const $ of s)for(const T of $){if(T.x<0||T.x>=lr||T.y<0||T.y>=lr)continue;const A=(this.lookupDim-1)/lr,I=this.lookupDim*(T.y*A|0)+T.x*A|0;if(this.lookup){if(this.lookup[I]!==0)continue;this.lookup[I]=1}this.instanceCount++;const P=C.length;C.resize(P+1),x.instancesEvaluatedElevation.push(0),C.float32[16*P]=T.x,C.float32[16*P+1]=T.y}return M.instancedDataCount=x.instancedDataArray.length-M.instancedDataOffset,M.instancedDataCount>0&&(r.id&&(x.idToFeaturesIndex[r.id]=x.features.length),x.features.push(M),this.evaluate(M,{},x,!1)),f}getModelUris(){return this.modelUris}evaluate(r,s,u,g){const f=this.layers[0],x=r.feature,C=this.canonical,M=r.rotation=f.paint.get("model-rotation").evaluate(x,s,C),$=r.scale=f.paint.get("model-scale").evaluate(x,s,C),T=r.translation=f.paint.get("model-translation").evaluate(x,s,C),A=f.paint.get("model-color").evaluate(x,s,C);A.a=f.paint.get("model-color-mix-intensity").evaluate(x,s,C);const I=[];this.maxVerticalOffset<T[2]&&(this.maxVerticalOffset=T[2]),this.maxScale=Math.max(Math.max(this.maxScale,$[0]),Math.max($[1],$[2])),_E(I,M,$);const P=Math.round(100*A.a)+A.b/1.05;for(let R=0;R<r.instancedDataCount;++R){const j=r.instancedDataOffset+R,W=16*j,K=u.instancedDataArray.float32;let ne=0;g&&(ne=K[W+6]-u.instancesEvaluatedElevation[j]);const ie=0|K[W+1];K[W]=(0|K[W])+A.r/1.05,K[W+1]=ie+A.g/1.05,K[W+2]=P,K[W+3]=1/(C.z>10?this.tileToMeter:o(C,ie)),K[W+4]=T[0],K[W+5]=T[1],K[W+6]=T[2]+ne,K[W+7]=I[0],K[W+8]=I[1],K[W+9]=I[2],K[W+10]=I[4],K[W+11]=I[5],K[W+12]=I[6],K[W+13]=I[8],K[W+14]=I[9],K[W+15]=I[10],u.instancesEvaluatedElevation[j]=T[2]}}}let CE,DE;Tr(W2,"ModelBucket",{omit:["layers"]}),Tr(EE,"PerModelAttributes"),Tr(TE,"ModelFeature");const Eg=64,oy={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function PE(l,r,s,u,g,f,x,C,M,$=!1){const T=s.zoom,A=s.project(u),I=p(u.lat,T),P=1/I;Se.mat4.identity(l),Se.mat4.translate(l,l,[A.x+x[0]*P,A.y+x[1]*P,x[2]]);let R=1,j=1;const W=s.worldSize;if($){if(s.projection.name==="mercator"){let J=0;s.elevation&&(J=s.elevation.getAtPointOrZero(new m(A.x/W,A.y/W),0));const le=Se.vec4.transformMat4([],[A.x,A.y,J,1],s.projMatrix)[3]/s.cameraToCenterDistance;R=le,j=le*p(s.center.lat,T)}else if(s.projection.name==="globe"){const J=q2(l,s),le=Se.mat4.multiply([],s.projMatrix,J),fe=[0,0,0,1];Se.vec4.transformMat4(fe,fe,le);const ve=fe[3]/s.cameraToCenterDistance,Ne=Qi(T),$e=s.projection.pixelsPerMeter(u.lat,W)*p(u.lat,T),Ie=s.projection.pixelsPerMeter(s.center.lat,W)*p(s.center.lat,T);R=ve/Or($e,Np(s.center.lat),Ne),j=ve*I/$e,R*=Ie,j*=Ie}}else R=P;Se.mat4.scale(l,l,[R,R,j]);const K=[...l],ne=r.orientation,ie=[];if(_E(ie,[ne[0]+g[0],ne[1]+g[1],ne[2]+g[2]],f),Se.mat4.multiply(l,K,ie),C&&s.elevation){let J=0;const le=[];if(M&&s.elevation){J=function(Ne,$e,Ie,Je,Ve){const et=$e.elevation;if(!et)return 0;const it=jr.projectAabbCorners(Ie,Je),at=Xi(1,Ve.lat)*$e.worldSize,lt=function(Mr,sr){const Cr=[0,0,1],Vr=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const sa of Vr){const ha=Mr[sa.corners[0]],ba=Mr[sa.corners[1]],fa=Mr[sa.corners[2]],Da=[ba[0]-ha[0],ba[1]-ha[1],sr*(ba[2]-ha[2])],_n=Se.vec3.cross(Da,Da,[fa[0]-ha[0],fa[1]-ha[1],sr*(fa[2]-ha[2])]);Se.vec3.normalize(_n,_n),sa.dotProductWithUp=Se.vec3.dot(_n,Cr)}return Vr.sort((sa,ha)=>sa.dotProductWithUp-ha.dotProductWithUp),Vr[0].corners}(it,at),gt=it[lt[0]],vt=it[lt[1]],ht=it[lt[2]],Rt=it[lt[3]],Yt=et.getAtPointOrZero(new m(gt[0]/$e.worldSize,gt[1]/$e.worldSize),0),Lt=et.getAtPointOrZero(new m(vt[0]/$e.worldSize,vt[1]/$e.worldSize),0),nr=et.getAtPointOrZero(new m(ht[0]/$e.worldSize,ht[1]/$e.worldSize),0),ar=et.getAtPointOrZero(new m(Rt[0]/$e.worldSize,Rt[1]/$e.worldSize),0),gr=(Yt+ar)/2,jt=(Lt+nr)/2;return gr>jt?Lt<nr?Yb(Ne,vt,Rt,gt,Lt,ar,Yt,at):Yb(Ne,ht,gt,Rt,nr,Yt,ar,at):Yt<ar?Yb(Ne,gt,vt,ht,Yt,Lt,nr,at):Yb(Ne,Rt,ht,vt,ar,nr,Lt,at),Math.max(gr,jt)}(le,s,r.aabb,l,u);const fe=Se.mat4.fromQuat([],le),ve=Se.mat4.multiply([],fe,ie);Se.mat4.multiply(l,K,ve)}else J=s.elevation.getAtPointOrZero(new m(A.x/W,A.y/W),0);J!==0&&(l[14]+=J)}}function ov(l,r,s=!1){l.uploaded||(l.gfxTexture=new U2(r,l.image,s?r.gl.R8:r.gl.RGBA8,{useMipmap:l.sampler.minFilter>=r.gl.NEAREST_MIPMAP_NEAREST}),l.uploaded=!0,l.image=null)}function f9(l,r,s){l.indexBuffer=r.createIndexBuffer(l.indexArray,!1,!0),l.vertexBuffer=r.createVertexBuffer(l.vertexArray,s9.members,!1,!0),l.normalArray&&(l.normalBuffer=r.createVertexBuffer(l.normalArray,u9.members,!1,!0)),l.texcoordArray&&(l.texcoordBuffer=r.createVertexBuffer(l.texcoordArray,c9.members,!1,!0)),l.colorArray&&(l.colorBuffer=r.createVertexBuffer(l.colorArray,(l.colorArray.bytesPerElement===12?o9:l9).members,!1,!0)),l.featureArray&&(l.pbrBuffer=r.createVertexBuffer(l.featureArray,h9.members,!0)),l.segments=An.simpleSegment(0,0,l.vertexArray.length,l.indexArray.length);const u=l.material;u.pbrMetallicRoughness.baseColorTexture&&ov(u.pbrMetallicRoughness.baseColorTexture,r),u.pbrMetallicRoughness.metallicRoughnessTexture&&ov(u.pbrMetallicRoughness.metallicRoughnessTexture,r),u.normalTexture&&ov(u.normalTexture,r),u.occlusionTexture&&ov(u.occlusionTexture,r,s),u.emissionTexture&&ov(u.emissionTexture,r)}function K2(l,r,s){if(l.meshes)for(const u of l.meshes)f9(u,r,s);if(l.children)for(const u of l.children)K2(u,r,s)}function Qb(l){if(l.meshes)for(const r of l.meshes)r.indexArray.destroy(),r.vertexArray.destroy(),r.colorArray&&r.colorArray.destroy(),r.normalArray&&r.normalArray.destroy(),r.texcoordArray&&r.texcoordArray.destroy(),r.featureArray&&r.featureArray.destroy();if(l.children)for(const r of l.children)Qb(r)}function Z2(l){if(l.meshes)for(const s of l.meshes)s.vertexBuffer&&(s.vertexBuffer.destroy(),s.indexBuffer.destroy(),s.normalBuffer&&s.normalBuffer.destroy(),s.texcoordBuffer&&s.texcoordBuffer.destroy(),s.colorBuffer&&s.colorBuffer.destroy(),s.pbrBuffer&&s.pbrBuffer.destroy(),s.segments.destroy(),s.material&&((r=s.material).pbrMetallicRoughness.baseColorTexture&&r.pbrMetallicRoughness.baseColorTexture.gfxTexture&&r.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),r.pbrMetallicRoughness.metallicRoughnessTexture&&r.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&r.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),r.normalTexture&&r.normalTexture.gfxTexture&&r.normalTexture.gfxTexture.destroy(),r.emissionTexture&&r.emissionTexture.gfxTexture&&r.emissionTexture.gfxTexture.destroy(),r.occlusionTexture&&r.occlusionTexture.gfxTexture&&r.occlusionTexture.gfxTexture.destroy()));var r;if(l.children)for(const s of l.children)Z2(s)}class ly{constructor(r,s,u){this._demTile=r,this._dem=this._demTile.dem,this._scale=s,this._offset=u}static create(r,s,u){const g=u||r.findDEMTileFor(s);if(!g||!g.dem)return;const f=g.dem,x=g.tileID,C=1<<s.canonical.z-x.canonical.z;return new ly(g,f.dim/lr/C,[(s.canonical.x/C-x.canonical.x)*f.dim,(s.canonical.y/C-x.canonical.y)*f.dim])}tileCoordToPixel(r,s){const u=s*this._scale+this._offset[1],g=Math.floor(r*this._scale+this._offset[0]),f=Math.floor(u);return new dt(g,f)}getElevationAt(r,s,u,g){const f=r*this._scale+this._offset[0],x=s*this._scale+this._offset[1],C=Math.floor(f),M=Math.floor(x),$=this._dem;return g=!!g,u?Or(Or($.get(C,M,g),$.get(C,M+1,g),x-M),Or($.get(C+1,M,g),$.get(C+1,M+1,g),x-M),f-C):$.get(C,M,g)}getElevationAtPixel(r,s,u){return this._dem.get(r,s,!!u)}getMeterToDEM(r){return(1<<this._demTile.tileID.canonical.z)*Xi(1,r)*this._dem.stride}}const X2=new Float32Array(262144),Cg=new Uint8Array(262144);function ME(l){let r=0;if(l.meshes)for(const s of l.meshes)r=Math.max(r,s.aabb.max[2]);if(l.children)for(const s of l.children)r=Math.max(r,ME(s));return r}function AE(l,r,s){if(l.meshes)for(const u of l.meshes){if(u.aabb.min[0]===1/0)continue;const g=jr.applyTransform(u.aabb,l.matrix);s.insert(r,g.min[0],g.min[1],g.max[0],g.max[1])}if(l.children)for(const u of l.children)AE(u,r,s)}const kE=["","wall","door","roof","window","lamp","logo"];class RE{constructor(r){this.node=r,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:r.id,geometry:[],properties:{height:ME(r)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new jr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let r=0;const s=new jr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const u of this.node.meshes)this.node.lightMeshIndex!==r&&(u.transformedAabb=jr.applyTransformFast(u.aabb,this.node.matrix),s.encapsulate(u.transformedAabb)),r++;this.aabb=s}return this.aabb}}class e1{constructor(r,s,u,g,f,x,C){this.id=u,this.layers=r,this.layerIds=this.layers.map(M=>M.fqid),this.stateDependentLayerIds=this.layers.filter(M=>M.isStateDependent()).map(M=>M.id),this.modelTraits|=oy.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,g&&(this.modelTraits|=oy.HasMapboxMeshFeatures),f&&(this.modelTraits|=oy.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=x,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const M of s)this.nodesInfo.push(new RE(M)),AE(M,C.featureIndexArray.length,C.grid),C.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,C.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(r,s){for(const u of this.getNodesInfo()){const g=u.node;g.footprint&&s.push({footprint:g.footprint,id:r})}}update(r){const s=Object.keys(r).length!==0;if(s&&!this.stateDependentLayers.length)return;const u=s?this.stateDependentLayers:this.layers;if(!$t(r,this.states))for(const g of u)this.evaluate(g,r);this.states=structuredClone(r)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(r){if(!this.needsUpload)return;const s=this.getNodesInfo();for(const u of s){const g=u.node;this.uploaded?this.updatePbrBuffer(g):K2(g,r,!0)}for(const u of s)Qb(u.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(r){let s=!1;if(!r.meshes)return s;for(const u of r.meshes)u.pbrBuffer&&(u.pbrBuffer.updateData(u.featureArray),s=!0);return s}needsReEvaluation(r,s,u){const g=r.transform.projectionOptions,f=r.style.getBrightness(),x=this.brightness!==f;if(!this.uploaded||this.dirty||g.name!==this.projection.name||lv(u.paint.get("model-color").value,x)||lv(u.paint.get("model-color-mix-intensity").value,x)||lv(u.paint.get("model-roughness").value,x)||lv(u.paint.get("model-emissive-strength").value,x)||lv(u.paint.get("model-height-based-emissive-strength-multiplier").value,x)){this.projection=g,this.brightness=f;const C=this.getNodesInfo();for(const M of C)M.state=null;return!0}return!1}evaluateScale(r,s){if(r.transform.zoom===this.zoom)return;this.zoom=r.transform.zoom;const u=this.getNodesInfo(),g=this.id.canonical;for(const f of u){const x=f.feature;f.evaluatedScale=s.paint.get("model-scale").evaluate(x,{},g)}}evaluate(r,s){const u=this.getNodesInfo();for(const g of u){if(!g.node.meshes)continue;const f=g.feature,x=s&&s[f.id];if($t(x,g.state))continue;g.state=structuredClone(x);const C=g.node.meshes&&g.node.meshes[0].featureData,M=g.evaluatedColor[2],$=g.evaluatedRMEA[2],T=this.id.canonical;if(g.hasTranslucentParts=!1,C){for(let A=0;A<kE.length;A++){const I=kE[A];I.length&&(f.properties.part=I);const P=r.paint.get("model-color").evaluate(f,x,T).toRenderColor(null),R=r.paint.get("model-color-mix-intensity").evaluate(f,x,T);g.evaluatedColor[A]=[P.r,P.g,P.b,R],g.evaluatedRMEA[A][0]=r.paint.get("model-roughness").evaluate(f,x,T),g.evaluatedRMEA[A][2]=r.paint.get("model-emissive-strength").evaluate(f,x,T),g.evaluatedRMEA[A][3]=P.a,g.emissionHeightBasedParams[A]=r.paint.get("model-height-based-emissive-strength-multiplier").evaluate(f,x,T),!g.hasTranslucentParts&&P.a<1&&(g.hasTranslucentParts=!0)}delete f.properties.part,m9(g,M!==g.evaluatedColor[2]||$!==g.evaluatedRMEA[2],this.modelTraits)}else g.evaluatedRMEA[0][2]=r.paint.get("model-emissive-strength").evaluate(f,x,T);g.evaluatedScale=r.paint.get("model-scale").evaluate(f,x,T),this.updatePbrBuffer(g.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(r,s,u,g){const f=r.findDEMTileFor(u);if(f&&(f.tileID.canonical!==this.terrainTile||s!==this.terrainExaggeration)){if(f.dem&&f.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=f.tileID.overscaledZ;const x=ly.create(r,u,f);if(!x)return;this.modelTraits&oy.HasMapboxMeshFeatures&&this.updateDEM(r,x,u,g);for(const C of this.getNodesInfo()){const M=C.node;if(!M.footprint||!M.footprint.vertices||!M.footprint.vertices.length)continue;const $=M.footprint.vertices;let T=x.getElevationAt($[0].x,$[0].y,!0,!0);for(let A=1;A<$.length;A++)T=Math.min(T,x.getElevationAt($[A].x,$[A].y,!0,!0));M.elevation=T}}this.terrainTile=f.tileID.canonical,this.terrainExaggeration=s}}updateDEM(r,s,u,g){let f=s._dem._modifiedForSources[g];if(f===void 0&&(s._dem._modifiedForSources[g]=[],f=s._dem._modifiedForSources[g]),f.includes(u.canonical))return;const x=s._dem.dim;f.push(u.canonical);let C=!1;for(const M of this.getNodesInfo()){const $=M.node;if(!$.footprint||!$.footprint.grid)continue;const T=$.footprint.grid,A=s.tileCoordToPixel(T.min.x,T.min.y),I=s.tileCoordToPixel(T.max.x,T.max.y),P=Math.min(Math.min(x-I.y,A.x),Math.min(A.y,x-I.x));if(P<0)continue;const R=fr(P,2,5);let j=Math.max(0,A.x-R),W=Math.max(0,A.y-R),K=Math.min(I.x+R,x-1),ne=Math.min(I.y+R,x-1);for(let fe=W;fe<=ne;++fe)for(let ve=j;ve<=K;++ve)Cg[fe*x+ve]=255;let ie=0,J=0;for(let fe=0;fe<T.cellsY;++fe)for(let ve=0;ve<T.cellsX;++ve){if(!T.cells[fe*T.cellsX+ve])continue;const Ne=s.tileCoordToPixel(T.min.x+ve/T.xScale,T.min.y+fe/T.yScale),$e=s.tileCoordToPixel(T.min.x+(ve+1)/T.xScale,T.min.y+(fe+1)/T.yScale);for(let Ie=Ne.y;Ie<=Math.min($e.y+1,x-1);++Ie)for(let Je=Ne.x;Je<=Math.min($e.x+1,x-1);++Je)Cg[Ie*x+Je]===255&&(Cg[Ie*x+Je]=0,ie+=s.getElevationAtPixel(Je,Ie),J++)}const le=ie/J;j=Math.max(1,A.x-R),W=Math.max(1,A.y-R),K=Math.min(I.x+R,x-2),ne=Math.min(I.y+R,x-2),C=!0;for(let fe=W;fe<=ne;++fe)for(let ve=j;ve<=K;++ve)Cg[fe*x+ve]===0&&(X2[fe*x+ve]=s._dem.set(ve,fe,le));for(let fe=1;fe<R;++fe){j=Math.max(1,A.x-fe),W=Math.max(1,A.y-fe),K=Math.min(I.x+fe,x-2),ne=Math.min(I.y+fe,x-2);for(let ve=W;ve<=ne;++ve)for(let Ne=j;Ne<=K;++Ne){const $e=ve*x+Ne;if(Cg[$e]===255){let Ie=0,Je=0,Ve=-1,et=-1;for(let it=-1;it<=1;++it)for(let at=-1;at<=1;++at){const lt=(ve+it)*x+Ne+at;if(Cg[lt]>=fe)continue;const gt=X2[lt],vt=Math.abs(gt);vt>Je&&(Ie=gt,Je=vt,Ve=at,et=it)}if(Je>.1){const it=1-(fe+.5*Math.abs(Ve*et))/R;let at=s._dem.get(Ne,ve)+Ie*it;const lt=s._dem.get(Ne+Ve,ve+et),gt=s._dem.get(Ne-Ve,ve-et,!0);(at-lt)*(at-gt)>0&&(at=(lt+gt)/2),X2[$e]=s._dem.set(Ne,ve,at),Cg[$e]=fe}}}}}C&&(s._demTile.needsDEMTextureUpload=!0,s._dem._timestamp=Gt.now())}getNodesInfo(){return this.nodesInfo}destroy(){const r=this.getNodesInfo();for(const s of r)Qb(s.node),Z2(s.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(r,s){if(s.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=s.updateTime;const u=s.getReplacementRegionsForTile(r.toUnwrapped()),g=this.getNodesInfo();for(let f=0;f<this.nodesInfo.length;f++){const x=g[f].node;g[f].hiddenByReplacement=!!x.footprint&&!u.find(C=>C.footprint===x.footprint)}}getHeightAtTileCoord(r,s){const u=this.getNodesInfo(),g=[],f=[0,0,0],x=Se.mat4.identity([]);for(let C=0;C<this.nodesInfo.length;C++){const M=u[C],$=M.node.meshes[0],T=$.transformedAabb;if(r<T.min[0]||s<T.min[1]||r>T.max[0]||s>T.max[1])continue;if(M.node.hidden===!0)return{height:1/0,maxHeight:M.feature.properties.height,hidden:!1,verticalScale:M.evaluatedScale[2]};Se.mat4.invert(x,M.node.matrix),f[0]=r,f[1]=s,Se.vec3.transformMat4(f,f,x);const A=(f[0]-$.aabb.min[0])/($.aabb.max[0]-$.aabb.min[0])*Eg|0,I=Math.min(63,(f[1]-$.aabb.min[1])/($.aabb.max[1]-$.aabb.min[1])*Eg|0)*Eg+Math.min(63,A),P=$.heightmap[I];if(!(P<0&&M.node.footprint))return M.hiddenByReplacement?void 0:{height:P,maxHeight:M.feature.properties.height,hidden:!1,verticalScale:M.evaluatedScale[2]};if(M.node.footprint.grid.query(new dt(r,s),new dt(r,s),g),g.length>0)return{height:void 0,maxHeight:M.feature.properties.height,hidden:M.hiddenByReplacement,verticalScale:M.evaluatedScale[2]}}}}function lv(l,r){return!l.isLightConstant&&r}function p9(l,r,s,u,g,f,x,C){let M=(61440&r|(61440&r)>>4)>>8,$=(3840&r|(3840&r)>>4)>>4,T=240&r|(240&r)>>4;s[3]>0&&(M=Or(M,255*s[0],s[3]),$=Or($,255*s[1],s[3]),T=Or(T,255*s[2],s[3]));const A=M<<8|$,I=T<<8|Math.floor(255*u[3]),P=function(fe){const ve=fr(fe,0,2);return Math.min(Math.round(.5*ve*255),255)}(u[2])<<8|15*u[0]<<4|15*u[1],R=fr(g[0],0,1),j=fr(g[1],0,1),W=fr(g[2],0,1),K=fr(g[3],0,1);let ne,ie,J,le;if(R!==j&&x!==f&&j!==R){const fe=x-f;ie=1/(fe*(j-R)),J=-(f+fe*R)/(fe*(j-R));const ve=fr(g[4],-1,1);le=Math.pow(10,ve),ne=255*W<<8|255*K}else ne=65535,ie=0,J=1,le=1;if(l.emplaceBack(A,I,P,ne,ie,J,le),C){const fe=C.length;C.clear();for(let ve=0;ve<fe;ve++)C.emplaceBack(A,I,P,ne,ie,J,le)}}function m9(l,r,s){const u=l.node;let g=0;const f=s&oy.HasMeshoptCompression;for(const x of u.meshes){if(u.lights&&u.lightMeshIndex===g||!x.featureData)continue;x.featureArray=new Yd,x.featureArray.reserve(x.featureData.length);let C=r;for(const M of x.featureData){const $=f?65535&M:M>>16&65535,T=f?M>>16&65535:65535&M,A=(15&T)<8?15&T:0,I=l.evaluatedRMEA[A],P=l.evaluatedColor[A],R=l.emissionHeightBasedParams[A];let j;if(C&&A===2&&u.lights&&(j=new Yd,j.resize(10*u.lights.length)),p9(x.featureArray,$,P,I,R,x.aabb.min[2],x.aabb.max[2],j),j&&C){C=!1;const W=u.meshes[u.lightMeshIndex];W.featureArray=j,W.featureArray._trim()}}x.featureArray._trim(),g++}}function IE(l,r,s,u){const g=1<<l.z;r.lat=Li((u/lr+l.y)/g),r.lng=qs((s/lr+l.x)/g)}Tr(e1,"Tiled3dModelBucket",{omit:["layers"]}),Tr(RE,"Tiled3dModelFeature");const g9={circle:class extends is{constructor(l,r,s,u){super(l,{layout:xt||(xt=new Mn({"circle-sort-key":new vr(Tt.layout_circle["circle-sort-key"]),visibility:new tr(Tt.layout_circle.visibility)})),paint:Ft||(Ft=new Mn({"circle-radius":new vr(Tt.paint_circle["circle-radius"]),"circle-color":new vr(Tt.paint_circle["circle-color"]),"circle-blur":new vr(Tt.paint_circle["circle-blur"]),"circle-opacity":new vr(Tt.paint_circle["circle-opacity"]),"circle-translate":new tr(Tt.paint_circle["circle-translate"]),"circle-translate-anchor":new tr(Tt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new tr(Tt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new tr(Tt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vr(Tt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vr(Tt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vr(Tt.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new tr(Tt.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u)}createBucket(l){return new he(l)}queryRadius(l){const r=l;return mt("circle-radius",this,r)+mt("circle-stroke-width",this,r)+Bt(this.paint.get("circle-translate"))}queryIntersectsFeature(l,r,s,u,g,f,x,C){const M=Kt(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),f.angle,l.pixelToTileUnitsFactor),$=this.paint.get("circle-radius").evaluate(r,s)+this.paint.get("circle-stroke-width").evaluate(r,s);return _c(l,u,f,x,C,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",M,$)}getProgramIds(){return["circle"]}getDefaultProgramParams(l,r,s){const u=vc(this);return{config:new eu(this,{zoom:r,lut:s}),defines:u,overrideFog:!1}}},heatmap:class extends is{createBucket(l){return new L0(l)}constructor(l,r,s,u){super(l,{layout:Bo||(Bo=new Mn({visibility:new tr(Tt.layout_heatmap.visibility)})),paint:Tx||(Tx=new Mn({"heatmap-radius":new vr(Tt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vr(Tt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new tr(Tt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new lc(Tt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new tr(Tt.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Bp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(l){return mt("heatmap-radius",this,l)}queryIntersectsFeature(l,r,s,u,g,f,x,C){const M=this.paint.get("heatmap-radius").evaluate(r,s);return _c(l,u,f,x,C,!0,!0,new dt(0,0),M)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(l,r,s){return l==="heatmap"?{config:new eu(this,{zoom:r,lut:s}),overrideFog:!1}:{}}},hillshade:class extends is{constructor(l,r,s,u){super(l,{layout:jo||(jo=new Mn({visibility:new tr(Tt.layout_hillshade.visibility)})),paint:Ex||(Ex=new Mn({"hillshade-illumination-direction":new tr(Tt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new tr(Tt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new tr(Tt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new tr(Tt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new tr(Tt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new tr(Tt.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new tr(Tt.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(l,r,s){return{overrideFog:!1}}},fill:class extends is{constructor(l,r,s,u){super(l,{layout:wc||(wc=new Mn({"fill-sort-key":new vr(Tt.layout_fill["fill-sort-key"]),visibility:new tr(Tt.layout_fill.visibility),"fill-elevation-reference":new tr(Tt.layout_fill["fill-elevation-reference"])})),paint:Up||(Up=new Mn({"fill-antialias":new tr(Tt.paint_fill["fill-antialias"]),"fill-opacity":new vr(Tt.paint_fill["fill-opacity"]),"fill-color":new vr(Tt.paint_fill["fill-color"]),"fill-outline-color":new vr(Tt.paint_fill["fill-outline-color"]),"fill-translate":new tr(Tt.paint_fill["fill-translate"]),"fill-translate-anchor":new tr(Tt.paint_fill["fill-translate-anchor"]),"fill-pattern":new vr(Tt.paint_fill["fill-pattern"]),"fill-emissive-strength":new tr(Tt.paint_fill["fill-emissive-strength"]),"fill-z-offset":new vr(Tt.paint_fill["fill-z-offset"]),"fill-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u)}getProgramIds(){const l=this.paint.get("fill-pattern"),r=l&&l.constantOr(1),s=[r?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&s.push(r&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),s}getDefaultProgramParams(l,r,s){return{config:new eu(this,{zoom:r,lut:s}),overrideFog:!1}}recalculate(l,r){super.recalculate(l,r);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new ld(l)}queryRadius(){return Bt(this.paint.get("fill-translate"))}queryIntersectsFeature(l,r,s,u,g,f){return!l.queryGeometry.isAboveHorizon&&Me(qt(l.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),f.angle,l.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}is3D(){return this.paint.get("fill-z-offset").constantOr(1)!==0}},"fill-extrusion":class extends is{constructor(l,r,s,u){super(l,{layout:yb||(yb=new Mn({visibility:new tr(Tt["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new tr(Tt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:xb||(xb=new Mn({"fill-extrusion-opacity":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(l){return new po(l)}queryRadius(){return Bt(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(l,r,s,u,g,f,x,C,M){const $=Kt(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),f.angle,l.pixelToTileUnitsFactor),T=this.paint.get("fill-extrusion-height").evaluate(r,s),A=this.paint.get("fill-extrusion-base").evaluate(r,s),I=[0,0],P=C&&f.elevation,R=f.elevation?f.elevation.exaggeration():1,j=l.tile.getBucket(this);if(P&&j instanceof po){const J=j.centroidVertexArray,le=M+1;le<J.length&&(I[0]=J.geta_centroid_pos0(le),I[1]=J.geta_centroid_pos1(le))}if(I[0]===0&&I[1]===1)return!1;f.projection.name==="globe"&&(u=gb([u],[new dt(0,0),new dt(lr,lr)],l.tileID.canonical).map(J=>J.polygon).flat());const W=P?C:null,[K,ne]=function(J,le,fe,ve,Ne,$e,Ie,Je,Ve,et,it){return J.projection.name==="globe"?function(at,lt,gt,vt,ht,Rt,Yt,Lt,nr,ar,gr){const jt=[],Mr=[],sr=at.projection.upVectorScale(gr,at.center.lat,at.worldSize).metersToTile,Cr=[0,0,0,1],Vr=[0,0,0,1],sa=(ba,fa,Da,_n)=>{ba[0]=fa,ba[1]=Da,ba[2]=_n,ba[3]=1},ha=mb();gt>0&&(gt+=ha),vt+=ha;for(const ba of lt){const fa=[],Da=[];for(const _n of ba){const cn=_n.x+ht.x,ta=_n.y+ht.y,un=at.projection.projectTilePoint(cn,ta,gr),sn=at.projection.upVector(gr,_n.x,_n.y);let bn=gt,wi=vt;if(Yt){const Si=Hx(cn,ta,gt,vt,Yt,Lt,nr,ar);bn+=Si.base,wi+=Si.top}gt!==0?sa(Cr,un.x+sn[0]*sr*bn,un.y+sn[1]*sr*bn,un.z+sn[2]*sr*bn):sa(Cr,un.x,un.y,un.z),sa(Vr,un.x+sn[0]*sr*wi,un.y+sn[1]*sr*wi,un.z+sn[2]*sr*wi),Se.vec3.transformMat4(Cr,Cr,Rt),Se.vec3.transformMat4(Vr,Vr,Rt),fa.push(new su(Cr[0],Cr[1],Cr[2])),Da.push(new su(Vr[0],Vr[1],Vr[2]))}jt.push(fa),Mr.push(Da)}return[jt,Mr]}(J,le,fe,ve,Ne,$e,Ie,Je,Ve,et,it):Ie?function(at,lt,gt,vt,ht,Rt,Yt,Lt,nr){const ar=[],gr=[],jt=[0,0,0,1];for(const Mr of at){const sr=[],Cr=[];for(const Vr of Mr){const sa=Vr.x+vt.x,ha=Vr.y+vt.y,ba=Hx(sa,ha,lt,gt,Rt,Yt,Lt,nr);jt[0]=sa,jt[1]=ha,jt[2]=ba.base,jt[3]=1,Se.vec4.transformMat4(jt,jt,ht),jt[3]=Math.max(jt[3],1e-5);const fa=new su(jt[0]/jt[3],jt[1]/jt[3],jt[2]/jt[3]);jt[0]=sa,jt[1]=ha,jt[2]=ba.top,jt[3]=1,Se.vec4.transformMat4(jt,jt,ht),jt[3]=Math.max(jt[3],1e-5);const Da=new su(jt[0]/jt[3],jt[1]/jt[3],jt[2]/jt[3]);sr.push(fa),Cr.push(Da)}ar.push(sr),gr.push(Cr)}return[ar,gr]}(le,fe,ve,Ne,$e,Ie,Je,Ve,et):function(at,lt,gt,vt,ht){const Rt=[],Yt=[],Lt=ht[8]*lt,nr=ht[9]*lt,ar=ht[10]*lt,gr=ht[11]*lt,jt=ht[8]*gt,Mr=ht[9]*gt,sr=ht[10]*gt,Cr=ht[11]*gt;for(const Vr of at){const sa=[],ha=[];for(const ba of Vr){const fa=ba.x+vt.x,Da=ba.y+vt.y,_n=ht[0]*fa+ht[4]*Da+ht[12],cn=ht[1]*fa+ht[5]*Da+ht[13],ta=ht[2]*fa+ht[6]*Da+ht[14],un=ht[3]*fa+ht[7]*Da+ht[15],sn=_n+Lt,bn=cn+nr,wi=ta+ar,Si=Math.max(un+gr,1e-5),ci=_n+jt,Fo=cn+Mr,Rn=ta+sr,$n=Math.max(un+Cr,1e-5);sa.push(new su(sn/Si,bn/Si,wi/Si)),ha.push(new su(ci/$n,Fo/$n,Rn/$n))}Rt.push(sa),Yt.push(ha)}return[Rt,Yt]}(le,fe,ve,Ne,$e)}(f,u,A,T,$,x,W,I,R,f.center.lat,l.tileID.canonical),ie=l.queryGeometry;return function(J,le,fe){let ve=1/0;Me(fe,le)&&(ve=vb(fe,le[0]));for(let Ne=0;Ne<le.length;Ne++){const $e=le[Ne],Ie=J[Ne];for(let Je=0;Je<$e.length-1;Je++){const Ve=$e[Je],et=[Ve,$e[Je+1],Ie[Je+1],Ie[Je],Ve];xe(fe,et)&&(ve=Math.min(ve,vb(fe,et)))}}return ve!==1/0&&ve}(K,ne,ie.isPointQuery()?ie.screenBounds:ie.screenGeometry)}},line:class extends is{constructor(l,r,s,u){const g=Cb();super(l,g,r,s,u),g.layout&&(this.layout=new Wn(g.layout)),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const r=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=r._styleExpression&&r._styleExpression.expression instanceof _a,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(l,r){super.recalculate(l,r),this.paint._values["line-floorwidth"]=(()=>{if(vg)return vg;const s=Cb();return vg=new xg(s.paint.properties["line-width"].specification),vg.useIntegerZoom=!0,vg})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new J0(l)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(l,r,s){const u=mg(this);return{config:new eu(this,{zoom:r,lut:s}),defines:u,overrideFog:!1}}queryRadius(l){const r=l,s=Zx(mt("line-width",this,r),mt("line-gap-width",this,r)),u=mt("line-offset",this,r);return s/2+Math.abs(u)+Bt(this.paint.get("line-translate"))}queryIntersectsFeature(l,r,s,u,g,f){if(l.queryGeometry.isAboveHorizon)return!1;const x=qt(l.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),f.angle,l.pixelToTileUnitsFactor),C=l.pixelToTileUnitsFactor/2*Zx(this.paint.get("line-width").evaluate(r,s),this.paint.get("line-gap-width").evaluate(r,s)),M=this.paint.get("line-offset").evaluate(r,s);return M&&(u=function($,T){const A=[],I=new dt(0,0);for(let P=0;P<$.length;P++){const R=$[P],j=[];for(let W=0;W<R.length;W++){const K=R[W],ne=R[W+1],ie=W===0?I:K.sub(R[W-1])._unit()._perp(),J=W===R.length-1?I:ne.sub(K)._unit()._perp(),le=ie._add(J)._unit();le._mult(1/(le.x*J.x+le.y*J.y)),j.push(le._mult(T)._add(K))}A.push(j)}return A}(u,M*l.pixelToTileUnitsFactor)),function($,T,A){for(let I=0;I<T.length;I++){const P=T[I];if($.length>=3){for(let R=0;R<P.length;R++)if(tt($,P[R]))return!0}if(Be($,P,A))return!0}return!1}(x,u,C)}isTileClipped(){return!0}isDraped(l){const r=this.layout.get("line-z-offset"),s=r.isConstant()&&!r.constantOr(0),u=this.layout.get("line-elevation-reference");return!(u==="sea"||u==="ground")&&(s||u!=="none")}},symbol:qb,background:class extends is{constructor(l,r,s,u){super(l,{layout:nE||(nE=new Mn({visibility:new tr(Tt.layout_background.visibility)})),paint:iE||(iE=new Mn({"background-pitch-alignment":new tr(Tt.paint_background["background-pitch-alignment"]),"background-color":new tr(Tt.paint_background["background-color"]),"background-pattern":new tr(Tt.paint_background["background-pattern"]),"background-opacity":new tr(Tt.paint_background["background-opacity"]),"background-emissive-strength":new tr(Tt.paint_background["background-emissive-strength"]),"background-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(l,r,s){return{overrideFog:!1}}is3D(){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:uE,"raster-particle":gE,sky:class extends is{constructor(l,r,s,u){super(l,{layout:fE||(fE=new Mn({visibility:new tr(Tt.layout_sky.visibility)})),paint:pE||(pE=new Mn({"sky-type":new tr(Tt.paint_sky["sky-type"]),"sky-atmosphere-sun":new tr(Tt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new tr(Tt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new tr(Tt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new tr(Tt.paint_sky["sky-gradient-radius"]),"sky-gradient":new lc(Tt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new tr(Tt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new tr(Tt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new tr(Tt.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="sky-gradient"?this._updateColorRamp():l!=="sky-atmosphere-sun"&&l!=="sky-atmosphere-halo-color"&&l!=="sky-atmosphere-color"&&l!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Bp({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(l){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const r=l.style.light.properties.get("position");return this._lightPosition.azimuthal!==r.azimuthal||this._lightPosition.polar!==r.polar}return!1}getCenter(l,r){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),g=!u,f=l.style.light,x=f.properties.get("position");return g&&f.properties.get("anchor")==="viewport"&&Wr("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?G2(x.azimuthal,90-x.polar,r):G2(u[0],90-u[1],r)}const s=this.paint.get("sky-gradient-center");return G2(s[0],90-s[1],r)}isSky(){return!0}markSkyboxValid(l){this._skyboxInvalidated=!1,this._lightPosition=l.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const l=this.paint.get("sky-type");return l==="atmosphere"?["skyboxCapture","skybox"]:l==="gradient"?["skyboxGradient"]:null}},slot:class extends is{constructor(l,r,s,u){super(l,{paint:mE||(mE=new Mn({}))},r,null)}},model:class extends is{constructor(l,r,s,u){super(l,{layout:CE||(CE=new Mn({visibility:new tr(Tt.layout_model.visibility),"model-id":new vr(Tt.layout_model["model-id"])})),paint:DE||(DE=new Mn({"model-opacity":new vr(Tt.paint_model["model-opacity"]),"model-rotation":new vr(Tt.paint_model["model-rotation"]),"model-scale":new vr(Tt.paint_model["model-scale"]),"model-translation":new vr(Tt.paint_model["model-translation"]),"model-color":new vr(Tt.paint_model["model-color"]),"model-color-mix-intensity":new vr(Tt.paint_model["model-color-mix-intensity"]),"model-type":new tr(Tt.paint_model["model-type"]),"model-cast-shadows":new tr(Tt.paint_model["model-cast-shadows"]),"model-receive-shadows":new tr(Tt.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new tr(Tt.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new vr(Tt.paint_model["model-emissive-strength"]),"model-roughness":new vr(Tt.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new vr(Tt.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new tr(Tt.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new tr(Tt.paint_model["model-front-cutoff"]),"model-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(l){return new W2(l)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(l){return l instanceof e1?lr-1:0}queryIntersectsFeature(l,r,s,u,g,f){if(!this.modelManager)return!1;const x=this.modelManager,C=l.tile.getBucket(this);if(!(C&&C instanceof W2))return!1;for(const M in C.instancesPerModel){const $=C.instancesPerModel[M],T=r.id!==void 0?r.id:r.properties&&r.properties.hasOwnProperty("id")?r.properties.id:void 0;if($.idToFeaturesIndex.hasOwnProperty(T)){const A=$.features[$.idToFeaturesIndex[T]],I=x.getModel(M,this.scope);if(!I)return!1;let P=Se.mat4.create();const R=new La(0,0),j=C.canonical;let W=Number.MAX_VALUE;for(let K=0;K<A.instancedDataCount;++K){const ne=16*(A.instancedDataOffset+K),ie=$.instancedDataArray.float32,J=[ie[ne+4],ie[ne+5],ie[ne+6]];IE(j,R,ie[ne],0|ie[ne+1]),PE(P,I,f,R,A.rotation,A.scale,J,!1,!1,!1),f.projection.name==="globe"&&(P=q2(P,f));const le=Se.mat4.multiply([],f.projMatrix,P),fe=l.queryGeometry,ve=bE(fe.isPointQuery()?fe.screenBounds:fe.screenGeometry,f,le,I.aabb);ve!=null&&(W=Math.min(ve,W))}return W!==Number.MAX_VALUE&&W}}return!1}_handleOverridablePaintPropertyUpdate(l,r,s){return!(!this.layout||r.isDataDriven()||s.isDataDriven()||l!=="model-color"&&l!=="model-color-mix-intensity"&&l!=="model-rotation"&&l!=="model-scale"&&l!=="model-translation"&&l!=="model-emissive-strength")}_isPropertyZoomDependent(l){const r=this._transitionablePaint._values[l];return r!=null&&r.value!=null&&r.value.expression!=null&&r.value.expression instanceof Wu}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends is{constructor(l,r,s,u){super(l,{layout:eb||(eb=new Mn({"clip-layer-types":new tr(Tt.layout_clip["clip-layer-types"]),"clip-layer-scope":new tr(Tt.layout_clip["clip-layer-scope"])})),paint:Ax||(Ax=new Mn({}))},r,s,u)}recalculate(l,r){super.recalculate(l,r)}createBucket(l){return new kx(l)}isTileClipped(){return!0}is3D(){return!0}}};class y9{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class x9{constructor(){this.tasks={},this.taskQueue=[],on(["process"],this),this.invoker=new y9(this.process),this.nextId=0}add(r,s){const u=this.nextId++,g=function({type:f,isSymbolTile:x,zoom:C}){return C=C||0,f==="message"?0:f!=="maybePrepare"||x?f!=="parseTile"||x?f==="parseTile"&&x?300-C:f==="maybePrepare"&&x?400-C:500:200-C:100-C}(s);if(g===0){try{r()}finally{}return null}return this.tasks[u]={fn:r,metadata:s,priority:g,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const r=this.pick();if(r===null)return;const s=this.tasks[r];if(delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),!s)return;s.fn()}finally{}}pick(){let r=null,s=1/0;for(let g=0;g<this.taskQueue.length;g++){const f=this.tasks[this.taskQueue[g]];f.priority<s&&(s=f.priority,r=g)}if(r===null)return null;const u=this.taskQueue[r];return this.taskQueue.splice(r,1),u}remove(){this.invoker.remove()}}class zE{constructor(r,s,u){this.target=r,this.parent=s,this.mapId=u,this.callbacks={},this.cancelCallbacks={},on(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new x9}send(r,s,u,g,f=!1,x){const C=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(u.metadata=x,this.callbacks[C]=u);const M=new Set;return this.target.postMessage({id:C,type:r,hasCallback:!!u,targetMapId:g,mustQueue:f,sourceMapId:this.mapId,data:Ss(s,M)},M),{cancel:()=>{u&&delete this.callbacks[C],this.target.postMessage({id:C,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}receive(r){const s=r.data,u=s.id;if(u&&(!s.targetMapId||this.mapId===s.targetMapId))if(s.type==="<cancel>"){const g=this.cancelCallbacks[u];delete this.cancelCallbacks[u],g&&g.cancel()}else if(s.mustQueue||yn()){const g=this.callbacks[u],f=this.scheduler.add(()=>this.processTask(u,s),g&&g.metadata||{type:"message"});f&&(this.cancelCallbacks[u]=f)}else this.processTask(u,s)}processTask(r,s){if(delete this.cancelCallbacks[r],s.type==="<response>"){const u=this.callbacks[r];delete this.callbacks[r],u&&(s.error?u(Wc(s.error)):u(null,Wc(s.data)))}else{const u=new Set,g=s.hasCallback?(x,C)=>{this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:x?Ss(x):null,data:Ss(C,u)},u)}:()=>{},f=Wc(s.data);if(this.parent[s.type])this.parent[s.type](s.sourceMapId,f,g);else if(this.parent.getWorkerSource){const x=s.type.split(".");this.parent.getWorkerSource(s.sourceMapId,x[0],f.source,f.scope)[x[1]](f,g)}else g(new Error(`Could not find function ${s.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var cv={workerUrl:"",workerClass:null,workerParams:void 0};const Y2="mapboxgl_preloaded_worker_pool";class Dg{constructor(){this.active={}}acquire(r,s=Dg.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<s;)this.workers.push(cv.workerClass!=null?new cv.workerClass:new self.Worker(cv.workerUrl,cv.workerParams));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.workers&&this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Y2]}numActive(){return Object.keys(this.active).length}}Dg.workerCount=2;class cy{constructor(r,s,u="Worker",g=Dg.workerCount){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=Sn();const f=this.workerPool.acquire(this.id,g);for(let x=0;x<f.length;x++){const C=new cy.Actor(f[x],s,this.id);C.name=`${u} ${x}`,this.actors.push(C)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(r,s,u){Dr(this.actors,(g,f)=>{g.send(r,s,f)},u=u||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(r=>{r.remove()}),this.actors=[],this.workerPool.release(this.id)}}let uv,J2;function t1(){return uv||(uv=new Dg),uv}cy.Actor=zE;const Q2=new Ra(0,0,0);var r1=(l=>(l[l.PATH_RULE_UNSPECIFIED=0]="PATH_RULE_UNSPECIFIED",l[l.PATH_RULE_NON_ZERO=1]="PATH_RULE_NON_ZERO",l[l.PATH_RULE_EVEN_ODD=2]="PATH_RULE_EVEN_ODD",l))(r1||{}),a1=(l=>(l[l.LINE_CAP_UNSPECIFIED=0]="LINE_CAP_UNSPECIFIED",l[l.LINE_CAP_BUTT=1]="LINE_CAP_BUTT",l[l.LINE_CAP_ROUND=2]="LINE_CAP_ROUND",l[l.LINE_CAP_SQUARE=3]="LINE_CAP_SQUARE",l))(a1||{}),dv=(l=>(l[l.LINE_JOIN_UNSPECIFIED=0]="LINE_JOIN_UNSPECIFIED",l[l.LINE_JOIN_MITER=1]="LINE_JOIN_MITER",l[l.LINE_JOIN_MITER_CLIP=2]="LINE_JOIN_MITER_CLIP",l[l.LINE_JOIN_ROUND=3]="LINE_JOIN_ROUND",l[l.LINE_JOIN_BEVEL=4]="LINE_JOIN_BEVEL",l))(dv||{}),LE=(l=>(l[l.PAINT_ORDER_UNSPECIFIED=0]="PAINT_ORDER_UNSPECIFIED",l[l.PAINT_ORDER_FILL_AND_STROKE=1]="PAINT_ORDER_FILL_AND_STROKE",l[l.PAINT_ORDER_STROKE_AND_FILL=2]="PAINT_ORDER_STROKE_AND_FILL",l))(LE||{}),uy=(l=>(l[l.PATH_COMMAND_UNSPECIFIED=0]="PATH_COMMAND_UNSPECIFIED",l[l.PATH_COMMAND_MOVE=1]="PATH_COMMAND_MOVE",l[l.PATH_COMMAND_LINE=2]="PATH_COMMAND_LINE",l[l.PATH_COMMAND_QUAD=3]="PATH_COMMAND_QUAD",l[l.PATH_COMMAND_CUBIC=4]="PATH_COMMAND_CUBIC",l[l.PATH_COMMAND_CLOSE=5]="PATH_COMMAND_CLOSE",l))(uy||{}),$E=(l=>(l[l.MASK_TYPE_UNSPECIFIED=0]="MASK_TYPE_UNSPECIFIED",l[l.MASK_TYPE_LUMINANCE=1]="MASK_TYPE_LUMINANCE",l[l.MASK_TYPE_ALPHA=2]="MASK_TYPE_ALPHA",l))($E||{});function v9(l,r,s){l===1&&r.icons.push(function(u,g){return function(f){if(f.usvg_tree.height||(f.usvg_tree.height=f.usvg_tree.width),!f.metadata)return f;const{metadata:x}=f;if(x.content_area){const{content_area:C}=x;C.top==null&&(C.top=C.left),C.width==null&&(C.width=f.usvg_tree.width),C.height==null&&(C.height=C.width)}return x.stretch_x&&x.stretch_x.length&&NE(x,"x"),x.stretch_y&&x.stretch_y.length&&NE(x,"y"),f}(u.readFields(_9,{name:void 0},g))}(s,s.readVarint()+s.pos))}function NE(l,r){const s=[],u=l[`stretch_${r}`];let g=null;for(let f=0;f<u.length;f++)g===null?g=s.length===0?u[0]:s[s.length-1][1]+u[f]:(s.push([g,g+u[f]]),g=null);l[`stretch_${r}_areas`]=s}function _9(l,r,s){l===1?r.name=s.readString():l===2?r.metadata=function(u,g){return u.readFields(b9,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},g)}(s,s.readVarint()+s.pos):l===3&&(r.usvg_tree=function(u,g){return u.readFields(T9,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},g)}(s,s.readVarint()+s.pos),r.data="usvg_tree")}function b9(l,r,s){l===1?r.stretch_x=s.readPackedVarint():l===2?r.stretch_y=s.readPackedVarint():l===3?r.content_area=function(u,g){return u.readFields(w9,{left:0},g)}(s,s.readVarint()+s.pos):l===4&&r.variables.push(function(u,g){return u.readFields(S9,{name:void 0},g)}(s,s.readVarint()+s.pos))}function w9(l,r,s){l===1?r.left=s.readVarint():l===2?r.width=s.readVarint():l===3?r.top=s.readVarint():l===4&&(r.height=s.readVarint())}function S9(l,r,s){l===1?r.name=s.readString():l===2&&(r.rgb_color=s1(s.readVarint()),r.value="rgb_color")}function T9(l,r,s){l===1?r.width=r.height=s.readVarint():l===2?r.height=s.readVarint():l===3?r.children.push(n1(s,s.readVarint()+s.pos)):l===4?r.linear_gradients.push(function(u,g){return u.readFields(k9,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},g)}(s,s.readVarint()+s.pos)):l===5?r.radial_gradients.push(function(u,g){return u.readFields(I9,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},g)}(s,s.readVarint()+s.pos)):l===7?r.clip_paths.push(function(u,g){return u.readFields(z9,{children:[]},g)}(s,s.readVarint()+s.pos)):l===8&&r.masks.push(function(u,g){const f=u.readFields(L9,{left:0,width:20,mask_type:1,children:[]},g);return f.height==null&&(f.height=f.width),f.top==null&&(f.top=f.left),f}(s,s.readVarint()+s.pos))}function n1(l,r){return l.readFields(E9,{},r)}function E9(l,r,s){l===1?(r.group=function(u,g){return u.readFields(C9,{opacity:255,children:[]},g)}(s,s.readVarint()+s.pos),r.node="group"):l===2&&(r.path=function(u,g){return u.readFields(P9,{paint_order:1,commands:[],step:1,diffs:[],rule:1},g)}(s,s.readVarint()+s.pos),r.node="path")}function C9(l,r,s){l===1?r.transform=i1(s,s.readVarint()+s.pos):l===2?r.opacity=s.readVarint():l===5?r.clip_path_idx=s.readVarint():l===6?r.mask_idx=s.readVarint():l===7&&r.children.push(n1(s,s.readVarint()+s.pos))}function i1(l,r){return l.readFields(D9,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},r)}function D9(l,r,s){l===1?r.sx=s.readFloat():l===2?r.ky=s.readFloat():l===3?r.kx=s.readFloat():l===4?r.sy=s.readFloat():l===5?r.tx=s.readFloat():l===6&&(r.ty=s.readFloat())}function P9(l,r,s){l===1?r.fill=function(u,g){return u.readFields(M9,{rgb_color:Q2,paint:"rgb_color",opacity:255},g)}(s,s.readVarint()+s.pos):l===2?r.stroke=function(u,g){return u.readFields(A9,{rgb_color:Q2,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},g)}(s,s.readVarint()+s.pos):l===3?r.paint_order=s.readVarint():l===5?s.readPackedVarint(r.commands):l===6?r.step=s.readFloat():l===7?s.readPackedSVarint(r.diffs):l===8&&(r.rule=s.readVarint())}function M9(l,r,s){l===1?(r.rgb_color=s1(s.readVarint()),r.paint="rgb_color"):l===2?(r.linear_gradient_idx=s.readVarint(),r.paint="linear_gradient_idx"):l===3?(r.radial_gradient_idx=s.readVarint(),r.paint="radial_gradient_idx"):l===5&&(r.opacity=s.readVarint())}function s1(l){return new Ra((l>>16&255)/255,(l>>8&255)/255,(255&l)/255,1)}function A9(l,r,s){l===1?(r.rgb_color=s1(s.readVarint()),r.paint="rgb_color"):l===2?(r.linear_gradient_idx=s.readVarint(),r.paint="linear_gradient_idx"):l===3?(r.radial_gradient_idx=s.readVarint(),r.paint="radial_gradient_idx"):l===5?s.readPackedFloat(r.dasharray):l===6?r.dashoffset=s.readFloat():l===7?r.miterlimit=s.readFloat():l===8?r.opacity=s.readVarint():l===9?r.width=s.readFloat():l===10?r.linecap=s.readVarint():l===11&&(r.linejoin=s.readVarint())}function k9(l,r,s){l===1?r.transform=i1(s,s.readVarint()+s.pos):l===2?r.spread_method=s.readVarint():l===3?r.stops.push(BE(s,s.readVarint()+s.pos)):l===4?r.x1=s.readFloat():l===5?r.y1=s.readFloat():l===6?r.x2=s.readFloat():l===7&&(r.y2=s.readFloat())}function BE(l,r){return l.readFields(R9,{offset:0,opacity:255,rgb_color:Q2},r)}function R9(l,r,s){l===1?r.offset=s.readFloat():l===2?r.opacity=s.readVarint():l===3&&(r.rgb_color=s1(s.readVarint()))}function I9(l,r,s){l===1?r.transform=i1(s,s.readVarint()+s.pos):l===2?r.spread_method=s.readVarint():l===3?r.stops.push(BE(s,s.readVarint()+s.pos)):l===4?r.cx=s.readFloat():l===5?r.cy=s.readFloat():l===6?r.r=s.readFloat():l===7?r.fx=s.readFloat():l===8?r.fy=s.readFloat():l===9&&(r.fr=s.readFloat())}function z9(l,r,s){l===1?r.transform=i1(s,s.readVarint()+s.pos):l===2?r.clip_path_idx=s.readVarint():l===3&&r.children.push(n1(s,s.readVarint()+s.pos))}function L9(l,r,s){l===1?r.left=r.top=s.readFloat():l===2?r.width=r.height=s.readFloat():l===3?r.top=s.readFloat():l===4?r.height=s.readFloat():l===5?r.mask_type=s.readVarint():l===6?r.mask_idx=s.readVarint():l===7&&r.children.push(n1(s,s.readVarint()+s.pos))}class $9{static calculate(r,s){const u=new Map,g=new Map;if(Object.keys(r).length===0)return u;s.forEach(f=>{g.set(f.name,f.rgb_color||new Ra(0,0,0))});for(const[f,x]of Object.entries(r))g.has(f)?u.set(g.get(f).toStringPremultipliedAlpha(),x):console.warn(`Ignoring unknown image variable "${f}"`);return u}}function dy(l,r=255,s){const u=r/255,g=l.toStringPremultipliedAlpha(),f=s.has(g)?s.get(g).clone():l.clone();return f.a=u,f.toString()}function e3(l,r){if(!Jt()){const s=document.createElement("canvas");return s.width=l,s.height=r,s}return new OffscreenCanvas(l,r)}function N9(l,r){const s=$9.calculate(r.params,l.metadata?l.metadata.variables:[]),u=l.usvg_tree,g=u.width,f=u.height,x=r.transform?r.transform:new DOMMatrix,C=Math.max(1,Math.round(g*x.a)),M=Math.max(1,Math.round(f*x.d)),$=new DOMMatrix([C/g,0,0,M/f,0,0]),T=e3(C,M).getContext("2d");return t3(T,$,u,u,s),T.getImageData(0,0,C,M)}function t3(l,r,s,u,g){for(const f of u.children)jE(l,r,s,f,g)}function jE(l,r,s,u,g){u.group?(l.save(),function(f,x,C,M,$){const T=M.mask_idx!=null?C.masks[M.mask_idx]:null,A=M.clip_path_idx!=null?C.clip_paths[M.clip_path_idx]:null;if(M.transform&&(x=hv(M.transform).preMultiplySelf(x)),!function(R,j,W){return R.opacity!==255||j||W}(M,A!=null,T!=null))return void t3(f,x,C,M,$);const I=e3(f.canvas.width,f.canvas.height),P=I.getContext("2d");A&&GE(P,x,C,A),t3(P,x,C,M,$),T&&HE(P,x,C,T,$),f.globalAlpha=M.opacity/255,f.drawImage(I,0,0)}(l,r,s,u.group,g),l.restore()):u.path&&(l.save(),function(f,x,C,M,$){const T=qE(M);f.setTransform(x),M.paint_order===LE.PAINT_ORDER_FILL_AND_STROKE?(OE(f,C,M,T,$),FE(f,C,M,T,$)):(FE(f,C,M,T,$),OE(f,C,M,T,$))}(l,r,s,u.path,g),l.restore())}function OE(l,r,s,u,g){const f=s.fill;if(!f)return;const x=f.opacity/255;switch(f.paint){case"rgb_color":l.fillStyle=dy(f.rgb_color,f.opacity,g);break;case"linear_gradient_idx":l.fillStyle=VE(l,r.linear_gradients[f.linear_gradient_idx],x,g);break;case"radial_gradient_idx":l.fillStyle=UE(l,r.radial_gradients[f.radial_gradient_idx],x,g)}let C;switch(s.rule){case r1.PATH_RULE_NON_ZERO:C="nonzero";break;case r1.PATH_RULE_EVEN_ODD:C="evenodd"}l.fill(u,C)}function FE(l,r,s,u,g){const f=s.stroke;if(!f)return;l.lineWidth=f.width,l.miterLimit=f.miterlimit,l.setLineDash(f.dasharray),l.lineDashOffset=f.dashoffset;const x=f.opacity/255;switch(f.paint){case"rgb_color":l.strokeStyle=dy(f.rgb_color,f.opacity,g);break;case"linear_gradient_idx":l.strokeStyle=VE(l,r.linear_gradients[f.linear_gradient_idx],x,g);break;case"radial_gradient_idx":l.strokeStyle=UE(l,r.radial_gradients[f.radial_gradient_idx],x,g)}switch(f.linejoin){case dv.LINE_JOIN_MITER_CLIP:case dv.LINE_JOIN_MITER:l.lineJoin="miter";break;case dv.LINE_JOIN_ROUND:l.lineJoin="round";break;case dv.LINE_JOIN_BEVEL:l.lineJoin="bevel"}switch(f.linecap){case a1.LINE_CAP_BUTT:l.lineCap="butt";break;case a1.LINE_CAP_ROUND:l.lineCap="round";break;case a1.LINE_CAP_SQUARE:l.lineCap="square"}l.stroke(u)}function VE(l,r,s,u){if(r.stops.length===1){const I=r.stops[0];return dy(I.rgb_color,I.opacity*s,u)}const g=hv(r.transform),{x1:f,y1:x,x2:C,y2:M}=r,$=g.transformPoint(new DOMPoint(f,x)),T=g.transformPoint(new DOMPoint(C,M)),A=l.createLinearGradient($.x,$.y,T.x,T.y);for(const I of r.stops)A.addColorStop(I.offset,dy(I.rgb_color,I.opacity*s,u));return A}function UE(l,r,s,u){if(r.stops.length===1){const I=r.stops[0];return dy(I.rgb_color,I.opacity*s,u)}const g=hv(r.transform),{fx:f,fy:x,cx:C,cy:M}=r,$=g.transformPoint(new DOMPoint(f,x)),T=g.transformPoint(new DOMPoint(C,M)),A=l.createRadialGradient($.x,$.y,0,T.x,T.y,r.r*((g.a+g.d)/2));for(const I of r.stops)A.addColorStop(I.offset,dy(I.rgb_color,I.opacity*s,u));return A}function GE(l,r,s,u){const g=hv(u.transform).preMultiplySelf(r),f=u.clip_path_idx!=null?s.clip_paths[u.clip_path_idx]:null;f&&GE(l,g,s,f);const x=new Path2D;let C;function M($,T){if($.path){const A=$.path;x.addPath(qE(A),T),A.rule===r1.PATH_RULE_EVEN_ODD&&(C="evenodd")}else if($.group){const A=$.group.transform?hv($.group.transform).preMultiplySelf(T):T;for(const I of $.group.children)M(I,A)}}for(const $ of u.children)M($,g);l.clip(x,C)}function HE(l,r,s,u,g){if(u.children.length===0)return;const f=u.mask_idx!=null?s.masks[u.mask_idx]:null;f&&HE(l,r,s,f,g);const x=l.canvas.width,C=l.canvas.height,M=e3(x,C),$=M.getContext("2d"),T=u.width,A=u.height,I=u.left,P=u.top,R=new Path2D,j=new Path2D;j.rect(I,P,T,A),R.addPath(j,r),$.clip(R);for(const ne of u.children)jE($,r,s,ne,g);const W=$.getImageData(0,0,x,C),K=W.data;if(u.mask_type===$E.MASK_TYPE_LUMINANCE)for(let ne=0;ne<K.length;ne+=4)K[ne+3]=K[ne+3]/255*(.2126*K[ne]+.7152*K[ne+1]+.0722*K[ne+2]);$.putImageData(W,0,0),l.globalCompositeOperation="destination-in",l.drawImage(M,0,0)}function hv(l){return l?new DOMMatrix([l.sx,l.ky,l.kx,l.sy,l.tx,l.ty]):new DOMMatrix}function qE(l){const r=new Path2D,s=l.step;let u=l.diffs[0]*s,g=l.diffs[1]*s;r.moveTo(u,g);for(let f=0,x=2;f<l.commands.length;f++)switch(l.commands[f]){case uy.PATH_COMMAND_MOVE:u+=l.diffs[x++]*s,g+=l.diffs[x++]*s,r.moveTo(u,g);break;case uy.PATH_COMMAND_LINE:u+=l.diffs[x++]*s,g+=l.diffs[x++]*s,r.lineTo(u,g);break;case uy.PATH_COMMAND_QUAD:{const C=u+l.diffs[x++]*s,M=g+l.diffs[x++]*s;u=C+l.diffs[x++]*s,g=M+l.diffs[x++]*s,r.quadraticCurveTo(C,M,u,g);break}case uy.PATH_COMMAND_CUBIC:{const C=u+l.diffs[x++]*s,M=g+l.diffs[x++]*s,$=C+l.diffs[x++]*s,T=M+l.diffs[x++]*s;u=$+l.diffs[x++]*s,g=T+l.diffs[x++]*s,r.bezierCurveTo(C,M,$,T,u,g);break}case uy.PATH_COMMAND_CLOSE:r.closePath()}return r}class r3{constructor(r){this.capacity=r,this.cache=new Map}get(r){if(!this.cache.has(r))return;const s=this.cache.get(r);return this.cache.delete(r),this.cache.set(r,s),s}put(r,s){this.cache.has(r)?this.cache.delete(r):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(r,s)}delete(r){this.cache.delete(r)}}class a3{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(r){return new es(r,r.data)}getFromCache(r,s,u){return this.cacheMap.has(u)||this.cacheMap.set(u,new r3(150)),this.cacheMap.get(u).get(Lo(r.serialize(),s))}setInCache(r,s,u,g){this.cacheDependenciesMap.has(g)||this.cacheDependenciesMap.set(g,new Map),this.cacheMap.has(g)||this.cacheMap.set(g,new r3(150));const f=this.cacheDependenciesMap.get(g);f.get(Lo(r.id,u))||f.set(Lo(r.id,u),new Set);const x=this.cacheMap.get(g),C=r.serialize();f.get(Lo(r.id,u)).add(C),x.put(Lo(r.serialize(),u),s)}removeImagesFromCacheByIds(r,s,u=""){if(!this.cacheMap.has(u)||!this.cacheDependenciesMap.has(u))return;const g=this.cacheMap.get(u),f=this.cacheDependenciesMap.get(u);for(const x of r)if(f.has(Lo(x,s))){for(const C of f.get(Lo(x,s)))g.delete(C);f.delete(Lo(x,s))}}rasterize(r,s,u,g,f=N9){const x=this.getFromCache(r,u,g);if(x)return x.clone();const C=f(s.icon,r.options),M=a3._getImage(C);return this.setInCache(r,M,u,g),M.clone()}}class WE{constructor(r){this.size=r,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(r,s){const u=this.toIdx(r,s);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(r,s){return this.leaves[this.toIdx(r,s)]}toIdx(r,s){return s*this.size+r}}function KE(l,r,s,u){let g=0,f=Number.MAX_VALUE;for(let x=0;x<3;x++)if(Math.abs(u[x])<1e-15){if(s[x]<l[x]||s[x]>r[x])return null}else{const C=1/u[x];let M=(l[x]-s[x])*C,$=(r[x]-s[x])*C;if(M>$){const T=M;M=$,$=T}if(M>g&&(g=M),$<f&&(f=$),g>f)return null}return g}function ZE(l,r,s,u,g,f,x,C,M,$,T){const A=u-l,I=g-r,P=f-s,R=x-l,j=C-r,W=M-s,K=T[1]*W-T[2]*j,ne=T[2]*R-T[0]*W,ie=T[0]*j-T[1]*R,J=A*K+I*ne+P*ie;if(Math.abs(J)<1e-15)return null;const le=1/J,fe=$[0]-l,ve=$[1]-r,Ne=$[2]-s,$e=(fe*K+ve*ne+Ne*ie)*le;if($e<0||$e>1)return null;const Ie=ve*P-Ne*I,Je=Ne*A-fe*P,Ve=fe*I-ve*A,et=(T[0]*Ie+T[1]*Je+T[2]*Ve)*le;return et<0||$e+et>1?null:(R*Ie+j*Je+W*Ve)*le}function XE(l,r,s){return(l-r)/(s-r)}function YE(l,r,s,u,g,f,x,C,M){const $=1<<s,T=f-u,A=x-g,I=(l+1)/$*T+u,P=(r+0)/$*A+g,R=(r+1)/$*A+g;C[0]=(l+0)/$*T+u,C[1]=P,M[0]=I,M[1]=R}class JE{constructor(r){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=r,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const s=function(f){const x=Math.ceil(Math.log2(f.dim/8)),C=[];let M=Math.ceil(Math.pow(2,x));const $=1/M,T=(P,R,j,W,K)=>{const ne=W?1:0,ie=(P+1)*j-ne,J=R*j,le=(R+1)*j-ne;K[0]=P*j,K[1]=J,K[2]=ie,K[3]=le};let A=new WE(M);const I=[];for(let P=0;P<M*M;P++){T(P%M,Math.floor(P/M),$,!1,I);const R=rm(I[0],I[1],f),j=rm(I[2],I[1],f),W=rm(I[2],I[3],f),K=rm(I[0],I[3],f);A.minimums.push(Math.min(R,j,W,K)),A.maximums.push(Math.max(R,j,W,K)),A.leaves.push(1)}for(C.push(A),M/=2;M>=1;M/=2){const P=C[C.length-1];A=new WE(M);for(let R=0;R<M*M;R++){T(R%M,Math.floor(R/M),2,!0,I);const j=P.getElevation(I[0],I[1]),W=P.getElevation(I[2],I[1]),K=P.getElevation(I[2],I[3]),ne=P.getElevation(I[0],I[3]),ie=P.isLeaf(I[0],I[1]),J=P.isLeaf(I[2],I[1]),le=P.isLeaf(I[2],I[3]),fe=P.isLeaf(I[0],I[3]),ve=Math.min(j.min,W.min,K.min,ne.min),Ne=Math.max(j.max,W.max,K.max,ne.max),$e=ie&&J&&le&&fe;A.maximums.push(Ne),A.minimums.push(ve),A.leaves.push(Ne-ve<=5&&$e?1:0)}C.push(A)}return C}(this.dem),u=s.length-1,g=s[u];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(s,0,0,u,0)}raycastRoot(r,s,u,g,f,x,C=1){return KE([r,s,-100],[u,g,this.maximums[0]*C],f,x)}raycast(r,s,u,g,f,x,C=1){if(!this.nodeCount)return null;const M=this.raycastRoot(r,s,u,g,f,x,C);if(M==null)return null;const $=[],T=[],A=[],I=[],P=[{idx:0,t:M,nodex:0,nodey:0,depth:0}];for(;P.length>0;){const{idx:R,t:j,nodex:W,nodey:K,depth:ne}=P.pop();if(this.leaves[R]){YE(W,K,ne,r,s,u,g,A,I);const J=1<<ne,le=(W+0)/J,fe=(W+1)/J,ve=(K+0)/J,Ne=(K+1)/J,$e=rm(le,ve,this.dem)*C,Ie=rm(fe,ve,this.dem)*C,Je=rm(fe,Ne,this.dem)*C,Ve=rm(le,Ne,this.dem)*C,et=ZE(A[0],A[1],$e,I[0],A[1],Ie,I[0],I[1],Je,f,x),it=ZE(I[0],I[1],Je,A[0],I[1],Ve,A[0],A[1],$e,f,x),at=Math.min(et!==null?et:Number.MAX_VALUE,it!==null?it:Number.MAX_VALUE);if(at!==Number.MAX_VALUE)return at;{const lt=Se.vec3.scaleAndAdd([],f,x,j);if(QE($e,Ie,Ve,Je,XE(lt[0],A[0],I[0]),XE(lt[1],A[1],I[1]))>=lt[2])return j}continue}let ie=0;for(let J=0;J<this._siblingOffset.length;J++){YE((W<<1)+this._siblingOffset[J][0],(K<<1)+this._siblingOffset[J][1],ne+1,r,s,u,g,A,I),A[2]=-100,I[2]=this.maximums[this.childOffsets[R]+J]*C;const le=KE(A,I,f,x);if(le!=null){const fe=le;$[J]=fe;let ve=!1;for(let Ne=0;Ne<ie&&!ve;Ne++)fe>=$[T[Ne]]&&(T.splice(Ne,0,J),ve=!0);ve||(T[ie]=J),ie++}}for(let J=0;J<ie;J++){const le=T[J];P.push({idx:this.childOffsets[R]+le,t:$[le],nodex:(W<<1)+this._siblingOffset[le][0],nodey:(K<<1)+this._siblingOffset[le][1],depth:ne+1})}}return null}_addNode(r,s,u){return this.minimums.push(r),this.maximums.push(s),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(r,s,u,g,f){if(r[g].isLeaf(s,u)===1)return;this.childOffsets[f]||(this.childOffsets[f]=this.nodeCount);const x=g-1,C=r[x];let M=0,$=0;for(let T=0;T<this._siblingOffset.length;T++){const A=2*s+this._siblingOffset[T][0],I=2*u+this._siblingOffset[T][1],P=C.getElevation(A,I),R=C.isLeaf(A,I),j=this._addNode(P.min,P.max,R);R&&(M|=1<<T),$||($=j)}for(let T=0;T<this._siblingOffset.length;T++)M&1<<T||this._construct(r,2*s+this._siblingOffset[T][0],2*u+this._siblingOffset[T][1],x,$+T)}}function QE(l,r,s,u,g,f){return Or(Or(l,s,f),Or(r,u,f),g)}function rm(l,r,s){const u=s.dim,g=fr(l*u-.5,0,u-1),f=fr(r*u-.5,0,u-1),x=Math.floor(g),C=Math.floor(f),M=Math.min(x+1,u-1),$=Math.min(C+1,u-1);return QE(s.get(x,C),s.get(M,C),s.get(x,$),s.get(M,$),g-x,f-C)}const B9={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function j9(l,r,s){return(256*l*256+256*r+s)/10-1e4}function O9(l,r,s){return 256*l+r+s/256-32768}class o1{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(r,s,u,g=!1){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return void Wr(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const f=this.dim=s.height-2,x=new Uint32Array(s.data.buffer);if(this.pixels=new Uint8Array(s.data.buffer),this.floatView=new Float32Array(s.data.buffer),this.borderReady=g,this._modifiedForSources={},!g){for(let M=0;M<f;M++)x[this._idx(-1,M)]=x[this._idx(0,M)],x[this._idx(f,M)]=x[this._idx(f-1,M)],x[this._idx(M,-1)]=x[this._idx(M,0)],x[this._idx(M,f)]=x[this._idx(M,f-1)];x[this._idx(-1,-1)]=x[this._idx(0,0)],x[this._idx(f,-1)]=x[this._idx(f-1,0)],x[this._idx(-1,f)]=x[this._idx(0,f-1)],x[this._idx(f,f)]=x[this._idx(f-1,f-1)]}const C=u==="terrarium"?O9:j9;for(let M=0;M<x.length;++M){const $=4*M;this.floatView[M]=C(this.pixels[$],this.pixels[$+1],this.pixels[$+2])}this._timestamp=Gt.now()}_buildQuadTree(){this._tree=new JE(this)}get(r,s,u=!1){u&&(r=fr(r,-1,this.dim),s=fr(s,-1,this.dim));const g=this._idx(r,s);return this.floatView[g]}set(r,s,u){const g=this._idx(r,s),f=this.floatView[g];return this.floatView[g]=u,u-f}static getUnpackVector(r){return B9[r]}_idx(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(r+1)}static pack(r,s){const u=[0,0,0,0],g=o1.getUnpackVector(s);let f=Math.floor((r+g[3])/g[2]);return u[2]=f%256,f=Math.floor(f/256),u[1]=f%256,f=Math.floor(f/256),u[0]=f,u}getPixels(){return new cf({width:this.stride,height:this.stride},this.pixels)}backfillBorder(r,s,u){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let g=s*this.dim,f=s*this.dim+this.dim,x=u*this.dim,C=u*this.dim+this.dim;switch(s){case-1:g=f-1;break;case 1:f=g+1}switch(u){case-1:x=C-1;break;case 1:C=x+1}const M=-s*this.dim,$=-u*this.dim;for(let T=x;T<C;T++)for(let A=g;A<f;A++){const I=4*this._idx(A,T),P=4*this._idx(A+M,T+$);this.pixels[I+0]=r.pixels[P+0],this.pixels[I+1]=r.pixels[P+1],this.pixels[I+2]=r.pixels[P+2],this.pixels[I+3]=r.pixels[P+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function F9(l,r,s){l===1?r.headerLength=s.readFixed32():l===2?r.x=s.readVarint():l===3?r.y=s.readVarint():l===4?r.z=s.readVarint():l===5&&r.layers.push(function(u,g){return u.readFields(q9,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},g)}(s,s.readVarint()+s.pos))}function V9(l,r,s){l===1?(r.delta_filter=function(u,g){return u.readFields(U9,{blockSize:0},g)}(s,s.readVarint()+s.pos),r.filter="delta_filter"):l===2?(s.readVarint(),r.filter="zigzag_filter"):l===3?(s.readVarint(),r.filter="bitshuffle_filter"):l===4&&(s.readVarint(),r.filter="byteshuffle_filter")}function U9(l,r,s){l===1&&(r.blockSize=s.readVarint())}function G9(l,r,s){l===1?(s.readVarint(),r.codec="gzip_data"):l===2?(s.readVarint(),r.codec="jpeg_image"):l===3?(s.readVarint(),r.codec="webp_image"):l===4&&(s.readVarint(),r.codec="png_image")}function H9(l,r,s){let u=0,g=0;l===1?r.firstByte=s.readFixed64():l===2?r.lastByte=s.readFixed64():l===3?r.filters.push(function(f,x){return f.readFields(V9,{},x)}(s,s.readVarint()+s.pos)):l===4?r.codec=function(f,x){return f.readFields(G9,{},x)}(s,s.readVarint()+s.pos):l===5?g=s.readFloat():l===6?u=s.readFloat():l===7?r.bands.push(s.readString()):l===8?r.offset=s.readDouble():l===9&&(r.scale=s.readDouble()),r.offset===0&&(r.offset=g),r.scale===0&&(r.scale=u)}function q9(l,r,s){l===1?r.version=s.readVarint():l===2?r.name=s.readString():l===3?r.units=s.readString():l===4?r.tileSize=s.readVarint():l===5?r.buffer=s.readVarint():l===6?r.pixelFormat=s.readVarint():l===7&&r.dataIndex.push(function(u,g){return u.readFields(H9,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},g)}(s,s.readVarint()+s.pos))}function W9(l,r,s){if(l===2)(function(u,g,f){u.readFields(K9,f,g)})(s,s.readVarint()+s.pos,r);else if(l===3)throw new Error("Not implemented")}function K9(l,r,s){if(l===1){let u=0;const g=s.readVarint()+s.pos;for(;s.pos<g;)r[u++]=s.readVarint()}}function Z9(l,r){if(r.length!==4)throw new Error(`Expected data of dimension 4 but got ${r.length}.`);let s=r[3];for(let u=2;u>=1;u--){const g=u===1?1:0,f=u===2?1:0;for(let x=0;x<r[0];x++){const C=r[1]*x;for(let M=g;M<r[1];M++){const $=r[2]*(M+C);for(let T=f;T<r[2];T++){const A=r[3]*(T+$);for(let I=0;I<r[3];I++){const P=A+I;l[P]+=l[P-s]}}}}s*=r[u]}return l}function X9(l){for(let r=0,s=l.length;r<s;r++)l[r]=l[r]>>>1^-(1&l[r]);return l}function Y9(l,r){switch(r){case"uint32":return l;case"uint16":for(let s=0;s<l.length;s+=2){const u=l[s],g=l[s+1];l[s]=(240&u)>>4|(61440&u)>>8|(240&g)<<4|61440&g,l[s+1]=15&u|(3840&u)>>4|(15&g)<<8|(3840&g)<<4}return l;case"uint8":for(let s=0;s<l.length;s+=4){const u=l[s],g=l[s+1],f=l[s+2],x=l[s+3];l[s+0]=(192&u)>>6|(192&g)>>4|(192&f)>>2|192&x,l[s+1]=(48&u)>>4|(48&g)>>2|48&f|(48&x)<<2,l[s+2]=(12&u)>>2|12&g|(12&f)<<2|(12&x)<<4,l[s+3]=3&u|(3&g)<<2|(3&f)<<4|(3&x)<<6}return l;default:throw new Error(`Invalid pixel format, "${r}"`)}}Tr(o1,"DEMData"),Tr(JE,"DemMinMaxQuadTree",{omit:["dem"]});var Tc=Uint8Array,fv=Uint16Array,J9=Int32Array,eC=new Tc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tC=new Tc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Q9=new Tc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rC=function(l,r){for(var s=new fv(31),u=0;u<31;++u)s[u]=r+=1<<l[u-1];var g=new J9(s[30]);for(u=1;u<30;++u)for(var f=s[u];f<s[u+1];++f)g[f]=f-s[u]<<5|u;return{b:s,r:g}},aC=rC(eC,2),nC=aC.b,eO=aC.r;nC[28]=258,eO[258]=28;for(var tO=rC(tC,0).b,iC=new fv(32768),bi=0;bi<32768;++bi){var hy=(43690&bi)>>1|(21845&bi)<<1;iC[bi]=((65280&(hy=(61680&(hy=(52428&hy)>>2|(13107&hy)<<2))>>4|(3855&hy)<<4))>>8|(255&hy)<<8)>>1}var pv=function(l,r,s){for(var u=l.length,g=0,f=new fv(r);g<u;++g)l[g]&&++f[l[g]-1];var x,C=new fv(r);for(g=1;g<r;++g)C[g]=C[g-1]+f[g-1]<<1;x=new fv(1<<r);var M=15-r;for(g=0;g<u;++g)if(l[g])for(var $=g<<4|l[g],T=r-l[g],A=C[l[g]-1]++<<T,I=A|(1<<T)-1;A<=I;++A)x[iC[A]>>M]=$;return x},mv=new Tc(288);for(bi=0;bi<144;++bi)mv[bi]=8;for(bi=144;bi<256;++bi)mv[bi]=9;for(bi=256;bi<280;++bi)mv[bi]=7;for(bi=280;bi<288;++bi)mv[bi]=8;var sC=new Tc(32);for(bi=0;bi<32;++bi)sC[bi]=5;var rO=pv(mv,9),aO=pv(sC,5),n3=function(l){for(var r=l[0],s=1;s<l.length;++s)l[s]>r&&(r=l[s]);return r},ud=function(l,r,s){var u=r/8|0;return(l[u]|l[u+1]<<8)>>(7&r)&s},i3=function(l,r){var s=r/8|0;return(l[s]|l[s+1]<<8|l[s+2]<<16)>>(7&r)},nO=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],dd=function(l,r,s){var u=new Error(r||nO[l]);if(u.code=l,Error.captureStackTrace&&Error.captureStackTrace(u,dd),!s)throw u;return u},iO=new Tc(0),sO=typeof TextDecoder<"u"&&new TextDecoder;try{sO.decode(iO,{stream:!0})}catch{}const oO={gzip_data:"gzip"};class cu extends Error{constructor(r){super(r),this.name="MRTError"}}const lO={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},oC={uint32:1,uint16:2,uint8:4},cO={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let s3;class o3{constructor(r=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=r}getLayer(r){const s=this.layers[r];if(!s)throw new cu(`Layer '${r}' not found`);return s}getHeaderLength(r){const s=new Uint8Array(r),u=new DataView(r);if(s[0]!==13)throw new cu("File is not a valid MRT.");return u.getUint32(1,!0)}parseHeader(r){const s=new Uint8Array(r),u=this.getHeaderLength(r);if(s.length<u)throw new cu(`Expected header with length >= ${u} but got buffer of length ${s.length}`);const g=function(f,x){return f.readFields(F9,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new s3(s.subarray(0,u)));if(!isNaN(this.x)&&(this.x!==g.x||this.y!==g.y||this.z!==g.z))throw new cu(`Invalid attempt to parse header ${g.z}/${g.x}/${g.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=g.x,this.y=g.y,this.z=g.z;for(const f of g.layers)this.layers[f.name]=new uO(f,{cacheSize:this._cacheSize});return this}createDecodingTask(r){const s=[],u=this.getLayer(r.layerName);for(let g of r.blockIndices){const f=u.dataIndex[g],x=f.firstByte-r.firstByte,C=f.lastByte-r.firstByte;if(u._blocksInProgress.has(g))continue;const M={layerName:u.name,firstByte:x,lastByte:C,pixelFormat:u.pixelFormat,blockIndex:g,blockShape:[f.bands.length].concat(u.bandShape),buffer:u.buffer,codec:f.codec.codec,filters:f.filters.map($=>$.filter)};u._blocksInProgress.add(g),s.push(M)}return new lC(s,()=>{s.forEach(g=>u._blocksInProgress.delete(g.blockIndex))},(g,f)=>{if(s.forEach(x=>u._blocksInProgress.delete(x.blockIndex)),g)throw g;f.forEach(x=>{this.getLayer(x.layerName).processDecodedData(x)})})}}class uO{constructor({version:r,name:s,units:u,tileSize:g,pixelFormat:f,buffer:x,dataIndex:C},M){if(this.version=r,this.version!==1)throw new cu(`Cannot parse raster layer encoded with MRT version ${r}`);this.name=s,this.units=u,this.tileSize=g,this.buffer=x,this.pixelFormat=lO[f],this.dataIndex=C,this.bandShape=[g+2*x,g+2*x,oC[this.pixelFormat]],this._decodedBlocks=new r3(M?M.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return oC[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:r})=>r).flat()}processDecodedData(r){const s=r.blockIndex.toString();this._decodedBlocks.get(s)||this._decodedBlocks.put(s,r.data)}getBlockForBand(r){let s=0;switch(typeof r){case"string":for(const[u,g]of this.dataIndex.entries()){for(const[f,x]of g.bands.entries())if(x===r)return{bandIndex:s+f,blockIndex:u,blockBandIndex:f};s+=g.bands.length}break;case"number":for(const[u,g]of this.dataIndex.entries()){if(r>=s&&r<s+g.bands.length)return{bandIndex:r,blockIndex:u,blockBandIndex:r-s};s+=g.bands.length}break;default:throw new cu(`Invalid band \`${JSON.stringify(r)}\`. Expected string or integer.`)}throw new cu(`Band not found: ${JSON.stringify(r)}`)}getDataRange(r){let s=1/0,u=-1/0;const g=[],f=new Set;for(const x of r){const{blockIndex:C}=this.getBlockForBand(x);if(C<0)throw new cu(`Invalid band: ${JSON.stringify(x)}`);const M=this.dataIndex[C];g.includes(C)||g.push(C),f.add(C),s=Math.min(s,M.firstByte),u=Math.max(u,M.lastByte)}if(f.size>this.cacheSize)throw new cu(`Number of blocks to decode (${f.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:s,lastByte:u,blockIndices:g}}hasBand(r){const{blockIndex:s}=this.getBlockForBand(r);return s>=0}hasDataForBand(r){const{blockIndex:s}=this.getBlockForBand(r);return s>=0&&!!this._decodedBlocks.get(s.toString())}getBandView(r){const{blockIndex:s,blockBandIndex:u}=this.getBlockForBand(r),g=this._decodedBlocks.get(s.toString());if(!g)throw new cu(`Data for band ${JSON.stringify(r)} of layer "${this.name}" not decoded.`);const f=this.dataIndex[s],x=this.bandShape.reduce(($,T)=>$*T,1),C=u*x,M=g.subarray(C,C+x);return{data:M,bytes:new Uint8Array(M.buffer).subarray(M.byteOffset,M.byteOffset+M.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:f.offset,scale:f.scale}}}o3.setPbf=function(l){s3=l};class lC{constructor(r,s,u){this.tasks=r,this._onCancel=s,this._onComplete=u,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(r,s){this._finalized||(this._onComplete(r,s),this._finalized=!0)}}o3.performDecoding=function(l,r){const s=new Uint8Array(l);return Promise.all(r.tasks.map(u=>{const{layerName:g,firstByte:f,lastByte:x,pixelFormat:C,blockShape:M,blockIndex:$,filters:T,codec:A}=u,I=s.subarray(f,x+1),P=new Uint32Array(M[0]*M[1]*M[2]);let R;if(A!=="gzip_data")throw new cu(`Unhandled codec: ${A}`);return R=function(j,W){if(!globalThis.DecompressionStream&&W==="gzip_data")return Promise.resolve(((J=function(ve){ve[0]==31&&ve[1]==139&&ve[2]==8||dd(6,"invalid gzip data");var Ne=ve[3],$e=10;4&Ne&&($e+=2+(ve[10]|ve[11]<<8));for(var Ie=(Ne>>3&1)+(Ne>>4&1);Ie>0;Ie-=!ve[$e++]);return $e+(2&Ne)}(ie=j))+8>ie.length&&dd(6,"invalid gzip data"),function(ve,Ne,$e,Ie){var Je=ve.length;if(!Je||Ne.f&&!Ne.l)return $e||new Tc(0);var Ve=!$e,et=Ve||Ne.i!=2,it=Ne.i;Ve&&($e=new Tc(3*Je));var at,lt,gt=function(wf){var im=$e.length;if(wf>im){var sm=new Tc(Math.max(2*im,wf));sm.set($e),$e=sm}},vt=Ne.f||0,ht=Ne.p||0,Rt=Ne.b||0,Yt=Ne.l,Lt=Ne.d,nr=Ne.m,ar=Ne.n,gr=8*Je;do{if(!Yt){vt=ud(ve,ht,1);var jt=ud(ve,ht+1,3);if(ht+=3,!jt){var Mr=ve[(ta=4+((ht+7)/8|0))-4]|ve[ta-3]<<8,sr=ta+Mr;if(sr>Je){it&&dd(0);break}et&&gt(Rt+Mr),$e.set(ve.subarray(ta,sr),Rt),Ne.b=Rt+=Mr,Ne.p=ht=8*sr,Ne.f=vt;continue}if(jt==1)Yt=rO,Lt=aO,nr=9,ar=5;else if(jt==2){var Cr=ud(ve,ht,31)+257,Vr=ud(ve,ht+10,15)+4,sa=Cr+ud(ve,ht+5,31)+1;ht+=14;for(var ha=new Tc(sa),ba=new Tc(19),fa=0;fa<Vr;++fa)ba[Q9[fa]]=ud(ve,ht+3*fa,7);ht+=3*Vr;var Da=n3(ba),_n=(1<<Da)-1,cn=pv(ba,Da);for(fa=0;fa<sa;){var ta,un=cn[ud(ve,ht,_n)];if(ht+=15&un,(ta=un>>4)<16)ha[fa++]=ta;else{var sn=0,bn=0;for(ta==16?(bn=3+ud(ve,ht,3),ht+=2,sn=ha[fa-1]):ta==17?(bn=3+ud(ve,ht,7),ht+=3):ta==18&&(bn=11+ud(ve,ht,127),ht+=7);bn--;)ha[fa++]=sn}}var wi=ha.subarray(0,Cr),Si=ha.subarray(Cr);nr=n3(wi),ar=n3(Si),Yt=pv(wi,nr),Lt=pv(Si,ar)}else dd(1);if(ht>gr){it&&dd(0);break}}et&&gt(Rt+131072);for(var ci=(1<<nr)-1,Fo=(1<<ar)-1,Rn=ht;;Rn=ht){var $n=(sn=Yt[i3(ve,ht)&ci])>>4;if((ht+=15&sn)>gr){it&&dd(0);break}if(sn||dd(2),$n<256)$e[Rt++]=$n;else{if($n==256){Rn=ht,Yt=null;break}var go=$n-254;$n>264&&(go=ud(ve,ht,(1<<(Ui=eC[fa=$n-257]))-1)+nC[fa],ht+=Ui);var Ti=Lt[i3(ve,ht)&Fo],ul=Ti>>4;if(Ti||dd(3),ht+=15&Ti,Si=tO[ul],ul>3){var Ui=tC[ul];Si+=i3(ve,ht)&(1<<Ui)-1,ht+=Ui}if(ht>gr){it&&dd(0);break}et&&gt(Rt+131072);var uh=Rt+go;if(Rt<Si){var am=0-Si,nm=Math.min(Si,uh);for(am+Rt<0&&dd(3);Rt<nm;++Rt)$e[Rt]=(void 0)[am+Rt]}for(;Rt<uh;++Rt)$e[Rt]=$e[Rt-Si]}}Ne.l=Yt,Ne.p=Rn,Ne.b=Rt,Ne.f=vt,Yt&&(vt=1,Ne.m=nr,Ne.d=Lt,Ne.n=ar)}while(!vt);return Rt!=$e.length&&Ve?(at=$e,((lt=Rt)==null||lt>at.length)&&(lt=at.length),new Tc(at.subarray(0,lt))):$e.subarray(0,Rt)}(ie.subarray(J,-8),{i:2},new Tc(((K=ie)[(ne=K.length)-4]|K[ne-3]<<8|K[ne-2]<<16|K[ne-1]<<24)>>>0))));var K,ne,ie,J;const le=oO[W];if(!le)throw new Error(`Unhandled codec: ${W}`);const fe=new globalThis.DecompressionStream(le);return new Response(new Blob([j]).stream().pipeThrough(fe)).arrayBuffer().then(ve=>new Uint8Array(ve))}(I,A).then(j=>(function(W,K){W.readFields(W9,K)}(new s3(j),P),new cO[C](P.buffer))),R.then(j=>{for(let W=T.length-1;W>=0;W--)switch(T[W]){case"delta_filter":Z9(j,M);break;case"zigzag_filter":X9(j);break;case"bitshuffle_filter":Y9(j,C);break;default:throw new cu(`Unhandled filter "${T[W]}"`)}return{layerName:g,blockIndex:$,data:j}}).catch(j=>{throw j})}))},Tr(lC,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});let gv,l3,hd,fy,c3,py=null;function cC(){return yn()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:l3||Fe.DRACO_URL}function uC(){if(yn()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(fy)return fy;const l=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return fy=WebAssembly.validate(l)?Fe.MESHOPT_SIMD_URL:Fe.MESHOPT_URL,fy}const l1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},dO={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},yv={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function dC(l,r,s){const u=s.json.bufferViews.length,g=s.buffers.length;r.bufferView=u,s.json.bufferViews[u]={buffer:g,byteLength:l.byteLength},s.buffers[g]=l}const u3="KHR_draco_mesh_compression";function hO(l,r){const s=l.extensions&&l.extensions[u3];if(!s)return;const u=new hd.Decoder,g=mC(r,s.bufferView),f=new hd.Mesh;if(!u.DecodeArrayToMesh(g,g.byteLength,f))throw new Error("Failed to decode Draco mesh");const x=r.json.accessors[l.indices],C=l1[x.componentType],M=x.count*C.BYTES_PER_ELEMENT,$=hd._malloc(M);C===Uint16Array?u.GetTrianglesUInt16Array(f,M,$):u.GetTrianglesUInt32Array(f,M,$),dC(hd.memory.buffer.slice($,$+M),x,r),hd._free($);for(const T of Object.keys(s.attributes)){const A=u.GetAttributeByUniqueId(f,s.attributes[T]),I=r.json.accessors[l.attributes[T]],P=dO[I.componentType],R=I.count*yv[I.type]*l1[I.componentType].BYTES_PER_ELEMENT,j=hd._malloc(R);u.GetAttributeDataArrayForAllPoints(f,A,hd[P],R,j),dC(hd.memory.buffer.slice(j,j+R),I,r),hd._free(j)}u.destroy(),f.destroy(),delete l.extensions[u3]}const c1="EXT_meshopt_compression";function fO(l,r){if(!l.extensions||!l.extensions[c1])return;const s=l.extensions[c1],u=new Uint8Array(r.buffers[s.buffer],s.byteOffset||0,s.byteLength||0),g=new Uint8Array(s.count*s.byteStride);c3.decodeGltfBuffer(g,s.count,s.byteStride,u,s.mode,s.filter),l.buffer=r.buffers.length,l.byteOffset=0,r.buffers[l.buffer]=g.buffer,delete l.extensions[c1]}const hC=1179937895,fC=new TextDecoder("utf8");function pC(l,r){return new URL(l,r).href}function pO(l,r,s,u){return fetch(pC(l.uri,u)).then(g=>g.arrayBuffer()).then(g=>{r.buffers[s]=g})}function mC(l,r){const s=l.json.bufferViews[r];return new Uint8Array(l.buffers[s.buffer],s.byteOffset||0,s.byteLength)}function mO(l,r,s,u){if(l.uri){const g=pC(l.uri,u);return fetch(g).then(f=>f.blob()).then(f=>createImageBitmap(f)).then(f=>{r.images[s]=f})}if(l.bufferView!==void 0){const g=mC(r,l.bufferView),f=new Blob([g],{type:l.mimeType});return createImageBitmap(f).then(x=>{r.images[s]=x})}}function gC(l,r=0,s){const u={json:null,images:[],buffers:[]};if(new Uint32Array(l,r,1)[0]===hC){const T=new Uint32Array(l,r);let A=2;const I=(T[A++]>>2)-3,P=T[A++]>>2;if(A++,u.json=JSON.parse(fC.decode(T.subarray(A,A+P))),A+=P,A<I){const R=T[A++];A++;const j=r+(A<<2);u.buffers[0]=l.slice(j,j+R)}}else u.json=JSON.parse(fC.decode(new Uint8Array(l,r)));const{buffers:g,images:f,meshes:x,extensionsUsed:C,bufferViews:M}=u.json;let $=Promise.resolve();if(g){const T=[];for(let A=0;A<g.length;A++){const I=g[A];I.uri?T.push(pO(I,u,A,s)):u.buffers[A]||(u.buffers[A]=null)}$=Promise.all(T)}return $.then(()=>{const T=[],A=C&&C.includes(u3),I=C&&C.includes(c1);if(A&&T.push(function(){if(!hd)return gv??(gv=function(P){let R,j=null;function W(){R=new Uint8Array(j.buffer)}function K(){throw new Error("Unexpected Draco error.")}const ne={a:{a:K,d:function(ie,J,le){return R.copyWithin(ie,J,J+le)},c:function(ie){const J=R.length,le=Math.max(ie>>>0,Math.ceil(1.2*J)),fe=Math.ceil((le-J)/65536);try{return j.grow(fe),W(),!0}catch{return!1}},b:K}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(P,ne):P.then(ie=>ie.arrayBuffer()).then(ie=>WebAssembly.instantiate(ie,ne))).then(ie=>{const{Rb:J,Qb:le,P:fe,T:ve,X:Ne,Ja:$e,La:Ie,Qa:Je,Va:Ve,Wa:et,eb:it,jb:at,f:lt,e:gt,yb:vt,zb:ht,Ab:Rt,Bb:Yt,Db:Lt,Gb:nr}=ie.instance.exports;j=gt;const ar=(()=>{let gr=0,jt=0,Mr=0,sr=0;return Cr=>{Mr&&(J(sr),J(gr),jt+=Mr,Mr=gr=0),gr||(jt+=128,gr=le(jt));const Vr=Cr.length+7&-8;let sa=gr;Vr>=jt&&(Mr=Vr,sa=sr=le(Vr));for(let ha=0;ha<Cr.length;ha++)R[sa+ha]=Cr[ha];return sa}})();return W(),lt(),{memory:gt,_free:J,_malloc:le,Mesh:class{constructor(){this.ptr=fe()}destroy(){ve(this.ptr)}},Decoder:class{constructor(){this.ptr=$e()}destroy(){at(this.ptr)}DecodeArrayToMesh(gr,jt,Mr){const sr=ar(gr),Cr=Ie(this.ptr,sr,jt,Mr.ptr);return!!Ne(Cr)}GetAttributeByUniqueId(gr,jt){return{ptr:Je(this.ptr,gr.ptr,jt)}}GetTrianglesUInt16Array(gr,jt,Mr){Ve(this.ptr,gr.ptr,jt,Mr)}GetTrianglesUInt32Array(gr,jt,Mr){et(this.ptr,gr.ptr,jt,Mr)}GetAttributeDataArrayForAllPoints(gr,jt,Mr,sr,Cr){it(this.ptr,gr.ptr,jt.ptr,Mr,sr,Cr)}},DT_INT8:vt(),DT_UINT8:ht(),DT_INT16:Rt(),DT_UINT16:Yt(),DT_UINT32:Lt(),DT_FLOAT32:nr()}})}(fetch(cC())),gv.then(P=>{hd=P,gv=void 0}))}()),I&&T.push(function(){if(c3)return;const P=function(R){let j;const W=WebAssembly.instantiateStreaming(R,{}).then(ie=>{j=ie.instance,j.exports.__wasm_call_ctors()}),K={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ne={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:W,supported:!0,decodeGltfBuffer(ie,J,le,fe,ve,Ne){(function($e,Ie,Je,Ve,et,it,at){const lt=$e.exports.sbrk,gt=Ve+3&-4,vt=lt(gt*et),ht=lt(it.length),Rt=new Uint8Array($e.exports.memory.buffer);Rt.set(it,ht);const Yt=Ie(vt,Ve,et,ht,it.length);if(Yt===0&&at&&at(vt,gt,et),Je.set(Rt.subarray(vt,vt+Ve*et)),lt(vt-lt(0)),Yt!==0)throw new Error(`Malformed buffer data: ${Yt}`)})(j,j.exports[ne[ve]],ie,J,le,fe,j.exports[K[Ne]])}}}(fetch(uC()));return P.ready.then(()=>{c3=P})}()),f)for(let P=0;P<f.length;P++)T.push(mO(f[P],u,P,s));return(T.length?Promise.all(T):Promise.resolve()).then(()=>{if(A&&x)for(const{primitives:P}of x)for(const R of P)hO(R,u);if(I&&x&&M)for(const P of M)fO(P,u);return u})})}function Pg(l,r){const s=l.json.bufferViews[r.bufferView],u=l1[r.componentType];return new u(l.buffers[s.buffer],(r.byteOffset||0)+(s.byteOffset||0),r.count*(s.byteStride&&s.byteStride!==yv[r.type]*u.BYTES_PER_ELEMENT?s.byteStride/u.BYTES_PER_ELEMENT:yv[r.type]))}function d3(l,r,s,u){const g=l1[r.componentType],f=function(T){switch(T){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(g),x=l.json.bufferViews[r.bufferView],C=x.byteStride?x.byteStride/g.BYTES_PER_ELEMENT:yv[r.type],M=s.float32,$=M.length/s.capacity;for(let T=0,A=0;T<r.count*C;T+=C,A+=$)for(let I=0;I<$;I++)M[A+I]=u[T+I]*f;s._trim()}function gO(l,r,s){const u=l.indices,g=l.attributes,f={};f.indexArray=new Fi;const x=r.json.accessors[u],C=x.count/3;f.indexArray.reserve(C);const M=Pg(r,x);for(let I=0;I<C;I++)f.indexArray.emplaceBack(M[3*I],M[3*I+1],M[3*I+2]);f.indexArray._trim(),f.vertexArray=new dc;const $=r.json.accessors[g.POSITION];f.vertexArray.reserve($.count);const T=Pg(r,$);for(let I=0;I<$.count;I++)f.vertexArray.emplaceBack(T[3*I],T[3*I+1],T[3*I+2]);if(f.vertexArray._trim(),f.aabb=new jr($.min,$.max),f.centroid=function(I,P){const R=[0,0,0],j=I.length;if(j>0){for(let W=0;W<j;W++){const K=3*I[W];R[0]+=P[K],R[1]+=P[K+1],R[2]+=P[K+2]}R[0]/=j,R[1]/=j,R[2]/=j}return R}(M,T),g.COLOR_0!==void 0){const I=r.json.accessors[g.COLOR_0],P=yv[I.type],R=Pg(r,I);f.colorArray=P===3?new dc:new uc,f.colorArray.resize(I.count),d3(r,I,f.colorArray,R)}if(g.NORMAL!==void 0){f.normalArray=new dc;const I=r.json.accessors[g.NORMAL];f.normalArray.resize(I.count);const P=Pg(r,I);d3(r,I,f.normalArray,P)}if(g.TEXCOORD_0!==void 0&&s.length>0){f.texcoordArray=new mc;const I=r.json.accessors[g.TEXCOORD_0];f.texcoordArray.resize(I.count);const P=Pg(r,I);d3(r,I,f.texcoordArray,P)}if(g._FEATURE_ID_RGBA4444!==void 0){const I=r.json.accessors[g._FEATURE_ID_RGBA4444];r.json.extensionsUsed&&r.json.extensionsUsed.includes("EXT_meshopt_compression")&&(f.featureData=Pg(r,I))}g._FEATURE_RGBA4444!==void 0&&(f.featureData=new Uint32Array(Pg(r,r.json.accessors[g._FEATURE_RGBA4444]).buffer));const A=l.material;return f.material=function(I,P){const{emissiveFactor:R=[0,0,0],alphaMode:j="OPAQUE",alphaCutoff:W=.5,normalTexture:K,occlusionTexture:ne,emissiveTexture:ie,doubleSided:J}=I,{baseColorFactor:le=[1,1,1,1],metallicFactor:fe=1,roughnessFactor:ve=1,baseColorTexture:Ne,metallicRoughnessTexture:$e}=I.pbrMetallicRoughness||{},Ie=ne?P[ne.index]:void 0;if(ne&&ne.extensions&&ne.extensions.KHR_texture_transform&&Ie){const Je=ne.extensions.KHR_texture_transform;Ie.offsetScale=[Je.offset[0],Je.offset[1],Je.scale[0],Je.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new Ra(...le),metallicFactor:fe,roughnessFactor:ve,baseColorTexture:Ne?P[Ne.index]:void 0,metallicRoughnessTexture:$e?P[$e.index]:void 0},doubleSided:J,emissiveFactor:R,alphaMode:j,alphaCutoff:W,normalTexture:K?P[K.index]:void 0,occlusionTexture:Ie,emissionTexture:ie?P[ie.index]:void 0,defined:I.defined===void 0}}(A!==void 0?r.json.materials[A]:{defined:!1},s),f}function yC(l,r,s){const{matrix:u,rotation:g,translation:f,scale:x,mesh:C,extras:M,children:$}=l,T={};if(T.matrix=u||Se.mat4.fromRotationTranslationScale([],g||[0,0,0,1],f||[0,0,0],x||[1,1,1]),C!==void 0){T.meshes=s[C];const A=T.anchor=[0,0];for(const I of T.meshes){const{min:P,max:R}=I.aabb;A[0]+=P[0]+R[0],A[1]+=P[1]+R[1]}A[0]=Math.floor(A[0]/T.meshes.length/2),A[1]=Math.floor(A[1]/T.meshes.length/2)}if(M&&(M.id&&(T.id=M.id),M.lights&&(T.lights=function(A){if(!A.length)return[];const I=function(K){const ne=atob(K),ie=new Uint8Array(ne.length);for(let J=0;J<ne.length;J++)ie[J]=ne.codePointAt(J);return ie}(A),P=[],R=I.length/24,j=new Uint16Array(I.buffer),W=new Float32Array(I.buffer);for(let K=0;K<R;K++){const ne=j[2*K*6]/30,ie=j[2*K*6+1]/30,J=j[2*K*6+10]/100,le=W[6*K+1],fe=W[6*K+2],ve=W[6*K+3],Ne=W[6*K+4],$e=ve-le,Ie=Ne-fe,Je=Math.hypot($e,Ie);P.push({pos:[le+.5*$e,fe+.5*Ie,ie],normal:[Ie/Je,-$e/Je,0],width:Je,height:ne,depth:J,points:[le,fe,ve,Ne]})}return P}(M.lights))),$){const A=[];for(const I of $)A.push(yC(r.json.nodes[I],r,s));T.children=A}return T}function yO(l){if(l.vertices.length===0||l.indices.length===0)return null;const r=new O0(l.vertices,l.indices,8,256),[s,u]=[r.min.clone(),r.max.clone()];return{vertices:l.vertices,indices:l.indices,grid:r,min:s,max:u}}function xO(l){if(!l.extras||!l.extras.ground)return null;const r=l.extras.ground;if(!r||!Array.isArray(r)||r.length===0)return null;const s=r[0];if(!s||!Array.isArray(s)||s.length===0)return null;const u=[];for(const x of s){if(!Array.isArray(x)||x.length!==2)continue;const C=x[0],M=x[1];typeof C=="number"&&typeof M=="number"&&u.push(new dt(C,M))}if(u.length<3)return null;u.length>1&&u[u.length-1].equals(u[0])&&u.pop();let g=0;for(let x=0;x<u.length;x++){const C=u[x],M=u[(x+1)%u.length],$=u[(x+2)%u.length];g+=(C.x-M.x)*($.y-M.y)-($.x-M.x)*(C.y-M.y)}g>0&&u.reverse();const f=uf(u.flatMap(x=>[x.x,x.y]),[]);return f.length===0?null:{vertices:u,indices:f}}function vO(l,r){const s=[],u=[];let g=0;const f=[];for(const x of l){g=s.length;const C=x.vertexArray.float32,M=x.indexArray.uint16;for(let $=0;$<x.vertexArray.length;$++)f[0]=C[3*$+0],f[1]=C[3*$+1],f[2]=C[3*$+2],Se.vec3.transformMat4(f,f,r),s.push(new dt(f[0],f[1]));for(let $=0;$<3*x.indexArray.length;$++)u.push(M[$]+g)}if(u.length%3!=0)return null;for(let x=0;x<u.length;x+=3){const C=s[u[x+0]],M=s[u[x+1]],$=s[u[x+2]];(C.x-M.x)*($.y-M.y)-($.x-M.x)*(C.y-M.y)>0&&([u[x+1],u[x+2]]=[u[x+2],u[x+1]])}return{vertices:s,indices:u}}function xC(l){const r=function(M,$){const T=[],A=WebGL2RenderingContext;if(M.json.textures)for(const I of M.json.textures){const P={magFilter:A.LINEAR,minFilter:A.NEAREST,wrapS:A.REPEAT,wrapT:A.REPEAT};I.sampler!==void 0&&Object.assign(P,M.json.samplers[I.sampler]),T.push({image:$[I.source],sampler:P,uploaded:!1})}return T}(l,l.images),s=function(M,$){const T=[];for(const A of M.json.meshes){const I=[];for(const P of A.primitives)I.push(gO(P,M,$));T.push(I)}return T}(l,r),{scenes:u,scene:g,nodes:f}=l.json,x=u?u[g||0].nodes:f,C=[];for(const M of x)C.push(yC(f[M],l,s));return function(M,$,T){const A={},I=new Set;for(let P=0;P<M.length;P++){const R=T[$[P]];if(!R.extras)continue;const j=R.extras["mapbox:footprint:version"],W=R.extras["mapbox:footprint:id"];(j||W)&&I.add(P),j==="1.0.0"&&W&&(A[W]=P)}for(let P=0;P<M.length;P++){if(I.has(P))continue;const R=M[P],j=T[$[P]];if(!j.extras)continue;let W=null;R.id in A&&(W=vO(M[A[R.id]].meshes,R.matrix)),W||(W=xO(j)),W&&(R.footprint=yO(W))}if(I.size>0){const P=Array.from(I.values()).sort((R,j)=>R-j);for(let R=P.length-1;R>=0;R--)M.splice(P[R],1)}}(C,x,l.json.nodes),C}function _O(l){l.heightmap=new Float32Array(4096),l.heightmap.fill(-1);const r=l.vertexArray.float32,s=l.aabb.min[0]-1,u=l.aabb.min[1]-1,g=Eg/(l.aabb.max[0]-s+2),f=Eg/(l.aabb.max[1]-u+2);for(let x=0;x<r.length;x+=3){const C=r[x+2],M=(r[x+0]-s)*g|0,$=(r[x+1]-u)*f|0;C>l.heightmap[$*Eg+M]&&(l.heightmap[$*Eg+M]=C)}}function bO(l,r){const s={};s.indexArray=new Fi,s.indexArray.reserve(4*l.length),s.vertexArray=new dc,s.vertexArray.reserve(10*l.length),s.colorArray=new uc,s.vertexArray.reserve(10*l.length);let u=0;for(const x of l){const C=Math.min(10,Math.max(4,1.3*x.height))*r,M=[-x.normal[1],x.normal[0],0],$=Math.min(.29,.1*x.width/x.depth),T=x.width-2*x.depth*r*($+.01),A=Se.vec3.scaleAndAdd([],x.pos,M,T/2),I=Se.vec3.scaleAndAdd([],x.pos,M,-T/2),P=[A[0],A[1],A[2]+x.height],R=[I[0],I[1],I[2]+x.height],j=Se.vec3.scaleAndAdd([],x.normal,M,$);Se.vec3.scale(j,j,C);const W=Se.vec3.scaleAndAdd([],x.normal,M,-$);Se.vec3.scale(W,W,C),Se.vec3.add(j,A,j),Se.vec3.add(W,I,W),A[2]+=.1,I[2]+=.1,s.vertexArray.emplaceBack(j[0],j[1],j[2]),s.vertexArray.emplaceBack(W[0],W[1],W[2]),s.vertexArray.emplaceBack(A[0],A[1],A[2]),s.vertexArray.emplaceBack(I[0],I[1],I[2]),s.vertexArray.emplaceBack(P[0],P[1],P[2]),s.vertexArray.emplaceBack(R[0],R[1],R[2]),s.vertexArray.emplaceBack(A[0],A[1],A[2]),s.vertexArray.emplaceBack(I[0],I[1],I[2]),s.vertexArray.emplaceBack(j[0],j[1],j[2]),s.vertexArray.emplaceBack(W[0],W[1],W[2]);const K=T/C/2;s.colorArray.emplaceBack(-K-$,-1,K,.8),s.colorArray.emplaceBack(K+$,-1,K,.8),s.colorArray.emplaceBack(-K,0,K,1.3),s.colorArray.emplaceBack(K,0,K,1.3),s.colorArray.emplaceBack(K+$,-.8,K,.7),s.colorArray.emplaceBack(K+$,-.8,K,.7),s.colorArray.emplaceBack(0,0,K,1.3),s.colorArray.emplaceBack(0,0,K,1.3),s.colorArray.emplaceBack(K+$,-1.2,K,.8),s.colorArray.emplaceBack(K+$,-1.2,K,.8),s.indexArray.emplaceBack(6+u,4+u,8+u),s.indexArray.emplaceBack(7+u,9+u,5+u),s.indexArray.emplaceBack(0+u,1+u,2+u),s.indexArray.emplaceBack(1+u,3+u,2+u),u+=10}const g={defined:!0,emissiveFactor:[0,0,0]},f={};return f.baseColorFactor=Ra.white,g.pbrMetallicRoughness=f,s.material=g,s.aabb=new jr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),s}class vC{constructor(r){this._stringToNumber={},this._numberToString=[];for(let s=0;s<r.length;s++){const u=r[s];this._stringToNumber[u]=s,this._numberToString[s]=u}}encode(r){return this._stringToNumber[r]}decode(r){return this._numberToString[r]}}const wO=["id","tile","layer","source","sourceLayer","state"];class my{constructor(r,s,u,g,f){this.type="Feature",this._vectorTileFeature=r,this._z=s,this._x=u,this._y=g,this.properties=r.properties,this.id=f}clone(){const r=new my(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(r.state={...this.state}),this.layer&&(r.layer={...this.layer}),this.source&&(r.source=this.source),this.sourceLayer&&(r.sourceLayer=this.sourceLayer),r}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const s of wO)this[s]!==void 0&&(r[s]=this[s]);return r}}class _C{constructor(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new ic(lr,16,0),this.featureIndexArray=new eh,this.promoteId=s,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(r,s,u,g,f,x=0,C=0){const M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,g,f,x);const $=this.grid;for(let T=0;T<s.length;T++){const A=s[T],I=[1/0,1/0,-1/0,-1/0];for(let P=0;P<A.length;P++){const R=A[P];I[0]=Math.min(I[0],R.x),I[1]=Math.min(I[1],R.y),I[2]=Math.max(I[2],R.x),I[3]=Math.max(I[3],R.y)}C!==0&&(I[0]-=C,I[1]-=C,I[2]+=C,I[3]+=C),I[0]<lr&&I[1]<lr&&I[2]>=0&&I[3]>=0&&$.insert(M,I[0],I[1],I[2],I[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new iu.VectorTile(new wg(this.rawTileData)).layers,this.sourceLayerCoder=new vC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const r in this.vtLayers)this.vtFeatures[r]=[]}return this.vtLayers}query(r,s){const{tilespaceGeometry:u,transform:g,tileTransform:f,pixelPosMatrix:x,availableImages:C}=s;this.loadVTLayers(),this.serializedLayersCache.clear();const M=u.bufferedTilespaceBounds,$=this.grid.query(M.min.x,M.min.y,M.max.x,M.max.y,(P,R,j,W)=>rt(u.bufferedTilespaceGeometry,P,R,j,W));$.sort(SO);let T=null;g.elevation&&$.length>0&&(T=ly.create(g.elevation,this.tileID));const A={};let I;for(let P=0;P<$.length;P++){const R=$[P];if(R===I)continue;I=R;const j=this.featureIndexArray.get(R);let W=null;this.is3DTile?this.loadMatchingModelFeature(A,j,r,u,g):this.loadMatchingFeature(A,j,r,C,(K,ne,ie,J=0)=>(W||(W=Z(K,this.tileID.canonical,f)),ne.queryIntersectsFeature(u,K,ie,W,this.z,g,x,T,J)))}return A}loadMatchingFeature(r,s,u,g,f){const{featureIndex:x,bucketIndex:C,sourceLayerIndex:M,layoutVertexArrayOffset:$}=s,T=this.bucketLayerIDs[C],A=u.layers,I=Object.keys(A);if(I.length&&!function(K,ne){for(let ie=0;ie<K.length;ie++)if(ne.indexOf(K[ie])>=0)return!0;return!1}(I,T))return;const P=u.sourceCache,R=this.sourceLayerCoder.decode(M),j=this.vtLayers[R].feature(x),W=this.getId(j,R);for(let K=0;K<T.length;K++){const ne=T[K];if(!A[ne])continue;const{styleLayer:ie,targets:J}=A[ne];let le={};W!==void 0&&(le=P.getFeatureState(ie.sourceLayer,W));const fe=!f||f(j,ie,le,$);if(!fe)continue;const ve=new my(j,this.z,this.x,this.y,W);ve.tile=this.tileID.canonical,ve.state=le;let Ne=this.serializedLayersCache.get(ne);Ne||(Ne=ie.serialize(),Ne.id=ne,this.serializedLayersCache.set(ne,Ne)),ve.source=Ne.source,ve.sourceLayer=Ne["source-layer"],ve.layer=Nr({},Ne),ve.layer.paint=bC(Ne.paint,ie.paint,j,le,g),ve.layer.layout=bC(Ne.layout,ie.layout,j,le,g);let $e=!1;for(const Ie of J){this.updateFeatureProperties(ve,Ie);const{filter:Je}=Ie;if(Je){if(j.properties=ve.properties,Je.needGeometry){const Ve=X(j,!0);if(!Je.filter(new Ea(this.tileID.overscaledZ),Ve,this.tileID.canonical))continue}else if(!Je.filter(new Ea(this.tileID.overscaledZ),j))continue}$e=!0,Ie.targetId&&this.addFeatureVariant(ve,Ie)}$e&&this.appendToResult(r,ne,x,ve,fe)}}loadMatchingModelFeature(r,s,u,g,f){const x=this.bucketLayerIDs[0][0],C=u.layers;if(!C[x])return;const{styleLayer:M,targets:$}=C[x];if(M.type!=="model")return;const T=g.tile,A=s.featureIndex,I=T.getBucket(M);if(!(I&&I instanceof e1))return;const P=function(Ne,$e,Ie,Je){const Ve=Ne.getNodesInfo()[$e];if(Ve.hiddenByReplacement||!Ve.node.meshes)return;let et=Number.MAX_VALUE;const it=Ve.node,at=Ie.tile,lt=Je.calculatePosMatrix(at.tileID.toUnwrapped(),Je.worldSize),gt=Ve.evaluatedScale;let vt=0;Je.elevation&&it.elevation&&(vt=it.elevation*Je.elevation.exaggeration()),Se.mat4.translate(lt,lt,[(it.anchor?it.anchor[0]:0)*(gt[0]-1),(it.anchor?it.anchor[1]:0)*(gt[1]-1),vt]),Se.mat4.scale(lt,lt,gt);const ht=Ie.queryGeometry,Rt=ht.isPointQuery()?ht.screenBounds:ht.screenGeometry,Yt=function(nr){const ar=Se.mat4.multiply([],lt,nr.matrix);Se.mat4.multiply(ar,Je.expandedFarZProjMatrix,ar);for(let gr=0;gr<nr.meshes.length;++gr){const jt=nr.meshes[gr];if(gr===nr.lightMeshIndex)continue;const Mr=bE(Rt,Je,ar,jt.aabb);Mr!=null&&(et=Math.min(Mr,et))}if(nr.children)for(const gr of nr.children)Yt(gr)};if(Yt(it),et===Number.MAX_VALUE)return;const Lt=new La(0,0);return IE(at.tileID.canonical,Lt,Ve.node.anchor[0],Ve.node.anchor[1]),{intersectionZ:et,position:Lt,feature:Ve.feature}}(I,A,g,f);if(!P)return;const{z:R,x:j,y:W}=T.tileID.canonical,{feature:K,intersectionZ:ne,position:ie}=P;let J={};K.id!==void 0&&(J=u.sourceCache.getFeatureState(M.sourceLayer,K.id));const le=new my({},R,j,W,K.id);le.tile=this.tileID.canonical,le.state=J,le.properties=K.properties,le.geometry={type:"Point",coordinates:[ie.lng,ie.lat]};let fe=this.serializedLayersCache.get(x);fe||(fe=M.serialize(),fe.id=x,this.serializedLayersCache.set(x,fe)),le.source=fe.source,le.sourceLayer=fe["source-layer"],le.layer=Nr({},fe);let ve=!1;for(const Ne of $){this.updateFeatureProperties(le,Ne);const{filter:$e}=Ne;if($e){if(K.properties=le.properties,$e.needGeometry){if(!$e.filter(new Ea(this.tileID.overscaledZ),K,this.tileID.canonical))continue}else if(!$e.filter(new Ea(this.tileID.overscaledZ),K))continue}ve=!0,Ne.targetId&&this.addFeatureVariant(le,Ne)}ve&&this.appendToResult(r,x,A,le,ne)}updateFeatureProperties(r,s,u){if(s.properties){const g={};for(const f in s.properties){const x=s.properties[f].evaluate({zoom:this.z},r._vectorTileFeature,r.state,r.tile,u);x!=null&&(g[f]=x)}r.properties=g}}addFeatureVariant(r,s,u){const g={target:s.target,namespace:s.namespace};s.properties&&(g.properties=r.properties),r.variants=r.variants||{},r.variants[s.targetId]=r.variants[s.targetId]||[],r.variants[s.targetId].push(g)}appendToResult(r,s,u,g,f){let x=r[s];x===void 0&&(x=r[s]=[]),x.push({featureIndex:u,feature:g,intersectionZ:f})}lookupSymbolFeatures(r,s,u,g,f){const x={};this.loadVTLayers();for(const C of r)this.loadMatchingFeature(x,{bucketIndex:s,sourceLayerIndex:u,featureIndex:C,layoutVertexArrayOffset:0},g,f);return x}loadFeature(r){const{featureIndex:s,sourceLayerIndex:u}=r;this.loadVTLayers();const g=this.sourceLayerCoder.decode(u),f=this.vtFeatures[g];if(f[s])return f[s];const x=this.vtLayers[g].feature(s);return f[s]=x,x}hasLayer(r){for(const s of this.bucketLayerIDs)for(const u of s)if(r===u)return!0;return!1}getId(r,s){let u=r.id;if(this.promoteId){const g=typeof this.promoteId=="string"?this.promoteId:this.promoteId[s];g!=null&&(u=r.properties[g]),typeof u=="boolean"&&(u=Number(u))}return u}}function bC(l,r,s,u,g){return qa(l,(f,x)=>{const C=r instanceof Wn?r.get(x):null;return C&&C.evaluate?C.evaluate(s,u,g):C})}function SO(l,r){return r-l}Tr(_C,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const wC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class h3{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,u]=new Uint8Array(r,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=u>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const f=wC[15&u];if(!f)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[C]=new Uint32Array(r,4,1);return new h3(C,x,f,r)}constructor(r,s=64,u=Float64Array,g){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=u,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const f=wC.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,C=r*this.IndexArrayType.BYTES_PER_ELEMENT,M=(8-C%8)%8;if(f<0)throw new Error(`Unexpected typed array class: ${u}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+C+M,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+C+M),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+C+M,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+f]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=r)}add(r,s){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=r,this.coords[this._pos++]=s,u}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return f3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,s,u,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:x,nodeSize:C}=this,M=[0,f.length-1,0],$=[];for(;M.length;){const T=M.pop()||0,A=M.pop()||0,I=M.pop()||0;if(A-I<=C){for(let W=I;W<=A;W++){const K=x[2*W],ne=x[2*W+1];K>=r&&K<=u&&ne>=s&&ne<=g&&$.push(f[W])}continue}const P=I+A>>1,R=x[2*P],j=x[2*P+1];R>=r&&R<=u&&j>=s&&j<=g&&$.push(f[P]),(T===0?r<=R:s<=j)&&(M.push(I),M.push(P-1),M.push(1-T)),(T===0?u>=R:g>=j)&&(M.push(P+1),M.push(A),M.push(1-T))}return $}within(r,s,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:f,nodeSize:x}=this,C=[0,g.length-1,0],M=[],$=u*u;for(;C.length;){const T=C.pop()||0,A=C.pop()||0,I=C.pop()||0;if(A-I<=x){for(let W=I;W<=A;W++)TC(f[2*W],f[2*W+1],r,s)<=$&&M.push(g[W]);continue}const P=I+A>>1,R=f[2*P],j=f[2*P+1];TC(R,j,r,s)<=$&&M.push(g[P]),(T===0?r-u<=R:s-u<=j)&&(C.push(I),C.push(P-1),C.push(1-T)),(T===0?r+u>=R:s+u>=j)&&(C.push(P+1),C.push(A),C.push(1-T))}return M}}function f3(l,r,s,u,g,f){if(g-u<=s)return;const x=u+g>>1;SC(l,r,x,u,g,f),f3(l,r,s,u,x-1,1-f),f3(l,r,s,x+1,g,1-f)}function SC(l,r,s,u,g,f){for(;g>u;){if(g-u>600){const $=g-u+1,T=s-u+1,A=Math.log($),I=.5*Math.exp(2*A/3),P=.5*Math.sqrt(A*I*($-I)/$)*(T-$/2<0?-1:1);SC(l,r,s,Math.max(u,Math.floor(s-T*I/$+P)),Math.min(g,Math.floor(s+($-T)*I/$+P)),f)}const x=r[2*s+f];let C=u,M=g;for(xv(l,r,u,s),r[2*g+f]>x&&xv(l,r,u,g);C<M;){for(xv(l,r,C,M),C++,M--;r[2*C+f]<x;)C++;for(;r[2*M+f]>x;)M--}r[2*u+f]===x?xv(l,r,u,M):(M++,xv(l,r,M,g)),M<=s&&(u=M+1),s<=M&&(g=M-1)}}function xv(l,r,s,u){p3(l,s,u),p3(r,2*s,2*u),p3(r,2*s+1,2*u+1)}function p3(l,r,s){const u=l[r];l[r]=l[s],l[s]=u}function TC(l,r,s,u){const g=l-s,f=r-u;return g*g+f*f}n.$=Gh,n.A=Ai,n.B=2,n.C=Ut,n.D=cy,n.E=Rc,n.F=aa,n.G=class extends Jb{},n.H=zu,n.I=a3,n.J=wd,n.K=_p,n.L=Vm,n.M=xi,n.N=Fm,n.O=fp,n.P=dt,n.Q=qd,n.R=Ul,n.S=nc,n.T=U2,n.U=Bd,n.V=Jb,n.W=Rs,n.X=Ri,n.Y=Fc,n.Z=Vs,n._=Mu,n.a=function(l){return Fe.API_CDN_URL_REGEX.test(l)},n.a$=my,n.a0=hp,n.a1=Hu,n.a2=function(l){const r=l.value;let s=[];if(!r)return s;const u=zu(r);return u!=="string"?(s=s.concat([new Jb(l.key,r,`string expected, "${u}" found`)]),s):(SE(r,!0)||(s=s.concat([new Jb(l.key,r,`invalid url "${r}"`)])),s)},n.a3=Tt,n.a4=il,n.a5=Mn,n.a6=tr,n.a7=class{constructor(l){this.specification=l}possiblyEvaluate(l,r){return la(l.expression.evaluate(r))}interpolate(l,r,s){return{x:Or(l.x,r.x,s),y:Or(l.y,r.y,s),z:Or(l.z,r.z,s),azimuthal:Or(l.azimuthal,r.azimuthal,s),polar:Or(l.polar,r.polar,s)}}},n.a8=Ea,n.a9=Wu,n.aA=ls,n.aB=class{constructor(l){this.entries={},this.scheduler=l}request(l,r,s,u){const g=this.entries[l]=this.entries[l]||{callbacks:[]};if(g.result){const[f,x]=g.result;return this.scheduler?this.scheduler.add(()=>{u(f,x)},r):u(f,x),()=>{}}return g.callbacks.push(u),g.cancel||(g.cancel=s((f,x)=>{g.result=[f,x];for(const C of g.callbacks)this.scheduler?this.scheduler.add(()=>{C(f,x)},r):C(f,x);setTimeout(()=>delete this.entries[l],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(f=>f!==u),g.callbacks.length||(g.cancel(),delete this.entries[l]))}}},n.aC=Lo,n.aD=function(l,r,s){const u=JSON.stringify(l.request);return l.data&&(this.deduped.entries[u]={result:[null,l.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom},g=>{const f=Wi(l.request,(x,C,M,$)=>{x?g(x):C&&g(null,{vectorTile:s?void 0:new iu.VectorTile(new wg(C)),rawData:C,cacheControl:M,expires:$})});return()=>{f.cancel(),g()}},r)},n.aE=function(l){ei++,ei>Qr&&(l.getActor().send("enforceCacheSizeLimit",Lr),ei=0)},n.aF=function(l){return l<=1?1:Math.pow(2,Math.floor(Math.log(l)/Math.LN2))},n.aG=rr,n.aH=uE,n.aI=gE,n.aJ=cE,n.aK=function(l,r){const s=document.createElement("video");s.muted=!0,s.onloadstart=function(){r(null,s)};for(let u=0;u<l.length;u++){const g=document.createElement("source");qf(l[u])||(s.crossOrigin="Anonymous"),g.src=l[u],s.appendChild(g)}return{cancel:()=>{}}},n.aL=Wb,n.aM=function(l){return fetch(l).then(r=>r.arrayBuffer()).then(r=>gC(r,0,l))},n.aN=xC,n.aO=class{constructor(l,r,s,u){this.id=l,this.position=r!=null?new La(r[0],r[1]):new La(0,0),this.orientation=s??[0,0,0],this.nodes=u,this.uploaded=!1,this.aabb=new jr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(l,r){if(Se.mat4.multiply(l.matrix,r,l.matrix),l.meshes)for(const s of l.meshes){const u=jr.applyTransformFast(s.aabb,l.matrix);this.aabb.encapsulate(u)}if(l.children)for(const s of l.children)this._applyTransformations(s,l.matrix)}computeBoundsAndApplyParent(){const l=Se.mat4.identity([]);for(const r of this.nodes)this._applyTransformations(r,l)}computeModelMatrix(l,r,s,u,g,f,x=!1){PE(this.matrix,this,l.transform,this.position,r,s,u,g,f,x)}upload(l){if(!this.uploaded){for(const r of this.nodes)K2(r,l);for(const r of this.nodes)Qb(r);this.uploaded=!0}}destroy(){for(const l of this.nodes)Z2(l)}},n.aP=on,n.aQ=rv,n.aR=qs,n.aS=Li,n.aT=cc,n.aU=Fi,n.aV=Sn,n.aW=Km,n.aX=Hb,n.aY=function(){rn.isLoading()||rn.isLoaded()||nl()!=="deferred"||en()},n.aZ=zs,n.a_=X,n.aa=m,n.ab=Se,n.ac=Sa,n.ad=Wn,n.ae=Qi,n.af=Or,n.ag=lr,n.ah=Ic,n.ai=mr,n.aj=Ra,n.ak=class{constructor(l){this.specification=l}possiblyEvaluate(l,r){return function([s,u]){const g=la([1,s,u]);return{x:g.x,y:g.y,z:g.z}}(l.expression.evaluate(r))}interpolate(l,r,s){return{x:Or(l.x,r.x,s),y:Or(l.y,r.y,s),z:Or(l.z,r.z,s)}}},n.al=function(l,r,s=0,u=!0){const g=new dt(s,s),f=l.sub(g),x=r.add(g),C=[f,new dt(x.x,f.y),x,new dt(f.x,x.y)];return u&&C.push(f.clone()),C},n.am=function(l,r){const s=[];for(let u=0;u<l.length;u++){const g=kr(u-1,-1,l.length-1),f=kr(u+1,-1,l.length-1),x=l[u],C=l[f],M=l[g].sub(x).unit(),$=C.sub(x).unit(),T=$.angleWithSep(M.x,M.y),A=M.add($).unit().mult(-1*r/Math.sin(T/2));s.push(x.add(A))}return s},n.an=ZT,n.ao=rt,n.ap=function(l,r,s=0){return Se.vec3.fromValues(((r.x-s)*l.scale-l.x)*lr,(r.y*l.scale-l.y)*lr,kl(r.z,r.y))},n.aq=pa,n.ar=Kp,n.as=function(l){let r=1/0,s=1/0,u=-1/0,g=-1/0;for(const f of l)r=Math.min(r,f.x),s=Math.min(s,f.y),u=Math.max(u,f.x),g=Math.max(g,f.y);return{min:new dt(r,s),max:new dt(u,g)}},n.at=ol,n.au=tt,n.av=S,n.aw=fr,n.ax=os,n.ay=function(l,r){const s={};for(let u=0;u<r.length;u++){const g=r[u];g in l&&(s[g]=l[g])}return s},n.az=sl,n.b=function(l){return Fe.API_FONTS_REGEX.test(l)},n.b$=Xb,n.b0=Xn,n.b1=J0,n.b2=ld,n.b3=Z,n.b4=ao,n.b5=Qh,n.b6=Hr,n.b7=An,n.b8=uf,n.b9=O2,n.bA=Ox,n.bB=z2,n.bC=HT,n.bD=Pe,n.bE=h3,n.bF=kr,n.bG=qn,n.bH=Xi,n.bI=function(l,r,s){l[4*r+0]=s[0],l[4*r+1]=s[1],l[4*r+2]=s[2],l[4*r+3]=s[3]},n.bJ=nh,n.bK=kn,n.bL=ah,n.bM=fn,n.bN=oo,n.bO=La,n.bP=eE,n.bQ=dr,n.bR=ia,n.bS=xE,n.bT=zt,n.bU=Cn,n.bV=function(l,r,s,u,g,f,x,C,M){if(M.name==="globe")return Cn(l,r,new zt(s,u,g),!1);const $=rv({z:s,x:u,y:g},M);return new jr([(f+$.x/$.scale)*r,r*($.y/$.scale),x],[(f+$.x2/$.scale)*r,r*($.y2/$.scale),C])},n.bW=function(l,r,s){let u=0;for(let g=0;g<2;++g)l[g]>0&&(u+=(l[g]-0)*(l[g]-0)),r[g]<0&&(u+=(0-r[g])*(0-r[g]));return u},n.bX=cs,n.bY=Xm,n.bZ=function(l){const r=Se.mat4.identity(new Float64Array(16));Se.mat4.multiply(r,l.pixelMatrix,l.globeMatrix);const s=[0,co,0],u=[0,uo,0];return Se.vec3.transformMat4(s,s,r),Se.vec3.transformMat4(u,u,r),[s[0]>0&&s[0]<=l.width&&s[1]>0&&s[1]<=l.height&&!us(l,new La(l.center.lat,90)),u[0]>0&&u[0]<=l.width&&u[1]>0&&u[1]<=l.height&&!us(l,new La(l.center.lat,-90))]},n.b_=function(l,r){const{scale:s}=l.tileTransform,u=s*lr/(l.tileSize*Math.pow(2,r.zoom-l.tileID.overscaledZ+l.tileID.canonical.z));return Se.mat2.scale(new Float32Array(4),r.inverseAdjustmentMatrix,[u,u])},n.ba=function(l,r){const s=Qi(r.zoom);if(s===0)return wa(l);const u=nn(l),g=Ga(u),f=ol(u.getWest())*r.worldSize,x=ol(u.getEast())*r.worldSize,C=ls(u.getNorth())*r.worldSize,M=ls(u.getSouth())*r.worldSize,$=[f,C,0],T=[x,C,0],A=[f,M,0],I=[x,M,0],P=Se.mat4.invert([],r.globeMatrix);return Se.vec3.transformMat4($,$,P),Se.vec3.transformMat4(T,T,P),Se.vec3.transformMat4(A,A,P),Se.vec3.transformMat4(I,I,P),g[0]=En(g[0],A,s),g[1]=En(g[1],I,s),g[2]=En(g[2],T,s),g[3]=En(g[3],$,s),jr.fromPoints(g)},n.bb=an,n.bc=qr,n.bd=En,n.be=Kd,n.bf=zr,n.bg=o3,n.bh=wg,n.bi=Wi,n.bj=function(l){const r=[];for(const s in l)r.push(l[s]);return r},n.bk=function(l,r){const s=[];for(const u in l)u in r||s.push(u);return s},n.bl=Dr,n.bm=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.bn=$t,n.bo=function(l,r){const{x:s,y:u}=l.point,g=fi(s,u,l.worldSize/l._pixelsPerMercatorPixel,0,0);return Se.mat4.multiply(g,g,zn(wa(r)))},n.bp=cl,n.bq=mo,n.br=Xp,n.bs=function(l,r,s,u,g){const f=5*r+2;l.float32[f+0]=s,l.float32[f+1]=u,l.float32[f+2]=g},n.bt=Gb,n.bu=kt,n.bv=xe,n.bw=Vi,n.bx=Nx,n.by=wE,n.bz=jx,n.c=Qe,n.c$=(l,r,s,u,g,f,x,C)=>{const M=l.transform,$=M.pitch<15?Sb(.07,.7,fr((14-M.zoom)/5,0,1)):.07,T=s.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:Eb(l,r,s,u),u_texsize:r.imageAtlasTexture?r.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:M.calculatePixelsToTileUnitsMatrix(r),u_device_pixel_ratio:g,u_width_scale:f,u_floor_width_scale:x,u_image:0,u_tile_units_to_pixels:Tb(r,M),u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:C,u_trim_fade_range:s.paint.get("line-trim-fade-range"),u_trim_color:s.paint.get("line-trim-color").toRenderColor(T?null:s.lut).toArray01(),u_emissive_strength:s.paint.get("line-emissive-strength"),u_zbias_factor:$,u_tile_to_meter:o(r.tileID.canonical,0)}},n.c0=yE,n.c1=function(l){const r=yE(l,!0);return Se.mat2.invert([],[r[0],r[1],r[4],r[5]])},n.c2=oa,n.c3=function(l){const{x:r,y:s}=l.point,{lng:u,lat:g}=l._center;return fi(r,s,l.worldSize,u,g)},n.c4=Pr,n.c5=yr,n.c6=sf,n.c7=function(l){const r=Math.round((l+45+360)%360/90)%4;return Fr[r]},n.c8=45,n.c9=od,n.cA=class extends Pl{constructor(l){super(l),this.current=id}set(l,r,s){if(this.fetchUniformLocation(l,r)){for(let u=0;u<9;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix3fv(this.location,!1,s);break}}}},n.cB=$a,n.cC=function(l,r,s){const u=Qi(s.zoom),g=l.style.map._antialias,f=r.options.extStandardDerivativesForceOff||l.terrain&&l.terrain.exaggeration()>0;return u===0&&!g&&!f},n.cD=function(l){const r=l.pixelsPerMeter,s=r/Xi(1,l.center.lat),u=Se.mat4.identity(new Float64Array(16));return Se.mat4.translate(u,u,[l.point.x,l.point.y,0]),Se.mat4.scale(u,u,[s,s,r]),Float32Array.from(u)},n.cE=nn,n.cF=function(l){const r=cs-5;l=fr(l,-80.051129,r)/r*90;const s=Math.pow(Math.abs(Math.sin(mr(l))),3);return Math.round(s*(lf.length-1))},n.cG=function(l,r,s,u){const g=r.getNorth(),f=r.getSouth(),x=r.getWest(),C=r.getEast(),M=1<<l.z,$=C-x,T=g-f,A=$/xc,I=-T/lf[s],P=[0,A,0,I,0,0,g,x,0];if(l.z>0){const R=180/u;Se.mat3.multiply(P,P,[R/$+1,0,0,0,R/T+1,0,-.5*R/A,.5*R/I,1])}return P[2]=M,P[5]=l.x,P[8]=l.y,P},n.cH=wa,n.cI=function(l,r,s){const u=Se.mat4.identity(new Float64Array(16)),g=(r/(1<<l)-.5)*Math.PI*2;return Se.mat4.rotateY(u,s.globeMatrix,g),Float32Array.from(u)},n.cJ=class{isDataAvailableAtPoint(l){const r=this._source();if(this.isUsingMockSource()||!r||l.y<0||l.y>1)return!1;const s=r.getSource().maxzoom,u=1<<s,g=Math.floor(l.x),f=Math.floor((l.x-g)*u),x=Math.floor(l.y*u),C=this.findDEMTileFor(new rr(s,g,s,f,x));return!(!C||!C.dem)}getAtPointOrZero(l,r=0){return this.getAtPoint(l,r)||0}getAtPoint(l,r,s=!0){if(this.isUsingMockSource())return null;r==null&&(r=null);const u=this._source();if(!u||l.y<0||l.y>1)return r;const g=u.getSource().maxzoom,f=1<<g,x=Math.floor(l.x),C=l.x-x,M=new rr(g,x,g,Math.floor(C*f),Math.floor(l.y*f)),$=this.findDEMTileFor(M);if(!$||!$.dem)return r;const T=$.dem,A=1<<$.tileID.canonical.z,I=(C*A-$.tileID.canonical.x)*T.dim,P=(l.y*A-$.tileID.canonical.y)*T.dim,R=Math.floor(I),j=Math.floor(P);return(s?this.exaggeration():1)*Or(Or(T.get(R,j),T.get(R,j+1),P-j),Or(T.get(R+1,j),T.get(R+1,j+1),P-j),I-R)}getAtTileOffset(l,r,s){const u=1<<l.canonical.z;return this.getAtPointOrZero(new m(l.wrap+(l.canonical.x+r/lr)/u,(l.canonical.y+s/lr)/u))}getAtTileOffsetFunc(l,r,s,u){return g=>{const f=this.getAtTileOffset(l,g.x,g.y),x=u.upVector(l.canonical,g.x,g.y),C=u.upVectorScale(l.canonical,r,s).metersToTile;return Se.vec3.scale(x,x,f*C),x}}getForTilePoints(l,r,s,u){if(this.isUsingMockSource())return!1;const g=ly.create(this,l,u);return!!g&&(r.forEach(f=>{f[2]=this.exaggeration()*g.getElevationAt(f[0],f[1],s)}),!0)}getMinMaxForTile(l){if(this.isUsingMockSource())return null;const r=this.findDEMTileFor(l);if(!r||!r.dem)return null;const s=r.dem.tree,u=r.tileID,g=1<<l.canonical.z-u.canonical.z;let f=l.canonical.x/g-u.canonical.x,x=l.canonical.y/g-u.canonical.y,C=0;for(let M=0;M<l.canonical.z-u.canonical.z&&!s.leaves[C];M++){f*=2,x*=2;const $=2*Math.floor(x)+Math.floor(f);C=s.childOffsets[C]+$,f%=1,x%=1}return{min:this.exaggeration()*s.minimums[C],max:this.exaggeration()*s.maximums[C]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(l,r,s){throw new Error("Pure virtual method called.")}pointCoordinate(l){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(l){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const l=this.visibleDemTiles;if(l.length===0)return null;let r=!1,s=Number.MAX_VALUE,u=Number.MIN_VALUE;for(const g of l){const f=this.getMinMaxForTile(g.tileID);f&&(s=Math.min(s,f.min),u=Math.max(u,f.max),r=!0)}return r?{min:s,max:u}:null}},n.cK=cf,n.cL=Fa,n.cM=function(l,r){return[Math.pow(l[0],2.2)*r,Math.pow(l[1],2.2)*r,Math.pow(l[2],2.2)*r]},n.cN=Ji,n.cO=Ce,n.cP=ye,n.cQ=256,n.cR=function(l,r){const s=[0,0,0],u=an(wa(r.canonical));return Se.vec3.transformMat4(s,s,u),Se.vec3.transformMat4(s,s,l),s},n.cS=l=>({u_camera_to_center_distance:new fn(l),u_extrude_scale:new Lp(l),u_device_pixel_ratio:new fn(l),u_matrix:new nh(l),u_inv_rot_matrix:new nh(l),u_merc_center:new kn(l),u_tile_id:new ah(l),u_zoom_transition:new fn(l),u_up_dir:new ah(l),u_emissive_strength:new fn(l)}),n.cT=l=>({u_matrix:new nh(l),u_pixels_to_tile_units:new Lp(l),u_device_pixel_ratio:new fn(l),u_width_scale:new fn(l),u_floor_width_scale:new fn(l),u_units_to_pixels:new kn(l),u_dash_image:new oo(l),u_gradient_image:new oo(l),u_image_height:new fn(l),u_texsize:new kn(l),u_tile_units_to_pixels:new fn(l),u_alpha_discard_threshold:new fn(l),u_trim_offset:new kn(l),u_trim_fade_range:new kn(l),u_trim_color:new nd(l),u_emissive_strength:new fn(l),u_zbias_factor:new fn(l),u_tile_to_meter:new fn(l)}),n.cU=l=>({u_matrix:new nh(l),u_texsize:new kn(l),u_pixels_to_tile_units:new Lp(l),u_device_pixel_ratio:new fn(l),u_width_scale:new fn(l),u_floor_width_scale:new fn(l),u_image:new oo(l),u_units_to_pixels:new kn(l),u_tile_units_to_pixels:new fn(l),u_alpha_discard_threshold:new fn(l),u_trim_offset:new kn(l),u_trim_fade_range:new kn(l),u_trim_color:new nd(l),u_emissive_strength:new fn(l),u_zbias_factor:new fn(l),u_tile_to_meter:new fn(l)}),n.cV=Zh,n.cW=Yx,n.cX=sh,n.cY=vc,n.cZ=(l,r,s,u,g,f)=>{const x=l.transform,C=x.projection.name==="globe";let M;if(f.paint.get("circle-pitch-alignment")==="map")if(C){const T=Ji(x.zoom,r.canonical)*x._pixelsPerMercatorPixel;M=Float32Array.from([T,0,0,T])}else M=x.calculatePixelsToTileUnitsMatrix(s);else M=new Float32Array([x.pixelsToGLUnits[0],0,0,x.pixelsToGLUnits[1]]);const $={u_camera_to_center_distance:l.transform.getCameraToCenterDistance(x.projection),u_matrix:l.translatePosMatrix(r.projMatrix,s,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Gt.devicePixelRatio,u_extrude_scale:M,u_inv_rot_matrix:No,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:f.paint.get("circle-emissive-strength")};if(C){$.u_inv_rot_matrix=u,$.u_merc_center=g,$.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],$.u_zoom_transition=Qi(x.zoom);const T=g[0]*lr,A=g[1]*lr;$.u_up_dir=x.projection.upVector(new zt(0,0,0),T,A)}return $},n.c_=mg,n.ca=nd,n.cb=function(l,r,s){const u=Math.sqrt(l*l+r*r+s*s),g=u>0?Math.acos(s/u)*Er:0;let f=l!==0||r!==0?Math.atan2(-r,-l)*Er+90:0;return f<0&&(f+=360),[u,f,g]},n.cc=o,n.cd=jr,n.ce=la,n.cf=function(l){return[Math.pow(l[0],1/2.2),Math.pow(l[1],1/2.2),Math.pow(l[2],1/2.2)]},n.cg=function(l,r){return l.readFields(v9,{icons:[]},r)},n.ch=function(l){return l({pluginStatus:zi,pluginURL:al}),Zc.on("pluginStateChange",l),l},n.ci=t1,n.cj=Jp,n.ck=lu,n.cl=vd,n.cm=Fd,n.cn=Ur,n.co=bd,n.cp=In,n.cq=function(l){const r=l.indexOf(zo);return r>=0?l.slice(0,r):l},n.cr=function(l){return l.indexOf(zo)>=0},n.cs=function(l){const r=l.indexOf(zo);return r>=0?l.slice(r+1):""},n.ct=function(l){const r=[],s=l.id;return s===void 0&&r.push({message:`layers.${s}: missing required property "id"`}),l.render===void 0&&r.push({message:`layers.${s}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&r.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),r},n.cu=function(l,r,s,u){return l.type==="custom"?new i9(l,r):new g9[l.type](l,r,s,u)},n.cv=Dn,n.cw=class extends my{constructor(l,r){super(l._vectorTileFeature,l._z,l._x,l._y,l.id),l.state&&(this.state={...l.state}),this.target=r.target,this.namespace=r.namespace,r.properties&&(this.properties=r.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=l.source,this.sourceLayer=l.sourceLayer,this.layer=l.layer)}toJSON(){const l=super.toJSON();return l.target=this.target,l.namespace=this.namespace,l}},n.cx=Zc,n.cy=yl,n.cz=Rp,n.d=function(l){return Fe.API_TILEJSON_REGEX.test(l)},n.d$=qa,n.d0=(l,r,s,u,g,f,x,C,M)=>{const $=l.transform,T=$.calculatePixelsToTileUnitsMatrix(r),A=s.paint.get("line-trim-color-use-theme").constantOr("default")==="none",I=$.pitch<15?Sb(.07,.7,fr((14-$.zoom)/5,0,1)):.07;return{u_matrix:Eb(l,r,s,u),u_pixels_to_tile_units:T,u_device_pixel_ratio:f,u_width_scale:x,u_floor_width_scale:C,u_units_to_pixels:[1/$.pixelsToGLUnits[0],1/$.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:g,u_texsize:gg(s)&&r.lineAtlasTexture?r.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Tb(r,l.transform),u_alpha_discard_threshold:0,u_trim_offset:M,u_trim_fade_range:s.paint.get("line-trim-fade-range"),u_trim_color:s.paint.get("line-trim-color").toRenderColor(A?null:s.lut).toArray01(),u_emissive_strength:s.paint.get("line-emissive-strength"),u_zbias_factor:I,u_tile_to_meter:o(r.tileID.canonical,0)}},n.d1=Zn,n.d2=Bp,n.d3=mb,n.d4=_r,n.d5=po,n.d6=fo,n.d7=450,n.d8=7,n.d9=n9,n.dA=ja,n.dB=a,n.dC=Al,n.dD=function([l,r,s]){const u=Math.hypot(l,r,s),g=Math.atan2(l,s),f=.5*Math.PI-Math.acos(-r/u);return new La(Pr(g),Pr(f))},n.dE=H2,n.dF=function(l){const r=l.navigator?l.navigator.userAgent:null;return!!function(s){if(js==null){const u=s.navigator?s.navigator.userAgent:null;js=!!s.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return js}(l)&&r&&(r.match("Version/15.4")||r.match("Version/15.5")||r.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},n.dG=function(l,r){Lr=l,Qr=r},n.dH=us,n.dI=ho,n.dJ=function(l){const r=[0,0,0],s=Se.mat4.identity(new Float64Array(16));return Se.mat4.multiply(s,l.pixelMatrix,l.globeMatrix),Se.vec3.transformMat4(r,r,s),new dt(r[0],r[1])},n.dK=function(l,r,s=!1){if(zi===Yu||zi===Hs||zi===xp)throw new Error("setRTLTextPlugin cannot be called multiple times.");al=Gt.resolveURL(l),zi=Yu,vp=r,Vd(),s||en()},n.dL=nl,n.dM=function(){t1().acquire(Y2)},n.dN=function(){const l=uv;l&&(l.isPreloaded()&&l.numActive()===1?(l.release(Y2),uv=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},n.dO=Dg,n.dP=function(l){const r=Ya();if(!r)return;const s=r.delete(Jr);l&&s.catch(l).then(()=>l())},n.dQ=cv,n.dR=cC,n.dS=function(l){l3=Gt.resolveURL(l),py||(py=new cy(t1(),new Rc)),py.broadcast("setDracoUrl",l3)},n.dT=uC,n.dU=function(l){fy=Gt.resolveURL(l),py||(py=new cy(t1(),new Rc)),py.broadcast("setMeshoptUrl",fy)},n.dV=Tr,n.dW=bc,n.dX=tn,n.dY=vC,n.dZ=_C,n.d_=pg,n.da=Oa,n.db=Pp,n.dc=256,n.dd=zn,n.de=dc,n.df=Ts,n.dg=Jh,n.dh=function(l,r,s,u,g){return fr((l-r)/(s-r)*(g-u)+u,u,g)},n.di=Oh,n.dj=p,n.dk=class{constructor(l,r,s,u){this.context=l,this.format=u,this.size=s,this.texture=l.gl.createTexture();const[g,f,x]=this.size,{gl:C}=l;C.bindTexture(C.TEXTURE_3D,this.texture),l.pixelStoreUnpackFlipY.set(!1),l.pixelStoreUnpack.set(1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),C.texImage3D(C.TEXTURE_3D,0,this.format,g,f,x,0,F2(this.format),V2(this.format),r.data)}bind(l,r){const{context:s}=this,{gl:u}=s;u.bindTexture(u.TEXTURE_3D,this.texture),l!==this.minFilter&&(u.texParameteri(u.TEXTURE_3D,u.TEXTURE_MAG_FILTER,l),u.texParameteri(u.TEXTURE_3D,u.TEXTURE_MIN_FILTER,l),this.minFilter=l),r!==this.wrapS&&(u.texParameteri(u.TEXTURE_3D,u.TEXTURE_WRAP_S,r),u.texParameteri(u.TEXTURE_3D,u.TEXTURE_WRAP_T,r),this.wrapS=r)}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}},n.dl=q2,n.dm=[1,1,1],n.dn=ly,n.dp=oy,n.dq=pc,n.dr=mc,n.ds=au,n.dt=Wm,n.du=Dp,n.dv=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new dt(1/0,1/0),max:new dt(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(l,r=!1){const s=ob(new dt(0,0),new dt(lr,lr),l),u=[];if(r&&!og(s,this._globalClipBounds))return u;for(const g of this._activeRegions){if(g.hiddenByOverlap||!og(s,g))continue;const f=Bx(g.min,g.max,l);u.push({min:f.min,max:f.max,sourceId:this._sourceIds[g.priority],footprint:g.footprint,footprintTileId:g.tileId,order:g.order,clipMask:g.clipMask,clipScope:g.clipScope})}return u}setSources(l){this._setSources(l.map(r=>({getSourceId:()=>r.cache.id,getFootprints:()=>{const s=[];for(const u of r.cache.getVisibleCoordinates()){const g=r.cache.getTile(u).buckets[r.layer];g&&g.updateFootprints(u.toUnwrapped(),s)}return s},getOrder:()=>r.order,getClipMask:()=>r.clipMask,getClipScope:()=>r.clipScope})))}_addSource(l){const r=l.getFootprints();if(r.length===0)return;const s=l.getOrder(),u=l.getClipMask(),g=l.getClipScope();for(const f of r){if(!f.footprint)continue;const x=ob(f.footprint.min,f.footprint.max,f.id);this._activeRegions.push({min:x.min,max:x.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:f.id,footprint:f.footprint,order:s,clipMask:u,clipScope:g})}this._sourceIds.push(l.getSourceId())}_computeReplacement(){this._activeRegions.sort((r,s)=>r.priority-s.priority||yf(r.min,s.min)||yf(r.max,s.max)||r.order-s.order||r.clipMask-s.clipMask||function(u,g){const f=(x,C)=>x+C;return u.length-g.length||u.reduce(f,"").localeCompare(g.reduce(f,""))}(r.clipScope,s.clipScope));let l=this._activeRegions.length!==this._prevRegions.length;if(!l){let r=0;for(;!l&&r!==this._activeRegions.length;){const s=this._activeRegions[r],u=this._prevRegions[r];l=s.priority!==u.priority||!On(s,u)||s.order!==u.order||s.clipMask!==u.clipMask||!$t(s.clipScope,u.clipScope),++r}}if(l){++this._updateTime;for(const s of this._activeRegions)s.order!==sg&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,s.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,s.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,s.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,s.max.y));const r=s=>{const u=this._activeRegions;if(s>=u.length)return s;const g=u[s].priority;for(;s<u.length&&u[s].priority===g;)++s;return s};if(this._sourceIds.length>1){let s=0,u=r(s);for(;s!==u;){let g=s;const f=s;for(;g!==u;){const x=this._activeRegions[g];x.hiddenByOverlap=!1;for(let C=0;C<f;C++){const M=this._activeRegions[C];if(!M.hiddenByOverlap&&x.order===sg&&og(x,M)&&(x.hiddenByOverlap=lg(x.footprint,x.tileId,M.footprint,M.tileId),x.hiddenByOverlap))break}++g}s=u,u=r(s)}}}}_setSources(l){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let r=l.length-1;r>=0;r--)this._addSource(l[r]);this._computeReplacement()}},n.dw=class{constructor(l){this._createGrid(l),this._createPoles(l)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const l of this._poleSegments)l.destroy();for(const l of this._gridSegments)l.withSkirts.destroy(),l.withoutSkirts.destroy()}_fillGridMeshWithLods(l,r){const s=new ao,u=new Fi,g=[],f=l+1+2,x=r[0]+1,C=r[0]+1+(1+r.length),M=($,T,A)=>{let I=$===f-1?$-2:$===0?$:$-1;return I+=A?24575:0,[I,T]};for(let $=0;$<f;++$)s.emplaceBack(...M($,0,!0));for(let $=0;$<x;++$)for(let T=0;T<f;++T)s.emplaceBack(...M(T,$,(T===0||T===f-1)&&!0));for(let $=0;$<r.length;++$){const T=r[$];for(let A=0;A<f;++A)s.emplaceBack(...M(A,T,!0))}for(let $=0;$<r.length;++$){const T=u.length,A=r[$]+1+2,I=new Fi;for(let j=0;j<A-1;j++){const W=j===A-2,K=W?f*(C-r.length+$-j):f;for(let ne=0;ne<f-1;ne++){const ie=j*f+ne;j===0||W||ne===0||ne===f-2?(I.emplaceBack(ie+1,ie,ie+K),I.emplaceBack(ie+K,ie+K+1,ie+1)):(u.emplaceBack(ie+1,ie,ie+K),u.emplaceBack(ie+K,ie+K+1,ie+1))}}const P=An.simpleSegment(0,T,s.length,u.length-T);for(let j=0;j<I.uint16.length;j+=3)u.emplaceBack(I.uint16[j],I.uint16[j+1],I.uint16[j+2]);const R=An.simpleSegment(0,T,s.length,u.length-T);g.push({withoutSkirts:P,withSkirts:R})}return{vertices:s,indices:u,segments:g}}_createGrid(l){const r=this._fillGridMeshWithLods(xc,lf);this._gridSegments=r.segments,this._gridBuffer=l.createVertexBuffer(r.vertices,Hr.members),this._gridIndexBuffer=l.createIndexBuffer(r.indices,!0)}_createPoles(l){const r=new Fi;for(let x=0;x<=xc;x++)r.emplaceBack(0,x+1,x+2);this._poleIndexBuffer=l.createIndexBuffer(r,!0);const s=new Ts,u=new Ts,g=new Ts,f=new Ts;this._poleSegments=[];for(let x=0,C=0;x<sf;x++){const M=360/(1<<x);s.emplaceBack(0,-os,0,.5,0),u.emplaceBack(0,-os,0,.5,1),g.emplaceBack(0,-os,0,.5,.5),f.emplaceBack(0,-os,0,.5,.5);for(let $=0;$<=xc;$++){let T=$/xc,A=0;const I=Or(0,M,T),[P,R,j]=ru(ds,li,I,os);s.emplaceBack(P,R,j,T,A),u.emplaceBack(P,R,j,T,1-A);const W=mr(I);T=.5+.5*Math.sin(W),A=.5+.5*Math.cos(W),g.emplaceBack(P,R,j,T,A),f.emplaceBack(P,R,j,T,1-A)}this._poleSegments.push(An.simpleSegment(C,0,66,64)),C+=66}this._poleNorthVertexBuffer=l.createVertexBuffer(s,Ar,!1),this._poleSouthVertexBuffer=l.createVertexBuffer(u,Ar,!1),this._texturedPoleNorthVertexBuffer=l.createVertexBuffer(g,Ar,!1),this._texturedPoleSouthVertexBuffer=l.createVertexBuffer(f,Ar,!1)}getGridBuffers(l,r){return[this._gridBuffer,this._gridIndexBuffer,r?this._gridSegments[l].withSkirts:this._gridSegments[l].withoutSkirts]}getPoleBuffers(l,r){return[r?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,r?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[l]]}},n.dx=sg,n.dy=Xr,n.dz=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},n.e=Fe,n.e0=Yo,n.e1=ln,n.e2=function(l,r,s,u,g,f,x,C,M,$,T=1,A,I){l.createArrays(),l.tilePixelRatio=lr/(512*l.overscaling),l.compareText={},l.iconsNeedLinear=!1;const P=l.layers[0].layout,R=l.layers[0]._unevaluatedLayout._values,j={};j.scaleFactor=T,j.textSizeScaleRange=P.get("text-size-scale-range"),j.iconSizeScaleRange=P.get("icon-size-scale-range");const[W,K]=j.textSizeScaleRange,[ne,ie]=j.iconSizeScaleRange;if(j.textScaleFactor=fr(j.scaleFactor,W,K),j.iconScaleFactor=fr(j.scaleFactor,ne,ie),l.textSizeData.kind==="composite"){const{minZoom:ve,maxZoom:Ne}=l.textSizeData;j.compositeTextSizes=[R["text-size"].possiblyEvaluate(new Ea(ve),C),R["text-size"].possiblyEvaluate(new Ea(Ne),C)]}if(l.iconSizeData.kind==="composite"){const{minZoom:ve,maxZoom:Ne}=l.iconSizeData;j.compositeIconSizes=[R["icon-size"].possiblyEvaluate(new Ea(ve),C),R["icon-size"].possiblyEvaluate(new Ea(Ne),C)]}j.layoutTextSize=R["text-size"].possiblyEvaluate(new Ea(M+1),C),j.layoutIconSize=R["icon-size"].possiblyEvaluate(new Ea(M+1),C),j.textMaxSize=R["text-size"].possiblyEvaluate(new Ea(18),C);const J=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point",le=P.get("text-size");let fe=!1;for(const ve of l.features)if(ve.icon&&ve.icon.nameSecondary){fe=!0;break}for(const ve of l.features){const Ne=P.get("text-font").evaluate(ve,{},C).join(","),$e=le.evaluate(ve,{},C)*j.textScaleFactor,Ie=j.layoutTextSize.evaluate(ve,{},C)*j.textScaleFactor,Je=(j.layoutIconSize.evaluate(ve,{},C),{horizontal:{},vertical:void 0}),Ve=ve.text;let et,it=[0,0];if(Ve){const vt=Ve.toString(),ht=P.get("text-letter-spacing").evaluate(ve,{},C)*Vi,Rt=P.get("text-line-height").evaluate(ve,{},C)*Vi,Yt=mp(vt)?ht:0,Lt=P.get("text-anchor").evaluate(ve,{},C),nr=P.get("text-variable-anchor");if(!nr){const sr=P.get("text-radial-offset").evaluate(ve,{},C);it=sr?HT(Lt,[sr*Vi,I2]):P.get("text-offset").evaluate(ve,{},C).map(Cr=>Cr*Vi)}let ar=J?"center":P.get("text-justify").evaluate(ve,{},C);const gr=P.get("symbol-placement")==="point",jt=gr?P.get("text-max-width").evaluate(ve,{},C)*Vi:1/0,Mr=sr=>{l.allowVerticalPlacement&&Tl(vt)&&(Je.vertical=ev(Ve,r,s,g,Ne,jt,Rt,Lt,sr,Yt,it,mo.vertical,!0,Ie,$e))};if(!J&&nr){const sr=ar==="auto"?nr.map(Vr=>z2(Vr)):[ar];let Cr=!1;for(let Vr=0;Vr<sr.length;Vr++){const sa=sr[Vr];if(!Je.horizontal[sa])if(Cr)Je.horizontal[sa]=Je.horizontal[0];else{const ha=ev(Ve,r,s,g,Ne,jt,Rt,"center",sa,Yt,it,mo.horizontal,!1,Ie,$e);ha&&(Je.horizontal[sa]=ha,Cr=ha.positionedLines.length===1)}}Mr("left")}else{if(ar==="auto"&&(ar=z2(Lt)),gr||P.get("text-writing-mode").indexOf("horizontal")>=0||!Tl(vt)){const sr=ev(Ve,r,s,g,Ne,jt,Rt,Lt,ar,Yt,it,mo.horizontal,!1,Ie,$e);sr&&(Je.horizontal[ar]=sr)}Mr(gr?"left":ar)}}let at=!1,lt=!1;if(ve.icon&&ve.icon.namePrimary){const vt=Zp(l.iconSizeData,R["icon-size"],C,l.zoom,ve)*j.iconScaleFactor*A,ht=ve.icon.getPrimary().scaleSelf(vt).serialize(),Rt=u[ht];Rt&&(et=wt(g[ht],ve.icon.nameSecondary?g[ve.icon.getSecondary().scaleSelf(vt).serialize()]:void 0,P.get("icon-offset").evaluate(ve,{},C),P.get("icon-anchor").evaluate(ve,{},C)),at=Rt.sdf,lt=Rt.usvg,l.sdfIcons===void 0?l.sdfIcons=Rt.sdf:l.sdfIcons!==Rt.sdf&&Wr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Rt.pixelRatio!==l.pixelRatio||P.get("icon-rotate").constantOr(1)!==0)&&(l.iconsNeedLinear=!0))}const gt=WT(Je.horizontal)||Je.vertical;l.iconsInText||(l.iconsInText=!!gt&&gt.iconsInText),(gt||et)&&Hj(l,ve,Je,et,u,j,Ie,0,it,at,lt,x,C,$,I,fe)}f&&l.generateCollisionDebugBuffers(M,l.collisionBoxArray,j.textScaleFactor)},n.e3=iu,n.e4=o1,n.e5=yt,n.e6=G0,n.e7=bg,n.e8=k,n.e9=function(l){let r=0;if(new Uint32Array(l,0,1)[0]!==hC){const s=new Uint32Array(l,0,7),[,,u,g,f,x]=s;r=s.byteLength+g+f+x+f,(u!==l.byteLength||r>=l.byteLength)&&Wr("Invalid b3dm header information.")}return gC(l,r)},n.ea=function(l,r){const s=xC(l);for(const u of s){for(const g of u.meshes)_O(g);u.lights&&(u.lightMeshIndex=u.meshes.length,u.meshes.push(bO(u.lights,r)))}return s},n.eb=e1,n.ec=zE,n.ed=rn,n.ee=function(l){Ja(),Ca!=null&&Ca.then(r=>{r.keys().then(s=>{for(let u=0;u<s.length-l;u++)r.delete(s[u])})})},n.f=function(l){return l.indexOf("mapbox:")===0},n.g=function(l,r){return yl(Nr(l,{method:"GET"}),r)},n.h=Ye,n.i=function(l){return Fe.API_STYLE_REGEX.test(l)&&!Qe(l)},n.j=function(l){return decodeURIComponent(atob(l).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join(""))},n.k=function(l){return btoa(encodeURIComponent(l).replace(/%([0-9A-F]{2})/g,(r,s)=>String.fromCharCode(+("0x"+s))))},n.l=Nr,n.m=_s,n.n=function(l,r){return yl(Nr(l,{type:"json"}),r)},n.o=Pu,n.p=function(l,r){return yl(Nr(l,{method:"POST"}),r)},n.q=Gt,n.r=es,n.s=function(l){try{const r=self[l];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}},n.t=Jt,n.u=function(){return function l(r){return r?(r^Math.random()*(16>>r/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,l)}()},n.v=function(l){return!!l&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(l)},n.w=Wr,n.x=function(){return J2||(J2=new Dg),J2},n.y=kc,n.z=eo}),_(["./shared"],function(n){function k(St){const ye=St?St.url.toString():void 0;return ye?performance.getEntriesByName(ye):[]}function N(St){if(typeof St=="number"||typeof St=="boolean"||typeof St=="string"||St==null)return JSON.stringify(St);if(Array.isArray(St)){let Ce="[";for(const Fe of St)Ce+=`${N(Fe)},`;return`${Ce}]`}let ye="{";for(const Ce of Object.keys(St).sort())ye+=`${Ce}:${N(St[Ce])},`;return`${ye}}`}function B(St){let ye="";for(const Ce of n.bm)ye+=`/${N(St[Ce])}`;return ye}class F{constructor(ye){this.keyCache={},this._layers={},this._layerConfigs={},ye&&this.replace(ye)}replace(ye,Ce){this._layerConfigs={},this._layers={},this.update(ye,[],Ce)}update(ye,Ce,Fe){this._options=Fe;for(const Qe of ye)this._layerConfigs[Qe.id]=Qe,(this._layers[Qe.id]=n.cu(Qe,this.scope,null,this._options)).compileFilter(Fe),this.keyCache[Qe.id]&&delete this.keyCache[Qe.id];for(const Qe of Ce)delete this.keyCache[Qe],delete this._layerConfigs[Qe],delete this._layers[Qe];this.familiesBySource={};const Ye=function(Qe,ct){const bt={};for(let pt=0;pt<Qe.length;pt++){const At=Qe[pt];let It=ct&&ct[At.id];!It&&(It=B(At),At.type==="line"&&At.paint)&&function Gt(cr){return typeof cr=="string"&&cr==="line-progress"||(Array.isArray(cr)?cr.some(Gt):!(!cr||typeof cr!="object")&&Object.values(cr).some(Gt))}(At.paint["line-width"])&&(It+=`/${N(At.paint["line-width"])}`),ct&&(ct[At.id]=It);let Jt=bt[It];Jt||(Jt=bt[It]=[]),Jt.push(At)}const ft=[];for(const pt in bt)ft.push(bt[pt]);return ft}(n.bj(this._layerConfigs),this.keyCache);for(const Qe of Ye){const ct=Qe.map(Jt=>this._layers[Jt.id]),bt=ct[0];if(bt.visibility==="none")continue;const ft=bt.source||"";let pt=this.familiesBySource[ft];pt||(pt=this.familiesBySource[ft]={});const At=bt.sourceLayer||"_geojsonTileLayer";let It=pt[At];It||(It=pt[At]=[]),It.push(ct)}}}const G=1*n.dX;class Q{constructor(ye){const Ce={},Fe=[];for(const bt in ye){const ft=ye[bt],pt=Ce[bt]={};for(const At in ft.glyphs){const It=ft.glyphs[+At];if(!It||It.bitmap.width===0||It.bitmap.height===0)continue;const Jt=It.metrics.localGlyph?G:1,Gt={x:0,y:0,w:It.bitmap.width+2*Jt,h:It.bitmap.height+2*Jt};Fe.push(Gt),pt[At]=Gt}}const{w:Ye,h:Qe}=n.C(Fe),ct=new n.dW({width:Ye||1,height:Qe||1});for(const bt in ye){const ft=ye[bt];for(const pt in ft.glyphs){const At=ft.glyphs[+pt];if(!At||At.bitmap.width===0||At.bitmap.height===0)continue;const It=Ce[bt][pt],Jt=At.metrics.localGlyph?G:1;n.dW.copy(At.bitmap,ct,{x:0,y:0},{x:It.x+Jt,y:It.y+Jt},At.bitmap)}}this.image=ct,this.positions=Ce}}n.dV(Q,"GlyphAtlas");class te{constructor(ye){this.tileID=new n.aG(ye.tileID.overscaledZ,ye.tileID.wrap,ye.tileID.canonical.z,ye.tileID.canonical.x,ye.tileID.canonical.y),this.tileZoom=ye.tileZoom,this.uid=ye.uid,this.zoom=ye.zoom,this.lut=ye.lut,this.canonical=ye.tileID.canonical,this.pixelRatio=ye.pixelRatio,this.tileSize=ye.tileSize,this.source=ye.source,this.scope=ye.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ye.showCollisionBoxes,this.collectResourceTiming=!!ye.request&&ye.request.collectResourceTiming,this.promoteId=ye.promoteId,this.isSymbolTile=ye.isSymbolTile,this.tileTransform=n.aQ(ye.tileID.canonical,ye.projection),this.projection=ye.projection,this.worldview=ye.worldview,this.localizableLayerIds=ye.localizableLayerIds,this.brightness=ye.brightness,this.extraShadowCaster=!!ye.extraShadowCaster,this.tessellationStep=ye.tessellationStep,this.scaleFactor=ye.scaleFactor}parse(ye,Ce,Fe,Ye,Qe){this.status="parsing",this.data=ye,this.collisionBoxArray=new n.aW;const ct=new n.dY(Object.keys(ye.layers).sort()),bt=new n.dZ(this.tileID,this.promoteId);bt.bucketLayerIDs=[];const ft={},pt=new n.d_(256,256),At={featureIndex:bt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:pt,availableImages:Fe,brightness:this.brightness,scaleFactor:this.scaleFactor},It=Ce.familiesBySource[this.source];for(const Qr in It){const Xa=ye.layers[Qr];if(!Xa)continue;let Ca=!1,ca=!1,Ya=!1;for(const _s of It[Qr])_s[0].type==="symbol"?Ca=!0:ca=!0,_s[0].is3D()&&_s[0].type!=="model"&&(Ya=!0);if(this.extraShadowCaster&&!Ya||this.isSymbolTile===!0&&!Ca||this.isSymbolTile===!1&&!ca)continue;Xa.version===1&&n.w(`Vector tile source "${this.source}" layer "${Qr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ja=ct.encode(Qr),ei=[];for(let _s=0,oi=0;_s<Xa.length;_s++){const hi=Xa.feature(_s),As=bt.getId(hi,Qr);if(this.localizableLayerIds&&this.localizableLayerIds.has(Qr)){const So=hi.properties?hi.properties.worldview:null;if(this.worldview&&typeof So=="string")if(So==="all")hi.properties.$localized=!0;else{if(!So.split(",").includes(this.worldview))continue;hi.properties.$localized=!0,hi.properties.worldview=this.worldview}}ei.push({feature:hi,id:As,index:oi,sourceLayerIndex:Ja}),oi++}for(const _s of It[Qr]){const oi=_s[0];(!this.extraShadowCaster||oi.is3D()&&oi.type!=="model")&&(this.isSymbolTile!==void 0&&oi.type==="symbol"!==this.isSymbolTile||oi.minzoom&&this.zoom<Math.floor(oi.minzoom)||oi.maxzoom&&this.zoom>=oi.maxzoom||oi.visibility!=="none"&&(Y(_s,this.zoom,At.brightness,Fe),(ft[oi.id]=oi.createBucket({index:bt.bucketLayerIDs.length,layers:_s,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ja,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(ei,At,this.tileID.canonical,this.tileTransform),bt.bucketLayerIDs.push(_s.map(hi=>n.aC(hi.id,hi.scope)))))}}let Jt,Gt,cr,Ur;pt.trim();const Jr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Lr=()=>{if(Jt)return this.status="done",Qe(Jt);if(this.extraShadowCaster)this.status="done",Qe(null,{buckets:n.bj(ft).filter(Qr=>!Qr.isEmpty()),featureIndex:bt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:At.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Gt&&cr&&Ur){const Qr=new Q(Gt),Xa=new n.e1(cr,Ur,this.lut);for(const Ca in ft){const ca=ft[Ca];ca instanceof n.aX?(Y(ca.layers,this.zoom,At.brightness,Fe),n.e2(ca,Gt,Qr.positions,cr,Xa.iconPositions,this.showCollisionBoxes,Fe,this.tileID.canonical,this.tileZoom,this.projection,this.scaleFactor,this.pixelRatio,this.brightness)):ca.hasPattern&&(ca instanceof n.b1||ca instanceof n.b2||ca instanceof n.d5)&&(Y(ca.layers,this.zoom,At.brightness,Fe),ca.addFeatures(At,this.tileID.canonical,Xa.patternPositions,Fe,this.tileTransform,this.brightness))}this.status="done",Qe(null,{buckets:n.bj(ft).filter(Ca=>!Ca.isEmpty()),featureIndex:bt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Qr.image,lineAtlas:pt,imageAtlas:Xa,brightness:At.brightness})}};if(!this.extraShadowCaster){const Qr=n.d$(At.glyphDependencies,ca=>Object.keys(ca).map(Number));Object.keys(Qr).length?Ye.send("getGlyphs",{uid:this.uid,stacks:Qr,scope:this.scope},(ca,Ya)=>{Jt||(Jt=ca,Gt=Ya,Lr())},void 0,!1,Jr):Gt={};const Xa=Object.keys(At.iconDependencies);Xa.length?Ye.send("getImages",{icons:Xa,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(ca,Ya)=>{if(Jt)return;Jt=ca;const Ja={};Object.values(Ya).some(ei=>ei.usvg)?this.rasterize(Ye,Ja,Ya,At.iconDependencies,()=>{cr=Ja,Lr()}):(this.fillImageMap(Ja,At.iconDependencies,Ya),cr=Ja,Lr())},void 0,!1,Jr):cr={};const Ca=Object.keys(At.patternDependencies);Ca.length?Ye.send("getImages",{icons:Ca,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(ca,Ya)=>{if(!Jt){Jt=ca;const Ja={};Object.values(Ya).some(ei=>ei.usvg)?this.rasterize(Ye,Ja,Ya,At.patternDependencies,()=>{Ur=Ja,Lr()}):(this.fillImageMap(Ja,At.patternDependencies,Ya),Ur=Ja,Lr())}},void 0,!1,Jr):Ur={}}Lr()}fillImageMap(ye,Ce,Fe){for(const Ye in Fe){const Qe=Ce[Ye]||[];for(const ct of Qe)Fe[ct.id].usvg||(ye[ct.serialize()]=Fe[ct.id])}}getImageTaskQueue(ye,Ce,Fe){const Ye={};for(const Qe in Ce){const ct=Fe[Qe]||[];for(const bt of ct){const ft=bt.serialize();Ce[bt.id].usvg?Ye[ft]||(Ye[ft]=bt):ye[ft]=Ce[bt.id]}}return Ye}rasterize(ye,Ce,Fe,Ye,Qe){const ct=this.getImageTaskQueue(Ce,Fe,Ye);this.rasterizeTask=ye.send("rasterizeImages",{scope:this.scope,imageTasks:ct},(bt,ft)=>{if(!bt)for(const pt in ft){const{id:At}=n.e0.deserializeFromString(pt);Ce[pt]=Object.assign({},Fe[At],{data:ft[pt]})}Qe()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function Y(St,ye,Ce,Fe){const Ye=new n.a8(ye,{brightness:Ce});for(const Qe of St)Qe.recalculate(Ye,Fe)}class oe extends n.E{constructor(ye,Ce,Fe,Ye,Qe,ct){super(),this.actor=ye,this.layerIndex=Ce,this.availableImages=Fe,this.loadVectorData=Qe||n.aD,this.loading={},this.loaded={},this.deduped=new n.aB(ye.scheduler),this.isSpriteLoaded=Ye,this.scheduler=ye.scheduler,this.brightness=ct}loadTile(ye,Ce){const Fe=ye.uid,Ye=ye&&ye.request,Qe=Ye&&Ye.collectResourceTiming,ct=this.loading[Fe]=new te(ye);ct.abort=this.loadVectorData(ye,(bt,ft)=>{const pt=!this.loading[Fe];if(delete this.loading[Fe],ct.cancelRasterize(),pt||bt||!ft)return ct.status="done",pt||(this.loaded[Fe]=ct),Ce(bt);const At=ft.rawData,It={};ft.expires&&(It.expires=ft.expires),ft.cacheControl&&(It.cacheControl=ft.cacheControl),ct.vectorTile=ft.vectorTile||new n.e3.VectorTile(new n.bh(At));const Jt=()=>{ct.parse(ct.vectorTile,this.layerIndex,this.availableImages,this.actor,(Gt,cr)=>{if(Gt||!cr)return Ce(Gt);const Ur={};if(Qe){const Jr=k(Ye);Jr.length>0&&(Ur.resourceTiming=JSON.parse(JSON.stringify(Jr)))}Ce(null,n.l({rawTileData:At.slice(0)},cr,It,Ur))})};this.isSpriteLoaded?Jt():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Jt,{type:"parseTile",isSymbolTile:ye.isSymbolTile,zoom:ye.tileZoom}):Jt()}),this.loaded=this.loaded||{},this.loaded[Fe]=ct})}reloadTile(ye,Ce){const Fe=this.loaded,Ye=ye.uid;if(Fe&&Fe[Ye]){const Qe=Fe[Ye];Qe.scaleFactor=ye.scaleFactor,Qe.showCollisionBoxes=ye.showCollisionBoxes,Qe.projection=ye.projection,Qe.brightness=ye.brightness,Qe.tileTransform=n.aQ(ye.tileID.canonical,ye.projection),Qe.extraShadowCaster=ye.extraShadowCaster,Qe.lut=ye.lut;const ct=(bt,ft)=>{const pt=Qe.reloadCallback;pt&&(delete Qe.reloadCallback,Qe.parse(Qe.vectorTile,this.layerIndex,this.availableImages,this.actor,pt)),Ce(bt,ft)};Qe.status==="parsing"?Qe.reloadCallback=ct:Qe.status==="done"&&(Qe.vectorTile?Qe.parse(Qe.vectorTile,this.layerIndex,this.availableImages,this.actor,ct):ct())}else Ce(null,void 0)}abortTile(ye,Ce){const Fe=ye.uid,Ye=this.loading[Fe];Ye&&(Ye.abort&&Ye.abort(),delete this.loading[Fe]),Ce()}removeTile(ye,Ce){const Fe=this.loaded,Ye=ye.uid;Fe&&Fe[Ye]&&delete Fe[Ye],Ce()}}class de{loadTile(ye,Ce){const{uid:Fe,encoding:Ye,rawImageData:Qe,padding:ct}=ye,bt=ImageBitmap&&Qe instanceof ImageBitmap?this.getImageData(Qe,ct):Qe;Ce(null,new n.e4(Fe,bt,Ye,ct<1))}getImageData(ye,Ce){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ye.width,ye.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ye.width,this.offscreenCanvas.height=ye.height,this.offscreenCanvasContext.drawImage(ye,0,0,ye.width,ye.height);const Fe=this.offscreenCanvasContext.getImageData(-Ce,-Ce,ye.width+2*Ce,ye.height+2*Ce);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Fe}}n.bg.setPbf(n.bh);class ge{decodeRasterArray({task:ye,buffer:Ce},Fe){n.bg.performDecoding(Ce,ye).then(Ye=>{Fe(null,Ye)},Ye=>{Fe(Ye)})}}const be=n.e3.VectorTileFeature.prototype.toGeoJSON;class pe{constructor(ye){this._feature=ye,this.extent=n.ag,this.type=ye.type,this.properties=ye.tags,"id"in ye&&!isNaN(ye.id)&&(this.id=parseInt(ye.id,10))}loadGeometry(){if(this._feature.type===1){const ye=[];for(const Ce of this._feature.geometry)ye.push([new n.P(Ce[0],Ce[1])]);return ye}{const ye=[];for(const Ce of this._feature.geometry){const Fe=[];for(const Ye of Ce)Fe.push(new n.P(Ye[0],Ye[1]));ye.push(Fe)}return ye}}toGeoJSON(ye,Ce,Fe){return be.call(this,ye,Ce,Fe)}}class we{constructor(ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.ag,this.length=ye.length,this._features=ye}feature(ye){return new pe(this._features[ye])}}const ke=64/4096,Ae=128;class re{constructor(){this.features=new Map}clear(){this.features.clear()}load(ye=[],Ce){for(const Fe of ye){const Ye=Fe.id;if(Ye==null)continue;let Qe=this.features.get(Ye);Qe&&this.updateCache(Qe,Ce),Fe.geometry?(Qe=se(Fe),this.updateCache(Qe,Ce),this.features.set(Ye,Qe)):this.features.delete(Ye),this.updateCache(Qe,Ce)}}updateCache(ye,Ce){for(const{canonical:Fe,uid:Ye}of Object.values(Ce)){const{z:Qe,x:ct,y:bt}=Fe;Te(ye,Math.pow(2,Qe),ct,bt)&&delete Ce[Ye]}}getTile(ye,Ce,Fe){const Ye=Math.pow(2,ye),Qe=[];for(const ct of this.features.values())Te(ct,Ye,Ce,Fe)&&Qe.push(je(ct,Ye,Ce,Fe));return{features:Qe}}getFeatures(){return[...this.features.values()]}}function Te({minX:St,minY:ye,maxX:Ce,maxY:Fe},Ye,Qe,ct){return St<(Qe+1+ke)/Ye&&ye<(ct+1+ke)/Ye&&Ce>(Qe-ke)/Ye&&Fe>(ct-ke)/Ye}function se(St){const{id:ye,geometry:Ce,properties:Fe}=St;if(!Ce)return;if(Ce.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Ye,coordinates:Qe}=Ce,ct={id:ye,type:1,geometry:[],tags:Fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},bt=ct.geometry;if(Ye==="Point")ue(Qe,bt,ct);else if(Ye==="MultiPoint")for(const ft of Qe)ue(ft,bt,ct);else if(Ye==="LineString")ct.type=2,De(Qe,bt,ct);else if(Ye==="MultiLineString")ct.type=2,ce(Qe,bt,ct);else if(Ye==="Polygon")ct.type=3,ce(Qe,bt,ct,!0);else{if(Ye!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");ct.type=3;for(const ft of Qe)ce(ft,bt,ct,!0)}return ct}function ue([St,ye],Ce,Fe){const Ye=n.at(St);let Qe=n.aA(ye);Qe=Qe<0?0:Qe>1?1:Qe,Ce.push(Ye,Qe),Fe.minX=Math.min(Fe.minX,Ye),Fe.minY=Math.min(Fe.minY,Qe),Fe.maxX=Math.max(Fe.maxX,Ye),Fe.maxY=Math.max(Fe.maxY,Qe)}function De(St,ye,Ce,Fe=!1,Ye=!1){const Qe=[];for(const ct of St)ue(ct,Qe,Ce);ye.push(Qe),Fe&&function(ct,bt){let ft=0;for(let pt=0,At=ct.length,It=At-2;pt<At;It=pt,pt+=2)ft+=(ct[pt]-ct[It])*(ct[pt+1]+ct[It+1]);if(ft>0===bt)for(let pt=0,At=ct.length;pt<At/2;pt+=2){const It=ct[pt],Jt=ct[pt+1];ct[pt]=ct[At-2-pt],ct[pt+1]=ct[At-1-pt],ct[At-2-pt]=It,ct[At-1-pt]=Jt}}(Qe,Ye)}function ce(St,ye,Ce,Fe=!1){for(let Ye=0;Ye<St.length;Ye++)De(St[Ye],ye,Ce,Fe,Ye===0)}function je(St,ye,Ce,Fe){const{id:Ye,type:Qe,geometry:ct,tags:bt}=St,ft=[];if(Qe===1)(function(pt,At,It,Jt,Gt){for(let cr=0;cr<pt.length;cr+=2){const Ur=Math.round(n.ag*(pt[cr+0]*At-It)),Jr=Math.round(n.ag*(pt[cr+1]*At-Jt));Gt.push([Ur,Jr])}})(ct,ye,Ce,Fe,ft);else for(const pt of ct)Le(pt,ye,Ce,Fe,ft);return{id:Ye,type:Qe,geometry:ft,tags:bt}}function Le(St,ye,Ce,Fe,Ye){const ct=n.ag+Ae;let bt;for(let ft=0;ft<St.length-2;ft+=2){let pt=Math.round(n.ag*(St[ft+0]*ye-Ce)),At=Math.round(n.ag*(St[ft+1]*ye-Fe)),It=Math.round(n.ag*(St[ft+2]*ye-Ce)),Jt=Math.round(n.ag*(St[ft+3]*ye-Fe));const Gt=It-pt,cr=Jt-At;pt<-128&&It<-128||(pt<-128?(At+=Math.round(cr*((-128-pt)/Gt)),pt=-128):It<-128&&(Jt=At+Math.round(cr*((-128-pt)/Gt)),It=-128),At<-128&&Jt<-128||(At<-128?(pt+=Math.round(Gt*((-128-At)/cr)),At=-128):Jt<-128&&(It=pt+Math.round(Gt*((-128-At)/cr)),Jt=-128),pt>=ct&&It>=ct||(pt>=ct?(At+=Math.round(cr*((ct-pt)/Gt)),pt=ct):It>=ct&&(Jt=At+Math.round(cr*((ct-pt)/Gt)),It=ct),At>=ct&&Jt>=ct||(At>=ct?(pt+=Math.round(Gt*((ct-At)/cr)),At=ct):Jt>=ct&&(It=pt+Math.round(Gt*((ct-At)/cr)),Jt=ct),bt&&pt===bt[bt.length-1][0]&&At===bt[bt.length-1][1]||(bt=[[pt,At]],Ye.push(bt)),bt.push([It,Jt])))))}}var Re,Ge,ze,ot={exports:{}},Ee=function(){if(ze)return ot.exports;ze=1;var St=n.e7(),ye=function(){if(Ge)return Re;Ge=1;var At=n.e5(),It=n.e6().VectorTileFeature;function Jt(cr,Ur){this.options=Ur||{},this.features=cr,this.length=cr.length}function Gt(cr,Ur){this.id=typeof cr.id=="number"?cr.id:void 0,this.type=cr.type,this.rawGeometry=cr.type===1?[cr.geometry]:cr.geometry,this.properties=cr.tags,this.extent=Ur||4096}return Re=Jt,Jt.prototype.feature=function(cr){return new Gt(this.features[cr],this.options.extent)},Gt.prototype.loadGeometry=function(){var cr=this.rawGeometry;this.geometry=[];for(var Ur=0;Ur<cr.length;Ur++){for(var Jr=cr[Ur],Lr=[],Qr=0;Qr<Jr.length;Qr++)Lr.push(new At(Jr[Qr][0],Jr[Qr][1]));this.geometry.push(Lr)}return this.geometry},Gt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var cr=this.geometry,Ur=1/0,Jr=-1/0,Lr=1/0,Qr=-1/0,Xa=0;Xa<cr.length;Xa++)for(var Ca=cr[Xa],ca=0;ca<Ca.length;ca++){var Ya=Ca[ca];Ur=Math.min(Ur,Ya.x),Jr=Math.max(Jr,Ya.x),Lr=Math.min(Lr,Ya.y),Qr=Math.max(Qr,Ya.y)}return[Ur,Lr,Jr,Qr]},Gt.prototype.toGeoJSON=It.prototype.toGeoJSON,Re}();function Ce(At){var It=new St;return function(Jt,Gt){for(var cr in Jt.layers)Gt.writeMessage(3,Fe,Jt.layers[cr])}(At,It),It.finish()}function Fe(At,It){var Jt;It.writeVarintField(15,At.version||1),It.writeStringField(1,At.name||""),It.writeVarintField(5,At.extent||4096);var Gt={keys:[],values:[],keycache:{},valuecache:{}};for(Jt=0;Jt<At.length;Jt++)Gt.feature=At.feature(Jt),It.writeMessage(2,Ye,Gt);var cr=Gt.keys;for(Jt=0;Jt<cr.length;Jt++)It.writeStringField(3,cr[Jt]);var Ur=Gt.values;for(Jt=0;Jt<Ur.length;Jt++)It.writeMessage(4,pt,Ur[Jt])}function Ye(At,It){var Jt=At.feature;Jt.id!==void 0&&It.writeVarintField(1,Jt.id),It.writeMessage(2,Qe,At),It.writeVarintField(3,Jt.type),It.writeMessage(4,ft,Jt)}function Qe(At,It){var Jt=At.feature,Gt=At.keys,cr=At.values,Ur=At.keycache,Jr=At.valuecache;for(var Lr in Jt.properties){var Qr=Jt.properties[Lr],Xa=Ur[Lr];if(Qr!==null){Xa===void 0&&(Gt.push(Lr),Ur[Lr]=Xa=Gt.length-1),It.writeVarint(Xa);var Ca=typeof Qr;Ca!=="string"&&Ca!=="boolean"&&Ca!=="number"&&(Qr=JSON.stringify(Qr));var ca=Ca+":"+Qr,Ya=Jr[ca];Ya===void 0&&(cr.push(Qr),Jr[ca]=Ya=cr.length-1),It.writeVarint(Ya)}}}function ct(At,It){return(It<<3)+(7&At)}function bt(At){return At<<1^At>>31}function ft(At,It){for(var Jt=At.loadGeometry(),Gt=At.type,cr=0,Ur=0,Jr=Jt.length,Lr=0;Lr<Jr;Lr++){var Qr=Jt[Lr],Xa=1;Gt===1&&(Xa=Qr.length),It.writeVarint(ct(1,Xa));for(var Ca=Gt===3?Qr.length-1:Qr.length,ca=0;ca<Ca;ca++){ca===1&&Gt!==1&&It.writeVarint(ct(2,Ca-1));var Ya=Qr[ca].x-cr,Ja=Qr[ca].y-Ur;It.writeVarint(bt(Ya)),It.writeVarint(bt(Ja)),cr+=Ya,Ur+=Ja}Gt===3&&It.writeVarint(ct(7,1))}}function pt(At,It){var Jt=typeof At;Jt==="string"?It.writeStringField(1,At):Jt==="boolean"?It.writeBooleanField(7,At):Jt==="number"&&(At%1!=0?It.writeDoubleField(3,At):At<0?It.writeSVarintField(6,At):It.writeVarintField(5,At))}return ot.exports=Ce,ot.exports.fromVectorTileJs=Ce,ot.exports.fromGeojsonVt=function(At,It){It=It||{};var Jt={};for(var Gt in At)Jt[Gt]=new ye(At[Gt].features,It),Jt[Gt].name=Gt,Jt[Gt].version=It.version,Jt[Gt].extent=It.extent;return Ce({layers:Jt})},ot.exports.GeoJSONWrapper=ye,ot.exports}(),Ke=n.e8(Ee);const nt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:St=>St},Xe=Math.fround||(ut=new Float32Array(1),St=>(ut[0]=+St,ut[0]));var ut;const Pt=3,Ct=5,Zt=6;class Dt{constructor(ye){this.options=Object.assign(Object.create(nt),ye),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ye){const{log:Ce,minZoom:Fe,maxZoom:Ye}=this.options;Ce&&console.time("total time");const Qe=`prepare ${ye.length} points`;Ce&&console.time(Qe),this.points=ye;const ct=[];for(let ft=0;ft<ye.length;ft++){const pt=ye[ft];if(!pt.geometry)continue;const[At,It]=pt.geometry.coordinates,Jt=Xe(ur(At)),Gt=Xe(Sr(It));ct.push(Jt,Gt,1/0,ft,-1,1),this.options.reduce&&ct.push(0)}let bt=this.trees[Ye+1]=this._createTree(ct);Ce&&console.timeEnd(Qe);for(let ft=Ye;ft>=Fe;ft--){const pt=+Date.now();bt=this.trees[ft]=this._createTree(this._cluster(bt,ft)),Ce&&console.log("z%d: %d clusters in %dms",ft,bt.numItems,+Date.now()-pt)}return Ce&&console.timeEnd("total time"),this}getClusters(ye,Ce){let Fe=((ye[0]+180)%360+360)%360-180;const Ye=Math.max(-90,Math.min(90,ye[1]));let Qe=ye[2]===180?180:((ye[2]+180)%360+360)%360-180;const ct=Math.max(-90,Math.min(90,ye[3]));if(ye[2]-ye[0]>=360)Fe=-180,Qe=180;else if(Fe>Qe){const It=this.getClusters([Fe,Ye,180,ct],Ce),Jt=this.getClusters([-180,Ye,Qe,ct],Ce);return It.concat(Jt)}const bt=this.trees[this._limitZoom(Ce)],ft=bt.range(ur(Fe),Sr(ct),ur(Qe),Sr(Ye)),pt=bt.data,At=[];for(const It of ft){const Jt=this.stride*It;At.push(pt[Jt+Ct]>1?er(pt,Jt,this.clusterProps):this.points[pt[Jt+Pt]])}return At}getChildren(ye){const Ce=this._getOriginId(ye),Fe=this._getOriginZoom(ye),Ye="No cluster with the specified id.",Qe=this.trees[Fe];if(!Qe)throw new Error(Ye);const ct=Qe.data;if(Ce*this.stride>=ct.length)throw new Error(Ye);const bt=this.options.radius/(this.options.extent*Math.pow(2,Fe-1)),ft=Qe.within(ct[Ce*this.stride],ct[Ce*this.stride+1],bt),pt=[];for(const At of ft){const It=At*this.stride;ct[It+4]===ye&&pt.push(ct[It+Ct]>1?er(ct,It,this.clusterProps):this.points[ct[It+Pt]])}if(pt.length===0)throw new Error(Ye);return pt}getLeaves(ye,Ce,Fe){const Ye=[];return this._appendLeaves(Ye,ye,Ce=Ce||10,Fe=Fe||0,0),Ye}getTile(ye,Ce,Fe){const Ye=this.trees[this._limitZoom(ye)],Qe=Math.pow(2,ye),{extent:ct,radius:bt}=this.options,ft=bt/ct,pt=(Fe-ft)/Qe,At=(Fe+1+ft)/Qe,It={features:[]};return this._addTileFeatures(Ye.range((Ce-ft)/Qe,pt,(Ce+1+ft)/Qe,At),Ye.data,Ce,Fe,Qe,It),Ce===0&&this._addTileFeatures(Ye.range(1-ft/Qe,pt,1,At),Ye.data,Qe,Fe,Qe,It),Ce===Qe-1&&this._addTileFeatures(Ye.range(0,pt,ft/Qe,At),Ye.data,-1,Fe,Qe,It),It.features.length?It:null}getClusterExpansionZoom(ye){let Ce=this._getOriginZoom(ye)-1;for(;Ce<=this.options.maxZoom;){const Fe=this.getChildren(ye);if(Ce++,Fe.length!==1)break;ye=Fe[0].properties.cluster_id}return Ce}_appendLeaves(ye,Ce,Fe,Ye,Qe){const ct=this.getChildren(Ce);for(const bt of ct){const ft=bt.properties;if(ft&&ft.cluster?Qe+ft.point_count<=Ye?Qe+=ft.point_count:Qe=this._appendLeaves(ye,ft.cluster_id,Fe,Ye,Qe):Qe<Ye?Qe++:ye.push(bt),ye.length===Fe)break}return Qe}_createTree(ye){const Ce=new n.bE(ye.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Fe=0;Fe<ye.length;Fe+=this.stride)Ce.add(ye[Fe],ye[Fe+1]);return Ce.finish(),Ce.data=ye,Ce}_addTileFeatures(ye,Ce,Fe,Ye,Qe,ct){for(const bt of ye){const ft=bt*this.stride,pt=Ce[ft+Ct]>1;let At,It,Jt;if(pt)At=Se(Ce,ft,this.clusterProps),It=Ce[ft],Jt=Ce[ft+1];else{const Ur=this.points[Ce[ft+Pt]];At=Ur.properties;const[Jr,Lr]=Ur.geometry.coordinates;It=ur(Jr),Jt=Sr(Lr)}const Gt={type:1,geometry:[[Math.round(this.options.extent*(It*Qe-Fe)),Math.round(this.options.extent*(Jt*Qe-Ye))]],tags:At};let cr;cr=pt||this.options.generateId?Ce[ft+Pt]:this.points[Ce[ft+Pt]].id,cr!==void 0&&(Gt.id=cr),ct.features.push(Gt)}}_limitZoom(ye){return Math.max(this.options.minZoom,Math.min(Math.floor(+ye),this.options.maxZoom+1))}_cluster(ye,Ce){const{radius:Fe,extent:Ye,reduce:Qe,minPoints:ct}=this.options,bt=Fe/(Ye*Math.pow(2,Ce)),ft=ye.data,pt=[],At=this.stride;for(let It=0;It<ft.length;It+=At){if(ft[It+2]<=Ce)continue;ft[It+2]=Ce;const Jt=ft[It],Gt=ft[It+1],cr=ye.within(ft[It],ft[It+1],bt),Ur=ft[It+Ct];let Jr=Ur;for(const Lr of cr){const Qr=Lr*At;ft[Qr+2]>Ce&&(Jr+=ft[Qr+Ct])}if(Jr>Ur&&Jr>=ct){let Lr,Qr=Jt*Ur,Xa=Gt*Ur,Ca=-1;const ca=(It/At<<5)+(Ce+1)+this.points.length;for(const Ya of cr){const Ja=Ya*At;if(ft[Ja+2]<=Ce)continue;ft[Ja+2]=Ce;const ei=ft[Ja+Ct];Qr+=ft[Ja]*ei,Xa+=ft[Ja+1]*ei,ft[Ja+4]=ca,Qe&&(Lr||(Lr=this._map(ft,It,!0),Ca=this.clusterProps.length,this.clusterProps.push(Lr)),Qe(Lr,this._map(ft,Ja)))}ft[It+4]=ca,pt.push(Qr/Jr,Xa/Jr,1/0,ca,-1,Jr),Qe&&pt.push(Ca)}else{for(let Lr=0;Lr<At;Lr++)pt.push(ft[It+Lr]);if(Jr>1)for(const Lr of cr){const Qr=Lr*At;if(!(ft[Qr+2]<=Ce)){ft[Qr+2]=Ce;for(let Xa=0;Xa<At;Xa++)pt.push(ft[Qr+Xa])}}}}return pt}_getOriginId(ye){return ye-this.points.length>>5}_getOriginZoom(ye){return(ye-this.points.length)%32}_map(ye,Ce,Fe){if(ye[Ce+Ct]>1){const ct=this.clusterProps[ye[Ce+Zt]];return Fe?Object.assign({},ct):ct}const Ye=this.points[ye[Ce+Pt]].properties,Qe=this.options.map(Ye);return Fe&&Qe===Ye?Object.assign({},Qe):Qe}}function er(St,ye,Ce){return{type:"Feature",id:St[ye+Pt],properties:Se(St,ye,Ce),geometry:{type:"Point",coordinates:[(Fe=St[ye],360*(Fe-.5)),yt(St[ye+1])]}};var Fe}function Se(St,ye,Ce){const Fe=St[ye+Ct],Ye=Fe>=1e4?`${Math.round(Fe/1e3)}k`:Fe>=1e3?Math.round(Fe/100)/10+"k":Fe,Qe=St[ye+Zt],ct=Qe===-1?{}:Object.assign({},Ce[Qe]);return Object.assign(ct,{cluster:!0,cluster_id:St[ye+Pt],point_count:Fe,point_count_abbreviated:Ye})}function ur(St){return St/360+.5}function Sr(St){const ye=Math.sin(St*Math.PI/180),Ce=.5-.25*Math.log((1+ye)/(1-ye))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function yt(St){const ye=(180-360*St)*Math.PI/180;return 360*Math.atan(Math.exp(ye))/Math.PI-90}function dt(St,ye,Ce,Fe){let Ye=Fe;const Qe=ye+(Ce-ye>>1);let ct,bt=Ce-ye;const ft=St[ye],pt=St[ye+1],At=St[Ce],It=St[Ce+1];for(let Jt=ye+3;Jt<Ce;Jt+=3){const Gt=$t(St[Jt],St[Jt+1],ft,pt,At,It);if(Gt>Ye)ct=Jt,Ye=Gt;else if(Gt===Ye){const cr=Math.abs(Jt-Qe);cr<bt&&(ct=Jt,bt=cr)}}Ye>Fe&&(ct-ye>3&&dt(St,ye,ct,Fe),St[ct+2]=Ye,Ce-ct>3&&dt(St,ct,Ce,Fe))}function $t(St,ye,Ce,Fe,Ye,Qe){let ct=Ye-Ce,bt=Qe-Fe;if(ct!==0||bt!==0){const ft=((St-Ce)*ct+(ye-Fe)*bt)/(ct*ct+bt*bt);ft>1?(Ce=Ye,Fe=Qe):ft>0&&(Ce+=ct*ft,Fe+=bt*ft)}return ct=St-Ce,bt=ye-Fe,ct*ct+bt*bt}function or(St,ye,Ce,Fe){const Ye={id:St??null,type:ye,geometry:Ce,tags:Fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")Er(Ye,Ce);else if(ye==="Polygon")Er(Ye,Ce[0]);else if(ye==="MultiLineString")for(const Qe of Ce)Er(Ye,Qe);else if(ye==="MultiPolygon")for(const Qe of Ce)Er(Ye,Qe[0]);return Ye}function Er(St,ye){for(let Ce=0;Ce<ye.length;Ce+=3)St.minX=Math.min(St.minX,ye[Ce]),St.minY=Math.min(St.minY,ye[Ce+1]),St.maxX=Math.max(St.maxX,ye[Ce]),St.maxY=Math.max(St.maxY,ye[Ce+1])}function mr(St,ye,Ce,Fe){if(!ye.geometry)return;const Ye=ye.geometry.coordinates;if(Ye&&Ye.length===0)return;const Qe=ye.geometry.type,ct=Math.pow(Ce.tolerance/((1<<Ce.maxZoom)*Ce.extent),2);let bt=[],ft=ye.id;if(Ce.promoteId?ft=ye.properties[Ce.promoteId]:Ce.generateId&&(ft=Fe||0),Qe==="Point")Pr(Ye,bt);else if(Qe==="MultiPoint")for(const pt of Ye)Pr(pt,bt);else if(Qe==="LineString")Fr(Ye,bt,ct,!1);else if(Qe==="MultiLineString"){if(Ce.lineMetrics){for(const pt of Ye)bt=[],Fr(pt,bt,ct,!1),St.push(or(ft,"LineString",bt,ye.properties));return}$a(Ye,bt,ct,!1)}else if(Qe==="Polygon")$a(Ye,bt,ct,!0);else{if(Qe!=="MultiPolygon"){if(Qe==="GeometryCollection"){for(const pt of ye.geometry.geometries)mr(St,{id:ft,geometry:pt,properties:ye.properties},Ce,Fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const pt of Ye){const At=[];$a(pt,At,ct,!0),bt.push(At)}}St.push(or(ft,Qe,bt,ye.properties))}function Pr(St,ye){ye.push(Xr(St[0]),ja(St[1]),0)}function Fr(St,ye,Ce,Fe){let Ye,Qe,ct=0;for(let ft=0;ft<St.length;ft++){const pt=Xr(St[ft][0]),At=ja(St[ft][1]);ye.push(pt,At,0),ft>0&&(ct+=Fe?(Ye*At-pt*Qe)/2:Math.sqrt(Math.pow(pt-Ye,2)+Math.pow(At-Qe,2))),Ye=pt,Qe=At}const bt=ye.length-3;ye[2]=1,dt(ye,0,bt,Ce),ye[bt+2]=1,ye.size=Math.abs(ct),ye.start=0,ye.end=ye.size}function $a(St,ye,Ce,Fe){for(let Ye=0;Ye<St.length;Ye++){const Qe=[];Fr(St[Ye],Qe,Ce,Fe),ye.push(Qe)}}function Xr(St){return St/360+.5}function ja(St){const ye=Math.sin(St*Math.PI/180),Ce=.5-.25*Math.log((1+ye)/(1-ye))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function fr(St,ye,Ce,Fe,Ye,Qe,ct,bt){if(Fe/=ye,Qe>=(Ce/=ye)&&ct<Fe)return St;if(ct<Ce||Qe>=Fe)return null;const ft=[];for(const pt of St){const At=pt.geometry;let It=pt.type;const Jt=Ye===0?pt.minX:pt.minY,Gt=Ye===0?pt.maxX:pt.maxY;if(Jt>=Ce&&Gt<Fe){ft.push(pt);continue}if(Gt<Ce||Jt>=Fe)continue;let cr=[];if(It==="Point"||It==="MultiPoint")Sa(At,cr,Ce,Fe,Ye);else if(It==="LineString")kr(At,cr,Ce,Fe,Ye,!1,bt.lineMetrics);else if(It==="MultiLineString")Nr(At,cr,Ce,Fe,Ye,!1);else if(It==="Polygon")Nr(At,cr,Ce,Fe,Ye,!0);else if(It==="MultiPolygon")for(const Ur of At){const Jr=[];Nr(Ur,Jr,Ce,Fe,Ye,!0),Jr.length&&cr.push(Jr)}if(cr.length){if(bt.lineMetrics&&It==="LineString"){for(const Ur of cr)ft.push(or(pt.id,It,Ur,pt.tags));continue}It!=="LineString"&&It!=="MultiLineString"||(cr.length===1?(It="LineString",cr=cr[0]):It="MultiLineString"),It!=="Point"&&It!=="MultiPoint"||(It=cr.length===3?"Point":"MultiPoint"),ft.push(or(pt.id,It,cr,pt.tags))}}return ft.length?ft:null}function Sa(St,ye,Ce,Fe,Ye){for(let Qe=0;Qe<St.length;Qe+=3){const ct=St[Qe+Ye];ct>=Ce&&ct<=Fe&&na(ye,St[Qe],St[Qe+1],St[Qe+2])}}function kr(St,ye,Ce,Fe,Ye,Qe,ct){let bt=Dr(St);const ft=Ye===0?Sn:Zn;let pt,At,It=St.start;for(let Jr=0;Jr<St.length-3;Jr+=3){const Lr=St[Jr],Qr=St[Jr+1],Xa=St[Jr+2],Ca=St[Jr+3],ca=St[Jr+4],Ya=Ye===0?Lr:Qr,Ja=Ye===0?Ca:ca;let ei=!1;ct&&(pt=Math.sqrt(Math.pow(Lr-Ca,2)+Math.pow(Qr-ca,2))),Ya<Ce?Ja>Ce&&(At=ft(bt,Lr,Qr,Ca,ca,Ce),ct&&(bt.start=It+pt*At)):Ya>Fe?Ja<Fe&&(At=ft(bt,Lr,Qr,Ca,ca,Fe),ct&&(bt.start=It+pt*At)):na(bt,Lr,Qr,Xa),Ja<Ce&&Ya>=Ce&&(At=ft(bt,Lr,Qr,Ca,ca,Ce),ei=!0),Ja>Fe&&Ya<=Fe&&(At=ft(bt,Lr,Qr,Ca,ca,Fe),ei=!0),!Qe&&ei&&(ct&&(bt.end=It+pt*At),ye.push(bt),bt=Dr(St)),ct&&(It+=pt)}let Jt=St.length-3;const Gt=St[Jt],cr=St[Jt+1],Ur=Ye===0?Gt:cr;Ur>=Ce&&Ur<=Fe&&na(bt,Gt,cr,St[Jt+2]),Jt=bt.length-3,Qe&&Jt>=3&&(bt[Jt]!==bt[0]||bt[Jt+1]!==bt[1])&&na(bt,bt[0],bt[1],bt[2]),bt.length&&ye.push(bt)}function Dr(St){const ye=[];return ye.size=St.size,ye.start=St.start,ye.end=St.end,ye}function Nr(St,ye,Ce,Fe,Ye,Qe){for(const ct of St)kr(ct,ye,Ce,Fe,Ye,Qe,!1)}function na(St,ye,Ce,Fe){St.push(ye,Ce,Fe)}function Sn(St,ye,Ce,Fe,Ye,Qe){const ct=(Qe-ye)/(Fe-ye);return na(St,Qe,Ce+(Ye-Ce)*ct,1),ct}function Zn(St,ye,Ce,Fe,Ye,Qe){const ct=(Qe-Ce)/(Ye-Ce);return na(St,ye+(Fe-ye)*ct,Qe,1),ct}function on(St,ye){const Ce=[];for(let Fe=0;Fe<St.length;Fe++){const Ye=St[Fe],Qe=Ye.type;let ct;if(Qe==="Point"||Qe==="MultiPoint"||Qe==="LineString")ct=Ha(Ye.geometry,ye);else if(Qe==="MultiLineString"||Qe==="Polygon"){ct=[];for(const bt of Ye.geometry)ct.push(Ha(bt,ye))}else if(Qe==="MultiPolygon"){ct=[];for(const bt of Ye.geometry){const ft=[];for(const pt of bt)ft.push(Ha(pt,ye));ct.push(ft)}}Ce.push(or(Ye.id,Qe,ct,Ye.tags))}return Ce}function Ha(St,ye){const Ce=[];Ce.size=St.size,St.start!==void 0&&(Ce.start=St.start,Ce.end=St.end);for(let Fe=0;Fe<St.length;Fe+=3)Ce.push(St[Fe]+ye,St[Fe+1],St[Fe+2]);return Ce}function qa(St,ye){if(St.transformed)return St;const Ce=1<<St.z,Fe=St.x,Ye=St.y;for(const Qe of St.features){const ct=Qe.geometry,bt=Qe.type;if(Qe.geometry=[],bt===1)for(let ft=0;ft<ct.length;ft+=2)Qe.geometry.push(Dn(ct[ft],ct[ft+1],ye,Ce,Fe,Ye));else for(let ft=0;ft<ct.length;ft++){const pt=[];for(let At=0;At<ct[ft].length;At+=2)pt.push(Dn(ct[ft][At],ct[ft][At+1],ye,Ce,Fe,Ye));Qe.geometry.push(pt)}}return St.transformed=!0,St}function Dn(St,ye,Ce,Fe,Ye,Qe){return[Math.round(Ce*(St*Fe-Ye)),Math.round(Ce*(ye*Fe-Qe))]}function In(St,ye,Ce,Fe,Ye){const Qe=ye===Ye.maxZoom?0:Ye.tolerance/((1<<ye)*Ye.extent),ct={features:[],numPoints:0,numSimplified:0,numFeatures:St.length,source:null,x:Ce,y:Fe,z:ye,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const bt of St)jn(ct,bt,Qe,Ye);return ct}function jn(St,ye,Ce,Fe){const Ye=ye.geometry,Qe=ye.type,ct=[];if(St.minX=Math.min(St.minX,ye.minX),St.minY=Math.min(St.minY,ye.minY),St.maxX=Math.max(St.maxX,ye.maxX),St.maxY=Math.max(St.maxY,ye.maxY),Qe==="Point"||Qe==="MultiPoint")for(let bt=0;bt<Ye.length;bt+=3)ct.push(Ye[bt],Ye[bt+1]),St.numPoints++,St.numSimplified++;else if(Qe==="LineString")Wr(ct,Ye,St,Ce,!1,!1);else if(Qe==="MultiLineString"||Qe==="Polygon")for(let bt=0;bt<Ye.length;bt++)Wr(ct,Ye[bt],St,Ce,Qe==="Polygon",bt===0);else if(Qe==="MultiPolygon")for(let bt=0;bt<Ye.length;bt++){const ft=Ye[bt];for(let pt=0;pt<ft.length;pt++)Wr(ct,ft[pt],St,Ce,!0,pt===0)}if(ct.length){let bt=ye.tags||null;if(Qe==="LineString"&&Fe.lineMetrics){bt={};for(const pt in ye.tags)bt[pt]=ye.tags[pt];bt.mapbox_clip_start=Ye.start/Ye.size,bt.mapbox_clip_end=Ye.end/Ye.size}const ft={geometry:ct,type:Qe==="Polygon"||Qe==="MultiPolygon"?3:Qe==="LineString"||Qe==="MultiLineString"?2:1,tags:bt};ye.id!==null&&(ft.id=ye.id),St.features.push(ft)}}function Wr(St,ye,Ce,Fe,Ye,Qe){const ct=Fe*Fe;if(Fe>0&&ye.size<(Ye?ct:Fe))return void(Ce.numPoints+=ye.length/3);const bt=[];for(let ft=0;ft<ye.length;ft+=3)(Fe===0||ye[ft+2]>ct)&&(Ce.numSimplified++,bt.push(ye[ft],ye[ft+1])),Ce.numPoints++;Ye&&function(ft,pt){let At=0;for(let It=0,Jt=ft.length,Gt=Jt-2;It<Jt;Gt=It,It+=2)At+=(ft[It]-ft[Gt])*(ft[It+1]+ft[Gt+1]);if(At>0===pt)for(let It=0,Jt=ft.length;It<Jt/2;It+=2){const Gt=ft[It],cr=ft[It+1];ft[It]=ft[Jt-2-It],ft[It+1]=ft[Jt-1-It],ft[Jt-2-It]=Gt,ft[Jt-1-It]=cr}}(bt,Qe),St.push(bt)}const yi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ka{constructor(ye,Ce){const Fe=(Ce=this.options=function(Qe,ct){for(const bt in ct)Qe[bt]=ct[bt];return Qe}(Object.create(yi),Ce)).debug;if(Fe&&console.time("preprocess data"),Ce.maxZoom<0||Ce.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ce.promoteId&&Ce.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ye=function(Qe,ct){const bt=[];if(Qe.type==="FeatureCollection")for(let ft=0;ft<Qe.features.length;ft++)mr(bt,Qe.features[ft],ct,ft);else mr(bt,Qe.type==="Feature"?Qe:{geometry:Qe},ct);return bt}(ye,Ce);this.tiles={},this.tileCoords=[],Fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ce.indexMaxZoom,Ce.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ye=function(Qe,ct){const bt=ct.buffer/ct.extent;let ft=Qe;const pt=fr(Qe,1,-1-bt,bt,0,-1,2,ct),At=fr(Qe,1,1-bt,2+bt,0,-1,2,ct);return(pt||At)&&(ft=fr(Qe,1,-bt,1+bt,0,-1,2,ct)||[],pt&&(ft=on(pt,1).concat(ft)),At&&(ft=ft.concat(on(At,-1)))),ft}(Ye,Ce),Ye.length&&this.splitTile(Ye,0,0,0),Fe&&(Ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ye,Ce,Fe,Ye,Qe,ct,bt){const ft=[ye,Ce,Fe,Ye],pt=this.options,At=pt.debug;for(;ft.length;){Ye=ft.pop(),Fe=ft.pop(),Ce=ft.pop(),ye=ft.pop();const It=1<<Ce,Jt=la(Ce,Fe,Ye);let Gt=this.tiles[Jt];if(!Gt&&(At>1&&console.time("creation"),Gt=this.tiles[Jt]=In(ye,Ce,Fe,Ye,pt),this.tileCoords.push({z:Ce,x:Fe,y:Ye}),At)){At>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ce,Fe,Ye,Gt.numFeatures,Gt.numPoints,Gt.numSimplified),console.timeEnd("creation"));const ei=`z${Ce}`;this.stats[ei]=(this.stats[ei]||0)+1,this.total++}if(Gt.source=ye,Qe==null){if(Ce===pt.indexMaxZoom||Gt.numPoints<=pt.indexMaxPoints)continue}else{if(Ce===pt.maxZoom||Ce===Qe)continue;if(Qe!=null){const ei=Qe-Ce;if(Fe!==ct>>ei||Ye!==bt>>ei)continue}}if(Gt.source=null,ye.length===0)continue;At>1&&console.time("clipping");const cr=.5*pt.buffer/pt.extent,Ur=.5-cr,Jr=.5+cr,Lr=1+cr;let Qr=null,Xa=null,Ca=null,ca=null,Ya=fr(ye,It,Fe-cr,Fe+Jr,0,Gt.minX,Gt.maxX,pt),Ja=fr(ye,It,Fe+Ur,Fe+Lr,0,Gt.minX,Gt.maxX,pt);ye=null,Ya&&(Qr=fr(Ya,It,Ye-cr,Ye+Jr,1,Gt.minY,Gt.maxY,pt),Xa=fr(Ya,It,Ye+Ur,Ye+Lr,1,Gt.minY,Gt.maxY,pt),Ya=null),Ja&&(Ca=fr(Ja,It,Ye-cr,Ye+Jr,1,Gt.minY,Gt.maxY,pt),ca=fr(Ja,It,Ye+Ur,Ye+Lr,1,Gt.minY,Gt.maxY,pt),Ja=null),At>1&&console.timeEnd("clipping"),ft.push(Qr||[],Ce+1,2*Fe,2*Ye),ft.push(Xa||[],Ce+1,2*Fe,2*Ye+1),ft.push(Ca||[],Ce+1,2*Fe+1,2*Ye),ft.push(ca||[],Ce+1,2*Fe+1,2*Ye+1)}}getTile(ye,Ce,Fe){ye=+ye,Ce=+Ce,Fe=+Fe;const Ye=this.options,{extent:Qe,debug:ct}=Ye;if(ye<0||ye>24)return null;const bt=1<<ye,ft=la(ye,Ce=Ce+bt&bt-1,Fe);if(this.tiles[ft])return qa(this.tiles[ft],Qe);ct>1&&console.log("drilling down to z%d-%d-%d",ye,Ce,Fe);let pt,At=ye,It=Ce,Jt=Fe;for(;!pt&&At>0;)At--,It>>=1,Jt>>=1,pt=this.tiles[la(At,It,Jt)];return pt&&pt.source?(ct>1&&(console.log("found parent tile z%d-%d-%d",At,It,Jt),console.time("drilling down")),this.splitTile(pt.source,At,It,Jt,ye,Ce,Fe),ct>1&&console.timeEnd("drilling down"),this.tiles[ft]?qa(this.tiles[ft],Qe):null):null}}function la(St,ye,Ce){return 32*((1<<St)*Ce+ye)+St}function yn(St,ye){const Ce=St.tileID.canonical;if(!this._geoJSONIndex)return void ye(null,null);const Fe=this._geoJSONIndex.getTile(Ce.z,Ce.x,Ce.y);if(!Fe)return void ye(null,null);const Ye=new we(Fe.features);let Qe=Ke(Ye);Qe.byteOffset===0&&Qe.byteLength===Qe.buffer.byteLength||(Qe=new Uint8Array(Qe)),ye(null,{vectorTile:Ye,rawData:Qe.buffer})}class Xn extends oe{constructor(ye,Ce,Fe,Ye,Qe,ct){super(ye,Ce,Fe,Ye,yn,ct),Qe&&(this.loadGeoJSON=Qe),this._dynamicIndex=new re}loadData(ye,Ce){const Fe=ye&&ye.request,Ye=Fe&&Fe.collectResourceTiming;this.loadGeoJSON(ye,(Qe,ct)=>{if(Qe||!ct)return Ce(Qe);if(typeof ct!="object")return Ce(new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`));{try{if(ye.filter){const ft=n.U(ye.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ft.result==="error")throw new Error(ft.value.map(pt=>`${pt.key}: ${pt.message}`).join(", "));ct.features=ct.features.filter(pt=>ft.value.evaluate({zoom:0},pt))}ye.dynamic?(ct.type==="Feature"&&(ct={type:"FeatureCollection",features:[ct]}),ye.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(ct.features,this.loaded),ye.cluster&&(ct.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=ye.cluster?new Dt(function({superclusterOptions:ft,clusterProperties:pt}){if(!pt||!ft)return ft;const At={},It={},Jt={accumulated:null,zoom:0},Gt={properties:null},cr=Object.keys(pt);for(const Ur of cr){const[Jr,Lr]=pt[Ur],Qr=n.U(Lr),Xa=n.U(typeof Jr=="string"?[Jr,["accumulated"],["get",Ur]]:Jr);At[Ur]=Qr.value,It[Ur]=Xa.value}return ft.map=Ur=>{Gt.properties=Ur;const Jr={};for(const Lr of cr)Jr[Lr]=At[Lr].evaluate(Jt,Gt);return Jr},ft.reduce=(Ur,Jr)=>{Gt.properties=Jr;for(const Lr of cr)Jt.accumulated=Ur[Lr],Ur[Lr]=It[Lr].evaluate(Jt,Gt)},ft}(ye)).load(ct.features):ye.dynamic?this._dynamicIndex:function(ft,pt){return new Ka(ft,pt)}(ct,ye.geojsonVtOptions)}catch(ft){return Ce(ft)}const bt={};if(Ye){const ft=k(Fe);ft&&(bt.resourceTiming={},bt.resourceTiming[ye.source]=JSON.parse(JSON.stringify(ft)))}Ce(null,bt)}})}reloadTile(ye,Ce){const Fe=this.loaded;return Fe&&Fe[ye.uid]?ye.partial?Ce(null,void 0):super.reloadTile(ye,Ce):this.loadTile(ye,Ce)}loadGeoJSON(ye,Ce){if(ye.request)n.n(ye.request,Ce);else{if(typeof ye.data!="string")return Ce(new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`));try{return Ce(null,JSON.parse(ye.data))}catch{return Ce(new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ye,Ce){try{Ce(null,this._geoJSONIndex.getClusterExpansionZoom(ye.clusterId))}catch(Fe){Ce(Fe)}}getClusterChildren(ye,Ce){try{Ce(null,this._geoJSONIndex.getChildren(ye.clusterId))}catch(Fe){Ce(Fe)}}getClusterLeaves(ye,Ce){try{Ce(null,this._geoJSONIndex.getLeaves(ye.clusterId,ye.limit,ye.offset))}catch(Fe){Ce(Fe)}}}class js{constructor(ye,Ce){this.tileID=new n.aG(ye.tileID.overscaledZ,ye.tileID.wrap,ye.tileID.canonical.z,ye.tileID.canonical.x,ye.tileID.canonical.y),this.tileZoom=ye.tileZoom,this.uid=ye.uid,this.zoom=ye.zoom,this.canonical=ye.tileID.canonical,this.pixelRatio=ye.pixelRatio,this.tileSize=ye.tileSize,this.source=ye.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=ye.projection,this.brightness=Ce}parse(ye,Ce,Fe,Ye){this.status="parsing";const Qe=new n.aG(Fe.tileID.overscaledZ,Fe.tileID.wrap,Fe.tileID.canonical.z,Fe.tileID.canonical.x,Fe.tileID.canonical.y),ct=[],bt=Ce.familiesBySource[Fe.source],ft=new n.dZ(Qe,Fe.promoteId);return ft.bucketLayerIDs=[],ft.is3DTile=!0,n.e9(ye).then(pt=>{if(!pt)return Ye(new Error("Could not parse tile"));const At=n.ea(pt,1/n.cc(Fe.tileID.canonical)),It=pt.json.extensionsUsed&&pt.json.extensionsUsed.includes("MAPBOX_mesh_features")||pt.json.asset.extras&&pt.json.asset.extras.MAPBOX_mesh_features,Jt=pt.json.extensionsUsed&&pt.json.extensionsUsed.includes("EXT_meshopt_compression"),Gt=new n.a8(this.zoom,{brightness:this.brightness});for(const cr in bt)for(const Ur of bt[cr]){const Jr=Ur[0];ft.bucketLayerIDs.push(Ur.map(Qr=>n.aC(Qr.id,Qr.scope))),Jr.recalculate(Gt,[]);const Lr=new n.eb(Ur,At,Qe,It,Jt,this.brightness,ft);It||(Lr.needsUpload=!0),ct.push(Lr),Lr.evaluate(Jr)}this.status="done",Ye(null,{buckets:ct,featureIndex:ft,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(pt=>Ye(new Error(pt.message)))}}class qn{constructor(ye,Ce,Fe,Ye,Qe,ct){this.actor=ye,this.layerIndex=Ce,this.availableImages=Fe,this.brightness=ct,this.loading={},this.loaded={}}loadTile(ye,Ce){const Fe=ye.uid,Ye=this.loading[Fe]=new js(ye,this.brightness);n.bi(ye.request,(Qe,ct)=>{const bt=!this.loading[Fe];return delete this.loading[Fe],bt||Qe?(Ye.status="done",bt||(this.loaded[Fe]=Ye),Ce(Qe)):ct&&ct.byteLength!==0?void Ye.parse(ct,this.layerIndex,ye,(ft,pt)=>{Ye.status="done",this.loaded=this.loaded||{},this.loaded[Fe]=Ye,ft||!pt?Ce(ft):Ce(null,pt)}):(Ye.status="done",this.loaded[Fe]=Ye,Ce())})}reloadTile(ye,Ce){const Fe=this.loaded,Ye=ye.uid;if(Fe&&Fe[Ye]){const Qe=Fe[Ye];Qe.projection=ye.projection,Qe.brightness=ye.brightness;const ct=(bt,ft)=>{Qe.reloadCallback&&(delete Qe.reloadCallback,this.loadTile(ye,Ce)),Ce(bt,ft)};Qe.status==="parsing"?Qe.reloadCallback=ct:Qe.status==="done"&&this.loadTile(ye,Ce)}}abortTile(ye,Ce){const Fe=ye.uid;this.loading[Fe]&&delete this.loading[Fe],Ce()}removeTile(ye,Ce){const Fe=this.loaded,Ye=ye.uid;Fe&&Fe[Ye]&&delete Fe[Ye],Ce()}}class ga{constructor(ye){this.self=ye,this.actor=new n.ec(ye,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.imageRasterizer=new n.I,this.projections={},this.defaultProjection=n.bP({name:"mercator"}),this.workerSourceTypes={vector:oe,geojson:Xn,"batched-model":qn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Ce,Fe)=>{if(this.workerSourceTypes[Ce])throw new Error(`Worker source with name "${Ce}" already registered.`);this.workerSourceTypes[Ce]=Fe},this.self.registerRTLTextPlugin=Ce=>{if(n.ed.isParsed())throw new Error("RTL text plugin already registered.");n.ed.applyArabicShaping=Ce.applyArabicShaping,n.ed.processBidirectionalText=Ce.processBidirectionalText,n.ed.processStyledBidirectionalText=Ce.processStyledBidirectionalText}}clearCaches(ye,Ce,Fe){delete this.layerIndexes[ye],delete this.availableImages[ye],delete this.workerSources[ye],delete this.demWorkerSources[ye],delete this.rasterArrayWorkerSource,Fe()}checkIfReady(ye,Ce,Fe){Fe()}setReferrer(ye,Ce){this.referrer=Ce}spriteLoaded(ye,{scope:Ce,isLoaded:Fe}){if(this.isSpriteLoaded[ye]||(this.isSpriteLoaded[ye]={}),this.isSpriteLoaded[ye][Ce]=Fe,this.workerSources[ye]&&this.workerSources[ye][Ce])for(const Ye in this.workerSources[ye][Ce]){const Qe=this.workerSources[ye][Ce][Ye];for(const ct in Qe){const bt=Qe[ct];bt instanceof oe&&(bt.isSpriteLoaded=Fe,bt.fire(new n.z("isSpriteLoaded")))}}}setImages(ye,{scope:Ce,images:Fe},Ye){if(this.availableImages[ye]||(this.availableImages[ye]={}),this.availableImages[ye][Ce]=Fe,this.workerSources[ye]&&this.workerSources[ye][Ce]){for(const Qe in this.workerSources[ye][Ce]){const ct=this.workerSources[ye][Ce][Qe];for(const bt in ct)ct[bt].availableImages=Fe}Ye()}else Ye()}setProjection(ye,Ce){this.projections[ye]=n.bP(Ce)}setBrightness(ye,Ce,Fe){this.brightness=Ce,Fe()}setLayers(ye,Ce,Fe){this.getLayerIndex(ye,Ce.scope).replace(Ce.layers,Ce.options),Fe()}updateLayers(ye,Ce,Fe){this.getLayerIndex(ye,Ce.scope).update(Ce.layers,Ce.removedIds,Ce.options),Fe()}loadTile(ye,Ce,Fe){Ce.projection=this.projections[ye]||this.defaultProjection,this.getWorkerSource(ye,Ce.type,Ce.source,Ce.scope).loadTile(Ce,Fe)}loadDEMTile(ye,Ce,Fe){this.getDEMWorkerSource(ye,Ce.source,Ce.scope).loadTile(Ce,Fe)}decodeRasterArray(ye,Ce,Fe){this.getRasterArrayWorkerSource().decodeRasterArray(Ce,Fe)}reloadTile(ye,Ce,Fe){Ce.projection=this.projections[ye]||this.defaultProjection,this.getWorkerSource(ye,Ce.type,Ce.source,Ce.scope).reloadTile(Ce,Fe)}abortTile(ye,Ce,Fe){this.getWorkerSource(ye,Ce.type,Ce.source,Ce.scope).abortTile(Ce,Fe)}removeTile(ye,Ce,Fe){this.getWorkerSource(ye,Ce.type,Ce.source,Ce.scope).removeTile(Ce,Fe)}removeSource(ye,Ce,Fe){if(!(this.workerSources[ye]&&this.workerSources[ye][Ce.scope]&&this.workerSources[ye][Ce.scope][Ce.type]&&this.workerSources[ye][Ce.scope][Ce.type][Ce.source]))return;const Ye=this.workerSources[ye][Ce.scope][Ce.type][Ce.source];delete this.workerSources[ye][Ce.scope][Ce.type][Ce.source],Ye.removeSource!==void 0?Ye.removeSource(Ce,Fe):Fe()}loadWorkerSource(ye,Ce,Fe){try{this.self.importScripts(Ce.url),Fe()}catch(Ye){Fe(Ye.toString())}}syncRTLPluginState(ye,Ce,Fe){try{n.ed.setState(Ce);const Ye=n.ed.getPluginURL();if(n.ed.isLoaded()&&!n.ed.isParsed()&&Ye!=null){this.self.importScripts(Ye);const Qe=n.ed.isParsed();Fe(Qe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ye}`),Qe)}}catch(Ye){Fe(Ye.toString())}}setDracoUrl(ye,Ce){this.dracoUrl=Ce}getAvailableImages(ye,Ce){this.availableImages[ye]||(this.availableImages[ye]={});let Fe=this.availableImages[ye][Ce];return Fe||(Fe=[]),Fe}getLayerIndex(ye,Ce){this.layerIndexes[ye]||(this.layerIndexes[ye]={});let Fe=this.layerIndexes[ye][Ce];return Fe||(Fe=this.layerIndexes[ye][Ce]=new F,Fe.scope=Ce),Fe}getWorkerSource(ye,Ce,Fe,Ye){return this.workerSources[ye]||(this.workerSources[ye]={}),this.workerSources[ye][Ye]||(this.workerSources[ye][Ye]={}),this.workerSources[ye][Ye][Ce]||(this.workerSources[ye][Ye][Ce]={}),this.isSpriteLoaded[ye]||(this.isSpriteLoaded[ye]={}),this.workerSources[ye][Ye][Ce][Fe]||(this.workerSources[ye][Ye][Ce][Fe]=new this.workerSourceTypes[Ce]({send:(Qe,ct,bt,ft,pt,At)=>{this.actor.send(Qe,ct,bt,ye,pt,At)},scheduler:this.actor.scheduler},this.getLayerIndex(ye,Ye),this.getAvailableImages(ye,Ye),this.isSpriteLoaded[ye][Ye],void 0,this.brightness)),this.workerSources[ye][Ye][Ce][Fe]}rasterizeImages(ye,Ce,Fe){const{imageTasks:Ye,scope:Qe}=Ce,ct={};for(const bt in Ye){const{image:ft,imageIdWithOptions:pt}=Ye[bt];ct[bt]=this.imageRasterizer.rasterize(pt,ft,Qe,ye)}Fe(void 0,ct)}removeRasterizedImages(ye,Ce,Fe){const{imageIds:Ye,scope:Qe}=Ce;this.imageRasterizer.removeImagesFromCacheByIds(Ye,Qe,ye),Fe()}getDEMWorkerSource(ye,Ce,Fe){return this.demWorkerSources[ye]||(this.demWorkerSources[ye]={}),this.demWorkerSources[ye][Fe]||(this.demWorkerSources[ye][Fe]={}),this.demWorkerSources[ye][Fe][Ce]||(this.demWorkerSources[ye][Fe][Ce]=new de),this.demWorkerSources[ye][Fe][Ce]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new ge),this.rasterArrayWorkerSource}enforceCacheSizeLimit(ye,Ce){n.ee(Ce)}getWorkerPerformanceMetrics(ye,Ce,Fe){Fe(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new ga(self)),ga}),_(["./shared"],function(n){var k="3.9.4";const N={create:"create",load:"load",fullLoad:"fullLoad"},B={mark(p){performance.mark(p)},measure(p,a,o){performance.measure(p,a,o)}};function F(p){const a=p.name.split("?")[0];return n.a(a)&&a.includes("mapbox-gl.js")?"javascript":n.a(a)&&a.includes("mapbox-gl.css")?"css":n.b(a)?"fontRange":n.c(a)?"sprite":n.i(a)?"style":n.d(a)?"tilejson":"other"}var G,Q={},te=function(){if(G)return Q;function p(m){return!a(m)}function a(m){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var S,D,L=new Blob([""],{type:"text/javascript"}),O=URL.createObjectURL(L);try{D=new Worker(O),S=!0}catch{S=!1}return D&&D.terminate(),URL.revokeObjectURL(O),S}()?function(){var S=document.createElement("canvas");S.width=S.height=1;var D=S.getContext("2d");if(!D)return!1;var L=D.getImageData(0,0,1,1);return L&&L.width===S.width}()?(o[v=m&&m.failIfMajorPerformanceCaveat]===void 0&&(o[v]=function(S){var D,L=function(O){var U=document.createElement("canvas"),q=Object.create(p.webGLContextAttributes);return q.failIfMajorPerformanceCaveat=O,U.getContext("webgl2",q)}(S);if(!L)return!1;try{D=L.createShader(L.VERTEX_SHADER)}catch{return!1}return!(!D||L.isContextLost())&&(L.shaderSource(D,"void main() {}"),L.compileShader(D),L.getShaderParameter(D,L.COMPILE_STATUS)===!0)}(v)),o[v]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var v}G=1,Q.supported=p,Q.notSupportedReason=a;var o={};return p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},Q}();function Y(p,a,o){const m=document.createElement(p);return a!=null&&(m.className=a),o&&o.appendChild(m),m}function oe(p,a,o){const m=document.createElementNS("http://www.w3.org/2000/svg",p);for(const v of Object.keys(a))m.setAttributeNS(null,v,String(a[v]));return o&&o.appendChild(m),m}const de=typeof document<"u"?document.documentElement&&document.documentElement.style:null,ge=de&&de.userSelect!==void 0?"userSelect":"WebkitUserSelect";let be;function pe(){de&&ge&&(be=de[ge],de[ge]="none")}function we(){de&&ge&&(de[ge]=be)}function ke(p){p.preventDefault(),p.stopPropagation(),window.removeEventListener("click",ke,!0)}function Ae(){window.addEventListener("click",ke,!0),window.setTimeout(()=>{window.removeEventListener("click",ke,!0)},0)}function re(p,a){const o=p.getBoundingClientRect();return ue(p,o,a)}function Te(p,a){const o=p.getBoundingClientRect(),m=[];for(let v=0;v<a.length;v++)m.push(ue(p,o,a[v]));return m}function se(p){return window.InstallTrigger!==void 0&&p.button===2&&p.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button}function ue(p,a,o){const m=p.offsetWidth===a.width?1:p.offsetWidth/a.width;return new n.P((o.clientX-a.left)*m,(o.clientY-a.top)*m)}const De="01",ce="NO_ACCESS_TOKEN";class je{constructor(a,o,m){this._transformRequestFn=a,this._customAccessToken=o,this._silenceAuthErrors=!!m,this._createSkuToken()}_createSkuToken(){const a=function(){let o="";for(let m=0;m<10;m++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",De,o].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,o){return this._transformRequestFn&&this._transformRequestFn(a,o)||{url:a}}normalizeStyleURL(a,o){if(!n.f(a))return a;const m=Re(a);return m.params.push(`sdk=js-${k}`),m.path=`/styles/v1${m.path}`,this._makeAPIURL(m,this._customAccessToken||o)}normalizeGlyphsURL(a,o){if(!n.f(a))return a;const m=Re(a);return m.path=`/fonts/v1${m.path}`,this._makeAPIURL(m,this._customAccessToken||o)}normalizeModelURL(a,o){if(!n.f(a))return a;const m=Re(a);return m.path=`/models/v1${m.path}`,this._makeAPIURL(m,this._customAccessToken||o)}normalizeSourceURL(a,o,m,v){if(!n.f(a))return a;const S=Re(a);return S.path=`/v4/${S.authority}.json`,S.params.push("secure"),m&&S.params.push(`language=${m}`),v&&S.params.push(`worldview=${v}`),this._makeAPIURL(S,this._customAccessToken||o)}normalizeIconsetURL(a,o){const m=Re(a);return n.f(a)?(m.path=`/styles/v1${m.path}/iconset.pbf`,this._makeAPIURL(m,this._customAccessToken||o)):Ge(m)}normalizeSpriteURL(a,o,m,v){const S=Re(a);return n.f(a)?(S.path=`/styles/v1${S.path}/sprite${o}${m}`,this._makeAPIURL(S,this._customAccessToken||v)):(S.path+=`${o}${m}`,Ge(S))}normalizeTileURL(a,o,m){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!n.f(a))return a;const v=Re(a);v.path=v.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${o||m&&v.authority!=="raster"&&m===512?"@2x":""}${n.m.supported?".webp":"$1"}`),v.authority==="raster"?v.path=`/${n.e.RASTER_URL_PREFIX}${v.path}`:v.authority==="rasterarrays"?v.path=`/${n.e.RASTERARRAYS_URL_PREFIX}${v.path}`:v.authority==="3dtiles"?v.path=`/${n.e.TILES3D_URL_PREFIX}${v.path}`:(v.path=v.path.replace(/^.+\/v4\//,"/"),v.path=`/${n.e.TILE_URL_VERSION}${v.path}`);const S=this._customAccessToken||function(D){for(const L of D){const O=L.match(/^access_token=(.*)$/);if(O)return O[1]}return null}(v.params)||n.e.ACCESS_TOKEN;return n.e.REQUIRE_ACCESS_TOKEN&&S&&this._skuToken&&v.params.push(`sku=${this._skuToken}`),this._makeAPIURL(v,S)}canonicalizeTileURL(a,o){const m=Re(a);if(!m.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!m.path.match(/\.[\w]+$/))return a;let v="mapbox://";m.path.match(/^\/raster\/v1\//)?v+=`raster/${m.path.replace(`/${n.e.RASTER_URL_PREFIX}/`,"")}`:m.path.match(/^\/rasterarrays\/v1\//)?v+=`rasterarrays/${m.path.replace(`/${n.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:v+=`tiles/${m.path.replace(`/${n.e.TILE_URL_VERSION}/`,"")}`;let S=m.params;return o&&(S=S.filter(D=>!D.match(/^access_token=/))),S.length&&(v+=`?${S.join("&")}`),v}canonicalizeTileset(a,o){const m=!!o&&n.f(o),v=[];for(const S of a.tiles||[])n.h(S)?v.push(this.canonicalizeTileURL(S,m)):v.push(S);return v}_makeAPIURL(a,o){const m="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",v=Re(n.e.API_URL);if(a.protocol=v.protocol,a.authority=v.authority,a.protocol==="http"){const S=a.params.indexOf("secure");S>=0&&a.params.splice(S,1)}if(v.path!=="/"&&(a.path=`${v.path}${a.path}`),!n.e.REQUIRE_ACCESS_TOKEN)return Ge(a);if(o=o||n.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!o)throw new Error(`An API access token is required to use Mapbox GL. ${m}`);if(o[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${m}`)}return a.params=a.params.filter(S=>S.indexOf("access_token")===-1),a.params.push(`access_token=${o||""}`),Ge(a)}}const Le=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Re(p){const a=p.match(Le);if(!a)throw new Error("Unable to parse URL object");return{protocol:a[1],authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("&"):[]}}function Ge(p){const a=p.params.length?`?${p.params.join("&")}`:"";return`${p.protocol}://${p.authority}${p.path}${a}`}const ze="mapbox.eventData";function ot(p){if(!p)return null;const a=p.split(".");if(!a||a.length!==3)return null;try{return JSON.parse(n.j(a[1]))}catch{return null}}class Ee{constructor(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(a){const o=ot(n.e.ACCESS_TOKEN);let m="";return m=o&&o.u?n.k(o.u):n.e.ACCESS_TOKEN||"",a?`${ze}.${a}:${m}`:`${ze}:${m}`}fetchEventData(){const a=n.s("localStorage"),o=this.getStorageKey(),m=this.getStorageKey("uuid");if(a)try{const v=localStorage.getItem(o);v&&(this.eventData=JSON.parse(v));const S=localStorage.getItem(m);S&&(this.anonId=S)}catch{n.w("Unable to read from LocalStorage")}}saveEventData(){const a=n.s("localStorage"),o=this.getStorageKey(),m=this.getStorageKey("uuid"),v=this.anonId;if(a&&v)try{localStorage.setItem(m,v),Object.keys(this.eventData).length>=1&&localStorage.setItem(o,JSON.stringify(this.eventData))}catch{n.w("Unable to write to LocalStorage")}}processRequests(a){}postEvent(a,o,m,v){if(!n.e.EVENTS_URL)return;const S=Re(n.e.EVENTS_URL);S.params.push(`access_token=${v||n.e.ACCESS_TOKEN||""}`);const D={event:this.type,created:new Date(a).toISOString()},L=o?n.l(D,o):D,O={url:Ge(S),headers:{"Content-Type":"text/plain"},body:JSON.stringify([L])};this.pendingRequest=n.p(O,U=>{this.pendingRequest=null,m(U),this.saveEventData(),this.processRequests(v)})}queueRequest(a,o){this.queue.push(a),this.processRequests(o)}}const Ke=new class extends Ee{constructor(p){super("appUserTurnstile"),this._customAccessToken=p}postTurnstileEvent(p,a){n.e.EVENTS_URL&&n.e.ACCESS_TOKEN&&Array.isArray(p)&&p.some(o=>n.f(o)||n.h(o))&&this.queueRequest(Date.now(),a)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const a=ot(n.e.ACCESS_TOKEN),o=a?a.u:n.e.ACCESS_TOKEN;let m=o!==this.eventData.tokenU;n.v(this.anonId)||(this.anonId=n.u(),m=!0);const v=this.queue.shift();if(this.eventData.lastSuccess){const S=new Date(this.eventData.lastSuccess),D=new Date(v),L=(v-this.eventData.lastSuccess)/864e5;m=m||L>=1||L<-1||S.getDate()!==D.getDate()}else m=!0;m?this.postEvent(v,{sdkIdentifier:"mapbox-gl-js",sdkVersion:k,skuId:De,"enabled.telemetry":!1,userId:this.anonId},S=>{S||(this.eventData.lastSuccess=v,this.eventData.tokenU=o)},p):this.processRequests()}},nt=Ke.postTurnstileEvent.bind(Ke),Xe=new class extends Ee{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(p,a,o,m){this.skuToken=a,this.errorCb=m,n.e.EVENTS_URL&&(o||n.e.ACCESS_TOKEN?this.queueRequest({id:p,timestamp:Date.now()},o):this.errorCb(new Error(ce)))}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:o}=this.queue.shift();a&&this.success[a]||(this.anonId||this.fetchEventData(),n.v(this.anonId)||(this.anonId=n.u()),this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:k,skuId:De,skuToken:this.skuToken,userId:this.anonId},m=>{m?this.errorCb(m):a&&(this.success[a]=!0)},p))}remove(){this.errorCb=null}},ut=Xe.postMapLoadEvent.bind(Xe),Pt=new class extends Ee{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(p){let a=this.mapInstanceIdMap.get(p);return a||(a=n.u(),this.mapInstanceIdMap.set(p,a)),a}getEventId(p){const a=this.eventIdPerMapInstanceMap.get(p)||0;return this.eventIdPerMapInstanceMap.set(p,a+1),a}postStyleLoadEvent(p,a){const{map:o,style:m,importedStyles:v}=a;if(!n.e.EVENTS_URL||!p&&!n.e.ACCESS_TOKEN)return;const S=this.getMapInstanceId(o),D={mapInstanceId:S,eventId:this.getEventId(S),style:m};v.length&&(D.importedStyles=v),this.queueRequest({timestamp:Date.now(),payload:D},p)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:a,payload:o}=this.queue.shift();this.postEvent(a,o,()=>{},p)}},Ct=Pt.postStyleLoadEvent.bind(Pt),Zt=new class extends Ee{constructor(){super("gljs.performance")}postPerformanceEvent(p,a){n.e.EVENTS_URL&&(p||n.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:a},p)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:a,performanceData:o}=this.queue.shift(),m=function(v){const S=performance.getEntriesByType("resource"),D=performance.getEntriesByType("mark"),L=function(ae){const me={};if(ae){for(const he in ae)if(he!=="other")for(const xe of ae[he]){const _e=`${he}ResolveRangeMin`,Me=`${he}ResolveRangeMax`,Be=`${he}RequestCount`,Oe=`${he}RequestCachedCount`;me[_e]=Math.min(me[_e]||1/0,xe.startTime),me[Me]=Math.max(me[Me]||-1/0,xe.responseEnd);const Ze=Ue=>{me[Ue]===void 0&&(me[Ue]=0),++me[Ue]};xe.transferSize!==void 0&&xe.transferSize===0&&Ze(Oe),Ze(Be)}}return me}(function(ae,me){const he={};if(ae)for(const xe of ae){const _e=me(xe);he[_e]===void 0&&(he[_e]=[]),he[_e].push(xe)}return he}(S,F)),O=window.devicePixelRatio,U=navigator.connection||navigator.mozConnection||navigator.webkitConnection,q=U?U.effectiveType:void 0,Z={counters:[],metadata:[],attributes:[]},X=(ae,me,he)=>{he!=null&&ae.push({name:me,value:he.toString()})};for(const ae in L)X(Z.counters,ae,L[ae]);if(v.interactionRange[0]!==1/0&&v.interactionRange[1]!==-1/0&&(X(Z.counters,"interactionRangeMin",v.interactionRange[0]),X(Z.counters,"interactionRangeMax",v.interactionRange[1])),D)for(const ae of Object.keys(N)){const me=N[ae],he=D.find(xe=>xe.name===me);he&&X(Z.counters,me,he.startTime)}return X(Z.counters,"visibilityHidden",v.visibilityHidden),X(Z.attributes,"style",function(ae){if(ae)for(const me of ae){const he=me.name.split("?")[0];if(n.i(he)){const xe=he.split("/").slice(-2);if(xe.length===2)return`mapbox://styles/${xe[0]}/${xe[1]}`}}}(S)),X(Z.attributes,"terrainEnabled",v.terrainEnabled?"true":"false"),X(Z.attributes,"fogEnabled",v.fogEnabled?"true":"false"),X(Z.attributes,"projection",v.projection),X(Z.attributes,"zoom",v.zoom),X(Z.metadata,"devicePixelRatio",O),X(Z.metadata,"connectionEffectiveType",q),X(Z.metadata,"navigatorUserAgent",navigator.userAgent),X(Z.metadata,"screenWidth",window.screen.width),X(Z.metadata,"screenHeight",window.screen.height),X(Z.metadata,"windowWidth",window.innerWidth),X(Z.metadata,"windowHeight",window.innerHeight),X(Z.metadata,"mapWidth",v.width/O),X(Z.metadata,"mapHeight",v.height/O),X(Z.metadata,"webglRenderer",v.renderer),X(Z.metadata,"webglVendor",v.vendor),X(Z.metadata,"sdkVersion",k),X(Z.metadata,"sdkIdentifier","mapbox-gl-js"),Z}(o);for(const v of m.metadata);for(const v of m.counters);for(const v of m.attributes);this.postEvent(a,m,()=>{},p)}},Dt=Zt.postPerformanceEvent.bind(Zt),er=new class extends Ee{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(p,a,o,m){if(!n.e.API_URL||!n.e.SESSION_PATH)return;const v=Re(n.e.API_URL+n.e.SESSION_PATH);v.params.push(`sku=${a||""}`),v.params.push(`access_token=${m||n.e.ACCESS_TOKEN||""}`);const S={url:Ge(v),headers:{"Content-Type":"text/plain"}};this.pendingRequest=n.g(S,D=>{this.pendingRequest=null,o(D),this.saveEventData(),this.processRequests(m)})}getSessionAPI(p,a,o,m){this.skuToken=a,this.errorCb=m,n.e.SESSION_PATH&&n.e.API_URL&&(o||n.e.ACCESS_TOKEN?this.queueRequest({id:p,timestamp:Date.now()},o):this.errorCb(new Error(ce)))}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:o}=this.queue.shift();a&&this.success[a]||this.getSession(o,this.skuToken,m=>{m?this.errorCb(m):a&&(this.success[a]=!0)},p)}remove(){this.errorCb=null}},Se=er.getSessionAPI.bind(er),ur=new Set;function Sr(p,a){a?ur.add(p):ur.delete(p)}class yt{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(a,o){this._updatedSourceCaches[a]=o,this.setDirty()}discardSourceCacheUpdate(a){delete this._updatedSourceCaches[a]}updateLayer(a){const o=a.scope;this._updatedLayers[o]=this._updatedLayers[o]||new Set,this._updatedLayers[o].add(a.id),this.setDirty()}removeLayer(a){const o=a.scope;this._removedLayers[o]=this._removedLayers[o]||{},this._updatedLayers[o]=this._updatedLayers[o]||new Set,this._removedLayers[o][a.id]=a,this._updatedLayers[o].delete(a.id),this._updatedPaintProps.delete(a.fqid),this.setDirty()}getRemovedLayer(a){return this._removedLayers[a.scope]?this._removedLayers[a.scope][a.id]:null}discardLayerRemoval(a){this._removedLayers[a.scope]&&delete this._removedLayers[a.scope][a.id]}getLayerUpdatesByScope(){const a={};for(const o in this._updatedLayers)a[o]=a[o]||{},a[o].updatedIds=Array.from(this._updatedLayers[o].values());for(const o in this._removedLayers)a[o]=a[o]||{},a[o].removedIds=Object.keys(this._removedLayers[o]);return a}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(a){this._updatedPaintProps.add(a.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(a){this._updatedImages.add(a),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function dt(p){const{userImage:a}=p;return!!(a&&a.render&&a.render())&&(p.data.replace(new Uint8Array(a.data.buffer)),!0)}class $t extends n.E{constructor(a){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0,this.spriteFormat=a,a!=="raster"&&n.t()&&(this.imageRasterizerDispatcher=new n.D(n.x(),this,"Image Rasterizer Worker",1))}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new n.I),this._imageRasterizer}createScope(a){this.images[a]={},this.loaded[a]=!1,this.updatedImages[a]={},this.patterns[a]={},this.callbackDispatchedThisFrame[a]={},this.atlasImage[a]=new n.r({width:1,height:1})}isLoaded(){for(const a in this.loaded)if(!this.loaded[a])return!1;return!0}setLoaded(a,o){if(this.loaded[o]!==a&&(this.loaded[o]=a,a)){for(const{ids:m,callback:v}of this.requestors)this._notify(m,o,v);this.requestors=[]}}hasImage(a,o){return!!this.getImage(a,o)}getImage(a,o){return this.images[o][a]}addImage(a,o,m){this._validate(a,m)&&(this.images[o][a]=m)}_validate(a,o){let m=!0;return this._validateStretch(o.stretchX,o.data&&o.data.width)||(this.fire(new n.y(new Error(`Image "${a}" has invalid "stretchX" value`))),m=!1),this._validateStretch(o.stretchY,o.data&&o.data.height)||(this.fire(new n.y(new Error(`Image "${a}" has invalid "stretchY" value`))),m=!1),this._validateContent(o.content,o)||(this.fire(new n.y(new Error(`Image "${a}" has invalid "content" value`))),m=!1),m}_validateStretch(a,o){if(!a)return!0;let m=0;for(const v of a){if(v[0]<m||v[1]<v[0]||o<v[1])return!1;m=v[1]}return!0}_validateContent(a,o){return a?a.length!==4||!o.usvg&&(a[0]<0||o.data.width<a[0]||a[1]<0||o.data.height<a[1]||a[2]<0||o.data.width<a[2]||a[3]<0||o.data.height<a[3])?!1:!(a[2]<a[0]||a[3]<a[1]):!0}updateImage(a,o,m){m.version=this.images[o][a].version+1,this.images[o][a]=m,this.updatedImages[o][a]=!0,this.removeFromImageRasterizerCache(a,o)}removeFromImageRasterizerCache(a,o){this.spriteFormat!=="raster"&&(n.t()?this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",{imageIds:[a],scope:o}):this.imageRasterizer.removeImagesFromCacheByIds([a],o))}removeImage(a,o){const m=this.images[o][a];delete this.images[o][a],delete this.patterns[o][a],this.removeFromImageRasterizerCache(a,o),m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(a){return Object.keys(this.images[a])}getImages(a,o,m){let v=!0;const S=!!this.loaded[o];if(!S)for(const D of a)this.images[o][D]||(v=!1);S||v?this._notify(a,o,m):this.requestors.push({ids:a,scope:o,callback:m})}rasterizeImages({scope:a,imageTasks:o},m){const v={};for(const S in o){const D=o[S],L=this.getImage(D.id,a);L&&(v[S]={image:L,imageIdWithOptions:D})}n.t()?this.imageRasterizerDispatcher.getActor().send("rasterizeImages",{imageTasks:v,scope:a},m):this.rasterizeImagesInMainThread({imageTasks:v,scope:a},m)}rasterizeImagesInMainThread(a,o){const{imageTasks:m,scope:v}=a,S={};for(const D in m){const{image:L,imageIdWithOptions:O}=m[D];S[D]=this.imageRasterizer.rasterize(O,L,v,"")}o(void 0,S)}getUpdatedImages(a){return this.updatedImages[a]}_notify(a,o,m){const v={};for(const S of a){this.images[o][S]||this.fire(new n.z("styleimagemissing",{id:S}));const D=this.images[o][S];D?v[S]={data:D.usvg?null:D.data.clone(),pixelRatio:D.pixelRatio,sdf:D.sdf,usvg:D.usvg,version:D.version,stretchX:D.stretchX,stretchY:D.stretchY,content:D.content,hasRenderCallback:!!(D.userImage&&D.userImage.render)}:n.w(`Image "${S}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}m(null,v)}getPixelSize(a){const{width:o,height:m}=this.atlasImage[a];return{width:o,height:m}}getPattern(a,o,m){const v=this.patterns[o][a],S=this.getImage(a,o);if(!S)return null;if(v&&v.position.version===S.version)return v.position;if(v)v.position.version=S.version;else{S.usvg&&!S.data&&(S.data=this.imageRasterizer.rasterize(n.A.from(a).getPrimary(),S,o,""));const D={w:S.data.width+2*n.B,h:S.data.height+2*n.B,x:0,y:0},L=new n.F(D,S,n.B);this.patterns[o][a]={bin:D,position:L}}return this._updatePatternAtlas(o,m),this.patterns[o][a].position}bind(a,o){const m=a.gl;let v=this.atlasTexture[o];v?this.dirty&&(v.update(this.atlasImage[o]),this.dirty=!1):(v=new n.T(a,this.atlasImage[o],m.RGBA8),this.atlasTexture[o]=v),v.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(a,o){const m=[];for(const L in this.patterns[a])m.push(this.patterns[a][L].bin);const{w:v,h:S}=n.C(m),D=this.atlasImage[a];D.resize({width:v||1,height:S||1});for(const L in this.patterns[a]){const{bin:O,position:U}=this.patterns[a][L];let q=U.padding;const Z=O.x+q,X=O.y+q,ae=this.images[a][L].data,me=ae.width,he=ae.height;q=q>1?q-1:q,n.r.copy(ae,D,{x:0,y:0},{x:Z,y:X},{width:me,height:he},o),n.r.copy(ae,D,{x:0,y:he-q},{x:Z,y:X-q},{width:me,height:q},o),n.r.copy(ae,D,{x:0,y:0},{x:Z,y:X+he},{width:me,height:q},o),n.r.copy(ae,D,{x:me-q,y:0},{x:Z-q,y:X},{width:q,height:he},o),n.r.copy(ae,D,{x:0,y:0},{x:Z+me,y:X},{width:q,height:he},o),n.r.copy(ae,D,{x:me-q,y:he-q},{x:Z-q,y:X-q},{width:q,height:q},o),n.r.copy(ae,D,{x:0,y:he-q},{x:Z+me,y:X-q},{width:q,height:q},o),n.r.copy(ae,D,{x:0,y:0},{x:Z+me,y:X+he},{width:q,height:q},o),n.r.copy(ae,D,{x:me-q,y:0},{x:Z-q,y:X+he},{width:q,height:q},o)}this.dirty=!0}beginFrame(){for(const a in this.images)this.callbackDispatchedThisFrame[a]={}}dispatchRenderCallbacks(a,o){for(const m of a){if(this.callbackDispatchedThisFrame[o][m])continue;this.callbackDispatchedThisFrame[o][m]=!0;const v=this.images[o][m];dt(v)&&this.updateImage(m,o,v)}}}function or(p){const a=p.key,o=p.value,m=p.valueSpec||{},v=p.objectElementValidators||{},S=p.style,D=p.styleSpec;let L=[];const O=n.H(o);if(O!=="object")return[new n.V(a,o,`object expected, ${O} found`)];for(const U in o){const q=U.split(".")[0];let Z;v[q]?Z=v[q]:m[q]?Z=Wr:v["*"]?Z=v["*"]:m["*"]&&(Z=Wr),Z?L=L.concat(Z({key:(a&&`${a}.`)+U,value:o[U],valueSpec:m[q]||m["*"],style:S,styleSpec:D,object:o,objectKey:U},o)):L.push(new n.G(a,o[U],`unknown property "${U}"`))}for(const U in m)v[U]||m[U].required&&m[U].default===void 0&&o[U]===void 0&&L.push(new n.V(a,o,`missing required property "${U}"`));return L}function Er(p){const a=p.value,o=p.valueSpec,m=p.style,v=p.styleSpec,S=p.key,D=p.arrayElementValidator||Wr;if(n.H(a)!=="array")return[new n.V(S,a,`array expected, ${n.H(a)} found`)];if(o.length&&a.length!==o.length)return[new n.V(S,a,`array length ${o.length} expected, length ${a.length} found`)];if(o["min-length"]&&a.length<o["min-length"])return[new n.V(S,a,`array length at least ${o["min-length"]} expected, length ${a.length} found`)];let L={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum,function:void 0};v.$version<7&&(L.function=o.function),n.H(o.value)==="object"&&(L=o.value);let O=[];for(let U=0;U<a.length;U++)O=O.concat(D({array:a,arrayIndex:U,value:a[U],valueSpec:L,style:m,styleSpec:v,key:`${S}[${U}]`},!0));return O}function mr(p){const a=p.key,o=p.value,m=p.valueSpec;let v=n.H(o);if(v==="number"&&o!=o&&(v="NaN"),v!=="number")return[new n.V(a,o,`number expected, ${v} found`)];if("minimum"in m){let S=m.minimum;if(n.H(m.minimum)==="array"&&(S=m.minimum[p.arrayIndex]),o<S)return[new n.V(a,o,`${o} is less than the minimum value ${S}`)]}if("maximum"in m){let S=m.maximum;if(n.H(m.maximum)==="array"&&(S=m.maximum[p.arrayIndex]),o>S)return[new n.V(a,o,`${o} is greater than the maximum value ${S}`)]}return[]}function Pr(p){const a=p.valueSpec,o=n.K(p.value.type);let m,v,S,D={};const L=o!=="categorical"&&p.value.property===void 0,O=!L,U=n.H(p.value.stops)==="array"&&n.H(p.value.stops[0])==="array"&&n.H(p.value.stops[0][0])==="object",q=or({key:p.key,value:p.value,valueSpec:p.styleSpec.function,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{stops:function(ae){if(o==="identity")return[new n.V(ae.key,ae.value,'identity function may not have a "stops" property')];let me=[];const he=ae.value;return me=me.concat(Er({key:ae.key,value:he,valueSpec:ae.valueSpec,style:ae.style,styleSpec:ae.styleSpec,arrayElementValidator:Z})),n.H(he)==="array"&&he.length===0&&me.push(new n.V(ae.key,he,"array must have at least one stop")),me},default:function(ae){return Wr({key:ae.key,value:ae.value,valueSpec:a,style:ae.style,styleSpec:ae.styleSpec})}}});return o==="identity"&&L&&q.push(new n.V(p.key,p.value,'missing required property "property"')),o==="identity"||p.value.stops||q.push(new n.V(p.key,p.value,'missing required property "stops"')),o==="exponential"&&p.valueSpec.expression&&!n.L(p.valueSpec)&&q.push(new n.V(p.key,p.value,"exponential functions not supported")),p.styleSpec.$version>=8&&(O&&!n.M(p.valueSpec)?q.push(new n.V(p.key,p.value,"property functions not supported")):L&&!n.N(p.valueSpec)&&q.push(new n.V(p.key,p.value,"zoom functions not supported"))),o!=="categorical"&&!U||p.value.property!==void 0||q.push(new n.V(p.key,p.value,'"property" property is required')),q;function Z(ae){let me=[];const he=ae.value,xe=ae.key;if(n.H(he)!=="array")return[new n.V(xe,he,`array expected, ${n.H(he)} found`)];if(he.length!==2)return[new n.V(xe,he,`array length 2 expected, length ${he.length} found`)];if(U){if(n.H(he[0])!=="object")return[new n.V(xe,he,`object expected, ${n.H(he[0])} found`)];if(he[0].zoom===void 0)return[new n.V(xe,he,"object stop key must have zoom")];if(he[0].value===void 0)return[new n.V(xe,he,"object stop key must have value")];const _e=n.K(he[0].zoom);if(typeof _e!="number")return[new n.V(xe,he[0].zoom,"stop zoom values must be numbers")];if(S&&S>_e)return[new n.V(xe,he[0].zoom,"stop zoom values must appear in ascending order")];_e!==S&&(S=_e,v=void 0,D={}),me=me.concat(or({key:`${xe}[0]`,value:he[0],valueSpec:{zoom:{}},style:ae.style,styleSpec:ae.styleSpec,objectElementValidators:{zoom:mr,value:X}}))}else me=me.concat(X({key:`${xe}[0]`,value:he[0],style:ae.style,styleSpec:ae.styleSpec},he));return n.O(n.Q(he[1]))?me.concat([new n.V(`${xe}[1]`,he[1],"expressions are not allowed in function stops.")]):me.concat(Wr({key:`${xe}[1]`,value:he[1],valueSpec:a,style:ae.style,styleSpec:ae.styleSpec}))}function X(ae,me){const he=n.H(ae.value),xe=n.K(ae.value),_e=ae.value!==null?ae.value:me;if(m){if(he!==m)return[new n.V(ae.key,_e,`${he} stop domain type must match previous stop domain type ${m}`)]}else m=he;if(he!=="number"&&he!=="string"&&he!=="boolean"&&typeof xe!="number"&&typeof xe!="string"&&typeof xe!="boolean")return[new n.V(ae.key,_e,"stop domain value must be a number, string, or boolean")];if(he!=="number"&&o!=="categorical"){let Me=`number expected, ${he} found`;return n.M(a)&&o===void 0&&(Me+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new n.V(ae.key,_e,Me)]}return o!=="categorical"||he!=="number"||typeof xe=="number"&&isFinite(xe)&&Math.floor(xe)===xe?o!=="categorical"&&he==="number"&&typeof xe=="number"&&typeof v=="number"&&v!==void 0&&xe<v?[new n.V(ae.key,_e,"stop domain values must appear in ascending order")]:(v=xe,o==="categorical"&&xe in D?[new n.V(ae.key,_e,"stop domain values must be unique")]:(D[xe]=!0,[])):[new n.V(ae.key,_e,`integer expected, found ${String(xe)}`)]}}function Fr(p){const a=(p.expressionContext==="property"?n.S:n.U)(n.Q(p.value),p.valueSpec);if(a.result==="error")return a.value.map(m=>new n.V(`${p.key}${m.key}`,p.value,m.message));const o=a.value.expression||a.value._styleExpression.expression;if(p.expressionContext==="property"&&p.propertyKey==="text-font"&&!o.outputDefined())return[new n.V(p.key,p.value,`Invalid data expression for "${p.propertyKey}". Output values must be contained as literals within the expression.`)];if(p.expressionContext==="property"&&p.propertyType==="layout"&&!n.W(o))return[new n.V(p.key,p.value,'"feature-state" data expressions are not supported with layout properties.')];if(p.expressionContext==="filter")return $a(o,p);if(p.expressionContext&&p.expressionContext.indexOf("cluster")===0){if(!n.X(o,["zoom","feature-state"]))return[new n.V(p.key,p.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(p.expressionContext==="cluster-initial"&&!n.Y(o))return[new n.V(p.key,p.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $a(p,a){const o=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(a.valueSpec&&a.valueSpec.expression)for(const v of a.valueSpec.expression.parameters)o.delete(v);if(o.size===0)return[];const m=[];return p instanceof n.Z&&o.has(p.name)?[new n.V(a.key,a.value,`["${p.name}"] expression is not supported in a filter for a ${a.object.type} layer with id: ${a.object.id}`)]:(p.eachChild(v=>{m.push(...$a(v,a))}),m)}function Xr(p){const a=p.key,o=p.value,m=p.valueSpec,v=[];return Array.isArray(m.values)?m.values.indexOf(n.K(o))===-1&&v.push(new n.V(a,o,`expected one of [${m.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(m.values).indexOf(n.K(o))===-1&&v.push(new n.V(a,o,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(o)} found`)),v}function ja(p){return n.$(n.Q(p.value))?Fr(n.J({},p,{expressionContext:"filter",valueSpec:p.styleSpec[`filter_${p.layerType||"fill"}`]})):fr(p)}function fr(p){const a=p.value,o=p.key;if(n.H(a)!=="array")return[new n.V(o,a,`array expected, ${n.H(a)} found`)];const m=p.styleSpec;let v,S=[];if(a.length<1)return[new n.V(o,a,"filter array must have at least 1 element")];switch(S=S.concat(Xr({key:`${o}[0]`,value:a[0],valueSpec:m.filter_operator,style:p.style,styleSpec:p.styleSpec})),n.K(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&n.K(a[1])==="$type"&&S.push(new n.V(o,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&S.push(new n.V(o,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(v=n.H(a[1]),v!=="string"&&S.push(new n.V(`${o}[1]`,a[1],`string expected, ${v} found`)));for(let D=2;D<a.length;D++)v=n.H(a[D]),n.K(a[1])==="$type"?S=S.concat(Xr({key:`${o}[${D}]`,value:a[D],valueSpec:m.geometry_type,style:p.style,styleSpec:p.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&S.push(new n.V(`${o}[${D}]`,a[D],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let D=1;D<a.length;D++)S=S.concat(fr({key:`${o}[${D}]`,value:a[D],style:p.style,styleSpec:p.styleSpec}));break;case"has":case"!has":v=n.H(a[1]),a.length!==2?S.push(new n.V(o,a,`filter array for "${a[0]}" operator must have 2 elements`)):v!=="string"&&S.push(new n.V(`${o}[1]`,a[1],`string expected, ${v} found`))}return S}function Sa(p,a){const o=p.key,m=p.style,v=p.layer,S=p.styleSpec,D=p.value,L=p.objectKey,O=S[`${a}_${p.layerType}`];if(!O)return[];const U=L.match(/^(.*)-use-theme$/);if(a==="paint"&&U&&O[U[1]])return Wr({key:o,value:D,valueSpec:{type:"string"},style:m,styleSpec:S});const q=L.match(/^(.*)-transition$/);if(a==="paint"&&q&&O[q[1]]&&O[q[1]].transition)return Wr({key:o,value:D,valueSpec:S.transition,style:m,styleSpec:S});const Z=p.valueSpec||O[L];if(!Z)return[new n.G(o,D,`unknown property "${L}"`)];let X;if(n.H(D)==="string"&&n.M(Z)&&!Z.tokens&&(X=/^{([^}]+)}$/.exec(D))){const me=`\`{ "type": "identity", "property": ${X?JSON.stringify(X[1]):'"_"'} }\``;return[new n.V(o,D,`"${L}" does not support interpolation syntax
Use an identity property function instead: ${me}.`)]}const ae=[];if(p.layerType==="symbol")L!=="text-field"||!m||m.glyphs||m.imports||ae.push(new n.V(o,D,'use of "text-field" requires a style "glyphs" property')),L==="text-font"&&n.a0(n.Q(D))&&n.K(D.type)==="identity"&&ae.push(new n.V(o,D,'"text-font" does not support identity functions'));else if(p.layerType==="model"&&a==="paint"&&v&&v.layout&&v.layout.hasOwnProperty("model-id")&&n.M(Z)&&(n.a1(Z)||n.N(Z))){const me=n.S(n.Q(D),Z),he=me.value.expression||me.value._styleExpression.expression;he&&!n.X(he,["measure-light"])&&(L==="model-emissive-strength"&&n.Y(he)&&n.W(he)||ae.push(new n.V(o,D,`${L} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return ae.concat(Wr({key:p.key,value:D,valueSpec:Z,style:m,styleSpec:S,expressionContext:"property",propertyType:a,propertyKey:L}))}function kr(p){return Sa(p,"paint")}function Dr(p){return Sa(p,"layout")}function Nr(p){let a=[];const o=p.value,m=p.key,v=p.style,S=p.styleSpec;o.type||o.ref||a.push(new n.V(m,o,'either "type" or "ref" is required'));let D=n.K(o.type);const L=n.K(o.ref);if(o.id){const O=n.K(o.id);for(let U=0;U<p.arrayIndex;U++){const q=v.layers[U];n.K(q.id)===O&&a.push(new n.V(m,o.id,`duplicate layer id "${o.id}", previously used at line ${q.id.__line__}`))}}if("ref"in o){let O;["type","source","source-layer","filter","layout"].forEach(U=>{U in o&&a.push(new n.V(m,o[U],`"${U}" is prohibited for ref layers`))}),v.layers.forEach(U=>{n.K(U.id)===L&&(O=U)}),O?O.ref?a.push(new n.V(m,o.ref,"ref cannot reference another ref layer")):D=n.K(O.type):typeof L=="string"&&a.push(new n.V(m,o.ref,`ref layer "${L}" not found`))}else if(D!=="background"&&D!=="sky"&&D!=="slot")if(o.source){const O=v.sources&&v.sources[o.source],U=O&&n.K(O.type);O?U==="vector"&&D==="raster"?a.push(new n.V(m,o.source,`layer "${o.id}" requires a raster source`)):U==="raster"&&D!=="raster"?a.push(new n.V(m,o.source,`layer "${o.id}" requires a vector source`)):U!=="vector"||o["source-layer"]?U==="raster-dem"&&D!=="hillshade"?a.push(new n.V(m,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):U!=="raster-array"||["raster","raster-particle"].includes(D)?D!=="line"||!o.paint||!o.paint["line-gradient"]&&!o.paint["line-trim-offset"]||U==="geojson"&&O.lineMetrics?D==="raster-particle"&&U!=="raster-array"&&a.push(new n.V(m,o.source,`layer "${o.id}" requires a 'raster-array' source.`)):a.push(new n.V(m,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new n.V(m,o.source,"raster-array source can only be used with layer type 'raster'.")):a.push(new n.V(m,o,`layer "${o.id}" must specify a "source-layer"`)):a.push(new n.V(m,o.source,`source "${o.source}" not found`))}else a.push(new n.V(m,o,'missing required property "source"'));return a=a.concat(or({key:m,value:o,valueSpec:S.layer,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Wr({key:`${m}.type`,value:o.type,valueSpec:S.layer.type,style:p.style,styleSpec:p.styleSpec,object:o,objectKey:"type"}),filter:O=>ja(n.J({layerType:D},O)),layout:O=>or({layer:o,key:O.key,value:O.value,valueSpec:{},style:O.style,styleSpec:O.styleSpec,objectElementValidators:{"*":U=>Dr(n.J({layerType:D},U))}}),paint:O=>or({layer:o,key:O.key,value:O.value,valueSpec:{},style:O.style,styleSpec:O.styleSpec,objectElementValidators:{"*":U=>kr(n.J({layerType:D,layer:o},U))}})}})),a}function na(p){const a=p.value,o=p.key,m=n.H(a);return m!=="string"?[new n.V(o,a,`string expected, ${m} found`)]:[]}const Sn={promoteId:function({key:p,value:a}){if(n.H(a)==="string")return na({key:p,value:a});{const o=[];for(const m in a)o.push(...na({key:`${p}.${m}`,value:a[m]}));return o}}};function Zn(p){const a=p.value,o=p.key,m=p.styleSpec,v=p.style;if(!a.type)return[new n.V(o,a,'"type" is required')];const S=n.K(a.type);let D=[];switch(["vector","raster","raster-dem","raster-array"].includes(S)&&(a.url||a.tiles||D.push(new n.G(o,a,'Either "url" or "tiles" is required.'))),S){case"vector":case"raster":case"raster-dem":case"raster-array":return D=D.concat(or({key:o,value:a,valueSpec:m[`source_${S.replace("-","_")}`],style:p.style,styleSpec:m,objectElementValidators:Sn})),D;case"geojson":if(D=or({key:o,value:a,valueSpec:m.source_geojson,style:v,styleSpec:m,objectElementValidators:Sn}),a.cluster)for(const L in a.clusterProperties){const[O,U]=a.clusterProperties[L],q=typeof O=="string"?[O,["accumulated"],["get",L]]:O;D.push(...Fr({key:`${o}.${L}.map`,value:U,expressionContext:"cluster-map"})),D.push(...Fr({key:`${o}.${L}.reduce`,value:q,expressionContext:"cluster-reduce"}))}return D;case"video":return or({key:o,value:a,valueSpec:m.source_video,style:v,styleSpec:m});case"image":return or({key:o,value:a,valueSpec:m.source_image,style:v,styleSpec:m});case"canvas":return[new n.V(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xr({key:`${o}.type`,value:a.type,valueSpec:{values:on(m)}})}}function on(p){return p.source.reduce((a,o)=>{const m=p[o];return m.type.type==="enum"&&(a=a.concat(Object.keys(m.type.values))),a},[])}function Ha(p){const a=p.value,o=p.styleSpec,m=o.light,v=p.style;let S=[];const D=n.H(a);if(a===void 0)return S;if(D!=="object")return S=S.concat([new n.V("light",a,`object expected, ${D} found`)]),S;for(const L in a){const O=L.match(/^(.*)-transition$/),U=L.match(/^(.*)-use-theme$/);S=S.concat(U&&m[U[1]]?Wr({key:L,value:a[L],valueSpec:{type:"string"},style:v,styleSpec:o}):O&&m[O[1]]&&m[O[1]].transition?Wr({key:L,value:a[L],valueSpec:o.transition,style:v,styleSpec:o}):m[L]?Wr({key:L,value:a[L],valueSpec:m[L],style:v,styleSpec:o}):[new n.V(L,a[L],`unknown property "${L}"`)])}return S}function qa(p){const a=p.value;let o=[];if(!a)return o;const m=n.H(a);if(m!=="object")return o=o.concat([new n.V("light-3d",a,`object expected, ${m} found`)]),o;const v=p.styleSpec,S=v["light-3d"],D=p.key,L=p.style,O=p.style.lights;for(const Z of["type","id"])if(!(Z in a))return o=o.concat([new n.V("light-3d",a,`missing property ${Z} on light`)]),o;if(a.type&&O)for(let Z=0;Z<p.arrayIndex;Z++){const X=n.K(a.type),ae=O[Z];n.K(ae.type)===X&&o.push(new n.V(D,a.id,`duplicate light type "${a.type}", previously defined at line ${ae.id.__line__}`))}const U=`properties_light_${a.type}`;if(!(U in v))return o=o.concat([new n.V("light-3d",a,`Invalid light type ${a.type}`)]),o;const q=v[U];for(const Z in a)if(Z==="properties"){const X=a[Z],ae=n.H(X);if(ae!=="object")return o=o.concat([new n.V("properties",X,`object expected, ${ae} found`)]),o;for(const me in X)o=o.concat(q[me]?Wr({key:me,value:X[me],valueSpec:q[me],style:L,styleSpec:v}):[new n.G(p.key,X[me],`unknown property "${me}"`)])}else{const X=Z.match(/^(.*)-transition$/),ae=Z.match(/^(.*)-use-theme$/);o=o.concat(ae&&S[ae[1]]?Wr({key:Z,value:a[Z],valueSpec:{type:"string"},style:L,styleSpec:v}):X&&S[X[1]]&&S[X[1]].transition?Wr({key:Z,value:a[Z],valueSpec:v.transition,style:L,styleSpec:v}):S[Z]?Wr({key:Z,value:a[Z],valueSpec:S[Z],style:L,styleSpec:v}):[new n.G(Z,a[Z],`unknown property "${Z}"`)])}return o}function Dn(p){const a=p.value,o=p.key,m=p.style,v=p.styleSpec,S=v.terrain;let D=[];const L=n.H(a);if(a===void 0||L==="null")return D;if(L!=="object")return D=D.concat([new n.V("terrain",a,`object expected, ${L} found`)]),D;for(const O in a){const U=O.match(/^(.*)-transition$/),q=O.match(/^(.*)-use-theme$/);D=D.concat(q&&S[q[1]]?Wr({key:O,value:a[O],valueSpec:{type:"string"},style:m,styleSpec:v}):U&&S[U[1]]&&S[U[1]].transition?Wr({key:O,value:a[O],valueSpec:v.transition,style:m,styleSpec:v}):S[O]?Wr({key:O,value:a[O],valueSpec:S[O],style:m,styleSpec:v}):[new n.G(O,a[O],`unknown property "${O}"`)])}if(a.source){const O=m.sources&&m.sources[a.source],U=O&&n.K(O.type);O?U!=="raster-dem"&&D.push(new n.V(o,a.source,`terrain cannot be used with a source of type ${String(U)}, it only be used with a "raster-dem" source type`)):D.push(new n.V(o,a.source,`source "${a.source}" not found`))}else D.push(new n.V(o,a,'terrain is missing required property "source"'));return D}function In(p){const a=p.value,o=p.style,m=p.styleSpec,v=m.fog;let S=[];const D=n.H(a);if(a===void 0)return S;if(D!=="object")return S=S.concat([new n.V("fog",a,`object expected, ${D} found`)]),S;for(const L in a){const O=L.match(/^(.*)-transition$/),U=L.match(/^(.*)-use-theme$/);S=S.concat(U&&v[U[1]]?Wr({key:L,value:a[L],valueSpec:{type:"string"},style:o,styleSpec:m}):O&&v[O[1]]&&v[O[1]].transition?Wr({key:L,value:a[L],valueSpec:m.transition,style:o,styleSpec:m}):v[L]?Wr({key:L,value:a[L],valueSpec:v[L],style:o,styleSpec:m}):[new n.G(L,a[L],`unknown property "${L}"`)])}return S}const jn={"*":()=>[],array:Er,boolean:function(p){const a=p.value,o=p.key,m=n.H(a);return m!=="boolean"?[new n.V(o,a,`boolean expected, ${m} found`)]:[]},number:mr,color:function(p){const a=p.key,o=p.value,m=n.H(o);return m!=="string"?[new n.V(a,o,`color expected, ${m} found`)]:n._.parseCSSColor(o)===null?[new n.V(a,o,`color expected, "${o}" found`)]:[]},enum:Xr,filter:ja,function:Pr,layer:Nr,object:or,source:Zn,model:n.a2,light:Ha,"light-3d":qa,terrain:Dn,fog:In,string:na,formatted:function(p){return na(p).length===0?[]:Fr(p)},resolvedImage:function(p){return na(p).length===0?[]:Fr(p)},projection:function(p){const a=p.value,o=p.styleSpec,m=o.projection,v=p.style;let S=[];const D=n.H(a);if(D==="object")for(const L in a)S=S.concat(Wr({key:L,value:a[L],valueSpec:m[L],style:v,styleSpec:o}));else D!=="string"&&(S=S.concat([new n.V("projection",a,`object or string expected, ${D} found`)]));return S},import:function(p){const{value:a,styleSpec:o}=p,{data:m,...v}=a;Object.defineProperty(v,"__line__",{value:a.__line__,enumerable:!1});let S=or(n.J({},p,{value:v,valueSpec:o.import}));return n.K(v.id)===""&&S.push(new n.V(`${p.key}.id`,v,"import id can't be an empty string")),m&&(S=S.concat(Ka(m,o,{key:`${p.key}.data`}))),S}};function Wr(p,a=!1){const o=p.value,m=p.valueSpec,v=p.styleSpec;if(m.expression&&n.a0(n.K(o)))return Pr(p);if(m.expression&&n.O(n.Q(o)))return Fr(p);if(m.type&&jn[m.type]){const S=jn[m.type](p);return a===!0&&S.length>0&&n.H(p.value)==="array"?Fr(p):S}return or(n.J({},p,{valueSpec:m.type?v[m.type]:m}))}function yi(p){const a=p.value,o=p.key,m=na(p);return m.length||(a.indexOf("{fontstack}")===-1&&m.push(new n.V(o,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&m.push(new n.V(o,a,'"glyphs" url must include a "{range}" token'))),m}function Ka(p,a=n.a3,o={}){return Wr({key:o.key||"",value:p,valueSpec:a.$root,styleSpec:a,style:p,objectElementValidators:{glyphs:yi,"*":()=>[]}})}function la(p,a=n.a3){return bt(Ka(p,a))}const yn=p=>bt(Zn(p)),Xn=p=>bt(Ha(p)),js=p=>bt(qa(p)),qn=p=>bt(Dn(p)),ga=p=>bt(In(p)),St=p=>bt(function(a){const o=a.value,m=a.style,v=a.styleSpec,S=v.snow;let D=[];const L=n.H(o);if(o===void 0)return D;if(L!=="object")return D=D.concat([new n.V("snow",o,`object expected, ${L} found`)]),D;for(const O in o){const U=O.match(/^(.*)-transition$/);D=D.concat(U&&S[U[1]]&&S[U[1]].transition?Wr({key:O,value:o[O],valueSpec:v.transition,style:m,styleSpec:v}):S[O]?Wr({key:O,value:o[O],valueSpec:S[O],style:m,styleSpec:v}):[new n.G(O,o[O],`unknown property "${O}"`)])}return D}(p)),ye=p=>bt(function(a){const o=a.value,m=a.style,v=a.styleSpec,S=v.rain;let D=[];const L=n.H(o);if(o===void 0)return D;if(L!=="object")return D=D.concat([new n.V("rain",o,`object expected, ${L} found`)]),D;for(const O in o){const U=O.match(/^(.*)-transition$/);D=D.concat(U&&S[U[1]]&&S[U[1]].transition?Wr({key:O,value:o[O],valueSpec:v.transition,style:m,styleSpec:v}):S[O]?Wr({key:O,value:o[O],valueSpec:S[O],style:m,styleSpec:v}):[new n.G(O,o[O],`unknown property "${O}"`)])}return D}(p)),Ce=p=>bt(Nr(p)),Fe=p=>bt(ja(p)),Ye=p=>bt(kr(p)),Qe=p=>bt(Dr(p)),ct=p=>bt(n.a2(p));function bt(p){return p.slice().sort((a,o)=>a.line&&o.line?a.line-o.line:0)}function ft(p,a){let o=!1;if(a&&a.length)for(const m of a)m instanceof n.G?n.w(m.message):(p.fire(new n.y(new Error(m.message))),o=!0);return o}let pt;class At extends n.E{constructor(a,o="flat"){super(),this._transitionable=new n.a4(pt||(pt=new n.a5({anchor:new n.a6(n.a3.light.anchor),position:new n.a7(n.a3.light.position),color:new n.a6(n.a3.light.color),intensity:new n.a6(n.a3.light.intensity)}))),this.setLight(a,o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,o,m={}){this._validate(Xn,a,m)||(this._transitionable.setTransitionOrValue(a),this.id=o)}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,o,m){return(!m||m.validate!==!1)&&ft(this,a.call(la,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a3})))}}let It=class extends n.E{constructor(p,a,o,m){super(),this.scope=o,this._transitionable=new n.a4(new n.a5({source:new n.a6(n.a3.terrain.source),exaggeration:new n.a6(n.a3.terrain.exaggeration)}),o,m),this._transitionable.setTransitionOrValue(p,m),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=a}get(){return this._transitionable.serialize()}set(p,a){this._transitionable.setTransitionOrValue(p,a)}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}getExaggeration(p){return this._transitioning.possiblyEvaluate(new n.a8(p)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const p=this._transitionable._values.exaggeration;if(!p)return null;const a=p.value.expression;if(!a)return null;let o=-1,m=-1,v=1;for(const S of a.zoomStops)v=a.evaluate(new n.a8(S)),v>.01?(o=S,m=-1):m=S;return v<.01&&o>0&&m>o?[o,m]:null}isZoomDependent(){const p=this._transitionable._values.exaggeration;return p!=null&&p.value!=null&&p.value.expression!=null&&p.value.expression instanceof n.a9}};const Jt=45,Gt=65,cr=.05;function Ur(p,a,o,m){const v=n.ac(Jt,Gt,o),[S,D]=Jr(p,m);let L=1-Math.min(1,Math.exp((a-S)/(D-S)*-6));return L*=L*L,L=Math.min(1,1.00747*L),L*v*p.alpha}function Jr(p,a){const o=.5/Math.tan(.5*a);return[p.range[0]+o,p.range[1]+o]}function Lr(p,a,o,m,v){const S=n.ab.vec3.transformMat4([],[a,o,m],v.mercatorFogMatrix);return Ur(p,n.ab.vec3.length(S),v.pitch,v._fov)}function Qr(p,a,o,m,v,S,D){const L=[[o,m,0],[v,m,0],[v,S,0],[o,S,0]];let O=Number.MAX_VALUE,U=-Number.MAX_VALUE;for(const q of L){const Z=n.ab.vec3.transformMat4([],q,a),X=n.ab.vec3.length(Z);O=Math.min(O,X),U=Math.max(U,X)}return[Ur(p,O,D.pitch,D._fov),Ur(p,U,D.pitch,D._fov)]}class Xa extends n.E{constructor(a,o,m,v){super();const S=new n.a5({range:new n.a6(n.a3.fog.range),color:new n.a6(n.a3.fog.color),"color-use-theme":new n.a6({type:"string","property-type":"data-constant",default:"default"}),"high-color":new n.a6(n.a3.fog["high-color"]),"high-color-use-theme":new n.a6({type:"string","property-type":"data-constant",default:"default"}),"space-color":new n.a6(n.a3.fog["space-color"]),"space-color-use-theme":new n.a6({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new n.a6(n.a3.fog["horizon-blend"]),"star-intensity":new n.a6(n.a3.fog["star-intensity"]),"vertical-range":new n.a6(n.a3.fog["vertical-range"])});this._transitionable=new n.a4(S,m,new Map(v)),this.set(a,v),this._transitioning=this._transitionable.untransitioned(),this._transform=o,this.properties=new n.ad(S),this.scope=m}get state(){const a=this._transform,o=a.projection.name==="globe",m=n.ae(a.zoom),v=this.properties.get("range"),S=[.5,3];return{range:o?[n.af(S[0],v[0],m),n.af(S[1],v[1],m)]:v,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(a,o,m={}){if(this._validate(ga,a,m))return;const v=n.l({},a);for(const S of Object.keys(n.a3.fog))v[S]===void 0&&(v[S]=n.a3.fog[S].default);this._options=v,this._transitionable.setTransitionOrValue(this._options,o)}getOpacity(a){if(!this._transform.projection.supportsFog)return 0;const o=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:n.ac(Jt,Gt,a))*o.a}getOpacityAtLatLng(a,o){return this._transform.projection.supportsFog?function(m,v,S){const D=n.aa.fromLngLat(v),L=S.elevation?S.elevation.getAtPointOrZero(D):0;return Lr(m,D.x,D.y,L,S)}(this.state,a,o):0}getOpacityForTile(a){if(!this._transform.projection.supportsFog)return[1,1];const o=this._transform.calculateFogTileMatrix(a.toUnwrapped());return Qr(this.state,o,0,0,n.ag,n.ag,this._transform)}getOpacityForBounds(a,o,m,v,S){return this._transform.projection.supportsFog?Qr(this.state,a,o,m,v,S,this._transform):[1,1]}getFovAdjustedRange(a){return this._transform.projection.supportsFog?Jr(this.state,a):[0,1]}isVisibleOnFrustum(a){if(!this._transform.projection.supportsFog)return!1;const o=[4,5,6,7];for(const m of o){const v=a.points[m];let S;if(v[2]>=0)S=v;else{const D=a.points[m-4];S=n.ah(D,v,D[2]/(D[2]-v[2]))}if(Lr(this.state,S[0],S[1],0,this._transform)>=cr)return!0}return!1}updateConfig(a){this._transitionable.setTransitionOrValue(this._options,new Map(a))}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,o,m){return(!m||m.validate!==!1)&&ft(this,a.call(la,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a3})))}}let Ca,ca,Ya,Ja,ei=class extends n.E{constructor(p,a,o,m){super();const v=Ca||(Ca=new n.a5({density:new n.a6(n.a3.snow.density),intensity:new n.a6(n.a3.snow.intensity),color:new n.a6(n.a3.snow.color),opacity:new n.a6(n.a3.snow.opacity),vignette:new n.a6(n.a3.snow.vignette),"vignette-color":new n.a6(n.a3.snow["vignette-color"]),"center-thinning":new n.a6(n.a3.snow["center-thinning"]),direction:new n.a6(n.a3.snow.direction),"flake-size":new n.a6(n.a3.snow["flake-size"])}));this._transitionable=new n.a4(v,o,new Map(m)),this.set(p,m),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.ad(v),this.scope=o}get state(){const p=this.properties.get("opacity"),a=this.properties.get("color"),o=this.properties.get("direction"),m=n.ai(o[0]),v=-Math.max(n.ai(o[1]),.01),S=[Math.cos(m)*Math.cos(v),Math.sin(m)*Math.cos(v),Math.sin(v)],D=this.properties.get("vignette"),L=this.properties.get("vignette-color");return L.a=D,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.aj(a.r,a.g,a.b,a.a*p),direction:S,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:L}}get(){return this._transitionable.serialize()}set(p,a,o={}){if(this._validate(St,p,o))return;const m=n.l({},p);for(const v of Object.keys(n.a3.snow))m[v]===void 0&&(m[v]=n.a3.snow[v].default);this._options=m,this._transitionable.setTransitionOrValue(this._options,a)}updateConfig(p){this._transitionable.setTransitionOrValue(this._options,new Map(p))}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}_validate(p,a,o){return(!o||o.validate!==!1)&&ft(this,p.call(la,n.l({value:a,style:{glyphs:!0,sprite:!0},styleSpec:n.a3})))}},_s=class extends n.E{constructor(p,a,o,m){super();const v=ca||(ca=new n.a5({density:new n.a6(n.a3.rain.density),intensity:new n.a6(n.a3.rain.intensity),color:new n.a6(n.a3.rain.color),opacity:new n.a6(n.a3.rain.opacity),vignette:new n.a6(n.a3.rain.vignette),"vignette-color":new n.a6(n.a3.rain["vignette-color"]),"center-thinning":new n.a6(n.a3.rain["center-thinning"]),direction:new n.a6(n.a3.rain.direction),"droplet-size":new n.a6(n.a3.rain["droplet-size"]),"distortion-strength":new n.a6(n.a3.rain["distortion-strength"])}));this._transitionable=new n.a4(v,o,new Map(m)),this.set(p,m),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.ad(v),this.scope=o}get state(){const p=this.properties.get("opacity"),a=this.properties.get("color"),o=this.properties.get("direction"),m=n.ai(o[0]),v=-Math.max(n.ai(o[1]),.01),S=[Math.cos(m)*Math.cos(v),Math.sin(m)*Math.cos(v),Math.sin(v)],D=this.properties.get("vignette-color");return D.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.aj(a.r,a.g,a.b,a.a*p),direction:S,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:D}}get(){return this._transitionable.serialize()}set(p,a,o={}){if(this._validate(ye,p,o))return;const m=n.l({},p);for(const v of Object.keys(n.a3.rain))m[v]===void 0&&(m[v]=n.a3.rain[v].default);this._options=m,this._transitionable.setTransitionOrValue(this._options,a)}updateConfig(p){this._transitionable.setTransitionOrValue(this._options,new Map(p))}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}_validate(p,a,o){return(!o||o.validate!==!1)&&ft(this,p.call(la,n.l({value:a,style:{glyphs:!0,sprite:!0},styleSpec:n.a3})))}};class oi extends n.E{constructor(a,o,m,v){super(),this.scope=m,this._options=a,this.properties=new n.ad(o),this._transitionable=new n.a4(o,m,new Map(v)),this._transitionable.setTransitionOrValue(a.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(a){this._transitionable.setTransitionOrValue(this._options.properties,new Map(a))}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(a,o){this._options=a,this._transitionable.setTransitionOrValue(a.properties,o)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class hi{constructor(a,o,m,v){this.screenBounds=a,this.cameraPoint=o,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=m,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(a,o){let m,v;if(a instanceof n.P||typeof a[0]=="number"){const S=n.P.convert(a);m=[S],v=o.isPointAboveHorizon(S)}else{const S=n.P.convert(a[0]),D=n.P.convert(a[1]);m=[S,D],v=n.al(S,D).every(L=>o.isPointAboveHorizon(L))}return new hi(m,o.getCameraPoint(),v,o)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(a){return n.al(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],a)}bufferedCameraGeometry(a){const o=this.screenBounds[0],m=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],v=n.al(o,m,0,!1);return this.cameraPoint.y>m.y&&(this.cameraPoint.x>o.x&&this.cameraPoint.x<m.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=m.x?v[2]=this.cameraPoint:this.cameraPoint.x<=o.x&&(v[3]=this.cameraPoint)),n.am(v,a)}bufferedCameraGeometryGlobe(a){const o=this.screenBounds[0],m=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],v=n.al(o,m,a),S=this.cameraPoint.clone();switch(3*((S.y>o.y)+(S.y>m.y))+((S.x>o.x)+(S.x>m.x))){case 0:v[0]=S,v[4]=S.clone();break;case 1:v.splice(1,0,S);break;case 2:v[1]=S;break;case 3:v.splice(4,0,S);break;case 5:v.splice(2,0,S);break;case 6:v[3]=S;break;case 7:v.splice(3,0,S);break;case 8:v[2]=S}return v}containsTile(a,o,m,v=0){const S=a.queryPadding/o._pixelsPerMercatorPixel+1,D=m?this._bufferedCameraMercator(S,o):this._bufferedScreenMercator(S,o);let L=a.tileID.wrap+(D.unwrapped?v:0);const O=D.polygon.map(xe=>n.an(a.tileTransform,xe,L));if(!n.ao(O,0,0,n.ag,n.ag))return;L=a.tileID.wrap+(this.screenGeometryMercator.unwrapped?v:0);const U=this.screenGeometryMercator.polygon.map(xe=>n.ap(a.tileTransform,xe,L)),q=U.map(xe=>new n.P(xe[0],xe[1])),Z=o.getFreeCameraOptions().position||new n.aa(0,0,0),X=n.ap(a.tileTransform,Z,L),ae=U.map(xe=>{const _e=n.ab.vec3.sub(xe,xe,X);return n.ab.vec3.normalize(_e,_e),new n.aq(X,_e)}),me=n.ar(a,1,o.zoom)*o._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:q,tilespaceRays:ae,bufferedTilespaceGeometry:O,bufferedTilespaceBounds:(he=n.as(O),he.min.x=n.aw(he.min.x,0,n.ag),he.min.y=n.aw(he.min.y,0,n.ag),he.max.x=n.aw(he.max.x,0,n.ag),he.max.y=n.aw(he.max.y,0,n.ag),he),tile:a,tileID:a.tileID,pixelToTileUnitsFactor:me};var he}_bufferedScreenMercator(a,o){const m=Hf(a);if(this._screenRaycastCache[m])return this._screenRaycastCache[m];{let v;return v=o.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(a),o):{polygon:this.bufferedScreenGeometry(a).map(S=>o.pointCoordinate3D(S)),unwrapped:!0},this._screenRaycastCache[m]=v,v}}_bufferedCameraMercator(a,o){const m=Hf(a);if(this._cameraRaycastCache[m])return this._cameraRaycastCache[m];{let v;return v=o.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(a),o):{polygon:this.bufferedCameraGeometry(a).map(S=>o.pointCoordinate3D(S)),unwrapped:!0},this._cameraRaycastCache[m]=v,v}}_projectAndResample(a,o){const m=function(S,D){const L=n.ab.mat4.multiply([],D.pixelMatrix,D.globeMatrix),O=[0,-n.ax,0,1],U=[0,n.ax,0,1],q=[0,0,0,1];n.ab.vec4.transformMat4(O,O,L),n.ab.vec4.transformMat4(U,U,L),n.ab.vec4.transformMat4(q,q,L);const Z=new n.P(O[0]/O[3],O[1]/O[3]),X=new n.P(U[0]/U[3],U[1]/U[3]),ae=n.au(S,Z)&&O[3]<q[3],me=n.au(S,X)&&U[3]<q[3];if(!ae&&!me)return null;const he=function(We,qe,tt){for(let rt=1;rt<We.length;rt++){const Et=So(qe.pointCoordinate3D(We[rt-1]).x),_t=So(qe.pointCoordinate3D(We[rt]).x);if(tt<0){if(Et<_t)return{idx:rt,t:-Et/(_t-1-Et)}}else if(_t<Et)return{idx:rt,t:(1-Et)/(_t+1-Et)}}return null}(S,D,ae?-1:1);if(!he)return null;const{idx:xe,t:_e}=he;let Me=xe>1?As(S.slice(0,xe),D):[],Be=xe<S.length?As(S.slice(xe),D):[];Me=Me.map(We=>new n.P(So(We.x),We.y)),Be=Be.map(We=>new n.P(So(We.x),We.y));const Oe=[...Me];Oe.length===0&&Oe.push(Be[Be.length-1]);const Ze=n.af(Oe[Oe.length-1].y,(Be.length===0?Me[0]:Be[0]).y,_e);let Ue;return Ue=ae?[new n.P(0,Ze),new n.P(0,0),new n.P(1,0),new n.P(1,Ze)]:[new n.P(1,Ze),new n.P(1,1),new n.P(0,1),new n.P(0,Ze)],Oe.push(...Ue),Be.length===0?Oe.push(Me[0]):Oe.push(...Be),{polygon:Oe.map(We=>new n.aa(We.x,We.y)),unwrapped:!1}}(a,o);if(m)return m;const v=function(S,D){let L=!1,O=-1/0,U=0;for(let Z=0;Z<S.length-1;Z++)S[Z].x>O&&(O=S[Z].x,U=Z);for(let Z=0;Z<S.length-1;Z++){const X=(U+Z)%(S.length-1),ae=S[X],me=S[X+1];Math.abs(ae.x-me.x)>.5&&(ae.x<me.x?(ae.x+=1,X===0&&(S[S.length-1].x+=1)):(me.x+=1,X+1===S.length-1&&(S[0].x+=1)),L=!0)}const q=n.at(D.center.lng);return L&&q<Math.abs(q-1)&&S.forEach(Z=>{Z.x-=1}),{polygon:S,unwrapped:L}}(As(a,o).map(S=>new n.P(So(S.x),S.y)),o);return{polygon:v.polygon.map(S=>new n.aa(S.x,S.y)),unwrapped:v.unwrapped}}}function As(p,a){return n.av(p,o=>{const m=a.pointCoordinate3D(o);o.x=m.x,o.y=m.y},1/256)}function So(p){return p<0?1+p%1:p%1}function Hf(p){return 100*p|0}function Vl(p,a,o,m,v){const S=function(L,O){if(L)return v(L);if(O){if(p.url&&O.tiles&&p.tiles&&delete p.tiles,O.variants){if(!Array.isArray(O.variants))return v(new Error("variants must be an array"));for(const q of O.variants){if(q==null||typeof q!="object"||q.constructor!==Object)return v(new Error("variant must be an object"));if(!Array.isArray(q.capabilities))return v(new Error("capabilities must be an array"));if(q.capabilities.length===1&&q.capabilities[0]==="meshopt"){O=n.l(O,q);break}}}const U=n.ay(n.l({},O,p),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);U.tiles=a.canonicalizeTileset(U,p.url),v(null,U)}},D=function(L,O,U){if(!L)return null;if(!O&&!U)return L;U=U||L.worldview_default;const q=Object.values(L.language||{});if(q.length===0)return null;const Z=Object.values(L.worldview||{});if(Z.length===0)return null;const X=q.every(me=>me===O),ae=Z.every(me=>me===U);return X&&ae?L:O in(L.language_options||{})||U in(L.worldview_options||{})?null:L.language_options&&L.worldview_options?L:null}(p.data,o,m);return D?n.q.frame(()=>S(null,D)):p.url?n.n(a.transformRequest(a.normalizeSourceURL(p.url,null,o,m),n.R.Source),S):n.q.frame(()=>{const{data:L,...O}=p;S(null,O)})}class Ul{constructor(a,o,m){this.bounds=n.az.convert(this.validateBounds(a)),this.minzoom=o||0,this.maxzoom=m||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const o=Math.pow(2,a.z),m=Math.floor(n.at(this.bounds.getWest())*o),v=Math.floor(n.aA(this.bounds.getNorth())*o),S=Math.ceil(n.at(this.bounds.getEast())*o),D=Math.ceil(n.aA(this.bounds.getSouth())*o);return a.x>=m&&a.x<S&&a.y>=v&&a.y<D}}class xd extends n.E{constructor(a,o,m,v){if(super(),this.id=a,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.l(this,n.ay(o,["url","scheme","tileSize","promoteId"])),this._options=n.l({type:"vector"},o),this._collectResourceTiming=!!o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v),this._tileWorkers={},this._deduped=new n.aB}load(a){this._loaded=!1,this.fire(new n.z("dataloading",{dataType:"source"}));const o=Array.isArray(this.map._language)?this.map._language.join():this.map._language,m=this.map.getWorldview();this._tileJSONRequest=Vl(this._options,this.map._requestManager,o,m,(v,S)=>{if(this._tileJSONRequest=null,this._loaded=!0,v)o&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${o}`),m&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${m}`),this.fire(new n.y(v));else if(S){if(n.l(this,S),this.hasWorldviews=!!S.worldview_options,S.worldview_default&&(this.worldviewDefault=S.worldview_default),S.vector_layers){this.vectorLayers=S.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const D of S.vector_layers)this.vectorLayerIds.push(D.id),S.worldview&&S.worldview[D.source]&&this.localizableLayerIds.add(D.id)}S.bounds&&(this.tileBounds=new Ul(S.bounds,this.minzoom,this.maxzoom)),nt(S.tiles,this.map._requestManager._customAccessToken),this.fire(new n.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.z("data",{dataType:"source",sourceDataType:"content"}))}a&&a(v)})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest();const a=n.aC(this.id,this.scope);this.load(()=>this.map.style.clearSource(a))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(a){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}loadTile(a,o){const m=a.tileID.canonical.url(this.tiles,this.scheme),v=this.map._requestManager.normalizeTileURL(m),S=this.map._requestManager.transformRequest(v,n.R.Tile),D=this.map.style?this.map.style.getLut(this.scope):null,L=D?{image:D.image.clone()}:null,O={request:S,data:void 0,uid:a.uid,tileID:a.tileID,tileZoom:a.tileZoom,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,lut:L,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:a.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:a.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&n.f(m)&&(O.worldview=this.map.getWorldview()||this.worldviewDefault,O.localizableLayerIds=this.localizableLayerIds),O.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired")a.state==="loading"?a.reloadCallback=o:a.request=a.actor.send("reloadTile",O,U.bind(this));else if(a.actor=this._tileWorkers[v]=this._tileWorkers[v]||this.dispatcher.getActor(),this.dispatcher.ready)a.request=a.actor.send("loadTile",O,U.bind(this),void 0,!0);else{const q=n.aD.call({deduped:this._deduped},O,(Z,X)=>{Z||!X?U.call(this,Z):(O.data={cacheControl:X.cacheControl,expires:X.expires,rawData:X.rawData.slice(0)},a.actor&&a.actor.send("loadTile",O,U.bind(this),void 0,!0))},!0);a.request={cancel:q}}function U(q,Z){return delete a.request,a.aborted?o(null):q&&q.status!==404?o(q):(Z&&Z.resourceTiming&&(a.resourceTiming=Z.resourceTiming),this.map._refreshExpiredTiles&&Z&&a.setExpiryData(Z),a.loadVectorData(Z,this.map.painter),n.aE(this.dispatcher),o(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(a,o){a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id,scope:this.scope}),a.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class vd extends n.E{constructor(a,o,m,v){super(),this.id=a,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.l({type:"raster"},o),n.l(this,n.ay(o,["url","scheme","tileSize"]))}load(a){this._loaded=!1,this.fire(new n.z("dataloading",{dataType:"source"})),this._tileJSONRequest=Vl(this._options,this.map._requestManager,null,null,(o,m)=>{this._tileJSONRequest=null,this._loaded=!0,o?this.fire(new n.y(o)):m&&(n.l(this,m),m.raster_layers&&(this.rasterLayers=m.raster_layers,this.rasterLayerIds=this.rasterLayers.map(v=>v.id)),m.bounds&&(this.tileBounds=new Ul(m.bounds,this.minzoom,this.maxzoom)),nt(m.tiles),this.fire(new n.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.z("data",{dataType:"source",sourceDataType:"content"}))),a&&a(o)})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest();const a=n.aC(this.id,this.scope);this.load(()=>this.map.style.clearSource(a))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(a){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a,o){const m=n.q.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),m,this.tileSize);a.request=n.o(this.map._requestManager.transformRequest(v,n.R.Tile),(S,D,L,O)=>(delete a.request,a.aborted?(a.state="unloaded",o(null)):S?(a.state="errored",o(S)):D?(this.map._refreshExpiredTiles&&a.setExpiryData({cacheControl:L,expires:O}),a.setTexture(D,this.map.painter),a.state="loaded",n.aE(this.dispatcher),void o(null)):o(null)))}abortTile(a,o){a.request&&(a.request.cancel(),delete a.request),o&&o()}unloadTile(a,o){a.texture&&a.texture instanceof n.T?(a.destroy(!0),a.texture&&a.texture instanceof n.T&&this.map.painter.saveTileTexture(a.texture)):a.destroy(),o&&o()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class yl extends vd{constructor(a,o,m,v){super(a,o,m,v),this.type="raster-array",this.maxzoom=22,this._options=n.l({type:"raster-array"},o)}triggerRepaint(a){const o=this.map.painter._terrain,m=this.map.style.getSourceCache(this.id);o&&o.enabled&&m&&o._clearRenderCacheForTile(m.id,a.tileID),this.map.triggerRepaint()}loadTile(a,o){const m=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),v=this.map._requestManager.transformRequest(m,n.R.Tile);a.requestParams=v,a.actor||(a.actor=this.dispatcher.getActor()),a.request=a.fetchHeader(void 0,(S,D,L,O)=>{if(delete a.request,a.aborted)return a.state="unloaded",o(null);if(S)return S.code===20?void 0:(a.state="errored",o(S));this.map._refreshExpiredTiles&&a.setExpiryData({cacheControl:L,expires:O}),a.state="empty",o(null)})}unloadTile(a,o){const m=a.texture;m&&m instanceof n.T?(a.destroy(!0),this.map.painter.saveTileTexture(m)):(a.destroy(),a.flushQueues(),a._isHeaderLoaded=!1,delete a._mrt,delete a.textureDescriptor),a.fbo&&(a.fbo.destroy(),delete a.fbo),delete a.request,delete a.requestParams,delete a.neighboringTiles,a.state="unloaded"}prepareTile(a,o,m){a._isHeaderLoaded&&(a.state!=="empty"&&(a.state="reloading"),a.fetchBand(o,m,(v,S)=>{if(v)return a.state="errored",this.fire(new n.y(v)),void this.triggerRepaint(a);S&&(a.setTexture(S,this.map.painter),a.state="loaded",this.triggerRepaint(a))}))}getInitialBand(a){if(!this.rasterLayers)return 0;const o=this.rasterLayers.find(({id:S})=>S===a),m=o&&o.fields,v=m&&m.bands&&m.bands;return v?v[0]:0}getTextureDescriptor(a,o,m){if(!a)return;const v=o.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!v)return;let S=null;o instanceof n.aH?S=o.paint.get("raster-array-band"):o instanceof n.aI&&(S=o.paint.get("raster-particle-array-band"));const D=S||this.getInitialBand(v);if(D!=null)if(a.textureDescriptor){if(!a.updateNeeded(v,D)||m)return Object.assign({},a.textureDescriptor,{texture:a.texture})}else this.prepareTile(a,v,D)}}const Wi={vector:xd,raster:vd,"raster-dem":class extends vd{constructor(p,a,o,m){super(p,a,o,m),this.type="raster-dem",this.maxzoom=22,this._options=n.l({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox"}loadTile(p,a){const o=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function m(v,S){v&&(p.state="errored",a(v)),S&&(p.dem=S,p.dem.onDeserialize(),p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0,p.state="loaded",a(null))}p.request=n.o(this.map._requestManager.transformRequest(o,n.R.Tile),(function(v,S,D,L){if(delete p.request,p.aborted)p.state="unloaded",a(null);else if(v)p.state="errored",a(v);else if(S){this.map._refreshExpiredTiles&&p.setExpiryData({cacheControl:D,expires:L});const O=ImageBitmap&&S instanceof ImageBitmap&&n.t(),U=1-(S.width-n.aF(S.width))/2;U<1||p.neighboringTiles||(p.neighboringTiles=this._getNeighboringTiles(p.tileID));const q=O?S:n.q.getImageData(S,U),Z={uid:p.uid,coord:p.tileID,source:this.id,scope:this.scope,rawImageData:q,encoding:this.encoding,padding:U};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",Z,m.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(p){const a=p.canonical,o=Math.pow(2,a.z),m=(a.x-1+o)%o,v=a.x===0?p.wrap-1:p.wrap,S=(a.x+1+o)%o,D=a.x+1===o?p.wrap+1:p.wrap,L={};return L[new n.aG(p.overscaledZ,v,a.z,m,a.y).key]={backfilled:!1},L[new n.aG(p.overscaledZ,D,a.z,S,a.y).key]={backfilled:!1},a.y>0&&(L[new n.aG(p.overscaledZ,v,a.z,m,a.y-1).key]={backfilled:!1},L[new n.aG(p.overscaledZ,p.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},L[new n.aG(p.overscaledZ,D,a.z,S,a.y-1).key]={backfilled:!1}),a.y+1<o&&(L[new n.aG(p.overscaledZ,v,a.z,m,a.y+1).key]={backfilled:!1},L[new n.aG(p.overscaledZ,p.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},L[new n.aG(p.overscaledZ,D,a.z,S,a.y+1).key]={backfilled:!1}),L}},"raster-array":yl,geojson:class extends n.E{constructor(p,a,o,m){super(),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(m),this._data=a.data,this._options=n.l({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.minzoom!==void 0&&(this.minzoom=a.minzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const v=n.ag/this.tileSize;this.workerOptions=n.l({source:this.id,scope:this.scope,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*v,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*v,extent:n.ag,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:n.ag,radius:(a.clusterRadius!==void 0?a.clusterRadius:50)*v,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter,dynamic:a.dynamic},a.workerOptions)}onAdd(p){this.map=p,this.setData(this._data)}setData(p){return this._data=p,this._updateWorkerData(),this}updateData(p){if(!this._options.dynamic)return this.fire(new n.y(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof p!="string"&&(p.type==="Feature"&&(p={type:"FeatureCollection",features:[p]}),p.type!=="FeatureCollection"))return this.fire(new n.y(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof p!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const a=new Map;for(const o of this._data.features)a.set(o.id,o);for(const o of p.features)a.set(o.id,o);this._data.features=[...a.values()]}else this._data=p;return this._updateWorkerData(!0),this}getClusterExpansionZoom(p,a){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id,scope:this.scope},a),this}getClusterChildren(p,a){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id,scope:this.scope},a),this}getClusterLeaves(p,a,o,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:p,limit:a,offset:o},m),this}_updateWorkerData(p=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new n.z("dataloading",{dataType:"source"})),this._loaded=!1;const a=n.l({append:p},this.workerOptions);a.scope=this.scope;const o=this._data;typeof o=="string"?(a.request=this.map._requestManager.transformRequest(n.q.resolveURL(o),n.R.Source),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(o),this._pendingLoad=this.actor.send(`${this.type}.loadData`,a,(m,v)=>{if(this._loaded=!0,this._pendingLoad=null,m)this.fire(new n.y(m));else{const S={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&v&&v.resourceTiming&&v.resourceTiming[this.id]&&(S.resourceTiming=v.resourceTiming[this.id]),p&&(this._partialReload=!0),this.fire(new n.z("data",S)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(p),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(p,a){const o=p.actor?"reloadTile":"loadTile";p.actor=this.actor;const m=this.map.style?this.map.style.getLut(this.scope):null,v=m?{image:m.image.clone()}:null,S=this._partialReload,D={type:this.type,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:v,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,scaleFactor:this.map.getScaleFactor(),partial:S};p.request=this.actor.send(o,D,(L,O)=>S&&!O?(p.state="loaded",a(null)):(delete p.request,p.destroy(),p.aborted?a(null):L?a(L):(p.loadVectorData(O,this.map.painter,o==="reloadTile"),a(null))),void 0,o==="loadTile")}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p,a){this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id,scope:this.scope}),p.destroy()}onRemove(p){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return n.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends n.aJ{constructor(p,a,o,m){super(p,a,o,m),this.roundZoom=!0,this.type="video",this.options=a}load(){this._loaded=!1;const p=this.options;this.urls=[];for(const a of p.urls)this.urls.push(this.map._requestManager.transformRequest(a,n.R.Source).url);n.aK(this.urls,(a,o)=>{this._loaded=!0,a?this.fire(new n.y(a)):o&&(this.video=o,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const a=this.video.seekable;p<a.start(0)||p>a.end(0)?this.fire(new n.y(new n.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const p=this.map.painter.context,a=p.gl;this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new n.T(p,this.video,a.RGBA8),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(p)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:n.aJ,model:class extends n.E{constructor(p,a,o,m){super(),this.id=p,this.type="model",this.models=[],this._loaded=!1,this._options=a}load(){const p=[];for(const a in this._options.models){const o=this._options.models[a],m=n.aM(this.map._requestManager.transformRequest(o.uri,n.R.Model).url).then(v=>{if(!v)return;const S=n.aN(v),D=new n.aO(a,o.position,o.orientation,S);D.computeBoundsAndApplyParent(),this.models.push(D)}).catch(v=>{this.fire(new n.y(new Error(`Could not load model ${a} from ${o.uri}: ${v.message}`)))});p.push(m)}return Promise.allSettled(p).then(()=>{this._loaded=!0,this.fire(new n.z("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(a=>{this.fire(new n.y(new Error(`Could not load models: ${a.message}`)))})}onAdd(p){this.map=p,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(p,a){}serialize(){return{type:"model"}}},"batched-model":class extends n.E{constructor(p,a,o,m){super(),this.type="batched-model",this.id=p,this.tileSize=512,this._options=a,this.tiles=this._options.tiles,this.maxzoom=a.maxzoom||19,this.minzoom=a.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=o,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(m)}onAdd(p){this.map=p,this.load()}load(p){this._loaded=!1,this.fire(new n.z("dataloading",{dataType:"source"}));const a=Array.isArray(this.map._language)?this.map._language.join():this.map._language,o=this.map.getWorldview();this._tileJSONRequest=Vl(this._options,this.map._requestManager,a,o,(m,v)=>{this._tileJSONRequest=null,this._loaded=!0,m?(a&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${a}`),o&&o.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${o}`),this.fire(new n.y(m))):v&&(n.l(this,v),v.bounds&&(this.tileBounds=new Ul(v.bounds,this.minzoom,this.maxzoom)),nt(v.tiles,this.map._requestManager._customAccessToken),this.fire(new n.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.z("data",{dataType:"source",sourceDataType:"content"}))),p&&p(m)})}hasTransition(){return!1}hasTile(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)}loaded(){return this._loaded}loadTile(p,a){const o=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme)),m={request:this.map._requestManager.transformRequest(o,n.R.Tile),data:void 0,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,tileSize:this.tileSize*p.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:p.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,lut:null,maxZoom:null,promoteId:null,pixelRatio:null,scaleFactor:null};if(p.actor&&p.state!=="expired")if(p.state==="loading")p.reloadCallback=a;else{if(p.buckets){const S=Object.values(p.buckets);for(const D of S)D.dirty=!0;return void(p.state="loaded")}p.request=p.actor.send("reloadTile",m,v.bind(this))}else p.actor=this.dispatcher.getActor(),p.request=p.actor.send("loadTile",m,v.bind(this),void 0,!0);function v(S,D){return p.aborted?a(null):S&&S.status!==404?a(S):(this.map._refreshExpiredTiles&&D&&p.setExpiryData(D),p.loadModelData(D,this.map.painter),p.state="loaded",void a(null))}}serialize(){return n.l({},this._options)}},canvas:class extends n.aJ{constructor(p,a,o,m){super(p,a,o,m),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(S=>typeof S!="number"))||this.fire(new n.y(new n.V(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.y(new n.V(`sources.${p}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new n.y(new n.V(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new n.y(new n.V(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.y(new n.V(`sources.${p}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.y(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(p){this.pause()}prepare(){let p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context;this.texture?!p&&!this._playing||this.texture instanceof n.aL||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.T(a,this.canvas,a.gl.RGBA8,{premultiply:!0}),this._prepareData(a)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}},custom:class extends n.E{constructor(p,a,o,m){super(),this.id=p,this.type="custom",this._dataType="raster",this._dispatcher=o,this._implementation=a,this.setEventedParent(m),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new n.y(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new n.y(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Ul(this._implementation.bounds,this.minzoom,this.maxzoom)),a.update=this._update.bind(this),a.clearTiles=this._clearTiles.bind(this),a.coveringTiles=this._coveringTiles.bind(this),n.l(this,n.ay(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return n.ay(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new n.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.z("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(p){this.map=p,this._loaded=!1,this.fire(new n.z("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(p),this.load()}onRemove(p){this._implementation.onRemove&&this._implementation.onRemove(p)}hasTile(p){if(this._implementation.hasTile){const{x:a,y:o,z:m}=p.canonical;return this._implementation.hasTile({x:a,y:o,z:m})}return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,a){const{x:o,y:m,z:v}=p.tileID.canonical,S=new AbortController;p.request=Promise.resolve(this._implementation.loadTile({x:o,y:m,z:v},{signal:S.signal})).then((function(D){return delete p.request,p.aborted?(p.state="unloaded",a(null)):D===void 0?(p.state="errored",a(null)):D===null?(this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",a(null)):function(L){return L instanceof ImageData||L instanceof HTMLCanvasElement||L instanceof ImageBitmap||L instanceof HTMLImageElement}(D)?(this.loadTileData(p,D),p.state="loaded",void a(null)):(p.state="errored",a(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(D=>{D.code!==20&&(p.state="errored",a(D))}),p.request.cancel=()=>S.abort()}loadTileData(p,a){p.setTexture(a,this.map.painter)}unloadTile(p,a){if(p.texture&&p.texture instanceof n.T?(p.destroy(!0),p.texture&&p.texture instanceof n.T&&this.map.painter.saveTileTexture(p.texture)):p.destroy(),this._implementation.unloadTile){const{x:o,y:m,z:v}=p.tileID.canonical;this._implementation.unloadTile({x:o,y:m,z:v})}a&&a()}abortTile(p,a){p.request&&p.request.cancel&&(p.request.cancel(),delete p.request),a&&a()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(p=>({x:p.canonical.x,y:p.canonical.y,z:p.canonical.z}))}_clearTiles(){const p=n.aC(this.id,this.scope);this.map.style.clearSource(p)}_update(){this.fire(new n.z("data",{dataType:"source",sourceDataType:"content"}))}}},qf=function(p,a,o,m){const v=new Wi[a.type](p,a,o,m);if(v.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${v.id}`);return n.aP(["load","abort","unload","serialize","prepare"],v),v};function h0(p,a,o,m,v=!1){const S=a.sourceCache.transform,D=a.sourceCache.tilesIn(p,a.has3DLayers,v);D.sort(Pu);const L=[];for(const O of D){const U=O.tile.queryRenderedFeatures(a,O,o,m,S,v);Object.keys(U).length&&L.push({wrappedTileID:O.tile.tileID.wrapped().key,queryResults:U})}return L.length===0?{}:function(O){const U={},q={};for(const Z of O){const X=Z.queryResults,ae=Z.wrappedTileID,me=q[ae]=q[ae]||{};for(const he in X){const xe=X[he],_e=me[he]=me[he]||{},Me=U[he]=U[he]||[];for(const Be of xe)_e[Be.featureIndex]||(_e[Be.featureIndex]=!0,Me.push(Be))}}return U}(L)}function Du(p,a,o,m,v){const S={},D=m.queryRenderedSymbols(p),L=[];for(const O of Object.keys(D).map(Number))L.push(v[O]);L.sort(Pu);for(const O of L){const U=O.featureIndex.lookupSymbolFeatures(D[O.bucketInstanceId],O.bucketIndex,O.sourceLayerIndex,a,o);for(const q in U){const Z=S[q]=S[q]||[],X=U[q];X.sort((ae,me)=>{const he=O.featureSortOrder;if(he){const xe=he.indexOf(ae.featureIndex);return he.indexOf(me.featureIndex)-xe}return me.featureIndex-ae.featureIndex});for(const ae of X)Z.push(ae)}}return S}function _d(p,a){const o=p.getRenderableIds().map(S=>p.getTileByID(S)),m=[],v={};for(let S=0;S<o.length;S++){const D=o[S],L=D.tileID.canonical.key;v[L]||(v[L]=!0,D.querySourceFeatures(m,a))}return m}function Pu(p,a){const o=p.tileID,m=a.tileID;return o.overscaledZ-m.overscaledZ||o.canonical.y-m.canonical.y||o.wrap-m.wrap||o.canonical.x-m.canonical.x}function zm(p,a){const o={};if(!a)return o;for(const m of p){const v=m.layerIds.map(S=>a.getLayer(S)).filter(Boolean);if(v.length!==0){m.layers=v,m.stateDependentLayerIds&&(m.stateDependentLayers=m.stateDependentLayerIds.map(S=>v.filter(D=>D.id===S)[0]));for(const S of v)o[S.fqid]=m}}return o}const ti=32,Ys=33,Js=new Uint16Array(8184);for(let p=0;p<2046;p++){let a=p+2,o=0,m=0,v=0,S=0,D=0,L=0;for(1&a?v=S=D=ti:o=m=L=ti;(a>>=1)>1;){const U=o+v>>1,q=m+S>>1;1&a?(v=o,S=m,o=D,m=L):(o=v,m=S,v=D,S=L),D=U,L=q}const O=4*p;Js[O+0]=o,Js[O+1]=m,Js[O+2]=v,Js[O+3]=S}const Qs=new Uint16Array(2178),Os=new Uint8Array(1089),Th=new Uint16Array(1089);function bd(p){return p===0?-.03125:p===32?.03125:0}const eo={type:2,extent:n.ag,loadGeometry:()=>[[new n.P(0,0),new n.P(n.ag+1,0),new n.P(n.ag+1,n.ag+1),new n.P(0,n.ag+1),new n.P(0,0)]]};class kc{constructor(a,o,m,v,S){this.tileID=a,this.uid=n.aV(),this.uses=0,this.tileSize=o,this.tileZoom=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=S,v&&v.style&&(this._lastUpdatedBrightness=v.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",v&&v.transform&&(this.projection=v.transform.projection)}registerFadeDuration(a){const o=a+this.timeAdded;o<n.q.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=n.aQ(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(a,o,m){if(this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=zm(a.buckets,o.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const S=this.buckets[v];if(S instanceof n.aX){if(this.hasSymbolBuckets=!0,!m)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const S=this.buckets[v];if(S instanceof n.aX&&S.hasRTLText){this.hasRTLText=!0,n.aY();break}}this.queryPadding=0;for(const v in this.buckets){const S=this.buckets[v],D=o.style.getOwnLayer(v);if(!D)continue;const L=D.queryRadius(S);this.queryPadding=Math.max(this.queryPadding,L)}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage),a.lineAtlas&&(this.lineAtlas=a.lineAtlas),this._lastUpdatedBrightness=a.brightness}else this.collisionBoxArray=new n.aW}unloadVectorData(){if(this.hasData()){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(a,o,m){a&&(a.resourceTiming&&(this.resourceTiming=a.resourceTiming),this.buckets={...this.buckets,...zm(a.buckets,o.style)},a.featureIndex&&(this.latestFeatureIndex=a.featureIndex))}getBucket(a){return this.buckets[a.fqid]}upload(a){for(const v in this.buckets){const S=this.buckets[v];S.uploadPending()&&S.upload(a)}const o=a.gl,m=this.imageAtlas;if(m&&!m.uploaded){const v=!!Object.keys(m.patternPositions).length;this.imageAtlasTexture=new n.T(a,m.image,o.RGBA8,{useMipmap:v}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new n.T(a,this.glyphAtlasImage,o.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new n.T(a,this.lineAtlas.image,o.R8),this.lineAtlas.uploaded=!0)}prepare(a,o,m){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture,m),!o||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const v=o.style.getBrightness();(this._lastUpdatedBrightness||v)&&(this._lastUpdatedBrightness&&v&&Math.abs(this._lastUpdatedBrightness-v)<.001||(this.updateBuckets(o,this._lastUpdatedBrightness!==v),this._lastUpdatedBrightness=v))}queryRenderedFeatures(a,o,m,v,S,D){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const L=function(O,U){const q=n.ab.mat4.fromScaling([],[.5*O.width,.5*-O.height,1]);return n.ab.mat4.translate(q,q,[1,-1,0]),n.ab.mat4.multiply(q,q,O.calculateProjMatrix(U.toUnwrapped())),Float32Array.from(q)}(S,this.tileID);return this.latestFeatureIndex.query(a,{tilespaceGeometry:o,pixelPosMatrix:L,transform:v,availableImages:m,tileTransform:this.tileTransform})}querySourceFeatures(a,o){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),S=o?o.sourceLayer:"",D=v._geojsonTileLayer||v[S];if(!D)return;const L=n.aZ(o&&o.filter),{z:O,x:U,y:q}=this.tileID.canonical,Z={z:O,x:U,y:q};for(let X=0;X<D.length;X++){const ae=D.feature(X);if(L.needGeometry){const xe=n.a_(ae,!0);if(!L.filter(new n.a8(this.tileID.overscaledZ),xe,this.tileID.canonical))continue}else if(!L.filter(new n.a8(this.tileID.overscaledZ),ae))continue;const me=m.getId(ae,S),he=new n.a$(ae,O,U,q,me);he.tile=Z,a.push(he)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const o=this.expirationTime;if(a.cacheControl){const m=n.b0(a.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(o)if(this.expirationTime<o)v=!0;else{const S=this.expirationTime-o;S?this.expirationTime=m+Math.max(S,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(a){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&a&&this.updateBuckets(a)}updateBuckets(a,o){if(!this.latestFeatureIndex||!a.style)return;const m=this.latestFeatureIndex.loadVTLayers(),v=a.style.listImages(),S=a.style.getBrightness();for(const D in this.buckets){if(!a.style.hasLayer(D))continue;const L=this.buckets[D],O=L.layers[0],U=O.sourceLayer||"_geojsonTileLayer",q=m[U],Z=a.style.getLayerSourceCache(O);let X={};Z&&(X=Z._state.getState(U,void 0));const ae=this.imageAtlas&&this.imageAtlas.patternPositions||{},me=Object.keys(X).length>0&&!o;me&&!L.stateDependentLayers.length&&!o||L.update(X,q,v,ae,me?L.stateDependentLayers:L.layers,o,S),(L instanceof n.b1||L instanceof n.b2)&&a._terrain&&a._terrain.enabled&&Z&&L.programConfigurations.needsUpload&&a._terrain._clearRenderCacheForTile(Z.id,this.tileID);const he=a&&a.style&&a.style.getOwnLayer(D);he&&(this.queryPadding=Math.max(this.queryPadding,he.queryRadius(L)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<n.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=n.q.now()+a}setTexture(a,o){const m=o.context,v=m.gl;this.texture=this.texture||o.getTileTexture(a.width),this.texture&&this.texture instanceof n.T?this.texture.update(a):(this.texture=new n.T(m,a,v.RGBA8,{useMipmap:!0}),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE))}setDependencies(a,o){const m={};for(const v of o)m[v]=!0;this.dependencies[a]=m}hasDependency(a,o){for(const m of a){const v=this.dependencies[m];if(v){for(const S of o)if(v[S])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(a,o){if(!o||o.name==="mercator"||this._tileDebugBuffer)return;const m=n.b3(eo,this.tileID.canonical,this.tileTransform)[0],v=new n.b4,S=new n.b5;for(let D=0;D<m.length;D++){const{x:L,y:O}=m[D];v.emplaceBack(L,O),S.emplaceBack(D)}S.emplaceBack(0),this._tileDebugIndexBuffer=a.createIndexBuffer(S),this._tileDebugBuffer=a.createVertexBuffer(v,n.b6.members),this._tileDebugSegments=n.b7.simpleSegment(0,0,v.length,S.length)}_makeTileBoundsBuffers(a,o){if(this._tileBoundsBuffer||!o||o.name==="mercator")return;const m=n.b3(eo,this.tileID.canonical,this.tileTransform)[0];let v,S;if(this.isRaster){const D=function(L,O){const U=n.aQ(L,O),q=Math.pow(2,L.z);for(let xe=0;xe<Ys;xe++)for(let _e=0;_e<Ys;_e++){const Me=n.aR((L.x+(_e+bd(_e))/ti)/q),Be=n.aS((L.y+(xe+bd(xe))/ti)/q),Oe=O.project(Me,Be),Ze=xe*Ys+_e;Qs[2*Ze+0]=Math.round((Oe.x*U.scale-U.x)*n.ag),Qs[2*Ze+1]=Math.round((Oe.y*U.scale-U.y)*n.ag)}Os.fill(0),Th.fill(0);for(let xe=2045;xe>=0;xe--){const _e=4*xe,Me=Js[_e+0],Be=Js[_e+1],Oe=Js[_e+2],Ze=Js[_e+3],Ue=Me+Oe>>1,We=Be+Ze>>1,qe=Ue+We-Be,tt=We+Me-Ue,rt=Be*Ys+Me,Et=Ze*Ys+Oe,_t=We*Ys+Ue,st=Math.hypot((Qs[2*rt+0]+Qs[2*Et+0])/2-Qs[2*_t+0],(Qs[2*rt+1]+Qs[2*Et+1])/2-Qs[2*_t+1])>=16;Os[_t]=Os[_t]||(st?1:0),xe<1022&&(Os[_t]=Os[_t]||Os[(Be+tt>>1)*Ys+(Me+qe>>1)]||Os[(Ze+tt>>1)*Ys+(Oe+qe>>1)])}const Z=new n.aT,X=new n.aU;let ae=0;function me(xe,_e){const Me=_e*Ys+xe;return Th[Me]===0&&(Z.emplaceBack(Qs[2*Me+0],Qs[2*Me+1],xe*n.ag/ti,_e*n.ag/ti),Th[Me]=++ae),Th[Me]-1}function he(xe,_e,Me,Be,Oe,Ze){const Ue=xe+Me>>1,We=_e+Be>>1;if(Math.abs(xe-Oe)+Math.abs(_e-Ze)>1&&Os[We*Ys+Ue])he(Oe,Ze,xe,_e,Ue,We),he(Me,Be,Oe,Ze,Ue,We);else{const qe=me(xe,_e),tt=me(Me,Be),rt=me(Oe,Ze);X.emplaceBack(qe,tt,rt)}}return he(0,0,ti,ti,ti,0),he(ti,ti,0,0,0,ti),{vertices:Z,indices:X}}(this.tileID.canonical,o);v=D.vertices,S=D.indices}else{v=new n.aT,S=new n.aU;for(const{x:L,y:O}of m)v.emplaceBack(L,O,0,0);const D=n.b8(v.int16,void 0,4);for(let L=0;L<D.length;L+=3)S.emplaceBack(D[L],D[L+1],D[L+2])}this._tileBoundsBuffer=a.createVertexBuffer(v,n.b9.members),this._tileBoundsIndexBuffer=a.createIndexBuffer(S),this._tileBoundsSegments=n.b7.simpleSegment(0,0,v.length,S.length)}_makeGlobeTileDebugBuffers(a,o){const m=o.projection;if(!m||m.name!=="globe"||o.freezeTileCoverage)return;const v=this.tileID.canonical,S=n.ba(v,o),D=n.bb(S),L=n.ae(o.zoom);let O;L>0&&(O=n.ab.mat4.invert(new Float64Array(16),o.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(a,v,o,D,O,L),this._makeGlobeTileDebugTextBuffer(a,v,o,D,O,L)}_globePoint(a,o,m,v,S,D,L){let O=n.bc(a,o,m);if(D){const U=1<<m.z,q=n.at(v.center.lng),Z=n.aA(v.center.lat),X=(m.x+.5)/U-q;let ae=0;X>.5?ae=-1:X<-.5&&(ae=1);let me=(a/n.ag+m.x)/U+ae,he=(o/n.ag+m.y)/U;me=(me-q)*v._pixelsPerMercatorPixel+q,he=(he-Z)*v._pixelsPerMercatorPixel+Z;const xe=[me*v.worldSize,he*v.worldSize,0];n.ab.vec3.transformMat4(xe,xe,D),O=n.bd(O,xe,L)}return n.ab.vec3.transformMat4(O,O,S)}_makeGlobeTileDebugBorderBuffer(a,o,m,v,S,D){const L=new n.b4,O=new n.b5,U=new n.be,q=(X,ae,me,he,xe)=>{const _e=(me-X)/(xe-1),Me=(he-ae)/(xe-1),Be=L.length;for(let Oe=0;Oe<xe;Oe++){const Ze=X+Oe*_e,Ue=ae+Oe*Me;L.emplaceBack(Ze,Ue);const We=this._globePoint(Ze,Ue,o,m,v,S,D);U.emplaceBack(We[0],We[1],We[2]),O.emplaceBack(Be+Oe)}},Z=n.ag;q(0,0,Z,0,16),q(Z,0,Z,Z,16),q(Z,Z,0,Z,16),q(0,Z,0,0,16),this._tileDebugIndexBuffer=a.createIndexBuffer(O),this._tileDebugBuffer=a.createVertexBuffer(L,n.b6.members),this._globeTileDebugBorderBuffer=a.createVertexBuffer(U,n.bf.members),this._tileDebugSegments=n.b7.simpleSegment(0,0,L.length,O.length)}_makeGlobeTileDebugTextBuffer(a,o,m,v,S,D){const L=n.ag/4,O=new n.b4,U=new n.aU,q=new n.be,Z=25;U.reserve(32),O.reserve(Z),q.reserve(Z);const X=(ae,me)=>Z*ae+me;for(let ae=0;ae<Z;ae++){const me=ae*L;for(let he=0;he<Z;he++){const xe=he*L;O.emplaceBack(xe,me);const _e=this._globePoint(xe,me,o,m,v,S,D);q.emplaceBack(_e[0],_e[1],_e[2])}}for(let ae=0;ae<4;ae++)for(let me=0;me<4;me++){const he=X(ae,me),xe=X(ae,me+1),_e=X(ae+1,me),Me=X(ae+1,me+1);U.emplaceBack(he,xe,_e),U.emplaceBack(_e,xe,Me)}this._tileDebugTextIndexBuffer=a.createIndexBuffer(U),this._tileDebugTextBuffer=a.createVertexBuffer(O,n.b6.members),this._globeTileDebugTextBuffer=a.createVertexBuffer(q,n.bf.members),this._tileDebugTextSegments=n.b7.simpleSegment(0,0,Z,32)}destroy(a=!1){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!a&&this.texture&&this.texture instanceof n.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}n.bg.setPbf(n.bh);class Eh extends kc{constructor(a,o,m,v,S){super(a,o,m,v,S),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(a,o){const m=o.context,v=m.gl;this.texture=this.texture||o.getTileTexture(a.width),this.texture&&this.texture instanceof n.T?this.texture.update(a,{premultiply:!1}):this.texture=new n.T(m,a,v.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(a=16384,o){const m=this._mrt=new n.bg(30),v=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(a-1)}});return this.entireBuffer=null,this.request=n.bi(v,(S,D,L,O)=>{if(S)o(S);else try{const U=m.getHeaderLength(D);if(U>a)return void(this.request=this.fetchHeader(U,o));m.parseHeader(D),this._isHeaderLoaded=!0;let q=0;for(const Z of Object.values(m.layers))q=Math.max(q,Z.dataIndex[Z.dataIndex.length-1].last_byte);D.byteLength>=q&&(this.entireBuffer=D),o(null,this.entireBuffer||D,L,O)}catch(U){o(U)}}),this.request}fetchBand(a,o,m){const v=this._mrt;if(!this._isHeaderLoaded||!v)return void m(new Error("Tile header is not ready"));const S=this.actor;if(!S)return void m(new Error("Can't fetch tile band without an actor"));let D;const L=(Z,X)=>{D.complete(Z,X),Z?m(Z):(this.updateTextureDescriptor(a,o),m(null,this.textureDescriptor&&this.textureDescriptor.img))},O=(Z,X)=>{if(Z)return m(Z);const ae=S.send("decodeRasterArray",{buffer:X,task:D},L,void 0,!0);this._workQueue.push(()=>{ae&&ae.cancel(),D.cancel()})},U=v.getLayer(a);if(!U)return void m(new Error(`Unknown sourceLayer "${a}"`));if(U.hasDataForBand(o))return this.updateTextureDescriptor(a,o),void m(null,this.textureDescriptor?this.textureDescriptor.img:null);const q=U.getDataRange([o]);if(D=v.createDecodingTask(q),!D||D.tasks.length)if(this.flushQueues(),this.entireBuffer)O(null,this.entireBuffer.slice(q.firstByte,q.lastByte+1));else{const Z=Object.assign({},this.requestParams,{headers:{Range:`bytes=${q.firstByte}-${q.lastByte}`}}),X=n.bi(Z,O);this._fetchQueue.push(()=>{X.cancel(),D.cancel()})}else m(null)}updateNeeded(a,o){return(!this.textureDescriptor||this.textureDescriptor.band!==o||this.textureDescriptor.layer!==a)&&this.state!=="errored"}updateTextureDescriptor(a,o){if(!this._mrt)return;const m=this._mrt.getLayer(a);if(!m||!m.hasBand(o)||!m.hasDataForBand(o))return;const{bytes:v,tileSize:S,buffer:D,offset:L,scale:O}=m.getBandView(o),U=S+2*D,q={data:v,width:U,height:U},Z=this.texture;Z&&Z instanceof n.T&&Z.update(q,{premultiply:!1}),this.textureDescriptor={layer:a,band:o,img:q,buffer:D,offset:L,tileSize:S,format:m.pixelFormat,mix:[O,256*O,65536*O,16777216*O]}}}class Wf{constructor(a,o){this.max=a,this.onRemove=o,this.reset()}reset(){for(const a in this.data)for(const o of this.data[a])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(a,o,m){const v=a.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const S={value:o,timeout:void 0};if(m!==void 0&&(S.timeout=setTimeout(()=>{this.remove(a,S)},m)),this.data[v].push(S),this.order.push(v),this.order.length>this.max){const D=this._getAndRemoveByKey(this.order[0]);D&&this.onRemove(D)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const o=this.data[a].shift();return o.timeout&&clearTimeout(o.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),o.value}getByKey(a){const o=this.data[a];return o?o[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,o){if(!this.has(a))return this;const m=a.wrapped().key,v=o===void 0?0:this.data[m].indexOf(o),S=this.data[m][v];return this.data[m].splice(v,1),S.timeout&&clearTimeout(S.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(S.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(a){const o=[];for(const m in this.data)for(const v of this.data[m])a(v.value)||o.push(v);for(const m of o)this.remove(m.value.tileID,m)}}class Rc{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,o,m){const v=String(o);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][v]=this.stateChanges[a][v]||{},n.l(this.stateChanges[a][v],m),this.deletedStates[a]===null){this.deletedStates[a]={};for(const S in this.state[a])S!==v&&(this.deletedStates[a][S]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][v]===null){this.deletedStates[a][v]={};for(const S in this.state[a][v])m[S]||(this.deletedStates[a][v][S]=null)}else for(const S in m)this.deletedStates[a]&&this.deletedStates[a][v]&&this.deletedStates[a][v][S]===null&&delete this.deletedStates[a][v][S]}removeFeatureState(a,o,m){if(this.deletedStates[a]===null)return;const v=String(o);if(this.deletedStates[a]=this.deletedStates[a]||{},m&&o!==void 0)this.deletedStates[a][v]!==null&&(this.deletedStates[a][v]=this.deletedStates[a][v]||{},this.deletedStates[a][v][m]=null);else if(o!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][v])for(m in this.deletedStates[a][v]={},this.stateChanges[a][v])this.deletedStates[a][v][m]=null;else this.deletedStates[a][v]=null;else this.deletedStates[a]=null}getState(a,o){const m=this.state[a]||{},v=this.stateChanges[a]||{},S=this.deletedStates[a];if(S===null)return{};if(o!==void 0){const L=String(o),O=n.l({},m[L],v[L]);if(S){const U=S[o];if(U===null)return{};for(const q in U)delete O[q]}return O}const D=n.l({},m,v);if(S)for(const L in S)delete D[L];return D}initializeTileState(a,o){a.refreshFeatureState(o)}coalesceChanges(a,o){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const S={};for(const D in this.stateChanges[v])this.state[v][D]||(this.state[v][D]={}),n.l(this.state[v][D],this.stateChanges[v][D]),S[D]=this.state[v][D];m[v]=S}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const S={};if(this.deletedStates[v]===null)for(const D in this.state[v])S[D]={},this.state[v][D]={};else for(const D in this.deletedStates[v]){if(this.deletedStates[v][D]===null)this.state[v][D]={};else if(this.state[v][D])for(const L of Object.keys(this.deletedStates[v][D]))delete this.state[v][D][L];S[D]=this.state[v][D]}m[v]=m[v]||{},n.l(m[v],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const v in a)a[v].refreshFeatureState(o)}}class To extends n.E{constructor(a,o,m){super(),this.id=a,this._onlySymbols=m,o.on("data",v=>{v.dataType==="source"&&v.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&v.dataType==="source"&&v.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),o.on("error",()=>{this._sourceErrored=!0}),this._source=o,this._tiles={},this._cache=new Wf(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=o.minTileCacheSize,this._maxTileCacheSize=o.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Rc,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(a){this.map=a,this._minTileCacheSize=this._minTileCacheSize===void 0&&a?a._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&a?a._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const a in this._tiles){const o=this._tiles[a];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(a,o){return a.isSymbolTile=this._onlySymbols,a.isExtraShadowCaster=this._shadowCasterTiles[a.tileID.key],this._source.loadTile(a,o)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a)}_abortTile(a){if(this._source.abortTile)return this._source.abortTile(a)}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const m=this._tiles[o];m.upload(a),m.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return n.bj(this._tiles).map(a=>a.tileID).sort(Kf).map(a=>a.key)}getRenderableIds(a,o){const m=[];for(const v in this._tiles)this._isIdRenderable(+v,a,o)&&m.push(this._tiles[v]);return a?m.sort((v,S)=>{const D=v.tileID,L=S.tileID,O=new n.P(D.canonical.x,D.canonical.y)._rotate(this.transform.angle),U=new n.P(L.canonical.x,L.canonical.y)._rotate(this.transform.angle);return D.overscaledZ-L.overscaledZ||U.y-O.y||U.x-O.x}).map(v=>v.tileID.key):m.map(v=>v.tileID).sort(Kf).map(v=>v.key)}hasRenderableParent(a){const o=this.findLoadedParent(a,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(a,o,m){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(o||!this._tiles[a].holdingForFade())&&(m||!this._shadowCasterTiles[a])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(+a,"reloading")}}_reloadTile(a,o){const m=this._tiles[a];m&&(m.state!=="loading"&&(m.state=o),this._loadTile(m,this._tileLoaded.bind(this,m,a,o)))}_tileLoaded(a,o,m,v){if(v)if(a.state="errored",v.status!==404)this._source.fire(new n.y(v,{tile:a}));else{if(this._source.fire(new n.z("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:a})),!(a.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const S=this.map.painter.terrain;this.update(this.transform,S.getScaledDemTileSize(),!0),S.resetTileLookupCache(this.id)}else this.update(this.transform)}else a.timeAdded=n.q.now(),m==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(o,a),this._source.type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new n.z("data",{dataType:"source",tile:a,coord:a.tileID,sourceCacheId:this.id}))}_backfillDEM(a){const o=this.getRenderableIds();for(let v=0;v<o.length;v++){const S=o[v];if(a.neighboringTiles&&a.neighboringTiles[S]){const D=this.getTileByID(S);m(a,D),m(D,a)}}function m(v,S){if(!v.dem||v.dem.borderReady)return;v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0;let D=S.tileID.canonical.x-v.tileID.canonical.x;const L=S.tileID.canonical.y-v.tileID.canonical.y,O=Math.pow(2,v.tileID.canonical.z),U=S.tileID.key;D===0&&L===0||Math.abs(L)>1||(Math.abs(D)>1&&(Math.abs(D+O)===1?D+=O:Math.abs(D-O)===1&&(D-=O)),S.dem&&v.dem&&(v.dem.backfillBorder(S.dem,D,L),v.neighboringTiles&&v.neighboringTiles[U]&&(v.neighboringTiles[U].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,o,m,v){for(const S in this._tiles){let D=this._tiles[S];if(v[S]||!D.hasData()||D.tileID.overscaledZ<=o||D.tileID.overscaledZ>m)continue;let L=D.tileID;for(;D&&D.tileID.overscaledZ>o+1;){const U=D.tileID.scaledTo(D.tileID.overscaledZ-1);D=this._tiles[U.key],D&&D.hasData()&&(L=U)}let O=L;for(;O.overscaledZ>o;)if(O=O.scaledTo(O.overscaledZ-1),a[O.key]){v[L.key]=L;break}}}findLoadedParent(a,o){if(a.key in this._loadedParentTiles){const m=this._loadedParentTiles[a.key];return m&&m.tileID.overscaledZ>=o?m:null}for(let m=a.overscaledZ-1;m>=o;m--){const v=a.scaledTo(m),S=this._getLoadedTile(v);if(S)return S}}_getLoadedTile(a){const o=this._tiles[a.key];return o&&o.hasData()?o:this._cache.getByKey(this._source.reparseOverscaled?a.wrapped().key:a.canonical.key)}updateCacheSize(a,o){o=o||this._source.tileSize;const m=Math.ceil(a.width/o)+1,v=Math.ceil(a.height/o)+1,S=Math.floor(m*v*5),D=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,S):S,L=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,D):D;this._cache.setMaxSize(L)}handleWrapJump(a){const o=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,o){const m={};for(const v in this._tiles){const S=this._tiles[v];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+o),m[S.tileID.key]=S}this._tiles=m;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(+v,this._tiles[v])}}update(a,o,m,v){if(this.transform=a,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!m)return;this.updateCacheSize(a,o),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const S=this._source.type==="batched-model";let D,L=this._source.maxzoom;const O=this.map&&this.map.painter?this.map.painter._terrain:null;if(O&&O.sourceCache===this&&O.attenuationRange()){const Z=O.attenuationRange()[0],X=Math.floor(Z)-Math.log2(O.getDemUpscale());L>X&&(L=X)}if(this.used||this.usedForTerrain){if(this._source.tileID)D=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(Z=>new n.aG(Z.canonical.z,Z.wrap,Z.canonical.z,Z.canonical.x,Z.canonical.y));else if(this.tileCoverLift!==0){const Z=a.clone();Z.tileCoverLift=this.tileCoverLift,D=Z.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:L,roundZoom:this._source.roundZoom&&!m,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:S}),this._source.minzoom<=1&&a.projection.name==="globe"&&(D.push(new n.aG(1,0,1,0,0)),D.push(new n.aG(1,0,1,1,0)),D.push(new n.aG(1,0,1,0,1)),D.push(new n.aG(1,0,1,1,1)))}else if(D=a.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:L,roundZoom:this._source.roundZoom&&!m,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:S}),this._source.hasTile){const Z=this._source.hasTile.bind(this._source);D=D.filter(X=>Z(X))}}else D=[];if(D.length>0&&this.castsShadows&&v&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!Mu(this._source.type)){const Z=a.coveringZoomLevel({tileSize:o||this._source.tileSize,roundZoom:this._source.roundZoom&&!m}),X=Math.min(Z,this._source.maxzoom);if(S){const ae=a.extendTileCover(D,X);for(const me of ae)D.push(me)}else{const ae=a.extendTileCover(D,X,v);for(const me of ae)this._shadowCasterTiles[me.key]=!0,D.push(me)}}const U=this._updateRetainedTiles(D);if(Mu(this._source.type)&&D.length!==0){const Z={},X={},ae=Object.keys(U);for(const he of ae){const xe=U[he],_e=this._tiles[he];if(!_e||_e.fadeEndTime&&_e.fadeEndTime<=n.q.now())continue;const Me=this.findLoadedParent(xe,Math.max(xe.overscaledZ-To.maxOverzooming,this._source.minzoom));Me&&(this._addTile(Me.tileID),Z[Me.tileID.key]=Me.tileID),X[he]=xe}const me=D[D.length-1].overscaledZ;for(const he in this._tiles){const xe=this._tiles[he];if(U[he]||!xe.hasData())continue;let _e=xe.tileID;for(;_e.overscaledZ>me;){_e=_e.scaledTo(_e.overscaledZ-1);const Me=this._tiles[_e.key];if(Me&&Me.hasData()&&X[_e.key]){U[he]=xe.tileID;break}}}for(const he in Z)U[he]||(this._coveredTiles[he]=!0,U[he]=Z[he])}for(const Z in U)this._tiles[Z].clearFadeHold();const q=n.bk(this._tiles,U);for(const Z of q){const X=this._tiles[Z];X.hasSymbolBuckets&&!X.holdingForFade()?X.setHoldDuration(this.map._fadeDuration):X.hasSymbolBuckets&&!X.symbolFadeFinished()||this._removeTile(+Z)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(+a)}_updateRetainedTiles(a){const o={};if(a.length===0)return o;const m={},v=a.reduce((U,q)=>Math.min(U,q.overscaledZ),1/0),S=a[0].overscaledZ,D=Math.max(S-To.maxOverzooming,this._source.minzoom),L=Math.max(S+To.maxUnderzooming,this._source.minzoom),O={};for(const U of a){const q=this._addTile(U);o[U.key]=U,q.hasData()||v<this._source.maxzoom&&(O[U.key]=U)}this._retainLoadedChildren(O,v,L,o);for(const U of a){let q=this._tiles[U.key];if(q.hasData())continue;if(U.canonical.z>=this._source.maxzoom){const X=U.children(this._source.maxzoom)[0],ae=this.getTile(X);if(ae&&ae.hasData()){o[X.key]=X;continue}}else{const X=U.children(this._source.maxzoom);if(o[X[0].key]&&o[X[1].key]&&o[X[2].key]&&o[X[3].key])continue}let Z=q.wasRequested();for(let X=U.overscaledZ-1;X>=D;--X){const ae=U.scaledTo(X);if(m[ae.key]||(m[ae.key]=!0,q=this.getTile(ae),!q&&Z&&(q=this._addTile(ae)),q&&(o[ae.key]=ae,Z=q.wasRequested(),q.hasData())))break}}return o}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const o=[];let m,v=this._tiles[a].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){m=this._loadedParentTiles[v.key];break}o.push(v.key);const S=v.scaledTo(v.overscaledZ-1);if(m=this._getLoadedTile(S),m)break;v=S}for(const S of o)this._loadedParentTiles[S]=m}}_addTile(a){let o=this._tiles[a.key];if(o)return o.isExtraShadowCaster!==!0||this._shadowCasterTiles[a.key]||this._reloadTile(a.key,"reloading"),o;o=this._cache.getAndRemove(a),o&&(this._setTileReloadTimer(a.key,o),o.tileID=a,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,o)));const m=!!o;if(!m){const v=this.map?this.map.painter:null,S=this._source.tileSize*a.overscaleFactor();o=this._source.type==="raster-array"?new Eh(a,S,this.transform.tileZoom,v,this._isRaster):new kc(a,S,this.transform.tileZoom,v,this._isRaster),this._loadTile(o,this._tileLoaded.bind(this,o,a.key,o.state))}return o?(o.uses++,this._tiles[a.key]=o,m||this._source.fire(new n.z("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null}_setTileReloadTimer(a,o){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const m=o.getExpiryTimeout();m&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},m))}_removeTile(a){const o=this._tiles[a];o&&(o.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),o.uses>0||(o.hasData()&&o.state!=="reloading"||o.state==="empty"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(+a);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(a,o,m){const v=[],S=this.transform;if(!S)return v;const D=S.projection.name==="globe",L=n.at(S.center.lng);for(const O in this._tiles){const U=this._tiles[O];if(m&&U.clearQueryDebugViz(),U.holdingForFade())continue;let q;if(D){const Z=U.tileID.canonical;if(Z.z===0){const X=[Math.abs(n.aw(L,...Ra(Z,-1))-L),Math.abs(n.aw(L,...Ra(Z,1))-L)];q=[0,2*X.indexOf(Math.min(...X))-1]}else{const X=[Math.abs(n.aw(L,...Ra(Z,-1))-L),Math.abs(n.aw(L,...Ra(Z,0))-L),Math.abs(n.aw(L,...Ra(Z,1))-L)];q=[X.indexOf(Math.min(...X))-1]}}else q=[0];for(const Z of q){const X=a.containsTile(U,S,o,Z);X&&v.push(X)}}return v}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(a){return this._getRenderableCoordinates(a)}_getRenderableCoordinates(a,o){const m=this.getRenderableIds(a,o).map(S=>this._tiles[S].tileID),v=this.transform.projection.name==="globe";for(const S of m)S.projMatrix=this.transform.calculateProjMatrix(S.toUnwrapped()),S.expandedProjMatrix=v?this.transform.calculateProjMatrix(S.toUnwrapped(),!1,!0):S.projMatrix;return m}sortCoordinatesByDistance(a){const o=a.slice(),m=this.transform._camera.position,v=this.transform._camera.forward(),S={};for(const D of o){const L=1/(1<<D.canonical.z);S[D.key]=((D.canonical.x+.5)*L+D.wrap-m[0])*v[0]+((D.canonical.y+.5)*L-m[1])*v[1]-m[2]*v[2]}return o.sort((D,L)=>S[D.key]-S[L.key]),o}hasTransition(){if(this._source.hasTransition())return!0;if(Mu(this._source.type))for(const a in this._tiles){const o=this._tiles[a];if(o.fadeEndTime!==void 0&&o.fadeEndTime>=n.q.now())return!0}return!1}setFeatureState(a,o,m){this._state.updateState(a=a||"_geojsonTileLayer",o,m)}removeFeatureState(a,o,m){this._state.removeFeatureState(a=a||"_geojsonTileLayer",o,m)}getFeatureState(a,o){return this._state.getState(a=a||"_geojsonTileLayer",o)}setDependencies(a,o,m){const v=this._tiles[a];v&&v.setDependencies(o,m)}reloadTilesForDependencies(a,o){for(const m in this._tiles)this._tiles[m].hasDependency(a,o)&&this._reloadTile(+m,"reloading");this._cache.filter(m=>!m.hasDependency(a,o))}_preloadTiles(a,o){if(!this._sourceLoaded){const O=()=>{this._sourceLoaded&&(this._source.off("data",O),this._preloadTiles(a,o))};return void this._source.on("data",O)}const m=new Map,v=Array.isArray(a)?a:[a],S=this.map.painter.terrain,D=this.usedForTerrain&&S?S.getScaledDemTileSize():this._source.tileSize;for(const O of v){const U=O.coveringTiles({tileSize:D,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const q of U)m.set(q.key,q);this.usedForTerrain&&O.updateElevation(!1)}const L=Array.from(m.values());n.bl(L,(O,U)=>{const q=new kc(O,this._source.tileSize*O.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(q,Z=>{this._source.type==="raster-dem"&&q.dem&&this._backfillDEM(q),U(Z,q)})},o)}}function Kf(p,a){const o=Math.abs(2*p.wrap)-+(p.wrap<0),m=Math.abs(2*a.wrap)-+(a.wrap<0);return p.overscaledZ-a.overscaledZ||m-o||a.canonical.y-p.canonical.y||a.canonical.x-p.canonical.x}function Mu(p){return p==="raster"||p==="image"||p==="video"||p==="custom"}function Ra(p,a){const o=1<<p.z;return[p.x/o+a,(p.x+1)/o+a]}To.maxOverzooming=10,To.maxUnderzooming=3;class Lm{constructor(a){this.style=a,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const a=!1,o=!1;for(const m in this.style._mergedLayers){const v=this.style._mergedLayers[m];if(v.type==="fill-extrusion")this.layers.push({layer:v,visible:a,visibilityChanged:o});else if(v.type==="model"){const S=this.style.getLayerSource(v);S&&S.type==="batched-model"&&this.layers.push({layer:v,visible:a,visibilityChanged:o})}}}onNewFrame(a){this.layersGotHidden=!1;for(const o of this.layers){const m=o.layer;let v=!1;m.type==="fill-extrusion"?v=!m.isHidden(a)&&m.paint.get("fill-extrusion-opacity")>0:m.type==="model"&&(v=!m.isHidden(a)&&m.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!v&&o.visible,o.visible=v}}updateZOffset(a,o){this.currentBuildingBuckets=[];for(const v of this.layers){const S=v.layer,D=this.style.getLayerSourceCache(S);let L=1;S.type==="fill-extrusion"&&(L=v.visible?S.paint.get("fill-extrusion-vertical-scale"):0);let O=D?D.getTile(o):null;if(!O&&D&&o.canonical.z>D.getSource().minzoom){let U=o.scaledTo(Math.min(D.getSource().maxzoom,o.overscaledZ-1));for(;U.overscaledZ>=D.getSource().minzoom&&(O=D.getTile(U),!O&&U.overscaledZ!==0);)U=U.scaledTo(U.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:O?O.getBucket(S):null,tileID:O?O.tileID:o,verticalScale:L})}a.hasAnyZOffset=!1;let m=!1;for(let v=0;v<a.symbolInstances.length;v++){const S=a.symbolInstances.get(v),D=S.zOffset,L=this._getHeightAtTileOffset(o,S.tileAnchorX,S.tileAnchorY);S.zOffset=L!==Number.NEGATIVE_INFINITY?L:D,m||D===S.zOffset||(m=!0),a.hasAnyZOffset||S.zOffset===0||(a.hasAnyZOffset=!0)}m&&(a.zOffsetBuffersNeedUpload=!0,a.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(a,o,m,v){let S=o,D=m;if(a.canonical.z!==v.canonical.z){const L=v.canonical,O=1/(1<<a.canonical.z-L.z);S=(o+a.canonical.x*n.ag)*O-L.x*n.ag|0,D=(m+a.canonical.y*n.ag)*O-L.y*n.ag|0}return{tileX:S,tileY:D}}_getHeightAtTileOffset(a,o,m){let v,S;for(let D=0;D<this.layers.length;++D){if(this.layers[D].layer.type!=="fill-extrusion")continue;const{bucket:L,tileID:O,verticalScale:U}=this.currentBuildingBuckets[D];if(!L)continue;const{tileX:q,tileY:Z}=this._mapCoordToOverlappingTile(a,o,m,O),X=L.getHeightAtTileCoord(q,Z);X&&X.height!==void 0&&(X.hidden?v=X.height:S=Math.max(X.height*U,S||0))}if(S!==void 0)return S;for(let D=0;D<this.layers.length;++D){const L=this.layers[D];if(L.layer.type!=="model"||!L.visible)continue;const{bucket:O,tileID:U}=this.currentBuildingBuckets[D];if(!O)continue;const{tileX:q,tileY:Z}=this._mapCoordToOverlappingTile(a,o,m,U),X=O.getHeightAtTileCoord(q,Z);if(X&&!X.hidden)return X.height===void 0&&v!==void 0?Math.min(X.maxHeight,v)*X.verticalScale:X.height?X.height*X.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Or(p,a){const o={};for(const m in p)m!=="ref"&&(o[m]=p[m]);return n.bm.forEach(m=>{m in a&&(o[m]=a[m])}),o}function Ic(p){p=p.slice();const a=Object.create(null);for(let o=0;o<p.length;o++)a[p[o].id]=p[o];for(let o=0;o<p.length;o++)"ref"in p[o]&&(p[o]=Or(p[o],a[p[o].ref]));return p}const Ia={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function wd(p,a,o){o.push({command:Ia.addSource,args:[p,a[p]]})}function to(p,a,o){a.push({command:Ia.removeSource,args:[p]}),o[p]=!0}function Au(p,a,o,m){to(p,o,m),wd(p,a,o)}function Fs(p,a,o){let m;for(m in p[o])if(p[o].hasOwnProperty(m)&&m!=="data"&&!n.bn(p[o][m],a[o][m]))return!1;for(m in a[o])if(a[o].hasOwnProperty(m)&&m!=="data"&&!n.bn(p[o][m],a[o][m]))return!1;return!0}function wr(p,a,o,m,v,S){let D;for(D in a=a||{},p=p||{})p.hasOwnProperty(D)&&(n.bn(p[D],a[D])||o.push({command:S,args:[m,D,a[D],v]}));for(D in a)a.hasOwnProperty(D)&&!p.hasOwnProperty(D)&&(n.bn(p[D],a[D])||o.push({command:S,args:[m,D,a[D],v]}))}function za(p){return p.id}function va(p,a){return p[a.id]=a,p}class bs{constructor(a,o){this.reset(a,o)}reset(a,o){this.points=a||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=n.aw(a,0,1);let o=1,m=this._distances[o];const v=a*this.paddedLength+this.padding;for(;m<v&&o<this._distances.length;)m=this._distances[++o];const S=o-1,D=this._distances[S],L=m-D,O=L>0?(v-D)/L:0;return this.points[S].mult(1-O).add(this.points[o].mult(O))}}class xl{constructor(a,o,m){const v=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(a/m),this.yCellCount=Math.ceil(o/m);for(let D=0;D<this.xCellCount*this.yCellCount;D++)v.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=o,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,o,m,v,S){this._forEachCell(o,m,v,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(o),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(S)}insertCircle(a,o,m,v){this._forEachCell(o-v,m-v,o+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(o),this.circles.push(m),this.circles.push(v)}_insertBoxCell(a,o,m,v,S,D){this.boxCells[S].push(D)}_insertCircleCell(a,o,m,v,S,D){this.circleCells[S].push(D)}_query(a,o,m,v,S,D){if(m<0||a>this.width||v<0||o>this.height)return!S&&[];const L=[];if(a<=0&&o<=0&&this.width<=m&&this.height<=v){if(S)return!0;for(let O=0;O<this.boxKeys.length;O++)L.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){const U=this.circles[3*O],q=this.circles[3*O+1],Z=this.circles[3*O+2];L.push({key:this.circleKeys[O],x1:U-Z,y1:q-Z,x2:U+Z,y2:q+Z})}return D?L.filter(D):L}return this._forEachCell(a,o,m,v,this._queryCell,L,{hitTest:S,seenUids:{box:{},circle:{}}},D),S?L.length>0:L}_queryCircle(a,o,m,v,S){const D=a-m,L=a+m,O=o-m,U=o+m;if(L<0||D>this.width||U<0||O>this.height)return!v&&[];const q=[];return this._forEachCell(D,O,L,U,this._queryCellCircle,q,{hitTest:v,circle:{x:a,y:o,radius:m},seenUids:{box:{},circle:{}}},S),v?q.length>0:q}query(a,o,m,v,S){return this._query(a,o,m,v,!1,S)}hitTest(a,o,m,v,S){return this._query(a,o,m,v,!0,S)}hitTestCircle(a,o,m,v){return this._queryCircle(a,o,m,!0,v)}_queryCell(a,o,m,v,S,D,L,O){const U=L.seenUids,q=this.boxCells[S];if(q!==null){const X=this.bboxes;for(const ae of q)if(!U.box[ae]){U.box[ae]=!0;const me=4*ae;if(a<=X[me+2]&&o<=X[me+3]&&m>=X[me+0]&&v>=X[me+1]&&(!O||O(this.boxKeys[ae]))){if(L.hitTest)return D.push(!0),!0;D.push({key:this.boxKeys[ae],x1:X[me],y1:X[me+1],x2:X[me+2],y2:X[me+3]})}}}const Z=this.circleCells[S];if(Z!==null){const X=this.circles;for(const ae of Z)if(!U.circle[ae]){U.circle[ae]=!0;const me=3*ae;if(this._circleAndRectCollide(X[me],X[me+1],X[me+2],a,o,m,v)&&(!O||O(this.circleKeys[ae]))){if(L.hitTest)return D.push(!0),!0;{const he=X[me],xe=X[me+1],_e=X[me+2];D.push({key:this.circleKeys[ae],x1:he-_e,y1:xe-_e,x2:he+_e,y2:xe+_e})}}}}}_queryCellCircle(a,o,m,v,S,D,L,O){const U=L.circle,q=L.seenUids,Z=this.boxCells[S];if(Z!==null){const ae=this.bboxes;for(const me of Z)if(!q.box[me]){q.box[me]=!0;const he=4*me;if(this._circleAndRectCollide(U.x,U.y,U.radius,ae[he+0],ae[he+1],ae[he+2],ae[he+3])&&(!O||O(this.boxKeys[me])))return D.push(!0),!0}}const X=this.circleCells[S];if(X!==null){const ae=this.circles;for(const me of X)if(!q.circle[me]){q.circle[me]=!0;const he=3*me;if(this._circlesCollide(ae[he],ae[he+1],ae[he+2],U.x,U.y,U.radius)&&(!O||O(this.circleKeys[me])))return D.push(!0),!0}}}_forEachCell(a,o,m,v,S,D,L,O){const U=this._convertToXCellCoord(a),q=this._convertToYCellCoord(o),Z=this._convertToXCellCoord(m),X=this._convertToYCellCoord(v);for(let ae=U;ae<=Z;ae++)for(let me=q;me<=X;me++)if(S.call(this,a,o,m,v,this.xCellCount*me+ae,D,L,O))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,o,m,v,S,D){const L=v-a,O=S-o,U=m+D;return U*U>L*L+O*O}_circleAndRectCollide(a,o,m,v,S,D,L){const O=(D-v)/2,U=Math.abs(a-(v+O));if(U>O+m)return!1;const q=(L-S)/2,Z=Math.abs(o-(S+q));if(Z>q+m)return!1;if(U<=O||Z<=q)return!0;const X=U-O,ae=Z-q;return X*X+ae*ae<=m*m}}const Ta={unknown:0,flipRequired:1,flipNotRequired:2},ku=Math.tan(85*Math.PI/180);function Eo(p,a,o,m,v,S,D){const L=n.ab.mat4.create();if(o)if(S.name==="globe"){const O=n.bo(v,a);n.ab.mat4.multiply(L,L,O)}else{const O=n.ab.mat2.invert([],D);L[0]=O[0],L[1]=O[1],L[4]=O[2],L[5]=O[3],m||n.ab.mat4.rotateZ(L,L,v.angle)}else n.ab.mat4.multiply(L,v.labelPlaneMatrix,p);return L}function zc(p,a,o,m,v,S,D){const L=Eo(p,a,o,m,v,S,D);return S.name==="globe"&&o||(L[2]=L[6]=L[10]=L[14]=0),L}function Pn(p,a,o,m,v,S,D){if(o){if(S.name==="globe"){const L=Eo(p,a,o,m,v,S,D);return n.ab.mat4.invert(L,L),n.ab.mat4.multiply(L,p,L),L}{const L=n.ab.mat4.clone(p),O=n.ab.mat4.identity([]);return O[0]=D[0],O[1]=D[1],O[4]=D[2],O[5]=D[3],n.ab.mat4.multiply(L,L,O),m||n.ab.mat4.rotateZ(L,L,-v.angle),L}}return v.glCoordMatrix}function Qa(p,a,o,m){const v=[p,a,o,1];o?n.ab.vec4.transformMat4(v,v,m):Iu(v,v,m);const S=v[3];return v[0]/=S,v[1]/=S,v[2]/=S,v}function Ch(p,a){return Math.min(.5+p/a*.5,1.5)}function Gl(p,a){const o=p[0]/p[3],m=p[1]/p[3];return o>=-a[0]&&o<=a[0]&&m>=-a[1]&&m<=a[1]}function Zf(p,a,o,m,v,S,D,L,O,U){const q=o.transform,Z=m?p.textSizeData:p.iconSizeData,X=n.bp(Z,o.transform.zoom),ae=q.projection.name==="globe",me=[256/o.width*2+1,256/o.height*2+1],he=m?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;he.clear();let xe=null;ae&&(xe=m?p.text.globeExtVertexArray:p.icon.globeExtVertexArray);const _e=p.lineVertexArray,Me=m?p.text.placedSymbolArray:p.icon.placedSymbolArray,Be=o.transform.width/o.transform.height;let Oe,Ze=!1;for(let Ue=0;Ue<Me.length;Ue++){const We=Me.get(Ue),{numGlyphs:qe,writingMode:tt}=We;if(tt!==n.bq.vertical||Ze||Oe===n.bq.horizontal||(Ze=!0),Oe=tt,(We.hidden||tt===n.bq.vertical)&&!Ze){Ru(qe,he);continue}Ze=!1;const rt=new n.P(We.tileAnchorX,We.tileAnchorY);let{x:Et,y:_t,z:st}=q.projection.projectTilePoint(rt.x,rt.y,U.canonical);if(O){const[zt,dr,rr]=O(rt);Et+=zt,_t+=dr,st+=rr}const mt=[Et,_t,st,1];if(n.ab.vec4.transformMat4(mt,mt,a),!Gl(mt,me)){Ru(qe,he);continue}const Bt=mt[3],qt=Ch(o.transform.getCameraToCenterDistance(q.projection),Bt),Kt=n.br(Z,X,We),xt=D?Kt/qt:Kt*qt,Ft=Qa(Et,_t,st,v);if(Ft[3]<=0){Ru(qe,he);continue}let Mt={};const Qt=D?null:O,Ot=Hl(We,xt,!1,L,a,v,S,p.glyphOffsetArray,_e,he,xe,Ft,rt,Mt,Be,Qt,q.projection,U,D);Ze=Ot.useVertical,Qt&&Ot.needsFlipping&&(Mt={}),(Ot.notEnoughRoom||Ze||Ot.needsFlipping&&Hl(We,xt,!0,L,a,v,S,p.glyphOffsetArray,_e,he,xe,Ft,rt,Mt,Be,Qt,q.projection,U,D).notEnoughRoom)&&Ru(qe,he)}m?(p.text.dynamicLayoutVertexBuffer.updateData(he),xe&&p.text.globeExtVertexBuffer&&p.text.globeExtVertexBuffer.updateData(xe)):(p.icon.dynamicLayoutVertexBuffer.updateData(he),xe&&p.icon.globeExtVertexBuffer&&p.icon.globeExtVertexBuffer.updateData(xe))}function Lc(p,a,o,m,v,S,D,L,O,U,q,Z,X,ae,me,he){const{lineStartIndex:xe,glyphStartIndex:_e,segment:Me}=L,Be=_e+L.numGlyphs,Oe=xe+L.lineLength,Ze=a.getoffsetX(_e),Ue=a.getoffsetX(Be-1),We=Ai(p*Ze,o,m,v,S,D,Me,xe,Oe,O,U,q,Z,X,!0,ae,me,he);if(!We)return null;const qe=Ai(p*Ue,o,m,v,S,D,Me,xe,Oe,O,U,q,Z,X,!0,ae,me,he);return qe?{first:We,last:qe}:null}function Sd(p,a,o,m){return p===n.bq.horizontal&&Math.abs(m)>Math.abs(o)?{useVertical:!0}:p===n.bq.vertical?m>0?{needsFlipping:!0}:null:a!==Ta.unknown&&function(v,S){return v===0||Math.abs(S/v)>ku}(o,m)?a===Ta.flipRequired?{needsFlipping:!0}:null:o<0?{needsFlipping:!0}:null}function Hl(p,a,o,m,v,S,D,L,O,U,q,Z,X,ae,me,he,xe,_e,Me){const Be=a/24,Oe=p.lineOffsetX*Be,Ze=p.lineOffsetY*Be,{lineStartIndex:Ue,glyphStartIndex:We,numGlyphs:qe,segment:tt,writingMode:rt,flipState:Et}=p,_t=Ue+p.lineLength,st=mt=>{if(q){const[xt,Ft,Mt]=mt.up,Qt=U.length;n.bs(q,Qt+0,xt,Ft,Mt),n.bs(q,Qt+1,xt,Ft,Mt),n.bs(q,Qt+2,xt,Ft,Mt),n.bs(q,Qt+3,xt,Ft,Mt)}const[Bt,qt,Kt]=mt.point;n.bt(U,Bt,qt,Kt,mt.angle)};if(qe>1){const mt=Lc(Be,L,Oe,Ze,o,Z,X,p,O,S,ae,he,!1,xe,_e,Me);if(!mt)return{notEnoughRoom:!0};if(m&&!o){let[Bt,qt,Kt]=mt.first.point,[xt,Ft,Mt]=mt.last.point;[Bt,qt]=Qa(Bt,qt,Kt,D),[xt,Ft]=Qa(xt,Ft,Mt,D);const Qt=Sd(rt,Et,(xt-Bt)*me,Ft-qt);if(p.flipState=Qt&&Qt.needsFlipping?Ta.flipRequired:Ta.flipNotRequired,Qt)return Qt}st(mt.first);for(let Bt=We+1;Bt<We+qe-1;Bt++){const qt=Ai(Be*L.getoffsetX(Bt),Oe,Ze,o,Z,X,tt,Ue,_t,O,S,ae,he,!1,!1,xe,_e,Me);if(!qt)return U.length-=4*(Bt-We),{notEnoughRoom:!0};st(qt)}st(mt.last)}else{if(m&&!o){const Bt=Qa(X.x,X.y,0,v),qt=Ue+tt+1,Kt=new n.P(O.getx(qt),O.gety(qt)),xt=Qa(Kt.x,Kt.y,0,v),Ft=xt[3]>0?xt:Yo(X,Kt,Bt,1,v,void 0,xe,_e.canonical),Mt=Sd(rt,Et,(Ft[0]-Bt[0])*me,Ft[1]-Bt[1]);if(p.flipState=Mt&&Mt.needsFlipping?Ta.flipRequired:Ta.flipNotRequired,Mt)return Mt}const mt=Ai(Be*L.getoffsetX(We),Oe,Ze,o,Z,X,tt,Ue,_t,O,S,ae,he,!1,!1,xe,_e,Me);if(!mt)return{notEnoughRoom:!0};st(mt)}return{}}function Mi(p,a,o,m,v){const{x:S,y:D,z:L}=m.projectTilePoint(p.x,p.y,a);if(!v)return Qa(S,D,L,o);const[O,U,q]=v(p);return Qa(S+O,D+U,L+q,o)}function Yo(p,a,o,m,v,S,D,L){const O=Mi(p.sub(a)._unit()._add(p),L,v,D,S);return n.ab.vec3.sub(O,o,O),n.ab.vec3.normalize(O,O),n.ab.vec3.scaleAndAdd(O,o,O,m)}function Ai(p,a,o,m,v,S,D,L,O,U,q,Z,X,ae,me,he,xe,_e){const Me=m?p-a:p+a;let Be=Me>0?1:-1,Oe=0;m&&(Be*=-1,Oe=Math.PI),Be<0&&(Oe+=Math.PI);let Ze=L+D+(Be>0?0:1)|0,Ue=v,We=v,qe=0,tt=0;const rt=Math.abs(Me),Et=[],_t=[];let st=S,mt=st;const Bt=()=>Yo(mt,st,We,rt-qe+1,q,X,he,xe.canonical);for(;qe+tt<=rt;){if(Ze+=Be,Ze<L||Ze>=O)return null;if(We=Ue,mt=st,Et.push(We),ae&&_t.push(mt),st=new n.P(U.getx(Ze),U.gety(Ze)),Ue=Z[Ze],!Ue){const dr=Mi(st,xe.canonical,q,he,X);Ue=dr[3]>0?Z[Ze]=dr:Bt()}qe+=tt,tt=n.ab.vec3.distance(We,Ue)}me&&X&&(Z[Ze]&&(Ue=Bt(),tt=n.ab.vec3.distance(We,Ue)),Z[Ze]=Ue);const qt=(rt-qe)/tt,Kt=st.sub(mt)._mult(qt)._add(mt),xt=n.ab.vec3.sub([],Ue,We),Ft=n.ab.vec3.scaleAndAdd([],We,xt,qt);let Mt=[0,0,1],Qt=xt[0],Ot=xt[1];if(_e&&(Mt=he.upVector(xe.canonical,Kt.x,Kt.y),Mt[0]!==0||Mt[1]!==0||Mt[2]!==1)){const dr=[Mt[2],0,-Mt[0]],rr=n.ab.vec3.cross([],Mt,dr);n.ab.vec3.normalize(dr,dr),n.ab.vec3.normalize(rr,rr),Qt=n.ab.vec3.dot(xt,dr),Ot=n.ab.vec3.dot(xt,rr)}if(o){const dr=n.ab.vec3.cross([],Mt,xt);n.ab.vec3.normalize(dr,dr),n.ab.vec3.scaleAndAdd(Ft,Ft,dr,o*Be)}const zt=Oe+Math.atan2(Ot,Qt);return Et.push(Ft),ae&&_t.push(Kt),{point:Ft,angle:zt,path:Et,tilePath:_t,up:Mt}}function Ru(p,a){const o=a.length,m=o+4*p;a.resize(m),a.float32.fill(-1/0,4*o,4*m)}function Iu(p,a,o){const m=a[0],v=a[1];return p[0]=o[0]*m+o[4]*v+o[12],p[1]=o[1]*m+o[5]*v+o[13],p[3]=o[3]*m+o[7]*v+o[15],p}const wn=100;class Jo{constructor(a,o,m=new xl(a.width+200,a.height+200,25),v=new xl(a.width+200,a.height+200,25)){this.transform=a,this.grid=m,this.ignoredGrid=v,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+wn,this.screenBottomBoundary=a.height+wn,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.fogState=o}placeCollisionBox(a,o,m,v,S,D,L,O){let U=m.projectedAnchorX,q=m.projectedAnchorY,Z=m.projectedAnchorZ;const X=m.elevation,ae=m.tileID,me=a.getProjection();if(X&&ae){const[Ue,We,qe]=me.upVector(ae.canonical,m.tileAnchorX,m.tileAnchorY),tt=me.upVectorScale(ae.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;U+=Ue*X*tt,q+=We*X*tt,Z+=qe*X*tt}const he=this.projectAndGetPerspectiveRatio(L,U,q,Z,m.tileID,me.name==="globe"||!!X||this.transform.pitch>0,me),xe=D*he.perspectiveRatio,_e=(m.x1*o+v.x-m.padding)*xe+he.point.x,Me=(m.y1*o+v.y-m.padding)*xe+he.point.y,Be=(m.x2*o+v.x+m.padding)*xe+he.point.x,Oe=(m.y2*o+v.y+m.padding)*xe+he.point.y,Ze=he.perspectiveRatio<=.55||he.occluded;return!this.isInsideGrid(_e,Me,Be,Oe)||!S&&this.grid.hitTest(_e,Me,Be,Oe,O)||Ze?{box:[],offscreen:!1,occluded:he.occluded}:{box:[_e,Me,Be,Oe],offscreen:this.isOffscreen(_e,Me,Be,Oe),occluded:!1}}placeCollisionCircles(a,o,m,v,S,D,L,O,U,q,Z,X,ae,me,he){const xe=[],_e=this.transform.elevation,Me=a.getProjection(),Be=_e?_e.getAtTileOffsetFunc(he,this.transform.center.lat,this.transform.worldSize,Me):null,Oe=new n.P(m.tileAnchorX,m.tileAnchorY);let{x:Ze,y:Ue,z:We}=Me.projectTilePoint(Oe.x,Oe.y,he.canonical);if(Be){const[Kt,xt,Ft]=Be(Oe);Ze+=Kt,Ue+=xt,We+=Ft}const qe=Me.name==="globe",tt=this.projectAndGetPerspectiveRatio(L,Ze,Ue,We,he,qe||!!_e||this.transform.pitch>0,Me),{perspectiveRatio:rt}=tt,Et=(Z?D/rt:D*rt)/n.bw,_t=Qa(Ze,Ue,We,O),st=tt.signedDistanceFromCamera>0?Lc(Et,S,m.lineOffsetX*Et,m.lineOffsetY*Et,!1,_t,Oe,m,v,O,{},_e&&!Z?Be:null,Z&&!!_e,Me,he,Z):null;let mt=!1,Bt=!1,qt=!0;if(st&&!tt.occluded){const Kt=.5*ae*rt+me,xt=new n.P(-100,-100),Ft=new n.P(this.screenRightBoundary,this.screenBottomBoundary),Mt=new bs,{first:Qt,last:Ot}=st,zt=Qt.path.length;let dr=[];for(let _r=zt-1;_r>=1;_r--)dr.push(Qt.path[_r]);for(let _r=1;_r<Ot.path.length;_r++)dr.push(Ot.path[_r]);const rr=2.5*Kt;U&&(dr=dr.map(([_r,Kr,Ar],zr)=>(Be&&!qe&&(Ar=Be(zr<zt-1?Qt.tilePath[zt-1-zr]:Ot.tilePath[zr-zt+2])[2]),Qa(_r,Kr,Ar,U))),dr.some(_r=>_r[3]<=0)&&(dr=[]));let yr=[];if(dr.length>0){let _r=1/0,Kr=-1/0,Ar=1/0,zr=-1/0;for(const Hr of dr)_r=Math.min(_r,Hr[0]),Ar=Math.min(Ar,Hr[1]),Kr=Math.max(Kr,Hr[0]),zr=Math.max(zr,Hr[1]);Kr>=xt.x&&_r<=Ft.x&&zr>=xt.y&&Ar<=Ft.y&&(yr=[dr.map(Hr=>new n.P(Hr[0],Hr[1]))],(_r<xt.x||Kr>Ft.x||Ar<xt.y||zr>Ft.y)&&(yr=n.bu(yr,xt.x,xt.y,Ft.x,Ft.y)))}for(const _r of yr){Mt.reset(_r,.25*Kt);let Kr=0;Kr=Mt.length<=.5*Kt?1:Math.ceil(Mt.paddedLength/rr)+1;for(let Ar=0;Ar<Kr;Ar++){const zr=Ar/Math.max(Kr-1,1),Hr=Mt.lerp(zr),pa=Hr.x+wn,oa=Hr.y+wn;xe.push(pa,oa,Kt,0);const pn=pa-Kt,mn=oa-Kt,Ua=pa+Kt,Wa=oa+Kt;if(qt=qt&&this.isOffscreen(pn,mn,Ua,Wa),Bt=Bt||this.isInsideGrid(pn,mn,Ua,Wa),!o&&this.grid.hitTestCircle(pa,oa,Kt,X)&&(mt=!0,!q))return{circles:[],offscreen:!1,collisionDetected:mt,occluded:!1}}}}return{circles:!q&&mt||!Bt?[]:xe,offscreen:qt,collisionDetected:mt,occluded:tt.occluded}}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let m=1/0,v=1/0,S=-1/0,D=-1/0;for(const q of a){const Z=new n.P(q.x+wn,q.y+wn);m=Math.min(m,Z.x),v=Math.min(v,Z.y),S=Math.max(S,Z.x),D=Math.max(D,Z.y),o.push(Z)}const L=this.grid.query(m,v,S,D).concat(this.ignoredGrid.query(m,v,S,D)),O={},U={};for(const q of L){const Z=q.key;if(O[Z.bucketInstanceId]===void 0&&(O[Z.bucketInstanceId]={}),O[Z.bucketInstanceId][Z.featureIndex])continue;const X=[new n.P(q.x1,q.y1),new n.P(q.x2,q.y1),new n.P(q.x2,q.y2),new n.P(q.x1,q.y2)];n.bv(o,X)&&(O[Z.bucketInstanceId][Z.featureIndex]=!0,U[Z.bucketInstanceId]===void 0&&(U[Z.bucketInstanceId]=[]),U[Z.bucketInstanceId].push(Z.featureIndex))}return U}insertCollisionBox(a,o,m,v,S){(o?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:v,collisionGroupID:S},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,o,m,v,S){const D=o?this.ignoredGrid:this.grid,L={bucketInstanceId:m,featureIndex:v,collisionGroupID:S};for(let O=0;O<a.length;O+=4)D.insertCircle(L,a[O],a[O+1],a[O+2])}projectAndGetPerspectiveRatio(a,o,m,v,S,D,L){const O=[o,m,v,1];let U=!1;v||this.transform.pitch>0?(n.ab.vec4.transformMat4(O,O,a),this.fogState&&S&&L.name!=="globe"&&(U=function(X,ae,me,he,xe,_e){const Me=_e.calculateFogTileMatrix(xe),Be=[ae,me,he];return n.ab.vec3.transformMat4(Be,Be,Me),Ur(X,n.ab.vec3.length(Be),_e.pitch,_e._fov)}(this.fogState,o,m,v,S.toUnwrapped(),this.transform)>.9)):Iu(O,O,a);const q=O[3];return{point:new n.P((O[0]/q+1)/2*this.transform.width+wn,(-O[1]/q+1)/2*this.transform.height+wn),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(L)/q*.5,1.5),signedDistanceFromCamera:q,occluded:D&&O[2]>q||U}}isOffscreen(a,o,m,v){return m<wn||a>=this.screenRightBoundary||v<wn||o>this.screenBottomBoundary}isInsideGrid(a,o,m,v){return m>=0&&a<this.gridRightBoundary&&v>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const a=n.ab.mat4.identity([]);return n.ab.mat4.translate(a,a,[-100,-100,0]),a}}function Co(p,a,o){const m=a.createTileMatrix(p,p.worldSize,o.toUnwrapped());return n.ab.mat4.multiply(new Float32Array(16),p.projMatrix,m)}function ri(p,a,o){if(a.projection.name===o.projection.name)return p.projMatrix;const m=o.clone();return m.setProjection(a.projection),Co(m,a.getProjection(),p)}function Dh(p,a,o){return a.name===o.projection.name?p.projMatrix:Co(o,a,p)}class Do{constructor(a,o,m,v){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?o:-o))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class vl{constructor(a,o,m,v,S,D=!1){this.text=new Do(a?a.text:null,o,m,S),this.icon=new Do(a?a.icon:null,o,v,S),this.clipped=D}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Td{constructor(a,o,m,v=!1){this.text=a,this.icon=o,this.skipFade=m,this.clipped=v}}class zu{constructor(){this.invProjMatrix=n.ab.mat4.create(),this.viewportMatrix=n.ab.mat4.create(),this.circles=[]}}class vx{constructor(a,o,m,v,S){this.bucketInstanceId=a,this.featureIndex=o,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=S}}class ql{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const o=++this.maxGroupID;this.collisionGroups[a]={ID:o,predicate:m=>m.collisionGroupID===o}}return this.collisionGroups[a]}}function Xf(p,a,o,m,v){const{horizontalAlign:S,verticalAlign:D}=n.bD(p),L=-(S-.5)*a,O=-(D-.5)*o,U=n.bC(p,m);return new n.P(L+U[0]*v,O+U[1]*v)}function Yf(p,a,o,m,v){const S=new n.P(p,a);return o&&S._rotate(m?v:-v),S}class Vs{constructor(a,o,m,v,S,D){this.transform=a.clone(),this.projection=a.projection.name,this.collisionIndex=new Jo(this.transform,S),this.buildingIndex=D,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=o,this.retainedQueryData={},this.collisionGroups=new ql(m),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,o,m,v,S=1){const D=m.getBucket(o),L=m.latestFeatureIndex;if(!D||!L||o.fqid!==D.layerIds[0])return;const O=D.layers[0].layout,U=D.layers[0].paint,q=m.collisionBoxArray,Z=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),X=m.tileSize/n.ag,ae=m.tileID.toUnwrapped();this.transform.setProjection(D.projection);const me=(he=m.tileID,xe=D.getProjection(),_e=this.transform,xe.name===this.projection?_e.calculateProjMatrix(he.toUnwrapped()):Co(_e,xe,he));var he,xe,_e;const Me=O.get("text-pitch-alignment")==="map",Be=O.get("text-rotation-alignment")==="map";o.compileFilter(o.options);const Oe=o.dynamicFilter(),Ze=o.dynamicFilterNeedsFeature(),Ue=this.transform.calculatePixelsToTileUnitsMatrix(m),We=zc(me,m.tileID.canonical,Me,Be,this.transform,D.getProjection(),Ue);let qe=null;if(Me){const Kt=Pn(me,m.tileID.canonical,Me,Be,this.transform,D.getProjection(),Ue);qe=n.ab.mat4.multiply([],this.transform.labelPlaneMatrix,Kt)}let tt=null;Oe&&m.latestFeatureIndex&&(tt={unwrappedTileID:ae,dynamicFilter:Oe,dynamicFilterNeedsFeature:Ze}),this.retainedQueryData[D.bucketInstanceId]=new vx(D.bucketInstanceId,L,D.sourceLayerIndex,D.index,m.tileID);const[rt,Et]=D.layers[0].layout.get("text-size-scale-range"),_t=n.aw(S,rt,Et),[st,mt]=O.get("icon-size-scale-range"),Bt=n.aw(S,st,mt),qt={bucket:D,layout:O,paint:U,posMatrix:me,textLabelPlaneMatrix:We,labelToScreenMatrix:qe,clippingData:tt,scale:Z,textPixelRatio:X,holdingForFade:m.holdingForFade(),collisionBoxArray:q,partiallyEvaluatedTextSize:n.bp(D.textSizeData,this.transform.zoom,_t),partiallyEvaluatedIconSize:n.bp(D.iconSizeData,this.transform.zoom,Bt),collisionGroup:this.collisionGroups.get(D.sourceID),latestFeatureIndex:m.latestFeatureIndex};if(v)for(const Kt of D.sortKeyRanges){const{sortKey:xt,symbolInstanceStart:Ft,symbolInstanceEnd:Mt}=Kt;a.push({sortKey:xt,symbolInstanceStart:Ft,symbolInstanceEnd:Mt,parameters:qt})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:D.symbolInstances.length,parameters:qt})}attemptAnchorPlacement(a,o,m,v,S,D,L,O,U,q,Z,X,ae,me,he,xe,_e,Me){const{textOffset0:Be,textOffset1:Oe,crossTileID:Ze}=X,Ue=[Be,Oe],We=Xf(a,m,v,Ue,S),qe=this.collisionIndex.placeCollisionBox(me,S,o,Yf(We.x,We.y,D,L,this.transform.angle),Z,O,U,q.predicate);if(xe){const tt=me.getSymbolInstanceIconSize(Me,this.transform.zoom,X.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(me,tt,xe,Yf(We.x,We.y,D,L,this.transform.angle),Z,O,U,q.predicate).box.length===0)return}if(qe.box.length>0){let tt;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ze]&&this.prevPlacement.placements[Ze]&&this.prevPlacement.placements[Ze].text&&(tt=this.prevPlacement.variableOffsets[Ze].anchor),this.variableOffsets[Ze]={textOffset:Ue,width:m,height:v,anchor:a,textScale:S,prevAnchor:tt},this.markUsedJustification(me,a,X,he),me.allowVerticalPlacement&&(this.markUsedOrientation(me,he,X),this.placedOrientations[Ze]=he),{shift:We,placedGlyphBoxes:qe}}}placeLayerBucketPart(a,o,m,v,S=1){const{bucket:D,layout:L,paint:O,posMatrix:U,textLabelPlaneMatrix:q,labelToScreenMatrix:Z,clippingData:X,textPixelRatio:ae,holdingForFade:me,collisionBoxArray:he,partiallyEvaluatedTextSize:xe,partiallyEvaluatedIconSize:_e,collisionGroup:Me,latestFeatureIndex:Be}=a.parameters,Oe=L.get("text-optional"),Ze=L.get("icon-optional"),Ue=L.get("text-allow-overlap"),We=L.get("icon-allow-overlap"),qe=L.get("text-rotation-alignment")==="map",tt=L.get("text-pitch-alignment")==="map",rt=L.get("symbol-z-elevate"),Et=O.get("symbol-z-offset"),_t=L.get("symbol-elevation-reference")==="sea",[st,mt]=L.get("text-size-scale-range"),[Bt,qt]=L.get("icon-size-scale-range"),Kt=n.aw(S,st,mt),xt=n.aw(S,Bt,qt);this.transform.setProjection(D.projection);let Ft=Ue&&(We||!D.hasIconData()||Ze),Mt=We&&(Ue||!D.hasTextData()||Oe);const Qt=!Et.isConstant();!D.collisionArrays&&he&&D.deserializeCollisionBoxes(he),m&&v&&D.updateCollisionDebugBuffers(this.transform.zoom,he,Kt,xt);const Ot=(zt,dr,rr)=>{const{crossTileID:yr,numVerticalGlyphVertices:_r}=zt;let Kr=null;if(X&&X.dynamicFilterNeedsFeature||Qt){const nn=this.retainedQueryData[D.bucketInstanceId];Kr=Be.loadFeature({featureIndex:zt.featureIndex,bucketIndex:nn.bucketIndex,sourceLayerIndex:nn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(X&&!(0,X.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},Kr,this.retainedQueryData[D.bucketInstanceId].tileID.canonical,new n.P(zt.tileAnchorX,zt.tileAnchorY),this.transform.calculateDistanceTileData(X.unwrappedTileID)))return this.placements[yr]=new Td(!1,!1,!1,!0),void o.add(yr);const Ar=Et.evaluate(Kr,{});if(o.has(yr))return;if(me)return void(this.placements[yr]=new Td(!1,!1,!1));let zr=!1,Hr=!1,pa=!0,oa=!1,pn=!1,mn=null,Ua={box:null,offscreen:null,occluded:null},Wa={box:null},ia=null,jr=null,Fa=null,Zr=0,ya=0,xa=0;rr.textFeatureIndex?Zr=rr.textFeatureIndex:zt.useRuntimeCollisionCircles&&(Zr=zt.featureIndex),rr.verticalTextFeatureIndex&&(ya=rr.verticalTextFeatureIndex);const Pa=nn=>{nn.tileID=this.retainedQueryData[D.bucketInstanceId].tileID;const Ga=this.transform.elevation;nn.elevation=_t?Ar:Ar+(Ga?Ga.getAtTileOffset(nn.tileID,nn.tileAnchorX,nn.tileAnchorY):0),nn.elevation+=zt.zOffset},wa=rr.textBox;if(wa){Pa(wa);const nn=qr=>{let vn=n.bq.horizontal;if(D.allowVerticalPlacement&&!qr&&this.prevPlacement){const Qn=this.prevPlacement.placedOrientations[yr];Qn&&(this.placedOrientations[yr]=Qn,vn=Qn,this.markUsedOrientation(D,vn,zt))}return vn},Ga=(qr,vn)=>{if(D.allowVerticalPlacement&&_r>0&&rr.verticalTextBox){for(const Qn of D.writingModes)if(Qn===n.bq.vertical?(Ua=vn(),Wa=Ua):Ua=qr(),Ua&&Ua.box&&Ua.box.length)break}else Ua=qr()};if(L.get("text-variable-anchor")){let qr=L.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[yr]){const an=this.prevPlacement.variableOffsets[yr];qr.indexOf(an.anchor)>0&&(qr=qr.filter(zn=>zn!==an.anchor),qr.unshift(an.anchor))}const vn=(an,zn,Yi)=>{const Ji=D.getSymbolInstanceTextSize(xe,zt,this.transform.zoom,dr),fi=(an.x2-an.x1)*Ji+2*an.padding,Qi=(an.y2-an.y1)*Ji+2*an.padding,ho=zt.hasIconTextFit&&!We?zn:null;ho&&Pa(ho);let us={box:[],offscreen:!1,occluded:!1};const ll=Ue?2*qr.length:qr.length;for(let ds=0;ds<ll;++ds){const li=this.attemptAnchorPlacement(qr[ds%qr.length],an,fi,Qi,Ji,qe,tt,ae,U,Me,ds>=qr.length,zt,dr,D,Yi,ho,xe,_e);if(li&&(us=li.placedGlyphBoxes,us&&us.box&&us.box.length)){zr=!0,mn=li.shift;break}}return us};Ga(()=>vn(wa,rr.iconBox,n.bq.horizontal),()=>{const an=rr.verticalTextBox;return an&&Pa(an),D.allowVerticalPlacement&&!(Ua&&Ua.box&&Ua.box.length)&&_r>0&&an?vn(an,rr.verticalIconBox,n.bq.vertical):{box:null,offscreen:null,occluded:null}}),Ua&&(zr=Ua.box,pa=Ua.offscreen,oa=Ua.occluded);const Qn=nn(!(!Ua||!Ua.box));if(!zr&&this.prevPlacement){const an=this.prevPlacement.variableOffsets[yr];an&&(this.variableOffsets[yr]=an,this.markUsedJustification(D,an.anchor,zt,Qn))}}else{const qr=(vn,Qn)=>{const an=D.getSymbolInstanceTextSize(xe,zt,this.transform.zoom,dr,S),zn=this.collisionIndex.placeCollisionBox(D,an,vn,new n.P(0,0),Ue,ae,U,Me.predicate);return zn&&zn.box&&zn.box.length&&(this.markUsedOrientation(D,Qn,zt),this.placedOrientations[yr]=Qn),zn};Ga(()=>qr(wa,n.bq.horizontal),()=>{const vn=rr.verticalTextBox;return D.allowVerticalPlacement&&_r>0&&vn?(Pa(vn),qr(vn,n.bq.vertical)):{box:null,offscreen:null,occluded:null}}),nn(!!(Ua&&Ua.box&&Ua.box.length))}}if(ia=Ua,zr=ia&&ia.box&&ia.box.length>0,pa=ia&&ia.offscreen,oa=ia&&ia.occluded,zt.useRuntimeCollisionCircles){const nn=D.text.placedSymbolArray.get(zt.centerJustifiedTextSymbolIndex>=0?zt.centerJustifiedTextSymbolIndex:zt.verticalPlacedTextSymbolIndex),Ga=n.br(D.textSizeData,xe,nn),qr=L.get("text-padding");jr=this.collisionIndex.placeCollisionCircles(D,Ue,nn,D.lineVertexArray,D.glyphOffsetArray,Ga,U,q,Z,m,tt,Me.predicate,zt.collisionCircleDiameter*Ga/n.bw,qr,this.retainedQueryData[D.bucketInstanceId].tileID),zr=Ue||jr.circles.length>0&&!jr.collisionDetected,pa=pa&&jr.offscreen,oa=jr.occluded}if(rr.iconFeatureIndex&&(xa=rr.iconFeatureIndex),rr.iconBox){const nn=Ga=>{Pa(Ga);const qr=zt.hasIconTextFit&&mn?Yf(mn.x,mn.y,qe,tt,this.transform.angle):new n.P(0,0),vn=D.getSymbolInstanceIconSize(_e,this.transform.zoom,zt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(D,vn,Ga,qr,We,ae,U,Me.predicate)};Wa&&Wa.box&&Wa.box.length&&rr.verticalIconBox?(Fa=nn(rr.verticalIconBox),Hr=Fa.box.length>0):(Fa=nn(rr.iconBox),Hr=Fa.box.length>0),pa=pa&&Fa.offscreen,pn=Fa.occluded}const En=Oe||zt.numHorizontalGlyphVertices===0&&_r===0,ai=Ze||zt.numIconVertices===0;if(En||ai?ai?En||(Hr=Hr&&zr):zr=Hr&&zr:Hr=zr=Hr&&zr,zr&&ia&&ia.box&&this.collisionIndex.insertCollisionBox(ia.box,L.get("text-ignore-placement"),D.bucketInstanceId,Wa&&Wa.box&&ya?ya:Zr,Me.ID),Hr&&Fa&&this.collisionIndex.insertCollisionBox(Fa.box,L.get("icon-ignore-placement"),D.bucketInstanceId,xa,Me.ID),jr&&(zr&&this.collisionIndex.insertCollisionCircles(jr.circles,L.get("text-ignore-placement"),D.bucketInstanceId,Zr,Me.ID),m)){const nn=D.bucketInstanceId;let Ga=this.collisionCircleArrays[nn];Ga===void 0&&(Ga=this.collisionCircleArrays[nn]=new zu);for(let qr=0;qr<jr.circles.length;qr+=4)Ga.circles.push(jr.circles[qr+0]),Ga.circles.push(jr.circles[qr+1]),Ga.circles.push(jr.circles[qr+2]),Ga.circles.push(jr.collisionDetected?1:0)}const Cn=D.projection.name!=="globe";Ft=Ft&&(Cn||!oa),Mt=Mt&&(Cn||!pn),this.placements[yr]=new Td(zr||Ft,Hr||Mt,pa||D.justReloaded),o.add(yr)};if(rt&&this.buildingIndex&&(this.buildingIndex.updateZOffset(D,this.retainedQueryData[D.bucketInstanceId].tileID),D.updateZOffset()),D.sortFeaturesByY){const zt=D.getSortedSymbolIndexes(this.transform.angle);for(let dr=zt.length-1;dr>=0;--dr){const rr=zt[dr];Ot(D.symbolInstances.get(rr),rr,D.collisionArrays[rr])}D.hasAnyZOffset&&n.w(`${D.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(D.hasAnyZOffset){const zt=D.getSortedIndexesByZOffset();for(let dr=0;dr<zt.length;++dr){const rr=zt[dr];Ot(D.symbolInstances.get(rr),rr,D.collisionArrays[rr])}}else for(let zt=a.symbolInstanceStart;zt<a.symbolInstanceEnd;zt++)Ot(D.symbolInstances.get(zt),zt,D.collisionArrays[zt]);if(m&&D.bucketInstanceId in this.collisionCircleArrays){const zt=this.collisionCircleArrays[D.bucketInstanceId];n.ab.mat4.invert(zt.invProjMatrix,U),zt.viewportMatrix=this.collisionIndex.getViewportMatrix()}D.justReloaded=!1}markUsedJustification(a,o,m,v){const{leftJustifiedTextSymbolIndex:S,centerJustifiedTextSymbolIndex:D,rightJustifiedTextSymbolIndex:L,verticalPlacedTextSymbolIndex:O,crossTileID:U}=m,q=n.bB(o),Z=v===n.bq.vertical?O:q==="left"?S:q==="center"?D:q==="right"?L:-1;S>=0&&(a.text.placedSymbolArray.get(S).crossTileID=Z>=0&&S!==Z?0:U),D>=0&&(a.text.placedSymbolArray.get(D).crossTileID=Z>=0&&D!==Z?0:U),L>=0&&(a.text.placedSymbolArray.get(L).crossTileID=Z>=0&&L!==Z?0:U),O>=0&&(a.text.placedSymbolArray.get(O).crossTileID=Z>=0&&O!==Z?0:U)}markUsedOrientation(a,o,m){const v=o===n.bq.horizontal||o===n.bq.horizontalOnly?o:0,S=o===n.bq.vertical?o:0,{leftJustifiedTextSymbolIndex:D,centerJustifiedTextSymbolIndex:L,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:U}=m,q=a.text.placedSymbolArray;D>=0&&(q.get(D).placedOrientation=v),L>=0&&(q.get(L).placedOrientation=v),O>=0&&(q.get(O).placedOrientation=v),U>=0&&(q.get(U).placedOrientation=S)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let m=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const v=o?o.symbolFadeChange(a):1,S=o?o.opacities:{},D=o?o.variableOffsets:{},L=o?o.placedOrientations:{};for(const O in this.placements){const U=this.placements[O],q=S[O];q?(this.opacities[O]=new vl(q,v,U.text,U.icon,null,U.clipped),m=m||U.text!==q.text.placed||U.icon!==q.icon.placed):(this.opacities[O]=new vl(null,v,U.text,U.icon,U.skipFade,U.clipped),m=m||U.text||U.icon)}for(const O in S){const U=S[O];if(!this.opacities[O]){const q=new vl(U,v,!1,!1);q.isHidden()||(this.opacities[O]=q,m=m||U.text.placed||U.icon.placed)}}for(const O in D)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=D[O]);for(const O in L)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=L[O]);m?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:a)}updateLayerOpacities(a,o,m,v){const S=new Set;for(const D of o){const L=D.getBucket(a);L&&D.latestFeatureIndex&&a.fqid===L.layerIds[0]&&(this.updateBucketOpacities(L,S,D,D.collisionBoxArray,m,v,D.tileID,a.scope),L.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(L,D.tileID),L.updateZOffset()))}}updateBucketOpacities(a,o,m,v,S,D,L,O){a.hasTextData()&&a.text.opacityVertexArray.clear(),a.hasIconData()&&a.icon.opacityVertexArray.clear(),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const U=a.layers[0].layout,q=a.layers[0].paint,Z=!!a.layers[0].dynamicFilter(),X=new vl(null,0,!1,!1,!0),ae=U.get("text-allow-overlap"),me=U.get("icon-allow-overlap"),he=U.get("text-variable-anchor"),xe=U.get("text-rotation-alignment")==="map",_e=U.get("text-pitch-alignment")==="map",Me=q.get("symbol-z-offset"),Be=U.get("symbol-elevation-reference")==="sea",Oe=!Me.isConstant(),Ze=new vl(null,0,ae&&(me||!a.hasIconData()||U.get("icon-optional")),me&&(ae||!a.hasTextData()||U.get("text-optional")),!0);!a.collisionArrays&&v&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(v);const Ue=(qe,tt,rt)=>{for(let Et=0;Et<tt/4;Et++)qe.opacityVertexArray.emplaceBack(rt)};let We=0;D&&a.updateReplacement(L,D);for(let qe=0;qe<a.symbolInstances.length;qe++){const tt=a.symbolInstances.get(qe),{numHorizontalGlyphVertices:rt,numVerticalGlyphVertices:Et,crossTileID:_t,numIconVertices:st,tileAnchorX:mt,tileAnchorY:Bt}=tt;let qt=null;const Kt=this.retainedQueryData[a.bucketInstanceId];Oe&&tt&&Kt&&(qt=m.latestFeatureIndex.loadFeature({featureIndex:tt.featureIndex,bucketIndex:Kt.bucketIndex,sourceLayerIndex:Kt.sourceLayerIndex,layoutVertexArrayOffset:0}));const xt=Me.evaluate(qt,{}),Ft=o.has(_t);let Mt=this.opacities[_t];Ft?Mt=X:Mt||(Mt=Ze,this.opacities[_t]=Mt),o.add(_t);const Qt=rt>0||Et>0,Ot=st>0,zt=this.placedOrientations[_t],dr=zt===n.bq.vertical,rr=zt===n.bq.horizontal||zt===n.bq.horizontalOnly;!Qt&&!Ot||Mt.isHidden()||We++;let yr=!1;if((Qt||Ot)&&D)for(const _r of a.activeReplacements){if(n.bx(_r,S,n.by.Symbol,O)||_r.min.x>mt||mt>_r.max.x||_r.min.y>Bt||Bt>_r.max.y)continue;const Kr=n.bz(mt,Bt,L.canonical,_r.footprintTileId.canonical);if(yr=n.bA(Kr,_r.footprint),yr)break}if(Qt){const _r=yr?Qo:p0(Mt.text);Ue(a.text,rt,dr?Qo:_r),Ue(a.text,Et,rr?Qo:_r);const Kr=Mt.text.isHidden(),{leftJustifiedTextSymbolIndex:Ar,centerJustifiedTextSymbolIndex:zr,rightJustifiedTextSymbolIndex:Hr,verticalPlacedTextSymbolIndex:pa}=tt,oa=a.text.placedSymbolArray,pn=Kr||dr?1:0;Ar>=0&&(oa.get(Ar).hidden=pn),zr>=0&&(oa.get(zr).hidden=pn),Hr>=0&&(oa.get(Hr).hidden=pn),pa>=0&&(oa.get(pa).hidden=Kr||rr?1:0);const mn=this.variableOffsets[_t];mn&&this.markUsedJustification(a,mn.anchor,tt,zt);const Ua=this.placedOrientations[_t];Ua&&(this.markUsedJustification(a,"left",tt,Ua),this.markUsedOrientation(a,Ua,tt))}if(Ot){const _r=yr?Qo:p0(Mt.icon),{placedIconSymbolIndex:Kr,verticalPlacedIconSymbolIndex:Ar}=tt,zr=a.icon.placedSymbolArray,Hr=Mt.icon.isHidden()?1:0;Kr>=0&&(Ue(a.icon,st,dr?Qo:_r),zr.get(Kr).hidden=Hr),Ar>=0&&(Ue(a.icon,tt.numVerticalIconVertices,rr?Qo:_r),zr.get(Ar).hidden=Hr)}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const _r=a.collisionArrays[qe];if(_r){let Kr=new n.P(0,0),Ar=!0;if(_r.textBox||_r.verticalTextBox){if(he){const Hr=this.variableOffsets[_t];Hr?(Kr=Xf(Hr.anchor,Hr.width,Hr.height,Hr.textOffset,Hr.textScale),xe&&Kr._rotate(_e?this.transform.angle:-this.transform.angle)):Ar=!1}Z&&(Ar=!Mt.clipped),_r.textBox&&Jf(a.textCollisionBox.collisionVertexArray,Mt.text.placed,!Ar||dr,xt,Be,Kr.x,Kr.y),_r.verticalTextBox&&Jf(a.textCollisionBox.collisionVertexArray,Mt.text.placed,!Ar||rr,xt,Be,Kr.x,Kr.y)}const zr=Ar&&!!(!rr&&_r.verticalIconBox);_r.iconBox&&Jf(a.iconCollisionBox.collisionVertexArray,Mt.icon.placed,zr,xt,Be,tt.hasIconTextFit?Kr.x:0,tt.hasIconTextFit?Kr.y:0),_r.verticalIconBox&&Jf(a.iconCollisionBox.collisionVertexArray,Mt.icon.placed,!zr,xt,Be,tt.hasIconTextFit?Kr.x:0,tt.hasIconTextFit?Kr.y:0)}}}if(a.fullyClipped=We===0,a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.bucketInstanceId in this.collisionCircleArrays){const qe=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=qe.invProjMatrix,a.placementViewportMatrix=qe.viewportMatrix,a.collisionCircleArray=qe.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,o){const m=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*m>a}setStale(){this.stale=!0}}function Jf(p,a,o,m,v,S,D){p.emplaceBack(a?1:0,o?1:0,S||0,D||0,m,v?1:0),p.emplaceBack(a?1:0,o?1:0,S||0,D||0,m,v?1:0),p.emplaceBack(a?1:0,o?1:0,S||0,D||0,m,v?1:0),p.emplaceBack(a?1:0,o?1:0,S||0,D||0,m,v?1:0)}const Ph=Math.pow(2,25),f0=Math.pow(2,24),Mh=Math.pow(2,17),_x=Math.pow(2,16),bx=Math.pow(2,9),Ah=Math.pow(2,8),kh=Math.pow(2,1);function p0(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const a=p.placed?1:0,o=Math.floor(127*p.opacity);return o*Ph+a*f0+o*Mh+a*_x+o*bx+a*Ah+o*kh+a}const Qo=0;class m0{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&a.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(a,o,m,v,S,D){const L=this._bucketParts;for(;this._currentTileIndex<a.length;)if(o.getBucketParts(L,v,a[this._currentTileIndex],this._sortAcrossTiles,D),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,L.sort((O,U)=>O.sortKey-U.sortKey));this._currentPartIndex<L.length;){const O=L[this._currentPartIndex];if(o.placeLayerBucketPart(O,this._seenCrossTileIDs,m,O.symbolInstanceStart===0,D),this._currentPartIndex++,S())return!0}return!1}}class Ed{constructor(a,o,m,v,S,D,L,O,U){this.placement=new Vs(a,S,D,L,O,U),this._currentPlacementIndex=o.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(a,o,m,v,S){const D=n.q.now(),L=()=>{const O=n.q.now()-D;return!this._forceFullPlacement&&O>2};for(;this._currentPlacementIndex>=0;){const O=o[a[this._currentPlacementIndex]],U=this.placement.collisionIndex.transform.zoom;if(O.type==="symbol"&&(!O.minzoom||O.minzoom<=U)&&(!O.maxzoom||O.maxzoom>U)){const q=O,Z=q.layout.get("symbol-z-elevate"),X=q.layout.get("symbol-sort-key").constantOr(1)!==void 0,ae=q.layout.get("symbol-z-order"),me=ae==="viewport-y"||ae==="auto"&&!(ae!=="viewport-y"&&X),he=q.layout.get("text-allow-overlap")||q.layout.get("icon-allow-overlap")||q.layout.get("text-ignore-placement")||q.layout.get("icon-ignore-placement"),xe=me&&he,_e=this._inProgressLayer=this._inProgressLayer||new m0(q),Me=n.aC(O.source,O.scope);if(_e.continuePlacement(Z||xe?v[Me]:m[Me],this.placement,this._showCollisionBoxes,O,L,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const Us=512/n.ag/2;class wx{constructor(a,o,m){this.tileID=a,this.bucketInstanceId=m,this.index=new n.bE(o.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const v=a.canonical.x*n.ag,S=a.canonical.y*n.ag;for(let D=0;D<o.length;D++){const{key:L,crossTileID:O,tileAnchorX:U,tileAnchorY:q}=o.get(D),Z=Math.floor((v+U)*Us),X=Math.floor((S+q)*Us);this.index.add(Z,X),this.keys.push(L),this.crossTileIDs.push(O)}this.index.finish()}findMatches(a,o,m){const v=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z),S=Us/Math.pow(2,o.canonical.z-this.tileID.canonical.z),D=o.canonical.x*n.ag,L=o.canonical.y*n.ag;for(let O=0;O<a.length;O++){const U=a.get(O);if(U.crossTileID)continue;const{key:q,tileAnchorX:Z,tileAnchorY:X}=U,ae=Math.floor((D+Z)*S),me=Math.floor((L+X)*S),he=this.index.range(ae-v,me-v,ae+v,me+v);for(const xe of he){const _e=this.crossTileIDs[xe];if(this.keys[xe]===q&&!m.has(_e)){m.add(_e),U.crossTileID=_e;break}}}}}class g0{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class y0{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const o=Math.round((a-this.lng)/360);if(o!==0)for(const m in this.indexes){const v=this.indexes[m],S={};for(const D in v){const L=v[D];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+o),S[L.tileID.key]=L}this.indexes[m]=S}this.lng=a}addBucket(a,o,m){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let S=0;S<o.symbolInstances.length;S++)o.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]=new Set);const v=this.usedCrossTileIDs[a.overscaledZ];for(const S in this.indexes){const D=this.indexes[S];if(Number(S)>a.overscaledZ)for(const L in D){const O=D[L];O.tileID.isChildOf(a)&&O.findMatches(o.symbolInstances,a,v)}else{const L=D[a.scaledTo(Number(S)).key];L&&L.findMatches(o.symbolInstances,a,v)}}for(let S=0;S<o.symbolInstances.length;S++){const D=o.symbolInstances.get(S);D.crossTileID||(D.crossTileID=m.generate(),v.add(D.crossTileID))}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new wx(a,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(a,o){for(const m of o.crossTileIDs)this.usedCrossTileIDs[a].delete(m)}removeStaleBuckets(a){let o=!1;for(const m in this.indexes){const v=this.indexes[m];for(const S in v)a[v[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[S]),delete v[S],o=!0)}return o}}class $m{constructor(){this.layerIndexes={},this.crossTileIDs=new g0,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,o,m,v){let S=this.layerIndexes[a.fqid];S===void 0&&(S=this.layerIndexes[a.fqid]=new y0);let D=!1;const L={};v.name!=="globe"&&S.handleWrapJump(m);for(const O of o){const U=O.getBucket(a);U&&a.fqid===U.layerIds[0]&&(U.bucketInstanceId||(U.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(O.tileID,U,this.crossTileIDs)&&(D=!0),L[U.bucketInstanceId]=!0)}return S.removeStaleBuckets(L)&&(D=!0),D}pruneUnusedLayers(a){const o={};a.forEach(m=>{o[m]=!0});for(const m in this.layerIndexes)o[m]||delete this.layerIndexes[m]}}const Lu=771;class ua{constructor(a,o,m,v){this.blendFunction=a,this.blendColor=o,this.mask=m,this.blendEquation=v}}ua.Replace=[1,0,1,0],ua.disabled=new ua(ua.Replace,n.aj.transparent,[!1,!1,!1,!1]),ua.unblended=new ua(ua.Replace,n.aj.transparent,[!0,!0,!0,!0]),ua.alphaBlended=new ua([1,Lu,1,Lu],n.aj.transparent,[!0,!0,!0,!0]),ua.alphaBlendedNonPremultiplied=new ua([770,Lu,770,Lu],n.aj.transparent,[!0,!0,!0,!0]),ua.multiply=new ua([774,0,774,0],n.aj.transparent,[!0,!0,!0,!0]);class Rr{constructor(a,o,m){this.func=a,this.mask=o,this.range=m}}Rr.ReadOnly=!1,Rr.ReadWrite=!0,Rr.disabled=new Rr(519,Rr.ReadOnly,[0,1]);const Qf=7680;class ea{constructor(a,o,m,v,S,D){this.test=a,this.ref=o,this.mask=m,this.fail=v,this.depthFail=S,this.pass=D}}ea.disabled=new ea({func:519,mask:0},0,0,Qf,Qf,Qf);const ep=1029,_l=2305;class Gr{constructor(a,o,m){this.enable=a,this.mode=o,this.frontFace=m}}function $u(p,a){const o=n.bG(p,3);n.ab.mat4.fromQuat(p,a),n.bI(p,3,o)}function $c(p,a){const o=n.ab.quat.identity([]);return n.ab.quat.rotateZ(o,o,-a),n.ab.quat.rotateX(o,o,-p),o}function Cd(p,a){const o=[p[0],p[1],0],m=[a[0],a[1],0];if(n.ab.vec3.length(o)>=1e-15){const D=n.ab.vec3.normalize([],o);n.ab.vec3.scale(m,D,n.ab.vec3.dot(m,D)),a[0]=m[0],a[1]=m[1]}const v=n.ab.vec3.cross([],a,p);if(n.ab.vec3.len(v)<1e-15)return null;const S=Math.atan2(-v[1],v[0]);return $c(Math.atan2(Math.sqrt(p[0]*p[0]+p[1]*p[1]),-p[2]),S)}Gr.disabled=new Gr(!1,ep,_l),Gr.backCCW=new Gr(!0,ep,_l),Gr.backCW=new Gr(!0,ep,2304),Gr.frontCW=new Gr(!0,1028,2304),Gr.frontCCW=new Gr(!0,1028,_l);class Wl{constructor(a,o){this.position=a,this.orientation=o}get position(){return this._position}set position(a){if(a){const o=a instanceof n.aa?a:new n.aa(a[0],a[1],a[2]);this._renderWorldCopies&&(o.x=n.bF(o.x,0,1)),this._position=o}else this._position=null}lookAtPoint(a,o){if(this.orientation=null,!this.position)return;const m=this.position,v=this._elevation?this._elevation.getAtPointOrZero(n.aa.fromLngLat(a)):0,S=n.aa.fromLngLat(a,v),D=[S.x-m.x,S.y-m.y,S.z-m.z];o||(o=[0,0,1]),o[2]=Math.abs(o[2]),this.orientation=Cd(D,o)}setPitchBearing(a,o){this.orientation=$c(n.ai(a),n.ai(-o))}}class Dd{constructor(a,o){this._transform=n.ab.mat4.identity([]),this.orientation=o,this.position=a}get mercatorPosition(){const a=this.position;return new n.aa(a[0],a[1],a[2])}get position(){const a=n.bG(this._transform,3);return[a[0],a[1],a[2]]}set position(a){var o;a&&n.bI(this._transform,3,[(o=a)[0],o[1],o[2],1])}get orientation(){return this._orientation}set orientation(a){this._orientation=a||n.ab.quat.identity([]),a&&$u(this._transform,this._orientation)}getPitchBearing(){const a=this.forward(),o=this.right();return{bearing:Math.atan2(-o[1],o[0]),pitch:Math.atan2(Math.sqrt(a[0]*a[0]+a[1]*a[1]),-a[2])}}setPitchBearing(a,o){this._orientation=$c(a,o),$u(this._transform,this._orientation)}forward(){const a=n.bG(this._transform,2);return[-a[0],-a[1],-a[2]]}up(){const a=n.bG(this._transform,1);return[-a[0],-a[1],-a[2]]}right(){const a=n.bG(this._transform,0);return[a[0],a[1],a[2]]}getCameraToWorld(a,o){const m=new Float64Array(16);return n.ab.mat4.invert(m,this.getWorldToCamera(a,o)),m}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(a,o,m){const v=this.position;n.ab.vec3.scale(v,v,-a);const S=new Float64Array(16);return n.ab.mat4.fromScaling(S,[m,m,m]),n.ab.mat4.translate(S,S,v),S[10]*=o,S}getWorldToCamera(a,o){const m=new Float64Array(16),v=new Float64Array(4),S=this.position;return n.ab.quat.conjugate(v,this._orientation),n.ab.vec3.scale(S,S,-a),n.ab.mat4.fromQuat(m,v),n.ab.mat4.translate(m,m,S),m[1]*=-1,m[5]*=-1,m[9]*=-1,m[13]*=-1,m[8]*=o,m[9]*=o,m[10]*=o,m[11]*=o,m}getCameraToClipPerspective(a,o,m,v){const S=new Float64Array(16);return n.ab.mat4.perspective(S,a,o,m,v),S}getCameraToClipOrthographic(a,o,m,v,S,D){const L=new Float64Array(16);return n.ab.mat4.ortho(L,a,o,m,v,S,D),L}getDistanceToElevation(a,o=!1){const m=a===0?0:n.bH(a,o?n.aS(this.position[1]):this.position[1]),v=this.forward();return(m-this.position[2])/v[2]}clone(){return new Dd([...this.position],[...this.orientation])}}const Oi={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class ws{constructor(a=0,o=0,m=0,v=0){if(isNaN(a)||a<0||isNaN(o)||o<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=o,this.left=m,this.right=v}interpolate(a,o,m){return o.top!=null&&a.top!=null&&(this.top=n.af(a.top,o.top,m)),o.bottom!=null&&a.bottom!=null&&(this.bottom=n.af(a.bottom,o.bottom,m)),o.left!=null&&a.left!=null&&(this.left=n.af(a.left,o.left,m)),o.right!=null&&a.right!=null&&(this.right=n.af(a.right,o.right,m)),this}getCenter(a,o){const m=n.aw((this.left+a-this.right)/2,0,a),v=n.aw((this.top+o-this.bottom)/2,0,o);return new n.P(m,v)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new ws(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Pd=(p,a,o)=>(1-o)*p+o*a,lr=p=>p*p*p*p*p;class Rh{constructor(a,o,m,v,S,D,L){this.tileSize=512,this._renderWorldCopies=S===void 0||S,this._minZoom=a||0,this._maxZoom=o||22,this._minPitch=m??0,this._maxPitch=v??60,this.setProjection(D),this.setMaxBounds(L),this.width=0,this.height=0,this._center=new n.bO(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ws,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Dd,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const a=new Rh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return a._elevation=this._elevation,a._centerAltitude=this._centerAltitude,a._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,a.tileSize=this.tileSize,a.mercatorFromTransition=this.mercatorFromTransition,a.width=this.width,a.height=this.height,a.cameraElevationReference=this.cameraElevationReference,a._center=this._center,a._setZoom(this.zoom),a._seaLevelZoom=this._seaLevelZoom,a.angle=this.angle,a._fov=this._fov,a._pitch=this._pitch,a._nearZ=this._nearZ,a._farZ=this._farZ,a._averageElevation=this._averageElevation,a._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,a._unmodified=this._unmodified,a._edgeInsets=this._edgeInsets.clone(),a._camera=this._camera.clone(),a._calcMatrices(),a.freezeTileCoverage=this.freezeTileCoverage,a.frustumCorners=this.frustumCorners,a}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(a){this._elevation!==a&&(this._elevation=a,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(a,o=!1){const m=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||m)&&this._updateCameraOnTerrain(),(a||m)&&this._constrainCamera(o),this._calcMatrices()}getProjection(){return n.ay(this.projection,["name","center","parallels"])}setProjection(a){this.projectionOptions=a||{name:"mercator"};const o=this.projection?this.getProjection():void 0;this.projection=n.bP(this.projectionOptions);const m=this.getProjection(),v=!n.bn(o,m);return v&&this._calcMatrices(),this.mercatorFromTransition=!1,v}setOrthographicProjectionAtLowPitch(a){return this._orthographicProjectionAtLowPitch!==a&&(this._orthographicProjectionAtLowPitch=a,this._calcMatrices(),!0)}setMercatorFromTransition(){const a=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=n.bP({name:"mercator"});const o=a!==this.projection.name;return o&&this._calcMatrices(),o}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get cameraWorldSize(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return n.bH(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.P(this.width,this.height)}get bearing(){return n.bF(this.rotation,-180,180)}set bearing(a){this.rotation=a}get rotation(){return-this.angle/Math.PI*180}set rotation(a){const o=-a*Math.PI/180;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=n.ab.mat2.create(),n.ab.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const o=n.aw(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const a=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/a)}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=n.ai(a),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(a){this._averageElevation=a,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(a){const o=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._setZoom(o),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(a){this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(a){this._tileCoverLift!==a&&(this._tileCoverLift=a)}_updateCameraOnTerrain(){const a=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,o=this.elevation&&a===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||a===Number.NEGATIVE_INFINITY&&(!o||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const m=this._elevation;o||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&m.exaggeration()&&this._centerAltitudeValidForExaggeration!==m.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*m.exaggeration(),this._centerAltitudeValidForExaggeration=m.exaggeration()):(this._centerAltitude=a||0,this._centerAltitudeValidForExaggeration=m.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const a=this._elevation,o=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],m=this.horizonLineFromTop();let v=0,S=0;for(let D=0;D<o.length;D++){const L=new n.P(o[D][0]*this.width,m+o[D][1]*(this.height-m)),O=a.pointCoordinate(L);if(!O)continue;const U=1/Math.hypot(O[0]-this._camera.position[0],O[1]-this._camera.position[1]);v+=O[3]*U,S+=U}return S===0?NaN:v/S}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const a=this._seaLevelZoom,o=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),m=this.pixelsPerMeter/this.worldSize*o,v=this._mercatorZfromZoom(a),S=this._mercatorZfromZoom(this._maxZoom),D=Math.max(v-m,S);this._setZoom(this._zoomFromMercatorZ(D))}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}computeZoomRelativeTo(a){const o=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,a.toAltitude()));let m;m=a.z<this._camera.position[2]?[o.x,o.y,o.z]:[a.x,a.y,a.z];const v=n.ab.vec3.length(n.ab.vec3.sub([],this._camera.position,m));return n.aw(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(a){if(!this.height||!a.position&&!a.orientation)return;this._updateCameraState();let o=!1;if(a.orientation&&!n.ab.quat.exactEquals(a.orientation,this._camera.orientation)&&(o=this._setCameraOrientation(a.orientation)),a.position){const m=[a.position.x,a.position.y,a.position.z];n.ab.vec3.exactEquals(m,this._camera.position)||(this._setCameraPosition(m),o=!0)}o&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const a=this._camera.position,o=new Wl;return o.position=new n.aa(a[0],a[1],a[2]),o.orientation=this._camera.orientation,o._elevation=this.elevation,o._renderWorldCopies=this.renderWorldCopies,o}_setCameraOrientation(a){if(!n.ab.quat.length(a))return!1;n.ab.quat.normalize(a,a);const o=n.ab.vec3.transformQuat([],[0,0,-1],a),m=n.ab.vec3.transformQuat([],[0,-1,0],a);if(m[2]<0)return!1;const v=Cd(o,m);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(a){const o=this.zoomScale(this.minZoom)*this.tileSize,m=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;a[2]=n.aw(a[2],v/m,v/o),this._camera.position=a}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,o,m){this._unmodified=!1,this._edgeInsets.interpolate(a,o,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const o=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,o)}getVisibleUnwrappedCoordinates(a){const o=[new n.bQ(0,a)];if(this.renderWorldCopies){const m=this.pointCoordinate(new n.P(0,0)),v=this.pointCoordinate(new n.P(this.width,0)),S=this.pointCoordinate(new n.P(this.width,this.height)),D=this.pointCoordinate(new n.P(0,this.height)),L=Math.floor(Math.min(m.x,v.x,S.x,D.x)),O=Math.floor(Math.max(m.x,v.x,S.x,D.x)),U=1;for(let q=L-U;q<=O+U;q++)q!==0&&o.push(new n.bQ(q,a))}return o}isLODDisabled(a){return(!a||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(a,o,m){let v=[];const S=m!==void 0,D=!S;if(D&&this.zoom<o||S&&m[0]===0&&m[1]===0)return v;const L=new Set,O=(q,Z,X,ae,me)=>{const he=n.c5(Z,q,X,ae,me);L.has(he)||(v.push(new n.aG(q,Z,X,ae,me)),L.add(he))};for(let q=0;q<a.length;q++){const Z=a[q];if(D&&Z.canonical.z!==o)continue;const X=Z.canonical,ae=Z.overscaledZ,me=Z.wrap,he=1<<X.z,xe=X.x+1<he,_e=X.x>0,Me=X.y+1<he,Be=X.y>0,Oe=Z.wrap-(_e?0:1),Ze=Z.wrap+(xe?0:1),Ue=_e?X.x-1:he-1,We=xe?X.x+1:0;if(S)m[0]<0?(O(ae,Ze,X.z,We,X.y),m[1]<0&&Me&&(O(ae,me,X.z,X.x,X.y+1),O(ae,Ze,X.z,We,X.y+1)),m[1]>0&&Be&&(O(ae,me,X.z,X.x,X.y-1),O(ae,Ze,X.z,We,X.y-1))):m[0]>0?(O(ae,Oe,X.z,Ue,X.y),m[1]<0&&Me&&(O(ae,me,X.z,X.x,X.y+1),O(ae,Oe,X.z,Ue,X.y+1)),m[1]>0&&Be&&(O(ae,me,X.z,X.x,X.y-1),O(ae,Oe,X.z,Ue,X.y-1))):m[1]<0&&Me?O(ae,me,X.z,X.x,X.y+1):Be&&O(ae,me,X.z,X.x,X.y-1);else{const qe=Z.visibleQuadrants;1&qe&&(O(ae,Oe,X.z,Ue,X.y),Be&&(O(ae,me,X.z,X.x,X.y-1),O(ae,Oe,X.z,Ue,X.y-1))),2&qe&&(O(ae,Ze,X.z,We,X.y),Be&&(O(ae,me,X.z,X.x,X.y-1),O(ae,Ze,X.z,We,X.y-1))),4&qe&&(O(ae,Oe,X.z,Ue,X.y),Me&&(O(ae,me,X.z,X.x,X.y+1),O(ae,Oe,X.z,Ue,X.y+1))),8&qe&&(O(ae,Ze,X.z,We,X.y),Me&&(O(ae,me,X.z,X.x,X.y+1),O(ae,Ze,X.z,We,X.y+1)))}}const U=[];for(const q of v)v.some(Z=>q.isChildOf(Z))||U.push(q);if(v=U.filter(q=>!a.some(Z=>!!(q.overscaledZ<o&&Z.isChildOf(q))||q.equals(Z)||q.isChildOf(Z))),D){const q=1<<o,Z=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),X=[q*Z.x,q*Z.y],ae=4,me=ae*ae;v=v.filter(he=>{const xe=he.canonical.x+.5-X[0],_e=he.canonical.y+.5-X[1];return xe*xe+_e*_e<me})}return v}coveringTiles(a){let o=this.coveringZoomLevel(a);const m=o,v=this.elevation&&this.elevation.exaggeration(),S=v&&!a.isTerrainDEM,D=this.projection.name==="mercator";if(a.minzoom!==void 0&&o<a.minzoom)return[];a.maxzoom!==void 0&&o>a.maxzoom&&(o=a.maxzoom);const L=this.locationCoordinate(this.center),O=this.center.lat,U=1<<o,q=[U*L.x,U*L.y,0],Z=this.projection.name==="globe",X=!Z,ae=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,o,X),me=Z?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),he=U*n.bH(1,this.center.lat),xe=this._camera.position[2]/n.bH(1,this.center.lat),_e=[U*me.x,U*me.y,xe*(X?1:he)],Me=Z||v,Be=this.cameraToCenterDistance/a.tileSize*(a.roundZoom?1:.502),Oe=this.isLODDisabled(!0)?o:0;let Ze;if(this._elevation&&a.isTerrainDEM)Ze=1e4*this._elevation.exaggeration();else if(this._elevation){const xt=this._elevation.getMinMaxForVisibleTiles();Ze=xt?xt.max:this._centerAltitude}else Ze=this._centerAltitude;const Ue=a.isTerrainDEM?-Ze:this._elevation?this._elevation.getMinElevationBelowMSL():0,We=this.projection.isReprojectedInTileSpace?n.bS(this):1,qe=xt=>{const Mt=new n.aa(xt.x+25e-6,xt.y,xt.z),Qt=new n.aa(xt.x,xt.y+25e-6,xt.z),Ot=xt.toLngLat(),zt=Mt.toLngLat(),dr=Qt.toLngLat(),rr=this.locationCoordinate(Ot),yr=this.locationCoordinate(zt),_r=this.locationCoordinate(dr),Kr=Math.hypot(yr.x-rr.x,yr.y-rr.y),Ar=Math.hypot(_r.x-rr.x,_r.y-rr.y);return Math.sqrt(Kr*Ar)*We/25e-6},tt=xt=>{const Ft=Ze,Mt=Ue;return{aabb:n.bV(this,U,0,0,0,xt,Mt,Ft,this.projection),zoom:0,x:0,y:0,minZ:Mt,maxZ:Ft,wrap:xt,fullyVisible:!1}},rt=[];let Et=[];const _t=o,st=a.reparseOverscaled?m:o,mt=(xe-this._centerAltitude)*he,Bt=xt=>{if(!this._elevation||!xt.tileID||!D)return;const Ft=this._elevation.getMinMaxForTile(xt.tileID),Mt=xt.aabb;Ft?(Mt.min[2]=Ft.min,Mt.max[2]=Ft.max,Mt.center[2]=(Mt.min[2]+Mt.max[2])/2):(xt.shouldSplit=Kt(xt),xt.shouldSplit||(Mt.min[2]=Mt.max[2]=Mt.center[2]=this._centerAltitude))},qt=(xt,Ft)=>{if(.707*Ft<xt)return 1;const Mt=Ft/xt;return Mt/(1.4144271570014144+(Math.pow(1.1,Mt-1.4144271570014144+1)-1)/(1.1-1)-1)},Kt=xt=>{if(xt.zoom<Oe)return!0;if(xt.zoom===_t)return!1;if(xt.shouldSplit!=null)return xt.shouldSplit;const Ft=xt.aabb.distanceX(_e),Mt=xt.aabb.distanceY(_e);let Qt=mt,Ot=1;if(Z){Qt=xt.aabb.distanceZ(_e);const Ar=Math.pow(2,xt.zoom),zr=n.aS((xt.y+1)/Ar),Hr=n.aS(xt.y/Ar),pa=Math.min(Math.max(O,zr),Hr),oa=n.c9(pa)/n.c9(O);if(Ot=pa===O?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,oa/this._mercatorScaleRatio),this.zoom<=n.c6&&xt.zoom===_t-1&&oa>=.9)return!0}else if(S&&(Qt=xt.aabb.distanceZ(_e)*he),this.projection.isReprojectedInTileSpace&&m<=5){const Ar=Math.pow(2,xt.zoom),zr=qe(new n.aa((xt.x+.5)/Ar,(xt.y+.5)/Ar));Ot=zr>.85?1:zr}if(!D){const Ar=Math.sqrt(Ft*Ft+Mt*Mt+Qt*Qt);let zr=(1<<_t-xt.zoom)*Be*Ot;return zr*=qt(Math.max(Qt,mt),Ar),Ar<zr}let zt=Number.MAX_VALUE,dr=0;const rr=xt.aabb.getCorners(),yr=[];for(const Ar of rr){n.ab.vec3.sub(yr,Ar,_e),Z||(S?yr[2]*=he:yr[2]=mt);const zr=n.ab.vec3.dot(yr,this._camera.forward());zr<zt&&(zt=zr,dr=Math.abs(yr[2]))}let _r=(1<<_t-xt.zoom)*Be*Ot;if(_r*=qt(Math.max(dr,mt),zt),zt<_r)return!0;const Kr=xt.aabb.closestPoint(q);return Kr[0]===q[0]&&Kr[1]===q[1]};if(this.renderWorldCopies)for(let xt=1;xt<=3;xt++)rt.push(tt(-xt)),rt.push(tt(xt));for(rt.push(tt(0));rt.length>0;){const xt=rt.pop(),Ft=xt.x,Mt=xt.y;let Qt=xt.fullyVisible;const Ot=()=>this.projection.name==="globe"&&(xt.y===0||xt.y===(1<<xt.zoom)-1);if(!Qt){let zt=Me?xt.aabb.intersects(ae):xt.aabb.intersectsFlat(ae);if(zt===0&&Ot()){const dr=new n.bT(xt.zoom,Ft,Mt);zt=n.bU(this,U,dr,!0).intersects(ae)}if(zt===0)continue;Qt=zt===2}if(xt.zoom!==_t&&Kt(xt))for(let zt=0;zt<4;zt++){const dr=(Ft<<1)+zt%2,rr=(Mt<<1)+(zt>>1),yr={aabb:D?xt.aabb.quadrant(zt):n.bV(this,U,xt.zoom+1,dr,rr,xt.wrap,xt.minZ,xt.maxZ,this.projection),zoom:xt.zoom+1,x:dr,y:rr,wrap:xt.wrap,fullyVisible:Qt,tileID:void 0,shouldSplit:void 0,minZ:xt.minZ,maxZ:xt.maxZ};S&&!Z&&(yr.tileID=new n.aG(xt.zoom+1===_t?st:xt.zoom+1,xt.wrap,xt.zoom+1,dr,rr),Bt(yr)),rt.push(yr)}else{const zt=xt.zoom===_t?st:xt.zoom;if(a.minzoom&&a.minzoom>zt)continue;let dr=0;if(!Qt){let Kr=Me?xt.aabb.intersectsPrecise(ae):xt.aabb.intersectsPreciseFlat(ae);if(Kr===0&&Ot()){const Ar=new n.bT(xt.zoom,Ft,Mt);Kr=n.bU(this,U,Ar,!0).intersectsPrecise(ae)}if(Kr===0)continue;if(a.calculateQuadrantVisibility)if(ae.containsPoint(xt.aabb.center))dr=15;else for(let Ar=0;Ar<4;Ar++)xt.aabb.quadrant(Ar).intersects(ae)!==0&&(dr|=1<<Ar)}const rr=q[0]-(.5+Ft+(xt.wrap<<xt.zoom))*(1<<o-xt.zoom),yr=q[1]-.5-Mt,_r=xt.tileID?xt.tileID:new n.aG(zt,xt.wrap,xt.zoom,Ft,Mt);a.calculateQuadrantVisibility&&(_r.visibleQuadrants=dr),Et.push({tileID:_r,distanceSq:rr*rr+yr*yr})}}if(this.fogCullDistSq){const xt=this.fogCullDistSq,Ft=this.horizonLineFromTop();Et=Et.filter(Mt=>{const Qt=[0,0,0,1],Ot=[n.ag,n.ag,0,1],zt=this.calculateFogTileMatrix(Mt.tileID.toUnwrapped());n.ab.vec4.transformMat4(Qt,Qt,zt),n.ab.vec4.transformMat4(Ot,Ot,zt);const dr=n.ab.vec4.min([],Qt,Ot),rr=n.ab.vec4.max([],Qt,Ot),yr=n.bW(dr,rr);if(yr===0)return!0;let _r=!1;const Kr=this._elevation;if(Kr&&yr>xt&&Ft!==0){const Ar=this.calculateProjMatrix(Mt.tileID.toUnwrapped());let zr;a.isTerrainDEM||(zr=Kr.getMinMaxForTile(Mt.tileID)),zr||(zr={min:Ue,max:Ze});const Hr=n.c7(this.rotation),pa=[Hr[0]*n.ag,Hr[1]*n.ag,zr.max];n.ab.vec3.transformMat4(pa,pa,Ar),_r=(1-pa[1])*this.height*.5<Ft}return yr<xt||_r})}return Et.sort((xt,Ft)=>xt.distanceSq-Ft.distanceSq).map(xt=>xt.tileID)}resize(a,o){this.width=a,this.height=o,this.pixelsToGLUnits=[2/a,-2/o],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const o=n.aw(a.lat,-n.bX,n.bX),m=this.projection.project(a.lng,o);return new n.P(m.x*this.worldSize,m.y*this.worldSize)}unproject(a){return this.projection.unproject(a.x/this.worldSize,a.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/n.bH(1,this.center.lat)/this.worldSize}setLocationAtPoint(a,o){let m,v;const S=this.centerPoint;if(this.projection.name==="globe"){const L=this.worldSize;m=(o.x-S.x)/L,v=(o.y-S.y)/L}else{const L=this.pointCoordinate(o),O=this.pointCoordinate(S);m=L.x-O.x,v=L.y-O.y}const D=this.locationCoordinate(a);this.setLocation(new n.aa(D.x-m,D.y-v))}setLocation(a){this.center=this.coordinateLocation(a),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(a){return this.projection.locationPoint(this,a)}locationPoint3D(a){return this.projection.locationPoint(this,a,!0)}pointLocation(a){return this.coordinateLocation(this.pointCoordinate(a))}pointLocation3D(a){return this.coordinateLocation(this.pointCoordinate3D(a))}locationCoordinate(a,o){const m=o?n.bH(o,a.lat):void 0,v=this.projection.project(a.lng,a.lat);return new n.aa(v.x,v.y,m)}coordinateLocation(a){return this.projection.unproject(a.x,a.y)}pointRayIntersection(a,o){const m=o??this._centerAltitude,v=[a.x,a.y,0,1],S=[a.x,a.y,1,1];n.ab.vec4.transformMat4(v,v,this.pixelMatrixInverse),n.ab.vec4.transformMat4(S,S,this.pixelMatrixInverse);const D=S[3];n.ab.vec4.scale(v,v,1/v[3]),n.ab.vec4.scale(S,S,1/D);const L=v[2],O=S[2];return{p0:v,p1:S,t:L===O?0:(m-L)/(O-L)}}screenPointToMercatorRay(a){const o=[a.x,a.y,0,1],m=[a.x,a.y,1,1];return n.ab.vec4.transformMat4(o,o,this.pixelMatrixInverse),n.ab.vec4.transformMat4(m,m,this.pixelMatrixInverse),n.ab.vec4.scale(o,o,1/o[3]),n.ab.vec4.scale(m,m,1/m[3]),o[2]=n.bH(o[2],this._center.lat)*this.worldSize,m[2]=n.bH(m[2],this._center.lat)*this.worldSize,n.ab.vec4.scale(o,o,1/this.worldSize),n.ab.vec4.scale(m,m,1/this.worldSize),new n.aq([o[0],o[1],o[2]],n.ab.vec3.normalize([],n.ab.vec3.sub([],m,o)))}rayIntersectionCoordinate(a){const{p0:o,p1:m,t:v}=a,S=n.bH(o[2],this._center.lat),D=n.bH(m[2],this._center.lat);return new n.aa(n.af(o[0],m[0],v)/this.worldSize,n.af(o[1],m[1],v)/this.worldSize,n.af(S,D,v))}pointCoordinate(a,o=this._centerAltitude){return this.projection.pointCoordinate(this,a.x,a.y,o)}pointCoordinate3D(a){if(!this.elevation)return this.pointCoordinate(a);let o=this.projection.pointCoordinate3D(this,a.x,a.y);if(o)return new n.aa(o[0],o[1],o[2]);let m=0,v=this.horizonLineFromTop();if(a.y>v)return this.pointCoordinate(a);const S=.02*v,D=a.clone();for(let L=0;L<10&&v-m>S;L++){D.y=n.af(m,v,.66);const O=this.projection.pointCoordinate3D(this,D.x,D.y);O?(v=D.y,o=O):m=D.y}return o?new n.aa(o[0],o[1],o[2]):this.pointCoordinate(a)}isPointAboveHorizon(a){return this.projection.isPointAboveHorizon(this,a)}isPointOnSurface(a){if(a.y<0||a.y>this.height||a.x<0||a.x>this.width)return!1;if(this.elevation||this.zoom>=n.bY)return!this.isPointAboveHorizon(a);const o=this.pointCoordinate(a);return o.y>=0&&o.y<=1}_coordinatePoint(a,o){const m=o&&this.elevation?this.elevation.getAtPointOrZero(a,this._centerAltitude):this._centerAltitude,v=[a.x*this.worldSize,a.y*this.worldSize,m+a.toAltitude(),1];return n.ab.vec4.transformMat4(v,v,this.pixelMatrix),v[3]>0?new n.P(v[0]/v[3],v[1]/v[3]):new n.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:a,left:o}=this._edgeInsets,m=this.height-this._edgeInsets.bottom,v=this.width-this._edgeInsets.right,S=this.pointLocation3D(new n.P(o,a)),D=this.pointLocation3D(new n.P(v,a)),L=this.pointLocation3D(new n.P(v,m)),O=this.pointLocation3D(new n.P(o,m));let U=Math.min(S.lng,D.lng,L.lng,O.lng),q=Math.max(S.lng,D.lng,L.lng,O.lng),Z=Math.min(S.lat,D.lat,L.lat,O.lat),X=Math.max(S.lat,D.lat,L.lat,O.lat);const ae=Math.pow(2,-this.zoom)/16*270,me=this.projection.name==="globe"?1:4,he=(xe,_e,Me,Be,Oe)=>{const Ze=(xe+Me)/2,Ue=(_e+Be)/2,We=new n.P(Ze,Ue),{lng:qe,lat:tt}=this.pointLocation3D(We),rt=Math.max(0,U-qe,Z-tt,qe-q,tt-X);U=Math.min(U,qe),q=Math.max(q,qe),Z=Math.min(Z,tt),X=Math.max(X,tt),(Oe<me||rt>ae)&&(he(xe,_e,Ze,Ue,Oe+1),he(Ze,Ue,Me,Be,Oe+1))};if(he(o,a,v,a,1),he(v,a,v,m,1),he(v,m,o,m,1),he(o,m,o,a,1),this.projection.name==="globe"){const[xe,_e]=n.bZ(this);xe?(X=90,q=180,U=-180):_e&&(Z=-90,q=180,U=-180)}return new n.az(new n.bO(U,Z),new n.bO(q,X))}_getBoundsRectangular(a,o){const{top:m,left:v}=this._edgeInsets,S=this.height-this._edgeInsets.bottom,D=this.width-this._edgeInsets.right,L=new n.P(v,m),O=new n.P(D,m),U=new n.P(D,S),q=new n.P(v,S);let Z=this.pointCoordinate(L,a),X=this.pointCoordinate(O,a);const ae=this.pointCoordinate(U,o),me=this.pointCoordinate(q,o),he=(xe,_e)=>(_e.y-xe.y)/(_e.x-xe.x);return Z.y>1&&X.y>=0?Z=new n.aa((1-me.y)/he(me,Z)+me.x,1):Z.y<0&&X.y<=1&&(Z=new n.aa(-me.y/he(me,Z)+me.x,0)),X.y>1&&Z.y>=0?X=new n.aa((1-ae.y)/he(ae,X)+ae.x,1):X.y<0&&Z.y<=1&&(X=new n.aa(-ae.y/he(ae,X)+ae.x,0)),new n.az().extend(this.coordinateLocation(Z)).extend(this.coordinateLocation(X)).extend(this.coordinateLocation(me)).extend(this.coordinateLocation(ae))}_getBoundsRectangularTerrain(){const a=this.elevation;if(!a.visibleDemTiles.length||a.isUsingMockSource())return this._getBoundsRectangular(0,0);const o=a.visibleDemTiles.reduce((m,v)=>{if(v.dem){const S=v.dem.tree;m.min=Math.min(m.min,S.minimums[0]),m.max=Math.max(m.max,S.maximums[0])}return m},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(o.min*a.exaggeration(),o.max*a.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(a=!0){const o=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,m=this.height/2-o*(1-this._horizonShift);return a?Math.max(0,m):m}getMaxBounds(){return this.maxBounds}setMaxBounds(a){this.maxBounds=a,this.minLat=-n.bX,this.maxLat=n.bX,this.minLng=-180,this.maxLng=180,a&&(this.minLat=a.getSouth(),this.maxLat=a.getNorth(),this.minLng=a.getWest(),this.maxLng=a.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=n.at(this.minLng)*this.tileSize,this.worldMaxX=n.at(this.maxLng)*this.tileSize,this.worldMinY=n.aA(this.maxLat)*this.tileSize,this.worldMaxY=n.aA(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(a,o){return this.projection.createTileMatrix(this,o,a)}calculateDistanceTileData(a){const o=a.key,m=this._distanceTileDataCache;if(m[o])return m[o];const v=a.canonical,S=1/this.height,D=this.cameraWorldSize,L=D/this.zoomScale(v.z),O=(v.x+Math.pow(2,v.z)*a.wrap)*L,U=v.y*L,q=this.point;q.x*=D/this.worldSize,q.y*=D/this.worldSize;const Z=this.angle,X=Math.sin(-Z),ae=-Math.cos(-Z);return m[o]={bearing:[X,ae],center:[(q.x-O)*S,(q.y-U)*S],scale:L/n.ag*S},m[o]}calculateFogTileMatrix(a){const o=a.key,m=this._fogTileMatrixCache;if(m[o])return m[o];const v=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,a);return n.ab.mat4.multiply(v,this.worldToFogMatrix,v),m[o]=new Float32Array(v),m[o]}calculateProjMatrix(a,o=!1,m=!1){const v=a.key;let S;if(S=m?this._expandedProjMatrixCache:o?this._alignedProjMatrixCache:this._projMatrixCache,S[v])return S[v];const D=this.calculatePosMatrix(a,this.worldSize);let L;return L=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:m?this.expandedFarZProjMatrix:o?this.alignedProjMatrix:this.projMatrix,n.ab.mat4.multiply(D,L,D),S[v]=new Float32Array(D),S[v]}calculatePixelsToTileUnitsMatrix(a){const o=a.tileID.key,m=this._pixelsToTileUnitsCache;if(m[o])return m[o];const v=n.b_(a,this);return m[o]=v,m[o]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const a=1/this.worldSize,o=n.ab.mat4.fromScaling([],[a,a,a]);return n.ab.mat4.multiply(o,o,this.globeMatrix),o}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const a=this._elevation;this._updateCameraState();const o=n.bH(1,this._center.lat)*this.worldSize,m=this._computeCameraPosition(o),v=this._camera.forward(),S=n.bH(1,this._center.lat);m[2]/=S,v[2]/=S,n.ab.vec3.normalize(v,v);const D=a.raycast(m,v,a.exaggeration());if(D){const L=n.ab.vec3.scaleAndAdd([],m,v,D),O=new n.aa(L[0],L[1],n.bH(L[2],n.aS(L[1]))),U=(O.z+n.ab.vec3.length([O.x-m[0],O.y-m[1],O.z-m[2]*S]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(U),this._centerAltitude=O.toAltitude(),this._center=this.coordinateLocation(O),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(a=!1){if(!this._elevation)return;const o=this._elevation,m=n.bH(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(m),S=o.getAtPointOrZero(new n.aa(...v)),D=this.pixelsPerMeter/this.worldSize*S,L=this._minimumHeightOverTerrain(),O=v[2]-D;if(O<=L)if(O<0||a){const U=this.locationCoordinate(this._center,this._centerAltitude),q=[v[0],v[1],U.z-v[2]],Z=n.ab.vec3.length(q);q[2]-=(L-O)/this._pixelsPerMercatorPixel;const X=n.ab.vec3.length(q);if(X===0)return;n.ab.vec3.scale(q,q,Z/X*this._pixelsPerMercatorPixel),this._camera.position=[v[0],v[1],U.z*this._pixelsPerMercatorPixel-q[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||a){const X=this.center;return X.lat=n.aw(X.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!a)&&(X.lng=n.aw(X.lng,this.minLng,this.maxLng)),this.center=X,void(this._constraining=!1)}const o=this._unmodified,{x:m,y:v}=this.point;let S=0,D=m,L=v;const O=this.width/2,U=this.height/2,q=this.worldMinY*this.scale,Z=this.worldMaxY*this.scale;if(v-U<q&&(L=q+U),v+U>Z&&(L=Z-U),Z-q<this.height&&(S=Math.max(S,this.height/(Z-q)),L=(Z+q)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const X=this.worldMinX*this.scale,ae=this.worldMaxX*this.scale,me=this.worldSize/2-(X+ae)/2;D=(m+me+this.worldSize)%this.worldSize-me,D-O<X&&(D=X+O),D+O>ae&&(D=ae-O),ae-X<this.width&&(S=Math.max(S,this.width/(ae-X)),D=(ae+X)/2)}D===m&&L===v||(this.center=this.unproject(new n.P(D,L))),S&&(this.zoom+=this.scaleZoom(S)),this._constrainCamera(),this._unmodified=o,this._constraining=!1}_minZoomForBounds(){let a=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(a=Math.max(a,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),a}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,o=this.projection.name==="globe",m=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=n.bH(1,this.center.lat)/n.bH(1,n.c8));const v=n.b$(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,v),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const S=this.projection.zAxisUnit==="meters"?m:1,D=this._camera.getWorldToCamera(this.worldSize,S);let L;const O=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(O[8]=2*-a.x/this.width,O[9]=2*a.y/this.height,this.isOrthographic){let tt=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),rt=tt*this.aspect,Et=-rt,_t=-tt;rt-=a.x,Et-=a.x,tt+=a.y,_t+=a.y,L=this._camera.getCameraToClipOrthographic(Et,rt,_t,tt,this._nearZ,this._farZ),((st,mt,Bt,qt)=>{for(let Kt=0;Kt<16;Kt++)st[Kt]=Pd(mt[Kt],Bt[Kt],qt)})(L,L,O,lr(this.pitch>=15?1:this.pitch/15))}else L=O;const U=n.ab.mat4.mul([],O,D);let q=n.ab.mat4.mul([],L,D);if(this.projection.isReprojectedInTileSpace){const tt=this.locationCoordinate(this.center),rt=n.ab.mat4.identity([]);n.ab.mat4.translate(rt,rt,[tt.x*this.worldSize,tt.y*this.worldSize,0]),n.ab.mat4.multiply(rt,rt,n.c0(this)),n.ab.mat4.translate(rt,rt,[-tt.x*this.worldSize,-tt.y*this.worldSize,0]),n.ab.mat4.multiply(q,q,rt),n.ab.mat4.multiply(U,U,rt),this.inverseAdjustmentMatrix=n.c1(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=n.ab.mat4.scale([],q,[this.worldSize,this.worldSize,this.worldSize/S,1]),this.projMatrix=q,this.invProjMatrix=n.ab.mat4.invert(new Float64Array(16),this.projMatrix),o){const tt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);tt[8]=2*-a.x/this.width,tt[9]=2*a.y/this.height,this.expandedFarZProjMatrix=n.ab.mat4.mul([],tt,D)}else this.expandedFarZProjMatrix=this.projMatrix;const Z=n.ab.mat4.invert([],L);this.frustumCorners=n.c2.fromInvProjectionMatrix(Z,this.horizonLineFromTop(),this.height),this.cameraFrustum=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!o);const X=new Float32Array(16);n.ab.mat4.identity(X),n.ab.mat4.scale(X,X,[1,-1,1]),n.ab.mat4.rotateX(X,X,this._pitch),n.ab.mat4.rotateZ(X,X,this.angle);const ae=n.ab.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=n.ab.mat4.clone(ae);const me=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;ae[8]=2*-a.x/this.width,ae[9]=2*(a.y+me)/this.height,this.skyboxMatrix=n.ab.mat4.multiply(X,ae,X);const he=this.point,xe=he.x,_e=he.y,Me=this.width%2/2,Be=this.height%2/2,Oe=Math.cos(this.angle),Ze=Math.sin(this.angle),Ue=xe-Math.round(xe)+Oe*Me+Ze*Be,We=_e-Math.round(_e)+Oe*Be+Ze*Me,qe=new Float64Array(q);if(n.ab.mat4.translate(qe,qe,[Ue>.5?Ue-1:Ue,We>.5?We-1:We,0]),this.alignedProjMatrix=qe,q=n.ab.mat4.create(),n.ab.mat4.scale(q,q,[this.width/2,-this.height/2,1]),n.ab.mat4.translate(q,q,[1,-1,0]),this.labelPlaneMatrix=q,q=n.ab.mat4.create(),n.ab.mat4.scale(q,q,[1,-1,1]),n.ab.mat4.translate(q,q,[-1,-1,0]),n.ab.mat4.scale(q,q,[2/this.width,2/this.height,1]),this.glCoordMatrix=q,this.pixelMatrix=n.ab.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,U),this._calcFogMatrices(),this._distanceTileDataCache={},q=n.ab.mat4.invert(new Float64Array(16),this.pixelMatrix),!q)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=q,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=n.c3(this);const tt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=n.ab.vec3.transformMat4(tt,tt,D),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=q;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const a=this.cameraWorldSizeForFog,o=this.cameraPixelsPerMeter,m=this._camera.position,v=1/this.height/this._pixelsPerMercatorPixel,S=[a,a,o];n.ab.vec3.scale(S,S,v),n.ab.vec3.scale(m,m,-1),n.ab.vec3.multiply(m,m,S);const D=n.ab.mat4.create();n.ab.mat4.translate(D,D,m),n.ab.mat4.scale(D,D,S),this.mercatorFogMatrix=D,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(a,o,v)}_computeCameraPosition(a){const o=(a=a||this.pixelsPerMeter)/this.pixelsPerMeter,m=this._camera.forward(),v=this.point,S=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*o-a/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-m[0]*S,v.y/this.worldSize-m[1]*S,a/this.worldSize*this._centerAltitude-m[2]*S]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(a){const o=this._maxCameraBoundsDistance()*Math.cos(this._pitch),m=this._camera.position[2],v=a[2];let S=1;this.projection.wrap&&(this.center=this.center.wrap()),v>0&&(S=Math.min((o-m)/v,1)),this._camera.position=n.ab.vec3.scaleAndAdd([],this._camera.position,a,S),this._updateStateFromCamera()}_updateStateFromCamera(){const a=this._camera.position,o=this._camera.forward(),{pitch:m,bearing:v}=this._camera.getPitchBearing(),S=n.bH(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,D=this._mercatorZfromZoom(this._maxZoom)*Math.cos(n.ai(this._maxPitch)),L=Math.max((a[2]-S)/Math.cos(m),D),O=this._zoomFromMercatorZ(L);n.ab.vec3.scaleAndAdd(a,a,o,L),this._pitch=n.aw(m,n.ai(this.minPitch),n.ai(this.maxPitch)),this.angle=n.bF(v,-Math.PI,Math.PI),this._setZoom(n.aw(O,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new n.aa(a[0],a[1],a[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(a){return Math.pow(2,a)*this.tileSize}_mercatorZfromZoom(a){return this.cameraToCenterDistance/this._worldSizeFromZoom(a)}_minimumHeightOverTerrain(){const a=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(a)}_zoomFromMercatorZ(a){return this.scaleZoom(this.cameraToCenterDistance/(a*this.tileSize))}zoomFromMercatorZAdjusted(a){let o=0,m=n.bY,v=0,S=1/0;for(;m-o>1e-6&&m>o;){const D=o+.5*(m-o),L=this.tileSize*Math.pow(2,D),O=this.getCameraToCenterDistance(this.projection,D,L),U=this.scaleZoom(O/(a*this.tileSize)),q=Math.abs(D-U);q<S&&(S=q,v=D),D<U?o=D:m=D}return v}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(n.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(a,o){const m=Math.min(a.x,o.x),v=Math.max(a.x,o.x),S=Math.min(a.y,o.y),D=Math.max(a.y,o.y);if(S<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const L=[new n.P(m,S),new n.P(v,D),new n.P(m,D),new n.P(v,S)],O=this.renderWorldCopies?-3:0,U=this.renderWorldCopies?4:1;for(const q of L){const Z=this.pointRayIntersection(q);if(Z.t<0)return!0;const X=this.rayIntersectionCoordinate(Z);if(X.x<O||X.y<0||X.x>U||X.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+n.c4(this.fovAboveCenter)>88||this.anyCornerOffEdge(new n.P(0,0),new n.P(this.width,this.height))}zoomDeltaToMovement(a,o){const m=n.ab.vec3.length(n.ab.vec3.sub([],this._camera.position,a)),v=this._zoomFromMercatorZ(m)+o;return m-this._mercatorZfromZoom(v)}getCameraPoint(){if(this.projection.name==="globe"){const a=function([o,m,v],S){const D=[o,m,v,1];n.ab.vec4.transformMat4(D,D,S);const L=D[3]=Math.max(D[3],1e-6);return D[0]/=L,D[1]/=L,D[2]/=L,D}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new n.P(a[0],a[1])}{const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.P(0,a))}}getCameraToCenterDistance(a,o=this.zoom,m=this.worldSize){const v=n.b$(a,o,this.width,this.height,1024),S=a.pixelSpaceConversion(this.center.lat,m,v);let D=.5/Math.tan(.5*this._fov)*this.height*S;return this.isOrthographic&&(D=Pd(1,D,lr(this.pitch>=15?1:this.pitch/15))),D}getWorldToCameraMatrix(){const a=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&n.ab.mat4.multiply(a,a,this.globeMatrix),a}getFrustum(a){return n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,a,this.projection.zAxisUnit==="meters")}}const bl=(p,a)=>{if(a>0&&p.terrain&&n.w("Cutoff is currently disabled on terrain"),a<=0||p.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const o=p.transform,m=Math.max(Math.abs(o._zoom-(p.minCutoffZoom-1)),1),v=o.isLODDisabled(!1)?n.ac(60,45,o.pitch):n.ac(30,15,o.pitch),S=o._farZ-o._nearZ,D=a*o.height,L=((1-(O=v))*o.cameraToCenterDistance+O*(o._farZ+D))*m;var O;return{shouldRenderCutoff:v<1,uniformValues:{u_cutoff_params:[o._nearZ,o._farZ,(L-o._nearZ)/S,(L-D-o._nearZ)/S]}}},Ki={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class x0{constructor(a,o){this.aabb=a,this.lastCascade=o}}class tp{add(a,o){const m=this.receivers[a.key];m!==void 0?(m.aabb.min[0]=Math.min(m.aabb.min[0],o.min[0]),m.aabb.min[1]=Math.min(m.aabb.min[1],o.min[1]),m.aabb.min[2]=Math.min(m.aabb.min[2],o.min[2]),m.aabb.max[0]=Math.max(m.aabb.max[0],o.max[0]),m.aabb.max[1]=Math.max(m.aabb.max[1],o.max[1]),m.aabb.max[2]=Math.max(m.aabb.max[2],o.max[2])):this.receivers[a.key]=new x0(o,null)}clear(){this.receivers={}}get(a){return this.receivers[a.key]}computeRequiredCascades(a,o,m){const v=n.cd.fromPoints(a.points);let S=0;for(const D in this.receivers){const L=this.receivers[D];if(!L||!v.intersectsAabb(L.aabb))continue;L.aabb.min=v.closestPoint(L.aabb.min),L.aabb.max=v.closestPoint(L.aabb.max);const O=L.aabb.getCorners();for(let U=0;U<m.length;U++){let q=!0;for(const Z of O){const X=[Z[0]*o,Z[1]*o,Z[2]];if(n.ab.vec3.transformMat4(X,X,m[U].matrix),X[0]<-1||X[0]>1||X[1]<-1||X[1]>1){q=!1;break}}if(L.lastCascade=U,S=Math.max(S,U),q)break}}return S+1}}class Kl{constructor(a){this.painter=a,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new tp,this._depthMode=new Rr(a.context.gl.LEQUAL,Rr.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,a.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),a.tp.registerParameter(Ki,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),a.tp.registerParameter(Ki,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),a.tp.registerParameter(Ki,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),a.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const a of this._cascades)a.texture.destroy(),a.framebuffer.destroy();this._cascades=[]}updateShadowParameters(a,o){const m=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!o||!o.properties)return;const v=o.properties.get("shadow-intensity");if(!o.shadowsEnabled()||v<=0||(this._shadowLayerCount=m.style.order.reduce((me,he)=>{const xe=m.style._mergedLayers[he];return me+(xe.hasShadowPass()&&!xe.isHidden(a.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const S=m.context,D=Ki.shadowMapResolution,L=Ki.shadowMapResolution;if(this._cascades.length===0||Ki.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let me=0;me<Ki.cascadeCount;++me){const he=m._shadowMapDebug,xe=S.gl,_e=S.createFramebuffer(D,L,he,"texture"),Me=new n.T(S,{width:D,height:L,data:null},xe.DEPTH_COMPONENT16);if(_e.depthAttachment.set(Me.texture),he){const Be=new n.T(S,{width:D,height:L,data:null},xe.RGBA8);_e.colorAttachment.set(Be.texture)}this._cascades.push({framebuffer:_e,texture:Me,matrix:[],far:0,boundingSphereRadius:0,frustum:new n.bR,scale:0})}}this.shadowDirection=ki(o);let O=0;if(a.elevation){const me=a.elevation,he=[1e4,-1e4];me.visibleDemTiles.filter(xe=>xe.dem).forEach(xe=>{const _e=xe.dem.tree;he[0]=Math.min(he[0],_e.minimums[0]),he[1]=Math.max(he[1],_e.maximums[0])}),he[0]!==1e4&&(O=(he[1]-he[0])*me.exaggeration())}const U=1.5*a.cameraToCenterDistance,q=3*U,Z=new Float64Array(16);for(let me=0;me<this._cascades.length;++me){const he=this._cascades[me];let xe=a.height/50,_e=1;Ki.cascadeCount===1?_e=q:me===0?_e=U:(xe=U,_e=q);const[Me,Be]=Nu(a,this.shadowDirection,xe,_e,Ki.shadowMapResolution,O);he.scale=a.scale,he.matrix=Me,he.boundingSphereRadius=Be,n.ab.mat4.invert(Z,he.matrix),he.frustum=n.bR.fromInvProjectionMatrix(Z,1,0,!0),he.far=_e}const X=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[X].far,this._cascades[X].far],this._uniformValues.u_shadow_intensity=v,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Ki.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Ki.shadowMapResolution,this._uniformValues.u_shadowmap_0=Oi.ShadowMap0,this._uniformValues.u_shadowmap_1=Oi.ShadowMap0+1,this._groundShadowTiles=m.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const ae=m.transform.elevation;for(const me of this._groundShadowTiles){let he={min:0,max:0};if(ae){const xe=ae.getMinMaxForTile(me);xe&&(he=xe)}this.addShadowReceiver(me.toUnwrapped(),he.min,he.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(a){this._enabled=a}drawShadowPass(a,o){if(!this.enabled)return;const m=this.painter,v=m.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(m.transform.getFrustum(0),m.transform.worldSize,this._cascades),v.viewport.set([0,0,Ki.shadowMapResolution,Ki.shadowMapResolution]);for(let S=0;S<this._numCascadesToRender;++S){m.currentShadowCascade=S,v.bindFramebuffer.set(this._cascades[S].framebuffer.framebuffer),v.clear({color:n.aj.white,depth:1});for(const D of a.order){const L=a._mergedLayers[D];if(!L.hasShadowPass()||L.isHidden(m.transform.zoom))continue;const O=a.getLayerSourceCache(L),U=O?o[O.id]:void 0;(L.type==="model"||U&&U.length)&&m.renderLayer(m,O,L,U)}}m.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const a=this.painter,o=a.style,m=a.context,v=o.directionalLight,S=o.ambientLight;if(!v||!S)return;const D=[],L=bl(a,a.longestCutoffRange);L.shouldRenderCutoff&&D.push("RENDER_CUTOFF"),D.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&D.push("NORMAL_OFFSET");const O=wl(o,v,S),U=new Rr(m.gl.LEQUAL,Rr.ReadOnly,a.depthRangeFor3D);for(const q of this._groundShadowTiles){const Z=q.toUnwrapped(),X=a.isTileAffectedByFog(q),ae=a.getOrCreateProgram("groundShadow",{defines:D,overrideFog:X});this.setupShadows(Z,ae),a.uploadCommonUniforms(m,ae,Z,null,L);const me={u_matrix:a.transform.calculateProjMatrix(Z),u_ground_shadow_factor:O};ae.draw(a,m.gl.TRIANGLES,U,ea.disabled,ua.multiply,Gr.disabled,me,"ground_shadow",a.tileExtentBuffer,a.quadTriangleIndexBuffer,a.tileExtentSegments,{},a.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?ua.unblended:ua.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(a){const o=this.painter.transform,m=o.calculatePosMatrix(a,o.worldSize);return n.ab.mat4.multiply(m,this._cascades[this.painter.currentShadowCascade].matrix,m),Float32Array.from(m)}calculateShadowPassMatrixFromMatrix(a){return n.ab.mat4.multiply(a,this._cascades[this.painter.currentShadowCascade].matrix,a),Float32Array.from(a)}setupShadows(a,o,m,v=0){if(!this.enabled)return;const S=this.painter.transform,D=this.painter.context,L=D.gl,O=this._uniformValues,U=new Float64Array(16),q=S.calculatePosMatrix(a,S.worldSize);for(let Z=0;Z<this._cascades.length;Z++)n.ab.mat4.multiply(U,this._cascades[Z].matrix,q),O[Z===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(U),D.activeTexture.set(L.TEXTURE0+Oi.ShadowMap0+Z),this._cascades[Z].texture.bind(L.NEAREST,L.CLAMP_TO_EDGE);if(this.useNormalOffset=!!m,this.useNormalOffset){const Z=n.cc(a.canonical),X=2/S.tileSize*n.ag/Ki.shadowMapResolution,ae=X*this._cascades[0].boundingSphereRadius,me=X*this._cascades[this._cascades.length-1].boundingSphereRadius,he=(m==="vector-tile"?1:3)/Math.pow(2,v-a.canonical.z-(1-S.zoom+Math.floor(S.zoom)));O.u_shadow_normal_offset=[Z,ae*he,me*he],O.u_shadow_bias=[6e-5,.0012,.012]}else O.u_shadow_bias=[36e-5,.0012,.012];o.setShadowUniformValues(D,O)}setupShadowsFromMatrix(a,o,m=!1){if(!this.enabled)return;const v=this.painter.context,S=v.gl,D=this._uniformValues,L=new Float64Array(16);for(let O=0;O<Ki.cascadeCount;O++)n.ab.mat4.multiply(L,this._cascades[O].matrix,a),D[O===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(L),v.activeTexture.set(S.TEXTURE0+Oi.ShadowMap0+O),this._cascades[O].texture.bind(S.NEAREST,S.CLAMP_TO_EDGE);if(this.useNormalOffset=m,m){const O=Ki.normalOffset;D.u_shadow_normal_offset=[1,O,O],D.u_shadow_bias=[6e-5,.0012,.012]}else D.u_shadow_bias=[36e-5,.0012,.012];o.setShadowUniformValues(v,D)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(a,o,m,v){if(v[2]>=0)return{};const S=function(O,U,q){const Z=q/(1<<O.canonical.z);return new n.cd([O.canonical.x*Z+O.wrap*q,O.canonical.y*Z+O.wrap*q,0],[(O.canonical.x+1)*Z+O.wrap*q,(O.canonical.y+1)*Z+O.wrap*q,U])}(a,o,m).getCorners(),D=o/-v[2];v[0]<0?(n.ab.vec3.add(S[0],S[0],[v[0]*D,0,0]),n.ab.vec3.add(S[3],S[3],[v[0]*D,0,0])):v[0]>0&&(n.ab.vec3.add(S[1],S[1],[v[0]*D,0,0]),n.ab.vec3.add(S[2],S[2],[v[0]*D,0,0])),v[1]<0?(n.ab.vec3.add(S[0],S[0],[0,v[1]*D,0]),n.ab.vec3.add(S[1],S[1],[0,v[1]*D,0])):v[1]>0&&(n.ab.vec3.add(S[2],S[2],[0,v[1]*D,0]),n.ab.vec3.add(S[3],S[3],[0,v[1]*D,0]));const L={};return L.vertices=S,L.planes=[Md(S[1],S[0],S[4]),Md(S[2],S[1],S[5]),Md(S[3],S[2],S[6]),Md(S[0],S[3],S[7])],L}addShadowReceiver(a,o,m){this._receivers.add(a,n.cd.fromTileIdAndHeight(a,o,m))}getMaxCascadeForTile(a){const o=this._receivers.get(a);return o&&o.lastCascade?o.lastCascade:0}}function Md(p,a,o){const m=n.ab.vec3.sub([],o,a),v=n.ab.vec3.sub([],p,a),S=n.ab.vec3.cross([],m,v),D=n.ab.vec3.length(S);return D===0?[0,0,1,0]:(n.ab.vec3.scale(S,S,1/D),[S[0],S[1],S[2],-n.ab.vec3.dot(S,a)])}function ki(p){const a=p.properties.get("direction"),o=n.cb(a.x,a.y,a.z);o[2]=n.aw(o[2],0,75);const m=n.ce([o[0],o[1],o[2]]);return n.ab.vec3.fromValues(m.x,m.y,m.z)}function wl(p,a,o){const m=a.properties.get("color-use-theme")==="none",v=a.properties.get("color"),S=a.properties.get("intensity"),D=a.properties.get("direction"),L=[D.x,D.y,D.z],O=o.properties.get("color-use-theme")==="none",U=o.properties.get("color"),q=o.properties.get("intensity"),Z=Math.max(n.ab.vec3.dot([0,0,1],L),0),X=[0,0,0];n.ab.vec3.scale(X,U.toRenderColor(O?null:p.getLut(a.scope)).toArray01Linear().slice(0,3),q);const ae=[0,0,0];return n.ab.vec3.scale(ae,v.toRenderColor(m?null:p.getLut(o.scope)).toArray01Linear().slice(0,3),Z*S),n.cf([X[0]>0?X[0]/(X[0]+ae[0]):0,X[1]>0?X[1]/(X[1]+ae[1]):0,X[2]>0?X[2]/(X[2]+ae[2]):0])}function Nu(p,a,o,m,v,S){const D=p.zoom,L=p.scale,O=p.worldSize,U=1/O,q=p.aspect,Z=Math.sqrt(1+q*q)*Math.tan(.5*p.fovX),X=Z*Z,ae=m-o,me=m+o;let he,xe;X>ae/me?(he=m,xe=m*Z):(he=.5*me*(1+X),xe=.5*Math.sqrt(ae*ae+2*(m*m+o*o)*X+me*me*X*X));const _e=p.projection.pixelsPerMeter(p.center.lat,O),Me=p._camera.getCameraToWorldMercator(),Be=[0,0,-he*U];n.ab.vec3.transformMat4(Be,Be,Me);let Oe=xe*U;const Ze=p._edgeInsets;if(!(Ze.left===0&&Ze.top===0&&Ze.right===0&&Ze.bottom===0||Ze.left===Ze.right&&Ze.top===Ze.bottom)){const Qt=p._camera.getWorldToCamera(p.worldSize,p.projection.zAxisUnit==="meters"?_e:1),Ot=p._camera.getCameraToClipPerspective(p._fov,p.width/p.height,o,m);Ot[8]=2*-p.centerOffset.x/p.width,Ot[9]=2*p.centerOffset.y/p.height;const zt=new Float64Array(16);n.ab.mat4.mul(zt,Ot,Qt);const dr=new Float64Array(16);n.ab.mat4.invert(dr,zt);const rr=n.bR.fromInvProjectionMatrix(dr,O,D,!0);for(const yr of rr.points){const _r=((Ue=yr)[0]/=L,Ue[1]/=L,Ue[2]=n.bH(Ue[2],p._center.lat),Ue);Oe=Math.max(Oe,n.ab.vec3.len(n.ab.vec3.subtract([],Be,_r)))}}var Ue;Oe*=v/(v-1);const We=Math.acos(a[2]),qe=Math.atan2(-a[0],-a[1]),tt=new Dd;tt.position=Be,tt.setPitchBearing(We,qe);const rt=tt.getWorldToCamera(O,_e),Et=Oe*O,_t=Math.min(p._mercatorZfromZoom(17)*O*-2,-2*Et),st=tt.getCameraToClipOrthographic(-Et,Et,-Et,Et,_t,(Et+S*_e)/a[2]),mt=new Float64Array(16);n.ab.mat4.multiply(mt,st,rt);const Bt=n.ab.vec3.fromValues(Math.floor(1e6*Be[0])/1e6*O,Math.floor(1e6*Be[1])/1e6*O,0),qt=.5*v,Kt=[0,0,0];n.ab.vec3.transformMat4(Kt,Bt,mt),n.ab.vec3.scale(Kt,Kt,qt);const xt=[Math.floor(Kt[0]),Math.floor(Kt[1]),Math.floor(Kt[2])],Ft=[0,0,0];n.ab.vec3.sub(Ft,Kt,xt),n.ab.vec3.scale(Ft,Ft,-1/qt);const Mt=new Float64Array(16);return n.ab.mat4.identity(Mt),n.ab.mat4.translate(Mt,Mt,Ft),n.ab.mat4.multiply(mt,Mt,mt),[mt,Et]}class v0 extends n.E{constructor(a){super(),this.requestManager=a,this.models={"":{}},this.numModelsLoading={}}loadModel(a,o){return n.aM(this.requestManager.transformRequest(o,n.R.Model).url).then(m=>{if(!m)return;const v=n.aN(m),S=new n.aO(a,void 0,void 0,v);return S.computeBoundsAndApplyParent(),S}).catch(m=>{if(m&&m.status===404)return null;this.fire(new n.y(new Error(`Could not load model ${a} from ${o}: ${m.message}`)))})}load(a,o){this.models[o]||(this.models[o]={});const m=Object.keys(a);this.numModelsLoading[o]=(this.numModelsLoading[o]||0)+m.length;const v=[];for(const S of m)v.push(this.loadModel(S,a[S]));Promise.allSettled(v).then(S=>{for(let D=0;D<S.length;D++){const{status:L,value:O}=S[D];L==="fulfilled"&&O&&(this.models[o][m[D]]={model:O,numReferences:1})}this.numModelsLoading[o]-=m.length,this.fire(new n.z("data",{dataType:"style"}))}).catch(S=>{this.fire(new n.y(new Error(`Could not load models: ${S.message}`)))})}isLoaded(){for(const a in this.numModelsLoading)if(this.numModelsLoading[a]>0)return!1;return!0}hasModel(a,o){return!!this.getModel(a,o)}getModel(a,o){return this.models[o]||(this.models[o]={}),this.models[o][a]?this.models[o][a].model:void 0}addModel(a,o,m){this.models[m]||(this.models[m]={}),this.hasModel(a,m)&&this.models[m][a].numReferences++,this.load({[a]:this.requestManager.normalizeModelURL(o)},m)}addModels(a,o){this.models[o]||(this.models[o]={});const m={};for(const v in a)this.models[o][v]={},m[v]=this.requestManager.normalizeModelURL(a[v]);this.load(m,o)}addModelsFromBucket(a,o){this.models[o]||(this.models[o]={});const m={};for(const v of a)this.hasModel(v,o)?this.models[o][v].numReferences++:m[v]=this.requestManager.normalizeModelURL(v);this.load(m,o)}removeModel(a,o){if(this.models[o]&&this.models[o][a]&&(this.models[o][a].numReferences--,this.models[o][a].numReferences===0)){const m=this.models[o][a].model;delete this.models[o][a],m.destroy()}}listModels(a){return this.models[a]||(this.models[a]={}),Object.keys(this.models[a])}upload(a,o){this.models[o]||(this.models[o]={});for(const m in this.models[o])this.models[o][m].model&&this.models[o][m].model.upload(a.context)}}const _0=new n.a5({data:new n.a6(n.a3.colorTheme.data)}),rp={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function ap(p){return p=p||{},Object.assign(p,rp)}class b0 extends n.E{constructor(a){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._selectedLevel=void 0,this._floorplanStates={},n.aP(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=a,this._checkFloorplanVisible(!0),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(a=>{a.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new n.y(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=a.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=a.stylesheet.indoor.buildingFeaturesetId,this._scope=a.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:a=>(a.feature&&a.feature.properties.floorplan&&this.selectFloorplan(a.feature.properties.floorplan),!0)}),this._checkFloorplanVisible(!0)}_onMove(){this._checkFloorplanVisible(!1)}_checkFloorplanVisible(a){if(!this._queryFeatureSetId||!this._map.isStyleLoaded()||this._map.transform.zoom<13)return;this._indoorData&&!function(D,L){const[O,U]=D,{center:q,radius:Z}=L,[X,ae]=q,me=Math.abs(O-X);return Math.sqrt((me>180?360-me:me)**2+(U-ae)**2)<=Z}([this._map.getCenter().lng,this._map.getCenter().lat],this._indoorData.circumCircle)&&(this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new n.z("floorplangone")));const o={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},m=new n.P(this._map.transform.width/2,this._map.transform.height/2),v=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],S=this._map.queryRenderedFeatures(a?v:m,o);S.length>0&&(this._selectedFloorplan&&S[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=S[0],this._floorplanSelected(!1)))}_floorplanSelected(a){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._indoorData.circumCircle=function(S){const[[D,L],[O,U]]=S,q=(O-D+360)%360,Z=q>180?360-q:q;return{center:[(D+Z/2+360)%360,(L+U)/2],radius:Math.sqrt(Z**2+(U-L)**2)/2}}(this._indoorData.extent),this._floorplanStates[this._indoorData.id]||(this._floorplanStates[this._indoorData.id]={});const o=this._floorplanStates[this._indoorData.id].selectedBuilding,m=this._floorplanStates[this._indoorData.id].selectedLevel;let v;if(this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",this._indoorData.floorplanIDs),this._selectedLevel)for(const S of this._indoorData.levels)S.id===this._selectedLevel.id&&(v=S.id);if(this.fire(new n.z("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:v})),o){const S=this._indoorData.buildings.find(D=>D.id===o);this._buildingSelected(S,!1)}else this._indoorData.buildings.length>0&&this._buildingSelected(this._indoorData.buildings[0],!1);if(m){const S=this._indoorData.levels.find(D=>D.id===m);this._updateLevels(S,a)}else a&&this._indoorData["default-levels"].length>0&&this.selectLevel(this._indoorData["default-levels"][0])}_buildingSelected(a,o){o&&a&&a.extent&&this._map.fitBounds(a.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=a?a.id:void 0;const m=this._indoorData.levels.filter(v=>a.levels.includes(v.id));this.fire(new n.z("buildingselected",{buildingId:a.id,levels:m}))}_levelSelected(a){if(a==="overview")this._updateLevels(void 0,!0);else{const o=this._indoorData.levels.find(m=>m.id===a);this._updateLevels(o,!0)}this.fire(new n.z("levelselected",{levelId:a==="overview"?void 0:a}))}_updateLevels(a,o){if(!a)return this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",[]]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._floorplanStates[this._indoorData.id].selectedLevel=void 0,void(o&&this._indoorData.extent&&this._map.fitBounds(this._indoorData.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}));function m(U){const q=U.indexOf("/floor/");if(q===-1)return U;const Z=q+7,X=U.indexOf("/",Z);return X===-1?U.slice(Z):U.slice(Z,X)}this._selectedLevel=a,this._floorplanStates[this._indoorData.id].selectedLevel=a?a.id:void 0;const v=[],S={},D={},L={},O={};for(const U of this._indoorData.levels)if(v.push(U.id),S[U.id]=U.height,D[U.id]=U.base,a){if(this.mergeFloors){const q=m(a.id),Z=m(U.id);L[U.id]=Z===q?"true":"false"}else L[U.id]=U.id===a.id?"true":"false";O[U.id]=U.base<a.base?"true":"false"}else O[U.id]=!0;if(this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",v]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",S]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",D]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",L]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",O]),a&&(this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!!a.isUnderground),o&&a.extent)){const U=this._map.cameraForBounds(a.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),q=this._map.getZoom(),Z=U.zoom?Math.abs(q-U.zoom):0;this._map.fitBounds(a.extent,Z>=1?{pitch:this._map.getPitch(),bearing:this._map.getBearing()}:{pitch:this._map.getPitch(),bearing:this._map.getBearing(),zoom:q})}}selectFloorplan(a){const o={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},m=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],v=this._map.queryRenderedFeatures(m,o);if(v.length>0){for(const S of v)if(JSON.parse(S.properties["indoor-data"]).floorplanIDs.includes(a)){this._selectedFloorplan=S,this._floorplanSelected(!0);break}}}selectBuilding(a){const o=this._indoorData.buildings.find(m=>m.id===a);this._buildingSelected(o,!0)}selectLevel(a){this._levelSelected(a)}}function Bu(p){if(!p.metadata||!p.metadata.content_area)return;const a=n.q.devicePixelRatio,{left:o,top:m,width:v,height:S}=p.metadata.content_area,D=o*a,L=m*a;return[D,L,D+v*a,L+S*a]}function Ad(p){if(p)return p.map(([a,o])=>[a*n.q.devicePixelRatio,o*n.q.devicePixelRatio])}const el=(p,a)=>ft(p,a&&a.filter(o=>o.identifier!=="source.canvas")),Nm=n.ay(Ia,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport"]),w0=n.ay(Ia,["setCenter","setZoom","setBearing","setPitch"]),Zl=new Set(["background","sky","slot","custom"]),Nc={version:8,layers:[],sources:{}},np={duration:300,delay:0};class ks extends n.E{constructor(a,o={}){super(),this.map=a,this.scope=o.scope||"",this.globalId=null,this.fragments=[],this.importDepth=o.importDepth||0,this.importsCache=o.importsCache||new Map,this.resolvedImports=o.resolvedImports||new Set,this.transition=n.l({},np),this._buildingIndex=new Lm(this),this.crossTileSymbolIndex=new $m,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=o.styleChanges||new yt,this.dispatcher=o.dispatcher?o.dispatcher:new n.D(n.ci(),this),o.imageManager?this.imageManager=o.imageManager:(this.imageManager=new $t(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=o.glyphManager?o.glyphManager:new n.cj(a._requestManager,o.localFontFamily?n.ck.all:o.localIdeographFontFamily?n.ck.ideographs:n.ck.none,o.localFontFamily||o.localIdeographFontFamily),o.modelManager?this.modelManager=o.modelManager:(this.modelManager=new v0(a._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=o.configOptions?o.configOptions:new Map,this._configDependentLayers=o.configDependentLayers?o.configDependentLayers:new Set,this._config=o.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:o.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=o.initialConfig,this.dispatcher.broadcast("setReferrer",n.cl());const m=this;this._rtlTextPluginCallback=ks.registerForPluginStateChange(v=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(S,D)=>{if(n.cm(S),D&&D.every(L=>L))for(const L in m._sourceCaches){const O=m._sourceCaches[L],U=O.getSource().type;U!=="vector"&&U!=="geojson"||O.reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const S=this.getOwnSource(v.sourceId);if(S&&S.vectorLayerIds)for(const D in this._layers){const L=this._layers[D];L.source===S.id&&this._validateLayer(L)}})}load(a){return a?(typeof a=="string"?this.loadURL(a):this.loadJSON(a),this):this}_getGlobalId(a){if(!a)return null;if(typeof a=="string"){if(n.f(a))return a;const o=n.cn(a);if(!o.startsWith("http"))try{return new URL(o,location.href).toString()}catch{return o}return o}return`json://${n.co(JSON.stringify(a))}`}_diffStyle(a,o,m){this.globalId=this._getGlobalId(a);const v=(S,D)=>{try{D(null,this.setState(S,m))}catch(L){D(L,!1)}};if(typeof a=="string"){const S=this.map._requestManager.normalizeStyleURL(a),D=this.map._requestManager.transformRequest(S,n.R.Style);n.n(D,(L,O)=>{L?this.fire(new n.y(L)):O&&v(O,o)})}else typeof a=="object"&&v(a,o)}loadURL(a,o={}){this.fire(new n.z("dataloading",{dataType:"style"}));const m=typeof o.validate=="boolean"?o.validate:!n.f(a);this.globalId=this._getGlobalId(a),a=this.map._requestManager.normalizeStyleURL(a,o.accessToken),this.resolvedImports.add(a);const v=this.importsCache.get(a);if(v)return this._load(v,m);const S=this.map._requestManager.transformRequest(a,n.R.Style);this._request=n.n(S,(D,L)=>{if(this._request=null,D)this.fire(new n.y(D));else if(L)return this.importsCache.set(a,L),this._load(L,m)})}loadJSON(a,o={}){this.fire(new n.z("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(a),this._request=n.q.frame(()=>{this._request=null,this._load(a,o.validate!==!1)})}loadEmpty(){this.fire(new n.z("dataloading",{dataType:"style"})),this._load(Nc,!1)}_loadImports(a,o,m){if(this.importDepth>=4)return n.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const v=[];for(const S of a){const D=this._createFragmentStyle(S),L=new Promise(q=>{D.once("style.import.load",q),D.once("error",q)}).then(()=>this.mergeAll());if(v.push(L),this.resolvedImports.has(S.url)){D.loadEmpty();continue}const O=S.data||this.importsCache.get(S.url);O?(D.loadJSON(O,{validate:o}),this._isInternalStyle(O)&&(D.globalId=null)):S.url?D.loadURL(S.url,{validate:o}):D.loadEmpty();const U={style:D,id:S.id,config:S.config};if(m){const q=this.fragments.findIndex(({id:Z})=>Z===m);this.fragments=this.fragments.slice(0,q).concat(U).concat(this.fragments.slice(q))}else this.fragments.push(U)}return Promise.allSettled(v)}getImportGlobalIds(a=this,o=new Set){for(const m of a.fragments)m.style.globalId&&o.add(m.style.globalId),this.getImportGlobalIds(m.style,o);return[...o.values()]}_createFragmentStyle(a){const o=this.scope?n.aC(a.id,this.scope):a.id;let m;const v=this._initialConfig&&this._initialConfig[o];(a.config||v)&&(m=n.l({},a.config,v));const S=new ks(this.map,{scope:o,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:m,configOptions:this.options,colorThemeOverride:a["color-theme"],configDependentLayers:this._configDependentLayers});return S.setEventedParent(this.map,{style:S}),S}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(a){return this.isRootStyle()&&(a.fragment||!!a.schema&&a.fragment!==!1)}_load(a,o){const m=a.indoor?ap(a.schema):a.schema;if(this._isInternalStyle(a)){const D=n.l({},Nc,{imports:[{id:"basemap",data:a,url:""}]});return void this._load(D,o)}if(this.updateConfig(this._config,m),o&&el(this,la(a)))return;this._loaded=!0,this.stylesheet=n.cp(a);const v=()=>{for(const U in a.sources)this.addSource(U,a.sources[U],{validate:!1,isInitialLoad:!0});a.sprite?this._loadIconset(a.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(a.glyphs,this.scope);const D=Ic(this.stylesheet.layers);if(this._order=D.map(U=>U.id),this.stylesheet.light&&n.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const U=this.stylesheet.lights[0];this.light=new At(U.properties,U.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new At(this.stylesheet.light)),this._layers={};for(const U of D){const q=n.cu(U,this.scope,this._styleColorTheme.lut,this.options);q.configDependencies.size!==0&&this._configDependentLayers.add(q.fqid),q.setEventedParent(this,{layer:{id:q.id}}),this._layers[q.id]=q;const Z=this.getOwnLayerSourceCache(q),X=!!this.directionalLight&&this.directionalLight.shadowsEnabled();Z&&q.canCastShadows()&&X&&(Z.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const L=this.stylesheet.terrain;L&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(L,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new n.z("data",{dataType:"style"}));const O=this.isRootStyle();a.imports?this._loadImports(a.imports,o).then(()=>{this._reloadImports(),this.fire(new n.z(O?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new n.z(O?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const S=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(S){const D=this._evaluateColorThemeData(S);this._loadColorTheme(D).then(()=>{v()}).catch(L=>{n.w(`Couldn't load color theme from the stylesheet: ${L}`),v()})}else this._styleColorTheme.lut=null,v()}isRootStyle(){return this.importDepth===0}mergeAll(){let a,o,m,v,S,D,L,O,U,q;const Z={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(X=>{if(X.stylesheet){if(X.light!=null&&(a=X.light),X.stylesheet.lights)for(const ae of X.stylesheet.lights)ae.type==="ambient"&&X.ambientLight!=null&&(o=X.ambientLight),ae.type==="directional"&&X.directionalLight!=null&&(m=X.directionalLight);v=this._prioritizeTerrain(v,X.terrain,X.stylesheet.terrain),X.stylesheet.fog&&X.fog!=null&&(S=X.fog),X.stylesheet.snow&&X.snow!=null&&(D=X.snow),X.stylesheet.rain&&X.rain!=null&&(L=X.rain),X.stylesheet.camera!=null&&(q=X.stylesheet.camera),X.stylesheet.projection!=null&&(O=X.stylesheet.projection),X.stylesheet.transition!=null&&(U=X.stylesheet.transition),Z[X.scope]=X._styleColorTheme}}),this.light=a,this.ambientLight=o,this.directionalLight=m,this.fog=S,this.snow=D,this.rain=L,this._styleColorThemeForScope=Z,v===null?delete this.terrain:this.terrain=v,this.camera=q||{"camera-projection":"perspective"},this.projection=O||{name:"mercator"},this.transition=n.l({},np,U),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(a){const o=m=>{for(const v of m.fragments)o(v.style);a(m)};o(this)}_prioritizeTerrain(a,o,m){const v=a&&a.drapeRenderMode===0;return m===null?o&&o.drapeRenderMode===0?o:v?a:null:o!=null&&(!a||v||o&&o.drapeRenderMode===1)?o:a}mergeTerrain(){let a;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(o=>{a=this._prioritizeTerrain(a,o.terrain,o.stylesheet.terrain)}),a===null?delete this.terrain:this.terrain=a}mergeProjection(){let a;this.forEachFragmentStyle(o=>{o.stylesheet.projection!=null&&(a=o.stylesheet.projection)}),this.projection=a||{name:"mercator"}}mergeSources(){const a={},o={},m={};this.forEachFragmentStyle(v=>{for(const S in v._sourceCaches){const D=n.aC(S,v.scope);a[D]=v._sourceCaches[S]}for(const S in v._otherSourceCaches){const D=n.aC(S,v.scope);o[D]=v._otherSourceCaches[S]}for(const S in v._symbolSourceCaches){const D=n.aC(S,v.scope);m[D]=v._symbolSourceCaches[S]}}),this._mergedSourceCaches=a,this._mergedOtherSourceCaches=o,this._mergedSymbolSourceCaches=m}mergeLayers(){const a={},o=[],m={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(S=>{for(const D of S._order){const L=S._layers[D];if(L.type==="slot"){const O=n.cq(D);if(a[O])continue;a[O]=[]}L.slot&&a[L.slot]?a[L.slot].push(L):o.push(L)}}),this._mergedOrder=[];const v=(S=[])=>{for(const D of S)if(D.type==="slot"){const L=n.cq(D.id);a[L]&&v(a[L]),this._mergedSlots.push(L)}else{const L=n.aC(D.id,D.scope);this._mergedOrder.push(L),m[L]=D,D.is3D()&&(this._has3DLayers=!0),D.type==="circle"&&(this._hasCircleLayers=!0),D.type==="symbol"&&(this._hasSymbolLayers=!0),D.type==="clip"&&(this._clipLayerPresent=!0)}};v(o),this._mergedOrder.sort((S,D)=>{const L=m[S],O=m[D];return L.hasInitialOcclusionOpacityProperties?O.is3D()?1:0:L.is3D()&&O.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=m,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(a){return this.stylesheet.camera=n.l({},this.stylesheet.camera,a),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(a){return a.data?function(o,m,v){const S=n.l({},m);for(const L of Object.keys(n.a3.colorTheme))S[L]===void 0&&(S[L]=n.a3.colorTheme[L].default);const D=new n.a4(_0,o,new Map(v));return D.setTransitionOrValue(S,v),D.untransitioned().possiblyEvaluate(new n.a8(0))}(this.scope,a,this.options).get("data"):null}_loadColorTheme(a){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const o=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((m,v)=>{const S="data:image/png;base64,";if(!a||a.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void m();let D=a;D.startsWith(S)||(D=S+D);const L="mapbox-reserved-lut",O=new Image;O.src=D,O.onerror=()=>{this._styleColorTheme.lutLoading=!1,v(new Error("Failed to load image data"))},O.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==o)return void m();this._styleColorTheme.lutLoading=!1;const{width:U,height:q,data:Z}=n.q.getImageData(O);if(q>32)return void v(new Error("The height of the image must be less than or equal to 32 pixels."));if(U!==q*q)return void v(new Error("The width of the image must be equal to the height squared."));this.getImage(L)&&this.removeImage(L),this.addImage(L,{data:new n.r({width:U,height:q},Z),pixelRatio:1,sdf:!1,usvg:!1,version:0});const X=this.imageManager.getImage(L,this.scope);X?(this._styleColorTheme.lut={image:X.data,data:a},m()):v(new Error("Missing LUT image."))}})}getLut(a){const o=this._styleColorThemeForScope[a];return o?o.lut:null}setProjection(a){a?this.stylesheet.projection=a:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(a){this._spriteRequest=function(o,m,v){let S,D,L;const O=n.q.devicePixelRatio>1?"@2x":"";let U=n.n(m.transformRequest(m.normalizeSpriteURL(o,O,".json"),n.R.SpriteJSON),(X,ae)=>{U=null,L||(L=X,S=ae,Z())}),q=n.o(m.transformRequest(m.normalizeSpriteURL(o,O,".png"),n.R.SpriteImage),(X,ae)=>{q=null,L||(L=X,D=ae,Z())});function Z(){if(L)v(L);else if(S&&D){const X=n.q.getImageData(D),ae={};for(const me in S){const{width:he,height:xe,x:_e,y:Me,sdf:Be,pixelRatio:Oe,stretchX:Ze,stretchY:Ue,content:We}=S[me],qe=new n.r({width:he,height:xe});n.r.copy(X,qe,{x:_e,y:Me},{x:0,y:0},{width:he,height:xe},null),ae[me]={data:qe,pixelRatio:Oe,sdf:Be,stretchX:Ze,stretchY:Ue,content:We,usvg:!1}}v(null,ae)}}return{cancel(){U&&(U.cancel(),U=null),q&&(q.cancel(),q=null)}}}(a,this.map._requestManager,(o,m)=>{if(this._spriteRequest=null,o)this.fire(new n.y(o));else if(m)for(const v in m)this.imageManager.addImage(v,this.scope,m[v]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.z("data",{dataType:"style"}))})}_loadIconset(a){if(!n.f(a)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(a);const o=this.map._spriteFormat==="auto";var m,v;this._spriteRequest=(v=(S,D)=>{if(this._spriteRequest=null,S)o?this._loadSprite(a):this.fire(new n.y(S));else if(D)for(const L in D)this.imageManager.addImage(L,this.scope,D[L]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.z("data",{dataType:"style"}))},n.bi((m=this.map._requestManager).transformRequest(m.normalizeIconsetURL(a),n.R.Iconset),(S,D)=>{if(S)return void v(S);const L={},O=n.cg(new n.bh(D));for(const U of O.icons){const q={version:1,pixelRatio:n.q.devicePixelRatio,content:Bu(U),stretchX:U.metadata?Ad(U.metadata.stretch_x_areas):void 0,stretchY:U.metadata?Ad(U.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:U};L[U.name]=q}v(null,L)}))}_validateLayer(a){const o=this.getOwnSource(a.source);if(!o)return;const m=a.sourceLayer;m&&(o.type==="geojson"||o.vectorLayerIds&&o.vectorLayerIds.indexOf(m)===-1)&&this.fire(new n.y(new Error(`Source layer "${m}" does not exist on source "${o.id}" as specified by style layer "${a.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const a in this._sourceCaches)if(!this._sourceCaches[a].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:a}of this.fragments)if(!a.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((a,o)=>{const m=this.fragments[o];return m&&m.style&&(a.data=m.style.serialize()),a})}_serializeSources(){const a={};for(const o in this._sourceCaches){const m=this._sourceCaches[o].getSource();a[m.id]||(a[m.id]=m.serialize())}return a}_serializeLayers(a){const o=[];for(const m of a){const v=this._layers[m];v&&v.type!=="custom"&&o.push(v.serialize())}return o}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const a in this._sourceCaches)if(this._sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(a){return a?this.order:this._mergedOrder}isLayerDraped(a){return!!this.terrain&&a.isDraped(this.getLayerSourceCache(a))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(a){const o=this.getOwnLayer(a);if(o)return o;this.fire(new n.y(new Error(`The layer '${a}' does not exist in the map's style.`)))}_checkSource(a){const o=this.getOwnSource(a);if(o)return o;this.fire(new n.y(new Error(`The source '${a}' does not exist in the map's style.`)))}precompilePrograms(a,o){const m=this.map.painter;if(m)for(let v=a.minzoom||0;v<(a.maxzoom||25.5);v++){const S=a.getProgramIds();if(S)for(const D of S){const L=a.getDefaultProgramParams(D,o.zoom,this._styleColorTheme.lut);L&&(m.style=this,this.fog&&(m._fogVisible=!0,L.overrideFog=!0,m.getOrCreateProgram(D,L)),m._fogVisible=!1,L.overrideFog=!1,m.getOrCreateProgram(D,L),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(L.overrideRtt=!0,m.getOrCreateProgram(D,L)))}}}update(a){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(a),this.directionalLight&&this.directionalLight.recalculate(a);const o=this.calculateLightsBrightness();a.brightness=o||0,o!==this._brightness&&(this._brightness=o,this.dispatcher.broadcast("setBrightness",o));const m=this._changes.isDirty();let v=!1;if(this._changes.isDirty()){const D=this._changes.getLayerUpdatesByScope();for(const L in D){const{updatedIds:O,removedIds:U}=D[L];(O||U)&&(this._updateWorkerLayers(L,O,U),v=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(a),this.light&&this.light.updateTransitions(a),this.ambientLight&&this.ambientLight.updateTransitions(a),this.directionalLight&&this.directionalLight.updateTransitions(a),this.fog&&this.fog.updateTransitions(a),this.snow&&this.snow.updateTransitions(a),this.rain&&this.rain.updateTransitions(a),this._changes.reset()}const S={};for(const D in this._mergedSourceCaches){const L=this._mergedSourceCaches[D];S[D]=L.used,L.used=!1,L.tileCoverLift=0}for(const D of this._mergedOrder){const L=this._mergedLayers[D];if(L.recalculate(a,this._availableImages),!L.isHidden(a.zoom)){const O=this.getLayerSourceCache(L);O&&(O.used=!0,O.tileCoverLift=Math.max(O.tileCoverLift,L.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(L,a)}):this.precompilePrograms(L,a))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&v&&this.mergeLayers();for(const D in S){const L=this._mergedSourceCaches[D];S[D]!==L.used&&L.getSource().fire(new n.z("data",{sourceDataType:"visibility",dataType:"source",sourceId:L.getSource().id}))}this.light&&this.light.recalculate(a),this.terrain&&this.terrain.recalculate(a),this.fog&&this.fog.recalculate(a),this.snow&&this.snow.recalculate(a),this.rain&&this.rain.recalculate(a),this.z=a.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),m&&this.fire(new n.z("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=this._changes.getUpdatedImages();if(a.length){for(const o in this._sourceCaches)this._sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],a);this._changes.resetUpdatedImages()}}_updateWorkerLayers(a,o,m){const v=this.getFragmentStyle(a);v&&this.dispatcher.broadcast("updateLayers",{layers:o?v._serializeLayers(o):[],scope:a,removedIds:m||[],options:v.options})}setState(a,o){if(this._checkLoaded(),el(this,la(a)))return!1;(a=n.cp(a)).layers=Ic(a.layers);const m=function(D,L){if(!D)return[{command:Ia.setStyle,args:[L]}];let O=[];try{if(!n.bn(D.version,L.version))return[{command:Ia.setStyle,args:[L]}];if(n.bn(D.center,L.center)||O.push({command:Ia.setCenter,args:[L.center]}),n.bn(D.zoom,L.zoom)||O.push({command:Ia.setZoom,args:[L.zoom]}),n.bn(D.bearing,L.bearing)||O.push({command:Ia.setBearing,args:[L.bearing]}),n.bn(D.pitch,L.pitch)||O.push({command:Ia.setPitch,args:[L.pitch]}),n.bn(D.sprite,L.sprite)||O.push({command:Ia.setSprite,args:[L.sprite]}),n.bn(D.glyphs,L.glyphs)||O.push({command:Ia.setGlyphs,args:[L.glyphs]}),n.bn(D.imports,L.imports)||function(ae=[],me=[],he){me=me||[];const xe=(ae=ae||[]).map(za),_e=me.map(za),Me=ae.reduce(va,{}),Be=me.reduce(va,{}),Oe=xe.slice();let Ze,Ue,We,qe;for(Ze=0,Ue=0;Ze<xe.length;Ze++)We=xe[Ze],Be.hasOwnProperty(We)?Ue++:(he.push({command:Ia.removeImport,args:[We]}),Oe.splice(Oe.indexOf(We,Ue),1));for(Ze=0,Ue=0;Ze<_e.length;Ze++)We=_e[_e.length-1-Ze],Oe[Oe.length-1-Ze]!==We&&(Me.hasOwnProperty(We)?(he.push({command:Ia.removeImport,args:[We]}),Oe.splice(Oe.lastIndexOf(We,Oe.length-Ue),1)):Ue++,qe=Oe[Oe.length-Ze],he.push({command:Ia.addImport,args:[Be[We],qe]}),Oe.splice(Oe.length-Ze,0,We));for(const tt of me){const rt=Me[tt.id];rt&&!n.bn(rt,tt)&&he.push({command:Ia.updateImport,args:[tt.id,tt]})}}(D.imports,L.imports,O),n.bn(D.transition,L.transition)||O.push({command:Ia.setTransition,args:[L.transition]}),n.bn(D.light,L.light)||O.push({command:Ia.setLight,args:[L.light]}),n.bn(D.fog,L.fog)||O.push({command:Ia.setFog,args:[L.fog]}),n.bn(D.snow,L.snow)||O.push({command:Ia.setSnow,args:[L.snow]}),n.bn(D.rain,L.rain)||O.push({command:Ia.setRain,args:[L.rain]}),n.bn(D.projection,L.projection)||O.push({command:Ia.setProjection,args:[L.projection]}),n.bn(D.lights,L.lights)||O.push({command:Ia.setLights,args:[L.lights]}),n.bn(D.camera,L.camera)||O.push({command:Ia.setCamera,args:[L.camera]}),!n.bn(D["color-theme"],L["color-theme"]))return[{command:Ia.setStyle,args:[L]}];const U={},q=[];(function(ae,me,he,xe){let _e;for(_e in me=me||{},ae=ae||{})ae.hasOwnProperty(_e)&&(me.hasOwnProperty(_e)||to(_e,he,xe));for(_e in me){if(!me.hasOwnProperty(_e))continue;const Me=me[_e];ae.hasOwnProperty(_e)?n.bn(ae[_e],Me)||(ae[_e].type==="geojson"&&Me.type==="geojson"&&Fs(ae,me,_e)?he.push({command:Ia.setGeoJSONSourceData,args:[_e,Me.data]}):Au(_e,me,he,xe)):wd(_e,me,he)}})(D.sources,L.sources,q,U);const Z=[];D.layers&&D.layers.forEach(ae=>{ae.source&&U[ae.source]?O.push({command:Ia.removeLayer,args:[ae.id]}):Z.push(ae)});let X=D.terrain;X&&U[X.source]&&(O.push({command:Ia.setTerrain,args:[void 0]}),X=void 0),O=O.concat(q),n.bn(X,L.terrain)||O.push({command:Ia.setTerrain,args:[L.terrain]}),function(ae,me,he){me=me||[];const xe=(ae=ae||[]).map(za),_e=me.map(za),Me=ae.reduce(va,{}),Be=me.reduce(va,{}),Oe=xe.slice(),Ze=Object.create(null);let Ue,We,qe,tt,rt,Et,_t;for(Ue=0,We=0;Ue<xe.length;Ue++)qe=xe[Ue],Be.hasOwnProperty(qe)?We++:(he.push({command:Ia.removeLayer,args:[qe]}),Oe.splice(Oe.indexOf(qe,We),1));for(Ue=0,We=0;Ue<_e.length;Ue++)qe=_e[_e.length-1-Ue],Oe[Oe.length-1-Ue]!==qe&&(Me.hasOwnProperty(qe)?(he.push({command:Ia.removeLayer,args:[qe]}),Oe.splice(Oe.lastIndexOf(qe,Oe.length-We),1)):We++,Et=Oe[Oe.length-Ue],he.push({command:Ia.addLayer,args:[Be[qe],Et]}),Oe.splice(Oe.length-Ue,0,qe),Ze[qe]=!0);for(Ue=0;Ue<_e.length;Ue++)if(qe=_e[Ue],tt=Me[qe],rt=Be[qe],!Ze[qe]&&!n.bn(tt,rt))if(n.bn(tt.source,rt.source)&&n.bn(tt["source-layer"],rt["source-layer"])&&n.bn(tt.type,rt.type)){for(_t in wr(tt.layout,rt.layout,he,qe,null,Ia.setLayoutProperty),wr(tt.paint,rt.paint,he,qe,null,Ia.setPaintProperty),n.bn(tt.slot,rt.slot)||he.push({command:Ia.setSlot,args:[qe,rt.slot]}),n.bn(tt.filter,rt.filter)||he.push({command:Ia.setFilter,args:[qe,rt.filter]}),n.bn(tt.minzoom,rt.minzoom)&&n.bn(tt.maxzoom,rt.maxzoom)||he.push({command:Ia.setLayerZoomRange,args:[qe,rt.minzoom,rt.maxzoom]}),tt)tt.hasOwnProperty(_t)&&_t!=="layout"&&_t!=="paint"&&_t!=="filter"&&_t!=="metadata"&&_t!=="minzoom"&&_t!=="maxzoom"&&_t!=="slot"&&(_t.indexOf("paint.")===0?wr(tt[_t],rt[_t],he,qe,_t.slice(6),Ia.setPaintProperty):n.bn(tt[_t],rt[_t])||he.push({command:Ia.setLayerProperty,args:[qe,_t,rt[_t]]}));for(_t in rt)rt.hasOwnProperty(_t)&&!tt.hasOwnProperty(_t)&&_t!=="layout"&&_t!=="paint"&&_t!=="filter"&&_t!=="metadata"&&_t!=="minzoom"&&_t!=="maxzoom"&&_t!=="slot"&&(_t.indexOf("paint.")===0?wr(tt[_t],rt[_t],he,qe,_t.slice(6),Ia.setPaintProperty):n.bn(tt[_t],rt[_t])||he.push({command:Ia.setLayerProperty,args:[qe,_t,rt[_t]]}))}else he.push({command:Ia.removeLayer,args:[qe]}),Et=Oe[Oe.lastIndexOf(qe)+1],he.push({command:Ia.addLayer,args:[rt,Et]})}(Z,L.layers,O)}catch(U){console.warn("Unable to compute style diff:",U),O=[{command:Ia.setStyle,args:[L]}]}return O}(this.serialize(),a).filter(D=>!(D.command in w0));if(m.length===0)return!1;const v=m.filter(D=>!(D.command in Nm));if(v.length>0)throw new Error(`Unimplemented: ${v.map(D=>D.command).join(", ")}.`);const S=[];return m.forEach(D=>{S.push(this[D.command].apply(this,D.args))}),o&&Promise.all(S).then(o),this.stylesheet=a,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(a,o){return this.getImage(a)?this.fire(new n.y(new Error("An image with this name already exists."))):(this.imageManager.addImage(a,this.scope,o),this._afterImageUpdated(a),this)}updateImage(a,o,m=!1){this.imageManager.updateImage(a,this.scope,o),m&&this._afterImageUpdated(a)}getImage(a){return this.imageManager.getImage(a,this.scope)}removeImage(a){return this.getImage(a)?(this.imageManager.removeImage(a,this.scope),this._afterImageUpdated(a),this):this.fire(new n.y(new Error("No image with this name exists.")))}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(a),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new n.z("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(a,o,m={}){return this._checkLoaded(),this._validate(ct,`models.${a}`,o,null,m)||(this.modelManager.addModel(a,o,this.scope),this._changes.setDirty()),this}hasModel(a){return this.modelManager.hasModel(a,this.scope)}removeModel(a){return this.hasModel(a)?(this.modelManager.removeModel(a,this.scope),this):this.fire(new n.y(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(a,o,m={}){if(this._checkLoaded(),this.getOwnSource(a)!==void 0)throw new Error(`There is already a source with ID "${a}".`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(yn,`sources.${a}`,o,null,m))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const v=qf(a,o,this.dispatcher,this);v.scope=this.scope,v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(v.id),source:v.serialize(),sourceId:v.id}));const S=D=>{const L=(D?"symbol:":"other:")+v.id,O=n.aC(L,this.scope),U=this._sourceCaches[L]=new To(O,v,D);(D?this._symbolSourceCaches:this._otherSourceCaches)[v.id]=U,U.onAdd(this.map)};S(!1),o.type!=="vector"&&o.type!=="geojson"||S(!0),v.onAdd&&v.onAdd(this.map),m.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(a){this._checkLoaded();const o=this.getOwnSource(a);if(!o)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===a)return this.fire(new n.y(new Error(`Source "${a}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===a)return this.fire(new n.y(new Error(`Source "${a}" cannot be removed while terrain is using it.`)));const m=this.getOwnSourceCaches(a);for(const v of m){const S=n.cq(v.id);delete this._sourceCaches[S],this._changes.discardSourceCacheUpdate(v.id),v.fire(new n.z("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles()}return delete this._otherSourceCaches[a],delete this._symbolSourceCaches[a],this.mergeSources(),o.setEventedParent(null),o.onRemove&&o.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(a,o){this._checkLoaded(),this.getOwnSource(a).setData(o),this._changes.setDirty()}getOwnSource(a){const o=this.getOwnSourceCache(a);return o&&o.getSource()}getOwnSources(){const a=[];for(const o in this._otherSourceCaches){const m=this.getOwnSourceCache(o);m&&a.push(m.getSource())}return a}areTilesLoaded(){const a=this._mergedSourceCaches;for(const o in a){const m=a[o]._tiles;for(const v in m){const S=m[v];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}setLights(a){if(this._checkLoaded(),!a)return delete this.ambientLight,void delete this.directionalLight;const o=this._getTransitionParameters();for(const v of a){if(this._validate(js,"lights",v))return;switch(v.type){case"ambient":if(this.ambientLight){const S=this.ambientLight;S.set(v),S.updateTransitions(o)}else this.ambientLight=new oi(v,Ya||(Ya=new n.a5({color:new n.a6(n.a3.properties_light_ambient.color),"color-use-theme":new n.a6({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a6(n.a3.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const S=this.directionalLight;S.set(v),S.updateTransitions(o)}else this.directionalLight=new oi(v,Ja||(Ja=new n.a5({direction:new n.ak(n.a3.properties_light_directional.direction),color:new n.a6(n.a3.properties_light_directional.color),"color-use-theme":new n.a6({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a6(n.a3.properties_light_directional.intensity),"cast-shadows":new n.a6(n.a3.properties_light_directional["cast-shadows"]),"shadow-quality":new n.a6(n.a3.properties_light_directional["shadow-quality"]),"shadow-intensity":new n.a6(n.a3.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const m=new n.a8(this.z||0,o);this.ambientLight&&this.ambientLight.recalculate(m),this.directionalLight&&this.directionalLight.recalculate(m),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const a=this.directionalLight,o=this.ambientLight;if(!a||!o)return;const m=X=>.2126*(X[0]<=.03928?X[0]/12.92:Math.pow((X[0]+.055)/1.055,2.4))+.7152*(X[1]<=.03928?X[1]/12.92:Math.pow((X[1]+.055)/1.055,2.4))+.0722*(X[2]<=.03928?X[2]/12.92:Math.pow((X[2]+.055)/1.055,2.4)),v=a.properties.get("color").toRenderColor(null).toArray01(),S=a.properties.get("intensity"),D=a.properties.get("direction"),L=1-n.cb(D.x,D.y,D.z)[2]/90,O=m(v)*S*L,U=o.properties.get("color").toRenderColor(null).toArray01(),q=o.properties.get("intensity"),Z=m(U)*q;return Number(((O+Z)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const a=[];return this.directionalLight&&a.push(this.directionalLight.get()),this.ambientLight&&a.push(this.ambientLight.get()),a}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(a){if(!a)return this;if(n.cr(a)){const o=n.cs(a),m=this.fragments.find(({id:S})=>S===o);if(!m)throw new Error(`Style import '${a}' not found`);const v=n.cq(a);return m.style.getFragmentStyle(v)}{const o=this.fragments.find(({id:m})=>m===a);if(!o)throw new Error(`Style import '${a}' not found`);return o.style}}setFeaturesetSelectors(a){if(!a)return;const o={},m=(v,S="")=>`${v}::${S}`;this.featuresetSelectors={};for(const v in a){const S=this.featuresetSelectors[v]=[];for(const D of a[v].selectors){if(D.featureNamespace){const O=this.getOwnLayer(D.layer);if(!O){n.w(`Layer is undefined for selector: ${D.layer}`);continue}const U=m(O.source,O.sourceLayer);if(U in o&&o[U]!==D.featureNamespace){n.w(`"featureNamespace ${D.featureNamespace} of featureset ${v}'s selector is not associated to the same source, skip this selector`);continue}o[U]=D.featureNamespace}let L;if(D.properties)for(const O in D.properties){const U=n.U(D.properties[O]);U.result==="success"&&(L=L||{},L[O]=U.value)}S.push({layerId:D.layer,namespace:D.featureNamespace,properties:L})}}}getFeaturesetDescriptors(a){const o=this.getFragmentStyle(a);if(!o||!o.stylesheet.featuresets)return[];const m=[];for(const v in o.stylesheet.featuresets)m.push({featuresetId:v,importId:o.scope?o.scope:void 0});return m}getFeaturesetLayers(a,o){const m=this.getFragmentStyle(o),v=m.stylesheet.featuresets;if(!v||!v[a])return this.fire(new n.y(new Error(`The featureset '${a}' does not exist in the map's style and cannot be queried.`))),[];const S=[];for(const D of v[a].selectors){const L=m.getOwnLayer(D.layer);L&&S.push(L)}return S}getConfigProperty(a,o){const m=this.getFragmentStyle(a);if(!m)return null;const v=n.aC(o,m.scope),S=m.options.get(v),D=S?S.value||S.default:null;return D?D.serialize():null}setConfigProperty(a,o,m){const v=this.getFragmentStyle(a);if(!v)return;const S=v.stylesheet.indoor?ap(v.stylesheet.schema):v.stylesheet.schema;if(!S||!S[o])return;const D=n.U(m);if(D.result!=="success")return void el(this,D.value);const L=D.value.expression,O=n.aC(o,v.scope),U=v.options.get(O);if(!U)return;let q;const{minValue:Z,maxValue:X,stepValue:ae,type:me,values:he}=S[o],xe=n.U(S[o].default);xe.result==="success"&&(q=xe.value.expression),q?(this.options.set(O,{...U,value:L,default:q,minValue:Z,maxValue:X,stepValue:ae,type:me,values:he}),this.updateConfigDependencies(o)):this.fire(new n.y(new Error(`No schema defined for the config option "${o}" in the "${a}" fragment.`)))}getConfig(a){const o=this.getFragmentStyle(a);if(!o)return null;const m=o.stylesheet.schema;if(!m)return null;const v={};for(const S in m){const D=n.aC(S,o.scope),L=o.options.get(D),O=L?L.value||L.default:null;v[S]=O?O.serialize():null}return v}setConfig(a,o){const m=this.getFragmentStyle(a);m&&(m.updateConfig(o,m.stylesheet.schema),this.updateConfigDependencies())}getSchema(a){const o=this.getFragmentStyle(a);return o?o.stylesheet.schema:null}setSchema(a,o){const m=this.getFragmentStyle(a);m&&(m.stylesheet.schema=o,m.updateConfig(m._config,o),this.updateConfigDependencies())}updateConfig(a,o){if(this._config=a,a||o)if(o)for(const m in o){let v,S;const D=n.U(o[m].default);if(D.result==="success"&&(v=D.value.expression),a&&a[m]!==void 0){const X=n.U(a[m]);X.result==="success"&&(S=X.value.expression)}const{minValue:L,maxValue:O,stepValue:U,type:q,values:Z}=o[m];if(v){const X=n.aC(m,this.scope);this.options.set(X,{default:v,value:S,minValue:L,maxValue:O,stepValue:U,type:q,values:Z})}else this.fire(new n.y(new Error(`No schema defined for config option "${m}".`)))}else this.fire(new n.y(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(a){for(const o of this._configDependentLayers){const m=this.getLayer(o);if(m){if(a&&!m.configDependencies.has(a))continue;m.possiblyEvaluateVisibility(),this._updateLayer(m)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(o=>{const m=o._styleColorTheme.colorThemeOverride?o._styleColorTheme.colorThemeOverride:o._styleColorTheme.colorTheme;if(m){const v=o._evaluateColorThemeData(m);(!o._styleColorTheme.lut&&v!==""||o._styleColorTheme.lut&&v!==o._styleColorTheme.lut.data)&&o.setColorTheme(m)}}),this._changes.setDirty()}addLayer(a,o,m={}){this._checkLoaded();const v=a.id;if(this._layers[v])return void this.fire(new n.y(new Error(`Layer with id "${v}" already exists on this map`)));let S;if(a.type==="custom"){if(el(this,n.ct(a)))return;S=n.cu(a,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof a.source=="object"&&(this.addSource(v,a.source),a=n.cp(a),a=n.l(a,{source:v})),this._validate(Ce,`layers.${v}`,a,{arrayIndex:-1},m))return;S=n.cu(a,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(S),S.setEventedParent(this,{layer:{id:v}})}S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid);let D=this._order.length;if(o){const q=this._order.indexOf(o);if(q===-1)return void this.fire(new n.y(new Error(`Layer with id "${o}" does not exist on this map.`)));S.slot===this._layers[o].slot?D=q:n.w(`Layer with id "${o}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(D,0,v),this._layerOrderChanged=!0,this._layers[v]=S;const L=this.getOwnLayerSourceCache(S),O=!!this.directionalLight&&this.directionalLight.shadowsEnabled();L&&S.canCastShadows()&&O&&(L.castsShadows=!0);const U=this._changes.getRemovedLayer(S);if(U&&S.source&&L&&S.type!=="custom"){this._changes.discardLayerRemoval(S);const q=n.aC(S.source,S.scope);U.type!==S.type?this._changes.updateSourceCache(q,"clear"):(this._changes.updateSourceCache(q,"reload"),L.pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map),S.scope=this.scope,this.mergeLayers()}moveLayer(a,o){this._checkLoaded();const m=this._checkLayer(a);if(!m||a===o)return;const v=this._order.indexOf(a);this._order.splice(v,1);let S=this._order.length;if(o){const D=this._order.indexOf(o);if(D===-1)return void this.fire(new n.y(new Error(`Layer with id "${o}" does not exist on this map.`)));m.slot===this._layers[o].slot?S=D:n.w(`Layer with id "${o}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(S,0,a),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(a){this._checkLoaded();const o=this._checkLayer(a);if(!o)return;o.setEventedParent(null);const m=this._order.indexOf(a);this._order.splice(m,1),delete this._layers[a],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(o.fqid),this._changes.removeLayer(o);const v=this.getOwnLayerSourceCache(o);if(v&&v.castsShadows){let S=!1;for(const D in this._layers)if(this._layers[D].source===o.source&&this._layers[D].canCastShadows()){S=!0;break}v.castsShadows=S}o.onRemove&&o.onRemove(this.map),this.mergeLayers()}getOwnLayer(a){return this._layers[a]}hasLayer(a){return a in this._mergedLayers}hasLayerType(a){for(const o in this._layers)if(this._layers[o].type===a)return!0;return!1}setLayerZoomRange(a,o,m){this._checkLoaded();const v=this._checkLayer(a);v&&(v.minzoom===o&&v.maxzoom===m||(o!=null&&(v.minzoom=o),m!=null&&(v.maxzoom=m),this._updateLayer(v)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(a,o){this._checkLoaded();const m=this._checkLayer(a);m&&m.slot!==o&&(m.slot=o,this._updateLayer(m))}setFilter(a,o,m={}){this._checkLoaded();const v=this._checkLayer(a);if(v&&!n.bn(v.filter,o))return o==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(Fe,`layers.${v.id}.filter`,o,{layerType:v.type},m)||(v.filter=n.cp(o),this._updateLayer(v)))}getFilter(a){const o=this._checkLayer(a);if(o)return n.cp(o.filter)}setLayoutProperty(a,o,m,v={}){this._checkLoaded();const S=this._checkLayer(a);if(S&&!n.bn(S.getLayoutProperty(o),m)){if(m!=null&&(!v||v.validate!==!1)&&el(S,Qe.call(la,{key:`layers.${a}.layout.${o}`,layerType:S.type,objectKey:o,value:m,styleSpec:n.a3,style:{glyphs:!0,sprite:!0}})))return;S.setLayoutProperty(o,m),S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid),this._updateLayer(S)}}getLayoutProperty(a,o){const m=this._checkLayer(a);if(m)return m.getLayoutProperty(o)}setPaintProperty(a,o,m,v={}){this._checkLoaded();const S=this._checkLayer(a);if(!S||n.bn(S.getPaintProperty(o),m)||m!=null&&(!v||v.validate!==!1)&&el(S,Ye.call(la,{key:`layers.${a}.paint.${o}`,layerType:S.type,objectKey:o,value:m,styleSpec:n.a3})))return;const D=S.setPaintProperty(o,m);S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid),D&&this._updateLayer(S),this._changes.updatePaintProperties(S)}getPaintProperty(a,o){const m=this._checkLayer(a);if(m)return m.getPaintProperty(o)}setFeatureState(a,o){if(this._checkLoaded(),"target"in a){if("featuresetId"in a.target){const{featuresetId:O,importId:U}=a.target,q=this.getFragmentStyle(U),Z=q.getFeaturesetLayers(O);for(const{source:X,sourceLayer:ae}of Z)q.setFeatureState({id:a.id,source:X,sourceLayer:ae},o)}else if("layerId"in a.target){const{layerId:O}=a.target,U=this.getLayer(O);this.setFeatureState({id:a.id,source:U.source,sourceLayer:U.sourceLayer},o)}return}const m=a.source,v=a.sourceLayer,S=this._checkSource(m);if(!S)return;const D=S.type;if(D==="geojson"&&v)return void this.fire(new n.y(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(D==="vector"&&!v)return void this.fire(new n.y(new Error("The sourceLayer parameter must be provided for vector source types.")));a.id===void 0&&this.fire(new n.y(new Error("The feature id parameter must be provided.")));const L=this.getOwnSourceCaches(m);for(const O of L)O.setFeatureState(v,a.id,o)}removeFeatureState(a,o){if(this._checkLoaded(),"target"in a){if("featuresetId"in a.target){const{featuresetId:O,importId:U}=a.target,q=this.getFragmentStyle(U),Z=q.getFeaturesetLayers(O);for(const{source:X,sourceLayer:ae}of Z)q.removeFeatureState({id:a.id,source:X,sourceLayer:ae},o)}else if("layerId"in a.target){const{layerId:O}=a.target,U=this.getLayer(O);this.removeFeatureState({id:a.id,source:U.source,sourceLayer:U.sourceLayer},o)}return}const m=a.source,v=this._checkSource(m);if(!v)return;const S=v.type,D=S==="vector"?a.sourceLayer:void 0;if(S==="vector"&&!D)return void this.fire(new n.y(new Error("The sourceLayer parameter must be provided for vector source types.")));if(o&&typeof a.id!="string"&&typeof a.id!="number")return void this.fire(new n.y(new Error("A feature id is required to remove its specific state property.")));const L=this.getOwnSourceCaches(m);for(const O of L)O.removeFeatureState(D,a.id,o)}getFeatureState(a){if(this._checkLoaded(),"target"in a){let S;if("featuresetId"in a.target){const{featuresetId:D,importId:L}=a.target,O=this.getFragmentStyle(L),U=O.getFeaturesetLayers(D);for(const{source:q,sourceLayer:Z}of U){const X=O.getFeatureState({id:a.id,source:q,sourceLayer:Z});if(X&&!S)S=X;else if(!n.bn(S,X))return void this.fire(new n.y(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in a.target){const{layerId:D}=a.target,L=this.getLayer(D);S=this.getFeatureState({id:a.id,source:L.source,sourceLayer:L.sourceLayer})}return S}const o=a.source,m=a.sourceLayer,v=this._checkSource(o);if(v){if(v.type!=="vector"||m)return a.id===void 0&&this.fire(new n.y(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(o)[0].getFeatureState(m,a.id);this.fire(new n.y(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(a){return this.stylesheet.transition=n.l({},this.stylesheet.transition,a),this.transition=this.stylesheet.transition,this}getTransition(){return n.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const a=this.getTerrain(),o=a&&this.terrain&&this.terrain.scope===this.scope?a:this.stylesheet.terrain;return n.cv({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:o,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},m=>m!==void 0)}_updateFilteredLayers(a){for(const o of Object.values(this._mergedLayers))a(o)&&this._updateLayer(o)}_updateLayer(a){this._changes.updateLayer(a);const o=this.getLayerSourceCache(a),m=n.aC(a.source,a.scope),v=this._changes.getUpdatedSourceCaches();a.source&&!v[m]&&o&&o.getSource().type!=="raster"&&(this._changes.updateSourceCache(m,"reload"),o.pause()),a.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(a){const o=L=>this._mergedLayers[L].is3D(),m=this.order,v={},S=[];for(let L=m.length-1;L>=0;L--){const O=m[L];if(o(O)){v[O]=L;for(const U of a){const q=U[O];if(q)for(const Z of q)S.push(Z)}}}S.sort((L,O)=>O.intersectionZ-L.intersectionZ);const D=[];for(let L=m.length-1;L>=0;L--){const O=m[L];if(o(O))for(let U=S.length-1;U>=0;U--){const q=S[U].feature;if(q.layer&&v[q.layer.id]<L)break;D.push(q),S.pop()}else for(const U of a){const q=U[O];if(q)for(const Z of q)D.push(Z.feature)}}return D}queryRenderedFeatures(a,o,m){let v;o&&!Array.isArray(o)&&o.filter&&(this._validate(Fe,"queryRenderedFeatures.filter",o.filter,null,o),v=n.aZ(o.filter));const S={},D=q=>{if(Zl.has(q.type))return;const Z=this.getOwnLayerSourceCache(q),X=S[Z.id]=S[Z.id]||{sourceCache:Z,layers:{},has3DLayers:!1};q.is3D()&&(X.has3DLayers=!0),X.layers[q.fqid]=X.layers[q.fqid]||{styleLayer:q,targets:[]},X.layers[q.fqid].targets.push({filter:v})};if(o&&o.layers){if(!Array.isArray(o.layers))return this.fire(new n.y(new Error("parameters.layers must be an Array."))),[];for(const q of o.layers){const Z=this._layers[q];if(!Z)return this.fire(new n.y(new Error(`The layer '${q}' does not exist in the map's style and cannot be queried for features.`))),[];D(Z)}}else for(const q in this._layers)D(this._layers[q]);const L=this._queryRenderedFeatures(a,S,m),O=this._flattenAndSortRenderedFeatures(L),U=[];for(const q of O)n.cs(q.layer.id)===this.scope&&U.push(q);return U}queryRenderedFeatureset(a,o,m){let v;o&&!Array.isArray(o)&&o.filter&&(this._validate(Fe,"queryRenderedFeatures.filter",o.filter,null,o),v=n.aZ(o.filter));const S="mock",D=[];if(o&&o.target)D.push({...o,targetId:S,filter:v});else{const U=this.getFeaturesetDescriptors();for(const q of U)D.push({targetId:S,filter:v,target:q});for(const{style:q}of this.fragments){const Z=q.getFeaturesetDescriptors();for(const X of Z)D.push({targetId:S,filter:v,target:X})}}const L=this.queryRenderedTargets(a,D,m),O=[];for(const U of L)for(const q of U.variants[S])O.push(new n.cw(U,q));return O}queryRenderedTargets(a,o,m){const v={},S=(L,O,U,q)=>{const Z=v[O.id]=v[O.id]||{sourceCache:O,layers:{},has3DLayers:!1};Z.layers[L.fqid]=Z.layers[L.fqid]||{styleLayer:L,targets:[]},L.is3D()&&(Z.has3DLayers=!0),Z.layers[L.fqid].targets.push(q?{...U,namespace:q.namespace,properties:q.properties}:U)};for(const L of o)if("featuresetId"in L.target){const{featuresetId:O,importId:U}=L.target,q=this.getFragmentStyle(U),Z=q.featuresetSelectors[O];if(!Z){this.fire(new n.y(new Error(`The featureset '${O}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const X of Z){const ae=q.getOwnLayer(X.layerId);ae&&!Zl.has(ae.type)&&S(ae,q.getOwnLayerSourceCache(ae),L,X)}}else if("layerId"in L.target){const{layerId:O}=L.target,U=this.getLayer(O);if(!U||Zl.has(U.type))continue;S(U,this.getLayerSourceCache(U),L)}const D=this._queryRenderedFeatures(a,v,m);return this._flattenAndSortRenderedFeatures(D)}_queryRenderedFeatures(a,o,m){const v=[],S=!!this.map._showQueryGeometry,D=hi.createFromScreenPoints(a,m);for(const L in o){const O=h0(D,o[L],this._availableImages,m,S);Object.keys(O).length&&v.push(O)}if(this.placement)for(const L in o){if(!o[L].sourceCache._onlySymbols)continue;const O=Du(D.screenGeometry,o[L],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData);Object.keys(O).length&&v.push(O)}return v}querySourceFeatures(a,o){const m=o&&o.filter;m&&this._validate(Fe,"querySourceFeatures.filter",m,null,o);let v=[];const S=this.getOwnSourceCaches(a);for(const D of S)v=v.concat(_d(D,o));return v}addSourceType(a,o,m){return ks.getSourceType(a)?m(new Error(`A source type called "${a}" already exists.`)):(ks.setSourceType(a,o),o.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:o.workerSourceURL},m):m(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(a,o,m={}){this._checkLoaded();const v=this.light.getLight();let S=!1;for(const L in a)if(!n.bn(a[L],v[L])){S=!0;break}if(!S)return;const D=this._getTransitionParameters();this.light.setLight(a,o,m),this.light.updateTransitions(D)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=n.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&n.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(a,o=1){if(this._checkLoaded(),!a)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),o===0&&delete this.terrain,a===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let m=a;const v=a.source==null;if(o===1){if(this.disableElevatedTerrain)return;if(typeof m.source=="object"){const L="terrain-dem-src";this.addSource(L,m.source),m=n.cp(m),m=n.l(m,{source:L})}const S=n.l({},m),D={};if(this.terrain&&v){S.source=this.terrain.get().source;const L=this.terrain?this.getFragmentStyle(this.terrain.scope):null;L&&(D.style=L.serialize())}if(this._validate(qn,"terrain",S,D))return}if(!this.terrain||this.terrain.scope!==this.scope&&!v||this.terrain&&o!==this.terrain.drapeRenderMode){if(!m)return;this._createTerrain(m,o),this.fire(new n.z("data",{dataType:"style"}))}else{const S=this.terrain,D=S.get();for(const L of Object.keys(n.a3.terrain))!m.hasOwnProperty(L)&&n.a3.terrain[L].default&&(m[L]=n.a3.terrain[L].default);for(const L in a)if(!n.bn(a[L],D[L])){S.set(a,this.options),this.stylesheet.terrain=a;const O=this._getTransitionParameters({duration:0});S.updateTransitions(O),this.fire(new n.z("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(a){const o=this.fog=new Xa(a,this.map.transform,this.scope,this.options);this.stylesheet.fog=o.get();const m=this._getTransitionParameters({duration:0});o.updateTransitions(m)}_createSnow(a){const o=this.snow=new ei(a,this.map.transform,this.scope,this.options);this.stylesheet.snow=o.get();const m=this._getTransitionParameters({duration:0});o.updateTransitions(m)}_createRain(a){const o=this.rain=new _s(a,this.map.transform,this.scope,this.options);this.stylesheet.rain=o.get();const m=this._getTransitionParameters({duration:0});o.updateTransitions(m)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const a of this.map._markers)a._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(a){if(this._checkLoaded(),!a)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const o=this.fog;if(!n.bn(o.get(),a)){o.set(a,this.options),this.stylesheet.fog=o.get();const m=this._getTransitionParameters({duration:0});o.updateTransitions(m)}}else this._createFog(a);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(a){if(this._checkLoaded(),!a)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const o=this.snow;if(!n.bn(o.get(),a)){o.set(a,this.options),this.stylesheet.snow=o.get();const m=this._getTransitionParameters({duration:0});o.updateTransitions(m)}}else this._createSnow(a);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(a){if(this._checkLoaded(),!a)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const o=this.rain;if(!n.bn(o.get(),a)){o.set(a,this.options),this.stylesheet.rain=o.get();const m=this._getTransitionParameters({duration:0});o.updateTransitions(m)}}else this._createRain(a);this._markersNeedUpdate=!0}_reloadColorTheme(){const a=()=>{for(const v in this._layers)this._layers[v].lut=this._styleColorTheme.lut;for(const v in this._sourceCaches)this._sourceCaches[v].clearTiles()},o=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!o)return this._styleColorTheme.lut=null,void a();const m=this._evaluateColorThemeData(o);this._loadColorTheme(m).then(()=>{this.fire(new n.z("colorthemeset")),a()}).catch(v=>{n.w(`Couldn't set color theme: ${v}`)})}setColorTheme(a){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&n.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=a,this._reloadColorTheme()}setImportColorTheme(a,o){const m=this.getFragmentStyle(a);m&&(m._styleColorTheme.colorThemeOverride=o,m._reloadColorTheme())}_getTransitionParameters(a){return{now:n.q.now(),transition:n.l(this.transition,a)}}updateDrapeFirstLayers(){if(!this.terrain)return;const a=[],o=[];for(const m of this._mergedOrder)this.isLayerDraped(this._mergedLayers[m])?a.push(m):o.push(m);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...a),this._drapedFirstOrder.push(...o)}_createTerrain(a,o){const m=this.terrain=new It(a,o,this.scope,this.options);o===1&&(this.stylesheet.terrain=a),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const v=this._getTransitionParameters({duration:0});m.updateTransitions(v)}_force3DLayerUpdate(){for(const a in this._layers){const o=this._layers[a];o.type==="fill-extrusion"&&this._updateLayer(o)}}_forceSymbolLayerUpdate(){for(const a in this._layers){const o=this._layers[a];o.type==="symbol"&&this._updateLayer(o)}}_validate(a,o,m,v,S={}){if(S&&S.validate===!1)return!1;const D=n.l({},this.serialize());return el(this,a.call(la,n.l({key:o,style:D,value:m,styleSpec:n.a3},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.cx.off("pluginStateChange",this._rtlTextPluginCallback);for(const a in this._mergedLayers)this._mergedLayers[a].setEventedParent(null);for(const a in this._mergedSourceCaches)this._mergedSourceCaches[a].clearTiles(),this._mergedSourceCaches[a].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(a){const o=this.getSourceCaches(a);for(const m of o)m.clearTiles()}clearSources(){for(const a in this._mergedSourceCaches)this._mergedSourceCaches[a].clearTiles()}reloadSource(a){const o=this.getSourceCaches(a);for(const m of o)m.resume(),m.reload()}reloadSources(){for(const a of this.getSources())a.reload&&a.reload()}updateSources(a){let o;this.directionalLight&&(o=ki(this.directionalLight));for(const m in this._mergedSourceCaches)this._mergedSourceCaches[m].update(a,void 0,void 0,o)}_generateCollisionBoxes(){for(const a in this._sourceCaches){const o=this._sourceCaches[a];o.resume(),o.reload()}}_updatePlacement(a,o,m,v,S,D,L=!1){let O=!1,U=!1;const q={},Z={};for(const X of this._mergedOrder){const ae=this._mergedLayers[X];if(ae.type!=="symbol")continue;const me=n.aC(ae.source,ae.scope);let he=q[me];if(!he){const _e=this.getLayerSourceCache(ae);if(!_e)continue;const Me=_e.getRenderableIds(!0).map(Be=>_e.getTileByID(Be));Z[me]=Me.slice(),he=q[me]=Me.sort((Be,Oe)=>Oe.tileID.overscaledZ-Be.tileID.overscaledZ||(Be.tileID.isLessThan(Oe.tileID)?-1:1))}const xe=this.crossTileSymbolIndex.addLayer(ae,he,o.center.lng,o.projection);O=O||xe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),L=L||this._layerOrderChanged||v===0,this._layerOrderChanged&&this.fire(new n.z("neworder")),(L||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.q.now(),o.zoom))&&(this.pauseablePlacement=new Ed(o,this._mergedOrder,L,m,v,S,this.placement,this.fog&&o.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,q,Z,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.q.now()),U=!0),O&&this.pauseablePlacement.placement.setStale()),U||O){this._buildingIndex.onNewFrame(o.zoom);for(let X=0;X<this._mergedOrder.length;X++){const ae=this._mergedLayers[this._mergedOrder[X]];if(ae.type!=="symbol")continue;const me=this.isLayerClipped(ae);this.placement.updateLayerOpacities(ae,q[n.aC(ae.source,ae.scope)],X,me?D:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.q.now())}}_releaseSymbolFadeTiles(){for(const a in this._sourceCaches)this._sourceCaches[a].releaseSymbolFadeTiles()}addImport(a,o){this._checkLoaded();const m=this.stylesheet.imports=this.stylesheet.imports||[];if(m.findIndex(({id:S})=>S===a.id)!==-1)return void this.fire(new n.y(new Error(`Import with id '${a.id}' already exists in the map's style.`)));if(!o)return m.push(a),this._loadImports([a],!0);const v=m.findIndex(({id:S})=>S===o);return v===-1&&this.fire(new n.y(new Error(`Import with id "${o}" does not exist on this map.`))),this.stylesheet.imports=m.slice(0,v).concat(a).concat(m.slice(v)),this._loadImports([a],!0,o)}updateImport(a,o){this._checkLoaded();const m=this.stylesheet.imports||[],v=this.getImportIndex(a);return v===-1?this:typeof o=="string"?(this.setImportUrl(a,o),this):(o.url&&o.url!==m[v].url&&this.setImportUrl(a,o.url),n.bn(o.config,m[v].config)||this.setImportConfig(a,o.config),n.bn(o.data,m[v].data)||this.setImportData(a,o.data),this)}moveImport(a,o){this._checkLoaded();let m=this.stylesheet.imports||[];const v=this.getImportIndex(a);if(v===-1)return this;const S=this.getImportIndex(o);if(S===-1)return this;const D=m[v],L=this.fragments[v];return m=m.filter(({id:O})=>O!==a),this.fragments=this.fragments.filter(({id:O})=>O!==a),this.stylesheet.imports=m.slice(0,S).concat(D).concat(m.slice(S)),this.fragments=this.fragments.slice(0,S).concat(L).concat(this.fragments.slice(S)),this.mergeLayers(),this}setImportUrl(a,o){this._checkLoaded();const m=this.stylesheet.imports||[],v=this.getImportIndex(a);if(v===-1)return this;m[v].url=o;const S=this.fragments[v];return S.style=this._createFragmentStyle(m[v]),S.style.on("style.import.load",()=>this.mergeAll()),S.style.loadURL(o),this}setImportData(a,o){this._checkLoaded();const m=this.getImportIndex(a),v=this.stylesheet.imports||[];return m===-1?this:o?(this.fragments[m].style.setState(o),this._reloadImports(),this):(delete v[m].data,this.setImportUrl(a,v[m].url))}setImportConfig(a,o){this._checkLoaded();const m=this.getImportIndex(a),v=this.stylesheet.imports||[];if(m===-1)return this;o?v[m].config=o:delete v[m].config;const S=this.fragments[m],D=S.style.stylesheet&&S.style.stylesheet.schema;return S.config=o,S.style.updateConfig(o,D),this.updateConfigDependencies(),this}removeImport(a){this._checkLoaded();const o=this.stylesheet.imports||[],m=this.getImportIndex(a);m!==-1&&(o.splice(m,1),this.fragments[m].style._remove(),this.fragments.splice(m,1),this._reloadImports())}getImportIndex(a){const o=(this.stylesheet.imports||[]).findIndex(m=>m.id===a);return o===-1&&this.fire(new n.y(new Error(`Import '${a}' does not exist in the map's style and cannot be updated.`))),o}getLayer(a){return this._mergedLayers[a]}getSources(){const a=[];for(const o in this._mergedOtherSourceCaches){const m=this._mergedOtherSourceCaches[o];m&&a.push(m.getSource())}return a}getSource(a,o){const m=this.getSourceCache(a,o);return m&&m.getSource()}getLayerSource(a){const o=this.getLayerSourceCache(a);return o&&o.getSource()}getSourceCache(a,o){const m=n.aC(a,o);return this._mergedOtherSourceCaches[m]}getLayerSourceCache(a){const o=n.aC(a.source,a.scope);return a.type==="symbol"?this._mergedSymbolSourceCaches[o]:this._mergedOtherSourceCaches[o]}getSourceCaches(a){if(a==null)return Object.values(this._mergedSourceCaches);const o=[];return this._mergedOtherSourceCaches[a]&&o.push(this._mergedOtherSourceCaches[a]),this._mergedSymbolSourceCaches[a]&&o.push(this._mergedSymbolSourceCaches[a]),o}updateSourceCaches(){const a=this._changes.getUpdatedSourceCaches();for(const o in a){const m=a[o];m==="reload"?this.reloadSource(o):m==="clear"&&this.clearSource(o)}}updateLayers(a){const o=this._changes.getUpdatedPaintProperties();for(const m of o){const v=this.getLayer(m);v&&v.updateTransitions(a)}}getImages(a,o,m){this.imageManager.getImages(o.icons,o.scope,m),this._updateTilesForChangedImages();const v=S=>{S&&S.setDependencies(o.tileID.key,o.type,o.icons)};v(this._otherSourceCaches[o.source]),v(this._symbolSourceCaches[o.source])}rasterizeImages(a,o,m){this.imageManager.rasterizeImages(o,m)}getGlyphs(a,o,m){this.glyphManager.getGlyphs(o.stacks,o.scope,m)}getResource(a,o,m){return n.cy(o,m)}getOwnSourceCache(a){return this._otherSourceCaches[a]}getOwnLayerSourceCache(a){return a.type==="symbol"?this._symbolSourceCaches[a.source]:this._otherSourceCaches[a.source]}getOwnSourceCaches(a){const o=[];return this._otherSourceCaches[a]&&o.push(this._otherSourceCaches[a]),this._symbolSourceCaches[a]&&o.push(this._symbolSourceCaches[a]),o}_isSourceCacheLoaded(a){const o=this.getOwnSourceCaches(a);return o.length===0?(this.fire(new n.y(new Error(`There is no source with ID '${a}'`))),!1):o.every(m=>m.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(a,o){if(!this._clipLayerPresent&&a.type!=="fill-extrusion")return!1;const m=a.type==="fill-extrusion"&&a.sourceLayer==="building";if(a.is3D()){if(m||o&&o.type==="batched-model"||a.type==="model")return!0}else if(a.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(a=>{a.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ks.getSourceType=function(p){return Wi[p]},ks.setSourceType=function(p,a){Wi[p]=a},ks.registerForPluginStateChange=n.ch;var Bc=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,ip=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,Ih=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,kd="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",sp=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,jc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,op=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,lp=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Oc=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,Fc=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,Rs=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz/=light_view_pos0.w;vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Vc=[];Po(Bc,Vc),Po(Ih,Vc),Po(ip,Vc);const Ri={"_prelude_fog.vertex.glsl":jc,"_prelude_terrain.vertex.glsl":sp,"_prelude_shadow.vertex.glsl":Fc,"_prelude_fog.fragment.glsl":op,"_prelude_shadow.fragment.glsl":Rs,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":lp,"_prelude_raster_particle.glsl":Oc},Zi={};_a("",sp),_a(op,jc),_a(Rs,Fc),_a(lp,""),_a(Oc,"");const Xl=_a(ip,Ih),zh=Bc;var ju={background:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float opacity_t=smoothstep((1.0-blur_positive)*antialiased_blur,blur_positive*antialiased_blur,extrude_length-1.0)-smoothstep(0.0,antialiasblur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:_a("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:_a(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:_a(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:_a("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:_a("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:_a("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:_a(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:_a(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:_a(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:_a(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec2 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
halfwidth=(u_width_scale*a_z_offset_width.y)/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec2 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:_a("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:_a("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:_a(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:_a(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#endif
}`),terrainRaster:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:_a("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:_a(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,kd),skyboxGradient:_a(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,kd),skyboxCapture:_a(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:_a(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:_a(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:_a(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:_a(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:_a("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:_a("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:_a("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:_a("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function Po(p,a){const o=p.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let m of o)if(m=m.trim(),m[0]==="#"&&m.includes("if")&&!m.includes("endif")){m=m.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const v=m.split(" ");for(const S of v)a.includes(S)||a.push(S)}}function _a(p,a){const o=/#include\s+"([^"]+)"/g,m=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let v=a.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);v&&(v=v.map(U=>{const q=U.split(" ");return q[q.length-1]}),v=[...new Set(v)]);const S={},D=[],L=[];if(p=p.replace(o,(U,q)=>(L.push(q),"")),(a=a.replace(o,(U,q)=>(D.push(q),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let O=[...Vc];Po(p,O),Po(a,O);for(const U of[...D,...L])Ri[U]||console.error(`Undefined include: ${U}`),Zi[U]||(Zi[U]=[],Po(Ri[U],Zi[U])),O=[...O,...Zi[U]];return{fragmentSource:p=p.replace(m,(U,q,Z,X,ae)=>(S[ae]=!0,q==="define"?`
#ifndef HAS_UNIFORM_u_${ae}
in ${Z} ${X} ${ae};
#else
uniform ${Z} ${X} u_${ae};
#endif
`:q==="initialize"?`
#ifdef HAS_UNIFORM_u_${ae}
    ${Z} ${X} ${ae} = u_${ae};
#endif
`:q==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ae}
    in ${Z} ${X} ${ae};
#endif
`:q==="initialize-attribute"?"":void 0)),vertexSource:a=a.replace(m,(U,q,Z,X,ae)=>{const me=X==="float"?"vec2":X,he=ae.match(/color/)?"color":me;return q==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${ae}
in ${Z} ${X} a_${ae};
#endif
`:S[ae]?q==="define"?`
#ifndef HAS_UNIFORM_u_${ae}
uniform lowp float u_${ae}_t;
in ${Z} ${me} a_${ae};
out ${Z} ${X} ${ae};
#else
uniform ${Z} ${X} u_${ae};
#endif
`:q==="initialize"?he==="vec4"?`
#ifndef HAS_UNIFORM_u_${ae}
    ${ae} = a_${ae};
#else
    ${Z} ${X} ${ae} = u_${ae};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ae}
    ${ae} = unpack_mix_${he}(a_${ae}, u_${ae}_t);
#else
    ${Z} ${X} ${ae} = u_${ae};
#endif
`:q==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ae}
    in ${Z} ${X} a_${ae};
    out ${Z} ${X} ${ae};
#endif
`:q==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ae}
    ${ae} = a_${ae};
#endif
`:void 0:q==="define"?`
#ifndef HAS_UNIFORM_u_${ae}
uniform lowp float u_${ae}_t;
in ${Z} ${me} a_${ae};
#else
uniform ${Z} ${X} u_${ae};
#endif
`:q==="define-instanced"?he==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${ae}0;
in vec4 a_${ae}1;
in vec4 a_${ae}2;
in vec4 a_${ae}3;
#else
uniform ${Z} ${X} u_${ae};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${Z} ${me} a_${ae};
#else
uniform ${Z} ${X} u_${ae};
#endif
`:q==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${ae}
    ${Z} ${X} ${ae} = a_${ae};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${ae}
    ${Z} ${X} ${ae} = a_${ae};
#else
    ${Z} ${X} ${ae} = u_${ae};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ae}
    ${Z} ${X} ${ae} = unpack_mix_${he}(a_${ae}, u_${ae}_t);
#else
    ${Z} ${X} ${ae} = u_${ae};
#endif
`}),staticAttributes:v,usedDefines:O,vertexIncludes:D,fragmentIncludes:L}}class Ou{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(a,o,m,v,S,D,L,O){this.context=a;let U=this.boundPaintVertexBuffers.length!==v.length;for(let Z=0;!U&&Z<v.length;Z++)this.boundPaintVertexBuffers[Z]!==v[Z]&&(U=!0);let q=this.boundDynamicVertexBuffers.length!==L.length;for(let Z=0;!q&&Z<L.length;Z++)this.boundDynamicVertexBuffers[Z]!==L[Z]&&(q=!0);if(!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==m||U||q||this.boundIndexBuffer!==S||this.boundVertexOffset!==D)this.freshBind(o,m,v,S,D,L,O);else{a.bindVertexArrayOES.set(this.vao);for(const Z of L)Z&&(Z.bind(),O&&Z.instanceCount&&Z.setVertexAttribDivisor(a.gl,o,O));S&&S.dynamicDraw&&S.bind()}}freshBind(a,o,m,v,S,D,L){const O=a.numAttributes,U=this.context,q=U.gl;this.vao&&this.destroy(),this.vao=U.gl.createVertexArray(),U.bindVertexArrayOES.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=S,this.boundDynamicVertexBuffers=D,o.enableAttributes(q,a),o.bind(),o.setVertexAttribPointers(q,a,S);for(const Z of m)Z.enableAttributes(q,a),Z.bind(),Z.setVertexAttribPointers(q,a,S);for(const Z of D)Z&&(Z.enableAttributes(q,a),Z.bind(),Z.setVertexAttribPointers(q,a,S),L&&Z.instanceCount&&Z.setVertexAttribDivisor(q,a,L));v&&v.bind(),U.currentNumAttributes=O}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Bm(p,a){const o=Math.pow(2,a.canonical.z),m=a.canonical.y;return[new n.aa(0,m/o).toLngLat().lat,new n.aa(0,(m+1)/o).toLngLat().lat]}function Lh(p,a,o,m,v,S,D){const L=p.context,O=L.gl,U=o.hillshadeFBO;if(!U)return;p.prepareDrawTile();const q=p.isTileAffectedByFog(a),Z=p.getOrCreateProgram("hillshade",{overrideFog:q});L.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,U.colorAttachment.get());const X=((xe,_e,Me,Be)=>{const Oe=Me.paint.get("hillshade-shadow-color"),Ze=Me.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",Ue=Me.paint.get("hillshade-highlight-color"),We=Me.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",qe=Me.paint.get("hillshade-accent-color"),tt=Me.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",rt=Me.paint.get("hillshade-emissive-strength");let Et=n.ai(Me.paint.get("hillshade-illumination-direction"));if(Me.paint.get("hillshade-illumination-anchor")==="viewport")Et-=xe.transform.angle;else if(xe.style&&xe.style.enable3dLights()&&xe.style.directionalLight){const st=xe.style.directionalLight.properties.get("direction"),mt=n.cb(st.x,st.y,st.z);Et=n.ai(mt[1])}const _t=!xe.options.moving;return{u_matrix:Be||xe.transform.calculateProjMatrix(_e.tileID.toUnwrapped(),_t),u_image:0,u_latrange:Bm(0,_e.tileID),u_light:[Me.paint.get("hillshade-exaggeration"),Et],u_shadow:Oe.toRenderColor(Ze?null:Me.lut),u_highlight:Ue.toRenderColor(We?null:Me.lut),u_emissive_strength:rt,u_accent:qe.toRenderColor(tt?null:Me.lut)}})(p,o,m,p.terrain?a.projMatrix:null);p.uploadCommonUniforms(L,Z,a.toUnwrapped());const{tileBoundsBuffer:ae,tileBoundsIndexBuffer:me,tileBoundsSegments:he}=p.getTileBoundsBuffers(o);Z.draw(p,O.TRIANGLES,v,S,D,Gr.disabled,X,m.id,ae,me,he)}function Mo(p,a,o){if(!a.needsDEMTextureUpload)return;const m=p.context,v=m.gl;m.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||p.getTileTexture(o.stride);const S=o.getPixels();a.demTexture?a.demTexture.update(S,{premultiply:!1}):a.demTexture=new n.T(m,S,v.R32F,{premultiply:!1}),a.needsDEMTextureUpload=!1}function S0(p,a,o){const m=p.context,v=m.gl;if(!a.dem)return;const S=a.dem;if(m.activeTexture.set(v.TEXTURE1),Mo(p,a,S),!a.demTexture)return;a.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE);const D=S.dim;m.activeTexture.set(v.TEXTURE0);let L=a.hillshadeFBO;if(!L){const X=new n.T(m,{width:D,height:D,data:null},v.RGBA8);X.bind(v.LINEAR,v.CLAMP_TO_EDGE),L=a.hillshadeFBO=m.createFramebuffer(D,D,!0,"renderbuffer"),L.colorAttachment.set(X.texture)}m.bindFramebuffer.set(L.framebuffer),m.viewport.set([0,0,D,D]);const{tileBoundsBuffer:O,tileBoundsIndexBuffer:U,tileBoundsSegments:q}=p.getMercatorTileBoundsBuffers(),Z=[];p.linearFloatFilteringSupported()&&Z.push("TERRAIN_DEM_FLOAT_FORMAT"),p.getOrCreateProgram("hillshadePrepare",{defines:Z}).draw(p,v.TRIANGLES,Rr.disabled,ea.disabled,ua.unblended,Gr.disabled,((X,ae)=>{const me=ae.stride,he=n.ab.mat4.create();return n.ab.mat4.ortho(he,0,n.ag,-n.ag,0,0,1),n.ab.mat4.translate(he,he,[0,-n.ag,0]),{u_matrix:he,u_image:1,u_dimension:[me,me],u_zoom:X.overscaledZ}})(a.tileID,S),o.id,O,U,q),a.needsHillshadePrepare=!1}class Va{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class jm extends Va{getDefault(){return n.aj.transparent}set(a){const o=this.current;(a.r!==o.r||a.g!==o.g||a.b!==o.b||a.a!==o.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Yl extends Va{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class cp extends Va{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Rd extends Va{getDefault(){return[!0,!0,!0,!0]}set(a){const o=this.current;(a[0]!==o[0]||a[1]!==o[1]||a[2]!==o[2]||a[3]!==o[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Jl extends Va{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class $h extends Va{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class up extends Va{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const o=this.current;(a.func!==o.func||a.ref!==o.ref||a.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Fu extends Va{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const o=this.current;(a[0]!==o[0]||a[1]!==o[1]||a[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Id extends Va{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const o=this.gl;a?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=a,this.dirty=!1}}class Uc extends Va{getDefault(){return[0,1]}set(a){const o=this.current;(a[0]!==o[0]||a[1]!==o[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class Gc extends Va{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const o=this.gl;a?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=a,this.dirty=!1}}class ro extends Va{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class Yn extends Va{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const o=this.gl;a?o.enable(o.BLEND):o.disable(o.BLEND),this.current=a,this.dirty=!1}}class Ql extends Va{getDefault(){const a=this.gl;return[a.ONE,a.ZERO,a.ONE,a.ZERO]}set(a){const o=this.current;(a[0]!==o[0]||a[1]!==o[1]||a[2]!==o[2]||a[3]!==o[3]||this.dirty)&&(this.gl.blendFuncSeparate(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Ao extends Va{getDefault(){return n.aj.transparent}set(a){const o=this.current;(a.r!==o.r||a.g!==o.g||a.b!==o.b||a.a!==o.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class ko extends Va{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(a,a),this.current=a,this.dirty=!1)}}class ec extends Va{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const o=this.gl;a?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=a,this.dirty=!1}}class dp extends Va{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class zd extends Va{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}let Nh=class extends Va{getDefault(){return null}set(p){(p!==this.current||this.dirty)&&(this.gl.useProgram(p),this.current=p,this.dirty=!1)}};class ns extends Va{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class Jn extends Va{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const o=this.current;(a[0]!==o[0]||a[1]!==o[1]||a[2]!==o[2]||a[3]!==o[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Tn extends Va{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class Hc extends Va{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Is extends Va{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Om extends Va{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Vu extends Va{getDefault(){return null}set(a){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class T0 extends Va{getDefault(){return null}set(a){this.gl&&(a!==this.current||this.dirty)&&(this.gl.bindVertexArray(a),this.current=a,this.dirty=!1)}}class E0 extends Va{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class Bh extends Va{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class jh extends Va{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Ld extends Va{constructor(a,o){super(a),this.context=a,this.parent=o}getDefault(){return null}}class Uu extends Ld{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Oh extends Ld{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,this.attachment(),o.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Ro extends Ld{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,this.attachment(),o.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Sl extends Oh{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const tc=(p,a,o)=>({u_matrix:p,u_image0:0,u_skirt_height:a,u_ground_shadow_factor:o}),tl=(p,a,o,m,v,S,D,L,O,U,q,Z,X,ae,me,he)=>({u_proj_matrix:Float32Array.from(p),u_globe_matrix:a,u_normalize_matrix:Float32Array.from(m),u_merc_matrix:o,u_zoom_transition:v,u_merc_center:S,u_image0:0,u_frustum_tl:D,u_frustum_tr:L,u_frustum_br:O,u_frustum_bl:U,u_globe_pos:q,u_globe_radius:Z,u_viewport:X,u_grid_matrix:he?Float32Array.from(he):new Float32Array(9),u_skirt_height:ae,u_far_z_cutoff:me});function $d(p,a){return p!=null&&a!=null&&!(!p.hasData()||!a.hasData())&&p.demTexture!=null&&a.demTexture!=null&&p.tileID.key!==a.tileID.key}const Gs=new class{constructor(){this.operations={}}newMorphing(p,a,o,m,v){if(p in this.operations){const S=this.operations[p];S.to.tileID.key!==o.tileID.key&&(S.queued=o)}else this.operations[p]={startTime:m,phase:0,duration:v,from:a,to:o,queued:null}}getMorphValuesForProxy(p){if(!(p in this.operations))return null;const a=this.operations[p];return{from:a.from,to:a.to,phase:a.phase}}update(p){for(const a in this.operations){const o=this.operations[a];for(o.phase=(p-o.startTime)/o.duration;o.phase>=1||!this._validOp(o);)if(!this._nextOp(o,p)){delete this.operations[a];break}}}_nextOp(p,a){return!!p.queued&&(p.from=p.to,p.to=p.queued,p.queued=null,p.phase=0,p.startTime=a,!0)}_validOp(p){return p.from.hasData()&&p.to.hasData()}},Gu={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Io(p,a,o){if(a===0)return 0;const m=a<1&&o===514?.25/a:1;return 6*Math.pow(1.5,22-p)*Math.max(a,1)*m}function rc(p,a){const o=1<<p.z;return!a&&(p.x===0||p.x===o-1)||p.y===0||p.y===o-1}const xi=p=>({u_matrix:p});function Hu(p,a,o,m,v){if(v>0){const S=n.q.now(),D=(S-p.timeAdded)/v,L=a?(S-a.timeAdded)/v:-1,O=o.getSource(),U=m.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),q=!a||Math.abs(a.tileID.overscaledZ-U)>Math.abs(p.tileID.overscaledZ-U),Z=q&&p.refreshedUponExpiration?1:n.aw(q?D:1-L,0,1);return p.refreshedUponExpiration&&D>=1&&(p.refreshedUponExpiration=!1),a?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}class Fm extends To{constructor(a){const o={type:"raster-dem",maxzoom:a.transform.maxZoom},m=new n.D(n.ci(),null),v=qf("mock-dem",o,m,a.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(a,o){a.state="loaded",o(null)}}class Vm extends To{constructor(a){const o=qf("proxy",{type:"geojson",maxzoom:a.transform.maxZoom},new n.D(n.ci(),null),a.style);super("proxy",o,!1),o.setEventedParent(this),this.map=this.getSource().map=a,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(a,o,m){if(a.freezeTileCoverage)return;this.transform=a;const v=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((S,D)=>{if(S[D.key]="",!this._tiles[D.key]){const L=new kc(D,this._source.tileSize*D.overscaleFactor(),a.tileZoom);L.state="loaded",this._tiles[D.key]=L}return S},{});for(const S in this._tiles)S in v||(this.freeFBO(S),this._tiles[S].unloadVectorData(),delete this._tiles[S])}freeFBO(a){const o=this.proxyCachedFBO[a];if(o!==void 0){const m=Object.values(o);this.renderCachePool.push(...m),delete this.proxyCachedFBO[a]}}deallocRenderCache(){this.renderCache.forEach(a=>a.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class hp extends n.aG{constructor(a,o,m){super(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,a.canonical.y),this.proxyTileKey=o,this.projMatrix=m}}class C0 extends n.cJ{constructor(a,o){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},a.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),a.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),a.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=a,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[m,v,S]=function(O){const U=new n.b4,q=new n.aU,Z=131;U.reserve(17161),q.reserve(33800);const X=n.ag/128,ae=n.ag+X/2,me=ae+X;for(let xe=-X;xe<me;xe+=X)for(let _e=-X;_e<me;_e+=X){const Me=_e<0||_e>ae||xe<0||xe>ae?24575:0,Be=n.aw(Math.round(_e),0,n.ag),Oe=n.aw(Math.round(xe),0,n.ag);U.emplaceBack(Be+Me,Oe)}const he=(xe,_e)=>{const Me=_e*Z+xe;q.emplaceBack(Me+1,Me,Me+Z),q.emplaceBack(Me+Z,Me+Z+1,Me+1)};for(let xe=1;xe<129;xe++)for(let _e=1;_e<129;_e++)he(_e,xe);return[0,129].forEach(xe=>{for(let _e=0;_e<130;_e++)he(_e,xe),he(xe,_e)}),[U,q,32768]}(),D=a.context;this.gridBuffer=D.createVertexBuffer(m,n.b6.members),this.gridIndexBuffer=D.createIndexBuffer(v),this.gridSegments=n.b7.simpleSegment(0,0,m.length,v.length),this.gridNoSkirtSegments=n.b7.simpleSegment(0,0,m.length,S),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Vm(o.map),this.orthoMatrix=n.ab.mat4.create(),n.ab.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,n.ag,0,n.ag,0,1);const L=D.gl;this._overlapStencilMode=new ea({func:L.GEQUAL,mask:255},0,255,L.KEEP,L.KEEP,L.REPLACE),this._previousZoom=a.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=o,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Fm(o.map),this._pendingGroundEffectLayers=[]}set style(a){a.on("data",this._onStyleDataEvent.bind(this)),this._style=a,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(a,o,m){if(a&&a.terrain){this._style!==a&&(this.style=a,this._evaluationZoom=void 0);const v=a.terrain.properties,S=a.terrain.drapeRenderMode===0,D=a.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=n.q.now();const L=a.terrain&&a.terrain.scope,O=v.get("source"),U=S?this._mockSourceCache:a.getSourceCache(O,L);if(!U)return void n.w(`Couldn't find terrain source "${O}".`);if(this.sourceCache=U,this._attenuationRange=a.terrain.getAttenuationRange(),this._exaggeration=D?this.calculateExaggeration(o):v.get("exaggeration"),!o.projection.requiresDraping&&D&&this._exaggeration===0)return void this._disable();this.enabled=!0;const q=()=>{this.sourceCache.used&&n.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const Z=this.getScaledDemTileSize();this.sourceCache.update(o,Z,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,q(),this._initializing=!0),q(),o.updateElevation(!0,m),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(o),this._emptyDEMTextureDirty=!0,this._previousZoom=o.zoom}else this._disable()}calculateExaggeration(a){if(this._attenuationRange&&a.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(a.zoom);const o=this._previousCameraAltitude,m=a.getFreeCameraOptions().position.z/a.pixelsPerMeter*a.worldSize;this._previousCameraAltitude=m;const v=o!=null?m-o:Number.MAX_VALUE;if(Math.abs(v)<2)return this._exaggeration;const S=a.zoom,D=this._style.terrain;if(!this._previousUpdateTimestamp)return D.getExaggeration(S);let L=S-this._previousZoom;const O=this._previousUpdateTimestamp;let U=S;this._evaluationZoom!=null&&(U=this._evaluationZoom,Math.abs(S-U)>.5&&(L=.5*(S-U+L)),L*v<0&&(U+=L)),this._evaluationZoom=U;const q=D.getExaggeration(U),Z=q===D.getExaggeration(Math.max(0,U-.1));if(Z&&Math.abs(q-this._exaggeration)<.01)return q;let X=Math.min(.1,.00375*(this._updateTimestamp-O));return(Z||q<.1||Math.abs(L)<1e-4)&&(X=Math.min(.2,4*X)),n.af(this._exaggeration,q,X)}resetTileLookupCache(a){this._findCoveringTileCache[a]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(a){a.coord&&a.dataType==="source"?this._clearRenderCacheForTile(a.sourceCacheId,a.coord):a.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const a in this._style._mergedSourceCaches)this._style._mergedSourceCaches[a].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(a=>a.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const a=2*this.proxySourceCache.getSource().tileSize;return[a,a]}set useVertexMorphing(a){this._useVertexMorphing=a}updateTileBinding(a){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const o=this.proxySourceCache,m=this.painter.transform;this._initializing&&(this._initializing=m._centerAltitude===0&&this.getAtPointOrZero(n.aa.fromLngLat(m.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=o.getIds().map(O=>{const U=o.getTileByID(O).tileID;return U.projMatrix=m.calculateProjMatrix(U.toUnwrapped()),U});(function(O,U){const q=U.transform.pointCoordinate(U.transform.getCameraPoint()),Z=new n.P(q.x,q.y);O.sort((X,ae)=>{if(ae.overscaledZ-X.overscaledZ)return ae.overscaledZ-X.overscaledZ;const me=new n.P(X.canonical.x+(1<<X.canonical.z)*X.wrap,X.canonical.y),he=new n.P(ae.canonical.x+(1<<ae.canonical.z)*ae.wrap,ae.canonical.y),xe=Z.mult(1<<X.canonical.z);return xe.x-=.5,xe.y-=.5,xe.distSqr(me)-xe.distSqr(he)})})(v,this.painter);const S=this.proxyToSource||{};this.proxyToSource={},v.forEach(O=>{this.proxyToSource[O.key]={}}),this.terrainTileForTile={};const D=this._style._mergedSourceCaches;for(const O in D){const U=D[O];if(!U.used||(U!==this.sourceCache&&this.resetTileLookupCache(U.id),this._setupProxiedCoordsForOrtho(U,a[O],S),U.usedForTerrain))continue;const q=a[O];U.getSource().reparseOverscaled&&this._assignTerrainTiles(q)}this.proxiedCoords[o.id]=v.map(O=>new hp(O,O.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(S),this.renderingToTexture=!1;const L={};this._visibleDemTiles=[];for(const O of this.proxyCoords){const U=this.terrainTileForTile[O.key];if(!U)continue;const q=U.tileID.key;q in L||(this._visibleDemTiles.push(U),L[q]=q)}}_assignTerrainTiles(a){this._initializing||a.forEach(o=>{if(this.terrainTileForTile[o.key])return;const m=this._findTileCoveringTileID(o,this.sourceCache);m&&(this.terrainTileForTile[o.key]=m)})}_prepareDEMTextures(){const a=this.painter.context,o=a.gl;for(const m in this.terrainTileForTile){const v=this.terrainTileForTile[m],S=v.dem;!S||v.demTexture&&!v.needsDEMTextureUpload||(a.activeTexture.set(o.TEXTURE1),Mo(this.painter,v,S))}}_prepareDemTileUniforms(a,o,m,v){if(!o||o.demTexture==null)return!1;const S=a.tileID.canonical,D=Math.pow(2,o.tileID.canonical.z-S.z),L=v||"";return m[`u_dem_tl${L}`]=[S.x*D%1,S.y*D%1],m[`u_dem_scale${L}`]=D,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let a=0;const o=this._visibleDemTiles.reduce((m,v)=>{if(!v.dem)return m;const S=v.dem.tree.minimums[0];return S>0&&a++,m+S},0);return a?o/a:0}_updateEmptyDEMTexture(){const a=this.painter.context,o=a.gl;a.activeTexture.set(o.TEXTURE2);const m=this._getLoadedAreaMinimum(),v=new n.cK({width:1,height:1},new Float32Array([m]));this._emptyDEMTextureDirty=!1;let S=this._emptyDEMTexture;return S?S.update(v,{premultiply:!1}):S=this._emptyDEMTexture=new n.T(a,v,o.R32F,{premultiply:!1}),S}setupElevationDraw(a,o,m){const v=this.painter.context,S=v.gl,D={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};D.u_exaggeration=this.exaggeration();let L=null,O=null,U=1;if(m&&m.morphing&&this._useVertexMorphing){const ae=m.morphing.srcDemTile,me=m.morphing.dstDemTile;U=m.morphing.phase,ae&&me&&(this._prepareDemTileUniforms(a,ae,D,"_prev")&&(O=ae),this._prepareDemTileUniforms(a,me,D)&&(L=me))}const q=ae=>ae&&ae.demTexture&&this.painter.linearFloatFilteringSupported()?S.LINEAR:S.NEAREST;let Z=null;var X;if(this.enabled?O&&L?(Z=L.demTexture,v.activeTexture.set(S.TEXTURE4),O.demTexture.bind(q(O),S.CLAMP_TO_EDGE),D.u_dem_lerp=U):(L=this.terrainTileForTile[a.tileID.key],Z=this._prepareDemTileUniforms(a,L,D)?L.demTexture:this.emptyDEMTexture):Z=this.emptyDEMTexture,v.activeTexture.set(S.TEXTURE2),Z&&(D.u_dem_size=(X=Z).size[0]===1?1:X.size[0]-2,Z.bind(q(L),S.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(m&&m.useDepthForOcclusion,o,D),m&&m.useMeterToDem&&L){const ae=(1<<L.tileID.canonical.z)*n.bH(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;D.u_meter_to_dem=ae}if(m&&m.labelPlaneMatrixInv&&(D.u_label_plane_matrix_inv=m.labelPlaneMatrixInv),o.setTerrainUniformValues(v,D),this.painter.transform.projection.name==="globe"){const ae=this.globeUniformValues(this.painter.transform,a.tileID.canonical,m&&m.useDenormalizedUpVectorScale);o.setGlobeUniformValues(v,ae)}}globeUniformValues(a,o,m){const v=a.projection;return{u_tile_tl_up:v.upVector(o,0,0),u_tile_tr_up:v.upVector(o,n.ag,0),u_tile_br_up:v.upVector(o,n.ag,n.ag),u_tile_bl_up:v.upVector(o,0,n.ag),u_tile_up_scale:m?n.cL(1):v.upVectorScale(o,a.center.lat,a.worldSize).metersToTile}}renderToBackBuffer(a){const o=this.painter,m=this.painter.context;a.length!==0&&(m.bindFramebuffer.set(null),m.viewport.set([0,0,o.width,o.height]),o.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(v,S,D,L,O){if(v.transform.projection.name==="globe")(function(U,q,Z,X,ae){const me=U.context,he=me.gl;let xe,_e;const Me=U.transform,Be=n.cC(U,me,Me),Oe=(st,mt)=>{if(_e===mt)return;const Bt=[Gu[mt],"PROJECTION_GLOBE_VIEW"];Be&&Bt.push("CUSTOM_ANTIALIASING");const qt=U.isTileAffectedByFog(st);xe=U.getOrCreateProgram("globeRaster",{defines:Bt,overrideFog:qt}),_e=mt},Ze=U.colorModeForRenderPass(),Ue=new Rr(he.LEQUAL,Rr.ReadWrite,U.depthRangeFor3D);Gs.update(ae);const We=n.cD(Me),qe=[n.at(Me.center.lng),n.aA(Me.center.lat)],tt=U.globeSharedBuffers,rt=[Me.width*n.q.devicePixelRatio,Me.height*n.q.devicePixelRatio],Et=Float32Array.from(Me.globeMatrix),_t={useDenormalizedUpVectorScale:!0};{const st=U.transform,mt=Io(st.zoom,q.exaggeration(),q.sourceCache._source.tileSize);_e=-1;const Bt=he.TRIANGLES;for(const qt of X){const Kt=Z.getTile(qt),xt=ea.disabled,Ft=q.prevTerrainTileForTile[qt.key],Mt=q.terrainTileForTile[qt.key];$d(Ft,Mt)&&Gs.newMorphing(qt.key,Ft,Mt,ae,250),me.activeTexture.set(he.TEXTURE0),Kt.texture&&Kt.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE);const Qt=Gs.getMorphValuesForProxy(qt.key),Ot=Qt?1:0;Qt&&n.J(_t,{morphing:{srcDemTile:Qt.from,dstDemTile:Qt.to,phase:n.cB(Qt.phase)}});const zt=n.cE(qt.canonical),dr=n.cF(zt.getCenter().lat),rr=n.cG(qt.canonical,zt,dr,st.worldSize/st._pixelsPerMercatorPixel),yr=n.bb(n.cH(qt.canonical)),_r=tl(st.expandedFarZProjMatrix,Et,We,yr,n.ae(st.zoom),qe,st.frustumCorners.TL,st.frustumCorners.TR,st.frustumCorners.BR,st.frustumCorners.BL,st.globeCenterInViewSpace,st.globeRadius,rt,mt,st._farZ,rr);if(Oe(qt,Ot),xe&&(q.setupElevationDraw(Kt,xe,_t),U.uploadCommonUniforms(me,xe,qt.toUnwrapped()),tt)){const[Kr,Ar,zr]=tt.getGridBuffers(dr,mt!==0);xe.draw(U,Bt,Ue,xt,Ze,Gr.backCCW,_r,"globe_raster",Kr,Ar,zr)}}}if(tt&&(U.renderDefaultNorthPole||U.renderDefaultSouthPole)){const st=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Be&&st.push("CUSTOM_ANTIALIASING"),xe=U.getOrCreateProgram("globeRaster",{defines:st});for(const mt of X){const{x:Bt,y:qt,z:Kt}=mt.canonical,xt=qt===0,Ft=qt===(1<<Kt)-1,[Mt,Qt,Ot,zt]=tt.getPoleBuffers(Kt,!1);if(zt&&(xt||Ft)){const dr=Z.getTile(mt);me.activeTexture.set(he.TEXTURE0),dr.texture&&dr.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE);let rr=n.cI(Kt,Bt,Me);const yr=n.bb(n.cH(mt.canonical)),_r=(Kr,Ar)=>Kr.draw(U,he.TRIANGLES,Ue,ea.disabled,Ze,Gr.disabled,tl(Me.expandedFarZProjMatrix,rr,rr,yr,0,qe,Me.frustumCorners.TL,Me.frustumCorners.TR,Me.frustumCorners.BR,Me.frustumCorners.BL,Me.globeCenterInViewSpace,Me.globeRadius,rt,0,Me._farZ),"globe_pole_raster",Ar,Ot,zt);q.setupElevationDraw(dr,xe,_t),U.uploadCommonUniforms(me,xe,mt.toUnwrapped()),xt&&U.renderDefaultNorthPole&&_r(xe,Mt),Ft&&U.renderDefaultSouthPole&&(rr=n.ab.mat4.scale(n.ab.mat4.create(),rr,[1,-1,1]),_r(xe,Qt))}}}})(v,S,D,L,O);else{const U=v.context,q=U.gl;let Z,X;const ae=v.shadowRenderer,me=bl(v,v.longestCutoffRange),he=Ze=>{if(X===Ze)return;const Ue=[];Ue.push(Gu[Ze]),me.shouldRenderCutoff&&Ue.push("RENDER_CUTOFF"),ae&&(Ue.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ae.useNormalOffset&&Ue.push("NORMAL_OFFSET")),Z=v.getOrCreateProgram("terrainRaster",{defines:Ue}),X=Ze},xe=v.colorModeForRenderPass(),_e=new Rr(q.LEQUAL,Rr.ReadWrite,v.depthRangeFor3D);Gs.update(O);const Me=v.transform,Be=Io(Me.zoom,S.exaggeration(),S.sourceCache._source.tileSize);let Oe=[0,0,0];if(ae){const Ze=v.style.directionalLight,Ue=v.style.ambientLight;Ze&&Ue&&(Oe=wl(v.style,Ze,Ue))}{X=-1;const Ze=q.TRIANGLES,[Ue,We]=[S.gridIndexBuffer,S.gridSegments];for(const qe of L){const tt=D.getTile(qe),rt=ea.disabled,Et=S.prevTerrainTileForTile[qe.key],_t=S.terrainTileForTile[qe.key];$d(Et,_t)&&Gs.newMorphing(qe.key,Et,_t,O,250),U.activeTexture.set(q.TEXTURE0),tt.texture&&tt.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE);const st=Gs.getMorphValuesForProxy(qe.key),mt=st?1:0;let Bt;st&&(Bt={morphing:{srcDemTile:st.from,dstDemTile:st.to,phase:n.cB(st.phase)}});const qt=tc(qe.projMatrix,rc(qe.canonical,Me.renderWorldCopies)?Be/10:Be,Oe);if(he(mt),!Z)continue;S.setupElevationDraw(tt,Z,Bt);const Kt=qe.toUnwrapped();ae&&ae.setupShadows(Kt,Z),v.uploadCommonUniforms(U,Z,Kt,null,me),Z.draw(v,Ze,_e,rt,xe,Gr.backCCW,qt,"terrain_raster",S.gridBuffer,Ue,We)}}}}(o,this,this.proxySourceCache,a,this._updateTimestamp),this.renderingToTexture=!0,o.gpuTimingDeferredRenderEnd(),a.splice(0,a.length))}renderBatch(a){if(this._drapedRenderBatches.length===0)return a+1;this.renderingToTexture=!0;const o=this.painter,m=this.painter.context,v=this.proxySourceCache,S=this.proxiedCoords[v.id],D=this._drapedRenderBatches.shift(),L=o.style.order,O=[];let U=0;for(const q of S){const Z=v.getTileByID(q.proxyTileKey),X=v.proxyCachedFBO[q.key]?v.proxyCachedFBO[q.key][a]:void 0,ae=X!==void 0?v.renderCache[X]:this.pool[U++],me=X!==void 0;if(Z.texture=ae.tex,me&&!ae.dirty){O.push(Z.tileID);continue}let he;m.bindFramebuffer.set(ae.fb.framebuffer),this.renderedToTile=!1,ae.dirty&&(m.clear({color:n.aj.transparent,stencil:0}),ae.dirty=!1);for(let xe=D.start;xe<=D.end;++xe){const _e=o.style._mergedLayers[L[xe]];if(_e.isHidden(o.transform.zoom))continue;const Me=o.style.getLayerSourceCache(_e),Be=Me?this.proxyToSource[q.key][Me.id]:[q];if(!Be)continue;const Oe=Be;m.viewport.set([0,0,ae.fb.width,ae.fb.height]),he!==(Me?Me.id:null)&&(this._setupStencil(ae,Be,_e,Me),he=Me?Me.id:null),o.renderLayer(o,Me,_e,Oe)}if(this._drapedRenderBatches.length===0)for(const xe of this._pendingGroundEffectLayers){const _e=o.style._mergedLayers[L[xe]];if(_e.isHidden(o.transform.zoom))continue;const Me=o.style.getLayerSourceCache(_e),Be=Me?this.proxyToSource[q.key][Me.id]:[q];if(!Be)continue;const Oe=Be;m.viewport.set([0,0,ae.fb.width,ae.fb.height]),he!==(Me?Me.id:null)&&(this._setupStencil(ae,Be,_e,Me),he=Me?Me.id:null),o.renderLayer(o,Me,_e,Oe)}this.renderedToTile?(ae.dirty=!0,O.push(Z.tileID)):me||--U,U===5&&(U=0,this.renderToBackBuffer(O))}return this.renderToBackBuffer(O),this.renderingToTexture=!1,m.bindFramebuffer.set(null),m.viewport.set([0,0,o.width,o.height]),D.end+1}postRender(){}isLayerOrderingCorrect(a){const o=a.order.length;let m=-1,v=o;for(let S=0;S<o;++S)this._style.isLayerDraped(a._mergedLayers[a.order[S]])?m=Math.max(m,S):v=Math.min(v,S);return v>m}getMinElevationBelowMSL(){let a=0;return this._visibleDemTiles.filter(o=>o.dem).forEach(o=>{a=Math.min(a,o.dem.tree.minimums[0])}),a===0?a:(a-30)*this._exaggeration}raycast(a,o,m){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(S=>S.dem).map(S=>{const D=S.tileID,L=1<<D.overscaledZ,{x:O,y:U}=D.canonical,q=O/L,Z=(O+1)/L,X=U/L,ae=(U+1)/L;return{minx:q,miny:X,maxx:Z,maxy:ae,t:S.dem.tree.raycastRoot(q,X,Z,ae,a,o,m),tile:S}});v.sort((S,D)=>(S.t!==null?S.t:Number.MAX_VALUE)-(D.t!==null?D.t:Number.MAX_VALUE));for(const S of v){if(S.t==null)return null;const D=S.tile.dem.tree.raycast(S.minx,S.miny,S.maxx,S.maxy,a,o,m);if(D!=null)return D}return null}_createFBO(){const a=this.painter.context,o=a.gl,m=this.drapeBufferSize;a.activeTexture.set(o.TEXTURE0);const v=new n.T(a,{width:m[0],height:m[1],data:null},o.RGBA8);v.bind(o.LINEAR,o.CLAMP_TO_EDGE);const S=a.createFramebuffer(m[0],m[1],!0,null);return S.colorAttachment.set(v.texture),S.depthAttachment=new Sl(a,S.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=a.createRenderbuffer(a.gl.DEPTH_STENCIL,m[0],m[1]),this._stencilRef=0,S.depthAttachment.set(this._sharedDepthStencil),a.clear({stencil:0})):S.depthAttachment.set(this._sharedDepthStencil),a.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax),{fb:S,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const a in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[a].hasTransition())return!0;return this._style.order.some(a=>{const o=this._style._mergedLayers[a],m=o.isHidden(this.painter.transform.zoom);return o.type==="hillshade"||o.type==="custom"?!m&&o.shouldRedrape():!m&&o.hasTransition()})}_clearLineLayersFromRenderCache(){let a=!1;for(const m of this._style.getSources())if(m instanceof xd){a=!0;break}if(!a)return;const o={};for(let m=0;m<this._style.order.length;++m){const v=this._style._mergedLayers[this._style.order[m]],S=this._style.getLayerSourceCache(v);if(S&&!o[S.id]&&!v.isHidden(this.painter.transform.zoom)&&v.type==="line"&&v.widthExpression()instanceof n.a9){o[S.id]=!0;for(const D of this.proxyCoords){const L=this.proxyToSource[D.key][S.id];if(L)for(const O of L)this._clearRenderCacheForTile(S.id,O)}}}}_clearRasterLayersFromRenderCache(){let a=!1;for(const m in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[m]._source instanceof vd){a=!0;break}if(!a)return;const o={};for(let m=0;m<this._style.order.length;++m){const v=this._style._mergedLayers[this._style.order[m]],S=this._style.getLayerSourceCache(v);if(!S||o[S.id]||v.isHidden(this.painter.transform.zoom)||v.type!=="raster")continue;const D=v.paint.get("raster-fade-duration");for(const L of this.proxyCoords){const O=this.proxyToSource[L.key][S.id];if(O)for(const U of O){const q=Hu(S.getTile(U),S.findLoadedParent(U,0),S,this.painter.transform,D);(q.opacity!==1||q.mix!==0)&&this._clearRenderCacheForTile(S.id,U)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const a=this._style.order,o=a.length;if(o===0)return;const m=[];this._pendingGroundEffectLayers=[];let v,S=0,D=this._style._mergedLayers[a[S]];for(;!this._style.isLayerDraped(D)&&D.isHidden(this.painter.transform.zoom)&&++S<o;)D=this._style._mergedLayers[a[S]];for(;S<o;++S){const L=this._style._mergedLayers[a[S]];L.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(L)?v===void 0&&(v=S):(L.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(S),v!==void 0&&(m.push({start:v,end:S-1}),v=void 0)))}if(v!==void 0&&m.push({start:v,end:S-1}),m.length!==0){const L=m[m.length-1];this._pendingGroundEffectLayers.every(O=>O>L.end)||n.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=m}_setupRenderCache(a){const o=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,o.renderCache.length>o.renderCachePool.length){const D=Object.values(o.proxyCachedFBO);o.proxyCachedFBO={};for(let L=0;L<D.length;++L){const O=Object.values(D[L]);o.renderCachePool.push(...O)}}return}this._clearRasterLayersFromRenderCache();const m=this.proxyCoords,v=this._tilesDirty;for(let D=m.length-1;D>=0;D--){const L=m[D];if(o.getTileByID(L.key),o.proxyCachedFBO[L.key]!==void 0){const O=a[L.key],U=this.proxyToSource[L.key];let q=0;for(const Z in U){const X=U[Z],ae=O[Z];if(!ae||ae.length!==X.length||X.some((me,he)=>me!==ae[he]||v[Z]&&v[Z].hasOwnProperty(me.key))){q=-1;break}++q}for(const Z in o.proxyCachedFBO[L.key])o.renderCache[o.proxyCachedFBO[L.key][Z]].dirty=q<0||q!==Object.values(O).length}}const S=[...this._drapedRenderBatches];S.sort((D,L)=>L.end-L.start-(D.end-D.start));for(const D of S)for(const L of m){if(o.proxyCachedFBO[L.key])continue;let O=o.renderCachePool.pop();O===void 0&&o.renderCache.length<50&&(O=o.renderCache.length,o.renderCache.push(this._createFBO())),O!==void 0&&(o.proxyCachedFBO[L.key]={},o.proxyCachedFBO[L.key][D.start]=O,o.renderCache[O].dirty=!0)}this._tilesDirty={}}_setupStencil(a,o,m,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const S=this.painter.context,D=S.gl;if(o.length<=1)return void(this._overlapStencilType=!1);let L;if(m.isTileClipped())L=o.length,this._overlapStencilMode.test={func:D.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(o[0].overscaledZ>o[o.length-1].overscaledZ))return void(this._overlapStencilType=!1);L=1,this._overlapStencilMode.test={func:D.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+L>255&&(S.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=L,this._overlapStencilMode.ref=this._stencilRef,m.isTileClipped()&&this._renderTileClippingMasks(o,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(a){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[a.key]),this._overlapStencilMode):ea.disabled}_renderTileClippingMasks(a,o){const m=this.painter,v=this.painter.context,S=v.gl;m._tileClippingMaskIDs={},v.setColorMode(ua.disabled),v.setDepthMode(Rr.disabled);const D=m.getOrCreateProgram("clippingMask");for(const L of a){const O=m._tileClippingMaskIDs[L.key]=--o;D.draw(m,S.TRIANGLES,Rr.disabled,new ea({func:S.ALWAYS,mask:0},O,255,S.KEEP,S.KEEP,S.REPLACE),ua.disabled,Gr.disabled,xi(L.projMatrix),"$clipping",m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}}pointCoordinate(a){const o=this.painter.transform;if(a.x<0||a.x>o.width||a.y<0||a.y>o.height)return null;const m=[a.x,a.y,1,1];n.ab.vec4.transformMat4(m,m,o.pixelMatrixInverse),n.ab.vec4.scale(m,m,1/m[3]),m[0]/=o.worldSize,m[1]/=o.worldSize;const v=o._camera.position,S=n.bH(1,o.center.lat),D=[v[0],v[1],v[2]/S,0],L=n.ab.vec3.subtract([],m.slice(0,3),D);n.ab.vec3.normalize(L,L);const O=this.raycast(D,L,this._exaggeration);return O!==null&&O?(n.ab.vec3.scaleAndAdd(D,D,L,O),D[3]=D[2],D[2]*=S,D):null}_setupProxiedCoordsForOrtho(a,o,m){if(a.getSource()instanceof n.aJ)return this._setupProxiedCoordsForImageSource(a,o,m);this._findCoveringTileCache[a.id]=this._findCoveringTileCache[a.id]||{};const v=this.proxiedCoords[a.id]=[],S=this.proxyCoords;for(let O=0;O<S.length;O++){const U=S[O],q=this._findTileCoveringTileID(U,a);if(q){const Z=this._createProxiedId(U,q,m[U.key]&&m[U.key][a.id]);v.push(Z),this.proxyToSource[U.key][a.id]=[Z]}}let D=!1;const L=new Set;for(let O=0;O<o.length;O++){const U=a.getTile(o[O]);if(!U||!U.hasData())continue;const q=this._findTileCoveringTileID(U.tileID,this.proxySourceCache);if(q&&q.tileID.canonical.z!==U.tileID.canonical.z){const Z=this.proxyToSource[q.tileID.key][a.id],X=this._createProxiedId(q.tileID,U,m[q.tileID.key]&&m[q.tileID.key][a.id]);Z?Z.splice(Z.length-1,0,X):this.proxyToSource[q.tileID.key][a.id]=[X];const ae=this.proxyToSource[q.tileID.key][a.id];L.has(ae)||L.add(ae),v.push(X),D=!0}}if(this._sourceTilesOverlap[a.id]=D,D&&this._debugParams.sortTilesHiZFirst)for(const O of L)O.sort((U,q)=>q.overscaledZ-U.overscaledZ)}_setupProxiedCoordsForImageSource(a,o,m){if(!a.getSource().loaded())return;const v=this.proxiedCoords[a.id]=[],S=this.proxyCoords,D=a.getSource(),L=D.tileID;if(!L)return;const O=new n.P(L.x,L.y)._div(1<<L.z),U=D.coordinates.map(n.aa.fromLngLat).reduce((Z,X)=>(Z.min.x=Math.min(Z.min.x,X.x-O.x),Z.min.y=Math.min(Z.min.y,X.y-O.y),Z.max.x=Math.max(Z.max.x,X.x-O.x),Z.max.y=Math.max(Z.max.y,X.y-O.y),Z),{min:new n.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new n.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),q=(Z,X)=>{const ae=Z.wrap+Z.canonical.x/(1<<Z.canonical.z),me=Z.canonical.y/(1<<Z.canonical.z),he=n.ag/(1<<Z.canonical.z),xe=X.wrap+X.canonical.x/(1<<X.canonical.z),_e=X.canonical.y/(1<<X.canonical.z);return ae+he<xe+U.min.x||ae>xe+U.max.x||me+he<_e+U.min.y||me>_e+U.max.y};for(let Z=0;Z<S.length;Z++){const X=S[Z];for(let ae=0;ae<o.length;ae++){const me=a.getTile(o[ae]);if(!me||!me.hasData()||q(X,me.tileID))continue;const he=this._createProxiedId(X,me,m[X.key]&&m[X.key][a.id]),xe=this.proxyToSource[X.key][a.id];xe?xe.push(he):this.proxyToSource[X.key][a.id]=[he],v.push(he)}}}_createProxiedId(a,o,m){let v=this.orthoMatrix;if(m){const S=m.find(D=>D.key===o.tileID.key);if(S)return S}if(o.tileID.key!==a.key){const S=a.canonical.z-o.tileID.canonical.z;let D,L,O;v=n.ab.mat4.create();const U=o.tileID.wrap-a.wrap<<a.overscaledZ;S>0?(D=n.ag>>S,L=D*((o.tileID.canonical.x<<S)-a.canonical.x+U),O=D*((o.tileID.canonical.y<<S)-a.canonical.y)):(D=n.ag<<-S,L=n.ag*(o.tileID.canonical.x-(a.canonical.x+U<<-S)),O=n.ag*(o.tileID.canonical.y-(a.canonical.y<<-S))),n.ab.mat4.ortho(v,0,D,0,D,0,1),n.ab.mat4.translate(v,v,[L,O,0])}return new hp(o.tileID,a.key,v)}_findTileCoveringTileID(a,o){let m=o.getTile(a);if(m&&m.hasData())return m;const v=this._findCoveringTileCache[o.id],S=v[a.key];if(m=S?o.getTileByID(S):null,m&&m.hasData()||S===null)return m;let D=m?m.tileID:a,L=D.overscaledZ;const O=o.getSource().minzoom,U=[];if(!S){const Z=o.getSource().maxzoom;if(a.canonical.z>=Z){const X=a.canonical.z-Z;o.getSource().reparseOverscaled?(L=Math.max(a.canonical.z+2,o.transform.tileZoom),D=new n.aG(L,a.wrap,Z,a.canonical.x>>X,a.canonical.y>>X)):X!==0&&(L=Z,D=new n.aG(L,a.wrap,Z,a.canonical.x>>X,a.canonical.y>>X))}D.key!==a.key&&(U.push(D.key),m=o.getTile(D))}const q=Z=>{U.forEach(X=>{v[X]=Z}),U.length=0};for(L-=1;L>=O&&(!m||!m.hasData());L--){m&&q(m.tileID.key);const Z=D.calculateScaledKey(L);if(m=o.getTileByID(Z),m&&m.hasData())break;const X=v[Z];if(X===null)break;X===void 0?U.push(Z):m=o.getTileByID(X)}return q(m?m.tileID.key:null),m&&m.hasData()?m:null}findDEMTileFor(a){return this.enabled?this._findTileCoveringTileID(a,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(a,o){let m=this._tilesDirty[a];m||(m=this._tilesDirty[a]={}),m[o.key]=!0}}function Ii(p,a,o){const m=function(L,O,U){const q=n.ab.vec3.dot(O,L),Z=n.ab.vec3.dot(U,[.2126,.7152,.0722]),X=(me,he,xe)=>(1-xe)*me+xe*he,ae=X(1-.3*Math.min(Z,1),1,Math.min(q+1,1));return X(.92,1,Math.asin(n.aw(O[2],-1,1))/Math.PI+.5)*ae}(p,[0,0,1],a),v=[0,0,0];n.ab.vec3.scale(v,o.slice(0,3),m);const S=[0,0,0];n.ab.vec3.scale(S,a.slice(0,3),p[2]);const D=[0,0,0];return n.ab.vec3.add(D,v,S),n.cf(D)}const qu=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Fh=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","model","symbol"];class Nd{static cacheKey(a,o,m,v){let S=`${o}${v?v.cacheKey:""}`;for(const D of m)a.usedDefines.includes(D)&&(S+=`/${D}`);return S}constructor(a,o,m,v,S,D){const L=a.gl;this.program=L.createProgram(),this.configuration=v,this.name=o,this.fixedDefines=[...D];const O=v?v.getBinderAttributes():[],U=(m.staticAttributes||[]).concat(O);let q=v?v.defines():[];q=q.concat(D.map(xe=>`#define ${xe}`));const Z=`#version 300 es
`;let X=Z+q.concat("precision mediump float;",zh,Xl.fragmentSource).join(`
`);for(const xe of m.fragmentIncludes)X+=`
${Ri[xe]}`;X+=`
${m.fragmentSource}`;let ae=Z+q.concat("precision highp float;",zh,Xl.vertexSource).join(`
`);for(const xe of m.vertexIncludes)ae+=`
${Ri[xe]}`;this.forceManualRenderingForInstanceIDShaders=a.forceManualRenderingForInstanceIDShaders&&m.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(ae+=`
uniform int u_instanceID;
`),ae+=`
${m.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(ae=ae.replaceAll("gl_InstanceID","u_instanceID"));const me=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);L.shaderSource(me,X),L.compileShader(me),L.attachShader(this.program,me);const he=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())this.failedToCreate=!0;else{L.shaderSource(he,ae),L.compileShader(he),L.attachShader(this.program,he),this.attributes={},this.numAttributes=U.length;for(let xe=0;xe<this.numAttributes;xe++)if(U[xe]){const _e=U[xe].startsWith("a_")?U[xe]:`a_${U[xe]}`;L.bindAttribLocation(this.program,xe,_e),this.attributes[_e]=xe}L.linkProgram(this.program),L.deleteShader(he),L.deleteShader(me),this.fixedUniforms=S(a),this.binderUniforms=v?v.getUniforms(a):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(xe=>({u_instanceID:new n.bN(xe)}))(a)),(D.includes("TERRAIN")||o.indexOf("symbol")!==-1||o.indexOf("circle")!==-1)&&(this.terrainUniforms=(xe=>({u_dem:new n.bN(xe),u_dem_prev:new n.bN(xe),u_dem_tl:new n.bK(xe),u_dem_scale:new n.bM(xe),u_dem_tl_prev:new n.bK(xe),u_dem_scale_prev:new n.bM(xe),u_dem_size:new n.bM(xe),u_dem_lerp:new n.bM(xe),u_exaggeration:new n.bM(xe),u_depth:new n.bN(xe),u_depth_size_inv:new n.bK(xe),u_depth_range_unpack:new n.bK(xe),u_occluder_half_size:new n.bM(xe),u_occlusion_depth_offset:new n.bM(xe),u_meter_to_dem:new n.bM(xe),u_label_plane_matrix_inv:new n.bJ(xe)}))(a)),D.includes("GLOBE")&&(this.globeUniforms=(xe=>({u_tile_tl_up:new n.bL(xe),u_tile_tr_up:new n.bL(xe),u_tile_br_up:new n.bL(xe),u_tile_bl_up:new n.bL(xe),u_tile_up_scale:new n.bM(xe)}))(a)),D.includes("FOG")&&(this.fogUniforms=(xe=>({u_fog_matrix:new n.bJ(xe),u_fog_range:new n.bK(xe),u_fog_color:new n.ca(xe),u_fog_horizon_blend:new n.bM(xe),u_fog_vertical_limit:new n.bK(xe),u_fog_temporal_offset:new n.bM(xe),u_frustum_tl:new n.bL(xe),u_frustum_tr:new n.bL(xe),u_frustum_br:new n.bL(xe),u_frustum_bl:new n.bL(xe),u_globe_pos:new n.bL(xe),u_globe_radius:new n.bM(xe),u_globe_transition:new n.bM(xe),u_is_globe:new n.bN(xe),u_viewport:new n.bK(xe)}))(a)),D.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(xe=>({u_cutoff_params:new n.ca(xe)}))(a)),D.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(xe=>({u_lighting_ambient_color:new n.bL(xe),u_lighting_directional_dir:new n.bL(xe),u_lighting_directional_color:new n.bL(xe),u_ground_radiance:new n.bL(xe)}))(a)),D.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(xe=>({u_light_matrix_0:new n.bJ(xe),u_light_matrix_1:new n.bJ(xe),u_fade_range:new n.bK(xe),u_shadow_normal_offset:new n.bL(xe),u_shadow_intensity:new n.bM(xe),u_shadow_texel_size:new n.bM(xe),u_shadow_map_resolution:new n.bM(xe),u_shadow_direction:new n.bL(xe),u_shadow_bias:new n.bL(xe),u_shadowmap_0:new n.bN(xe),u_shadowmap_1:new n.bN(xe)}))(a))}}setTerrainUniformValues(a,o){if(!this.terrainUniforms)return;const m=this.terrainUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const v in o)m[v]&&m[v].set(this.program,v,o[v])}}setGlobeUniformValues(a,o){if(!this.globeUniforms)return;const m=this.globeUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const v in o)m[v]&&m[v].set(this.program,v,o[v])}}setFogUniformValues(a,o){if(!this.fogUniforms)return;const m=this.fogUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const v in o)m[v].set(this.program,v,o[v])}}setCutoffUniformValues(a,o){if(!this.cutoffUniforms)return;const m=this.cutoffUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const v in o)m[v].set(this.program,v,o[v])}}setLightsUniformValues(a,o){if(!this.lightsUniforms)return;const m=this.lightsUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const v in o)m[v].set(this.program,v,o[v])}}setShadowUniformValues(a,o){if(this.failedToCreate||!this.shadowUniforms)return;const m=this.shadowUniforms;a.program.set(this.program);for(const v in o)m[v].set(this.program,v,o[v])}_drawDebugWireframe(a,o,m,v,S,D,L,O,U,q){const Z=a.options.wireframe;if(Z.terrain===!1&&Z.layers2D===!1&&Z.layers3D===!1)return;const X=a.context;if(!(!(!Z.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!Z.layers2D||a._terrain&&a._terrain.renderingToTexture||!qu.includes(this.name))||!(!Z.layers3D||!Fh.includes(this.name))))return;const ae=X.gl,me=a.wireframeDebugCache.getLinesFromTrianglesBuffer(a.frameCounter,S,X);if(!me)return;const he=[...this.fixedDefines];he.push("DEBUG_WIREFRAME");const xe=a.getOrCreateProgram(this.name,{config:this.configuration,defines:he});X.program.set(xe.program);const _e=(Oe,Ze,Ue)=>{if(Ze[Oe]&&Ue[Oe])for(const We in Ze[Oe])Ue[Oe][We]&&Ue[Oe][We].set(Ue.program,We,Ze[Oe][We].current)};U&&U.setUniforms(xe.program,X,xe.binderUniforms,L,{zoom:O}),_e("fixedUniforms",this,xe),_e("terrainUniforms",this,xe),_e("globeUniforms",this,xe),_e("fogUniforms",this,xe),_e("lightsUniforms",this,xe),_e("shadowUniforms",this,xe),me.bind(),X.setColorMode(new ua([ae.ONE,ae.ONE_MINUS_SRC_ALPHA,ae.ZERO,ae.ONE],n.aj.transparent,[!0,!0,!0,!1])),X.setDepthMode(new Rr(o.func===ae.LESS?ae.LEQUAL:o.func,Rr.ReadOnly,o.range)),X.setStencilMode(ea.disabled);const Me=3*D.primitiveLength*2,Be=3*D.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const Oe=q||1;for(let Ze=0;Ze<Oe;++Ze)xe.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",Ze),ae.drawElements(ae.LINES,Me,ae.UNSIGNED_SHORT,Be)}else q&&q>1?ae.drawElementsInstanced(ae.LINES,Me,ae.UNSIGNED_SHORT,Be,q):ae.drawElements(ae.LINES,Me,ae.UNSIGNED_SHORT,Be);S.bind(),X.program.set(this.program),X.setDepthMode(o),X.setStencilMode(m),X.setColorMode(v)}checkUniforms(a,o,m){if(this.fixedDefines.includes(o)){for(const v of Object.keys(m))if(!m[v].initialized)throw new Error(`Program '${this.name}', from draw '${a}': uniform ${v} not set but required by ${o} being defined`)}}draw(a,o,m,v,S,D,L,O,U,q,Z,X,ae,me,he,xe){const _e=a.context,Me=_e.gl;if(this.failedToCreate)return;_e.program.set(this.program),_e.setDepthMode(m),_e.setStencilMode(v),_e.setColorMode(S),_e.setCullFace(D);for(const Ze of Object.keys(this.fixedUniforms))this.fixedUniforms[Ze].set(this.program,Ze,L[Ze]);me&&me.setUniforms(this.program,_e,this.binderUniforms,X,{zoom:ae});const Be={[Me.POINTS]:1,[Me.LINES]:2,[Me.TRIANGLES]:3,[Me.LINE_STRIP]:1}[o];this.checkUniforms(O,"RENDER_SHADOWS",this.shadowUniforms);const Oe=xe&&xe>0?1:void 0;for(const Ze of Z.get()){const Ue=Ze.vaos||(Ze.vaos={});if((Ue[O]||(Ue[O]=new Ou)).bind(_e,this,U,me?me.getPaintVertexBuffers():[],q,Ze.vertexOffset,he||[],Oe),this.forceManualRenderingForInstanceIDShaders){const We=xe||1;for(let qe=0;qe<We;++qe)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",qe),q?Me.drawElements(o,Ze.primitiveLength*Be,Me.UNSIGNED_SHORT,Ze.primitiveOffset*Be*2):Me.drawArrays(o,Ze.vertexOffset,Ze.vertexLength)}else xe&&xe>1?Me.drawElementsInstanced(o,Ze.primitiveLength*Be,Me.UNSIGNED_SHORT,Ze.primitiveOffset*Be*2,xe):q?Me.drawElements(o,Ze.primitiveLength*Be,Me.UNSIGNED_SHORT,Ze.primitiveOffset*Be*2):Me.drawArrays(o,Ze.vertexOffset,Ze.vertexLength);o===Me.TRIANGLES&&q&&this._drawDebugWireframe(a,m,v,S,q,Ze,X,ae,me,xe)}}}function Vh(p,a){const o=Math.pow(2,a.tileID.overscaledZ),m=a.tileSize*Math.pow(2,p.transform.tileZoom)/o,v=m*(a.tileID.canonical.x+a.tileID.wrap*o),S=m*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture?a.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/n.ar(a,1,p.transform.tileZoom),u_pixel_coord_upper:[v>>16,S>>16],u_pixel_coord_lower:[65535&v,65535&S]}}const ac={terrain:0,flat:1},qc=n.ab.mat4.create(),fp=(p,a,o,m,v,S,D,L,O,U,q,Z,X,ae,me,he,xe,_e)=>{const Me=a.style.light,Be=Me.properties.get("position"),Oe=[Be.x,Be.y,Be.z],Ze=n.ab.mat3.create();Me.properties.get("anchor")==="viewport"&&(n.ab.mat3.fromRotation(Ze,-a.transform.angle),n.ab.vec3.transformMat3(Oe,Oe,Ze));const Ue=Me.properties.get("color"),We=a.transform,qe={u_matrix:p,u_lightpos:Oe,u_lightintensity:Me.properties.get("intensity"),u_lightcolor:[Ue.r,Ue.g,Ue.b],u_vertical_gradient:+o,u_opacity:m,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:qc,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:ac[U],u_base_type:ac[q],u_ao:v,u_edge_radius:S,u_width_scale:D,u_flood_light_color:me,u_vertical_scale:he,u_flood_light_intensity:xe,u_ground_shadow_factor:_e};return We.projection.name==="globe"&&(qe.u_tile_id=[L.canonical.x,L.canonical.y,1<<L.canonical.z],qe.u_zoom_transition=Z,qe.u_inv_rot_matrix=ae,qe.u_merc_center=X,qe.u_up_dir=We.projection.upVector(new n.bT(0,0,0),X[0]*n.ag,X[1]*n.ag),qe.u_height_lift=O),qe},Bd=(p,a,o,m,v,S)=>({u_matrix:p,u_edge_radius:a,u_width_scale:o,u_vertical_scale:m,u_height_type:ac[v],u_base_type:ac[S]}),Um=(p,a,o,m,v,S,D,L,O,U,q,Z,X,ae,me,he,xe)=>{const _e=fp(p,a,o,m,v,S,D,L,U,q,Z,X,ae,me,he,xe,1,[0,0,0]),Me={u_height_factor:-Math.pow(2,L.overscaledZ)/O.tileSize/8};return n.l(_e,Vh(a,O),Me)},Wu=(p,a)=>({u_matrix:p,u_emissive_strength:a}),nc=(p,a,o,m)=>n.l(Wu(p,a),Vh(o,m)),jd=(p,a,o)=>({u_matrix:p,u_world:o,u_emissive_strength:a}),Ku=(p,a,o,m,v)=>n.l(nc(p,a,o,m),{u_world:v}),pp=(p,a,o,m)=>{const v=n.ag/o.tileSize;return{u_matrix:p,u_camera_to_center_distance:a.getCameraToCenterDistance(m),u_extrude_scale:[a.pixelsToGLUnits[0]/v,a.pixelsToGLUnits[1]/v]}},Zu=(p,a,o=1)=>({u_matrix:p,u_color:a.toRenderColor(null),u_overlay:0,u_overlay_scale:o}),D0=n.ab.mat4.create(),ic=(p,a,o,m,v,S,D)=>{const L=p.transform,O=L.projection.name==="globe",U=O?n.cN(L.zoom,a.canonical)*L._pixelsPerMercatorPixel:n.ar(o,1,S),q={u_matrix:a.projMatrix,u_extrude_scale:U,u_intensity:D,u_inv_rot_matrix:D0,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(O){q.u_inv_rot_matrix=m,q.u_merc_center=v,q.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],q.u_zoom_transition=n.ae(L.zoom);const Z=v[0]*n.ag,X=v[1]*n.ag;q.u_up_dir=L.projection.upVector(new n.bT(0,0,0),Z,X)}return q};function Xu(p,[a,o,m,v],[S,D]){if(S===D)return[0,0,0,0];const L=255*(p-1)/(p*(D-S));return[a*L,o*L,m*L,v*L]}function Tr(p,a,[o,m]){return o===m?0:.5/p+(a-o)*(p-1)/(p*(m-o))}const Od=(p,a,o,m,v,S,D,L,O,U,q,Z,X,ae,me,he,xe,_e,Me,Be,Oe)=>({u_matrix:p,u_normalize_matrix:a,u_globe_matrix:o,u_merc_matrix:m,u_grid_matrix:v,u_tl_parent:S,u_scale_parent:U,u_fade_t:q.mix,u_opacity:q.opacity*Z.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Z.paint.get("raster-brightness-min"),u_brightness_high:Z.paint.get("raster-brightness-max"),u_saturation_factor:n.cO(Z.paint.get("raster-saturation")),u_contrast_factor:n.cP(Z.paint.get("raster-contrast")),u_spin_weights:Gm(Z.paint.get("raster-hue-rotate")),u_perspective_transform:X,u_raster_elevation:ae,u_zoom_transition:D,u_merc_center:L,u_cutoff_params:O,u_colorization_mix:Xu(n.cQ,he,_e),u_colorization_offset:Tr(n.cQ,xe,_e),u_color_ramp:me,u_texture_offset:[Be/(Me+2*Be),Me/(Me+2*Be)],u_texture_res:[Me+2*Be,Me+2*Be],u_emissive_strength:Oe});function Gm(p){p*=Math.PI/180;const a=Math.sin(p),o=Math.cos(p);return[(2*o+1)/3,(-Math.sqrt(3)*a-o+1)/3,(Math.sqrt(3)*a-o+1)/3]}const Ss=.05,Wc=(p,a,o,m,v,S,D,L,O,U,q,Z)=>({u_matrix:p,u_normalize_matrix:a,u_globe_matrix:o,u_merc_matrix:m,u_grid_matrix:v,u_tl_parent:S,u_scale_parent:U,u_fade_t:q.mix,u_opacity:q.opacity,u_image0:0,u_image1:1,u_raster_elevation:Z,u_zoom_transition:D,u_merc_center:L,u_cutoff_params:O}),Ir=(p,a,o,m,v,S,D,L,O,U)=>({u_particle_texture:p,u_particle_texture_side_len:a,u_tile_offset:o,u_velocity:m,u_color_ramp:S,u_velocity_res:v,u_max_speed:D,u_uv_offset:L,u_data_scale:[255*O[0],255*O[1]],u_data_offset:U,u_particle_pos_scale:1.1,u_particle_pos_offset:[Ss,Ss]}),Tl=(p,a,o,m,v,S,D,L,O,U)=>({u_particle_texture:p,u_particle_texture_side_len:a,u_velocity:o,u_velocity_res:m,u_max_speed:v,u_speed_factor:S,u_reset_rate:D,u_rand_seed:Math.random(),u_uv_offset:L,u_data_scale:[255*O[0],255*O[1]],u_data_offset:U,u_particle_pos_scale:1.1,u_particle_pos_offset:[Ss,Ss]}),mp=n.ab.mat4.create(),gp=(p,a,o,m,v,S,D,L,O,U,q,Z,X,ae,me,he,xe,_e,Me,Be,Oe,Ze)=>{const Ue=v.transform,We={u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:Ue.getCameraToCenterDistance(Me),u_rotate_symbol:+o,u_aspect_ratio:Ue.width/Ue.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:D,u_coord_matrix:L,u_is_text:+U,u_elevation_from_sea:O?1:0,u_pitch_with_map:+m,u_texsize:q,u_texsize_icon:Z,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:mp,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:mp,u_up_vector:[0,-1,0],u_color_adj_mat:Be,u_icon_transition:Oe||0,u_gamma_scale:m?v.transform.getCameraToCenterDistance(Me)*Math.cos(v.terrain?0:v.transform._pitch):1,u_device_pixel_ratio:n.q.devicePixelRatio,u_is_halo:1,u_scale_factor:Ze||1};return Me.name==="globe"&&(We.u_tile_id=[ae.canonical.x,ae.canonical.y,1<<ae.canonical.z],We.u_zoom_transition=me,We.u_inv_rot_matrix=xe,We.u_merc_center=he,We.u_camera_forward=Ue._camera.forward(),We.u_ecef_origin=n.cR(Ue.globeMatrix,ae.toUnwrapped()),We.u_tile_matrix=Float32Array.from(Ue.globeMatrix),We.u_up_vector=_e),We},rl=(p,a,o,m)=>({u_matrix:p,u_emissive_strength:a,u_opacity:o,u_color:m}),El=(p,a,o,m,v,S,D,L,O)=>n.l(function(U,q,Z,X,ae,me){const{width:he,height:xe}=X.imageManager.getPixelSize(q),_e=Math.pow(2,me.tileID.overscaledZ),Me=me.tileSize*Math.pow(2,X.transform.tileZoom)/_e,Be=Me*(me.tileID.canonical.x+me.tileID.wrap*_e),Oe=Me*me.tileID.canonical.y;return{u_image:0,u_pattern_tl:Z.tl,u_pattern_br:Z.br,u_texsize:[he,xe],u_pattern_size:Z.displaySize,u_pattern_units_to_pixels:ae?[X.transform.width,-1*X.transform.height]:[1/n.ar(me,1,X.transform.tileZoom),1/n.ar(me,1,X.transform.tileZoom)],u_pixel_coord_upper:[Be>>16,Oe>>16],u_pixel_coord_lower:[65535&Be,65535&Oe]}}(0,S,D,m,L,O),{u_matrix:p,u_emissive_strength:a,u_opacity:o}),Kc=new Float32Array(n.ab.mat4.identity([])),Uh=(p,a,o,m,v,S,D,L,O,U,q,Z,X,ae=[0,0,0],me)=>{const he=v.style.light,xe=he.properties.get("position"),_e=[-xe.x,-xe.y,xe.z],Me=n.ab.mat3.create();he.properties.get("anchor")==="viewport"&&(n.ab.mat3.fromRotation(Me,-v.transform.angle),n.ab.vec3.transformMat3(_e,_e,Me));const Be=q.alphaMode==="MASK",Oe=he.properties.get("color").toRenderColor(null),Ze=X.paint.get("model-ambient-occlusion-intensity"),Ue=X.paint.get("model-color").constantOr(n.aj.white).toRenderColor(null),We=X.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:p,u_lighting_matrix:a,u_normal_matrix:o,u_node_matrix:m||Kc,u_lightpos:_e,u_lightintensity:he.properties.get("intensity"),u_lightcolor:[Oe.r,Oe.g,Oe.b],u_camera_pos:ae,u_opacity:S,u_baseTextureIsAlpha:0,u_alphaMask:+Be,u_alphaCutoff:q.alphaCutoff,u_baseColorFactor:[D.r,D.g,D.b,D.a],u_emissiveFactor:[L[0],L[1],L[2],1],u_metallicFactor:O,u_roughnessFactor:U,u_baseColorTexture:Oi.BaseColor,u_metallicRoughnessTexture:Oi.MetallicRoughness,u_normalTexture:Oi.Normal,u_occlusionTexture:Oi.Occlusion,u_emissionTexture:Oi.Emission,u_lutTexture:Oi.LUT,u_color_mix:[Ue.r,Ue.g,Ue.b,We],u_aoIntensity:Ze,u_emissive_strength:Z,u_occlusionTextureTransform:me||[0,0,0,0]}},yp=(p,a=Kc,o=Kc)=>({u_matrix:p,u_instance:a,u_node_matrix:o}),Yu={fillExtrusion:p=>({u_matrix:new n.bJ(p),u_lightpos:new n.bL(p),u_lightintensity:new n.bM(p),u_lightcolor:new n.bL(p),u_vertical_gradient:new n.bM(p),u_opacity:new n.bM(p),u_edge_radius:new n.bM(p),u_width_scale:new n.bM(p),u_ao:new n.bK(p),u_height_type:new n.bN(p),u_base_type:new n.bN(p),u_tile_id:new n.bL(p),u_zoom_transition:new n.bM(p),u_inv_rot_matrix:new n.bJ(p),u_merc_center:new n.bK(p),u_up_dir:new n.bL(p),u_height_lift:new n.bM(p),u_flood_light_color:new n.bL(p),u_vertical_scale:new n.bM(p),u_flood_light_intensity:new n.bM(p),u_ground_shadow_factor:new n.bL(p)}),fillExtrusionDepth:p=>({u_matrix:new n.bJ(p),u_edge_radius:new n.bM(p),u_width_scale:new n.bM(p),u_vertical_scale:new n.bM(p),u_height_type:new n.bN(p),u_base_type:new n.bN(p)}),fillExtrusionPattern:p=>({u_matrix:new n.bJ(p),u_lightpos:new n.bL(p),u_lightintensity:new n.bM(p),u_lightcolor:new n.bL(p),u_vertical_gradient:new n.bM(p),u_height_factor:new n.bM(p),u_edge_radius:new n.bM(p),u_width_scale:new n.bM(p),u_ao:new n.bK(p),u_height_type:new n.bN(p),u_base_type:new n.bN(p),u_tile_id:new n.bL(p),u_zoom_transition:new n.bM(p),u_inv_rot_matrix:new n.bJ(p),u_merc_center:new n.bK(p),u_up_dir:new n.bL(p),u_height_lift:new n.bM(p),u_image:new n.bN(p),u_texsize:new n.bK(p),u_pixel_coord_upper:new n.bK(p),u_pixel_coord_lower:new n.bK(p),u_tile_units_to_pixels:new n.bM(p),u_opacity:new n.bM(p)}),fillExtrusionGroundEffect:p=>({u_matrix:new n.bJ(p),u_opacity:new n.bM(p),u_ao_pass:new n.bM(p),u_meter_to_tile:new n.bM(p),u_ao:new n.bK(p),u_flood_light_intensity:new n.bM(p),u_flood_light_color:new n.bL(p),u_attenuation:new n.bM(p),u_edge_radius:new n.bM(p),u_fb:new n.bN(p),u_fb_size:new n.bM(p),u_dynamic_offset:new n.bM(p)}),fill:p=>({u_matrix:new n.bJ(p),u_emissive_strength:new n.bM(p)}),fillPattern:p=>({u_matrix:new n.bJ(p),u_emissive_strength:new n.bM(p),u_image:new n.bN(p),u_texsize:new n.bK(p),u_pixel_coord_upper:new n.bK(p),u_pixel_coord_lower:new n.bK(p),u_tile_units_to_pixels:new n.bM(p)}),fillOutline:p=>({u_matrix:new n.bJ(p),u_emissive_strength:new n.bM(p),u_world:new n.bK(p)}),fillOutlinePattern:p=>({u_matrix:new n.bJ(p),u_emissive_strength:new n.bM(p),u_world:new n.bK(p),u_image:new n.bN(p),u_texsize:new n.bK(p),u_pixel_coord_upper:new n.bK(p),u_pixel_coord_lower:new n.bK(p),u_tile_units_to_pixels:new n.bM(p)}),circle:n.cS,collisionBox:p=>({u_matrix:new n.bJ(p),u_camera_to_center_distance:new n.bM(p),u_extrude_scale:new n.bK(p)}),collisionCircle:p=>({u_matrix:new n.bJ(p),u_inv_matrix:new n.bJ(p),u_camera_to_center_distance:new n.bM(p),u_viewport_size:new n.bK(p)}),debug:p=>({u_color:new n.cz(p),u_matrix:new n.bJ(p),u_overlay:new n.bN(p),u_overlay_scale:new n.bM(p)}),clippingMask:p=>({u_matrix:new n.bJ(p)}),heatmap:p=>({u_extrude_scale:new n.bM(p),u_intensity:new n.bM(p),u_matrix:new n.bJ(p),u_inv_rot_matrix:new n.bJ(p),u_merc_center:new n.bK(p),u_tile_id:new n.bL(p),u_zoom_transition:new n.bM(p),u_up_dir:new n.bL(p)}),heatmapTexture:p=>({u_image:new n.bN(p),u_color_ramp:new n.bN(p),u_opacity:new n.bM(p)}),hillshade:p=>({u_matrix:new n.bJ(p),u_image:new n.bN(p),u_latrange:new n.bK(p),u_light:new n.bK(p),u_shadow:new n.cz(p),u_highlight:new n.cz(p),u_emissive_strength:new n.bM(p),u_accent:new n.cz(p)}),hillshadePrepare:p=>({u_matrix:new n.bJ(p),u_image:new n.bN(p),u_dimension:new n.bK(p),u_zoom:new n.bM(p)}),line:n.cT,linePattern:n.cU,raster:p=>({u_matrix:new n.bJ(p),u_normalize_matrix:new n.bJ(p),u_globe_matrix:new n.bJ(p),u_merc_matrix:new n.bJ(p),u_grid_matrix:new n.cA(p),u_tl_parent:new n.bK(p),u_scale_parent:new n.bM(p),u_fade_t:new n.bM(p),u_opacity:new n.bM(p),u_image0:new n.bN(p),u_image1:new n.bN(p),u_brightness_low:new n.bM(p),u_brightness_high:new n.bM(p),u_saturation_factor:new n.bM(p),u_contrast_factor:new n.bM(p),u_spin_weights:new n.bL(p),u_perspective_transform:new n.bK(p),u_raster_elevation:new n.bM(p),u_zoom_transition:new n.bM(p),u_merc_center:new n.bK(p),u_cutoff_params:new n.ca(p),u_colorization_mix:new n.ca(p),u_colorization_offset:new n.bM(p),u_color_ramp:new n.bN(p),u_texture_offset:new n.bK(p),u_texture_res:new n.bK(p),u_emissive_strength:new n.bM(p)}),rasterParticle:p=>({u_matrix:new n.bJ(p),u_normalize_matrix:new n.bJ(p),u_globe_matrix:new n.bJ(p),u_merc_matrix:new n.bJ(p),u_grid_matrix:new n.cA(p),u_tl_parent:new n.bK(p),u_scale_parent:new n.bM(p),u_fade_t:new n.bM(p),u_opacity:new n.bM(p),u_image0:new n.bN(p),u_image1:new n.bN(p),u_raster_elevation:new n.bM(p),u_zoom_transition:new n.bM(p),u_merc_center:new n.bK(p),u_cutoff_params:new n.ca(p)}),rasterParticleTexture:p=>({u_texture:new n.bN(p),u_opacity:new n.bM(p)}),rasterParticleDraw:p=>({u_particle_texture:new n.bN(p),u_particle_texture_side_len:new n.bM(p),u_tile_offset:new n.bK(p),u_velocity:new n.bN(p),u_color_ramp:new n.bN(p),u_velocity_res:new n.bK(p),u_max_speed:new n.bM(p),u_uv_offset:new n.bK(p),u_data_scale:new n.bK(p),u_data_offset:new n.bM(p),u_particle_pos_scale:new n.bM(p),u_particle_pos_offset:new n.bK(p)}),rasterParticleUpdate:p=>({u_particle_texture:new n.bN(p),u_particle_texture_side_len:new n.bM(p),u_velocity:new n.bN(p),u_velocity_res:new n.bK(p),u_max_speed:new n.bM(p),u_speed_factor:new n.bM(p),u_reset_rate:new n.bM(p),u_rand_seed:new n.bM(p),u_uv_offset:new n.bK(p),u_data_scale:new n.bK(p),u_data_offset:new n.bM(p),u_particle_pos_scale:new n.bM(p),u_particle_pos_offset:new n.bK(p)}),symbol:p=>({u_is_size_zoom_constant:new n.bN(p),u_is_size_feature_constant:new n.bN(p),u_size_t:new n.bM(p),u_size:new n.bM(p),u_camera_to_center_distance:new n.bM(p),u_rotate_symbol:new n.bN(p),u_aspect_ratio:new n.bM(p),u_fade_change:new n.bM(p),u_matrix:new n.bJ(p),u_label_plane_matrix:new n.bJ(p),u_coord_matrix:new n.bJ(p),u_is_text:new n.bN(p),u_elevation_from_sea:new n.bN(p),u_pitch_with_map:new n.bN(p),u_texsize:new n.bK(p),u_texsize_icon:new n.bK(p),u_texture:new n.bN(p),u_texture_icon:new n.bN(p),u_gamma_scale:new n.bM(p),u_device_pixel_ratio:new n.bM(p),u_tile_id:new n.bL(p),u_zoom_transition:new n.bM(p),u_inv_rot_matrix:new n.bJ(p),u_merc_center:new n.bK(p),u_camera_forward:new n.bL(p),u_tile_matrix:new n.bJ(p),u_up_vector:new n.bL(p),u_ecef_origin:new n.bL(p),u_is_halo:new n.bN(p),u_icon_transition:new n.bM(p),u_color_adj_mat:new n.bJ(p),u_scale_factor:new n.bM(p)}),background:p=>({u_matrix:new n.bJ(p),u_emissive_strength:new n.bM(p),u_opacity:new n.bM(p),u_color:new n.cz(p)}),backgroundPattern:p=>({u_matrix:new n.bJ(p),u_emissive_strength:new n.bM(p),u_opacity:new n.bM(p),u_image:new n.bN(p),u_pattern_tl:new n.bK(p),u_pattern_br:new n.bK(p),u_texsize:new n.bK(p),u_pattern_size:new n.bK(p),u_pixel_coord_upper:new n.bK(p),u_pixel_coord_lower:new n.bK(p),u_pattern_units_to_pixels:new n.bK(p)}),terrainRaster:p=>({u_matrix:new n.bJ(p),u_image0:new n.bN(p),u_skirt_height:new n.bM(p),u_ground_shadow_factor:new n.bL(p)}),skybox:p=>({u_matrix:new n.bJ(p),u_sun_direction:new n.bL(p),u_cubemap:new n.bN(p),u_opacity:new n.bM(p),u_temporal_offset:new n.bM(p)}),skyboxGradient:p=>({u_matrix:new n.bJ(p),u_color_ramp:new n.bN(p),u_center_direction:new n.bL(p),u_radius:new n.bM(p),u_opacity:new n.bM(p),u_temporal_offset:new n.bM(p)}),skyboxCapture:p=>({u_matrix_3f:new n.cA(p),u_sun_direction:new n.bL(p),u_sun_intensity:new n.bM(p),u_color_tint_r:new n.ca(p),u_color_tint_m:new n.ca(p),u_luminance:new n.bM(p)}),globeRaster:p=>({u_proj_matrix:new n.bJ(p),u_globe_matrix:new n.bJ(p),u_normalize_matrix:new n.bJ(p),u_merc_matrix:new n.bJ(p),u_zoom_transition:new n.bM(p),u_merc_center:new n.bK(p),u_image0:new n.bN(p),u_grid_matrix:new n.cA(p),u_skirt_height:new n.bM(p),u_far_z_cutoff:new n.bM(p),u_frustum_tl:new n.bL(p),u_frustum_tr:new n.bL(p),u_frustum_br:new n.bL(p),u_frustum_bl:new n.bL(p),u_globe_pos:new n.bL(p),u_globe_radius:new n.bM(p),u_viewport:new n.bK(p)}),globeAtmosphere:p=>({u_frustum_tl:new n.bL(p),u_frustum_tr:new n.bL(p),u_frustum_br:new n.bL(p),u_frustum_bl:new n.bL(p),u_horizon:new n.bM(p),u_transition:new n.bM(p),u_fadeout_range:new n.bM(p),u_color:new n.ca(p),u_high_color:new n.ca(p),u_space_color:new n.ca(p),u_temporal_offset:new n.bM(p),u_horizon_angle:new n.bM(p)}),model:p=>({u_matrix:new n.bJ(p),u_lighting_matrix:new n.bJ(p),u_normal_matrix:new n.bJ(p),u_node_matrix:new n.bJ(p),u_lightpos:new n.bL(p),u_lightintensity:new n.bM(p),u_lightcolor:new n.bL(p),u_camera_pos:new n.bL(p),u_opacity:new n.bM(p),u_baseColorFactor:new n.ca(p),u_emissiveFactor:new n.ca(p),u_metallicFactor:new n.bM(p),u_roughnessFactor:new n.bM(p),u_baseTextureIsAlpha:new n.bN(p),u_alphaMask:new n.bN(p),u_alphaCutoff:new n.bM(p),u_baseColorTexture:new n.bN(p),u_metallicRoughnessTexture:new n.bN(p),u_normalTexture:new n.bN(p),u_occlusionTexture:new n.bN(p),u_emissionTexture:new n.bN(p),u_lutTexture:new n.bN(p),u_color_mix:new n.ca(p),u_aoIntensity:new n.bM(p),u_emissive_strength:new n.bM(p),u_occlusionTextureTransform:new n.ca(p)}),modelDepth:p=>({u_matrix:new n.bJ(p),u_instance:new n.bJ(p),u_node_matrix:new n.bJ(p)}),groundShadow:p=>({u_matrix:new n.bJ(p),u_ground_shadow_factor:new n.bL(p)}),stars:p=>({u_matrix:new n.bJ(p),u_up:new n.bL(p),u_right:new n.bL(p),u_intensity_multiplier:new n.bM(p)}),snowParticle:p=>({u_modelview:new n.bJ(p),u_projection:new n.bJ(p),u_time:new n.bM(p),u_cam_pos:new n.bL(p),u_velocityConeAperture:new n.bM(p),u_velocity:new n.bM(p),u_horizontalOscillationRadius:new n.bM(p),u_horizontalOscillationRate:new n.bM(p),u_boxSize:new n.bM(p),u_billboardSize:new n.bM(p),u_simpleShapeParameters:new n.bK(p),u_screenSize:new n.bK(p),u_thinningCenterPos:new n.bK(p),u_thinningShape:new n.bL(p),u_thinningAffectedRatio:new n.bM(p),u_thinningParticleOffset:new n.bM(p),u_particleColor:new n.ca(p),u_direction:new n.bL(p)}),rainParticle:p=>({u_modelview:new n.bJ(p),u_projection:new n.bJ(p),u_time:new n.bM(p),u_cam_pos:new n.bL(p),u_texScreen:new n.bN(p),u_velocityConeAperture:new n.bM(p),u_velocity:new n.bM(p),u_boxSize:new n.bM(p),u_rainDropletSize:new n.bK(p),u_distortionStrength:new n.bM(p),u_rainDirection:new n.bL(p),u_color:new n.ca(p),u_screenSize:new n.bK(p),u_thinningCenterPos:new n.bK(p),u_thinningShape:new n.bL(p),u_thinningAffectedRatio:new n.bM(p),u_thinningParticleOffset:new n.bM(p),u_shapeDirectionalPower:new n.bM(p),u_shapeNormalPower:new n.bM(p),u_mode:new n.bM(p)}),vignette:p=>({u_vignetteShape:new n.bL(p),u_vignetteColor:new n.ca(p)}),occlusion:p=>({u_matrix:new n.bJ(p),u_anchorPos:new n.bL(p),u_screenSizePx:new n.bK(p),u_occluderSizePx:new n.bK(p),u_color:new n.ca(p)})};class Hs{constructor(a,o,m,v){this.id=Hs.uniqueIdxCounter,Hs.uniqueIdxCounter++,this.context=a;const S=a.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||v||o.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){this.id=Hs.uniqueIdxCounter,Hs.uniqueIdxCounter++;const o=this.context.gl;this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Hs.uniqueIdxCounter=0;const xp={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vp{constructor(a,o,m,v,S,D){this.length=o.length,this.attributes=m,this.itemSize=o.bytesPerElement,this.dynamicDraw=v,this.instanceCount=D,this.context=a;const L=a.gl;this.buffer=L.createBuffer(),a.bindVertexBuffer.set(this.buffer),L.bufferData(L.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||S||o.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,o){for(let m=0;m<this.attributes.length;m++){const v=o.attributes[this.attributes[m].name];v!==void 0&&a.enableVertexAttribArray(v)}}setVertexAttribPointers(a,o,m){for(let v=0;v<this.attributes.length;v++){const S=this.attributes[v],D=o.attributes[S.name];D!==void 0&&a.vertexAttribPointer(D,S.components,a[xp[S.type]],!1,this.itemSize,S.offset+this.itemSize*(m||0))}}setVertexAttribDivisor(a,o,m){for(let v=0;v<this.attributes.length;v++){const S=o.attributes[this.attributes[v].name];S!==void 0&&this.instanceCount&&this.instanceCount>0&&a.vertexAttribDivisor(S,m)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zi{constructor(a,o,m,v,S){this.context=a,this.width=o,this.height=m;const D=this.framebuffer=a.gl.createFramebuffer();v&&(this.colorAttachment=new Uu(a,D)),S&&(this.depthAttachmentType=S,this.depthAttachment=S==="renderbuffer"?new Oh(a,D):new Ro(a,D))}destroy(){const a=this.context.gl;if(this.colorAttachment){const o=this.colorAttachment.get();o&&a.deleteTexture(o)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const o=this.depthAttachment.get();o&&a.deleteRenderbuffer(o)}else{const o=this.depthAttachment.get();o&&a.deleteTexture(o)}a.deleteFramebuffer(this.framebuffer)}}class al{constructor(a,o){this.gl=a,this.clearColor=new jm(this),this.clearDepth=new Yl(this),this.clearStencil=new cp(this),this.colorMask=new Rd(this),this.depthMask=new Jl(this),this.stencilMask=new $h(this),this.stencilFunc=new up(this),this.stencilOp=new Fu(this),this.stencilTest=new Id(this),this.depthRange=new Uc(this),this.depthTest=new Gc(this),this.depthFunc=new ro(this),this.blend=new Yn(this),this.blendFunc=new Ql(this),this.blendColor=new Ao(this),this.blendEquation=new ko(this),this.cullFace=new ec(this),this.cullFaceSide=new dp(this),this.frontFace=new zd(this),this.program=new Nh(this),this.activeTexture=new ns(this),this.viewport=new Jn(this),this.bindFramebuffer=new Tn(this),this.bindRenderbuffer=new Hc(this),this.bindTexture=new Is(this),this.bindVertexBuffer=new Om(this),this.bindElementBuffer=new Vu(this),this.bindVertexArrayOES=new T0(this),this.pixelStoreUnpack=new E0(this),this.pixelStoreUnpackPremultiplyAlpha=new Bh(this),this.pixelStoreUnpackFlipY=new jh(this),this.options=o?{...o}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=a.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=a.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=a.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=o&&!!o.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=a.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=a.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=a.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),this.maxPointSize=a.getParameter(a.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,o,m){return new Hs(this,a,o,m)}createVertexBuffer(a,o,m,v,S){return new vp(this,a,o,m,v,S)}createRenderbuffer(a,o,m){const v=this.gl,S=v.createRenderbuffer();return this.bindRenderbuffer.set(S),v.renderbufferStorage(v.RENDERBUFFER,a,o,m),this.bindRenderbuffer.set(null),S}createFramebuffer(a,o,m,v){return new zi(this,a,o,m,v)}clear({color:a,depth:o,stencil:m,colorMask:v}){const S=this.gl;let D=0;a&&(D|=S.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set(v||[!0,!0,!0,!0])),o!==void 0&&(D|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),m!==void 0&&(D|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),S.clear(D)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){n.bn(a.blendFunction,ua.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor),a.blendEquation?this.blendEquation.set(a.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(a.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let Fd;function Vd(p,a,o,m,v,S,D){const L=p.context,O=L.gl,U=p.transform,q=p.getOrCreateProgram("collisionBox"),Z=[];let X=0,ae=0;for(let Oe=0;Oe<m.length;Oe++){const Ze=m[Oe],Ue=a.getTile(Ze),We=Ue.getBucket(o);if(!We)continue;const qe=ri(Ze,We,U);let tt=qe;v[0]===0&&v[1]===0||(tt=p.translatePosMatrix(qe,Ue,v,S));const rt=D?We.textCollisionBox:We.iconCollisionBox,Et=We.collisionCircleArray;if(Et.length>0){const _t=n.ab.mat4.create(),st=tt;n.ab.mat4.mul(_t,We.placementInvProjMatrix,U.glCoordMatrix),n.ab.mat4.mul(_t,_t,We.placementViewportMatrix),Z.push({circleArray:Et,circleOffset:ae,transform:st,invTransform:_t,projection:We.getProjection()}),X+=Et.length/4,ae=X}rt&&(p.terrain&&p.terrain.setupElevationDraw(Ue,q),q.draw(p,O.LINES,Rr.disabled,ea.disabled,p.colorModeForRenderPass(),Gr.disabled,pp(tt,U,Ue,We.getProjection()),o.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,null,U.zoom,null,[rt.collisionVertexBuffer,rt.collisionVertexBufferExt]))}if(!D||!Z.length)return;const me=p.getOrCreateProgram("collisionCircle"),he=new n.cV;he.resize(4*X),he._trim();let xe=0;for(const Oe of Z)for(let Ze=0;Ze<Oe.circleArray.length/4;Ze++){const Ue=4*Ze,We=Oe.circleArray[Ue+0],qe=Oe.circleArray[Ue+1],tt=Oe.circleArray[Ue+2],rt=Oe.circleArray[Ue+3];he.emplace(xe++,We,qe,tt,rt,0),he.emplace(xe++,We,qe,tt,rt,1),he.emplace(xe++,We,qe,tt,rt,2),he.emplace(xe++,We,qe,tt,rt,3)}(!Fd||Fd.length<2*X)&&(Fd=function(Oe){const Ze=2*Oe,Ue=new n.aU;Ue.resize(Ze),Ue._trim();for(let We=0;We<Ze;We++){const qe=6*We;Ue.uint16[qe+0]=4*We+0,Ue.uint16[qe+1]=4*We+1,Ue.uint16[qe+2]=4*We+2,Ue.uint16[qe+3]=4*We+2,Ue.uint16[qe+4]=4*We+3,Ue.uint16[qe+5]=4*We+0}return Ue}(X));const _e=L.createIndexBuffer(Fd,!0),Me=L.createVertexBuffer(he,n.cW.members,!0);for(const Oe of Z){const Ze={u_matrix:Oe.transform,u_inv_matrix:Oe.invTransform,u_camera_to_center_distance:(Be=U).getCameraToCenterDistance(Oe.projection),u_viewport_size:[Be.width,Be.height]};me.draw(p,O.TRIANGLES,Rr.disabled,ea.disabled,p.colorModeForRenderPass(),Gr.disabled,Ze,o.id,Me,_e,n.b7.simpleSegment(0,2*Oe.circleOffset,Oe.circleArray.length,Oe.circleArray.length/2),null,U.zoom)}var Be;Me.destroy(),_e.destroy()}const Zc=n.ab.mat4.create();function nl(p){const a=p._camera.getWorldToCamera(p.worldSize,1),o=n.ab.mat4.multiply([],a,p.globeMatrix);n.ab.mat4.invert(o,o);const m=[0,0,0],v=[0,1,0,0];return n.ab.vec4.transformMat4(v,v,o),m[0]=v[0],m[1]=v[1],m[2]=v[2],n.ab.vec3.normalize(m,m),m}function en({width:p,height:a,anchor:o,textOffset:m,textScale:v},S){const{horizontalAlign:D,verticalAlign:L}=n.bD(o),O=-(D-.5)*p,U=-(L-.5)*a,q=n.bC(o,m);return new n.P((O/v+q[0])*S,(U/v+q[1])*S)}function rn(p,a,o,m,v,S,D,L,O,U,q){const Z=p.text.placedSymbolArray,X=p.text.dynamicLayoutVertexArray,ae=p.icon.dynamicLayoutVertexArray,me={},he=p.getProjection(),xe=Dh(L,he,S),_e=S.elevation,Me=he.upVectorScale(L.canonical,S.center.lat,S.worldSize).metersToTile;X.clear();for(let Be=0;Be<Z.length;Be++){const Oe=Z.get(Be),{tileAnchorX:Ze,tileAnchorY:Ue,numGlyphs:We}=Oe,qe=Oe.hidden||!Oe.crossTileID||p.allowVerticalPlacement&&!Oe.placedOrientation?null:m[Oe.crossTileID];if(qe){let tt=0,rt=0,Et=0;if(_e){const Mt=_e?_e.getAtTileOffset(L,Ze,Ue):0,[Qt,Ot,zt]=he.upVector(L.canonical,Ze,Ue);tt=Mt*Qt*Me,rt=Mt*Ot*Me,Et=Mt*zt*Me}let[_t,st,mt,Bt]=Qa(Oe.projectedAnchorX+tt,Oe.projectedAnchorY+rt,Oe.projectedAnchorZ+Et,o?xe:D);const qt=Ch(S.getCameraToCenterDistance(he),Bt);let Kt=v.evaluateSizeForFeature(p.textSizeData,U,Oe)*qt/n.bw;o&&(Kt*=p.tilePixelRatio/O);const xt=en(qe,Kt);o?({x:_t,y:st,z:mt}=he.projectTilePoint(Ze+xt.x,Ue+xt.y,L.canonical),[_t,st,mt]=Qa(_t+tt,st+rt,mt+Et,D)):(a&&xt._rotate(-S.angle),_t+=xt.x,st+=xt.y,mt=0);const Ft=p.allowVerticalPlacement&&Oe.placedOrientation===n.bq.vertical?Math.PI/2:0;for(let Mt=0;Mt<We;Mt++)n.bt(X,_t,st,mt,Ft);q&&Oe.associatedIconIndex>=0&&(me[Oe.associatedIconIndex]={x:_t,y:st,z:mt,angle:Ft})}else Ru(We,X)}if(q){ae.clear();const Be=p.icon.placedSymbolArray;for(let Oe=0;Oe<Be.length;Oe++){const Ze=Be.get(Oe),{numGlyphs:Ue}=Ze,We=me[Oe];if(Ze.hidden||!We)Ru(Ue,ae);else{const{x:qe,y:tt,z:rt,angle:Et}=We;for(let _t=0;_t<Ue;_t++)n.bt(ae,qe,tt,rt,Et)}}p.icon.dynamicLayoutVertexBuffer.updateData(ae)}p.text.dynamicLayoutVertexBuffer.updateData(X)}function Ea(p,a,o,m,v,S,D={}){const L=o.paint.get("icon-translate"),O=o.paint.get("text-translate"),U=o.paint.get("icon-translate-anchor"),q=o.paint.get("text-translate-anchor"),Z=o.layout.get("icon-rotation-alignment"),X=o.layout.get("text-rotation-alignment"),ae=o.layout.get("icon-pitch-alignment"),me=o.layout.get("text-pitch-alignment"),he=o.layout.get("icon-keep-upright"),xe=o.layout.get("text-keep-upright"),_e=o.paint.get("icon-color-saturation"),Me=o.paint.get("icon-color-contrast"),Be=o.paint.get("icon-color-brightness-min"),Oe=o.paint.get("icon-color-brightness-max"),Ze=o.layout.get("symbol-elevation-reference")==="sea",Ue=p.context,We=Ue.gl,qe=p.transform,tt=Z==="map",rt=X==="map",Et=ae==="map",_t=me==="map",st=o.layout.get("symbol-sort-key").constantOr(1)!==void 0;let mt=!1;const Bt=p.depthModeForSublayer(0,Rr.ReadOnly),qt=[n.at(qe.center.lng),n.aA(qe.center.lat)],Kt=o.layout.get("text-variable-anchor"),xt=qe.projection.name==="globe",Ft=[],Mt=[0,-1,0];for(const Qt of m){const Ot=a.getTile(Qt),zt=Ot.getBucket(o);if(!zt||zt.projection.name==="mercator"&&xt||zt.fullyClipped)continue;const dr=zt.projection.name==="globe",rr=dr?n.ae(qe.zoom):0,yr=Dh(Qt,zt.getProjection(),qe),_r=qe.calculatePixelsToTileUnitsMatrix(Ot),Kr=Kt&&zt.hasTextData(),Ar=zt.hasIconTextFit()&&Kr&&zt.hasIconData(),zr=zt.getProjection().createInversionMatrix(qe,Qt.canonical),Hr=Fa=>{qe.depthOcclusionForSymbolsAndCircles&&(o.hasInitialOcclusionOpacityProperties||p.terrain)&&(Fa.push("DEPTH_D24"),Fa.push("DEPTH_OCCLUSION"))},pa=()=>{const Fa=tt&&o.layout.get("symbol-placement")!=="point",Zr=[];Hr(Zr);const ya=Fa||Ar,xa=o.paint.get("icon-image-cross-fade").constantOr(0);p.terrainRenderModeElevated()&&Et&&Zr.push("PITCH_WITH_MAP_TERRAIN"),dr&&(Zr.push("PROJECTION_GLOBE_VIEW"),ya&&Zr.push("PROJECTED_POS_ON_VIEWPORT")),xa>0&&Zr.push("ICON_TRANSITION"),zt.icon.zOffsetVertexBuffer&&Zr.push("Z_OFFSET"),_e===0&&Me===0&&Be===0&&Oe===1||Zr.push("COLOR_ADJUSTMENT"),zt.sdfIcons&&Zr.push("RENDER_SDF");const Pa=zt.icon.programConfigurations.get(o.id),wa=p.getOrCreateProgram("symbol",{config:Pa,defines:Zr}),En=Ot.imageAtlasTexture?Ot.imageAtlasTexture.size:[0,0],ai=zt.iconSizeData,Cn=n.bp(ai,qe.zoom),nn=Et||qe.pitch!==0,Ga=Eo(yr,Ot.tileID.canonical,Et,tt,qe,zt.getProjection(),_r),qr=Pn(yr,Ot.tileID.canonical,Et,tt,qe,zt.getProjection(),_r),vn=p.translatePosMatrix(qr,Ot,L,U,!0),Qn=p.translatePosMatrix(yr,Ot,L,U),an=ya?Zc:Ga,zn=tt&&!Et&&!Fa;let Yi=Mt;!xt&&!qe.mercatorFromTransition||tt||(Yi=nl(qe));const Ji=dr?Yi:Mt,fi=o.getColorAdjustmentMatrix(_e,Me,Be,Oe),Qi=gp(ai.kind,Cn,zn,Et,p,Qn,an,vn,Ze,!1,En,[0,0],!0,Qt,rr,qt,zr,Ji,zt.getProjection(),fi,xa),ho=Ot.imageAtlasTexture?Ot.imageAtlasTexture:null,us=o.layout.get("icon-size").constantOr(0)!==1||zt.iconsNeedLinear,ll=zt.sdfIcons||p.options.rotating||p.options.zooming||us||nn?We.LINEAR:We.NEAREST,ds=zt.sdfIcons&&o.paint.get("icon-halo-width").constantOr(1)!==0,li=p.terrain&&Et&&Fa?n.ab.mat4.invert(n.ab.mat4.create(),Ga):Zc;if(Fa&&zt.icon){const No=qe.elevation,vc=No?No.getAtTileOffsetFunc(Qt,qe.center.lat,qe.worldSize,zt.getProjection()):null,_c=zc(yr,Ot.tileID.canonical,Et,tt,qe,zt.getProjection(),_r);Zf(zt,yr,p,!1,_c,qr,Et,he,vc,Qt)}return{program:wa,buffers:zt.icon,uniformValues:Qi,atlasTexture:ho,atlasTextureIcon:null,atlasInterpolation:ll,atlasInterpolationIcon:null,isSDF:zt.sdfIcons,hasHalo:ds,tile:Ot,labelPlaneMatrixInv:li}},oa=()=>{const Fa=rt&&o.layout.get("symbol-placement")!=="point",Zr=[],ya=Fa||Kt||Ar;p.terrainRenderModeElevated()&&_t&&Zr.push("PITCH_WITH_MAP_TERRAIN"),dr&&(Zr.push("PROJECTION_GLOBE_VIEW"),ya&&Zr.push("PROJECTED_POS_ON_VIEWPORT")),zt.text.zOffsetVertexBuffer&&Zr.push("Z_OFFSET"),zt.iconsInText&&Zr.push("RENDER_TEXT_AND_SYMBOL"),Zr.push("RENDER_SDF"),Hr(Zr);const xa=zt.text.programConfigurations.get(o.id),Pa=p.getOrCreateProgram("symbol",{config:xa,defines:Zr});let wa,En=[0,0],ai=null;const Cn=zt.textSizeData;zt.iconsInText&&(En=Ot.imageAtlasTexture?Ot.imageAtlasTexture.size:[0,0],ai=Ot.imageAtlasTexture?Ot.imageAtlasTexture:null,wa=_t||qe.pitch!==0||p.options.rotating||p.options.zooming||Cn.kind==="composite"||Cn.kind==="camera"?We.LINEAR:We.NEAREST);const nn=Ot.glyphAtlasTexture?Ot.glyphAtlasTexture.size:[0,0],Ga=o.layout.get("text-size-scale-range"),qr=n.aw(p.scaleFactor,Ga[0],Ga[1]),vn=n.bp(Cn,qe.zoom,qr),Qn=Eo(yr,Ot.tileID.canonical,_t,rt,qe,zt.getProjection(),_r),an=Pn(yr,Ot.tileID.canonical,_t,rt,qe,zt.getProjection(),_r),zn=p.translatePosMatrix(an,Ot,O,q,!0),Yi=p.translatePosMatrix(yr,Ot,O,q),Ji=ya?Zc:Qn,fi=rt&&!_t&&!Fa;let Qi=Mt;!xt&&!qe.mercatorFromTransition||rt||(Qi=nl(qe));const ho=gp(Cn.kind,vn,fi,_t,p,Yi,Ji,zn,Ze,!0,nn,En,!0,Qt,rr,qt,zr,dr?Qi:Mt,zt.getProjection(),null,null,qr),us=Ot.glyphAtlasTexture?Ot.glyphAtlasTexture:null,ll=We.LINEAR,ds=o.paint.get("text-halo-width").constantOr(1)!==0,li=p.terrain&&_t&&Fa?n.ab.mat4.invert(n.ab.mat4.create(),Qn):Zc;if(Fa&&zt.text){const No=qe.elevation,vc=No?No.getAtTileOffsetFunc(Qt,qe.center.lat,qe.worldSize,zt.getProjection()):null,_c=zc(yr,Ot.tileID.canonical,_t,rt,qe,zt.getProjection(),_r);Zf(zt,yr,p,!0,_c,an,_t,xe,vc,Qt)}return{program:Pa,buffers:zt.text,uniformValues:ho,atlasTexture:us,atlasTextureIcon:ai,atlasInterpolation:ll,atlasInterpolationIcon:wa,isSDF:!0,hasHalo:ds,tile:Ot,labelPlaneMatrixInv:li}},pn=zt.icon.segments.get().length,mn=zt.text.segments.get().length,Ua=pn&&!D.onlyText?pa():null,Wa=mn&&!D.onlyIcons?oa():null,ia=o.paint.get("icon-opacity").constantOr(1),jr=o.paint.get("text-opacity").constantOr(1);if(st&&zt.canOverlap){mt=!0;const Fa=ia&&!D.onlyText?zt.icon.segments.get():[],Zr=jr&&!D.onlyIcons?zt.text.segments.get():[];for(const ya of Fa)Ft.push({segments:new n.b7([ya]),sortKey:ya.sortKey,state:Ua});for(const ya of Zr)Ft.push({segments:new n.b7([ya]),sortKey:ya.sortKey,state:Wa})}else D.onlyText||Ft.push({segments:ia?zt.icon.segments:new n.b7([]),sortKey:0,state:Ua}),D.onlyIcons||Ft.push({segments:jr?zt.text.segments:new n.b7([]),sortKey:0,state:Wa})}mt&&Ft.sort((Qt,Ot)=>Qt.sortKey-Ot.sortKey);for(const Qt of Ft){const Ot=Qt.state;if(Ot)if(p.terrain?p.terrain.setupElevationDraw(Ot.tile,Ot.program,{useDepthForOcclusion:qe.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Ot.labelPlaneMatrixInv}):p.setupDepthForOcclusion(qe.depthOcclusionForSymbolsAndCircles,Ot.program),Ue.activeTexture.set(We.TEXTURE0),Ot.atlasTexture&&Ot.atlasTexture.bind(Ot.atlasInterpolation,We.CLAMP_TO_EDGE,!0),Ot.atlasTextureIcon&&(Ue.activeTexture.set(We.TEXTURE1),Ot.atlasTextureIcon&&Ot.atlasTextureIcon.bind(Ot.atlasInterpolationIcon,We.CLAMP_TO_EDGE,!0)),p.uploadCommonLightUniforms(p.context,Ot.program),Ot.hasHalo){const zt=Ot.uniformValues;zt.u_is_halo=1,sc(Ot.buffers,Qt.segments,o,p,Ot.program,Bt,v,S,zt,2),zt.u_is_halo=0}else{if(Ot.isSDF){const zt=Ot.uniformValues;Ot.hasHalo&&(zt.u_is_halo=1,sc(Ot.buffers,Qt.segments,o,p,Ot.program,Bt,v,S,zt,1)),zt.u_is_halo=0}sc(Ot.buffers,Qt.segments,o,p,Ot.program,Bt,v,S,Ot.uniformValues,1)}}}function sc(p,a,o,m,v,S,D,L,O,U){const q=[p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer,p.iconTransitioningVertexBuffer,p.globeExtVertexBuffer,p.zOffsetVertexBuffer];v.draw(m,m.context.gl.TRIANGLES,S,D,L,Gr.disabled,O,o.id,p.layoutVertexBuffer,p.indexBuffer,a,o.paint,m.transform.zoom,p.programConfigurations.get(o.id),q,U)}function oc(p,a,o,m,v,S,D){const L=p.context.gl,O=o.paint.get("fill-pattern"),U=o.is3D(),q=U?p.stencilModeFor3D():ea.disabled,Z=O&&O.constantOr(1);let X,ae,me,he,xe;D?(ae=Z&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=L.LINES):(ae=Z?"fillPattern":"fill",X=L.TRIANGLES);for(const _e of m){const Me=a.getTile(_e);if(Z&&!Me.patternsLoaded())continue;const Be=Me.getBucket(o);if(!Be)continue;p.prepareDrawTile();const Oe=Be.programConfigurations.get(o.id),Ze=p.isTileAffectedByFog(_e),Ue=p.getOrCreateProgram(ae,{config:Oe,overrideFog:Ze});Z&&(p.context.activeTexture.set(L.TEXTURE0),Me.imageAtlasTexture&&Me.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Oe.updatePaintBuffers());const We=O.constantOr(null);if(We&&Me.imageAtlas){const rt=Me.imageAtlas,Et=n.A.from(We),_t=rt.patternPositions[Et.getSerializedPrimary()];_t&&Oe.setConstantPatternPositions(_t)}const qe=p.translatePosMatrix(_e.projMatrix,Me,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor")),tt=o.paint.get("fill-emissive-strength");if(D){he=Be.indexBuffer2,xe=Be.segments2;const rt=p.terrain&&p.terrain.renderingToTexture?p.terrain.drapeBufferSize:[L.drawingBufferWidth,L.drawingBufferHeight];me=ae==="fillOutlinePattern"&&Z?Ku(qe,tt,p,Me,rt):jd(qe,tt,rt)}else he=Be.indexBuffer,xe=Be.segments,me=Z?nc(qe,tt,p,Me):Wu(qe,tt);p.uploadCommonUniforms(p.context,Ue,_e.toUnwrapped()),Ue.draw(p,X,v,U?q:p.stencilModeForClipping(_e),S,Gr.disabled,me,o.id,Be.layoutVertexBuffer,he,xe,o.paint,p.transform.zoom,Oe,void 0)}}function il(p,a,o,m,v,S,D,L){o.resetLayerRenderingStats(p);const O=p.context,U=O.gl,q=p.transform,Z=o.paint.get("fill-extrusion-pattern"),X=Z.constantOr(1),ae=o.paint.get("fill-extrusion-opacity"),me=p.style.enable3dLights(),he=o.paint.get(me&&!X?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),xe=[o.paint.get("fill-extrusion-ambient-occlusion-intensity"),he],_e=o.layout.get("fill-extrusion-edge-radius"),Me=_e>0&&!o.paint.get("fill-extrusion-rounded-roof"),Be=Me?0:_e,Oe=q.projection.name==="globe"?n.d3():0,Ze=q.projection.name==="globe",Ue=Ze?n.ae(q.zoom):0,We=[n.at(q.center.lng),n.aA(q.center.lat)],qe=o.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",tt=o.paint.get("fill-extrusion-flood-light-color").toRenderColor(qe?null:o.lut).toArray01().slice(0,3),rt=o.paint.get("fill-extrusion-flood-light-intensity"),Et=o.paint.get("fill-extrusion-vertical-scale"),_t=o.paint.get("fill-extrusion-line-width").constantOr(1)!==0,st=o.paint.get("fill-extrusion-height-alignment"),mt=o.paint.get("fill-extrusion-base-alignment"),Bt=bl(p,o.paint.get("fill-extrusion-cutoff-fade-range")),qt=[];let Kt;Ze&&qt.push("PROJECTION_GLOBE_VIEW"),xe[0]>0&&qt.push("FAUX_AO"),Me&&qt.push("ZERO_ROOF_RADIUS"),L&&qt.push("HAS_CENTROID"),rt>0&&qt.push("FLOOD_LIGHT"),Bt.shouldRenderCutoff&&qt.push("RENDER_CUTOFF"),_t&&qt.push("RENDER_WALL_MODE");const xt=p.renderPass==="shadow",Ft=p.shadowRenderer,Mt=xt&&!!Ft;p.shadowRenderer&&(p.shadowRenderer.useNormalOffset=!0);let Qt=[0,0,0];if(Ft){const dr=p.style.directionalLight,rr=p.style.ambientLight;dr&&rr&&(Qt=wl(p.style,dr,rr)),xt||(qt.push("RENDER_SHADOWS","DEPTH_TEXTURE"),Ft.useNormalOffset&&qt.push("NORMAL_OFFSET")),Kt=qt.concat(["SHADOWS_SINGLE_CASCADE"])}const Ot=Mt?"fillExtrusionDepth":X?"fillExtrusionPattern":"fillExtrusion",zt=o.getLayerRenderingStats();for(const dr of m){const rr=a.getTile(dr),yr=rr.getBucket(o);if(!yr||yr.projection.name!==q.projection.name)continue;let _r=!1;Ft&&(_r=Ft.getMaxCascadeForTile(dr.toUnwrapped())===0);const Kr=p.isTileAffectedByFog(dr),Ar=yr.programConfigurations.get(o.id),zr=p.getOrCreateProgram(Ot,{config:Ar,defines:_r?Kt:qt,overrideFog:Kr});if(p.terrain&&p.terrain.setupElevationDraw(rr,zr,{useMeterToDem:!0}),!yr.centroidVertexBuffer){const Wa=zr.attributes.a_centroid_pos;Wa!==void 0&&U.vertexAttrib2f(Wa,0,0)}!xt&&Ft&&Ft.setupShadows(rr.tileID.toUnwrapped(),zr,"vector-tile",rr.tileID.overscaledZ),X&&(p.context.activeTexture.set(U.TEXTURE0),rr.imageAtlasTexture&&rr.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),Ar.updatePaintBuffers());const Hr=Z.constantOr(null);if(Hr&&rr.imageAtlas){const Wa=rr.imageAtlas,ia=n.A.from(Hr),jr=Wa.patternPositions[ia.getSerializedPrimary()];jr&&Ar.setConstantPatternPositions(jr)}const pa=o.paint.get("fill-extrusion-vertical-gradient"),oa=1/yr.tileToMeter;let pn;if(xt&&Ft){if(tr(rr.tileID,yr,p))continue;const Wa=Ft.calculateShadowPassMatrixFromTile(rr.tileID.toUnwrapped());pn=Bd(Wa,Be,oa,Et,st,mt)}else{const Wa=p.translatePosMatrix(dr.expandedProjMatrix,rr,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),ia=q.projection.createInversionMatrix(q,dr.canonical);pn=X?Um(Wa,p,pa,ae,xe,Be,oa,dr,rr,Oe,st,mt,Ue,We,ia,tt,Et):fp(Wa,p,pa,ae,xe,Be,oa,dr,Oe,st,mt,Ue,We,ia,tt,Et,rt,Qt)}p.uploadCommonUniforms(O,zr,dr.toUnwrapped(),null,Bt);let mn=yr.segments;if(q.projection.name==="mercator"&&!xt&&(mn=yr.getVisibleSegments(rr.tileID,p.terrain,p.transform.getFrustum(0)),!mn.get().length))continue;if(zt)if(xt)for(const Wa of mn.get())zt.numRenderedVerticesInShadowPass+=Wa.primitiveLength;else for(const Wa of mn.get())zt.numRenderedVerticesInTransparentPass+=Wa.primitiveLength;const Ua=[];(p.terrain||L)&&Ua.push(yr.centroidVertexBuffer),Ze&&Ua.push(yr.layoutVertexExtBuffer),_t&&Ua.push(yr.wallVertexBuffer),zr.draw(p,O.gl.TRIANGLES,v,S,D,Gr.backCCW,pn,o.id,yr.layoutVertexBuffer,yr.indexBuffer,mn,o.paint,p.transform.zoom,Ar,Ua)}p.shadowRenderer&&(p.shadowRenderer.useNormalOffset=!1)}function Cl(p,a,o,m,v,S,D,L,O,U,q,Z,X,ae,me,he,xe,_e,Me){const Be=p.context,Oe=Be.gl,Ze=p.transform,Ue=p.transform.zoom,We=[],qe=bl(p,o.paint.get("fill-extrusion-cutoff-fade-range"));U==="clear"?(We.push("CLEAR_SUBPASS"),Me&&(We.push("CLEAR_FROM_TEXTURE"),Be.activeTexture.set(Oe.TEXTURE0),Me.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE))):U==="sdf"&&We.push("SDF_SUBPASS"),xe&&We.push("HAS_CENTROID"),qe.shouldRenderCutoff&&We.push("RENDER_CUTOFF");const tt=o.layout.get("fill-extrusion-edge-radius"),rt=(Et,_t,st,mt,Bt)=>{const qt=_t.programConfigurations.get(o.id),Kt=p.isTileAffectedByFog(Et),xt=p.getOrCreateProgram("fillExtrusionGroundEffect",{config:qt,defines:We,overrideFog:Kt}),Ft=((Qt,Ot,zt,dr,rr,yr,_r,Kr,Ar,zr,Hr)=>({u_matrix:Ot,u_opacity:zt,u_ao_pass:dr?1:0,u_meter_to_tile:rr,u_ao:yr,u_flood_light_intensity:_r,u_flood_light_color:Kr,u_attenuation:Ar,u_edge_radius:zr,u_fb:0,u_fb_size:Hr,u_dynamic_offset:1}))(0,mt,q,O,Bt,[Z,X*Bt],ae,me,he,Ue>=17?0:tt*Bt,Me?Me.size[0]:0),Mt=[];xe&&Mt.push(_t.hiddenByLandmarkVertexBuffer),p.uploadCommonUniforms(Be,xt,Et.toUnwrapped(),null,qe),xt.draw(p,Be.gl.TRIANGLES,v,S,D,L,Ft,o.id,_t.vertexBuffer,_t.indexBuffer,st,o.paint,Ue,qt,Mt)};for(const Et of m){const _t=a.getTile(Et),st=_t.getBucket(o);if(!st||st.projection.name!==Ze.projection.name||!st.groundEffect||st.groundEffect&&!st.groundEffect.hasData())continue;const mt=st.groundEffect,Bt=1/st.tileToMeter;{const qt=p.translatePosMatrix(Et.projMatrix,_t,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),Kt=mt.getDefaultSegment();rt(Et,mt,Kt,qt,Bt)}if(_e)for(let qt=0;qt<4;qt++){const Kt=n.d4[qt](Et),xt=a.getTile(Kt);if(!xt)continue;const Ft=xt.getBucket(o);if(!Ft||Ft.projection.name!==Ze.projection.name||!Ft.groundEffect||Ft.groundEffect&&!Ft.groundEffect.hasData())continue;const Mt=Ft.groundEffect;let Qt,Ot;qt===0?(Qt=[-n.ag,0,0],Ot=1):qt===1?(Qt=[n.ag,0,0],Ot=0):qt===2?(Qt=[0,-n.ag,0],Ot=3):(Qt=[0,n.ag,0],Ot=2);const zt=Mt.regionSegments[Ot];if(!zt)continue;const dr=new Float32Array(16);n.ab.mat4.translate(dr,Et.projMatrix,Qt),rt(Et,Mt,zt,p.translatePosMatrix(dr,_t,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),Bt)}}}function Ud(p,a,o,m,v,S,D){m.centroidVertexArray.length===0&&m.createCentroidsBuffer();const L=S?S.findDEMTileFor(o):null;if(!(L&&L.dem||D))return;S&&L&&L.dem&&m.selfDEMTileTimestamp!==L.dem._timestamp&&(m.borderDoneWithNeighborZ=[-1,-1,-1,-1],m.selfDEMTileTimestamp=L.dem._timestamp);const O=_e=>new n.P(Math.ceil((_e+n.d7)*n.d8),0),U=_e=>{const Me=a.getSource().minzoom,Be=Ze=>{const Ue=a.getTileByID(Ze);if(Ue&&Ue.hasData())return Ue.getBucket(v)},Oe=[0,-1,1];for(const Ze of Oe){if(_e.overscaledZ+Ze<Me)continue;const Ue=Be(_e.calculateScaledKey(_e.overscaledZ+Ze));if(Ue)return Ue}},q=[0,0,0],Z=(_e,Me)=>(q[0]=Math.min(_e.min.y,Me.min.y),q[1]=Math.max(_e.max.y,Me.max.y),q[2]=n.ag-Me.min.x>_e.max.x?Me.min.x-n.ag:_e.max.x,q),X=(_e,Me)=>(q[0]=Math.min(_e.min.x,Me.min.x),q[1]=Math.max(_e.max.x,Me.max.x),q[2]=n.ag-Me.min.y>_e.max.y?Me.min.y-n.ag:_e.max.y,q),ae=[(_e,Me)=>Z(_e,Me),(_e,Me)=>Z(Me,_e),(_e,Me)=>X(_e,Me),(_e,Me)=>X(Me,_e)],me=(_e,Me,Be,Oe,Ze,Ue,We)=>{if(!S)return 0;const qe=[[Ue?Be:_e,Ue?_e:Be,0],[Ue?Be:Me,Ue?Me:Be,0]],tt=We<0?n.ag+We:We,rt=[Ue?tt:(_e+Me)/2,Ue?(_e+Me)/2:tt,0];return Be===0&&We<0||Be!==0&&We>0?S.getForTilePoints(Ze,[rt],!0,Oe):qe.push(rt),S.getForTilePoints(o,qe,!0,L),Math.max(qe[0][2],qe[1][2],rt[2])/S.exaggeration()};for(let _e=0;_e<4;_e++){const Me=m.borderFeatureIndices[_e];if(Me.length===0)continue;const Be=n.d4[_e](o),Oe=U(Be);if(!(Oe&&Oe instanceof n.d5))continue;const Ze=S?S.findDEMTileFor(Be):null;if(!(Ze&&Ze.dem||D)||(S&&Ze&&Ze.dem&&m.borderDEMTileTimestamp[_e]!==Ze.dem._timestamp&&(m.borderDoneWithNeighborZ[_e]=-1,m.borderDEMTileTimestamp[_e]=Ze.dem._timestamp),m.borderDoneWithNeighborZ[_e]===Oe.canonical.z))continue;Oe.centroidVertexArray.length===0&&Oe.createCentroidsBuffer();const Ue=(_e<2?1:5)-_e,We=Oe.borderDoneWithNeighborZ[Ue]!==m.canonical.z,qe=Oe.borderFeatureIndices[Ue];let tt=0;if(m.canonical.z!==Oe.canonical.z){for(const rt of Me)m.showCentroid(m.featuresOnBorder[rt]);if(We)for(const rt of qe)Oe.showCentroid(Oe.featuresOnBorder[rt]);m.borderDoneWithNeighborZ[_e]=Oe.canonical.z,Oe.borderDoneWithNeighborZ[Ue]=m.canonical.z}for(const rt of Me){const Et=m.featuresOnBorder[rt],_t=m.centroidData[Et.centroidDataIndex],st=Et.borders[_e];let mt;for(;tt<qe.length;){mt=Oe.featuresOnBorder[qe[tt]];const Bt=mt.borders[Ue];if(Bt[1]>st[0]+3||Bt[0]>st[0]-3)break;Oe.showCentroid(mt),tt++}if(mt&&tt<qe.length){const Bt=tt;let qt=0;for(;!(mt.borders[Ue][0]>st[1]-3)&&(qt++,++tt!==qe.length);)mt=Oe.featuresOnBorder[qe[tt]];mt=Oe.featuresOnBorder[qe[Bt]];let Kt=!1;if(qt>=1){const Mt=mt.borders[Ue];Math.abs(st[0]-Mt[0])<3&&Math.abs(st[1]-Mt[1])<3&&(qt=1,Kt=!0,tt=Bt+1)}else if(qt===0){m.showCentroid(Et);continue}const xt=Oe.centroidData[mt.centroidDataIndex];D&&Kt&&(((he=_t).flags|(xe=xt).flags)&n.d6?(he.flags|=n.d6,xe.flags|=n.d6):(he.flags&=~n.d6,xe.flags&=~n.d6));const Ft=Et.intersectsCount()>1||mt.intersectsCount()>1;if(qt>1)tt=Bt,_t.centroidXY=xt.centroidXY=new n.P(0,0);else if(Ze&&Ze.dem&&!Ft){const Mt=ae[_e](_t,xt),Qt=_e%2?n.ag-1:0,Ot=me(Mt[0],Math.min(n.ag-1,Mt[1]),Qt,Ze,Be,_e<2,Mt[2]);_t.centroidXY=xt.centroidXY=O(Ot)}else Ft?_t.centroidXY=xt.centroidXY=new n.P(0,0):(_t.centroidXY=m.encodeBorderCentroid(Et),xt.centroidXY=Oe.encodeBorderCentroid(mt));m.writeCentroidToBuffer(_t),Oe.writeCentroidToBuffer(xt)}else m.showCentroid(Et)}m.borderDoneWithNeighborZ[_e]=Oe.canonical.z,Oe.borderDoneWithNeighborZ[Ue]=m.canonical.z}var he,xe;(m.needsCentroidUpdate||!m.centroidVertexBuffer&&m.centroidVertexArray.length!==0)&&m.uploadCentroid(p)}const Gd=[1,0,0],Hd=[0,1,0],Wn=[0,0,1];function tr(p,a,o){const m=o.transform,v=o.shadowRenderer;if(!v)return!0;const S=p.toUnwrapped(),D=m.tileSize*v._cascades[o.currentShadowCascade].scale;let L=a.maxHeight;if(m.elevation){const he=m.elevation.getMinMaxForTile(p);he&&(L+=he.max)}const O=[...v.shadowDirection];O[2]=-O[2];const U=v.computeSimplifiedTileShadowVolume(S,L,D,O);if(!U)return!1;const q=[Gd,Hd,Wn,O,[O[0],0,O[2]],[0,O[1],O[2]]],Z=m.projection.name==="globe",X=m.scaleZoom(D),ae=n.bR.fromInvProjectionMatrix(m.invProjMatrix,m.worldSize,X,!Z),me=v.getCurrentCascadeFrustum();return ae.intersectsPrecise(U.vertices,U.planes,q)===0||me.intersectsPrecise(U.vertices,U.planes,q)===0}function vr(p){return[p[0]*n.d9,p[1]*n.d9,p[2]*n.d9,0]}function lc(p,a,o,m,v,S,D,L,O){const U=m.getSource(),q=o.globeSharedBuffers;if(!q)return;let Z,X,ae;if(a&&(Z=m.getTile(a)),U instanceof n.aJ?(X=U.texture,ae=n.cI(0,0,o.transform)):Z&&a&&(X=Z.texture,ae=n.cI(a.canonical.z,a.canonical.x,o.transform)),!X||!ae)return;p||(ae=n.ab.mat4.scale(n.ab.mat4.create(),ae,[1,-1,1]));const me=o.context,he=me.gl,xe=v.paint.get("raster-resampling")==="nearest"?he.NEAREST:he.LINEAR,_e=o.colorModeForDrapableLayerRenderPass(S),Me=D.defines;Me.push("GLOBE_POLES");const Be=new Rr(he.LEQUAL,Rr.ReadWrite,o.depthRangeFor3D),Oe=Float32Array.from(o.transform.expandedFarZProjMatrix),Ze=Float32Array.from(n.bb(n.cH(new n.bT(0,0,0))));o.terrain&&o.terrain.prepareDrawTile(),me.activeTexture.set(he.TEXTURE0),X.bind(xe,he.CLAMP_TO_EDGE),me.activeTexture.set(he.TEXTURE1),X.bind(xe,he.CLAMP_TO_EDGE),X.useMipmap&&me.extTextureFilterAnisotropic&&o.transform.pitch>20&&he.texParameterf(he.TEXTURE_2D,me.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,me.extTextureFilterAnisotropicMax);const[Ue,We,qe,tt]=a?q.getPoleBuffers(a.canonical.z,!1):q.getPoleBuffers(0,!0),rt=v.paint.get("raster-elevation");let Et;p?(Et=Ue,o.renderDefaultNorthPole=rt!==0):(Et=We,o.renderDefaultSouthPole=rt!==0);const _t=vr(D.mix),st=((Bt,qt,Kt,xt,Ft,Mt,Qt,Ot,zt,dr,rr,yr,_r)=>Od(Bt,qt,Kt,new Float32Array(16),new Float32Array(9),[0,0],xt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},Mt,[0,0],Ot,2,dr,rr,yr,1,0,_r))(Oe,Ze,ae,n.ae(o.transform.zoom),0,v,0,rt,0,_t,D.offset,D.range,S),mt=o.getOrCreateProgram("raster",{defines:Me});o.uploadCommonUniforms(me,mt,null),mt.draw(o,he.TRIANGLES,Be,O,_e,L,st,v.id,Et,qe,tt)}function Mn(p){const a=p._nearZ,o=p.projection.farthestPixelDistance(p),m=o-a,v=.2*p.height,S=a+v;return[a,o,(S-v-a)/m,(S-a)/m]}function Tt(p,a,o,m){if(p)return a instanceof yl&&p instanceof Eh?a.getTextureDescriptor(p,o,!0):{texture:p.texture,mix:vr(m.mix),offset:m.offset,buffer:0,tileSize:1}}var _p=n.da([{name:"a_index",type:"Int16",components:1}]);class qd{constructor(a,o,m,v){const S={width:m[0],height:m[1],data:null},D=a.gl;this.targetColorTexture=new n.T(a,S,D.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new n.T(a,S,D.RGBA8,{useMipmap:!1}),this.context=a,this.updateParticleTexture(o,v),this.lastInvalidatedAt=0}updateParticleTexture(a,o){if(this.particleTextureDimension===o.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const m=this.context.gl,v=o.width*o.height;this.particleTexture0=new n.T(this.context,o,m.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new n.T(this.context,o,m.RGBA8,{premultiply:!1,useMipmap:!1});const S=new n.db;S.reserve(v);for(let D=0;D<v;D++)S.emplaceBack(D);this.particleIndexBuffer=this.context.createVertexBuffer(S,_p.members,!0),this.particleSegment=n.b7.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=o.width}update(a){return!(this.lastInvalidatedAt<a&&(this.lastInvalidatedAt=n.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Gh(p,a,o){if(!p)return null;const m=a.getTextureDescriptor(p,o,!0);if(!m)return null;let{texture:v,mix:S,offset:D,tileSize:L,buffer:O,format:U}=m;if(!v||!U)return null;let q=!1;return U==="uint32"&&(q=!0,S[3]=0,S=Xu(n.dc,S,[0,o.paint.get("raster-particle-max-speed")]),D=Tr(n.dc,D,[0,o.paint.get("raster-particle-max-speed")])),{texture:v,textureOffset:[O/(L+2*O),L/(L+2*O)],tileSize:L,scalarData:q,scale:S,offset:D,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[U]]}}function zs(p){const a=p._nearZ,o=p.projection.farthestPixelDistance(p),m=o-a,v=.2*p.height,S=a+v;return[a,o,(S-v-a)/m,(S-a)/m]}const vi=new n.aj(1,0,0,1),bp=new n.aj(0,1,0,1),Dl=new n.aj(0,0,1,1),wp=new n.aj(1,0,1,1),Hm=new n.aj(0,1,1,1);function Ls(p,a,o,m,v,S,D){const L=p.context,O=p.transform,U=L.gl,q=O.projection.name==="globe",Z=q?["PROJECTION_GLOBE_VIEW"]:[];let X=n.ab.mat4.clone(o.projMatrix);if(q&&n.ae(O.zoom)>0){const _t=n.ba(o.canonical,O),st=n.dd(_t);X=n.ab.mat4.multiply(new Float32Array(16),O.globeMatrix,st),n.ab.mat4.multiply(X,O.projMatrix,X)}const ae=n.ab.mat4.create();ae[12]+=2*v/(n.q.devicePixelRatio*O.width),ae[13]+=2*S/(n.q.devicePixelRatio*O.height),n.ab.mat4.multiply(X,ae,X);const me=p.getOrCreateProgram("debug",{defines:Z}),he=a.getTileByID(o.key);p.terrain&&p.terrain.setupElevationDraw(he,me);const xe=Rr.disabled,_e=ea.disabled,Me=p.colorModeForRenderPass(),Be="$debug";L.activeTexture.set(U.TEXTURE0),p.emptyTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),q?he._makeGlobeTileDebugBuffers(p.context,O):he._makeDebugTileBoundsBuffers(p.context,O.projection);const Oe=he._tileDebugBuffer||p.debugBuffer,Ze=he._tileDebugIndexBuffer||p.debugIndexBuffer,Ue=he._tileDebugSegments||p.debugSegments;if(me.draw(p,U.LINE_STRIP,xe,_e,Me,Gr.disabled,Zu(X,m),Be,Oe,Ze,Ue,null,null,null,[he._globeTileDebugBorderBuffer]),D){const _t=he.latestRawTileData,st=Math.floor((_t&&_t.byteLength||0)/1024);let mt=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(mt+=` => ${o.overscaledZ}`),mt+=` ${he.state}`,mt+=` ${st}kb`,function(Bt,qt){Bt.initDebugOverlayCanvas();const Kt=Bt.debugOverlayCanvas,xt=Bt.context.gl,Ft=Bt.debugOverlayCanvas.getContext("2d");Ft.clearRect(0,0,Kt.width,Kt.height),Ft.shadowColor="white",Ft.shadowBlur=2,Ft.lineWidth=1.5,Ft.strokeStyle="white",Ft.textBaseline="top",Ft.font="bold 36px Open Sans, sans-serif",Ft.fillText(qt,5,5),Ft.strokeText(qt,5,5),Bt.debugOverlayTexture.update(Kt),Bt.debugOverlayTexture.bind(xt.LINEAR,xt.CLAMP_TO_EDGE)}(p,mt)}const We=a.getTile(o).tileSize,qe=512/Math.min(We,512)*(o.overscaledZ/O.zoom)*.5,tt=he._tileDebugTextBuffer||p.debugBuffer,rt=he._tileDebugTextIndexBuffer||p.quadTriangleIndexBuffer,Et=he._tileDebugTextSegments||p.debugSegments;me.draw(p,U.TRIANGLES,xe,_e,ua.alphaBlended,Gr.disabled,Zu(X,n.aj.transparent,qe),Be,tt,rt,Et,null,null,null,[he._globeTileDebugTextBuffer])}function Xc(p,a,o,m){Ju(p,0,a+o/2,p.transform.width,o,m)}function Wd(p,a,o,m){Ju(p,a-o/2,0,o,p.transform.height,m)}function Ju(p,a,o,m,v,S){const D=p.context,L=D.gl;L.enable(L.SCISSOR_TEST),L.scissor(a*n.q.devicePixelRatio,o*n.q.devicePixelRatio,m*n.q.devicePixelRatio,v*n.q.devicePixelRatio),D.clear({color:S}),L.disable(L.SCISSOR_TEST)}const qm=n.da([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Hh}=qm;function zo(p,a,o,m){p.emplaceBack(a,o,m)}class Lo{constructor(a){this.vertexArray=new n.de,this.indices=new n.aU,zo(this.vertexArray,-1,-1,1),zo(this.vertexArray,1,-1,1),zo(this.vertexArray,-1,1,1),zo(this.vertexArray,1,1,1),zo(this.vertexArray,-1,-1,-1),zo(this.vertexArray,1,-1,-1),zo(this.vertexArray,-1,1,-1),zo(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=a.createVertexBuffer(this.vertexArray,Hh),this.indexBuffer=a.createIndexBuffer(this.indices),this.segment=n.b7.simpleSegment(0,0,36,12)}}function Yc(p,a,o,m,v,S){const D=p.context.gl,L=a.paint.get("sky-atmosphere-color"),O=a.paint.get("sky-atmosphere-halo-color"),U=a.paint.get("sky-atmosphere-sun-intensity"),q=((Z,X,ae,me,he)=>({u_matrix_3f:Z,u_sun_direction:X,u_sun_intensity:ae,u_color_tint_r:[me.r,me.g,me.b,me.a],u_color_tint_m:[he.r,he.g,he.b,he.a],u_luminance:5e-5}))(n.ab.mat3.fromMat4(n.ab.mat3.create(),m),v,U,L,O);D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+S,a.skyboxTexture,0),o.draw(p,D.TRIANGLES,Rr.disabled,ea.disabled,ua.unblended,Gr.frontCW,q,"skyboxCapture",a.skyboxGeometry.vertexBuffer,a.skyboxGeometry.indexBuffer,a.skyboxGeometry.segment)}const P0=n.da([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class is{constructor(a){const o=new n.df;o.emplaceBack(-1,1,1,0,0),o.emplaceBack(1,1,1,1,0),o.emplaceBack(1,-1,1,1,1),o.emplaceBack(-1,-1,1,0,1);const m=new n.aU;m.emplaceBack(0,1,2),m.emplaceBack(2,3,0),this.vertexBuffer=a.createVertexBuffer(o,P0.members),this.indexBuffer=a.createIndexBuffer(m),this.segments=n.b7.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const M0=n.da([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class qh{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class xn{constructor(a){this.colorModeAlphaBlendedWriteRGB=new ua([1,Lu,1,Lu],n.aj.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new ua([1,0,1,0],n.aj.transparent,[!1,!1,!1,!0]),this.params=new qh,this.updateNeeded=!0,a.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),a.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),a.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),a.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(a){const o=a.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new is(o);const m=this.params.sizeRange,v=this.params.intensityRange,S=function(q){const Z=n.di(30),X=[];for(let ae=0;ae<q;++ae){const me=2*Math.PI*Z(),he=Math.acos(1-2*Z())-.5*Math.PI;X.push(n.ab.vec3.fromValues(Math.cos(he)*Math.cos(me),Math.cos(he)*Math.sin(me),Math.sin(he)))}return X}(this.params.starsCount),D=n.di(300),L=new n.dg,O=new n.aU;let U=0;for(let q=0;q<S.length;++q){const Z=n.ab.vec3.scale([],S[q],200),X=Math.max(0,1+.01*m*(1*D()-.5)),ae=Math.max(0,1+.01*v*(1*D()-.5));L.emplaceBack(Z[0],Z[1],Z[2],-1,-1,X,ae),L.emplaceBack(Z[0],Z[1],Z[2],1,-1,X,ae),L.emplaceBack(Z[0],Z[1],Z[2],1,1,X,ae),L.emplaceBack(Z[0],Z[1],Z[2],-1,1,X,ae),O.emplaceBack(U+0,U+1,U+2),O.emplaceBack(U+0,U+2,U+3),U+=4}this.starsVx=o.createVertexBuffer(L,M0.members),this.starsIdx=o.createIndexBuffer(O),this.starsSegments=n.b7.simpleSegment(0,0,L.length,O.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(a,o){const m=a.context,v=m.gl,S=a.transform,D=new Rr(v.LEQUAL,Rr.ReadOnly,[0,1]),L=n.ae(S.zoom),O=a.style.getLut(o.scope),U=o.properties.get("color-use-theme")==="none",q=o.properties.get("color").toRenderColor(U?null:O).toArray01(),Z=o.properties.get("high-color-use-theme")==="none",X=o.properties.get("high-color").toRenderColor(Z?null:O).toArray01(),ae=o.properties.get("space-color-use-theme")==="none",me=o.properties.get("space-color").toRenderColor(ae?null:O).toArray01PremultipliedAlpha(),he=5e-4,xe=n.dh(o.properties.get("horizon-blend"),0,1,he,.25),_e=n.cC(a,m,S)&&xe===he?S.worldSize/(2*Math.PI*1.025)-1:S.globeRadius,Me=a.frameCounter/1e3%1,Be=n.ab.vec3.length(S.globeCenterInViewSpace),Oe=Math.sqrt(Math.pow(Be,2)-Math.pow(_e,2)),Ze=Math.acos(Oe/Be),Ue=We=>{const qe=S.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];We&&qe.push("ALPHA_PASS");const tt=a.getOrCreateProgram("globeAtmosphere",{defines:qe}),rt=((_t,st,mt,Bt,qt,Kt,xt,Ft,Mt,Qt,Ot,zt)=>({u_frustum_tl:_t,u_frustum_tr:st,u_frustum_br:mt,u_frustum_bl:Bt,u_horizon:qt,u_transition:Kt,u_fadeout_range:xt,u_color:Ft,u_high_color:Mt,u_space_color:Qt,u_temporal_offset:Ot,u_horizon_angle:zt}))(S.frustumCorners.TL,S.frustumCorners.TR,S.frustumCorners.BR,S.frustumCorners.BL,S.frustumCorners.horizon,L,xe,q,X,me,Me,Ze);a.uploadCommonUniforms(m,tt);const Et=this.atmosphereBuffer;Et&&tt.draw(a,v.TRIANGLES,D,ea.disabled,We?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,Gr.backCW,rt,We?"atmosphere_glow_alpha":"atmosphere_glow",Et.vertexBuffer,Et.indexBuffer,Et.segments)};Ue(!1),Ue(!0)}drawStars(a,o){const m=n.aw(o.properties.get("star-intensity"),0,1);if(m===0)return;const v=a.context,S=v.gl,D=a.transform,L=a.getOrCreateProgram("stars"),O=n.ab.quat.identity([]);n.ab.quat.rotateX(O,O,-D._pitch),n.ab.quat.rotateZ(O,O,-D.angle),n.ab.quat.rotateX(O,O,n.ai(D._center.lat)),n.ab.quat.rotateY(O,O,-n.ai(D._center.lng));const U=n.ab.mat4.fromQuat(new Float32Array(16),O),q=n.ab.mat4.multiply([],D.starsProjMatrix,U),Z=n.ab.mat3.fromMat4([],U),X=n.ab.mat3.invert([],Z),ae=[0,1,0];n.ab.vec3.transformMat3(ae,ae,X),n.ab.vec3.scale(ae,ae,this.params.sizeMultiplier);const me=[1,0,0];n.ab.vec3.transformMat3(me,me,X),n.ab.vec3.scale(me,me,this.params.sizeMultiplier);const he=(xe=ae,_e=me,Me=m,{u_matrix:Float32Array.from(q),u_up:xe,u_right:_e,u_intensity_multiplier:Me});var xe,_e,Me;a.uploadCommonUniforms(v,L),this.starsVx&&this.starsIdx&&L.draw(a,S.TRIANGLES,Rr.disabled,ea.disabled,this.colorModeAlphaBlendedWriteRGB,Gr.disabled,he,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Oa(p,a){const o=[...p],m=a.cameraWorldSizeForFog/a.worldSize,v=n.ab.mat4.identity([]);return n.ab.mat4.scale(v,v,[m,m,1]),n.ab.mat4.multiply(o,v,o),n.ab.mat4.multiply(o,a.worldToFogMatrix,o),o}function Wh(p,a,o,m,v){const S=o.material,D=m.context,{baseColorTexture:L,metallicRoughnessTexture:O}=S.pbrMetallicRoughness,{normalTexture:U,occlusionTexture:q,emissionTexture:Z}=S;function X(me,he,xe){if(me&&(p.push(he),D.activeTexture.set(D.gl.TEXTURE0+xe),me.gfxTexture)){const{minFilter:_e,magFilter:Me,wrapS:Be,wrapT:Oe}=me.sampler;me.gfxTexture.bindExtraParam(_e,Me,Be,Oe)}}X(L,"HAS_TEXTURE_u_baseColorTexture",Oi.BaseColor),X(O,"HAS_TEXTURE_u_metallicRoughnessTexture",Oi.MetallicRoughness),X(U,"HAS_TEXTURE_u_normalTexture",Oi.Normal),X(q,"HAS_TEXTURE_u_occlusionTexture",Oi.Occlusion),X(Z,"HAS_TEXTURE_u_emissionTexture",Oi.Emission),v&&(v.texture||(v.texture=new n.dk(m.context,v.image,[v.image.height,v.image.height,v.image.height],D.gl.RGBA8)),D.activeTexture.set(D.gl.TEXTURE0+Oi.LUT),v.texture&&v.texture.bind(D.gl.LINEAR,D.gl.CLAMP_TO_EDGE),p.push("APPLY_LUT_ON_GPU")),o.texcoordBuffer&&(p.push("HAS_ATTRIBUTE_a_uv_2f"),a.push(o.texcoordBuffer)),o.colorBuffer&&(p.push(o.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),a.push(o.colorBuffer)),o.normalBuffer&&(p.push("HAS_ATTRIBUTE_a_normal_3f"),a.push(o.normalBuffer)),o.pbrBuffer&&(p.push("HAS_ATTRIBUTE_a_pbr"),p.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),a.push(o.pbrBuffer)),S.alphaMode!=="OPAQUE"&&S.alphaMode!=="MASK"||p.push("UNPREMULT_TEXTURE_IN_SHADER"),S.defined||p.push("DIFFUSE_SHADED"),p.push("USE_STANDARD_DERIVATIVES");const ae=m.shadowRenderer;ae&&(p.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ae.useNormalOffset&&p.push("NORMAL_OFFSET"))}function ao(p,a,o,m,v,S){const D=o.paint.get("model-opacity").constantOr(1),L=a.context,O=new Rr(a.context.gl.LEQUAL,Rr.ReadWrite,a.depthRangeFor3D),U=a.transform,q=p.mesh,Z=q.material,X=Z.pbrMetallicRoughness,ae=a.style.fog;let me;me=a.transform.projection.zAxisUnit==="pixels"?[...p.nodeModelMatrix]:n.ab.mat4.multiply([],m.zScaleMatrix,p.nodeModelMatrix),n.ab.mat4.multiply(me,m.negCameraPosMatrix,me);const he=n.ab.mat4.invert([],me);n.ab.mat4.transpose(he,he);const xe=o.paint.get("model-color-use-theme").constantOr("default")==="none",_e=o.paint.get("model-emissive-strength").constantOr(0),Me=Uh(new Float32Array(p.worldViewProjection),new Float32Array(me),new Float32Array(he),null,a,D,X.baseColorFactor.toRenderColor(null),Z.emissiveFactor,X.metallicFactor,X.roughnessFactor,Z,_e,o),Be={defines:[]},Oe=[],Ze=a.shadowRenderer;Ze&&(Ze.useNormalOffset=!1),Wh(Be.defines,Oe,q,a,xe?null:o.lut);let Ue=null;if(ae){const tt=Oa(p.nodeModelMatrix,a.transform);if(Ue=new Float32Array(tt),U.projection.name!=="globe"){const rt=q.aabb.min,Et=q.aabb.max,[_t,st]=ae.getOpacityForBounds(tt,rt[0],rt[1],Et[0],Et[1]);Be.overrideFog=_t>=cr||st>=cr}}const We=bl(a,o.paint.get("model-cutoff-fade-range"));We.shouldRenderCutoff&&Be.defines.push("RENDER_CUTOFF");const qe=a.getOrCreateProgram("model",Be);a.uploadCommonUniforms(L,qe,null,Ue,We),a.renderPass!=="shadow"&&Ze&&Ze.setupShadowsFromMatrix(p.nodeModelMatrix,qe),qe.draw(a,L.gl.TRIANGLES,O,v,S,q.material.doubleSided?Gr.disabled:Gr.backCCW,Me,o.id,q.vertexBuffer,q.indexBuffer,q.segments,o.paint,a.transform.zoom,void 0,Oe)}function Kd(p,a,o,m,v,S,D){let L;L=p.projection.name==="globe"?n.dl(o,p):[...o],n.ab.mat4.multiply(L,L,a.matrix);const O=n.ab.mat4.multiply([],m,L);if(a.meshes)for(const U of a.meshes){if(U.material.alphaMode!=="BLEND"){D.push({mesh:U,depth:0,modelIndex:v,worldViewProjection:O,nodeModelMatrix:L});continue}const q=n.ab.vec3.transformMat4([],U.centroid,O);q[2]>0&&S.push({mesh:U,depth:q[2],modelIndex:v,worldViewProjection:O,nodeModelMatrix:L})}if(a.children)for(const U of a.children)Kd(p,U,o,m,v,S,D)}function cc(p,a,o,m){const v=o.shadowRenderer;if(!v)return;const S=v.getShadowPassDepthMode(),D=v.getShadowPassColorMode(),L=v.calculateShadowPassMatrixFromMatrix(a),O=yp(L);o.getOrCreateProgram("modelDepth",{defines:o._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(o,o.context.gl.TRIANGLES,S,ea.disabled,D,Gr.backCCW,O,m.id,p.vertexBuffer,p.indexBuffer,p.segments,m.paint,o.transform.zoom,void 0,void 0)}function Sp(p,a,o){const m=a.updateZoomBasedPaintProperties(),v=function(S,D,L){let O,U,q,Z=S.terrain?S.terrain.exaggeration():0;if(S.terrain&&Z>0){const X=S.terrain,ae=X.findDEMTileFor(L);ae&&ae.dem?O=n.dn.create(X,L,ae):Z=0}if(Z===0&&(D.terrainElevationMin=0,D.terrainElevationMax=0),Z===D.validForExaggeration&&(Z===0||O&&O._demTile&&O._demTile.tileID===D.validForDEMTile.id&&O._dem._timestamp===D.validForDEMTile.timestamp))return!1;for(const X in D.instancesPerModel){const ae=D.instancesPerModel[X];for(let me=0;me<ae.instancedDataArray.length;++me){const he=(O?Z*O.getElevationAt(0|ae.instancedDataArray.float32[16*me],0|ae.instancedDataArray.float32[16*me+1],!0,!0):0)+ae.instancesEvaluatedElevation[me];ae.instancedDataArray.float32[16*me+6]=he,U=U?Math.min(D.terrainElevationMin,he):he,q=q?Math.max(D.terrainElevationMax,he):he}}return D.terrainElevationMin=U||0,D.terrainElevationMax=q||0,D.validForExaggeration=Z,D.validForDEMTile=O&&O._demTile?{id:O._demTile.tileID,timestamp:O._dem._timestamp}:{id:void 0,timestamp:0},!0}(p,a,o);(m||v)&&(a.uploaded=!1,a.upload(p.context))}const no={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new n.cd([0,0,0],[n.ag,n.ag,0])};function uc(p,a){const o=1<<p.canonical.z,m=a.getFreeCameraOptions().position,v=a.elevation,S=p.canonical.x/o,D=(p.canonical.x+1)/o,L=p.canonical.y/o,O=(p.canonical.y+1)/o;let U=a._centerAltitude;if(v){const ae=v.getMinMaxForTile(p);ae&&ae.max>U&&(U=ae.max)}const q=n.aw(m.x,S,D)-m.x,Z=n.aw(m.y,L,O)-m.y,X=n.bH(U,a.center.lat)-m.z;return a._zoomFromMercatorZ(Math.sqrt(q*q+Z*Z+X*X))}function dc(p,a,o,m,v,S,D){const L=p.context,O=p.renderPass==="shadow",U=p.shadowRenderer,q=O&&U?U.getShadowPassDepthMode():new Rr(L.gl.LEQUAL,Rr.ReadWrite,p.depthRangeFor3D),Z=p.isTileAffectedByFog(S);if(o.meshes)for(const X of o.meshes){const ae=["MODEL_POSITION_ON_GPU"],me=[];let he,xe,_e;m.instancedDataArray.length>20&&ae.push("INSTANCED_ARRAYS");const Me=bl(p,a.paint.get("model-cutoff-fade-range"));if(Me.shouldRenderCutoff&&ae.push("RENDER_CUTOFF"),O&&U)he=p.getOrCreateProgram("modelDepth",{defines:ae}),xe=yp(D.shadowTileMatrix,D.shadowTileMatrix,Float32Array.from(o.matrix)),_e=U.getShadowPassColorMode();else{Wh(ae,me,X,p,a.paint.get("model-color-use-theme").constantOr("default")==="none"?null:a.lut),he=p.getOrCreateProgram("model",{defines:ae,overrideFog:Z});const Oe=X.material,Ze=Oe.pbrMetallicRoughness,Ue=a.paint.get("model-opacity").constantOr(1),We=a.paint.get("model-emissive-strength").constantOr(0);xe=Uh(S.expandedProjMatrix,Float32Array.from(o.matrix),new Float32Array(16),null,p,Ue,Ze.baseColorFactor.toRenderColor(null),Oe.emissiveFactor,Ze.metallicFactor,Ze.roughnessFactor,Oe,We,a,v),U&&(D.shadowUniformsInitialized?he.setShadowUniformValues(L,U.getShadowUniformValues()):(U.setupShadows(S.toUnwrapped(),he,"model-tile",S.overscaledZ),D.shadowUniformsInitialized=!0)),_e=Me.shouldRenderCutoff||Ue<1||Oe.alphaMode!=="OPAQUE"?ua.alphaBlended:ua.unblended}p.uploadCommonUniforms(L,he,S.toUnwrapped(),null,Me);const Be=X.material.doubleSided?Gr.disabled:Gr.backCCW;if(m.instancedDataArray.length>20)me.push(m.instancedDataBuffer),he.draw(p,L.gl.TRIANGLES,q,ea.disabled,_e,Be,xe,a.id,X.vertexBuffer,X.indexBuffer,X.segments,a.paint,p.transform.zoom,void 0,me,m.instancedDataArray.length);else{const Oe=O?"u_instance":"u_normal_matrix";for(let Ze=0;Ze<m.instancedDataArray.length;++Ze)xe[Oe]=new Float32Array(m.instancedDataArray.arrayBuffer,64*Ze,16),he.draw(p,L.gl.TRIANGLES,q,ea.disabled,_e,Be,xe,a.id,X.vertexBuffer,X.indexBuffer,X.segments,a.paint,p.transform.zoom,void 0,me)}}if(o.children)for(const X of o.children)dc(p,a,X,m,v,S,D)}const hc=[1,-1,1];function fc(p,a,o,m){if(!o.modelManager)return!0;const v=o.modelManager;if(!o.shadowRenderer)return!0;const S=o.shadowRenderer,D=a.aabb;let L=!0,O=p.maxHeight;if(O===0){let q=0;for(const Z in p.instancesPerModel){const X=v.getModel(Z,m);X?q=Math.max(q,Math.max(Math.max(X.aabb.max[0],X.aabb.max[1]),X.aabb.max[2])):L=!1}O=p.maxScale*q*1.41+p.maxVerticalOffset,L&&(p.maxHeight=O)}D.max[2]=O,D.min[2]+=p.terrainElevationMin,D.max[2]+=p.terrainElevationMax,n.ab.vec3.transformMat4(D.min,D.min,a.tileMatrix),n.ab.vec3.transformMat4(D.max,D.max,a.tileMatrix);const U=D.intersects(S.getCurrentCascadeFrustum());return o.currentShadowCascade===0&&(p.isInsideFirstShadowMapFrustum=U===2),U===0}function Qu(p,a){const o=p.uniformValues.u_cutoff_params[0],m=p.uniformValues.u_cutoff_params[1],v=p.uniformValues.u_cutoff_params[2],S=p.uniformValues.u_cutoff_params[3];return m===o||S===v?1:n.aw(((a-o)/(m-o)-v)/(S-v),0,1)}function Tp(p,a,o,m){if(a.pitch<20)return 1;const v=a.getWorldToCameraMatrix();n.ab.mat4.multiply(v,v,p);const S=n.ab.vec4.fromValues(o.min[0],o.min[1],o.min[2],1);let D=n.ab.vec4.transformMat4(n.ab.vec4.create(),S,v),L=D,O=D;S[1]=o.max[1],D=n.ab.vec4.transformMat4(n.ab.vec4.create(),S,v),L=D[1]<L[1]?D:L,O=D[1]>O[1]?D:O,S[0]=o.max[0],D=n.ab.vec4.transformMat4(n.ab.vec4.create(),S,v),L=D[1]<L[1]?D:L,O=D[1]>O[1]?D:O,S[1]=o.min[1],D=n.ab.vec4.transformMat4(n.ab.vec4.create(),S,v),L=D[1]<L[1]?D:L,O=D[1]>O[1]?D:O;const U=n.aw(m[0],0,1),q=100*a.pixelsPerMeter*n.aw(m[1],0,1),Z=n.aw(m[2],0,1),X=n.ab.vec4.lerp(n.ab.vec4.create(),L,O,U),ae=Math.tan(.5*a.fovX),me=-X[2]*ae;if(q===0)return X[1]<-Math.abs(me)?Z:1;const he=(-Math.abs(me)-X[1])/q,xe=(Me,Be,Oe)=>(1-Oe)*Me+Oe*Be,_e=n.aw(xe(1,Z,he),Z,1);return xe(1,_e,n.aw((a.pitch-20)/20,0,1))}class Zd{}class ed{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(a,o,m){{const Z=this._storage.get(o.id);if(Z)return Z.lastUsedFrameIdx=a,Z.buf}const v=m.gl,S=v.getBufferParameter(v.ELEMENT_ARRAY_BUFFER,v.BUFFER_SIZE),D=new ArrayBuffer(S),L=new Int16Array(D);v.getBufferSubData(v.ELEMENT_ARRAY_BUFFER,0,new Int16Array(D));const O=new n.dq;for(let Z=0;Z<S/2;Z+=3){const X=L[Z],ae=L[Z+1],me=L[Z+2];O.emplaceBack(X,ae),O.emplaceBack(ae,me),O.emplaceBack(me,X)}const U=m.bindVertexArrayOES.current,q=new Zd;return q.buf=new Hs(m,O),q.lastUsedFrameIdx=a,this._storage.set(o.id,q),m.bindVertexArrayOES.set(U),q.buf}update(a){for(const[o,m]of this._storage)a-m.lastUsedFrameIdx>30&&(m.buf.destroy(),this._storage.delete(o))}destroy(){for(const[a,o]of this._storage)o.buf.destroy(),this._storage.delete(a)}}class pc{constructor(a){this.occluderSize=30,this.depthOffset=-1e-4,a.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),a.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Ep=n.da([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class Kh{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class Zh{constructor(a,o){this.revealStart=11,this.revealRange=2,a.registerParameter(this,[...o,"Reveal"],"revealStart",{min:0,max:17,step:.05}),a.registerParameter(this,[...o,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const Cp=n.da([{type:"Float32",name:"a_pos_2f",components:2}]);class Fi{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(a,o){const m=a.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const D=new n.dr,L=new n.aU;D.emplaceBack(-1,-1),D.emplaceBack(1,-1),D.emplaceBack(1,1),D.emplaceBack(-1,1),L.emplaceBack(0,1,2),L.emplaceBack(0,2,3),this.vignetteVx=a.context.createVertexBuffer(D,Cp.members),this.vignetteIdx=a.context.createIndexBuffer(L)}const v=n.b7.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){a.uploadCommonUniforms(a.context,m);const D={u_vignetteShape:(S={vignetteShape:[o.start,o.range,Math.pow(10,o.fadePower)],vignetteColor:[o.color.r,o.color.g,o.color.b,o.color.a*o.strength]}).vignetteShape,u_vignetteColor:S.vignetteColor};m.draw(a,a.context.gl.TRIANGLES,Rr.disabled,ea.disabled,ua.alphaBlended,Gr.disabled,D,"vignette",this.vignetteVx,this.vignetteIdx,v,{})}var S}}class Xh{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(a,o){const m=a.getFreeCameraOptions().position,v=m.toAltitude(),S=m.toLngLat(),D=n.ai(S.lng),L=n.ai(S.lat),O=a.pixelsPerMeter/o,U=D*n.ds,q=n.ds*Math.log(Math.tan(Math.PI/4+L/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const Z=-this._offsetYPrev+q,X=-this._elevationPrev+v;this._accumulatedOffsetX+=(-this._offsetXPrev+U)*O,this._accumulatedOffsetY+=Z*O,this._accumulatedElevation+=X*O,this._offsetXPrev=U,this._offsetYPrev=q,this._elevationPrev=v}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function Yh(p,a){return[-(p[0]-Math.floor(p[0]/a)*a),-(p[1]-Math.floor(p[1]/a)*a),-(p[2]-Math.floor(p[2]/a)*a)]}function td(p){const a=n.di(1323123451230),o=[];for(let m=0;m<p;++m){const v=2*a()-1,S=2*a()-1,D=2*a()-1;o.push(n.ab.vec3.fromValues(v,S,D))}return o}function Ts(p,a,o,m,v){const S=n.aw((v-o)/(m-o),0,1);return(1-S)*p+S*a}class Jh{constructor(a){this._movement=new Xh,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new Fi,this._ppmScaleFactor=a}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(a,o){const m=a.transform;this._movement.update(m,this._ppmScaleFactor);const v=m.starsProjMatrix,S=n.ab.quat.identity([]);n.ab.quat.rotateX(S,S,n.ai(90)-m._pitch),n.ab.quat.rotateZ(S,S,-m.angle);const D=n.ab.mat4.fromQuat(new Float32Array(16),S),L=n.ab.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),O=n.ab.mat4.transpose([],L),U=n.ab.mat4.multiply([],O,D),q=Date.now()/1e3;return this._accumulatedTimeFromStart+=(q-this._prevTime)*o,this._prevTime=q,{projectionMatrix:v,modelviewMatrix:U}}}class Dp extends Jh{constructor(a){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new Zh(a.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(a){const o=a.context;if(!this.particlesVx){const m=td(this.particlesCount),v=new n.dt,S=new n.aU;let D=0;const L=n.di(1323123451230);for(let O=0;O<m.length;++O){const U=m[O],q=[2*L()-1,L(),L(),L()];v.emplaceBack(U[0],U[1],U[2],-1,-1,...q),v.emplaceBack(U[0],U[1],U[2],1,-1,...q),v.emplaceBack(U[0],U[1],U[2],1,1,...q),v.emplaceBack(U[0],U[1],U[2],-1,1,...q),S.emplaceBack(D+0,D+1,D+2),S.emplaceBack(D+0,D+2,D+3),D+=4}this.particlesVx=o.createVertexBuffer(v,Ep.members),this.particlesIdx=o.createIndexBuffer(S)}}draw(a){if(!this._params.overrideStyleParameters&&!a.style.rain)return;const o=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},m=a.transform.zoom;if(o.revealStart>m)return;const v=Ts(0,1,o.revealStart,o.revealStart+o.revealRange,m);if(!this.particlesVx||!this.particlesIdx)return;const S=structuredClone(this._params);let D=[-S.direction.x,S.direction.y,-100];n.ab.vec3.normalize(D,D);const L=structuredClone(this._vignetteParams);L.strength*=v,S.overrideStyleParameters||(S.intensity=a.style.rain.state.density,S.timeFactor=a.style.rain.state.intensity,S.color=structuredClone(a.style.rain.state.color),D=structuredClone(a.style.rain.state.direction),S.screenThinning.intensity=a.style.rain.state.centerThinning,S.dropletSizeX=a.style.rain.state.dropletSize[0],S.dropletSizeYScale=a.style.rain.state.dropletSize[1]/a.style.rain.state.dropletSize[0],S.distortionStrength=100*a.style.rain.state.distortionStrength,L.strength=1,L.color=structuredClone(a.style.rain.state.vignetteColor));const O=this.updateOnRender(a,S.timeFactor),U=a.context,q=U.gl,Z=a.transform;this.screenTexture&&this.screenTexture.size[0]===a.width&&this.screenTexture.size[1]===a.height||(this.screenTexture=new n.T(U,{width:a.width,height:a.height,data:null},q.RGBA8)),S.distortionStrength>0&&(U.activeTexture.set(q.TEXTURE0),this.screenTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),q.copyTexSubImage2D(q.TEXTURE_2D,0,0,0,0,0,a.width,a.height));const X=a.getOrCreateProgram("rainParticle");a.uploadCommonUniforms(U,X),U.activeTexture.set(q.TEXTURE0),this.screenTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE);const ae=[S.color.r,S.color.g,S.color.b,S.color.a],me=(he,xe)=>{const _e=Yh(this._movement.getPosition(),he),Me=S.dropletSizeX,Be=S.dropletSizeX*S.dropletSizeYScale,Oe=a.width/2,Ze=a.height/2,Ue=Ts(0,S.screenThinning.start,0,1,S.screenThinning.intensity),We=Ts(.001,S.screenThinning.range,0,1,S.screenThinning.intensity),qe=Ts(0,S.screenThinning.particleOffset,0,1,S.screenThinning.intensity),tt=(rt={modelview:O.modelviewMatrix,projection:O.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:_e,velocityConeAperture:S.velocityConeAperture,velocity:S.velocity,boxSize:he,rainDropletSize:[Me,Be],distortionStrength:S.distortionStrength,rainDirection:D,color:ae,screenSize:[Z.width,Z.height],thinningCenterPos:[Oe,Ze],thinningShape:[Ue,We,Math.pow(10,S.screenThinning.fadePower)],thinningAffectedRatio:S.screenThinning.affectedRatio,thinningParticleOffset:qe,shapeDirectionalPower:S.shapeDirPower,shapeNormalPower:S.shapeNormalPower,mode:xe?0:1},{u_modelview:Float32Array.from(rt.modelview),u_projection:Float32Array.from(rt.projection),u_time:rt.time,u_cam_pos:rt.camPos,u_texScreen:0,u_velocityConeAperture:rt.velocityConeAperture,u_velocity:rt.velocity,u_boxSize:rt.boxSize,u_rainDropletSize:rt.rainDropletSize,u_distortionStrength:rt.distortionStrength,u_rainDirection:rt.rainDirection,u_color:rt.color,u_screenSize:rt.screenSize,u_thinningCenterPos:rt.thinningCenterPos,u_thinningShape:rt.thinningShape,u_thinningAffectedRatio:rt.thinningAffectedRatio,u_thinningParticleOffset:rt.thinningParticleOffset,u_shapeDirectionalPower:rt.shapeDirectionalPower,u_shapeNormalPower:rt.shapeNormalPower,u_mode:rt.mode});var rt;const Et=Math.round(v*S.intensity*this.particlesCount),_t=n.b7.simpleSegment(0,0,4*Et,2*Et);X.draw(a,q.TRIANGLES,Rr.disabled,ea.disabled,ua.alphaBlended,Gr.disabled,tt,"rain_particles",this.particlesVx,this.particlesIdx,_t,{})};S.distortionStrength>0&&me(S.boxSize,!0),me(S.boxSize,!1),this._vignette.draw(a,L)}}const Wm=n.da([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class mc extends Jh{constructor(a){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new Zh(a.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(a){const o=a.context;if(!this.particlesVx){const m=td(this.particlesCount),v=new n.du,S=new n.aU;let D=0;const L=n.di(1323123451230);for(let O=0;O<m.length;++O){const U=m[O],q=L(),Z=L(),X=L(),ae=[O/m.length,q,Z,X],me=[L(),L()];v.emplaceBack(U[0],U[1],U[2],-1,-1,...ae,...me),v.emplaceBack(U[0],U[1],U[2],1,-1,...ae,...me),v.emplaceBack(U[0],U[1],U[2],1,1,...ae,...me),v.emplaceBack(U[0],U[1],U[2],-1,1,...ae,...me),S.emplaceBack(D+0,D+1,D+2),S.emplaceBack(D+0,D+2,D+3),D+=4}this.particlesVx=o.createVertexBuffer(v,Wm.members),this.particlesIdx=o.createIndexBuffer(S)}}draw(a){if(!this._params.overrideStyleParameters&&!a.style.snow)return;const o=structuredClone(this._params);let m=[-o.direction.x,o.direction.y,-100];n.ab.vec3.normalize(m,m);const v=structuredClone(this._vignetteParams),S=o.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},D=a.transform.zoom;if(S.revealStart>D)return;const L=Ts(0,1,S.revealStart,S.revealStart+S.revealRange,D);v.strength*=L,o.overrideStyleParameters||(o.intensity=a.style.snow.state.density,o.timeFactor=a.style.snow.state.intensity,o.color=structuredClone(a.style.snow.state.color),m=structuredClone(a.style.snow.state.direction),o.screenThinning.intensity=a.style.snow.state.centerThinning,o.billboardSize=2.79*a.style.snow.state.flakeSize,v.strength=1,v.color=structuredClone(a.style.snow.state.vignetteColor));const O=this.updateOnRender(a,o.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const U=a.context,q=U.gl,Z=a.transform,X=a.getOrCreateProgram("snowParticle");a.uploadCommonUniforms(U,X),((ae,me,he)=>{const xe=Yh(this._movement.getPosition(),ae),_e=Z.width/2,Me=Z.height/2,Be=Ts(0,he.screenThinning.start,0,1,he.screenThinning.intensity),Oe=Ts(.001,he.screenThinning.range,0,1,he.screenThinning.intensity),Ze=Ts(0,he.screenThinning.particleOffset,0,1,he.screenThinning.intensity),Ue=(We={modelview:O.modelviewMatrix,projection:O.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:xe,velocityConeAperture:he.velocityConeAperture,velocity:he.velocity,horizontalOscillationRadius:he.horizontalOscillationRadius,horizontalOscillationRate:he.horizontalOscillationRate,boxSize:ae,billboardSize:1*he.billboardSize,simpleShapeParameters:[he.shapeFadeStart,he.shapeFadePower],screenSize:[Z.width,Z.height],thinningCenterPos:[_e,Me],thinningShape:[Be,Oe,Math.pow(10,he.screenThinning.fadePower)],thinningAffectedRatio:he.screenThinning.affectedRatio,thinningParticleOffset:Ze,color:[he.color.r,he.color.g,he.color.b,he.color.a],direction:m},{u_modelview:Float32Array.from(We.modelview),u_projection:Float32Array.from(We.projection),u_time:We.time,u_cam_pos:We.camPos,u_velocityConeAperture:We.velocityConeAperture,u_velocity:We.velocity,u_horizontalOscillationRadius:We.horizontalOscillationRadius,u_horizontalOscillationRate:We.horizontalOscillationRate,u_boxSize:We.boxSize,u_billboardSize:We.billboardSize,u_simpleShapeParameters:We.simpleShapeParameters,u_screenSize:We.screenSize,u_thinningCenterPos:We.thinningCenterPos,u_thinningShape:We.thinningShape,u_thinningAffectedRatio:We.thinningAffectedRatio,u_thinningParticleOffset:We.thinningParticleOffset,u_particleColor:We.color,u_direction:We.direction});var We;const qe=Math.round(L*he.intensity*this.particlesCount),tt=n.b7.simpleSegment(0,0,4*qe,2*qe);this.particlesVx&&this.particlesIdx&&X.draw(a,q.TRIANGLES,Rr.disabled,ea.disabled,ua.alphaBlended,Gr.disabled,Ue,"snow_particles",this.particlesVx,this.particlesIdx,tt,{})})(o.boxSize,0,o),this._vignette.draw(a,v)}}const Xd={symbol:function(p,a,o,m,v){if(p.renderPass!=="translucent")return;const S=ea.disabled,D=p.colorModeForRenderPass(),L=o.layout.get("text-variable-anchor"),O=o.layout.get("text-size-scale-range"),U=n.aw(p.scaleFactor,O[0],O[1]);L&&function(X,ae,me,he,xe,_e,Me,Be){const Oe=ae.transform,Ze=xe==="map",Ue=_e==="map";for(const We of X){const qe=he.getTile(We),tt=qe.getBucket(me);if(!tt||!tt.text||!tt.text.segments.get().length)continue;const rt=n.bp(tt.textSizeData,Oe.zoom,Be),Et=Dh(We,tt.getProjection(),Oe),_t=Oe.calculatePixelsToTileUnitsMatrix(qe),st=Eo(Et,qe.tileID.canonical,Ue,Ze,Oe,tt.getProjection(),_t),mt=tt.hasIconTextFit()&&tt.hasIconData();if(rt){const Bt=Math.pow(2,Oe.zoom-qe.tileID.overscaledZ);rn(tt,Ze,Ue,Me,n.cX,Oe,st,We,Bt,rt,mt)}}}(m,p,o,a,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),v,U);const q=o.paint.get("icon-opacity").constantOr(1)!==0,Z=o.paint.get("text-opacity").constantOr(1)!==0;o.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(q||Z)?Ea(p,a,o,m,S,D):(q&&Ea(p,a,o,m,S,D,{onlyIcons:!0}),Z&&Ea(p,a,o,m,S,D,{onlyText:!0})),a.map.showCollisionBoxes&&(Vd(p,a,o,m,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),Vd(p,a,o,m,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))},circle:function(p,a,o,m){if(p.renderPass!=="translucent")return;const v=o.paint.get("circle-opacity"),S=o.paint.get("circle-stroke-width"),D=o.paint.get("circle-stroke-opacity"),L=o.layout.get("circle-sort-key").constantOr(1)!==void 0,O=o.paint.get("circle-emissive-strength");if(v.constantOr(1)===0&&(S.constantOr(1)===0||D.constantOr(1)===0))return;const U=p.context,q=U.gl,Z=p.transform,X=p.depthModeForSublayer(0,Rr.ReadOnly),ae=ea.disabled,me=p.colorModeForDrapableLayerRenderPass(O),he=Z.projection.name==="globe",xe=[n.at(Z.center.lng),n.aA(Z.center.lat)],_e=[];for(let Be=0;Be<m.length;Be++){const Oe=m[Be],Ze=a.getTile(Oe),Ue=Ze.getBucket(o);if(!Ue||Ue.projection.name!==Z.projection.name)continue;const We=Ue.programConfigurations.get(o.id),qe=n.cY(o),tt=p.isTileAffectedByFog(Oe);he&&qe.push("PROJECTION_GLOBE_VIEW"),qe.push("DEPTH_D24"),p.terrain&&Z.depthOcclusionForSymbolsAndCircles&&qe.push("DEPTH_OCCLUSION");const rt=p.getOrCreateProgram("circle",{config:We,defines:qe,overrideFog:tt}),Et=Ue.layoutVertexBuffer,_t=Ue.globeExtVertexBuffer,st=Ue.indexBuffer,mt=Z.projection.createInversionMatrix(Z,Oe.canonical),Bt={programConfiguration:We,program:rt,layoutVertexBuffer:Et,globeExtVertexBuffer:_t,indexBuffer:st,uniformValues:n.cZ(p,Oe,Ze,mt,xe,o),tile:Ze};if(L){const qt=Ue.segments.get();for(const Kt of qt)_e.push({segments:new n.b7([Kt]),sortKey:Kt.sortKey,state:Bt})}else _e.push({segments:Ue.segments,sortKey:0,state:Bt})}L&&_e.sort((Be,Oe)=>Be.sortKey-Oe.sortKey);const Me={useDepthForOcclusion:Z.depthOcclusionForSymbolsAndCircles};for(const Be of _e){const{programConfiguration:Oe,program:Ze,layoutVertexBuffer:Ue,globeExtVertexBuffer:We,indexBuffer:qe,uniformValues:tt,tile:rt}=Be.state,Et=Be.segments;p.terrain&&p.terrain.setupElevationDraw(rt,Ze,Me),p.uploadCommonUniforms(U,Ze,rt.tileID.toUnwrapped()),Ze.draw(p,q.TRIANGLES,X,ae,me,Gr.disabled,tt,o.id,Ue,qe,Et,o.paint,Z.zoom,Oe,[We])}},heatmap:function(p,a,o,m){if(o.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const v=p.context,S=v.gl,D=ea.disabled,L=new ua([S.ONE,S.ONE,S.ONE,S.ONE],n.aj.transparent,[!0,!0,!0,!0]);(function(ae,me,he,xe){const _e=ae.gl,Me=me.width*xe,Be=me.height*xe;ae.activeTexture.set(_e.TEXTURE1),ae.viewport.set([0,0,Me,Be]);let Oe=he.heatmapFbo;if(!Oe||Oe&&(Oe.width!==Me||Oe.height!==Be)){Oe&&Oe.destroy();const Ze=_e.createTexture();_e.bindTexture(_e.TEXTURE_2D,Ze),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_WRAP_S,_e.CLAMP_TO_EDGE),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_WRAP_T,_e.CLAMP_TO_EDGE),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_MIN_FILTER,_e.LINEAR),_e.texParameteri(_e.TEXTURE_2D,_e.TEXTURE_MAG_FILTER,_e.LINEAR),Oe=he.heatmapFbo=ae.createFramebuffer(Me,Be,!0,null),function(Ue,We,qe,tt,rt,Et){const _t=Ue.gl;_t.texImage2D(_t.TEXTURE_2D,0,Ue.extRenderToTextureHalfFloat?_t.RGBA16F:_t.RGBA,rt,Et,0,_t.RGBA,Ue.extRenderToTextureHalfFloat?_t.HALF_FLOAT:_t.UNSIGNED_BYTE,null),tt.colorAttachment.set(qe)}(ae,0,Ze,Oe,Me,Be)}else _e.bindTexture(_e.TEXTURE_2D,Oe.colorAttachment.get()),ae.bindFramebuffer.set(Oe.framebuffer)})(v,p,o,p.transform.projection.name==="globe"?.5:.25),v.clear({color:n.aj.transparent});const O=p.transform,U=O.projection.name==="globe",q=U?["PROJECTION_GLOBE_VIEW"]:[],Z=U?Gr.frontCCW:Gr.disabled,X=[n.at(O.center.lng),n.aA(O.center.lat)];for(let ae=0;ae<m.length;ae++){const me=m[ae];if(a.hasRenderableParent(me))continue;const he=a.getTile(me),xe=he.getBucket(o);if(!xe||xe.projection.name!==O.projection.name)continue;const _e=p.isTileAffectedByFog(me),Me=xe.programConfigurations.get(o.id),Be=p.getOrCreateProgram("heatmap",{config:Me,defines:q,overrideFog:_e}),{zoom:Oe}=p.transform;p.terrain&&p.terrain.setupElevationDraw(he,Be),p.uploadCommonUniforms(v,Be,me.toUnwrapped());const Ze=O.projection.createInversionMatrix(O,me.canonical);Be.draw(p,S.TRIANGLES,Rr.disabled,D,L,Z,ic(p,me,he,Ze,X,Oe,o.paint.get("heatmap-intensity")),o.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,o.paint,p.transform.zoom,Me,U?[xe.globeExtVertexBuffer]:null)}v.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(v,S){const D=v.context,L=D.gl,O=S.heatmapFbo;if(!O)return;D.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,O.colorAttachment.get()),D.activeTexture.set(L.TEXTURE1);let U=S.colorRampTexture;U||(U=S.colorRampTexture=new n.T(D,S.colorRamp,L.RGBA8)),U.bind(L.LINEAR,L.CLAMP_TO_EDGE),v.getOrCreateProgram("heatmapTexture").draw(v,L.TRIANGLES,Rr.disabled,ea.disabled,v.colorModeForRenderPass(),Gr.disabled,((q,Z,X,ae)=>({u_image:0,u_color_ramp:1,u_opacity:Z.paint.get("heatmap-opacity")}))(0,S),S.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,S.paint,v.transform.zoom)}(p,o))},line:function(p,a,o,m){if(p.renderPass!=="translucent")return;const v=o.paint.get("line-opacity"),S=o.paint.get("line-width");if(v.constantOr(1)===0||S.constantOr(1)===0)return;const D=o.paint.get("line-emissive-strength"),L=o.paint.get("line-occlusion-opacity"),O=o.layout.get("line-elevation-reference"),U=o.layout.get("line-width-unit")==="meters",q=O==="sea",Z=p.context,X=Z.gl,ae=!o.isDraped();if(ae&&p.transform.projection.name==="globe")return;const me=o.layout.get("line-cross-slope"),he=me!==void 0,xe=me<1,_e=ae?new Rr(p.depthOcclusion?X.GREATER:X.LEQUAL,Rr.ReadOnly,p.depthRangeFor3D):p.depthModeForSublayer(0,Rr.ReadOnly),Me=p.colorModeForDrapableLayerRenderPass(D),Be=p.terrain&&p.terrain.renderingToTexture,Oe=Be?1:n.q.devicePixelRatio,Ze=o.paint.get("line-dasharray"),Ue=Ze.constantOr(1),We=o.layout.get("line-cap"),qe=Ze.constantOr(null),tt=We.constantOr(null),rt=o.paint.get("line-pattern"),Et=rt.constantOr(1),_t=rt.constantOr(null),st=o.paint.get("line-opacity").constantOr(1);let mt=!Et&&st!==1||p.depthOcclusion&&L>0&&L<1;const Bt=o.paint.get("line-gradient"),qt=Et?"linePattern":"line",Kt=n.c_(o);let xt;if(Be&&p.terrain&&p.terrain.clipOrMaskOverlapStencilType()&&(mt=!1),L!==0&&p.depthOcclusion){const Mt=o.paint._values["line-opacity"];Mt&&Mt.value&&Mt.value.kind==="constant"?xt=Mt.value:n.w(`Occlusion opacity for layer ${o.id} is supported only when line-opacity isn't data-driven.`)}if(ae&&(p.forceTerrainMode=!0),!ae&&L!==0&&p.terrain&&!Be)return void n.w(`Occlusion opacity for layer ${o.id} is supported on terrain only if the layer has line-z-offset enabled.`);const Ft=mt&&ae?p.stencilModeFor3D():ea.disabled;ae&&(Kt.push("ELEVATED"),he&&Kt.push(xe?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),q&&Kt.push("ELEVATION_REFERENCE_SEA")),S.value.kind!=="constant"&&S.value.isLineProgressConstant===!1&&Kt.push("VARIABLE_LINE_WIDTH");for(const Mt of m){const Qt=a.getTile(Mt);if(Et&&!Qt.patternsLoaded())continue;const Ot=Qt.getBucket(o);if(!Ot)continue;p.prepareDrawTile();const zt=Ot.programConfigurations.get(o.id),dr=p.isTileAffectedByFog(Mt),rr=p.getOrCreateProgram(qt,{config:zt,defines:Kt,overrideFog:dr,overrideRtt:!ae&&void 0});if(_t&&Qt.imageAtlas){const oa=n.A.from(_t),pn=Qt.imageAtlas.patternPositions[oa.getSerializedPrimary()];pn&&zt.setConstantPatternPositions(pn)}if(!Et&&qe&&tt&&Qt.lineAtlas){const oa=Qt.lineAtlas.getDash(qe,tt);oa&&zt.setConstantPatternPositions(oa)}let[yr,_r]=o.paint.get("line-trim-offset");(tt==="round"||tt==="square")&&yr!==_r&&(yr===0&&(yr-=1),_r===1&&(_r+=1));const Kr=Be?Mt.projMatrix:null,Ar=U?1/Ot.tileToMeter/n.ar(Qt,1,p.transform.zoom):1,zr=U?1/Ot.tileToMeter/n.ar(Qt,1,Math.floor(p.transform.zoom)):1,Hr=Et?n.c$(p,Qt,o,Kr,Oe,Ar,zr,[yr,_r]):n.d0(p,Qt,o,Kr,Ot.lineClipsArray.length,Oe,Ar,zr,[yr,_r]);if(Bt){const oa=Ot.gradients[o.id];let pn=oa.texture;if(o.gradientVersion!==oa.version){let mn=256;if(o.stepInterpolant){const Ua=a.getSource().maxzoom,Wa=Mt.canonical.z===Ua?Math.ceil(1<<p.transform.maxZoom-Mt.canonical.z):1;mn=n.aw(n.d1(Ot.maxLineLength/n.ag*1024*Wa),256,Z.maxTextureSize)}oa.gradient=n.d2({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:mn,image:oa.gradient||void 0,clips:Ot.lineClipsArray}),oa.texture?oa.texture.update(oa.gradient):oa.texture=new n.T(Z,oa.gradient,X.RGBA8),oa.version=o.gradientVersion,pn=oa.texture}Z.activeTexture.set(X.TEXTURE1),pn.bind(o.stepInterpolant?X.NEAREST:X.LINEAR,X.CLAMP_TO_EDGE)}Ue&&(Z.activeTexture.set(X.TEXTURE0),Qt.lineAtlasTexture&&Qt.lineAtlasTexture.bind(X.LINEAR,X.REPEAT),zt.updatePaintBuffers()),Et&&(Z.activeTexture.set(X.TEXTURE0),Qt.imageAtlasTexture&&Qt.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),zt.updatePaintBuffers()),ae&&!q&&p.terrain.setupElevationDraw(Qt,rr),p.uploadCommonUniforms(Z,rr,Mt.toUnwrapped());const pa=oa=>{xt!=null&&(xt.value=st*L),rr.draw(p,X.TRIANGLES,_e,oa,Me,Gr.disabled,Hr,o.id,Ot.layoutVertexBuffer,Ot.indexBuffer,Ot.segments,o.paint,p.transform.zoom,zt,[Ot.layoutVertexBuffer2,Ot.patternVertexBuffer,Ot.zOffsetVertexBuffer]),xt!=null&&(xt.value=st)};if(mt&&!ae){const oa=p.stencilModeForClipping(Mt).ref;oa===0&&Be&&Z.clear({stencil:0});const pn={func:X.EQUAL,mask:255};Hr.u_alpha_discard_threshold=.8,pa(new ea(pn,oa,255,X.KEEP,X.KEEP,X.INVERT)),Hr.u_alpha_discard_threshold=0,pa(new ea(pn,oa,255,X.KEEP,X.KEEP,X.KEEP))}else mt&&ae&&(Hr.u_alpha_discard_threshold=.001),pa(ae?Ft:p.stencilModeForClipping(Mt))}ae&&(p.forceTerrainMode=!1),mt&&(p.resetStencilClippingMasks(),Be&&Z.clear({stencil:0})),L===0||p.depthOcclusion||Be||p.layersWithOcclusionOpacity.push(p.currentLayer)},fill:function(p,a,o,m){const v=o.paint.get("fill-color"),S=o.paint.get("fill-opacity"),D=o.is3D(),L=new Rr(p.context.gl.LEQUAL,Rr.ReadWrite,p.depthRangeFor3D);if(S.constantOr(1)===0)return;const O=o.paint.get("fill-emissive-strength"),U=p.colorModeForDrapableLayerRenderPass(O),q=o.paint.get("fill-pattern"),Z=p.opaquePassEnabledForLayer()&&!q.constantOr(1)&&v.constantOr(n.aj.transparent).a===1&&S.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===Z){const X=D?L:p.depthModeForSublayer(1,p.renderPass==="opaque"?Rr.ReadWrite:Rr.ReadOnly);oc(p,a,o,m,X,U,!1)}if(!D&&p.renderPass==="translucent"&&o.paint.get("fill-antialias")){const X=D?L:p.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,Rr.ReadOnly);oc(p,a,o,m,X,U,!0)}},"fill-extrusion":function(p,a,o,m){const v=o.paint.get("fill-extrusion-opacity"),S=p.context,D=S.gl,L=p.terrain,O=L&&L.renderingToTexture;if(v===0)return;const U=p.conflationActive&&p.style.isLayerClipped(o,a.getSource()),q=p.style.order.indexOf(o.fqid);if(U&&function(Z,X,ae,me,he){for(const xe of me){const _e=X.getTile(xe).getBucket(ae);_e&&(_e.updateReplacement(xe,Z.replacementSource,he),_e.uploadCentroid(Z.context))}}(p,a,o,m,q),L||U)for(const Z of m){const X=a.getTile(Z).getBucket(o);X&&Ud(p.context,a,Z,X,o,L,U)}if(p.renderPass==="shadow"&&p.shadowRenderer){const Z=p.shadowRenderer;if(L&&v<.65&&o._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof n.a9)return;const X=Z.getShadowPassDepthMode(),ae=Z.getShadowPassColorMode();il(p,a,o,m,X,ea.disabled,ae,U)}else if(p.renderPass==="translucent"){const Z=!o.paint.get("fill-extrusion-pattern").constantOr(1),X=o.paint.get("fill-extrusion-color").constantOr(n.aj.white);if(!O&&X.a!==0){const ae=new Rr(p.context.gl.LEQUAL,Rr.ReadWrite,p.depthRangeFor3D);v===1&&Z?il(p,a,o,m,ae,ea.disabled,ua.unblended,U):(il(p,a,o,m,ae,ea.disabled,ua.disabled,U),il(p,a,o,m,ae,p.stencilModeFor3D(),p.colorModeForRenderPass(),U),p.resetStencilClippingMasks())}if(p.style.enable3dLights()&&Z&&(!L&&p.transform.projection.name!=="globe"||O)){const ae=o.paint.get("fill-extrusion-opacity"),me=o.paint.get("fill-extrusion-ambient-occlusion-intensity"),he=o.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),xe=o.paint.get("fill-extrusion-flood-light-intensity"),_e=o.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",Me=o.paint.get("fill-extrusion-flood-light-color").toRenderColor(_e?null:o.lut).toArray01().slice(0,3),Be=me>0&&he>0,Oe=xe>0,Ze=(We,qe,tt)=>(1-tt)*We+tt*qe,Ue=We=>{const qe=p.depthModeForSublayer(1,Rr.ReadOnly,D.LEQUAL,!0),tt=o.paint.get(We?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),rt=Ze(.1,3,tt),Et=p._showOverdrawInspector;if(!Et){const _t=new ea({func:D.ALWAYS,mask:255},255,255,D.KEEP,D.KEEP,D.REPLACE),st=new ua([D.ONE,D.ONE,D.ONE,D.ONE],n.aj.transparent,[!1,!1,!1,!0],D.MIN);Cl(p,a,o,m,qe,_t,st,Gr.disabled,We,"sdf",ae,me,he,xe,Me,rt,U,!1)}{const _t=Et?ea.disabled:new ea({func:D.EQUAL,mask:255},255,255,D.KEEP,D.DECR,D.DECR),st=Et?p.colorModeForRenderPass():new ua([D.ONE_MINUS_DST_ALPHA,D.DST_ALPHA,D.ONE,D.ONE],n.aj.transparent,[!0,!0,!0,!0]);Cl(p,a,o,m,qe,_t,st,Gr.disabled,We,"color",ae,me,he,xe,Me,rt,U,!1)}};if(O){const We=(qe,tt,rt)=>{const Et=p.depthModeForSublayer(1,Rr.ReadOnly,D.LEQUAL,!1),_t=o.paint.get(qe?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),st=Ze(.1,3,_t);{const mt=new ua([D.ONE,D.ONE,D.ONE,D.ONE],n.aj.transparent,[!1,!1,!1,!0]);Cl(p,a,o,m,Et,ea.disabled,mt,Gr.disabled,qe,"clear",ae,me,he,xe,Me,st,U,tt)}{const mt=new ea({func:D.ALWAYS,mask:255},255,255,D.KEEP,D.KEEP,D.REPLACE),Bt=new ua([D.ONE,D.ONE,D.ONE,D.ONE],n.aj.transparent,[!1,!1,!1,!0],D.MIN);Cl(p,a,o,m,Et,mt,Bt,Gr.disabled,qe,"sdf",ae,me,he,xe,Me,st,U,tt)}{const mt=qe?D.ZERO:D.ONE_MINUS_DST_ALPHA,Bt=new ea({func:D.EQUAL,mask:255},255,255,D.KEEP,D.DECR,D.DECR),qt=new ua([mt,D.DST_ALPHA,D.ONE_MINUS_DST_ALPHA,D.ZERO],n.aj.transparent,[!0,!0,!0,!0]);Cl(p,a,o,m,Et,Bt,qt,Gr.disabled,qe,"color",ae,me,he,xe,Me,st,U,tt)}{const mt=new ua([D.ONE,D.ONE,D.ONE,qe?D.ZERO:D.ONE],n.aj.transparent,[!1,!1,!1,!0],qe?D.FUNC_ADD:D.MAX);Cl(p,a,o,m,Et,ea.disabled,mt,Gr.disabled,qe,"clear",ae,me,he,xe,Me,st,U,tt,rt)}};if(Be||Oe){let qe;if(p.prepareDrawTile(),L){const tt=L.drapeBufferSize[0],rt=L.drapeBufferSize[1];qe=L.framebufferCopyTexture,qe&&(!qe||qe.size[0]===tt&&qe.size[1]===rt)||(qe&&qe.destroy(),qe=L.framebufferCopyTexture=new n.T(S,new n.r({width:tt,height:rt}),D.RGBA8)),qe.bind(D.LINEAR,D.CLAMP_TO_EDGE),D.copyTexSubImage2D(D.TEXTURE_2D,0,0,0,0,0,tt,rt)}Be&&We(!0,!1,qe),Oe&&We(!1,!0,qe)}}else Be&&Ue(!0),Oe&&Ue(!1),(Be||Oe)&&p.resetStencilClippingMasks()}}},hillshade:function(p,a,o,m){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent"||p.style.disableElevatedTerrain)return;const v=p.context,S=p.terrain&&p.terrain.renderingToTexture,[D,L]=p.renderPass!=="translucent"||S?[{},m]:p.stencilConfigForOverlap(m);for(const O of L){const U=a.getTile(O);if(U.needsHillshadePrepare&&p.renderPass==="offscreen")S0(p,U,o);else if(p.renderPass==="translucent"){const q=p.depthModeForSublayer(0,Rr.ReadOnly),Z=o.paint.get("hillshade-emissive-strength"),X=p.colorModeForDrapableLayerRenderPass(Z),ae=S&&p.terrain?p.terrain.stencilModeForRTTOverlap(O):D[O.overscaledZ];Lh(p,O,U,o,q,ae,X)}}v.viewport.set([0,0,p.width,p.height]),p.resetStencilClippingMasks()},raster:function(p,a,o,m,v,S){if(p.renderPass!=="translucent"||o.paint.get("raster-opacity")===0)return;const D=p.transform.projection.name==="globe",L=o.paint.get("raster-elevation")!==0,O=L&&D;if(p.renderElevatedRasterBackface&&!O)return;const U=p.context,q=U.gl,Z=a.getSource(),X=function(Ue,We,qe,tt){const rt=We.paint.get("raster-color"),Et=Ue.type==="raster-array",_t=[],st=We.paint.get("raster-resampling"),mt=We.paint.get("raster-color-mix");let Bt=We.paint.get("raster-color-range");const qt=[mt[0],mt[1],mt[2],0],Kt=mt[3];let xt=st==="nearest"?tt.NEAREST:tt.LINEAR;if(Et&&(_t.push("RASTER_ARRAY"),rt||_t.push("RASTER_COLOR"),st==="linear"&&_t.push("RASTER_ARRAY_LINEAR"),xt=tt.NEAREST,!Bt&&Ue.rasterLayers)){const Ft=Ue.rasterLayers.find(({id:Mt})=>Mt===We.sourceLayer);Ft&&Ft.fields&&Ft.fields.range&&(Bt=Ft.fields.range)}if(Bt=Bt||[0,1],rt){_t.push("RASTER_COLOR"),qe.activeTexture.set(tt.TEXTURE2),We.updateColorRamp(Bt);let Ft=We.colorRampTexture;Ft||(Ft=We.colorRampTexture=new n.T(qe,We.colorRamp,tt.RGBA8)),Ft.bind(tt.LINEAR,tt.CLAMP_TO_EDGE)}return{mix:qt,range:Bt,offset:Kt,defines:_t,resampling:xt}}(Z,o,U,q);if(Z instanceof n.aJ&&!m.length&&!D)return;const ae=o.paint.get("raster-emissive-strength"),me=p.colorModeForDrapableLayerRenderPass(ae),he=p.terrain&&p.terrain.renderingToTexture,xe=!p.options.moving,_e=o.paint.get("raster-resampling")==="nearest"?q.NEAREST:q.LINEAR;if(Z instanceof n.aJ&&!m.length&&(Z.onNorthPole||Z.onSouthPole)){const Ue=L?p.stencilModeFor3D():ea.disabled;return void lc(!!Z.onNorthPole,null,p,a,o,ae,X,Gr.disabled,Ue)}if(!m.length)return;const[Me,Be]=Z instanceof n.aJ||he?[{},m]:p.stencilConfigForOverlap(m),Oe=Be[Be.length-1].overscaledZ;O&&X.defines.push("PROJECTION_GLOBE_VIEW"),L&&X.defines.push("RENDER_CUTOFF");const Ze=(Ue,We,qe)=>{for(const tt of Ue){const rt=tt.toUnwrapped(),Et=a.getTile(tt);if(he&&(!Et||!Et.hasData()))continue;U.activeTexture.set(q.TEXTURE0);const _t=Tt(Et,Z,o,X);if(!_t||!_t.texture)continue;const{texture:st,mix:mt,offset:Bt,tileSize:qt,buffer:Kt}=_t;let xt,Ft;he?(xt=Rr.disabled,Ft=tt.projMatrix):L?(xt=new Rr(q.LEQUAL,Rr.ReadWrite,p.depthRangeFor3D),Ft=D?Float32Array.from(p.transform.expandedFarZProjMatrix):p.transform.calculateProjMatrix(rt,xe)):(xt=p.depthModeForSublayer(tt.overscaledZ-Oe,o.paint.get("raster-opacity")===1?Rr.ReadWrite:Rr.ReadOnly,q.LESS),Ft=p.transform.calculateProjMatrix(rt,xe));const Mt=p.terrain&&he?p.terrain.stencilModeForRTTOverlap(tt):Me[tt.overscaledZ],Qt=S?0:o.paint.get("raster-fade-duration");Et.registerFadeDuration(Qt);const Ot=a.findLoadedParent(tt,0),zt=Hu(Et,Ot,a,p.transform,Qt);let dr,rr;p.terrain&&p.terrain.prepareDrawTile(),U.activeTexture.set(q.TEXTURE0),st.bind(_e,q.CLAMP_TO_EDGE),U.activeTexture.set(q.TEXTURE1),Ot?(Ot.texture&&Ot.texture.bind(_e,q.CLAMP_TO_EDGE),dr=Math.pow(2,Ot.tileID.overscaledZ-Et.tileID.overscaledZ),rr=[Et.tileID.canonical.x*dr%1,Et.tileID.canonical.y*dr%1]):st.bind(_e,q.CLAMP_TO_EDGE),st.useMipmap&&U.extTextureFilterAnisotropic&&p.transform.pitch>20&&q.texParameterf(q.TEXTURE_2D,U.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,U.extTextureFilterAnisotropicMax);const yr=p.transform;let _r;const Kr=L?Mn(yr):[0,0,0,0];let Ar,zr,Hr,pa,oa,pn=0;if(O&&Z instanceof n.aJ&&Z.coordinates.length>3)Ar=Float32Array.from(n.bb(n.cH(new n.bT(0,0,0)))),zr=Float32Array.from(yr.globeMatrix),Hr=Float32Array.from(n.cD(yr)),pa=[n.at(yr.center.lng),n.aA(yr.center.lat)],_r=Z.elevatedGlobePerspectiveTransform,oa=Z.elevatedGlobeGridMatrix||new Float32Array(9);else if(O){const ia=n.cE(tt.canonical);pn=n.cF(ia.getCenter().lat),Ar=Float32Array.from(n.bb(n.cH(tt.canonical))),zr=Float32Array.from(yr.globeMatrix),Hr=Float32Array.from(n.cD(yr)),pa=[n.at(yr.center.lng),n.aA(yr.center.lat)],_r=[0,0],oa=Float32Array.from(n.cG(tt.canonical,ia,pn,yr.worldSize/yr._pixelsPerMercatorPixel))}else _r=Z instanceof n.aJ?Z.perspectiveTransform:[0,0],Ar=new Float32Array(16),zr=new Float32Array(9),Hr=new Float32Array(16),pa=[0,0],oa=new Float32Array(9);const mn=Od(Ft,Ar,zr,Hr,oa,rr||[0,0],n.ae(p.transform.zoom),pa,Kr,dr||1,zt,o,_r,L?o.paint.get("raster-elevation"):0,2,mt,Bt,X.range,qt,Kt,ae),Ua=p.isTileAffectedByFog(tt),Wa=p.getOrCreateProgram("raster",{defines:X.defines,overrideFog:Ua});if(p.uploadCommonUniforms(U,Wa,rt),Z instanceof n.aJ){const ia=Z.elevatedGlobeVertexBuffer,jr=Z.elevatedGlobeIndexBuffer;if(he||!D)Z.boundsBuffer&&Z.boundsSegments&&Wa.draw(p,q.TRIANGLES,xt,ea.disabled,me,Gr.disabled,mn,o.id,Z.boundsBuffer,p.quadTriangleIndexBuffer,Z.boundsSegments);else if(ia&&jr){const Fa=yr.zoom<=n.c6?Z.elevatedGlobeSegments:Z.getSegmentsForLongitude(yr.center.lng);Fa&&Wa.draw(p,q.TRIANGLES,xt,ea.disabled,me,We,mn,o.id,ia,jr,Fa)}}else if(O){xt=new Rr(q.LEQUAL,Rr.ReadOnly,p.depthRangeFor3D);const ia=p.globeSharedBuffers;if(ia){const[jr,Fa,Zr]=ia.getGridBuffers(pn,!1);Wa.draw(p,q.TRIANGLES,xt,qe||Mt,p.colorModeForRenderPass(),We,mn,o.id,jr,Fa,Zr)}}else{const{tileBoundsBuffer:ia,tileBoundsIndexBuffer:jr,tileBoundsSegments:Fa}=p.getTileBoundsBuffers(Et);Wa.draw(p,q.TRIANGLES,xt,Mt,me,Gr.disabled,mn,o.id,ia,jr,Fa)}}if(!(Z instanceof n.aJ)&&O)for(const tt of Ue){const rt=tt.canonical.y===(1<<tt.canonical.z)-1;tt.canonical.y===0&&lc(!0,tt,p,a,o,ae,X,We,qe||ea.disabled),rt&&lc(!1,tt,p,a,o,ae,X,We===Gr.frontCW?Gr.backCW:Gr.frontCW,qe||ea.disabled)}};O?Ze(Be,p.renderElevatedRasterBackface?Gr.backCW:Gr.frontCW,p.stencilModeFor3D()):Ze(Be,Gr.disabled,void 0),p.resetStencilClippingMasks()},"raster-particle":function(p,a,o,m,v,S){p.renderPass==="offscreen"&&function(D,L,O,U){if(!U.length)return;const q=D.context,Z=q.gl,X=L.getSource();if(!(X instanceof yl))return;const ae=Math.ceil(Math.sqrt(O.paint.get("raster-particle-count")));let me=O.particlePositionRGBAImage;if(!me||me.width!==ae){const Be=function(Oe){const Ze=Oe*Oe,Ue=new Uint8Array(4*Ze),We=function(tt){return tt|=0,tt=Math.imul(2747636419^tt,2654435769),tt=Math.imul(tt^tt>>>16,2654435769),((tt=Math.imul(tt^tt>>>16,2654435769))>>>0)/4294967296},qe=1/1.1;for(let tt=0;tt<Ze;tt++){const rt=qe*(We(2*tt+0)+Ss),Et=qe*(We(2*tt+1)+Ss),_t=255*rt%1,st=255*Et%1,mt=_t,Bt=Et-st/255,qt=st;Ue[4*tt+0]=255*(rt-_t/255),Ue[4*tt+1]=255*mt,Ue[4*tt+2]=255*Bt,Ue[4*tt+3]=255*qt}return Ue}(ae);me=O.particlePositionRGBAImage=new n.r({width:ae,height:ae},Be)}let he=O.particleFramebuffer;he?he.width!==ae&&(he.destroy(),he=O.particleFramebuffer=q.createFramebuffer(ae,ae,!0,null)):he=O.particleFramebuffer=q.createFramebuffer(ae,ae,!0,null);const xe=[];for(const Be of U){const Oe=L.getTile(Be);if(!(Oe instanceof Eh))continue;const Ze=Gh(Oe,X,O);if(!Ze)continue;const Ue=[Oe.tileSize,Oe.tileSize];let We=O.tileFramebuffer;We||(We=O.tileFramebuffer=q.createFramebuffer(Ue[0],Ue[1],!0,null));let qe=Oe.rasterParticleState;qe||(qe=Oe.rasterParticleState=new qd(q,Be,Ue,me));const tt=qe.update(O.lastInvalidatedAt);qe.particleTextureDimension!==ae&&qe.updateParticleTexture(Be,me);const rt=qe.targetColorTexture;qe.targetColorTexture=qe.backgroundColorTexture,qe.backgroundColorTexture=rt;const Et=qe.particleTexture0;qe.particleTexture0=qe.particleTexture1,qe.particleTexture1=Et,xe.push([Be,Ze,qe,tt])}if(xe.length===0)return;const _e=n.q.now(),Me=O.previousDrawTimestamp?.001*(_e-O.previousDrawTimestamp):.0167;if(O.previousDrawTimestamp=_e,O.hasColorMap()){q.activeTexture.set(Z.TEXTURE0+2);let Be=O.colorRampTexture;Be||(Be=O.colorRampTexture=new n.T(q,O.colorRamp,Z.RGBA8)),Be.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)}q.bindFramebuffer.set(O.tileFramebuffer.framebuffer),function(Be,Oe,Ze){const Ue=Be.context,We=Ue.gl,qe=Oe.tileFramebuffer;Ue.activeTexture.set(We.TEXTURE0);const tt={u_texture:0,u_opacity:1.05*(Et=Oe.paint.get("raster-particle-fade-opacity-factor"))/(Et+.05)},rt=Be.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Et;for(const _t of Ze){const[,,st,mt]=_t;qe.colorAttachment.set(st.targetColorTexture.texture),Ue.viewport.set([0,0,qe.width,qe.height]),Ue.clear({color:n.aj.transparent}),mt&&(st.backgroundColorTexture.bind(We.NEAREST,We.CLAMP_TO_EDGE),rt.draw(Be,We.TRIANGLES,Rr.disabled,ea.disabled,ua.alphaBlended,Gr.disabled,tt,Oe.id,Be.viewportBuffer,Be.quadTriangleIndexBuffer,Be.viewportSegments))}}(D,O,xe),function(Be,Oe,Ze,Ue){const We=Be.context,qe=We.gl,tt=Ze.tileFramebuffer,rt=Be.transform.projection.name==="globe",Et=Ze.paint.get("raster-particle-max-speed");for(const _t of Ue){const[st,mt,Bt]=_t;We.activeTexture.set(qe.TEXTURE0+0),mt.texture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE),tt.colorAttachment.set(Bt.targetColorTexture.texture);const qt=Be.getOrCreateProgram("rasterParticleDraw",{defines:mt.defines,overrideFog:!1});We.activeTexture.set(qe.TEXTURE0+1);const Kt=mt.scalarData?[]:[0,1,2,3].map(Mt=>n.d4[Mt](st));Kt.push(st);const xt=st.canonical.x,Ft=st.canonical.y;for(const Mt of Kt){const Qt=Oe.getTile(rt?Mt.wrapped():Mt);if(!Qt)continue;const Ot=Qt.rasterParticleState;if(!Ot)continue;const zt=Mt.canonical.x+(1<<Mt.canonical.z)*(Mt.wrap-st.wrap),dr=Mt.canonical.y;Ot.particleTexture0.bind(qe.NEAREST,qe.CLAMP_TO_EDGE);const rr=Ir(1,Ot.particleTexture0.size[0],[zt-xt,dr-Ft],0,mt.texture.size,2,Et,mt.textureOffset,mt.scale,mt.offset);qt.draw(Be,qe.POINTS,Rr.disabled,ea.disabled,ua.alphaBlended,Gr.disabled,rr,Ze.id,Ot.particleIndexBuffer,void 0,Ot.particleSegment)}}}(D,L,O,xe),q.bindFramebuffer.set(O.particleFramebuffer.framebuffer),function(Be,Oe,Ze,Ue){const We=Be.context,qe=We.gl,tt=Oe.paint.get("raster-particle-max-speed"),rt=Ue*Oe.paint.get("raster-particle-speed-factor")*.15,Et=function(st){return Math.pow(st,6)}(.01+1*Oe.paint.get("raster-particle-reset-rate-factor")),_t=Oe.particleFramebuffer;We.viewport.set([0,0,_t.width,_t.height]);for(const st of Ze){const[,mt,Bt]=st;We.activeTexture.set(qe.TEXTURE0+0),mt.texture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE),We.activeTexture.set(qe.TEXTURE0+1);const qt=Bt.particleTexture0;qt.bind(qe.NEAREST,qe.CLAMP_TO_EDGE);const Kt=Tl(1,qt.size[0],0,mt.texture.size,tt,rt,Et,mt.textureOffset,mt.scale,mt.offset);_t.colorAttachment.set(Bt.particleTexture1.texture),We.clear({color:n.aj.transparent}),Be.getOrCreateProgram("rasterParticleUpdate",{defines:mt.defines}).draw(Be,qe.TRIANGLES,Rr.disabled,ea.disabled,ua.unblended,Gr.disabled,Kt,Oe.id,Be.viewportBuffer,Be.quadTriangleIndexBuffer,Be.viewportSegments)}}(D,O,xe,Me)}(p,a,o,m),p.renderPass==="translucent"&&(function(D,L,O,U,q){const Z=D.context,X=Z.gl,ae=L.getSource().tileSize,me=5*(1-n.ac(n.bY,n.bY+1,D.transform.zoom))*ae+O.paint.get("raster-particle-elevation"),he=!D.options.moving,xe=D.transform.projection.name==="globe";if(!U.length)return;const[_e,Me]=D.stencilConfigForOverlap(U),Be=[];xe&&Be.push("PROJECTION_GLOBE_VIEW");const Oe=D.stencilModeFor3D();for(const Ze of Me){const Ue=Ze.toUnwrapped(),We=L.getTile(Ze);if(!We.rasterParticleState)continue;const qe=We.rasterParticleState,tt=100;We.registerFadeDuration(tt);const rt=L.findLoadedParent(Ze,0),Et=Hu(We,rt,L,D.transform,tt);let _t,st;D.terrain&&D.terrain.prepareDrawTile(),Z.activeTexture.set(X.TEXTURE0),qe.targetColorTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),Z.activeTexture.set(X.TEXTURE1),rt&&rt.rasterParticleState?(rt.rasterParticleState.targetColorTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),_t=Math.pow(2,rt.tileID.overscaledZ-We.tileID.overscaledZ),st=[We.tileID.canonical.x*_t%1,We.tileID.canonical.y*_t%1]):qe.targetColorTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE);const mt=xe?Float32Array.from(D.transform.expandedFarZProjMatrix):D.transform.calculateProjMatrix(Ue,he),Bt=D.transform,qt=zs(Bt),Kt=n.cE(Ze.canonical),xt=n.cF(Kt.getCenter().lat);let Ft,Mt,Qt,Ot,zt;xe?(Ft=Float32Array.from(n.bb(n.cH(Ze.canonical))),Mt=Float32Array.from(Bt.globeMatrix),Qt=Float32Array.from(n.cD(Bt)),Ot=[n.at(Bt.center.lng),n.aA(Bt.center.lat)],zt=Float32Array.from(n.cG(Ze.canonical,Kt,xt,Bt.worldSize/Bt._pixelsPerMercatorPixel))):(Ft=new Float32Array(16),Mt=new Float32Array(9),Qt=new Float32Array(16),Ot=[0,0],zt=new Float32Array(9));const dr=Wc(mt,Ft,Mt,Qt,zt,st||[0,0],n.ae(D.transform.zoom),Ot,qt,_t||1,Et,me),rr=D.isTileAffectedByFog(Ze),yr=D.getOrCreateProgram("rasterParticle",{defines:Be,overrideFog:rr});if(D.uploadCommonUniforms(Z,yr,Ue),xe){const _r=new Rr(X.LEQUAL,Rr.ReadOnly,D.depthRangeFor3D),Kr=0,Ar=D.globeSharedBuffers;if(Ar){const[zr,Hr,pa]=Ar.getGridBuffers(xt,Kr!==0);yr.draw(D,X.TRIANGLES,_r,Oe,ua.alphaBlended,D.renderElevatedRasterBackface?Gr.frontCCW:Gr.backCCW,dr,O.id,zr,Hr,pa)}}else{const _r=D.depthModeForSublayer(0,Rr.ReadOnly),Kr=_e[Ze.overscaledZ],{tileBoundsBuffer:Ar,tileBoundsIndexBuffer:zr,tileBoundsSegments:Hr}=D.getTileBoundsBuffers(We);yr.draw(D,X.TRIANGLES,_r,Kr,ua.alphaBlended,Gr.disabled,dr,O.id,Ar,zr,Hr)}}D.resetStencilClippingMasks()}(p,a,o,m),p.style.map.triggerRepaint())},background:function(p,a,o,m){const v=o.paint.get("background-color"),S=o.paint.get("background-color-use-theme").constantOr("default")==="none",D=o.paint.get("background-opacity"),L=o.paint.get("background-emissive-strength"),O=o.paint.get("background-pitch-alignment")==="viewport";if(D===0)return;const U=p.context,q=U.gl,Z=p.transform,X=Z.tileSize,ae=o.paint.get("background-pattern");let me;if(ae!==void 0&&(ae===null||(me=p.imageManager.getPattern(ae.toString(),o.scope,p.style.getLut(o.scope)),!me)))return;const he=!ae&&v.a===1&&D===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==he)return;const xe=ea.disabled,_e=p.depthModeForSublayer(0,he==="opaque"?Rr.ReadWrite:Rr.ReadOnly),Me=p.colorModeForDrapableLayerRenderPass(L),Be=ae?"backgroundPattern":"background";let Oe,Ze=m;if(Ze||(Oe=p.getBackgroundTiles(),Ze=Object.values(Oe).map(Ue=>Ue.tileID)),ae&&(U.activeTexture.set(q.TEXTURE0),p.imageManager.bind(p.context,o.scope)),O){const Ue=p.getOrCreateProgram(Be,{overrideFog:!1,overrideRtt:!0}),We=new Float32Array(n.ab.mat4.identity([])),qe=new n.aG(0,0,0,0,0),tt=ae?El(We,L,D,p,0,o.scope,me,O,{tileID:qe,tileSize:X}):rl(We,L,D,v.toRenderColor(S?null:o.lut));Ue.draw(p,q.TRIANGLES,_e,xe,Me,Gr.disabled,tt,o.id,p.viewportBuffer,p.quadTriangleIndexBuffer,p.viewportSegments)}else for(const Ue of Ze){const We=p.isTileAffectedByFog(Ue),qe=p.getOrCreateProgram(Be,{overrideFog:We}),tt=Ue.toUnwrapped(),rt=m?Ue.projMatrix:p.transform.calculateProjMatrix(tt);p.prepareDrawTile();const Et=a?a.getTile(Ue):Oe?Oe[Ue.key]:new kc(Ue,X,Z.zoom,p),_t=ae?El(rt,L,D,p,0,o.scope,me,O,{tileID:Ue,tileSize:X}):rl(rt,L,D,v.toRenderColor(S?null:o.lut));p.uploadCommonUniforms(U,qe,tt);const{tileBoundsBuffer:st,tileBoundsIndexBuffer:mt,tileBoundsSegments:Bt}=p.getTileBoundsBuffers(Et);qe.draw(p,q.TRIANGLES,_e,xe,Me,Gr.disabled,_t,o.id,st,mt,Bt)}},sky:function(p,a,o){const m=p._atmosphere?n.ae(p.transform.zoom):1,v=o.paint.get("sky-opacity")*m;if(v===0)return;const S=p.context,D=o.paint.get("sky-type"),L=new Rr(S.gl.LEQUAL,Rr.ReadOnly,[0,1]),O=p.frameCounter/1e3%1;D==="atmosphere"?p.renderPass==="offscreen"?o.needsSkyboxCapture(p)&&(function(U,q,Z,X){const ae=U.context,me=ae.gl;let he=q.skyboxFbo;if(!he){he=q.skyboxFbo=ae.createFramebuffer(32,32,!0,null),q.skyboxGeometry=new Lo(ae),q.skyboxTexture=ae.gl.createTexture(),me.bindTexture(me.TEXTURE_CUBE_MAP,q.skyboxTexture),me.texParameteri(me.TEXTURE_CUBE_MAP,me.TEXTURE_WRAP_S,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_CUBE_MAP,me.TEXTURE_WRAP_T,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_CUBE_MAP,me.TEXTURE_MIN_FILTER,me.LINEAR),me.texParameteri(me.TEXTURE_CUBE_MAP,me.TEXTURE_MAG_FILTER,me.LINEAR);for(let Be=0;Be<6;++Be)me.texImage2D(me.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,me.RGBA,32,32,0,me.RGBA,me.UNSIGNED_BYTE,null)}ae.bindFramebuffer.set(he.framebuffer),ae.viewport.set([0,0,32,32]);const xe=q.getCenter(U,!0),_e=U.getOrCreateProgram("skyboxCapture"),Me=new Float64Array(16);n.ab.mat4.identity(Me),n.ab.mat4.rotateY(Me,Me,.5*-Math.PI),Yc(U,q,_e,Me,xe,0),n.ab.mat4.identity(Me),n.ab.mat4.rotateY(Me,Me,.5*Math.PI),Yc(U,q,_e,Me,xe,1),n.ab.mat4.identity(Me),n.ab.mat4.rotateX(Me,Me,.5*-Math.PI),Yc(U,q,_e,Me,xe,2),n.ab.mat4.identity(Me),n.ab.mat4.rotateX(Me,Me,.5*Math.PI),Yc(U,q,_e,Me,xe,3),n.ab.mat4.identity(Me),Yc(U,q,_e,Me,xe,4),n.ab.mat4.identity(Me),n.ab.mat4.rotateY(Me,Me,Math.PI),Yc(U,q,_e,Me,xe,5),ae.viewport.set([0,0,U.width,U.height])}(p,o),o.markSkyboxValid(p)):p.renderPass==="sky"&&function(U,q,Z,X,ae){const me=U.context,he=me.gl,xe=U.transform,_e=U.getOrCreateProgram("skybox");me.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_CUBE_MAP,q.skyboxTexture);const Me=((Be,Oe,Ze,Ue,We)=>({u_matrix:Be,u_sun_direction:Oe,u_cubemap:0,u_opacity:Ue,u_temporal_offset:We}))(xe.skyboxMatrix,q.getCenter(U,!1),0,X,ae);U.uploadCommonUniforms(me,_e),_e.draw(U,he.TRIANGLES,Z,ea.disabled,U.colorModeForRenderPass(),Gr.backCW,Me,"skybox",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(p,o,L,v,O):D==="gradient"&&p.renderPass==="sky"&&function(U,q,Z,X,ae){const me=U.context,he=me.gl,xe=U.transform,_e=U.getOrCreateProgram("skyboxGradient");q.skyboxGeometry||(q.skyboxGeometry=new Lo(me)),me.activeTexture.set(he.TEXTURE0);let Me=q.colorRampTexture;Me||(Me=q.colorRampTexture=new n.T(me,q.colorRamp,he.RGBA8)),Me.bind(he.LINEAR,he.CLAMP_TO_EDGE);const Be=((Oe,Ze,Ue,We,qe)=>({u_matrix:Oe,u_color_ramp:0,u_center_direction:Ze,u_radius:n.ai(Ue),u_opacity:We,u_temporal_offset:qe}))(xe.skyboxMatrix,q.getCenter(U,!1),q.paint.get("sky-gradient-radius"),X,ae);U.uploadCommonUniforms(me,_e),_e.draw(U,he.TRIANGLES,Z,ea.disabled,U.colorModeForRenderPass(),Gr.backCW,Be,"skyboxGradient",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(p,o,L,v,O)},debug:function(p,a,o,m,v,S){for(let D=0;D<o.length;D++)if(v){const U=new n.aj(m.r*.8,m.g*.8,m.b*.8,1);Ls(p,a,o[D],m,-1,-1,S),Ls(p,a,o[D],m,-1,1,S),Ls(p,a,o[D],m,1,1,S),Ls(p,a,o[D],m,1,-1,S),Ls(p,a,o[D],U,0,0,S)}else Ls(p,a,o[D],m,0,0,S)},custom:function(p,a,o,m){const v=p.context,S=o.implementation;if(!p.transform.projection.unsupportedLayers||!p.transform.projection.unsupportedLayers.includes("custom")||p.terrain&&(p.terrain.renderingToTexture||p.renderPass==="offscreen")&&o.isDraped(a)){if(p.renderPass==="offscreen"){const D=S.prerender;if(D){if(p.setCustomLayerDefaults(),v.setColorMode(p.colorModeForRenderPass()),p.transform.projection.name==="globe"){const L=p.transform.pointMerc;D.call(S,v.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),n.ae(p.transform.zoom),[L.x,L.y],p.transform.pixelsPerMeterRatio)}else D.call(S,v.gl,p.transform.customLayerMatrix());v.setDirty(),p.setBaseState()}}else if(p.renderPass==="translucent"){if(p.terrain&&p.terrain.renderingToTexture){const L=S.renderToTile;if(L){const O=m[0].canonical,U=new n.aa(O.x+m[0].wrap*(1<<O.z),O.y,O.z);v.setDepthMode(Rr.disabled),v.setStencilMode(ea.disabled),v.setColorMode(p.colorModeForRenderPass()),p.setCustomLayerDefaults(),L.call(S,v.gl,U),v.setDirty(),p.setBaseState()}return}p.setCustomLayerDefaults(),v.setColorMode(p.colorModeForRenderPass()),v.setStencilMode(ea.disabled);const D=S.renderingMode==="3d"?new Rr(p.context.gl.LEQUAL,Rr.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,Rr.ReadOnly);if(v.setDepthMode(D),p.transform.projection.name==="globe"){const L=p.transform.pointMerc;S.render(v.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),n.ae(p.transform.zoom),[L.x,L.y],p.transform.pixelsPerMeterRatio)}else S.render(v.gl,p.transform.customLayerMatrix());v.setDirty(),p.setBaseState(),v.bindFramebuffer.set(null)}}else n.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(p,a,o,m){if(p.renderPass==="opaque")return;const v=o.paint.get("model-opacity").constantOr(1);if(v===0)return;const S=o.paint.get("model-cast-shadows");if(p.renderPass==="shadow"&&(!S||p.terrain&&v<.65&&o._transitionablePaint._values["model-opacity"].value.expression instanceof n.a9))return;const D=p.shadowRenderer,L=o.paint.get("model-receive-shadows");D&&(D.useNormalOffset=!0,L||(D.enabled=!1));const O=()=>{D&&(D.useNormalOffset=!0,L||(D.enabled=!0))},U=a.getSource();if(p.renderPass==="light-beam"&&U.type!=="batched-model")return;if(U.type==="vector"||U.type==="geojson")return function(_e,Me,Be,Oe,Ze){const Ue=_e.transform;if(Ue.projection.name!=="mercator")return void n.w(`Drawing 3D models for ${Ue.projection.name} projection is not yet implemented`);const We=Ue.getFreeCameraOptions().position;if(!_e.modelManager)return;const qe=_e.modelManager;Be.modelManager=qe;const tt=_e.shadowRenderer;if(!Be._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const rt=Be._unevaluatedLayout._values["model-id"],Et={...Be.layout.get("model-id").parameters},_t=_e.style.order.indexOf(Be.fqid);for(const st of Oe){const mt=Me.getTile(st).getBucket(Be);if(!mt||mt.projection.name!==Ue.projection.name)continue;const Bt=mt.getModelUris();Bt&&!mt.modelsRequested&&(qe.addModelsFromBucket(Bt,Ze),mt.modelsRequested=!0);const qt=uc(st,Ue);Et.zoom=qt;const Kt=rt.possiblyEvaluate(Et);if(Sp(_e,mt,st),no.shadowUniformsInitialized=!1,no.useSingleShadowCascade=!!tt&&tt.getMaxCascadeForTile(st.toUnwrapped())===0,_e.renderPass==="shadow"&&tt){if(_e.currentShadowCascade===1&&mt.isInsideFirstShadowMapFrustum)continue;const Mt=Ue.calculatePosMatrix(st.toUnwrapped(),Ue.worldSize);if(no.tileMatrix.set(Mt),no.shadowTileMatrix=Float32Array.from(tt.calculateShadowPassMatrixFromMatrix(Mt)),no.aabb.min.fill(0),no.aabb.max[0]=no.aabb.max[1]=n.ag,no.aabb.max[2]=0,fc(mt,no,_e,Be.scope))continue}const xt=1<<st.canonical.z,Ft=[((We.x-st.wrap)*xt-st.canonical.x)*n.ag,(We.y*xt-st.canonical.y)*n.ag,We.z*xt*n.ag];_e.conflationActive&&Object.keys(mt.instancesPerModel).length>0&&_e.style.isLayerClipped(Be,Me.getSource())&&mt.updateReplacement(st,_e.replacementSource,_t,Ze)&&(mt.uploaded=!1,mt.upload(_e.context));for(let Mt in mt.instancesPerModel){const Qt=mt.instancesPerModel[Mt];Qt.features.length>0&&(Mt=Kt.evaluate(Qt.features[0].feature,{}));const Ot=qe.getModel(Mt,Ze);if(Ot&&Ot.uploaded)for(const zt of Ot.nodes)dc(_e,Be,zt,Qt,Ft,st,no)}}}(p,a,o,m,U.type==="vector"?o.scope:""),void O();if(!U.loaded())return;if(U.type==="batched-model")return function(_e,Me,Be,Oe){Be.resetLayerRenderingStats(_e);const Ze=_e.context,Ue=_e.transform,We=_e.style.fog,qe=_e.shadowRenderer;if(Ue.projection.name!=="mercator")return void n.w(`Drawing 3D landmark models for ${Ue.projection.name} projection is not yet implemented`);const tt=_e.transform.getFreeCameraOptions().position,rt=n.ab.vec3.scale([],[tt.x,tt.y,tt.z],_e.transform.worldSize),Et=n.ab.vec3.negate([],rt),_t=n.ab.mat4.identity([]),st=n.dj(Ue.center.lat,Ue.zoom),mt=n.ab.mat4.fromScaling([],[1,1,1/st]);n.ab.mat4.translate(_t,_t,Et);const Bt=Be.paint.get("model-opacity").constantOr(1),qt=new Rr(Ze.gl.LEQUAL,Rr.ReadWrite,_e.depthRangeFor3D),Kt=new Rr(Ze.gl.LEQUAL,Rr.ReadOnly,_e.depthRangeFor3D),xt=new n.cd([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),Ft=_e.renderPass==="shadow",Mt=Ft&&qe?qe.getCurrentCascadeFrustum():Ue.getFrustum(Ue.scaleZoom(Ue.worldSize)),Qt=Be.paint.get("model-front-cutoff"),Ot=Qt[2]<1,zt=bl(_e,Be.paint.get("model-cutoff-fade-range")),dr=Be.getLayerRenderingStats();(function(rr,yr,_r,Kr){const Ar=rr.terrain?rr.terrain.exaggeration():0,zr=rr.transform.zoom;for(const Hr of Kr){const pa=yr.getTile(Hr).getBucket(_r);pa&&(rr.conflationActive&&pa.updateReplacement(Hr,rr.replacementSource),pa.evaluateScale(rr,_r),rr.terrain&&Ar>0&&pa.elevationUpdate(rr.terrain,Ar,Hr,_r.source),pa.needsReEvaluation(rr,zr,_r)&&pa.evaluate(_r))}})(_e,Me,Be,Oe),function(){let rr,yr,_r;Ot?(rr=Oe.length-1,yr=-1,_r=-1):(rr=0,yr=Oe.length,_r=1);const Kr=new Float64Array(16),Ar=n.ab.vec3.create(),zr=new n.P(0,0);for(let Hr=rr;Hr!==yr;Hr+=_r){const pa=Oe[Hr],oa=Me.getTile(pa).getBucket(Be);if(!oa||!oa.uploaded)continue;let pn=!1;qe&&(pn=qe.getMaxCascadeForTile(pa.toUnwrapped())===0);const mn=Ue.calculatePosMatrix(pa.toUnwrapped(),Ue.worldSize),Ua=oa.modelTraits;!Ft&&Ot&&(n.ab.mat4.invert(Kr,mn),n.ab.vec3.transformMat4(Ar,rt,Kr),zr.x=Ar[0],zr.y=Ar[1]);const Wa=[];for(const ia of oa.getNodesInfo()){if(ia.hiddenByReplacement||!ia.node.meshes)continue;const jr=ia.node;let Fa=0;_e.terrain&&jr.elevation&&(Fa=jr.elevation*_e.terrain.exaggeration());const Zr=(()=>{const qr=ia.aabb;return xt.min=[...qr.min],xt.max=[...qr.max],xt.min[2]+=Fa,xt.max[2]+=Fa,n.ab.vec3.transformMat4(xt.min,xt.min,mn),n.ab.vec3.transformMat4(xt.max,xt.max,mn),xt})(),ya=ia.evaluatedScale;if(ya[0]<=1&&ya[1]<=1&&ya[2]<=1&&Zr.intersects(Mt)===0)continue;if(!Ft&&Ot){const qr=.16666666666666666;ia.cameraCollisionOpacity=rt[0]>Zr.min[0]&&rt[0]<Zr.max[0]&&rt[1]>Zr.min[1]&&rt[1]<Zr.max[1]&&rt[2]*st<Zr.max[2]&&jr.footprint&&n.bA(zr,jr.footprint)?Math.max(ia.cameraCollisionOpacity-qr,0):Math.min(1,ia.cameraCollisionOpacity+qr)}const xa=[...mn],Pa=jr.anchor?jr.anchor[0]:0,wa=jr.anchor?jr.anchor[1]:0;n.ab.mat4.translate(xa,xa,[Pa*(ya[0]-1),wa*(ya[1]-1),Fa]),n.ab.vec3.exactEquals(ya,n.dm)||n.ab.mat4.scale(xa,xa,ya);const En=n.ab.mat4.multiply([],xa,jr.matrix),ai=n.ab.mat4.multiply([],Ue.expandedFarZProjMatrix,En),Cn=n.ab.mat4.multiply([],Ue.expandedFarZProjMatrix,xa),nn=n.ab.vec4.transformMat4([],[Pa,wa,Fa,1],ai)[2];jr.hidden=!1;let Ga=Bt;Ft||(Ot&&(Ga*=ia.cameraCollisionOpacity,Ga*=Tp(xa,Ue,ia.aabb,Qt)),Ga*=Qu(zt,nn)),Ga!==0?Wa.push({nodeInfo:ia,depth:nn,opacity:Ga,wvpForNode:ai,wvpForTile:Cn,nodeModelMatrix:En,tileModelMatrix:xa}):jr.hidden=!0}Ft||Wa.sort((ia,jr)=>!Ot||ia.opacity===1&&jr.opacity===1?ia.depth<jr.depth?-1:1:ia.opacity===1?-1:jr.opacity===1?1:ia.depth>jr.depth?-1:1);for(const ia of Wa){const jr=ia.nodeInfo,Fa=jr.node;let Zr=n.ab.mat4.multiply([],mt,ia.tileModelMatrix);n.ab.mat4.multiply(Zr,_t,Zr);const ya=n.ab.mat4.invert([],Zr);n.ab.mat4.transpose(ya,ya),n.ab.mat4.scale(ya,ya,hc),Zr=n.ab.mat4.multiply(Zr,Zr,Fa.matrix);const xa=_e.renderPass==="light-beam",Pa=Be.paint.get("model-color-use-theme").constantOr("default")==="none",wa=Ua&n.dp.HasMapboxMeshFeatures,En=wa?0:jr.evaluatedRMEA[0][2];for(let ai=0;ai<Fa.meshes.length;++ai){const Cn=Fa.meshes[ai],nn=ai===Fa.lightMeshIndex;let Ga=ia.wvpForNode;if(nn){if(!xa&&!_e.terrain&&_e.shadowRenderer){_e.currentLayer<_e.firstLightBeamLayer&&(_e.firstLightBeamLayer=_e.currentLayer);continue}Ga=ia.wvpForTile}else if(xa)continue;const qr={defines:[]},vn=[];if(!Ft&&qe&&(qe.useNormalOffset=!!Cn.normalBuffer),Wh(qr.defines,vn,Cn,_e,Pa?null:Be.lut),wa||qr.defines.push("DIFFUSE_SHADED"),pn&&qr.defines.push("SHADOWS_SINGLE_CASCADE"),dr&&(Ft?dr.numRenderedVerticesInShadowPass+=Cn.vertexArray.length:dr.numRenderedVerticesInTransparentPass+=Cn.vertexArray.length),Ft){cc(Cn,ia.nodeModelMatrix,_e,Be);continue}let Qn=null;if(We){const Qi=Oa(ia.nodeModelMatrix,_e.transform);if(Qn=new Float32Array(Qi),Ue.projection.name!=="globe"){const ho=Cn.aabb.min,us=Cn.aabb.max,[ll,ds]=We.getOpacityForBounds(Qi,ho[0],ho[1],us[0],us[1]);qr.overrideFog=ll>=cr||ds>=cr}}const an=Cn.material;let zn;an.occlusionTexture&&an.occlusionTexture.offsetScale&&(zn=an.occlusionTexture.offsetScale,qr.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const Yi=_e.getOrCreateProgram("model",qr);!Ft&&qe&&qe.setupShadowsFromMatrix(ia.tileModelMatrix,Yi,qe.useNormalOffset),_e.uploadCommonUniforms(Ze,Yi,null,Qn);const Ji=an.pbrMetallicRoughness;Ji.metallicFactor=.9,Ji.roughnessFactor=.5;const fi=Uh(new Float32Array(Ga),new Float32Array(Zr),new Float32Array(ya),new Float32Array(Fa.matrix),_e,ia.opacity,Ji.baseColorFactor.toRenderColor(null),an.emissiveFactor,Ji.metallicFactor,Ji.roughnessFactor,an,En,Be,[0,0,0],zn);!nn&&(jr.hasTranslucentParts||ia.opacity<1)&&Yi.draw(_e,Ze.gl.TRIANGLES,qt,ea.disabled,ua.disabled,Gr.backCCW,fi,Be.id,Cn.vertexBuffer,Cn.indexBuffer,Cn.segments,Be.paint,_e.transform.zoom,void 0,vn),Yi.draw(_e,Ze.gl.TRIANGLES,nn?Kt:qt,ea.disabled,nn||ia.opacity<1||jr.hasTranslucentParts?ua.alphaBlended:ua.unblended,Gr.backCCW,fi,Be.id,Cn.vertexBuffer,Cn.indexBuffer,Cn.segments,Be.paint,_e.transform.zoom,void 0,vn)}}}}()}(p,a,o,m),void O();if(U.type!=="model")return;const q=U.getModels(),Z=[],X=p.transform.getFreeCameraOptions().position,ae=n.ab.vec3.scale([],[X.x,X.y,X.z],p.transform.worldSize);n.ab.vec3.negate(ae,ae);const me=[],he=[];let xe=0;for(const _e of q){const Me=o.paint.get("model-rotation").constantOr(null),Be=o.paint.get("model-scale").constantOr(null),Oe=o.paint.get("model-translation").constantOr(null);_e.computeModelMatrix(p,Me,Be,Oe,!0,!0,!1);const Ze=n.ab.mat4.identity([]),Ue=n.dj(_e.position.lat,p.transform.zoom),We=n.ab.mat4.fromScaling([],[1,1,1/Ue]);n.ab.mat4.translate(Ze,Ze,ae),Z.push({zScaleMatrix:We,negCameraPosMatrix:Ze});for(const qe of _e.nodes)Kd(p.transform,qe,_e.matrix,p.transform.expandedFarZProjMatrix,xe,me,he);xe++}if(me.sort((_e,Me)=>Me.depth-_e.depth),p.renderPass!=="shadow"){if(v===1)for(const _e of he)ao(_e,p,o,Z[_e.modelIndex],ea.disabled,p.colorModeForRenderPass());else{for(const _e of he)ao(_e,p,o,Z[_e.modelIndex],ea.disabled,ua.disabled);for(const _e of he)ao(_e,p,o,Z[_e.modelIndex],p.stencilModeFor3D(),p.colorModeForRenderPass());p.resetStencilClippingMasks()}for(const _e of me)ao(_e,p,o,Z[_e.modelIndex],ea.disabled,p.colorModeForRenderPass());O()}else{for(const _e of he)cc(_e.mesh,_e.nodeModelMatrix,p,o);for(const _e of me)cc(_e.mesh,_e.nodeModelMatrix,p,o);O()}}},Qh={model:function(p,a,o){const m=a.getSource();if(!m.loaded())return;if(m.type==="vector"||m.type==="geojson")return void(o.modelManager&&o.modelManager.upload(o,m.type==="vector"?p.scope:""));if(m.type==="batched-model"||m.type!=="model")return;const v=m.getModels();for(const S of v)S.upload(o.context)},raster:function(p,a,o){const m=a.getSource();if(!(m instanceof yl&&m.loaded()))return;const v=p.sourceLayer||m.rasterLayerIds&&m.rasterLayerIds[0];if(!v)return;const S=p.paint.get("raster-array-band")||m.getInitialBand(v);if(S==null)return;const D=a.getIds().map(L=>a.getTileByID(L));for(const L of D)L.updateNeeded(v,S)&&m.prepareTile(L,v,S)},"raster-particle":function(p,a,o){const m=a.getSource();if(!(m instanceof yl&&m.loaded()))return;const v=p.sourceLayer||m.rasterLayerIds&&m.rasterLayerIds[0];if(!v)return;const S=p.paint.get("raster-particle-array-band")||m.getInitialBand(v);if(S==null)return;const D=a.getIds().map(L=>a.getTileByID(L));for(const L of D)L.updateNeeded(v,S)&&m.prepareTile(L,v,S)}};class ef{constructor(a,o,m,v,S){this.context=new al(a,o),this.transform=m,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=S,this._timeStamp=n.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const D=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const O of D)this._debugParams.enabledLayers[O]=!0;S.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),S.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),S.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),S.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),S.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),S.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const O of D)S.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],O);this.occlusionParams=new pc(S),this.setup(),this.numSublayers=To.maxUnderzooming+To.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new n.dv,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new Kl(this),this._wireframeDebugCache=new ed,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const L=new n.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new n.T(this.context,L,a.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=v}updateTerrain(a,o){const m=!!a&&!!a.terrain&&this.transform.projection.supportsTerrain;if(!(m||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new C0(this,a));const v=this._terrain;this.transform.elevation=m?v:null,v.update(a,this.transform,o),this.transform.elevation&&!v.enabled&&(this.transform.elevation=null)}_updateFog(a){const o=a.fog;if(!o||this.transform.projection.name==="globe"||o.getOpacity(this.transform.pitch)<1||o.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[m,v]=o.getFovAdjustedRange(this.transform._fov);if(m>v)return void(this.transform.fogCullDistSq=null);const S=m+.78*(v-m);this.transform.fogCullDistSq=S*S}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(a){a&&!this._terrain&&(this._terrain=new C0(this,this.style)),this._forceTerrainMode=a}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(a,o){if(this.width=a*n.q.devicePixelRatio,this.height=o*n.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style.order)this.style._mergedLayers[m].resize()}setup(){const a=this.context,o=new n.b4;o.emplaceBack(0,0),o.emplaceBack(n.ag,0),o.emplaceBack(0,n.ag),o.emplaceBack(n.ag,n.ag),this.tileExtentBuffer=a.createVertexBuffer(o,n.b6.members),this.tileExtentSegments=n.b7.simpleSegment(0,0,4,2);const m=new n.b4;m.emplaceBack(0,0),m.emplaceBack(n.ag,0),m.emplaceBack(0,n.ag),m.emplaceBack(n.ag,n.ag),this.debugBuffer=a.createVertexBuffer(m,n.b6.members),this.debugSegments=n.b7.simpleSegment(0,0,4,5);const v=new n.b4;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(v,n.b6.members),this.viewportSegments=n.b7.simpleSegment(0,0,4,2);const S=new n.aT;S.emplaceBack(0,0,0,0),S.emplaceBack(n.ag,0,n.ag,0),S.emplaceBack(0,n.ag,0,n.ag),S.emplaceBack(n.ag,n.ag,n.ag,n.ag),this.mercatorBoundsBuffer=a.createVertexBuffer(S,n.b9.members),this.mercatorBoundsSegments=n.b7.simpleSegment(0,0,4,2);const D=new n.aU;D.emplaceBack(0,1,2),D.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(D);const L=new n.b5;for(const U of[0,1,3,2,0])L.emplaceBack(U);this.debugIndexBuffer=a.createIndexBuffer(L),this.emptyTexture=new n.T(a,new n.r({width:1,height:1},Uint8Array.of(0,0,0,0)),a.gl.RGBA8),this.identityMat=n.ab.mat4.create();const O=this.context.gl;this.stencilClearMode=new ea({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(a){return a._makeTileBoundsBuffers(this.context,this.transform.projection),a._tileBoundsBuffer?{tileBoundsBuffer:a._tileBoundsBuffer,tileBoundsIndexBuffer:a._tileBoundsIndexBuffer,tileBoundsSegments:a._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const a=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,a.TRIANGLES,Rr.disabled,this.stencilClearMode,ua.disabled,Gr.disabled,xi(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(a,o,m){if(!o||this.currentStencilSource===o.id||!a.isTileClipped()||!m||m.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let L=!1;for(const O of m)if(this._tileClippingMaskIDs[O.key]===void 0){L=!0;break}if(!L)return}this.currentStencilSource=o.id;const v=this.context,S=v.gl;this.nextStencilID+m.length>256&&this.clearStencil(),v.setColorMode(ua.disabled),v.setDepthMode(Rr.disabled);const D=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const L of m){const O=o.getTile(L),U=this._tileClippingMaskIDs[L.key]=this.nextStencilID++,{tileBoundsBuffer:q,tileBoundsIndexBuffer:Z,tileBoundsSegments:X}=this.getTileBoundsBuffers(O);D.draw(this,S.TRIANGLES,Rr.disabled,new ea({func:S.ALWAYS,mask:0},U,255,S.KEEP,S.KEEP,S.REPLACE),ua.disabled,Gr.disabled,xi(L.projMatrix),"$clipping",q,Z,X)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,o=this.context.gl;return new ea({func:o.NOTEQUAL,mask:255},a,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(a){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(a);const o=this.context.gl;return new ea({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,o.KEEP,o.KEEP,o.REPLACE)}stencilConfigForOverlap(a){const o=this.context.gl,m=a.sort((D,L)=>L.overscaledZ-D.overscaledZ),v=m[m.length-1].overscaledZ,S=m[0].overscaledZ-v+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const D={};for(let L=0;L<S;L++)D[L+v]=new ea({func:o.GEQUAL,mask:255},L+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=S,[D,m]}return[{[v]:ea.disabled},m]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new ua([a.CONSTANT_COLOR,a.ONE,a.CONSTANT_COLOR,a.ONE],new n.aj(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ua.unblended:ua.alphaBlended}colorModeForDrapableLayerRenderPass(a){const o=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new ua([o.ONE,o.ONE_MINUS_SRC_ALPHA,o.CONSTANT_ALPHA,o.ONE_MINUS_SRC_ALPHA],new n.aj(0,0,0,a===void 0?0:a),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(a,o,m,v=!1){if(this.depthOcclusion)return new Rr(this.context.gl.GREATER,Rr.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!v)return Rr.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Rr(m||this.context.gl.LEQUAL,o,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const a=this.context.gl,o=Math.ceil(this.width),m=Math.ceil(this.height),v=this.context.bindFramebuffer.get(),S=a.getParameter(a.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===o&&this.depthFBO.height===m||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),o!==0&&m!==0&&(this.depthFBO=new zi(this.context,o,m,!1,"texture"),this.depthTexture=new n.T(this.context,{width:o,height:m,data:null},a.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(v),a.bindTexture(a.TEXTURE_2D,S),this.depthFBO&&(a.bindFramebuffer(a.READ_FRAMEBUFFER,null),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),a.blitFramebuffer(0,0,o,m,0,0,o,m,a.DEPTH_BUFFER_BIT,a.NEAREST),a.bindFramebuffer(a.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((a,o)=>a+o/this._fpsHistory.length,0))}render(a,o){const m=n.q.now();this._dt=m-this._timeStamp,this._timeStamp=m,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=a.map.repaint,this.style=a,this.options=o;const v=this.style._mergedLayers,S=this.style._getOrder(!(!this.terrain||!this.terrain.enabled)).filter(st=>{const mt=v[st];return!(mt.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[mt.type]});let D=!1,L=!1;for(const st of S){const mt=v[st];mt.type==="circle"&&(D=!0),mt.type==="symbol"&&(mt.hasInitialOcclusionOpacityProperties?L=!0:D=!0)}const O=S.map(st=>v[st]),U=this.style._mergedSourceCaches;this.imageManager=a.imageManager,this.modelManager=a.modelManager,this.symbolFadeChange=a.placement.symbolFadeChange(n.q.now()),this.imageManager.beginFrame();let q=0,Z=!1;for(const st in U){const mt=U[st];mt.used&&(mt.prepare(this.context),mt.getSource().usedInConflation&&++q)}let X=!1;for(const st of O)st.isHidden(this.transform.zoom)||(st.type==="clip"&&(X=!0),this.prepareLayer(st));const ae={},me={},he={},xe={},_e={};for(const st in U){const mt=U[st];ae[st]=mt.getVisibleCoordinates(),me[st]=ae[st].slice().reverse(),he[st]=mt.getVisibleCoordinates(!0).reverse(),xe[st]=mt.getShadowCasterCoordinates(),_e[st]=mt.sortCoordinatesByDistance(ae[st])}const Me=st=>{const mt=this.style.getLayerSourceCache(st);return mt&&mt.used?mt.getSource():null};if(q||X||this._clippingActiveLastFrame){const st=[],mt=[];let Bt=0;for(const qt of O)this.isSourceForClippingOrConflation(qt,Me(qt))&&(st.push(qt),mt.push(Bt)),Bt++;if(st&&(X||st.length>1)||this._clippingActiveLastFrame){X=!1;const qt=[];for(let Kt=0;Kt<st.length;Kt++){const xt=st[Kt],Ft=mt[Kt],Mt=this.style.getLayerSourceCache(xt);if(!Mt||!Mt.used||!Mt.getSource().usedInConflation&&xt.type!=="clip")continue;let Qt=n.dx,Ot=n.by.None;const zt=[];let dr=!0;if(xt.type==="clip"){Qt=Ft;for(const rr of xt.layout.get("clip-layer-types"))Ot|=rr==="model"?n.by.Model:rr==="symbol"?n.by.Symbol:n.by.FillExtrusion;for(const rr of xt.layout.get("clip-layer-scope"))zt.push(rr);xt.isHidden(this.transform.zoom)?dr=!1:X=!0}dr&&qt.push({layer:xt.fqid,cache:Mt,order:Qt,clipMask:Ot,clipScope:zt})}this.replacementSource.setSources(qt),Z=!0}}this._clippingActiveLastFrame=X,Z||this.replacementSource.clear(),this.conflationActive=Z,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let st=0;st<O.length;st++){const mt=O[st],Bt=mt.cutoffRange();if(this.longestCutoffRange=Math.max(Bt,this.longestCutoffRange),Bt>0){const qt=Me(mt);qt&&(this.minCutoffZoom=Math.max(qt.minzoom,this.minCutoffZoom)),mt.minzoom&&(this.minCutoffZoom=Math.max(mt.minzoom,this.minCutoffZoom))}mt.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=st),this._lastOcclusionLayer=st)}const Be=this.style&&this.style.fog;Be?(this._fogVisible=Be.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=Be.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(he),this.opaquePassCutoff=0);const Oe=this._shadowRenderer;if(Oe){Oe.updateShadowParameters(this.transform,this.style.directionalLight);for(const st in U)for(const mt of ae[st]){let Bt={min:0,max:0};this.terrain&&(Bt=this.terrain.getMinMaxForTile(mt)||Bt),Oe.addShadowReceiver(mt.toUnwrapped(),Bt.min,Bt.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new n.dw(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new xn(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const Ze=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),Ue=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(Ze&&!this._snow&&(this._snow=new mc(this)),!Ze&&this._snow&&(this._snow.destroy(),delete this._snow),Ue&&!this._rain&&(this._rain=new Dp(this)),!Ue&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!ur.has(this.context.gl))return;this.renderPass="offscreen";for(const st of O){const mt=a.getLayerSourceCache(st);if(!st.hasOffscreenPass()||st.isHidden(this.transform.zoom))continue;const Bt=mt?me[mt.id]:void 0;(st.type==="custom"||st.type==="raster"||st.type==="raster-particle"||st.isSky()||Bt&&Bt.length)&&this.renderLayer(this,mt,st,Bt)}this.depthRangeFor3D=[0,1-(O.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,xe)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const We=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),qe=(()=>{if(o.showOverdrawInspector)return n.aj.black;const st=this.style.fog;if(st&&this.transform.projection.supportsFog){const mt=this.style.getLut(st.scope);if(!We){const Bt=st.properties.get("color-use-theme")==="none",qt=st.properties.get("color").toRenderColor(Bt?null:mt).toArray01();return new n.aj(...qt)}if(We){const Bt=st.properties.get("space-color-use-theme")==="none",qt=st.properties.get("space-color").toRenderColor(Bt?null:mt).toArray01();return new n.aj(...qt)}}return n.aj.transparent})();if(this.context.clear({color:qe,depth:1}),this.clearStencil(),this._showOverdrawInspector=o.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&We&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=S.length-1;this.currentLayer>=0;this.currentLayer--){const st=O[this.currentLayer],mt=a.getLayerSourceCache(st);if(st.isSky())continue;const Bt=mt?(st.is3D()?_e:me)[mt.id]:void 0;this._renderTileClippingMasks(st,mt,Bt),this.renderLayer(this,mt,st,Bt)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&We&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||n.ae(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<S.length;this.currentLayer++){const st=O[this.currentLayer],mt=a.getLayerSourceCache(st);st.isSky()&&this.renderLayer(this,mt,st,mt?me[mt.id]:void 0)}function tt(st,mt){let Bt;return mt&&(Bt=(st.type==="symbol"?he:st.is3D()?_e:me)[mt.id]),Bt}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<S.length;){const st=O[this.currentLayer];if(st.type==="raster"||st.type==="raster-particle"){const mt=a.getLayerSourceCache(st);this.renderLayer(this,mt,st,tt(st,mt))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let rt=0;Oe&&(rt=Oe.getShadowCastingLayerCount());let Et=!1,_t=-1;for(let st=0;st<S.length;++st){const mt=O[st];mt.isHidden(this.transform.zoom)||mt.is3D()&&(_t=st)}for(L&&_t===-1&&(D=!0);this.currentLayer<S.length;){const st=O[this.currentLayer],mt=a.getLayerSourceCache(st);if(st.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(st)){if(st.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(D&&!Et&&this.terrain&&!this.transform.isOrthographic&&(Et=!0,this.blitDepth()),L&&_t!==-1&&this.currentLayer===_t+1&&!this.transform.isOrthographic&&this.blitDepth(),st.is3D()||this.terrain||this._renderTileClippingMasks(st,mt,mt?ae[mt.id]:void 0),this.renderLayer(this,mt,st,tt(st,mt)),!this.terrain&&Oe&&rt>0&&st.hasShadowPass()&&--rt==0&&(Oe.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Bt=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Bt;this.currentLayer++){const qt=O[this.currentLayer];if(!qt.hasLightBeamPass())continue;const Kt=a.getLayerSourceCache(qt);this.renderLayer(this,Kt,qt,Kt?me[Kt.id]:void 0)}this.currentLayer=Bt,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const Bt=this.currentLayer;this.depthOcclusion=!0;for(const qt of this.layersWithOcclusionOpacity){this.currentLayer=qt;const Kt=O[this.currentLayer],xt=a.getLayerSourceCache(Kt),Ft=xt?me[xt.id]:void 0;Kt.is3D()||this.terrain||this._renderTileClippingMasks(Kt,xt,xt?ae[xt.id]:void 0),this.renderLayer(this,xt,Kt,Ft)}this.depthOcclusion=!1,this.currentLayer=Bt,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let st=null;O.forEach(mt=>{const Bt=a.getLayerSourceCache(mt);Bt&&!mt.isHidden(this.transform.zoom)&&Bt.getVisibleCoordinates().length&&(!st||st.getSource().maxzoom<Bt.getSource().maxzoom)&&(st=Bt)}),st&&this.options.showTileBoundaries&&Xd.debug(this,st,st.getVisibleCoordinates(),n.aj.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Xd.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new n.aj(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(st){const mt=st.transform.padding;Xc(st,st.transform.height-(mt.top||0),3,vi),Xc(st,mt.bottom||0,3,bp),Wd(st,mt.left||0,3,Dl),Wd(st,st.transform.width-(mt.right||0),3,wp);const Bt=st.transform.centerPoint;(function(qt,Kt,xt,Ft){Ju(qt,Kt-1,xt-10,2,20,Ft),Ju(qt,Kt-10,xt-1,20,2,Ft)})(st,Bt.x,st.transform.height-Bt.y,Hm)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),Z||(this.conflationActive=!1)}prepareLayer(a){this.gpuTimingStart(a);const{unsupportedLayers:o}=this.transform.projection,m=!o||!o.includes(a.type);if(Qh[a.type]&&(m||this.terrain&&a.type==="custom")){const v=this.style.getLayerSourceCache(a);Qh[a.type](a,v,this)}this.gpuTimingEnd()}renderLayer(a,o,m,v){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="sky"||m.type==="custom"||m.type==="model"||m.type==="raster"||m.type==="raster-particle"||v&&v.length)&&(this.id=m.id,this.gpuTimingStart(m),a.transform.projection.unsupportedLayers&&a.transform.projection.unsupportedLayers.includes(m.type)&&(!a.terrain||m.type!=="custom")||m.type==="clip"||Xd[m.type](a,o,m,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(a){if(!this.options.gpuTiming)return;const o=this.context.extTimerQuery,m=this.context.gl;let v=this.gpuTimers[a.id];v||(v=this.gpuTimers[a.id]={calls:0,cpuTime:0,query:m.createQuery()}),v.calls++,m.beginQuery(o.TIME_ELAPSED_EXT,v.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const a=this.context.extTimerQuery,o=this.context.gl,m=o.createQuery();this.deferredRenderGpuTimeQueries.push(m),o.beginQuery(a.TIME_ELAPSED_EXT,m)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const a=this.gpuTimers;return this.gpuTimers={},a}collectDeferredRenderGpuQueries(){const a=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],a}queryGpuTimers(a){const o={};for(const m in a){const v=a[m],S=this.context.extTimerQuery,D=S.getQueryParameter(v.query,this.context.gl.QUERY_RESULT)/1e6;S.deleteQueryEXT(v.query),o[m]=D}return o}queryGpuTimeDeferredRender(a){if(!this.options.gpuTimingDeferredRender)return 0;const o=this.context.gl;let m=0;for(const v of a)m+=o.getQueryParameter(v,o.QUERY_RESULT)/1e6,o.deleteQuery(v);return m}translatePosMatrix(a,o,m,v,S){if(!m[0]&&!m[1])return a;const D=S?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(D){const U=Math.sin(D),q=Math.cos(D);m=[m[0]*q-m[1]*U,m[0]*U+m[1]*q]}const L=[S?m[0]:n.ar(o,m[0],this.transform.zoom),S?m[1]:n.ar(o,m[1],this.transform.zoom),0],O=new Float32Array(16);return n.ab.mat4.translate(O,a,L),O}saveTileTexture(a){const o=a.size[0],m=this._tileTextures[o];m?m.push(a):this._tileTextures[o]=[a]}getTileTexture(a){const o=this._tileTextures[a];return o&&o.length>0?o.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(a,o,m){const v=m===void 0?this.terrain&&this.terrain.renderingToTexture:m,S=[];return this.style&&this.style.enable3dLights()&&(a==="globeRaster"||a==="terrainRaster"?(S.push("LIGHTING_3D_MODE"),S.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):v||S.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||S.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(S.push("TERRAIN"),this.linearFloatFilteringSupported()&&S.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&S.push("GLOBE"),!this._fogVisible||v||o!==void 0&&!o||S.push("FOG","FOG_DITHERING"),v&&S.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&S.push("OVERDRAW_INSPECTOR"),S}getOrCreateProgram(a,o){this.cache=this.cache||{};const m=o&&o.defines||[],v=o&&o.config,S=this.currentGlobalDefines(a,o&&o.overrideFog,o&&o.overrideRtt).concat(m),D=Nd.cacheKey(ju[a],a,S,v);return this.cache[D]||(this.cache[D]=new Nd(this.context,a,ju[a],v,Yu[a],S)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new n.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(a,o){if(this.style.enable3dLights()){const m=this.style.directionalLight,v=this.style.ambientLight;if(m&&v){const S=((D,L,O)=>{const U=D.properties.get("direction"),q=D.properties.get("color-use-theme")==="none",Z=D.properties.get("color").toRenderColor(q?null:O.getLut(D.scope)).toArray01(),X=D.properties.get("intensity"),ae=L.properties.get("color-use-theme")==="none",me=L.properties.get("color").toRenderColor(ae?null:O.getLut(L.scope)).toArray01(),he=L.properties.get("intensity"),xe=[U.x,U.y,U.z],_e=n.cM(me,he),Me=n.cM(Z,X);return{u_lighting_ambient_color:_e,u_lighting_directional_dir:xe,u_lighting_directional_color:Me,u_ground_radiance:Ii(xe,Me,_e)}})(m,v,this.style);o.setLightsUniformValues(a,S)}}}uploadCommonUniforms(a,o,m,v,S){if(this.uploadCommonLightUniforms(a,o),this.terrain&&this.terrain.renderingToTexture)return;const D=this.style.fog;if(D){const L=D.getOpacity(this.transform.pitch),O=((U,q,Z,X,ae,me,he,xe,_e,Me,Be,Oe)=>{const Ze=U.transform,Ue=q.properties.get("color-use-theme")==="none",We=q.properties.get("color").toRenderColor(Ue?null:U.style.getLut(q.scope)).toArray01();We[3]=X;const qe=U.frameCounter/1e3%1,[tt,rt]=q.properties.get("vertical-range");return{u_fog_matrix:Z?Ze.calculateFogTileMatrix(Z):Oe||U.identityMat,u_fog_range:q.getFovAdjustedRange(Ze._fov),u_fog_color:We,u_fog_horizon_blend:q.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(tt,rt),rt],u_fog_temporal_offset:qe,u_frustum_tl:ae,u_frustum_tr:me,u_frustum_br:he,u_frustum_bl:xe,u_globe_pos:_e,u_globe_radius:Me,u_viewport:Be,u_globe_transition:n.ae(Ze.zoom),u_is_globe:+(Ze.projection.name==="globe")}})(this,D,m,L,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*n.q.devicePixelRatio,this.transform.height*n.q.devicePixelRatio],v);o.setFogUniformValues(a,O)}S&&o.setCutoffUniformValues(a,S.uniformValues)}setTileLoadedFlag(a){this.tileLoaded=a}saveCanvasCopy(){const a=this.canvasCopy();a&&(this.frameCopies.push(a),this.tileLoaded=!1)}canvasCopy(){const a=this.context.gl,o=a.createTexture();return a.bindTexture(a.TEXTURE_2D,o),a.copyTexImage2D(a.TEXTURE_2D,0,a.RGBA,0,0,a.drawingBufferWidth,a.drawingBufferHeight,0),o}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const a=this.style&&this.style.fog;return!!a&&a.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const a=this._backgroundTiles,o=this._backgroundTiles={},m=this.transform.coveringTiles({tileSize:512});for(const v of m)o[v.key]=a[v.key]||new kc(v,512,this.transform.tileZoom,this);return o}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(a,o){return!(!a.is3D()||a.type!=="clip"&&(a.minzoom&&a.minzoom>this.transform.zoom||(this.style._clipLayerPresent||a.sourceLayer!=="building")&&(!o||o.type!=="batched-model")))}isTileAffectedByFog(a){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let o=this._cachedTileFogOpacities[a.key];return o||(this._cachedTileFogOpacities[a.key]=o=this.style.fog.getOpacityForTile(a)),o[0]>=cr||o[1]>=cr}setupDepthForOcclusion(a,o,m){const v=this.context,S=v.gl,D=!!m;var L;m||(m={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),v.activeTexture.set(S.TEXTURE3),a&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),m.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],m.u_depth_range_unpack=[2/((L=this.depthRangeFor3D)[1]-L[0]),-1-2*L[0]/(L[1]-L[0])],m.u_occluder_half_size=.5*this.occlusionParams.occluderSize,m.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),v.activeTexture.set(S.TEXTURE0),D||o.setTerrainUniformValues(v,m)}}function Yd(p,a){let o=!1,m=null;const v=()=>{m=null,o&&(p(),m=setTimeout(v,a),o=!1)};return()=>(o=!0,m||v(),m)}class Pp{constructor(a){this._hashName=a&&encodeURIComponent(a),n.aP(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Yd(this._updateHashUnthrottled.bind(this),300)}addTo(a){return this._map=a,window.addEventListener("hashchange",this._onHashChange,!1),a.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const a=this._map;if(!a)return"";const o=Mp(a);if(this._hashName){const m=this._hashName;let v=!1;const S=location.hash.slice(1).split("&").map(D=>{const L=D.split("=")[0];return L===m?(v=!0,`${L}=${o}`):D}).filter(D=>D);return v||S.push(`${m}=${o}`),`#${S.join("&")}`}return`#${o}`}_getCurrentHash(){const a=location.hash.replace("#","");if(this._hashName){let o;return a.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(o=m)}),(o&&o[1]||"").split("/")}return a.split("/")}_onHashChange(){const a=this._map;if(!a)return!1;const o=this._getCurrentHash();if(o.length>=3&&!o.some(m=>isNaN(m))){const m=a.dragRotate.isEnabled()&&a.touchZoomRotate.isEnabled()?+(o[3]||0):a.getBearing();return a.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:m,pitch:+(o[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function Mp(p,a){const o=p.getCenter(),m=Math.round(100*p.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,v),D=Math.round(o.lng*S)/S,L=Math.round(o.lat*S)/S,O=p.getBearing(),U=p.getPitch();let q=a?`/${D}/${L}/${m}`:`${m}/${L}/${D}`;return(O||U)&&(q+="/"+Math.round(10*O)/10),U&&(q+=`/${Math.round(U)}`),q}const tf={linearity:.3,easing:n.dy(0,0,.3,1)},Km=n.l({deceleration:2500,maxSpeed:1400},tf),Jd=n.l({deceleration:20,maxSpeed:1400},tf),Ap=n.l({deceleration:1e3,maxSpeed:360},tf),rf=n.l({deceleration:1e3,maxSpeed:90},tf);class Zm{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.q.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,o=n.q.now();for(;a.length>0&&o-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const o={zoom:0,bearing:0,pitch:0,pan:new n.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)o.zoom+=S.zoomDelta||0,o.bearing+=S.bearingDelta||0,o.pitch+=S.pitchDelta||0,S.panDelta&&o.pan._add(S.panDelta),S.around&&(o.around=S.around),S.pinchAround&&(o.pinchAround=S.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(o.pan.mag()){const S=Jc(o.pan.mag(),m,n.l({},Km,a||{}));v.offset=o.pan.mult(S.amount/o.pan.mag()),v.center=this._map.transform.center,Qd(v,S)}if(o.zoom){const S=Jc(o.zoom,m,Jd);v.zoom=this._map.transform.zoom+S.amount,Qd(v,S)}if(o.bearing){const S=Jc(o.bearing,m,Ap);v.bearing=this._map.transform.bearing+n.aw(S.amount,-179,179),Qd(v,S)}if(o.pitch){const S=Jc(o.pitch,m,rf);v.pitch=this._map.transform.pitch+S.amount,Qd(v,S)}if(v.zoom||v.bearing){const S=o.pinchAround===void 0?o.around:o.pinchAround;v.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function Qd(p,a){(!p.duration||p.duration<a.duration)&&(p.duration=a.duration,p.easing=a.easing)}function Jc(p,a,o){const{maxSpeed:m,linearity:v,deceleration:S}=o,D=n.aw(p*v/(a/1e3),-m,m),L=Math.abs(D)/(S*v);return{easing:o.easing,duration:1e3*L,amount:D*(L/2)}}class $s extends n.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,o,m,v={}){const S=re(o.getCanvasContainer(),m),D=o.unproject(S);super(a,n.l({point:S,lngLat:D,originalEvent:m},v)),this._defaultPrevented=!1,this.target=o}}class eh extends n.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,o,m){const v=a==="touchend"?m.changedTouches:m.touches,S=Te(o.getCanvasContainer(),v),D=S.map(O=>o.unproject(O)),L=S.reduce((O,U,q,Z)=>O.add(U.div(Z.length)),new n.P(0,0));super(a,{points:S,point:L,lngLats:D,lngLat:o.unproject(L),originalEvent:m}),this._defaultPrevented=!1}}class A0 extends n.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,o){super("wheel",{originalEvent:o}),this._defaultPrevented=!1}}class rd{constructor(a,o){this._map=a,this._clickTolerance=o.clickTolerance}reset(){this._mousedownPos=void 0}wheel(a){return this._firePreventable(new A0(this._map,a))}mousedown(a,o){return this._mousedownPos=o,this._firePreventable(new $s(a.type,this._map,a))}mouseup(a){this._map.fire(new $s(a.type,this._map,a))}preclick(a){const o=n.l({},a);o.type="preclick",this._map.fire(new $s(o.type,this._map,o))}click(a,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||(this.preclick(a),this._map.fire(new $s(a.type,this._map,a)))}dblclick(a){return this._firePreventable(new $s(a.type,this._map,a))}mouseover(a){this._map.fire(new $s(a.type,this._map,a))}mouseout(a){this._map.fire(new $s(a.type,this._map,a))}touchstart(a){return this._firePreventable(new eh(a.type,this._map,a))}touchmove(a){this._map.fire(new eh(a.type,this._map,a))}touchend(a){this._map.fire(new eh(a.type,this._map,a))}touchcancel(a){this._map.fire(new eh(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class th{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(a){this._map.fire(new $s(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $s("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._map.fire(new $s(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class kp{constructor(a,o){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,o){this.isEnabled()&&a.shiftKey&&a.button===0&&(pe(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(a,o){if(!this._active)return;const m=o,v=this._startPos,S=this._lastPos;if(!v||!S||S.equals(m)||!this._box&&m.dist(v)<this._clickTolerance)return;this._lastPos=m,this._box||(this._box=Y("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));const D=Math.min(v.x,m.x),L=Math.max(v.x,m.x),O=Math.min(v.y,m.y),U=Math.max(v.y,m.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${D}px,${O}px)`,this._box.style.width=L-D+"px",this._box.style.height=U-O+"px")})}mouseupWindow(a,o){if(!this._active)return;const m=this._startPos,v=o;if(m&&a.button===0){if(this.reset(),Ae(),m.x!==v.x||m.y!==v.y)return this._map.fire(new n.z("boxzoomend",{originalEvent:a})),{cameraAnimation:S=>S.fitScreenCoordinates(m,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",a)}}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),we(),delete this._startPos,delete this._lastPos}_fireEvent(a,o){return this._map.fire(new n.z(a,{originalEvent:o}))}}function ad(p,a){const o={};for(let m=0;m<p.length;m++)o[p[m].identifier]=a[m];return o}class An{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(a,o,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=a.timeStamp),m.length===this.numTouches&&(this.centroid=function(v){const S=new n.P(0,0);for(const D of v)S._add(D);return S.div(v.length)}(o),this.touches=ad(m,o)))}touchmove(a,o,m){if(this.aborted||!this.centroid)return;const v=ad(m,o);for(const S in this.touches){const D=v[S];(!D||D.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(a,o,m){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class af{constructor(a){this.singleTap=new An(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(a,o,m){this.singleTap.touchstart(a,o,m)}touchmove(a,o,m){this.singleTap.touchmove(a,o,m)}touchend(a,o,m){const v=this.singleTap.touchend(a,o,m);if(v){const S=a.timeStamp-this.lastTime<500,D=!this.lastTap||this.lastTap.dist(v)<30;if(S&&D||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class k0{constructor(){this._zoomIn=new af({numTouches:1,numTaps:2}),this._zoomOut=new af({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,o,m){this._zoomIn.touchstart(a,o,m),this._zoomOut.touchstart(a,o,m)}touchmove(a,o,m){this._zoomIn.touchmove(a,o,m),this._zoomOut.touchmove(a,o,m)}touchend(a,o,m){const v=this._zoomIn.touchend(a,o,m),S=this._zoomOut.touchend(a,o,m);return v?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()+1,around:D.unproject(v)},{originalEvent:a})}):S?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()-1,around:D.unproject(S)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const rh={0:1,2:2};class Qc{constructor(a){this.reset(),this._clickTolerance=a.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(a,o){return!1}_move(a,o){return{}}mousedown(a,o){if(this._lastPoint)return;const m=se(a);this._correctButton(a,m)&&(this._lastPoint=o,this._eventButton=m)}mousemoveWindow(a,o){const m=this._lastPoint;if(m){if(a.preventDefault(),this._eventButton!=null&&function(v,S){const D=rh[S];return v.buttons===void 0||(v.buttons&D)!==D}(a,this._eventButton))this.reset();else if(this._moved||!(o.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=o,this._move(m,o)}}mouseupWindow(a){this._lastPoint&&se(a)===this._eventButton&&(this._moved&&Ae(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class io extends Qc{mousedown(a,o){super.mousedown(a,o),this._lastPoint&&(this._active=!0)}_correctButton(a,o){return o===0&&!a.ctrlKey}_move(a,o){return{around:o,panDelta:o.sub(a)}}}class so extends Qc{_correctButton(a,o){return o===0&&a.ctrlKey||o===2}_move(a,o){const m=.8*(o.x-a.x);if(m)return this._active=!0,{bearingDelta:m}}contextmenu(a){a.preventDefault()}}class $o extends Qc{_correctButton(a,o){return o===0&&a.ctrlKey||o===2}_move(a,o){const m=-.5*(o.y-a.y);if(m)return this._active=!0,{pitchDelta:m}}contextmenu(a){a.preventDefault()}}class Pl{constructor(a,o){this._map=a,this._el=a.getCanvasContainer(),this._minTouches=1,this._clickTolerance=o.clickTolerance||1,this.reset(),n.aP(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new n.P(0,0)}touchstart(a,o,m){return this._calculateTransform(a,o,m)}touchmove(a,o,m){if(this._active&&!(m.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(m.length===1&&!n.dz())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return a.cancelable&&a.preventDefault(),this._calculateTransform(a,o,m)}}touchend(a,o,m){this._calculateTransform(a,o,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,o,m){m.length>0&&(this._active=!0);const v=ad(m,o),S=new n.P(0,0),D=new n.P(0,0);let L=0;for(const U in v){const q=v[U],Z=this._touches[U];Z&&(S._add(q),D._add(q.sub(Z)),L++,v[U]=q)}if(this._touches=v,L<this._minTouches||!D.mag())return;const O=D.div(L);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(L),panDelta:O}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Y("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class oo{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(a){}_move(a,o,m){return{}}touchstart(a,o,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([o[0],o[1]]))}touchmove(a,o,m){const v=this._firstTwoTouches;if(!v)return;a.preventDefault();const[S,D]=v,L=fn(m,o,S),O=fn(m,o,D);if(!L||!O)return;const U=this._aroundCenter?null:L.add(O).div(2);return this._move([L,O],U,a)}touchend(a,o,m){if(!this._firstTwoTouches)return;const[v,S]=this._firstTwoTouches,D=fn(m,o,v),L=fn(m,o,S);D&&L||(this._active&&Ae(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function fn(p,a,o){for(let m=0;m<p.length;m++)if(p[m].identifier===o)return a[m]}function kn(p,a){return Math.log(p/a)/Math.LN2}class ah extends oo{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,o){const m=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(kn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:kn(this._distance,m),pinchAround:o}}}function nd(p,a){return 180*p.angleWith(a)/Math.PI}class Rp extends oo{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,o){const m=this._vector;if(this._vector=a[0].sub(a[1]),m&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:nd(this._vector,m),pinchAround:o}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const o=25/(Math.PI*this._minDiameter)*360,m=this._startVector;if(!m)return!1;const v=nd(a,m);return Math.abs(v)<o}}function Ip(p){return Math.abs(p.y)>Math.abs(p.x)}class nh extends oo{constructor(a){super(),this._map=a}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(a){this._lastPoints=a,Ip(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,o,m){const v=this._lastPoints;if(!v)return;const S=a[0].sub(v[0]),D=a[1].sub(v[1]);return this._map._cooperativeGestures&&!n.dz()&&m.touches.length<3||(this._valid=this.gestureBeginsVertically(S,D,m.timeStamp),!this._valid)?void 0:(this._lastPoints=a,this._active=!0,{pitchDelta:(S.y+D.y)/2*-.5})}gestureBeginsVertically(a,o,m){if(this._valid!==void 0)return this._valid;const v=a.mag()>=2,S=o.mag()>=2;if(!v&&!S)return;if(!v||!S)return this._firstMove==null&&(this._firstMove=m),m-this._firstMove<100&&void 0;const D=a.y>0==o.y>0;return Ip(a)&&Ip(o)&&D}}const id={panStep:100,bearingStep:15,pitchStep:10};class zp{constructor(){const a=id;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let o=0,m=0,v=0,S=0,D=0;switch(a.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:a.shiftKey?m=-1:(a.preventDefault(),S=-1);break;case 39:a.shiftKey?m=1:(a.preventDefault(),S=1);break;case 38:a.shiftKey?v=1:(a.preventDefault(),D=-1);break;case 40:a.shiftKey?v=-1:(a.preventDefault(),D=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:L=>{const O=L.getZoom();L.easeTo({duration:300,easeId:"keyboardHandler",easing:Lp,zoom:o?Math.round(O)+o*(a.shiftKey?2:1):O,bearing:L.getBearing()+m*this._bearingStep,pitch:L.getPitch()+v*this._pitchStep,offset:[-S*this._panStep,-D*this._panStep],center:L.getCenter()},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Lp(p){return p*(2-p)}const nf=4.000244140625,sd=1/450;class gc{constructor(a,o){this._map=a,this._el=a.getCanvasContainer(),this._handler=o,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=sd,n.aP(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(a){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(a.ctrlKey||a.metaKey||this.isZooming()||n.dz()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let o=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const m=n.q.now(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,o!==0&&o%nf==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=o,this._timeout=window.setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(v*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),a.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=a,this._delta-=o,this._active||this._start(a)),a.preventDefault()}_onTimeout(a){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(a)}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=re(this._el,a);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:o,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._map.transform;this._type==="wheel"&&a.projection.wrap&&(a._center.lng>=180||a._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const o=()=>a._terrainEnabled()&&this._aroundCoord?a.computeZoomRelativeTo(this._aroundCoord):a.zoom;if(this._delta!==0){const U=this._type==="wheel"&&Math.abs(this._delta)>nf?this._wheelZoomRate:this._defaultZoomRate;let q=2/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&q!==0&&(q=1/q);const Z=o(),X=Math.pow(2,Z),ae=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):X;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(ae*q))),this._type==="wheel"&&(this._startZoom=Z,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const m=typeof this._targetZoom=="number"?this._targetZoom:o(),v=this._startZoom,S=this._easing;let D,L=!1;if(this._type==="wheel"&&v&&S){const U=Math.min((n.q.now()-this._lastWheelEventTime)/200,1),q=S(U);D=n.af(v,m,q),U<1?this._frameId||(this._frameId=!0):L=!0}else D=m,L=!0;this._active=!0,L&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let O=D-o();return O*this._lastDelta<0&&(O=0),{noInertia:!0,needsRenderFrame:!L,zoomDelta:O,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let o=n.dA;if(this._prevEase){const m=this._prevEase,v=(n.q.now()-m.start)/m.duration,S=m.easing(v+.01)-m.easing(v),D=.27/Math.sqrt(S*S+1e-4)*.01,L=Math.sqrt(.0729-D*D);o=n.dy(D,L,.25,1)}return this._prevEase={start:n.q.now(),duration:a,easing:o},o}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Y("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class Ml{constructor(a,o){this._clickZoom=a,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class lo{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(a,o){return a.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:m.getZoom()+(a.shiftKey?-1:1),around:m.unproject(o)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yc{constructor(){this._tap=new af({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(a,o,m){this._swipePoint||(this._tapTime&&a.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=o[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(a,o,m))}touchmove(a,o,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=o[0],S=v.y-this._swipePoint.y;return this._swipePoint=v,a.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(a,o,m)}touchend(a,o,m){this._tapTime?this._swipePoint&&m.length===0&&this.reset():this._tap.touchend(a,o,m)&&(this._tapTime=a.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class eu{constructor(a,o,m){this._el=a,this._mousePan=o,this._touchPan=m}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class tu{constructor(a,o,m){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=o,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class R0{constructor(a,o,m,v){this._el=a,this._touchZoom=o,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const _i=p=>p.zoom||p.drag||p.pitch||p.rotate;class ss extends n.z{}class I0{constructor(){this.constants=[1,1,.01],this.radius=0}setup(a,o){const m=n.ab.vec3.sub([],o,a);this.radius=n.ab.vec3.length(m[2]<0?n.ab.vec3.div([],m,this.constants):[m[0],m[1],0])}projectRay(a){n.ab.vec3.div(a,a,this.constants),n.ab.vec3.normalize(a,a),n.ab.vec3.mul(a,a,this.constants);const o=n.ab.vec3.scale([],a,this.radius);if(o[2]>0){const m=n.ab.vec3.scale([],[0,0,1],n.ab.vec3.dot(o,[0,0,1])),v=n.ab.vec3.scale([],n.ab.vec3.normalize([],[o[0],o[1],0]),this.radius),S=n.ab.vec3.add([],o,n.ab.vec3.scale([],n.ab.vec3.sub([],n.ab.vec3.add([],v,m),o),2));o[0]=S[0],o[1]=S[1]}return o}}function ih(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class os{constructor(a,o){this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Zm(a),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new I0,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(o),n.aP(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,S,D]of this._listeners){const L=v===document?this.handleWindowEvent:this.handleEvent;v.addEventListener(S,L,D)}}destroy(){for(const[a,o,m]of this._listeners){const v=a===document?this.handleWindowEvent:this.handleEvent;a.removeEventListener(o,v,m)}}_addDefaultHandlers(a){const o=this._map,m=o.getCanvasContainer();this._add("mapEvent",new rd(o,a));const v=o.boxZoom=new kp(o,a);this._add("boxZoom",v);const S=new k0,D=new lo;o.doubleClickZoom=new Ml(D,S),this._add("tapZoom",S),this._add("clickZoom",D);const L=new yc;this._add("tapDragZoom",L);const O=o.touchPitch=new nh(o);this._add("touchPitch",O);const U=new so(a),q=new $o(a);o.dragRotate=new tu(a,U,q),this._add("mouseRotate",U,["mousePitch"]),this._add("mousePitch",q,["mouseRotate"]);const Z=new io(a),X=new Pl(o,a);o.dragPan=new eu(m,Z,X),this._add("mousePan",Z),this._add("touchPan",X,["touchZoom","touchRotate"]);const ae=new Rp,me=new ah;o.touchZoomRotate=new R0(m,me,ae,L),this._add("touchRotate",ae,["touchPan","touchZoom"]),this._add("touchZoom",me,["touchPan","touchRotate"]),this._add("blockableMapEvent",new th(o));const he=o.scrollZoom=new gc(o,this);this._add("scrollZoom",he,["mousePan"]);const xe=o.keyboard=new zp;this._add("keyboard",xe);for(const _e of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])a.interactive&&a[_e]&&o[_e].enable(a[_e])}_add(a,o,m){this._handlers.push({handlerName:a,handler:o,allowed:m}),this._handlersById[a]=o}stop(a){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!_i(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(a,o,m){for(const v in a)if(v!==m&&(!o||o.indexOf(v)<0))return!0;return!1}handleWindowEvent(a){this.handleEvent(a,`${a.type}Window`)}_getMapTouches(a){const o=[];for(const m of a)this._el.contains(m.target)&&o.push(m);return o}handleEvent(a,o){this._updatingCamera=!0;const m=a.type==="renderFrame",v=m?void 0:a,S={needsRenderFrame:!1},D={},L={},O=a.touches?this._getMapTouches(a.touches):void 0,U=O?Te(this._el,O):m?void 0:re(this._el,a);for(const{handlerName:X,handler:ae,allowed:me}of this._handlers){if(!ae.isEnabled())continue;let he;this._blockedByActive(L,me,X)?ae.reset():ae[o||a.type]&&(he=ae[o||a.type](a,U,O),this.mergeHandlerResult(S,D,he,X,v),he&&he.needsRenderFrame&&this._triggerRenderFrame()),(he||ae.isActive())&&(L[X]=ae)}const q={};for(const X in this._previousActiveHandlers)L[X]||(q[X]=v);this._previousActiveHandlers=L,(Object.keys(q).length||ih(S))&&(this._changes.push([S,D,q]),this._triggerRenderFrame()),(Object.keys(L).length||ih(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Z}=S;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))}mergeHandlerResult(a,o,m,v,S){if(!m)return;n.l(a,m);const D={handlerName:v,originalEvent:m.originalEvent||S};m.zoomDelta!==void 0&&(o.zoom=D),m.panDelta!==void 0&&(o.drag=D),m.pitchDelta!==void 0&&(o.pitch=D),m.bearingDelta!==void 0&&(o.rotate=D)}_applyChanges(){const a={},o={},m={};for(const[v,S,D]of this._changes)v.panDelta&&(a.panDelta=(a.panDelta||new n.P(0,0))._add(v.panDelta)),v.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(a.around=v.around),v.aroundCoord!==void 0&&(a.aroundCoord=v.aroundCoord),v.pinchAround!==void 0&&(a.pinchAround=v.pinchAround),v.noInertia&&(a.noInertia=v.noInertia),n.l(o,S),n.l(m,D);this._updateMapTransform(a,o,m),this._changes=[]}_updateMapTransform(a,o,m){const v=this._map,S=v.transform,D=Me=>[Me.x,Me.y,Me.z];if((Me=>{const Be=this._eventsInProgress.drag;return Be&&!this._handlersById[Be.handlerName].isActive()})()&&!ih(a)){const Me=S.zoom;S.cameraElevationReference="sea",this._originalZoom!=null&&S._orthographicProjectionAtLowPitch&&S.projection.name!=="globe"&&S.pitch===0?(S.cameraElevationReference="ground",S.zoom=this._originalZoom):(S.recenterOnTerrain(),S.cameraElevationReference="ground"),Me!==S.zoom&&this._map._update(!0)}if(S._isCameraConstrained&&v._stop(!0),!ih(a))return void this._fireEvents(o,m,!0);let{panDelta:L,zoomDelta:O,bearingDelta:U,pitchDelta:q,around:Z,aroundCoord:X,pinchAround:ae}=a;S._isCameraConstrained&&(O>0&&(O=0),S._isCameraConstrained=!1),ae!==void 0&&(Z=ae),(O||(Me=>o[Me]&&!this._eventsInProgress[Me])("drag"))&&Z&&(this._dragOrigin=D(S.pointCoordinate3D(Z)),this._originalZoom=S.zoom,this._trackingEllipsoid.setup(S._camera.position,this._dragOrigin)),S.cameraElevationReference="sea",v._stop(!0),Z=Z||v.transform.centerPoint,U&&(S.bearing+=U),q&&(S.pitch+=q),S._updateCameraState();const me=[0,0,0];if(L)if(S.projection.name==="mercator"){const Me=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(Z).dir),Be=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(Z.sub(L)).dir);me[0]=Be[0]-Me[0],me[1]=Be[1]-Me[1]}else{const Me=S.pointCoordinate(Z);if(S.projection.name==="globe"){L=L.rotate(-S.angle);const Be=S._pixelsPerMercatorPixel/S.worldSize;me[0]=-L.x*n.dB(n.aS(Me.y))*Be,me[1]=-L.y*n.dB(S.center.lat)*Be}else{const Be=S.pointCoordinate(Z.sub(L));Me&&Be&&(me[0]=Be.x-Me.x,me[1]=Be.y-Me.y)}}const he=S.zoom,xe=[0,0,0];if(O){const Me=D(X||S.pointCoordinate3D(Z)),Be={dir:n.ab.vec3.normalize([],n.ab.vec3.sub([],Me,S._camera.position))};if(Be.dir[2]<0){const Oe=S.zoomDeltaToMovement(Me,O);n.ab.vec3.scale(xe,Be.dir,Oe)}}const _e=n.ab.vec3.add(me,me,xe);S._translateCameraConstrained(_e),O&&Math.abs(S.zoom-he)>1e-4&&S.recenterOnTerrain(),S.cameraElevationReference="ground",this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(o,m,!0)}_fireEvents(a,o,m){const v=_i(this._eventsInProgress),S=_i(a),D={};for(const q in a){const{originalEvent:Z}=a[q];this._eventsInProgress[q]||(D[`${q}start`]=Z),this._eventsInProgress[q]=a[q]}!v&&S&&this._fireEvent("movestart",S.originalEvent);for(const q in D)this._fireEvent(q,D[q]);S&&this._fireEvent("move",S.originalEvent);for(const q in a){const{originalEvent:Z}=a[q];this._fireEvent(q,Z)}const L={};let O;for(const q in this._eventsInProgress){const{handlerName:Z,originalEvent:X}=this._eventsInProgress[q];this._handlersById[Z].isActive()||(delete this._eventsInProgress[q],O=o[Z]||X,L[`${q}end`]=O)}for(const q in L)this._fireEvent(q,L[q]);const U=_i(this._eventsInProgress);if(m&&(v||S)&&!U){this._updatingCamera=!0;const q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;q?(Z(q.bearing||this._map.getBearing())&&(q.bearing=0),this._map.easeTo(q,{originalEvent:O})):(this._map.fire(new n.z("moveend",{originalEvent:O})),Z(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(a,o){this._map.fire(new n.z(a,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{this._frameId=void 0,this.handleEvent(new ss("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const sf="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Xm extends n.E{constructor(a,o){super(),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=o.bearingSnap,this._respectPrefersReducedMotion=o.respectPrefersReducedMotion!==!1,n.aP(["_renderFrameCallback"],this)}getCenter(){return new n.bO(this.transform.center.lng,this.transform.center.lat)}setCenter(a,o){return this.jumpTo({center:a},o)}panBy(a,o,m){return a=n.P.convert(a).mult(-1),this.panTo(this.transform.center,n.l({offset:a},o),m)}panTo(a,o,m){return this.easeTo(n.l({center:a},o),m)}getZoom(){return this.transform.zoom}setZoom(a,o){return this.jumpTo({zoom:a},o),this}zoomTo(a,o,m){return this.easeTo(n.l({zoom:a},o),m)}zoomIn(a,o){return this.zoomTo(this.getZoom()+1,a,o),this}zoomOut(a,o){return this.zoomTo(this.getZoom()-1,a,o),this}getBearing(){return this.transform.bearing}setBearing(a,o){return this.jumpTo({bearing:a},o),this}getPadding(){return this.transform.padding}setPadding(a,o){return this.jumpTo({padding:a},o),this}rotateTo(a,o,m){return this.easeTo(n.l({bearing:a},o),m)}resetNorth(a,o){return this.rotateTo(0,n.l({duration:1e3},a),o),this}resetNorthPitch(a,o){return this.easeTo(n.l({bearing:0,pitch:0,duration:1e3},a),o),this}snapToNorth(a,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,o):this}getPitch(){return this.transform.pitch}setPitch(a,o){return this.jumpTo({pitch:a},o),this}cameraForBounds(a,o){a=n.az.convert(a);const m=o&&o.bearing||0,v=o&&o.pitch||0,S=a.getNorthWest(),D=a.getSouthEast();return this._cameraForBounds(this.transform,S,D,m,v,o)}_extendPadding(a){const o={top:0,right:0,bottom:0,left:0};return a==null?n.l({},o,this.transform.padding):typeof a=="number"?{top:a,bottom:a,right:a,left:a}:n.l({},o,a)}_extendCameraOptions(a){return(a=n.l({offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding=this._extendPadding(a.padding),a}_minimumAABBFrustumDistance(a,o){const m=o.max[0]-o.min[0],v=o.max[1]-o.min[1];return m/v>a.aspect?m/(2*Math.tan(.5*a.fovX)*a.aspect):v/(2*Math.tan(.5*a.fovY)*a.aspect)}_cameraForBoundsOnGlobe(a,o,m,v,S,D){const L=a.clone(),O=this._extendCameraOptions(D);L.bearing=v,L.pitch=S;const U=n.bO.convert(o),q=n.bO.convert(m),Z=.5*(U.lat+q.lat),X=.5*(U.lng+q.lng),ae=n.dC(Z,X),me=n.ab.vec3.normalize([],ae),he=n.ab.vec3.normalize([],n.ab.vec3.cross([],me,[0,1,0])),xe=n.ab.vec3.cross([],he,me),_e=[he[0],he[1],he[2],0,xe[0],xe[1],xe[2],0,me[0],me[1],me[2],0,0,0,0,1],Me=[ae,n.dC(U.lat,U.lng),n.dC(q.lat,U.lng),n.dC(q.lat,q.lng),n.dC(U.lat,q.lng),n.dC(Z,U.lng),n.dC(Z,q.lng),n.dC(U.lat,X),n.dC(q.lat,X)];let Be=n.cd.fromPoints(Me.map(Mt=>[n.ab.vec3.dot(he,Mt),n.ab.vec3.dot(xe,Mt),n.ab.vec3.dot(me,Mt)]));const Oe=n.ab.vec3.transformMat4([],Be.center,_e);n.ab.vec3.squaredLength(Oe)===0&&n.ab.vec3.set(Oe,0,0,1),n.ab.vec3.normalize(Oe,Oe),n.ab.vec3.scale(Oe,Oe,n.ax),L.center=n.dD(Oe);const Ze=L.getWorldToCameraMatrix(),Ue=n.ab.mat4.invert(new Float64Array(16),Ze);Be=n.cd.applyTransform(Be,n.ab.mat4.multiply([],Ze,_e));const We=this._extendAABB(Be,L,O,v);if(!We)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Be=We,n.ab.vec3.transformMat4(Oe,Oe,Ze);const qe=.5*(Be.max[2]-Be.min[2]),tt=this._minimumAABBFrustumDistance(L,Be),rt=n.ab.vec3.scale([],[0,0,1],qe),Et=n.ab.vec3.add(rt,Oe,rt),_t=tt+(L.pitch===0?0:n.ab.vec3.distance(Oe,Et)),st=L.globeCenterInViewSpace,mt=n.ab.vec3.sub([],Oe,[st[0],st[1],st[2]]);n.ab.vec3.normalize(mt,mt),n.ab.vec3.scale(mt,mt,_t);const Bt=n.ab.vec3.add([],Oe,mt);n.ab.vec3.transformMat4(Bt,Bt,Ue);const qt=n.ds/n.ax,Kt=n.ab.vec3.length(Bt),xt=n.bH(Math.max(Kt*qt-n.ds,Number.EPSILON),0),Ft=Math.min(L.zoomFromMercatorZAdjusted(xt),O.maxZoom);return Ft>.5*(n.c6+n.bY)?(L.setProjection({name:"mercator"}),L.zoom=Ft,this._cameraForBounds(L,o,m,v,S,D)):{center:L.center,zoom:Ft,bearing:v,pitch:S}}_extendAABB(a,o,m,v){const S=.5*((m.padding.left||0)+(m.padding.right||0)),D=.5*((m.padding.top||0)+(m.padding.bottom||0)),L=D,O=S,U=S,q=D,Z=o.width-(O+U),X=o.height-(L+q),ae=n.ab.vec3.sub([],a.max,a.min),me=Math.min(Z/ae[0],X/ae[1]),he=Math.min(o.scaleZoom(o.scale*me),m.maxZoom);if(isNaN(he))return null;const xe=o.scale/o.zoomScale(he),_e=new n.cd([a.min[0]-O*xe,a.min[1]-q*xe,a.min[2]],[a.max[0]+U*xe,a.max[1]+L*xe,a.max[2]]),Me=(typeof m.offset.x=="number"&&typeof m.offset.y=="number"?new n.P(m.offset.x,m.offset.y):n.P.convert(m.offset)).rotate(-n.ai(v));return _e.center[0]-=Me.x*xe,_e.center[1]+=Me.y*xe,_e}queryTerrainElevation(a,o){const m=this.transform.elevation;return m?(o=n.l({},{exaggerated:!0},o),m.getAtPoint(n.aa.fromLngLat(a),null,o.exaggerated)):null}_cameraForBounds(a,o,m,v,S,D){if(a.projection.name==="globe")return this._cameraForBoundsOnGlobe(a,o,m,v,S,D);const L=a.clone(),O=this._extendCameraOptions(D);L.bearing=v,L.pitch=S;const U=n.bO.convert(o),q=n.bO.convert(m),Z=new n.bO(U.lng,q.lat),X=new n.bO(q.lng,U.lat),ae=L.project(U),me=L.project(q),he=this.queryTerrainElevation(U),xe=this.queryTerrainElevation(q),_e=this.queryTerrainElevation(Z),Me=this.queryTerrainElevation(X),Be=[[ae.x,ae.y,Math.min(he||0,xe||0,_e||0,Me||0)],[me.x,me.y,Math.max(he||0,xe||0,_e||0,Me||0)]];let Oe=n.cd.fromPoints(Be);const Ze=L.getWorldToCameraMatrix(),Ue=n.ab.mat4.invert(new Float64Array(16),Ze);Oe=n.cd.applyTransform(Oe,Ze);const We=this._extendAABB(Oe,L,O,v);if(!We)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Oe=We;const qe=.5*n.ab.vec3.sub([],Oe.max,Oe.min)[2],tt=this._minimumAABBFrustumDistance(L,Oe),rt=[0,0,1,0];n.ab.vec4.transformMat4(rt,rt,Ze),n.ab.vec4.normalize(rt,rt);const Et=n.ab.vec3.scale([],rt,tt+qe),_t=n.ab.vec3.add([],Oe.center,Et);n.ab.vec3.transformMat4(Oe.center,Oe.center,Ue),n.ab.vec3.transformMat4(_t,_t,Ue);const st=L.unproject(new n.P(Oe.center[0],Oe.center[1])),mt=n.dE(L.projection,st),Bt=Math.pow(2,mt),qt=Math.min(L._zoomFromMercatorZ(_t[2]*L.pixelsPerMeter*Bt/L.worldSize),O.maxZoom);return L.mercatorFromTransition&&qt<.5*(n.c6+n.bY)?(L.setProjection({name:"globe"}),L.zoom=qt,this._cameraForBounds(L,o,m,v,S,D)):{center:st,zoom:qt,bearing:v,pitch:S}}fitBounds(a,o,m){const v=this.cameraForBounds(a,o);return this._fitInternal(v,o,m)}fitScreenCoordinates(a,o,m,v,S){const D=n.P.convert(a),L=n.P.convert(o),O=new n.P(Math.min(D.x,L.x),Math.min(D.y,L.y)),U=new n.P(Math.max(D.x,L.x),Math.max(D.y,L.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(D,L))return this;const q=this.transform.pointLocation3D(O),Z=this.transform.pointLocation3D(U),X=this.transform.pointLocation3D(new n.P(O.x,U.y)),ae=this.transform.pointLocation3D(new n.P(U.x,O.y)),me=[Math.min(q.lng,Z.lng,X.lng,ae.lng),Math.min(q.lat,Z.lat,X.lat,ae.lat)],he=[Math.max(q.lng,Z.lng,X.lng,ae.lng),Math.max(q.lat,Z.lat,X.lat,ae.lat)],xe=v&&v.pitch?v.pitch:this.getPitch(),_e=this._cameraForBounds(this.transform,me,he,m,xe,v);return this._fitInternal(_e,v,S)}_fitInternal(a,o,m){return a?(o=n.l(a,o)).linear?this.easeTo(o,m):this.flyTo(o,m):this}jumpTo(a,o){this.stop();const m=a.preloadOnly?this.transform.clone():this.transform;let v=!1,S=!1,D=!1;"zoom"in a&&m.zoom!==+a.zoom&&(v=!0,m.zoom=+a.zoom),a.center!==void 0&&(m.center=n.bO.convert(a.center)),"bearing"in a&&m.bearing!==+a.bearing&&(S=!0,m.bearing=+a.bearing),"pitch"in a&&m.pitch!==+a.pitch&&(D=!0,m.pitch=+a.pitch);const L=typeof a.padding=="number"?this._extendPadding(a.padding):a.padding;if(a.padding!=null&&!m.isPaddingEqual(L))if(a.retainPadding===!1){const O=m.clone();O.padding=L,m.setLocationAtPoint(m.center,O.centerPoint)}else m.padding=L;return a.preloadOnly?(this._preloadTiles(m),this):(this.fire(new n.z("movestart",o)).fire(new n.z("move",o)),v&&this.fire(new n.z("zoomstart",o)).fire(new n.z("zoom",o)).fire(new n.z("zoomend",o)),S&&this.fire(new n.z("rotatestart",o)).fire(new n.z("rotate",o)).fire(new n.z("rotateend",o)),D&&this.fire(new n.z("pitchstart",o)).fire(new n.z("pitch",o)).fire(new n.z("pitchend",o)),this.fire(new n.z("moveend",o)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||n.w(sf),this.transform.getFreeCameraOptions()}setFreeCameraOptions(a,o){const m=this.transform;if(!m.projection.supportsFreeCamera)return n.w(sf),this;this.stop();const v=m.zoom,S=m.pitch,D=m.bearing;m.setFreeCameraOptions(a);const L=v!==m.zoom,O=S!==m.pitch,U=D!==m.bearing;return this.fire(new n.z("movestart",o)).fire(new n.z("move",o)),L&&this.fire(new n.z("zoomstart",o)).fire(new n.z("zoom",o)).fire(new n.z("zoomend",o)),U&&this.fire(new n.z("rotatestart",o)).fire(new n.z("rotate",o)).fire(new n.z("rotateend",o)),O&&this.fire(new n.z("pitchstart",o)).fire(new n.z("pitch",o)).fire(new n.z("pitchend",o)),this.fire(new n.z("moveend",o)),this}easeTo(a,o){this._stop(!1,a.easeId),((a=n.l({offset:[0,0],duration:500,easing:n.dA},a)).animate===!1||this._prefersReducedMotion(a))&&(a.duration=0);const m=this.transform,v=this.getZoom(),S=this.getBearing(),D=this.getPitch(),L=this.getPadding(),O="zoom"in a?+a.zoom:v,U="bearing"in a?this._normalizeBearing(a.bearing,S):S,q="pitch"in a?+a.pitch:D,Z=this._extendPadding(a.padding),X=n.P.convert(a.offset);let ae,me,he;if(m.projection.name==="globe"){const rt=n.aa.fromLngLat(m.center),Et=X.rotate(-m.angle);rt.x+=Et.x/m.worldSize,rt.y+=Et.y/m.worldSize;const _t=rt.toLngLat(),st=n.bO.convert(a.center||_t);this._normalizeCenter(st),ae=m.centerPoint.add(Et),me=new n.P(rt.x,rt.y).mult(m.worldSize),he=new n.P(n.at(st.lng),n.aA(st.lat)).mult(m.worldSize).sub(me)}else{ae=m.centerPoint.add(X);const rt=m.pointLocation(ae),Et=n.bO.convert(a.center||rt);this._normalizeCenter(Et),me=m.project(rt),he=m.project(Et).sub(me)}const xe=m.zoomScale(O-v);let _e,Me;a.around&&(_e=n.bO.convert(a.around),Me=m.locationPoint(_e));const Be=this._zooming||O!==v,Oe=this._rotating||S!==U,Ze=this._pitching||q!==D,Ue=!m.isPaddingEqual(Z),We=a.retainPadding===!1?m.clone():m,qe=rt=>Et=>{if(Be&&(rt.zoom=n.af(v,O,Et)),Oe&&(rt.bearing=n.af(S,U,Et)),Ze&&(rt.pitch=n.af(D,q,Et)),Ue&&(We.interpolatePadding(L,Z,Et),ae=We.centerPoint.add(X)),_e)rt.setLocationAtPoint(_e,Me);else{const _t=rt.zoomScale(rt.zoom-v),st=O>v?Math.min(2,xe):Math.max(.5,xe),mt=Math.pow(st,1-Et),Bt=rt.unproject(me.add(he.mult(Et*mt)).mult(_t));rt.setLocationAtPoint(rt.renderWorldCopies?Bt.wrap():Bt,ae)}return a.preloadOnly||this._fireMoveEvents(o),rt};if(a.preloadOnly){const rt=this._emulate(qe,a.duration,m);return this._preloadTiles(rt),this}const tt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Be,this._rotating=Oe,this._pitching=Ze,this._padding=Ue,this._easeId=a.easeId,this._prepareEase(o,a.noMoveStart,tt),this._ease(qe(m),rt=>{m.cameraElevationReference==="sea"&&m.recenterOnTerrain(),this._afterEase(o,rt)},a),this}_prepareEase(a,o,m={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),o||m.moving||this.fire(new n.z("movestart",a)),this._zooming&&!m.zooming&&this.fire(new n.z("zoomstart",a)),this._rotating&&!m.rotating&&this.fire(new n.z("rotatestart",a)),this._pitching&&!m.pitching&&this.fire(new n.z("pitchstart",a))}_fireMoveEvents(a){this.fire(new n.z("move",a)),this._zooming&&this.fire(new n.z("zoom",a)),this._rotating&&this.fire(new n.z("rotate",a)),this._pitching&&this.fire(new n.z("pitch",a))}_afterEase(a,o){if(this._easeId&&o&&this._easeId===o)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const m=this._zooming,v=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new n.z("zoomend",a)),v&&this.fire(new n.z("rotateend",a)),S&&this.fire(new n.z("pitchend",a)),this.fire(new n.z("moveend",a))}flyTo(a,o){if(this._prefersReducedMotion(a)){const Mt=n.ay(a,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(Mt,o)}this.stop(),a=n.l({offset:[0,0],speed:1.2,curve:1.42,easing:n.dA},a);const m=this.transform,v=this.getZoom(),S=this.getBearing(),D=this.getPitch(),L=this.getPadding(),O="zoom"in a?n.aw(+a.zoom,m.minZoom,m.maxZoom):v,U="bearing"in a?this._normalizeBearing(a.bearing,S):S,q="pitch"in a?+a.pitch:D,Z=this._extendPadding(a.padding),X=m.zoomScale(O-v),ae=n.P.convert(a.offset);let me=m.centerPoint.add(ae);const he=m.pointLocation(me),xe=n.bO.convert(a.center||he);this._normalizeCenter(xe);const _e=m.project(he),Me=m.project(xe).sub(_e);let Be=a.curve;const Oe=Math.max(m.width,m.height),Ze=Oe/X,Ue=Me.mag();if("minZoom"in a){const Mt=n.aw(Math.min(a.minZoom,v,O),m.minZoom,m.maxZoom),Qt=Oe/m.zoomScale(Mt-v);Be=Math.sqrt(Qt/Ue*2)}const We=Be*Be;function qe(Mt){const Qt=(Ze*Ze-Oe*Oe+(Mt?-1:1)*We*We*Ue*Ue)/(2*(Mt?Ze:Oe)*We*Ue);return Math.log(Math.sqrt(Qt*Qt+1)-Qt)}function tt(Mt){return(Math.exp(Mt)-Math.exp(-Mt))/2}function rt(Mt){return(Math.exp(Mt)+Math.exp(-Mt))/2}const Et=qe(0);let _t=function(Mt){return rt(Et)/rt(Et+Be*Mt)},st=function(Mt){return Oe*((rt(Et)*(tt(Qt=Et+Be*Mt)/rt(Qt))-tt(Et))/We)/Ue;var Qt},mt=(qe(1)-Et)/Be;if(Math.abs(Ue)<1e-6||!isFinite(mt)){if(Math.abs(Oe-Ze)<1e-6)return this.easeTo(a,o);const Mt=Ze<Oe?-1:1;mt=Math.abs(Math.log(Ze/Oe))/Be,st=function(){return 0},_t=function(Qt){return Math.exp(Mt*Be*Qt)}}a.duration="duration"in a?+a.duration:1e3*mt/("screenSpeed"in a?+a.screenSpeed/Be:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0);const Bt=S!==U,qt=q!==D,Kt=!m.isPaddingEqual(Z),xt=a.retainPadding===!1?m.clone():m,Ft=Mt=>Qt=>{const Ot=Qt*mt,zt=1/_t(Ot);Mt.zoom=Qt===1?O:v+Mt.scaleZoom(zt),Bt&&(Mt.bearing=n.af(S,U,Qt)),qt&&(Mt.pitch=n.af(D,q,Qt)),Kt&&(xt.interpolatePadding(L,Z,Qt),me=xt.centerPoint.add(ae));const dr=Qt===1?xe:Mt.unproject(_e.add(Me.mult(st(Ot))).mult(zt));return Mt.setLocationAtPoint(Mt.renderWorldCopies?dr.wrap():dr,me),Mt._updateCameraOnTerrain(),a.preloadOnly||this._fireMoveEvents(o),Mt};if(a.preloadOnly){const Mt=this._emulate(Ft,a.duration,m);return this._preloadTiles(Mt),this}return this._zooming=!0,this._rotating=Bt,this._pitching=qt,this._padding=Kt,this._prepareEase(o,!1),this._ease(Ft(m),()=>this._afterEase(o),a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(a){}_cancelRenderFrame(a){}_stop(a,o){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const m=this._onEaseEnd;this._onEaseEnd=void 0,m.call(this,o)}if(!a){const m=this.handlers;m&&m.stop(!1)}return this}_ease(a,o,m){m.animate===!1||m.duration===0?(a(1),o()):(this._easeStart=n.q.now(),this._easeOptions=m,this._onEaseFrame=a,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const a=Math.min((n.q.now()-this._easeStart)/this._easeOptions.duration,1),o=this._onEaseFrame;o&&o(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(a,o){a=n.bF(a,-180,180);const m=Math.abs(a-o);return Math.abs(a-360-o)<m&&(a-=360),Math.abs(a+360-o)<m&&(a+=360),a}_normalizeCenter(a){const o=this.transform;if(o.maxBounds||o.projection.name!=="globe"&&!o.renderWorldCopies)return;const m=a.lng-o.center.lng;a.lng+=m>180?-360:m<-180?360:0}_prefersReducedMotion(a){return this._respectPrefersReducedMotion&&n.q.prefersReducedMotion&&!(a&&a.essential)}_emulate(a,o,m){const v=Math.ceil(15*o/1e3),S=[],D=a(m.clone());for(let L=0;L<=v;L++){const O=D(L/v);S.push(O.clone())}return S}_preloadTiles(a,o){}}class of{constructor(a={}){this.options=a,n.aP(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(a){const o=this.options&&this.options.compact,m=a._getUIString("AttributionControl.ToggleAttribution");this._map=a,this._container=Y("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Y("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",m);const v=Y("span","mapboxgl-ctrl-icon",this._compactButton);return v.setAttribute("aria-hidden","true"),v.setAttribute("title",m),this._innerContainer=Y("div","mapboxgl-ctrl-attrib-inner",this._container),o&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),o===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let a=this._editLink;a||(a=this._editLink=this._container.querySelector(".mapbox-improve-map"));const o=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.e.ACCESS_TOKEN}];if(a){const m=o.reduce((v,S,D)=>(S.value&&(v+=`${S.key}=${S.value}${D<o.length-1?"&":""}`),v),"?");a.href=`${n.e.FEEDBACK_URL}/${m}#${Mp(this._map,!0)}`,a.rel="noopener nofollow"}}_updateData(a){!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let a=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const o=this._map.style._mergedSourceCaches;for(const v in o){const S=o[v];if(S.used){const D=S.getSource();D.attribution&&a.indexOf(D.attribution)<0&&a.push(D.attribution)}}a.sort((v,S)=>v.length-S.length),a=a.filter((v,S)=>{for(let D=S+1;D<a.length;D++)if(a[D].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=[...this.options.customAttribution,...a]:a.unshift(this.options.customAttribution));const m=a.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,a.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class xc{constructor(){n.aP(["_updateLogo","_updateCompact"],this)}onAdd(a){this._map=a,this._container=Y("div","mapboxgl-ctrl");const o=Y("a","mapboxgl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://www.mapbox.com/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(a){a&&a.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const a=this._map.style._sourceCaches;if(Object.entries(a).length===0)return!0;for(const o in a){const m=a[o].getSource();if(m.hasOwnProperty("mapbox_logo")&&!m.mapbox_logo)return!1}return!0}_updateCompact(){const a=this._container.children;if(a.length){const o=a[0];this._map.getCanvasContainer().offsetWidth<250?o.classList.add("mapboxgl-compact"):o.classList.remove("mapboxgl-compact")}}}class lf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const o=++this._id;return this._queue.push({callback:a,id:o,cancelled:!1}),o}remove(a){const o=this._currentlyRunning,m=o?this._queue.concat(o):this._queue;for(const v of m)if(v.id===a)return void(v.cancelled=!0)}run(a=0){const o=this._currentlyRunning=this._queue;this._queue=[];for(const m of o)if(!m.cancelled&&(m.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class co{constructor(a){this.jumpTo(a)}getValue(a){if(a<=this._startTime)return this._start;if(a>=this._endTime)return this._end;const o=n.cB((a-this._startTime)/(this._endTime-this._startTime));return this._start*(1-o)+this._end*o}isEasing(a){return a>=this._startTime&&a<=this._endTime}jumpTo(a){this._startTime=-1/0,this._endTime=-1/0,this._start=a,this._end=a}easeTo(a,o,m){this._start=this.getValue(o),this._end=a,this._startTime=o,this._endTime=o+m}}const uo={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},ru=["mouseenter","mouseover","mouseleave","mouseout"];class Al extends n.z{constructor(a,o,m,v){const{point:S,lngLat:D,originalEvent:L,target:O}=a;super(a.type,{point:S,lngLat:D,originalEvent:L,target:O}),this.preventDefault=()=>{a.preventDefault()},this.id=o,this.interaction=m,this.feature=v}}class au{constructor(a){this.map=a,this.interactionsByType=new Map,this.typeById=new Map,this.filters=new Map,this.delegatedHandlers=new Map,this.handleType=this.handleType.bind(this)}add(a,o){if(this.typeById.has(a))throw new Error(`Interaction id "${a}" already exists.`);const{type:m,filter:v}=o;v&&this.filters.set(a,n.aZ(v));const S=this.interactionsByType.get(m)||new Map;if(S.size===0){if(ru.includes(m)){const{mousemove:D,mouseout:L}=this._createDelegatedHandlers(a,o);this.map.on("mousemove",D),this.map.on("mouseout",L),this.delegatedHandlers.set(a,{mousemove:D,mouseout:L})}else this.map.on(m,this.handleType);this.interactionsByType.set(m,S)}S.set(a,o),this.typeById.set(a,m)}get(a){const o=this.typeById.get(a);if(!o)return;const m=this.interactionsByType.get(o);return m?m.get(a):void 0}remove(a){const o=this.typeById.get(a);if(!o)return;this.typeById.delete(a),this.filters.delete(a);const m=this.interactionsByType.get(o);if(m){if(m.delete(a),this.delegatedHandlers.has(a)){const{mousemove:v,mouseout:S}=this.delegatedHandlers.get(a);this.map.off("mousemove",v),this.map.off("mouseout",S),this.delegatedHandlers.delete(a)}m.size===0&&this.map.off(o,this.handleType)}}queryTargets(a,o){const m=[];for(const[v,S]of o)S.target&&m.push({targetId:v,target:S.target,filter:this.filters.get(v)});return this.map.style.queryRenderedTargets(a,m,this.map.transform)}handleType(a,o){const m=this.interactionsByType.get(a.type),v=Array.from(m).reverse();o=o||this.queryTargets(a.point,v);let S=!1;for(const D of o){for(const[L,O]of v){if(!O.target)continue;const U=D.variants?D.variants[L]:null;if(U){for(const q of U){const Z=new n.cw(D,q);if(O.handler(new Al(a,L,O,Z))!==!1){S=!0;break}}if(S)break}}if(S)break}if(!S)for(const[D,L]of v){const{handler:O,target:U}=L;if(!U&&O(new Al(a,D,L,null))!==!1)break}}_createDelegatedHandlers(a,o){switch(o.type){case"mouseenter":case"mouseover":{let m=!1,v=new Set;return{mousemove:S=>{const D=this.queryTargets(S.point,[[a,o]]),L=new Set;if(!D.length)return m=!1,void v.clear();const O=[];for(const U of D)v.has(U.id)||(L.add(U.id),O.push(U));m&&!O.length||(m=!0,v=L,S.type=o.type,this.handleType(S,O))},mouseout:()=>{m=!1,v.clear()}}}case"mouseleave":case"mouseout":{let m=[];return{mousemove:v=>{const S=this.queryTargets(v.point,[[a,o]]);if(!S.length)return v.type=o.type,this.handleType(v,m),void(m=S);const D=[],L=new Set(S.map(O=>O.id));for(const O of m)L.has(O.id)||D.push(O);D.length&&(v.type=o.type,this.handleType(v,D)),m=S},mouseout:v=>{m.length&&(v.type=o.type,this.handleType(v,m),m=[])}}}}}}function $p(p,a){if(Array.isArray(p)&&Array.isArray(a)){const o=new Set(p),m=new Set(a);return o.size===m.size&&p.every(v=>m.has(v))}return n.bn(p,a)}const La={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},sl={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ym{constructor(a,o,m=!1){this._clickTolerance=10,this.element=o,this.mouseRotate=new so({clickTolerance:a.dragRotate._mouseRotate._clickTolerance}),this.map=a,m&&(this.mousePitch=new $o({clickTolerance:a.dragRotate._mousePitch._clickTolerance})),n.aP(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener("mousedown",this.mousedown),o.addEventListener("touchstart",this.touchstart,{passive:!1}),o.addEventListener("touchmove",this.touchmove),o.addEventListener("touchend",this.touchend),o.addEventListener("touchcancel",this.reset)}down(a,o){this.mouseRotate.mousedown(a,o),this.mousePitch&&this.mousePitch.mousedown(a,o),pe()}move(a,o){const m=this.map,v=this.mouseRotate.mousemoveWindow(a,o),S=v&&v.bearingDelta;if(S&&m.setBearing(m.getBearing()+S),this.mousePitch){const D=this.mousePitch.mousemoveWindow(a,o),L=D&&D.pitchDelta;L&&m.setPitch(m.getPitch()+L)}}off(){const a=this.element;a.removeEventListener("mousedown",this.mousedown),a.removeEventListener("touchstart",this.touchstart,{passive:!1}),a.removeEventListener("touchmove",this.touchmove),a.removeEventListener("touchend",this.touchend),a.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){we(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(a){this.down(n.l({},a,{ctrlKey:!0,preventDefault:()=>a.preventDefault()}),re(this.element,a)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(a){this.move(a,re(this.element,a))}mouseup(a){this.mouseRotate.mouseupWindow(a),this.mousePitch&&this.mousePitch.mouseupWindow(a),this.offTemp()}touchstart(a){a.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Te(this.element,a.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>a.preventDefault()},this._startPos))}touchmove(a){a.targetTouches.length!==1?this.reset():(this._lastPos=Te(this.element,a.targetTouches)[0],this.move({preventDefault:()=>a.preventDefault()},this._lastPos))}touchend(a){a.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Jm(p,a,o){if(p=new n.bO(p.lng,p.lat),a){const m=new n.bO(p.lng-360,p.lat),v=new n.bO(p.lng+360,p.lat),S=360*Math.ceil(Math.abs(p.lng-o.center.lng)/360),D=o.locationPoint(p).distSqr(a),L=a.x<0||a.y<0||a.x>o.width||a.y>o.height;o.locationPoint(m).distSqr(a)<D&&(L||Math.abs(m.lng-o.center.lng)<S)?p=m:o.locationPoint(v).distSqr(a)<D&&(L||Math.abs(v.lng-o.center.lng)<S)&&(p=v)}for(;Math.abs(p.lng-o.center.lng)>180;){const m=o.locationPoint(p);if(m.x>=0&&m.y>=0&&m.x<=o.width&&m.y<=o.height)break;p.lng>o.center.lng?p.lng-=360:p.lng+=360}return p}const od={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class ol extends n.E{constructor(a,o){if(super(),(a instanceof HTMLElement||o)&&(a=n.l({element:a},o)),n.aP(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=a&&a.occludedOpacity||.2,a&&a.element)this._element=a.element,this._offset=n.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=Y("div");const S=41,D=27,L=oe("svg",{display:"block",height:S*this._scale+"px",width:D*this._scale+"px",viewBox:`0 0 ${D} ${S}`},this._element),O=oe("radialGradient",{id:"shadowGradient"},oe("defs",{},L));oe("stop",{offset:"10%","stop-opacity":.4},O),oe("stop",{offset:"100%","stop-opacity":.05},O),oe("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},L),oe("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},L),oe("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},L),oe("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},L),this._offset=n.P.convert(a&&a.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",S=>{S.preventDefault()}),this._element.addEventListener("mousedown",S=>{S.preventDefault()});const m=this._element.classList;for(const S in od)m.remove(`mapboxgl-marker-anchor-${S}`);m.add(`mapboxgl-marker-anchor-${this._anchor}`);const v=a&&a.className?a.className.trim().split(/\s+/):[];m.add(...v),this._popup=null}addTo(a){return a===this._map||(this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._updateMoving),a.on("moveend",this._update),a.on("remove",this._clearFadeTimer),a._addMarker(this),this.setDraggable(this._draggable),this._update(),a.on("click",this._onMapClick)),this}remove(){const a=this._map;return a&&(a.off("click",this._onMapClick),a.off("move",this._updateMoving),a.off("moveend",this._update),a.off("mousedown",this._addDragHandler),a.off("touchstart",this._addDragHandler),a.off("mouseup",this._onUp),a.off("touchend",this._onUp),a.off("mousemove",this._onMove),a.off("touchmove",this._onMove),a.off("remove",this._clearFadeTimer),a._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=n.bO.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,a._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(a){const o=a.code,m=a.charCode||a.keyCode;o!=="Space"&&o!=="Enter"&&m!==32&&m!==13||this.togglePopup()}_onMapClick(a){const o=a.originalEvent.target,m=this._element;this._popup&&(o===m||m.contains(o))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const a=this._popup;return a?(a.isOpen()?(a.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(a.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const a=this._map,o=this._pos;if(!a||!o)return!1;const m=a.unproject(o),v=a.getFreeCameraOptions();if(!v.position)return!1;const S=v.position.toLngLat();return S.distanceTo(m)<.9*S.distanceTo(this._lngLat)}_evaluateOpacity(){const a=this._map;if(!a)return;const o=this._pos;if(!o||o.x<0||o.x>a.transform.width||o.y<0||o.y>a.transform.height)return void this._clearFadeTimer();const m=a.unproject(o);let v;a._showingGlobe()&&n.dH(a.transform,this._lngLat)?v=0:(v=1-a._queryFogOpacity(m),a.transform._terrainEnabled()&&a.getTerrain()&&this._behindTerrain()&&(v*=this._occludedOpacity)),this._element.style.opacity=`${v}`,this._element.style.pointerEvents=v>0?"auto":"none",this._popup&&this._popup._setOpacity(v),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const a=this._pos;if(!a||!this._map)return;const o=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${a.x}px,${a.y}px)
            ${od[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${o.x}px,${o.y}px)
        `}_calculateXYTransform(){const a=this._pos,o=this._map,m=this.getPitchAlignment();if(!o||!a||m!=="map")return"";if(!o._showingGlobe()){const O=o.getPitch();return O?`rotateX(${O}deg)`:""}const v=n.c4(n.dI(o.transform,this._lngLat)),S=a.sub(n.dJ(o.transform)),D=Math.abs(S.x)+Math.abs(S.y);if(D===0)return"";const L=v/D;return`rotateX(${-S.y*L}deg) rotateY(${S.x*L}deg)`}_calculateZTransform(){const a=this._pos,o=this._map;if(!o||!a)return"";let m=0;const v=this.getRotationAlignment();if(v==="map")if(o._showingGlobe()){const S=o.project(new n.bO(this._lngLat.lng,this._lngLat.lat+.001)),D=o.project(new n.bO(this._lngLat.lng,this._lngLat.lat-.001)).sub(S);m=n.c4(Math.atan2(D.y,D.x))-90}else m=-o.getBearing();else if(v==="horizon"){const S=n.ac(4,6,o.getZoom()),D=n.dJ(o.transform);D.y+=S*o.transform.height;const L=a.sub(D),O=n.c4(Math.atan2(L.y,L.x));m=(O>90?O-270:O+90)*(1-S)}return m+=this._rotation,m?`rotateZ(${m}deg)`:""}_update(a){cancelAnimationFrame(this._updateFrameId);const o=this._map;o&&(o.transform.renderWorldCopies&&(this._lngLat=Jm(this._lngLat,this._pos,o.transform)),this._pos=o.project(this._lngLat),a===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),o._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(o._showingGlobe()||o.getTerrain()||o.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(a){return this._offset=n.P.convert(a),this._update(),this}addClassName(a){return this._element.classList.add(a),this}removeClassName(a){return this._element.classList.remove(a),this}toggleClassName(a){return this._element.classList.toggle(a)}_onMove(a){const o=this._map;if(!o)return;const m=this._pointerdownPos,v=this._positionDelta;if(m&&v){if(!this._isDragging){const S=this._clickTolerance||o._clickTolerance;if(a.point.dist(m)<S)return;this._isDragging=!0}this._pos=a.point.sub(v),this._lngLat=o.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.z("dragstart"))),this.fire(new n.z("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const a=this._map;a&&(a.off("mousemove",this._onMove),a.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new n.z("dragend")),this._state="inactive"}_addDragHandler(a){const o=this._map,m=this._pos;o&&m&&this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(m),this._pointerdownPos=a.point,this._state="pending",o.on("mousemove",this._onMove),o.on("touchmove",this._onMove),o.once("mouseup",this._onUp),o.once("touchend",this._onUp))}setDraggable(a){this._draggable=!!a;const o=this._map;return o&&(a?(o.on("mousedown",this._addDragHandler),o.on("touchstart",this._addDragHandler)):(o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(a){return this._occludedOpacity=a||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const ls={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Xi={maxWidth:100,unit:"metric"},qs={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Li={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},kl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function cs(p=new n.P(0,0),a="bottom"){if(typeof p=="number"){const o=Math.round(Math.sqrt(.5*Math.pow(p,2)));switch(a){case"top":return new n.P(0,p);case"top-left":return new n.P(o,o);case"top-right":return new n.P(-o,o);case"bottom":return new n.P(0,-p);case"bottom-left":return new n.P(o,-o);case"bottom-right":return new n.P(-o,-o);case"left":return new n.P(p,0);case"right":return new n.P(-p,0)}return new n.P(0,0)}return p instanceof n.P||Array.isArray(p)?n.P.convert(p):n.P.convert(p[a]||[0,0])}return{version:k,supported:te.supported,setRTLTextPlugin:n.dK,getRTLTextPluginStatus:n.dL,Map:class extends Xm{constructor(p){B.mark(N.create);const a=p;if((p=n.l({},La,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(p.antialias&&n.dF(window)&&(p.antialias=!1,n.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Rh(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),p),this._repaint=!!p.repaint,this._interactive=p.interactive,this._minTileCacheSize=p.minTileCacheSize,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=p.crossSourceCollisions,this._collectResourceTiming=p.collectResourceTiming,this._language=this._parseLanguage(p.language),this._worldview=p.worldview,this._renderTaskQueue=new lf,this._domRenderTaskQueue=new lf,this._controls=[],this._markers=[],this._popups=[],this._mapId=n.aV(),this._locale=n.l({},uo,p.locale),this._clickTolerance=p.clickTolerance,this._cooperativeGestures=p.cooperativeGestures,this._performanceMetricsCollection=p.performanceMetricsCollection,this._tessellationStep=p.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=p.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new co(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=p.scaleFactor,this._requestManager=new je(p.transformRequest,p.accessToken,p.testMode),this._silenceAuthErrors=!!p.testMode,this._contextCreateOptions=p.contextCreateOptions?{...p.contextCreateOptions}:{},typeof p.container=="string"){const o=document.getElementById(p.container);if(!o)throw new Error(`Container '${p.container.toString()}' not found.`);this._container=o}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(this._container.childNodes.length>0&&n.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),p.maxBounds&&this.setMaxBounds(p.maxBounds),this._spriteFormat=p.spriteFormat,n.aP(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new Kh),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new os(this,p),this._localFontFamily=p.localFontFamily,this._localIdeographFontFamily=p.localIdeographFontFamily,(p.style||!p.testMode)&&this.setStyle(p.style||n.e.DEFAULT_STYLE,{config:p.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),p.projection&&this.setProjection(p.projection),this.indoor=new b0(this),p.hash&&(this._hash=new Pp(typeof p.hash=="string"&&p.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){a.center==null&&a.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch});const o=p.bounds;o&&(this.resize(),this.fitBounds(o,n.l({},p.fitBoundsOptions,{duration:0})))}this.resize(),p.attributionControl&&this.addControl(new of({customAttribution:p.customAttribution})),this._logoControl=new xc,this.addControl(this._logoControl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new n.z(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new n.z(`${o.dataType}dataloading`,o))}),this._interactions=new au(this)}_getMapId(){return this._mapId}addControl(p,a){if(a===void 0&&(a=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new n.y(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=p.onAdd(this);this._controls.push(p);const m=this._controlPositions[a];return a.indexOf("bottom")!==-1?m.insertBefore(o,m.firstChild):m.appendChild(o),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new n.y(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(p);return a>-1&&this._controls.splice(a,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(p){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const a=!this._moving;return a&&this.fire(new n.z("movestart",p)).fire(new n.z("move",p)),this.fire(new n.z("resize",p)),a&&this.fire(new n.z("moveend",p)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(p){return this.transform.setMaxBounds(n.az.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p?this.setZoom(p):this.fire(new n.z("zoomstart")).fire(new n.z("zoom")).fire(new n.z("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p?this.setZoom(p):this.fire(new n.z("zoomstart")).fire(new n.z("zoom")).fire(new n.z("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p?this.setPitch(p):this.fire(new n.z("pitchstart")).fire(new n.z("pitch")).fire(new n.z("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p?this.setPitch(p):this.fire(new n.z("pitchstart")).fire(new n.z("pitch")).fire(new n.z("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(p){return this._scaleFactor=p,this.painter.scaleFactor=p,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(a=>a.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(p){return p==="auto"?navigator.language:Array.isArray(p)?p.length===0?void 0:p.map(a=>a==="auto"?navigator.language:a):p}setLanguage(p){const a=this._parseLanguage(p);if(!this.style||a===this._language)return this;this._language=a,this.style.reloadSources();for(const o of this._controls)o._setLanguage&&o._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(p){return this.style&&p!==this._worldview?(this._worldview=p,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(p){return this._lazyInitEmptyStyle(),p?typeof p=="string"&&(p={name:p}):p=null,this._useExplicitProjection=!!p,this._prioritizeAndUpdateProjection(p,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const p=this.transform,a=p.projection.name;let o;a==="globe"&&p.zoom>=n.bY?(p.setMercatorFromTransition(),o=!0):a==="mercator"&&p.zoom<n.bY&&(p.setProjection({name:"globe"}),o=!0),o&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(p,a){return this._updateProjection(p||a||{name:"mercator"})}_updateProjection(p){let a;return a=p.name==="globe"&&this.transform.zoom>=n.bY?this.transform.setMercatorFromTransition():this.transform.setProjection(p),this.style.applyProjectionUpdate(),a&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(p){return this.transform.locationPoint3D(n.bO.convert(p))}unproject(p){return this.transform.pointLocation3D(n.P.convert(p))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(p,a,o){const m=v=>{let S=[];if(Array.isArray(a)){const D=a.filter(L=>this.getLayer(L));S=D.length?this.queryRenderedFeatures(v,{layers:D}):[]}else S=this.queryRenderedFeatures(v,{target:a});return S};if(p==="mouseenter"||p==="mouseover"){let v=!1;return{listener:o,targets:a,delegates:{mousemove:D=>{const L=m(D.point);L.length?v||(v=!0,o.call(this,new $s(p,this,D.originalEvent,{features:L}))):v=!1},mouseout:()=>{v=!1}}}}if(p==="mouseleave"||p==="mouseout"){let v=!1;return{listener:o,targets:a,delegates:{mousemove:L=>{m(L.point).length?v=!0:v&&(v=!1,o.call(this,new $s(p,this,L.originalEvent)))},mouseout:L=>{v&&(v=!1,o.call(this,new $s(p,this,L.originalEvent)))}}}}{const v=S=>{const D=m(S.point);D.length&&(S.features=D,o.call(this,S),delete S.features)};return{listener:o,targets:a,delegates:{[p]:v}}}}on(p,a,o){if(typeof a=="function"||o===void 0)return super.on(p,a);if(typeof a=="string"&&(a=[a]),!this._areTargetsValid(a))return this;const m=this._createDelegatedListener(p,a,o);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(m);for(const v in m.delegates)this.on(v,m.delegates[v]);return this}once(p,a,o){if(typeof a=="function"||o===void 0)return super.once(p,a);if(typeof a=="string"&&(a=[a]),!this._areTargetsValid(a))return this;const m=this._createDelegatedListener(p,a,o);for(const v in m.delegates)this.once(v,m.delegates[v]);return this}off(p,a,o){if(typeof a=="function"||o===void 0)return super.off(p,a);if(typeof a=="string"&&(a=[a]),!this._areTargetsValid(a))return this;const m=this._delegatedListeners?this._delegatedListeners[p]:void 0;return m&&(v=>{for(let S=0;S<v.length;S++){const D=v[S];if(D.listener===o&&$p(D.targets,a)){for(const L in D.delegates)this.off(L,D.delegates[L]);return v.splice(S,1),this}}})(m),this}queryRenderedFeatures(p,a){if(!this.style)return[];if(p===void 0||p instanceof n.P||Array.isArray(p)||a!==void 0||(a=p,p=void 0),p=p||[[0,0],[this.transform.width,this.transform.height]],!a){const S=this.style.queryRenderedFeatures(p,void 0,this.transform),D=this.style.queryRenderedFeatureset(p,void 0,this.transform);return S.concat(D)}let o=!0;if(a.target&&(o=this._isTargetValid(a.target),o&&!a.layers))return this.style.queryRenderedFeatureset(p,a,this.transform);let m=!0;if(a.layers&&Array.isArray(a.layers)){for(const S of a.layers)if(!this._isValidId(S)){m=!1;break}if(m&&!a.target)return this.style.queryRenderedFeatures(p,a,this.transform)}let v=[];return m&&(v=v.concat(this.style.queryRenderedFeatures(p,a,this.transform))),o&&(v=v.concat(this.style.queryRenderedFeatureset(p,a,this.transform))),v}querySourceFeatures(p,a){return!p||typeof p=="string"&&!this._isValidId(p)?[]:this.style.querySourceFeatures(p,a)}isPointOnSurface(p){const{name:a}=this.transform.projection;return a!=="globe"&&a!=="mercator"&&n.w(`${a} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(n.P.convert(p))}addInteraction(p,a){return this._interactions.add(p,a),this}removeInteraction(p){return this._interactions.remove(p),this}setStyle(p,a){return a=n.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},a),this.style&&p&&a.diff!==!1&&a.localFontFamily===this._localFontFamily&&a.localIdeographFontFamily===this._localIdeographFontFamily&&!a.config?(this.style._diffStyle(p,(o,m)=>{o?(n.w(`Unable to perform style diff: ${String(o.message||o.error||o)}. Rebuilding the style from scratch.`),this._updateStyle(p,a)):m&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._localFontFamily=a.localFontFamily,this._updateStyle(p,a))}_getUIString(p){const a=this._locale[p];if(a==null)throw new Error(`Missing UI string '${p}'`);return a}_updateStyle(p,a){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),p){const o=n.l({},a);a&&a.config&&(o.initialConfig=a.config,delete o.config),this.style=new ks(this,o).load(p),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ks(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(n.w("There is no style added to the map."),!1)}_isValidId(p){return p==null?(this.fire(new n.y(new Error("IDs can't be empty."))),!1):!n.cr(p)||(this.fire(new n.y(new Error(`IDs can't contain special symbols: "${p}".`))),!1)}_isTargetValid(p){return"featuresetId"in p?this._isValidId("importId"in p?p.importId:p.featuresetId):"layerId"in p&&this._isValidId(p.layerId)}_areTargetsValid(p){if(Array.isArray(p)){for(const a of p)if(!this._isValidId(a))return!1;return!0}return this._isTargetValid(p)}addSource(p,a){return this._isValidId(p)?(this._lazyInitEmptyStyle(),this.style.addSource(p,a),this._update(!0)):this}isSourceLoaded(p){return!!this._isValidId(p)&&!!this.style&&this.style._isSourceCacheLoaded(p)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(p,a,o){this._lazyInitEmptyStyle(),this.style.addSourceType(p,a,o)}removeSource(p){return this._isValidId(p)?(this.style.removeSource(p),this._updateTerrain(),this._update(!0)):this}getSource(p){return this._isValidId(p)?this.style.getOwnSource(p):null}addImage(p,a,{pixelRatio:o=1,sdf:m=!1,stretchX:v,stretchY:S,content:D}={}){if(this._lazyInitEmptyStyle(),a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap){const{width:L,height:O,data:U}=n.q.getImageData(a);this.style.addImage(p,{data:new n.r({width:L,height:O},U),pixelRatio:o,stretchX:v,stretchY:S,content:D,sdf:m,version:0,usvg:!1})}else if(a.width===void 0||a.height===void 0)this.fire(new n.y(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:L,height:O}=a,U=a;this.style.addImage(p,{data:new n.r({width:L,height:O},new Uint8Array(U.data)),pixelRatio:o,stretchX:v,stretchY:S,content:D,sdf:m,usvg:!1,version:0,userImage:U}),U.onAdd&&U.onAdd(this,p)}}updateImage(p,a){this._lazyInitEmptyStyle();const o=this.style.getImage(p);if(!o)return void this.fire(new n.y(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap?n.q.getImageData(a):a,{width:v,height:S,data:D}=m;if(v===void 0||S===void 0)return void this.fire(new n.y(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==(o.usvg?o.icon.usvg_tree.width:o.data.width)||S!==(o.usvg?o.icon.usvg_tree.height:o.data.height))return void this.fire(new n.y(new Error(`The width and height of the updated image (${v}, ${S})
                must be that same as the previous version of the image
                (${o.data.width}, ${o.data.height})`)));const L=!(a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap);let O=!1;o.usvg?(o.data=new n.r({width:v,height:S},new Uint8Array(D)),o.usvg=!1,o.icon=void 0,O=!0):o.data.replace(D,L),this.style.updateImage(p,o,O)}hasImage(p){return p?!!this.style&&!!this.style.getImage(p):(this.fire(new n.y(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,a){n.o(this._requestManager.transformRequest(p,n.R.Image),(o,m)=>{a(o,m instanceof HTMLImageElement?n.q.getImageData(m):m)})}listImages(){return this.style.listImages()}addModel(p,a){this._lazyInitEmptyStyle(),this.style.addModel(p,a)}hasModel(p){return p?this.style.hasModel(p):(this.fire(new n.y(new Error("Missing required model id"))),!1)}removeModel(p){this.style.removeModel(p)}listModels(){return this.style.listModels()}addLayer(p,a){return this._isValidId(p.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(p,a),this._update(!0)):this}getSlot(p){const a=this.getLayer(p);return a&&a.slot||null}setSlot(p,a){return this.style.setSlot(p,a),this.style.mergeLayers(),this._update(!0)}addImport(p,a){return this.style.addImport(p,a),this}updateImport(p,a){return typeof a!="string"&&a.id!==p?(this.removeImport(p),this.addImport(a)):(this.style.updateImport(p,a),this._update(!0))}removeImport(p){return this.style.removeImport(p),this}moveImport(p,a){return this.style.moveImport(p,a),this._update(!0)}moveLayer(p,a){return this._isValidId(p)?(this.style.moveLayer(p,a),this._update(!0)):this}removeLayer(p){return this._isValidId(p)?(this.style.removeLayer(p),this._update(!0)):this}getLayer(p){if(!this._isValidId(p))return null;const a=this.style.getOwnLayer(p);return a?a.type==="custom"?a.implementation:a.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(p,a,o){return this._isValidId(p)?(this.style.setLayerZoomRange(p,a,o),this._update(!0)):this}setFilter(p,a,o={}){return this._isValidId(p)?(this.style.setFilter(p,a,o),this._update(!0)):this}getFilter(p){return this._isValidId(p)?this.style.getFilter(p):null}setPaintProperty(p,a,o,m={}){return this._isValidId(p)?(this.style.setPaintProperty(p,a,o,m),this._update(!0)):this}getPaintProperty(p,a){return this._isValidId(p)?this.style.getPaintProperty(p,a):null}setLayoutProperty(p,a,o,m={}){return this._isValidId(p)?(this.style.setLayoutProperty(p,a,o,m),this._update(!0)):this}getLayoutProperty(p,a){return this._isValidId(p)?this.style.getLayoutProperty(p,a):null}getSchema(p){return this.style.getSchema(p)}setSchema(p,a){return this.style.setSchema(p,a),this._update(!0)}getConfig(p){return this.style.getConfig(p)}setConfig(p,a){return this.style.setConfig(p,a),this._update(!0)}getConfigProperty(p,a){return this.style.getConfigProperty(p,a)}setConfigProperty(p,a,o){return this.style.setConfigProperty(p,a,o),this._update(!0)}getFeaturesetDescriptors(p){return this.style.getFeaturesetDescriptors(p)}setLights(p){if(this._lazyInitEmptyStyle(),p&&p.length===1&&p[0].type==="flat"){const a=p[0];a.properties?this.style.setFlatLight(a.properties,a.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(p),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const p=this.style.getLights()||[];return p.length===0&&p.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),p}setLight(p,a={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:p}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(p){return this._lazyInitEmptyStyle(),!p&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(p),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(p){return this._lazyInitEmptyStyle(),this.style.setFog(p),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(p){return this._lazyInitEmptyStyle(),this.style.setSnow(p),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(p){return this._lazyInitEmptyStyle(),this.style.setRain(p),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(p){return this._lazyInitEmptyStyle(),this.style.setColorTheme(p),this._update(!0)}setImportColorTheme(p,a){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(p,a),this._update(!0)}setCamera(p){return this.style.setCamera(p),this._triggerCameraUpdate(p)}_triggerCameraUpdate(p){return this._update(this.transform.setOrthographicProjectionAtLowPitch(p["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(p){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(n.bO.convert(p),this.transform):0}setFeatureState(p,a){return p.source&&!this._isValidId(p.source)?this:(this.style.setFeatureState(p,a),this._update())}removeFeatureState(p,a){return p.source&&!this._isValidId(p.source)?this:(this.style.removeFeatureState(p,a),this._update())}getFeatureState(p){return p.source&&!this._isValidId(p.source)?null:this.style.getFeatureState(p)}_updateContainerDimensions(){if(!this._container)return;const p=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300;let o,m,v,S=this._container;for(;S&&(!m||!v);){const D=window.getComputedStyle(S).transform;D&&D!=="none"&&(o=D.match(/matrix.*\((.+)\)/)[1].split(", "),o[0]&&o[0]!=="0"&&o[0]!=="1"&&(m=o[0]),o[3]&&o[3]!=="0"&&o[3]!=="1"&&(v=o[3])),S=S.parentElement}this._containerWidth=m?Math.abs(p/m):p,this._containerHeight=v?Math.abs(a/v):a}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&n.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=Y("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();const a=this._canvasContainer=Y("div","mapboxgl-canvas-container",p);this._canvas=Y("canvas","mapboxgl-canvas",a),this._interactive&&(a.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const o=this._controlContainer=Y("div","mapboxgl-control-container",p),m=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(v=>{m[v]=Y("div",`mapboxgl-ctrl-${v}`,o)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,a){const o=n.q.devicePixelRatio||1;this._canvas.width=o*Math.ceil(p),this._canvas.height=o*Math.ceil(a),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${a}px`}_addMarker(p){this._markers.push(p)}_removeMarker(p){const a=this._markers.indexOf(p);a!==-1&&this._markers.splice(a,1)}_addPopup(p){this._popups.push(p)}_removePopup(p){const a=this._popups.indexOf(p);a!==-1&&this._popups.splice(a,1)}_setupPainter(){const p=n.l({},te.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._canvas.getContext("webgl2",p);a?(Sr(a,!0),this.painter=new ef(a,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",o=>{o.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),n.m.testSupport(a)):this.fire(new n.y(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.z("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new n.z("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_requestDomTask(p){!this.loaded()||this.loaded()&&!this.isMoving()?p():this._domRenderTaskQueue.add(p)}_render(p){let a;this.fire(new n.z("renderstart")),++this._frameId;const o=this.painter.context.extTimerQuery,m=n.q.now(),v=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(a=v.createQuery(),v.beginQuery(o.TIME_ELAPSED_EXT,a)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(p),this._domRenderTaskQueue.run(p),this._removed)return;this._updateProjectionTransition();const S=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const U=this.transform.zoom,q=this.transform.pitch,Z=n.q.now(),X=new n.a8(U,{now:Z,fadeDuration:S,pitch:q,transition:this.style.transition});this.style.update(X)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let D=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),D=this._updateAverageElevation(m),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):D=this._updateAverageElevation(m);const L=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,S,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),L&&(this._placementDirty=L.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new n.z("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,B.mark(N.load),this.fire(new n.z("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),a){const U=n.q.now()-m;v.endQuery(o.TIME_ELAPSED_EXT),setTimeout(()=>{const q=v.getQueryParameter(a,v.QUERY_RESULT)/1e6;v.deleteQuery(a),this.fire(new n.z("gpu-timing-frame",{cpuTime:U,gpuTime:q}))},50)}if(this.listens("gpu-timing-layer")){const U=this.painter.collectGpuTimers();setTimeout(()=>{const q=this.painter.queryGpuTimers(U);this.fire(new n.z("gpu-timing-layer",{layerTimes:q}))},50)}if(this.listens("gpu-timing-deferred-render")){const U=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const q=this.painter.queryGpuTimeDeferredRender(U);this.fire(new n.z("gpu-timing-deferred-render",{gpuTime:q}))},50)}const O=this._sourcesDirty||this._styleDirty||this._placementDirty||D;if(O||this._repaint)this.triggerRepaint();else{const U=this.idle();if(U&&(D=this._updateAverageElevation(m,!0)),D)this.triggerRepaint();else if(this._triggerFrame(!1),U&&(this.fire(new n.z("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const q=this._calculateSpeedIndex();this.fire(new n.z("speedindexcompleted",{speedIndex:q})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,B.mark(N.fullLoad),this._performanceMetricsCollection&&Dt(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(p){for(const a of this._markers)p&&!this.getRenderWorldCopies()&&(a._lngLat=a._lngLat.wrap()),a._update();for(const a of this._popups)!p||this.getRenderWorldCopies()||a._trackPointer||(a._lngLat=a._lngLat.wrap()),a._update()}_updateAverageElevation(p,a=!1){const o=v=>(this.transform.averageElevation=v,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&o(0);const m=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(m||(a||p-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(p)){const v=this.transform.averageElevation;let S=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(S)?S=0:this._averageElevationLastSampledAt=p;const D=Math.abs(v-S);if(D>1){if(this._isInitialLoad||m)return this._averageElevation.jumpTo(S),o(S);this._averageElevation.easeTo(S,p,300)}else if(D>1e-4)return this._averageElevation.jumpTo(S),o(S)}return!!this._averageElevation.isEasing(p)&&o(this._averageElevation.getValue(p))}_authenticate(){Se(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,p=>{if(p&&(p.message===ce||p.status===401)){const a=this.painter.context.gl;Sr(a,!1),this._logoControl instanceof xc&&this._logoControl._updateLogo(),a&&a.clear(a.DEPTH_BUFFER_BIT|a.COLOR_BUFFER_BIT|a.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new n.y(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),ut(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&Ct(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const p=this._isDragging();this.painter.updateTerrain(this.style,p)}_calculateSpeedIndex(){const p=this.painter.canvasCopy(),a=this.painter.getCanvasCopiesAndTimestamps();a.timeStamps.push(performance.now());const o=this.painter.context.gl,m=o.createFramebuffer();function v(S){o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,S,0);const D=new Uint8Array(o.drawingBufferWidth*o.drawingBufferHeight*4);return o.readPixels(0,0,o.drawingBufferWidth,o.drawingBufferHeight,o.RGBA,o.UNSIGNED_BYTE,D),D}return o.bindFramebuffer(o.FRAMEBUFFER,m),this._canvasPixelComparison(v(p),a.canvasCopies.map(v),a.timeStamps)}_canvasPixelComparison(p,a,o){let m=o[1]-o[0];const v=p.length/4;for(let S=0;S<a.length;S++){const D=a[S];let L=0;for(let O=0;O<D.length;O+=4)D[O]===p[O]&&D[O+1]===p[O+1]&&D[O+2]===p[O+2]&&D[O+3]===p[O+3]&&(L+=1);m+=(o[S+2]-o[S+1])*(1-L/v)}return m}remove(){this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),ur.delete(this.painter.context.gl),er.remove(),Xe.remove(),this._removed=!0,this.fire(new n.z("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(p){this._renderNextFrame=this._renderNextFrame||p,this.style&&!this._frame&&(this._frame=n.q.frame(a=>{const o=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,o&&this._render(a)}))}_preloadTiles(p){const a=this.style?this.style.getSourceCaches():[];return n.bl(a,(o,m)=>o._preloadTiles(p,m),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(p){this._showParseStatus!==p&&(this._showParseStatus=p,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(p){this._showTerrainWireframe!==p&&(this._showTerrainWireframe=p,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(p){this._showLayers2DWireframe!==p&&(this._showLayers2DWireframe=p,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(p){this._showLayers3DWireframe!==p&&(this._showLayers3DWireframe=p,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(p){this._speedIndexTiming!==p&&(this._speedIndexTiming=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,this._tp.refreshUI(),p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(p){this._showTileAABBs!==p&&(this._showTileAABBs=p,this._tp.refreshUI(),p&&this._update())}_setCacheLimits(p,a){n.dG(p,a)}get version(){return k}},NavigationControl:class{constructor(p={}){this.options=n.l({},sl,p),this._container=Y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(n.aP(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",a=>{this._map&&this._map.zoomIn({},{originalEvent:a})}),Y("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",a=>{this._map&&this._map.zoomOut({},{originalEvent:a})}),Y("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(n.aP(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",a=>{const o=this._map;o&&(this.options.visualizePitch?o.resetNorthPitch({},{originalEvent:a}):o.resetNorth({},{originalEvent:a}))}),this._compassIcon=Y("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map;if(!p)return;const a=p.getZoom(),o=a===p.getMaxZoom(),m=a===p.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())}_rotateCompassArrow(){const p=this._map;if(!p)return;const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(p.transform.pitch*(Math.PI/180)),.5)}) rotateX(${p.transform.pitch}deg) rotateZ(${p.transform.angle*(180/Math.PI)}deg)`:`rotate(${p.transform.angle*(180/Math.PI)}deg)`;p._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=a)})}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),p.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&p.on("pitch",this._rotateCompassArrow),p.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ym(p,this._compass,this.options.visualizePitch)),this._container}onRemove(){const p=this._map;p&&(this._container.remove(),this.options.showZoom&&p.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&p.off("pitch",this._rotateCompassArrow),p.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(p,a){const o=Y("button",p,this._container);return o.type="button",o.addEventListener("click",a),o}_setButtonTitle(p,a){if(!this._map)return;const o=this._map._getUIString(`NavigationControl.${a}`);p.setAttribute("aria-label",o),p.firstElementChild&&p.firstElementChild.setAttribute("title",o)}},GeolocateControl:class extends n.E{constructor(p={}){super();const a=navigator.geolocation;this.options=n.l({geolocation:a},ls,p),n.aP(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Yd(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(p){return this._map=p,this._container=Y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(p){const a=(o=!!this.options.geolocation)=>{this._supportsGeolocation=o,p(o)};this._supportsGeolocation!==void 0?p(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(o=>a(o.state!=="denied")).catch(()=>a()):a()}_isOutOfMapMaxBounds(p){const a=this._map.getMaxBounds(),o=p.coords;return!!a&&(o.longitude<a.getWest()||o.longitude>a.getEast()||o.latitude<a.getSouth()||o.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new n.z("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.z("geolocate",p)),this._finish()}}_updateCamera(p){const a=new n.bO(p.coords.longitude,p.coords.latitude),o=p.coords.accuracy,m=this._map.getBearing(),v=n.l({bearing:m},this.options.fitBoundsOptions);this._map.fitBounds(a.toBounds(o),v,{geolocateSource:!0})}_updateMarker(p){if(p){const a=new n.bO(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.transform,a=n.bH(1,p._center.lat)*p.worldSize,o=Math.ceil(2*this._accuracy*a);this._circleElement.style.width=`${o}px`,this._circleElement.style.height=`${o}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.z("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=Y("button","mapboxgl-ctrl-geolocate",this._container),Y("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){n.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Y("div","mapboxgl-user-location"),this._dotElement.appendChild(Y("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Y("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new ol({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Y("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ol({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new n.z("trackuserlocationend")))})}}_onDeviceOrientation(p){this._userLocationDotMarker&&(p.webkitCompassHeading?this._heading=p.webkitCompassHeading:p.absolute===!0&&(this._heading=-1*p.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return n.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.z("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.z("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.z("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(p={maximumAge:6e5,timeout:0},this._noTimeout=!0):(p=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,p),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const p=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(a=>{a==="granted"&&p()}).catch(console.error):p()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:of,ScaleControl:class{constructor(p={}){this.options=n.l({},Xi,p),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),n.aP(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const p=this.options.maxWidth||100,a=this._map,o=a._containerHeight/2,m=a._containerWidth/2-p/2,v=a.unproject([m,o]),S=a.unproject([m+p,o]),D=v.distanceTo(S);if(this.options.unit==="imperial"){const L=3.2808*D;L>5280?this._setScale(p,L/5280,"mile"):this._setScale(p,L,"foot")}else this.options.unit==="nautical"?this._setScale(p,D/1852,"nautical-mile"):D>=1e3?this._setScale(p,D/1e3,"kilometer"):this._setScale(p,D,"meter")}_setScale(p,a,o){this._map._requestDomTask(()=>{const m=function(S){const D=Math.pow(10,`${Math.floor(S)}`.length-1);let L=S/D;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(O){const U=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*U)/U}(L),D*L}(a),v=m/a;this._container.innerHTML=this._isNumberFormatSupported&&o!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:o}).format(m):`${m}&nbsp;${qs[o]}`,this._container.style.width=p*v+"px"})}onAdd(p){return this._map=p,this._language=p.getLanguage(),this._container=Y("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(p){this._language=p,this._update()}setUnit(p){this.options.unit=p,this._update()}},FullscreenControl:class{constructor(p={}){this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:n.w("Full screen control 'container' must be a DOM element.")),n.aP(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=Y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=Y("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Y("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",p)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends n.E{constructor(p){super(),this.options=n.l(Object.create(Li),p),n.aP(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(p&&p.className?p.className.trim().split(/\s+/):[])}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&p.on("preclick",this._onClose),this.options.closeOnMove&&p.on("move",this._onClose),p.on("remove",this.remove),this._update(),p._addPopup(this),this._focusFirstElement(),this._trackPointer?(p.on("mousemove",this._onMouseEvent),p.on("mouseup",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")):p.on("move",this._update),this.fire(new n.z("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const p=this._map;return p&&(p.off("move",this._update),p.off("move",this._onClose),p.off("preclick",this._onClose),p.off("click",this._onClose),p.off("remove",this.remove),p.off("mousemove",this._onMouseEvent),p.off("mouseup",this._onMouseEvent),p.off("drag",this._onMouseEvent),p._canvasContainer&&p._canvasContainer.classList.remove("mapboxgl-track-pointer"),p._removePopup(this),this._map=void 0),this.fire(new n.z("close")),this}getLngLat(){return this._lngLat}setLngLat(p){this._lngLat=n.bO.convert(p),this._pos=null,this._trackPointer=!1,this._update();const a=this._map;return a&&(a.on("move",this._update),a.off("mousemove",this._onMouseEvent),a._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const p=this._map;return p&&(p.off("move",this._update),p.on("mousemove",this._onMouseEvent),p.on("drag",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const a=document.createDocumentFragment(),o=document.createElement("body");let m;for(o.innerHTML=p;m=o.firstChild,m;)a.appendChild(m);return this.setDOMContent(a)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){let a=this._content;if(a)for(;a.hasChildNodes();)a.firstChild&&a.removeChild(a.firstChild);else a=this._content=Y("div","mapboxgl-popup-content",this._container||void 0);if(a.appendChild(p),this.options.closeButton){const o=this._closeButton=Y("button","mapboxgl-popup-close-button",a);o.type="button",o.setAttribute("aria-label","Close popup"),o.setAttribute("aria-hidden","true"),o.innerHTML="&#215;",o.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(p){return this._classList.add(p),this._updateClassList(),this}removeClassName(p){return this._classList.delete(p),this._updateClassList(),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){let a;return this._classList.delete(p)?a=!1:(this._classList.add(p),a=!0),this._updateClassList(),a}_onMouseEvent(p){this._update(p.point)}_getAnchor(p){if(this.options.anchor)return this.options.anchor;const a=this._map,o=this._container,m=this._pos;if(!a||!o||!m)return"bottom";const v=o.offsetWidth,S=o.offsetHeight,D=m.x<v/2,L=m.x>a.transform.width-v/2;if(m.y+p<S)return D?"top-left":L?"top-right":"top";if(m.y>a.transform.height-S){if(D)return"bottom-left";if(L)return"bottom-right"}return D?"left":L?"right":"bottom"}_updateClassList(){const p=this._container;if(!p)return;const a=[...this._classList];a.push("mapboxgl-popup"),this._anchor&&a.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&a.push("mapboxgl-popup-track-pointer"),p.className=a.join(" ")}_update(p){const a=this._map,o=this._content;if(!a||!this._lngLat&&!this._trackPointer||!o)return;let m=this._container;if(m||(m=this._container=Y("div","mapboxgl-popup",a.getContainer()),this._tip=Y("div","mapboxgl-popup-tip",m),m.appendChild(o)),this.options.maxWidth&&m.style.maxWidth!==this.options.maxWidth&&(m.style.maxWidth=this.options.maxWidth),a.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Jm(this._lngLat,this._pos,a.transform)),!this._trackPointer||p){const v=this._pos=this._trackPointer&&p instanceof n.P?p:a.project(this._lngLat),S=cs(this.options.offset),D=this._anchor=this._getAnchor(S.y),L=cs(this.options.offset,D),O=v.add(L).round();a._requestDomTask(()=>{this._container&&D&&(this._container.style.transform=`${od[D]} translate(${O.x}px,${O.y}px)`)})}if(!this._marker&&a._showingGlobe()){const v=n.dH(a.transform,this._lngLat)?0:1;this._setOpacity(v)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(kl);p&&p.focus()}_onClose(){this.remove()}_setOpacity(p){this._container&&(this._container.style.opacity=`${p}`),this._content&&(this._content.style.pointerEvents=p?"auto":"none")}},Marker:ol,Style:ks,LngLat:n.bO,LngLatBounds:n.az,Point:n.P,MercatorCoordinate:n.aa,FreeCameraOptions:Wl,Evented:n.E,config:n.e,prewarm:n.dM,clearPrewarmedResources:n.dN,get accessToken(){return n.e.ACCESS_TOKEN},set accessToken(p){n.e.ACCESS_TOKEN=p},get baseApiUrl(){return n.e.API_URL},set baseApiUrl(p){n.e.API_URL=p},get workerCount(){return n.dO.workerCount},set workerCount(p){n.dO.workerCount=p},get maxParallelImageRequests(){return n.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){n.e.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){n.dP(p)},get workerUrl(){return n.dQ.workerUrl},set workerUrl(p){n.dQ.workerUrl=p},get workerClass(){return n.dQ.workerClass},set workerClass(p){n.dQ.workerClass=p},get workerParams(){return n.dQ.workerParams},set workerParams(p){n.dQ.workerParams=p},get dracoUrl(){return n.dR()},set dracoUrl(p){n.dS(p)},get meshoptUrl(){return n.dT()},set meshoptUrl(p){n.dU(p)},setNow:n.q.setNow,restoreNow:n.q.restoreNow}});var w=h;return w})}(K1)),K1.exports}var Xte=Zte();const Ks=S_(Xte);var Lg={},yo={},w4,z6;function Yte(){if(z6)return w4;z6=1;const e=({size:N=400,growth:B=6,edges:F=6,seed:G=null}={})=>{var{destPoints:Q,seedValue:te}=n(N,B,F,G),Y=k(Q);return{path:Y,seedValue:te}},t=N=>N*(Math.PI/180),i=N=>{var B=360/N;return Array(N).fill("a").map((F,G)=>G*B)},c=N=>{var B=4294967295,F=123456789+N&B,G=987654321-N&B;return function(){G=36969*(G&65535)+(G>>>16)&B,F=18e3*(F&65535)+(F>>>16)&B;var Q=(G<<16)+(F&65535)>>>0;return Q/=4294967296,Q}},h=(N,B,F)=>{let G=B+N*(F-B);return G>F?G=G-B:G<B&&(G=G+B),G},_=(N,B,F)=>{var G=N+B*Math.cos(t(F)),Q=N+B*Math.sin(t(F));return[Math.round(G),Math.round(Q)]},w=N=>(N.sort(()=>Math.random()-.5),N),n=(N,B,F,G)=>{let Q=N/2,te=B*(Q/10),Y=N/2,oe=i(F),de=w([99,999,9999,99999,999999])[0],ge=Math.floor(Math.random()*de),be=G||ge,pe=c(be),we=[];return oe.forEach(ke=>{let Ae=h(pe(),te,Q),re=_(Y,Ae,ke);we.push(re)}),{destPoints:we,seedValue:be}},k=N=>{let B="";var F=[(N[0][0]+N[1][0])/2,(N[0][1]+N[1][1])/2];B+="M"+F[0]+","+F[1];for(var G=0;G<N.length;G++){var Q=N[(G+1)%N.length],te=N[(G+2)%N.length];F=[(Q[0]+te[0])/2,(Q[1]+te[1])/2],B+="Q"+Q[0]+","+Q[1]+","+F[0]+","+F[1]}return B+="Z",B};return w4=e,w4}var L6;function Jte(){if(L6)return yo;L6=1;var e=yo&&yo.__assign||function(){return e=Object.assign||function(k){for(var N,B=1,F=arguments.length;B<F;B++){N=arguments[B];for(var G in N)Object.prototype.hasOwnProperty.call(N,G)&&(k[G]=N[G])}return k},e.apply(this,arguments)},t=yo&&yo.__createBinding||(Object.create?function(k,N,B,F){F===void 0&&(F=B);var G=Object.getOwnPropertyDescriptor(N,B);(!G||("get"in G?!N.__esModule:G.writable||G.configurable))&&(G={enumerable:!0,get:function(){return N[B]}}),Object.defineProperty(k,F,G)}:function(k,N,B,F){F===void 0&&(F=B),k[F]=N[B]}),i=yo&&yo.__setModuleDefault||(Object.create?function(k,N){Object.defineProperty(k,"default",{enumerable:!0,value:N})}:function(k,N){k.default=N}),c=yo&&yo.__importStar||function(k){if(k&&k.__esModule)return k;var N={};if(k!=null)for(var B in k)B!=="default"&&Object.prototype.hasOwnProperty.call(k,B)&&t(N,k,B);return i(N,k),N},h=yo&&yo.__rest||function(k,N){var B={};for(var F in k)Object.prototype.hasOwnProperty.call(k,F)&&N.indexOf(F)<0&&(B[F]=k[F]);if(k!=null&&typeof Object.getOwnPropertySymbols=="function")for(var G=0,F=Object.getOwnPropertySymbols(k);G<F.length;G++)N.indexOf(F[G])<0&&Object.prototype.propertyIsEnumerable.call(k,F[G])&&(B[F[G]]=k[F[G]]);return B},_=yo&&yo.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(yo,"__esModule",{value:!0}),yo.SvgBlob=void 0;var w=c(s0()),n=_(Yte());return yo.SvgBlob=(0,w.forwardRef)(function(N,B){var F,G,Q,te,Y=N.variant,oe=N.isOutline,de=oe===void 0?!1:oe,ge=N.color,be=ge===void 0?"currentColor":ge,pe=N.shapeProps,we=h(N,["variant","isOutline","color","shapeProps"]),ke=(F=pe==null?void 0:pe.size)!==null&&F!==void 0?F:200,Ae=(G=pe==null?void 0:pe.growth)!==null&&G!==void 0?G:6,re=(Q=pe==null?void 0:pe.edges)!==null&&Q!==void 0?Q:6,Te=(te=pe==null?void 0:pe.seed)!==null&&te!==void 0?te:6,se=(0,w.useMemo)(function(){return(0,n.default)({size:ke,growth:Ae,edges:re,seed:Te})},[ke,Ae,re,Te]).path,ue={fill:be};Y==="gradient"&&(ue.fill="url(#gradient)"),de&&(ue.strokeWidth="7px",ue.fill="none",ue.stroke=be),Y==="gradient"&&de&&(ue.stroke="url(#gradient)");var De=we;De.colors,De.pattern,De.image;var ce=h(De,["colors","pattern","image"]);return w.default.createElement("svg",e({ref:B},ce,{viewBox:"0 0 ".concat(ke," ").concat(ke),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"}),N.variant==="solid"&&w.default.createElement("path",e({d:se},ue)),N.variant==="gradient"&&w.default.createElement(w.default.Fragment,null,w.default.createElement("defs",null,w.default.createElement("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},w.default.createElement("stop",{offset:"0%",style:{stopColor:N.colors[0]}}),w.default.createElement("stop",{offset:"100%",style:{stopColor:N.colors[1]}}))),w.default.createElement("path",e({d:se},ue))),N.variant==="pattern"&&w.default.createElement(w.default.Fragment,null,w.default.createElement("defs",null,w.default.createElement("pattern",{id:"pattern",x:"0",y:"0",width:N.pattern.width,height:N.pattern.height,patternUnits:"userSpaceOnUse",fill:be},w.default.createElement("path",{d:N.pattern.path}))),w.default.createElement("path",e({d:se},ue,{fill:"url(#pattern)"}))),N.variant==="image"&&w.default.createElement(w.default.Fragment,null,w.default.createElement("defs",null,w.default.createElement("clipPath",{id:"shape"},w.default.createElement("path",e({d:se},ue)))),w.default.createElement("image",{x:"0",y:"0",width:"100%",height:"100%",clipPath:"url(#shape)",xlinkHref:N.image,preserveAspectRatio:"none"})))}),yo}var S4={},$6;function Qte(){return $6||($6=1,Object.defineProperty(S4,"__esModule",{value:!0})),S4}var N6;function ere(){return N6||(N6=1,function(e){var t=Lg&&Lg.__createBinding||(Object.create?function(h,_,w,n){n===void 0&&(n=w);var k=Object.getOwnPropertyDescriptor(_,w);(!k||("get"in k?!_.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return _[w]}}),Object.defineProperty(h,n,k)}:function(h,_,w,n){n===void 0&&(n=w),h[n]=_[w]}),i=Lg&&Lg.__exportStar||function(h,_){for(var w in h)w!=="default"&&!Object.prototype.hasOwnProperty.call(_,w)&&t(_,h,w)};Object.defineProperty(e,"__esModule",{value:!0}),e.SvgBlob=void 0;var c=Jte();Object.defineProperty(e,"SvgBlob",{enumerable:!0,get:function(){return c.SvgBlob}}),i(Qte(),e)}(Lg)),Lg}var T4=ere();const tre="/assets/home_blob_1-DhXDxG6Y.png",rre="/assets/home_blob_2-DtuAXnv7.png",are="/assets/home_blob_3-pdSczRVG.png";var Iv={},E4={exports:{}},C4,B6;function nre(){if(B6)return C4;B6=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return C4=e,C4}var D4,j6;function ire(){if(j6)return D4;j6=1;var e=nre();function t(){}function i(){}return i.resetWarningCache=t,D4=function(){function c(w,n,k,N,B,F){if(F!==e){var G=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw G.name="Invariant Violation",G}}c.isRequired=c;function h(){return c}var _={array:c,bigint:c,bool:c,func:c,number:c,object:c,string:c,symbol:c,any:c,arrayOf:h,element:c,elementType:c,instanceOf:h,node:c,objectOf:h,oneOf:h,oneOfType:h,shape:h,exact:h,checkPropTypes:i,resetWarningCache:t};return _.PropTypes=_,_},D4}var O6;function sre(){return O6||(O6=1,E4.exports=ire()()),E4.exports}var P4,F6;function ore(){return F6||(F6=1,P4=function(t,i,c,h){var _=c?c.call(h,t,i):void 0;if(_!==void 0)return!!_;if(t===i)return!0;if(typeof t!="object"||!t||typeof i!="object"||!i)return!1;var w=Object.keys(t),n=Object.keys(i);if(w.length!==n.length)return!1;for(var k=Object.prototype.hasOwnProperty.bind(i),N=0;N<w.length;N++){var B=w[N];if(!k(B))return!1;var F=t[B],G=i[B];if(_=c?c.call(h,F,G,B):void 0,_===!1||_===void 0&&F!==G)return!1}return!0}),P4}var M4,V6;function lre(){if(V6)return M4;V6=1;function e(k){return k&&typeof k=="object"&&"default"in k?k.default:k}var t=s0(),i=e(t),c=e(ore());function h(k,N,B){return N in k?Object.defineProperty(k,N,{value:B,enumerable:!0,configurable:!0,writable:!0}):k[N]=B,k}function _(k,N){k.prototype=Object.create(N.prototype),k.prototype.constructor=k,k.__proto__=N}var w=!!(typeof window<"u"&&window.document&&window.document.createElement);function n(k,N,B){if(typeof k!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof N!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof B<"u"&&typeof B!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function F(G){return G.displayName||G.name||"Component"}return function(Q){if(typeof Q!="function")throw new Error("Expected WrappedComponent to be a React component.");var te=[],Y;function oe(){Y=k(te.map(function(ge){return ge.props})),de.canUseDOM?N(Y):B&&(Y=B(Y))}var de=function(ge){_(be,ge);function be(){return ge.apply(this,arguments)||this}be.peek=function(){return Y},be.rewind=function(){if(be.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var ke=Y;return Y=void 0,te=[],ke};var pe=be.prototype;return pe.shouldComponentUpdate=function(ke){return!c(ke,this.props)},pe.componentWillMount=function(){te.push(this),oe()},pe.componentDidUpdate=function(){oe()},pe.componentWillUnmount=function(){var ke=te.indexOf(this);te.splice(ke,1),oe()},pe.render=function(){return i.createElement(Q,this.props)},be}(t.Component);return h(de,"displayName","SideEffect("+F(Q)+")"),h(de,"canUseDOM",w),de}}return M4=n,M4}var wy={},U6;function sj(){if(U6)return wy;U6=1,Object.defineProperty(wy,"__esModule",{value:!0});var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};wy.clone=t,wy.defaults=i,wy.forEach=c;function t(h){var _=h.title,w=h.description,n=h.base,k=h.canonical,N=h.meta,B=h.link,F=h.auto;try{return JSON.parse(JSON.stringify({title:_,description:w,base:n,canonical:k,meta:N,link:B,auto:F}))}catch{return{}}}function i(h,_){return Object.keys(_).reduce(function(w,n){return h.hasOwnProperty(n)?e(h[n])==="object"&&!Array.isArray(h[n])&&h[n]&&i(h[n],_[n]):h[n]=_[n],h},h)}function c(h,_){h&&h.length&&Array.prototype.slice.call(h).forEach(_)}return wy}var $g={},G6;function cre(){if(G6)return $g;G6=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.canUseDOM=void 0,$g.removeDocumentMeta=c,$g.insertDocumentMeta=_;var e=sj();function t(w,n){var k={};for(var N in w)n.indexOf(N)>=0||Object.prototype.hasOwnProperty.call(w,N)&&(k[N]=w[N]);return k}$g.canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement);function i(w){w.parentNode.removeChild(w)}function c(){(0,e.forEach)(document.querySelectorAll("head [data-rdm]"),i)}function h(w){var n=w.tagName,k=t(w,["tagName"]),N=document.createElement(n);for(var B in k)w.hasOwnProperty(B)&&N.setAttribute(B,w[B]);N.setAttribute("data-rdm",""),document.getElementsByTagName("head")[0].appendChild(N)}function _(w){c(),(0,e.forEach)(w,h)}return $g}var H6;function ure(){if(H6)return Iv;H6=1,Object.defineProperty(Iv,"__esModule",{value:!0});var e=function(){function re(Te,se){for(var ue=0;ue<se.length;ue++){var De=se[ue];De.enumerable=De.enumerable||!1,De.configurable=!0,"value"in De&&(De.writable=!0),Object.defineProperty(Te,De.key,De)}}return function(Te,se,ue){return se&&re(Te.prototype,se),ue&&re(Te,ue),Te}}(),t=Object.assign||function(re){for(var Te=1;Te<arguments.length;Te++){var se=arguments[Te];for(var ue in se)Object.prototype.hasOwnProperty.call(se,ue)&&(re[ue]=se[ue])}return re};Iv.render=we;var i=s0(),c=B(i),h=sre(),_=B(h),w=lre(),n=B(w),k=sj(),N=cre();function B(re){return re&&re.__esModule?re:{default:re}}function F(re,Te){if(!(re instanceof Te))throw new TypeError("Cannot call a class as a function")}function G(re,Te){if(!re)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Te&&(typeof Te=="object"||typeof Te=="function")?Te:re}function Q(re,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Te);re.prototype=Object.create(Te&&Te.prototype,{constructor:{value:re,enumerable:!1,writable:!0,configurable:!0}}),Te&&(Object.setPrototypeOf?Object.setPrototypeOf(re,Te):re.__proto__=Te)}function te(re,Te){var se={};for(var ue in re)Te.indexOf(ue)>=0||Object.prototype.hasOwnProperty.call(re,ue)&&(se[ue]=re[ue]);return se}function Y(re,Te,se){return Te in re?Object.defineProperty(re,Te,{value:se,enumerable:!0,configurable:!0,writable:!0}):re[Te]=se,re}function oe(re){for(var Te={},se={title:void 0,description:void 0,canonical:void 0},ue=!0,De=function(){ue=re[ce].hasOwnProperty("extend");var Le=re[ce],Re=(0,k.clone)(re[ce]);["title","description","canonical"].forEach(function(Ge){Le.hasOwnProperty(Ge)&&(typeof Le[Ge]=="function"?se[Ge]=Le[Ge](se[Ge]):se[Ge]===void 0&&(se[Ge]=Le[Ge]))}),(0,k.defaults)(Te,Re)},ce=re.length-1;ue&&ce>=0;ce--)De();return typeof se.title=="string"&&(Te.title=se.title),typeof se.description=="string"&&(0,k.defaults)(Te,{meta:{name:{description:se.description}}}),typeof se.canonical=="string"&&(0,k.defaults)(Te,{link:{rel:{canonical:se.canonical}}}),Te.auto&&Te.auto.ograph&&ge(Te),Te}function de(re){N.canUseDOM&&(typeof re.title=="string"&&(document.title=re.title),(0,N.insertDocumentMeta)(pe(re)))}function ge(re){re.meta||(re.meta={}),re.meta.property||(re.meta.property={});var Te=re.meta.property;return Te&&(re.title&&!Te["og:title"]&&(Te["og:title"]=re.title),re.hasOwnProperty("description")&&!Te["og:description"]&&(Te["og:description"]=re.description),re.hasOwnProperty("canonical")&&!Te["og:url"]&&(Te["og:url"]=re.canonical)),re}function be(re){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se=[],ue=re==="link"?"href":"content";return Object.keys(Te).forEach(function(De){var ce=Te[De];if(typeof ce=="string"){se.push(Y({tagName:re},De,ce));return}Object.keys(ce).forEach(function(je){var Le=Array.isArray(ce[je])?ce[je]:[ce[je]];Le.forEach(function(Re){if(Re!==null){var Ge;se.push((Ge={tagName:re},Y(Ge,De,je),Y(Ge,ue,Re),Ge))}})})}),se}function pe(re){return[].concat(be("meta",re.meta),be("link",re.link))}function we(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Te=0,se=[];function ue(De){var ce=De.tagName,je=te(De,["tagName"]);return ce==="meta"?c.default.createElement("meta",t({},je,{key:Te++,"data-rdm":!0})):ce==="link"?c.default.createElement("link",t({},je,{key:Te++,"data-rdm":!0})):null}return re.title&&se.push(c.default.createElement("title",{key:Te++},re.title)),pe(re).reduce(function(De,ce){return De.push(ue(ce)),De},se)}var ke=function(re){Q(Te,re);function Te(){return F(this,Te),G(this,(Te.__proto__||Object.getPrototypeOf(Te)).apply(this,arguments))}return e(Te,[{key:"render",value:function(){var ue=this.props.children,De=c.default.Children.count(ue);return De===1?c.default.Children.only(ue):De?c.default.createElement("div",null,this.props.children):null}}]),Te}(i.Component);ke.propTypes={title:_.default.oneOfType([_.default.string,_.default.func]),description:_.default.oneOfType([_.default.string,_.default.func]),canonical:_.default.oneOfType([_.default.string,_.default.func]),base:_.default.string,meta:_.default.objectOf(_.default.oneOfType([_.default.string,_.default.objectOf(_.default.oneOfType([_.default.string,_.default.arrayOf(_.default.string)]))])),link:_.default.objectOf(_.default.objectOf(_.default.oneOfType([_.default.string,_.default.arrayOf(_.default.string)]))),auto:_.default.objectOf(_.default.bool)};var Ae=(0,n.default)(oe,de)(ke);return Ae.renderAsReact=function(){return we(Ae.rewind())},Iv.default=Ae,Iv}var dre=ure();const j_=S_(dre),u2=()=>b.jsx("footer",{className:"w-full bg-white dark:bg-[#0c0c0c] border-t border-gray-200 dark:border-gray-800",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[b.jsxs("div",{className:"col-span-1 md:col-span-2",children:[b.jsx("h3",{className:"text-xl font-RobotoBold text-black dark:text-white mb-4",children:"GatorPool"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-RobotoRegular",children:"Helping gators get home safely. A ridesharing platform for university students."})]}),b.jsxs("div",{children:[b.jsx("h4",{className:"text-lg font-RobotoBold text-black dark:text-white mb-4",children:"Quick Links"}),b.jsxs("ul",{className:"space-y-2",children:[b.jsx("li",{children:b.jsx(pi,{to:"/",className:"text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white font-RobotoRegular",children:"Home"})}),b.jsx("li",{children:b.jsx(pi,{to:"/about",className:"text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white font-RobotoRegular",children:"About"})}),b.jsx("li",{children:b.jsx(pi,{to:"/safety",className:"text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white font-RobotoRegular",children:"Safety"})}),b.jsx("li",{children:b.jsx(pi,{to:"/tos",className:"text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white font-RobotoRegular",children:"Terms of Service"})})]})]}),b.jsxs("div",{children:[b.jsx("h4",{className:"text-lg font-RobotoBold text-black dark:text-white mb-4",children:"Contact"}),b.jsxs("ul",{className:"space-y-2",children:[b.jsx("li",{children:b.jsx("a",{href:"mailto:info.gatorpool@gmail.com",className:"text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white font-RobotoRegular",children:"info.gatorpool@gmail.com"})}),b.jsx("li",{className:"text-gray-600 dark:text-gray-400 font-RobotoRegular",children:"University of Florida"})]})]})]}),b.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200 dark:border-gray-800",children:b.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[b.jsxs("p",{className:"text-gray-600 dark:text-gray-400 font-RobotoRegular text-sm",children:[" ",new Date().getFullYear()," GatorPool. All rights reserved."]}),b.jsx("div",{className:"flex space-x-6 mt-4 md:mt-0",children:b.jsxs("a",{href:"https://www.instagram.com/gator_pool/",className:"text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white",children:[b.jsx("span",{className:"sr-only",children:"Instagram"}),b.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:b.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})]})})]})})]})}),A4="pk.eyJ1IjoibXVzdGFmYW1hc29keSIsImEiOiJjbTZva3FneTIwZjI5MmxvdWQ1dHY1NTlwIn0.oNPGEBsenNviLdx_qzcPWw",hre=()=>{const e={title:"GatorPool",description:"GatorPool",canonical:"https://gatorpool.app",meta:{charset:"utf-8",name:{keywords:"GatorPool, UF, Rideshare, Rides, Pool, Carpool, Uber, Lyft"}}},[t,i]=V.useState({lat:29.6436,lng:-82.3549}),[c,h]=V.useState(null),[_,w]=V.useState("Near Reitz Union"),[n,k]=V.useState(""),[N,B]=V.useState([]),[F,G]=V.useState(null),Q=V.useRef(null),te=V.useRef(null),[Y,oe]=ra.useState(mk("2024-04-04"));ml({dateStyle:"full"});let[de,ge]=ra.useState(Lf("2024-04-08T18:45:22Z"));ml({dateStyle:"short",timeStyle:"long"});const[be,pe]=V.useState(null);function we(){return{size:500,growth:7,edges:18}}V.useEffect(()=>{pe(we())},[]),V.useEffect(()=>{if(Ks.accessToken=A4,!te.current)return;const Te=new Ks.Map({container:te.current,style:"mapbox://styles/mustafamasody/cm6olrhpt000k01qrebc2e55u",center:[t.lng,t.lat],zoom:14});return new Ks.Marker().setLngLat([t.lng,t.lat]).setPopup(new Ks.Popup().setHTML("<b>University of Florida</b><br>Reitz Union")).addTo(Te),Q.current=Te,()=>{Te.remove()}},[]);const ke=async Te=>{var ue;const se=`https://api.mapbox.com/directions/v5/mapbox/driving/${t.lng},${t.lat};${Te.lng},${Te.lat}?geometries=geojson&access_token=${A4}`;try{const je=(ue=(await(await fetch(se)).json()).routes[0])==null?void 0:ue.geometry;if(je&&Q.current){const Le=Q.current,Re=Le.getSource("route");Re?Re.setData({type:"FeatureCollection",features:[{type:"Feature",geometry:je,properties:{}}]}):(Le.addSource("route",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:je,properties:{}}]}}),Le.addLayer({id:"route",type:"line",source:"route",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#007AFF","line-width":5,"line-opacity":.75}})),Le.fitBounds([[t.lng,t.lat],[Te.lng,Te.lat]],{padding:50,maxZoom:14})}}catch(De){console.error("Error fetching route:",De)}},Ae=async Te=>{if(Te.length<3){B([]);return}const se=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(Te)}.json?access_token=${A4}&autocomplete=true&limit=5`;try{const De=await(await fetch(se)).json();B(De.features||[])}catch(ue){console.error("Error fetching geocode data:",ue)}},re=Te=>{k(Te.place_name);const se={lat:Te.center[1],lng:Te.center[0]};h(se),B([]),Q.current&&(new Ks.Marker().setLngLat(Te.center).setPopup(new Ks.Popup().setHTML(`<b>Destination</b><br>${Te.place_name}`)).addTo(Q.current),Q.current.flyTo({center:Te.center,zoom:14}),ke(se))};return V.useEffect(()=>{Q.current&&F&&(Q.current.getSource("route")||(Q.current.addSource("route",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:F,properties:{}}]}}),Q.current.addLayer({id:"route",type:"line",source:"route",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#007AFF","line-width":5,"line-opacity":.75}})))},[F]),b.jsxs("div",{className:"light dark:dark bg-white dark:bg-[#0c0c0c] flex flex-col h-full min-h-screen w-full",children:[b.jsx(c2,{}),b.jsx(j_,{...e}),b.jsx("div",{className:"flex flex-col h-full w-full mt-32 px-6",children:b.jsxs("div",{className:"flex flex-col space-y-8 md:space-y-0 md:flex-row md:space-x-8 items-center w-full max-w-screen-lg mx-auto",children:[b.jsxs("div",{className:"flex flex-col md:w-1/2",children:[b.jsx("h1",{className:"text-4xl text-black dark:text-white font-RobotoBold",children:"Where would you like to go?"}),b.jsx(Za,{label:"From",className:"mt-8",value:_,onChange:Te=>w(Te.target.value)}),b.jsxs("div",{className:"relative mt-8",children:[b.jsx(Za,{label:"To",placeholder:"Enter your desired address",value:n,onChange:Te=>{k(Te.target.value),Ae(Te.target.value)}}),N.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:N.map((Te,se)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>re(Te),children:Te.place_name},se))})]}),b.jsxs("div",{className:"flex flex-row mt-8 space-x-8 ",children:[b.jsx(yx,{className:"max-w-[284px] ",label:"When",value:Y,onChange:oe}),b.jsx(MN,{label:"Departure Time",value:de,onChange:ge})]}),b.jsxs("div",{className:"flex flex-row space-x-2 mt-8 items-center",children:[b.jsx($r,{className:" font-RobotoRegular text-white text-md",onPress:()=>{},color:"primary",children:"Book Ride"}),b.jsx(pi,{to:"/auth/signin",className:"text-neutral-500 underline underline-offset-4 font-RobotoRegular text-sm",children:"Login to see recent activity"})]})]}),b.jsx("div",{id:"map-container",ref:te,className:"rounded-xl w-11/12 md:w-1/2 h-[600px] mt-12"})]})}),b.jsxs("div",{className:"flex flex-col h-auto w-full items-center text-black",children:[b.jsxs("div",{className:"flex mt-32 bg-white dark:bg-[#0c0c0c] lg:mt-64 flex-col lg:space-x-8 px-4 lg:px-6 lg:flex-row items-center justify-center w-screen md:max-w-screen-lg",children:[b.jsxs("div",{className:"flex md:w-1/2 flex-col spac ",children:[b.jsx("h1",{className:"text-center md:text-left text-black dark:text-white font-RobotoBold text-4xl md:text-6xl",children:"Helping gators get home safely."}),b.jsx("p",{className:"text-center md:text-left text-black dark:text-white font-RobotoRegular text-md md:text-lg mt-6 lg:mt-4",children:"No more posting on Reddit or Snapchat for a ride home. We've got you covered."})]}),b.jsxs("div",{className:"relative md:w-1/2 justify-center items-center mt-32 lg:mt-0 px- lg:px-0 flex flex-col",children:[b.jsx("div",{className:"absolute inset-0 flex justify-center items-center z-0",children:b.jsx(T4.SvgBlob,{variant:"gradient",colors:["#0de046","#03631d"],color:"#00cec9",shapeProps:we(),isOutline:!1,className:"w-[130%] h-auto"})}),b.jsx("img",{src:tre,className:"relative w-full rounded-xl z-20 mt-4 shadow-[0px_10px_30px_rgba(0,0,0,0.3)] custom-3d-tilt"})]})]}),b.jsxs("div",{className:"flex my-32 bg-white dark:bg-[#0c0c0c] lg:mt-64 flex-col lg:space-x-8 px-4 lg:px-6 lg:flex-row items-center justify-center w-screen md:max-w-screen-lg",children:[b.jsxs("div",{className:"relative md:w-1/2 justify-center items-center mt-32 lg:mt-0 px- lg:px-0 flex flex-col",children:[b.jsx("img",{src:rre,className:"relative w-full rounded-xl z-20 mt-4 shadow-[0px_10px_30px_rgba(0,0,0,0.3)] custom-3d-tilt"}),b.jsx("div",{className:"absolute inset-0 flex justify-center items-center z-0",children:b.jsx(T4.SvgBlob,{variant:"gradient",colors:["#0de046","#03631d"],color:"#00cec9",shapeProps:we(),isOutline:!1,className:"w-[130%] h-auto"})})]}),b.jsxs("div",{className:"flex md:w-1/2 flex-col mt-32 md:mt-0 ",children:[b.jsx("h1",{className:"text-center md:text-left text-black dark:text-white font-RobotoBold text-4xl md:text-6xl",children:"Set your own price."}),b.jsx("p",{className:"text-center md:text-left text-black dark:text-white font-RobotoRegular text-md md:text-lg mt-6 lg:mt-4",children:"Payments are handled between you and the driver."})]})]}),b.jsxs("div",{className:"flex mb-32 bg-white dark:bg-[#0c0c0c] lg:mt-32 flex-col lg:space-x-8 px-4 lg:px-6 lg:flex-row items-center justify-center w-screen md:max-w-screen-lg",children:[b.jsxs("div",{className:"flex md:w-1/2 flex-col spac ",children:[b.jsx("h1",{className:"text-center md:text-left text-black dark:text-white font-RobotoBold text-4xl md:text-6xl",children:"Carpool with other gators."}),b.jsx("p",{className:"text-center md:text-left text-black dark:text-white font-RobotoRegular text-md md:text-lg mt-6 lg:mt-4",children:"Enable carpooling to save money and reduce carbon emissions."})]}),b.jsxs("div",{className:"relative md:w-1/2 justify-center items-center mt-32 lg:mt-0 px- lg:px-0 flex flex-col",children:[b.jsx("div",{className:"absolute inset-0 flex justify-center items-center z-0",children:b.jsx(T4.SvgBlob,{variant:"gradient",colors:["#0de046","#03631d"],color:"#00cec9",shapeProps:we(),isOutline:!1,className:"w-[130%] h-auto"})}),b.jsx("img",{src:are,className:"relative w-full rounded-xl z-20 mt-4 shadow-[0px_10px_30px_rgba(0,0,0,0.3)] custom-3d-tilt"})]})]})]}),b.jsx(u2,{})]})},Aw=({width:e=512,height:t=512})=>b.jsx("svg",{id:"fi_6015730","enable-background":"new 0 0 53 53",height:t,viewBox:"0 0 53 53",width:e,xmlns:"http://www.w3.org/2000/svg",children:b.jsxs("g",{id:"_x32_17",children:[b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m50.2789612 33.2572289v6.5100097l-14.1399536 8.2199707-33.6400147-19.4299907v-15.3499756h.0100098l14.1300049-8.2100225 23.3499756 13.4700322 3.4500122 8.7399903z",fill:"#62fc03"})})}),b.jsxs("g",{children:[b.jsxs("g",{children:[b.jsxs("g",{children:[b.jsx("g",{children:b.jsx("g",{children:b.jsxs("g",{children:[b.jsxs("g",{children:[b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m31.7076111 39.582058c-.0351563-.0116577-.0706177-.0223999-.1055298-.0327759-.6311035-.1879883-1.2993774-.3892212-1.835144-.7827148-.4072876-.2991333-.7223511-.6609497-.9223633-1.0621948l-3.1115112 1.8077393c.5892334-.3411255 1.3955078-.2998047 2.2845459.2171021 1.7780762 1.0234375.5330811 3.4171143.5227661 5.4535522 0 1.0131226 2.3200073 1.8240356 1.7411499 2.1651611l5.0963745-2.9668579c.5789185-.3411255-3.6778564-3.7193604-3.6778564-4.722168-.0000001-.0274049.0064697-.050232.0075683-.0768433z",fill:"#111d33"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m12.4221611 28.5362148c0 1.0027714 4.2567749 4.3810558 3.6778774 4.722147l-5.0963812 2.9668579c.5788975-.3410912-1.1123457-1.0996895-1.1123457-2.1128082.0103474-2.0364571-.5465078-3.4561405-2.3245912-4.4796066-.88901-.5168743-.5222816-1.5845222-1.111527-1.2433662l5.1067295-2.9668579c.5788975-.341156 1.38519-.2894821 2.2845478.2273941 1.7677356 1.0234031-1.4243096.8394336-1.4243096 2.8862399z",fill:"#111d33"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m36.1375809 41.4737167v6.5096474l-33.6365998-19.4243431v-15.3480492l23.349477 13.4769993 3.4532814 8.7325306z",fill:"#067302"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m28.2693501 35.2100754-8.7875996-5.0737324-1.2828598-.7440796-5.4521542-3.1429443-1.2828598-.7440815-6.5425539-3.7780304v-6.2603636l6.5425539 3.7780314 1.2828598.7376613 5.4521542 3.1493645 1.2828598.7376594 5.574028 3.2199917z",fill:"#1d2943"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m28.543 36.512-24.716-14.276",fill:"none"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m50.2749367 33.2572136v6.5096474l-14.1373558 8.2165031v-6.5096474z",fill:"#067302"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m25.85 26.688-23.349-13.477",fill:"none"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m50.2749367 33.2572136-14.1373558 8.2165031-6.8338414-6.053215 14.1373578-8.2165012z",fill:"#0abf04"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m43.4410973 27.2040005-14.1373578 8.2165012-3.4532814-8.7325306 14.1373578-8.2164211z",fill:"#066903"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m42.6141586 26.9195786-3.8171692 2.2161827-2.0243454 1.1775817-1.3363075.7740441-4.9219456 2.8644905-.8798751.5093269-2.9571171-7.4887314 5.7091942-3.3209209 4.9285278-2.8579502 1.3429718-.7805843.9989471-.5822506.6218605 1.5745773z",fill:"#1d2943"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m39.9878159 18.47155-14.1373578 8.2164211-23.3461864-13.4757252 14.1373585-8.2165021z",fill:"#0abf04"})})}),b.jsxs("g",{children:[b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m12.7467365 19.9825363v6.2667828l-1.2828598-.7440815v-6.2603626z",fill:"#066903"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m19.4817505 23.8695602v6.2667828l-1.2828598-.7440796v-6.2603626z",fill:"#066903"})})})})]}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m32.1756668 45.2968636c0 .1362686-.0136452.2726212-.0136452.3952446l-7.2648296-4.1981202-1.0087032-.5860901c.1090641-.7223549.368042-1.2675972.7224388-1.6764832.4498196-.5179558 1.049551-.8042183 1.676487-.8587112.0954208-.0272865.2044868-.0272865.2999077-.0272865.6132927 0 1.2539539.1908417 1.9081764.5725288.790575.4497375 1.4993706 1.1312447 2.0854588 1.935463.9813327 1.3220902 1.5947093 2.9577294 1.5947093 4.4434548z",fill:"#066903"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m28.0198116 39.7320404c1.7754307 1.0250435 3.2029552 3.5128365 3.1971722 5.5529671-.005764 2.0325203-1.4426842 2.8589516-3.2181149 1.8339081-1.7754536-1.0250587-3.2096024-3.5091019-3.2038383-5.5416222.0057831-2.0401344 1.4493275-2.8703117 3.224781-1.845253z",fill:"#4c5c75"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m12.8978271 34.1679459c0 .1362686-.0136433.2726212-.0136433.3952446l-7.2648301-4.198122-1.0087042-.5860882c.1090651-.7223568.368042-1.2675972.7224402-1.6764851.4498196-.5179539 1.049551-.8042183 1.6764865-.8587093.0954213-.0272865.2044859-.0272865.2999072-.0272865.6132922 0 1.2539539.1908417 1.9081764.5725269.7905741.4497375 1.4993706 1.1312466 2.0854588 1.9354649.9813338 1.3220882 1.5947085 2.9577254 1.5947085 4.4434547z",fill:"#066903"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m8.741972 28.6093216c1.7754316 1.0250454 3.2029562 3.5128403 3.1971722 5.5529709-.0057621 2.0325203-1.4426823 2.8589516-3.2181139 1.8339043-1.7754531-1.0250587-3.2096014-3.5091019-3.2038393-5.5416203.005784-2.0401325 1.4493279-2.8703137 3.224781-1.8452549z",fill:"#4c5c75"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m50.2749329 37.9200706-14.1385498 8.2164307-3.453064-1.9935913-.2249756.1307373-.0025024 1.6064453 3.6790771 2.1241455 14.3635864-8.3471679.0025025-1.6065064z",fill:"#4c5c75"})})}),b.jsx("g",{children:b.jsxs("g",{"enable-background":"new",children:[b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m50.5009727 38.0505943-.0025062 1.6064873-14.363533 8.3471756.0025024-1.6064911z",fill:"#1d2943"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m36.1374359 46.3977661-.0025024 1.6064911-3.6790886-2.1241226.0025062-1.6064873z",fill:"#111d33"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m50.5009727 38.0505943-14.3635368 8.3471718-3.6790848-2.1241188.2249718-.1307373 3.4530487 1.993618 14.1385651-8.2164345z",fill:"#4c5c75"})})})})]})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m3.4763 22.5701561-.9753287-.5631104v2.9945869l.9668491.5581856c.2618914.1512547.4737542.0305252.4746022-.2704525l.0054104-1.9025269c.0008481-.3008956-.2096419-.665428-.471533-.8166827z",fill:"#ffd06c"})})})})]}),b.jsx("g",{opacity:".15",children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m37.3151207 20.793602-1.8787842 10.2937851-4.9219456 2.8644905 1.872202-10.3003254z",fill:"#fff"})})})}),b.jsx("g",{opacity:".15",children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m40.2789001 21.0053444-1.4819107 8.1304169-2.0243454 1.1775817 1.8854485-10.3003253.9989471-.5822506z",fill:"#fff"})})})})]})})}),b.jsx("g",{children:b.jsxs("g",{children:[b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m9.8162804 25.3384609 1.3252468.7656212-.0009985.4633656-1.3257466-.7651234z",fill:"#434240"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m20.8170338 31.6896477-.0009995.4638595-1.3257465-.7656212.0014972-.4633655z",fill:"#434240"})})})]})})]}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m28.0143147 41.20298c1.0684414.6168671 1.927515 2.1140022 1.9240341 3.3417397-.0034676 1.223156-.8681965 1.7204971-1.9366379 1.1036301-1.0684547-.6168709-1.9315147-2.1117516-1.9280472-3.3349075.0034809-1.2277375.8721943-1.7273331 1.940651-1.1104623z",fill:"#fff"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m28.0096226 42.4582672c.4651051.268528.8390694.9202499.837553 1.4546967-.0015087.5324516-.3779354.748951-.8430386.480423-.4651108-.2685318-.8408089-.9192696-.8393002-1.4517212.0015145-.5344468.3796769-.7519303.8447858-.4833985z",fill:"#4c5c75"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m8.736475 30.080265c1.0684423.6168652 1.927516 2.1140022 1.924036 3.3417358-.0034676 1.223156-.8681965 1.7204971-1.9366388 1.1036339-1.0684547-.6168747-1.9315152-2.1117554-1.9280477-3.3349094.0034809-1.2277374.8721953-1.7273349 1.9406505-1.1104603z",fill:"#fff"})})}),b.jsxs("g",{children:[b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m38.9969254 45.1550407.002079.733059-1.6325951.9425811-.002079-.7330589z",fill:"#ffd06c"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m49.8590012 38.8838196.002079.7330589-1.6325989.9425812-.002079-.7330589z",fill:"#ffd06c"})})})})]}),b.jsxs("g",{children:[b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m37.6611328 41.9635506c.5554619-.3206978.9910965-.0504646.9928627.5731468.001812.6382637-.4308701 1.4098206-.9863319 1.7305183-.5554657.3206978-1.0102539.0615196-1.0120621-.5767441-.00177-.6236114.4500656-1.4062232 1.0055313-1.726921z",fill:"#fff"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m48.7576675 35.5569611c.5554657-.3206978.9974823-.0541496.9992485.5694618.001812.6382637-.437252 1.4135056-.9927177 1.7342033s-1.0102539.0615234-1.0120621-.5767403c-.00177-.6236114.4500656-1.4062271 1.0055313-1.7269248z",fill:"#fff"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m46.380909 38.5972862.0018921.6676178-6.3527337 3.6677513-.001892-.6676178z",fill:"#1d2943"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m46.3761063 36.9025803.0018921.6676178-6.3527337 3.6677513-.001892-.6676178z",fill:"#1d2943"})})})})]})]}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m8.7317839 31.3355522c.4651041.268528.8390684.9202461.837553 1.4546928-.0015087.5324554-.3779345.748951-.8430386.480423-.4651098-.2685318-.8408093-.9192696-.8393002-1.4517212.0015155-.5344467.3796759-.7519264.8447858-.4833946z",fill:"#4c5c75"})})})]})]})});/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fre=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oj=(...e)=>e.filter((t,i,c)=>!!t&&t.trim()!==""&&c.indexOf(t)===i).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pre={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mre=V.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:h="",children:_,iconNode:w,...n},k)=>V.createElement("svg",{ref:k,...pre,width:t,height:t,stroke:e,strokeWidth:c?Number(i)*24/Number(t):i,className:oj("lucide",h),...n},[...w.map(([N,B])=>V.createElement(N,B)),...Array.isArray(_)?_:[_]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=(e,t)=>{const i=V.forwardRef(({className:c,...h},_)=>V.createElement(mre,{ref:_,iconNode:t,className:oj(`lucide-${fre(e)}`,c),...h}));return i.displayName=`${e}`,i};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gre=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],d2=Xo("ArrowLeft",gre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yre=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],xre=Xo("Bell",yre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vre=[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]],_re=Xo("Bike",vre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bre=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ry=Xo("Check",bre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wre=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Sre=Xo("ChevronDown",wre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tre=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],lj=Xo("ChevronLeft",Tre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ere=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],cj=Xo("ChevronRight",Ere);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cre=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Dre=Xo("ChevronUp",Cre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pre=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Mre=Xo("Mail",Pre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Are=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],kre=Xo("MoveRight",Are);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rre=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ng=Xo("Pencil",Rre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ire=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Bg=Xo("Save",Ire);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zre=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Lre=Xo("Settings",zre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $re=[["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}],["path",{d:"M12 2v7.5",key:"1e5rl5"}],["path",{d:"m19 5-5.23 5.23",key:"1ezxxf"}],["path",{d:"M22 12h-7.5",key:"le1719"}],["path",{d:"m19 19-5.23-5.23",key:"p3fmgn"}],["path",{d:"M12 14.5V22",key:"dgcmos"}],["path",{d:"M10.23 13.77 5 19",key:"qwopd4"}],["path",{d:"M9.5 12H2",key:"r7bup8"}],["path",{d:"M10.23 10.23 5 5",key:"k2y7lj"}],["circle",{cx:"12",cy:"12",r:"2.5",key:"ix0uyj"}]],Nre=Xo("ShipWheel",$re);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bre=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],jre=Xo("Trash",Bre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ore=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_u=Xo("X",Ore),Fre=()=>{const[e,t]=V.useState(""),[i,c]=V.useState(""),[h,_]=V.useState(!1),[w,n]=V.useState(null),[k,N]=V.useState(!1),[B,F]=V.useState(!1),[G,Q]=V.useState(!1),[te,Y]=V.useState(!1),[oe,de]=V.useState(!1),[ge,be]=V.useState(1);V.useEffect(()=>{const we=i.length>=8,ke=/[a-z]/.test(i),Ae=/[A-Z]/.test(i),re=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(i),Te=/[0-9]/.test(i);N(we),F(ke),Q(Ae),Y(re),de(Te)},[i]);const pe=()=>{_(!0),fetch(ma+"/v1/account/auth/signup",{method:"POST",headers:{"Content-Type":"application/json","X-GatorPool-Username":e,"X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")},body:JSON.stringify({password:i})}).then(we=>we.json()).then(we=>{_(!1),we.success?be(2):n(we.error)}).catch(we=>{_(!1),n("An error occurred. Please try again later.")})};return b.jsxs("div",{className:"flex mobile:flex-col md:flex-row min-h-screen w-full light:bg-white dark:bg-black",children:[b.jsxs("div",{className:"flex flex-col py-10 mobile:px-12 xl:px-24 mobile:w-full md:w-1/2 border-r-1 light:border-neutral-400 dark:border-neutral-800",children:[b.jsxs("div",{className:"flex flex-row items-center ",children:[b.jsx("img",{src:d0,alt:"GatorPool Logo",className:"w-20"}),b.jsx("h1",{className:"text-xl text-black dark:text-white font-RobotoSemiBold text-left",children:"GatorPool"})]}),b.jsx("h1",{className:"text-7xl mt-24 text-black dark:text-white font-RobotoRegular text-left",children:"Create your login"}),b.jsx("p",{className:"text-md mt-12 text-black dark:text-white font-RobotoRegular text-left",children:"We'll need your UF email address, and a unique password. You'll use this login to access GatorPool next time."}),b.jsx("div",{className:"flex lg:hidden mt-auto mobile:hidden md:block  items-center",children:b.jsx(Aw,{width:"300",height:"400"})}),b.jsx("div",{className:"flex md:hidden lg:block mt-auto mobile:hidden md:block  items-center",children:b.jsx(Aw,{width:"500",height:"400"})})]}),b.jsxs("div",{className:"flex flex-col mobile:w-full md:w-1/2 md:py-10 mobile:px-12 xl:px-24",children:[ge===1&&b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("p",{className:"text-lg mobile:hidden md:block  text-black dark:text-white font-RobotoBold mt-24",children:"Enter your UF email and create a password."}),b.jsx(Za,{type:"email",label:"Email",placeholder:"Enter your UF email",value:e,onChange:we=>t(we.target.value),className:"mobile:w-full desktop2:w-8/12 md:mt-16 text-black dark:text-white"}),b.jsx(Za,{type:"password",label:"Password",placeholder:"Create your password",value:i,onChange:we=>c(we.target.value),className:"mobile:w-full desktop2:w-8/12 mt-8 text-black dark:text-white"}),b.jsxs("div",{className:"grid grid-cols-2 mobile:w-full desktop2:w-8/12 mobile:gap-0 xl:gap-4 mt-8 ",children:[b.jsxs("div",{className:"flex items-center",children:[k?b.jsx(Ry,{className:"text-green-500"}):b.jsx(_u,{className:"text-red-500"}),b.jsx("p",{className:"text-neutral-800 text-sm dark:text-neutral-200 ml-2",children:"Minimum 8 characters"})]}),b.jsxs("div",{className:"flex items-center",children:[B?b.jsx(Ry,{className:"text-green-500"}):b.jsx(_u,{className:"text-red-500"}),b.jsx("p",{className:"text-neutral-800 text-sm dark:text-neutral-200 ml-2",children:"One lowercase letter"})]}),b.jsxs("div",{className:"flex items-center",children:[G?b.jsx(Ry,{className:"text-green-500"}):b.jsx(_u,{className:"text-red-500"}),b.jsx("p",{className:"text-neutral-800 text-sm dark:text-neutral-200 ml-2",children:"One uppercase letter"})]}),b.jsxs("div",{className:"flex items-center",children:[te?b.jsx(Ry,{className:"text-green-500"}):b.jsx(_u,{className:"text-red-500"}),b.jsx("p",{className:"text-neutral-800 text-sm dark:text-neutral-200 ml-2",children:"One special character"})]}),b.jsxs("div",{className:"flex items-center",children:[oe?b.jsx(Ry,{className:"text-green-500"}):b.jsx(_u,{className:"text-red-500"}),b.jsx("p",{className:"text-neutral-800 text-sm dark:text-neutral-200 ml-2",children:"One number"})]})]}),b.jsx($r,{isLoading:h,className:"mobile:w-full mt-8 desktop2:w-8/12 mt-8 text-white",onPress:()=>{pe()},color:"secondary",children:"Sign Up"}),w&&b.jsx("div",{className:"flex flex-col mt-4",children:b.jsx("p",{className:"text-red-500 font-RobotoRegular text-sm",children:w})}),b.jsxs("div",{className:"flex flex-col mt-10",children:[b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Already have an account?"}),b.jsx(pi,{to:"/auth/signin",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Sign in"})]}),b.jsx("div",{className:"flex flex-col mt-auto",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["By continuing, you agree to our ",b.jsx(pi,{to:"/tos",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Terms of Service"}),"."]})})]}),ge===2&&b.jsxs("div",{className:"flex flex-col w-full h-full items-start mt-16 md:mt-40",children:[b.jsx(Mre,{className:"text-green-500",size:100}),b.jsx("p",{className:"text-xl text-center text-black dark:text-white font-RobotoBold mt-8",children:"Account created successfully!"}),b.jsxs("p",{className:"text-sm text-left text-black dark:text-white font-RobotoRegular mt-2",children:["Please check your inbox at ",e," to verify your email. Click the link provided in the email and fill out the rest of your profile."]})]})]})]})},q6=({width:e=512,height:t=512})=>b.jsxs("svg",{id:"fi_12677439","enable-background":"new 0 0 512 512",height:t,viewBox:"0 0 512 512",width:e,xmlns:"http://www.w3.org/2000/svg",children:[b.jsxs("linearGradient",{id:"SVGID_1_",gradientUnits:"userSpaceOnUse",x1:"440.535",x2:"456.117",y1:"270.931",y2:"270.931",children:[b.jsx("stop",{offset:"0","stop-color":"#e0e0e0"}),b.jsx("stop",{offset:".2799","stop-color":"#dadada"}),b.jsx("stop",{offset:".5692","stop-color":"#cecece"}),b.jsx("stop",{offset:"1","stop-color":"#ccc"})]}),b.jsxs("g",{children:[b.jsx("path",{d:"m446.211 305.17c.052-.527.119-.977-.1-1.339-.138-.227.133-.919.046-1.308-.237-1.054-.722-2.088-1.028-2.366-.157-.141-.516-.398-.932-.76-.702-.609-1.567-1.514-1.898-2.66-.034-.118-.073-.242-.116-.374-.632-1.905-2.271-5.142-4.944-7.246-2.856-2.248-3.402-4.205-6.309-6.612-2.906-2.407-9.911-11.449-32.88-19.421-22.97-7.972-27.636-11.635-28.763-12.654-1.127-1.02-10.782-4.137-13.661-5.732-2.879-1.594-14.55-8.561-21.063-11.758-6.514-3.198-23.582-8.751-26.342-11.25s-19.285-10.262-23.5-13.516c-4.216-3.255-9.694-6.977-9.694-6.977-.957-.867-5.031-.73-7.562-.659s-17.323-10.521-17.323-10.521.092 13.724.013 14.174c-.056.323.006.677.201.995.467.761 2.142 2.727 3.646 3.751 1.504 1.025 4.132 2.855 4.413 4.115.281 1.259 1.077 1.756-.015 2.229-1.092.474-3.823 1.264-4.329 1.594-.505.33-2.446-2.327-4.336-3.138s-1.553-1.294-2.196-1.201-93.846 29.671-93.846 29.671-4.596.113-5.247-.364c-.652-.478-1.65-1.832-3.371-2.489-1.72-.658-3.122-1.589-3.948-1.775-.75-.169-89.927 18.687-89.927 18.687v11.664s1.577 1.428 1.449 1.763c-.128.334.446 2.203.759 2.375.314.172 2.861.453 3.497.578.634.125 3.046.959 3.802.967.755.009 2.194.412 3.271.374s2.434-.609 3.335.207 1.209 2.782 1.572 3.224c.362.44.459.979 2.26 1.033.315.009.634-.007.949-.031-.001 2.892 0 5.394.003 5.499.004.111.087.18.302.167.699-.042 3.309-.716 3.71-1.366s4.013-3.342 3.77-3.899c-.196-.45.932-1.762.834-2.734-.005-.057-.019-.954-.036-2.267.681.417 1.321.848 1.591.749.353-.13.651-.311.698-.83.021-.233.104-.533.189-.808.004 2.627.008 4.765.016 4.786.059.17.279.453 1.079-.004 1.068-.609 6.776-3.427 7.724-3.919s2.393-1.096 3.838-1.7 4.095-1.579 5.943-2.044.633-1.452 1.379-2.014c.276-.208.779-.537 1.336-.883v1.754s5.245-1.214 6.241-1.436c.997-.224 1.783-.298 3.542-.731 1.759-.432 2.024-.53 4.715-1.018 2.691-.489 6.764-.625 8.572-.789 1.808-.163 8.349-.204 8.349-.204s2.403.264 2.065-.042c-.103-.093-.143-1.469-.148-3.328.078-.025.2-.062.24-.077.353-.13 1.807-.952 1.807-.952l-1.635 2.682s1.046.834 2.042.612c.867-.194 1.095-.516 2.452-.726l.048 1.528s-1.462.251.049.269 3.254.022 3.954-.02c.699-.042 2.121.008 3.745.128 1.623.12 9.91 1.66 12.107 3.649s1.811 2.203 1.811 2.203l6.802-2.504s12.695-10.556 14.348-12.097 3.965-2.823 4.752-2.898c.787-.074.666-.747.167-1.424s2.307-4.437 2.604-4.618 3.611-2.692 6.585-2.926c2.972-.234 9.031-.599 16.031.339 7 .939 10.788 3.131 11.784 2.907.996-.223 7.589 2.372 8.827 2.705s10.39.407 11.99 1.181c1.601.774 7.035 2.432 8.224 2.497 1.189.064 7.18-2.5 8.619-2.097 1.439.402 2.011 1.483 3.764 2.058 1.753.574 6.762 2.747 8.33 3.605s7.759 3.313 10.345 7.455c2.586 4.141 4.121 9.244 4.765 9.939.644.696 2.884 4.749 3.979 5.853 1.094 1.103 2.681 3.102 5.694 3.356 3.014.254 6.96 1.239 7.425.423.172-.304.236-2.422.247-4.962.477.148.986.227 1.553.067 1.703-.483.319-1.625.688-2.191.278-.427 1.249-.291 1.999.065-.002.01-1.01 5.073-1.027 5.316-.063.909.584 3.557.584 3.557s.509 2.027.454 2.446c-.119.905.364 1.229 2.751 1.928 2.388.699 10.694 4.17 15.067 5.429s8.207 2.144 9.783 2.783 10.827 2.04 8.783-.148c-2.045-2.189-3.106-2.587-2.134-2.945s.297-.181 2.227.328c1.929.51 1.394 2.5 2.609 3.487 1.215.988 3.855 3.603 4.965 4.27s3.138 2.503 4.311 2.215c1.172-.288 2.433-1.398 4.715-1.019 2.283.379 3.939 1.204 6.497 2.846 2.558 1.641 6.467 3.717 8.42 4.36 1.954.644 8.918 4.25 9.472 4.189s1.491-1.912 3.581-1.82c2.089.091 7.745-.413 9.337-.21 1.591.204 6.108.693 7.861 1.267 1.752.575 4.092 1.005 6.368 2.391s6.596 4.172 7.207 4.951c.612.779 2.488 2.815 4.344 2.92 1.857.106 7.809-1.368 8.16-2.287.352-.919 2.664-2.2 3.813-2.623s6.12-2.109 6.978-3.357c.857-1.248 3.683-3.078 3.505-3.801-.13-.529.438-1.506.415-2.345-.008-.309.001-11.734.001-11.734s-6.84 5.957-6.784 5.388z",fill:"#639536"}),b.jsx("path",{d:"m446.814 293.269c-.138-.187-.246-.369-.334-.547-.362-.743-.325-1.403-.27-1.972-1.02.753-2.198 1.451-3.799 2.04 1.302-1.255-.872-2.007-2.091-3.11-.609-.552-2.257 1.607-3.476.503-.526-2.911 4.169-2.31 2.424-6.324-.98-.888 1.077-1.387 2.914-1.915-.632-1.905-2.271-5.142-4.944-7.246-2.856-2.248-3.402-4.205-6.309-6.612-2.906-2.407-9.911-11.449-32.88-19.422-22.97-7.972-27.636-11.634-28.763-12.654s-10.782-4.137-13.661-5.731-14.55-8.561-21.063-11.759c-6.514-3.197-23.582-8.751-26.342-11.25s-19.285-10.261-23.5-13.516c-4.216-3.254-9.694-6.977-9.694-6.977-.957-.867-5.031-.73-7.562-.659s-6.651 1.516-8.892 1.624-6.684.811-7.536 1.053c-.851.241-1.147 1.211-.68 1.972.467.76 2.142 2.726 3.646 3.751s4.132 2.855 4.412 4.115c.281 1.26 1.077 1.756-.015 2.23-1.093.473-3.823 1.264-4.329 1.594-.505.33-2.446-2.327-4.336-3.139-1.89-.811-1.553-1.293-2.196-1.2s-93.846 29.67-93.846 29.67-4.596.114-5.247-.364c-.652-.478-1.65-1.832-3.371-2.489-1.72-.658-3.122-1.589-3.948-1.775-.827-.186-89.927 33.106-89.927 33.106s1.577 1.428 1.449 1.762.445 2.204.759 2.375c.314.172 2.861.454 3.497.578.634.125 3.046.958 3.802.968.755.009 2.194.412 3.271.374s2.434-.609 3.335.207 1.209 2.783 1.572 3.224c.362.441.459.978 2.259 1.033s3.8-.61 3.488.008c-.312.617-1.782 1.086-1.741 1.573s1.787 2.068 1.635 2.268c-.152.199-1.582.367-1.855.683-.272.316-.971 1.146-.271 1.104.699-.042 3.309-.716 3.71-1.366.4-.65 4.012-3.342 3.77-3.899s1.539-2.432.525-3.35-2.975-1.344-2.494-1.808 1.244-.674 2.129-.21 1.875 1.247 2.228 1.117.651-.311.698-.831c.029-.316.17-.777.276-1.092.208-.004.506-.025.928-.069 2.45-.257 3.205-.248 3.431-.044.225.204.733.662-.817 1.735-1.549 1.073-2.03 1.537-2.36 1.802-.329.265-1.275 1.545-1.275 1.545s.033.706 1.101.097c1.068-.608 6.776-3.427 7.724-3.919s2.393-1.096 3.838-1.7 4.096-1.58 5.943-2.044c1.848-.465.632-1.452 1.379-2.014.746-.562 2.946-1.945 4.271-2.433s5.919-2.179 5.919-2.179 2.418-.173 1.648.254-2.994 1.676-3.645 1.987c-.65.311-1.823.599-3.156 1.305s-3.701 1.937-3.701 1.937 5.245-1.214 6.241-1.437 1.783-.298 3.542-.73 2.024-.53 4.715-1.018c2.691-.489 6.764-.625 8.573-.789 1.807-.163 8.348-.204 8.348-.204s2.403.263 2.065-.043-1.046-.835-1.729-1.229c-.684-.394-2.83-.537-2.83-.537s-.347-.877-.081-.974c.265-.098 1.567.069 1.945.073s2.434-.609 2.787-.739 1.807-.952 1.807-.952l-1.635 2.682s1.046.834 2.042.611 1.05-.624 3.072-.819c2.021-.195 3.547-.613 3.804-.493.257.121-4.376 2.113-4.376 2.113s-1.462.251.049.269c1.511.017 3.254.021 3.954-.021.699-.042 2.121.008 3.745.128 1.623.12 9.91 1.66 12.107 3.649s1.811 2.203 1.811 2.203l6.802-2.505s12.695-10.556 14.348-12.097 3.965-2.823 4.753-2.898c.787-.075.666-.747.167-1.424s2.307-4.437 2.604-4.618 3.612-2.692 6.584-2.926 9.031-.599 16.031.339 10.788 3.131 11.784 2.908 7.589 2.371 8.827 2.704c1.238.334 10.39.407 11.991 1.181 1.6.774 7.035 2.432 8.224 2.496 1.189.065 7.18-2.499 8.619-2.097 1.439.403 2.011 1.484 3.764 2.058s6.762 2.747 8.33 3.605 7.759 3.313 10.345 7.454c2.586 4.142 4.121 9.244 4.765 9.94.644.695 2.884 4.749 3.979 5.852 1.095 1.104 2.681 3.103 5.694 3.356 3.014.253 6.96 1.239 7.425.423s.623-2.812-.72-3.465c-1.343-.654-5.031-.73-5.763-1.393s-2.244-1.47-.951-1.874 5.03-.058 5.593.452 1.939 1.868 3.642 1.385.319-1.624.688-2.19 1.952-.144 2.628.468-1.538 3.22-1.656 4.914 1.157 5.098 1.038 6.003c-.119.904.364 1.229 2.751 1.928 2.388.699 10.694 4.169 15.067 5.429s8.207 2.144 9.783 2.783 10.827 2.04 8.782-.148c-2.044-2.189-3.105-2.587-2.134-2.945.972-.358.297-.181 2.227.328 1.929.509 1.394 2.5 2.609 3.487 1.215.988 3.855 3.603 4.965 4.271 1.11.667 3.138 2.503 4.311 2.215 1.172-.288 2.433-1.398 4.715-1.019 2.283.379 3.939 1.204 6.497 2.845s6.467 3.717 8.42 4.361c1.954.644 8.918 4.249 9.472 4.189.554-.061 1.491-1.912 3.581-1.821 2.089.092 7.745-.412 9.337-.209 1.591.203 6.108.693 7.861 1.267s4.092 1.005 6.368 2.391 6.595 4.171 7.207 4.951c.612.779 2.488 2.815 4.344 2.921s7.808-1.368 8.16-2.287 2.664-2.2 3.813-2.623c1.148-.423 6.12-2.109 6.977-3.358.858-1.249 3.683-3.078 3.505-3.802-.178-.723.953-2.288.084-3.187-.875-.896-4.6-4.043-5.848-5.736z",fill:"#a0c685"}),b.jsx("path",{d:"m446.076 288.333c-.248-1.103-.756-2.186-1.076-2.476-.164-.148-.54-.418-.975-.796-.735-.637-1.641-1.584-1.987-2.784-.035-.123-.076-.254-.122-.392-1.923.553-4.076 1.076-3.05 2.005 1.826 4.201-4.5 4.007-3.949 7.053 1.275 1.155 4.412-1.538 5.05-.96 1.276 1.155 3.552 1.942 2.189 3.256 1.677-.617 2.909-1.348 3.977-2.135.055-.552.126-1.023-.105-1.401-.145-.239.139-.964.048-1.37z",fill:"#36a238"}),b.jsxs("g",{children:[b.jsx("path",{d:"m440.574 286.504c-.104.311-.004.691.326 1.065.66.751 1.991 1.201 2.971 1.004.49-.098.8-.339.905-.65l11.34-33.261-4.202-1.419z",fill:"url(#SVGID_1_)"}),b.jsx("path",{d:"m452.019 252.527c-1.232.247-1.558 1.212-.728 2.156.83.943 2.501 1.508 3.734 1.261 1.232-.247 1.557-1.213.728-2.156-.83-.943-2.502-1.508-3.734-1.261z",fill:"#71c6d9"})]}),b.jsx("circle",{cx:"453.37",cy:"255.461",fill:"#f00",r:"7.429"})]})]}),W6=e=>b.jsxs("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:[b.jsx("path",{d:"M21.2714 9.17834C20.9814 8.71834 20.6714 8.28834 20.3514 7.88834C19.9814 7.41834 19.2814 7.37834 18.8614 7.79834L15.8614 10.7983C16.0814 11.4583 16.1214 12.2183 15.9214 13.0083C15.5714 14.4183 14.4314 15.5583 13.0214 15.9083C12.2314 16.1083 11.4714 16.0683 10.8114 15.8483C10.8114 15.8483 9.38141 17.2783 8.35141 18.3083C7.85141 18.8083 8.01141 19.6883 8.68141 19.9483C9.75141 20.3583 10.8614 20.5683 12.0014 20.5683C13.7814 20.5683 15.5114 20.0483 17.0914 19.0783C18.7014 18.0783 20.1514 16.6083 21.3214 14.7383C22.2714 13.2283 22.2214 10.6883 21.2714 9.17834Z",fill:"currentColor"}),b.jsx("path",{d:"M14.0206 9.98062L9.98062 14.0206C9.47062 13.5006 9.14062 12.7806 9.14062 12.0006C9.14062 10.4306 10.4206 9.14062 12.0006 9.14062C12.7806 9.14062 13.5006 9.47062 14.0206 9.98062Z",fill:"currentColor"}),b.jsx("path",{d:"M18.25 5.74969L14.86 9.13969C14.13 8.39969 13.12 7.95969 12 7.95969C9.76 7.95969 7.96 9.76969 7.96 11.9997C7.96 13.1197 8.41 14.1297 9.14 14.8597L5.76 18.2497H5.75C4.64 17.3497 3.62 16.1997 2.75 14.8397C1.75 13.2697 1.75 10.7197 2.75 9.14969C3.91 7.32969 5.33 5.89969 6.91 4.91969C8.49 3.95969 10.22 3.42969 12 3.42969C14.23 3.42969 16.39 4.24969 18.25 5.74969Z",fill:"currentColor"}),b.jsx("path",{d:"M14.8581 11.9981C14.8581 13.5681 13.5781 14.8581 11.9981 14.8581C11.9381 14.8581 11.8881 14.8581 11.8281 14.8381L14.8381 11.8281C14.8581 11.8881 14.8581 11.9381 14.8581 11.9981Z",fill:"currentColor"}),b.jsx("path",{d:"M21.7689 2.22891C21.4689 1.92891 20.9789 1.92891 20.6789 2.22891L2.22891 20.6889C1.92891 20.9889 1.92891 21.4789 2.22891 21.7789C2.37891 21.9189 2.56891 21.9989 2.76891 21.9989C2.96891 21.9989 3.15891 21.9189 3.30891 21.7689L21.7689 3.30891C22.0789 3.00891 22.0789 2.52891 21.7689 2.22891Z",fill:"currentColor"})]}),K6=e=>b.jsxs("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:[b.jsx("path",{d:"M21.25 9.14969C18.94 5.51969 15.56 3.42969 12 3.42969C10.22 3.42969 8.49 3.94969 6.91 4.91969C5.33 5.89969 3.91 7.32969 2.75 9.14969C1.75 10.7197 1.75 13.2697 2.75 14.8397C5.06 18.4797 8.44 20.5597 12 20.5597C13.78 20.5597 15.51 20.0397 17.09 19.0697C18.67 18.0897 20.09 16.6597 21.25 14.8397C22.25 13.2797 22.25 10.7197 21.25 9.14969ZM12 16.0397C9.76 16.0397 7.96 14.2297 7.96 11.9997C7.96 9.76969 9.76 7.95969 12 7.95969C14.24 7.95969 16.04 9.76969 16.04 11.9997C16.04 14.2297 14.24 16.0397 12 16.0397Z",fill:"currentColor"}),b.jsx("path",{d:"M11.9984 9.14062C10.4284 9.14062 9.14844 10.4206 9.14844 12.0006C9.14844 13.5706 10.4284 14.8506 11.9984 14.8506C13.5684 14.8506 14.8584 13.5706 14.8584 12.0006C14.8584 10.4306 13.5684 9.14062 11.9984 9.14062Z",fill:"currentColor"})]}),Vre=()=>{const[e,t]=V.useState(""),[i,c]=V.useState(""),[h,_]=V.useState(!1),[w,n]=V.useState(null),[k,N]=V.useState([]),[B,F]=V.useState(!1),[G,Q]=V.useState(!1),[te,Y]=V.useState(!1),[oe,de]=V.useState(0),[ge,be]=V.useState(""),[pe,we]=V.useState(""),[ke,Ae]=V.useState(""),[re,Te]=V.useState(""),[se,ue]=V.useState(null),[De,ce]=V.useState(!1),[je,Le]=V.useState(""),[Re,Ge]=V.useState(!1),[ze,ot]=V.useState(!1),Ee=()=>{Ge(Xe=>!Xe)};V.useEffect(()=>{const Xe=Array.from({length:900},()=>({top:`${Math.random()*100}%`,left:`${Math.random()*100}%`}));N(Xe)},[]);const Ke=()=>{_(!0),fetch(ma+"/oauth2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":e},credentials:"include",body:JSON.stringify({grant_type:"password",username:e,password:i,scope:"internal",mfa_code:je})}).then(Xe=>Xe.json()).then(Xe=>{_(!1),Xe.success?(localStorage.setItem("X-GatorPool-Username",e),Xe.onboarding_redirect?Q(!0):F(!0)):Xe.error&&(Xe.error==="mfa_code_required"||Xe.error==="mfa_required"?ce(!0):n(Xe.error))}).catch(Xe=>{n("Invalid email or password")})},nt=()=>{fetch(ma+"/v1/account/auth/password/reset/request",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Username":ge,"X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")},body:JSON.stringify({})}).then(Xe=>Xe.json()).then(Xe=>{Xe.success?de(1):Xe.error&&Xe.error==="password reset request already exists"&&ue("A password reset request already exists. Please check your email.")})};return B?b.jsx(V4,{to:"/dashboard"}):G?b.jsx(V4,{to:"/auth/finish"}):b.jsxs("div",{className:"flex mobile:flex-col md:flex-row min-h-screen w-full light:bg-white dark:bg-black",children:[b.jsxs("div",{className:"relative flex flex-col py-10 mobile:px-12 xl:px-24 mobile:w-full md:w-1/2 border-r-1 light:border-neutral-400 dark:border-neutral-800 overflow-hidden",children:[b.jsx("div",{className:"inset-0 pointer-events-none mobile:hidden md:block md:absolute",children:k.map((Xe,ut)=>b.jsx(A8.div,{className:"absolute w-1 h-1 bg-neutral-600 dark:bg-neutral-400 opacity-20 rounded-full",style:{top:Xe.top,left:Xe.left},initial:{opacity:.1,scale:1},animate:{opacity:[.1,.3,.1],scale:[1,1.1,1]},transition:{duration:Math.random()*4+2,repeat:1/0,repeatType:"mirror",ease:"easeInOut"}},ut))}),b.jsxs("div",{className:"flex flex-row items-center z-10",children:[b.jsx("img",{src:d0,alt:"GatorPool Logo",className:"w-20"}),b.jsx("h1",{className:"text-xl text-black dark:text-white font-RobotoSemiBold text-left",children:"GatorPool"})]}),b.jsx("div",{className:"flex md:hidden lg:block mobile:hidden md:block mt-auto z-10",children:b.jsx(q6,{width:"400",height:"400"})}),b.jsx("div",{className:"flex lg:hidden mt-auto mobile:hidden md:block items-center z-10",children:b.jsx(q6,{width:"300",height:"400"})})]}),b.jsx("div",{className:"flex flex-col mobile:w-full md:w-1/2 md:py-10 mobile:px-12 xl:px-24",children:te&&oe===0?b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("p",{className:"text-lg text-black dark:text-white font-RobotoBold md:mt-24 mobile:mb-12 md:mb-0",children:"Reset your password"}),b.jsx(Za,{type:"email",label:"Email",placeholder:"Enter your email",value:ge,onChange:Xe=>be(Xe.target.value),className:"mobile:w-full desktop2:w-8/12 md:mt-16 text-black dark:text-white"}),b.jsx($r,{isLoading:h,className:"mobile:w-full mt-8 desktop2:w-8/12 mt-8 text-white",onPress:()=>{nt()},color:"secondary",children:"Send Code"}),se&&b.jsx("div",{className:"flex flex-col mt-2",children:b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:se})}),b.jsxs("div",{className:"flex flex-col mt-8",children:[b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Don't have an account?"}),b.jsx(pi,{to:"/auth/signup",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Sign up"})]}),b.jsx("div",{className:"flex flex-col mt-auto",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["By continuing, you agree to our ",b.jsx(pi,{to:"/terms",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Terms of Service"})," and ",b.jsx(pi,{to:"/privacy",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Privacy Policy"}),"."]})})]}):te&&oe===1?b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("p",{className:"text-lg text-black dark:text-white font-RobotoBold md:mt-24 mobile:mb-12 md:mb-0",children:"Reset your password"}),b.jsx(C6,{value:pe,onValueChange:we,className:"light dark:dark text-black dark:text-white",length:6}),b.jsx($r,{onPress:()=>{setTimeout(()=>{fetch(ma+"/v1/account/auth/password/reset/code",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Username":ge,"X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")},body:JSON.stringify({code:pe})}).then(Xe=>Xe.json()).then(Xe=>{Xe.success?(de(2),ue("")):Xe.error==="send_back_err"?(ue(""),ce(!1),Y(!1),de(0)):ue(Xe.error)})},300)},color:"primary",className:" text-white mx-auto font-PoppinsRegular w-full mt-6 py-2",size:"md",children:"Verify"}),se&&b.jsx("div",{className:"flex flex-col mt-2",children:b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:se})}),b.jsx("div",{className:"flex flex-col mt-auto",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["By continuing, you agree to our ",b.jsx(pi,{to:"/terms",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Terms of Service"})," and ",b.jsx(pi,{to:"/privacy",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Privacy Policy"}),"."]})})]}):te&&oe===2?b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("p",{className:"text-lg text-black dark:text-white font-RobotoBold md:mt-24 mobile:mb-12 md:mb-0",children:"Reset your password"}),b.jsx(Za,{className:"light dark:dark text-black mt-4 dark:text-white ",endContent:b.jsx("button",{"aria-label":"toggle password visibility",className:"focus:outline-none",type:"button",onClick:Ee,children:Re?b.jsx(W6,{className:"text-2xl text-default-400 pointer-events-none"}):b.jsx(K6,{className:"text-2xl text-default-400 pointer-events-none"})}),label:"Password",value:ke,onChange:Xe=>Ae(Xe.target.value),placeholder:"Enter your password",type:Re?"text":"password"}),b.jsx(Za,{className:"light dark:dark text-black mt-4 dark:text-white ",endContent:b.jsx("button",{"aria-label":"toggle password visibility",className:"focus:outline-none",type:"button",onClick:Ee,children:Re?b.jsx(W6,{className:"text-2xl text-default-400 pointer-events-none"}):b.jsx(K6,{className:"text-2xl text-default-400 pointer-events-none"})}),label:"Confirm Password",value:re,onChange:Xe=>Te(Xe.target.value),placeholder:"Confirm your new password",type:Re?"text":"password"}),b.jsx($r,{onPress:()=>{setTimeout(()=>{if(ke!==re){ue("Passwords do not match");return}fetch(ma+"/v1/account/auth/password/reset",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Username":ge,"X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")},body:JSON.stringify({code:pe,password:ke})}).then(Xe=>Xe.json()).then(Xe=>{Xe.success?(ue(""),Y(!1),de(0)):ue(Xe.error)})},300)},color:"primary",className:"text-white mx-auto font-PoppinsRegular w-full mt-6 py-2",size:"md",children:"Reset Password"}),se&&b.jsx("p",{className:"text-red-500 dark:text-red-500 text-sm mt-1 font-PoppinsRegular",children:se}),se&&b.jsx("div",{className:"flex flex-col mt-2",children:b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:se})}),b.jsx("div",{className:"flex flex-col mt-auto",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["By continuing, you agree to our ",b.jsx(pi,{to:"/tos",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Terms of Service"}),"."]})})]}):De?b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("p",{className:"text-lg text-black dark:text-white font-RobotoBold md:mt-24 mobile:mb-12 md:mb-0",children:"Enter the code sent to your email"}),b.jsx(C6,{value:je,onValueChange:Le,className:"light dark:dark text-black dark:text-white",length:6}),b.jsx($r,{isLoading:ze,onPress:()=>{setTimeout(()=>{ot(!0),fetch(ma+"/oauth2/token",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Username":e,"X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")},body:JSON.stringify({mfa_code:je,username:e,password:i,scope:"internal",grant_type:"password"})}).then(Xe=>Xe.json()).then(Xe=>{Xe.success?(localStorage.setItem("X-GatorPool-Username",e),ue(null),ot(!1),F(!0)):(ot(!1),Xe.error==="send_back_err"?(ue(""),ce(!1)):Xe.error==="mfa_attempts_exceeded"?ue("You have exceeded the maximum number of attempts. Please try again later."):Xe.error==="mfa_expired"?ue("The code has expired. Please try again."):Xe.error.includes("Invalid mfa code. You have")&&ue(Xe.error))})},300)},color:"primary",className:" text-white mx-auto font-PoppinsRegular w-full mt-6 py-2",size:"md",children:"Sign in"}),se&&b.jsx("p",{className:"text-red-500 dark:text-red-500 text-sm mt-1 font-PoppinsRegular",children:se}),b.jsx("div",{className:"flex flex-col mt-auto",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["By continuing, you agree to our ",b.jsx(pi,{to:"/tos",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Terms of Service"}),"."]})})]}):b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("p",{className:"text-lg text-black dark:text-white font-RobotoBold md:mt-24 mobile:mb-12 md:mb-0",children:"Log into GatorPool"}),b.jsx(Za,{type:"email",label:"Email",placeholder:"Enter your email",value:e,onChange:Xe=>t(Xe.target.value),className:"mobile:w-full desktop2:w-8/12 md:mt-16 text-black dark:text-white"}),b.jsx(Za,{type:"password",label:"Password",placeholder:"Enter your password",value:i,onChange:Xe=>c(Xe.target.value),className:"mobile:w-full desktop2:w-8/12 mt-8 text-black dark:text-white"}),b.jsx($r,{isLoading:h,className:"mobile:w-full mt-8 desktop2:w-8/12 mt-8 text-white",onPress:()=>{Ke()},color:"secondary",children:"Sign In"}),b.jsx("div",{className:"flex flex-col mt-2",children:b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:b.jsx("button",{onClick:()=>{Y(!0),de(0)},className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Forgot your password?"})})}),b.jsxs("div",{className:"flex flex-col mt-8",children:[b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Don't have an account?"}),b.jsx(pi,{to:"/auth/signup",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Sign up"})]}),b.jsx("div",{className:"flex flex-col mt-auto",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["By continuing, you agree to our ",b.jsx(pi,{to:"/tos",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Terms of Service"}),"."]})})]})})]})},Ure=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})}),Gre=()=>b.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),Hre=({updateAvatar:e,accountData:t,setAccountData:i})=>{const[c,h]=V.useState(null),_=n=>{var N;const k=(N=n.target.files)==null?void 0:N[0];k&&h(k)},w=()=>{if(c){const n=new FormData;n.append("files",c),n.append("type","profile_picture"),fetch(`${ma}/v1/account/idp/pfp`,{method:"POST",body:n,credentials:"include",headers:{"X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(k=>k.json()).then(k=>{k.success&&e(k.url)}).catch(k=>{console.error(k)})}};return b.jsx(b.Fragment,{children:b.jsxs("label",{className:"block mb-3 w-fit",children:[b.jsx("span",{className:"sr-only",children:"Choose picture"}),b.jsx("input",{type:"file",accept:"image/*",className:`className=block w-full text-sm text-slate-500 file:mr-4 file:py-1 file:px-2 file:rounded-full 
                    file:border-0 file:text-xs file:bg-gray-700 file:text-sky-300 hover:file:bg-gray-600`,onChange:_}),c&&b.jsx("button",{onClick:w,className:"bg-slate-800 hover:bg-slate-700 text-white rounded-full px-4 py-2",children:"Upload"})]})})},qre=({updateAvatar:e,closeModal:t,accountData:i,setAccountData:c})=>b.jsxs("div",{className:"relative z-40 ","aria-labelledby":"crop-image-dialog",role:"dialog","aria-modal":"true",children:[b.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-all backdrop-blur-sm"}),b.jsx("div",{className:"fixed inset-0 z-40 w-screen overflow-y-auto",children:b.jsx("div",{className:"flex min-h-full justify-center px-2 py-12 text-center ",children:b.jsx("div",{className:"relative w-[55%] sm:w-[40%] min-h-[60vh] rounded-2xl bg-gray-900 text-slate-100 text-left shadow-xl transition-all",children:b.jsxs("div",{className:"px-5 py-4",children:[b.jsxs("button",{type:"button",className:"rounded-md p-1 inline-flex items-center justify-center text-gray-400 hover:bg-gray-700 focus:outline-none absolute top-2 right-2",onClick:t,children:[b.jsx("span",{className:"sr-only",children:"Close menu"}),b.jsx(Gre,{})]}),b.jsx(Hre,{updateAvatar:e,accountData:i,setAccountData:c})]})})})})]}),Z6=({accountData:e,setAccountData:t})=>{const[i,c]=V.useState(""),[h,_]=V.useState(!1),w=n=>{t({...e,profile_picture:n})};return b.jsxs("div",{className:"flex bg-white dark:bg-[#0c0c0c] min-h-screen p-8 items- w-full",children:[b.jsxs("div",{className:"flex flex-col w-full ml-16",children:[b.jsx("h1",{className:"text-black dark:text-white text-l font-RobotoExtraBold text-2xl mt-20 mb-6",children:"Profile Details"}),b.jsxs("div",{className:"flex flex-row items-center mb-6",children:[b.jsxs("div",{className:"flex flex-col items-center",children:[b.jsx("img",{src:e.profile_picture,className:"w-[150px] h-[150px] rounded-full border-2 border-gray-400 mb-1"}),b.jsx("button",{className:`relative left-0 right-0 m-auto px-4 py-1 rounded-2xl
                        bg-gray-800 hover:bg-gray-700 border border-gray-600 text-white dark:text-black`,title:"Change photo",onClick:()=>_(!0),children:b.jsx(Ure,{})})]}),b.jsx("div",{className:"flex flex-col",children:b.jsxs("h1",{className:"text-black dark:text-white text-2xl font-RobotoSemiBold mr-4 ml-4",children:[e==null?void 0:e.first_name," ",e==null?void 0:e.last_name]})})]}),b.jsxs("div",{className:"flex flex-row w-full mb-6",children:[b.jsx(p4,{isReadOnly:!0,className:"max-w-xs text-black dark:text-white font-Roboto mr-6 w-full",defaultValue:`${e==null?void 0:e.first_name} ${e==null?void 0:e.last_name}`,label:"Name",labelPlacement:"outside",variant:"bordered",maxRows:1}),b.jsx(p4,{isReadOnly:!0,className:"max-w-xs text-black dark:text-white font-Roboto w-full",defaultValue:e.email,label:"UFL Email",labelPlacement:"outside",variant:"bordered",maxRows:1})]}),b.jsx("div",{className:"flex flex-row",children:b.jsx(Za,{className:"max-w-xs text-black dark:text-white font-Roboto mr-6 w-full mb-6",placeholder:e==null?void 0:e.first_name,label:"Preferred Name",labelPlacement:"outside",variant:"bordered"})}),b.jsx(p4,{onChange:n=>c(n.target.value),value:i,className:"max-w-lg w-full",label:"Edit your bio:",errorMessage:"The description should not be more than 500 characters long.",isInvalid:!1,labelPlacement:"outside",placeholder:"Tell others about yourself..."})]}),h&&b.jsx(qre,{updateAvatar:w,closeModal:()=>_(!1),accountData:e,setAccountData:t})]})},xo=[];for(let e=0;e<256;++e)xo.push((e+256).toString(16).slice(1));function Wre(e,t=0){return(xo[e[t+0]]+xo[e[t+1]]+xo[e[t+2]]+xo[e[t+3]]+"-"+xo[e[t+4]]+xo[e[t+5]]+"-"+xo[e[t+6]]+xo[e[t+7]]+"-"+xo[e[t+8]]+xo[e[t+9]]+"-"+xo[e[t+10]]+xo[e[t+11]]+xo[e[t+12]]+xo[e[t+13]]+xo[e[t+14]]+xo[e[t+15]]).toLowerCase()}let k4;const Kre=new Uint8Array(16);function Zre(){if(!k4){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");k4=crypto.getRandomValues.bind(crypto)}return k4(Kre)}const Xre=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),X6={randomUUID:Xre};function Y6(e,t,i){var h;if(X6.randomUUID&&!e)return X6.randomUUID();e=e||{};const c=e.random??((h=e.rng)==null?void 0:h.call(e))??Zre();if(c.length<16)throw new Error("Random bytes length must be >= 16");return c[6]=c[6]&15|64,c[8]=c[8]&63|128,Wre(c)}const Yre=()=>{let e="",t="",i=new URLSearchParams(window.location.search),c=i.get("id"),h=i.get("signature");e=c,t=h;const[_,w]=V.useState(null),[n,k]=V.useState(!1);return V.useEffect(()=>{fetch(ma+"/v1/account/auth/verify?id="+e+"&signature="+t,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")}}).then(async N=>{k(!0),N.status===200?w("verified"):w("unverified")})},[n]),b.jsx("div",{className:"flex flex-col bg-white dark:bg-black w-full h-screen justify-center items-center",children:_?b.jsx("div",{className:"flex flex-col items-center",children:_==="verified"?b.jsxs("div",{className:"flex flex-col items-center rounded-xl p-9",children:[b.jsx("img",{src:d0,alt:"logo",className:"w-24 h-24"}),b.jsx("h1",{className:"font-RobotoBold text-xl mt-4 text-green-500",children:"Verification successful"}),b.jsx("p",{className:"font-RobotoRegular text-center text-black dark:text-white mt-4",children:"Your account has been verified. You can now login."}),b.jsx($r,{color:"primary",className:"dark text-black dark:text-white mx-auto font-RobotoRegular w-full mt-6 py-2",size:"lg",onPress:()=>{window.location.href="/auth/signin"},children:"Login"})]}):b.jsxs("div",{className:"flex flex-col items-center rounded-xl p-9",children:[b.jsx("img",{src:require("../../assets/images/logo.png"),alt:"logo",className:"w-24 h-24"}),b.jsx("h1",{className:"font-RobotoBold text-xl mt4 text-red-500",children:"Verification failed"}),b.jsx($r,{color:"default",className:"dark text-black dark:text-white mx-auto font-RobotoRegular w-full mt-6 py-2",size:"lg",variant:"bordered",onPress:()=>{window.location.href="/auth/signin"},children:"Back to Login"})]})}):b.jsxs("div",{className:"flex flex-col items-center rounded-xl p-9",children:[b.jsx(i2,{"aria-label":"Loading...",size:"lg"}),b.jsx("h1",{className:"font-RobotoBold text-xl mt-4 text-black dark:text-white",children:"Verifying your account..."})]})})},Jre=()=>{const[e,t]=V.useState(""),[i,c]=V.useState(""),[h,_]=V.useState(""),[w,n]=V.useState(""),[k,N]=V.useState(!1),[B,F]=V.useState(null);V.useEffect(()=>{fetch(ma+"/v1/auth/verify",{method:"POST",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},credentials:"include",body:JSON.stringify({})}).then(Q=>Q.json()).then(Q=>{Q.success||(window.location.href="/auth/signin")}).catch(Q=>{window.location.href="/auth/signin"})},[]);const G=()=>{N(!0),fetch(ma+"/v1/account/auth/finish",{method:"POST",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},credentials:"include",body:JSON.stringify({first_name:e,last_name:i,ufid:h,gender:w})}).then(Q=>Q.json()).then(Q=>{N(!1),Q.success?window.location.href="/dashboard":F(Q.error)}).catch(Q=>{F("An error occurred while saving your profile. Please try again later.")})};return b.jsxs("div",{className:"flex mobile:flex-col md:flex-row min-h-screen w-full light:bg-white dark:bg-black",children:[b.jsxs("div",{className:"flex flex-col py-10 mobile:px-12 xl:px-24 mobile:w-full md:w-1/2 border-r-1 light:border-neutral-400 dark:border-neutral-800",children:[b.jsxs("div",{className:"flex flex-row items-center ",children:[b.jsx("img",{src:d0,alt:"GatorPool Logo",className:"w-20"}),b.jsx("h1",{className:"text-xl text-black dark:text-white font-RobotoSemiBold text-left",children:"GatorPool"})]}),b.jsx("h1",{className:"text-7xl mt-24 text-black dark:text-white font-RobotoRegular text-left",children:"Finish your profile"}),b.jsx("p",{className:"text-md mt-12 text-black dark:text-white font-RobotoRegular text-left",children:"We'll need your full name as it appears on your government ID, your UFID, and gender."}),b.jsx("div",{className:"flex lg:hidden mt-auto mobile:hidden md:block  items-center",children:b.jsx(Aw,{width:"300",height:"400"})}),b.jsx("div",{className:"flex md:hidden lg:block mt-auto mobile:hidden md:block  items-center",children:b.jsx(Aw,{width:"500",height:"400"})})]}),b.jsx("div",{className:"flex flex-col mobile:w-full md:w-1/2 md:py-10 mobile:px-12 xl:px-24",children:b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("p",{className:"text-lg mobile:hidden md:block  text-black dark:text-white font-RobotoBold mt-24",children:"Enter some more details to finish your profile."}),b.jsxs("div",{className:"flex flex-col md:mt-16 mobile:space-y-4 items-center md:space-y-0 md:flex-row md:space-x-4 lg:space-x-8",children:[b.jsx(Za,{type:"text",label:"First Name",placeholder:"Enter your first name",value:e,onChange:Q=>t(Q.target.value),className:"mobile:w-full desktop2:w-8/12 text-black dark:text-white"}),b.jsx(Za,{type:"text",label:"Last Name",placeholder:"Enter your last name",value:i,onChange:Q=>c(Q.target.value),className:"mobile:w-full desktop2:w-8/12 text-black dark:text-white"})]}),b.jsx(Za,{type:"text",label:"UFID",placeholder:"Enter your UFID",value:h,onChange:Q=>_(Q.target.value),className:"mobile:w-full mt-8 desktop2:w-8/12 text-black dark:text-white"}),b.jsx("p",{className:"text-sm mt-1 ml-2 text-black dark:text-white font-RobotoRegular text-left",children:"We require your UFID for safety purposes and regulation."}),b.jsxs(TT,{children:[b.jsx(ST,{children:b.jsx($r,{variant:"bordered",className:"w-44 mt-8",children:w===""?"Select Gender":w.charAt(0).toUpperCase()+w.slice(1)})}),b.jsxs(wT,{className:"",color:"primary","aria-label":"Action event example",onAction:Q=>{n(Q)},children:[b.jsx(_m,{className:"dark",children:"Male"},"male"),b.jsx(_m,{children:"Female"},"female")]})]}),b.jsx("p",{className:"text-sm mt-1 ml-2 text-black dark:text-white font-RobotoRegular text-left",children:"Gender is required for safety purposes and regulation."}),b.jsx($r,{isLoading:k,className:"mobile:w-full mt-8 desktop2:w-8/12 mt-8 text-white",onPress:()=>{G()},color:"secondary",children:"Save Profile"}),B?b.jsxs("div",{className:"flex flex-row items-center mt-4",children:[b.jsx(_u,{size:24,className:"text-red-500"}),b.jsx("p",{className:"text-sm ml-2 text-red-500 font-RobotoRegular",children:B})]}):null]})})]})};function hl({children:e}){const[t,i]=V.useState(null),c=localStorage.getItem("X-GatorPool-Device-Id"),h=localStorage.getItem("X-GatorPool-Username");return V.useEffect(()=>{async function _(){try{const n=await(await fetch(ma+"/v1/auth/verify",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":c,"X-GatorPool-Username":h}})).json();n.success&&n.message!=="account_not_complete"||(await(await fetch(ma+"/oauth2/token",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":c,"X-GatorPool-Username":h},body:JSON.stringify({username:h,grant_type:"refresh",scope:"internal"})})).json()).success?i(!0):i(!1)}catch(w){console.error("Token verification failed:",w),i(!1)}}_()},[c,h]),t===null?b.jsx("div",{className:"flex flex-col h-screen bg-white dark:bg-black w-full items-center justify-center",children:b.jsx("img",{src:d0,alt:"GatorPool",className:"w-32 h-32"})}):t?e:b.jsx(V4,{to:"/auth/signin"})}var R4={exports:{}},ii={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J6;function Qre(){if(J6)return ii;J6=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),w=Symbol.for("react.context"),n=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),Q=Symbol.for("react.client.reference");function te(Y){if(typeof Y=="object"&&Y!==null){var oe=Y.$$typeof;switch(oe){case e:switch(Y=Y.type,Y){case i:case h:case c:case k:case N:return Y;default:switch(Y=Y&&Y.$$typeof,Y){case w:case n:case F:case B:return Y;case _:return Y;default:return oe}}case t:return oe}}}return ii.ContextConsumer=_,ii.ContextProvider=w,ii.Element=e,ii.ForwardRef=n,ii.Fragment=i,ii.Lazy=F,ii.Memo=B,ii.Portal=t,ii.Profiler=h,ii.StrictMode=c,ii.Suspense=k,ii.SuspenseList=N,ii.isContextConsumer=function(Y){return te(Y)===_},ii.isContextProvider=function(Y){return te(Y)===w},ii.isElement=function(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===e},ii.isForwardRef=function(Y){return te(Y)===n},ii.isFragment=function(Y){return te(Y)===i},ii.isLazy=function(Y){return te(Y)===F},ii.isMemo=function(Y){return te(Y)===B},ii.isPortal=function(Y){return te(Y)===t},ii.isProfiler=function(Y){return te(Y)===h},ii.isStrictMode=function(Y){return te(Y)===c},ii.isSuspense=function(Y){return te(Y)===k},ii.isSuspenseList=function(Y){return te(Y)===N},ii.isValidElementType=function(Y){return typeof Y=="string"||typeof Y=="function"||Y===i||Y===h||Y===c||Y===k||Y===N||Y===G||typeof Y=="object"&&Y!==null&&(Y.$$typeof===F||Y.$$typeof===B||Y.$$typeof===w||Y.$$typeof===_||Y.$$typeof===n||Y.$$typeof===Q||Y.getModuleId!==void 0)},ii.typeOf=te,ii}var Q6;function eae(){return Q6||(Q6=1,R4.exports=Qre()),R4.exports}var uj=eae();function Mf(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function dj(e){if(V.isValidElement(e)||uj.isValidElementType(e)||!Mf(e))return e;const t={};return Object.keys(e).forEach(i=>{t[i]=dj(e[i])}),t}function Pc(e,t,i={clone:!0}){const c=i.clone?{...e}:e;return Mf(e)&&Mf(t)&&Object.keys(t).forEach(h=>{V.isValidElement(t[h])||uj.isValidElementType(t[h])?c[h]=t[h]:Mf(t[h])&&Object.prototype.hasOwnProperty.call(e,h)&&Mf(e[h])?c[h]=Pc(e[h],t[h],i):i.clone?c[h]=Mf(t[h])?dj(t[h]):t[h]:c[h]=t[h]}),c}function i0(e,...t){const i=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(c=>i.searchParams.append("args[]",c)),`Minified MUI error #${e}; visit ${i} for the full message.`}function sx(e){if(typeof e!="string")throw new Error(i0(7));return e.charAt(0).toUpperCase()+e.slice(1)}function ZS(e,t){const i={...t};for(const c in e)if(Object.prototype.hasOwnProperty.call(e,c)){const h=c;if(h==="components"||h==="slots")i[h]={...e[h],...i[h]};else if(h==="componentsProps"||h==="slotProps"){const _=e[h],w=t[h];if(!w)i[h]=_||{};else if(!_)i[h]=w;else{i[h]={...w};for(const n in _)if(Object.prototype.hasOwnProperty.call(_,n)){const k=n;i[h][k]=ZS(_[k],w[k])}}}else i[h]===void 0&&(i[h]=e[h])}return i}function tae(e,t,i=void 0){const c={};for(const h in e){const _=e[h];let w="",n=!0;for(let k=0;k<_.length;k+=1){const N=_[k];N&&(w+=(n===!0?"":" ")+t(N),n=!1,i&&i[N]&&(w+=" "+i[N]))}c[h]=w}return c}const eA=e=>e,rae=()=>{let e=eA;return{configure(t){e=t},generate(t){return e(t)},reset(){e=eA}}},aae=rae(),nae={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function hj(e,t,i="Mui"){const c=nae[t];return c?`${i}-${c}`:`${aae.generate(e)}-${t}`}function iae(e,t,i="Mui"){const c={};return t.forEach(h=>{c[h]=hj(e,h,i)}),c}function sae(e,t=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,i))}function fj(e){var t,i,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(t=0;t<h;t++)e[t]&&(i=fj(e[t]))&&(c&&(c+=" "),c+=i)}else for(i in e)e[i]&&(c&&(c+=" "),c+=i);return c}function oae(){for(var e,t,i=0,c="",h=arguments.length;i<h;i++)(e=arguments[i])&&(t=fj(e))&&(c&&(c+=" "),c+=t);return c}function e_(e,t){return t?Pc(e,t,{clone:!1}):e}function lae(e,t){if(!e.containerQueries)return t;const i=Object.keys(t).filter(c=>c.startsWith("@container")).sort((c,h)=>{var w,n;const _=/min-width:\s*([0-9.]+)/;return+(((w=c.match(_))==null?void 0:w[1])||0)-+(((n=h.match(_))==null?void 0:n[1])||0)});return i.length?i.reduce((c,h)=>{const _=t[h];return delete c[h],c[h]=_,c},{...t}):t}function cae(e,t){return t==="@"||t.startsWith("@")&&(e.some(i=>t.startsWith(`@${i}`))||!!t.match(/^@\d/))}function uae(e,t){const i=t.match(/^@([^/]+)?\/?(.+)?$/);if(!i)return null;const[,c,h]=i,_=Number.isNaN(+c)?c||0:+c;return e.containerQueries(h).up(_)}function dae(e){const t=(_,w)=>_.replace("@media",w?`@container ${w}`:"@container");function i(_,w){_.up=(...n)=>t(e.breakpoints.up(...n),w),_.down=(...n)=>t(e.breakpoints.down(...n),w),_.between=(...n)=>t(e.breakpoints.between(...n),w),_.only=(...n)=>t(e.breakpoints.only(...n),w),_.not=(...n)=>{const k=t(e.breakpoints.not(...n),w);return k.includes("not all and")?k.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):k}}const c={},h=_=>(i(c,_),c);return i(h),{...e,containerQueries:h}}const h2={xs:0,sm:600,md:900,lg:1200,xl:1536},tA={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${h2[e]}px)`},hae={containerQueries:e=>({up:t=>{let i=typeof t=="number"?t:h2[t]||t;return typeof i=="number"&&(i=`${i}px`),e?`@container ${e} (min-width:${i})`:`@container (min-width:${i})`}})};function Nf(e,t,i){const c=e.theme||{};if(Array.isArray(t)){const _=c.breakpoints||tA;return t.reduce((w,n,k)=>(w[_.up(_.keys[k])]=i(t[k]),w),{})}if(typeof t=="object"){const _=c.breakpoints||tA;return Object.keys(t).reduce((w,n)=>{if(cae(_.keys,n)){const k=uae(c.containerQueries?c:hae,n);k&&(w[k]=i(t[n],n))}else if(Object.keys(_.values||h2).includes(n)){const k=_.up(n);w[k]=i(t[n],n)}else{const k=n;w[k]=t[k]}return w},{})}return i(t)}function fae(e={}){var i;return((i=e.keys)==null?void 0:i.reduce((c,h)=>{const _=e.up(h);return c[_]={},c},{}))||{}}function pae(e,t){return e.reduce((i,c)=>{const h=i[c];return(!h||Object.keys(h).length===0)&&delete i[c],i},t)}function f2(e,t,i=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&i){const c=`vars.${t}`.split(".").reduce((h,_)=>h&&h[_]?h[_]:null,e);if(c!=null)return c}return t.split(".").reduce((c,h)=>c&&c[h]!=null?c[h]:null,e)}function kw(e,t,i,c=i){let h;return typeof e=="function"?h=e(i):Array.isArray(e)?h=e[i]||c:h=f2(e,i)||c,t&&(h=t(h,c,e)),h}function vs(e){const{prop:t,cssProperty:i=e.prop,themeKey:c,transform:h}=e,_=w=>{if(w[t]==null)return null;const n=w[t],k=w.theme,N=f2(k,c)||{};return Nf(w,n,F=>{let G=kw(N,h,F);return F===G&&typeof F=="string"&&(G=kw(N,h,`${t}${F==="default"?"":sx(F)}`,F)),i===!1?G:{[i]:G}})};return _.propTypes={},_.filterProps=[t],_}function mae(e){const t={};return i=>(t[i]===void 0&&(t[i]=e(i)),t[i])}const gae={m:"margin",p:"padding"},yae={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},rA={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},xae=mae(e=>{if(e.length>2)if(rA[e])e=rA[e];else return[e];const[t,i]=e.split(""),c=gae[t],h=yae[i]||"";return Array.isArray(h)?h.map(_=>c+_):[c+h]}),kT=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],RT=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...kT,...RT];function O_(e,t,i,c){const h=f2(e,t,!0)??i;return typeof h=="number"||typeof h=="string"?_=>typeof _=="string"?_:typeof h=="string"?`calc(${_} * ${h})`:h*_:Array.isArray(h)?_=>{if(typeof _=="string")return _;const w=Math.abs(_),n=h[w];return _>=0?n:typeof n=="number"?-n:`-${n}`}:typeof h=="function"?h:()=>{}}function IT(e){return O_(e,"spacing",8)}function F_(e,t){return typeof t=="string"||t==null?t:e(t)}function vae(e,t){return i=>e.reduce((c,h)=>(c[h]=F_(t,i),c),{})}function _ae(e,t,i,c){if(!t.includes(i))return null;const h=xae(i),_=vae(h,c),w=e[i];return Nf(e,w,_)}function pj(e,t){const i=IT(e.theme);return Object.keys(e).map(c=>_ae(e,t,c,i)).reduce(e_,{})}function ts(e){return pj(e,kT)}ts.propTypes={};ts.filterProps=kT;function rs(e){return pj(e,RT)}rs.propTypes={};rs.filterProps=RT;function p2(...e){const t=e.reduce((c,h)=>(h.filterProps.forEach(_=>{c[_]=h}),c),{}),i=c=>Object.keys(c).reduce((h,_)=>t[_]?e_(h,t[_](c)):h,{});return i.propTypes={},i.filterProps=e.reduce((c,h)=>c.concat(h.filterProps),[]),i}function vu(e){return typeof e!="number"?e:`${e}px solid`}function Cu(e,t){return vs({prop:e,themeKey:"borders",transform:t})}const bae=Cu("border",vu),wae=Cu("borderTop",vu),Sae=Cu("borderRight",vu),Tae=Cu("borderBottom",vu),Eae=Cu("borderLeft",vu),Cae=Cu("borderColor"),Dae=Cu("borderTopColor"),Pae=Cu("borderRightColor"),Mae=Cu("borderBottomColor"),Aae=Cu("borderLeftColor"),kae=Cu("outline",vu),Rae=Cu("outlineColor"),m2=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=O_(e.theme,"shape.borderRadius",4),i=c=>({borderRadius:F_(t,c)});return Nf(e,e.borderRadius,i)}return null};m2.propTypes={};m2.filterProps=["borderRadius"];p2(bae,wae,Sae,Tae,Eae,Cae,Dae,Pae,Mae,Aae,m2,kae,Rae);const g2=e=>{if(e.gap!==void 0&&e.gap!==null){const t=O_(e.theme,"spacing",8),i=c=>({gap:F_(t,c)});return Nf(e,e.gap,i)}return null};g2.propTypes={};g2.filterProps=["gap"];const y2=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=O_(e.theme,"spacing",8),i=c=>({columnGap:F_(t,c)});return Nf(e,e.columnGap,i)}return null};y2.propTypes={};y2.filterProps=["columnGap"];const x2=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=O_(e.theme,"spacing",8),i=c=>({rowGap:F_(t,c)});return Nf(e,e.rowGap,i)}return null};x2.propTypes={};x2.filterProps=["rowGap"];const Iae=vs({prop:"gridColumn"}),zae=vs({prop:"gridRow"}),Lae=vs({prop:"gridAutoFlow"}),$ae=vs({prop:"gridAutoColumns"}),Nae=vs({prop:"gridAutoRows"}),Bae=vs({prop:"gridTemplateColumns"}),jae=vs({prop:"gridTemplateRows"}),Oae=vs({prop:"gridTemplateAreas"}),Fae=vs({prop:"gridArea"});p2(g2,y2,x2,Iae,zae,Lae,$ae,Nae,Bae,jae,Oae,Fae);function Ky(e,t){return t==="grey"?t:e}const Vae=vs({prop:"color",themeKey:"palette",transform:Ky}),Uae=vs({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Ky}),Gae=vs({prop:"backgroundColor",themeKey:"palette",transform:Ky});p2(Vae,Uae,Gae);function Cc(e){return e<=1&&e!==0?`${e*100}%`:e}const Hae=vs({prop:"width",transform:Cc}),zT=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=i=>{var h,_,w,n,k;const c=((w=(_=(h=e.theme)==null?void 0:h.breakpoints)==null?void 0:_.values)==null?void 0:w[i])||h2[i];return c?((k=(n=e.theme)==null?void 0:n.breakpoints)==null?void 0:k.unit)!=="px"?{maxWidth:`${c}${e.theme.breakpoints.unit}`}:{maxWidth:c}:{maxWidth:Cc(i)}};return Nf(e,e.maxWidth,t)}return null};zT.filterProps=["maxWidth"];const qae=vs({prop:"minWidth",transform:Cc}),Wae=vs({prop:"height",transform:Cc}),Kae=vs({prop:"maxHeight",transform:Cc}),Zae=vs({prop:"minHeight",transform:Cc});vs({prop:"size",cssProperty:"width",transform:Cc});vs({prop:"size",cssProperty:"height",transform:Cc});const Xae=vs({prop:"boxSizing"});p2(Hae,zT,qae,Wae,Kae,Zae,Xae);const v2={border:{themeKey:"borders",transform:vu},borderTop:{themeKey:"borders",transform:vu},borderRight:{themeKey:"borders",transform:vu},borderBottom:{themeKey:"borders",transform:vu},borderLeft:{themeKey:"borders",transform:vu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:vu},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:m2},color:{themeKey:"palette",transform:Ky},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Ky},backgroundColor:{themeKey:"palette",transform:Ky},p:{style:rs},pt:{style:rs},pr:{style:rs},pb:{style:rs},pl:{style:rs},px:{style:rs},py:{style:rs},padding:{style:rs},paddingTop:{style:rs},paddingRight:{style:rs},paddingBottom:{style:rs},paddingLeft:{style:rs},paddingX:{style:rs},paddingY:{style:rs},paddingInline:{style:rs},paddingInlineStart:{style:rs},paddingInlineEnd:{style:rs},paddingBlock:{style:rs},paddingBlockStart:{style:rs},paddingBlockEnd:{style:rs},m:{style:ts},mt:{style:ts},mr:{style:ts},mb:{style:ts},ml:{style:ts},mx:{style:ts},my:{style:ts},margin:{style:ts},marginTop:{style:ts},marginRight:{style:ts},marginBottom:{style:ts},marginLeft:{style:ts},marginX:{style:ts},marginY:{style:ts},marginInline:{style:ts},marginInlineStart:{style:ts},marginInlineEnd:{style:ts},marginBlock:{style:ts},marginBlockStart:{style:ts},marginBlockEnd:{style:ts},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:g2},rowGap:{style:x2},columnGap:{style:y2},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Cc},maxWidth:{style:zT},minWidth:{transform:Cc},height:{transform:Cc},maxHeight:{transform:Cc},minHeight:{transform:Cc},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Yae(...e){const t=e.reduce((c,h)=>c.concat(Object.keys(h)),[]),i=new Set(t);return e.every(c=>i.size===Object.keys(c).length)}function Jae(e,t){return typeof e=="function"?e(t):e}function Qae(){function e(i,c,h,_){const w={[i]:c,theme:h},n=_[i];if(!n)return{[i]:c};const{cssProperty:k=i,themeKey:N,transform:B,style:F}=n;if(c==null)return null;if(N==="typography"&&c==="inherit")return{[i]:c};const G=f2(h,N)||{};return F?F(w):Nf(w,c,te=>{let Y=kw(G,B,te);return te===Y&&typeof te=="string"&&(Y=kw(G,B,`${i}${te==="default"?"":sx(te)}`,te)),k===!1?Y:{[k]:Y}})}function t(i){const{sx:c,theme:h={}}=i||{};if(!c)return null;const _=h.unstable_sxConfig??v2;function w(n){let k=n;if(typeof n=="function")k=n(h);else if(typeof n!="object")return n;if(!k)return null;const N=fae(h.breakpoints),B=Object.keys(N);let F=N;return Object.keys(k).forEach(G=>{const Q=Jae(k[G],h);if(Q!=null)if(typeof Q=="object")if(_[G])F=e_(F,e(G,Q,h,_));else{const te=Nf({theme:h},Q,Y=>({[G]:Y}));Yae(te,Q)?F[G]=t({sx:Q,theme:h}):F=e_(F,te)}else F=e_(F,e(G,Q,h,_))}),lae(h,pae(B,F))}return Array.isArray(c)?c.map(w):w(c)}return t}const ox=Qae();ox.filterProps=["sx"];function ene(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function tne(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var rne=function(){function e(i){var c=this;this._insertTag=function(h){var _;c.tags.length===0?c.insertionPoint?_=c.insertionPoint.nextSibling:c.prepend?_=c.container.firstChild:_=c.before:_=c.tags[c.tags.length-1].nextSibling,c.container.insertBefore(h,_),c.tags.push(h)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(c){c.forEach(this._insertTag)},t.insert=function(c){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(tne(this));var h=this.tags[this.tags.length-1];if(this.isSpeedy){var _=ene(h);try{_.insertRule(c,_.cssRules.length)}catch{}}else h.appendChild(document.createTextNode(c));this.ctr++},t.flush=function(){this.tags.forEach(function(c){var h;return(h=c.parentNode)==null?void 0:h.removeChild(c)}),this.tags=[],this.ctr=0},e}(),Uo="-ms-",Rw="-moz-",Fn="-webkit-",mj="comm",LT="rule",$T="decl",ane="@import",gj="@keyframes",nne="@layer",ine=Math.abs,_2=String.fromCharCode,sne=Object.assign;function one(e,t){return _o(e,0)^45?(((t<<2^_o(e,0))<<2^_o(e,1))<<2^_o(e,2))<<2^_o(e,3):0}function yj(e){return e.trim()}function lne(e,t){return(e=t.exec(e))?e[0]:e}function Un(e,t,i){return e.replace(t,i)}function XS(e,t){return e.indexOf(t)}function _o(e,t){return e.charCodeAt(t)|0}function v_(e,t,i){return e.slice(t,i)}function ph(e){return e.length}function NT(e){return e.length}function z1(e,t){return t.push(e),e}function cne(e,t){return e.map(t).join("")}var b2=1,lx=1,xj=0,Ol=0,Ps=0,xx="";function w2(e,t,i,c,h,_,w){return{value:e,root:t,parent:i,type:c,props:h,children:_,line:b2,column:lx,length:w,return:""}}function zv(e,t){return sne(w2("",null,null,"",null,null,0),e,{length:-e.length},t)}function une(){return Ps}function dne(){return Ps=Ol>0?_o(xx,--Ol):0,lx--,Ps===10&&(lx=1,b2--),Ps}function Mc(){return Ps=Ol<xj?_o(xx,Ol++):0,lx++,Ps===10&&(lx=1,b2++),Ps}function _h(){return _o(xx,Ol)}function Z1(){return Ol}function V_(e,t){return v_(xx,e,t)}function __(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function vj(e){return b2=lx=1,xj=ph(xx=e),Ol=0,[]}function _j(e){return xx="",e}function X1(e){return yj(V_(Ol-1,YS(e===91?e+2:e===40?e+1:e)))}function hne(e){for(;(Ps=_h())&&Ps<33;)Mc();return __(e)>2||__(Ps)>3?"":" "}function fne(e,t){for(;--t&&Mc()&&!(Ps<48||Ps>102||Ps>57&&Ps<65||Ps>70&&Ps<97););return V_(e,Z1()+(t<6&&_h()==32&&Mc()==32))}function YS(e){for(;Mc();)switch(Ps){case e:return Ol;case 34:case 39:e!==34&&e!==39&&YS(Ps);break;case 40:e===41&&YS(e);break;case 92:Mc();break}return Ol}function pne(e,t){for(;Mc()&&e+Ps!==57;)if(e+Ps===84&&_h()===47)break;return"/*"+V_(t,Ol-1)+"*"+_2(e===47?e:Mc())}function mne(e){for(;!__(_h());)Mc();return V_(e,Ol)}function gne(e){return _j(Y1("",null,null,null,[""],e=vj(e),0,[0],e))}function Y1(e,t,i,c,h,_,w,n,k){for(var N=0,B=0,F=w,G=0,Q=0,te=0,Y=1,oe=1,de=1,ge=0,be="",pe=h,we=_,ke=c,Ae=be;oe;)switch(te=ge,ge=Mc()){case 40:if(te!=108&&_o(Ae,F-1)==58){XS(Ae+=Un(X1(ge),"&","&\f"),"&\f")!=-1&&(de=-1);break}case 34:case 39:case 91:Ae+=X1(ge);break;case 9:case 10:case 13:case 32:Ae+=hne(te);break;case 92:Ae+=fne(Z1()-1,7);continue;case 47:switch(_h()){case 42:case 47:z1(yne(pne(Mc(),Z1()),t,i),k);break;default:Ae+="/"}break;case 123*Y:n[N++]=ph(Ae)*de;case 125*Y:case 59:case 0:switch(ge){case 0:case 125:oe=0;case 59+B:de==-1&&(Ae=Un(Ae,/\f/g,"")),Q>0&&ph(Ae)-F&&z1(Q>32?nA(Ae+";",c,i,F-1):nA(Un(Ae," ","")+";",c,i,F-2),k);break;case 59:Ae+=";";default:if(z1(ke=aA(Ae,t,i,N,B,h,n,be,pe=[],we=[],F),_),ge===123)if(B===0)Y1(Ae,t,ke,ke,pe,_,F,n,we);else switch(G===99&&_o(Ae,3)===110?100:G){case 100:case 108:case 109:case 115:Y1(e,ke,ke,c&&z1(aA(e,ke,ke,0,0,h,n,be,h,pe=[],F),we),h,we,F,n,c?pe:we);break;default:Y1(Ae,ke,ke,ke,[""],we,0,n,we)}}N=B=Q=0,Y=de=1,be=Ae="",F=w;break;case 58:F=1+ph(Ae),Q=te;default:if(Y<1){if(ge==123)--Y;else if(ge==125&&Y++==0&&dne()==125)continue}switch(Ae+=_2(ge),ge*Y){case 38:de=B>0?1:(Ae+="\f",-1);break;case 44:n[N++]=(ph(Ae)-1)*de,de=1;break;case 64:_h()===45&&(Ae+=X1(Mc())),G=_h(),B=F=ph(be=Ae+=mne(Z1())),ge++;break;case 45:te===45&&ph(Ae)==2&&(Y=0)}}return _}function aA(e,t,i,c,h,_,w,n,k,N,B){for(var F=h-1,G=h===0?_:[""],Q=NT(G),te=0,Y=0,oe=0;te<c;++te)for(var de=0,ge=v_(e,F+1,F=ine(Y=w[te])),be=e;de<Q;++de)(be=yj(Y>0?G[de]+" "+ge:Un(ge,/&\f/g,G[de])))&&(k[oe++]=be);return w2(e,t,i,h===0?LT:n,k,N,B)}function yne(e,t,i){return w2(e,t,i,mj,_2(une()),v_(e,2,-2),0)}function nA(e,t,i,c){return w2(e,t,i,$T,v_(e,0,c),v_(e,c+1,-1),c)}function Zy(e,t){for(var i="",c=NT(e),h=0;h<c;h++)i+=t(e[h],h,e,t)||"";return i}function xne(e,t,i,c){switch(e.type){case nne:if(e.children.length)break;case ane:case $T:return e.return=e.return||e.value;case mj:return"";case gj:return e.return=e.value+"{"+Zy(e.children,c)+"}";case LT:e.value=e.props.join(",")}return ph(i=Zy(e.children,c))?e.return=e.value+"{"+i+"}":""}function vne(e){var t=NT(e);return function(i,c,h,_){for(var w="",n=0;n<t;n++)w+=e[n](i,c,h,_)||"";return w}}function _ne(e){return function(t){t.root||(t=t.return)&&e(t)}}function bj(e){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=e(i)),t[i]}}var bne=function(t,i,c){for(var h=0,_=0;h=_,_=_h(),h===38&&_===12&&(i[c]=1),!__(_);)Mc();return V_(t,Ol)},wne=function(t,i){var c=-1,h=44;do switch(__(h)){case 0:h===38&&_h()===12&&(i[c]=1),t[c]+=bne(Ol-1,i,c);break;case 2:t[c]+=X1(h);break;case 4:if(h===44){t[++c]=_h()===58?"&\f":"",i[c]=t[c].length;break}default:t[c]+=_2(h)}while(h=Mc());return t},Sne=function(t,i){return _j(wne(vj(t),i))},iA=new WeakMap,Tne=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,c=t.parent,h=t.column===c.column&&t.line===c.line;c.type!=="rule";)if(c=c.parent,!c)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!iA.get(c))&&!h){iA.set(t,!0);for(var _=[],w=Sne(i,_),n=c.props,k=0,N=0;k<w.length;k++)for(var B=0;B<n.length;B++,N++)t.props[N]=_[k]?w[k].replace(/&\f/g,n[B]):n[B]+" "+w[k]}}},Ene=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function wj(e,t){switch(one(e,t)){case 5103:return Fn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Fn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Fn+e+Rw+e+Uo+e+e;case 6828:case 4268:return Fn+e+Uo+e+e;case 6165:return Fn+e+Uo+"flex-"+e+e;case 5187:return Fn+e+Un(e,/(\w+).+(:[^]+)/,Fn+"box-$1$2"+Uo+"flex-$1$2")+e;case 5443:return Fn+e+Uo+"flex-item-"+Un(e,/flex-|-self/,"")+e;case 4675:return Fn+e+Uo+"flex-line-pack"+Un(e,/align-content|flex-|-self/,"")+e;case 5548:return Fn+e+Uo+Un(e,"shrink","negative")+e;case 5292:return Fn+e+Uo+Un(e,"basis","preferred-size")+e;case 6060:return Fn+"box-"+Un(e,"-grow","")+Fn+e+Uo+Un(e,"grow","positive")+e;case 4554:return Fn+Un(e,/([^-])(transform)/g,"$1"+Fn+"$2")+e;case 6187:return Un(Un(Un(e,/(zoom-|grab)/,Fn+"$1"),/(image-set)/,Fn+"$1"),e,"")+e;case 5495:case 3959:return Un(e,/(image-set\([^]*)/,Fn+"$1$`$1");case 4968:return Un(Un(e,/(.+:)(flex-)?(.*)/,Fn+"box-pack:$3"+Uo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Fn+e+e;case 4095:case 3583:case 4068:case 2532:return Un(e,/(.+)-inline(.+)/,Fn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ph(e)-1-t>6)switch(_o(e,t+1)){case 109:if(_o(e,t+4)!==45)break;case 102:return Un(e,/(.+:)(.+)-([^]+)/,"$1"+Fn+"$2-$3$1"+Rw+(_o(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~XS(e,"stretch")?wj(Un(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(_o(e,t+1)!==115)break;case 6444:switch(_o(e,ph(e)-3-(~XS(e,"!important")&&10))){case 107:return Un(e,":",":"+Fn)+e;case 101:return Un(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Fn+(_o(e,14)===45?"inline-":"")+"box$3$1"+Fn+"$2$3$1"+Uo+"$2box$3")+e}break;case 5936:switch(_o(e,t+11)){case 114:return Fn+e+Uo+Un(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Fn+e+Uo+Un(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Fn+e+Uo+Un(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Fn+e+Uo+e+e}return e}var Cne=function(t,i,c,h){if(t.length>-1&&!t.return)switch(t.type){case $T:t.return=wj(t.value,t.length);break;case gj:return Zy([zv(t,{value:Un(t.value,"@","@"+Fn)})],h);case LT:if(t.length)return cne(t.props,function(_){switch(lne(_,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Zy([zv(t,{props:[Un(_,/:(read-\w+)/,":"+Rw+"$1")]})],h);case"::placeholder":return Zy([zv(t,{props:[Un(_,/:(plac\w+)/,":"+Fn+"input-$1")]}),zv(t,{props:[Un(_,/:(plac\w+)/,":"+Rw+"$1")]}),zv(t,{props:[Un(_,/:(plac\w+)/,Uo+"input-$1")]})],h)}return""})}},Dne=[Cne],Pne=function(t){var i=t.key;if(i==="css"){var c=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(c,function(Y){var oe=Y.getAttribute("data-emotion");oe.indexOf(" ")!==-1&&(document.head.appendChild(Y),Y.setAttribute("data-s",""))})}var h=t.stylisPlugins||Dne,_={},w,n=[];w=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(Y){for(var oe=Y.getAttribute("data-emotion").split(" "),de=1;de<oe.length;de++)_[oe[de]]=!0;n.push(Y)});var k,N=[Tne,Ene];{var B,F=[xne,_ne(function(Y){B.insert(Y)})],G=vne(N.concat(h,F)),Q=function(oe){return Zy(gne(oe),G)};k=function(oe,de,ge,be){B=ge,Q(oe?oe+"{"+de.styles+"}":de.styles),be&&(te.inserted[de.name]=!0)}}var te={key:i,sheet:new rne({key:i,container:w,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:_,registered:{},insert:k};return te.sheet.hydrate(n),te},Mne=!0;function Ane(e,t,i){var c="";return i.split(" ").forEach(function(h){e[h]!==void 0?t.push(e[h]+";"):h&&(c+=h+" ")}),c}var Sj=function(t,i,c){var h=t.key+"-"+i.name;(c===!1||Mne===!1)&&t.registered[h]===void 0&&(t.registered[h]=i.styles)},kne=function(t,i,c){Sj(t,i,c);var h=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var _=i;do t.insert(i===_?"."+h:"",_,t.sheet,!0),_=_.next;while(_!==void 0)}};function Rne(e){for(var t=0,i,c=0,h=e.length;h>=4;++c,h-=4)i=e.charCodeAt(c)&255|(e.charCodeAt(++c)&255)<<8|(e.charCodeAt(++c)&255)<<16|(e.charCodeAt(++c)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(h){case 3:t^=(e.charCodeAt(c+2)&255)<<16;case 2:t^=(e.charCodeAt(c+1)&255)<<8;case 1:t^=e.charCodeAt(c)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Ine={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},zne=/[A-Z]|^ms/g,Lne=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Tj=function(t){return t.charCodeAt(1)===45},sA=function(t){return t!=null&&typeof t!="boolean"},I4=bj(function(e){return Tj(e)?e:e.replace(zne,"-$&").toLowerCase()}),oA=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace(Lne,function(c,h,_){return mh={name:h,styles:_,next:mh},h})}return Ine[t]!==1&&!Tj(t)&&typeof i=="number"&&i!==0?i+"px":i};function b_(e,t,i){if(i==null)return"";var c=i;if(c.__emotion_styles!==void 0)return c;switch(typeof i){case"boolean":return"";case"object":{var h=i;if(h.anim===1)return mh={name:h.name,styles:h.styles,next:mh},h.name;var _=i;if(_.styles!==void 0){var w=_.next;if(w!==void 0)for(;w!==void 0;)mh={name:w.name,styles:w.styles,next:mh},w=w.next;var n=_.styles+";";return n}return $ne(e,t,i)}case"function":{if(e!==void 0){var k=mh,N=i(e);return mh=k,b_(e,t,N)}break}}var B=i;if(t==null)return B;var F=t[B];return F!==void 0?F:B}function $ne(e,t,i){var c="";if(Array.isArray(i))for(var h=0;h<i.length;h++)c+=b_(e,t,i[h])+";";else for(var _ in i){var w=i[_];if(typeof w!="object"){var n=w;t!=null&&t[n]!==void 0?c+=_+"{"+t[n]+"}":sA(n)&&(c+=I4(_)+":"+oA(_,n)+";")}else if(Array.isArray(w)&&typeof w[0]=="string"&&(t==null||t[w[0]]===void 0))for(var k=0;k<w.length;k++)sA(w[k])&&(c+=I4(_)+":"+oA(_,w[k])+";");else{var N=b_(e,t,w);switch(_){case"animation":case"animationName":{c+=I4(_)+":"+N+";";break}default:c+=_+"{"+N+"}"}}}return c}var lA=/label:\s*([^\s;{]+)\s*(;|$)/g,mh;function Ej(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var c=!0,h="";mh=void 0;var _=e[0];if(_==null||_.raw===void 0)c=!1,h+=b_(i,t,_);else{var w=_;h+=w[0]}for(var n=1;n<e.length;n++)if(h+=b_(i,t,e[n]),c){var k=_;h+=k[n]}lA.lastIndex=0;for(var N="",B;(B=lA.exec(h))!==null;)N+="-"+B[1];var F=Rne(h)+N;return{name:F,styles:h,next:mh}}var Nne=function(t){return t()},Bne=O4.useInsertionEffect?O4.useInsertionEffect:!1,jne=Bne||Nne,Cj=V.createContext(typeof HTMLElement<"u"?Pne({key:"css"}):null);Cj.Provider;var One=function(t){return V.forwardRef(function(i,c){var h=V.useContext(Cj);return t(i,h,c)})},Fne=V.createContext({}),Vne=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Une=bj(function(e){return Vne.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Gne=Une,Hne=function(t){return t!=="theme"},cA=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Gne:Hne},uA=function(t,i,c){var h;if(i){var _=i.shouldForwardProp;h=t.__emotion_forwardProp&&_?function(w){return t.__emotion_forwardProp(w)&&_(w)}:_}return typeof h!="function"&&c&&(h=t.__emotion_forwardProp),h},qne=function(t){var i=t.cache,c=t.serialized,h=t.isStringTag;return Sj(i,c,h),jne(function(){return kne(i,c,h)}),null},Wne=function e(t,i){var c=t.__emotion_real===t,h=c&&t.__emotion_base||t,_,w;i!==void 0&&(_=i.label,w=i.target);var n=uA(t,i,c),k=n||cA(h),N=!k("as");return function(){var B=arguments,F=c&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(_!==void 0&&F.push("label:"+_+";"),B[0]==null||B[0].raw===void 0)F.push.apply(F,B);else{var G=B[0];F.push(G[0]);for(var Q=B.length,te=1;te<Q;te++)F.push(B[te],G[te])}var Y=One(function(oe,de,ge){var be=N&&oe.as||h,pe="",we=[],ke=oe;if(oe.theme==null){ke={};for(var Ae in oe)ke[Ae]=oe[Ae];ke.theme=V.useContext(Fne)}typeof oe.className=="string"?pe=Ane(de.registered,we,oe.className):oe.className!=null&&(pe=oe.className+" ");var re=Ej(F.concat(we),de.registered,ke);pe+=de.key+"-"+re.name,w!==void 0&&(pe+=" "+w);var Te=N&&n===void 0?cA(be):k,se={};for(var ue in oe)N&&ue==="as"||Te(ue)&&(se[ue]=oe[ue]);return se.className=pe,ge&&(se.ref=ge),V.createElement(V.Fragment,null,V.createElement(qne,{cache:de,serialized:re,isStringTag:typeof be=="string"}),V.createElement(be,se))});return Y.displayName=_!==void 0?_:"Styled("+(typeof h=="string"?h:h.displayName||h.name||"Component")+")",Y.defaultProps=t.defaultProps,Y.__emotion_real=Y,Y.__emotion_base=h,Y.__emotion_styles=F,Y.__emotion_forwardProp=n,Object.defineProperty(Y,"toString",{value:function(){return"."+w}}),Y.withComponent=function(oe,de){var ge=e(oe,Pw({},i,de,{shouldForwardProp:uA(Y,de,!0)}));return ge.apply(void 0,F)},Y}},Kne=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],JS=Wne.bind(null);Kne.forEach(function(e){JS[e]=JS(e)});/**
 * @mui/styled-engine v6.4.2
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Zne(e,t){return JS(e,t)}function Xne(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const dA=[];function hA(e){return dA[0]=e,Ej(dA)}const Yne=e=>{const t=Object.keys(e).map(i=>({key:i,val:e[i]}))||[];return t.sort((i,c)=>i.val-c.val),t.reduce((i,c)=>({...i,[c.key]:c.val}),{})};function Jne(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:c=5,...h}=e,_=Yne(t),w=Object.keys(_);function n(G){return`@media (min-width:${typeof t[G]=="number"?t[G]:G}${i})`}function k(G){return`@media (max-width:${(typeof t[G]=="number"?t[G]:G)-c/100}${i})`}function N(G,Q){const te=w.indexOf(Q);return`@media (min-width:${typeof t[G]=="number"?t[G]:G}${i}) and (max-width:${(te!==-1&&typeof t[w[te]]=="number"?t[w[te]]:Q)-c/100}${i})`}function B(G){return w.indexOf(G)+1<w.length?N(G,w[w.indexOf(G)+1]):n(G)}function F(G){const Q=w.indexOf(G);return Q===0?n(w[1]):Q===w.length-1?k(w[Q]):N(G,w[w.indexOf(G)+1]).replace("@media","@media not all and")}return{keys:w,values:_,up:n,down:k,between:N,only:B,not:F,unit:i,...h}}const Qne={borderRadius:4};function Dj(e=8,t=IT({spacing:e})){if(e.mui)return e;const i=(...c)=>(c.length===0?[1]:c).map(_=>{const w=t(_);return typeof w=="number"?`${w}px`:w}).join(" ");return i.mui=!0,i}function eie(e,t){var c;const i=this;if(i.vars){if(!((c=i.colorSchemes)!=null&&c[e])||typeof i.getColorSchemeSelector!="function")return{};let h=i.getColorSchemeSelector(e);return h==="&"?t:((h.includes("data-")||h.includes("."))&&(h=`*:where(${h.replace(/\s*&$/,"")}) &`),{[h]:t})}return i.palette.mode===e?t:{}}function Pj(e={},...t){const{breakpoints:i={},palette:c={},spacing:h,shape:_={},...w}=e,n=Jne(i),k=Dj(h);let N=Pc({breakpoints:n,direction:"ltr",components:{},palette:{mode:"light",...c},spacing:k,shape:{...Qne,..._}},w);return N=dae(N),N.applyStyles=eie,N=t.reduce((B,F)=>Pc(B,F),N),N.unstable_sxConfig={...v2,...w==null?void 0:w.unstable_sxConfig},N.unstable_sx=function(F){return ox({sx:F,theme:this})},N}function Mj(e){const{variants:t,...i}=e,c={variants:t,style:hA(i),isProcessed:!0};return c.style===i||t&&t.forEach(h=>{typeof h.style!="function"&&(h.style=hA(h.style))}),c}const tie=Pj();function z4(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function rie(e){return e?(t,i)=>i[e]:null}function aie(e,t,i){e.theme=sie(e.theme)?i:e.theme[t]||e.theme}function J1(e,t){const i=typeof t=="function"?t(e):t;if(Array.isArray(i))return i.flatMap(c=>J1(e,c));if(Array.isArray(i==null?void 0:i.variants)){let c;if(i.isProcessed)c=i.style;else{const{variants:h,..._}=i;c=_}return Aj(e,i.variants,[c])}return i!=null&&i.isProcessed?i.style:i}function Aj(e,t,i=[]){var h;let c;e:for(let _=0;_<t.length;_+=1){const w=t[_];if(typeof w.props=="function"){if(c??(c={...e,...e.ownerState,ownerState:e.ownerState}),!w.props(c))continue}else for(const n in w.props)if(e[n]!==w.props[n]&&((h=e.ownerState)==null?void 0:h[n])!==w.props[n])continue e;typeof w.style=="function"?(c??(c={...e,...e.ownerState,ownerState:e.ownerState}),i.push(w.style(c))):i.push(w.style)}return i}function nie(e={}){const{themeId:t,defaultTheme:i=tie,rootShouldForwardProp:c=z4,slotShouldForwardProp:h=z4}=e;function _(n){aie(n,t,i)}return(n,k={})=>{Xne(n,we=>we.filter(ke=>ke!==ox));const{name:N,slot:B,skipVariantsResolver:F,skipSx:G,overridesResolver:Q=rie(lie(B)),...te}=k,Y=F!==void 0?F:B&&B!=="Root"&&B!=="root"||!1,oe=G||!1;let de=z4;B==="Root"||B==="root"?de=c:B?de=h:oie(n)&&(de=void 0);const ge=Zne(n,{shouldForwardProp:de,label:iie(),...te}),be=we=>{if(typeof we=="function"&&we.__emotion_real!==we)return function(Ae){return J1(Ae,we)};if(Mf(we)){const ke=Mj(we);return ke.variants?function(re){return J1(re,ke)}:ke.style}return we},pe=(...we)=>{const ke=[],Ae=we.map(be),re=[];if(ke.push(_),N&&Q&&re.push(function(De){var Re,Ge;const je=(Ge=(Re=De.theme.components)==null?void 0:Re[N])==null?void 0:Ge.styleOverrides;if(!je)return null;const Le={};for(const ze in je)Le[ze]=J1(De,je[ze]);return Q(De,Le)}),N&&!Y&&re.push(function(De){var Le,Re;const ce=De.theme,je=(Re=(Le=ce==null?void 0:ce.components)==null?void 0:Le[N])==null?void 0:Re.variants;return je?Aj(De,je):null}),oe||re.push(ox),Array.isArray(Ae[0])){const ue=Ae.shift(),De=new Array(ke.length).fill(""),ce=new Array(re.length).fill("");let je;je=[...De,...ue,...ce],je.raw=[...De,...ue.raw,...ce],ke.unshift(je)}const Te=[...ke,...Ae,...re],se=ge(...Te);return n.muiName&&(se.muiName=n.muiName),se};return ge.withConfig&&(pe.withConfig=ge.withConfig),pe}}function iie(e,t){return void 0}function sie(e){for(const t in e)return!1;return!0}function oie(e){return typeof e=="string"&&e.charCodeAt(0)>96}function lie(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function BT(e,t=0,i=1){return sae(e,t,i)}function cie(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let i=e.match(t);return i&&i[0].length===1&&(i=i.map(c=>c+c)),i?`rgb${i.length===4?"a":""}(${i.map((c,h)=>h<3?parseInt(c,16):Math.round(parseInt(c,16)/255*1e3)/1e3).join(", ")})`:""}function Cm(e){if(e.type)return e;if(e.charAt(0)==="#")return Cm(cie(e));const t=e.indexOf("("),i=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(i))throw new Error(i0(9,e));let c=e.substring(t+1,e.length-1),h;if(i==="color"){if(c=c.split(" "),h=c.shift(),c.length===4&&c[3].charAt(0)==="/"&&(c[3]=c[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(h))throw new Error(i0(10,h))}else c=c.split(",");return c=c.map(_=>parseFloat(_)),{type:i,values:c,colorSpace:h}}const uie=e=>{const t=Cm(e);return t.values.slice(0,3).map((i,c)=>t.type.includes("hsl")&&c!==0?`${i}%`:i).join(" ")},Gv=(e,t)=>{try{return uie(e)}catch{return e}};function S2(e){const{type:t,colorSpace:i}=e;let{values:c}=e;return t.includes("rgb")?c=c.map((h,_)=>_<3?parseInt(h,10):h):t.includes("hsl")&&(c[1]=`${c[1]}%`,c[2]=`${c[2]}%`),t.includes("color")?c=`${i} ${c.join(" ")}`:c=`${c.join(", ")}`,`${t}(${c})`}function kj(e){e=Cm(e);const{values:t}=e,i=t[0],c=t[1]/100,h=t[2]/100,_=c*Math.min(h,1-h),w=(N,B=(N+i/30)%12)=>h-_*Math.max(Math.min(B-3,9-B,1),-1);let n="rgb";const k=[Math.round(w(0)*255),Math.round(w(8)*255),Math.round(w(4)*255)];return e.type==="hsla"&&(n+="a",k.push(t[3])),S2({type:n,values:k})}function QS(e){e=Cm(e);let t=e.type==="hsl"||e.type==="hsla"?Cm(kj(e)).values:e.values;return t=t.map(i=>(e.type!=="color"&&(i/=255),i<=.03928?i/12.92:((i+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function die(e,t){const i=QS(e),c=QS(t);return(Math.max(i,c)+.05)/(Math.min(i,c)+.05)}function hie(e,t){return e=Cm(e),t=BT(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,S2(e)}function L1(e,t,i){try{return hie(e,t)}catch{return e}}function jT(e,t){if(e=Cm(e),t=BT(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let i=0;i<3;i+=1)e.values[i]*=1-t;return S2(e)}function ui(e,t,i){try{return jT(e,t)}catch{return e}}function OT(e,t){if(e=Cm(e),t=BT(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;else if(e.type.includes("color"))for(let i=0;i<3;i+=1)e.values[i]+=(1-e.values[i])*t;return S2(e)}function di(e,t,i){try{return OT(e,t)}catch{return e}}function fie(e,t=.15){return QS(e)>.5?jT(e,t):OT(e,t)}function $1(e,t,i){try{return fie(e,t)}catch{return e}}const pie=V.createContext(void 0);function mie(e){const{theme:t,name:i,props:c}=e;if(!t||!t.components||!t.components[i])return c;const h=t.components[i];return h.defaultProps?ZS(h.defaultProps,c):!h.styleOverrides&&!h.variants?ZS(h,c):c}function gie({props:e,name:t}){const i=V.useContext(pie);return mie({props:e,name:t,theme:{components:i}})}const fA={theme:void 0};function yie(e){let t,i;return function(h){let _=t;return(_===void 0||h.theme!==i)&&(fA.theme=h.theme,_=Mj(e(fA)),t=_,i=h.theme),_}}function xie(e=""){function t(...c){if(!c.length)return"";const h=c[0];return typeof h=="string"&&!h.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${h}${t(...c.slice(1))})`:`, ${h}`}return(c,...h)=>`var(--${e?`${e}-`:""}${c}${t(...h)})`}const pA=(e,t,i,c=[])=>{let h=e;t.forEach((_,w)=>{w===t.length-1?Array.isArray(h)?h[Number(_)]=i:h&&typeof h=="object"&&(h[_]=i):h&&typeof h=="object"&&(h[_]||(h[_]=c.includes(_)?[]:{}),h=h[_])})},vie=(e,t,i)=>{function c(h,_=[],w=[]){Object.entries(h).forEach(([n,k])=>{(!i||i&&!i([..._,n]))&&k!=null&&(typeof k=="object"&&Object.keys(k).length>0?c(k,[..._,n],Array.isArray(k)?[...w,n]:w):t([..._,n],k,w))})}c(e)},_ie=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(c=>e.includes(c))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function L4(e,t){const{prefix:i,shouldSkipGeneratingVar:c}=t||{},h={},_={},w={};return vie(e,(n,k,N)=>{if((typeof k=="string"||typeof k=="number")&&(!c||!c(n,k))){const B=`--${i?`${i}-`:""}${n.join("-")}`,F=_ie(n,k);Object.assign(h,{[B]:F}),pA(_,n,`var(${B})`,N),pA(w,n,`var(${B}, ${F})`,N)}},n=>n[0]==="vars"),{css:h,vars:_,varsWithDefaults:w}}function bie(e,t={}){const{getSelector:i=oe,disableCssColorScheme:c,colorSchemeSelector:h}=t,{colorSchemes:_={},components:w,defaultColorScheme:n="light",...k}=e,{vars:N,css:B,varsWithDefaults:F}=L4(k,t);let G=F;const Q={},{[n]:te,...Y}=_;if(Object.entries(Y||{}).forEach(([be,pe])=>{const{vars:we,css:ke,varsWithDefaults:Ae}=L4(pe,t);G=Pc(G,Ae),Q[be]={css:ke,vars:we}}),te){const{css:be,vars:pe,varsWithDefaults:we}=L4(te,t);G=Pc(G,we),Q[n]={css:be,vars:pe}}function oe(be,pe){var ke,Ae;let we=h;if(h==="class"&&(we=".%s"),h==="data"&&(we="[data-%s]"),h!=null&&h.startsWith("data-")&&!h.includes("%s")&&(we=`[${h}="%s"]`),be){if(we==="media")return e.defaultColorScheme===be?":root":{[`@media (prefers-color-scheme: ${((Ae=(ke=_[be])==null?void 0:ke.palette)==null?void 0:Ae.mode)||be})`]:{":root":pe}};if(we)return e.defaultColorScheme===be?`:root, ${we.replace("%s",String(be))}`:we.replace("%s",String(be))}return":root"}return{vars:G,generateThemeVars:()=>{let be={...N};return Object.entries(Q).forEach(([,{vars:pe}])=>{be=Pc(be,pe)}),be},generateStyleSheets:()=>{var re,Te;const be=[],pe=e.defaultColorScheme||"light";function we(se,ue){Object.keys(ue).length&&be.push(typeof se=="string"?{[se]:{...ue}}:se)}we(i(void 0,{...B}),B);const{[pe]:ke,...Ae}=Q;if(ke){const{css:se}=ke,ue=(Te=(re=_[pe])==null?void 0:re.palette)==null?void 0:Te.mode,De=!c&&ue?{colorScheme:ue,...se}:{...se};we(i(pe,{...De}),De)}return Object.entries(Ae).forEach(([se,{css:ue}])=>{var je,Le;const De=(Le=(je=_[se])==null?void 0:je.palette)==null?void 0:Le.mode,ce=!c&&De?{colorScheme:De,...ue}:{...ue};we(i(se,{...ce}),ce)}),be}}}function wie(e){return function(i){return e==="media"?`@media (prefers-color-scheme: ${i})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${i}"] &`:e==="class"?`.${i} &`:e==="data"?`[data-${i}] &`:`${e.replace("%s",i)} &`:"&"}}const w_={black:"#000",white:"#fff"},Sie={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Sy={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Ty={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Lv={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Ey={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Cy={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Dy={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function Rj(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:w_.white,default:w_.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Tie=Rj();function Ij(){return{text:{primary:w_.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:w_.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const mA=Ij();function gA(e,t,i,c){const h=c.light||c,_=c.dark||c*1.5;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:t==="light"?e.light=OT(e.main,h):t==="dark"&&(e.dark=jT(e.main,_)))}function Eie(e="light"){return e==="dark"?{main:Ey[200],light:Ey[50],dark:Ey[400]}:{main:Ey[700],light:Ey[400],dark:Ey[800]}}function Cie(e="light"){return e==="dark"?{main:Sy[200],light:Sy[50],dark:Sy[400]}:{main:Sy[500],light:Sy[300],dark:Sy[700]}}function Die(e="light"){return e==="dark"?{main:Ty[500],light:Ty[300],dark:Ty[700]}:{main:Ty[700],light:Ty[400],dark:Ty[800]}}function Pie(e="light"){return e==="dark"?{main:Cy[400],light:Cy[300],dark:Cy[700]}:{main:Cy[700],light:Cy[500],dark:Cy[900]}}function Mie(e="light"){return e==="dark"?{main:Dy[400],light:Dy[300],dark:Dy[700]}:{main:Dy[800],light:Dy[500],dark:Dy[900]}}function Aie(e="light"){return e==="dark"?{main:Lv[400],light:Lv[300],dark:Lv[700]}:{main:"#ed6c02",light:Lv[500],dark:Lv[900]}}function FT(e){const{mode:t="light",contrastThreshold:i=3,tonalOffset:c=.2,...h}=e,_=e.primary||Eie(t),w=e.secondary||Cie(t),n=e.error||Die(t),k=e.info||Pie(t),N=e.success||Mie(t),B=e.warning||Aie(t);function F(Y){return die(Y,mA.text.primary)>=i?mA.text.primary:Tie.text.primary}const G=({color:Y,name:oe,mainShade:de=500,lightShade:ge=300,darkShade:be=700})=>{if(Y={...Y},!Y.main&&Y[de]&&(Y.main=Y[de]),!Y.hasOwnProperty("main"))throw new Error(i0(11,oe?` (${oe})`:"",de));if(typeof Y.main!="string")throw new Error(i0(12,oe?` (${oe})`:"",JSON.stringify(Y.main)));return gA(Y,"light",ge,c),gA(Y,"dark",be,c),Y.contrastText||(Y.contrastText=F(Y.main)),Y};let Q;return t==="light"?Q=Rj():t==="dark"&&(Q=Ij()),Pc({common:{...w_},mode:t,primary:G({color:_,name:"primary"}),secondary:G({color:w,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:G({color:n,name:"error"}),warning:G({color:B,name:"warning"}),info:G({color:k,name:"info"}),success:G({color:N,name:"success"}),grey:Sie,contrastThreshold:i,getContrastText:F,augmentColor:G,tonalOffset:c,...Q},h)}function kie(e){const t={};return Object.entries(e).forEach(c=>{const[h,_]=c;typeof _=="object"&&(t[h]=`${_.fontStyle?`${_.fontStyle} `:""}${_.fontVariant?`${_.fontVariant} `:""}${_.fontWeight?`${_.fontWeight} `:""}${_.fontStretch?`${_.fontStretch} `:""}${_.fontSize||""}${_.lineHeight?`/${_.lineHeight} `:""}${_.fontFamily||""}`)}),t}function Rie(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function Iie(e){return Math.round(e*1e5)/1e5}const yA={textTransform:"uppercase"},xA='"Roboto", "Helvetica", "Arial", sans-serif';function zie(e,t){const{fontFamily:i=xA,fontSize:c=14,fontWeightLight:h=300,fontWeightRegular:_=400,fontWeightMedium:w=500,fontWeightBold:n=700,htmlFontSize:k=16,allVariants:N,pxToRem:B,...F}=typeof t=="function"?t(e):t,G=c/14,Q=B||(oe=>`${oe/k*G}rem`),te=(oe,de,ge,be,pe)=>({fontFamily:i,fontWeight:oe,fontSize:Q(de),lineHeight:ge,...i===xA?{letterSpacing:`${Iie(be/de)}em`}:{},...pe,...N}),Y={h1:te(h,96,1.167,-1.5),h2:te(h,60,1.2,-.5),h3:te(_,48,1.167,0),h4:te(_,34,1.235,.25),h5:te(_,24,1.334,0),h6:te(w,20,1.6,.15),subtitle1:te(_,16,1.75,.15),subtitle2:te(w,14,1.57,.1),body1:te(_,16,1.5,.15),body2:te(_,14,1.43,.15),button:te(w,14,1.75,.4,yA),caption:te(_,12,1.66,.4),overline:te(_,12,2.66,1,yA),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Pc({htmlFontSize:k,pxToRem:Q,fontFamily:i,fontSize:c,fontWeightLight:h,fontWeightRegular:_,fontWeightMedium:w,fontWeightBold:n,...Y},F,{clone:!1})}const Lie=.2,$ie=.14,Nie=.12;function $i(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Lie})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${$ie})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Nie})`].join(",")}const Bie=["none",$i(0,2,1,-1,0,1,1,0,0,1,3,0),$i(0,3,1,-2,0,2,2,0,0,1,5,0),$i(0,3,3,-2,0,3,4,0,0,1,8,0),$i(0,2,4,-1,0,4,5,0,0,1,10,0),$i(0,3,5,-1,0,5,8,0,0,1,14,0),$i(0,3,5,-1,0,6,10,0,0,1,18,0),$i(0,4,5,-2,0,7,10,1,0,2,16,1),$i(0,5,5,-3,0,8,10,1,0,3,14,2),$i(0,5,6,-3,0,9,12,1,0,3,16,2),$i(0,6,6,-3,0,10,14,1,0,4,18,3),$i(0,6,7,-4,0,11,15,1,0,4,20,3),$i(0,7,8,-4,0,12,17,2,0,5,22,4),$i(0,7,8,-4,0,13,19,2,0,5,24,4),$i(0,7,9,-4,0,14,21,2,0,5,26,4),$i(0,8,9,-5,0,15,22,2,0,6,28,5),$i(0,8,10,-5,0,16,24,2,0,6,30,5),$i(0,8,11,-5,0,17,26,2,0,6,32,5),$i(0,9,11,-5,0,18,28,2,0,7,34,6),$i(0,9,12,-6,0,19,29,2,0,7,36,6),$i(0,10,13,-6,0,20,31,3,0,8,38,7),$i(0,10,13,-6,0,21,33,3,0,8,40,7),$i(0,10,14,-6,0,22,35,3,0,8,42,7),$i(0,11,14,-7,0,23,36,3,0,9,44,8),$i(0,11,15,-7,0,24,38,3,0,9,46,8)],jie={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Oie={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function vA(e){return`${Math.round(e)}ms`}function Fie(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function Vie(e){const t={...jie,...e.easing},i={...Oie,...e.duration};return{getAutoHeightDuration:Fie,create:(h=["all"],_={})=>{const{duration:w=i.standard,easing:n=t.easeInOut,delay:k=0,...N}=_;return(Array.isArray(h)?h:[h]).map(B=>`${B} ${typeof w=="string"?w:vA(w)} ${n} ${typeof k=="string"?k:vA(k)}`).join(",")},...e,easing:t,duration:i}}const Uie={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Gie(e){return Mf(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function zj(e={}){const t={...e};function i(c){const h=Object.entries(c);for(let _=0;_<h.length;_++){const[w,n]=h[_];!Gie(n)||w.startsWith("unstable_")?delete c[w]:Mf(n)&&(c[w]={...n},i(c[w]))}}return i(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function e5(e={},...t){const{breakpoints:i,mixins:c={},spacing:h,palette:_={},transitions:w={},typography:n={},shape:k,...N}=e;if(e.vars)throw new Error(i0(20));const B=FT(_),F=Pj(e);let G=Pc(F,{mixins:Rie(F.breakpoints,c),palette:B,shadows:Bie.slice(),typography:zie(B,n),transitions:Vie(w),zIndex:{...Uie}});return G=Pc(G,N),G=t.reduce((Q,te)=>Pc(Q,te),G),G.unstable_sxConfig={...v2,...N==null?void 0:N.unstable_sxConfig},G.unstable_sx=function(te){return ox({sx:te,theme:this})},G.toRuntimeSource=zj,G}function Hie(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const qie=[...Array(25)].map((e,t)=>{if(t===0)return"none";const i=Hie(t);return`linear-gradient(rgba(255 255 255 / ${i}), rgba(255 255 255 / ${i}))`});function Lj(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function $j(e){return e==="dark"?qie:[]}function Wie(e){const{palette:t={mode:"light"},opacity:i,overlays:c,...h}=e,_=FT(t);return{palette:_,opacity:{...Lj(_.mode),...i},overlays:c||$j(_.mode),...h}}function Kie(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const Zie=e=>[...[...Array(25)].map((t,i)=>`--${e?`${e}-`:""}overlays-${i}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],Xie=e=>(t,i)=>{const c=e.rootSelector||":root",h=e.colorSchemeSelector;let _=h;if(h==="class"&&(_=".%s"),h==="data"&&(_="[data-%s]"),h!=null&&h.startsWith("data-")&&!h.includes("%s")&&(_=`[${h}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const w={};return Zie(e.cssVarPrefix).forEach(n=>{w[n]=i[n],delete i[n]}),_==="media"?{[c]:i,"@media (prefers-color-scheme: dark)":{[c]:w}}:_?{[_.replace("%s",t)]:w,[`${c}, ${_.replace("%s",t)}`]:i}:{[c]:{...i,...w}}}if(_&&_!=="media")return`${c}, ${_.replace("%s",String(t))}`}else if(t){if(_==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[c]:i}};if(_)return _.replace("%s",String(t))}return c};function Yie(e,t){t.forEach(i=>{e[i]||(e[i]={})})}function hr(e,t,i){!e[t]&&i&&(e[t]=i)}function Hv(e){return typeof e!="string"||!e.startsWith("hsl")?e:kj(e)}function Cf(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Gv(Hv(e[t])))}function Jie(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const fh=e=>{try{return e()}catch{}},Qie=(e="mui")=>xie(e);function $4(e,t,i,c){if(!t)return;t=t===!0?{}:t;const h=c==="dark"?"dark":"light";if(!i){e[c]=Wie({...t,palette:{mode:h,...t==null?void 0:t.palette}});return}const{palette:_,...w}=e5({...i,palette:{mode:h,...t==null?void 0:t.palette}});return e[c]={...t,palette:_,opacity:{...Lj(h),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||$j(h)},w}function ese(e={},...t){const{colorSchemes:i={light:!0},defaultColorScheme:c,disableCssColorScheme:h=!1,cssVarPrefix:_="mui",shouldSkipGeneratingVar:w=Kie,colorSchemeSelector:n=i.light&&i.dark?"media":void 0,rootSelector:k=":root",...N}=e,B=Object.keys(i)[0],F=c||(i.light&&B!=="light"?"light":B),G=Qie(_),{[F]:Q,light:te,dark:Y,...oe}=i,de={...oe};let ge=Q;if((F==="dark"&&!("dark"in i)||F==="light"&&!("light"in i))&&(ge=!0),!ge)throw new Error(i0(21,F));const be=$4(de,ge,N,F);te&&!de.light&&$4(de,te,void 0,"light"),Y&&!de.dark&&$4(de,Y,void 0,"dark");let pe={defaultColorScheme:F,...be,cssVarPrefix:_,colorSchemeSelector:n,rootSelector:k,getCssVar:G,colorSchemes:de,font:{...kie(be.typography),...be.font},spacing:Jie(N.spacing)};Object.keys(pe.colorSchemes).forEach(Te=>{const se=pe.colorSchemes[Te].palette,ue=De=>{const ce=De.split("-"),je=ce[1],Le=ce[2];return G(De,se[je][Le])};if(se.mode==="light"&&(hr(se.common,"background","#fff"),hr(se.common,"onBackground","#000")),se.mode==="dark"&&(hr(se.common,"background","#000"),hr(se.common,"onBackground","#fff")),Yie(se,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),se.mode==="light"){hr(se.Alert,"errorColor",ui(se.error.light,.6)),hr(se.Alert,"infoColor",ui(se.info.light,.6)),hr(se.Alert,"successColor",ui(se.success.light,.6)),hr(se.Alert,"warningColor",ui(se.warning.light,.6)),hr(se.Alert,"errorFilledBg",ue("palette-error-main")),hr(se.Alert,"infoFilledBg",ue("palette-info-main")),hr(se.Alert,"successFilledBg",ue("palette-success-main")),hr(se.Alert,"warningFilledBg",ue("palette-warning-main")),hr(se.Alert,"errorFilledColor",fh(()=>se.getContrastText(se.error.main))),hr(se.Alert,"infoFilledColor",fh(()=>se.getContrastText(se.info.main))),hr(se.Alert,"successFilledColor",fh(()=>se.getContrastText(se.success.main))),hr(se.Alert,"warningFilledColor",fh(()=>se.getContrastText(se.warning.main))),hr(se.Alert,"errorStandardBg",di(se.error.light,.9)),hr(se.Alert,"infoStandardBg",di(se.info.light,.9)),hr(se.Alert,"successStandardBg",di(se.success.light,.9)),hr(se.Alert,"warningStandardBg",di(se.warning.light,.9)),hr(se.Alert,"errorIconColor",ue("palette-error-main")),hr(se.Alert,"infoIconColor",ue("palette-info-main")),hr(se.Alert,"successIconColor",ue("palette-success-main")),hr(se.Alert,"warningIconColor",ue("palette-warning-main")),hr(se.AppBar,"defaultBg",ue("palette-grey-100")),hr(se.Avatar,"defaultBg",ue("palette-grey-400")),hr(se.Button,"inheritContainedBg",ue("palette-grey-300")),hr(se.Button,"inheritContainedHoverBg",ue("palette-grey-A100")),hr(se.Chip,"defaultBorder",ue("palette-grey-400")),hr(se.Chip,"defaultAvatarColor",ue("palette-grey-700")),hr(se.Chip,"defaultIconColor",ue("palette-grey-700")),hr(se.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),hr(se.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),hr(se.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),hr(se.LinearProgress,"primaryBg",di(se.primary.main,.62)),hr(se.LinearProgress,"secondaryBg",di(se.secondary.main,.62)),hr(se.LinearProgress,"errorBg",di(se.error.main,.62)),hr(se.LinearProgress,"infoBg",di(se.info.main,.62)),hr(se.LinearProgress,"successBg",di(se.success.main,.62)),hr(se.LinearProgress,"warningBg",di(se.warning.main,.62)),hr(se.Skeleton,"bg",`rgba(${ue("palette-text-primaryChannel")} / 0.11)`),hr(se.Slider,"primaryTrack",di(se.primary.main,.62)),hr(se.Slider,"secondaryTrack",di(se.secondary.main,.62)),hr(se.Slider,"errorTrack",di(se.error.main,.62)),hr(se.Slider,"infoTrack",di(se.info.main,.62)),hr(se.Slider,"successTrack",di(se.success.main,.62)),hr(se.Slider,"warningTrack",di(se.warning.main,.62));const De=$1(se.background.default,.8);hr(se.SnackbarContent,"bg",De),hr(se.SnackbarContent,"color",fh(()=>se.getContrastText(De))),hr(se.SpeedDialAction,"fabHoverBg",$1(se.background.paper,.15)),hr(se.StepConnector,"border",ue("palette-grey-400")),hr(se.StepContent,"border",ue("palette-grey-400")),hr(se.Switch,"defaultColor",ue("palette-common-white")),hr(se.Switch,"defaultDisabledColor",ue("palette-grey-100")),hr(se.Switch,"primaryDisabledColor",di(se.primary.main,.62)),hr(se.Switch,"secondaryDisabledColor",di(se.secondary.main,.62)),hr(se.Switch,"errorDisabledColor",di(se.error.main,.62)),hr(se.Switch,"infoDisabledColor",di(se.info.main,.62)),hr(se.Switch,"successDisabledColor",di(se.success.main,.62)),hr(se.Switch,"warningDisabledColor",di(se.warning.main,.62)),hr(se.TableCell,"border",di(L1(se.divider,1),.88)),hr(se.Tooltip,"bg",L1(se.grey[700],.92))}if(se.mode==="dark"){hr(se.Alert,"errorColor",di(se.error.light,.6)),hr(se.Alert,"infoColor",di(se.info.light,.6)),hr(se.Alert,"successColor",di(se.success.light,.6)),hr(se.Alert,"warningColor",di(se.warning.light,.6)),hr(se.Alert,"errorFilledBg",ue("palette-error-dark")),hr(se.Alert,"infoFilledBg",ue("palette-info-dark")),hr(se.Alert,"successFilledBg",ue("palette-success-dark")),hr(se.Alert,"warningFilledBg",ue("palette-warning-dark")),hr(se.Alert,"errorFilledColor",fh(()=>se.getContrastText(se.error.dark))),hr(se.Alert,"infoFilledColor",fh(()=>se.getContrastText(se.info.dark))),hr(se.Alert,"successFilledColor",fh(()=>se.getContrastText(se.success.dark))),hr(se.Alert,"warningFilledColor",fh(()=>se.getContrastText(se.warning.dark))),hr(se.Alert,"errorStandardBg",ui(se.error.light,.9)),hr(se.Alert,"infoStandardBg",ui(se.info.light,.9)),hr(se.Alert,"successStandardBg",ui(se.success.light,.9)),hr(se.Alert,"warningStandardBg",ui(se.warning.light,.9)),hr(se.Alert,"errorIconColor",ue("palette-error-main")),hr(se.Alert,"infoIconColor",ue("palette-info-main")),hr(se.Alert,"successIconColor",ue("palette-success-main")),hr(se.Alert,"warningIconColor",ue("palette-warning-main")),hr(se.AppBar,"defaultBg",ue("palette-grey-900")),hr(se.AppBar,"darkBg",ue("palette-background-paper")),hr(se.AppBar,"darkColor",ue("palette-text-primary")),hr(se.Avatar,"defaultBg",ue("palette-grey-600")),hr(se.Button,"inheritContainedBg",ue("palette-grey-800")),hr(se.Button,"inheritContainedHoverBg",ue("palette-grey-700")),hr(se.Chip,"defaultBorder",ue("palette-grey-700")),hr(se.Chip,"defaultAvatarColor",ue("palette-grey-300")),hr(se.Chip,"defaultIconColor",ue("palette-grey-300")),hr(se.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),hr(se.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),hr(se.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),hr(se.LinearProgress,"primaryBg",ui(se.primary.main,.5)),hr(se.LinearProgress,"secondaryBg",ui(se.secondary.main,.5)),hr(se.LinearProgress,"errorBg",ui(se.error.main,.5)),hr(se.LinearProgress,"infoBg",ui(se.info.main,.5)),hr(se.LinearProgress,"successBg",ui(se.success.main,.5)),hr(se.LinearProgress,"warningBg",ui(se.warning.main,.5)),hr(se.Skeleton,"bg",`rgba(${ue("palette-text-primaryChannel")} / 0.13)`),hr(se.Slider,"primaryTrack",ui(se.primary.main,.5)),hr(se.Slider,"secondaryTrack",ui(se.secondary.main,.5)),hr(se.Slider,"errorTrack",ui(se.error.main,.5)),hr(se.Slider,"infoTrack",ui(se.info.main,.5)),hr(se.Slider,"successTrack",ui(se.success.main,.5)),hr(se.Slider,"warningTrack",ui(se.warning.main,.5));const De=$1(se.background.default,.98);hr(se.SnackbarContent,"bg",De),hr(se.SnackbarContent,"color",fh(()=>se.getContrastText(De))),hr(se.SpeedDialAction,"fabHoverBg",$1(se.background.paper,.15)),hr(se.StepConnector,"border",ue("palette-grey-600")),hr(se.StepContent,"border",ue("palette-grey-600")),hr(se.Switch,"defaultColor",ue("palette-grey-300")),hr(se.Switch,"defaultDisabledColor",ue("palette-grey-600")),hr(se.Switch,"primaryDisabledColor",ui(se.primary.main,.55)),hr(se.Switch,"secondaryDisabledColor",ui(se.secondary.main,.55)),hr(se.Switch,"errorDisabledColor",ui(se.error.main,.55)),hr(se.Switch,"infoDisabledColor",ui(se.info.main,.55)),hr(se.Switch,"successDisabledColor",ui(se.success.main,.55)),hr(se.Switch,"warningDisabledColor",ui(se.warning.main,.55)),hr(se.TableCell,"border",ui(L1(se.divider,1),.68)),hr(se.Tooltip,"bg",L1(se.grey[700],.92))}Cf(se.background,"default"),Cf(se.background,"paper"),Cf(se.common,"background"),Cf(se.common,"onBackground"),Cf(se,"divider"),Object.keys(se).forEach(De=>{const ce=se[De];De!=="tonalOffset"&&ce&&typeof ce=="object"&&(ce.main&&hr(se[De],"mainChannel",Gv(Hv(ce.main))),ce.light&&hr(se[De],"lightChannel",Gv(Hv(ce.light))),ce.dark&&hr(se[De],"darkChannel",Gv(Hv(ce.dark))),ce.contrastText&&hr(se[De],"contrastTextChannel",Gv(Hv(ce.contrastText))),De==="text"&&(Cf(se[De],"primary"),Cf(se[De],"secondary")),De==="action"&&(ce.active&&Cf(se[De],"active"),ce.selected&&Cf(se[De],"selected")))})}),pe=t.reduce((Te,se)=>Pc(Te,se),pe);const we={prefix:_,disableCssColorScheme:h,shouldSkipGeneratingVar:w,getSelector:Xie(pe)},{vars:ke,generateThemeVars:Ae,generateStyleSheets:re}=bie(pe,we);return pe.vars=ke,Object.entries(pe.colorSchemes[pe.defaultColorScheme]).forEach(([Te,se])=>{pe[Te]=se}),pe.generateThemeVars=Ae,pe.generateStyleSheets=re,pe.generateSpacing=function(){return Dj(N.spacing,IT(this))},pe.getColorSchemeSelector=wie(n),pe.spacing=pe.generateSpacing(),pe.shouldSkipGeneratingVar=w,pe.unstable_sxConfig={...v2,...N==null?void 0:N.unstable_sxConfig},pe.unstable_sx=function(se){return ox({sx:se,theme:this})},pe.toRuntimeSource=zj,pe}function _A(e,t,i){e.colorSchemes&&i&&(e.colorSchemes[t]={...i!==!0&&i,palette:FT({...i===!0?{}:i.palette,mode:t})})}function tse(e={},...t){const{palette:i,cssVariables:c=!1,colorSchemes:h=i?void 0:{light:!0},defaultColorScheme:_=i==null?void 0:i.mode,...w}=e,n=_||"light",k=h==null?void 0:h[n],N={...h,...i?{[n]:{...typeof k!="boolean"&&k,palette:i}}:void 0};if(c===!1){if(!("colorSchemes"in e))return e5(e,...t);let B=i;"palette"in e||N[n]&&(N[n]!==!0?B=N[n].palette:n==="dark"&&(B={mode:"dark"}));const F=e5({...e,palette:B},...t);return F.defaultColorScheme=n,F.colorSchemes=N,F.palette.mode==="light"&&(F.colorSchemes.light={...N.light!==!0&&N.light,palette:F.palette},_A(F,"dark",N.dark)),F.palette.mode==="dark"&&(F.colorSchemes.dark={...N.dark!==!0&&N.dark,palette:F.palette},_A(F,"light",N.light)),F}return!i&&!("light"in N)&&n==="light"&&(N.light=!0),ese({...w,colorSchemes:N,defaultColorScheme:n,...typeof c!="boolean"&&c},...t)}const rse=tse(),ase="$$material";function nse(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const ise=e=>nse(e)&&e!=="classes",sse=nie({themeId:ase,defaultTheme:rse,rootShouldForwardProp:ise}),ose=yie;function lse(e){return gie(e)}function cse(e){return hj("MuiSvgIcon",e)}iae("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const use=e=>{const{color:t,fontSize:i,classes:c}=e,h={root:["root",t!=="inherit"&&`color${sx(t)}`,`fontSize${sx(i)}`]};return tae(h,cse,c)},dse=sse("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.color!=="inherit"&&t[`color${sx(i.color)}`],t[`fontSize${sx(i.fontSize)}`]]}})(ose(({theme:e})=>{var t,i,c,h,_,w,n,k,N,B,F,G,Q,te;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(h=(t=e.transitions)==null?void 0:t.create)==null?void 0:h.call(t,"fill",{duration:(c=(i=(e.vars??e).transitions)==null?void 0:i.duration)==null?void 0:c.shorter}),variants:[{props:Y=>!Y.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((w=(_=e.typography)==null?void 0:_.pxToRem)==null?void 0:w.call(_,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((k=(n=e.typography)==null?void 0:n.pxToRem)==null?void 0:k.call(n,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((B=(N=e.typography)==null?void 0:N.pxToRem)==null?void 0:B.call(N,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,Y])=>Y&&Y.main).map(([Y])=>{var oe,de;return{props:{color:Y},style:{color:(de=(oe=(e.vars??e).palette)==null?void 0:oe[Y])==null?void 0:de.main}}}),{props:{color:"action"},style:{color:(G=(F=(e.vars??e).palette)==null?void 0:F.action)==null?void 0:G.active}},{props:{color:"disabled"},style:{color:(te=(Q=(e.vars??e).palette)==null?void 0:Q.action)==null?void 0:te.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),t5=V.forwardRef(function(t,i){const c=lse({props:t,name:"MuiSvgIcon"}),{children:h,className:_,color:w="inherit",component:n="svg",fontSize:k="medium",htmlColor:N,inheritViewBox:B=!1,titleAccess:F,viewBox:G="0 0 24 24",...Q}=c,te=V.isValidElement(h)&&h.type==="svg",Y={...c,color:w,component:n,fontSize:k,instanceFontSize:t.fontSize,inheritViewBox:B,viewBox:G,hasSvgAsChild:te},oe={};B||(oe.viewBox=G);const de=use(Y);return b.jsxs(dse,{as:n,className:oae(de.root,_),focusable:"false",color:N,"aria-hidden":F?void 0:!0,role:F?"img":void 0,ref:i,...oe,...Q,...te&&h.props,ownerState:Y,children:[te?h.props.children:h,F?b.jsx("title",{children:F}):null]})});t5.muiName="SvgIcon";function Bs(e,t){function i(c,h){return b.jsx(t5,{"data-testid":`${t}Icon`,ref:h,...c,children:e})}return i.muiName=t5.muiName,V.memo(V.forwardRef(i))}const N4=Bs(b.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"HomeSharp"),B4=Bs(b.jsx("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"}),"HomeOutlined"),Nj=Bs(b.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),hse=Bs(b.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),bA=Bs(b.jsx("path",{d:"M18.39 14.56C16.71 13.7 14.53 13 12 13s-4.71.7-6.39 1.56C4.61 15.07 4 16.1 4 17.22V20h16v-2.78c0-1.12-.61-2.15-1.61-2.66M9.78 12h4.44c1.21 0 2.14-1.06 1.98-2.26l-.32-2.45C15.57 5.39 13.92 4 12 4S8.43 5.39 8.12 7.29L7.8 9.74c-.16 1.2.77 2.26 1.98 2.26"}),"Person2"),fse=Bs(b.jsx("path",{d:"M19.3 16.9c.4-.7.7-1.5.7-2.4 0-2.5-2-4.5-4.5-4.5S11 12 11 14.5s2 4.5 4.5 4.5c.9 0 1.7-.3 2.4-.7l3.2 3.2 1.4-1.4zm-3.8.1c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5M12 20v2C6.48 22 2 17.52 2 12S6.48 2 12 2c4.84 0 8.87 3.44 9.8 8h-2.07c-.64-2.46-2.4-4.47-4.73-5.41V5c0 1.1-.9 2-2 2h-2v2c0 .55-.45 1-1 1H8v2h2v3H9l-4.79-4.79C4.08 10.79 4 11.38 4 12c0 4.41 3.59 8 8 8"}),"TravelExploreOutlined"),pse=Bs(b.jsx("path",{d:"M19.3 16.9c.4-.7.7-1.5.7-2.4 0-2.5-2-4.5-4.5-4.5S11 12 11 14.5s2 4.5 4.5 4.5c.9 0 1.7-.3 2.4-.7l3.2 3.2 1.4-1.4zm-3.8.1c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5M12 20v2C6.48 22 2 17.52 2 12S6.48 2 12 2c4.84 0 8.87 3.44 9.8 8h-2.07c-.64-2.46-2.4-4.47-4.73-5.41V5c0 1.1-.9 2-2 2h-2v2c0 .55-.45 1-1 1H8v2h2v3H9l-4.79-4.79C4.08 10.79 4 11.38 4 12c0 4.41 3.59 8 8 8"}),"TravelExplore"),mse=Bs([b.jsx("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8zM6.85 7h10.29l1.04 3H5.81zM19 17H5v-5h14z"},"0"),b.jsx("circle",{cx:"7.5",cy:"14.5",r:"1.5"},"1"),b.jsx("circle",{cx:"16.5",cy:"14.5",r:"1.5"},"2")],"DirectionsCarFilledOutlined"),gse=Bs(b.jsx("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8zM7.5 16c-.83 0-1.5-.67-1.5-1.5S6.67 13 7.5 13s1.5.67 1.5 1.5S8.33 16 7.5 16m9 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M5.81 10l1.04-3h10.29l1.04 3z"}),"DirectionsCarFilled"),yse=Bs(b.jsx("path",{d:"M12 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m5-4h2c0 2.7-.93 4.41-2.3 5.5-.5.4-1.1.7-1.7.9V22h-2v-6h-2v6H9V10.1q-.45.15-.6.3C7.87 10.81 7 11.43 7 14H5c0-2.06.35-3.78 2.11-5.29C8.21 7.81 10 7 12 7s2.68-.46 3.48-1.06C15.96 5.55 17 4.76 17 2M4 16h3v6H4z"}),"HailOutlined"),Bj=Bs(b.jsx("path",{d:"M12 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m5-4h2v.4c-.1 2.2-.8 3.9-2.3 5.1-.5.4-1.1.7-1.7.9V22h-2v-6h-2v6H9V10.1q-.45.15-.6.3c-.9.7-1.39 1.6-1.4 3.1v.5H5v-.5c0-2 .71-3.59 2.11-4.79C8.21 7.81 10 7 12 7s2.68-.46 3.48-1.06C16.48 5.14 17 4 17 2.5zM4 16h3v6H4z"}),"Hail"),xse=Bs(b.jsx("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarBorderOutlined"),vse=Bs(b.jsx("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarBorder"),_se=Bs(b.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutlineOutlined"),bse=Bs(b.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline"),wse=Bs(b.jsx("path",{d:"M13 4 2 20h17l3-16zm1.5 10c-1.38 0-2.5-1.12-2.5-2.5S13.12 9 14.5 9s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Airlines"),Sse=Bs(b.jsx("path",{d:"M17.34 18H5.8l8.25-12h5.54zM13 4 2 20h17l3-16zm1.5 5c-1.38 0-2.5 1.12-2.5 2.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5S15.88 9 14.5 9"}),"AirlinesOutlined"),wA=({announcementData:e,setAnnouncementData:t,setSidebarState:i,sidebarState:c,mobile:h,accountData:_,sidebarShown:w,setSidebarShown:n})=>{const[k,N]=V.useState(window.location.pathname.split("/")[1]),B=V.useRef(null);xs();const F=({title:pe,activeIcon:we,nonActiveIcon:ke,id:Ae,secondaryId:re})=>b.jsxs(pi,{to:`/${Ae}`,onMouseEnter:()=>{de(!0),be(Ae)},onMouseLeave:()=>{de(!1),be("")},className:`relative flex items-center w-full py-3 px-4
          ${w?"":"lg:items-center lg:justify-center"}
          rounded-xl text-gray-800 dark:text-gray-300 
          
          ${k===Ae||k===re?"bg-slate-200 dark:bg-[#1a1a1a] ":"hover:bg-slate-200 dark:hover:bg-[#1a1a1a] darkv1fds:hover:bg-[#1f376cb0]"}
        `,onClick:Te=>{Y(Ae)},children:[k===Ae?ra.cloneElement(we,{sx:{fontSize:24}}):ra.cloneElement(ke,{sx:{fontSize:24}}),w&&b.jsx("span",{className:"text-start ml-4 text-md font-RobotoMedium text-gray-800 dark:text-gray-300",children:pe})]}),G=[{id:"ride",icon:b.jsx(_re,{className:"text-gray-800 dark:text-gray-300"}),title:"Ride",tabgroup:b.jsxs(b.Fragment,{children:[b.jsx(F,{title:"Dashboard",activeIcon:b.jsx(N4,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(B4,{sx:{fontSize:24}}),id:"dashboard"}),b.jsx(F,{title:"My Rides",activeIcon:b.jsx(wse,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(Sse,{sx:{fontSize:24}}),id:"rider-flow/trips"}),b.jsx(F,{title:"Find a ride",activeIcon:b.jsx(pse,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(fse,{sx:{fontSize:24}}),id:"find-ride"})]}),mapArray:["dashboard","find-ride","ride-history"]},{id:"drive",icon:b.jsx(Nre,{className:"text-gray-800 dark:text-gray-300"}),title:"Drive",tabgroup:b.jsxs(b.Fragment,{children:[(_==null?void 0:_.driver_verified)&&b.jsxs(b.Fragment,{children:[b.jsx(F,{title:"Create Ride",activeIcon:b.jsx(bse,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(_se,{sx:{fontSize:24}}),id:"create-trip"}),b.jsx(F,{title:"My Trips",activeIcon:b.jsx(gse,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(mse,{sx:{fontSize:24}}),id:"my-trips"}),b.jsx(F,{title:"Find riders",activeIcon:b.jsx(Bj,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(yse,{sx:{fontSize:24}}),id:"find-riders"}),b.jsx(F,{title:"Ratings",activeIcon:b.jsx(vse,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(xse,{sx:{fontSize:24}}),id:"ratings"})]}),_.driver_applications&&(_==null?void 0:_.driver_applications.length)>0&&!_.driver_verified&&b.jsx(b.Fragment,{children:_.driver_applications.map((pe,we)=>b.jsx(F,{title:"Application "+(we+1),activeIcon:b.jsx(N4,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(B4,{sx:{fontSize:24}}),id:`driver-application?uuid=${pe.application_uuid}`,secondaryId:pe.application_uuid},pe.application_uuid))}),!_.driver_applications&&!_.driver_verified&&b.jsx(b.Fragment,{children:b.jsx(F,{title:"Apply",activeIcon:b.jsx(N4,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(B4,{sx:{fontSize:24}}),id:"driver-apply"})})]}),mapArray:["my-trips","find-riders","ratings"]},{id:"settings",icon:b.jsx(Lre,{className:"text-gray-800 dark:text-gray-300"}),title:"Settings",tabgroup:b.jsx(b.Fragment,{children:b.jsx(F,{title:"Profile",activeIcon:b.jsx(bA,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(bA,{sx:{fontSize:24}}),id:"profile"})}),mapArray:["profile"]}],[Q,te]=V.useState("ride");V.useEffect(()=>{const pe=G.find(we=>we.mapArray.includes(window.location.pathname.split("/")[1].replace("/","")));pe&&te(pe.id)},[window.location.pathname]),V.useEffect(()=>{const pe=we=>{B.current&&!B.current.contains(we.target)&&h&&i(!1)};return document.addEventListener("mousedown",pe),()=>document.removeEventListener("mousedown",pe)},[B,h,i]);const Y=pe=>{N(pe),h&&i(!1)},[oe,de]=V.useState(!1),[ge,be]=V.useState("");return b.jsx("div",{children:b.jsx("div",{className:`relative flex mobile:fixed lg:fixed flex-row items-center text-gray-300 
      ${e?" mt-10 h-[calc(100vh-2rem)] ":" h-full "}
        z-20
        bg-white dark:bg-[#0c0c0c]
        border-r-1 dark:border-neutral-800 border-neutral-300
        w-[16.5rem] 
        
    `,ref:B,children:b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsxs("div",{className:"flex flex-col w-full h-auto px-4 pt-4",children:[b.jsx("button",{onClick:pe=>{i(!1),pe.preventDefault(),pe.stopPropagation()},className:"absolute  lg:hidden left-[13.5rem] top-[1.35rem] text-white  rounded-full p-1 lightv1:hover:bg-slate-400 newdark:hover:bg-hoverlighternewdark darkv1:hover:bg-hover",children:b.jsx("div",{className:"flex justify-center items-center",children:b.jsx(Nj,{className:"text-black dark:text-white",sx:{fontSize:24}})})}),b.jsxs("div",{className:"flex flex-row items-center  space-x-2",children:[b.jsx("img",{src:d0,className:`w-12 h-12 items-center
                    rounded-md
                    dark:rounded-xs`,alt:"GatorPool"}),b.jsx("h1",{className:"text-md font-RobotoSemiBold text-black dark:text-white",children:"GatorPool"})]})]}),b.jsxs("div",{className:"flex flex-col px-0 py-4 min-w-[100%] w-full h-full",children:[b.jsx("div",{className:"flex flex-col w-full h-full space-y-4",children:G.map(pe=>b.jsxs("div",{className:"flex flex-col space-y-1 items-center w-full px-4",children:[b.jsxs("div",{className:"flex w-full justify-start flex-row items-center",children:[pe.icon,b.jsx("h1",{className:"ml-2 w-min text-md text-left font-RobotoSemiBold text-black dark:text-white",children:pe.title}),b.jsx("div",{className:"flex ml-2 w-full bg-gray-800 dark:bg-gray-300 rounded-full h-[2px]",children:" "})]}),pe.tabgroup]},pe.id))}),b.jsx("div",{className:`
                  flex  justify-center items-center laptop:border-none mt-auto md:mb-24 lg:mb-4 bg-transparent px-2`,children:b.jsxs("button",{className:`
                      ${w?" pl-6 ":" justify-center "}
                      flex items-center mb h-12 rounded-xl lg:mt-auto w-full   
                      ${k==="account"?" bg-transparent text-white  ":" hover:bg-neutral-200 dark:hover:bg-neutral-700"}
                      `,onClick:()=>{fetch(ma+"/oauth2/token",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""},body:JSON.stringify({grant_type:"revoke",scope:"internal",username:localStorage.getItem("X-GatorPool-Username")||""})}).then(pe=>pe.json()).then(pe=>{pe.success&&(localStorage.removeItem("X-GatorPool-Username"),window.location.href="/auth/signin")})},children:[b.jsx("div",{className:"  ",children:b.jsx(hse,{sx:{fontSize:24},className:"text-gray-800 dark:text-gray-300  "})}),w&&b.jsx("span",{className:` mt-1 ml-4 text-black dark:text-white  text-md font-RobotoRegular 
                            
                            `,children:"Sign Out"})]})})]})]})})})};function Tse(e,t){const[i,c]=V.useState(()=>{if(typeof window>"u")return t;try{const h=window.localStorage.getItem(e);return h?JSON.parse(h):t}catch(h){return console.error(h),t}});return V.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(i))}catch(h){console.error(h)}},[e,i]),[i,c]}const Ese="pk.eyJ1IjoibXVzdGFmYW1hc29keSIsImEiOiJjbTZva3FneTIwZjI5MmxvdWQ1dHY1NTlwIn0.oNPGEBsenNviLdx_qzcPWw",Cse=({statusCard:e,onClose:t,setAccountData:i})=>{const[c,h]=V.useState(""),[_,w]=V.useState(""),[n,k]=V.useState(""),[N,B]=V.useState(""),[F,G]=V.useState(""),[Q,te]=V.useState(""),[Y,oe]=V.useState([]),[de,ge]=V.useState(0),[be,pe]=V.useState(0),[we,ke]=V.useState(!1),Ae=async re=>{if(re.length<3){oe([]);return}const Te=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(re)}.json?access_token=${Ese}&autocomplete=true&limit=5`;try{const ue=await(await fetch(Te)).json();oe(ue.features||[])}catch(se){console.error("Error fetching geocode data:",se)}};return b.jsx(b.Fragment,{children:b.jsxs(b.Fragment,{children:[b.jsxs(CT,{className:"flex flex-col gap-1 text-black dark:text-white",children:[b.jsx("h1",{className:"text-2xl font-RobotoSemiBold",children:e.title}),b.jsx("p",{className:"text-sm font-RobotoLight",children:"Set your home address to book rides and request rides easier. Your address will be kept private unless you share it with a driver. It is held securely and encrypted in our database."})]}),b.jsxs(Lz,{children:[b.jsxs("div",{className:"relative",children:[b.jsx(Za,{placeholder:"Start typing address...",value:c,onChange:re=>{h(re.target.value),Ae(re.target.value)},className:"light dark:dark rounded-full mt-3 ",radius:"full"}),Y.length>0&&b.jsx("div",{className:"absolute z-50 w-full text-black dark:text-white max-h-96 overflow-y-scroll bg-white dark:bg-black border border-gray-300 dark:border-neutral-800 rounded-2xl shadow-lg mt-1",children:Y.map((re,Te)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200 dark:hover:bg-neutral-700",onClick:()=>{h(re.place_name),w(re.address),B(re.context.find(se=>se.id.includes("place")).text),G(re.context.find(se=>se.id.includes("region")).text),te(re.context.find(se=>se.id.includes("postcode")).text),ge(re.center[1]),pe(re.center[0]),oe([])},children:re.place_name},Te))})]}),b.jsx("p",{className:"text-sm ml-3 font-RobotoLight text-gray-700 dark:text-gray-300",children:"These results are powered by Mapbox."}),b.jsx(Za,{placeholder:"Apartment, unit number, etc.",value:n,onChange:re=>{k(re.target.value)},className:"light dark:dark rounded-full mt-3 ",radius:"full"})]}),b.jsxs(ET,{children:[b.jsx($r,{color:"danger",variant:"light",onPress:t,children:"Close"}),b.jsx($r,{isLoading:we,color:"primary",onPress:()=>{ke(!0),fetch(ma+"/v1/rider/address/save",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},body:JSON.stringify({address:c,address_line1:_,address_line2:n,city:N,state:F,zip:Q,latitude:de,longitude:be})}).then(re=>re.json()).then(re=>{ke(!1),re.success&&(t(),i(Te=>({...Te,status_cards:Te.status_cards.filter(se=>se.uuid!==e.uuid)})))}).catch(re=>{ke(!1),console.error("Error saving address:",re)})},children:"Save Address"})]})]})})},Dse=({statusCard:e,onClose:t,setAccountData:i})=>{const[c,h]=V.useState(!1),[_,w]=ra.useState("Yes"),[n,k]=ra.useState("Yes");return b.jsxs(b.Fragment,{children:[b.jsxs(CT,{className:"flex flex-col gap-1 text-black dark:text-white",children:[b.jsx("h1",{className:"text-2xl font-RobotoSemiBold",children:e.title}),b.jsx("p",{className:"text-sm font-RobotoLight",children:"Set your ride preferences to help drivers know what you are willing to pay for. This will help drivers know what you are willing to pay for and what you are not willing to pay for."})]}),b.jsxs(Lz,{children:[b.jsxs(i6,{label:"Willing to pay for food",value:_,onValueChange:w,children:[b.jsx(R1,{value:"Yes",children:"Yes"}),b.jsx(R1,{value:"No",children:"No"})]}),b.jsxs("p",{className:"text-default-500 text-small",children:["Selected: ",_]}),b.jsxs(i6,{className:"mt-4",label:"Willing to pay for gas",value:n,onValueChange:k,children:[b.jsx(R1,{value:"Yes",children:"Yes"}),b.jsx(R1,{value:"No",children:"No"})]}),b.jsxs("p",{className:"text-default-500 text-small",children:["Selected: ",n]})]}),b.jsxs(ET,{className:"flex flex-col",children:[b.jsx("p",{className:"text-default-500 text-small",children:"Note: These preferences can be changed when requesting or booking a ride. This is just a default preference to book and request trips faster."}),b.jsxs("div",{className:"flex flex-row gap-2 ml-auto",children:[b.jsx($r,{color:"danger",variant:"light",onPress:t,children:"Close"}),b.jsx($r,{isLoading:c,color:"primary",onPress:()=>{h(!0),fetch(ma+"/v1/rider/preferences/save",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},body:JSON.stringify({pay_for_food:_==="Yes",pay_for_gas:n==="Yes"})}).then(N=>N.json()).then(N=>{h(!1),N.success&&(t(),i(B=>({...B,status_cards:B.status_cards.filter(F=>F.uuid!==e.uuid)})))}).catch(N=>{h(!1),console.error("Error saving address:",N)})},children:"Save Address"})]})]})]})},Pse=({statusCard:e,onClose:t,setAccountData:i})=>{const[c,h]=V.useState(!1);return b.jsxs(b.Fragment,{children:[b.jsxs(CT,{className:"flex flex-col gap-1 text-black dark:text-white",children:[b.jsx("h1",{className:"text-2xl font-RobotoSemiBold",children:e.title}),b.jsx("p",{className:"text-sm font-RobotoLight",children:"Enable Two-Factor Authentication to secure your account. This will help protect your account from unauthorized access and keep your account secure."})]}),b.jsx(ET,{className:"flex flex-col",children:b.jsxs("div",{className:"flex flex-row gap-2 ml-auto",children:[b.jsx($r,{color:"danger",variant:"light",onPress:t,children:"Close"}),b.jsx($r,{isLoading:c,color:"primary",onPress:()=>{h(!0),fetch(ma+"/v1/account/auth/2fa",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},body:JSON.stringify({})}).then(_=>_.json()).then(_=>{h(!1),_.success&&(t(),i(w=>({...w,status_cards:w.status_cards.filter(n=>n.uuid!==e.uuid)})))}).catch(_=>{h(!1),console.error("Error saving address:",_)})},children:"Save Address"})]})})]})},Mse=({statusCards:e,setAccountData:t})=>{const{isOpen:i,onOpen:c,onOpenChange:h}=CQ(),[_,w]=ra.useState(null);return b.jsxs("div",{className:"flex flex-col space-y-4 overflow-x-auto",children:[b.jsx("h1",{className:"text-black dark:text-white text-2xl font-RobotoSemiBold",children:"Recommended Actions"}),b.jsx("div",{className:"flex flex-row space-x-4",children:e.map(n=>b.jsx(jj,{color:n.type,title:n.title,description:n.description,className:"min-w-96",children:b.jsx("div",{className:"flex items-center gap-1 mt-3",children:b.jsx($r,{className:"bg-background text-default-700 font-medium border-1 shadow-small",size:"sm",variant:"bordered",onPress:()=>{n.display_type==="drawer"&&(w(n),c())},children:n.action_name})})},n.uuid))}),b.jsx(b.Fragment,{children:b.jsx(Jee,{className:"light dark:dark",isOpen:i,onOpenChange:h,children:b.jsx(wQ,{children:n=>(_==null?void 0:_.action)==="rider_add_address"?b.jsx(Cse,{setAccountData:t,statusCard:_,onClose:n}):(_==null?void 0:_.action)==="rider_payment_preferences"?b.jsx(Dse,{setAccountData:t,statusCard:_,onClose:n}):(_==null?void 0:_.action)==="account_two_fa"?b.jsx(Pse,{setAccountData:t,statusCard:_,onClose:n}):b.jsx("h1",{className:"text-black dark:text-white text-2xl font-RobotoSemiBold",children:"No action found"})})})})]})},jj=ra.forwardRef(({title:e,children:t,variant:i="faded",color:c="secondary",description:h,className:_,classNames:w={},...n},k)=>{const N=ra.useMemo(()=>{switch(c){case"default":return"before:bg-default-300";case"primary":return"before:bg-primary";case"secondary":return"before:bg-secondary";case"success":return"before:bg-success";case"warning":return"before:bg-warning";case"danger":return"before:bg-danger";default:return"before:bg-default-200"}},[]);return b.jsx(Xee,{ref:k,classNames:{...w,base:Zg(["bg-default-50 dark:bg-background shadow-sm","border-1 border-default-200 dark:border-default-100","relative before:content-[''] before:absolute before:z-10","before:left-0 before:top-[-1px] before:bottom-[-1px] before:w-1","rounded-l-none border-l-0",N],w.base,_),mainWrapper:Zg("pt-1",w.mainWrapper),iconWrapper:Zg("dark:bg-transparent",w.iconWrapper)},color:c,title:e,description:h,variant:i,...n,children:t})});jj.displayName="CustomAlert";const Ase=({accountData:e,setAccountData:t})=>{var _,w,n,k;const i=xs(),[c,h]=V.useState("");return b.jsxs("div",{className:"flex flex-col space-y-8 bg-white dark:bg-[#0c0c0c] min-h-screen p-8",children:[b.jsxs("div",{className:"flex flex-row items-center justify-between",children:[b.jsxs("div",{className:"flex flex-row items-center space-x-4",children:[b.jsx("img",{src:e.profile_picture,className:"h-16 w-16 rounded-full"}),b.jsxs("div",{className:"flex flex-col ",children:[b.jsxs("h1",{className:"text-black dark:text-white text-xl font-RobotoSemiBold",children:["Welcome, ",e==null?void 0:e.first_name," ",e==null?void 0:e.last_name]}),b.jsx("h2",{className:"text-black dark:text-white text-sm font-RobotoRegular",children:new Date().toDateString()})]})]}),b.jsxs("div",{className:"flex flex-row items-center space-x-2",children:[b.jsx(Za,{placeholder:"Search",value:c,onChange:N=>h(N.target.value),className:"hidden lg:block light dark:dark rounded-full w-72",radius:"full"}),b.jsx("button",{className:"bg-green-600 hover:bg-green-700 dark:bg-gator-translucent hover:bg-gator-translucent2 p-3 rounded-full",children:b.jsx(xre,{className:"text-white",size:24})})]})]}),b.jsxs("div",{className:"grid gap-4 grid-cols-2 md:grid-cols-3",children:[b.jsxs("div",{className:"flex flex-col bg-slate-100 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Upcoming Trips"}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoRegular text-lg",children:(_=e==null?void 0:e.dashboard_stats)==null?void 0:_.upcoming_trips})]}),b.jsxs("div",{className:"flex flex-col bg-slate-100 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Past Trips"}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoRegular text-lg",children:(w=e==null?void 0:e.dashboard_stats)==null?void 0:w.past_trips})]}),b.jsxs("div",{className:"flex flex-col bg-slate-100 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Account Type"}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoRegular text-lg",children:(n=e==null?void 0:e.dashboard_stats)==null?void 0:n.account_type})]})]}),(e==null?void 0:e.status_cards)&&(e==null?void 0:e.status_cards.length)>0&&b.jsx(Mse,{statusCards:e.status_cards,setAccountData:t}),b.jsxs("div",{className:"flex flex-col w-full",children:[b.jsx("h1",{className:"text-black mb-4 dark:text-white text-2xl font-RobotoSemiBold",children:"Feed"}),b.jsx("div",{className:"grid w-full grid-cols-1 lg:grid-cols-3 gap-8",children:(k=e==null?void 0:e.bottom_actions)==null?void 0:k.map((N,B)=>b.jsxs("div",{className:`
                            ${N.color==="default"?" bg-neutral-800 text-black dark:text-white ":N.color==="orange_gradient"?" text-white bg-gradient-to-r from-orange-400 to-rose-800 ":N.color==="green_gradient"?" text-white bg-gradient-to-r from-green-400 to-emerald-800 ":" bg-neutral-800 text-black dark:text-white "}
                            w-full h-[28rem] rounded-2xl p-6 relative col-span-1`,children:[b.jsx("h1",{className:"text-white font-RobotoSemiBold text-2xl",children:N.title}),b.jsx("p",{className:"text-white font-RobotoRegular text-lg",children:N.description}),b.jsx($r,{endContent:b.jsx(kre,{size:14}),onPress:()=>{(N.action==="book_trip_flow"||N.action==="book_trip")&&i("/find-ride")},className:"absolute bottom-6 bg-opacity-50 right-6 text-white font-RobotoRegular",size:"md",children:N.action_name}),b.jsx("img",{src:N.display_blob,className:"absolute bottom-2 left-2 h-48 w-48"})]},N.uuid))})]})]})},kse="/assets/social-DJmtE0d1.png",Rse=({accountData:e,setAccountData:t})=>{const[i,c]=V.useState(e==null?void 0:e.first_name),[h,_]=V.useState(e==null?void 0:e.last_name),[w,n]=V.useState(e==null?void 0:e.email),[k,N]=V.useState(""),[B,F]=V.useState(mk("2024-04-04")),[G,Q]=V.useState(""),[te,Y]=V.useState(""),[oe,de]=V.useState(""),[ge,be]=V.useState(""),[pe,we]=V.useState(""),[ke,Ae]=V.useState(""),[re,Te]=V.useState(""),[se,ue]=V.useState(""),[De,ce]=V.useState(""),[je,Le]=V.useState(""),[Re,Ge]=V.useState(""),[ze,ot]=V.useState(""),[Ee,Ke]=V.useState(""),[nt,Xe]=V.useState(1);return b.jsxs("div",{className:"flex flex-col space-y- bg-white dark:bg-black min-h-screen p-8",children:[b.jsx("h1",{className:"text-black dark:text-white text-2xl font-RobotoSemiBold",children:"Apply to become a driver"}),b.jsxs("div",{className:"flex flex-col lg:flex-row w-full mt-16",children:[b.jsxs("div",{className:"flex flex-col h-[40rem] w-full lg:w-1/2 h-full",children:[nt===1&&b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("h1",{className:"text-black dark:text-white text-xl font-RobotoSemiBold",children:"Basic Information"}),b.jsx("h1",{className:"text-black dark:text-white text-md mb-1 font-RobotoRegular",children:"Enter your details as it appears on your government ID."}),b.jsxs("div",{className:"flex flex-row w-full mt-4 space-x-4 items-center",children:[b.jsx(Za,{type:"name",label:"First Name",placeholder:"Enter your first name",value:i,onChange:ut=>c(ut.target.value),className:"mobile:w-full   text-black dark:text-white"}),b.jsx(Za,{type:"name",label:"Last Name",placeholder:"Enter your last name",value:h,onChange:ut=>_(ut.target.value),className:"mobile:w-full   text-black dark:text-white"})]}),b.jsxs("div",{className:"flex flex-row w-full space-x-4 items-center",children:[b.jsx(Za,{type:"email",label:"Email",disabled:!0,value:w,placeholder:"Enter your email",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsx(Za,{type:"text",label:"Phone Number",value:k,onChange:ut=>N(ut.target.value),placeholder:"Enter phone number (XXX-XXX-XXXX)",className:"mobile:w-full mt-4   text-black dark:text-white"})]}),b.jsx("h1",{className:"text-black dark:text-white text-xl mt-10 font-RobotoSemiBold",children:"Legal Information"}),b.jsx("h1",{className:"text-black dark:text-white text-md mt- mb-4 font-RobotoRegular",children:"Federal and state law requires drivers of any digitalized ridesharing platform to be of at least 18 years of age."}),b.jsx(yx,{className:"max-w-[284px] light dark:dark",label:"Date of Birth",value:B,onChange:F}),b.jsx(Za,{type:"text",label:"Address",value:G,onChange:ut=>Q(ut.target.value),placeholder:"Enter your address",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsx(Za,{type:"text",label:"Address Line 2",value:te,onChange:ut=>Y(ut.target.value),placeholder:"Enter your address (optional)",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsxs("div",{className:"flex flex-row w-full space-x-4 items-center",children:[b.jsx(Za,{type:"text",label:"City",value:oe,onChange:ut=>de(ut.target.value),placeholder:"Enter your city",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsx(Za,{type:"text",label:"State",value:ge,onChange:ut=>be(ut.target.value),placeholder:"Enter your state",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsx(Za,{type:"text",label:"Zip",value:pe,onChange:ut=>we(ut.target.value),placeholder:"Enter zip code",className:"mobile:w-full mt-4   text-black dark:text-white"})]})]}),nt===1&&b.jsx("div",{className:"flex flex-row mt-4 items-center space-x-4 ml-auto mt-",children:b.jsx($r,{onClick:()=>Xe(2),className:"bg-green-600 hover:bg-green-500 text-white dark:bg-gator-translucent p-4 rounded-full",children:"Next"})}),nt===2&&b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("h1",{className:"text-black dark:text-white text-xl font-RobotoSemiBold",children:"Vehicle Information"}),b.jsx("h1",{className:"text-black dark:text-white text-md mb-1 font-RobotoRegular",children:"Enter the details for the vehicle you will primarily be using to host trips."}),b.jsxs("div",{className:"flex flex-row w-full mt-4 space-x-4 items-center",children:[b.jsx(Za,{type:"text",label:"Make",placeholder:"Make of vehicle",value:ke,onChange:ut=>Ae(ut.target.value),className:"mobile:w-full   text-black dark:text-white"}),b.jsx(Za,{type:"text",label:"Model",placeholder:"Model of vehicle",value:re,onChange:ut=>Te(ut.target.value),className:"mobile:w-full   text-black dark:text-white"})]}),b.jsxs("div",{className:"flex flex-row w-full space-x-4 items-center",children:[b.jsx(Za,{type:"text",label:"Year",value:se,onChange:ut=>ue(ut.target.value),placeholder:"Model year",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsx(Za,{type:"text",label:"Color",value:De,onChange:ut=>ce(ut.target.value),placeholder:"Color of vehicle",className:"mobile:w-full mt-4   text-black dark:text-white"})]}),b.jsxs("div",{className:"flex flex-row w-full space-x-4",children:[b.jsx(Za,{type:"number",label:"Seats",value:ze,onChange:ut=>ot(ut.target.value),placeholder:"Number of seats",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsxs("div",{className:"flex flex-col w-full",children:[b.jsx(Za,{type:"number",label:"Lugroom",value:Ee,onChange:ut=>Ke(ut.target.value),placeholder:"Amount of luggage room",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-xs mt-2",children:"Enter the amount of luggage that can fit in the trunk."})]})]}),b.jsx("h1",{className:"text-black dark:text-white text-xl mt-10 font-RobotoSemiBold",children:"Legal Information"}),b.jsx("h1",{className:"text-black dark:text-white text-md mt- mb-2 font-RobotoRegular",children:"Federal and state law requires vehicle information to be securely stored on any digitalized ridesharing platform."}),b.jsxs("div",{className:"flex flex-row w-full space-x-4 items-center",children:[b.jsx(Za,{type:"text",label:"License Plate",value:je,onChange:ut=>Le(ut.target.value),placeholder:"Enter license plate",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsx(Za,{type:"text",label:"State",value:Re,onChange:ut=>Ge(ut.target.value),placeholder:"Enter license state",className:"mobile:w-full mt-4   text-black dark:text-white"})]})]}),nt===2&&b.jsxs("div",{className:"flex flex-row mt-4 items-center space-x-4 ml-auto mt-",children:[b.jsx($r,{onClick:()=>Xe(1),className:"bg-neutral-200 hover:bg-neutral-300 text-black dark:text-white dark:bg-neutral-800 dark:hover:bg-neutral-700 p-4 rounded-full",children:"Previous"}),b.jsx($r,{onClick:()=>Xe(3),className:"bg-green-600 hover:bg-green-500 text-white dark:bg-gator-translucent p-4 rounded-full",children:"Next"})]}),nt===3&&b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("h1",{className:"text-black dark:text-white text-xl font-RobotoSemiBold",children:"Agreement"}),b.jsx("p",{className:"text-black dark:text-white text-sm font-RobotoRegular",children:"By submitting this application, I certify that all information provided is accurate and truthful to the best of my knowledge. I understand that applying to become a driver does not guarantee acceptance, and my eligibility will be reviewed based on the platforms requirements. I agree to abide by all local, state, and federal laws while using this ridesharing platform and acknowledge that any false information or violation of terms may result in the rejection or termination of my application. Additionally, I consent to background and vehicle checks as part of the approval process."})]}),nt===3&&b.jsxs("div",{className:"flex flex-row mt-4 items-center space-x-4 ml-auto mt-",children:[b.jsx($r,{onClick:()=>Xe(2),className:"bg-neutral-200 hover:bg-neutral-300 text-black dark:text-white dark:bg-neutral-800 dark:hover:bg-neutral-700 p-4 rounded-full",children:"Previous"}),b.jsx($r,{onClick:()=>{fetch(ma+"/v1/driver/apply",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},body:JSON.stringify({first_name:i,last_name:h,email:w,phone:k,dob:B.toString(),address:G,address_line_2:te,city:oe,state:ge,zip:pe,make:ke,model:re,year:se,color:De,license_plate:je,license_state:Re,seats:parseInt(ze),lugroom:parseInt(Ee)})}).then(ut=>ut.json()).then(ut=>{ut.success?window.location.href="/driver-application?uuid="+ut.application_uuid:alert(ut.error)}).catch(ut=>{console.error(ut),alert(ut)})},className:"bg-green-600 hover:bg-green-500 text-white dark:bg-gator-translucent p-4 rounded-full",children:"Finish"})]})]}),b.jsx("div",{className:"flex w-full lg:w-1/2 h-full items-center justify-center",children:b.jsx("img",{src:kse,className:"h-96 w-96"})})]})]})},Ise=()=>{var _,w,n,k,N,B,F,G;const[e,t]=V.useState(null),i=jf(),[c,h]=V.useState(null);return V.useEffect(()=>{const te=new URLSearchParams(i.search).get("uuid");t(te),fetch(ma+"/v1/driver/application/"+te,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")}}).then(Y=>Y.json()).then(Y=>{Y.success?h(Y.driver_application):alert(Y.error)}).catch(Y=>{console.error(Y),alert(Y)})},[i]),b.jsxs("div",{className:"flex flex-col space-y- bg-white dark:bg-black min-h-screen p-8",children:[b.jsxs("h1",{className:"text-black dark:text-white text-3xl font-RobotoBold",children:["Your application is ",c!=null&&c.closed?b.jsx("span",{className:"text-red-500",children:"closed"}):b.jsx("span",{className:"text-green-500",children:"open"})]}),b.jsxs("div",{className:"flex flex-col max-w-[28rem]",children:[b.jsx("h1",{className:"text-black dark:text-white text-lg mt-8 font-RobotoSemiBold",children:"Status"}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Status: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c!=null&&c.accepted?"Accepted":c!=null&&c.closed?"Rejected":"Pending"})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Created At: ",b.jsx("span",{className:"font-RobotoSemiBold",children:new Date(c==null?void 0:c.created_at).toLocaleString()})]}),b.jsx("h1",{className:"text-black dark:text-white text-lg mt-8 font-RobotoSemiBold",children:"Application Details"}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Full Name: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.full_name})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Email: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.email})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Phone Number: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.phone_number})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Date of Birth: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.date_of_birth})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Address: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.address})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Address Line 2: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.address_line_2})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["City: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.city})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["State: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.state})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Zip Code: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.zip_code})]}),b.jsx("h1",{className:"text-black dark:text-white text-lg mt-8 font-RobotoSemiBold",children:"Vehicle Details"}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Make: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(_=c==null?void 0:c.vehicle)==null?void 0:_.make})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Model: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(w=c==null?void 0:c.vehicle)==null?void 0:w.model})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Year: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(n=c==null?void 0:c.vehicle)==null?void 0:n.year})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Color: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(k=c==null?void 0:c.vehicle)==null?void 0:k.color})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["License Plate: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(N=c==null?void 0:c.vehicle)==null?void 0:N.license_plate})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["State: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(B=c==null?void 0:c.vehicle)==null?void 0:B.state})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Seats: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(F=c==null?void 0:c.vehicle)==null?void 0:F.seats})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Lugroom: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(G=c==null?void 0:c.vehicle)==null?void 0:G.lugroom})]})]})]})},zse=({tripOptions:e,setTripOptions:t,accountData:i,setCurrentPage:c})=>{var w,n,k,N;const[h,_]=V.useState(!1);return b.jsx("div",{className:"flex flex-col w-full gap-4 h-full",children:b.jsxs("div",{className:"flex flex-col h-full ",children:[b.jsx("h1",{className:"font-RobotoBold text-xl text-black dark:text-white",children:"Set Fare Price"}),b.jsx("p",{className:"font-RobotoRegular text-sm max-w-md text-black dark:text-white",children:"Set the price for your trip. This will be the price that passengers will pay for different aspects of the trip. By default, there are 3 prices for trip, gas, and food. You may leave any field blank which will be shown on the rider feed. GatorPool does not handle payments. It is between you and the driver to handle payments."}),b.jsx(Za,{type:"number",placeholder:"Trip Price",label:"Trip",value:""+((w=e==null?void 0:e.fare)==null?void 0:w.trip),onChange:B=>{t(F=>({...F,fare:{...F.fare,trip:parseFloat(B.target.value)}}))},className:"mt-4 max-w-sm"}),b.jsx("p",{className:"font-RobotoRegular text-xs max-w-sm text-neutral-500",children:"This is the fare price for the actual trip. Riders will be able to view this."}),b.jsx(Za,{type:"number",placeholder:"Gas Price",label:"Gas",value:""+((n=e==null?void 0:e.fare)==null?void 0:n.gas),onChange:B=>{t(F=>({...F,fare:{...F.fare,gas:parseFloat(B.target.value)}}))},className:"mt-4 max-w-sm"}),b.jsx("p",{className:"font-RobotoRegular text-xs max-w-sm text-neutral-500",children:"This is the fare price for gas. Riders will be able to view this."}),b.jsx(Za,{type:"number",placeholder:"Food Price",label:"Food",value:""+((k=e==null?void 0:e.fare)==null?void 0:k.food),onChange:B=>{t(F=>({...F,fare:{...F.fare,food:parseFloat(B.target.value)}}))},className:"mt-4 max-w-sm"}),b.jsx("p",{className:"font-RobotoRegular text-xs max-w-sm text-neutral-500",children:"This is the fare price for food. Riders will be able to view this."}),b.jsxs("div",{className:"flex flex-row mt-12",children:[b.jsx(gi,{isSelected:(N=e==null?void 0:e.fare)==null?void 0:N.accepted_terms,onValueChange:B=>{t(F=>({...F,fare:{...F.fare,accepted_terms:B}}))}}),b.jsx("p",{className:"font-RobotoRegular text-sm max-w-sm text-black dark:text-white",children:"I agree that payment handling is between me and the rider."})]}),b.jsxs("div",{className:"flex flex-row w-full mt-auto ml-auto space-x-4",children:[b.jsx($r,{className:"ml-auto ",color:"default",onClick:()=>{c(1)},children:"Previous"}),b.jsx($r,{className:"",color:"primary",onClick:()=>{var B;if(!((B=e==null?void 0:e.fare)!=null&&B.accepted_terms)){console.log("tripOptions",e),alert("You must agree to the payment terms to continue.");return}c(3)},children:"Next"})]})]})})},Lse=({tripOptions:e,setTripOptions:t,accountData:i,setCurrentPage:c})=>{var w,n,k,N,B;const[h,_]=V.useState(!1);return V.useEffect(()=>{fetch(ma+"/v1/driver/gender",{method:"GET",credentials:"include",headers:{"X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")}}).then(F=>F.json()).then(F=>{F.success&&_((F==null?void 0:F.gender)==="female")}).catch(F=>{console.error(F),alert("Error on request: "+F)})},[]),b.jsxs("div",{className:"flex flex-col w-full gap-4 h-full",children:[b.jsx("div",{className:"flex flex-col max-h-[28rem] ",children:b.jsx("h1",{className:"font-RobotoBold text-xl text-black dark:text-white",children:"Preferences"})}),b.jsx("h1",{className:"font-RobotoBold text-l text-black dark:text-white mt-4",children:"Music"}),b.jsxs("div",{className:"flex flex-row",children:[b.jsx(gi,{isSelected:(w=e==null?void 0:e.music_preferences)==null?void 0:w.can_be_controlled,onValueChange:F=>{t(G=>({...G,music_preferences:{...G.music_preferences,can_be_controlled:F}}))}}),b.jsx("p",{className:"font-RobotoRegular text-sm max-w-sm text-black dark:text-white",children:"Rider can change or request music on the trip."})]}),b.jsx("h1",{className:"font-RobotoBold text-l text-black dark:text-white mt-4",children:"Air Conditioning"}),b.jsxs("div",{className:"flex flex-row",children:[b.jsx(gi,{isSelected:(n=e==null?void 0:e.ac_preferences)==null?void 0:n.can_be_controlled,onValueChange:F=>{t(G=>({...G,ac_preferences:{...G.ac_preferences,can_be_controlled:F}}))}}),b.jsx("p",{className:"font-RobotoRegular text-sm max-w-sm text-black dark:text-white",children:"Rider can change or request to change the car AC."})]}),b.jsx("h1",{className:"font-RobotoBold text-l text-black dark:text-white mt-4",children:"Conversating"}),b.jsx("div",{className:"flex flex-row",children:b.jsxs(TT,{children:[b.jsx(ST,{children:b.jsx($r,{className:"capitalize",variant:"bordered",children:(k=e==null?void 0:e.talking_preferences)!=null&&k.silent?"Silent":(N=e==null?void 0:e.talking_preferences)!=null&&N.minimal?"Minimal":"Open"})}),b.jsxs(wT,{disallowEmptySelection:!0,"aria-label":"Single selection example",selectionMode:"single",variant:"flat",onSelectionChange:F=>{const G=Array.from(F)[0];t(Q=>({...Q,talking_preferences:{silent:G==="silent",minimal:G==="minimal",requests:{}}})),console.log(G)},children:[b.jsx(_m,{children:"Open"},"open"),b.jsx(_m,{children:"Minimal"},"minimal"),b.jsx(_m,{children:"Silent"},"silent")]})]})}),h&&b.jsxs(b.Fragment,{children:[b.jsx("h1",{className:"font-RobotoBold text-l text-black dark:text-white mt-4",children:"Gender Preference"}),b.jsxs("div",{className:"flex flex-row",children:[b.jsx(gi,{isSelected:(B=e==null?void 0:e.rider_requirements)==null?void 0:B.females_only,onValueChange:F=>{t(G=>({...G,rider_requirements:{...G.rider_requirements,females_only:F}}))}}),b.jsx("p",{className:"font-RobotoRegular text-sm max-w-sm text-black dark:text-white",children:"Restrict your requests to only females."})]})]}),b.jsxs("div",{className:"flex flex-row w-full mt-auto ml-auto space-x-4",children:[b.jsx($r,{className:"ml-auto ",color:"default",onClick:()=>{c(2)},children:"Previous"}),b.jsx($r,{className:"",color:"primary",onClick:()=>{c(4)},children:"Next"})]})]})},$se=({tripOptions:e,setTripOptions:t,accountData:i,setCurrentPage:c})=>b.jsxs("div",{className:"flex flex-col w-full gap-4 h-full",children:[b.jsxs("div",{className:"flex flex-col w-full h-full overflow-y-auto",children:[b.jsx("h1",{className:"font-RobotoBold text-xl text-black dark:text-white",children:"Carpooling"}),b.jsxs("p",{className:"font-RobotoRegular text-sm max-w-md text-black dark:text-white",children:["Check the box below if you want to have more than one passenger on this trip. "," ","Carpooling is a great way to save money and is apart of GatorPool's mission to reduce carbon emissions. "," ","Safety features will be available to all passengers during the trip, as well as the driver."]}),b.jsxs("div",{className:"flex flex-row mt-4",children:[b.jsx(gi,{isSelected:e==null?void 0:e.carpool,onValueChange:h=>{t(_=>({..._,carpool:h}))}}),b.jsx("p",{className:"font-RobotoRegular text-sm max-w-sm text-black dark:text-white",children:"Carpool"})]})]}),b.jsxs("div",{className:"flex flex-row w-full mt-auto ml-auto space-x-4",children:[b.jsx($r,{className:"ml-auto ",color:"default",onClick:()=>{c(3)},children:"Previous"}),b.jsx($r,{className:"",color:"primary",onClick:()=>{c(5)},children:"Next"})]})]}),Xy={"Content-Type":"application/json",Accept:"application/json","Accept-Encoding":"gzip, deflate, br, zstd","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},Nse=({tripOptions:e,setTripOptions:t,accountData:i,setCurrentPage:c})=>{var B,F,G,Q,te,Y,oe,de,ge,be,pe,we,ke;const[h,_]=V.useState(!1),[w,n]=V.useState(null),k=xs(),N=async()=>{_(!0),fetch(ma+"/v1/trip",{method:"POST",headers:Xy,credentials:"include",body:JSON.stringify({tripOptions:e})}).then(Ae=>Ae.json()).then(Ae=>{Ae.success?(_(!1),k("/my-trips")):n(Ae.error)}).catch(Ae=>{n("An error occurred while creating the trip. Please try again later.")})};return b.jsxs("div",{className:"flex flex-col w-full gap-4 h-full",children:[b.jsxs("div",{className:"flex flex-col w-full max-h-[calc(100vh-8rem)] overflow-y-auto",children:[b.jsx("h1",{className:"font-RobotoBold text-3xl text-black dark:text-white",children:"Let's get you on the road"}),b.jsx("p",{className:"font-RobotoRegular mt-1 text-sm max-w-md text-black dark:text-white",children:"View a summary of your trip before you post it. Make sure all the information is correct before proceeding."}),b.jsx("h1",{className:"font-RobotoSemiBold text-2xl text-black dark:text-white mt-4",children:"General Information"}),b.jsxs("div",{className:"flex flex-row items-center mt-2",children:[b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("div",{className:"flex flex-col",children:[b.jsx("p",{className:"font-RobotoSemiBold text-lg text-black dark:text-white",children:"From"}),b.jsx("p",{className:"font-RobotoRegular text-sm text-black dark:text-white",children:(B=e==null?void 0:e.from)==null?void 0:B.text})]}),b.jsxs("div",{className:"flex flex-col mt-4",children:[b.jsx("p",{className:"font-RobotoSemiBold text-lg text-black dark:text-white",children:"To"}),b.jsx("p",{className:"font-RobotoRegular text-sm text-black dark:text-white",children:(F=e==null?void 0:e.to)==null?void 0:F.text})]})]}),b.jsx("div",{className:"h-full w-[0.3rem] mx-4 rounded-t-lg rounded-b-lg bg-neutral-400 dark:bg-neutral-700"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("div",{className:"flex flex-col ",children:[b.jsx("p",{className:"font-RobotoSemiBold text-lg text-black dark:text-white",children:"When"}),b.jsx("p",{className:"font-RobotoRegular text-sm text-black dark:text-white",children:new Date(e==null?void 0:e.datetime).toLocaleString()})]}),b.jsxs("div",{className:"flex flex-col mt-4",children:[b.jsx("p",{className:"font-RobotoSemiBold text-lg text-black dark:text-white",children:"Dropoff Radius"}),b.jsxs("p",{className:"font-RobotoRegular text-sm text-black dark:text-white",children:[e==null?void 0:e.radius," miles"]})]})]})]}),b.jsx("h1",{className:"font-RobotoSemiBold text-2xl text-black dark:text-white mt-6",children:"Fare Details"}),b.jsxs("div",{className:"flex flex-col mt-2",children:[b.jsxs("div",{className:"flex flex-col ",children:[b.jsx("p",{className:"font-RobotoSemiBold text-lg text-black dark:text-white",children:"Trip Price"}),b.jsx("p",{className:"font-RobotoRegular text-sm text-black dark:text-white",children:((G=e==null?void 0:e.fare)==null?void 0:G.trip)||"N/A"})]}),b.jsxs("div",{className:"flex flex-col mt-4",children:[b.jsx("p",{className:"font-RobotoSemiBold text-lg text-black dark:text-white",children:"Gas Price"}),b.jsx("p",{className:"font-RobotoRegular text-sm text-black dark:text-white",children:((Q=e==null?void 0:e.fare)==null?void 0:Q.gas)||"N/A"})]}),b.jsxs("div",{className:"flex flex-col mt-4",children:[b.jsx("p",{className:"font-RobotoSemiBold text-lg text-black dark:text-white",children:"Food Price"}),b.jsx("p",{className:"font-RobotoRegular text-sm text-black dark:text-white",children:((te=e==null?void 0:e.fare)==null?void 0:te.food)||"N/A"})]})]}),b.jsx("h1",{className:"font-RobotoSemiBold text-2xl text-black dark:text-white mt-6",children:"Preferences"}),b.jsxs("div",{className:"flex flex-col mt-2",children:[b.jsxs("div",{className:"flex flex-row items-center space-x-2 ",children:[b.jsx("p",{className:"font-RobotoRegular text-lg text-black dark:text-white",children:"Rider can change or request music?"}),b.jsx("p",{className:`font-RobotoRegular text-lg 
                                ${(Y=e==null?void 0:e.music_preferences)!=null&&Y.can_be_controlled?"text-green-500":"text-red-500"}`,children:(oe=e==null?void 0:e.music_preferences)!=null&&oe.can_be_controlled?"Yes":"No"})]}),b.jsxs("div",{className:"flex flex-row items-center space-x-2 mt-2",children:[b.jsx("p",{className:"font-RobotoRegular text-lg text-black dark:text-white",children:"Rider can change or request to change the AC?"}),b.jsx("p",{className:`font-RobotoRegular text-lg 
                                ${(de=e==null?void 0:e.ac_preferences)!=null&&de.can_be_controlled?"text-green-500":"text-red-500"}`,children:(ge=e==null?void 0:e.ac_preferences)!=null&&ge.can_be_controlled?"Yes":"No"})]}),b.jsxs("div",{className:"flex flex-row items-center space-x-2 mt-2",children:[b.jsx("p",{className:"font-RobotoRegular text-lg text-black dark:text-white",children:"Conversating:"}),b.jsx("p",{className:`font-RobotoRegular text-lg 
                                ${(be=e==null?void 0:e.talking_preferences)!=null&&be.minimal?"text-green-500":(pe=e==null?void 0:e.talking_preferences)!=null&&pe.silent?"text-blue-500":"text-red-500"}`,children:(we=e==null?void 0:e.talking_preferences)!=null&&we.minimal?"Minimal":(ke=e==null?void 0:e.talking_preferences)!=null&&ke.silent?"Silent":"Open"})]})]}),b.jsx("h1",{className:"font-RobotoSemiBold text-2xl text-black dark:text-white mt-6",children:"Carpooling"}),b.jsx("div",{className:"flex flex-col mt-0",children:b.jsx("div",{className:"flex flex-col ",children:b.jsx("p",{className:`font-RobotoSemiBold text-lg 
                                ${e!=null&&e.carpool?"text-green-500":"text-red-500"}`,children:e!=null&&e.carpool?"Carpooling is enabled for this trip":"Carpooling is disabled for this trip"})})})]}),b.jsxs("div",{className:"flex flex-row w-full mt-auto ml-auto space-x-4",children:[b.jsx($r,{className:"ml-auto ",color:"default",onClick:()=>{c(4)},children:"Previous"}),b.jsx($r,{isLoading:h,className:"text-white",color:"primary",onClick:()=>{N()},children:"Create Trip"})]}),w&&b.jsx("h1",{className:"text-red-500",children:w})]})},j4="pk.eyJ1IjoibXVzdGFmYW1hc29keSIsImEiOiJjbTZva3FneTIwZjI5MmxvdWQ1dHY1NTlwIn0.oNPGEBsenNviLdx_qzcPWw";let Bse=`
{
    "from": {
        "text": "University of Florida",
        "lat": 29.644906,
        "lng": -82.350441,
        "expected": 1742409922000
    },
    "radius": 15,
    "carpool": false
}`;const jse=({accountData:e,setAccountData:t})=>{var Re,Ge;const[i,c]=V.useState({lat:29.6436,lng:-82.3549}),[h,_]=V.useState(null),[w,n]=V.useState("University of Florida"),[k,N]=V.useState(""),[B,F]=V.useState(null),G=V.useRef(null),[Q,te]=V.useState(0);let[Y,oe]=ra.useState(Lf(new Date().toISOString()));const de=V.useRef(null),[ge,be]=V.useState([]),[pe,we]=V.useState([]),[ke,Ae]=V.useState(!1),[re,Te]=V.useState(JSON.parse(Bse)),[se,ue]=V.useState(1),De=async(ze,ot)=>{if(ze.length<3){ot==="from"?be([]):we([]);return}const Ee=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(ze)}.json?access_token=${j4}&autocomplete=true&limit=5`;try{const nt=await(await fetch(Ee)).json();ot==="from"?be(nt.features||[]):we(nt.features||[])}catch(Ke){console.error("Error fetching geocode data:",Ke)}};V.useEffect(()=>{if(!ke||!de.current)return;Ks.accessToken=j4;const ze=new Ks.Map({container:de.current,style:"mapbox://styles/mustafamasody/cm6olrhpt000k01qrebc2e55u",center:[i.lng,i.lat],zoom:14});return new Ks.Marker().setLngLat([i.lng,i.lat]).setPopup(new Ks.Popup().setHTML("<b>University of Florida</b><br>Reitz Union")).addTo(ze),G.current=ze,()=>{ze.remove()}},[ke]);const ce=async ze=>{var Ee;const ot=`https://api.mapbox.com/directions/v5/mapbox/driving/${i.lng},${i.lat};${ze.lng},${ze.lat}?geometries=geojson&access_token=${j4}`;try{const nt=await(await fetch(ot)).json(),Xe=(Ee=nt.routes[0])==null?void 0:Ee.geometry;if(Xe&&G.current){const ut=G.current,Pt=ut.getSource("route");return Pt?Pt.setData({type:"FeatureCollection",features:[{type:"Feature",geometry:Xe,properties:{}}]}):(ut.addSource("route",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:Xe,properties:{}}]}}),ut.addLayer({id:"route",type:"line",source:"route",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#007AFF","line-width":5,"line-opacity":.75}})),ut.fitBounds([[i.lng,i.lat],[ze.lng,ze.lat]],{padding:50,maxZoom:14}),new Date(Y.toDate().getTime()+nt.routes[0].duration*1e3)}}catch(Ke){console.error("Error fetching route:",Ke)}};V.useEffect(()=>{Te({...re,from:{...re.from,expected:Y.toDate().getTime()},datetime:Y.toDate().toISOString()})},[Y]),V.useEffect(()=>{console.log(re)},[re]);const je=async(ze,ot)=>{if(ot==="from"){n(ze.place_name);const Ee={lat:ze.center[1],lng:ze.center[0]};c(Ee),be([]),Te({...re,from:{text:ze.place_name,lat:ze.center[1],lng:ze.center[0],expected:Y.toDate().getTime()}}),G.current&&(new Ks.Marker().setLngLat(ze.center).setPopup(new Ks.Popup().setHTML(`<b>From</b><br>${ze.place_name}`)).addTo(G.current),G.current.flyTo({center:ze.center,zoom:14}))}else{N(ze.place_name);const Ee={lat:ze.center[1],lng:ze.center[0]};if(_(Ee),we([]),G.current){new Ks.Marker().setLngLat(ze.center).setPopup(new Ks.Popup().setHTML(`<b>Destination</b><br>${ze.place_name}`)).addTo(G.current),G.current.flyTo({center:ze.center,zoom:14});let Ke=await ce(Ee);Te({...re,to:{text:ze.place_name,lat:ze.center[1],lng:ze.center[0],expected:Ke.getTime()}})}}},Le=(ze,ot)=>{const Ke=[],Xe=ot*1.60934;for(let ut=0;ut<64;ut++){const Pt=ut/64*(2*Math.PI),Ct=Xe/6371*Math.cos(Pt),Zt=Xe/6371*Math.sin(Pt),Dt=ze.lng+Ct*(180/Math.PI),er=ze.lat+Zt*(180/Math.PI);Ke.push([Dt,er])}return Ke.push(Ke[0]),{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[Ke]}}};return V.useEffect(()=>{if(!G.current||!h)return;const ze=G.current,ot=Le(h,Q);Te({...re,radius:Q}),ze.getSource("destinationCircle")?ze.getSource("destinationCircle").setData(ot):(ze.addSource("destinationCircle",{type:"geojson",data:ot}),ze.addLayer({id:"destinationCircle",type:"fill",source:"destinationCircle",layout:{},paint:{"fill-color":"#007AFF","fill-opacity":.3}}))},[h,Q]),V.useEffect(()=>{G.current&&B&&(G.current.getSource("route")||(G.current.addSource("route",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:B,properties:{}}]}}),G.current.addLayer({id:"route",type:"line",source:"route",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#007AFF","line-width":5,"line-opacity":.75}})))},[B]),V.useEffect(()=>{fetch(`${ma}/v1/driver/fulfillment/dfcr`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(ze=>ze.json()).then(ze=>{ze.success?Ae(ze.can_create_trip):console.error(ze.error)}).catch(ze=>{console.error(ze)})},[]),b.jsx("div",{className:"flex flex-col space-y- bg-white dark:bg-[#0c0c0c] h-screen p-8",children:ke?b.jsxs("div",{className:"flex flex-col h-full w-full",children:[b.jsx(MJ,{"aria-label":"Loading...",className:"mb-4 max-w-full",value:se===1?20:se===2?40:se===3?60:se===4?80:se===5?100:0}),b.jsxs("div",{className:"flex flex-col md:flex-row w-full space-x-12",children:[b.jsxs("div",{className:`flex ${se===5?"w-full":"w-full lg:w-1/2"}`,children:[se===1&&b.jsxs("div",{className:"flex flex-col w-full h-[24rem] my-auto items-center justify-center border border-1 border-neutral-700 rounded-xl p-8",children:[b.jsx("p",{className:"text-xl font-RobotoBold  text-left mr-auto mb-4 text-black dark:text-white",children:"Create a Trip"}),b.jsxs("div",{className:"relative mt- w-full",children:[b.jsx(Za,{label:"From",placeholder:"From where?",value:(Re=re==null?void 0:re.from)==null?void 0:Re.text,className:"w-full",onChange:ze=>{Te({...re,from:{...re.from,text:ze.target.value}}),De(ze.target.value,"from")}}),ge.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:ge.map((ze,ot)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>je(ze,"from"),children:ze.place_name},ot))})]}),b.jsxs("div",{className:"relative mt-4 w-full",children:[b.jsx(Za,{label:"To",placeholder:"To where?",value:(Ge=re==null?void 0:re.to)==null?void 0:Ge.text,className:"w-[]",onChange:ze=>{Te({...re,to:{...re.to,text:ze.target.value}}),De(ze.target.value,"to")}}),pe.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:pe.map((ze,ot)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>je(ze,"to"),children:ze.place_name},ot))})]}),b.jsxs("div",{className:"flex flex-row w-full mt-4 space-x-4",children:[b.jsx(yx,{className:"w-2/3 ",granularity:"second",label:"Date and time",minValue:Pm(Ff()).add({days:2}),value:Lf(new Date((re==null?void 0:re.datetime)||new Date).toISOString()),onChange:oe}),b.jsx(Za,{label:"Radius (miles)",type:"number",placeholder:"Enter the radius number",value:""+(re==null?void 0:re.radius),className:"text-black dark:text-white w-1/3",onChange:ze=>{te(parseInt(ze.target.value)),Te({...re,radius:parseInt(ze.target.value)})}})]}),b.jsx($r,{className:"w-full mt-4",color:"primary",onClick:()=>{ue(2)},children:"Next"})]}),se===2&&b.jsx(zse,{tripOptions:re,setTripOptions:Te,accountData:e,setCurrentPage:ue}),se===3&&b.jsx(Lse,{tripOptions:re,setTripOptions:Te,accountData:e,setCurrentPage:ue}),se===4&&b.jsx($se,{tripOptions:re,setTripOptions:Te,accountData:e,setCurrentPage:ue}),se===5&&b.jsx(Nse,{tripOptions:re,setTripOptions:Te,accountData:e,setCurrentPage:ue})]}),b.jsx("div",{className:"flex flex-col w-full h-full items-center justify-center",children:b.jsx("div",{id:"map-container",ref:de,className:"rounded-xl w-10/12 md:w-full h-[400px] lg:h-[500px] xl:h-[700px] threequarterxl3:h-[950px]"})})]})]}):b.jsxs("div",{className:"flex flex-col h-full w-full items-center justify-center",children:[b.jsx("p",{className:"text-xl font-RobotoBold text-black dark:text-white",children:"Due to your account standing, you are not able to create a trip."}),b.jsx("p",{className:"text-md font-RobotoMedium text-black dark:text-white",children:"Please resolve your account standing to create a trip."})]})})};function T2(e,t){let i;return function(...h){const _=()=>{clearTimeout(i),e(...h)};clearTimeout(i),i=setTimeout(_,t)}}const Ose=Bs(b.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zm0-12H5V6h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"}),"CalendarMonthOutlined"),Fse=Bs(b.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),Vse=({accountData:e,setAccountData:t,tripsResult:i,driverProfiles:c})=>{var F,G,Q,te,Y,oe,de;const h=xs(),[_,w]=V.useState(!1),[n,k]=V.useState(null),[N,B]=V.useState(!1);return V.useEffect(()=>{fetch(`${ma}/v1/rider/gender`,{method:"GET",credentials:"include",headers:Xy}).then(ge=>ge.json()).then(ge=>{w(ge.gender==="female")})},[]),b.jsxs("div",{children:[b.jsxs("div",{className:"flex flex-col h-screen p-8 w-full bg-white dark:bg-[#0c0c0c]",children:[b.jsxs("h1",{className:"text-3xl font-RobotoBold text-black dark:text-white",children:["We found ",i.length," trip",i.length===1?"":"s"," for you"]}),b.jsx("div",{className:"flex flex-col gap-4 mt-6",children:i.map(ge=>{var be,pe,we,ke,Ae,re,Te,se,ue,De,ce,je,Le,Re,Ge,ze,ot;return b.jsxs("div",{className:"flex flex-col w-full border border-2 border-green-600 rounded-2xl",children:[b.jsxs("div",{className:"flex flex-col p-4",children:[b.jsx("p",{className:"text-xs w-auto font-RobotoMedium text-gray-700 dark:text-gray-300",children:"PICKUP"}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Location: ",b.jsx("span",{className:"font-RobotoBold",children:(be=ge.waypoints.find(Ee=>Ee.type==="pickup"))==null?void 0:be.geo_text})]}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Date: ",b.jsx("span",{className:"font-RobotoBold",children:new Date(ge.datetime).toLocaleString()})]})]}),b.jsx("div",{className:"w-full bg-green-600 h-[2px] rounded-full"}),b.jsxs("div",{className:"flex flex-col p-4",children:[b.jsx("p",{className:"text-xs w-auto font-RobotoMedium text-gray-700 dark:text-gray-300",children:"DROPOFF"}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Destination: ",b.jsx("span",{className:"font-RobotoBold",children:(pe=ge.waypoints.find(Ee=>Ee.type==="destination"))==null?void 0:pe.geo_text})]}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Expected Dropoff: ",b.jsx("span",{className:"font-RobotoBold",children:new Date((we=ge.waypoints.find(Ee=>Ee.type==="destination"))==null?void 0:we.expected).toLocaleString()})]})]}),b.jsx("div",{className:"w-full bg-green-600 h-[2px] rounded-full"}),b.jsxs("div",{className:"flex flex-col p-4",children:[b.jsx("p",{className:"text-xs w-auto font-RobotoMedium  text-gray-700 dark:text-gray-300",children:"DRIVER INFORMATION"}),b.jsxs("div",{className:"flex flex-row items-center gap-2 mt-2",children:[b.jsx("img",{src:(ke=c.find(Ee=>Ee.trip_uuid===ge.trip_uuid))==null?void 0:ke.profile_picture,alt:"Profile Picture",className:"w-10 h-10 rounded-full"}),b.jsxs("div",{className:"flex flex-col text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:[b.jsxs("span",{className:"text-md font-RobotoRegular text-black dark:text-white",children:[(Ae=c.find(Ee=>Ee.trip_uuid===ge.trip_uuid))==null?void 0:Ae.first_name," "," ",(re=c.find(Ee=>Ee.trip_uuid===ge.trip_uuid))==null?void 0:re.last_name]}),b.jsx("span",{className:"text-xs font-RobotoRegular text-gray-700 dark:text-gray-300",children:((Te=c.find(Ee=>Ee.trip_uuid===ge.trip_uuid))==null?void 0:Te.rating)||"No rating yet"})]})]})]}),b.jsx("div",{className:"w-full bg-green-600 h-[2px] rounded-full"}),b.jsxs("div",{className:"flex flex-col p-4",children:[b.jsx("p",{className:"text-xs w-auto font-RobotoMedium  text-gray-700 dark:text-gray-300",children:"TRIP DETAILS"}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Fare: $",b.jsx("span",{className:"font-RobotoBold",children:(se=ge==null?void 0:ge.fare)==null?void 0:se.aggregated})," ",b.jsx(CJ,{content:`Trip: $${(ue=ge==null?void 0:ge.fare)==null?void 0:ue.trip} | Food: $${(De=ge==null?void 0:ge.fare)==null?void 0:De.food} | Gas: $${(ce=ge==null?void 0:ge.fare)==null?void 0:ce.gas}`,className:"text-white dark",children:b.jsx("span",{className:"underline font-RobotoBold hover:cursor-pointer",children:"View Fare Breakdown"})})]}),b.jsx("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:(((je=ge==null?void 0:ge.rider_requirements)==null?void 0:je.pay_food)||((Le=ge==null?void 0:ge.rider_requirements)==null?void 0:Le.pay_gas))&&b.jsxs("span",{children:["You are required to: ",((Re=ge==null?void 0:ge.rider_requirements)==null?void 0:Re.pay_food)&&"pay for food"," ",((Ge=ge==null?void 0:ge.rider_requirements)==null?void 0:Ge.pay_gas)&&"pay for gas"]})}),b.jsx("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:(ze=ge==null?void 0:ge.miscellaneous)!=null&&ze.ac.can_be_controlled?"AC can be controlled":"AC cannot be controlled"}),b.jsx("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:(ot=ge==null?void 0:ge.miscellaneous)!=null&&ot.music.can_be_controlled?"Music can be controlled":"Music cannot be controlled"})]}),b.jsx("div",{className:"w-full bg-green-600 h-[2px] rounded-full"}),b.jsxs("div",{className:"flex flex-col p-4",children:[b.jsx("p",{className:"text-xs w-auto font-RobotoMedium  text-gray-700 dark:text-gray-300",children:"ACTIONS"}),b.jsx($r,{className:"mt-auto w-fit mt-2",variant:"solid",color:"primary",onPress:()=>{k(ge)},children:"Request Trip"})]})]},ge.trip_uuid)})})]}),n&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:b.jsxs("div",{className:"bg-white dark:bg-[#0c0c0c] w-full md:w-[30rem] p-8 h-auto rounded-xl",children:[b.jsxs("div",{className:"flex flex-row items-center justify-between",children:[b.jsx("h2",{className:"text-xl font-RobotoBold text-black dark:text-white",children:"Request Trip"}),b.jsx("button",{onClick:()=>k(null),className:"hover:bg-slate-100 dark:hover:bg-neutral-800 rounded-full p-2",children:b.jsx(_u,{size:24,className:"text-gray-700 dark:text-gray-300"})})]}),b.jsxs("div",{className:"flex flex-row items-center gap-2 mt-4",children:[b.jsx("img",{src:(F=c.find(ge=>ge.trip_uuid===n.trip_uuid))==null?void 0:F.profile_picture,alt:"Profile Picture",className:"w-10 h-10 rounded-full"}),b.jsxs("div",{className:"flex flex-col text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:[b.jsxs("span",{className:"text-md font-RobotoRegular text-black dark:text-white",children:[(G=c.find(ge=>ge.trip_uuid===n.trip_uuid))==null?void 0:G.first_name," "," ",(Q=c.find(ge=>ge.trip_uuid===n.trip_uuid))==null?void 0:Q.last_name]}),b.jsx("span",{className:"text-xs font-RobotoRegular text-gray-700 dark:text-gray-300",children:((te=c.find(ge=>ge.trip_uuid===n.trip_uuid))==null?void 0:te.rating)||"No rating yet"})]})]}),b.jsxs("div",{className:"flex flex-col mt-4",children:[b.jsx("p",{className:"text-xs w-auto font-RobotoMedium text-gray-700 dark:text-gray-300",children:"PICKUP"}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Location: ",b.jsx("span",{className:"font-RobotoBold",children:(Y=n.waypoints.find(ge=>ge.type==="pickup"))==null?void 0:Y.geo_text})]}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Date: ",b.jsx("span",{className:"font-RobotoBold",children:new Date(n.datetime).toLocaleString()})]})]}),b.jsxs("div",{className:"flex flex-col mt-4",children:[b.jsx("p",{className:"text-xs w-auto font-RobotoMedium text-gray-700 dark:text-gray-300",children:"DROPOFF"}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Destination: ",b.jsx("span",{className:"font-RobotoBold",children:(oe=n.waypoints.find(ge=>ge.type==="destination"))==null?void 0:oe.geo_text})]}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Expected Dropoff: ",b.jsx("span",{className:"font-RobotoBold",children:new Date((de=n.waypoints.find(ge=>ge.type==="destination"))==null?void 0:de.expected).toLocaleString()})]})]}),b.jsx("div",{className:"flex flex-col mt-4",children:b.jsx(gi,{className:"text-black dark:text-white",checked:N,onChange:()=>B(!N),children:"I agree that payment will be handled solely between the driver and I. I accept that GatorPool is not liable for any issues that may arise, but offers safety features to ensure the trip is safe. I accept that my ride request may be denied by the driver."})}),b.jsx("div",{className:"flex flex-col mt-4",children:b.jsx($r,{className:"mt-auto ml-auto w-fit mt-2",variant:"solid",color:"primary",onPress:()=>{if(!N){ka({title:"Terms and conditions not accepted",description:"You must accept the terms and conditions to request a ride.",color:"danger"});return}fetch(`${ma}/v1/trip/request/${n.trip_uuid}`,{method:"POST",credentials:"include",headers:Xy,body:JSON.stringify({trip_uuid:n.trip_uuid})}).then(ge=>ge.json()).then(ge=>{ge.success?h("/rider-flow/trips?tab=created"):ka({title:"Error requesting trip",description:ge.error,color:"danger"})}).catch(ge=>{ka({title:"Error requesting trip",description:"There was an error requesting the trip. Please try again later.",color:"danger"}),console.log(ge)})},children:"Request Trip"})})]})})]})},Use="pk.eyJ1IjoibXVzdGFmYW1hc29keSIsImEiOiJjbTZva3FneTIwZjI5MmxvdWQ1dHY1NTlwIn0.oNPGEBsenNviLdx_qzcPWw",SA=T2(async(e,t,i)=>{if(e.length<3){i([]);return}const c=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(e)}.json?access_token=${Use}&autocomplete=true&limit=5`;try{const _=await(await fetch(c)).json();i(_.features||[])}catch(h){console.error("Error fetching geocode data:",h),i([])}},500),Gse=({accountData:e,setAccountData:t})=>{const[i,c]=V.useState([]),h=xs(),_=async()=>{fetch(`${ma}/v1/rider/queries`,{method:"GET",credentials:"include",headers:Xy}).then(Se=>Se.json()).then(Se=>{Se.success?c(Se.queries):console.error(Se.error)}).catch(Se=>{console.error(Se)})},[w,n]=V.useState({lat:29.6436,lng:-82.3549}),[k,N]=V.useState(null),[B,F]=V.useState("University of Florida"),[G,Q]=V.useState(""),[te,Y]=V.useState(null),oe=V.useRef(null),[de,ge]=V.useState(0);let[be,pe]=ra.useState(Lf(new Date().toISOString()));const[we,ke]=V.useState(new Date),[Ae,re]=V.useState(null),[Te,se]=V.useState(null),[ue,De]=V.useState(null),[ce,je]=V.useState({geo_text:"University of Florida",latitude:29.6436,longitude:-82.3549}),[Le,Re]=V.useState({}),[Ge,ze]=V.useState(!1);V.useRef(null);const[ot,Ee]=V.useState([]),[Ke,nt]=V.useState([]),[Xe,ut]=V.useState(!1),[Pt,Ct]=V.useState(!1),[Zt,Dt]=V.useState(!1);V.useEffect(()=>{ke(be.toDate())},[be]);const er=async(Se,ur)=>{if(ur==="from"){F(Se.place_name);const Sr={lat:Se.center[1],lng:Se.center[0]};n(Sr),Ee([]),je({geo_text:Se.place_name,latitude:Se.center[1],longitude:Se.center[0],expected:be.toDate()}),oe.current&&(new Ks.Marker().setLngLat(Se.center).setPopup(new Ks.Popup().setHTML(`<b>From</b><br>${Se.place_name}`)).addTo(oe.current),oe.current.flyTo({center:Se.center,zoom:14}))}else{Q(Se.place_name);const Sr={lat:Se.center[1],lng:Se.center[0]};N(Sr),nt([]),Re({geo_text:Se.place_name,latitude:Se.center[1],longitude:Se.center[0],expected:null}),oe.current&&(new Ks.Marker().setLngLat(Se.center).setPopup(new Ks.Popup().setHTML(`<b>Destination</b><br>${Se.place_name}`)).addTo(oe.current),oe.current.flyTo({center:Se.center,zoom:14}))}};return V.useEffect(()=>{_(),fetch(`${ma}/v1/rider/gender`,{method:"GET",credentials:"include",headers:Xy}).then(Se=>Se.json()).then(Se=>{ze(Se.gender==="female")})},[]),Ae?Ae&&Ae.length>0?b.jsx(b.Fragment,{children:b.jsx(Vse,{accountData:e,setAccountData:t,tripsResult:Ae,driverProfiles:Te})}):b.jsx(b.Fragment,{children:b.jsxs("div",{className:"flex flex-col h-screen items-center justify-center w-full bg-white dark:bg-[#0c0c0c]",children:[b.jsx("h1",{className:"text-4xl font-RobotoBold text-black dark:text-white",children:"Uh oh, no trips found."}),b.jsx("p",{className:"text-xl mt-1 font-RobotoRegular text-gray-700 dark:text-gray-300",children:"Not to worry, choose an option from below."}),b.jsxs("div",{className:"flex mt-8 flex-col w-[22rem] lg:w-[28rem] justify-center border border-1 border-neutral-300 dark:border-neutral-800 rounded-xl p-4 bg-white dark:bg-[#0c0c0c]",children:[b.jsx("p",{className:"text-xl font-RobotoBold text-left mr-auto mb-4 text-black dark:text-white",children:"Options"}),b.jsxs("button",{className:"flex flex-row rounded-xl px-4 py-2 items-center w-full mt- justify-start bg-slate-100 hover:bg-slate-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 transition-all duration-300 ",onClick:()=>{h(`/find-ride/rider-flow?${new URLSearchParams(JSON.stringify(ue)||{}).toString()}`)},children:[b.jsx(Bj,{sx:{fontSize:48},className:"text-black dark:text-white"}),b.jsxs("div",{className:"flex flex-col ml-2",children:[b.jsx("p",{className:"text-lg text-left font-RobotoBold text-black dark:text-white",children:"Request a ride"}),b.jsx("p",{className:"text-sm text-left font-RobotoRegular text-black dark:text-white",children:"Request a ride for a specific date and time. Drivers have a dashboard to see your request."})]})]}),b.jsxs("button",{className:"flex flex-row mt-2 rounded-xl px-4 py-2 items-center w-full mt- justify-start bg-slate-100 hover:bg-slate-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 transition-all duration-300 ",onClick:()=>{re(null)},children:[b.jsx(Ose,{sx:{fontSize:48},className:"text-black dark:text-white"}),b.jsxs("div",{className:"flex flex-col ml-2",children:[b.jsx("p",{className:"text-lg text-left font-RobotoBold text-black dark:text-white",children:"Change dates"}),b.jsx("p",{className:"text-sm text-left font-RobotoRegular text-black dark:text-white",children:"Change the date and time of your trip, or turn on the flexible dates filter."})]})]}),b.jsxs("button",{className:"flex flex-row mt-2 rounded-xl px-4 py-2 items-center w-full mt- justify-start bg-slate-100 hover:bg-slate-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 transition-all duration-300 ",onClick:()=>{},children:[b.jsx(Fse,{sx:{fontSize:48},className:"text-black dark:text-white"}),b.jsxs("div",{className:"flex flex-col ml-2",children:[b.jsx("p",{className:"text-lg text-left font-RobotoBold text-black dark:text-white",children:"Get notified when available"}),b.jsx("p",{className:"text-sm text-left font-RobotoRegular text-black dark:text-white",children:"Get notified when a ride is available to your destination."})]})]})]})]})}):b.jsx("div",{children:b.jsx("div",{className:"flex flex-col h-screen items-center justify-center w-full bg-white dark:bg-[#0c0c0c] p-6",children:b.jsx("div",{className:"relative flex flex-col w-full h-full items-center justify-center",children:b.jsxs("div",{className:" flex flex-col w-[22rem] lg:w-[28rem] items-center justify-center border border-1 border-neutral-300 dark:border-neutral-800 rounded-xl p-8 bg-white dark:bg-[#0c0c0c]",children:[b.jsx("p",{className:"text-xl font-RobotoBold  text-left mr-auto mb-4 text-black dark:text-white",children:"Find a ride"}),b.jsxs("div",{className:"relative mt- w-full",children:[b.jsx(Za,{label:"From",placeholder:"From where?",value:B,className:"w-full",onChange:Se=>{F(Se.target.value),SA(Se.target.value,"from",Ee)}}),ot.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:ot.map((Se,ur)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>er(Se,"from"),children:Se.place_name},ur))})]}),b.jsxs("div",{className:"relative mt-4 w-full",children:[b.jsx(Za,{label:"To",placeholder:"To where?",value:G,className:"w-[]",onChange:Se=>{Q(Se.target.value),SA(Se.target.value,"to",nt)}}),Ke.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:Ke.map((Se,ur)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>er(Se,"to"),children:Se.place_name},ur))})]}),b.jsx("div",{className:"flex flex-row w-full mt-4 space-x-4",children:b.jsx(yx,{className:"w-full ",granularity:"second",label:"Date and time",minValue:Pm(Ff()),value:Lf(new Date(we||new Date).toISOString()),onChange:pe})}),b.jsxs("button",{onClick:()=>ut(!Xe),className:"w-fit px-4 py-2 rounded-xl mr-auto mt-4 flex bg-neutral-100 hover:bg-slate-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 flex-row items-center space-x-2 justify-start text-black dark:text-white",children:[b.jsx("span",{children:"Additional Filters"}),Xe?b.jsx(Dre,{className:"w-4 h-4"}):b.jsx(Sre,{className:"w-4 h-4"})]}),Xe&&b.jsxs("div",{className:"flex flex-col w-full mt-1",children:[b.jsx(gi,{className:"text-black dark:text-white",checked:Pt,onChange:()=>Ct(!Pt),children:"Flexible dates"}),Ge&&b.jsx(gi,{className:"text-black dark:text-white",checked:Zt,onChange:()=>Dt(!Zt),children:"Female drivers only"})]}),b.jsx($r,{className:"w-full mt-4",color:"primary",onPress:()=>{const Se={body:{from:{lat:ce.latitude,lng:ce.longitude,text:ce.geo_text},to:{lat:Le.latitude,lng:Le.longitude,text:Le.geo_text},datetime:we.toISOString(),flexible_dates:Pt,females_only:Zt}};De(Se),fetch(`${ma}/v1/trip/rider/query`,{method:"POST",credentials:"include",headers:Xy,body:JSON.stringify(Se)}).then(ur=>ur.json()).then(ur=>{ur.success?(re(ur.trips),se(ur.driverProfiles)):console.error(ur.error)}).catch(ur=>{console.error(ur)})},children:"Find"})]})})})})},TA=({accountData:e,setAccountData:t})=>{const[i,c]=V.useState([]),h=xs(),_=async()=>{fetch(`${ma}/v1/driver/trips`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(w=>w.json()).then(w=>{w.success?c(w.trips.sort((n,k)=>new Date(k.datetime).getTime()-new Date(n.datetime).getTime())):console.error(w.error)}).catch(w=>{console.error(w)})};return V.useEffect(()=>{_()},[]),i.length===0?b.jsx("div",{className:"flex flex-col space-y- bg-white dark:bg-[#0c0c0c] h-screen",children:b.jsxs("div",{className:"flex flex-col w-full h-full items-center justify-center",children:[b.jsx("h1",{className:"text-4xl font-RobotoBold text-black dark:text-white",children:"No trips found."}),b.jsx("h1",{className:"text-lg font-RobotoBold text-black dark:text-white",children:"Create a trip to get started."}),b.jsx($r,{color:"primary",className:"mt-4",onPress:()=>{h("/create-trip")},children:"Create Trip"})]})}):b.jsxs("div",{className:"flex flex-col space-y- bg-white dark:bg-[#0c0c0c] h-screen",children:[b.jsx("p",{className:"text-2xl font-RobotoBold pt-8 pl-8  text-left mr-auto mb-4 text-black dark:text-white",children:"My Trips"}),b.jsx("p",{className:"text-md font-RobotoRegular pt- pl-8  text-left mr-auto mb-4 text-black dark:text-white",children:"Here you can view all of your trips. They are separated by whether you created the trip or requested to be a driver for a trip."}),b.jsx("div",{className:"flex overflow-x-auto max-w-screen",children:b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"To"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Status"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Fare"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"When"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Riders"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Trip Actions"})]})}),b.jsx("tbody",{children:i.map(w=>{var n,k,N;return b.jsxs("tr",{onClick:()=>{h(`/drivertrip/${w.trip_uuid}`)},className:"hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-900",children:[b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:(n=w.waypoints.find(B=>B.type==="destination"))==null?void 0:n.geo_text}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:w.status}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:(k=w.fare)==null?void 0:k.aggregated}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:new Date(w.datetime).toLocaleString()}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:((N=w.riders)==null?void 0:N.length)||0}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:b.jsx($r,{color:"primary",onPress:()=>{h(`/drivertrip/${w.trip_uuid}`)},children:"View Trip"})})]},w.trip_uuid)})})]})})]})},Hse=({accountData:e,setAccountData:t})=>{var ce,je,Le,Re,Ge,ze,ot,Ee,Ke,nt,Xe,ut,Pt,Ct,Zt,Dt,er,Se,ur,Sr;const{trip_uuid:i}=Lw(),c=xs(),[h,_]=V.useState(null),[w,n]=V.useState(null),[k,N]=V.useState(!1),[B,F]=V.useState(!1),[G,Q]=V.useState(!1),[te,Y]=V.useState(!1),[oe,de]=V.useState(!1),[ge,be]=V.useState(!1),[pe,we]=V.useState([]),[ke,Ae]=V.useState(!1),[re,Te]=V.useState(!1),[se,ue]=V.useState(null);V.useEffect(()=>{fetch(`${ma}/v1/driver/trips/${i}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(yt=>yt.json()).then(yt=>{yt.success&&(_(yt.trip),n(yt.trip))}).catch(yt=>{console.error(yt)}),fetch(`${ma}/v1/trip/${i}/riders`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(yt=>yt.json()).then(yt=>{yt.success&&we(yt.riders)}).catch(yt=>{console.error(yt)})},[]);const De=()=>{fetch(`${ma}/v1/trip/${i}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""},body:JSON.stringify({trip:w})}).then(yt=>yt.json()).then(yt=>{yt.success?(_(yt.trip),n(yt.trip)):ka({title:"Error",description:yt.error,color:"danger"})}).catch(yt=>{console.error(yt)})};return V.useEffect(()=>{var yt,dt,$t;n({...w,fare:{...w==null?void 0:w.fare,aggregated:((yt=w==null?void 0:w.fare)==null?void 0:yt.food)+((dt=w==null?void 0:w.fare)==null?void 0:dt.gas)+(($t=w==null?void 0:w.fare)==null?void 0:$t.trip)}})},[(ce=w==null?void 0:w.fare)==null?void 0:ce.food,(je=w==null?void 0:w.fare)==null?void 0:je.gas,(Le=w==null?void 0:w.fare)==null?void 0:Le.trip]),b.jsxs("div",{className:"flex flex-col bg-white dark:bg-[#0c0c0c] space-y-4 h-screen overflow-y-auto p-8",children:[b.jsxs("div",{className:"flex flex-row space-x-4 items-center",children:[b.jsx("button",{onClick:()=>c("/my-trips"),className:"flex items-center justify-center bg-gray-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 rounded-full p-2",children:b.jsx(d2,{className:"w-8 h-8 text-black dark:text-white"})}),b.jsxs("h1",{className:"text-2xl lg:text-4xl font-RobotoBold text-black dark:text-white",children:["Your trip to ",(Re=h==null?void 0:h.waypoints.find(yt=>yt.type==="destination"))==null?void 0:Re.geo_text," on ",new Date(h==null?void 0:h.datetime).toLocaleString()]}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:(h==null?void 0:h.status)==="cancelled"?b.jsx("div",{className:"flex items-center justify-center bg-red-700 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Cancelled"})}):new Date(h==null?void 0:h.datetime)>new Date&&b.jsx("div",{className:"flex items-center justify-center bg-green-700 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Upcoming"})})})]}),b.jsxs("div",{className:"grid gap-4 grid-cols-2 md:grid-cols-3  lg:grid-cols-4",children:[b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"From"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(Ge=h==null?void 0:h.waypoints.find(yt=>yt.type==="pickup"))==null?void 0:Ge.geo_text})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"To"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(ze=h==null?void 0:h.waypoints.find(yt=>yt.type==="destination"))==null?void 0:ze.geo_text})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Riders"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoBold text-3xl",children:((ot=h==null?void 0:h.riders)==null?void 0:ot.length)||0})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Fare"}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoBold text-3xl",children:["$",(Ee=h==null?void 0:h.fare)==null?void 0:Ee.aggregated]})]})]}),b.jsxs("div",{className:"flex mobile:flex-col space-y-4 lg:space-y-0 lg:flex-row w-full h-full lg:space-x-4",children:[b.jsxs("div",{className:"flex flex-col min-h-[20rem] lg:h-full w-full lg:w-8/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-6",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Trip Summary"}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Fare Details"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gs,{value:(Ke=w==null?void 0:w.fare)==null?void 0:Ke.trip,onValueChange:yt=>{n({...w,fare:{...w==null?void 0:w.fare,trip:yt}})},disabled:!k,label:"Trip Fare",className:"w-full"}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsx($r,{isIconOnly:!0,onPress:()=>{k&&De(),N(!k)},className:"p-1 rounded-full",children:k?b.jsx(Bg,{className:"w-4 h-4 text-black dark:text-white"}):b.jsx(Ng,{className:"w-4 h-4 text-black dark:text-white"})})]}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gs,{value:(nt=w==null?void 0:w.fare)==null?void 0:nt.food,onValueChange:yt=>{n({...w,fare:{...w==null?void 0:w.fare,food:yt}})},disabled:!B,label:"Food Fare",className:"w-full"}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsx($r,{isIconOnly:!0,onPress:()=>{k&&De(),F(!B)},className:"p-1 rounded-full",children:B?b.jsx(Bg,{className:"w-4 h-4 text-black dark:text-white"}):b.jsx(Ng,{className:"w-4 h-4 text-black dark:text-white"})})]}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gs,{value:(Xe=w==null?void 0:w.fare)==null?void 0:Xe.gas,onValueChange:yt=>{n({...w,fare:{...w==null?void 0:w.fare,gas:yt}})},disabled:!G,label:"Gas Fare",className:"w-full"}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsx($r,{isIconOnly:!0,onPress:()=>{k&&De(),Q(!G)},className:"p-1 rounded-full",children:G?b.jsx(Bg,{className:"w-4 h-4 text-black dark:text-white"}):b.jsx(Ng,{className:"w-4 h-4 text-black dark:text-white"})})]}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Aggregated Fare: $",(ut=w==null?void 0:w.fare)==null?void 0:ut.aggregated]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Preferences"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!te,isSelected:(Pt=w==null?void 0:w.miscellaneous)==null?void 0:Pt.music.can_be_controlled,onValueChange:yt=>{var dt;n({...w,miscellaneous:{...w==null?void 0:w.miscellaneous,music:{...(dt=w==null?void 0:w.miscellaneous)==null?void 0:dt.music,can_be_controlled:yt}}})}}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request music"}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsx($r,{isIconOnly:!0,className:"p-1 rounded-full",onPress:()=>{te&&De(),Y(!te)},children:te?b.jsx(Bg,{className:"w-4 h-4 text-black dark:text-white"}):b.jsx(Ng,{className:"w-4 h-4 text-black dark:text-white"})})]}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!oe,isSelected:(Ct=w==null?void 0:w.miscellaneous)==null?void 0:Ct.ac.can_be_controlled,onValueChange:yt=>{var dt;n({...w,miscellaneous:{...w==null?void 0:w.miscellaneous,ac:{...(dt=w==null?void 0:w.miscellaneous)==null?void 0:dt.ac,can_be_controlled:yt}}})}}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request AC"}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsx($r,{isIconOnly:!0,className:"p-1 rounded-full",onPress:()=>{oe&&De(),de(!oe)},children:oe?b.jsx(Bg,{className:"w-4 h-4 text-black dark:text-white"}):b.jsx(Ng,{className:"w-4 h-4 text-black dark:text-white"})})]}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[ge?b.jsxs(TT,{className:"light:light dark:dark",children:[b.jsx(ST,{children:b.jsx($r,{className:"capitalize",variant:"bordered",children:(Zt=w==null?void 0:w.miscellaneous)==null?void 0:Zt.talking.type})}),b.jsxs(wT,{disallowEmptySelection:!0,"aria-label":"Single selection example",selectionMode:"single",variant:"flat",className:"light:light dark:dark",onSelectionChange:yt=>{const dt=Array.from(yt)[0];n($t=>{var or;return{...$t,miscellaneous:{...$t==null?void 0:$t.miscellaneous,talking:{...(or=$t==null?void 0:$t.miscellaneous)==null?void 0:or.talking,type:dt}}}}),console.log(dt)},children:[b.jsx(_m,{className:"text-black dark:text-white",children:"Open"},"open"),b.jsx(_m,{className:"text-black dark:text-white",children:"Minimal"},"minimal"),b.jsx(_m,{className:"text-black dark:text-white",children:"Silent"},"silent")]})]}):b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Talking preference: ",(Dt=w==null?void 0:w.miscellaneous)==null?void 0:Dt.talking.type]}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsx($r,{isIconOnly:!0,className:"p-1 rounded-full",onPress:()=>{ge&&De(),be(!ge)},children:ge?b.jsx(Bg,{className:"w-4 h-4 text-black dark:text-white"}):b.jsx(Ng,{className:"w-4 h-4 text-black dark:text-white"})})]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Carpooling"}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!ke,isSelected:w==null?void 0:w.carpool,onValueChange:yt=>{n({...w,carpool:yt})}}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Carpooling"}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsx($r,{isIconOnly:!0,className:"p-1 rounded-full",onPress:()=>{var yt;if(ke&&De(),w!=null&&w.carpool&&((yt=w==null?void 0:w.riders)==null?void 0:yt.length)>0){ka({title:"More than 1 passenger",description:"More than 1 passenger is already attending. You may remove them or cancel the trip.",color:"danger"});return}Ae(!ke)},children:ke?b.jsx(Bg,{className:"w-4 h-4 text-black dark:text-white"}):b.jsx(Ng,{className:"w-4 h-4 text-black dark:text-white"})})]}),b.jsxs("h1",{className:"text-red-500 font-RobotoSemiBold text-lg mt-4",children:["Danger Zone",b.jsx("br",{}),b.jsx("span",{className:"text-red-500 font-RobotoRegular text-sm",children:"Actions done here are irreversible and may affect your account. You may cancel trips up to 3 days before the trip."})]}),(h==null?void 0:h.status)==="cancelled"?b.jsxs(b.Fragment,{children:[b.jsx("h1",{className:"text-red-500 font-RobotoSemiBold text-lg mt-4",children:"Trip Cancelled"}),b.jsx("p",{className:"text-red-500 font-RobotoRegular text-sm mt-0",children:"This trip has been cancelled. You will receive a warning on your account."})]}):b.jsxs(b.Fragment,{children:[!re&&b.jsx($r,{color:"danger",className:"w-48",onPress:()=>{Te(!0)},children:"Cancel Trip"}),re&&b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsx($r,{color:"danger",className:"w-48",onPress:()=>{Te(!1),fetch(`${ma}/v1/trip/${i}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(yt=>yt.json()).then(yt=>{yt.success?(_(yt.trip),n(yt.trip),yt.issue_warning?ka({title:"Trip cancelled",description:"The trip has been cancelled. You will receive a warning on your account.",color:"danger"}):ka({title:"Trip cancelled",description:"The trip has been cancelled with no penalty.",color:"success"})):ka({title:"Error",description:yt.error,color:"danger"})}).catch(yt=>{ka({title:"Error",description:"An error occured.",color:"danger"})})},children:"Confirm"}),b.jsx("p",{className:"text-red-500 font-RobotoRegular text-sm",children:"Are you sure you want to cancel this trip? This action is irreversible and you will receive a warning on your account. Multiple warnings can lead to a temporary or permanent ban."})]})]})]}),b.jsxs("div",{className:"flex flex-col min-h-[20rem] lg:h-full w-full lg:w-4/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-4",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Passengers"}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Accepted (",((er=h==null?void 0:h.riders)==null?void 0:er.filter(yt=>yt.accepted).length)||0,")"]}),b.jsx("div",{className:"flex flex-col space-y-2 max-h-80 w-full overflow-y-auto ",children:(Se=h==null?void 0:h.riders)==null?void 0:Se.filter(yt=>yt.accepted).map(yt=>{var dt,$t;return b.jsxs("div",{className:"flex flex-row items-center justify-between bg-gray-100 dark:bg-neutral-800 p-4 rounded-xl",children:[b.jsx("div",{className:"flex flex-col",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[(dt=pe.find(or=>or.user_uuid===yt.user_uuid))==null?void 0:dt.first_name," ",($t=pe.find(or=>or.user_uuid===yt.user_uuid))==null?void 0:$t.last_name]})}),h.flow_type!=="rider_requests_driver"&&b.jsx("div",{className:"flex flex-row items-center space-x-2",children:b.jsx($r,{className:"p-1 rounded-full",isIconOnly:!0,onPress:()=>{ue(yt)},children:b.jsx(_u,{className:"w-4 h-4 text-black dark:text-white"})})})]})})}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsxs(b.Fragment,{children:[b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Requests (",((ur=h==null?void 0:h.riders)==null?void 0:ur.filter(yt=>!yt.accepted).length)||0,")"]}),b.jsx("div",{className:"flex flex-col space-y-2 max-h-80 w-full overflow-y-auto ",children:(Sr=h==null?void 0:h.riders)==null?void 0:Sr.filter(yt=>!yt.accepted).map(yt=>{var dt,$t;return b.jsxs("div",{className:"flex flex-row items-center justify-between bg-gray-100 dark:bg-neutral-800 p-4 rounded-xl",children:[b.jsx("div",{className:"flex flex-col",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[(dt=pe.find(or=>or.user_uuid===yt.user_uuid))==null?void 0:dt.first_name," ",($t=pe.find(or=>or.user_uuid===yt.user_uuid))==null?void 0:$t.last_name]})}),b.jsxs("div",{className:"flex flex-row items-center space-x-2",children:[b.jsx($r,{className:"p-1 rounded-full",isIconOnly:!0,onPress:()=>{fetch(`${ma}/v1/trip/${i}/reject/${yt.user_uuid}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(or=>or.json()).then(or=>{or.success?_(or.trip):ka({title:"Error",description:or.error,color:"danger"})}).catch(or=>{ka({title:"Error",description:"An error occured.",color:"danger"})})},children:b.jsx(_u,{className:"w-4 h-4 text-black dark:text-white"})}),b.jsx($r,{className:"p-1 rounded-full",isIconOnly:!0,onPress:()=>{fetch(`${ma}/v1/trip/${i}/accept/${yt.user_uuid}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(or=>or.json()).then(or=>{or.success?_(or.trip):ka({title:"Error",description:or.error,color:"danger"})}).catch(or=>{ka({title:"Error",description:"An error occured.",color:"danger"})})},children:b.jsx(Ry,{className:"w-4 h-4 text-black dark:text-white"})})]})]})})})]})]})]}),se&&b.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:b.jsxs("div",{className:"flex flex-col w-[28rem] space-y-2 bg-white dark:bg-neutral-900 p-4 rounded-xl",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-lg",children:["Are you sure you want to remove ",b.jsxs("span",{className:"font-RobotoSemiBold",children:[se.address.data.first_name," ",se.address.data.last_name]})," from the trip? This action is irreversible."]}),b.jsxs("div",{className:"flex flex-row ml-auto mt-16 space-x-2",children:[b.jsx($r,{onPress:()=>{ue(null)},children:"Cancel"}),b.jsx($r,{color:"danger",onPress:()=>{fetch(`${ma}/v1/trip/${i}/remove/${se.user_uuid}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(yt=>yt.json()).then(yt=>{yt.success?(_(yt.trip),ue(null)):ka({title:"Error",description:yt.error,color:"danger"})}).catch(yt=>{ka({title:"Error",description:"An error occured.",color:"danger"})})},children:"Remove"})]})]})})]})},Oj="pk.eyJ1IjoibXVzdGFmYW1hc29keSIsImEiOiJjbTZva3FneTIwZjI5MmxvdWQ1dHY1NTlwIn0.oNPGEBsenNviLdx_qzcPWw",qse=async(e,t,i)=>{var h;const c=`https://api.mapbox.com/directions/v5/mapbox/driving/${e.lng},${e.lat};${t.lng},${t.lat}?geometries=geojson&access_token=${Oj}`;try{const n=(h=(await(await fetch(c)).json()).routes[0])==null?void 0:h.duration;if(n)return new Date(i.getTime()+n*1e3)}catch(_){console.error("Error fetching route:",_)}return null},EA=T2(async(e,t,i)=>{if(e.length<3){i([]);return}const c=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(e)}.json?access_token=${Oj}&autocomplete=true&limit=5`;try{const _=await(await fetch(c)).json();i(_.features||[])}catch(h){console.error("Error fetching geocode data:",h),i([])}},500),Wse=({accountData:e,setAccountData:t,isFemale:i})=>{var Sr,yt,dt,$t,or,Er,mr,Pr,Fr,$a,Xr,ja,fr,Sa,kr,Dr,Nr,na,Sn,Zn,on,Ha,qa,Dn,In,jn,Wr,yi,Ka;const c=jf(),h=new URLSearchParams(c.search),_=xs(),w=h.keys().next().value,n=w?JSON.parse(decodeURIComponent(w)):null,[k,N]=V.useState({lat:(yt=(Sr=n==null?void 0:n.body)==null?void 0:Sr.from)==null?void 0:yt.lat,lng:($t=(dt=n==null?void 0:n.body)==null?void 0:dt.from)==null?void 0:$t.lng}),[B,F]=V.useState({lat:(Er=(or=n==null?void 0:n.body)==null?void 0:or.to)==null?void 0:Er.lat,lng:(Pr=(mr=n==null?void 0:n.body)==null?void 0:mr.to)==null?void 0:Pr.lng}),[G,Q]=V.useState(($a=(Fr=n==null?void 0:n.body)==null?void 0:Fr.from)==null?void 0:$a.text),[te,Y]=V.useState((ja=(Xr=n==null?void 0:n.body)==null?void 0:Xr.to)==null?void 0:ja.text),[oe,de]=V.useState({geo_text:(Sa=(fr=n==null?void 0:n.body)==null?void 0:fr.from)==null?void 0:Sa.text,latitude:(Dr=(kr=n==null?void 0:n.body)==null?void 0:kr.from)==null?void 0:Dr.lat,longitude:(na=(Nr=n==null?void 0:n.body)==null?void 0:Nr.from)==null?void 0:na.lng}),[ge,be]=V.useState({geo_text:(Zn=(Sn=n==null?void 0:n.body)==null?void 0:Sn.to)==null?void 0:Zn.text,latitude:(Ha=(on=n==null?void 0:n.body)==null?void 0:on.to)==null?void 0:Ha.lat,longitude:(Dn=(qa=n==null?void 0:n.body)==null?void 0:qa.to)==null?void 0:Dn.lng}),[pe,we]=V.useState((In=n==null?void 0:n.body)!=null&&In.from?{lat:n.body.from.lat,lng:n.body.from.lng}:null),[ke,Ae]=V.useState((jn=n==null?void 0:n.body)!=null&&jn.to?{lat:n.body.to.lat,lng:n.body.to.lng}:null),[re,Te]=V.useState(!1),[se,ue]=V.useState(!1),[De,ce]=V.useState([]),[je,Le]=V.useState([]),[Re,Ge]=V.useState(new Date((Wr=n==null?void 0:n.body)==null?void 0:Wr.datetime)),[ze,ot]=V.useState(!1),[Ee,Ke]=V.useState(!1),[nt,Xe]=V.useState((yi=n==null?void 0:n.body)==null?void 0:yi.females_only);let[ut,Pt]=ra.useState(Lf(new Date((Ka=n==null?void 0:n.body)==null?void 0:Ka.datetime).toISOString()));const[Ct,Zt]=V.useState({guaranteed_ride:!1,feed:!1}),[Dt,er]=V.useState(null),Se=V.useCallback(T2(async(la,yn,Xn,js)=>{if(console.log("Updating expected arrival with:",{fromCoords:la,toCoords:yn,departureTime:Xn}),!la||!yn){console.log("Missing coordinates");return}const qn=await qse(la,yn,Xn);qn&&(console.log("Setting expected arrival time:",qn),js(ga=>({...ga,expected:qn})),er(qn.toISOString()))},1e3),[]);V.useEffect(()=>{console.log("Coordinates changed:",{fromCoords:pe,toCoords:ke,date:ut.toDate()}),pe&&ke&&Se(pe,ke,ut.toDate(),be)},[pe,ke,ut,Se]);const ur=async(la,yn)=>{if(console.log("Address selected:",{place:la,type:yn}),yn==="from"){Q(la.place_name);const Xn={lat:la.center[1],lng:la.center[0]};N(Xn),ce([]),de({geo_text:la.place_name,latitude:la.center[1],longitude:la.center[0],expected:ut.toDate()}),we(Xn),console.log("Set from coordinates:",Xn)}else{Y(la.place_name);const Xn={lat:la.center[1],lng:la.center[0]};F(Xn),Le([]),be({geo_text:la.place_name,latitude:la.center[1],longitude:la.center[0],expected:null}),Ae(Xn),console.log("Set to coordinates:",Xn)}};return V.useEffect(()=>{if(!n){_("/find-ride");return}if(Object.keys(n).length===0){_("/find-ride");return}if(!n.body||Object.keys(n.body).length===0){_("/find-ride");return}},[n,_]),V.useEffect(()=>{Ge(ut.toDate())},[ut]),b.jsxs("div",{className:"flex flex-col h-screen w-full bg-white dark:bg-[#0c0c0c] p-6",children:[b.jsx("h1",{className:"text-3xl font-RobotoBold text-black dark:text-white",children:"Request a ride"}),b.jsxs("h1",{className:"text-sm lg:text-lg w-full lg:w-1/2 mt-2 font-RobotoMedium text-gray-800 dark:text-gray-300",children:["Fill in the details of where you would like to go and when you would like to go. "," ","Drivers that have similar home addresses or trips to that destination around that time "," ","will be notified. The request will also be shown on the driver's side feed."]}),b.jsx("div",{className:"relative flex flex-col w-full lg:w-1/2 h-full",children:b.jsxs("div",{className:" flex mt-4 flex-col w-full items-center justify-center rounded-xl p- bg-white dark:bg-[#0c0c0c]",children:[b.jsxs("div",{className:"relative mt- w-full",children:[b.jsx(Za,{label:"From",placeholder:"From where?",value:G,className:"w-full",onChange:la=>{Q(la.target.value),EA(la.target.value,"from",ce)}}),De.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:De.map((la,yn)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>ur(la,"from"),children:la.place_name},yn))})]}),b.jsxs("div",{className:"relative mt-4 w-full",children:[b.jsx(Za,{label:"To",placeholder:"To where?",value:te,className:"w-[]",onChange:la=>{Y(la.target.value),EA(la.target.value,"to",Le)}}),je.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:je.map((la,yn)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>ur(la,"to"),children:la.place_name},yn))})]}),b.jsx("div",{className:"flex flex-row w-full mt-4 space-x-4",children:b.jsx(yx,{className:"w-full ",granularity:"second",label:"Date and time",minValue:Pm(Ff()),value:Lf(new Date(Re||new Date).toISOString()),onChange:Pt})}),b.jsxs("div",{className:"flex flex-col w-full mt-4",children:[b.jsx(gi,{className:"text-black dark:text-white flex",checked:re,onChange:()=>Te(!re),children:"I am willing to pay for gas"}),b.jsx(gi,{className:"text-black dark:text-white flex",checked:se,onChange:()=>ue(!se),children:"I am willing to pay for food"})]}),i&&b.jsx("div",{className:"flex flex-col w-full mt-4",children:b.jsx(gi,{className:"text-black dark:text-white",checked:nt,onChange:()=>Xe(!nt),children:"Female drivers only"})}),b.jsx("div",{className:"flex w-full my-4 bg-slate-300 dark:bg-neutral-700 h-[2px]"}),b.jsxs("div",{className:"flex flex-col w-full mt-",children:[b.jsx(gi,{className:"text-black dark:text-white",checked:Ct.guaranteed_ride,onChange:()=>Zt({...Ct,guaranteed_ride:!Ct.guaranteed_ride}),children:"I accept that this ride request is not guaranteed to be fulfilled."}),b.jsx(gi,{className:"text-black mt-4 dark:text-white",checked:Ct.feed,onChange:()=>Zt({...Ct,feed:!Ct.feed}),children:"I accept that this ride request will be shown on the driver's feed. My full destination address will be shown."})]}),b.jsx($r,{className:"w-full mt-6",color:"primary",onPress:()=>{let la={body:{...n.body,to:{...n.body.to,expected:Dt}},pay_for_gas:re,pay_for_food:se};if(!Ct.guaranteed_ride||!Ct.feed){ka({title:"Terms and conditions not accepted",description:"You must accept the terms and conditions to request a ride.",color:"danger"}),console.log("riderFlowBody",la);return}fetch(`${ma}/v1/trip/rider/request`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""},body:JSON.stringify(la)}).then(yn=>yn.json()).then(yn=>{yn.success?_("/rider-flow/trips?tab=created"):console.error(yn.error)}).catch(yn=>{console.error(yn)})},children:"Request Ride"})]})})]})},Kse=()=>{const[e,t]=V.useState(null),[i,c]=V.useState(1),[h,_]=V.useState(1),w=xs();return V.useEffect(()=>{fetch(`${ma}/v1/rider/trips?page=${i}&flow_type=created`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(n=>n.json()).then(n=>{setTimeout(()=>{t(n.trips),_(n.totalPages)},100)})},[i]),e===null?b.jsx("div",{className:"flex flex-col w-full h-[calc(100vh-14rem)]  items-center justify-center",children:b.jsx(i2,{size:"lg",color:"primary"})}):b.jsxs("div",{className:"flex flex-col w-full h-full ",children:[b.jsx("div",{className:"flex overflow-x-auto max-w-screen",children:b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"To"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Status"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Driver Found"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"When"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Driver Requests"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Trip Actions"})]})}),b.jsx("tbody",{children:e.map(n=>{var k,N;return b.jsxs("tr",{onClick:()=>{w(`/ridertrip/created/${n.trip_uuid}`)},className:"hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-900",children:[b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:(k=n.waypoints.find(B=>B.type==="destination"))==null?void 0:k.geo_text}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:n.status}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:n.assigned_driver?"Yes":"No"}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:new Date(n.datetime).toLocaleString()}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:((N=n.driver_requests)==null?void 0:N.length)||0}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:b.jsx($r,{color:"primary",onPress:()=>{w(`/ridertrip/created/${n.trip_uuid}`)},children:"View Trip"})})]},n.trip_uuid)})})]})}),b.jsx("div",{className:"flex flex-col w-full",children:b.jsxs("div",{className:"flex flex-row items-center justify-center",children:[b.jsx("button",{className:"text-black dark:text-white bg-slate-100 hover:bg-slate-200 rounded-full p-2 dark:bg-neutral-900 dark:hover:bg-neutral-800",onClick:()=>{i>1&&c(i-1)},children:b.jsx(lj,{className:"text-black dark:text-white"})}),b.jsxs("h1",{className:"text-black dark:text-white mx-4 font-RobotoMedium text-lg",children:[i," / ",h]}),b.jsx("button",{className:"text-black dark:text-white bg-slate-100 hover:bg-slate-200 rounded-full p-2 dark:bg-neutral-900 dark:hover:bg-neutral-800",onClick:()=>{i<h&&c(i+1)},children:b.jsx(cj,{className:"text-black dark:text-white"})})]})})]})},Zse=()=>{const[e,t]=V.useState(null),[i,c]=V.useState(1),[h,_]=V.useState(1),w=xs(),[n,k]=V.useState(null);return V.useEffect(()=>{fetch(`${ma}/v1/rider/trips?page=${i}&flow_type=requested`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(N=>N.json()).then(N=>{setTimeout(()=>{t(N.trips),_(N.totalPages),k(N.userUUID)},100)})},[i]),e===null?b.jsx("div",{className:"flex flex-col w-full h-[calc(100vh-14rem)]  items-center justify-center",children:b.jsx(i2,{size:"lg",color:"primary"})}):e.length===0?b.jsx("div",{className:"flex flex-col space-y- bg-white dark:bg-[#0c0c0c] h-full",children:b.jsxs("div",{className:"flex flex-col w-full h-full items-center justify-center",children:[b.jsx("h1",{className:"text-4xl font-RobotoBold text-black dark:text-white",children:"No trips found."}),b.jsx("h1",{className:"text-lg font-RobotoBold text-black dark:text-white",children:"Check out what's available."}),b.jsx($r,{color:"primary",className:"mt-4",onPress:()=>{w("/find-ride")},children:"Find Rides"})]})}):b.jsxs("div",{className:"flex flex-col w-full h-full ",children:[b.jsx("div",{className:"flex overflow-x-auto max-w-screen",children:b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"To"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Status"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Accepted"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"When"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Trip Actions"})]})}),b.jsx("tbody",{children:e.map(N=>{var B,F;return b.jsxs("tr",{onClick:()=>{w(`/ridertrip/requested/${N.trip_uuid}`)},className:"hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-900",children:[b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:(B=N.waypoints.find(G=>G.type==="destination"))==null?void 0:B.geo_text}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:N.status}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:(F=N.riders.find(G=>G.user_uuid===n))!=null&&F.accepted?"Yes":"No"}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:new Date(N.datetime).toLocaleString()}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:b.jsx($r,{color:"primary",onPress:()=>{w(`/ridertrip/requested/${N.trip_uuid}`)},children:"View Trip"})})]},N.trip_uuid)})})]})}),b.jsx("div",{className:"flex flex-col w-full",children:b.jsxs("div",{className:"flex flex-row items-center justify-center",children:[b.jsx("button",{className:"text-black dark:text-white bg-slate-100 hover:bg-slate-200 rounded-full p-2 dark:bg-neutral-900 dark:hover:bg-neutral-800",onClick:()=>{i>1&&c(i-1)},children:b.jsx(lj,{className:"text-black dark:text-white"})}),b.jsxs("h1",{className:"text-black dark:text-white mx-4 font-RobotoMedium text-lg",children:[i," / ",h]}),b.jsx("button",{className:"text-black dark:text-white bg-slate-100 hover:bg-slate-200 rounded-full p-2 dark:bg-neutral-900 dark:hover:bg-neutral-800",onClick:()=>{i<h&&c(i+1)},children:b.jsx(cj,{className:"text-black dark:text-white"})})]})})]})},Xse=[{id:0,title:"My Requested Rides",show:!0},{id:1,title:"My Created Rides",show:!0}],Yse=({accountData:e,setAccountData:t})=>{const i=jf(),c=xs(),_=new URLSearchParams(i.search).get("tab"),[w,n]=V.useState("my_created_rides"),[k,N]=V.useState(0),[B,F]=V.useState({}),G=V.useRef(null),[Q,te]=V.useState(Xse);V.useEffect(()=>{_?N(_==="created"?1:0):(c(`${i.pathname}?tab=requested`,{replace:!0}),N(0))},[_,i.pathname,c]),V.useLayoutEffect(()=>{if(!G.current)return;const oe=G.current.querySelector(`#tab-${k}`);if(oe){const de={left:oe.getBoundingClientRect().left-G.current.getBoundingClientRect().left,width:oe.getBoundingClientRect().width};F(de)}},[k,Q]);const Y=oe=>{N(oe);const de=oe===1?"created":"requested";c(`${i.pathname}?tab=${de}`)};return b.jsxs("div",{className:"flex flex-col space-y-4 bg-white p-8 dark:bg-[#0c0c0c] h-screen",children:[b.jsx("h1",{className:"text-3xl font-RobotoBold text-black dark:text-white",children:"My Trips"}),b.jsx("h1",{className:"text-sm lg:text-lg w-full lg:w-1/2 mt-2 font-RobotoMedium text-gray-800 dark:text-gray-300",children:"Trips that you went on, going on, or requested."}),b.jsxs("div",{className:"relative w-full",ref:G,children:[b.jsx("div",{className:"flex justify-start w-full mx-auto mobile:overflow-auto",children:Q.map(oe=>oe.show&&b.jsx("div",{id:`tab-${oe.id}`,className:`cursor-pointer rounded-md py-2 px-4 text-black dark:text-white ${k===oe.id?"font-bold":""}`,onClick:()=>Y(oe.id),children:oe.title},oe.id))}),b.jsx("div",{className:"absolute bottom-0 h-1 bg-emerald-500 transition-all duration-300",style:B})]}),b.jsx("div",{className:"flex-1 h-full min-w-full max-h-[calc(100vh-14rem)] overflow-y-auto",children:Q.map(oe=>b.jsx("div",{className:`h-full w-full ${k===oe.id?"block":"hidden"}`,children:b.jsx("div",{className:"",children:oe.id===1?b.jsx(Kse,{}):b.jsx(Zse,{})})},oe.id))})]})},Jse=({accountData:e,setAccountData:t})=>{var we,ke,Ae,re,Te,se,ue,De,ce,je,Le,Re,Ge,ze,ot,Ee,Ke,nt,Xe,ut,Pt,Ct,Zt;const{trip_uuid:i}=Lw(),c=xs(),[h,_]=V.useState(null),[w,n]=V.useState(null),[k,N]=V.useState(null),[B,F]=V.useState(null),[G,Q]=V.useState(null),[te,Y]=V.useState(!1),[oe,de]=V.useState(null);V.useEffect(()=>{fetch(`${ma}/v1/rider/trips/${i}?flow_type=created`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Dt=>Dt.json()).then(Dt=>{var er;Dt.success?(_(Dt.trip),n(Dt.userUUID),(er=Dt==null?void 0:Dt.trip)!=null&&er.assigned_driver?fetch(`${ma}/v1/trip/${i}/rflow/driver?flow_type=assigned`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Se=>Se.json()).then(Se=>{Se.success?N(Se.driver[0]):ka({title:"Error",description:Se.error})}).catch(Se=>{ka({title:"Error",description:"An error occurred while fetching the driver profile."})}):fetch(`${ma}/v1/trip/${i}/rflow/driver?flow_type=requests`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Se=>Se.json()).then(Se=>{Se.success?Q(Se.driverRequestsProfiles):ka({title:"Error",description:Se.error})}).catch(Se=>{ka({title:"Error",description:"An error occurred while fetching the driver profile."})})):ka({title:"Error",description:Dt.error})}).catch(Dt=>{ka({title:"Error",description:"An error occurred while fetching the trip."})})},[]);const[ge,be]=V.useState(!1),pe=()=>{fetch(`${ma}/v1/trip/${i}/rider/driver/remove/${k==null?void 0:k.user_uuid}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Dt=>Dt.json()).then(Dt=>{Dt.success?(_(Dt.trip),N(null),be(!1)):ka({title:"Error",description:Dt.error})}).catch(Dt=>{ka({title:"Error",description:"An error occurred while removing the driver."})})};return b.jsxs("div",{className:"flex flex-col bg-white dark:bg-[#0c0c0c] space-y-4 h-screen overflow-y-auto p-8",children:[b.jsxs("div",{className:"flex flex-row space-x-4 items-center",children:[b.jsx("button",{onClick:()=>c("/rider-flow/trips"),className:"flex items-center justify-center bg-gray-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 rounded-full p-2",children:b.jsx(d2,{className:"w-8 h-8 text-black dark:text-white"})}),b.jsxs("h1",{className:"text-2xl lg:text-3xl font-RobotoBold text-black dark:text-white",children:["Trip to ",(we=h==null?void 0:h.waypoints.find(Dt=>Dt.type==="destination"))==null?void 0:we.geo_text," on ",new Date(h==null?void 0:h.datetime).toLocaleString()]}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:(ke=h==null?void 0:h.riders.find(Dt=>Dt.user_uuid===w))!=null&&ke.accepted?b.jsx("div",{className:"flex items-center justify-center bg-green-700 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Accepted"})}):b.jsx("div",{className:"flex items-center justify-center bg-amber-600 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Pending Acceptance"})})})]}),b.jsxs("div",{className:"grid gap-4 grid-cols-2 md:grid-cols-3  lg:grid-cols-4 xl:grid-cols-5",children:[b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"From"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(Ae=h==null?void 0:h.waypoints.find(Dt=>Dt.type==="pickup"))==null?void 0:Ae.geo_text})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"To"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(re=h==null?void 0:h.waypoints.find(Dt=>Dt.type==="destination"))==null?void 0:re.geo_text})]}),b.jsx("div",{className:"flex flex-col justify-between bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:b.jsxs("div",{children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"When"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:new Date(h==null?void 0:h.datetime).toLocaleString()})]})}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Expected Arrival"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:new Date((Te=h==null?void 0:h.waypoints.find(Dt=>Dt.type==="destination"))==null?void 0:Te.expected).toLocaleString()})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Fare"}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoBold text-3xl",children:["$",(se=h==null?void 0:h.fare)==null?void 0:se.aggregated]})]})]}),b.jsxs("div",{className:"flex mobile:flex-col space-y-4 lg:space-y-0 lg:flex-row w-full h-full lg:space-x-4",children:[b.jsxs("div",{className:"flex flex-col min-h-[20rem] h-auto overflow-y-auto lg:h-full w-full lg:w-8/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-6",children:[h!=null&&h.assigned_driver?b.jsxs("div",{className:"flex flex-col space-y-",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Trip Summary"}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoLight text-md",children:"Congratulations! You've found a driver for this trip!"})]}):b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Trip Request"}),k&&b.jsxs("div",{className:"flex flex-col space-y-2 mt-2",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg",children:"Driver Details"}),b.jsxs("div",{className:"flex flex-row items-center justify-between",children:[b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx("img",{src:k==null?void 0:k.profile_picture,alt:"Driver Profile",className:"w-12 h-12 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[k==null?void 0:k.first_name," ",k==null?void 0:k.last_name]}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular italic text-sm",children:k==null?void 0:k.email})]})]}),b.jsx($r,{isIconOnly:!0,color:"danger",radius:"full",onPress:()=>{be(!0)},children:b.jsx(jre,{className:"w-6 h-6 text-white"})})]})]}),!(h!=null&&h.assigned_driver)&&b.jsx("div",{className:"flex flex-col space-y-2 mt-2",children:b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg",children:"No driver assigned. You will see fare details here once you accept a driver."})}),(h==null?void 0:h.assigned_driver)&&b.jsxs(b.Fragment,{children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Fare Details"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(ue=h==null?void 0:h.fare)==null?void 0:ue.trip,disabled:!0,label:"Trip Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(De=h==null?void 0:h.fare)==null?void 0:De.food,disabled:!0,label:"Food Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(ce=h==null?void 0:h.fare)==null?void 0:ce.gas,disabled:!0,label:"Gas Fare",className:"w-full"})}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Aggregated Fare: $",(je=h==null?void 0:h.fare)==null?void 0:je.aggregated]})]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Preferences"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:(Le=h==null?void 0:h.miscellaneous)==null?void 0:Le.music.can_be_controlled}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request music"})]}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:(Re=h==null?void 0:h.miscellaneous)==null?void 0:Re.ac.can_be_controlled}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request AC"})]}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Talking preference: ",(Ge=h==null?void 0:h.miscellaneous)==null?void 0:Ge.talking.type]})})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Carpooling"}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:h==null?void 0:h.carpool}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Carpooling"})]}),b.jsxs("h1",{className:"text-red-500 font-RobotoSemiBold text-lg mt-4",children:["Danger Zone",b.jsx("br",{}),b.jsx("span",{className:"text-red-500 font-RobotoRegular text-sm",children:"Actions done here are irreversible and may affect your account."})]}),te?b.jsxs("div",{className:"flex flex-col space-y-2 mt-4",children:[b.jsx("p",{className:"text-red-500 font-RobotoRegular text-sm",children:"Are you sure you want to remove this trip request?"}),b.jsx($r,{color:"danger",className:"w-48",onPress:()=>{fetch(`${ma}/v1/trip/${i}/rider/request/remove`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Dt=>Dt.json()).then(Dt=>{Dt.success?c("/rider-flow/trips"):ka({title:"Error",description:Dt.error})}).catch(Dt=>{ka({title:"Error",description:"An error occurred while removing the trip request."})})},children:"Confirm Removal"})]}):b.jsx($r,{color:"danger",className:"w-48 mt-4",onPress:()=>{Y(!0)},children:"Remove from Trip"})]}),b.jsxs("div",{className:"flex flex-col min-h-[20rem] lg:h-full w-full lg:w-4/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-4",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Driver Requests"}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:[((ze=h==null?void 0:h.driver_requests)==null?void 0:ze.length)||0," ",((ot=h==null?void 0:h.driver_requests)==null?void 0:ot.length)===1?" request":" requests"]}),b.jsx("div",{className:"flex flex-col space-y-2 h-full w-full overflow-y-auto ",children:(Ee=h==null?void 0:h.driver_requests)==null?void 0:Ee.map(Dt=>{var er,Se,ur;return b.jsxs("div",{onClick:()=>{de(Dt)},className:"flex flex-row items-center space-x-2 bg-gray-100 hover:bg-gray-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 hover:cursor-pointer p-4 rounded-xl",children:[b.jsx("img",{src:(er=G==null?void 0:G.find(Sr=>Sr.user_uuid===Dt.user_uuid))==null?void 0:er.profile_picture,alt:"Driver Profile",className:"w-12 h-12 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[(Se=G==null?void 0:G.find(Sr=>Sr.user_uuid===Dt.user_uuid))==null?void 0:Se.first_name," ",(ur=G==null?void 0:G.find(Sr=>Sr.user_uuid===Dt.user_uuid))==null?void 0:ur.last_name]}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Requested on ",new Date(Dt.requested_at).toLocaleString()]})]})]})})})]})]}),oe&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:b.jsxs("div",{className:"flex flex-col bg-white dark:bg-neutral-900 p-4 rounded-xl",children:[b.jsxs("div",{className:"flex flex-row justify-between",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Driver Request"}),b.jsx("button",{className:"p-2 hover:bg-slate-100 dark:hover:bg-neutral-800 rounded-full",onClick:()=>de(null),children:b.jsx(_u,{className:"w-6 h-6 text-black dark:text-white"})})]}),b.jsxs("div",{className:"flex flex-row my-3 items-center space-x-2 bg-gray-100 dark:bg-neutral-800 p-4 rounded-xl",children:[b.jsx("img",{src:(Ke=G==null?void 0:G.find(Dt=>Dt.user_uuid===(oe==null?void 0:oe.user_uuid)))==null?void 0:Ke.profile_picture,alt:"Driver Profile",className:"w-12 h-12 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[(nt=G==null?void 0:G.find(Dt=>Dt.user_uuid===(oe==null?void 0:oe.user_uuid)))==null?void 0:nt.first_name," ",(Xe=G==null?void 0:G.find(Dt=>Dt.user_uuid===(oe==null?void 0:oe.user_uuid)))==null?void 0:Xe.last_name]}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Requested on ",new Date(oe==null?void 0:oe.requested_at).toLocaleString()]})]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Fare Details"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(ut=oe==null?void 0:oe.fare)==null?void 0:ut.trip,disabled:!0,label:"Trip Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(Pt=oe==null?void 0:oe.fare)==null?void 0:Pt.food,disabled:!0,label:"Food Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(Ct=oe==null?void 0:oe.fare)==null?void 0:Ct.gas,disabled:!0,label:"Gas Fare",className:"w-full"})}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Total Fare: $",(Zt=oe==null?void 0:oe.fare)==null?void 0:Zt.aggregated]})]}),b.jsxs("div",{className:"flex flex-row space-x-4",children:[b.jsx($r,{color:"danger",className:"w-full mt-4",onPress:()=>{fetch(`${ma}/v1/trip/${i}/rider/request/reject/${oe==null?void 0:oe.user_uuid}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Dt=>Dt.json()).then(Dt=>{Dt.success?(de(null),_(Dt.trip)):ka({title:"Error",description:Dt.error})}).catch(Dt=>{ka({title:"Error",description:"An error occurred while rejecting the driver request."})})},children:"Reject Request"}),b.jsx($r,{onClick:()=>{fetch(`${ma}/v1/trip/${i}/rider/request/accept/${oe==null?void 0:oe.user_uuid}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Dt=>Dt.json()).then(Dt=>{Dt.success?(de(null),_(Dt.trip),fetch(`${ma}/v1/trip/${i}/rflow/driver?flow_type=assigned`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(er=>er.json()).then(er=>{er.success?N(er.driver[0]):ka({title:"Error",description:er.error})}).catch(er=>{ka({title:"Error",description:"An error occurred while fetching the driver profile."})})):ka({title:"Error",description:Dt.error})}).catch(Dt=>{ka({title:"Error",description:"An error occurred while accepting the driver request."})})},color:"primary",className:"w-full mt-4",children:"Accept Request"})]})]})}),ge&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:b.jsxs("div",{className:"flex flex-col bg-white dark:bg-neutral-900 p-4 rounded-xl",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Remove Driver"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Are you sure you want to remove this driver from the trip?"}),b.jsxs("div",{className:"flex flex-row space-x-4",children:[b.jsx($r,{color:"default",className:"w-full mt-4",onPress:()=>be(!1),children:"Cancel"}),b.jsx($r,{color:"danger",className:"w-full mt-4",onPress:()=>{pe()},children:"Confirm Removal"})]})]})})]})},Qse=({accountData:e,setAccountData:t})=>{var G,Q,te,Y,oe,de,ge,be,pe,we,ke,Ae,re,Te,se,ue,De,ce;const{trip_uuid:i}=Lw(),c=xs(),[h,_]=V.useState(null),[w,n]=V.useState(null),[k,N]=V.useState(null),[B,F]=V.useState(!1);return V.useEffect(()=>{fetch(`${ma}/v1/rider/trips/${i}?flow_type=requested`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(je=>je.json()).then(je=>{je.success?(_(je.trip),n(je.userUUID),fetch(`${ma}/v1/trip/${i}/rflow/driver?flow_type=requests`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Le=>Le.json()).then(Le=>{Le.success?N(Le.driver):ka({title:"Error",description:Le.error})}).catch(Le=>{ka({title:"Error",description:"An error occurred while fetching the driver profile."})})):ka({title:"Error",description:je.error})}).catch(je=>{ka({title:"Error",description:"An error occurred while fetching the trip."})})},[]),b.jsxs("div",{className:"flex flex-col bg-white dark:bg-[#0c0c0c] space-y-4 h-screen overflow-y-auto p-8",children:[b.jsxs("div",{className:"flex flex-row space-x-4 items-center",children:[b.jsx("button",{onClick:()=>c("/rider-flow/trips"),className:"flex items-center justify-center bg-gray-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 rounded-full p-2",children:b.jsx(d2,{className:"w-8 h-8 text-black dark:text-white"})}),b.jsxs("h1",{className:"text-2xl lg:text-3xl font-RobotoBold text-black dark:text-white",children:["Trip to ",(G=h==null?void 0:h.waypoints.find(je=>je.type==="destination"))==null?void 0:G.geo_text," on ",new Date(h==null?void 0:h.datetime).toLocaleString()]}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:(Q=h==null?void 0:h.riders.find(je=>je.user_uuid===w))!=null&&Q.accepted?b.jsx("div",{className:"flex items-center justify-center bg-green-700 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Accepted"})}):b.jsx("div",{className:"flex items-center justify-center bg-amber-600 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Pending Acceptance"})})})]}),b.jsxs("div",{className:"grid gap-4 grid-cols-2 md:grid-cols-3  lg:grid-cols-4 xl:grid-cols-5",children:[b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"From"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(te=h==null?void 0:h.waypoints.find(je=>je.type==="pickup"))==null?void 0:te.geo_text})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"To"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(Y=h==null?void 0:h.waypoints.find(je=>je.type==="destination"))==null?void 0:Y.geo_text})]}),b.jsx("div",{className:"flex flex-col justify-between bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:b.jsxs("div",{children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"When"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:new Date(h==null?void 0:h.datetime).toLocaleString()})]})}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Expected Arrival"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:new Date((oe=h==null?void 0:h.waypoints.find(je=>je.type==="destination"))==null?void 0:oe.expected).toLocaleString()})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Fare"}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoBold text-3xl",children:["$",(de=h==null?void 0:h.fare)==null?void 0:de.aggregated]})]})]}),b.jsxs("div",{className:"flex mobile:flex-col space-y-4 lg:space-y-0 lg:flex-row w-full h-full lg:space-x-4",children:[b.jsxs("div",{className:"flex flex-col min-h-[20rem] h-auto overflow-y-auto lg:h-full w-full lg:w-8/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-6",children:[(ge=h==null?void 0:h.riders.find(je=>je.user_uuid===w))!=null&&ge.accepted?b.jsxs("div",{className:"flex flex-col space-y-",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Trip Summary"}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoLight text-md",children:"Congratulations! You're a passenger on this trip."})]}):b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Trip Request"}),k&&b.jsxs("div",{className:"flex flex-col space-y-2 mt-2",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg",children:"Driver Details"}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx("img",{src:k.profile_picture,alt:"Driver Profile",className:"w-12 h-12 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[k.first_name," ",k.last_name]}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular italic text-sm",children:k.email})]})]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Fare Details"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(be=h==null?void 0:h.fare)==null?void 0:be.trip,disabled:!0,label:"Trip Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(pe=h==null?void 0:h.fare)==null?void 0:pe.food,disabled:!0,label:"Food Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(we=h==null?void 0:h.fare)==null?void 0:we.gas,disabled:!0,label:"Gas Fare",className:"w-full"})}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Aggregated Fare: $",(ke=h==null?void 0:h.fare)==null?void 0:ke.aggregated]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Preferences"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:(Ae=h==null?void 0:h.miscellaneous)==null?void 0:Ae.music.can_be_controlled}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request music"})]}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:(re=h==null?void 0:h.miscellaneous)==null?void 0:re.ac.can_be_controlled}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request AC"})]}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Talking preference: ",(Te=h==null?void 0:h.miscellaneous)==null?void 0:Te.talking.type]})})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Carpooling"}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:h==null?void 0:h.carpool}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Carpooling"})]}),b.jsxs("h1",{className:"text-red-500 font-RobotoSemiBold text-lg mt-4",children:["Danger Zone",b.jsx("br",{}),b.jsx("span",{className:"text-red-500 font-RobotoRegular text-sm",children:"Actions done here are irreversible and may affect your account."})]}),B?b.jsxs("div",{className:"flex flex-col space-y-2 mt-4",children:[b.jsx("p",{className:"text-red-500 font-RobotoRegular text-sm",children:"Are you sure you want to remove this trip request?"}),b.jsx($r,{color:"danger",className:"w-48",onPress:()=>{fetch(`${ma}/v1/trip/${i}/rider/request/remove`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(je=>je.json()).then(je=>{je.success?c("/rider-flow/trips"):ka({title:"Error",description:je.error})}).catch(je=>{ka({title:"Error",description:"An error occurred while removing the trip request."})})},children:"Confirm Removal"})]}):b.jsx($r,{color:"danger",className:"w-48 mt-4",onPress:()=>{F(!0)},children:"Remove from Trip"})]}),b.jsxs("div",{className:"flex flex-col min-h-[20rem] lg:h-full w-full lg:w-4/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-4",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Passengers"}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Accepted (",((se=h==null?void 0:h.riders)==null?void 0:se.filter(je=>je.accepted).length)||0,")"]}),b.jsx("div",{className:"flex flex-col space-y-2 max-h-80 w-full overflow-y-auto ",children:(ue=h==null?void 0:h.riders)==null?void 0:ue.filter(je=>je.accepted).map(je=>b.jsx("div",{className:"flex flex-row items-center justify-between bg-gray-100 dark:bg-neutral-800 p-4 rounded-xl",children:b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[je.address.data.first_name," ",je.address.data.last_name]}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Accepted on ",new Date(je.accepted_at).toLocaleString()]})]})}))}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Requests (",((De=h==null?void 0:h.riders)==null?void 0:De.filter(je=>!je.accepted).length)||0,")"]}),b.jsx("div",{className:"flex flex-col space-y-2 max-h-80 w-full overflow-y-auto ",children:(ce=h==null?void 0:h.riders)==null?void 0:ce.filter(je=>!je.accepted).map(je=>b.jsx("div",{className:"flex flex-row items-center justify-between bg-gray-100 dark:bg-neutral-800 p-4 rounded-xl",children:b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[je.address.data.first_name," ",je.address.data.last_name]}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Requested on ",new Date(je.created_at).toLocaleString()]})]})}))})]})]})]})},eoe="pk.eyJ1IjoibXVzdGFmYW1hc29keSIsImEiOiJjbTZva3FneTIwZjI5MmxvdWQ1dHY1NTlwIn0.oNPGEBsenNviLdx_qzcPWw",CA=T2(async(e,t,i)=>{if(e.length<3){i([]);return}const c=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(e)}.json?access_token=${eoe}&autocomplete=true&limit=5`;try{const _=await(await fetch(c)).json();i(_.features||[])}catch(h){console.error("Error fetching geocode data:",h),i([])}},500),toe=({accountData:e,setAccountData:t})=>{var Pt,Ct,Zt,Dt,er,Se,ur,Sr;const[i,c]=V.useState({lat:29.6436,lng:-82.3549}),[h,_]=V.useState(null),[w,n]=V.useState("University of Florida"),[k,N]=V.useState(""),[B,F]=V.useState(null);xs();const[G,Q]=V.useState([]),[te,Y]=V.useState([]),[oe,de]=V.useState({geo_text:"University of Florida",latitude:29.6436,longitude:-82.3549}),[ge,be]=V.useState({});let[pe,we]=ra.useState(Lf(new Date().toISOString()));const[ke,Ae]=V.useState(null),[re,Te]=V.useState([]),[se,ue]=V.useState(null),[De,ce]=V.useState(new Date),[je,Le]=V.useState(!1),[Re,Ge]=V.useState(0),[ze,ot]=V.useState(0),[Ee,Ke]=V.useState(0),[nt,Xe]=V.useState(0);V.useEffect(()=>{let yt=0;yt+=Number(Re)||0,yt+=Number(ze)||0,yt+=Number(Ee)||0,Xe(yt)},[Re,ze,Ee]),V.useEffect(()=>{ce(pe.toDate())},[pe]);const ut=async(yt,dt)=>{if(dt==="from"){n(yt.place_name);const $t={lat:yt.center[1],lng:yt.center[0]};c($t),Q([]),de({geo_text:yt.place_name,latitude:yt.center[1],longitude:yt.center[0],expected:pe.toDate()})}else{N(yt.place_name);const $t={lat:yt.center[1],lng:yt.center[0]};_($t),Y([]),be({geo_text:yt.place_name,latitude:yt.center[1],longitude:yt.center[0],expected:null})}};return b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row items-center w-full",children:[b.jsxs("div",{className:"relative mt- w-full",children:[b.jsx(Za,{label:"From",placeholder:"From where?",value:w,className:"w-full",onChange:yt=>{n(yt.target.value),CA(yt.target.value,"from",Q)}}),G.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg",children:G.map((yt,dt)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>ut(yt,"from"),children:yt.place_name},dt))})]}),b.jsxs("div",{className:"relative w-full",children:[b.jsx(Za,{label:"To",placeholder:"To where?",value:k,className:"w-[]",onChange:yt=>{N(yt.target.value),CA(yt.target.value,"to",Y)}}),te.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg",children:te.map((yt,dt)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>ut(yt,"to"),children:yt.place_name},dt))})]}),b.jsx("div",{className:"flex flex-row w-full space-x-4",children:b.jsx(yx,{className:"w-full ",granularity:"second",label:"Date and time",minValue:Pm(Ff()),value:Lf(new Date(De||new Date).toISOString()),onChange:we})}),b.jsx($r,{className:"w-64",variant:"solid",color:"primary",onClick:()=>{const yt={body:{from:oe,to:ge,datetime:De.toISOString()}};fetch(`${ma}/v1/trip/driver/feed`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""},body:JSON.stringify(yt)}).then(dt=>dt.json()).then(dt=>{dt.success?(Ae(dt.trips),Te(dt.riderProfiles)):ka({title:"Error fetching trips",description:dt.error,color:"danger"})}).catch(dt=>{ka({title:"Error fetching trips",description:"Please try again.",color:"danger"}),console.error(dt)})},children:"Find Rides"})]}),!ke&&b.jsx(b.Fragment,{children:b.jsx("div",{className:"flex flex-col w-full h-max mt-16 items-center justify-center",children:b.jsx("h1",{className:"text-2xl font-RobotoBold text-black dark:text-white",children:"Start a search to find rides"})})}),ke&&ke.length===0&&b.jsx(b.Fragment,{children:b.jsx("div",{className:"flex flex-col w-full h-max mt-16 items-center justify-center",children:b.jsx("h1",{className:"text-2xl font-RobotoBold text-black dark:text-white",children:"No trips found"})})}),ke&&ke.length>0&&b.jsx("div",{className:"flex overflow-x-auto max-w-screen mt-4",children:b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"To"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Requested By"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Pickup Time"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Rider willing to"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Trip Actions"})]})}),b.jsx("tbody",{children:ke.map(yt=>{var dt,$t,or,Er,mr,Pr,Fr,$a,Xr,ja;return b.jsxs("tr",{onClick:()=>{},className:"hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-900",children:[b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:(dt=yt.waypoints.find(fr=>fr.type==="destination"))==null?void 0:dt.geo_text}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:b.jsxs("div",{className:"flex flex-row items-center gap-3",children:[b.jsx("img",{src:($t=re.find(fr=>fr.user_uuid===yt.posted_by))==null?void 0:$t.profile_picture,className:"w-10 h-10 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("h1",{className:"text-sm font-RobotoBold text-black dark:text-white",children:[(or=re.find(fr=>fr.user_uuid===yt.posted_by))==null?void 0:or.first_name," ",(Er=re.find(fr=>fr.user_uuid===yt.posted_by))==null?void 0:Er.last_name]}),b.jsxs("h1",{className:"text-xs font-RobotoBold text-black dark:text-white",children:["Gender: ",((Pr=(mr=re.find(fr=>fr.user_uuid===yt.posted_by))==null?void 0:mr.gender)==null?void 0:Pr.charAt(0).toUpperCase())+(($a=(Fr=re.find(fr=>fr.user_uuid===yt.posted_by))==null?void 0:Fr.gender)==null?void 0:$a.slice(1))]})]})]})}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:new Date(yt.datetime).toLocaleString()}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:b.jsxs("div",{className:"flex flex-col  gap-0",children:[b.jsxs("h1",{className:"text-sm font-RobotoBold text-black dark:text-white",children:["Pay for food: ",(Xr=yt.riders.find(fr=>fr.user_uuid===yt.posted_by))!=null&&Xr.willing.pay_food?"Yes":"No"]}),b.jsxs("h1",{className:"text-sm font-RobotoBold text-black dark:text-white",children:["Pay for gas: ",(ja=yt.riders.find(fr=>fr.user_uuid===yt.posted_by))!=null&&ja.willing.pay_gas?"Yes":"No"]})]})}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:b.jsx($r,{color:"primary",onPress:()=>{ue(yt)},children:"Request to drive"})})]},yt.trip_uuid)})})]})}),se&&b.jsx("div",{className:"fixed z-50 inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:b.jsxs("div",{className:"flex flex-col min-w-96 h-auto bg-white dark:bg-neutral-900 rounded-xl p-6",children:[b.jsxs("div",{className:"flex flex-row items-center justify-between",children:[b.jsx("h1",{className:"text-lg font-RobotoBold text-black dark:text-white",children:"Trip Request"}),b.jsx("button",{onClick:()=>{ue(null)},className:"p-2 hover:bg-slate-100 dark:hover:bg-neutral-800 rounded-full",children:b.jsx(_u,{className:"w-6 h-6 text-black dark:text-white"})})]}),b.jsxs("div",{className:"flex flex-row items-center gap-3 mt-3",children:[b.jsx("img",{src:(Pt=re.find(yt=>yt.user_uuid===se.posted_by))==null?void 0:Pt.profile_picture,className:"w-10 h-10 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("h1",{className:"text-sm font-RobotoBold text-black dark:text-white",children:[(Ct=re.find(yt=>yt.user_uuid===se.posted_by))==null?void 0:Ct.first_name," ",(Zt=re.find(yt=>yt.user_uuid===se.posted_by))==null?void 0:Zt.last_name]}),b.jsxs("h1",{className:"text-xs font-RobotoBold text-black dark:text-white",children:["Gender: ",((er=(Dt=re.find(yt=>yt.user_uuid===se.posted_by))==null?void 0:Dt.gender)==null?void 0:er.charAt(0).toUpperCase())+((ur=(Se=re.find(yt=>yt.user_uuid===se.posted_by))==null?void 0:Se.gender)==null?void 0:ur.slice(1))]})]})]}),b.jsxs("h1",{className:"mt-3 text-md font-RobotoRegular text-black dark:text-white",children:["When: ",new Date(se.datetime).toLocaleString()]}),b.jsxs("h1",{className:"mt-3 text-md font-RobotoRegular text-black dark:text-white",children:["Pickup: ",(Sr=se.waypoints.find(yt=>yt.type==="destination"))==null?void 0:Sr.geo_text]}),b.jsx("h1",{className:"mt-3 text-md font-RobotoRegular text-black dark:text-white",children:"Set your fare:"}),b.jsx(gs,{label:"Food Cost",value:Re,onChange:yt=>Ge(yt.target.value),className:"mt-3"}),b.jsx(gs,{label:"Gas Cost",value:ze,onChange:yt=>ot(yt.target.value),className:"mt-3"}),b.jsx(gs,{label:"Trip Cost",value:Ee,onChange:yt=>Ke(yt.target.value),className:"mt-3"}),b.jsxs("h1",{className:"mt-3 text-md font-RobotoRegular text-black dark:text-white",children:["Total Fare: $",nt.toFixed(2)]}),b.jsx(gi,{className:"text-black mt-2 dark:text-white flex",checked:je,onChange:()=>Le(!je),children:"I accept the terms and conditions. I accept that my request might be rejected."}),b.jsx($r,{className:"w-full ml-auto mt-3",variant:"solid",color:"primary",onClick:()=>{je?fetch(`${ma}/v1/trip/${se.trip_uuid}/driver/request`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""},body:JSON.stringify({food:Number(Re),gas:Number(ze),trip:Number(Ee),total:Number(nt)})}).then(yt=>yt.json()).then(yt=>{yt.success?(window.location.href="/find-riders?tab=requested",ue(null)):ka({title:"Error",description:yt.error,color:"danger"})}).catch(yt=>{ka({title:"Error",description:"Please try again.",color:"danger"})}):ka({title:"Error",description:"Please accept the terms and conditions.",color:"danger"})},children:"Request to drive"})]})})]})},roe=()=>{const[e,t]=V.useState([]),i=xs();return V.useEffect(()=>{fetch(`${ma}/v1/trip/driver/trips/requested`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(c=>c.json()).then(c=>{c.success?t(c.trips):ka({title:"Error",description:c.error})}).catch(c=>{ka({title:"Error",description:"An error occurred while fetching the trips."})})},[]),e===null?b.jsx("div",{className:"flex flex-col w-full h-[calc(100vh-14rem)]  items-center justify-center",children:b.jsx(i2,{size:"lg",color:"primary"})}):b.jsx("div",{className:"flex flex-col w-full h-full ",children:b.jsx("div",{className:"flex overflow-x-auto max-w-screen",children:b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"To"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Status"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Driver Found"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"When"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Driver Requests"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Trip Actions"})]})}),b.jsx("tbody",{children:e.map(c=>{var h,_;return b.jsxs("tr",{onClick:()=>{i(`/driver-flow-trips/requested/${c.trip_uuid}`)},className:"hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-900",children:[b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:(h=c.waypoints.find(w=>w.type==="destination"))==null?void 0:h.geo_text}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:c.status}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:c.assigned_driver?"Yes":"No"}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:new Date(c.datetime).toLocaleString()}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:((_=c.driver_requests)==null?void 0:_.length)||0}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:b.jsx($r,{color:"primary",onPress:()=>{i(`/driver-flow-trips/requested/${c.trip_uuid}`)},children:"View Trip"})})]},c.trip_uuid)})})]})})})},aoe=[{id:0,title:"Find Riders",show:!0},{id:1,title:"Requested Rides",show:!0}],noe=({accountData:e,setAccountData:t})=>{const i=jf(),c=xs(),_=new URLSearchParams(i.search).get("tab"),[w,n]=V.useState(0),[k,N]=V.useState({}),B=V.useRef(null),[F,G]=V.useState(aoe);V.useEffect(()=>{_?n(_==="requested"?1:0):(c(`${i.pathname}?tab=feed`,{replace:!0}),n(0))},[_,i.pathname,c]),V.useLayoutEffect(()=>{if(!B.current)return;const te=B.current.querySelector(`#tab-${w}`);if(te){const Y={left:te.getBoundingClientRect().left-B.current.getBoundingClientRect().left,width:te.getBoundingClientRect().width};N(Y)}},[w,F]);const Q=te=>{n(te);const Y=te===1?"requested":"feed";c(`${i.pathname}?tab=${Y}`)};return b.jsxs("div",{className:"flex flex-col space-y-4 bg-white p-8 dark:bg-[#0c0c0c] h-screen",children:[b.jsx("h1",{className:"text-3xl font-RobotoBold text-black dark:text-white",children:"Find Riders"}),b.jsx("h1",{className:"text-sm lg:text-lg w-full lg:w-1/2 mt-2 font-RobotoMedium text-gray-800 dark:text-gray-300",children:"Find rides or view trips that you have requested to be a driver for."}),b.jsxs("div",{className:"relative w-full",ref:B,children:[b.jsx("div",{className:"flex justify-start w-full mx-auto mobile:overflow-auto",children:F.map(te=>te.show&&b.jsx("div",{id:`tab-${te.id}`,className:`cursor-pointer rounded-md py-2 px-4 text-black dark:text-white ${w===te.id?"font-bold":""}`,onClick:()=>Q(te.id),children:te.title},te.id))}),b.jsx("div",{className:"absolute bottom-0 h-1 bg-emerald-500 transition-all duration-300",style:k})]}),b.jsx("div",{className:"flex-1 h-full min-w-full max-h-[calc(100vh-14rem)] overflow-y-auto",children:F.map(te=>b.jsx("div",{className:`h-full w-full ${w===te.id?"block":"hidden"}`,children:b.jsxs("div",{className:"",children:[te.id===0&&b.jsx(toe,{accountData:e,setAccountData:t}),te.id===1&&b.jsx(roe,{})]})},te.id))})]})},ioe=({accountData:e,setAccountData:t})=>{var ge,be,pe,we,ke,Ae,re,Te,se,ue,De,ce,je,Le,Re,Ge,ze,ot,Ee,Ke,nt,Xe,ut;const{trip_uuid:i}=Lw(),c=xs(),[h,_]=V.useState(null),[w,n]=V.useState(null),[k,N]=V.useState(null),[B,F]=V.useState(null),[G,Q]=V.useState(null),[te,Y]=V.useState(!1),[oe,de]=V.useState(null);return V.useEffect(()=>{fetch(`${ma}/v1/rider/trips/${i}`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Pt=>Pt.json()).then(Pt=>{var Ct;Pt.success?(_(Pt.trip),n(Pt.userUUID),(Ct=Pt==null?void 0:Pt.trip)!=null&&Ct.assigned_driver?fetch(`${ma}/v1/trip/${i}/rflow/driver?flow_type=assigned`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Zt=>Zt.json()).then(Zt=>{Zt.success?N(Zt.driver[0]):ka({title:"Error",description:Zt.error})}).catch(Zt=>{ka({title:"Error",description:"An error occurred while fetching the driver profile."})}):fetch(`${ma}/v1/trip/${i}/rflow/driver?flow_type=requests`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Zt=>Zt.json()).then(Zt=>{Zt.success?Q(Zt.driverRequestsProfiles):ka({title:"Error",description:Zt.error})}).catch(Zt=>{ka({title:"Error",description:"An error occurred while fetching the driver profile."})})):ka({title:"Error",description:Pt.error})}).catch(Pt=>{ka({title:"Error",description:"An error occurred while fetching the trip."})})},[]),b.jsxs("div",{className:"flex flex-col bg-white dark:bg-[#0c0c0c] space-y-4 h-screen overflow-y-auto p-8",children:[b.jsxs("div",{className:"flex flex-row space-x-4 items-center",children:[b.jsx("button",{onClick:()=>c("/rider-flow/trips"),className:"flex items-center justify-center bg-gray-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 rounded-full p-2",children:b.jsx(d2,{className:"w-8 h-8 text-black dark:text-white"})}),b.jsxs("h1",{className:"text-2xl lg:text-3xl font-RobotoBold text-black dark:text-white",children:["Trip to ",(ge=h==null?void 0:h.waypoints.find(Pt=>Pt.type==="destination"))==null?void 0:ge.geo_text," on ",new Date(h==null?void 0:h.datetime).toLocaleString()]}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:(be=h==null?void 0:h.riders.find(Pt=>Pt.user_uuid===w))!=null&&be.accepted?b.jsx("div",{className:"flex items-center justify-center bg-green-700 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Accepted"})}):b.jsx("div",{className:"flex items-center justify-center bg-amber-600 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Pending Acceptance"})})})]}),b.jsxs("div",{className:"grid gap-4 grid-cols-2 md:grid-cols-3  lg:grid-cols-4 xl:grid-cols-5",children:[b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"From"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(pe=h==null?void 0:h.waypoints.find(Pt=>Pt.type==="pickup"))==null?void 0:pe.geo_text})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"To"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(we=h==null?void 0:h.waypoints.find(Pt=>Pt.type==="destination"))==null?void 0:we.geo_text})]}),b.jsx("div",{className:"flex flex-col justify-between bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:b.jsxs("div",{children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"When"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:new Date(h==null?void 0:h.datetime).toLocaleString()})]})}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Expected Arrival"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:new Date((ke=h==null?void 0:h.waypoints.find(Pt=>Pt.type==="destination"))==null?void 0:ke.expected).toLocaleString()})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Fare"}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoBold text-3xl",children:["$",(Ae=h==null?void 0:h.fare)==null?void 0:Ae.aggregated]})]})]}),b.jsxs("div",{className:"flex mobile:flex-col space-y-4 lg:space-y-0 lg:flex-row w-full h-full lg:space-x-4",children:[b.jsxs("div",{className:"flex flex-col min-h-[20rem] h-auto overflow-y-auto lg:h-full w-full lg:w-8/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-6",children:[h!=null&&h.assigned_driver?b.jsxs("div",{className:"flex flex-col space-y-",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Trip Summary"}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoLight text-md",children:"Congratulations! You've found a driver for this trip!"})]}):b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Trip Request"}),k&&b.jsxs("div",{className:"flex flex-col space-y-2 mt-2",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg",children:"Driver Details"}),b.jsx("div",{className:"flex flex-row items-center justify-between",children:b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx("img",{src:k==null?void 0:k.profile_picture,alt:"Driver Profile",className:"w-12 h-12 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[k==null?void 0:k.first_name," ",k==null?void 0:k.last_name]}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular italic text-sm",children:k==null?void 0:k.email})]})]})})]}),!(h!=null&&h.assigned_driver)&&b.jsx("div",{className:"flex flex-col space-y-2 mt-2",children:b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg",children:"No driver assigned. You will see fare details here once the riders accepts your request."})}),(h==null?void 0:h.assigned_driver)&&b.jsxs(b.Fragment,{children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Fare Details"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(re=h==null?void 0:h.fare)==null?void 0:re.trip,disabled:!0,label:"Trip Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(Te=h==null?void 0:h.fare)==null?void 0:Te.food,disabled:!0,label:"Food Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(se=h==null?void 0:h.fare)==null?void 0:se.gas,disabled:!0,label:"Gas Fare",className:"w-full"})}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Aggregated Fare: $",(ue=h==null?void 0:h.fare)==null?void 0:ue.aggregated]})]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Preferences"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:(De=h==null?void 0:h.miscellaneous)==null?void 0:De.music.can_be_controlled}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request music"})]}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:(ce=h==null?void 0:h.miscellaneous)==null?void 0:ce.ac.can_be_controlled}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request AC"})]}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Talking preference: ",(je=h==null?void 0:h.miscellaneous)==null?void 0:je.talking.type]})})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Carpooling"}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:h==null?void 0:h.carpool}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Carpooling"})]}),b.jsxs("h1",{className:"text-red-500 font-RobotoSemiBold text-lg mt-4",children:["Danger Zone",b.jsx("br",{}),b.jsx("span",{className:"text-red-500 font-RobotoRegular text-sm",children:"Actions done here are irreversible and may affect your account."})]}),te?b.jsxs("div",{className:"flex flex-col space-y-2 mt-4",children:[b.jsx("p",{className:"text-red-500 font-RobotoRegular text-sm",children:"Are you sure you want to remove yourself from this trip?"}),b.jsx($r,{color:"danger",className:"w-48",onPress:()=>{fetch(`${ma}/v1/trip/${i}/driver/freeform/remove`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Pt=>Pt.json()).then(Pt=>{Pt.success?c("/find-riders?tab=requested"):ka({title:"Error",description:Pt.error})}).catch(Pt=>{ka({title:"Error",description:"An error occurred while removing the trip request."})})},children:"Confirm Removal"})]}):b.jsx($r,{color:"danger",className:"w-48 mt-4",onPress:()=>{Y(!0)},children:"Remove from Trip"})]}),b.jsxs("div",{className:"flex flex-col min-h-[20rem] lg:h-full w-full lg:w-4/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-4",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Driver Requests"}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:[((Le=h==null?void 0:h.driver_requests)==null?void 0:Le.length)||0," ",((Re=h==null?void 0:h.driver_requests)==null?void 0:Re.length)===1?" request":" requests"]}),b.jsx("div",{className:"flex flex-col space-y-2 h-full w-full overflow-y-auto ",children:(Ge=h==null?void 0:h.driver_requests)==null?void 0:Ge.map(Pt=>{var Ct,Zt,Dt;return b.jsxs("div",{onClick:()=>{de(Pt)},className:"flex flex-row items-center space-x-2 bg-gray-100 hover:bg-gray-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 hover:cursor-pointer p-4 rounded-xl",children:[b.jsx("img",{src:(Ct=G==null?void 0:G.find(er=>er.user_uuid===Pt.user_uuid))==null?void 0:Ct.profile_picture,alt:"Driver Profile",className:"w-12 h-12 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[(Zt=G==null?void 0:G.find(er=>er.user_uuid===Pt.user_uuid))==null?void 0:Zt.first_name," ",(Dt=G==null?void 0:G.find(er=>er.user_uuid===Pt.user_uuid))==null?void 0:Dt.last_name]}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Requested on ",new Date(Pt.requested_at).toLocaleString()]})]})]})})})]})]}),oe&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:b.jsxs("div",{className:"flex flex-col bg-white dark:bg-neutral-900 p-4 rounded-xl",children:[b.jsxs("div",{className:"flex flex-row justify-between",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Driver Request"}),b.jsx("button",{className:"p-2 hover:bg-slate-100 dark:hover:bg-neutral-800 rounded-full",onClick:()=>de(null),children:b.jsx(_u,{className:"w-6 h-6 text-black dark:text-white"})})]}),b.jsxs("div",{className:"flex flex-row my-3 items-center space-x-2 bg-gray-100 dark:bg-neutral-800 p-4 rounded-xl",children:[b.jsx("img",{src:(ze=G==null?void 0:G.find(Pt=>Pt.user_uuid===(oe==null?void 0:oe.user_uuid)))==null?void 0:ze.profile_picture,alt:"Driver Profile",className:"w-12 h-12 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[(ot=G==null?void 0:G.find(Pt=>Pt.user_uuid===(oe==null?void 0:oe.user_uuid)))==null?void 0:ot.first_name," ",(Ee=G==null?void 0:G.find(Pt=>Pt.user_uuid===(oe==null?void 0:oe.user_uuid)))==null?void 0:Ee.last_name]}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Requested on ",new Date(oe==null?void 0:oe.requested_at).toLocaleString()]})]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Fare Details"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(Ke=oe==null?void 0:oe.fare)==null?void 0:Ke.trip,disabled:!0,label:"Trip Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(nt=oe==null?void 0:oe.fare)==null?void 0:nt.food,disabled:!0,label:"Food Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(Xe=oe==null?void 0:oe.fare)==null?void 0:Xe.gas,disabled:!0,label:"Gas Fare",className:"w-full"})}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Total Fare: $",(ut=oe==null?void 0:oe.fare)==null?void 0:ut.aggregated]})]})]})})]})},fl=({})=>{const[e,t]=V.useState(null),[i,c]=V.useState(null);V.useEffect(()=>{fetch(ma+"/v1/config/banner",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")}}).then(Y=>Y.json()).then(Y=>{c(Y.announcement)}),fetch(ma+"/v1/account/loadin",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},body:JSON.stringify({hydrate_dashboard:!0})}).then(Y=>Y.json()).then(Y=>{var oe,de,ge;if(!Y.success)((oe=Y.error)!=null&&oe.includes("no account")||(de=Y.error)!=null&&de.includes("session")||(ge=Y.error)!=null&&ge.includes("token"))&&(window.location.href="/authv2");else{let be={first_name:Y.first_name,last_name:Y.last_name,email:Y.email,profile_picture:Y.profile_picture,user_uuid:Y.user_uuid,status_cards:Y.status_cards,address:Y==null?void 0:Y.address,bottom_actions:Y.bottom_actions,driver_verified:Y.driver_verified,driver_applications:Y.driver_applications,is_female:Y.is_female,dashboard_stats:Y.dashboard_stats};t(be)}})},[]);const h=window.location.pathname.split("/")[1],_=window.location.pathname.split("/")[2],[w,n]=Tse("sidebarShown",!0),[k,N]=V.useState(!1),[B,F]=V.useState(null);let G=null;const Q={title:"GatorPool",description:"GatorPool",canonical:"https://gatorpool.app",meta:{charset:"utf-8",name:{keywords:"GatorPool, UF, Rideshare, Rides, Pool, Carpool, Uber, Lyft"}}};switch(h){case"profile":G=b.jsx(Z6,{accountData:e,setAccountData:t});break;case"dashboard":G=b.jsx(Ase,{accountData:e,setAccountData:t});break;case"driver-apply":G=b.jsx(Rse,{accountData:e,setAccountData:t});break;case"driver-application":G=b.jsx(Ise,{});break;case"create-trip":G=b.jsx(jse,{accountData:e,setAccountData:t});break;case"driver-flow-trips":G=b.jsx(ioe,{accountData:e,setAccountData:t});break;case"rider-flow":if(_&&_==="trips"){G=b.jsx(Yse,{accountData:e,setAccountData:t});break}G=b.jsx(TA,{accountData:e,setAccountData:t});break;case"ridertrip":if(_){if(_==="requested"){G=b.jsx(Qse,{accountData:e,setAccountData:t});break}else if(_==="created"){G=b.jsx(Jse,{accountData:e,setAccountData:t});break}}break;case"find-ride":if(_&&_==="rider-flow"){G=b.jsx(Wse,{accountData:e,setAccountData:t,isFemale:e==null?void 0:e.is_female});break}G=b.jsx(Gse,{accountData:e,setAccountData:t});break;case"my-trips":G=b.jsx(TA,{accountData:e,setAccountData:t});break;case"drivertrip":G=b.jsx(Hse,{accountData:e,setAccountData:t});break;case"find-riders":G=b.jsx(noe,{accountData:e,setAccountData:t});break;default:G=b.jsx(Z6,{accountData:e,setAccountData:t});break}const te={hidden:{x:"-100%",transition:{type:"tween",ease:"linear",duration:.1}},visible:{x:0,transition:{type:"tween",ease:"linear",duration:.1}}};return b.jsxs("div",{className:"relative flex flex-row w-full bg-white dark:bg-[#0c0c0c] ",children:[b.jsx(j_,{...Q}),i&&b.jsxs("div",{className:`fixed flex z-40 items-center justify-center top-0 left-0 h-10 w-full ${i.type==="general"?" bg-green-600 text-white ":" bg-amber-500 text-white "}`,children:[b.jsx("h1",{className:`my-auto font-PoppinsRegular text-sm text-center
                                    text-white`,children:i.announcement}),b.jsx("button",{className:`absolute right-0 mr-2 mb-1
                                    hover:opacity-50
                                    `,onClick:()=>{fetch(ma+"/v1/config/banner/close",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")}}).then(Y=>Y.json()).then(Y=>{Y.success&&c(null)})},children:b.jsx(Nj,{sx:{fontSize:24,color:"white"}})})]}),b.jsxs("div",{className:`
                    ${i?" mt-10 ":" h-full "}
                    flex flex-row w-full `,children:[b.jsx(Uf,{children:k&&b.jsx(A8.div,{className:"fixed z-50 top-0 left-0 w-[16.5rem] h-full block lg:hidden",variants:te,initial:"hidden",animate:"visible",exit:"hidden",children:e&&b.jsx(wA,{announcementData:i,setAnnouncementData:c,sidebarShown:w,setSidebarShown:n,sidebarState:k,setSidebarState:N,mobile:!1,accountData:e})})}),!k&&b.jsx("div",{className:"absolute top-4 left-4 lg:hidden",children:b.jsx("button",{onClick:()=>N(!0),children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-black dark:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})}),b.jsx("div",{className:`
                        
                    mobile:hidden lg:block w-64
                    absolute fixed z-30 border-r-1 border-neutral-200 top-0 left-0 bg-slate-950`,children:e&&b.jsx(wA,{announcementData:i,setAnnouncementData:c,sidebarShown:w,setSidebarShown:n,sidebarState:k,setSidebarState:N,mobile:!1,accountData:e})}),b.jsx("div",{className:`${w?" lg:ml-[16.5rem] w-full lg:w-[calc(100vw-16.5rem)] ":" lg:ml-20 w-full lg:w-[calc(100vw-5rem)] "}`,children:e&&G})]})]})},soe="/assets/mustafa-HG_XERt5.jpeg",ooe="/assets/hector-CYL1mlwR.jpeg",loe="/assets/deepak-Cicy_Zal.jpeg",coe="/assets/saeed-qCNXvmbs.jpeg",uoe=()=>{const e={title:"About GatorPool",description:"About GatorPool",canonical:"https://gatorpool.app/about",meta:{charset:"utf-8",name:{keywords:"GatorPool, UF, Rideshare, Rides, Pool, Carpool, Uber, Lyft"}}},t=xs(),i=[{name:"Mustafa Masody",image:soe,role:"Leader & Full-Stack",description:`
            Mustafa is a senior at UF studying Computer Science. He has been programming since the age of 11, beginning with Java.
            Over the years, he has built his credentials and passion within the field, and is now creating impactful SaaS products.
            `},{name:"Hector Cruz",image:ooe,role:"Lead Developer",description:`
            Hector is a junior at UF studying Computer Science. His idea was what made the project possible, and his contributions
            to the project were immense. Hector will be joining JPMorgan Chase & Co. as a Software Engineer Intern in June 2025.
            `},{name:"Deepak Guggilam",image:loe,role:"Backend & Client Developer",description:`
            Deepak is a junior at UF studying Computer Science. He has a passion for building AI projects, and
            leveraging technology to create innovative solutions that enhance people's quality of life.
            Deepak is currently in the Undergraduate Research Program.
            `},{name:"Saeed Ansari",image:coe,role:"Project Manager",description:`
            Saeed is a junior at UF studying Computer Science. His immense experience, not only in the SWE field,
            but in other crucial areas like project management, has been the backbone of GatorPool. His dedication
            to managing the project has been the reason GatorPool is great.
            `}];return b.jsxs("div",{className:"flex flex-col min-h-screen w-full overflow-y-auto bg-white dark:bg-[#0c0c0c]",children:[b.jsx(c2,{}),b.jsx(j_,{...e}),b.jsxs("div",{className:"flex flex-col items-center h-full w-full mt-32 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"About GatorPool"}),b.jsx("p",{className:"text-lg mt-3 text-center max-w-screen-lg text-black dark:text-white font-RobotoRegular",children:"GatorPool began as a semester project for the Intro to SWE course at the University of Florida (go gators!). We were given the task of creating an application that provides assistance to underlying causes of mental health issues in early college students. One of the big hassles for college students is finding rides to and from home during weekends and breaks. One of our founders, Hector, presented the idea to us and we thought it was a great way to help students and make some money on the side. Currently on the UF Reddit and Snapchat, everyday there are numerous posts about finding rides to various cities, which we believe our platform can centralize and make it easier for students to find rides."})]}),b.jsxs("div",{className:"flex flex-col items-center h-full w-full mt-16 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"Meet the founders"}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 mt-16 items-center gap-8",children:i.map((c,h)=>b.jsxs("div",{className:"flex flex-col items-center gap-4 bg-slate-100 dark:bg-neutral-900 rounded-xl p-4",children:[b.jsx("img",{src:c.image,alt:c.name,className:"w-48 h-48 rounded-full"}),b.jsx("h2",{className:"text-2xl text-center text-black dark:text-white font-RobotoBold",children:c.name}),b.jsx("h3",{className:"text-lg text-center text-gray-700 dark:text-gray-300 font-RobotoRegular",children:c.role}),b.jsx("p",{className:"text-lg max-w-96 text-center text-black dark:text-white font-RobotoRegular",children:c.description})]},h))})]}),b.jsxs("div",{className:"flex flex-col items-center h-full w-full mt-16 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"Ready to get a ride?"}),b.jsx($r,{className:"mt-2 w-48",radius:"full",color:"primary",size:"lg",onClick:()=>{t("/auth/signup")},children:"Get a Ride"})]}),b.jsxs("div",{className:"flex flex-col mb-16 items-center h-full w-full mt-16 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"UF Student Code of Conduct"}),b.jsx($r,{className:"mt-2 w-48",radius:"full",color:"primary",size:"lg",onClick:()=>{window.open("https://policy.ufl.edu/wp-content/uploads/2021/12/4-040_2021-12-06.pdf","_blank")},children:"Read More"})]}),b.jsx(u2,{})]})},doe=()=>{const e={title:"Safety",description:"Safety",canonical:"https://gatorpool.app/safety",meta:{charset:"utf-8",name:{keywords:"GatorPool, UF, Rideshare, Rides, Pool, Carpool, Uber, Lyft"}}},t=xs(),i=[{name:"UF Students Only",description:`
            We ensure that only UF students can use GatorPool. We do this on signup by asking for a valid UF email,
            and sending a prompt to the user's UF email to verify their account.
            `},{name:"Ride Requests",description:`
            Rides from the driver and rider are not confirmed until either or both parties confirm the ride.
            Riders and drivers can also cancel a ride at any time.
            `},{name:"Driver Verification",description:`
            All drivers are verified by the GatorPool team. Federal and state law requires us to keep records
            of driver vehicles and license plates. We will NEVER ask for your ID.
            `}];return b.jsxs("div",{className:"flex flex-col min-h-screen w-full overflow-y-auto bg-white dark:bg-[#0c0c0c]",children:[b.jsx(c2,{}),b.jsx(j_,{...e}),b.jsxs("div",{className:"flex flex-col items-center h-full w-full mt-32 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"Our Mission"}),b.jsx("p",{className:"text-lg mt-3 text-center max-w-screen-lg text-black dark:text-white font-RobotoRegular",children:"GatorPool is committed to providing a safe and secure experience for all users. We have implemented a number of safety features to ensure that your experience with GatorPool is a positive one."})]}),b.jsxs("div",{className:"flex flex-col items-center h-full w-full mt-16 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"Safety Features"}),b.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 mt-8 w-auto items-center gap-8",children:i.map((c,h)=>b.jsxs("div",{className:"h-48 flex flex-col items-center gap-2 bg-slate-100 dark:bg-neutral-900 rounded-xl p-4",children:[b.jsx("h2",{className:"text-2xl text-center text-black dark:text-white font-RobotoBold",children:c.name}),b.jsx("p",{className:"text-lg max-w-96 text-center text-black dark:text-white font-RobotoRegular",children:c.description})]},h))})]}),b.jsxs("div",{className:"flex flex-col items-center h-full w-full mt-16 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"Ready to get a ride?"}),b.jsx($r,{className:"mt-2 w-48",radius:"full",color:"primary",size:"lg",onClick:()=>{t("/auth/signup")},children:"Get a Ride"})]}),b.jsxs("div",{className:"flex flex-col mb-16 items-center h-full w-full mt-16 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"UF Student Code of Conduct"}),b.jsx($r,{className:"mt-2 w-48",radius:"full",color:"primary",size:"lg",onClick:()=>{window.open("https://policy.ufl.edu/wp-content/uploads/2021/12/4-040_2021-12-06.pdf","_blank")},children:"Read More"})]}),b.jsx(u2,{})]})},hoe=()=>{const e={title:"Terms of Service",description:"Terms of Service",canonical:"https://gatorpool.app/tos",meta:{charset:"utf-8",name:{keywords:"GatorPool, UF, Rideshare, Rides, Pool, Carpool, Uber, Lyft"}}};return b.jsxs("div",{className:"flex flex-col min-h-screen w-full overflow-y-auto bg-white dark:bg-[#0c0c0c]",children:[b.jsx(c2,{}),b.jsx(j_,{...e}),b.jsxs("div",{className:"flex flex-col items-center h-full w-full mt-32 px-6 max-w-4xl mx-auto",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold mb-8",children:"Terms of Service"}),b.jsxs("div",{className:"text-left w-full space-y-6 text-black dark:text-white font-RobotoRegular",children:[b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"1. Acceptance of Terms"}),b.jsx("p",{children:"By using GatorPool, you agree to these Terms of Service. If you do not agree, please do not use our service."})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"2. Eligibility"}),b.jsx("p",{children:"You must be a current university student with a valid .edu email address to use GatorPool. You must be at least 18 years old."})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"3. User Responsibilities"}),b.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[b.jsx("li",{children:"Provide accurate information about yourself and your vehicle (if driving)"}),b.jsx("li",{children:"Treat all users with respect and follow university conduct policies"}),b.jsx("li",{children:"Maintain appropriate insurance coverage if you are a driver"}),b.jsx("li",{children:"Report any safety concerns or incidents immediately"})]})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"4. Safety Guidelines"}),b.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[b.jsx("li",{children:"Always wear seatbelts"}),b.jsx("li",{children:"No alcohol or drug use while using the service"}),b.jsx("li",{children:"Follow all traffic laws and regulations"}),b.jsx("li",{children:"Maintain a safe and clean vehicle if you are a driver"})]})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"5. Payments"}),b.jsx("p",{children:"Payments are handled directly between riders and drivers. GatorPool is not responsible for payment disputes. We recommend using secure payment methods and keeping records of all transactions."})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"6. Liability"}),b.jsx("p",{children:"GatorPool is a platform connecting riders and drivers. We are not responsible for any accidents, injuries, or damages that occur during rides. Users are responsible for their own safety and the safety of others."})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"7. Privacy"}),b.jsx("p",{children:"We collect and use your information as described in our Privacy Policy. We will never share your personal information without your consent, except as required by law."})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"8. Termination"}),b.jsx("p",{children:"We reserve the right to terminate or suspend your account if you violate these terms or engage in unsafe or inappropriate behavior."})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"9. Changes to Terms"}),b.jsx("p",{children:"We may update these terms at any time. Continued use of the service after changes constitutes acceptance of the new terms."})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"10. Contact"}),b.jsx("p",{children:"For questions about these terms, please contact us at support@gatorpool.app"})]})]})]}),b.jsx(u2,{})]})};function foe(){return V.useEffect(()=>{if(localStorage.getItem("X-GatorPool-Device-Id")!==null){if(localStorage.getItem("X-GatorPool-Device-Id")===""||localStorage.getItem("X-GatorPool-Device-Id")==="null"){const e=Y6();localStorage.setItem("X-GatorPool-Device-Id",e)}else localStorage.getItem("X-GatorPool-Device-Id");localStorage.getItem("X-GatorPool-Device-Id")}else if(localStorage.getItem("X-GatorPool-Device-Id")===null||localStorage.getItem("X-GatorPool-Device-Id")===void 0){const e=Y6();localStorage.setItem("X-GatorPool-Device-Id",e)}},[]),b.jsxs(vZ,{children:[b.jsx(Wte,{}),b.jsx("div",{className:"light:light dark:dark",children:b.jsxs(CF,{children:[b.jsx(Ni,{path:"/",element:b.jsx(hre,{})}),b.jsx(Ni,{path:"/about",element:b.jsx(uoe,{})}),b.jsx(Ni,{path:"/safety",element:b.jsx(doe,{})}),b.jsx(Ni,{path:"/tos",element:b.jsx(hoe,{})}),b.jsx(Ni,{path:"/auth/signup",element:b.jsx(Fre,{})}),b.jsx(Ni,{path:"/auth/signin",element:b.jsx(Vre,{})}),b.jsx(Ni,{path:"/auth/finish",element:b.jsx(Jre,{})}),b.jsx(Ni,{path:"/verify",element:b.jsx(Yre,{})}),b.jsx(Ni,{path:"/profile",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Ni,{path:"/dashboard",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Ni,{path:"/driver-apply",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Ni,{path:"/find-ride",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Ni,{path:"/find-ride/rider-flow",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Ni,{path:"/driver-application",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Ni,{path:"/create-trip",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Ni,{path:"/my-trips",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Ni,{path:"/drivertrip/:trip_uuid",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Ni,{path:"/ridertrip/requested/:trip_uuid",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Ni,{path:"/ridertrip/created/:trip_uuid",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Ni,{path:"/rider-flow/trips/",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Ni,{path:"/rider-flow/tripview/:trip_uuid",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Ni,{path:"/find-riders",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Ni,{path:"/driver-flow-trips/requested/:trip_uuid",element:b.jsx(hl,{children:b.jsx(fl,{})})})]})})]})}LO.createRoot(document.getElementById("root")).render(b.jsxs(IF,{children:[" ",b.jsx(foe,{})]}));export{yK as $,yoe as A,qo as B,voe as C,mP as D,u0 as E,yW as F,$5 as G,sq as H,J5 as I,D8 as J,cZ as K,A5 as L,s_ as M,MS as N,IW as O,lq as P,sW as Q,Hi as R,Q5 as S,uW as T,Z5 as U,fZ as V,ms as W,xK as X,gZ as Y,mZ as Z,yM as _,If as a,iW as a$,i8 as a0,r8 as a1,KH as a2,R5 as a3,YR as a4,xw as a5,vW as a6,xW as a7,Jw as a8,DH as a9,Go as aA,Em as aB,Ba as aC,Jq as aD,nI as aE,A_ as aF,iI as aG,_K as aH,bK as aI,JH as aJ,SI as aK,rq as aL,CP as aM,_w as aN,vh as aO,e8 as aP,I_ as aQ,LI as aR,tT as aS,zI as aT,II as aU,rT as aV,NI as aW,$I as aX,R_ as aY,nW as aZ,a8 as a_,K5 as aa,h_ as ab,cH as ac,n4 as ad,MI as ae,dH as af,PI as ag,oI as ah,Kw as ai,xoe as aj,A8 as ak,DP as al,S1 as am,Uf as an,Tu as ao,tI as ap,jl as aq,F1 as ar,PP as as,goe as at,ZR as au,pH as av,yw as aw,$H as ax,kH as ay,Ww as az,uP as b,kI as b0,RI as b1,W3 as b2,AP as b3,GW as b4,gl as b5,sH as b6,Zv as b7,UW as b8,k5 as b9,vI as c,xZ as d,YK as e,Ci as f,o8 as g,M8 as h,Tm as i,b as j,YH as k,lZ as l,mS as m,Nl as n,cW as o,ex as p,dW as q,V as r,Rf as s,$f as t,XR as u,DI as v,vo as w,qH as x,qw as y,u_ as z};
