function z9(e,t){for(var i=0;i<t.length;i++){const c=t[i];if(typeof c!="string"&&!Array.isArray(c)){for(const h in c)if(h!=="default"&&!(h in e)){const _=Object.getOwnPropertyDescriptor(c,h);_&&Object.defineProperty(e,h,_.get?_:{enumerable:!0,get:()=>c[h]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))c(h);new MutationObserver(h=>{for(const _ of h)if(_.type==="childList")for(const w of _.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&c(w)}).observe(document,{childList:!0,subtree:!0});function i(h){const _={};return h.integrity&&(_.integrity=h.integrity),h.referrerPolicy&&(_.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?_.credentials="include":h.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function c(h){if(h.ep)return;h.ep=!0;const _=i(h);fetch(h.href,_)}})();function cx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w3={exports:{}},_v={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NC;function L9(){if(NC)return _v;NC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(c,h,_){var w=null;if(_!==void 0&&(w=""+_),h.key!==void 0&&(w=""+h.key),"key"in h){_={};for(var a in h)a!=="key"&&(_[a]=h[a])}else _=h;return h=_.ref,{$$typeof:e,type:c,key:w,ref:h!==void 0?h:null,props:_}}return _v.Fragment=t,_v.jsx=i,_v.jsxs=i,_v}var jC;function $9(){return jC||(jC=1,w3.exports=L9()),w3.exports}var b=$9(),S3={exports:{}},bv={},T3={exports:{}},E3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OC;function B9(){return OC||(OC=1,function(e){function t(Te,Ie){var Me=Te.length;Te.push(Ie);e:for(;0<Me;){var Xe=Me-1>>>1,Ce=Te[Xe];if(0<h(Ce,Ie))Te[Xe]=Ie,Te[Me]=Ce,Me=Xe;else break e}}function i(Te){return Te.length===0?null:Te[0]}function c(Te){if(Te.length===0)return null;var Ie=Te[0],Me=Te.pop();if(Me!==Ie){Te[0]=Me;e:for(var Xe=0,Ce=Te.length,He=Ce>>>1;Xe<He;){var et=2*(Xe+1)-1,Ke=Te[et],ot=et+1,Pt=Te[ot];if(0>h(Ke,Me))ot<Ce&&0>h(Pt,Ke)?(Te[Xe]=Pt,Te[ot]=Me,Xe=ot):(Te[Xe]=Ke,Te[et]=Me,Xe=et);else if(ot<Ce&&0>h(Pt,Me))Te[Xe]=Pt,Te[ot]=Me,Xe=ot;else break e}}return Ie}function h(Te,Ie){var Me=Te.sortIndex-Ie.sortIndex;return Me!==0?Me:Te.id-Ie.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var _=performance;e.unstable_now=function(){return _.now()}}else{var w=Date,a=w.now();e.unstable_now=function(){return w.now()-a}}var A=[],B=[],N=1,F=null,G=3,Q=!1,te=!1,Y=!1,oe=!1,de=typeof setTimeout=="function"?setTimeout:null,me=typeof clearTimeout=="function"?clearTimeout:null,be=typeof setImmediate<"u"?setImmediate:null;function pe(Te){for(var Ie=i(B);Ie!==null;){if(Ie.callback===null)c(B);else if(Ie.startTime<=Te)c(B),Ie.sortIndex=Ie.expirationTime,t(A,Ie);else break;Ie=i(B)}}function Se(Te){if(Y=!1,pe(Te),!te)if(i(A)!==null)te=!0,$e||($e=!0,ke());else{var Ie=i(B);Ie!==null&&xe(Se,Ie.startTime-Te)}}var $e=!1,Le=-1,re=5,Ee=-1;function se(){return oe?!0:!(e.unstable_now()-Ee<re)}function ue(){if(oe=!1,$e){var Te=e.unstable_now();Ee=Te;var Ie=!0;try{e:{te=!1,Y&&(Y=!1,me(Le),Le=-1),Q=!0;var Me=G;try{t:{for(pe(Te),F=i(A);F!==null&&!(F.expirationTime>Te&&se());){var Xe=F.callback;if(typeof Xe=="function"){F.callback=null,G=F.priorityLevel;var Ce=Xe(F.expirationTime<=Te);if(Te=e.unstable_now(),typeof Ce=="function"){F.callback=Ce,pe(Te),Ie=!0;break t}F===i(A)&&c(A),pe(Te)}else c(A);F=i(A)}if(F!==null)Ie=!0;else{var He=i(B);He!==null&&xe(Se,He.startTime-Te),Ie=!1}}break e}finally{F=null,G=Me,Q=!1}Ie=void 0}}finally{Ie?ke():$e=!1}}}var ke;if(typeof be=="function")ke=function(){be(ue)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Pe=ce.port2;ce.port1.onmessage=ue,ke=function(){Pe.postMessage(null)}}else ke=function(){de(ue,0)};function xe(Te,Ie){Le=de(function(){Te(e.unstable_now())},Ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Te){Te.callback=null},e.unstable_forceFrameRate=function(Te){0>Te||125<Te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<Te?Math.floor(1e3/Te):5},e.unstable_getCurrentPriorityLevel=function(){return G},e.unstable_next=function(Te){switch(G){case 1:case 2:case 3:var Ie=3;break;default:Ie=G}var Me=G;G=Ie;try{return Te()}finally{G=Me}},e.unstable_requestPaint=function(){oe=!0},e.unstable_runWithPriority=function(Te,Ie){switch(Te){case 1:case 2:case 3:case 4:case 5:break;default:Te=3}var Me=G;G=Te;try{return Ie()}finally{G=Me}},e.unstable_scheduleCallback=function(Te,Ie,Me){var Xe=e.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?Xe+Me:Xe):Me=Xe,Te){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=Me+Ce,Te={id:N++,callback:Ie,priorityLevel:Te,startTime:Me,expirationTime:Ce,sortIndex:-1},Me>Xe?(Te.sortIndex=Me,t(B,Te),i(A)===null&&Te===i(B)&&(Y?(me(Le),Le=-1):Y=!0,xe(Se,Me-Xe))):(Te.sortIndex=Ce,t(A,Te),te||Q||(te=!0,$e||($e=!0,ke()))),Te},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(Te){var Ie=G;return function(){var Me=G;G=Ie;try{return Te.apply(this,arguments)}finally{G=Me}}}}(E3)),E3}var FC;function N9(){return FC||(FC=1,T3.exports=B9()),T3.exports}var C3={exports:{}},da={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VC;function j9(){if(VC)return da;VC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),w=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),B=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),F=Symbol.iterator;function G(Ce){return Ce===null||typeof Ce!="object"?null:(Ce=F&&Ce[F]||Ce["@@iterator"],typeof Ce=="function"?Ce:null)}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},te=Object.assign,Y={};function oe(Ce,He,et){this.props=Ce,this.context=He,this.refs=Y,this.updater=et||Q}oe.prototype.isReactComponent={},oe.prototype.setState=function(Ce,He){if(typeof Ce!="object"&&typeof Ce!="function"&&Ce!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ce,He,"setState")},oe.prototype.forceUpdate=function(Ce){this.updater.enqueueForceUpdate(this,Ce,"forceUpdate")};function de(){}de.prototype=oe.prototype;function me(Ce,He,et){this.props=Ce,this.context=He,this.refs=Y,this.updater=et||Q}var be=me.prototype=new de;be.constructor=me,te(be,oe.prototype),be.isPureReactComponent=!0;var pe=Array.isArray,Se={H:null,A:null,T:null,S:null,V:null},$e=Object.prototype.hasOwnProperty;function Le(Ce,He,et,Ke,ot,Pt){return et=Pt.ref,{$$typeof:e,type:Ce,key:He,ref:et!==void 0?et:null,props:Pt}}function re(Ce,He){return Le(Ce.type,He,void 0,void 0,void 0,Ce.props)}function Ee(Ce){return typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===e}function se(Ce){var He={"=":"=0",":":"=2"};return"$"+Ce.replace(/[=:]/g,function(et){return He[et]})}var ue=/\/+/g;function ke(Ce,He){return typeof Ce=="object"&&Ce!==null&&Ce.key!=null?se(""+Ce.key):He.toString(36)}function ce(){}function Pe(Ce){switch(Ce.status){case"fulfilled":return Ce.value;case"rejected":throw Ce.reason;default:switch(typeof Ce.status=="string"?Ce.then(ce,ce):(Ce.status="pending",Ce.then(function(He){Ce.status==="pending"&&(Ce.status="fulfilled",Ce.value=He)},function(He){Ce.status==="pending"&&(Ce.status="rejected",Ce.reason=He)})),Ce.status){case"fulfilled":return Ce.value;case"rejected":throw Ce.reason}}throw Ce}function xe(Ce,He,et,Ke,ot){var Pt=typeof Ce;(Pt==="undefined"||Pt==="boolean")&&(Ce=null);var Et=!1;if(Ce===null)Et=!0;else switch(Pt){case"bigint":case"string":case"number":Et=!0;break;case"object":switch(Ce.$$typeof){case e:case t:Et=!0;break;case N:return Et=Ce._init,xe(Et(Ce._payload),He,et,Ke,ot)}}if(Et)return ot=ot(Ce),Et=Ke===""?"."+ke(Ce,0):Ke,pe(ot)?(et="",Et!=null&&(et=Et.replace(ue,"$&/")+"/"),xe(ot,He,et,"",function(er){return er})):ot!=null&&(Ee(ot)&&(ot=re(ot,et+(ot.key==null||Ce&&Ce.key===ot.key?"":(""+ot.key).replace(ue,"$&/")+"/")+Et)),He.push(ot)),1;Et=0;var Wt=Ke===""?".":Ke+":";if(pe(Ce))for(var Dt=0;Dt<Ce.length;Dt++)Ke=Ce[Dt],Pt=Wt+ke(Ke,Dt),Et+=xe(Ke,He,et,Pt,ot);else if(Dt=G(Ce),typeof Dt=="function")for(Ce=Dt.call(Ce),Dt=0;!(Ke=Ce.next()).done;)Ke=Ke.value,Pt=Wt+ke(Ke,Dt++),Et+=xe(Ke,He,et,Pt,ot);else if(Pt==="object"){if(typeof Ce.then=="function")return xe(Pe(Ce),He,et,Ke,ot);throw He=String(Ce),Error("Objects are not valid as a React child (found: "+(He==="[object Object]"?"object with keys {"+Object.keys(Ce).join(", ")+"}":He)+"). If you meant to render a collection of children, use an array instead.")}return Et}function Te(Ce,He,et){if(Ce==null)return Ce;var Ke=[],ot=0;return xe(Ce,Ke,"","",function(Pt){return He.call(et,Pt,ot++)}),Ke}function Ie(Ce){if(Ce._status===-1){var He=Ce._result;He=He(),He.then(function(et){(Ce._status===0||Ce._status===-1)&&(Ce._status=1,Ce._result=et)},function(et){(Ce._status===0||Ce._status===-1)&&(Ce._status=2,Ce._result=et)}),Ce._status===-1&&(Ce._status=0,Ce._result=He)}if(Ce._status===1)return Ce._result.default;throw Ce._result}var Me=typeof reportError=="function"?reportError:function(Ce){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var He=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ce=="object"&&Ce!==null&&typeof Ce.message=="string"?String(Ce.message):String(Ce),error:Ce});if(!window.dispatchEvent(He))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ce);return}console.error(Ce)};function Xe(){}return da.Children={map:Te,forEach:function(Ce,He,et){Te(Ce,function(){He.apply(this,arguments)},et)},count:function(Ce){var He=0;return Te(Ce,function(){He++}),He},toArray:function(Ce){return Te(Ce,function(He){return He})||[]},only:function(Ce){if(!Ee(Ce))throw Error("React.Children.only expected to receive a single React element child.");return Ce}},da.Component=oe,da.Fragment=i,da.Profiler=h,da.PureComponent=me,da.StrictMode=c,da.Suspense=A,da.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Se,da.__COMPILER_RUNTIME={__proto__:null,c:function(Ce){return Se.H.useMemoCache(Ce)}},da.cache=function(Ce){return function(){return Ce.apply(null,arguments)}},da.cloneElement=function(Ce,He,et){if(Ce==null)throw Error("The argument must be a React element, but you passed "+Ce+".");var Ke=te({},Ce.props),ot=Ce.key,Pt=void 0;if(He!=null)for(Et in He.ref!==void 0&&(Pt=void 0),He.key!==void 0&&(ot=""+He.key),He)!$e.call(He,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&He.ref===void 0||(Ke[Et]=He[Et]);var Et=arguments.length-2;if(Et===1)Ke.children=et;else if(1<Et){for(var Wt=Array(Et),Dt=0;Dt<Et;Dt++)Wt[Dt]=arguments[Dt+2];Ke.children=Wt}return Le(Ce.type,ot,void 0,void 0,Pt,Ke)},da.createContext=function(Ce){return Ce={$$typeof:w,_currentValue:Ce,_currentValue2:Ce,_threadCount:0,Provider:null,Consumer:null},Ce.Provider=Ce,Ce.Consumer={$$typeof:_,_context:Ce},Ce},da.createElement=function(Ce,He,et){var Ke,ot={},Pt=null;if(He!=null)for(Ke in He.key!==void 0&&(Pt=""+He.key),He)$e.call(He,Ke)&&Ke!=="key"&&Ke!=="__self"&&Ke!=="__source"&&(ot[Ke]=He[Ke]);var Et=arguments.length-2;if(Et===1)ot.children=et;else if(1<Et){for(var Wt=Array(Et),Dt=0;Dt<Et;Dt++)Wt[Dt]=arguments[Dt+2];ot.children=Wt}if(Ce&&Ce.defaultProps)for(Ke in Et=Ce.defaultProps,Et)ot[Ke]===void 0&&(ot[Ke]=Et[Ke]);return Le(Ce,Pt,void 0,void 0,null,ot)},da.createRef=function(){return{current:null}},da.forwardRef=function(Ce){return{$$typeof:a,render:Ce}},da.isValidElement=Ee,da.lazy=function(Ce){return{$$typeof:N,_payload:{_status:-1,_result:Ce},_init:Ie}},da.memo=function(Ce,He){return{$$typeof:B,type:Ce,compare:He===void 0?null:He}},da.startTransition=function(Ce){var He=Se.T,et={};Se.T=et;try{var Ke=Ce(),ot=Se.S;ot!==null&&ot(et,Ke),typeof Ke=="object"&&Ke!==null&&typeof Ke.then=="function"&&Ke.then(Xe,Me)}catch(Pt){Me(Pt)}finally{Se.T=He}},da.unstable_useCacheRefresh=function(){return Se.H.useCacheRefresh()},da.use=function(Ce){return Se.H.use(Ce)},da.useActionState=function(Ce,He,et){return Se.H.useActionState(Ce,He,et)},da.useCallback=function(Ce,He){return Se.H.useCallback(Ce,He)},da.useContext=function(Ce){return Se.H.useContext(Ce)},da.useDebugValue=function(){},da.useDeferredValue=function(Ce,He){return Se.H.useDeferredValue(Ce,He)},da.useEffect=function(Ce,He,et){var Ke=Se.H;if(typeof et=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ke.useEffect(Ce,He)},da.useId=function(){return Se.H.useId()},da.useImperativeHandle=function(Ce,He,et){return Se.H.useImperativeHandle(Ce,He,et)},da.useInsertionEffect=function(Ce,He){return Se.H.useInsertionEffect(Ce,He)},da.useLayoutEffect=function(Ce,He){return Se.H.useLayoutEffect(Ce,He)},da.useMemo=function(Ce,He){return Se.H.useMemo(Ce,He)},da.useOptimistic=function(Ce,He){return Se.H.useOptimistic(Ce,He)},da.useReducer=function(Ce,He,et){return Se.H.useReducer(Ce,He,et)},da.useRef=function(Ce){return Se.H.useRef(Ce)},da.useState=function(Ce){return Se.H.useState(Ce)},da.useSyncExternalStore=function(Ce,He,et){return Se.H.useSyncExternalStore(Ce,He,et)},da.useTransition=function(){return Se.H.useTransition()},da.version="19.1.0",da}var UC;function s0(){return UC||(UC=1,C3.exports=j9()),C3.exports}var D3={exports:{}},Vo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC;function O9(){if(GC)return Vo;GC=1;var e=s0();function t(A){var B="https://react.dev/errors/"+A;if(1<arguments.length){B+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)B+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+A+"; visit "+B+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var c={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},h=Symbol.for("react.portal");function _(A,B,N){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:F==null?null:""+F,children:A,containerInfo:B,implementation:N}}var w=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(A,B){if(A==="font")return"";if(typeof B=="string")return B==="use-credentials"?B:""}return Vo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,Vo.createPortal=function(A,B){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B||B.nodeType!==1&&B.nodeType!==9&&B.nodeType!==11)throw Error(t(299));return _(A,B,null,N)},Vo.flushSync=function(A){var B=w.T,N=c.p;try{if(w.T=null,c.p=2,A)return A()}finally{w.T=B,c.p=N,c.d.f()}},Vo.preconnect=function(A,B){typeof A=="string"&&(B?(B=B.crossOrigin,B=typeof B=="string"?B==="use-credentials"?B:"":void 0):B=null,c.d.C(A,B))},Vo.prefetchDNS=function(A){typeof A=="string"&&c.d.D(A)},Vo.preinit=function(A,B){if(typeof A=="string"&&B&&typeof B.as=="string"){var N=B.as,F=a(N,B.crossOrigin),G=typeof B.integrity=="string"?B.integrity:void 0,Q=typeof B.fetchPriority=="string"?B.fetchPriority:void 0;N==="style"?c.d.S(A,typeof B.precedence=="string"?B.precedence:void 0,{crossOrigin:F,integrity:G,fetchPriority:Q}):N==="script"&&c.d.X(A,{crossOrigin:F,integrity:G,fetchPriority:Q,nonce:typeof B.nonce=="string"?B.nonce:void 0})}},Vo.preinitModule=function(A,B){if(typeof A=="string")if(typeof B=="object"&&B!==null){if(B.as==null||B.as==="script"){var N=a(B.as,B.crossOrigin);c.d.M(A,{crossOrigin:N,integrity:typeof B.integrity=="string"?B.integrity:void 0,nonce:typeof B.nonce=="string"?B.nonce:void 0})}}else B==null&&c.d.M(A)},Vo.preload=function(A,B){if(typeof A=="string"&&typeof B=="object"&&B!==null&&typeof B.as=="string"){var N=B.as,F=a(N,B.crossOrigin);c.d.L(A,N,{crossOrigin:F,integrity:typeof B.integrity=="string"?B.integrity:void 0,nonce:typeof B.nonce=="string"?B.nonce:void 0,type:typeof B.type=="string"?B.type:void 0,fetchPriority:typeof B.fetchPriority=="string"?B.fetchPriority:void 0,referrerPolicy:typeof B.referrerPolicy=="string"?B.referrerPolicy:void 0,imageSrcSet:typeof B.imageSrcSet=="string"?B.imageSrcSet:void 0,imageSizes:typeof B.imageSizes=="string"?B.imageSizes:void 0,media:typeof B.media=="string"?B.media:void 0})}},Vo.preloadModule=function(A,B){if(typeof A=="string")if(B){var N=a(B.as,B.crossOrigin);c.d.m(A,{as:typeof B.as=="string"&&B.as!=="script"?B.as:void 0,crossOrigin:N,integrity:typeof B.integrity=="string"?B.integrity:void 0})}else c.d.m(A)},Vo.requestFormReset=function(A){c.d.r(A)},Vo.unstable_batchedUpdates=function(A,B){return A(B)},Vo.useFormState=function(A,B,N){return w.H.useFormState(A,B,N)},Vo.useFormStatus=function(){return w.H.useHostTransitionStatus()},Vo.version="19.1.0",Vo}var HC;function LA(){if(HC)return D3.exports;HC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),D3.exports=O9(),D3.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qC;function F9(){if(qC)return bv;qC=1;var e=N9(),t=s0(),i=LA();function c(d){var y="https://react.dev/errors/"+d;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+d+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function _(d){var y=d,E=d;if(d.alternate)for(;y.return;)y=y.return;else{d=y;do y=d,(y.flags&4098)!==0&&(E=y.return),d=y.return;while(d)}return y.tag===3?E:null}function w(d){if(d.tag===13){var y=d.memoizedState;if(y===null&&(d=d.alternate,d!==null&&(y=d.memoizedState)),y!==null)return y.dehydrated}return null}function a(d){if(_(d)!==d)throw Error(c(188))}function A(d){var y=d.alternate;if(!y){if(y=_(d),y===null)throw Error(c(188));return y!==d?null:d}for(var E=d,z=y;;){var H=E.return;if(H===null)break;var ee=H.alternate;if(ee===null){if(z=H.return,z!==null){E=z;continue}break}if(H.child===ee.child){for(ee=H.child;ee;){if(ee===E)return a(H),d;if(ee===z)return a(H),y;ee=ee.sibling}throw Error(c(188))}if(E.return!==z.return)E=H,z=ee;else{for(var Re=!1,qe=H.child;qe;){if(qe===E){Re=!0,E=H,z=ee;break}if(qe===z){Re=!0,z=H,E=ee;break}qe=qe.sibling}if(!Re){for(qe=ee.child;qe;){if(qe===E){Re=!0,E=ee,z=H;break}if(qe===z){Re=!0,z=ee,E=H;break}qe=qe.sibling}if(!Re)throw Error(c(189))}}if(E.alternate!==z)throw Error(c(190))}if(E.tag!==3)throw Error(c(188));return E.stateNode.current===E?d:y}function B(d){var y=d.tag;if(y===5||y===26||y===27||y===6)return d;for(d=d.child;d!==null;){if(y=B(d),y!==null)return y;d=d.sibling}return null}var N=Object.assign,F=Symbol.for("react.element"),G=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),de=Symbol.for("react.provider"),me=Symbol.for("react.consumer"),be=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),Le=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),Ee=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function ke(d){return d===null||typeof d!="object"?null:(d=ue&&d[ue]||d["@@iterator"],typeof d=="function"?d:null)}var ce=Symbol.for("react.client.reference");function Pe(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===ce?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case te:return"Fragment";case oe:return"Profiler";case Y:return"StrictMode";case Se:return"Suspense";case $e:return"SuspenseList";case Ee:return"Activity"}if(typeof d=="object")switch(d.$$typeof){case Q:return"Portal";case be:return(d.displayName||"Context")+".Provider";case me:return(d._context.displayName||"Context")+".Consumer";case pe:var y=d.render;return d=d.displayName,d||(d=y.displayName||y.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case Le:return y=d.displayName||null,y!==null?y:Pe(d.type)||"Memo";case re:y=d._payload,d=d._init;try{return Pe(d(y))}catch{}}return null}var xe=Array.isArray,Te=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Me={pending:!1,data:null,method:null,action:null},Xe=[],Ce=-1;function He(d){return{current:d}}function et(d){0>Ce||(d.current=Xe[Ce],Xe[Ce]=null,Ce--)}function Ke(d,y){Ce++,Xe[Ce]=d.current,d.current=y}var ot=He(null),Pt=He(null),Et=He(null),Wt=He(null);function Dt(d,y){switch(Ke(Et,y),Ke(Pt,d),Ke(ot,null),y.nodeType){case 9:case 11:d=(d=y.documentElement)&&(d=d.namespaceURI)?Ox(d):0;break;default:if(d=y.tagName,y=y.namespaceURI)y=Ox(y),d=Fx(y,d);else switch(d){case"svg":d=1;break;case"math":d=2;break;default:d=0}}et(ot),Ke(ot,d)}function er(){et(ot),et(Pt),et(Et)}function De(d){d.memoizedState!==null&&Ke(Wt,d);var y=ot.current,E=Fx(y,d.type);y!==E&&(Ke(Pt,d),Ke(ot,E))}function ur(d){Pt.current===d&&(et(ot),et(Pt)),Wt.current===d&&(et(Wt),xg._currentValue=Me)}var Sr=Object.prototype.hasOwnProperty,yt=e.unstable_scheduleCallback,dt=e.unstable_cancelCallback,$t=e.unstable_shouldYield,or=e.unstable_requestPaint,Er=e.unstable_now,mr=e.unstable_getCurrentPriorityLevel,Pr=e.unstable_ImmediatePriority,Fr=e.unstable_UserBlockingPriority,Bn=e.unstable_NormalPriority,Xr=e.unstable_LowPriority,On=e.unstable_IdlePriority,fr=e.log,Tn=e.unstable_setDisableYieldValue,kr=null,Dr=null;function Br(d){if(typeof fr=="function"&&Tn(d),Dr&&typeof Dr.setStrictMode=="function")try{Dr.setStrictMode(kr,d)}catch{}}var an=Math.clz32?Math.clz32:oa,Sa=Math.log,Za=Math.LN2;function oa(d){return d>>>=0,d===0?32:31-(Sa(d)/Za|0)|0}var qn=256,Wn=4194304;function Da(d){var y=d&42;if(y!==0)return y;switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return d&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return d}}function Ia(d,y,E){var z=d.pendingLanes;if(z===0)return 0;var H=0,ee=d.suspendedLanes,Re=d.pingedLanes;d=d.warmLanes;var qe=z&134217727;return qe!==0?(z=qe&~ee,z!==0?H=Da(z):(Re&=qe,Re!==0?H=Da(Re):E||(E=qe&~d,E!==0&&(H=Da(E))))):(qe=z&~ee,qe!==0?H=Da(qe):Re!==0?H=Da(Re):E||(E=z&~d,E!==0&&(H=Da(E)))),H===0?0:y!==0&&y!==H&&(y&ee)===0&&(ee=H&-H,E=y&-y,ee>=E||ee===32&&(E&4194048)!==0)?y:H}function ja(d,y){return(d.pendingLanes&~(d.suspendedLanes&~d.pingedLanes)&y)===0}function Wr(d,y){switch(d){case 1:case 2:case 4:case 8:case 64:return y+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yi(){var d=qn;return qn<<=1,(qn&4194048)===0&&(qn=256),d}function Zn(){var d=Wn;return Wn<<=1,(Wn&62914560)===0&&(Wn=4194304),d}function cn(d){for(var y=[],E=0;31>E;E++)y.push(d);return y}function ya(d,y){d.pendingLanes|=y,y!==268435456&&(d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0)}function Xa(d,y,E,z,H,ee){var Re=d.pendingLanes;d.pendingLanes=E,d.suspendedLanes=0,d.pingedLanes=0,d.warmLanes=0,d.expiredLanes&=E,d.entangledLanes&=E,d.errorRecoveryDisabledLanes&=E,d.shellSuspendCounter=0;var qe=d.entanglements,wt=d.expirationTimes,Ht=d.hiddenUpdates;for(E=Re&~E;0<E;){var ir=31-an(E),br=1<<ir;qe[ir]=0,wt[ir]=-1;var Kt=Ht[ir];if(Kt!==null)for(Ht[ir]=null,ir=0;ir<Kt.length;ir++){var Xt=Kt[ir];Xt!==null&&(Xt.lane&=-536870913)}E&=~br}z!==0&&js(d,z,0),ee!==0&&H===0&&d.tag!==0&&(d.suspendedLanes|=ee&~(Re&~y))}function js(d,y,E){d.pendingLanes|=y,d.suspendedLanes&=~y;var z=31-an(y);d.entangledLanes|=y,d.entanglements[z]=d.entanglements[z]|1073741824|E&4194090}function qa(d,y){var E=d.entangledLanes|=y;for(d=d.entanglements;E;){var z=31-an(E),H=1<<z;H&y|d[z]&y&&(d[z]|=y),E&=~H}}function yn(d){switch(d){case 2:d=1;break;case 8:d=4;break;case 32:d=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:d=128;break;case 268435456:d=134217728;break;default:d=0}return d}function St(d){return d&=-d,2<d?8<d?(d&134217727)!==0?32:268435456:8:2}function ye(){var d=Ie.p;return d!==0?d:(d=window.event,d===void 0?32:ty(d.type))}function Ae(d,y){var E=Ie.p;try{return Ie.p=d,y()}finally{Ie.p=E}}var Ve=Math.random().toString(36).slice(2),Je="__reactFiber$"+Ve,tt="__reactProps$"+Ve,ut="__reactContainer$"+Ve,bt="__reactEvents$"+Ve,ft="__reactListeners$"+Ve,pt="__reactHandles$"+Ve,At="__reactResources$"+Ve,It="__reactMarker$"+Ve;function Jt(d){delete d[Je],delete d[tt],delete d[bt],delete d[ft],delete d[pt]}function Gt(d){var y=d[Je];if(y)return y;for(var E=d.parentNode;E;){if(y=E[ut]||E[Je]){if(E=y.alternate,y.child!==null||E!==null&&E.child!==null)for(d=hb(d);d!==null;){if(E=d[Je])return E;d=hb(d)}return y}d=E,E=d.parentNode}return null}function cr(d){if(d=d[Je]||d[ut]){var y=d.tag;if(y===5||y===6||y===13||y===26||y===27||y===3)return d}return null}function Ur(d){var y=d.tag;if(y===5||y===26||y===27||y===6)return d.stateNode;throw Error(c(33))}function Jr(d){var y=d[At];return y||(y=d[At]={hoistableStyles:new Map,hoistableScripts:new Map}),y}function Lr(d){d[It]=!0}var Qr=new Set,Yn={};function Dn(d,y){un(d,y),un(d+"Capture",y)}function un(d,y){for(Yn[d]=y,d=0;d<y.length;d++)Qr.add(y[d])}var Jn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qn={},ei={};function _s(d){return Sr.call(ei,d)?!0:Sr.call(Qn,d)?!1:Jn.test(d)?ei[d]=!0:(Qn[d]=!0,!1)}function oi(d,y,E){if(_s(y))if(E===null)d.removeAttribute(y);else{switch(typeof E){case"undefined":case"function":case"symbol":d.removeAttribute(y);return;case"boolean":var z=y.toLowerCase().slice(0,5);if(z!=="data-"&&z!=="aria-"){d.removeAttribute(y);return}}d.setAttribute(y,""+E)}}function hi(d,y,E){if(E===null)d.removeAttribute(y);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(y);return}d.setAttribute(y,""+E)}}function As(d,y,E,z){if(z===null)d.removeAttribute(E);else{switch(typeof z){case"undefined":case"function":case"symbol":case"boolean":d.removeAttribute(E);return}d.setAttributeNS(y,E,""+z)}}var So,Hf;function Vl(d){if(So===void 0)try{throw Error()}catch(E){var y=E.stack.trim().match(/\n( *(at )?)/);So=y&&y[1]||"",Hf=-1<E.stack.indexOf(`
    at`)?" (<anonymous>)":-1<E.stack.indexOf("@")?"@unknown:0:0":""}return`
`+So+d+Hf}var Ul=!1;function xd(d,y){if(!d||Ul)return"";Ul=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var z={DetermineComponentFrameRoot:function(){try{if(y){var br=function(){throw Error()};if(Object.defineProperty(br.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(br,[])}catch(Xt){var Kt=Xt}Reflect.construct(d,[],br)}else{try{br.call()}catch(Xt){Kt=Xt}d.call(br.prototype)}}else{try{throw Error()}catch(Xt){Kt=Xt}(br=d())&&typeof br.catch=="function"&&br.catch(function(){})}}catch(Xt){if(Xt&&Kt&&typeof Xt.stack=="string")return[Xt.stack,Kt.stack]}return[null,null]}};z.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var H=Object.getOwnPropertyDescriptor(z.DetermineComponentFrameRoot,"name");H&&H.configurable&&Object.defineProperty(z.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ee=z.DetermineComponentFrameRoot(),Re=ee[0],qe=ee[1];if(Re&&qe){var wt=Re.split(`
`),Ht=qe.split(`
`);for(H=z=0;z<wt.length&&!wt[z].includes("DetermineComponentFrameRoot");)z++;for(;H<Ht.length&&!Ht[H].includes("DetermineComponentFrameRoot");)H++;if(z===wt.length||H===Ht.length)for(z=wt.length-1,H=Ht.length-1;1<=z&&0<=H&&wt[z]!==Ht[H];)H--;for(;1<=z&&0<=H;z--,H--)if(wt[z]!==Ht[H]){if(z!==1||H!==1)do if(z--,H--,0>H||wt[z]!==Ht[H]){var ir=`
`+wt[z].replace(" at new "," at ");return d.displayName&&ir.includes("<anonymous>")&&(ir=ir.replace("<anonymous>",d.displayName)),ir}while(1<=z&&0<=H);break}}}finally{Ul=!1,Error.prepareStackTrace=E}return(E=d?d.displayName||d.name:"")?Vl(E):""}function vd(d){switch(d.tag){case 26:case 27:case 5:return Vl(d.type);case 16:return Vl("Lazy");case 13:return Vl("Suspense");case 19:return Vl("SuspenseList");case 0:case 15:return xd(d.type,!1);case 11:return xd(d.type.render,!1);case 1:return xd(d.type,!0);case 31:return Vl("Activity");default:return""}}function yl(d){try{var y="";do y+=vd(d),d=d.return;while(d);return y}catch(E){return`
Error generating stack: `+E.message+`
`+E.stack}}function Wi(d){switch(typeof d){case"bigint":case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function qf(d){var y=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function h0(d){var y=qf(d)?"checked":"value",E=Object.getOwnPropertyDescriptor(d.constructor.prototype,y),z=""+d[y];if(!d.hasOwnProperty(y)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var H=E.get,ee=E.set;return Object.defineProperty(d,y,{configurable:!0,get:function(){return H.call(this)},set:function(Re){z=""+Re,ee.call(this,Re)}}),Object.defineProperty(d,y,{enumerable:E.enumerable}),{getValue:function(){return z},setValue:function(Re){z=""+Re},stopTracking:function(){d._valueTracker=null,delete d[y]}}}}function Du(d){d._valueTracker||(d._valueTracker=h0(d))}function _d(d){if(!d)return!1;var y=d._valueTracker;if(!y)return!0;var E=y.getValue(),z="";return d&&(z=qf(d)?d.checked?"true":"false":d.value),d=z,d!==E?(y.setValue(d),!0):!1}function Pu(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}var zm=/[\n"\\]/g;function ti(d){return d.replace(zm,function(y){return"\\"+y.charCodeAt(0).toString(16)+" "})}function Ys(d,y,E,z,H,ee,Re,qe){d.name="",Re!=null&&typeof Re!="function"&&typeof Re!="symbol"&&typeof Re!="boolean"?d.type=Re:d.removeAttribute("type"),y!=null?Re==="number"?(y===0&&d.value===""||d.value!=y)&&(d.value=""+Wi(y)):d.value!==""+Wi(y)&&(d.value=""+Wi(y)):Re!=="submit"&&Re!=="reset"||d.removeAttribute("value"),y!=null?Qs(d,Re,Wi(y)):E!=null?Qs(d,Re,Wi(E)):z!=null&&d.removeAttribute("value"),H==null&&ee!=null&&(d.defaultChecked=!!ee),H!=null&&(d.checked=H&&typeof H!="function"&&typeof H!="symbol"),qe!=null&&typeof qe!="function"&&typeof qe!="symbol"&&typeof qe!="boolean"?d.name=""+Wi(qe):d.removeAttribute("name")}function Js(d,y,E,z,H,ee,Re,qe){if(ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"&&(d.type=ee),y!=null||E!=null){if(!(ee!=="submit"&&ee!=="reset"||y!=null))return;E=E!=null?""+Wi(E):"",y=y!=null?""+Wi(y):E,qe||y===d.value||(d.value=y),d.defaultValue=y}z=z??H,z=typeof z!="function"&&typeof z!="symbol"&&!!z,d.checked=qe?d.checked:!!z,d.defaultChecked=!!z,Re!=null&&typeof Re!="function"&&typeof Re!="symbol"&&typeof Re!="boolean"&&(d.name=Re)}function Qs(d,y,E){y==="number"&&Pu(d.ownerDocument)===d||d.defaultValue===""+E||(d.defaultValue=""+E)}function Os(d,y,E,z){if(d=d.options,y){y={};for(var H=0;H<E.length;H++)y["$"+E[H]]=!0;for(E=0;E<d.length;E++)H=y.hasOwnProperty("$"+d[E].value),d[E].selected!==H&&(d[E].selected=H),H&&z&&(d[E].defaultSelected=!0)}else{for(E=""+Wi(E),y=null,H=0;H<d.length;H++){if(d[H].value===E){d[H].selected=!0,z&&(d[H].defaultSelected=!0);return}y!==null||d[H].disabled||(y=d[H])}y!==null&&(y.selected=!0)}}function Eh(d,y,E){if(y!=null&&(y=""+Wi(y),y!==d.value&&(d.value=y),E==null)){d.defaultValue!==y&&(d.defaultValue=y);return}d.defaultValue=E!=null?""+Wi(E):""}function bd(d,y,E,z){if(y==null){if(z!=null){if(E!=null)throw Error(c(92));if(xe(z)){if(1<z.length)throw Error(c(93));z=z[0]}E=z}E==null&&(E=""),y=E}E=Wi(y),d.defaultValue=E,z=d.textContent,z===E&&z!==""&&z!==null&&(d.value=z)}function eo(d,y){if(y){var E=d.firstChild;if(E&&E===d.lastChild&&E.nodeType===3){E.nodeValue=y;return}}d.textContent=y}var kc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ch(d,y,E){var z=y.indexOf("--")===0;E==null||typeof E=="boolean"||E===""?z?d.setProperty(y,""):y==="float"?d.cssFloat="":d[y]="":z?d.setProperty(y,E):typeof E!="number"||E===0||kc.has(y)?y==="float"?d.cssFloat=E:d[y]=(""+E).trim():d[y]=E+"px"}function Wf(d,y,E){if(y!=null&&typeof y!="object")throw Error(c(62));if(d=d.style,E!=null){for(var z in E)!E.hasOwnProperty(z)||y!=null&&y.hasOwnProperty(z)||(z.indexOf("--")===0?d.setProperty(z,""):z==="float"?d.cssFloat="":d[z]="");for(var H in y)z=y[H],y.hasOwnProperty(H)&&E[H]!==z&&Ch(d,H,z)}else for(var ee in y)y.hasOwnProperty(ee)&&Ch(d,ee,y[ee])}function Rc(d){if(d.indexOf("-")===-1)return!1;switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var To=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mu(d){return Kf.test(""+d)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":d}var In=null;function Lm(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Or=null,Ic=null;function zn(d){var y=cr(d);if(y&&(d=y.stateNode)){var E=d[tt]||null;e:switch(d=y.stateNode,y.type){case"input":if(Ys(d,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name),y=E.name,E.type==="radio"&&y!=null){for(E=d;E.parentNode;)E=E.parentNode;for(E=E.querySelectorAll('input[name="'+ti(""+y)+'"][type="radio"]'),y=0;y<E.length;y++){var z=E[y];if(z!==d&&z.form===d.form){var H=z[tt]||null;if(!H)throw Error(c(90));Ys(z,H.value,H.defaultValue,H.defaultValue,H.checked,H.defaultChecked,H.type,H.name)}}for(y=0;y<E.length;y++)z=E[y],z.form===d.form&&_d(z)}break e;case"textarea":Eh(d,E.value,E.defaultValue);break e;case"select":y=E.value,y!=null&&Os(d,!!E.multiple,y,!1)}}}var wd=!1;function to(d,y,E){if(wd)return d(y,E);wd=!0;try{var z=d(y);return z}finally{if(wd=!1,(Or!==null||Ic!==null)&&(bc(),Or&&(y=Or,d=Ic,Ic=Or=null,zn(y),d)))for(y=0;y<d.length;y++)zn(d[y])}}function Au(d,y){var E=d.stateNode;if(E===null)return null;var z=E[tt]||null;if(z===null)return null;E=z[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(z=!z.disabled)||(d=d.type,z=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!z;break e;default:d=!1}if(d)return null;if(E&&typeof E!="function")throw Error(c(231,y,typeof E));return E}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wr=!1;if(Fs)try{var Ln={};Object.defineProperty(Ln,"passive",{get:function(){wr=!0}}),window.addEventListener("test",Ln,Ln),window.removeEventListener("test",Ln,Ln)}catch{wr=!1}var _n=null,bs=null,xl=null;function En(){if(xl)return xl;var d,y=bs,E=y.length,z,H="value"in _n?_n.value:_n.textContent,ee=H.length;for(d=0;d<E&&y[d]===H[d];d++);var Re=E-d;for(z=1;z<=Re&&y[E-z]===H[ee-z];z++);return xl=H.slice(d,1<z?1-z:void 0)}function ku(d){var y=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&y===13&&(d=13)):d=y,d===10&&(d=13),32<=d||d===13?d:0}function Eo(){return!0}function zc(){return!1}function Pa(d){function y(E,z,H,ee,Re){this._reactName=E,this._targetInst=H,this.type=z,this.nativeEvent=ee,this.target=Re,this.currentTarget=null;for(var qe in d)d.hasOwnProperty(qe)&&(E=d[qe],this[qe]=E?E(ee):ee[qe]);return this.isDefaultPrevented=(ee.defaultPrevented!=null?ee.defaultPrevented:ee.returnValue===!1)?Eo:zc,this.isPropagationStopped=zc,this}return N(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var E=this.nativeEvent;E&&(E.preventDefault?E.preventDefault():typeof E.returnValue!="unknown"&&(E.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var E=this.nativeEvent;E&&(E.stopPropagation?E.stopPropagation():typeof E.cancelBubble!="unknown"&&(E.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),y}var ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dh=Pa(ea),Gl=N({},ea,{view:0,detail:0}),Zf=Pa(Gl),Lc,Sd,Hl,Mi=N({},Gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xf,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Hl&&(Hl&&d.type==="mousemove"?(Lc=d.screenX-Hl.screenX,Sd=d.screenY-Hl.screenY):Sd=Lc=0,Hl=d),Lc)},movementY:function(d){return"movementY"in d?d.movementY:Sd}}),Yo=Pa(Mi),Ai=N({},Mi,{dataTransfer:0}),Ru=Pa(Ai),Iu=N({},Gl,{relatedTarget:0}),wa=Pa(Iu),Jo=N({},ea,{animationName:0,elapsedTime:0,pseudoElement:0}),Co=Pa(Jo),ri=N({},ea,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Ph=Pa(ri),Do=N({},ea,{data:0}),vl=Pa(Do),Td={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_x={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ql(d){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(d):(d=_x[d])?!!y[d]:!1}function Xf(){return ql}var Yf=N({},Gl,{key:function(d){if(d.key){var y=Td[d.key]||d.key;if(y!=="Unidentified")return y}return d.type==="keypress"?(d=ku(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?zu[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xf,charCode:function(d){return d.type==="keypress"?ku(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?ku(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Vs=Pa(Yf),Jf=N({},Mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mh=Pa(Jf),f0=N({},Gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xf}),Ah=Pa(f0),bx=N({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),wx=Pa(bx),kh=N({},Mi,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Rh=Pa(kh),p0=N({},ea,{newState:0,oldState:0}),Qo=Pa(p0),m0=[9,13,27,32],Ed=Fs&&"CompositionEvent"in window,Us=null;Fs&&"documentMode"in document&&(Us=document.documentMode);var Sx=Fs&&"TextEvent"in window&&!Us,g0=Fs&&(!Ed||Us&&8<Us&&11>=Us),y0=" ",$m=!1;function Lu(d,y){switch(d){case"keyup":return m0.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dn(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Rr=!1;function Qf(d,y){switch(d){case"compositionend":return dn(y);case"keypress":return y.which!==32?null:($m=!0,y0);case"textInput":return d=y.data,d===y0&&$m?null:d;default:return null}}function en(d,y){if(Rr)return d==="compositionend"||!Ed&&Lu(d,y)?(d=En(),xl=bs=_n=null,Rr=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return g0&&y.locale!=="ko"?null:y.data;default:return null}}var ep={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _l(d){var y=d&&d.nodeName&&d.nodeName.toLowerCase();return y==="input"?!!ep[d.type]:y==="textarea"}function Gr(d,y,E,z){Or?Ic?Ic.push(z):Ic=[z]:Or=z,y=su(y,"onChange"),0<y.length&&(E=new Dh("onChange","change",null,E,z),d.push({event:E,listeners:y}))}var $u=null,$c=null;function Cd(d){F0(d,0)}function Wl(d){var y=Ur(d);if(_d(y))return d}function Dd(d,y){if(d==="change")return y}var Oi=!1;if(Fs){var ws;if(Fs){var Pd="oninput"in document;if(!Pd){var lr=document.createElement("div");lr.setAttribute("oninput","return;"),Pd=typeof lr.oninput=="function"}ws=Pd}else ws=!1;Oi=ws&&(!document.documentMode||9<document.documentMode)}function Ih(){$u&&($u.detachEvent("onpropertychange",bl),$c=$u=null)}function bl(d){if(d.propertyName==="value"&&Wl($c)){var y=[];Gr(y,$c,d,Lm(d)),to(Cd,y)}}function Ki(d,y,E){d==="focusin"?(Ih(),$u=y,$c=E,$u.attachEvent("onpropertychange",bl)):d==="focusout"&&Ih()}function x0(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Wl($c)}function tp(d,y){if(d==="click")return Wl(y)}function Kl(d,y){if(d==="input"||d==="change")return Wl(y)}function Md(d,y){return d===y&&(d!==0||1/d===1/y)||d!==d&&y!==y}var ki=typeof Object.is=="function"?Object.is:Md;function wl(d,y){if(ki(d,y))return!0;if(typeof d!="object"||d===null||typeof y!="object"||y===null)return!1;var E=Object.keys(d),z=Object.keys(y);if(E.length!==z.length)return!1;for(z=0;z<E.length;z++){var H=E[z];if(!Sr.call(y,H)||!ki(d[H],y[H]))return!1}return!0}function Bu(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function v0(d,y){var E=Bu(d);d=0;for(var z;E;){if(E.nodeType===3){if(z=d+E.textContent.length,d<=y&&z>=y)return{node:E,offset:y-d};d=z}e:{for(;E;){if(E.nextSibling){E=E.nextSibling;break e}E=E.parentNode}E=void 0}E=Bu(E)}}function _0(d,y){return d&&y?d===y?!0:d&&d.nodeType===3?!1:y&&y.nodeType===3?_0(d,y.parentNode):"contains"in d?d.contains(y):d.compareDocumentPosition?!!(d.compareDocumentPosition(y)&16):!1:!1}function rp(d){d=d!=null&&d.ownerDocument!=null&&d.ownerDocument.defaultView!=null?d.ownerDocument.defaultView:window;for(var y=Pu(d.document);y instanceof d.HTMLIFrameElement;){try{var E=typeof y.contentWindow.location.href=="string"}catch{E=!1}if(E)d=y.contentWindow;else break;y=Pu(d.document)}return y}function np(d){var y=d&&d.nodeName&&d.nodeName.toLowerCase();return y&&(y==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||y==="textarea"||d.contentEditable==="true")}var b0=Fs&&"documentMode"in document&&11>=document.documentMode,Nu=null,Ad=null,el=null,Bm=!1;function w0(d,y,E){var z=E.window===E?E.document:E.nodeType===9?E:E.ownerDocument;Bm||Nu==null||Nu!==Pu(z)||(z=Nu,"selectionStart"in z&&np(z)?z={start:z.selectionStart,end:z.selectionEnd}:(z=(z.ownerDocument&&z.ownerDocument.defaultView||window).getSelection(),z={anchorNode:z.anchorNode,anchorOffset:z.anchorOffset,focusNode:z.focusNode,focusOffset:z.focusOffset}),el&&wl(el,z)||(el=z,z=su(Ad,"onSelect"),0<z.length&&(y=new Dh("onSelect","select",null,y,E),d.push({event:y,listeners:z}),y.target=Nu)))}function Zl(d,y){var E={};return E[d.toLowerCase()]=y.toLowerCase(),E["Webkit"+d]="webkit"+y,E["Moz"+d]="moz"+y,E}var Bc={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionrun:Zl("Transition","TransitionRun"),transitionstart:Zl("Transition","TransitionStart"),transitioncancel:Zl("Transition","TransitionCancel"),transitionend:Zl("Transition","TransitionEnd")},ap={},ks={};Fs&&(ks=document.createElement("div").style,"AnimationEvent"in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),"TransitionEvent"in window||delete Bc.transitionend.transition);function Nc(d){if(ap[d])return ap[d];if(!Bc[d])return d;var y=Bc[d],E;for(E in y)if(y.hasOwnProperty(E)&&E in ks)return ap[d]=y[E];return d}var ip=Nc("animationend"),zh=Nc("animationiteration"),kd=Nc("animationstart"),sp=Nc("transitionrun"),jc=Nc("transitionstart"),op=Nc("transitioncancel"),lp=Nc("transitionend"),Oc=new Map,Fc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fc.push("scrollEnd");function Rs(d,y){Oc.set(d,y),Dn(y,[d])}var Vc=new WeakMap;function Ri(d,y){if(typeof d=="object"&&d!==null){var E=Vc.get(d);return E!==void 0?E:(y={value:d,source:y,stack:yl(y)},Vc.set(d,y),y)}return{value:d,source:y,stack:yl(y)}}var Zi=[],Xl=0,Lh=0;function ju(){for(var d=Xl,y=Lh=Xl=0;y<d;){var E=Zi[y];Zi[y++]=null;var z=Zi[y];Zi[y++]=null;var H=Zi[y];Zi[y++]=null;var ee=Zi[y];if(Zi[y++]=null,z!==null&&H!==null){var Re=z.pending;Re===null?H.next=H:(H.next=Re.next,Re.next=H),z.pending=H}ee!==0&&Nm(E,H,ee)}}function Po(d,y,E,z){Zi[Xl++]=d,Zi[Xl++]=y,Zi[Xl++]=E,Zi[Xl++]=z,Lh|=z,d.lanes|=z,d=d.alternate,d!==null&&(d.lanes|=z)}function bn(d,y,E,z){return Po(d,y,E,z),$h(d)}function Ou(d,y){return Po(d,null,null,y),$h(d)}function Nm(d,y,E){d.lanes|=E;var z=d.alternate;z!==null&&(z.lanes|=E);for(var H=!1,ee=d.return;ee!==null;)ee.childLanes|=E,z=ee.alternate,z!==null&&(z.childLanes|=E),ee.tag===22&&(d=ee.stateNode,d===null||d._visibility&1||(H=!0)),d=ee,ee=ee.return;return d.tag===3?(ee=d.stateNode,H&&y!==null&&(H=31-an(E),d=ee.hiddenUpdates,z=d[H],z===null?d[H]=[y]:z.push(y),y.lane=E|536870912),ee):null}function $h(d){if(50<Qm)throw Qm=0,L0=null,Error(c(185));for(var y=d.return;y!==null;)d=y,y=d.return;return d.tag===3?d.stateNode:null}var Mo={};function S0(d,y,E,z){this.tag=d,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(d,y,E,z){return new S0(d,y,E,z)}function jm(d){return d=d.prototype,!(!d||!d.isReactComponent)}function Yl(d,y){var E=d.alternate;return E===null?(E=Un(d.tag,y,d.key,d.mode),E.elementType=d.elementType,E.type=d.type,E.stateNode=d.stateNode,E.alternate=d,d.alternate=E):(E.pendingProps=y,E.type=d.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=d.flags&65011712,E.childLanes=d.childLanes,E.lanes=d.lanes,E.child=d.child,E.memoizedProps=d.memoizedProps,E.memoizedState=d.memoizedState,E.updateQueue=d.updateQueue,y=d.dependencies,E.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},E.sibling=d.sibling,E.index=d.index,E.ref=d.ref,E.refCleanup=d.refCleanup,E}function cp(d,y){d.flags&=65011714;var E=d.alternate;return E===null?(d.childLanes=0,d.lanes=y,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=E.childLanes,d.lanes=E.lanes,d.child=E.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=E.memoizedProps,d.memoizedState=E.memoizedState,d.updateQueue=E.updateQueue,d.type=E.type,y=E.dependencies,d.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),d}function Rd(d,y,E,z,H,ee){var Re=0;if(z=d,typeof d=="function")jm(d)&&(Re=1);else if(typeof d=="string")Re=wb(d,E,ot.current)?26:d==="html"||d==="head"||d==="body"?27:5;else e:switch(d){case Ee:return d=Un(31,E,y,H),d.elementType=Ee,d.lanes=ee,d;case te:return Jl(E.children,H,ee,y);case Y:Re=8,H|=24;break;case oe:return d=Un(12,E,y,H|2),d.elementType=oe,d.lanes=ee,d;case Se:return d=Un(13,E,y,H),d.elementType=Se,d.lanes=ee,d;case $e:return d=Un(19,E,y,H),d.elementType=$e,d.lanes=ee,d;default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case de:case be:Re=10;break e;case me:Re=9;break e;case pe:Re=11;break e;case Le:Re=14;break e;case re:Re=16,z=null;break e}Re=29,E=Error(c(130,d===null?"null":typeof d,"")),z=null}return y=Un(Re,E,y,H),y.elementType=d,y.type=z,y.lanes=ee,y}function Jl(d,y,E,z){return d=Un(7,d,z,y),d.lanes=E,d}function Bh(d,y,E){return d=Un(6,d,null,y),d.lanes=E,d}function up(d,y,E){return y=Un(4,d.children!==null?d.children:[],d.key,y),y.lanes=E,y.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},y}var Fu=[],Id=0,Uc=null,Gc=0,ro=[],Ya=0,Ql=null,Ao=1,ko="";function ec(d,y){Fu[Id++]=Gc,Fu[Id++]=Uc,Uc=d,Gc=y}function dp(d,y,E){ro[Ya++]=Ao,ro[Ya++]=ko,ro[Ya++]=Ql,Ql=d;var z=Ao;d=ko;var H=32-an(z)-1;z&=~(1<<H),E+=1;var ee=32-an(y)+H;if(30<ee){var Re=H-H%5;ee=(z&(1<<Re)-1).toString(32),z>>=Re,H-=Re,Ao=1<<32-an(y)+H|E<<H|z,ko=ee+d}else Ao=1<<ee|E<<H|z,ko=d}function zd(d){d.return!==null&&(ec(d,1),dp(d,1,0))}function Nh(d){for(;d===Uc;)Uc=Fu[--Id],Fu[Id]=null,Gc=Fu[--Id],Fu[Id]=null;for(;d===Ql;)Ql=ro[--Ya],ro[Ya]=null,ko=ro[--Ya],ro[Ya]=null,Ao=ro[--Ya],ro[Ya]=null}var as=null,Ja=null,Ta=!1,Hc=null,Is=!1,Om=Error(c(519));function Vu(d){var y=Error(c(418,""));throw Uu(Ri(y,d)),Om}function T0(d){var y=d.stateNode,E=d.type,z=d.memoizedProps;switch(y[Je]=d,y[tt]=z,E){case"dialog":ga("cancel",y),ga("close",y);break;case"iframe":case"object":case"embed":ga("load",y);break;case"video":case"audio":for(E=0;E<mf.length;E++)ga(mf[E],y);break;case"source":ga("error",y);break;case"img":case"image":case"link":ga("error",y),ga("load",y);break;case"details":ga("toggle",y);break;case"input":ga("invalid",y),Js(y,z.value,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name,!0),Du(y);break;case"select":ga("invalid",y);break;case"textarea":ga("invalid",y),bd(y,z.value,z.defaultValue,z.children),Du(y)}E=z.children,typeof E!="string"&&typeof E!="number"&&typeof E!="bigint"||y.textContent===""+E||z.suppressHydrationWarning===!0||Nx(y.textContent,E)?(z.popover!=null&&(ga("beforetoggle",y),ga("toggle",y)),z.onScroll!=null&&ga("scroll",y),z.onScrollEnd!=null&&ga("scrollend",y),z.onClick!=null&&(y.onclick=xf),y=!0):y=!1,y||Vu(d)}function E0(d){for(as=d.return;as;)switch(as.tag){case 5:case 13:Is=!1;return;case 27:case 3:Is=!0;return;default:as=as.return}}function jh(d){if(d!==as)return!1;if(!Ta)return E0(d),Ta=!0,!1;var y=d.tag,E;if((E=y!==3&&y!==27)&&((E=y===5)&&(E=d.type,E=!(E!=="form"&&E!=="button")||cg(d.type,d.memoizedProps)),E=!E),E&&Ja&&Vu(d),E0(d),y===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(c(317));e:{for(d=d.nextSibling,y=0;d;){if(d.nodeType===8)if(E=d.data,E==="/$"){if(y===0){Ja=Rl(d.nextSibling);break e}y--}else E!=="$"&&E!=="$!"&&E!=="$?"||y++;d=d.nextSibling}Ja=null}}else y===27?(y=Ja,fo(d.type)?(d=Z0,Z0=null,Ja=d):Ja=y):Ja=as?Rl(d.stateNode.nextSibling):null;return!0}function Oh(){Ja=as=null,Ta=!1}function Ld(){var d=Hc;return d!==null&&(fi===null?fi=d:fi.push.apply(fi,d),Hc=null),d}function Uu(d){Hc===null?Hc=[d]:Hc.push(d)}var Fh=He(null),Ro=null,Sl=null;function tc(d,y,E){Ke(Fh,y._currentValue),y._currentValue=E}function tl(d){d._currentValue=Fh.current,et(Fh)}function $d(d,y,E){for(;d!==null;){var z=d.alternate;if((d.childLanes&y)!==y?(d.childLanes|=y,z!==null&&(z.childLanes|=y)):z!==null&&(z.childLanes&y)!==y&&(z.childLanes|=y),d===E)break;d=d.return}}function Gs(d,y,E,z){var H=d.child;for(H!==null&&(H.return=d);H!==null;){var ee=H.dependencies;if(ee!==null){var Re=H.child;ee=ee.firstContext;e:for(;ee!==null;){var qe=ee;ee=H;for(var wt=0;wt<y.length;wt++)if(qe.context===y[wt]){ee.lanes|=E,qe=ee.alternate,qe!==null&&(qe.lanes|=E),$d(ee.return,E,d),z||(Re=null);break e}ee=qe.next}}else if(H.tag===18){if(Re=H.return,Re===null)throw Error(c(341));Re.lanes|=E,ee=Re.alternate,ee!==null&&(ee.lanes|=E),$d(Re,E,d),Re=null}else Re=H.child;if(Re!==null)Re.return=H;else for(Re=H;Re!==null;){if(Re===d){Re=null;break}if(H=Re.sibling,H!==null){H.return=Re.return,Re=H;break}Re=Re.return}H=Re}}function Gu(d,y,E,z){d=null;for(var H=y,ee=!1;H!==null;){if(!ee){if((H.flags&524288)!==0)ee=!0;else if((H.flags&262144)!==0)break}if(H.tag===10){var Re=H.alternate;if(Re===null)throw Error(c(387));if(Re=Re.memoizedProps,Re!==null){var qe=H.type;ki(H.pendingProps.value,Re.value)||(d!==null?d.push(qe):d=[qe])}}else if(H===Wt.current){if(Re=H.alternate,Re===null)throw Error(c(387));Re.memoizedState.memoizedState!==H.memoizedState.memoizedState&&(d!==null?d.push(xg):d=[xg])}H=H.return}d!==null&&Gs(y,d,E,z),y.flags|=262144}function Io(d){for(d=d.firstContext;d!==null;){if(!ki(d.context._currentValue,d.memoizedValue))return!0;d=d.next}return!1}function rc(d){Ro=d,Sl=null,d=d.dependencies,d!==null&&(d.firstContext=null)}function xi(d){return Fm(Ro,d)}function Hu(d,y){return Ro===null&&rc(d),Fm(d,y)}function Fm(d,y){var E=y._currentValue;if(y={context:y,memoizedValue:E,next:null},Sl===null){if(d===null)throw Error(c(308));Sl=y,d.dependencies={lanes:0,firstContext:y},d.flags|=524288}else Sl=Sl.next=y;return E}var Vm=typeof AbortController<"u"?AbortController:function(){var d=[],y=this.signal={aborted:!1,addEventListener:function(E,z){d.push(z)}};this.abort=function(){y.aborted=!0,d.forEach(function(E){return E()})}},hp=e.unstable_scheduleCallback,C0=e.unstable_NormalPriority,Ii={$$typeof:be,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qu(){return{controller:new Vm,data:new Map,refCount:0}}function Vh(d){d.refCount--,d.refCount===0&&hp(C0,function(){d.controller.abort()})}var Bd=null,Uh=0,nc=0,qc=null;function fp(d,y){if(Bd===null){var E=Bd=[];Uh=0,nc=Ix(),qc={status:"pending",value:void 0,then:function(z){E.push(z)}}}return Uh++,y.then(Nd,Nd),y}function Nd(){if(--Uh===0&&Bd!==null){qc!==null&&(qc.status="fulfilled");var d=Bd;Bd=null,nc=0,qc=null;for(var y=0;y<d.length;y++)(0,d[y])()}}function Um(d,y){var E=[],z={status:"pending",value:null,reason:null,then:function(H){E.push(H)}};return d.then(function(){z.status="fulfilled",z.value=y;for(var H=0;H<E.length;H++)(0,E[H])(y)},function(H){for(z.status="rejected",z.reason=H,H=0;H<E.length;H++)(0,E[H])(void 0)}),z}var Wu=Te.S;Te.S=function(d,y){typeof y=="object"&&y!==null&&typeof y.then=="function"&&fp(d,y),Wu!==null&&Wu(d,y)};var ac=He(null);function jd(){var d=ac.current;return d!==null?d:xn.pooledCache}function Ku(d,y){y===null?Ke(ac,ac.current):Ke(ac,y.pool)}function pp(){var d=jd();return d===null?null:{parent:Ii._currentValue,pool:d}}var Zu=Error(c(460)),D0=Error(c(474)),ic=Error(c(542)),Xu={then:function(){}};function Tr(d){return d=d.status,d==="fulfilled"||d==="rejected"}function Od(){}function Gm(d,y,E){switch(E=d[E],E===void 0?d.push(y):E!==y&&(y.then(Od,Od),y=E),y.status){case"fulfilled":return y.value;case"rejected":throw d=y.reason,Ir(d),d;default:if(typeof y.status=="string")y.then(Od,Od);else{if(d=xn,d!==null&&100<d.shellSuspendCounter)throw Error(c(482));d=y,d.status="pending",d.then(function(z){if(y.status==="pending"){var H=y;H.status="fulfilled",H.value=z}},function(z){if(y.status==="pending"){var H=y;H.status="rejected",H.reason=z}})}switch(y.status){case"fulfilled":return y.value;case"rejected":throw d=y.reason,Ir(d),d}throw Ss=y,Zu}}var Ss=null;function Wc(){if(Ss===null)throw Error(c(459));var d=Ss;return Ss=null,d}function Ir(d){if(d===Zu||d===ic)throw Error(c(483))}var Tl=!1;function mp(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gp(d,y){d=d.updateQueue,y.updateQueue===d&&(y.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,callbacks:null})}function rl(d){return{lane:d,tag:0,payload:null,callback:null,next:null}}function El(d,y,E){var z=d.updateQueue;if(z===null)return null;if(z=z.shared,(Zr&2)!==0){var H=z.pending;return H===null?y.next=y:(y.next=H.next,H.next=y),z.pending=y,y=$h(d),Nm(d,null,E),y}return Po(d,z,y,E),$h(d)}function Kc(d,y,E){if(y=y.updateQueue,y!==null&&(y=y.shared,(E&4194048)!==0)){var z=y.lanes;z&=d.pendingLanes,E|=z,y.lanes=E,qa(d,E)}}function Gh(d,y){var E=d.updateQueue,z=d.alternate;if(z!==null&&(z=z.updateQueue,E===z)){var H=null,ee=null;if(E=E.firstBaseUpdate,E!==null){do{var Re={lane:E.lane,tag:E.tag,payload:E.payload,callback:null,next:null};ee===null?H=ee=Re:ee=ee.next=Re,E=E.next}while(E!==null);ee===null?H=ee=y:ee=ee.next=y}else H=ee=y;E={baseState:z.baseState,firstBaseUpdate:H,lastBaseUpdate:ee,shared:z.shared,callbacks:z.callbacks},d.updateQueue=E;return}d=E.lastBaseUpdate,d===null?E.firstBaseUpdate=y:d.next=y,E.lastBaseUpdate=y}var yp=!1;function Yu(){if(yp){var d=qc;if(d!==null)throw d}}function Hs(d,y,E,z){yp=!1;var H=d.updateQueue;Tl=!1;var ee=H.firstBaseUpdate,Re=H.lastBaseUpdate,qe=H.shared.pending;if(qe!==null){H.shared.pending=null;var wt=qe,Ht=wt.next;wt.next=null,Re===null?ee=Ht:Re.next=Ht,Re=wt;var ir=d.alternate;ir!==null&&(ir=ir.updateQueue,qe=ir.lastBaseUpdate,qe!==Re&&(qe===null?ir.firstBaseUpdate=Ht:qe.next=Ht,ir.lastBaseUpdate=wt))}if(ee!==null){var br=H.baseState;Re=0,ir=Ht=wt=null,qe=ee;do{var Kt=qe.lane&-536870913,Xt=Kt!==qe.lane;if(Xt?(Mn&Kt)===Kt:(z&Kt)===Kt){Kt!==0&&Kt===nc&&(yp=!0),ir!==null&&(ir=ir.next={lane:0,tag:qe.tag,payload:qe.payload,callback:null,next:null});e:{var Nn=d,An=qe;Kt=y;var Ka=E;switch(An.tag){case 1:if(Nn=An.payload,typeof Nn=="function"){br=Nn.call(Ka,br,Kt);break e}br=Nn;break e;case 3:Nn.flags=Nn.flags&-65537|128;case 0:if(Nn=An.payload,Kt=typeof Nn=="function"?Nn.call(Ka,br,Kt):Nn,Kt==null)break e;br=N({},br,Kt);break e;case 2:Tl=!0}}Kt=qe.callback,Kt!==null&&(d.flags|=64,Xt&&(d.flags|=8192),Xt=H.callbacks,Xt===null?H.callbacks=[Kt]:Xt.push(Kt))}else Xt={lane:Kt,tag:qe.tag,payload:qe.payload,callback:qe.callback,next:null},ir===null?(Ht=ir=Xt,wt=br):ir=ir.next=Xt,Re|=Kt;if(qe=qe.next,qe===null){if(qe=H.shared.pending,qe===null)break;Xt=qe,qe=Xt.next,Xt.next=null,H.lastBaseUpdate=Xt,H.shared.pending=null}}while(!0);ir===null&&(wt=br),H.baseState=wt,H.firstBaseUpdate=Ht,H.lastBaseUpdate=ir,ee===null&&(H.shared.lanes=0),va|=Re,d.lanes=Re,d.memoizedState=br}}function xp(d,y){if(typeof d!="function")throw Error(c(191,d));d.call(y)}function vp(d,y){var E=d.callbacks;if(E!==null)for(d.callbacks=null,d=0;d<E.length;d++)xp(E[d],y)}var zi=He(null),nl=He(0);function Fd(d,y){d=Hn,Ke(nl,d),Ke(zi,y),Hn=d|y.baseLanes}function Vd(){Ke(nl,Hn),Ke(zi,zi.current)}function Zc(){Hn=nl.current,et(zi),et(nl)}var al=0,ta=null,na=null,Cn=null,sc=!1,oc=!1,il=!1,Cl=0,Ud=0,Gd=null,Hd=0;function Wa(){throw Error(c(321))}function tr(d,y){if(y===null)return!1;for(var E=0;E<y.length&&E<d.length;E++)if(!ki(d[E],y[E]))return!1;return!0}function vr(d,y,E,z,H,ee){return al=ee,ta=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,Te.H=d===null||d.memoizedState===null?$s:eh,il=!1,ee=E(z,H),il=!1,oc&&(ee=Ma(y,E,z,H)),lc(d),ee}function lc(d){Te.H=Jc;var y=na!==null&&na.next!==null;if(al=0,Cn=na=ta=null,sc=!1,Ud=0,Gd=null,y)throw Error(c(300));d===null||_i||(d=d.dependencies,d!==null&&Io(d)&&(_i=!0))}function Ma(d,y,E,z){ta=d;var H=0;do{if(oc&&(Gd=null),Ud=0,oc=!1,25<=H)throw Error(c(301));if(H+=1,Cn=na=null,d.updateQueue!=null){var ee=d.updateQueue;ee.lastEffect=null,ee.events=null,ee.stores=null,ee.memoCache!=null&&(ee.memoCache.index=0)}Te.H=A0,ee=y(E,z)}while(oc);return ee}function Tt(){var d=Te.H,y=d.useState()[0];return y=typeof y.then=="function"?Dl(y):y,d=d.useState()[0],(na!==null?na.memoizedState:null)!==d&&(ta.flags|=1024),y}function _p(){var d=Cl!==0;return Cl=0,d}function qd(d,y,E){y.updateQueue=d.updateQueue,y.flags&=-2053,d.lanes&=~E}function Hh(d){if(sc){for(d=d.memoizedState;d!==null;){var y=d.queue;y!==null&&(y.pending=null),d=d.next}sc=!1}al=0,Cn=na=ta=null,oc=!1,Ud=Cl=0,Gd=null}function zs(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?ta.memoizedState=Cn=d:Cn=Cn.next=d,Cn}function vi(){if(na===null){var d=ta.alternate;d=d!==null?d.memoizedState:null}else d=na.next;var y=Cn===null?ta.memoizedState:Cn.next;if(y!==null)Cn=y,na=d;else{if(d===null)throw ta.alternate===null?Error(c(467)):Error(c(310));na=d,d={memoizedState:na.memoizedState,baseState:na.baseState,baseQueue:na.baseQueue,queue:na.queue,next:null},Cn===null?ta.memoizedState=Cn=d:Cn=Cn.next=d}return Cn}function bp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(d){var y=Ud;return Ud+=1,Gd===null&&(Gd=[]),d=Gm(Gd,d,y),y=ta,(Cn===null?y.memoizedState:Cn.next)===null&&(y=y.alternate,Te.H=y===null||y.memoizedState===null?$s:eh),d}function wp(d){if(d!==null&&typeof d=="object"){if(typeof d.then=="function")return Dl(d);if(d.$$typeof===be)return xi(d)}throw Error(c(438,String(d)))}function Hm(d){var y=null,E=ta.updateQueue;if(E!==null&&(y=E.memoCache),y==null){var z=ta.alternate;z!==null&&(z=z.updateQueue,z!==null&&(z=z.memoCache,z!=null&&(y={data:z.data.map(function(H){return H.slice()}),index:0})))}if(y==null&&(y={data:[],index:0}),E===null&&(E=bp(),ta.updateQueue=E),E.memoCache=y,E=y.data[y.index],E===void 0)for(E=y.data[y.index]=Array(d),z=0;z<d;z++)E[z]=se;return y.index++,E}function Ls(d,y){return typeof y=="function"?y(d):y}function Xc(d){var y=vi();return Wd(y,na,d)}function Wd(d,y,E){var z=d.queue;if(z===null)throw Error(c(311));z.lastRenderedReducer=E;var H=d.baseQueue,ee=z.pending;if(ee!==null){if(H!==null){var Re=H.next;H.next=ee.next,ee.next=Re}y.baseQueue=H=ee,z.pending=null}if(ee=d.baseState,H===null)d.memoizedState=ee;else{y=H.next;var qe=Re=null,wt=null,Ht=y,ir=!1;do{var br=Ht.lane&-536870913;if(br!==Ht.lane?(Mn&br)===br:(al&br)===br){var Kt=Ht.revertLane;if(Kt===0)wt!==null&&(wt=wt.next={lane:0,revertLane:0,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null}),br===nc&&(ir=!0);else if((al&Kt)===Kt){Ht=Ht.next,Kt===nc&&(ir=!0);continue}else br={lane:0,revertLane:Ht.revertLane,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null},wt===null?(qe=wt=br,Re=ee):wt=wt.next=br,ta.lanes|=Kt,va|=Kt;br=Ht.action,il&&E(ee,br),ee=Ht.hasEagerState?Ht.eagerState:E(ee,br)}else Kt={lane:br,revertLane:Ht.revertLane,action:Ht.action,hasEagerState:Ht.hasEagerState,eagerState:Ht.eagerState,next:null},wt===null?(qe=wt=Kt,Re=ee):wt=wt.next=Kt,ta.lanes|=br,va|=br;Ht=Ht.next}while(Ht!==null&&Ht!==y);if(wt===null?Re=ee:wt.next=qe,!ki(ee,d.memoizedState)&&(_i=!0,ir&&(E=qc,E!==null)))throw E;d.memoizedState=ee,d.baseState=Re,d.baseQueue=wt,z.lastRenderedState=ee}return H===null&&(z.lanes=0),[d.memoizedState,z.dispatch]}function Ju(d){var y=vi(),E=y.queue;if(E===null)throw Error(c(311));E.lastRenderedReducer=d;var z=E.dispatch,H=E.pending,ee=y.memoizedState;if(H!==null){E.pending=null;var Re=H=H.next;do ee=d(ee,Re.action),Re=Re.next;while(Re!==H);ki(ee,y.memoizedState)||(_i=!0),y.memoizedState=ee,y.baseQueue===null&&(y.baseState=ee),E.lastRenderedState=ee}return[ee,z]}function qm(d,y,E){var z=ta,H=vi(),ee=Ta;if(ee){if(E===void 0)throw Error(c(407));E=E()}else E=y();var Re=!ki((na||H).memoizedState,E);Re&&(H.memoizedState=E,_i=!0),H=H.queue;var qe=Lo.bind(null,z,H,d);if(ed(2048,8,qe,[d]),H.getSnapshot!==y||Re||Cn!==null&&Cn.memoizedState.tag&1){if(z.flags|=2048,fc(9,Qu(),zo.bind(null,z,H,E,y),null),xn===null)throw Error(c(349));ee||(al&124)!==0||qh(z,y,E)}return E}function qh(d,y,E){d.flags|=16384,d={getSnapshot:y,value:E},y=ta.updateQueue,y===null?(y=bp(),ta.updateQueue=y,y.stores=[d]):(E=y.stores,E===null?y.stores=[d]:E.push(d))}function zo(d,y,E,z){y.value=E,y.getSnapshot=z,Yc(y)&&P0(d)}function Lo(d,y,E){return E(function(){Yc(y)&&P0(d)})}function Yc(d){var y=d.getSnapshot;d=d.value;try{var E=y();return!ki(d,E)}catch{return!0}}function P0(d){var y=Ou(d,2);y!==null&&jo(y,d,2)}function is(d){var y=zs();if(typeof d=="function"){var E=d;if(d=E(),il){Br(!0);try{E()}finally{Br(!1)}}}return y.memoizedState=y.baseState=d,y.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:d},y}function M0(d,y,E,z){return d.baseState=E,Wd(d,na,typeof z=="function"?z:Ls)}function Wh(d,y,E,z,H){if(nf(d))throw Error(c(485));if(d=y.action,d!==null){var ee={payload:H,action:d,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Re){ee.listeners.push(Re)}};Te.T!==null?E(!0):ee.isTransition=!1,z(ee),E=y.pending,E===null?(ee.next=y.pending=ee,xa(y,ee)):(ee.next=E.next,y.pending=E.next=ee)}}function xa(d,y){var E=y.action,z=y.payload,H=d.state;if(y.isTransition){var ee=Te.T,Re={};Te.T=Re;try{var qe=E(H,z),wt=Te.S;wt!==null&&wt(Re,qe),Fn(d,y,qe)}catch(Ht){no(d,y,Ht)}finally{Te.T=ee}}else try{ee=E(H,z),Fn(d,y,ee)}catch(Ht){no(d,y,Ht)}}function Fn(d,y,E){E!==null&&typeof E=="object"&&typeof E.then=="function"?E.then(function(z){Kh(d,y,z)},function(z){return no(d,y,z)}):Kh(d,y,E)}function Kh(d,y,E){y.status="fulfilled",y.value=E,Kd(y),d.state=E,y=d.pending,y!==null&&(E=y.next,E===y?d.pending=null:(E=E.next,y.next=E,xa(d,E)))}function no(d,y,E){var z=d.pending;if(d.pending=null,z!==null){z=z.next;do y.status="rejected",y.reason=E,Kd(y),y=y.next;while(y!==z)}d.action=null}function Kd(d){d=d.listeners;for(var y=0;y<d.length;y++)(0,d[y])()}function cc(d,y){return y}function Sp(d,y){if(Ta){var E=xn.formState;if(E!==null){e:{var z=ta;if(Ta){if(Ja){t:{for(var H=Ja,ee=Is;H.nodeType!==8;){if(!ee){H=null;break t}if(H=Rl(H.nextSibling),H===null){H=null;break t}}ee=H.data,H=ee==="F!"||ee==="F"?H:null}if(H){Ja=Rl(H.nextSibling),z=H.data==="F!";break e}}Vu(z)}z=!1}z&&(y=E[0])}}return E=zs(),E.memoizedState=E.baseState=y,z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:y},E.queue=z,E=Km.bind(null,ta,z),z.dispatch=E,z=is(!1),ee=Ap.bind(null,ta,!1,z.queue),z=zs(),H={state:y,dispatch:null,action:d,pending:null},z.queue=H,E=Wh.bind(null,ta,H,ee,E),H.dispatch=E,z.memoizedState=d,[y,E,!1]}function ao(d){var y=vi();return uc(y,na,d)}function uc(d,y,E){if(y=Wd(d,y,cc)[0],d=Xc(Ls)[0],typeof y=="object"&&y!==null&&typeof y.then=="function")try{var z=Dl(y)}catch(Re){throw Re===Zu?ic:Re}else z=y;y=vi();var H=y.queue,ee=H.dispatch;return E!==y.memoizedState&&(ta.flags|=2048,fc(9,Qu(),dc.bind(null,H,E),null)),[z,ee,d]}function dc(d,y){d.action=y}function hc(d){var y=vi(),E=na;if(E!==null)return uc(y,E,d);vi(),y=y.memoizedState,E=vi();var z=E.queue.dispatch;return E.memoizedState=d,[y,z,!1]}function fc(d,y,E,z){return d={tag:d,create:E,deps:z,inst:y,next:null},y=ta.updateQueue,y===null&&(y=bp(),ta.updateQueue=y),E=y.lastEffect,E===null?y.lastEffect=d.next=d:(z=E.next,E.next=d,d.next=z,y.lastEffect=d),d}function Qu(){return{destroy:void 0,resource:void 0}}function Tp(){return vi().memoizedState}function Zd(d,y,E,z){var H=zs();z=z===void 0?null:z,ta.flags|=d,H.memoizedState=fc(1|y,Qu(),E,z)}function ed(d,y,E,z){var H=vi();z=z===void 0?null:z;var ee=H.memoizedState.inst;na!==null&&z!==null&&tr(z,na.memoizedState.deps)?H.memoizedState=fc(y,ee,E,z):(ta.flags|=d,H.memoizedState=fc(1|y,ee,E,z))}function pc(d,y){Zd(8390656,8,d,y)}function Ep(d,y){ed(2048,8,d,y)}function Zh(d,y){return ed(4,2,d,y)}function Xh(d,y){return ed(4,4,d,y)}function Cp(d,y){if(typeof y=="function"){d=d();var E=y(d);return function(){typeof E=="function"?E():y(null)}}if(y!=null)return d=d(),y.current=d,function(){y.current=null}}function Fi(d,y,E){E=E!=null?E.concat([d]):null,ed(4,4,Cp.bind(null,y,d),E)}function Yh(){}function Jh(d,y){var E=vi();y=y===void 0?null:y;var z=E.memoizedState;return y!==null&&tr(y,z[1])?z[0]:(E.memoizedState=[d,y],d)}function td(d,y){var E=vi();y=y===void 0?null:y;var z=E.memoizedState;if(y!==null&&tr(y,z[1]))return z[0];if(z=d(),il){Br(!0);try{d()}finally{Br(!1)}}return E.memoizedState=[z,y],z}function Ts(d,y,E){return E===void 0||(al&1073741824)!==0?d.memoizedState=y:(d.memoizedState=E,d=Ex(),ta.lanes|=d,va|=d,E)}function Qh(d,y,E,z){return ki(E,y)?E:zi.current!==null?(d=Ts(d,E,z),ki(d,y)||(_i=!0),d):(al&42)===0?(_i=!0,d.memoizedState=E):(d=Ex(),ta.lanes|=d,va|=d,y)}function Dp(d,y,E,z,H){var ee=Ie.p;Ie.p=ee!==0&&8>ee?ee:8;var Re=Te.T,qe={};Te.T=qe,Ap(d,!1,y,E);try{var wt=H(),Ht=Te.S;if(Ht!==null&&Ht(qe,wt),wt!==null&&typeof wt=="object"&&typeof wt.then=="function"){var ir=Um(wt,z);Jd(d,y,ir,No(d))}else Jd(d,y,z,No(d))}catch(br){Jd(d,y,{then:function(){},status:"rejected",reason:br},No())}finally{Ie.p=ee,Te.T=Re}}function Wm(){}function mc(d,y,E,z){if(d.tag!==5)throw Error(c(476));var H=Xd(d).queue;Dp(d,H,y,Me,E===null?Wm:function(){return ef(d),E(z)})}function Xd(d){var y=d.memoizedState;if(y!==null)return y;y={memoizedState:Me,baseState:Me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:Me},next:null};var E={};return y.next={memoizedState:E,baseState:E,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:E},next:null},d.memoizedState=y,d=d.alternate,d!==null&&(d.memoizedState=y),y}function ef(d){var y=Xd(d).next.queue;Jd(d,y,{},No())}function tf(){return xi(xg)}function Yd(){return vi().memoizedState}function Pp(){return vi().memoizedState}function Mp(d){for(var y=d.return;y!==null;){switch(y.tag){case 24:case 3:var E=No();d=rl(E);var z=El(y,d,E);z!==null&&(jo(z,y,E),Kc(z,y,E)),y={cache:qu()},d.payload=y;return}y=y.return}}function rf(d,y,E){var z=No();E={lane:z,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null},nf(d)?Zm(y,E):(E=bn(d,y,E,z),E!==null&&(jo(E,d,z),Qd(E,y,z)))}function Km(d,y,E){var z=No();Jd(d,y,E,z)}function Jd(d,y,E,z){var H={lane:z,revertLane:0,action:E,hasEagerState:!1,eagerState:null,next:null};if(nf(d))Zm(y,H);else{var ee=d.alternate;if(d.lanes===0&&(ee===null||ee.lanes===0)&&(ee=y.lastRenderedReducer,ee!==null))try{var Re=y.lastRenderedState,qe=ee(Re,E);if(H.hasEagerState=!0,H.eagerState=qe,ki(qe,Re))return Po(d,y,H,0),xn===null&&ju(),!1}catch{}finally{}if(E=bn(d,y,H,z),E!==null)return jo(E,d,z),Qd(E,y,z),!0}return!1}function Ap(d,y,E,z){if(z={lane:2,revertLane:Ix(),action:z,hasEagerState:!1,eagerState:null,next:null},nf(d)){if(y)throw Error(c(479))}else y=bn(d,E,z,2),y!==null&&jo(y,d,2)}function nf(d){var y=d.alternate;return d===ta||y!==null&&y===ta}function Zm(d,y){oc=sc=!0;var E=d.pending;E===null?y.next=y:(y.next=E.next,E.next=y),d.pending=y}function Qd(d,y,E){if((E&4194048)!==0){var z=y.lanes;z&=d.pendingLanes,E|=z,y.lanes=E,qa(d,E)}}var Jc={readContext:xi,use:wp,useCallback:Wa,useContext:Wa,useEffect:Wa,useImperativeHandle:Wa,useLayoutEffect:Wa,useInsertionEffect:Wa,useMemo:Wa,useReducer:Wa,useRef:Wa,useState:Wa,useDebugValue:Wa,useDeferredValue:Wa,useTransition:Wa,useSyncExternalStore:Wa,useId:Wa,useHostTransitionStatus:Wa,useFormState:Wa,useActionState:Wa,useOptimistic:Wa,useMemoCache:Wa,useCacheRefresh:Wa},$s={readContext:xi,use:wp,useCallback:function(d,y){return zs().memoizedState=[d,y===void 0?null:y],d},useContext:xi,useEffect:pc,useImperativeHandle:function(d,y,E){E=E!=null?E.concat([d]):null,Zd(4194308,4,Cp.bind(null,y,d),E)},useLayoutEffect:function(d,y){return Zd(4194308,4,d,y)},useInsertionEffect:function(d,y){Zd(4,2,d,y)},useMemo:function(d,y){var E=zs();y=y===void 0?null:y;var z=d();if(il){Br(!0);try{d()}finally{Br(!1)}}return E.memoizedState=[z,y],z},useReducer:function(d,y,E){var z=zs();if(E!==void 0){var H=E(y);if(il){Br(!0);try{E(y)}finally{Br(!1)}}}else H=y;return z.memoizedState=z.baseState=H,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:H},z.queue=d,d=d.dispatch=rf.bind(null,ta,d),[z.memoizedState,d]},useRef:function(d){var y=zs();return d={current:d},y.memoizedState=d},useState:function(d){d=is(d);var y=d.queue,E=Km.bind(null,ta,y);return y.dispatch=E,[d.memoizedState,E]},useDebugValue:Yh,useDeferredValue:function(d,y){var E=zs();return Ts(E,d,y)},useTransition:function(){var d=is(!1);return d=Dp.bind(null,ta,d.queue,!0,!1),zs().memoizedState=d,[!1,d]},useSyncExternalStore:function(d,y,E){var z=ta,H=zs();if(Ta){if(E===void 0)throw Error(c(407));E=E()}else{if(E=y(),xn===null)throw Error(c(349));(Mn&124)!==0||qh(z,y,E)}H.memoizedState=E;var ee={value:E,getSnapshot:y};return H.queue=ee,pc(Lo.bind(null,z,ee,d),[d]),z.flags|=2048,fc(9,Qu(),zo.bind(null,z,ee,E,y),null),E},useId:function(){var d=zs(),y=xn.identifierPrefix;if(Ta){var E=ko,z=Ao;E=(z&~(1<<32-an(z)-1)).toString(32)+E,y="«"+y+"R"+E,E=Cl++,0<E&&(y+="H"+E.toString(32)),y+="»"}else E=Hd++,y="«"+y+"r"+E.toString(32)+"»";return d.memoizedState=y},useHostTransitionStatus:tf,useFormState:Sp,useActionState:Sp,useOptimistic:function(d){var y=zs();y.memoizedState=y.baseState=d;var E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return y.queue=E,y=Ap.bind(null,ta,!0,E),E.dispatch=y,[d,y]},useMemoCache:Hm,useCacheRefresh:function(){return zs().memoizedState=Mp.bind(null,ta)}},eh={readContext:xi,use:wp,useCallback:Jh,useContext:xi,useEffect:Ep,useImperativeHandle:Fi,useInsertionEffect:Zh,useLayoutEffect:Xh,useMemo:td,useReducer:Xc,useRef:Tp,useState:function(){return Xc(Ls)},useDebugValue:Yh,useDeferredValue:function(d,y){var E=vi();return Qh(E,na.memoizedState,d,y)},useTransition:function(){var d=Xc(Ls)[0],y=vi().memoizedState;return[typeof d=="boolean"?d:Dl(d),y]},useSyncExternalStore:qm,useId:Yd,useHostTransitionStatus:tf,useFormState:ao,useActionState:ao,useOptimistic:function(d,y){var E=vi();return M0(E,na,d,y)},useMemoCache:Hm,useCacheRefresh:Pp},A0={readContext:xi,use:wp,useCallback:Jh,useContext:xi,useEffect:Ep,useImperativeHandle:Fi,useInsertionEffect:Zh,useLayoutEffect:Xh,useMemo:td,useReducer:Ju,useRef:Tp,useState:function(){return Ju(Ls)},useDebugValue:Yh,useDeferredValue:function(d,y){var E=vi();return na===null?Ts(E,d,y):Qh(E,na.memoizedState,d,y)},useTransition:function(){var d=Ju(Ls)[0],y=vi().memoizedState;return[typeof d=="boolean"?d:Dl(d),y]},useSyncExternalStore:qm,useId:Yd,useHostTransitionStatus:tf,useFormState:hc,useActionState:hc,useOptimistic:function(d,y){var E=vi();return na!==null?M0(E,na,d,y):(E.baseState=d,[d,E.queue.dispatch])},useMemoCache:Hm,useCacheRefresh:Pp},rd=null,th=0;function kp(d){var y=th;return th+=1,rd===null&&(rd=[]),Gm(rd,d,y)}function nd(d,y){y=y.props.ref,d.ref=y!==void 0?y:null}function Aa(d,y){throw y.$$typeof===F?Error(c(525)):(d=Object.prototype.toString.call(y),Error(c(31,d==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":d)))}function af(d){var y=d._init;return y(d._payload)}function k0(d){function y(Bt,kt){if(d){var Ut=Bt.deletions;Ut===null?(Bt.deletions=[kt],Bt.flags|=16):Ut.push(kt)}}function E(Bt,kt){if(!d)return null;for(;kt!==null;)y(Bt,kt),kt=kt.sibling;return null}function z(Bt){for(var kt=new Map;Bt!==null;)Bt.key!==null?kt.set(Bt.key,Bt):kt.set(Bt.index,Bt),Bt=Bt.sibling;return kt}function H(Bt,kt){return Bt=Yl(Bt,kt),Bt.index=0,Bt.sibling=null,Bt}function ee(Bt,kt,Ut){return Bt.index=Ut,d?(Ut=Bt.alternate,Ut!==null?(Ut=Ut.index,Ut<kt?(Bt.flags|=67108866,kt):Ut):(Bt.flags|=67108866,kt)):(Bt.flags|=1048576,kt)}function Re(Bt){return d&&Bt.alternate===null&&(Bt.flags|=67108866),Bt}function qe(Bt,kt,Ut,pr){return kt===null||kt.tag!==6?(kt=Bh(Ut,Bt.mode,pr),kt.return=Bt,kt):(kt=H(kt,Ut),kt.return=Bt,kt)}function wt(Bt,kt,Ut,pr){var nn=Ut.type;return nn===te?ir(Bt,kt,Ut.props.children,pr,Ut.key):kt!==null&&(kt.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===re&&af(nn)===kt.type)?(kt=H(kt,Ut.props),nd(kt,Ut),kt.return=Bt,kt):(kt=Rd(Ut.type,Ut.key,Ut.props,null,Bt.mode,pr),nd(kt,Ut),kt.return=Bt,kt)}function Ht(Bt,kt,Ut,pr){return kt===null||kt.tag!==4||kt.stateNode.containerInfo!==Ut.containerInfo||kt.stateNode.implementation!==Ut.implementation?(kt=up(Ut,Bt.mode,pr),kt.return=Bt,kt):(kt=H(kt,Ut.children||[]),kt.return=Bt,kt)}function ir(Bt,kt,Ut,pr,nn){return kt===null||kt.tag!==7?(kt=Jl(Ut,Bt.mode,pr,nn),kt.return=Bt,kt):(kt=H(kt,Ut),kt.return=Bt,kt)}function br(Bt,kt,Ut){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return kt=Bh(""+kt,Bt.mode,Ut),kt.return=Bt,kt;if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case G:return Ut=Rd(kt.type,kt.key,kt.props,null,Bt.mode,Ut),nd(Ut,kt),Ut.return=Bt,Ut;case Q:return kt=up(kt,Bt.mode,Ut),kt.return=Bt,kt;case re:var pr=kt._init;return kt=pr(kt._payload),br(Bt,kt,Ut)}if(xe(kt)||ke(kt))return kt=Jl(kt,Bt.mode,Ut,null),kt.return=Bt,kt;if(typeof kt.then=="function")return br(Bt,kp(kt),Ut);if(kt.$$typeof===be)return br(Bt,Hu(Bt,kt),Ut);Aa(Bt,kt)}return null}function Kt(Bt,kt,Ut,pr){var nn=kt!==null?kt.key:null;if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number"||typeof Ut=="bigint")return nn!==null?null:qe(Bt,kt,""+Ut,pr);if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case G:return Ut.key===nn?wt(Bt,kt,Ut,pr):null;case Q:return Ut.key===nn?Ht(Bt,kt,Ut,pr):null;case re:return nn=Ut._init,Ut=nn(Ut._payload),Kt(Bt,kt,Ut,pr)}if(xe(Ut)||ke(Ut))return nn!==null?null:ir(Bt,kt,Ut,pr,null);if(typeof Ut.then=="function")return Kt(Bt,kt,kp(Ut),pr);if(Ut.$$typeof===be)return Kt(Bt,kt,Hu(Bt,Ut),pr);Aa(Bt,Ut)}return null}function Xt(Bt,kt,Ut,pr,nn){if(typeof pr=="string"&&pr!==""||typeof pr=="number"||typeof pr=="bigint")return Bt=Bt.get(Ut)||null,qe(kt,Bt,""+pr,nn);if(typeof pr=="object"&&pr!==null){switch(pr.$$typeof){case G:return Bt=Bt.get(pr.key===null?Ut:pr.key)||null,wt(kt,Bt,pr,nn);case Q:return Bt=Bt.get(pr.key===null?Ut:pr.key)||null,Ht(kt,Bt,pr,nn);case re:var la=pr._init;return pr=la(pr._payload),Xt(Bt,kt,Ut,pr,nn)}if(xe(pr)||ke(pr))return Bt=Bt.get(Ut)||null,ir(kt,Bt,pr,nn,null);if(typeof pr.then=="function")return Xt(Bt,kt,Ut,kp(pr),nn);if(pr.$$typeof===be)return Xt(Bt,kt,Ut,Hu(kt,pr),nn);Aa(kt,pr)}return null}function Nn(Bt,kt,Ut,pr){for(var nn=null,la=null,hn=kt,kn=kt=0,fs=null;hn!==null&&kn<Ut.length;kn++){hn.index>kn?(fs=hn,hn=null):fs=hn.sibling;var ra=Kt(Bt,hn,Ut[kn],pr);if(ra===null){hn===null&&(hn=fs);break}d&&hn&&ra.alternate===null&&y(Bt,hn),kt=ee(ra,kt,kn),la===null?nn=ra:la.sibling=ra,la=ra,hn=fs}if(kn===Ut.length)return E(Bt,hn),Ta&&ec(Bt,kn),nn;if(hn===null){for(;kn<Ut.length;kn++)hn=br(Bt,Ut[kn],pr),hn!==null&&(kt=ee(hn,kt,kn),la===null?nn=hn:la.sibling=hn,la=hn);return Ta&&ec(Bt,kn),nn}for(hn=z(hn);kn<Ut.length;kn++)fs=Xt(hn,Bt,kn,Ut[kn],pr),fs!==null&&(d&&fs.alternate!==null&&hn.delete(fs.key===null?kn:fs.key),kt=ee(fs,kt,kn),la===null?nn=fs:la.sibling=fs,la=fs);return d&&hn.forEach(function(lu){return y(Bt,lu)}),Ta&&ec(Bt,kn),nn}function An(Bt,kt,Ut,pr){if(Ut==null)throw Error(c(151));for(var nn=null,la=null,hn=kt,kn=kt=0,fs=null,ra=Ut.next();hn!==null&&!ra.done;kn++,ra=Ut.next()){hn.index>kn?(fs=hn,hn=null):fs=hn.sibling;var lu=Kt(Bt,hn,ra.value,pr);if(lu===null){hn===null&&(hn=fs);break}d&&hn&&lu.alternate===null&&y(Bt,hn),kt=ee(lu,kt,kn),la===null?nn=lu:la.sibling=lu,la=lu,hn=fs}if(ra.done)return E(Bt,hn),Ta&&ec(Bt,kn),nn;if(hn===null){for(;!ra.done;kn++,ra=Ut.next())ra=br(Bt,ra.value,pr),ra!==null&&(kt=ee(ra,kt,kn),la===null?nn=ra:la.sibling=ra,la=ra);return Ta&&ec(Bt,kn),nn}for(hn=z(hn);!ra.done;kn++,ra=Ut.next())ra=Xt(hn,Bt,kn,ra.value,pr),ra!==null&&(d&&ra.alternate!==null&&hn.delete(ra.key===null?kn:ra.key),kt=ee(ra,kt,kn),la===null?nn=ra:la.sibling=ra,la=ra);return d&&hn.forEach(function(Jp){return y(Bt,Jp)}),Ta&&ec(Bt,kn),nn}function Ka(Bt,kt,Ut,pr){if(typeof Ut=="object"&&Ut!==null&&Ut.type===te&&Ut.key===null&&(Ut=Ut.props.children),typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case G:e:{for(var nn=Ut.key;kt!==null;){if(kt.key===nn){if(nn=Ut.type,nn===te){if(kt.tag===7){E(Bt,kt.sibling),pr=H(kt,Ut.props.children),pr.return=Bt,Bt=pr;break e}}else if(kt.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===re&&af(nn)===kt.type){E(Bt,kt.sibling),pr=H(kt,Ut.props),nd(pr,Ut),pr.return=Bt,Bt=pr;break e}E(Bt,kt);break}else y(Bt,kt);kt=kt.sibling}Ut.type===te?(pr=Jl(Ut.props.children,Bt.mode,pr,Ut.key),pr.return=Bt,Bt=pr):(pr=Rd(Ut.type,Ut.key,Ut.props,null,Bt.mode,pr),nd(pr,Ut),pr.return=Bt,Bt=pr)}return Re(Bt);case Q:e:{for(nn=Ut.key;kt!==null;){if(kt.key===nn)if(kt.tag===4&&kt.stateNode.containerInfo===Ut.containerInfo&&kt.stateNode.implementation===Ut.implementation){E(Bt,kt.sibling),pr=H(kt,Ut.children||[]),pr.return=Bt,Bt=pr;break e}else{E(Bt,kt);break}else y(Bt,kt);kt=kt.sibling}pr=up(Ut,Bt.mode,pr),pr.return=Bt,Bt=pr}return Re(Bt);case re:return nn=Ut._init,Ut=nn(Ut._payload),Ka(Bt,kt,Ut,pr)}if(xe(Ut))return Nn(Bt,kt,Ut,pr);if(ke(Ut)){if(nn=ke(Ut),typeof nn!="function")throw Error(c(150));return Ut=nn.call(Ut),An(Bt,kt,Ut,pr)}if(typeof Ut.then=="function")return Ka(Bt,kt,kp(Ut),pr);if(Ut.$$typeof===be)return Ka(Bt,kt,Hu(Bt,Ut),pr);Aa(Bt,Ut)}return typeof Ut=="string"&&Ut!==""||typeof Ut=="number"||typeof Ut=="bigint"?(Ut=""+Ut,kt!==null&&kt.tag===6?(E(Bt,kt.sibling),pr=H(kt,Ut),pr.return=Bt,Bt=pr):(E(Bt,kt),pr=Bh(Ut,Bt.mode,pr),pr.return=Bt,Bt=pr),Re(Bt)):E(Bt,kt)}return function(Bt,kt,Ut,pr){try{th=0;var nn=Ka(Bt,kt,Ut,pr);return rd=null,nn}catch(hn){if(hn===Zu||hn===ic)throw hn;var la=Un(29,hn,null,Bt.mode);return la.lanes=pr,la.return=Bt,la}finally{}}}var rh=k0(!0),Qc=k0(!1),io=He(null),so=null;function $o(d){var y=d.alternate;Ke(ka,ka.current&1),Ke(io,d),so===null&&(y===null||zi.current!==null||y.memoizedState!==null)&&(so=d)}function Pl(d){if(d.tag===22){if(Ke(ka,ka.current),Ke(io,d),so===null){var y=d.alternate;y!==null&&y.memoizedState!==null&&(so=d)}}else oo()}function oo(){Ke(ka,ka.current),Ke(io,io.current)}function fa(d){et(io),so===d&&(so=null),et(ka)}var ka=He(0);function nh(d){for(var y=d;y!==null;){if(y.tag===13){var E=y.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||E.data==="$?"||K0(E)))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if((y.flags&128)!==0)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}function ad(d,y,E,z){y=d.memoizedState,E=E(z,y),E=E==null?y:N({},y,E),d.memoizedState=E,d.lanes===0&&(d.updateQueue.baseState=E)}var Rp={enqueueSetState:function(d,y,E){d=d._reactInternals;var z=No(),H=rl(z);H.payload=y,E!=null&&(H.callback=E),y=El(d,H,z),y!==null&&(jo(y,d,z),Kc(y,d,z))},enqueueReplaceState:function(d,y,E){d=d._reactInternals;var z=No(),H=rl(z);H.tag=1,H.payload=y,E!=null&&(H.callback=E),y=El(d,H,z),y!==null&&(jo(y,d,z),Kc(y,d,z))},enqueueForceUpdate:function(d,y){d=d._reactInternals;var E=No(),z=rl(E);z.tag=2,y!=null&&(z.callback=y),y=El(d,z,E),y!==null&&(jo(y,d,E),Kc(y,d,E))}};function Ip(d,y,E,z,H,ee,Re){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(z,ee,Re):y.prototype&&y.prototype.isPureReactComponent?!wl(E,z)||!wl(H,ee):!0}function ah(d,y,E,z){d=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(E,z),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(E,z),y.state!==d&&Rp.enqueueReplaceState(y,y.state,null)}function id(d,y){var E=y;if("ref"in y){E={};for(var z in y)z!=="ref"&&(E[z]=y[z])}if(d=d.defaultProps){E===y&&(E=N({},E));for(var H in d)E[H]===void 0&&(E[H]=d[H])}return E}var zp=typeof reportError=="function"?reportError:function(d){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof d=="object"&&d!==null&&typeof d.message=="string"?String(d.message):String(d),error:d});if(!window.dispatchEvent(y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",d);return}console.error(d)};function Lp(d){zp(d)}function sf(d){console.error(d)}function sd(d){zp(d)}function gc(d,y){try{var E=d.onUncaughtError;E(y.value,{componentStack:y.stack})}catch(z){setTimeout(function(){throw z})}}function Ml(d,y,E){try{var z=d.onCaughtError;z(E.value,{componentStack:E.stack,errorBoundary:y.tag===1?y.stateNode:null})}catch(H){setTimeout(function(){throw H})}}function lo(d,y,E){return E=rl(E),E.tag=3,E.payload={element:null},E.callback=function(){gc(d,y)},E}function yc(d){return d=rl(d),d.tag=3,d}function eu(d,y,E,z){var H=E.type.getDerivedStateFromError;if(typeof H=="function"){var ee=z.value;d.payload=function(){return H(ee)},d.callback=function(){Ml(y,E,z)}}var Re=E.stateNode;Re!==null&&typeof Re.componentDidCatch=="function"&&(d.callback=function(){Ml(y,E,z),typeof H!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var qe=z.stack;this.componentDidCatch(z.value,{componentStack:qe!==null?qe:""})})}function tu(d,y,E,z,H){if(E.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){if(y=E.alternate,y!==null&&Gu(y,E,H,!0),E=io.current,E!==null){switch(E.tag){case 13:return so===null?df():E.alternate===null&&qr===0&&(qr=3),E.flags&=-257,E.flags|=65536,E.lanes=H,z===Xu?E.flags|=16384:(y=E.updateQueue,y===null?E.updateQueue=new Set([z]):y.add(z),Op(d,z,H)),!1;case 22:return E.flags|=65536,z===Xu?E.flags|=16384:(y=E.updateQueue,y===null?(y={transitions:null,markerInstances:null,retryQueue:new Set([z])},E.updateQueue=y):(E=y.retryQueue,E===null?y.retryQueue=new Set([z]):E.add(z)),Op(d,z,H)),!1}throw Error(c(435,E.tag))}return Op(d,z,H),df(),!1}if(Ta)return y=io.current,y!==null?((y.flags&65536)===0&&(y.flags|=256),y.flags|=65536,y.lanes=H,z!==Om&&(d=Error(c(422),{cause:z}),Uu(Ri(d,E)))):(z!==Om&&(y=Error(c(423),{cause:z}),Uu(Ri(y,E))),d=d.current.alternate,d.flags|=65536,H&=-H,d.lanes|=H,z=Ri(z,E),H=lo(d.stateNode,z,H),Gh(d,H),qr!==4&&(qr=2)),!1;var ee=Error(c(520),{cause:z});if(ee=Ri(ee,E),Ji===null?Ji=[ee]:Ji.push(ee),qr!==4&&(qr=2),y===null)return!0;z=Ri(z,E),E=y;do{switch(E.tag){case 3:return E.flags|=65536,d=H&-H,E.lanes|=d,d=lo(E.stateNode,z,d),Gh(E,d),!1;case 1:if(y=E.type,ee=E.stateNode,(E.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(ds===null||!ds.has(ee))))return E.flags|=65536,H&=-H,E.lanes|=H,H=yc(H),eu(H,d,E,z),Gh(E,H),!1}E=E.return}while(E!==null);return!1}var R0=Error(c(461)),_i=!1;function ss(d,y,E,z){y.child=d===null?Qc(y,null,E,z):rh(y,d.child,E,z)}function I0(d,y,E,z,H){E=E.render;var ee=y.ref;if("ref"in z){var Re={};for(var qe in z)qe!=="ref"&&(Re[qe]=z[qe])}else Re=z;return rc(y),z=vr(d,y,E,Re,ee,H),qe=_p(),d!==null&&!_i?(qd(d,y,H),ls(d,y,H)):(Ta&&qe&&zd(y),y.flags|=1,ss(d,y,z,H),y.child)}function ih(d,y,E,z,H){if(d===null){var ee=E.type;return typeof ee=="function"&&!jm(ee)&&ee.defaultProps===void 0&&E.compare===null?(y.tag=15,y.type=ee,os(d,y,ee,z,H)):(d=Rd(E.type,null,z,y,y.mode,H),d.ref=y.ref,d.return=y,y.child=d)}if(ee=d.child,!Xi(d,H)){var Re=ee.memoizedProps;if(E=E.compare,E=E!==null?E:wl,E(Re,z)&&d.ref===y.ref)return ls(d,y,H)}return y.flags|=1,d=Yl(ee,z),d.ref=y.ref,d.return=y,y.child=d}function os(d,y,E,z,H){if(d!==null){var ee=d.memoizedProps;if(wl(ee,z)&&d.ref===y.ref)if(_i=!1,y.pendingProps=z=ee,Xi(d,H))(d.flags&131072)!==0&&(_i=!0);else return y.lanes=d.lanes,ls(d,y,H)}return xc(d,y,E,z,H)}function of(d,y,E){var z=y.pendingProps,H=z.children,ee=d!==null?d.memoizedState:null;if(z.mode==="hidden"){if((y.flags&128)!==0){if(z=ee!==null?ee.baseLanes|E:E,d!==null){for(H=y.child=d.child,ee=0;H!==null;)ee=ee|H.lanes|H.childLanes,H=H.sibling;y.childLanes=ee&~z}else y.childLanes=0,y.child=null;return Xm(d,y,z,E)}if((E&536870912)!==0)y.memoizedState={baseLanes:0,cachePool:null},d!==null&&Ku(y,ee!==null?ee.cachePool:null),ee!==null?Fd(y,ee):Vd(),Pl(y);else return y.lanes=y.childLanes=536870912,Xm(d,y,ee!==null?ee.baseLanes|E:E,E)}else ee!==null?(Ku(y,ee.cachePool),Fd(y,ee),oo(),y.memoizedState=null):(d!==null&&Ku(y,null),Vd(),oo());return ss(d,y,H,E),y.child}function Xm(d,y,E,z){var H=jd();return H=H===null?null:{parent:Ii._currentValue,pool:H},y.memoizedState={baseLanes:E,cachePool:H},d!==null&&Ku(y,null),Vd(),Pl(y),d!==null&&Gu(d,y,z,!0),null}function lf(d,y){var E=y.ref;if(E===null)d!==null&&d.ref!==null&&(y.flags|=4194816);else{if(typeof E!="function"&&typeof E!="object")throw Error(c(284));(d===null||d.ref!==E)&&(y.flags|=4194816)}}function xc(d,y,E,z,H){return rc(y),E=vr(d,y,E,z,void 0,H),z=_p(),d!==null&&!_i?(qd(d,y,H),ls(d,y,H)):(Ta&&z&&zd(y),y.flags|=1,ss(d,y,E,H),y.child)}function cf(d,y,E,z,H,ee){return rc(y),y.updateQueue=null,E=Ma(y,z,E,H),lc(d),z=_p(),d!==null&&!_i?(qd(d,y,ee),ls(d,y,ee)):(Ta&&z&&zd(y),y.flags|=1,ss(d,y,E,ee),y.child)}function co(d,y,E,z,H){if(rc(y),y.stateNode===null){var ee=Mo,Re=E.contextType;typeof Re=="object"&&Re!==null&&(ee=xi(Re)),ee=new E(z,ee),y.memoizedState=ee.state!==null&&ee.state!==void 0?ee.state:null,ee.updater=Rp,y.stateNode=ee,ee._reactInternals=y,ee=y.stateNode,ee.props=z,ee.state=y.memoizedState,ee.refs={},mp(y),Re=E.contextType,ee.context=typeof Re=="object"&&Re!==null?xi(Re):Mo,ee.state=y.memoizedState,Re=E.getDerivedStateFromProps,typeof Re=="function"&&(ad(y,E,Re,z),ee.state=y.memoizedState),typeof E.getDerivedStateFromProps=="function"||typeof ee.getSnapshotBeforeUpdate=="function"||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(Re=ee.state,typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount(),Re!==ee.state&&Rp.enqueueReplaceState(ee,ee.state,null),Hs(y,z,ee,H),Yu(),ee.state=y.memoizedState),typeof ee.componentDidMount=="function"&&(y.flags|=4194308),z=!0}else if(d===null){ee=y.stateNode;var qe=y.memoizedProps,wt=id(E,qe);ee.props=wt;var Ht=ee.context,ir=E.contextType;Re=Mo,typeof ir=="object"&&ir!==null&&(Re=xi(ir));var br=E.getDerivedStateFromProps;ir=typeof br=="function"||typeof ee.getSnapshotBeforeUpdate=="function",qe=y.pendingProps!==qe,ir||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(qe||Ht!==Re)&&ah(y,ee,z,Re),Tl=!1;var Kt=y.memoizedState;ee.state=Kt,Hs(y,z,ee,H),Yu(),Ht=y.memoizedState,qe||Kt!==Ht||Tl?(typeof br=="function"&&(ad(y,E,br,z),Ht=y.memoizedState),(wt=Tl||Ip(y,E,wt,z,Kt,Ht,Re))?(ir||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(y.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=z,y.memoizedState=Ht),ee.props=z,ee.state=Ht,ee.context=Re,z=wt):(typeof ee.componentDidMount=="function"&&(y.flags|=4194308),z=!1)}else{ee=y.stateNode,gp(d,y),Re=y.memoizedProps,ir=id(E,Re),ee.props=ir,br=y.pendingProps,Kt=ee.context,Ht=E.contextType,wt=Mo,typeof Ht=="object"&&Ht!==null&&(wt=xi(Ht)),qe=E.getDerivedStateFromProps,(Ht=typeof qe=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(Re!==br||Kt!==wt)&&ah(y,ee,z,wt),Tl=!1,Kt=y.memoizedState,ee.state=Kt,Hs(y,z,ee,H),Yu();var Xt=y.memoizedState;Re!==br||Kt!==Xt||Tl||d!==null&&d.dependencies!==null&&Io(d.dependencies)?(typeof qe=="function"&&(ad(y,E,qe,z),Xt=y.memoizedState),(ir=Tl||Ip(y,E,ir,z,Kt,Xt,wt)||d!==null&&d.dependencies!==null&&Io(d.dependencies))?(Ht||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(z,Xt,wt),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(z,Xt,wt)),typeof ee.componentDidUpdate=="function"&&(y.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof ee.componentDidUpdate!="function"||Re===d.memoizedProps&&Kt===d.memoizedState||(y.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||Re===d.memoizedProps&&Kt===d.memoizedState||(y.flags|=1024),y.memoizedProps=z,y.memoizedState=Xt),ee.props=z,ee.state=Xt,ee.context=wt,z=ir):(typeof ee.componentDidUpdate!="function"||Re===d.memoizedProps&&Kt===d.memoizedState||(y.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||Re===d.memoizedProps&&Kt===d.memoizedState||(y.flags|=1024),z=!1)}return ee=z,lf(d,y),z=(y.flags&128)!==0,ee||z?(ee=y.stateNode,E=z&&typeof E.getDerivedStateFromError!="function"?null:ee.render(),y.flags|=1,d!==null&&z?(y.child=rh(y,d.child,null,H),y.child=rh(y,null,E,H)):ss(d,y,E,H),y.memoizedState=ee.state,d=y.child):d=ls(d,y,H),d}function uo(d,y,E,z){return Oh(),y.flags|=256,ss(d,y,E,z),y.child}var ru={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Al(d){return{baseLanes:d,cachePool:pp()}}function nu(d,y,E){return d=d!==null?d.childLanes&~E:0,y&&(d|=za),d}function $p(d,y,E){var z=y.pendingProps,H=!1,ee=(y.flags&128)!==0,Re;if((Re=ee)||(Re=d!==null&&d.memoizedState===null?!1:(ka.current&2)!==0),Re&&(H=!0,y.flags&=-129),Re=(y.flags&32)!==0,y.flags&=-33,d===null){if(Ta){if(H?$o(y):oo(),Ta){var qe=Ja,wt;if(wt=qe){e:{for(wt=qe,qe=Is;wt.nodeType!==8;){if(!qe){qe=null;break e}if(wt=Rl(wt.nextSibling),wt===null){qe=null;break e}}qe=wt}qe!==null?(y.memoizedState={dehydrated:qe,treeContext:Ql!==null?{id:Ao,overflow:ko}:null,retryLane:536870912,hydrationErrors:null},wt=Un(18,null,null,0),wt.stateNode=qe,wt.return=y,y.child=wt,as=y,Ja=null,wt=!0):wt=!1}wt||Vu(y)}if(qe=y.memoizedState,qe!==null&&(qe=qe.dehydrated,qe!==null))return K0(qe)?y.lanes=32:y.lanes=536870912,null;fa(y)}return qe=z.children,z=z.fallback,H?(oo(),H=y.mode,qe=sl({mode:"hidden",children:qe},H),z=Jl(z,H,E,null),qe.return=y,z.return=y,qe.sibling=z,y.child=qe,H=y.child,H.memoizedState=Al(E),H.childLanes=nu(d,Re,E),y.memoizedState=ru,z):($o(y),$n(y,qe))}if(wt=d.memoizedState,wt!==null&&(qe=wt.dehydrated,qe!==null)){if(ee)y.flags&256?($o(y),y.flags&=-257,y=Ym(d,y,E)):y.memoizedState!==null?(oo(),y.child=d.child,y.flags|=128,y=null):(oo(),H=z.fallback,qe=y.mode,z=sl({mode:"visible",children:z.children},qe),H=Jl(H,qe,E,null),H.flags|=2,z.return=y,H.return=y,z.sibling=H,y.child=z,rh(y,d.child,null,E),z=y.child,z.memoizedState=Al(E),z.childLanes=nu(d,Re,E),y.memoizedState=ru,y=H);else if($o(y),K0(qe)){if(Re=qe.nextSibling&&qe.nextSibling.dataset,Re)var Ht=Re.dgst;Re=Ht,z=Error(c(419)),z.stack="",z.digest=Re,Uu({value:z,source:null,stack:null}),y=Ym(d,y,E)}else if(_i||Gu(d,y,E,!1),Re=(E&d.childLanes)!==0,_i||Re){if(Re=xn,Re!==null&&(z=E&-E,z=(z&42)!==0?1:yn(z),z=(z&(Re.suspendedLanes|E))!==0?0:z,z!==0&&z!==wt.retryLane))throw wt.retryLane=z,Ou(d,z),jo(Re,d,z),R0;qe.data==="$?"||df(),y=Ym(d,y,E)}else qe.data==="$?"?(y.flags|=192,y.child=d.child,y=null):(d=wt.treeContext,Ja=Rl(qe.nextSibling),as=y,Ta=!0,Hc=null,Is=!1,d!==null&&(ro[Ya++]=Ao,ro[Ya++]=ko,ro[Ya++]=Ql,Ao=d.id,ko=d.overflow,Ql=y),y=$n(y,z.children),y.flags|=4096);return y}return H?(oo(),H=z.fallback,qe=y.mode,wt=d.child,Ht=wt.sibling,z=Yl(wt,{mode:"hidden",children:z.children}),z.subtreeFlags=wt.subtreeFlags&65011712,Ht!==null?H=Yl(Ht,H):(H=Jl(H,qe,E,null),H.flags|=2),H.return=y,z.return=y,z.sibling=H,y.child=z,z=H,H=y.child,qe=d.child.memoizedState,qe===null?qe=Al(E):(wt=qe.cachePool,wt!==null?(Ht=Ii._currentValue,wt=wt.parent!==Ht?{parent:Ht,pool:Ht}:wt):wt=pp(),qe={baseLanes:qe.baseLanes|E,cachePool:wt}),H.memoizedState=qe,H.childLanes=nu(d,Re,E),y.memoizedState=ru,z):($o(y),E=d.child,d=E.sibling,E=Yl(E,{mode:"visible",children:z.children}),E.return=y,E.sibling=null,d!==null&&(Re=y.deletions,Re===null?(y.deletions=[d],y.flags|=16):Re.push(d)),y.child=E,y.memoizedState=null,E)}function $n(d,y){return y=sl({mode:"visible",children:y},d.mode),y.return=d,d.child=y}function sl(d,y){return d=Un(22,d,null,y),d.lanes=0,d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},d}function Ym(d,y,E){return rh(y,d.child,null,E),d=$n(y,y.pendingProps.children),d.flags|=2,y.memoizedState=null,d}function Jm(d,y,E){d.lanes|=y;var z=d.alternate;z!==null&&(z.lanes|=y),$d(d.return,y,E)}function od(d,y,E,z,H){var ee=d.memoizedState;ee===null?d.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:z,tail:E,tailMode:H}:(ee.isBackwards=y,ee.rendering=null,ee.renderingStartTime=0,ee.last=z,ee.tail=E,ee.tailMode=H)}function ol(d,y,E){var z=y.pendingProps,H=z.revealOrder,ee=z.tail;if(ss(d,y,z.children,E),z=ka.current,(z&2)!==0)z=z&1|2,y.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=y.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&Jm(d,E,y);else if(d.tag===19)Jm(d,E,y);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===y)break e;for(;d.sibling===null;){if(d.return===null||d.return===y)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}z&=1}switch(Ke(ka,z),H){case"forwards":for(E=y.child,H=null;E!==null;)d=E.alternate,d!==null&&nh(d)===null&&(H=E),E=E.sibling;E=H,E===null?(H=y.child,y.child=null):(H=E.sibling,E.sibling=null),od(y,!1,H,E,ee);break;case"backwards":for(E=null,H=y.child,y.child=null;H!==null;){if(d=H.alternate,d!==null&&nh(d)===null){y.child=H;break}d=H.sibling,H.sibling=E,E=H,H=d}od(y,!0,E,null,ee);break;case"together":od(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function ls(d,y,E){if(d!==null&&(y.dependencies=d.dependencies),va|=y.lanes,(E&y.childLanes)===0)if(d!==null){if(Gu(d,y,E,!1),(E&y.childLanes)===0)return null}else return null;if(d!==null&&y.child!==d.child)throw Error(c(153));if(y.child!==null){for(d=y.child,E=Yl(d,d.pendingProps),y.child=E,E.return=y;d.sibling!==null;)d=d.sibling,E=E.sibling=Yl(d,d.pendingProps),E.return=y;E.sibling=null}return y.child}function Xi(d,y){return(d.lanes&y)!==0?!0:(d=d.dependencies,!!(d!==null&&Io(d)))}function qs(d,y,E){switch(y.tag){case 3:Dt(y,y.stateNode.containerInfo),tc(y,Ii,d.memoizedState.cache),Oh();break;case 27:case 5:De(y);break;case 4:Dt(y,y.stateNode.containerInfo);break;case 10:tc(y,y.type,y.memoizedProps.value);break;case 13:var z=y.memoizedState;if(z!==null)return z.dehydrated!==null?($o(y),y.flags|=128,null):(E&y.child.childLanes)!==0?$p(d,y,E):($o(y),d=ls(d,y,E),d!==null?d.sibling:null);$o(y);break;case 19:var H=(d.flags&128)!==0;if(z=(E&y.childLanes)!==0,z||(Gu(d,y,E,!1),z=(E&y.childLanes)!==0),H){if(z)return ol(d,y,E);y.flags|=128}if(H=y.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),Ke(ka,ka.current),z)break;return null;case 22:case 23:return y.lanes=0,of(d,y,E);case 24:tc(y,Ii,d.memoizedState.cache)}return ls(d,y,E)}function Li(d,y,E){if(d!==null)if(d.memoizedProps!==y.pendingProps)_i=!0;else{if(!Xi(d,E)&&(y.flags&128)===0)return _i=!1,qs(d,y,E);_i=(d.flags&131072)!==0}else _i=!1,Ta&&(y.flags&1048576)!==0&&dp(y,Gc,y.index);switch(y.lanes=0,y.tag){case 16:e:{d=y.pendingProps;var z=y.elementType,H=z._init;if(z=H(z._payload),y.type=z,typeof z=="function")jm(z)?(d=id(z,d),y.tag=1,y=co(null,y,z,d,E)):(y.tag=0,y=xc(null,y,z,d,E));else{if(z!=null){if(H=z.$$typeof,H===pe){y.tag=11,y=I0(null,y,z,d,E);break e}else if(H===Le){y.tag=14,y=ih(null,y,z,d,E);break e}}throw y=Pe(z)||z,Error(c(306,y,""))}}return y;case 0:return xc(d,y,y.type,y.pendingProps,E);case 1:return z=y.type,H=id(z,y.pendingProps),co(d,y,z,H,E);case 3:e:{if(Dt(y,y.stateNode.containerInfo),d===null)throw Error(c(387));z=y.pendingProps;var ee=y.memoizedState;H=ee.element,gp(d,y),Hs(y,z,null,E);var Re=y.memoizedState;if(z=Re.cache,tc(y,Ii,z),z!==ee.cache&&Gs(y,[Ii],E,!0),Yu(),z=Re.element,ee.isDehydrated)if(ee={element:z,isDehydrated:!1,cache:Re.cache},y.updateQueue.baseState=ee,y.memoizedState=ee,y.flags&256){y=uo(d,y,z,E);break e}else if(z!==H){H=Ri(Error(c(424)),y),Uu(H),y=uo(d,y,z,E);break e}else{switch(d=y.stateNode.containerInfo,d.nodeType){case 9:d=d.body;break;default:d=d.nodeName==="HTML"?d.ownerDocument.body:d}for(Ja=Rl(d.firstChild),as=y,Ta=!0,Hc=null,Is=!0,E=Qc(y,null,z,E),y.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling}else{if(Oh(),z===H){y=ls(d,y,E);break e}ss(d,y,z,E)}y=y.child}return y;case 26:return lf(d,y),d===null?(E=qx(y.type,null,y.pendingProps,null))?y.memoizedState=E:Ta||(E=y.type,d=y.pendingProps,z=lg(Et.current).createElement(E),z[Je]=y,z[tt]=d,hs(z,E,d),Lr(z),y.stateNode=z):y.memoizedState=qx(y.type,d.memoizedProps,y.pendingProps,d.memoizedState),null;case 27:return De(y),d===null&&Ta&&(z=y.stateNode=fb(y.type,y.pendingProps,Et.current),as=y,Is=!0,H=Ja,fo(y.type)?(Z0=H,Ja=Rl(z.firstChild)):Ja=H),ss(d,y,y.pendingProps.children,E),lf(d,y),d===null&&(y.flags|=4194304),y.child;case 5:return d===null&&Ta&&((H=z=Ja)&&(z=W0(z,y.type,y.pendingProps,Is),z!==null?(y.stateNode=z,as=y,Ja=Rl(z.firstChild),Is=!1,H=!0):H=!1),H||Vu(y)),De(y),H=y.type,ee=y.pendingProps,Re=d!==null?d.memoizedProps:null,z=ee.children,cg(H,ee)?z=null:Re!==null&&cg(H,Re)&&(y.flags|=32),y.memoizedState!==null&&(H=vr(d,y,Tt,null,null,E),xg._currentValue=H),lf(d,y),ss(d,y,z,E),y.child;case 6:return d===null&&Ta&&((d=E=Ja)&&(E=ug(E,y.pendingProps,Is),E!==null?(y.stateNode=E,as=y,Ja=null,d=!0):d=!1),d||Vu(y)),null;case 13:return $p(d,y,E);case 4:return Dt(y,y.stateNode.containerInfo),z=y.pendingProps,d===null?y.child=rh(y,null,z,E):ss(d,y,z,E),y.child;case 11:return I0(d,y,y.type,y.pendingProps,E);case 7:return ss(d,y,y.pendingProps,E),y.child;case 8:return ss(d,y,y.pendingProps.children,E),y.child;case 12:return ss(d,y,y.pendingProps.children,E),y.child;case 10:return z=y.pendingProps,tc(y,y.type,z.value),ss(d,y,z.children,E),y.child;case 9:return H=y.type._context,z=y.pendingProps.children,rc(y),H=xi(H),z=z(H),y.flags|=1,ss(d,y,z,E),y.child;case 14:return ih(d,y,y.type,y.pendingProps,E);case 15:return os(d,y,y.type,y.pendingProps,E);case 19:return ol(d,y,E);case 31:return z=y.pendingProps,E=y.mode,z={mode:z.mode,children:z.children},d===null?(E=sl(z,E),E.ref=y.ref,y.child=E,E.return=y,y=E):(E=Yl(d.child,z),E.ref=y.ref,y.child=E,E.return=y,y=E),y;case 22:return of(d,y,E);case 24:return rc(y),z=xi(Ii),d===null?(H=jd(),H===null&&(H=xn,ee=qu(),H.pooledCache=ee,ee.refCount++,ee!==null&&(H.pooledCacheLanes|=E),H=ee),y.memoizedState={parent:z,cache:H},mp(y),tc(y,Ii,H)):((d.lanes&E)!==0&&(gp(d,y),Hs(y,null,null,E),Yu()),H=d.memoizedState,ee=y.memoizedState,H.parent!==z?(H={parent:z,cache:z},y.memoizedState=H,y.lanes===0&&(y.memoizedState=y.updateQueue.baseState=H),tc(y,Ii,z)):(z=ee.cache,tc(y,Ii,z),z!==H.cache&&Gs(y,[Ii],E,!0))),ss(d,y,y.pendingProps.children,E),y.child;case 29:throw y.pendingProps}throw Error(c(156,y.tag))}function kl(d){d.flags|=4}function cs(d,y){if(y.type!=="stylesheet"||(y.state.loading&4)!==0)d.flags&=-16777217;else if(d.flags|=16777216,!Zx(y)){if(y=io.current,y!==null&&((Mn&4194048)===Mn?so!==null:(Mn&62914560)!==Mn&&(Mn&536870912)===0||y!==so))throw Ss=Xu,D0;d.flags|=8192}}function Bp(d,y){y!==null&&(d.flags|=4),d.flags&16384&&(y=d.tag!==22?Zn():536870912,d.lanes|=y,Yi|=y)}function p(d,y){if(!Ta)switch(d.tailMode){case"hidden":y=d.tail;for(var E=null;y!==null;)y.alternate!==null&&(E=y),y=y.sibling;E===null?d.tail=null:E.sibling=null;break;case"collapsed":E=d.tail;for(var z=null;E!==null;)E.alternate!==null&&(z=E),E=E.sibling;z===null?y||d.tail===null?d.tail=null:d.tail.sibling=null:z.sibling=null}}function n(d){var y=d.alternate!==null&&d.alternate.child===d.child,E=0,z=0;if(y)for(var H=d.child;H!==null;)E|=H.lanes|H.childLanes,z|=H.subtreeFlags&65011712,z|=H.flags&65011712,H.return=d,H=H.sibling;else for(H=d.child;H!==null;)E|=H.lanes|H.childLanes,z|=H.subtreeFlags,z|=H.flags,H.return=d,H=H.sibling;return d.subtreeFlags|=z,d.childLanes=E,y}function o(d,y,E){var z=y.pendingProps;switch(Nh(y),y.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return n(y),null;case 1:return n(y),null;case 3:return E=y.stateNode,z=null,d!==null&&(z=d.memoizedState.cache),y.memoizedState.cache!==z&&(y.flags|=2048),tl(Ii),er(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(d===null||d.child===null)&&(jh(y)?kl(y):d===null||d.memoizedState.isDehydrated&&(y.flags&256)===0||(y.flags|=1024,Ld())),n(y),null;case 26:return E=y.memoizedState,d===null?(kl(y),E!==null?(n(y),cs(y,E)):(n(y),y.flags&=-16777217)):E?E!==d.memoizedState?(kl(y),n(y),cs(y,E)):(n(y),y.flags&=-16777217):(d.memoizedProps!==z&&kl(y),n(y),y.flags&=-16777217),null;case 27:ur(y),E=Et.current;var H=y.type;if(d!==null&&y.stateNode!=null)d.memoizedProps!==z&&kl(y);else{if(!z){if(y.stateNode===null)throw Error(c(166));return n(y),null}d=ot.current,jh(y)?T0(y):(d=fb(H,z,E),y.stateNode=d,kl(y))}return n(y),null;case 5:if(ur(y),E=y.type,d!==null&&y.stateNode!=null)d.memoizedProps!==z&&kl(y);else{if(!z){if(y.stateNode===null)throw Error(c(166));return n(y),null}if(d=ot.current,jh(y))T0(y);else{switch(H=lg(Et.current),d){case 1:d=H.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:d=H.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":d=H.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":d=H.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":d=H.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof z.is=="string"?H.createElement("select",{is:z.is}):H.createElement("select"),z.multiple?d.multiple=!0:z.size&&(d.size=z.size);break;default:d=typeof z.is=="string"?H.createElement(E,{is:z.is}):H.createElement(E)}}d[Je]=y,d[tt]=z;e:for(H=y.child;H!==null;){if(H.tag===5||H.tag===6)d.appendChild(H.stateNode);else if(H.tag!==4&&H.tag!==27&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===y)break e;for(;H.sibling===null;){if(H.return===null||H.return===y)break e;H=H.return}H.sibling.return=H.return,H=H.sibling}y.stateNode=d;e:switch(hs(d,E,z),E){case"button":case"input":case"select":case"textarea":d=!!z.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&kl(y)}}return n(y),y.flags&=-16777217,null;case 6:if(d&&y.stateNode!=null)d.memoizedProps!==z&&kl(y);else{if(typeof z!="string"&&y.stateNode===null)throw Error(c(166));if(d=Et.current,jh(y)){if(d=y.stateNode,E=y.memoizedProps,z=null,H=as,H!==null)switch(H.tag){case 27:case 5:z=H.memoizedProps}d[Je]=y,d=!!(d.nodeValue===E||z!==null&&z.suppressHydrationWarning===!0||Nx(d.nodeValue,E)),d||Vu(y)}else d=lg(d).createTextNode(z),d[Je]=y,y.stateNode=d}return n(y),null;case 13:if(z=y.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(H=jh(y),z!==null&&z.dehydrated!==null){if(d===null){if(!H)throw Error(c(318));if(H=y.memoizedState,H=H!==null?H.dehydrated:null,!H)throw Error(c(317));H[Je]=y}else Oh(),(y.flags&128)===0&&(y.memoizedState=null),y.flags|=4;n(y),H=!1}else H=Ld(),d!==null&&d.memoizedState!==null&&(d.memoizedState.hydrationErrors=H),H=!0;if(!H)return y.flags&256?(fa(y),y):(fa(y),null)}if(fa(y),(y.flags&128)!==0)return y.lanes=E,y;if(E=z!==null,d=d!==null&&d.memoizedState!==null,E){z=y.child,H=null,z.alternate!==null&&z.alternate.memoizedState!==null&&z.alternate.memoizedState.cachePool!==null&&(H=z.alternate.memoizedState.cachePool.pool);var ee=null;z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(ee=z.memoizedState.cachePool.pool),ee!==H&&(z.flags|=2048)}return E!==d&&E&&(y.child.flags|=8192),Bp(y,y.updateQueue),n(y),null;case 4:return er(),d===null&&U0(y.stateNode.containerInfo),n(y),null;case 10:return tl(y.type),n(y),null;case 19:if(et(ka),H=y.memoizedState,H===null)return n(y),null;if(z=(y.flags&128)!==0,ee=H.rendering,ee===null)if(z)p(H,!1);else{if(qr!==0||d!==null&&(d.flags&128)!==0)for(d=y.child;d!==null;){if(ee=nh(d),ee!==null){for(y.flags|=128,p(H,!1),d=ee.updateQueue,y.updateQueue=d,Bp(y,d),y.subtreeFlags=0,d=E,E=y.child;E!==null;)cp(E,d),E=E.sibling;return Ke(ka,ka.current&1|2),y.child}d=d.sibling}H.tail!==null&&Er()>us&&(y.flags|=128,z=!0,p(H,!1),y.lanes=4194304)}else{if(!z)if(d=nh(ee),d!==null){if(y.flags|=128,z=!0,d=d.updateQueue,y.updateQueue=d,Bp(y,d),p(H,!0),H.tail===null&&H.tailMode==="hidden"&&!ee.alternate&&!Ta)return n(y),null}else 2*Er()-H.renderingStartTime>us&&E!==536870912&&(y.flags|=128,z=!0,p(H,!1),y.lanes=4194304);H.isBackwards?(ee.sibling=y.child,y.child=ee):(d=H.last,d!==null?d.sibling=ee:y.child=ee,H.last=ee)}return H.tail!==null?(y=H.tail,H.rendering=y,H.tail=y.sibling,H.renderingStartTime=Er(),y.sibling=null,d=ka.current,Ke(ka,z?d&1|2:d&1),y):(n(y),null);case 22:case 23:return fa(y),Zc(),z=y.memoizedState!==null,d!==null?d.memoizedState!==null!==z&&(y.flags|=8192):z&&(y.flags|=8192),z?(E&536870912)!==0&&(y.flags&128)===0&&(n(y),y.subtreeFlags&6&&(y.flags|=8192)):n(y),E=y.updateQueue,E!==null&&Bp(y,E.retryQueue),E=null,d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),z=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(z=y.memoizedState.cachePool.pool),z!==E&&(y.flags|=2048),d!==null&&et(ac),null;case 24:return E=null,d!==null&&(E=d.memoizedState.cache),y.memoizedState.cache!==E&&(y.flags|=2048),tl(Ii),n(y),null;case 25:return null;case 30:return null}throw Error(c(156,y.tag))}function m(d,y){switch(Nh(y),y.tag){case 1:return d=y.flags,d&65536?(y.flags=d&-65537|128,y):null;case 3:return tl(Ii),er(),d=y.flags,(d&65536)!==0&&(d&128)===0?(y.flags=d&-65537|128,y):null;case 26:case 27:case 5:return ur(y),null;case 13:if(fa(y),d=y.memoizedState,d!==null&&d.dehydrated!==null){if(y.alternate===null)throw Error(c(340));Oh()}return d=y.flags,d&65536?(y.flags=d&-65537|128,y):null;case 19:return et(ka),null;case 4:return er(),null;case 10:return tl(y.type),null;case 22:case 23:return fa(y),Zc(),d!==null&&et(ac),d=y.flags,d&65536?(y.flags=d&-65537|128,y):null;case 24:return tl(Ii),null;case 25:return null;default:return null}}function v(d,y){switch(Nh(y),y.tag){case 3:tl(Ii),er();break;case 26:case 27:case 5:ur(y);break;case 4:er();break;case 13:fa(y);break;case 19:et(ka);break;case 10:tl(y.type);break;case 22:case 23:fa(y),Zc(),d!==null&&et(ac);break;case 24:tl(Ii)}}function S(d,y){try{var E=y.updateQueue,z=E!==null?E.lastEffect:null;if(z!==null){var H=z.next;E=H;do{if((E.tag&d)===d){z=void 0;var ee=E.create,Re=E.inst;z=ee(),Re.destroy=z}E=E.next}while(E!==H)}}catch(qe){La(y,y.return,qe)}}function D(d,y,E){try{var z=y.updateQueue,H=z!==null?z.lastEffect:null;if(H!==null){var ee=H.next;z=ee;do{if((z.tag&d)===d){var Re=z.inst,qe=Re.destroy;if(qe!==void 0){Re.destroy=void 0,H=y;var wt=E,Ht=qe;try{Ht()}catch(ir){La(H,wt,ir)}}}z=z.next}while(z!==ee)}}catch(ir){La(y,y.return,ir)}}function L(d){var y=d.updateQueue;if(y!==null){var E=d.stateNode;try{vp(y,E)}catch(z){La(d,d.return,z)}}}function O(d,y,E){E.props=id(d.type,d.memoizedProps),E.state=d.memoizedState;try{E.componentWillUnmount()}catch(z){La(d,y,z)}}function U(d,y){try{var E=d.ref;if(E!==null){switch(d.tag){case 26:case 27:case 5:var z=d.stateNode;break;case 30:z=d.stateNode;break;default:z=d.stateNode}typeof E=="function"?d.refCleanup=E(z):E.current=z}}catch(H){La(d,y,H)}}function q(d,y){var E=d.ref,z=d.refCleanup;if(E!==null)if(typeof z=="function")try{z()}catch(H){La(d,y,H)}finally{d.refCleanup=null,d=d.alternate,d!=null&&(d.refCleanup=null)}else if(typeof E=="function")try{E(null)}catch(H){La(d,y,H)}else E.current=null}function Z(d){var y=d.type,E=d.memoizedProps,z=d.stateNode;try{e:switch(y){case"button":case"input":case"select":case"textarea":E.autoFocus&&z.focus();break e;case"img":E.src?z.src=E.src:E.srcSet&&(z.srcset=E.srcSet)}}catch(H){La(d,d.return,H)}}function X(d,y,E){try{var z=d.stateNode;ob(z,d.type,E,y),z[tt]=y}catch(H){La(d,d.return,H)}}function ne(d){return d.tag===5||d.tag===3||d.tag===26||d.tag===27&&fo(d.type)||d.tag===4}function ge(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||ne(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.tag===27&&fo(d.type)||d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function he(d,y,E){var z=d.tag;if(z===5||z===6)d=d.stateNode,y?(E.nodeType===9?E.body:E.nodeName==="HTML"?E.ownerDocument.body:E).insertBefore(d,y):(y=E.nodeType===9?E.body:E.nodeName==="HTML"?E.ownerDocument.body:E,y.appendChild(d),E=E._reactRootContainer,E!=null||y.onclick!==null||(y.onclick=xf));else if(z!==4&&(z===27&&fo(d.type)&&(E=d.stateNode,y=null),d=d.child,d!==null))for(he(d,y,E),d=d.sibling;d!==null;)he(d,y,E),d=d.sibling}function ve(d,y,E){var z=d.tag;if(z===5||z===6)d=d.stateNode,y?E.insertBefore(d,y):E.appendChild(d);else if(z!==4&&(z===27&&fo(d.type)&&(E=d.stateNode),d=d.child,d!==null))for(ve(d,y,E),d=d.sibling;d!==null;)ve(d,y,E),d=d.sibling}function we(d){var y=d.stateNode,E=d.memoizedProps;try{for(var z=d.type,H=y.attributes;H.length;)y.removeAttributeNode(H[0]);hs(y,z,E),y[Je]=d,y[tt]=E}catch(ee){La(d,d.return,ee)}}var ze=!1,Oe=!1,Fe=!1,Ye=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Ze(d,y){if(d=d.containerInfo,jx=ey,d=rp(d),np(d)){if("selectionStart"in d)var E={start:d.selectionStart,end:d.selectionEnd};else e:{E=(E=d.ownerDocument)&&E.defaultView||window;var z=E.getSelection&&E.getSelection();if(z&&z.rangeCount!==0){E=z.anchorNode;var H=z.anchorOffset,ee=z.focusNode;z=z.focusOffset;try{E.nodeType,ee.nodeType}catch{E=null;break e}var Re=0,qe=-1,wt=-1,Ht=0,ir=0,br=d,Kt=null;t:for(;;){for(var Xt;br!==E||H!==0&&br.nodeType!==3||(qe=Re+H),br!==ee||z!==0&&br.nodeType!==3||(wt=Re+z),br.nodeType===3&&(Re+=br.nodeValue.length),(Xt=br.firstChild)!==null;)Kt=br,br=Xt;for(;;){if(br===d)break t;if(Kt===E&&++Ht===H&&(qe=Re),Kt===ee&&++ir===z&&(wt=Re),(Xt=br.nextSibling)!==null)break;br=Kt,Kt=br.parentNode}br=Xt}E=qe===-1||wt===-1?null:{start:qe,end:wt}}else E=null}E=E||{start:0,end:0}}else E=null;for(H0={focusedElem:d,selectionRange:E},ey=!1,Ge=y;Ge!==null;)if(y=Ge,d=y.child,(y.subtreeFlags&1024)!==0&&d!==null)d.return=y,Ge=d;else for(;Ge!==null;){switch(y=Ge,ee=y.alternate,d=y.flags,y.tag){case 0:break;case 11:case 15:break;case 1:if((d&1024)!==0&&ee!==null){d=void 0,E=y,H=ee.memoizedProps,ee=ee.memoizedState,z=E.stateNode;try{var Nn=id(E.type,H,E.elementType===E.type);d=z.getSnapshotBeforeUpdate(Nn,ee),z.__reactInternalSnapshotBeforeUpdate=d}catch(An){La(E,E.return,An)}}break;case 3:if((d&1024)!==0){if(d=y.stateNode.containerInfo,E=d.nodeType,E===9)vf(d);else if(E===1)switch(d.nodeName){case"HEAD":case"HTML":case"BODY":vf(d);break;default:d.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((d&1024)!==0)throw Error(c(163))}if(d=y.sibling,d!==null){d.return=y.return,Ge=d;break}Ge=y.return}}function We(d,y,E){var z=E.flags;switch(E.tag){case 0:case 11:case 15:Ot(d,E),z&4&&S(5,E);break;case 1:if(Ot(d,E),z&4)if(d=E.stateNode,y===null)try{d.componentDidMount()}catch(Re){La(E,E.return,Re)}else{var H=id(E.type,y.memoizedProps);y=y.memoizedState;try{d.componentDidUpdate(H,y,d.__reactInternalSnapshotBeforeUpdate)}catch(Re){La(E,E.return,Re)}}z&64&&L(E),z&512&&U(E,E.return);break;case 3:if(Ot(d,E),z&64&&(d=E.updateQueue,d!==null)){if(y=null,E.child!==null)switch(E.child.tag){case 27:case 5:y=E.child.stateNode;break;case 1:y=E.child.stateNode}try{vp(d,y)}catch(Re){La(E,E.return,Re)}}break;case 27:y===null&&z&4&&we(E);case 26:case 5:Ot(d,E),y===null&&z&4&&Z(E),z&512&&U(E,E.return);break;case 12:Ot(d,E);break;case 13:Ot(d,E),z&4&&mt(d,E),z&64&&(d=E.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&(E=Q_.bind(null,E),db(d,E))));break;case 22:if(z=E.memoizedState!==null||ze,!z){y=y!==null&&y.memoizedState!==null||Oe,H=ze;var ee=Oe;ze=z,(Oe=y)&&!ee?dr(d,E,(E.subtreeFlags&8772)!==0):Ot(d,E),ze=H,Oe=ee}break;case 30:break;default:Ot(d,E)}}function nt(d){var y=d.alternate;y!==null&&(d.alternate=null,nt(y)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(y=d.stateNode,y!==null&&Jt(y)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}var at=null,Ct=!1;function _t(d,y,E){for(E=E.child;E!==null;)lt(d,y,E),E=E.sibling}function lt(d,y,E){if(Dr&&typeof Dr.onCommitFiberUnmount=="function")try{Dr.onCommitFiberUnmount(kr,E)}catch{}switch(E.tag){case 26:Oe||q(E,y),_t(d,y,E),E.memoizedState?E.memoizedState.count--:E.stateNode&&(E=E.stateNode,E.parentNode.removeChild(E));break;case 27:Oe||q(E,y);var z=at,H=Ct;fo(E.type)&&(at=E.stateNode,Ct=!1),_t(d,y,E),Hp(E.stateNode),at=z,Ct=H;break;case 5:Oe||q(E,y);case 6:if(z=at,H=Ct,at=null,_t(d,y,E),at=z,Ct=H,at!==null)if(Ct)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(E.stateNode)}catch(ee){La(E,y,ee)}else try{at.removeChild(E.stateNode)}catch(ee){La(E,y,ee)}break;case 18:at!==null&&(Ct?(d=at,Gp(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,E.stateNode),Sg(d)):Gp(at,E.stateNode));break;case 4:z=at,H=Ct,at=E.stateNode.containerInfo,Ct=!0,_t(d,y,E),at=z,Ct=H;break;case 0:case 11:case 14:case 15:Oe||D(2,E,y),Oe||D(4,E,y),_t(d,y,E);break;case 1:Oe||(q(E,y),z=E.stateNode,typeof z.componentWillUnmount=="function"&&O(E,y,z)),_t(d,y,E);break;case 21:_t(d,y,E);break;case 22:Oe=(z=Oe)||E.memoizedState!==null,_t(d,y,E),Oe=z;break;default:_t(d,y,E)}}function mt(d,y){if(y.memoizedState===null&&(d=y.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null))))try{Sg(d)}catch(E){La(y,y.return,E)}}function Nt(d){switch(d.tag){case 13:case 19:var y=d.stateNode;return y===null&&(y=d.stateNode=new Ye),y;case 22:return d=d.stateNode,y=d._retryCache,y===null&&(y=d._retryCache=new Ye),y;default:throw Error(c(435,d.tag))}}function qt(d,y){var E=Nt(d);y.forEach(function(z){var H=ng.bind(null,d,z);E.has(z)||(E.add(z),z.then(H,H))})}function Zt(d,y){var E=y.deletions;if(E!==null)for(var z=0;z<E.length;z++){var H=E[z],ee=d,Re=y,qe=Re;e:for(;qe!==null;){switch(qe.tag){case 27:if(fo(qe.type)){at=qe.stateNode,Ct=!1;break e}break;case 5:at=qe.stateNode,Ct=!1;break e;case 3:case 4:at=qe.stateNode.containerInfo,Ct=!0;break e}qe=qe.return}if(at===null)throw Error(c(160));lt(ee,Re,H),at=null,Ct=!1,ee=H.alternate,ee!==null&&(ee.return=null),H.return=null}if(y.subtreeFlags&13878)for(y=y.child;y!==null;)Ft(y,d),y=y.sibling}var xt=null;function Ft(d,y){var E=d.alternate,z=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:Zt(y,d),Mt(d),z&4&&(D(3,d,d.return),S(3,d),D(5,d,d.return));break;case 1:Zt(y,d),Mt(d),z&512&&(Oe||E===null||q(E,E.return)),z&64&&ze&&(d=d.updateQueue,d!==null&&(z=d.callbacks,z!==null&&(E=d.shared.hiddenCallbacks,d.shared.hiddenCallbacks=E===null?z:E.concat(z))));break;case 26:var H=xt;if(Zt(y,d),Mt(d),z&512&&(Oe||E===null||q(E,E.return)),z&4){var ee=E!==null?E.memoizedState:null;if(z=d.memoizedState,E===null)if(z===null)if(d.stateNode===null){e:{z=d.type,E=d.memoizedProps,H=H.ownerDocument||H;t:switch(z){case"title":ee=H.getElementsByTagName("title")[0],(!ee||ee[It]||ee[Je]||ee.namespaceURI==="http://www.w3.org/2000/svg"||ee.hasAttribute("itemprop"))&&(ee=H.createElement(z),H.head.insertBefore(ee,H.querySelector("head > title"))),hs(ee,z,E),ee[Je]=d,Lr(ee),z=ee;break e;case"link":var Re=J0("link","href",H).get(z+(E.href||""));if(Re){for(var qe=0;qe<Re.length;qe++)if(ee=Re[qe],ee.getAttribute("href")===(E.href==null||E.href===""?null:E.href)&&ee.getAttribute("rel")===(E.rel==null?null:E.rel)&&ee.getAttribute("title")===(E.title==null?null:E.title)&&ee.getAttribute("crossorigin")===(E.crossOrigin==null?null:E.crossOrigin)){Re.splice(qe,1);break t}}ee=H.createElement(z),hs(ee,z,E),H.head.appendChild(ee);break;case"meta":if(Re=J0("meta","content",H).get(z+(E.content||""))){for(qe=0;qe<Re.length;qe++)if(ee=Re[qe],ee.getAttribute("content")===(E.content==null?null:""+E.content)&&ee.getAttribute("name")===(E.name==null?null:E.name)&&ee.getAttribute("property")===(E.property==null?null:E.property)&&ee.getAttribute("http-equiv")===(E.httpEquiv==null?null:E.httpEquiv)&&ee.getAttribute("charset")===(E.charSet==null?null:E.charSet)){Re.splice(qe,1);break t}}ee=H.createElement(z),hs(ee,z,E),H.head.appendChild(ee);break;default:throw Error(c(468,z))}ee[Je]=d,Lr(ee),z=ee}d.stateNode=z}else Q0(H,d.type,d.stateNode);else d.stateNode=bb(H,z,d.memoizedProps);else ee!==z?(ee===null?E.stateNode!==null&&(E=E.stateNode,E.parentNode.removeChild(E)):ee.count--,z===null?Q0(H,d.type,d.stateNode):bb(H,z,d.memoizedProps)):z===null&&d.stateNode!==null&&X(d,d.memoizedProps,E.memoizedProps)}break;case 27:Zt(y,d),Mt(d),z&512&&(Oe||E===null||q(E,E.return)),E!==null&&z&4&&X(d,d.memoizedProps,E.memoizedProps);break;case 5:if(Zt(y,d),Mt(d),z&512&&(Oe||E===null||q(E,E.return)),d.flags&32){H=d.stateNode;try{eo(H,"")}catch(Xt){La(d,d.return,Xt)}}z&4&&d.stateNode!=null&&(H=d.memoizedProps,X(d,H,E!==null?E.memoizedProps:H)),z&1024&&(Fe=!0);break;case 6:if(Zt(y,d),Mt(d),z&4){if(d.stateNode===null)throw Error(c(162));z=d.memoizedProps,E=d.stateNode;try{E.nodeValue=z}catch(Xt){La(d,d.return,Xt)}}break;case 3:if(Y0=null,H=xt,xt=X0(y.containerInfo),Zt(y,d),xt=H,Mt(d),z&4&&E!==null&&E.memoizedState.isDehydrated)try{Sg(y.containerInfo)}catch(Xt){La(d,d.return,Xt)}Fe&&(Fe=!1,Qt(d));break;case 4:z=xt,xt=X0(d.stateNode.containerInfo),Zt(y,d),Mt(d),xt=z;break;case 12:Zt(y,d),Mt(d);break;case 13:Zt(y,d),Mt(d),d.child.flags&8192&&d.memoizedState!==null!=(E!==null&&E.memoizedState!==null)&&(ho=Er()),z&4&&(z=d.updateQueue,z!==null&&(d.updateQueue=null,qt(d,z)));break;case 22:H=d.memoizedState!==null;var wt=E!==null&&E.memoizedState!==null,Ht=ze,ir=Oe;if(ze=Ht||H,Oe=ir||wt,Zt(y,d),Oe=ir,ze=Ht,Mt(d),z&8192)e:for(y=d.stateNode,y._visibility=H?y._visibility&-2:y._visibility|1,H&&(E===null||wt||ze||Oe||zt(d)),E=null,y=d;;){if(y.tag===5||y.tag===26){if(E===null){wt=E=y;try{if(ee=wt.stateNode,H)Re=ee.style,typeof Re.setProperty=="function"?Re.setProperty("display","none","important"):Re.display="none";else{qe=wt.stateNode;var br=wt.memoizedProps.style,Kt=br!=null&&br.hasOwnProperty("display")?br.display:null;qe.style.display=Kt==null||typeof Kt=="boolean"?"":(""+Kt).trim()}}catch(Xt){La(wt,wt.return,Xt)}}}else if(y.tag===6){if(E===null){wt=y;try{wt.stateNode.nodeValue=H?"":wt.memoizedProps}catch(Xt){La(wt,wt.return,Xt)}}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===d)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break e;for(;y.sibling===null;){if(y.return===null||y.return===d)break e;E===y&&(E=null),y=y.return}E===y&&(E=null),y.sibling.return=y.return,y=y.sibling}z&4&&(z=d.updateQueue,z!==null&&(E=z.retryQueue,E!==null&&(z.retryQueue=null,qt(d,E))));break;case 19:Zt(y,d),Mt(d),z&4&&(z=d.updateQueue,z!==null&&(d.updateQueue=null,qt(d,z)));break;case 30:break;case 21:break;default:Zt(y,d),Mt(d)}}function Mt(d){var y=d.flags;if(y&2){try{for(var E,z=d.return;z!==null;){if(ne(z)){E=z;break}z=z.return}if(E==null)throw Error(c(160));switch(E.tag){case 27:var H=E.stateNode,ee=ge(d);ve(d,ee,H);break;case 5:var Re=E.stateNode;E.flags&32&&(eo(Re,""),E.flags&=-33);var qe=ge(d);ve(d,qe,Re);break;case 3:case 4:var wt=E.stateNode.containerInfo,Ht=ge(d);he(d,Ht,wt);break;default:throw Error(c(161))}}catch(ir){La(d,d.return,ir)}d.flags&=-3}y&4096&&(d.flags&=-4097)}function Qt(d){if(d.subtreeFlags&1024)for(d=d.child;d!==null;){var y=d;Qt(y),y.tag===5&&y.flags&1024&&y.stateNode.reset(),d=d.sibling}}function Ot(d,y){if(y.subtreeFlags&8772)for(y=y.child;y!==null;)We(d,y.alternate,y),y=y.sibling}function zt(d){for(d=d.child;d!==null;){var y=d;switch(y.tag){case 0:case 11:case 14:case 15:D(4,y,y.return),zt(y);break;case 1:q(y,y.return);var E=y.stateNode;typeof E.componentWillUnmount=="function"&&O(y,y.return,E),zt(y);break;case 27:Hp(y.stateNode);case 26:case 5:q(y,y.return),zt(y);break;case 22:y.memoizedState===null&&zt(y);break;case 30:zt(y);break;default:zt(y)}d=d.sibling}}function dr(d,y,E){for(E=E&&(y.subtreeFlags&8772)!==0,y=y.child;y!==null;){var z=y.alternate,H=d,ee=y,Re=ee.flags;switch(ee.tag){case 0:case 11:case 15:dr(H,ee,E),S(4,ee);break;case 1:if(dr(H,ee,E),z=ee,H=z.stateNode,typeof H.componentDidMount=="function")try{H.componentDidMount()}catch(Ht){La(z,z.return,Ht)}if(z=ee,H=z.updateQueue,H!==null){var qe=z.stateNode;try{var wt=H.shared.hiddenCallbacks;if(wt!==null)for(H.shared.hiddenCallbacks=null,H=0;H<wt.length;H++)xp(wt[H],qe)}catch(Ht){La(z,z.return,Ht)}}E&&Re&64&&L(ee),U(ee,ee.return);break;case 27:we(ee);case 26:case 5:dr(H,ee,E),E&&z===null&&Re&4&&Z(ee),U(ee,ee.return);break;case 12:dr(H,ee,E);break;case 13:dr(H,ee,E),E&&Re&4&&mt(H,ee);break;case 22:ee.memoizedState===null&&dr(H,ee,E),U(ee,ee.return);break;case 30:break;default:dr(H,ee,E)}y=y.sibling}}function rr(d,y){var E=null;d!==null&&d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),d=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(d=y.memoizedState.cachePool.pool),d!==E&&(d!=null&&d.refCount++,E!=null&&Vh(E))}function yr(d,y){d=null,y.alternate!==null&&(d=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==d&&(y.refCount++,d!=null&&Vh(d))}function _r(d,y,E,z){if(y.subtreeFlags&10256)for(y=y.child;y!==null;)Kr(d,y,E,z),y=y.sibling}function Kr(d,y,E,z){var H=y.flags;switch(y.tag){case 0:case 11:case 15:_r(d,y,E,z),H&2048&&S(9,y);break;case 1:_r(d,y,E,z);break;case 3:_r(d,y,E,z),H&2048&&(d=null,y.alternate!==null&&(d=y.alternate.memoizedState.cache),y=y.memoizedState.cache,y!==d&&(y.refCount++,d!=null&&Vh(d)));break;case 12:if(H&2048){_r(d,y,E,z),d=y.stateNode;try{var ee=y.memoizedProps,Re=ee.id,qe=ee.onPostCommit;typeof qe=="function"&&qe(Re,y.alternate===null?"mount":"update",d.passiveEffectDuration,-0)}catch(wt){La(y,y.return,wt)}}else _r(d,y,E,z);break;case 13:_r(d,y,E,z);break;case 23:break;case 22:ee=y.stateNode,Re=y.alternate,y.memoizedState!==null?ee._visibility&2?_r(d,y,E,z):zr(d,y):ee._visibility&2?_r(d,y,E,z):(ee._visibility|=2,Ar(d,y,E,z,(y.subtreeFlags&10256)!==0)),H&2048&&rr(Re,y);break;case 24:_r(d,y,E,z),H&2048&&yr(y.alternate,y);break;default:_r(d,y,E,z)}}function Ar(d,y,E,z,H){for(H=H&&(y.subtreeFlags&10256)!==0,y=y.child;y!==null;){var ee=d,Re=y,qe=E,wt=z,Ht=Re.flags;switch(Re.tag){case 0:case 11:case 15:Ar(ee,Re,qe,wt,H),S(8,Re);break;case 23:break;case 22:var ir=Re.stateNode;Re.memoizedState!==null?ir._visibility&2?Ar(ee,Re,qe,wt,H):zr(ee,Re):(ir._visibility|=2,Ar(ee,Re,qe,wt,H)),H&&Ht&2048&&rr(Re.alternate,Re);break;case 24:Ar(ee,Re,qe,wt,H),H&&Ht&2048&&yr(Re.alternate,Re);break;default:Ar(ee,Re,qe,wt,H)}y=y.sibling}}function zr(d,y){if(y.subtreeFlags&10256)for(y=y.child;y!==null;){var E=d,z=y,H=z.flags;switch(z.tag){case 22:zr(E,z),H&2048&&rr(z.alternate,z);break;case 24:zr(E,z),H&2048&&yr(z.alternate,z);break;default:zr(E,z)}y=y.sibling}}var Hr=8192;function mn(d){if(d.subtreeFlags&Hr)for(d=d.child;d!==null;)ln(d),d=d.sibling}function ln(d){switch(d.tag){case 26:mn(d),d.flags&Hr&&d.memoizedState!==null&&Tb(xt,d.memoizedState,d.memoizedProps);break;case 5:mn(d);break;case 3:case 4:var y=xt;xt=X0(d.stateNode.containerInfo),mn(d),xt=y;break;case 22:d.memoizedState===null&&(y=d.alternate,y!==null&&y.memoizedState!==null?(y=Hr,Hr=16777216,mn(d),Hr=y):mn(d));break;default:mn(d)}}function pa(d){var y=d.alternate;if(y!==null&&(d=y.child,d!==null)){y.child=null;do y=d.sibling,d.sibling=null,d=y;while(d!==null)}}function ma(d){var y=d.deletions;if((d.flags&16)!==0){if(y!==null)for(var E=0;E<y.length;E++){var z=y[E];Ge=z,sn(z,d)}pa(d)}if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Gn(d),d=d.sibling}function Gn(d){switch(d.tag){case 0:case 11:case 15:ma(d),d.flags&2048&&D(9,d,d.return);break;case 3:ma(d);break;case 12:ma(d);break;case 22:var y=d.stateNode;d.memoizedState!==null&&y._visibility&2&&(d.return===null||d.return.tag!==13)?(y._visibility&=-3,Kn(d)):ma(d);break;default:ma(d)}}function Kn(d){var y=d.deletions;if((d.flags&16)!==0){if(y!==null)for(var E=0;E<y.length;E++){var z=y[E];Ge=z,sn(z,d)}pa(d)}for(d=d.child;d!==null;){switch(y=d,y.tag){case 0:case 11:case 15:D(8,y,y.return),Kn(y);break;case 22:E=y.stateNode,E._visibility&2&&(E._visibility&=-3,Kn(y));break;default:Kn(y)}d=d.sibling}}function sn(d,y){for(;Ge!==null;){var E=Ge;switch(E.tag){case 0:case 11:case 15:D(8,E,y);break;case 23:case 22:if(E.memoizedState!==null&&E.memoizedState.cachePool!==null){var z=E.memoizedState.cachePool.pool;z!=null&&z.refCount++}break;case 24:Vh(E.memoizedState.cache)}if(z=E.child,z!==null)z.return=E,Ge=z;else e:for(E=d;Ge!==null;){z=Ge;var H=z.sibling,ee=z.return;if(nt(z),z===E){Ge=null;break e}if(H!==null){H.return=ee,Ge=H;break e}Ge=ee}}}var jr={getCacheForType:function(d){var y=xi(Ii),E=y.data.get(d);return E===void 0&&(E=d(),y.data.set(d,E)),E}},Vn=typeof WeakMap=="function"?WeakMap:Map,Zr=0,xn=null,vn=null,Mn=0,Sn=0,Ea=null,ni=!1,Ca=!1,ia=!1,Hn=0,qr=0,va=0,Qa=0,aa=0,za=0,Yi=0,Ji=null,fi=null,Qi=!1,ho=0,us=1/0,ll=null,ds=null,li=0,Bo=null,vc=null,_c=0,Tx=0,z0=null,U_=null,Qm=0,L0=null;function No(){if((Zr&2)!==0&&Mn!==0)return Mn&-Mn;if(Te.T!==null){var d=nc;return d!==0?d:Ix()}return ye()}function Ex(){za===0&&(za=(Mn&536870912)===0||Ta?yi():536870912);var d=io.current;return d!==null&&(d.flags|=32),za}function jo(d,y,E){(d===xn&&(Sn===2||Sn===9)||d.cancelPendingCommit!==null)&&(uf(d,0),au(d,Mn,za,!1)),ya(d,E),((Zr&2)===0||d!==xn)&&(d===xn&&((Zr&2)===0&&(Qa|=E),qr===4&&au(d,Mn,za,!1)),wc(d))}function Cx(d,y,E){if((Zr&6)!==0)throw Error(c(327));var z=!E&&(y&124)===0&&(y&d.expiredLanes)===0||ja(d,y),H=z?eg(d,y):$0(d,y,!0),ee=z;do{if(H===0){Ca&&!z&&au(d,y,0,!1);break}else{if(E=d.current.alternate,ee&&!G_(E)){H=$0(d,y,!1),ee=!1;continue}if(H===2){if(ee=y,d.errorRecoveryDisabledLanes&ee)var Re=0;else Re=d.pendingLanes&-536870913,Re=Re!==0?Re:Re&536870912?536870912:0;if(Re!==0){y=Re;e:{var qe=d;H=Ji;var wt=qe.current.memoizedState.isDehydrated;if(wt&&(uf(qe,Re).flags|=256),Re=$0(qe,Re,!1),Re!==2){if(ia&&!wt){qe.errorRecoveryDisabledLanes|=ee,Qa|=ee,H=4;break e}ee=fi,fi=H,ee!==null&&(fi===null?fi=ee:fi.push.apply(fi,ee))}H=Re}if(ee=!1,H!==2)continue}}if(H===1){uf(d,0),au(d,y,0,!0);break}e:{switch(z=d,ee=H,ee){case 0:case 1:throw Error(c(345));case 4:if((y&4194048)!==y)break;case 6:au(z,y,za,!ni);break e;case 2:fi=null;break;case 3:case 5:break;default:throw Error(c(329))}if((y&62914560)===y&&(H=ho+300-Er(),10<H)){if(au(z,y,za,!ni),Ia(z,0,!0)!==0)break e;z.timeoutHandle=lb(Dx.bind(null,z,E,fi,ll,Qi,y,za,Qa,Yi,ni,ee,2,-0,0),H);break e}Dx(z,E,fi,ll,Qi,y,za,Qa,Yi,ni,ee,0,-0,0)}}break}while(!0);wc(d)}function Dx(d,y,E,z,H,ee,Re,qe,wt,Ht,ir,br,Kt,Xt){if(d.timeoutHandle=-1,br=y.subtreeFlags,(br&8192||(br&16785408)===16785408)&&(Kp={stylesheets:null,count:0,unsuspend:Sb},ln(y),br=Eb(),br!==null)){d.cancelPendingCommit=br(X_.bind(null,d,y,ee,E,z,H,Re,qe,wt,ir,1,Kt,Xt)),au(d,ee,Re,!Ht);return}X_(d,y,ee,E,z,H,Re,qe,wt)}function G_(d){for(var y=d;;){var E=y.tag;if((E===0||E===11||E===15)&&y.flags&16384&&(E=y.updateQueue,E!==null&&(E=E.stores,E!==null)))for(var z=0;z<E.length;z++){var H=E[z],ee=H.getSnapshot;H=H.value;try{if(!ki(ee(),H))return!1}catch{return!1}}if(E=y.child,y.subtreeFlags&16384&&E!==null)E.return=y,y=E;else{if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function au(d,y,E,z){y&=~aa,y&=~Qa,d.suspendedLanes|=y,d.pingedLanes&=~y,z&&(d.warmLanes|=y),z=d.expirationTimes;for(var H=y;0<H;){var ee=31-an(H),Re=1<<ee;z[ee]=-1,H&=~Re}E!==0&&js(d,E,y)}function bc(){return(Zr&6)===0?(Up(0),!1):!0}function es(){if(vn!==null){if(Sn===0)var d=vn.return;else d=vn,Sl=Ro=null,Hh(d),rd=null,th=0,d=vn;for(;d!==null;)v(d.alternate,d),d=d.return;vn=null}}function uf(d,y){var E=d.timeoutHandle;E!==-1&&(d.timeoutHandle=-1,P2(E)),E=d.cancelPendingCommit,E!==null&&(d.cancelPendingCommit=null,E()),es(),xn=d,vn=E=Yl(d.current,null),Mn=y,Sn=0,Ea=null,ni=!1,Ca=ja(d,y),ia=!1,Yi=za=aa=Qa=va=qr=0,fi=Ji=null,Qi=!1,(y&8)!==0&&(y|=y&32);var z=d.entangledLanes;if(z!==0)for(d=d.entanglements,z&=y;0<z;){var H=31-an(z),ee=1<<H;y|=d[H],z&=~ee}return Hn=y,ju(),E}function Np(d,y){ta=null,Te.H=Jc,y===Zu||y===ic?(y=Wc(),Sn=3):y===D0?(y=Wc(),Sn=4):Sn=y===R0?8:y!==null&&typeof y=="object"&&typeof y.then=="function"?6:1,Ea=y,vn===null&&(qr=1,gc(d,Ri(y,d.current)))}function H_(){var d=Te.H;return Te.H=Jc,d===null?Jc:d}function q_(){var d=Te.A;return Te.A=jr,d}function df(){qr=4,ni||(Mn&4194048)!==Mn&&io.current!==null||(Ca=!0),(va&134217727)===0&&(Qa&134217727)===0||xn===null||au(xn,Mn,za,!1)}function $0(d,y,E){var z=Zr;Zr|=2;var H=H_(),ee=q_();(xn!==d||Mn!==y)&&(ll=null,uf(d,y)),y=!1;var Re=qr;e:do try{if(Sn!==0&&vn!==null){var qe=vn,wt=Ea;switch(Sn){case 8:es(),Re=6;break e;case 3:case 2:case 9:case 6:io.current===null&&(y=!0);var Ht=Sn;if(Sn=0,Ea=null,jp(d,qe,wt,Ht),E&&Ca){Re=0;break e}break;default:Ht=Sn,Sn=0,Ea=null,jp(d,qe,wt,Ht)}}hf(),Re=qr;break}catch(ir){Np(d,ir)}while(!0);return y&&d.shellSuspendCounter++,Sl=Ro=null,Zr=z,Te.H=H,Te.A=ee,vn===null&&(xn=null,Mn=0,ju()),Re}function hf(){for(;vn!==null;)W_(vn)}function eg(d,y){var E=Zr;Zr|=2;var z=H_(),H=q_();xn!==d||Mn!==y?(ll=null,us=Er()+500,uf(d,y)):Ca=ja(d,y);e:do try{if(Sn!==0&&vn!==null){y=vn;var ee=Ea;t:switch(Sn){case 1:Sn=0,Ea=null,jp(d,y,ee,1);break;case 2:case 9:if(Tr(ee)){Sn=0,Ea=null,K_(y);break}y=function(){Sn!==2&&Sn!==9||xn!==d||(Sn=7),wc(d)},ee.then(y,y);break e;case 3:Sn=7;break e;case 4:Sn=5;break e;case 7:Tr(ee)?(Sn=0,Ea=null,K_(y)):(Sn=0,Ea=null,jp(d,y,ee,7));break;case 5:var Re=null;switch(vn.tag){case 26:Re=vn.memoizedState;case 5:case 27:var qe=vn;if(!Re||Zx(Re)){Sn=0,Ea=null;var wt=qe.sibling;if(wt!==null)vn=wt;else{var Ht=qe.return;Ht!==null?(vn=Ht,B0(Ht)):vn=null}break t}}Sn=0,Ea=null,jp(d,y,ee,5);break;case 6:Sn=0,Ea=null,jp(d,y,ee,6);break;case 8:es(),qr=6;break e;default:throw Error(c(462))}}E2();break}catch(ir){Np(d,ir)}while(!0);return Sl=Ro=null,Te.H=z,Te.A=H,Zr=E,vn!==null?0:(xn=null,Mn=0,ju(),qr)}function E2(){for(;vn!==null&&!$t();)W_(vn)}function W_(d){var y=Li(d.alternate,d,Hn);d.memoizedProps=d.pendingProps,y===null?B0(d):vn=y}function K_(d){var y=d,E=y.alternate;switch(y.tag){case 15:case 0:y=cf(E,y,y.pendingProps,y.type,void 0,Mn);break;case 11:y=cf(E,y,y.pendingProps,y.type.render,y.ref,Mn);break;case 5:Hh(y);default:v(E,y),y=vn=cp(y,Hn),y=Li(E,y,Hn)}d.memoizedProps=d.pendingProps,y===null?B0(d):vn=y}function jp(d,y,E,z){Sl=Ro=null,Hh(y),rd=null,th=0;var H=y.return;try{if(tu(d,H,y,E,Mn)){qr=1,gc(d,Ri(E,d.current)),vn=null;return}}catch(ee){if(H!==null)throw vn=H,ee;qr=1,gc(d,Ri(E,d.current)),vn=null;return}y.flags&32768?(Ta||z===1?d=!0:Ca||(Mn&536870912)!==0?d=!1:(ni=d=!0,(z===2||z===9||z===3||z===6)&&(z=io.current,z!==null&&z.tag===13&&(z.flags|=16384))),Z_(y,d)):B0(y)}function B0(d){var y=d;do{if((y.flags&32768)!==0){Z_(y,ni);return}d=y.return;var E=o(y.alternate,y,Hn);if(E!==null){vn=E;return}if(y=y.sibling,y!==null){vn=y;return}vn=y=d}while(y!==null);qr===0&&(qr=5)}function Z_(d,y){do{var E=m(d.alternate,d);if(E!==null){E.flags&=32767,vn=E;return}if(E=d.return,E!==null&&(E.flags|=32768,E.subtreeFlags=0,E.deletions=null),!y&&(d=d.sibling,d!==null)){vn=d;return}vn=d=E}while(d!==null);qr=6,vn=null}function X_(d,y,E,z,H,ee,Re,qe,wt){d.cancelPendingCommit=null;do ai();while(li!==0);if((Zr&6)!==0)throw Error(c(327));if(y!==null){if(y===d.current)throw Error(c(177));if(ee=y.lanes|y.childLanes,ee|=Lh,Xa(d,E,ee,Re,qe,wt),d===xn&&(vn=xn=null,Mn=0),vc=y,Bo=d,_c=E,Tx=ee,z0=H,U_=z,(y.subtreeFlags&10256)!==0||(y.flags&10256)!==0?(d.callbackNode=null,d.callbackPriority=0,Ax(Bn,function(){return tg(),null})):(d.callbackNode=null,d.callbackPriority=0),z=(y.flags&13878)!==0,(y.subtreeFlags&13878)!==0||z){z=Te.T,Te.T=null,H=Ie.p,Ie.p=2,Re=Zr,Zr|=4;try{Ze(d,y,E)}finally{Zr=Re,Ie.p=H,Te.T=z}}li=1,N0(),Y_(),ff()}}function N0(){if(li===1){li=0;var d=Bo,y=vc,E=(y.flags&13878)!==0;if((y.subtreeFlags&13878)!==0||E){E=Te.T,Te.T=null;var z=Ie.p;Ie.p=2;var H=Zr;Zr|=4;try{Ft(y,d);var ee=H0,Re=rp(d.containerInfo),qe=ee.focusedElem,wt=ee.selectionRange;if(Re!==qe&&qe&&qe.ownerDocument&&_0(qe.ownerDocument.documentElement,qe)){if(wt!==null&&np(qe)){var Ht=wt.start,ir=wt.end;if(ir===void 0&&(ir=Ht),"selectionStart"in qe)qe.selectionStart=Ht,qe.selectionEnd=Math.min(ir,qe.value.length);else{var br=qe.ownerDocument||document,Kt=br&&br.defaultView||window;if(Kt.getSelection){var Xt=Kt.getSelection(),Nn=qe.textContent.length,An=Math.min(wt.start,Nn),Ka=wt.end===void 0?An:Math.min(wt.end,Nn);!Xt.extend&&An>Ka&&(Re=Ka,Ka=An,An=Re);var Bt=v0(qe,An),kt=v0(qe,Ka);if(Bt&&kt&&(Xt.rangeCount!==1||Xt.anchorNode!==Bt.node||Xt.anchorOffset!==Bt.offset||Xt.focusNode!==kt.node||Xt.focusOffset!==kt.offset)){var Ut=br.createRange();Ut.setStart(Bt.node,Bt.offset),Xt.removeAllRanges(),An>Ka?(Xt.addRange(Ut),Xt.extend(kt.node,kt.offset)):(Ut.setEnd(kt.node,kt.offset),Xt.addRange(Ut))}}}}for(br=[],Xt=qe;Xt=Xt.parentNode;)Xt.nodeType===1&&br.push({element:Xt,left:Xt.scrollLeft,top:Xt.scrollTop});for(typeof qe.focus=="function"&&qe.focus(),qe=0;qe<br.length;qe++){var pr=br[qe];pr.element.scrollLeft=pr.left,pr.element.scrollTop=pr.top}}ey=!!jx,H0=jx=null}finally{Zr=H,Ie.p=z,Te.T=E}}d.current=y,li=2}}function Y_(){if(li===2){li=0;var d=Bo,y=vc,E=(y.flags&8772)!==0;if((y.subtreeFlags&8772)!==0||E){E=Te.T,Te.T=null;var z=Ie.p;Ie.p=2;var H=Zr;Zr|=4;try{We(d,y.alternate,y)}finally{Zr=H,Ie.p=z,Te.T=E}}li=3}}function ff(){if(li===4||li===3){li=0,or();var d=Bo,y=vc,E=_c,z=U_;(y.subtreeFlags&10256)!==0||(y.flags&10256)!==0?li=5:(li=0,vc=Bo=null,J_(d,d.pendingLanes));var H=d.pendingLanes;if(H===0&&(ds=null),St(E),y=y.stateNode,Dr&&typeof Dr.onCommitFiberRoot=="function")try{Dr.onCommitFiberRoot(kr,y,void 0,(y.current.flags&128)===128)}catch{}if(z!==null){y=Te.T,H=Ie.p,Ie.p=2,Te.T=null;try{for(var ee=d.onRecoverableError,Re=0;Re<z.length;Re++){var qe=z[Re];ee(qe.value,{componentStack:qe.stack})}}finally{Te.T=y,Ie.p=H}}(_c&3)!==0&&ai(),wc(d),H=d.pendingLanes,(E&4194090)!==0&&(H&42)!==0?d===L0?Qm++:(Qm=0,L0=d):Qm=0,Up(0)}}function J_(d,y){(d.pooledCacheLanes&=y)===0&&(y=d.pooledCache,y!=null&&(d.pooledCache=null,Vh(y)))}function ai(d){return N0(),Y_(),ff(),tg()}function tg(){if(li!==5)return!1;var d=Bo,y=Tx;Tx=0;var E=St(_c),z=Te.T,H=Ie.p;try{Ie.p=32>E?32:E,Te.T=null,E=z0,z0=null;var ee=Bo,Re=_c;if(li=0,vc=Bo=null,_c=0,(Zr&6)!==0)throw Error(c(331));var qe=Zr;if(Zr|=4,Gn(ee.current),Kr(ee,ee.current,Re,E),Zr=qe,Up(0,!1),Dr&&typeof Dr.onPostCommitFiberRoot=="function")try{Dr.onPostCommitFiberRoot(kr,ee)}catch{}return!0}finally{Ie.p=H,Te.T=z,J_(d,y)}}function Px(d,y,E){y=Ri(E,y),y=lo(d.stateNode,y,2),d=El(d,y,2),d!==null&&(ya(d,2),wc(d))}function La(d,y,E){if(d.tag===3)Px(d,d,E);else for(;y!==null;){if(y.tag===3){Px(y,d,E);break}else if(y.tag===1){var z=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(ds===null||!ds.has(z))){d=Ri(E,d),E=yc(2),z=El(y,E,2),z!==null&&(eu(E,z,y,d),ya(z,2),wc(z));break}}y=y.return}}function Op(d,y,E){var z=d.pingCache;if(z===null){z=d.pingCache=new Vn;var H=new Set;z.set(y,H)}else H=z.get(y),H===void 0&&(H=new Set,z.set(y,H));H.has(E)||(ia=!0,H.add(E),d=rg.bind(null,d,y,E),y.then(d,d))}function rg(d,y,E){var z=d.pingCache;z!==null&&z.delete(y),d.pingedLanes|=d.suspendedLanes&E,d.warmLanes&=~E,xn===d&&(Mn&E)===E&&(qr===4||qr===3&&(Mn&62914560)===Mn&&300>Er()-ho?(Zr&2)===0&&uf(d,0):aa|=E,Yi===Mn&&(Yi=0)),wc(d)}function Mx(d,y){y===0&&(y=Zn()),d=Ou(d,y),d!==null&&(ya(d,y),wc(d))}function Q_(d){var y=d.memoizedState,E=0;y!==null&&(E=y.retryLane),Mx(d,E)}function ng(d,y){var E=0;switch(d.tag){case 13:var z=d.stateNode,H=d.memoizedState;H!==null&&(E=H.retryLane);break;case 19:z=d.stateNode;break;case 22:z=d.stateNode._retryCache;break;default:throw Error(c(314))}z!==null&&z.delete(y),Mx(d,E)}function Ax(d,y){return yt(d,y)}var pf=null,Fp=null,j0=!1,Vp=!1,ag=!1,ld=0;function wc(d){d!==Fp&&d.next===null&&(Fp===null?pf=Fp=d:Fp=Fp.next=d),Vp=!0,j0||(j0=!0,C2())}function Up(d,y){if(!ag&&Vp){ag=!0;do for(var E=!1,z=pf;z!==null;){if(d!==0){var H=z.pendingLanes;if(H===0)var ee=0;else{var Re=z.suspendedLanes,qe=z.pingedLanes;ee=(1<<31-an(42|d)+1)-1,ee&=H&~(Re&~qe),ee=ee&201326741?ee&201326741|1:ee?ee|2:0}ee!==0&&(E=!0,Rx(z,ee))}else ee=Mn,ee=Ia(z,z===xn?ee:0,z.cancelPendingCommit!==null||z.timeoutHandle!==-1),(ee&3)===0||ja(z,ee)||(E=!0,Rx(z,ee));z=z.next}while(E);ag=!1}}function eb(){kx()}function kx(){Vp=j0=!1;var d=0;ld!==0&&(Vx()&&(d=ld),ld=0);for(var y=Er(),E=null,z=pf;z!==null;){var H=z.next,ee=O0(z,y);ee===0?(z.next=null,E===null?pf=H:E.next=H,H===null&&(Fp=E)):(E=z,(d!==0||(ee&3)!==0)&&(Vp=!0)),z=H}Up(d)}function O0(d,y){for(var E=d.suspendedLanes,z=d.pingedLanes,H=d.expirationTimes,ee=d.pendingLanes&-62914561;0<ee;){var Re=31-an(ee),qe=1<<Re,wt=H[Re];wt===-1?((qe&E)===0||(qe&z)!==0)&&(H[Re]=Wr(qe,y)):wt<=y&&(d.expiredLanes|=qe),ee&=~qe}if(y=xn,E=Mn,E=Ia(d,d===y?E:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),z=d.callbackNode,E===0||d===y&&(Sn===2||Sn===9)||d.cancelPendingCommit!==null)return z!==null&&z!==null&&dt(z),d.callbackNode=null,d.callbackPriority=0;if((E&3)===0||ja(d,E)){if(y=E&-E,y===d.callbackPriority)return y;switch(z!==null&&dt(z),St(E)){case 2:case 8:E=Fr;break;case 32:E=Bn;break;case 268435456:E=On;break;default:E=Bn}return z=Sc.bind(null,d),E=yt(E,z),d.callbackPriority=y,d.callbackNode=E,y}return z!==null&&z!==null&&dt(z),d.callbackPriority=2,d.callbackNode=null,2}function Sc(d,y){if(li!==0&&li!==5)return d.callbackNode=null,d.callbackPriority=0,null;var E=d.callbackNode;if(ai()&&d.callbackNode!==E)return null;var z=Mn;return z=Ia(d,d===xn?z:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),z===0?null:(Cx(d,z,y),O0(d,Er()),d.callbackNode!=null&&d.callbackNode===E?Sc.bind(null,d):null)}function Rx(d,y){if(ai())return null;Cx(d,y,!0)}function C2(){M2(function(){(Zr&6)!==0?yt(Pr,eb):kx()})}function Ix(){return ld===0&&(ld=yi()),ld}function tb(d){return d==null||typeof d=="symbol"||typeof d=="boolean"?null:typeof d=="function"?d:Mu(""+d)}function rb(d,y){var E=y.ownerDocument.createElement("input");return E.name=y.name,E.value=y.value,d.id&&E.setAttribute("form",d.id),y.parentNode.insertBefore(E,y),d=new FormData(d),E.parentNode.removeChild(E),d}function D2(d,y,E,z,H){if(y==="submit"&&E&&E.stateNode===H){var ee=tb((H[tt]||null).action),Re=z.submitter;Re&&(y=(y=Re[tt]||null)?tb(y.formAction):Re.getAttribute("formAction"),y!==null&&(ee=y,Re=null));var qe=new Dh("action","action",null,z,H);d.push({event:qe,listeners:[{instance:null,listener:function(){if(z.defaultPrevented){if(ld!==0){var wt=Re?rb(H,Re):new FormData(H);mc(E,{pending:!0,data:wt,method:H.method,action:ee},null,wt)}}else typeof ee=="function"&&(qe.preventDefault(),wt=Re?rb(H,Re):new FormData(H),mc(E,{pending:!0,data:wt,method:H.method,action:ee},ee,wt))},currentTarget:H}]})}}for(var zx=0;zx<Fc.length;zx++){var Lx=Fc[zx],$x=Lx.toLowerCase(),nb=Lx[0].toUpperCase()+Lx.slice(1);Rs($x,"on"+nb)}Rs(ip,"onAnimationEnd"),Rs(zh,"onAnimationIteration"),Rs(kd,"onAnimationStart"),Rs("dblclick","onDoubleClick"),Rs("focusin","onFocus"),Rs("focusout","onBlur"),Rs(sp,"onTransitionRun"),Rs(jc,"onTransitionStart"),Rs(op,"onTransitionCancel"),Rs(lp,"onTransitionEnd"),un("onMouseEnter",["mouseout","mouseover"]),un("onMouseLeave",["mouseout","mouseover"]),un("onPointerEnter",["pointerout","pointerover"]),un("onPointerLeave",["pointerout","pointerover"]),Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ab=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mf));function F0(d,y){y=(y&4)!==0;for(var E=0;E<d.length;E++){var z=d[E],H=z.event;z=z.listeners;e:{var ee=void 0;if(y)for(var Re=z.length-1;0<=Re;Re--){var qe=z[Re],wt=qe.instance,Ht=qe.currentTarget;if(qe=qe.listener,wt!==ee&&H.isPropagationStopped())break e;ee=qe,H.currentTarget=Ht;try{ee(H)}catch(ir){zp(ir)}H.currentTarget=null,ee=wt}else for(Re=0;Re<z.length;Re++){if(qe=z[Re],wt=qe.instance,Ht=qe.currentTarget,qe=qe.listener,wt!==ee&&H.isPropagationStopped())break e;ee=qe,H.currentTarget=Ht;try{ee(H)}catch(ir){zp(ir)}H.currentTarget=null,ee=wt}}}}function ga(d,y){var E=y[bt];E===void 0&&(E=y[bt]=new Set);var z=d+"__bubble";E.has(z)||(Bx(y,d,2,!1),E.add(z))}function V0(d,y,E){var z=0;y&&(z|=4),Bx(E,d,z,y)}var gf="_reactListening"+Math.random().toString(36).slice(2);function U0(d){if(!d[gf]){d[gf]=!0,Qr.forEach(function(E){E!=="selectionchange"&&(ab.has(E)||V0(E,!1,d),V0(E,!0,d))});var y=d.nodeType===9?d:d.ownerDocument;y===null||y[gf]||(y[gf]=!0,V0("selectionchange",!1,y))}}function Bx(d,y,E,z){switch(ty(y)){case 2:var H=R2;break;case 8:H=kb;break;default:H=Jx}E=H.bind(null,y,E,d),H=void 0,!wr||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(H=!0),z?H!==void 0?d.addEventListener(y,E,{capture:!0,passive:H}):d.addEventListener(y,E,!0):H!==void 0?d.addEventListener(y,E,{passive:H}):d.addEventListener(y,E,!1)}function G0(d,y,E,z,H){var ee=z;if((y&1)===0&&(y&2)===0&&z!==null)e:for(;;){if(z===null)return;var Re=z.tag;if(Re===3||Re===4){var qe=z.stateNode.containerInfo;if(qe===H)break;if(Re===4)for(Re=z.return;Re!==null;){var wt=Re.tag;if((wt===3||wt===4)&&Re.stateNode.containerInfo===H)return;Re=Re.return}for(;qe!==null;){if(Re=Gt(qe),Re===null)return;if(wt=Re.tag,wt===5||wt===6||wt===26||wt===27){z=ee=Re;continue e}qe=qe.parentNode}}z=z.return}to(function(){var Ht=ee,ir=Lm(E),br=[];e:{var Kt=Oc.get(d);if(Kt!==void 0){var Xt=Dh,Nn=d;switch(d){case"keypress":if(ku(E)===0)break e;case"keydown":case"keyup":Xt=Vs;break;case"focusin":Nn="focus",Xt=wa;break;case"focusout":Nn="blur",Xt=wa;break;case"beforeblur":case"afterblur":Xt=wa;break;case"click":if(E.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xt=Yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xt=Ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xt=Ah;break;case ip:case zh:case kd:Xt=Co;break;case lp:Xt=wx;break;case"scroll":case"scrollend":Xt=Zf;break;case"wheel":Xt=Rh;break;case"copy":case"cut":case"paste":Xt=Ph;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xt=Mh;break;case"toggle":case"beforetoggle":Xt=Qo}var An=(y&4)!==0,Ka=!An&&(d==="scroll"||d==="scrollend"),Bt=An?Kt!==null?Kt+"Capture":null:Kt;An=[];for(var kt=Ht,Ut;kt!==null;){var pr=kt;if(Ut=pr.stateNode,pr=pr.tag,pr!==5&&pr!==26&&pr!==27||Ut===null||Bt===null||(pr=Au(kt,Bt),pr!=null&&An.push(iu(kt,pr,Ut))),Ka)break;kt=kt.return}0<An.length&&(Kt=new Xt(Kt,Nn,null,E,ir),br.push({event:Kt,listeners:An}))}}if((y&7)===0){e:{if(Kt=d==="mouseover"||d==="pointerover",Xt=d==="mouseout"||d==="pointerout",Kt&&E!==In&&(Nn=E.relatedTarget||E.fromElement)&&(Gt(Nn)||Nn[ut]))break e;if((Xt||Kt)&&(Kt=ir.window===ir?ir:(Kt=ir.ownerDocument)?Kt.defaultView||Kt.parentWindow:window,Xt?(Nn=E.relatedTarget||E.toElement,Xt=Ht,Nn=Nn?Gt(Nn):null,Nn!==null&&(Ka=_(Nn),An=Nn.tag,Nn!==Ka||An!==5&&An!==27&&An!==6)&&(Nn=null)):(Xt=null,Nn=Ht),Xt!==Nn)){if(An=Yo,pr="onMouseLeave",Bt="onMouseEnter",kt="mouse",(d==="pointerout"||d==="pointerover")&&(An=Mh,pr="onPointerLeave",Bt="onPointerEnter",kt="pointer"),Ka=Xt==null?Kt:Ur(Xt),Ut=Nn==null?Kt:Ur(Nn),Kt=new An(pr,kt+"leave",Xt,E,ir),Kt.target=Ka,Kt.relatedTarget=Ut,pr=null,Gt(ir)===Ht&&(An=new An(Bt,kt+"enter",Nn,E,ir),An.target=Ut,An.relatedTarget=Ka,pr=An),Ka=pr,Xt&&Nn)t:{for(An=Xt,Bt=Nn,kt=0,Ut=An;Ut;Ut=yf(Ut))kt++;for(Ut=0,pr=Bt;pr;pr=yf(pr))Ut++;for(;0<kt-Ut;)An=yf(An),kt--;for(;0<Ut-kt;)Bt=yf(Bt),Ut--;for(;kt--;){if(An===Bt||Bt!==null&&An===Bt.alternate)break t;An=yf(An),Bt=yf(Bt)}An=null}else An=null;Xt!==null&&ig(br,Kt,Xt,An,!1),Nn!==null&&Ka!==null&&ig(br,Ka,Nn,An,!0)}}e:{if(Kt=Ht?Ur(Ht):window,Xt=Kt.nodeName&&Kt.nodeName.toLowerCase(),Xt==="select"||Xt==="input"&&Kt.type==="file")var nn=Dd;else if(_l(Kt))if(Oi)nn=Kl;else{nn=x0;var la=Ki}else Xt=Kt.nodeName,!Xt||Xt.toLowerCase()!=="input"||Kt.type!=="checkbox"&&Kt.type!=="radio"?Ht&&Rc(Ht.elementType)&&(nn=Dd):nn=tp;if(nn&&(nn=nn(d,Ht))){Gr(br,nn,E,ir);break e}la&&la(d,Kt,Ht),d==="focusout"&&Ht&&Kt.type==="number"&&Ht.memoizedProps.value!=null&&Qs(Kt,"number",Kt.value)}switch(la=Ht?Ur(Ht):window,d){case"focusin":(_l(la)||la.contentEditable==="true")&&(Nu=la,Ad=Ht,el=null);break;case"focusout":el=Ad=Nu=null;break;case"mousedown":Bm=!0;break;case"contextmenu":case"mouseup":case"dragend":Bm=!1,w0(br,E,ir);break;case"selectionchange":if(b0)break;case"keydown":case"keyup":w0(br,E,ir)}var hn;if(Ed)e:{switch(d){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else Rr?Lu(d,E)&&(kn="onCompositionEnd"):d==="keydown"&&E.keyCode===229&&(kn="onCompositionStart");kn&&(g0&&E.locale!=="ko"&&(Rr||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&Rr&&(hn=En()):(_n=ir,bs="value"in _n?_n.value:_n.textContent,Rr=!0)),la=su(Ht,kn),0<la.length&&(kn=new vl(kn,d,null,E,ir),br.push({event:kn,listeners:la}),hn?kn.data=hn:(hn=dn(E),hn!==null&&(kn.data=hn)))),(hn=Sx?Qf(d,E):en(d,E))&&(kn=su(Ht,"onBeforeInput"),0<kn.length&&(la=new vl("onBeforeInput","beforeinput",null,E,ir),br.push({event:la,listeners:kn}),la.data=hn)),D2(br,d,Ht,E,ir)}F0(br,y)})}function iu(d,y,E){return{instance:d,listener:y,currentTarget:E}}function su(d,y){for(var E=y+"Capture",z=[];d!==null;){var H=d,ee=H.stateNode;if(H=H.tag,H!==5&&H!==26&&H!==27||ee===null||(H=Au(d,E),H!=null&&z.unshift(iu(d,H,ee)),H=Au(d,y),H!=null&&z.push(iu(d,H,ee))),d.tag===3)return z;d=d.return}return[]}function yf(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5&&d.tag!==27);return d||null}function ig(d,y,E,z,H){for(var ee=y._reactName,Re=[];E!==null&&E!==z;){var qe=E,wt=qe.alternate,Ht=qe.stateNode;if(qe=qe.tag,wt!==null&&wt===z)break;qe!==5&&qe!==26&&qe!==27||Ht===null||(wt=Ht,H?(Ht=Au(E,ee),Ht!=null&&Re.unshift(iu(E,Ht,wt))):H||(Ht=Au(E,ee),Ht!=null&&Re.push(iu(E,Ht,wt)))),E=E.return}Re.length!==0&&d.push({event:y,listeners:Re})}var ib=/\r\n?/g,sb=/\u0000|\uFFFD/g;function sg(d){return(typeof d=="string"?d:""+d).replace(ib,`
`).replace(sb,"")}function Nx(d,y){return y=sg(y),sg(d)===y}function xf(){}function Oa(d,y,E,z,H,ee){switch(E){case"children":typeof z=="string"?y==="body"||y==="textarea"&&z===""||eo(d,z):(typeof z=="number"||typeof z=="bigint")&&y!=="body"&&eo(d,""+z);break;case"className":hi(d,"class",z);break;case"tabIndex":hi(d,"tabindex",z);break;case"dir":case"role":case"viewBox":case"width":case"height":hi(d,E,z);break;case"style":Wf(d,z,ee);break;case"data":if(y!=="object"){hi(d,"data",z);break}case"src":case"href":if(z===""&&(y!=="a"||E!=="href")){d.removeAttribute(E);break}if(z==null||typeof z=="function"||typeof z=="symbol"||typeof z=="boolean"){d.removeAttribute(E);break}z=Mu(""+z),d.setAttribute(E,z);break;case"action":case"formAction":if(typeof z=="function"){d.setAttribute(E,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ee=="function"&&(E==="formAction"?(y!=="input"&&Oa(d,y,"name",H.name,H,null),Oa(d,y,"formEncType",H.formEncType,H,null),Oa(d,y,"formMethod",H.formMethod,H,null),Oa(d,y,"formTarget",H.formTarget,H,null)):(Oa(d,y,"encType",H.encType,H,null),Oa(d,y,"method",H.method,H,null),Oa(d,y,"target",H.target,H,null)));if(z==null||typeof z=="symbol"||typeof z=="boolean"){d.removeAttribute(E);break}z=Mu(""+z),d.setAttribute(E,z);break;case"onClick":z!=null&&(d.onclick=xf);break;case"onScroll":z!=null&&ga("scroll",d);break;case"onScrollEnd":z!=null&&ga("scrollend",d);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(c(61));if(E=z.__html,E!=null){if(H.children!=null)throw Error(c(60));d.innerHTML=E}}break;case"multiple":d.multiple=z&&typeof z!="function"&&typeof z!="symbol";break;case"muted":d.muted=z&&typeof z!="function"&&typeof z!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(z==null||typeof z=="function"||typeof z=="boolean"||typeof z=="symbol"){d.removeAttribute("xlink:href");break}E=Mu(""+z),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",E);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":z!=null&&typeof z!="function"&&typeof z!="symbol"?d.setAttribute(E,""+z):d.removeAttribute(E);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":z&&typeof z!="function"&&typeof z!="symbol"?d.setAttribute(E,""):d.removeAttribute(E);break;case"capture":case"download":z===!0?d.setAttribute(E,""):z!==!1&&z!=null&&typeof z!="function"&&typeof z!="symbol"?d.setAttribute(E,z):d.removeAttribute(E);break;case"cols":case"rows":case"size":case"span":z!=null&&typeof z!="function"&&typeof z!="symbol"&&!isNaN(z)&&1<=z?d.setAttribute(E,z):d.removeAttribute(E);break;case"rowSpan":case"start":z==null||typeof z=="function"||typeof z=="symbol"||isNaN(z)?d.removeAttribute(E):d.setAttribute(E,z);break;case"popover":ga("beforetoggle",d),ga("toggle",d),oi(d,"popover",z);break;case"xlinkActuate":As(d,"http://www.w3.org/1999/xlink","xlink:actuate",z);break;case"xlinkArcrole":As(d,"http://www.w3.org/1999/xlink","xlink:arcrole",z);break;case"xlinkRole":As(d,"http://www.w3.org/1999/xlink","xlink:role",z);break;case"xlinkShow":As(d,"http://www.w3.org/1999/xlink","xlink:show",z);break;case"xlinkTitle":As(d,"http://www.w3.org/1999/xlink","xlink:title",z);break;case"xlinkType":As(d,"http://www.w3.org/1999/xlink","xlink:type",z);break;case"xmlBase":As(d,"http://www.w3.org/XML/1998/namespace","xml:base",z);break;case"xmlLang":As(d,"http://www.w3.org/XML/1998/namespace","xml:lang",z);break;case"xmlSpace":As(d,"http://www.w3.org/XML/1998/namespace","xml:space",z);break;case"is":oi(d,"is",z);break;case"innerText":case"textContent":break;default:(!(2<E.length)||E[0]!=="o"&&E[0]!=="O"||E[1]!=="n"&&E[1]!=="N")&&(E=To.get(E)||E,oi(d,E,z))}}function og(d,y,E,z,H,ee){switch(E){case"style":Wf(d,z,ee);break;case"dangerouslySetInnerHTML":if(z!=null){if(typeof z!="object"||!("__html"in z))throw Error(c(61));if(E=z.__html,E!=null){if(H.children!=null)throw Error(c(60));d.innerHTML=E}}break;case"children":typeof z=="string"?eo(d,z):(typeof z=="number"||typeof z=="bigint")&&eo(d,""+z);break;case"onScroll":z!=null&&ga("scroll",d);break;case"onScrollEnd":z!=null&&ga("scrollend",d);break;case"onClick":z!=null&&(d.onclick=xf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yn.hasOwnProperty(E))e:{if(E[0]==="o"&&E[1]==="n"&&(H=E.endsWith("Capture"),y=E.slice(2,H?E.length-7:void 0),ee=d[tt]||null,ee=ee!=null?ee[E]:null,typeof ee=="function"&&d.removeEventListener(y,ee,H),typeof z=="function")){typeof ee!="function"&&ee!==null&&(E in d?d[E]=null:d.hasAttribute(E)&&d.removeAttribute(E)),d.addEventListener(y,z,H);break e}E in d?d[E]=z:z===!0?d.setAttribute(E,""):oi(d,E,z)}}}function hs(d,y,E){switch(y){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ga("error",d),ga("load",d);var z=!1,H=!1,ee;for(ee in E)if(E.hasOwnProperty(ee)){var Re=E[ee];if(Re!=null)switch(ee){case"src":z=!0;break;case"srcSet":H=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,y));default:Oa(d,y,ee,Re,E,null)}}H&&Oa(d,y,"srcSet",E.srcSet,E,null),z&&Oa(d,y,"src",E.src,E,null);return;case"input":ga("invalid",d);var qe=ee=Re=H=null,wt=null,Ht=null;for(z in E)if(E.hasOwnProperty(z)){var ir=E[z];if(ir!=null)switch(z){case"name":H=ir;break;case"type":Re=ir;break;case"checked":wt=ir;break;case"defaultChecked":Ht=ir;break;case"value":ee=ir;break;case"defaultValue":qe=ir;break;case"children":case"dangerouslySetInnerHTML":if(ir!=null)throw Error(c(137,y));break;default:Oa(d,y,z,ir,E,null)}}Js(d,ee,qe,wt,Ht,Re,H,!1),Du(d);return;case"select":ga("invalid",d),z=Re=ee=null;for(H in E)if(E.hasOwnProperty(H)&&(qe=E[H],qe!=null))switch(H){case"value":ee=qe;break;case"defaultValue":Re=qe;break;case"multiple":z=qe;default:Oa(d,y,H,qe,E,null)}y=ee,E=Re,d.multiple=!!z,y!=null?Os(d,!!z,y,!1):E!=null&&Os(d,!!z,E,!0);return;case"textarea":ga("invalid",d),ee=H=z=null;for(Re in E)if(E.hasOwnProperty(Re)&&(qe=E[Re],qe!=null))switch(Re){case"value":z=qe;break;case"defaultValue":H=qe;break;case"children":ee=qe;break;case"dangerouslySetInnerHTML":if(qe!=null)throw Error(c(91));break;default:Oa(d,y,Re,qe,E,null)}bd(d,z,H,ee),Du(d);return;case"option":for(wt in E)if(E.hasOwnProperty(wt)&&(z=E[wt],z!=null))switch(wt){case"selected":d.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Oa(d,y,wt,z,E,null)}return;case"dialog":ga("beforetoggle",d),ga("toggle",d),ga("cancel",d),ga("close",d);break;case"iframe":case"object":ga("load",d);break;case"video":case"audio":for(z=0;z<mf.length;z++)ga(mf[z],d);break;case"image":ga("error",d),ga("load",d);break;case"details":ga("toggle",d);break;case"embed":case"source":case"link":ga("error",d),ga("load",d);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ht in E)if(E.hasOwnProperty(Ht)&&(z=E[Ht],z!=null))switch(Ht){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,y));default:Oa(d,y,Ht,z,E,null)}return;default:if(Rc(y)){for(ir in E)E.hasOwnProperty(ir)&&(z=E[ir],z!==void 0&&og(d,y,ir,z,E,void 0));return}}for(qe in E)E.hasOwnProperty(qe)&&(z=E[qe],z!=null&&Oa(d,y,qe,z,E,null))}function ob(d,y,E,z){switch(y){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var H=null,ee=null,Re=null,qe=null,wt=null,Ht=null,ir=null;for(Xt in E){var br=E[Xt];if(E.hasOwnProperty(Xt)&&br!=null)switch(Xt){case"checked":break;case"value":break;case"defaultValue":wt=br;default:z.hasOwnProperty(Xt)||Oa(d,y,Xt,null,z,br)}}for(var Kt in z){var Xt=z[Kt];if(br=E[Kt],z.hasOwnProperty(Kt)&&(Xt!=null||br!=null))switch(Kt){case"type":ee=Xt;break;case"name":H=Xt;break;case"checked":Ht=Xt;break;case"defaultChecked":ir=Xt;break;case"value":Re=Xt;break;case"defaultValue":qe=Xt;break;case"children":case"dangerouslySetInnerHTML":if(Xt!=null)throw Error(c(137,y));break;default:Xt!==br&&Oa(d,y,Kt,Xt,z,br)}}Ys(d,Re,qe,wt,Ht,ir,ee,H);return;case"select":Xt=Re=qe=Kt=null;for(ee in E)if(wt=E[ee],E.hasOwnProperty(ee)&&wt!=null)switch(ee){case"value":break;case"multiple":Xt=wt;default:z.hasOwnProperty(ee)||Oa(d,y,ee,null,z,wt)}for(H in z)if(ee=z[H],wt=E[H],z.hasOwnProperty(H)&&(ee!=null||wt!=null))switch(H){case"value":Kt=ee;break;case"defaultValue":qe=ee;break;case"multiple":Re=ee;default:ee!==wt&&Oa(d,y,H,ee,z,wt)}y=qe,E=Re,z=Xt,Kt!=null?Os(d,!!E,Kt,!1):!!z!=!!E&&(y!=null?Os(d,!!E,y,!0):Os(d,!!E,E?[]:"",!1));return;case"textarea":Xt=Kt=null;for(qe in E)if(H=E[qe],E.hasOwnProperty(qe)&&H!=null&&!z.hasOwnProperty(qe))switch(qe){case"value":break;case"children":break;default:Oa(d,y,qe,null,z,H)}for(Re in z)if(H=z[Re],ee=E[Re],z.hasOwnProperty(Re)&&(H!=null||ee!=null))switch(Re){case"value":Kt=H;break;case"defaultValue":Xt=H;break;case"children":break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(c(91));break;default:H!==ee&&Oa(d,y,Re,H,z,ee)}Eh(d,Kt,Xt);return;case"option":for(var Nn in E)if(Kt=E[Nn],E.hasOwnProperty(Nn)&&Kt!=null&&!z.hasOwnProperty(Nn))switch(Nn){case"selected":d.selected=!1;break;default:Oa(d,y,Nn,null,z,Kt)}for(wt in z)if(Kt=z[wt],Xt=E[wt],z.hasOwnProperty(wt)&&Kt!==Xt&&(Kt!=null||Xt!=null))switch(wt){case"selected":d.selected=Kt&&typeof Kt!="function"&&typeof Kt!="symbol";break;default:Oa(d,y,wt,Kt,z,Xt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var An in E)Kt=E[An],E.hasOwnProperty(An)&&Kt!=null&&!z.hasOwnProperty(An)&&Oa(d,y,An,null,z,Kt);for(Ht in z)if(Kt=z[Ht],Xt=E[Ht],z.hasOwnProperty(Ht)&&Kt!==Xt&&(Kt!=null||Xt!=null))switch(Ht){case"children":case"dangerouslySetInnerHTML":if(Kt!=null)throw Error(c(137,y));break;default:Oa(d,y,Ht,Kt,z,Xt)}return;default:if(Rc(y)){for(var Ka in E)Kt=E[Ka],E.hasOwnProperty(Ka)&&Kt!==void 0&&!z.hasOwnProperty(Ka)&&og(d,y,Ka,void 0,z,Kt);for(ir in z)Kt=z[ir],Xt=E[ir],!z.hasOwnProperty(ir)||Kt===Xt||Kt===void 0&&Xt===void 0||og(d,y,ir,Kt,z,Xt);return}}for(var Bt in E)Kt=E[Bt],E.hasOwnProperty(Bt)&&Kt!=null&&!z.hasOwnProperty(Bt)&&Oa(d,y,Bt,null,z,Kt);for(br in z)Kt=z[br],Xt=E[br],!z.hasOwnProperty(br)||Kt===Xt||Kt==null&&Xt==null||Oa(d,y,br,Kt,z,Xt)}var jx=null,H0=null;function lg(d){return d.nodeType===9?d:d.ownerDocument}function Ox(d){switch(d){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fx(d,y){if(d===0)switch(y){case"svg":return 1;case"math":return 2;default:return 0}return d===1&&y==="foreignObject"?0:d}function cg(d,y){return d==="textarea"||d==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.children=="bigint"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var q0=null;function Vx(){var d=window.event;return d&&d.type==="popstate"?d===q0?!1:(q0=d,!0):(q0=null,!1)}var lb=typeof setTimeout=="function"?setTimeout:void 0,P2=typeof clearTimeout=="function"?clearTimeout:void 0,cb=typeof Promise=="function"?Promise:void 0,M2=typeof queueMicrotask=="function"?queueMicrotask:typeof cb<"u"?function(d){return cb.resolve(null).then(d).catch(ub)}:lb;function ub(d){setTimeout(function(){throw d})}function fo(d){return d==="head"}function Gp(d,y){var E=y,z=0,H=0;do{var ee=E.nextSibling;if(d.removeChild(E),ee&&ee.nodeType===8)if(E=ee.data,E==="/$"){if(0<z&&8>z){E=z;var Re=d.ownerDocument;if(E&1&&Hp(Re.documentElement),E&2&&Hp(Re.body),E&4)for(E=Re.head,Hp(E),Re=E.firstChild;Re;){var qe=Re.nextSibling,wt=Re.nodeName;Re[It]||wt==="SCRIPT"||wt==="STYLE"||wt==="LINK"&&Re.rel.toLowerCase()==="stylesheet"||E.removeChild(Re),Re=qe}}if(H===0){d.removeChild(ee),Sg(y);return}H--}else E==="$"||E==="$?"||E==="$!"?H++:z=E.charCodeAt(0)-48;else z=0;E=ee}while(E);Sg(y)}function vf(d){var y=d.firstChild;for(y&&y.nodeType===10&&(y=y.nextSibling);y;){var E=y;switch(y=y.nextSibling,E.nodeName){case"HTML":case"HEAD":case"BODY":vf(E),Jt(E);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(E.rel.toLowerCase()==="stylesheet")continue}d.removeChild(E)}}function W0(d,y,E,z){for(;d.nodeType===1;){var H=E;if(d.nodeName.toLowerCase()!==y.toLowerCase()){if(!z&&(d.nodeName!=="INPUT"||d.type!=="hidden"))break}else if(z){if(!d[It])switch(y){case"meta":if(!d.hasAttribute("itemprop"))break;return d;case"link":if(ee=d.getAttribute("rel"),ee==="stylesheet"&&d.hasAttribute("data-precedence"))break;if(ee!==H.rel||d.getAttribute("href")!==(H.href==null||H.href===""?null:H.href)||d.getAttribute("crossorigin")!==(H.crossOrigin==null?null:H.crossOrigin)||d.getAttribute("title")!==(H.title==null?null:H.title))break;return d;case"style":if(d.hasAttribute("data-precedence"))break;return d;case"script":if(ee=d.getAttribute("src"),(ee!==(H.src==null?null:H.src)||d.getAttribute("type")!==(H.type==null?null:H.type)||d.getAttribute("crossorigin")!==(H.crossOrigin==null?null:H.crossOrigin))&&ee&&d.hasAttribute("async")&&!d.hasAttribute("itemprop"))break;return d;default:return d}}else if(y==="input"&&d.type==="hidden"){var ee=H.name==null?null:""+H.name;if(H.type==="hidden"&&d.getAttribute("name")===ee)return d}else return d;if(d=Rl(d.nextSibling),d===null)break}return null}function ug(d,y,E){if(y==="")return null;for(;d.nodeType!==3;)if((d.nodeType!==1||d.nodeName!=="INPUT"||d.type!=="hidden")&&!E||(d=Rl(d.nextSibling),d===null))return null;return d}function K0(d){return d.data==="$!"||d.data==="$?"&&d.ownerDocument.readyState==="complete"}function db(d,y){var E=d.ownerDocument;if(d.data!=="$?"||E.readyState==="complete")y();else{var z=function(){y(),E.removeEventListener("DOMContentLoaded",z)};E.addEventListener("DOMContentLoaded",z),d._reactRetry=z}}function Rl(d){for(;d!=null;d=d.nextSibling){var y=d.nodeType;if(y===1||y===3)break;if(y===8){if(y=d.data,y==="$"||y==="$!"||y==="$?"||y==="F!"||y==="F")break;if(y==="/$")return null}}return d}var Z0=null;function hb(d){d=d.previousSibling;for(var y=0;d;){if(d.nodeType===8){var E=d.data;if(E==="$"||E==="$!"||E==="$?"){if(y===0)return d;y--}else E==="/$"&&y++}d=d.previousSibling}return null}function fb(d,y,E){switch(y=lg(E),d){case"html":if(d=y.documentElement,!d)throw Error(c(452));return d;case"head":if(d=y.head,!d)throw Error(c(453));return d;case"body":if(d=y.body,!d)throw Error(c(454));return d;default:throw Error(c(451))}}function Hp(d){for(var y=d.attributes;y.length;)d.removeAttributeNode(y[0]);Jt(d)}var po=new Map,Ux=new Set;function X0(d){return typeof d.getRootNode=="function"?d.getRootNode():d.nodeType===9?d:d.ownerDocument}var ou=Ie.d;Ie.d={f:Gx,r:pb,D:mb,C:gb,L:A2,m:yb,X:dg,S:xb,M:vb};function Gx(){var d=ou.f(),y=bc();return d||y}function pb(d){var y=cr(d);y!==null&&y.tag===5&&y.type==="form"?ef(y):ou.r(d)}var _f=typeof document>"u"?null:document;function Hx(d,y,E){var z=_f;if(z&&typeof y=="string"&&y){var H=ti(y);H='link[rel="'+d+'"][href="'+H+'"]',typeof E=="string"&&(H+='[crossorigin="'+E+'"]'),Ux.has(H)||(Ux.add(H),d={rel:d,crossOrigin:E,href:y},z.querySelector(H)===null&&(y=z.createElement("link"),hs(y,"link",d),Lr(y),z.head.appendChild(y)))}}function mb(d){ou.D(d),Hx("dns-prefetch",d,null)}function gb(d,y){ou.C(d,y),Hx("preconnect",d,y)}function A2(d,y,E){ou.L(d,y,E);var z=_f;if(z&&d&&y){var H='link[rel="preload"][as="'+ti(y)+'"]';y==="image"&&E&&E.imageSrcSet?(H+='[imagesrcset="'+ti(E.imageSrcSet)+'"]',typeof E.imageSizes=="string"&&(H+='[imagesizes="'+ti(E.imageSizes)+'"]')):H+='[href="'+ti(d)+'"]';var ee=H;switch(y){case"style":ee=qp(d);break;case"script":ee=Wp(d)}po.has(ee)||(d=N({rel:"preload",href:y==="image"&&E&&E.imageSrcSet?void 0:d,as:y},E),po.set(ee,d),z.querySelector(H)!==null||y==="style"&&z.querySelector(hg(ee))||y==="script"&&z.querySelector(fg(ee))||(y=z.createElement("link"),hs(y,"link",d),Lr(y),z.head.appendChild(y)))}}function yb(d,y){ou.m(d,y);var E=_f;if(E&&d){var z=y&&typeof y.as=="string"?y.as:"script",H='link[rel="modulepreload"][as="'+ti(z)+'"][href="'+ti(d)+'"]',ee=H;switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ee=Wp(d)}if(!po.has(ee)&&(d=N({rel:"modulepreload",href:d},y),po.set(ee,d),E.querySelector(H)===null)){switch(z){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(E.querySelector(fg(ee)))return}z=E.createElement("link"),hs(z,"link",d),Lr(z),E.head.appendChild(z)}}}function xb(d,y,E){ou.S(d,y,E);var z=_f;if(z&&d){var H=Jr(z).hoistableStyles,ee=qp(d);y=y||"default";var Re=H.get(ee);if(!Re){var qe={loading:0,preload:null};if(Re=z.querySelector(hg(ee)))qe.loading=5;else{d=N({rel:"stylesheet",href:d,"data-precedence":y},E),(E=po.get(ee))&&Wx(d,E);var wt=Re=z.createElement("link");Lr(wt),hs(wt,"link",d),wt._p=new Promise(function(Ht,ir){wt.onload=Ht,wt.onerror=ir}),wt.addEventListener("load",function(){qe.loading|=1}),wt.addEventListener("error",function(){qe.loading|=2}),qe.loading|=4,pg(Re,y,z)}Re={type:"stylesheet",instance:Re,count:1,state:qe},H.set(ee,Re)}}}function dg(d,y){ou.X(d,y);var E=_f;if(E&&d){var z=Jr(E).hoistableScripts,H=Wp(d),ee=z.get(H);ee||(ee=E.querySelector(fg(H)),ee||(d=N({src:d,async:!0},y),(y=po.get(H))&&Kx(d,y),ee=E.createElement("script"),Lr(ee),hs(ee,"link",d),E.head.appendChild(ee)),ee={type:"script",instance:ee,count:1,state:null},z.set(H,ee))}}function vb(d,y){ou.M(d,y);var E=_f;if(E&&d){var z=Jr(E).hoistableScripts,H=Wp(d),ee=z.get(H);ee||(ee=E.querySelector(fg(H)),ee||(d=N({src:d,async:!0,type:"module"},y),(y=po.get(H))&&Kx(d,y),ee=E.createElement("script"),Lr(ee),hs(ee,"link",d),E.head.appendChild(ee)),ee={type:"script",instance:ee,count:1,state:null},z.set(H,ee))}}function qx(d,y,E,z){var H=(H=Et.current)?X0(H):null;if(!H)throw Error(c(446));switch(d){case"meta":case"title":return null;case"style":return typeof E.precedence=="string"&&typeof E.href=="string"?(y=qp(E.href),E=Jr(H).hoistableStyles,z=E.get(y),z||(z={type:"style",instance:null,count:0,state:null},E.set(y,z)),z):{type:"void",instance:null,count:0,state:null};case"link":if(E.rel==="stylesheet"&&typeof E.href=="string"&&typeof E.precedence=="string"){d=qp(E.href);var ee=Jr(H).hoistableStyles,Re=ee.get(d);if(Re||(H=H.ownerDocument||H,Re={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ee.set(d,Re),(ee=H.querySelector(hg(d)))&&!ee._p&&(Re.instance=ee,Re.state.loading=5),po.has(d)||(E={rel:"preload",as:"style",href:E.href,crossOrigin:E.crossOrigin,integrity:E.integrity,media:E.media,hrefLang:E.hrefLang,referrerPolicy:E.referrerPolicy},po.set(d,E),ee||k2(H,d,E,Re.state))),y&&z===null)throw Error(c(528,""));return Re}if(y&&z!==null)throw Error(c(529,""));return null;case"script":return y=E.async,E=E.src,typeof E=="string"&&y&&typeof y!="function"&&typeof y!="symbol"?(y=Wp(E),E=Jr(H).hoistableScripts,z=E.get(y),z||(z={type:"script",instance:null,count:0,state:null},E.set(y,z)),z):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,d))}}function qp(d){return'href="'+ti(d)+'"'}function hg(d){return'link[rel="stylesheet"]['+d+"]"}function _b(d){return N({},d,{"data-precedence":d.precedence,precedence:null})}function k2(d,y,E,z){d.querySelector('link[rel="preload"][as="style"]['+y+"]")?z.loading=1:(y=d.createElement("link"),z.preload=y,y.addEventListener("load",function(){return z.loading|=1}),y.addEventListener("error",function(){return z.loading|=2}),hs(y,"link",E),Lr(y),d.head.appendChild(y))}function Wp(d){return'[src="'+ti(d)+'"]'}function fg(d){return"script[async]"+d}function bb(d,y,E){if(y.count++,y.instance===null)switch(y.type){case"style":var z=d.querySelector('style[data-href~="'+ti(E.href)+'"]');if(z)return y.instance=z,Lr(z),z;var H=N({},E,{"data-href":E.href,"data-precedence":E.precedence,href:null,precedence:null});return z=(d.ownerDocument||d).createElement("style"),Lr(z),hs(z,"style",H),pg(z,E.precedence,d),y.instance=z;case"stylesheet":H=qp(E.href);var ee=d.querySelector(hg(H));if(ee)return y.state.loading|=4,y.instance=ee,Lr(ee),ee;z=_b(E),(H=po.get(H))&&Wx(z,H),ee=(d.ownerDocument||d).createElement("link"),Lr(ee);var Re=ee;return Re._p=new Promise(function(qe,wt){Re.onload=qe,Re.onerror=wt}),hs(ee,"link",z),y.state.loading|=4,pg(ee,E.precedence,d),y.instance=ee;case"script":return ee=Wp(E.src),(H=d.querySelector(fg(ee)))?(y.instance=H,Lr(H),H):(z=E,(H=po.get(ee))&&(z=N({},E),Kx(z,H)),d=d.ownerDocument||d,H=d.createElement("script"),Lr(H),hs(H,"link",z),d.head.appendChild(H),y.instance=H);case"void":return null;default:throw Error(c(443,y.type))}else y.type==="stylesheet"&&(y.state.loading&4)===0&&(z=y.instance,y.state.loading|=4,pg(z,E.precedence,d));return y.instance}function pg(d,y,E){for(var z=E.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),H=z.length?z[z.length-1]:null,ee=H,Re=0;Re<z.length;Re++){var qe=z[Re];if(qe.dataset.precedence===y)ee=qe;else if(ee!==H)break}ee?ee.parentNode.insertBefore(d,ee.nextSibling):(y=E.nodeType===9?E.head:E,y.insertBefore(d,y.firstChild))}function Wx(d,y){d.crossOrigin==null&&(d.crossOrigin=y.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=y.referrerPolicy),d.title==null&&(d.title=y.title)}function Kx(d,y){d.crossOrigin==null&&(d.crossOrigin=y.crossOrigin),d.referrerPolicy==null&&(d.referrerPolicy=y.referrerPolicy),d.integrity==null&&(d.integrity=y.integrity)}var Y0=null;function J0(d,y,E){if(Y0===null){var z=new Map,H=Y0=new Map;H.set(E,z)}else H=Y0,z=H.get(E),z||(z=new Map,H.set(E,z));if(z.has(d))return z;for(z.set(d,null),E=E.getElementsByTagName(d),H=0;H<E.length;H++){var ee=E[H];if(!(ee[It]||ee[Je]||d==="link"&&ee.getAttribute("rel")==="stylesheet")&&ee.namespaceURI!=="http://www.w3.org/2000/svg"){var Re=ee.getAttribute(y)||"";Re=d+Re;var qe=z.get(Re);qe?qe.push(ee):z.set(Re,[ee])}}return z}function Q0(d,y,E){d=d.ownerDocument||d,d.head.insertBefore(E,y==="title"?d.querySelector("head > title"):null)}function wb(d,y,E){if(E===1||y.itemProp!=null)return!1;switch(d){case"meta":case"title":return!0;case"style":if(typeof y.precedence!="string"||typeof y.href!="string"||y.href==="")break;return!0;case"link":if(typeof y.rel!="string"||typeof y.href!="string"||y.href===""||y.onLoad||y.onError)break;switch(y.rel){case"stylesheet":return d=y.disabled,typeof y.precedence=="string"&&d==null;default:return!0}case"script":if(y.async&&typeof y.async!="function"&&typeof y.async!="symbol"&&!y.onLoad&&!y.onError&&y.src&&typeof y.src=="string")return!0}return!1}function Zx(d){return!(d.type==="stylesheet"&&(d.state.loading&3)===0)}var Kp=null;function Sb(){}function Tb(d,y,E){if(Kp===null)throw Error(c(475));var z=Kp;if(y.type==="stylesheet"&&(typeof E.media!="string"||matchMedia(E.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var H=qp(E.href),ee=d.querySelector(hg(H));if(ee){d=ee._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(z.count++,z=mg.bind(z),d.then(z,z)),y.state.loading|=4,y.instance=ee,Lr(ee);return}ee=d.ownerDocument||d,E=_b(E),(H=po.get(H))&&Wx(E,H),ee=ee.createElement("link"),Lr(ee);var Re=ee;Re._p=new Promise(function(qe,wt){Re.onload=qe,Re.onerror=wt}),hs(ee,"link",E),y.instance=ee}z.stylesheets===null&&(z.stylesheets=new Map),z.stylesheets.set(y,d),(d=y.state.preload)&&(y.state.loading&3)===0&&(z.count++,y=mg.bind(z),d.addEventListener("load",y),d.addEventListener("error",y))}}function Eb(){if(Kp===null)throw Error(c(475));var d=Kp;return d.stylesheets&&d.count===0&&yg(d,d.stylesheets),0<d.count?function(y){var E=setTimeout(function(){if(d.stylesheets&&yg(d,d.stylesheets),d.unsuspend){var z=d.unsuspend;d.unsuspend=null,z()}},6e4);return d.unsuspend=y,function(){d.unsuspend=null,clearTimeout(E)}}:null}function mg(){if(this.count--,this.count===0){if(this.stylesheets)yg(this,this.stylesheets);else if(this.unsuspend){var d=this.unsuspend;this.unsuspend=null,d()}}}var gg=null;function yg(d,y){d.stylesheets=null,d.unsuspend!==null&&(d.count++,gg=new Map,y.forEach(Cb,d),gg=null,mg.call(d))}function Cb(d,y){if(!(y.state.loading&4)){var E=gg.get(d);if(E)var z=E.get(null);else{E=new Map,gg.set(d,E);for(var H=d.querySelectorAll("link[data-precedence],style[data-precedence]"),ee=0;ee<H.length;ee++){var Re=H[ee];(Re.nodeName==="LINK"||Re.getAttribute("media")!=="not all")&&(E.set(Re.dataset.precedence,Re),z=Re)}z&&E.set(null,z)}H=y.instance,Re=H.getAttribute("data-precedence"),ee=E.get(Re)||z,ee===z&&E.set(null,H),E.set(Re,H),this.count++,z=mg.bind(this),H.addEventListener("load",z),H.addEventListener("error",z),ee?ee.parentNode.insertBefore(H,ee.nextSibling):(d=d.nodeType===9?d.head:d,d.insertBefore(H,d.firstChild)),y.state.loading|=4}}var xg={$$typeof:be,Provider:null,Consumer:null,_currentValue:Me,_currentValue2:Me,_threadCount:0};function vg(d,y,E,z,H,ee,Re,qe){this.tag=1,this.containerInfo=d,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cn(0),this.hiddenUpdates=cn(null),this.identifierPrefix=z,this.onUncaughtError=H,this.onCaughtError=ee,this.onRecoverableError=Re,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=qe,this.incompleteTransitions=new Map}function Xx(d,y,E,z,H,ee,Re,qe,wt,Ht,ir,br){return d=new vg(d,y,E,Re,qe,wt,Ht,br),y=1,ee===!0&&(y|=24),ee=Un(3,null,null,y),d.current=ee,ee.stateNode=d,y=qu(),y.refCount++,d.pooledCache=y,y.refCount++,ee.memoizedState={element:z,isDehydrated:E,cache:y},mp(ee),d}function Db(d){return d?(d=Mo,d):Mo}function Pb(d,y,E,z,H,ee){H=Db(H),z.context===null?z.context=H:z.pendingContext=H,z=rl(y),z.payload={element:E},ee=ee===void 0?null:ee,ee!==null&&(z.callback=ee),E=El(d,z,y),E!==null&&(jo(E,d,y),Kc(E,d,y))}function Mb(d,y){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var E=d.retryLane;d.retryLane=E!==0&&E<y?E:y}}function Yx(d,y){Mb(d,y),(d=d.alternate)&&Mb(d,y)}function Ab(d){if(d.tag===13){var y=Ou(d,67108864);y!==null&&jo(y,d,67108864),Yx(d,67108864)}}var ey=!0;function R2(d,y,E,z){var H=Te.T;Te.T=null;var ee=Ie.p;try{Ie.p=2,Jx(d,y,E,z)}finally{Ie.p=ee,Te.T=H}}function kb(d,y,E,z){var H=Te.T;Te.T=null;var ee=Ie.p;try{Ie.p=8,Jx(d,y,E,z)}finally{Ie.p=ee,Te.T=H}}function Jx(d,y,E,z){if(ey){var H=Vi(z);if(H===null)G0(d,y,z,Oo,E),ry(d,z);else if(Qx(H,d,y,E,z))z.stopPropagation();else if(ry(d,z),y&4&&-1<Rb.indexOf(d)){for(;H!==null;){var ee=cr(H);if(ee!==null)switch(ee.tag){case 3:if(ee=ee.stateNode,ee.current.memoizedState.isDehydrated){var Re=Da(ee.pendingLanes);if(Re!==0){var qe=ee;for(qe.pendingLanes|=2,qe.entangledLanes|=2;Re;){var wt=1<<31-an(Re);qe.entanglements[1]|=wt,Re&=~wt}wc(ee),(Zr&6)===0&&(us=Er()+500,Up(0))}}break;case 13:qe=Ou(ee,2),qe!==null&&jo(qe,ee,2),bc(),Yx(ee,2)}if(ee=Vi(z),ee===null&&G0(d,y,z,Oo,E),ee===H)break;H=ee}H!==null&&z.stopPropagation()}else G0(d,y,z,null,E)}}function Vi(d){return d=Lm(d),Zp(d)}var Oo=null;function Zp(d){if(Oo=null,d=Gt(d),d!==null){var y=_(d);if(y===null)d=null;else{var E=y.tag;if(E===13){if(d=w(y),d!==null)return d;d=null}else if(E===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;d=null}else y!==d&&(d=null)}}return Oo=d,null}function ty(d){switch(d){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mr()){case Pr:return 2;case Fr:return 8;case Bn:case Xr:return 32;case On:return 268435456;default:return 32}default:return 32}}var Xp=!1,cl=null,sh=null,oh=null,cd=new Map,_g=new Map,lh=[],Rb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ry(d,y){switch(d){case"focusin":case"focusout":cl=null;break;case"dragenter":case"dragleave":sh=null;break;case"mouseover":case"mouseout":oh=null;break;case"pointerover":case"pointerout":cd.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":_g.delete(y.pointerId)}}function Yp(d,y,E,z,H,ee){return d===null||d.nativeEvent!==ee?(d={blockedOn:y,domEventName:E,eventSystemFlags:z,nativeEvent:ee,targetContainers:[H]},y!==null&&(y=cr(y),y!==null&&Ab(y)),d):(d.eventSystemFlags|=z,y=d.targetContainers,H!==null&&y.indexOf(H)===-1&&y.push(H),d)}function Qx(d,y,E,z,H){switch(y){case"focusin":return cl=Yp(cl,d,y,E,z,H),!0;case"dragenter":return sh=Yp(sh,d,y,E,z,H),!0;case"mouseover":return oh=Yp(oh,d,y,E,z,H),!0;case"pointerover":var ee=H.pointerId;return cd.set(ee,Yp(cd.get(ee)||null,d,y,E,z,H)),!0;case"gotpointercapture":return ee=H.pointerId,_g.set(ee,Yp(_g.get(ee)||null,d,y,E,z,H)),!0}return!1}function Ib(d){var y=Gt(d.target);if(y!==null){var E=_(y);if(E!==null){if(y=E.tag,y===13){if(y=w(E),y!==null){d.blockedOn=y,Ae(d.priority,function(){if(E.tag===13){var z=No();z=yn(z);var H=Ou(E,z);H!==null&&jo(H,E,z),Yx(E,z)}});return}}else if(y===3&&E.stateNode.current.memoizedState.isDehydrated){d.blockedOn=E.tag===3?E.stateNode.containerInfo:null;return}}}d.blockedOn=null}function bg(d){if(d.blockedOn!==null)return!1;for(var y=d.targetContainers;0<y.length;){var E=Vi(d.nativeEvent);if(E===null){E=d.nativeEvent;var z=new E.constructor(E.type,E);In=z,E.target.dispatchEvent(z),In=null}else return y=cr(E),y!==null&&Ab(y),d.blockedOn=E,!1;y.shift()}return!0}function wg(d,y,E){bg(d)&&E.delete(y)}function ev(){Xp=!1,cl!==null&&bg(cl)&&(cl=null),sh!==null&&bg(sh)&&(sh=null),oh!==null&&bg(oh)&&(oh=null),cd.forEach(wg),_g.forEach(wg)}function ny(d,y){d.blockedOn===y&&(d.blockedOn=null,Xp||(Xp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ev)))}var ay=null;function zb(d){ay!==d&&(ay=d,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ay===d&&(ay=null);for(var y=0;y<d.length;y+=3){var E=d[y],z=d[y+1],H=d[y+2];if(typeof z!="function"){if(Zp(z||E)===null)continue;break}var ee=cr(E);ee!==null&&(d.splice(y,3),y-=3,mc(ee,{pending:!0,data:H,method:E.method,action:z},z,H))}}))}function Sg(d){function y(wt){return ny(wt,d)}cl!==null&&ny(cl,d),sh!==null&&ny(sh,d),oh!==null&&ny(oh,d),cd.forEach(y),_g.forEach(y);for(var E=0;E<lh.length;E++){var z=lh[E];z.blockedOn===d&&(z.blockedOn=null)}for(;0<lh.length&&(E=lh[0],E.blockedOn===null);)Ib(E),E.blockedOn===null&&lh.shift();if(E=(d.ownerDocument||d).$$reactFormReplay,E!=null)for(z=0;z<E.length;z+=3){var H=E[z],ee=E[z+1],Re=H[tt]||null;if(typeof ee=="function")Re||zb(E);else if(Re){var qe=null;if(ee&&ee.hasAttribute("formAction")){if(H=ee,Re=ee[tt]||null)qe=Re.formAction;else if(Zp(H)!==null)continue}else qe=Re.action;typeof qe=="function"?E[z+1]=qe:(E.splice(z,3),z-=3),zb(E)}}}function mo(d){this._internalRoot=d}ch.prototype.render=mo.prototype.render=function(d){var y=this._internalRoot;if(y===null)throw Error(c(409));var E=y.current,z=No();Pb(E,z,d,y,null,null)},ch.prototype.unmount=mo.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var y=d.containerInfo;Pb(d.current,2,null,d,null,null),bc(),y[ut]=null}};function ch(d){this._internalRoot=d}ch.prototype.unstable_scheduleHydration=function(d){if(d){var y=ye();d={blockedOn:null,target:d,priority:y};for(var E=0;E<lh.length&&y!==0&&y<lh[E].priority;E++);lh.splice(E,0,d),E===0&&Ib(d)}};var bf=t.version;if(bf!=="19.1.0")throw Error(c(527,bf,"19.1.0"));Ie.findDOMNode=function(d){var y=d._reactInternals;if(y===void 0)throw typeof d.render=="function"?Error(c(188)):(d=Object.keys(d).join(","),Error(c(268,d)));return d=A(y),d=d!==null?B(d):null,d=d===null?null:d.stateNode,d};var tv={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Te,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wf.isDisabled&&wf.supportsFiber)try{kr=wf.inject(tv),Dr=wf}catch{}}return bv.createRoot=function(d,y){if(!h(d))throw Error(c(299));var E=!1,z="",H=Lp,ee=sf,Re=sd,qe=null;return y!=null&&(y.unstable_strictMode===!0&&(E=!0),y.identifierPrefix!==void 0&&(z=y.identifierPrefix),y.onUncaughtError!==void 0&&(H=y.onUncaughtError),y.onCaughtError!==void 0&&(ee=y.onCaughtError),y.onRecoverableError!==void 0&&(Re=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(qe=y.unstable_transitionCallbacks)),y=Xx(d,1,!1,null,null,E,z,H,ee,Re,qe,null),d[ut]=y.current,U0(d),new mo(y)},bv.hydrateRoot=function(d,y,E){if(!h(d))throw Error(c(299));var z=!1,H="",ee=Lp,Re=sf,qe=sd,wt=null,Ht=null;return E!=null&&(E.unstable_strictMode===!0&&(z=!0),E.identifierPrefix!==void 0&&(H=E.identifierPrefix),E.onUncaughtError!==void 0&&(ee=E.onUncaughtError),E.onCaughtError!==void 0&&(Re=E.onCaughtError),E.onRecoverableError!==void 0&&(qe=E.onRecoverableError),E.unstable_transitionCallbacks!==void 0&&(wt=E.unstable_transitionCallbacks),E.formState!==void 0&&(Ht=E.formState)),y=Xx(d,1,!0,y,E??null,z,H,ee,Re,qe,wt,Ht),y.context=Db(null),E=y.current,z=No(),z=yn(z),H=rl(z),H.callback=null,El(E,H,z),E=z,y.current.lanes=E,ya(y,E),wc(y),d[ut]=y.current,U0(d),new ch(y)},bv.version="19.1.0",bv}var WC;function V9(){if(WC)return S3.exports;WC=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),S3.exports=F9(),S3.exports}var U9=V9();const G9=cx(U9);var V=s0();const rn=cx(V),G4=z9({__proto__:null,default:rn},[V]);var Iw=LA();const $A=cx(Iw);/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function r_(){return r_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])}return e},r_.apply(this,arguments)}var pm;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(pm||(pm={}));const KC="popstate";function H9(e){e===void 0&&(e={});function t(c,h){let{pathname:_,search:w,hash:a}=c.location;return H4("",{pathname:_,search:w,hash:a},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function i(c,h){return typeof h=="string"?h:Q1(h)}return W9(t,i,null,e)}function ys(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function BA(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function q9(){return Math.random().toString(36).substr(2,8)}function ZC(e,t){return{usr:e.state,key:e.key,idx:t}}function H4(e,t,i,c){return i===void 0&&(i=null),r_({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ux(t):t,{state:i,key:t&&t.key||c||q9()})}function Q1(e){let{pathname:t="/",search:i="",hash:c=""}=e;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),c&&c!=="#"&&(t+=c.charAt(0)==="#"?c:"#"+c),t}function ux(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let c=e.indexOf("?");c>=0&&(t.search=e.substr(c),e=e.substr(0,c)),e&&(t.pathname=e)}return t}function W9(e,t,i,c){c===void 0&&(c={});let{window:h=document.defaultView,v5Compat:_=!1}=c,w=h.history,a=pm.Pop,A=null,B=N();B==null&&(B=0,w.replaceState(r_({},w.state,{idx:B}),""));function N(){return(w.state||{idx:null}).idx}function F(){a=pm.Pop;let oe=N(),de=oe==null?null:oe-B;B=oe,A&&A({action:a,location:Y.location,delta:de})}function G(oe,de){a=pm.Push;let me=H4(Y.location,oe,de);B=N()+1;let be=ZC(me,B),pe=Y.createHref(me);try{w.pushState(be,"",pe)}catch(Se){if(Se instanceof DOMException&&Se.name==="DataCloneError")throw Se;h.location.assign(pe)}_&&A&&A({action:a,location:Y.location,delta:1})}function Q(oe,de){a=pm.Replace;let me=H4(Y.location,oe,de);B=N();let be=ZC(me,B),pe=Y.createHref(me);w.replaceState(be,"",pe),_&&A&&A({action:a,location:Y.location,delta:0})}function te(oe){let de=h.location.origin!=="null"?h.location.origin:h.location.href,me=typeof oe=="string"?oe:Q1(oe);return me=me.replace(/ $/,"%20"),ys(de,"No window.location.(origin|href) available to create URL for href: "+me),new URL(me,de)}let Y={get action(){return a},get location(){return e(h,w)},listen(oe){if(A)throw new Error("A history only accepts one active listener");return h.addEventListener(KC,F),A=oe,()=>{h.removeEventListener(KC,F),A=null}},createHref(oe){return t(h,oe)},createURL:te,encodeLocation(oe){let de=te(oe);return{pathname:de.pathname,search:de.search,hash:de.hash}},push:G,replace:Q,go(oe){return w.go(oe)}};return Y}var XC;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(XC||(XC={}));function K9(e,t,i){return i===void 0&&(i="/"),Z9(e,t,i)}function Z9(e,t,i,c){let h=typeof t=="string"?ux(t):t,_=s5(h.pathname||"/",i);if(_==null)return null;let w=NA(e);X9(w);let a=null;for(let A=0;a==null&&A<w.length;++A){let B=lF(_);a=iF(w[A],B)}return a}function NA(e,t,i,c){t===void 0&&(t=[]),i===void 0&&(i=[]),c===void 0&&(c="");let h=(_,w,a)=>{let A={relativePath:a===void 0?_.path||"":a,caseSensitive:_.caseSensitive===!0,childrenIndex:w,route:_};A.relativePath.startsWith("/")&&(ys(A.relativePath.startsWith(c),'Absolute route path "'+A.relativePath+'" nested under path '+('"'+c+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),A.relativePath=A.relativePath.slice(c.length));let B=xm([c,A.relativePath]),N=i.concat(A);_.children&&_.children.length>0&&(ys(_.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+B+'".')),NA(_.children,t,N,B)),!(_.path==null&&!_.index)&&t.push({path:B,score:nF(B,_.index),routesMeta:N})};return e.forEach((_,w)=>{var a;if(_.path===""||!((a=_.path)!=null&&a.includes("?")))h(_,w);else for(let A of jA(_.path))h(_,w,A)}),t}function jA(e){let t=e.split("/");if(t.length===0)return[];let[i,...c]=t,h=i.endsWith("?"),_=i.replace(/\?$/,"");if(c.length===0)return h?[_,""]:[_];let w=jA(c.join("/")),a=[];return a.push(...w.map(A=>A===""?_:[_,A].join("/"))),h&&a.push(...w),a.map(A=>e.startsWith("/")&&A===""?"/":A)}function X9(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:aF(t.routesMeta.map(c=>c.childrenIndex),i.routesMeta.map(c=>c.childrenIndex)))}const Y9=/^:[\w-]+$/,J9=3,Q9=2,eF=1,tF=10,rF=-2,YC=e=>e==="*";function nF(e,t){let i=e.split("/"),c=i.length;return i.some(YC)&&(c+=rF),t&&(c+=Q9),i.filter(h=>!YC(h)).reduce((h,_)=>h+(Y9.test(_)?J9:_===""?eF:tF),c)}function aF(e,t){return e.length===t.length&&e.slice(0,-1).every((c,h)=>c===t[h])?e[e.length-1]-t[t.length-1]:0}function iF(e,t,i){let{routesMeta:c}=e,h={},_="/",w=[];for(let a=0;a<c.length;++a){let A=c[a],B=a===c.length-1,N=_==="/"?t:t.slice(_.length)||"/",F=sF({path:A.relativePath,caseSensitive:A.caseSensitive,end:B},N),G=A.route;if(!F)return null;Object.assign(h,F.params),w.push({params:h,pathname:xm([_,F.pathname]),pathnameBase:hF(xm([_,F.pathnameBase])),route:G}),F.pathnameBase!=="/"&&(_=xm([_,F.pathnameBase]))}return w}function sF(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,c]=oF(e.path,e.caseSensitive,e.end),h=t.match(i);if(!h)return null;let _=h[0],w=_.replace(/(.)\/+$/,"$1"),a=h.slice(1);return{params:c.reduce((B,N,F)=>{let{paramName:G,isOptional:Q}=N;if(G==="*"){let Y=a[F]||"";w=_.slice(0,_.length-Y.length).replace(/(.)\/+$/,"$1")}const te=a[F];return Q&&!te?B[G]=void 0:B[G]=(te||"").replace(/%2F/g,"/"),B},{}),pathname:_,pathnameBase:w,pattern:e}}function oF(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),BA(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let c=[],h="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,a,A)=>(c.push({paramName:a,isOptional:A!=null}),A?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(c.push({paramName:"*"}),h+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?h+="\\/*$":e!==""&&e!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,t?void 0:"i"),c]}function lF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return BA(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function s5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,c=e.charAt(i);return c&&c!=="/"?null:e.slice(i)||"/"}function cF(e,t){t===void 0&&(t="/");let{pathname:i,search:c="",hash:h=""}=typeof e=="string"?ux(e):e;return{pathname:i?i.startsWith("/")?i:uF(i,t):t,search:fF(c),hash:pF(h)}}function uF(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(h=>{h===".."?i.length>1&&i.pop():h!=="."&&i.push(h)}),i.length>1?i.join("/"):"/"}function P3(e,t,i,c){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(c)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dF(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function o5(e,t){let i=dF(e);return t?i.map((c,h)=>h===i.length-1?c.pathname:c.pathnameBase):i.map(c=>c.pathnameBase)}function l5(e,t,i,c){c===void 0&&(c=!1);let h;typeof e=="string"?h=ux(e):(h=r_({},e),ys(!h.pathname||!h.pathname.includes("?"),P3("?","pathname","search",h)),ys(!h.pathname||!h.pathname.includes("#"),P3("#","pathname","hash",h)),ys(!h.search||!h.search.includes("#"),P3("#","search","hash",h)));let _=e===""||h.pathname==="",w=_?"/":h.pathname,a;if(w==null)a=i;else{let F=t.length-1;if(!c&&w.startsWith("..")){let G=w.split("/");for(;G[0]==="..";)G.shift(),F-=1;h.pathname=G.join("/")}a=F>=0?t[F]:"/"}let A=cF(h,a),B=w&&w!=="/"&&w.endsWith("/"),N=(_||w===".")&&i.endsWith("/");return!A.pathname.endsWith("/")&&(B||N)&&(A.pathname+="/"),A}const xm=e=>e.join("/").replace(/\/\/+/g,"/"),hF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),fF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function mF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const OA=["post","put","patch","delete"];new Set(OA);const gF=["get",...OA];new Set(gF);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function n_(){return n_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])}return e},n_.apply(this,arguments)}const c5=V.createContext(null),yF=V.createContext(null),Dm=V.createContext(null),zw=V.createContext(null),jf=V.createContext({outlet:null,matches:[],isDataRoute:!1}),FA=V.createContext(null);function xF(e,t){let{relative:i}=t===void 0?{}:t;dx()||ys(!1);let{basename:c,navigator:h}=V.useContext(Dm),{hash:_,pathname:w,search:a}=UA(e,{relative:i}),A=w;return c!=="/"&&(A=w==="/"?c:xm([c,w])),h.createHref({pathname:A,search:a,hash:_})}function dx(){return V.useContext(zw)!=null}function Sh(){return dx()||ys(!1),V.useContext(zw).location}function VA(e){V.useContext(Dm).static||V.useLayoutEffect(e)}function xs(){let{isDataRoute:e}=V.useContext(jf);return e?kF():vF()}function vF(){dx()||ys(!1);let e=V.useContext(c5),{basename:t,future:i,navigator:c}=V.useContext(Dm),{matches:h}=V.useContext(jf),{pathname:_}=Sh(),w=JSON.stringify(o5(h,i.v7_relativeSplatPath)),a=V.useRef(!1);return VA(()=>{a.current=!0}),V.useCallback(function(B,N){if(N===void 0&&(N={}),!a.current)return;if(typeof B=="number"){c.go(B);return}let F=l5(B,JSON.parse(w),_,N.relative==="path");e==null&&t!=="/"&&(F.pathname=F.pathname==="/"?t:xm([t,F.pathname])),(N.replace?c.replace:c.push)(F,N.state,N)},[t,c,w,_,e])}function Lw(){let{matches:e}=V.useContext(jf),t=e[e.length-1];return t?t.params:{}}function UA(e,t){let{relative:i}=t===void 0?{}:t,{future:c}=V.useContext(Dm),{matches:h}=V.useContext(jf),{pathname:_}=Sh(),w=JSON.stringify(o5(h,c.v7_relativeSplatPath));return V.useMemo(()=>l5(e,JSON.parse(w),_,i==="path"),[e,w,_,i])}function _F(e,t){return bF(e,t)}function bF(e,t,i,c){dx()||ys(!1);let{navigator:h,static:_}=V.useContext(Dm),{matches:w}=V.useContext(jf),a=w[w.length-1],A=a?a.params:{};a&&a.pathname;let B=a?a.pathnameBase:"/";a&&a.route;let N=Sh(),F;if(t){var G;let de=typeof t=="string"?ux(t):t;B==="/"||(G=de.pathname)!=null&&G.startsWith(B)||ys(!1),F=de}else F=N;let Q=F.pathname||"/",te=Q;if(B!=="/"){let de=B.replace(/^\//,"").split("/");te="/"+Q.replace(/^\//,"").split("/").slice(de.length).join("/")}let Y=K9(e,{pathname:te}),oe=CF(Y&&Y.map(de=>Object.assign({},de,{params:Object.assign({},A,de.params),pathname:xm([B,h.encodeLocation?h.encodeLocation(de.pathname).pathname:de.pathname]),pathnameBase:de.pathnameBase==="/"?B:xm([B,h.encodeLocation?h.encodeLocation(de.pathnameBase).pathname:de.pathnameBase])})),w,i,c);return t&&oe?V.createElement(zw.Provider,{value:{location:n_({pathname:"/",search:"",hash:"",state:null,key:"default"},F),navigationType:pm.Pop}},oe):oe}function wF(){let e=AF(),t=mF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,h={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},t),i?V.createElement("pre",{style:h},i):null,null)}const SF=V.createElement(wF,null);class TF extends V.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error!==void 0?V.createElement(jf.Provider,{value:this.props.routeContext},V.createElement(FA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function EF(e){let{routeContext:t,match:i,children:c}=e,h=V.useContext(c5);return h&&h.static&&h.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=i.route.id),V.createElement(jf.Provider,{value:t},c)}function CF(e,t,i,c){var h;if(t===void 0&&(t=[]),i===void 0&&(i=null),c===void 0&&(c=null),e==null){var _;if(!i)return null;if(i.errors)e=i.matches;else if((_=c)!=null&&_.v7_partialHydration&&t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let w=e,a=(h=i)==null?void 0:h.errors;if(a!=null){let N=w.findIndex(F=>F.route.id&&(a==null?void 0:a[F.route.id])!==void 0);N>=0||ys(!1),w=w.slice(0,Math.min(w.length,N+1))}let A=!1,B=-1;if(i&&c&&c.v7_partialHydration)for(let N=0;N<w.length;N++){let F=w[N];if((F.route.HydrateFallback||F.route.hydrateFallbackElement)&&(B=N),F.route.id){let{loaderData:G,errors:Q}=i,te=F.route.loader&&G[F.route.id]===void 0&&(!Q||Q[F.route.id]===void 0);if(F.route.lazy||te){A=!0,B>=0?w=w.slice(0,B+1):w=[w[0]];break}}}return w.reduceRight((N,F,G)=>{let Q,te=!1,Y=null,oe=null;i&&(Q=a&&F.route.id?a[F.route.id]:void 0,Y=F.route.errorElement||SF,A&&(B<0&&G===0?(RF("route-fallback"),te=!0,oe=null):B===G&&(te=!0,oe=F.route.hydrateFallbackElement||null)));let de=t.concat(w.slice(0,G+1)),me=()=>{let be;return Q?be=Y:te?be=oe:F.route.Component?be=V.createElement(F.route.Component,null):F.route.element?be=F.route.element:be=N,V.createElement(EF,{match:F,routeContext:{outlet:N,matches:de,isDataRoute:i!=null},children:be})};return i&&(F.route.ErrorBoundary||F.route.errorElement||G===0)?V.createElement(TF,{location:i.location,revalidation:i.revalidation,component:Y,error:Q,children:me(),routeContext:{outlet:null,matches:de,isDataRoute:!0}}):me()},null)}var GA=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(GA||{}),HA=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(HA||{});function DF(e){let t=V.useContext(c5);return t||ys(!1),t}function PF(e){let t=V.useContext(yF);return t||ys(!1),t}function MF(e){let t=V.useContext(jf);return t||ys(!1),t}function qA(e){let t=MF(),i=t.matches[t.matches.length-1];return i.route.id||ys(!1),i.route.id}function AF(){var e;let t=V.useContext(FA),i=PF(),c=qA();return t!==void 0?t:(e=i.errors)==null?void 0:e[c]}function kF(){let{router:e}=DF(GA.UseNavigateStable),t=qA(HA.UseNavigateStable),i=V.useRef(!1);return VA(()=>{i.current=!0}),V.useCallback(function(h,_){_===void 0&&(_={}),i.current&&(typeof h=="number"?e.navigate(h):e.navigate(h,n_({fromRouteId:t},_)))},[e,t])}const JC={};function RF(e,t,i){JC[e]||(JC[e]=!0)}function IF(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function q4(e){let{to:t,replace:i,state:c,relative:h}=e;dx()||ys(!1);let{future:_,static:w}=V.useContext(Dm),{matches:a}=V.useContext(jf),{pathname:A}=Sh(),B=xs(),N=l5(t,o5(a,_.v7_relativeSplatPath),A,h==="path"),F=JSON.stringify(N);return V.useEffect(()=>B(JSON.parse(F),{replace:i,state:c,relative:h}),[B,F,h,i,c]),null}function Bi(e){ys(!1)}function zF(e){let{basename:t="/",children:i=null,location:c,navigationType:h=pm.Pop,navigator:_,static:w=!1,future:a}=e;dx()&&ys(!1);let A=t.replace(/^\/*/,"/"),B=V.useMemo(()=>({basename:A,navigator:_,static:w,future:n_({v7_relativeSplatPath:!1},a)}),[A,a,_,w]);typeof c=="string"&&(c=ux(c));let{pathname:N="/",search:F="",hash:G="",state:Q=null,key:te="default"}=c,Y=V.useMemo(()=>{let oe=s5(N,A);return oe==null?null:{location:{pathname:oe,search:F,hash:G,state:Q,key:te},navigationType:h}},[A,N,F,G,Q,te,h]);return Y==null?null:V.createElement(Dm.Provider,{value:B},V.createElement(zw.Provider,{children:i,value:Y}))}function LF(e){let{children:t,location:i}=e;return _F(W4(t),i)}new Promise(()=>{});function W4(e,t){t===void 0&&(t=[]);let i=[];return V.Children.forEach(e,(c,h)=>{if(!V.isValidElement(c))return;let _=[...t,h];if(c.type===V.Fragment){i.push.apply(i,W4(c.props.children,_));return}c.type!==Bi&&ys(!1),!c.props.index||!c.props.children||ys(!1);let w={id:c.props.id||_.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(w.children=W4(c.props.children,_)),i.push(w)}),i}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function K4(){return K4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c])}return e},K4.apply(this,arguments)}function $F(e,t){if(e==null)return{};var i={},c=Object.keys(e),h,_;for(_=0;_<c.length;_++)h=c[_],!(t.indexOf(h)>=0)&&(i[h]=e[h]);return i}function BF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function NF(e,t){return e.button===0&&(!t||t==="_self")&&!BF(e)}const jF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],OF="6";try{window.__reactRouterVersion=OF}catch{}const FF="startTransition",QC=G4[FF];function VF(e){let{basename:t,children:i,future:c,window:h}=e,_=V.useRef();_.current==null&&(_.current=H9({window:h,v5Compat:!0}));let w=_.current,[a,A]=V.useState({action:w.action,location:w.location}),{v7_startTransition:B}=c||{},N=V.useCallback(F=>{B&&QC?QC(()=>A(F)):A(F)},[A,B]);return V.useLayoutEffect(()=>w.listen(N),[w,N]),V.useEffect(()=>IF(c),[c]),V.createElement(zF,{basename:t,children:i,location:a.location,navigationType:a.action,navigator:w,future:c})}const UF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pi=V.forwardRef(function(t,i){let{onClick:c,relative:h,reloadDocument:_,replace:w,state:a,target:A,to:B,preventScrollReset:N,viewTransition:F}=t,G=$F(t,jF),{basename:Q}=V.useContext(Dm),te,Y=!1;if(typeof B=="string"&&GF.test(B)&&(te=B,UF))try{let be=new URL(window.location.href),pe=B.startsWith("//")?new URL(be.protocol+B):new URL(B),Se=s5(pe.pathname,Q);pe.origin===be.origin&&Se!=null?B=Se+pe.search+pe.hash:Y=!0}catch{}let oe=xF(B,{relative:h}),de=HF(B,{replace:w,state:a,target:A,preventScrollReset:N,relative:h,viewTransition:F});function me(be){c&&c(be),be.defaultPrevented||de(be)}return V.createElement("a",K4({},G,{href:te||oe,onClick:Y||_?c:me,ref:i,target:A}))});var eD;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(eD||(eD={}));var tD;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(tD||(tD={}));function HF(e,t){let{target:i,replace:c,state:h,preventScrollReset:_,relative:w,viewTransition:a}=t===void 0?{}:t,A=xs(),B=Sh(),N=UA(e,{relative:w});return V.useCallback(F=>{if(NF(F,i)){F.preventDefault();let G=c!==void 0?c:Q1(B)===Q1(N);A(e,{replace:G,state:h,preventScrollReset:_,relative:w,viewTransition:a})}},[B,A,N,c,h,i,e,_,w,a])}function Th(e={}){const{strict:t=!0,errorMessage:i="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:c}=e,h=V.createContext(void 0);h.displayName=c;function _(){var w;const a=V.useContext(h);if(!a&&t){const A=new Error(i);throw A.name="ContextError",(w=Error.captureStackTrace)==null||w.call(Error,A,_),A}return a}return[h.Provider,_,h]}function qF(e){return{UNSAFE_getDOMNode(){return e.current}}}function Ba(e){const t=V.useRef(null);return V.useImperativeHandle(e,()=>t.current),t}function WF(e,t){return e&&t&&e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}var WA=e=>e;function u5(e){return Array.isArray(e)}function KF(e){return u5(e)&&e.length===0}function KA(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!u5(e)}function ZF(e){return KA(e)&&Object.keys(e).length===0}function md(e){return u5(e)?KF(e):KA(e)?ZF(e):e==null||e===""}function XF(e){return typeof e=="function"}var Vt=e=>e?"true":void 0;function ZA(e){var t,i,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=ZA(e[t]))&&(c&&(c+=" "),c+=i);else for(t in e)e[t]&&(c&&(c+=" "),c+=t);return c}function Nr(...e){for(var t=0,i,c,h="";t<e.length;)(i=e[t++])&&(c=ZA(i))&&(h&&(h+=" "),h+=c);return h}var d5=(...e)=>{let t=" ";for(const i of e)if(typeof i=="string"&&i.length>0){t=i;break}return t};function XA(e){return`${e}-${Math.floor(Math.random()*1e6)}`}function YF(e){for(const t in e)t.startsWith("on")&&delete e[t];return e}function Ko(e){if(!e||typeof e!="object")return"";try{return JSON.stringify(e)}catch{return""}}function rD(e,t=0){let i;return function(...c){const h=()=>{i=void 0,e.apply(this,c)};i!==void 0&&clearTimeout(i),i=setTimeout(h,t)}}function h5(e,t,i){return Math.min(Math.max(e,t),i)}function YA(e,t=100){return Math.min(Math.max(e,0),t)}var nD={};function $w(e,t,...i){const h=`[Hero UI]${t?` [${t}]`:" "}: ${e}`;typeof console>"u"||nD[h]||(nD[h]=!0)}function JA(e){switch(e){case"buddhist":return 543;case"ethiopic":case"ethioaa":return-8;case"coptic":return-284;case"hebrew":return 3760;case"indian":return-78;case"islamic-civil":case"islamic-tbla":case"islamic-umalqura":return-579;case"persian":return-600;case"roc":case"japanese":case"gregory":default:return 0}}var JF=e=>/(^|\W)[0-9](\W|$)/.test(e)&&!/[^\d\^$\[\]\(\)\*\+\-\.\|]/.test(e);function QF(e,t){if(e!=null){if(XF(e)){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function f5(...e){return t=>{e.forEach(i=>QF(i,t))}}var eV=(e,t)=>{var i;let c=[];const h=(i=V.Children.map(e,w=>V.isValidElement(w)&&w.type===t?(c.push(w),null):w))==null?void 0:i.filter(Boolean),_=c.length>=0?c:void 0;return[h,_]},tV=new Set(["id","type","style","title","role","tabIndex","htmlFor","width","height","abbr","accept","acceptCharset","accessKey","action","allowFullScreen","allowTransparency","alt","async","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","challenge","charset","checked","cite","class","className","cols","colSpan","command","content","contentEditable","contextMenu","controls","coords","crossOrigin","data","dateTime","default","defer","dir","disabled","download","draggable","dropzone","encType","enterKeyHint","for","form","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","headers","hidden","high","href","hrefLang","httpEquiv","icon","inputMode","isMap","itemId","itemProp","itemRef","itemScope","itemType","kind","label","lang","list","loop","manifest","max","maxLength","media","mediaGroup","method","min","minLength","multiple","muted","name","noValidate","open","optimum","pattern","ping","placeholder","poster","preload","radioGroup","referrerPolicy","readOnly","rel","required","rows","rowSpan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","slot","sortable","span","spellCheck","src","srcDoc","srcSet","start","step","target","translate","typeMustMatch","useMap","value","wmode","wrap"]),rV=new Set(["onCopy","onCut","onPaste","onLoad","onError","onWheel","onScroll","onCompositionEnd","onCompositionStart","onCompositionUpdate","onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onSubmit","onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPointerDown","onPointerEnter","onPointerLeave","onPointerUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd"]),aD=/^(data-.*)$/,nV=/^(aria-.*)$/,d1=/^(on[A-Z].*)$/;function Wo(e,t={}){let{labelable:i=!0,enabled:c=!0,propNames:h,omitPropNames:_,omitEventNames:w,omitDataProps:a,omitEventProps:A}=t,B={};if(!c)return e;for(const N in e)_!=null&&_.has(N)||w!=null&&w.has(N)&&d1.test(N)||d1.test(N)&&!rV.has(N)||a&&aD.test(N)||A&&d1.test(N)||(Object.prototype.hasOwnProperty.call(e,N)&&(tV.has(N)||i&&nV.test(N)||h!=null&&h.has(N)||aD.test(N))||d1.test(N))&&(B[N]=e[N]);return B}var[aV,Pi]=Th({name:"ProviderContext",strict:!1});const iV=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),sV=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function QA(e){if(Intl.Locale){let i=new Intl.Locale(e).maximize(),c=typeof i.getTextInfo=="function"?i.getTextInfo():i.textInfo;if(c)return c.direction==="rtl";if(i.script)return iV.has(i.script)}let t=e.split("-")[0];return sV.has(t)}const p5={prefix:String(Math.round(Math.random()*1e10)),current:0},ek=rn.createContext(p5),oV=rn.createContext(!1);let lV=!!(typeof window<"u"&&window.document&&window.document.createElement),M3=new WeakMap;function cV(e=!1){let t=V.useContext(ek),i=V.useRef(null);if(i.current===null&&!e){var c,h;let _=(h=rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||h===void 0||(c=h.ReactCurrentOwner)===null||c===void 0?void 0:c.current;if(_){let w=M3.get(_);w==null?M3.set(_,{id:t.current,state:_.memoizedState}):_.memoizedState!==w.state&&(t.current=w.id,M3.delete(_))}i.current=++t.current}return i.current}function uV(e){let t=V.useContext(ek);t===p5&&!lV&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let i=cV(!!e),c=`react-aria${t.prefix}`;return e||`${c}-${i}`}function dV(e){let t=rn.useId(),[i]=V.useState(o0()),c=i?"react-aria":`react-aria${p5.prefix}`;return e||`${c}-${t}`}const hV=typeof rn.useId=="function"?dV:uV;function fV(){return!1}function pV(){return!0}function mV(e){return()=>{}}function o0(){return typeof rn.useSyncExternalStore=="function"?rn.useSyncExternalStore(mV,fV,pV):V.useContext(oV)}const gV=Symbol.for("react-aria.i18n.locale");function tk(){let e=typeof window<"u"&&window[gV]||typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:QA(e)?"rtl":"ltr"}}let Z4=tk(),Bv=new Set;function iD(){Z4=tk();for(let e of Bv)e(Z4)}function rk(){let e=o0(),[t,i]=V.useState(Z4);return V.useEffect(()=>(Bv.size===0&&window.addEventListener("languagechange",iD),Bv.add(i),()=>{Bv.delete(i),Bv.size===0&&window.removeEventListener("languagechange",iD)}),[]),e?{locale:"en-US",direction:"ltr"}:t}const nk=rn.createContext(null);function yV(e){let{locale:t,children:i}=e,c=rk(),h=rn.useMemo(()=>t?{locale:t,direction:QA(t)?"rtl":"ltr"}:c,[c,t]);return rn.createElement(nk.Provider,{value:h},i)}function Ms(){let e=rk();return V.useContext(nk)||e}const xV=Symbol.for("react-aria.i18n.locale"),vV=Symbol.for("react-aria.i18n.strings");let yy;class Of{getStringForLocale(t,i){let h=this.getStringsForLocale(i)[t];if(!h)throw new Error(`Could not find intl message ${t} in ${i} locale`);return h}getStringsForLocale(t){let i=this.strings[t];return i||(i=_V(t,this.strings,this.defaultLocale),this.strings[t]=i),i}static getGlobalDictionaryForPackage(t){if(typeof window>"u")return null;let i=window[xV];if(yy===void 0){let h=window[vV];if(!h)return null;yy={};for(let _ in h)yy[_]=new Of({[i]:h[_]},i)}let c=yy==null?void 0:yy[t];if(!c)throw new Error(`Strings for package "${t}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return c}constructor(t,i="en-US"){this.strings=Object.fromEntries(Object.entries(t).filter(([,c])=>c)),this.defaultLocale=i}}function _V(e,t,i="en-US"){if(t[e])return t[e];let c=bV(e);if(t[c])return t[c];for(let h in t)if(h.startsWith(c+"-"))return t[h];return t[i]}function bV(e){return Intl.Locale?new Intl.Locale(e).language:e.split("-")[0]}const sD=new Map,oD=new Map;class m5{format(t,i){let c=this.strings.getStringForLocale(t,this.locale);return typeof c=="function"?c(i,this):c}plural(t,i,c="cardinal"){let h=i["="+t];if(h)return typeof h=="function"?h():h;let _=this.locale+":"+c,w=sD.get(_);w||(w=new Intl.PluralRules(this.locale,{type:c}),sD.set(_,w));let a=w.select(t);return h=i[a]||i.other,typeof h=="function"?h():h}number(t){let i=oD.get(this.locale);return i||(i=new Intl.NumberFormat(this.locale),oD.set(this.locale,i)),i.format(t)}select(t,i){let c=t[i]||t.other;return typeof c=="function"?c():c}constructor(t,i){this.locale=t,this.strings=i}}const lD=new WeakMap;function wV(e){let t=lD.get(e);return t||(t=new Of(e),lD.set(e,t)),t}function ak(e,t){return t&&Of.getGlobalDictionaryForPackage(t)||wV(e)}function Eu(e,t){let{locale:i}=Ms(),c=ak(e,t);return V.useMemo(()=>new m5(i,c),[i,c])}function Fy(e,t){return e-t*Math.floor(e/t)}const ik=1721426;function Ug(e,t,i,c){t=T_(e,t);let h=t-1,_=-2;return i<=2?_=0:mm(t)&&(_=-1),ik-1+365*h+Math.floor(h/4)-Math.floor(h/100)+Math.floor(h/400)+Math.floor((367*i-362)/12+_+c)}function mm(e){return e%4===0&&(e%100!==0||e%400===0)}function T_(e,t){return e==="BC"?1-t:t}function Bw(e){let t="AD";return e<=0&&(t="BC",e=1-e),[t,e]}const SV={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class Nl{fromJulianDay(t){let i=t,c=i-ik,h=Math.floor(c/146097),_=Fy(c,146097),w=Math.floor(_/36524),a=Fy(_,36524),A=Math.floor(a/1461),B=Fy(a,1461),N=Math.floor(B/365),F=h*400+w*100+A*4+N+(w!==4&&N!==4?1:0),[G,Q]=Bw(F),te=i-Ug(G,Q,1,1),Y=2;i<Ug(G,Q,3,1)?Y=0:mm(Q)&&(Y=1);let oe=Math.floor(((te+Y)*12+373)/367),de=i-Ug(G,Q,oe,1)+1;return new Di(G,Q,oe,de)}toJulianDay(t){return Ug(t.era,t.year,t.month,t.day)}getDaysInMonth(t){return SV[mm(t.year)?"leapyear":"standard"][t.month-1]}getMonthsInYear(t){return 12}getDaysInYear(t){return mm(t.year)?366:365}getYearsInEra(t){return 9999}getEras(){return["BC","AD"]}isInverseEra(t){return t.era==="BC"}balanceDate(t){t.year<=0&&(t.era=t.era==="BC"?"AD":"BC",t.year=1-t.year)}constructor(){this.identifier="gregory"}}const TV={"001":1,AD:1,AE:6,AF:6,AI:1,AL:1,AM:1,AN:1,AR:1,AT:1,AU:1,AX:1,AZ:1,BA:1,BE:1,BG:1,BH:6,BM:1,BN:1,BY:1,CH:1,CL:1,CM:1,CN:1,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DZ:6,EC:1,EE:1,EG:6,ES:1,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,HR:1,HU:1,IE:1,IQ:6,IR:6,IS:1,IT:1,JO:6,KG:1,KW:6,KZ:1,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MK:1,MN:1,MQ:1,MV:5,MY:1,NL:1,NO:1,NZ:1,OM:6,PL:1,QA:6,RE:1,RO:1,RS:1,RU:1,SD:6,SE:1,SI:1,SK:1,SM:1,SY:6,TJ:1,TM:1,TR:1,UA:1,UY:1,UZ:1,VA:1,VN:1,XK:1};function Ds(e,t){return t=Gi(t,e.calendar),e.era===t.era&&e.year===t.year&&e.month===t.month&&e.day===t.day}function cD(e,t){return t=Gi(t,e.calendar),e=Jg(e),t=Jg(t),e.era===t.era&&e.year===t.year&&e.month===t.month}function EV(e,t){return e.calendar.identifier===t.calendar.identifier&&e.era===t.era&&e.year===t.year&&e.month===t.month&&e.day===t.day}function sk(e,t){return Ds(e,Pm(t))}const CV={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};function Nw(e,t,i){let c=e.calendar.toJulianDay(e),h=i?CV[i]:kV(t),_=Math.ceil(c+1-h)%7;return _<0&&(_+=7),_}function ok(e){return kf(Date.now(),e)}function Pm(e){return yh(ok(e))}function lk(e,t){return e.calendar.toJulianDay(e)-t.calendar.toJulianDay(t)}function ck(e,t){return uD(e)-uD(t)}function uD(e){return e.hour*36e5+e.minute*6e4+e.second*1e3+e.millisecond}let A3=null;function Ff(){return A3==null&&(A3=new Intl.DateTimeFormat().resolvedOptions().timeZone),A3}function Jg(e){return e.subtract({days:e.day-1})}function ew(e){return e.add({days:e.calendar.getDaysInMonth(e)-e.day})}function tw(e){return Jg(e.subtract({months:e.month-1}))}function DV(e){return e.calendar.getMinimumMonthInYear?e.calendar.getMinimumMonthInYear(e):1}function PV(e){return e.calendar.getMinimumDayInMonth?e.calendar.getMinimumDayInMonth(e):1}function a_(e,t,i){let c=Nw(e,t,i);return e.subtract({days:c})}function MV(e,t,i){return a_(e,t,i).add({days:6})}const dD=new Map;function AV(e){if(Intl.Locale){let i=dD.get(e);return i||(i=new Intl.Locale(e).maximize().region,i&&dD.set(e,i)),i}let t=e.split("-")[1];return t==="u"?void 0:t}function kV(e){let t=AV(e);return t&&TV[t]||0}function RV(e,t,i){let c=e.calendar.getDaysInMonth(e);return Math.ceil((Nw(Jg(e),t,i)+c)/7)}function uk(e,t){return e&&t?e.compare(t)<=0?e:t:e||t}function dk(e,t){return e&&t?e.compare(t)>=0?e:t:e||t}function Yy(e){e=Gi(e,new Nl);let t=T_(e.era,e.year);return hk(t,e.month,e.day,e.hour,e.minute,e.second,e.millisecond)}function hk(e,t,i,c,h,_,w){let a=new Date;return a.setUTCHours(c,h,_,w),a.setUTCFullYear(e,t-1,i),a.getTime()}function X4(e,t){if(t==="UTC")return 0;if(e>0&&t===Ff())return new Date(e).getTimezoneOffset()*-6e4;let{year:i,month:c,day:h,hour:_,minute:w,second:a}=fk(e,t);return hk(i,c,h,_,w,a,0)-Math.floor(e/1e3)*1e3}const hD=new Map;function fk(e,t){let i=hD.get(t);i||(i=new Intl.DateTimeFormat("en-US",{timeZone:t,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),hD.set(t,i));let c=i.formatToParts(new Date(e)),h={};for(let _ of c)_.type!=="literal"&&(h[_.type]=_.value);return{year:h.era==="BC"||h.era==="B"?-h.year+1:+h.year,month:+h.month,day:+h.day,hour:h.hour==="24"?0:+h.hour,minute:+h.minute,second:+h.second}}const fD=864e5;function IV(e,t,i,c){return(i===c?[i]:[i,c]).filter(_=>zV(e,t,_))}function zV(e,t,i){let c=fk(i,t);return e.year===c.year&&e.month===c.month&&e.day===c.day&&e.hour===c.hour&&e.minute===c.minute&&e.second===c.second}function Mf(e,t,i="compatible"){let c=Lf(e);if(t==="UTC")return Yy(c);if(t===Ff()&&i==="compatible"){c=Gi(c,new Nl);let A=new Date,B=T_(c.era,c.year);return A.setFullYear(B,c.month-1,c.day),A.setHours(c.hour,c.minute,c.second,c.millisecond),A.getTime()}let h=Yy(c),_=X4(h-fD,t),w=X4(h+fD,t),a=IV(c,t,h-_,h-w);if(a.length===1)return a[0];if(a.length>1)switch(i){case"compatible":case"earlier":return a[0];case"later":return a[a.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(i){case"earlier":return Math.min(h-_,h-w);case"compatible":case"later":return Math.max(h-_,h-w);case"reject":throw new RangeError("No such absolute time found")}}function pk(e,t,i="compatible"){return new Date(Mf(e,t,i))}function kf(e,t){let i=X4(e,t),c=new Date(e+i),h=c.getUTCFullYear(),_=c.getUTCMonth()+1,w=c.getUTCDate(),a=c.getUTCHours(),A=c.getUTCMinutes(),B=c.getUTCSeconds(),N=c.getUTCMilliseconds();return new Jy(h<1?"BC":"AD",h<1?-h+1:h,_,w,t,i,a,A,B,N)}function yh(e){return new Di(e.calendar,e.era,e.year,e.month,e.day)}function Lf(e,t){let i=0,c=0,h=0,_=0;if("timeZone"in e)({hour:i,minute:c,second:h,millisecond:_}=e);else if("hour"in e&&!t)return e;return t&&({hour:i,minute:c,second:h,millisecond:_}=t),new rw(e.calendar,e.era,e.year,e.month,e.day,i,c,h,_)}function pD(e){return new E_(e.hour,e.minute,e.second,e.millisecond)}function Gi(e,t){if(e.calendar.identifier===t.identifier)return e;let i=t.fromJulianDay(e.calendar.toJulianDay(e)),c=e.copy();return c.calendar=t,c.era=i.era,c.year=i.year,c.month=i.month,c.day=i.day,Qg(c),c}function mk(e,t,i){if(e instanceof Jy)return e.timeZone===t?e:gk(e,t);let c=Mf(e,t,i);return kf(c,t)}function LV(e){let t=Yy(e)-e.offset;return new Date(t)}function gk(e,t){let i=Yy(e)-e.offset;return Gi(kf(i,t),e.calendar)}const wv=36e5;function jw(e,t){let i=e.copy(),c="hour"in i?_k(i,t):0;Y4(i,t.years||0),i.calendar.balanceYearMonth&&i.calendar.balanceYearMonth(i,e),i.month+=t.months||0,J4(i),yk(i),i.day+=(t.weeks||0)*7,i.day+=t.days||0,i.day+=c,$V(i),i.calendar.balanceDate&&i.calendar.balanceDate(i),i.year<1&&(i.year=1,i.month=1,i.day=1);let h=i.calendar.getYearsInEra(i);if(i.year>h){var _,w;let A=(_=(w=i.calendar).isInverseEra)===null||_===void 0?void 0:_.call(w,i);i.year=h,i.month=A?1:i.calendar.getMonthsInYear(i),i.day=A?1:i.calendar.getDaysInMonth(i)}i.month<1&&(i.month=1,i.day=1);let a=i.calendar.getMonthsInYear(i);return i.month>a&&(i.month=a,i.day=i.calendar.getDaysInMonth(i)),i.day=Math.max(1,Math.min(i.calendar.getDaysInMonth(i),i.day)),i}function Y4(e,t){var i,c;!((i=(c=e.calendar).isInverseEra)===null||i===void 0)&&i.call(c,e)&&(t=-t),e.year+=t}function J4(e){for(;e.month<1;)Y4(e,-1),e.month+=e.calendar.getMonthsInYear(e);let t=0;for(;e.month>(t=e.calendar.getMonthsInYear(e));)e.month-=t,Y4(e,1)}function $V(e){for(;e.day<1;)e.month--,J4(e),e.day+=e.calendar.getDaysInMonth(e);for(;e.day>e.calendar.getDaysInMonth(e);)e.day-=e.calendar.getDaysInMonth(e),e.month++,J4(e)}function yk(e){e.month=Math.max(1,Math.min(e.calendar.getMonthsInYear(e),e.month)),e.day=Math.max(1,Math.min(e.calendar.getDaysInMonth(e),e.day))}function Qg(e){e.calendar.constrainDate&&e.calendar.constrainDate(e),e.year=Math.max(1,Math.min(e.calendar.getYearsInEra(e),e.year)),yk(e)}function g5(e){let t={};for(let i in e)typeof e[i]=="number"&&(t[i]=-e[i]);return t}function xk(e,t){return jw(e,g5(t))}function y5(e,t){let i=e.copy();return t.era!=null&&(i.era=t.era),t.year!=null&&(i.year=t.year),t.month!=null&&(i.month=t.month),t.day!=null&&(i.day=t.day),Qg(i),i}function i_(e,t){let i=e.copy();return t.hour!=null&&(i.hour=t.hour),t.minute!=null&&(i.minute=t.minute),t.second!=null&&(i.second=t.second),t.millisecond!=null&&(i.millisecond=t.millisecond),vk(i),i}function BV(e){e.second+=Math.floor(e.millisecond/1e3),e.millisecond=h1(e.millisecond,1e3),e.minute+=Math.floor(e.second/60),e.second=h1(e.second,60),e.hour+=Math.floor(e.minute/60),e.minute=h1(e.minute,60);let t=Math.floor(e.hour/24);return e.hour=h1(e.hour,24),t}function vk(e){e.millisecond=Math.max(0,Math.min(e.millisecond,1e3)),e.second=Math.max(0,Math.min(e.second,59)),e.minute=Math.max(0,Math.min(e.minute,59)),e.hour=Math.max(0,Math.min(e.hour,23))}function h1(e,t){let i=e%t;return i<0&&(i+=t),i}function _k(e,t){return e.hour+=t.hours||0,e.minute+=t.minutes||0,e.second+=t.seconds||0,e.millisecond+=t.milliseconds||0,BV(e)}function bk(e,t){let i=e.copy();return _k(i,t),i}function NV(e,t){return bk(e,g5(t))}function x5(e,t,i,c){let h=e.copy();switch(t){case"era":{let a=e.calendar.getEras(),A=a.indexOf(e.era);if(A<0)throw new Error("Invalid era: "+e.era);A=Rf(A,i,0,a.length-1,c==null?void 0:c.round),h.era=a[A],Qg(h);break}case"year":var _,w;!((_=(w=h.calendar).isInverseEra)===null||_===void 0)&&_.call(w,h)&&(i=-i),h.year=Rf(e.year,i,-1/0,9999,c==null?void 0:c.round),h.year===-1/0&&(h.year=1),h.calendar.balanceYearMonth&&h.calendar.balanceYearMonth(h,e);break;case"month":h.month=Rf(e.month,i,1,e.calendar.getMonthsInYear(e),c==null?void 0:c.round);break;case"day":h.day=Rf(e.day,i,1,e.calendar.getDaysInMonth(e),c==null?void 0:c.round);break;default:throw new Error("Unsupported field "+t)}return e.calendar.balanceDate&&e.calendar.balanceDate(h),Qg(h),h}function v5(e,t,i,c){let h=e.copy();switch(t){case"hour":{let _=e.hour,w=0,a=23;if((c==null?void 0:c.hourCycle)===12){let A=_>=12;w=A?12:0,a=A?23:11}h.hour=Rf(_,i,w,a,c==null?void 0:c.round);break}case"minute":h.minute=Rf(e.minute,i,0,59,c==null?void 0:c.round);break;case"second":h.second=Rf(e.second,i,0,59,c==null?void 0:c.round);break;case"millisecond":h.millisecond=Rf(e.millisecond,i,0,999,c==null?void 0:c.round);break;default:throw new Error("Unsupported field "+t)}return h}function Rf(e,t,i,c,h=!1){if(h){e+=Math.sign(t),e<i&&(e=c);let _=Math.abs(t);t>0?e=Math.ceil(e/_)*_:e=Math.floor(e/_)*_,e>c&&(e=i)}else e+=t,e<i?e=c-(i-e-1):e>c&&(e=i+(e-c-1));return e}function wk(e,t){let i;if(t.years!=null&&t.years!==0||t.months!=null&&t.months!==0||t.weeks!=null&&t.weeks!==0||t.days!=null&&t.days!==0){let h=jw(Lf(e),{years:t.years,months:t.months,weeks:t.weeks,days:t.days});i=Mf(h,e.timeZone)}else i=Yy(e)-e.offset;i+=t.milliseconds||0,i+=(t.seconds||0)*1e3,i+=(t.minutes||0)*6e4,i+=(t.hours||0)*36e5;let c=kf(i,e.timeZone);return Gi(c,e.calendar)}function jV(e,t){return wk(e,g5(t))}function OV(e,t,i,c){switch(t){case"hour":{let h=0,_=23;if((c==null?void 0:c.hourCycle)===12){let te=e.hour>=12;h=te?12:0,_=te?23:11}let w=Lf(e),a=Gi(i_(w,{hour:h}),new Nl),A=[Mf(a,e.timeZone,"earlier"),Mf(a,e.timeZone,"later")].filter(te=>kf(te,e.timeZone).day===a.day)[0],B=Gi(i_(w,{hour:_}),new Nl),N=[Mf(B,e.timeZone,"earlier"),Mf(B,e.timeZone,"later")].filter(te=>kf(te,e.timeZone).day===B.day).pop(),F=Yy(e)-e.offset,G=Math.floor(F/wv),Q=F%wv;return F=Rf(G,i,Math.floor(A/wv),Math.floor(N/wv),c==null?void 0:c.round)*wv+Q,Gi(kf(F,e.timeZone),e.calendar)}case"minute":case"second":case"millisecond":return v5(e,t,i,c);case"era":case"year":case"month":case"day":{let h=x5(Lf(e),t,i,c),_=Mf(h,e.timeZone);return Gi(kf(_,e.timeZone),e.calendar)}default:throw new Error("Unsupported field "+t)}}function FV(e,t,i){let c=Lf(e),h=i_(y5(c,t),t);if(h.compare(c)===0)return e;let _=Mf(h,e.timeZone,i);return Gi(kf(_,e.timeZone),e.calendar)}const VV=/^([+-]\d{6}|\d{4})-(\d{2})-(\d{2})$/,UV=/^([+-]\d{6}|\d{4})-(\d{2})-(\d{2})(?:T(\d{2}))?(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?(?:(?:([+-]\d{2})(?::?(\d{2}))?)|Z)$/;function Sk(e){let t=e.match(VV);if(!t)throw new Error("Invalid ISO 8601 date string: "+e);let i=new Di(pu(t[1],0,9999),pu(t[2],1,12),1);return i.day=pu(t[3],0,i.calendar.getDaysInMonth(i)),i}function GV(e,t){let i=e.match(UV);if(!i)throw new Error("Invalid ISO 8601 date time string: "+e);let c=pu(i[1],-9999,9999),h=c<1?"BC":"AD",_=new Jy(h,c<1?-c+1:c,pu(i[2],1,12),1,t,0,i[4]?pu(i[4],0,23):0,i[5]?pu(i[5],0,59):0,i[6]?pu(i[6],0,59):0,i[7]?pu(i[7],0,1/0)*1e3:0);_.day=pu(i[3],0,_.calendar.getDaysInMonth(_));var w;return i[8]&&(_.offset=pu(i[8],-23,23)*36e5+pu((w=i[9])!==null&&w!==void 0?w:"0",0,59)*6e4),gk(_,t)}function $f(e){return GV(e,Ff())}function pu(e,t,i){let c=Number(e);if(c<t||c>i)throw new RangeError(`Value out of range: ${t} <= ${c} <= ${i}`);return c}function Tk(e){return`${String(e.hour).padStart(2,"0")}:${String(e.minute).padStart(2,"0")}:${String(e.second).padStart(2,"0")}${e.millisecond?String(e.millisecond/1e3).slice(1):""}`}function Ek(e){let t=Gi(e,new Nl),i;return t.era==="BC"?i=t.year===1?"0000":"-"+String(Math.abs(1-t.year)).padStart(6,"00"):i=String(t.year).padStart(4,"0"),`${i}-${String(t.month).padStart(2,"0")}-${String(t.day).padStart(2,"0")}`}function Ck(e){return`${Ek(e)}T${Tk(e)}`}function HV(e){let t=Math.sign(e)<0?"-":"+";e=Math.abs(e);let i=Math.floor(e/36e5),c=e%36e5/6e4;return`${t}${String(i).padStart(2,"0")}:${String(c).padStart(2,"0")}`}function qV(e){return`${Ck(e)}${HV(e.offset)}[${e.timeZone}]`}function WV(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function hx(e,t,i){WV(e,t),t.set(e,i)}function _5(e){let t=typeof e[0]=="object"?e.shift():new Nl,i;if(typeof e[0]=="string")i=e.shift();else{let w=t.getEras();i=w[w.length-1]}let c=e.shift(),h=e.shift(),_=e.shift();return[t,i,c,h,_]}var KV=new WeakMap;class Di{copy(){return this.era?new Di(this.calendar,this.era,this.year,this.month,this.day):new Di(this.calendar,this.year,this.month,this.day)}add(t){return jw(this,t)}subtract(t){return xk(this,t)}set(t){return y5(this,t)}cycle(t,i,c){return x5(this,t,i,c)}toDate(t){return pk(this,t)}toString(){return Ek(this)}compare(t){return lk(this,t)}constructor(...t){hx(this,KV,{writable:!0,value:void 0});let[i,c,h,_,w]=_5(t);this.calendar=i,this.era=c,this.year=h,this.month=_,this.day=w,Qg(this)}}var ZV=new WeakMap;class E_{copy(){return new E_(this.hour,this.minute,this.second,this.millisecond)}add(t){return bk(this,t)}subtract(t){return NV(this,t)}set(t){return i_(this,t)}cycle(t,i,c){return v5(this,t,i,c)}toString(){return Tk(this)}compare(t){return ck(this,t)}constructor(t=0,i=0,c=0,h=0){hx(this,ZV,{writable:!0,value:void 0}),this.hour=t,this.minute=i,this.second=c,this.millisecond=h,vk(this)}}var XV=new WeakMap;class rw{copy(){return this.era?new rw(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new rw(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(t){return jw(this,t)}subtract(t){return xk(this,t)}set(t){return y5(i_(this,t),t)}cycle(t,i,c){switch(t){case"era":case"year":case"month":case"day":return x5(this,t,i,c);default:return v5(this,t,i,c)}}toDate(t,i){return pk(this,t,i)}toString(){return Ck(this)}compare(t){let i=lk(this,t);return i===0?ck(this,Lf(t)):i}constructor(...t){hx(this,XV,{writable:!0,value:void 0});let[i,c,h,_,w]=_5(t);this.calendar=i,this.era=c,this.year=h,this.month=_,this.day=w,this.hour=t.shift()||0,this.minute=t.shift()||0,this.second=t.shift()||0,this.millisecond=t.shift()||0,Qg(this)}}var YV=new WeakMap;class Jy{copy(){return this.era?new Jy(this.calendar,this.era,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond):new Jy(this.calendar,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond)}add(t){return wk(this,t)}subtract(t){return jV(this,t)}set(t,i){return FV(this,t,i)}cycle(t,i,c){return OV(this,t,i,c)}toDate(){return LV(this)}toString(){return qV(this)}toAbsoluteString(){return this.toDate().toISOString()}compare(t){return this.toDate().getTime()-mk(t,this.timeZone).toDate().getTime()}constructor(...t){hx(this,YV,{writable:!0,value:void 0});let[i,c,h,_,w]=_5(t),a=t.shift(),A=t.shift();this.calendar=i,this.era=c,this.year=h,this.month=_,this.day=w,this.timeZone=a,this.offset=A,this.hour=t.shift()||0,this.minute=t.shift()||0,this.second=t.shift()||0,this.millisecond=t.shift()||0,Qg(this)}}const Vy=[[1868,9,8],[1912,7,30],[1926,12,25],[1989,1,8],[2019,5,1]],JV=[[1912,7,29],[1926,12,24],[1989,1,7],[2019,4,30]],B1=[1867,1911,1925,1988,2018],fm=["meiji","taisho","showa","heisei","reiwa"];function mD(e){const t=Vy.findIndex(([i,c,h])=>e.year<i||e.year===i&&e.month<c||e.year===i&&e.month===c&&e.day<h);return t===-1?Vy.length-1:t===0?0:t-1}function k3(e){let t=B1[fm.indexOf(e.era)];if(!t)throw new Error("Unknown era: "+e.era);return new Di(e.year+t,e.month,e.day)}class QV extends Nl{fromJulianDay(t){let i=super.fromJulianDay(t),c=mD(i);return new Di(this,fm[c],i.year-B1[c],i.month,i.day)}toJulianDay(t){return super.toJulianDay(k3(t))}balanceDate(t){let i=k3(t),c=mD(i);fm[c]!==t.era&&(t.era=fm[c],t.year=i.year-B1[c]),this.constrainDate(t)}constrainDate(t){let i=fm.indexOf(t.era),c=JV[i];if(c!=null){let[h,_,w]=c,a=h-B1[i];t.year=Math.max(1,Math.min(a,t.year)),t.year===a&&(t.month=Math.min(_,t.month),t.month===_&&(t.day=Math.min(w,t.day)))}if(t.year===1&&i>=0){let[,h,_]=Vy[i];t.month=Math.max(h,t.month),t.month===h&&(t.day=Math.max(_,t.day))}}getEras(){return fm}getYearsInEra(t){let i=fm.indexOf(t.era),c=Vy[i],h=Vy[i+1];if(h==null)return 9999-c[0]+1;let _=h[0]-c[0];return(t.month<h[1]||t.month===h[1]&&t.day<h[2])&&_++,_}getDaysInMonth(t){return super.getDaysInMonth(k3(t))}getMinimumMonthInYear(t){let i=gD(t);return i?i[1]:1}getMinimumDayInMonth(t){let i=gD(t);return i&&t.month===i[1]?i[2]:1}constructor(...t){super(...t),this.identifier="japanese"}}function gD(e){if(e.year===1){let t=fm.indexOf(e.era);return Vy[t]}}const Dk=-543;class eU extends Nl{fromJulianDay(t){let i=super.fromJulianDay(t),c=T_(i.era,i.year);return new Di(this,c-Dk,i.month,i.day)}toJulianDay(t){return super.toJulianDay(yD(t))}getEras(){return["BE"]}getDaysInMonth(t){return super.getDaysInMonth(yD(t))}balanceDate(){}constructor(...t){super(...t),this.identifier="buddhist"}}function yD(e){let[t,i]=Bw(e.year+Dk);return new Di(t,i,e.month,e.day)}const nw=1911;function Pk(e){return e.era==="minguo"?e.year+nw:1-e.year+nw}function xD(e){let t=e-nw;return t>0?["minguo",t]:["before_minguo",1-t]}class tU extends Nl{fromJulianDay(t){let i=super.fromJulianDay(t),c=T_(i.era,i.year),[h,_]=xD(c);return new Di(this,h,_,i.month,i.day)}toJulianDay(t){return super.toJulianDay(vD(t))}getEras(){return["before_minguo","minguo"]}balanceDate(t){let[i,c]=xD(Pk(t));t.era=i,t.year=c}isInverseEra(t){return t.era==="before_minguo"}getDaysInMonth(t){return super.getDaysInMonth(vD(t))}getYearsInEra(t){return t.era==="before_minguo"?9999:9999-nw}constructor(...t){super(...t),this.identifier="roc"}}function vD(e){let[t,i]=Bw(Pk(e));return new Di(t,i,e.month,e.day)}const _D=1948320,bD=[0,31,62,93,124,155,186,216,246,276,306,336];class rU{fromJulianDay(t){let i=t-_D,c=1+Math.floor((33*i+3)/12053),h=365*(c-1)+Math.floor((8*c+21)/33),_=i-h,w=_<216?Math.floor(_/31):Math.floor((_-6)/30),a=_-bD[w]+1;return new Di(this,c,w+1,a)}toJulianDay(t){let i=_D-1+365*(t.year-1)+Math.floor((8*t.year+21)/33);return i+=bD[t.month-1],i+=t.day,i}getMonthsInYear(){return 12}getDaysInMonth(t){return t.month<=6?31:t.month<=11||Fy(25*t.year+11,33)<8?30:29}getEras(){return["AP"]}getYearsInEra(){return 9377}constructor(){this.identifier="persian"}}const R3=78,wD=80;class nU extends Nl{fromJulianDay(t){let i=super.fromJulianDay(t),c=i.year-R3,h=t-Ug(i.era,i.year,1,1),_;h<wD?(c--,_=mm(i.year-1)?31:30,h+=_+155+90+10):(_=mm(i.year)?31:30,h-=wD);let w,a;if(h<_)w=1,a=h+1;else{let A=h-_;A<155?(w=Math.floor(A/31)+2,a=A%31+1):(A-=155,w=Math.floor(A/30)+7,a=A%30+1)}return new Di(this,c,w,a)}toJulianDay(t){let i=t.year+R3,[c,h]=Bw(i),_,w;return mm(h)?(_=31,w=Ug(c,h,3,21)):(_=30,w=Ug(c,h,3,22)),t.month===1?w+t.day-1:(w+=_+Math.min(t.month-2,5)*31,t.month>=8&&(w+=(t.month-7)*30),w+=t.day-1,w)}getDaysInMonth(t){return t.month===1&&mm(t.year+R3)||t.month>=2&&t.month<=6?31:30}getYearsInEra(){return 9919}getEras(){return["saka"]}balanceDate(){}constructor(...t){super(...t),this.identifier="indian"}}const aw=1948440,SD=1948439,mu=1300,xy=1600,aU=460322;function iw(e,t,i,c){return c+Math.ceil(29.5*(i-1))+(t-1)*354+Math.floor((3+11*t)/30)+e-1}function Mk(e,t,i){let c=Math.floor((30*(i-t)+10646)/10631),h=Math.min(12,Math.ceil((i-(29+iw(t,c,1,1)))/29.5)+1),_=i-iw(t,c,h,1)+1;return new Di(e,c,h,_)}function TD(e){return(14+11*e)%30<11}class b5{fromJulianDay(t){return Mk(this,aw,t)}toJulianDay(t){return iw(aw,t.year,t.month,t.day)}getDaysInMonth(t){let i=29+t.month%2;return t.month===12&&TD(t.year)&&i++,i}getMonthsInYear(){return 12}getDaysInYear(t){return TD(t.year)?355:354}getYearsInEra(){return 9665}getEras(){return["AH"]}constructor(){this.identifier="islamic-civil"}}class iU extends b5{fromJulianDay(t){return Mk(this,SD,t)}toJulianDay(t){return iw(SD,t.year,t.month,t.day)}constructor(...t){super(...t),this.identifier="islamic-tbla"}}const sU="qgpUDckO1AbqBmwDrQpVBakGkgepC9QF2gpcBS0NlQZKB1QLagutBa4ETwoXBYsGpQbVCtYCWwmdBE0KJg2VDawFtgm6AlsKKwWVCsoG6Qr0AnYJtgJWCcoKpAvSC9kF3AJtCU0FpQpSC6ULtAW2CVcFlwJLBaMGUgdlC2oFqworBZUMSg2lDcoF1gpXCasESwmlClILagt1BXYCtwhbBFUFqQW0BdoJ3QRuAjYJqgpUDbIN1QXaAlsJqwRVCkkLZAtxC7QFtQpVCiUNkg7JDtQG6QprCasEkwpJDaQNsg25CroEWworBZUKKgtVC1wFvQQ9Ah0JlQpKC1oLbQW2AjsJmwRVBqkGVAdqC2wFrQpVBSkLkgupC9QF2gpaBasKlQVJB2QHqgu1BbYCVgpNDiULUgtqC60FrgIvCZcESwalBqwG1gpdBZ0ETQoWDZUNqgW1BdoCWwmtBJUFygbkBuoK9QS2AlYJqgpUC9IL2QXqAm0JrQSVCkoLpQuyBbUJ1gSXCkcFkwZJB1ULagVrCisFiwpGDaMNygXWCtsEawJLCaUKUgtpC3UFdgG3CFsCKwVlBbQF2gntBG0BtgimClINqQ3UBdoKWwmrBFMGKQdiB6kLsgW1ClUFJQuSDckO0gbpCmsFqwRVCikNVA2qDbUJugQ7CpsETQqqCtUK2gJdCV4ELgqaDFUNsga5BroEXQotBZUKUguoC7QLuQXaAloJSgukDdEO6AZqC20FNQWVBkoNqA3UDdoGWwWdAisGFQtKC5ULqgWuCi4JjwwnBZUGqgbWCl0FnQI=";let Q4,Uy;function N1(e){return aU+Uy[e-mu]}function Nv(e,t){let i=e-mu,c=1<<11-(t-1);return(Q4[i]&c)===0?29:30}function ED(e,t){let i=N1(e);for(let c=1;c<t;c++)i+=Nv(e,c);return i}function CD(e){return Uy[e+1-mu]-Uy[e-mu]}class oU extends b5{fromJulianDay(t){let i=t-aw,c=N1(mu),h=N1(xy);if(i<c||i>h)return super.fromJulianDay(t);{let _=mu-1,w=1,a=1;for(;a>0;){_++,a=i-N1(_)+1;let A=CD(_);if(a===A){w=12;break}else if(a<A){let B=Nv(_,w);for(w=1;a>B;)a-=B,w++,B=Nv(_,w);break}}return new Di(this,_,w,i-ED(_,w)+1)}}toJulianDay(t){return t.year<mu||t.year>xy?super.toJulianDay(t):aw+ED(t.year,t.month)+(t.day-1)}getDaysInMonth(t){return t.year<mu||t.year>xy?super.getDaysInMonth(t):Nv(t.year,t.month)}getDaysInYear(t){return t.year<mu||t.year>xy?super.getDaysInYear(t):CD(t.year)}constructor(){if(super(),this.identifier="islamic-umalqura",Q4||(Q4=new Uint16Array(Uint8Array.from(atob(sU),t=>t.charCodeAt(0)).buffer)),!Uy){Uy=new Uint32Array(xy-mu+1);let t=0;for(let i=mu;i<=xy;i++){Uy[i-mu]=t;for(let c=1;c<=12;c++)t+=Nv(i,c)}}}}const DD=347997,Ak=1080,kk=24*Ak,lU=29,cU=12*Ak+793,uU=lU*kk+cU;function Fg(e){return Fy(e*7+1,19)<7}function j1(e){let t=Math.floor((235*e-234)/19),i=12084+13753*t,c=t*29+Math.floor(i/25920);return Fy(3*(c+1),7)<3&&(c+=1),c}function dU(e){let t=j1(e-1),i=j1(e);return j1(e+1)-i===356?2:i-t===382?1:0}function Wv(e){return j1(e)+dU(e)}function Rk(e){return Wv(e+1)-Wv(e)}function hU(e){let t=Rk(e);switch(t>380&&(t-=30),t){case 353:return 0;case 354:return 1;case 355:return 2}}function f1(e,t){if(t>=6&&!Fg(e)&&t++,t===4||t===7||t===9||t===11||t===13)return 29;let i=hU(e);return t===2?i===2?30:29:t===3?i===0?29:30:t===6?Fg(e)?30:0:30}class fU{fromJulianDay(t){let i=t-DD,c=i*kk/uU,h=Math.floor((19*c+234)/235)+1,_=Wv(h),w=Math.floor(i-_);for(;w<1;)h--,_=Wv(h),w=Math.floor(i-_);let a=1,A=0;for(;A<w;)A+=f1(h,a),a++;a--,A-=f1(h,a);let B=w-A;return new Di(this,h,a,B)}toJulianDay(t){let i=Wv(t.year);for(let c=1;c<t.month;c++)i+=f1(t.year,c);return i+t.day+DD}getDaysInMonth(t){return f1(t.year,t.month)}getMonthsInYear(t){return Fg(t.year)?13:12}getDaysInYear(t){return Rk(t.year)}getYearsInEra(){return 9999}getEras(){return["AM"]}balanceYearMonth(t,i){i.year!==t.year&&(Fg(i.year)&&!Fg(t.year)&&i.month>6?t.month--:!Fg(i.year)&&Fg(t.year)&&i.month>6&&t.month++)}constructor(){this.identifier="hebrew"}}const eS=1723856,PD=1824665,tS=5500;function sw(e,t,i,c){return e+365*t+Math.floor(t/4)+30*(i-1)+c-1}function w5(e,t){let i=Math.floor(4*(t-e)/1461),c=1+Math.floor((t-sw(e,i,1,1))/30),h=t+1-sw(e,i,c,1);return[i,c,h]}function Ik(e){return Math.floor(e%4/3)}function zk(e,t){return t%13!==0?30:Ik(e)+5}class S5{fromJulianDay(t){let[i,c,h]=w5(eS,t),_="AM";return i<=0&&(_="AA",i+=tS),new Di(this,_,i,c,h)}toJulianDay(t){let i=t.year;return t.era==="AA"&&(i-=tS),sw(eS,i,t.month,t.day)}getDaysInMonth(t){return zk(t.year,t.month)}getMonthsInYear(){return 13}getDaysInYear(t){return 365+Ik(t.year)}getYearsInEra(t){return t.era==="AA"?9999:9991}getEras(){return["AA","AM"]}constructor(){this.identifier="ethiopic"}}class pU extends S5{fromJulianDay(t){let[i,c,h]=w5(eS,t);return i+=tS,new Di(this,"AA",i,c,h)}getEras(){return["AA"]}getYearsInEra(){return 9999}constructor(...t){super(...t),this.identifier="ethioaa"}}class mU extends S5{fromJulianDay(t){let[i,c,h]=w5(PD,t),_="CE";return i<=0&&(_="BCE",i=1-i),new Di(this,_,i,c,h)}toJulianDay(t){let i=t.year;return t.era==="BCE"&&(i=1-i),sw(PD,i,t.month,t.day)}getDaysInMonth(t){let i=t.year;return t.era==="BCE"&&(i=1-i),zk(i,t.month)}isInverseEra(t){return t.era==="BCE"}balanceDate(t){t.year<=0&&(t.era=t.era==="BCE"?"CE":"BCE",t.year=1-t.year)}getEras(){return["BCE","CE"]}getYearsInEra(t){return t.era==="BCE"?9999:9715}constructor(...t){super(...t),this.identifier="coptic"}}function ow(e){switch(e){case"buddhist":return new eU;case"ethiopic":return new S5;case"ethioaa":return new pU;case"coptic":return new mU;case"hebrew":return new fU;case"indian":return new nU;case"islamic-civil":return new b5;case"islamic-tbla":return new iU;case"islamic-umalqura":return new oU;case"japanese":return new QV;case"persian":return new rU;case"roc":return new tU;case"gregory":default:return new Nl}}let I3=new Map;class gd{format(t){return this.formatter.format(t)}formatToParts(t){return this.formatter.formatToParts(t)}formatRange(t,i){if(typeof this.formatter.formatRange=="function")return this.formatter.formatRange(t,i);if(i<t)throw new RangeError("End date must be >= start date");return`${this.formatter.format(t)} – ${this.formatter.format(i)}`}formatRangeToParts(t,i){if(typeof this.formatter.formatRangeToParts=="function")return this.formatter.formatRangeToParts(t,i);if(i<t)throw new RangeError("End date must be >= start date");let c=this.formatter.formatToParts(t),h=this.formatter.formatToParts(i);return[...c.map(_=>({..._,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...h.map(_=>({..._,source:"endRange"}))]}resolvedOptions(){let t=this.formatter.resolvedOptions();return xU()&&(this.resolvedHourCycle||(this.resolvedHourCycle=vU(t.locale,this.options)),t.hourCycle=this.resolvedHourCycle,t.hour12=this.resolvedHourCycle==="h11"||this.resolvedHourCycle==="h12"),t.calendar==="ethiopic-amete-alem"&&(t.calendar="ethioaa"),t}constructor(t,i={}){this.formatter=Lk(t,i),this.options=i}}const gU={true:{ja:"h11"},false:{}};function Lk(e,t={}){if(typeof t.hour12=="boolean"&&yU()){t={...t};let h=gU[String(t.hour12)][e.split("-")[0]],_=t.hour12?"h12":"h23";t.hourCycle=h??_,delete t.hour12}let i=e+(t?Object.entries(t).sort((h,_)=>h[0]<_[0]?-1:1).join():"");if(I3.has(i))return I3.get(i);let c=new Intl.DateTimeFormat(e,t);return I3.set(i,c),c}let z3=null;function yU(){return z3==null&&(z3=new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!1}).format(new Date(2020,2,3,0))==="24"),z3}let L3=null;function xU(){return L3==null&&(L3=new Intl.DateTimeFormat("fr",{hour:"numeric",hour12:!1}).resolvedOptions().hourCycle==="h12"),L3}function vU(e,t){if(!t.timeStyle&&!t.hour)return;e=e.replace(/(-u-)?-nu-[a-zA-Z0-9]+/,""),e+=(e.includes("-u-")?"":"-u")+"-nu-latn";let i=Lk(e,{...t,timeZone:void 0}),c=parseInt(i.formatToParts(new Date(2020,2,3,0)).find(_=>_.type==="hour").value,10),h=parseInt(i.formatToParts(new Date(2020,2,3,23)).find(_=>_.type==="hour").value,10);if(c===0&&h===23)return"h23";if(c===24&&h===23)return"h24";if(c===0&&h===11)return"h11";if(c===12&&h===11)return"h12";throw new Error("Unexpected hour cycle result")}const si=typeof document<"u"?rn.useLayoutEffect:()=>{};function Zs(e){const t=V.useRef(null);return si(()=>{t.current=e},[e]),V.useCallback((...i)=>{const c=t.current;return c==null?void 0:c(...i)},[])}function _U(e){let[t,i]=V.useState(e),c=V.useRef(null),h=Zs(()=>{if(!c.current)return;let w=c.current.next();if(w.done){c.current=null;return}t===w.value?h():i(w.value)});si(()=>{c.current&&h()});let _=Zs(w=>{c.current=w(t),h()});return[t,_]}let bU=!!(typeof window<"u"&&window.document&&window.document.createElement),Gy=new Map,MD=new FinalizationRegistry(e=>{Gy.delete(e)});function Bs(e){let[t,i]=V.useState(e),c=V.useRef(null),h=hV(t),_=V.useRef(null);if(MD.register(_,h),bU){const w=Gy.get(h);w&&!w.includes(c)?w.push(c):Gy.set(h,[c])}return si(()=>{let w=h;return()=>{MD.unregister(_),Gy.delete(w)}},[h]),V.useEffect(()=>{let w=c.current;return w&&i(w),()=>{w&&(c.current=null)}}),h}function wU(e,t){if(e===t)return e;let i=Gy.get(e);if(i)return i.forEach(h=>h.current=t),t;let c=Gy.get(t);return c?(c.forEach(h=>h.current=e),e):t}function vm(e=[]){let t=Bs(),[i,c]=_U(t),h=V.useCallback(()=>{c(function*(){yield t,yield document.getElementById(t)?t:void 0})},[t,c]);return si(h,[t,h,...e]),i}function qi(...e){return(...t)=>{for(let i of e)typeof i=="function"&&i(...t)}}const Ga=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},Dc=e=>e&&"window"in e&&e.window===e?e:Ga(e).defaultView||window;function SU(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function TU(e){return SU(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let EU=!1;function l0(){return EU}function ji(e,t){if(!l0())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let i=t;for(;i!==null;){if(i===e)return!0;i.tagName==="SLOT"&&i.assignedSlot?i=i.assignedSlot.parentNode:TU(i)?i=i.host:i=i.parentNode}return!1}const bo=(e=document)=>{var t;if(!l0())return e.activeElement;let i=e.activeElement;for(;i&&"shadowRoot"in i&&(!((t=i.shadowRoot)===null||t===void 0)&&t.activeElement);)i=i.shadowRoot.activeElement;return i};function Va(e){return l0()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}class CU{get currentNode(){return this._currentNode}set currentNode(t){if(!ji(this.root,t))throw new Error("Cannot set currentNode to a node that is not contained by the root node.");const i=[];let c=t,h=t;for(this._currentNode=t;c&&c!==this.root;)if(c.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const w=c,a=this._doc.createTreeWalker(w,this.whatToShow,{acceptNode:this._acceptNode});i.push(a),a.currentNode=h,this._currentSetFor.add(a),c=h=w.host}else c=c.parentNode;const _=this._doc.createTreeWalker(this.root,this.whatToShow,{acceptNode:this._acceptNode});i.push(_),_.currentNode=h,this._currentSetFor.add(_),this._walkerStack=i}get doc(){return this._doc}firstChild(){let t=this.currentNode,i=this.nextNode();return ji(t,i)?(i&&(this.currentNode=i),i):(this.currentNode=t,null)}lastChild(){let i=this._walkerStack[0].lastChild();return i&&(this.currentNode=i),i}nextNode(){const t=this._walkerStack[0].nextNode();if(t){if(t.shadowRoot){var i;let h;if(typeof this.filter=="function"?h=this.filter(t):!((i=this.filter)===null||i===void 0)&&i.acceptNode&&(h=this.filter.acceptNode(t)),h===NodeFilter.FILTER_ACCEPT)return this.currentNode=t,t;let _=this.nextNode();return _&&(this.currentNode=_),_}return t&&(this.currentNode=t),t}else if(this._walkerStack.length>1){this._walkerStack.shift();let c=this.nextNode();return c&&(this.currentNode=c),c}else return null}previousNode(){const t=this._walkerStack[0];if(t.currentNode===t.root){if(this._currentSetFor.has(t))if(this._currentSetFor.delete(t),this._walkerStack.length>1){this._walkerStack.shift();let h=this.previousNode();return h&&(this.currentNode=h),h}else return null;return null}const i=t.previousNode();if(i){if(i.shadowRoot){var c;let _;if(typeof this.filter=="function"?_=this.filter(i):!((c=this.filter)===null||c===void 0)&&c.acceptNode&&(_=this.filter.acceptNode(i)),_===NodeFilter.FILTER_ACCEPT)return i&&(this.currentNode=i),i;let w=this.lastChild();return w&&(this.currentNode=w),w}return i&&(this.currentNode=i),i}else if(this._walkerStack.length>1){this._walkerStack.shift();let h=this.previousNode();return h&&(this.currentNode=h),h}else return null}nextSibling(){return null}previousSibling(){return null}parentNode(){return null}constructor(t,i,c,h){this._walkerStack=[],this._currentSetFor=new Set,this._acceptNode=w=>{if(w.nodeType===Node.ELEMENT_NODE){const A=w.shadowRoot;if(A){const B=this._doc.createTreeWalker(A,this.whatToShow,{acceptNode:this._acceptNode});return this._walkerStack.unshift(B),NodeFilter.FILTER_ACCEPT}else{var a;if(typeof this.filter=="function")return this.filter(w);if(!((a=this.filter)===null||a===void 0)&&a.acceptNode)return this.filter.acceptNode(w);if(this.filter===null)return NodeFilter.FILTER_ACCEPT}}return NodeFilter.FILTER_SKIP},this._doc=t,this.root=i,this.filter=h??null,this.whatToShow=c??NodeFilter.SHOW_ALL,this._currentNode=i,this._walkerStack.unshift(t.createTreeWalker(i,c,this._acceptNode));const _=i.shadowRoot;if(_){const w=this._doc.createTreeWalker(_,this.whatToShow,{acceptNode:this._acceptNode});this._walkerStack.unshift(w)}}}function DU(e,t,i,c){return l0()?new CU(e,t,i,c):e.createTreeWalker(t,i,c)}function $k(e){var t,i,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(t=0;t<h;t++)e[t]&&(i=$k(e[t]))&&(c&&(c+=" "),c+=i)}else for(i in e)e[i]&&(c&&(c+=" "),c+=i);return c}function PU(){for(var e,t,i=0,c="",h=arguments.length;i<h;i++)(e=arguments[i])&&(t=$k(e))&&(c&&(c+=" "),c+=t);return c}function xr(...e){let t={...e[0]};for(let i=1;i<e.length;i++){let c=e[i];for(let h in c){let _=t[h],w=c[h];typeof _=="function"&&typeof w=="function"&&h[0]==="o"&&h[1]==="n"&&h.charCodeAt(2)>=65&&h.charCodeAt(2)<=90?t[h]=qi(_,w):(h==="className"||h==="UNSAFE_className")&&typeof _=="string"&&typeof w=="string"?t[h]=PU(_,w):h==="id"&&_&&w?t.id=wU(_,w):t[h]=w!==void 0?w:_}}return t}function T5(...e){return e.length===1&&e[0]?e[0]:t=>{for(let i of e)typeof i=="function"?i(t):i!=null&&(i.current=t)}}const MU=new Set(["id"]),AU=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),kU=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),RU=/^(data-.*)$/;function Fl(e,t={}){let{labelable:i,isLink:c,propNames:h}=t,_={};for(const w in e)Object.prototype.hasOwnProperty.call(e,w)&&(MU.has(w)||i&&AU.has(w)||c&&kU.has(w)||h!=null&&h.has(w)||RU.test(w))&&(_[w]=e[w]);return _}function pl(e){if(IU())e.focus({preventScroll:!0});else{let t=zU(e);e.focus(),LU(t)}}let p1=null;function IU(){if(p1==null){p1=!1;try{document.createElement("div").focus({get preventScroll(){return p1=!0,!0}})}catch{}}return p1}function zU(e){let t=e.parentNode,i=[],c=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==c;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&i.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return c instanceof HTMLElement&&i.push({element:c,scrollTop:c.scrollTop,scrollLeft:c.scrollLeft}),i}function LU(e){for(let{element:t,scrollTop:i,scrollLeft:c}of e)t.scrollTop=i,t.scrollLeft=c}function Ow(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(i=>e.test(i.brand)))||e.test(window.navigator.userAgent)}function E5(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Vf(e){let t=null;return()=>(t==null&&(t=e()),t)}const bm=Vf(function(){return E5(/^Mac/i)}),Bk=Vf(function(){return E5(/^iPhone/i)}),Nk=Vf(function(){return E5(/^iPad/i)||bm()&&navigator.maxTouchPoints>1}),Mm=Vf(function(){return Bk()||Nk()}),$U=Vf(function(){return bm()||Mm()}),jk=Vf(function(){return Ow(/AppleWebKit/i)&&!Ok()}),Ok=Vf(function(){return Ow(/Chrome/i)}),fx=Vf(function(){return Ow(/Android/i)}),BU=Vf(function(){return Ow(/Firefox/i)}),Fk=V.createContext({isNative:!0,open:OU,useHref:e=>e});function NU(e){let{children:t,navigate:i,useHref:c}=e,h=V.useMemo(()=>({isNative:!1,open:(_,w,a,A)=>{Vk(_,B=>{jU(B,w)?i(a,A):wm(B,w)})},useHref:c||(_=>_)}),[i,c]);return rn.createElement(Fk.Provider,{value:h},t)}function Fw(){return V.useContext(Fk)}function jU(e,t){let i=e.getAttribute("target");return(!i||i==="_self")&&e.origin===location.origin&&!e.hasAttribute("download")&&!t.metaKey&&!t.ctrlKey&&!t.altKey&&!t.shiftKey}function wm(e,t,i=!0){var c,h;let{metaKey:_,ctrlKey:w,altKey:a,shiftKey:A}=t;BU()&&(!((h=window.event)===null||h===void 0||(c=h.type)===null||c===void 0)&&c.startsWith("key"))&&e.target==="_blank"&&(bm()?_=!0:w=!0);let B=jk()&&bm()&&!Nk()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:_,ctrlKey:w,altKey:a,shiftKey:A}):new MouseEvent("click",{metaKey:_,ctrlKey:w,altKey:a,shiftKey:A,bubbles:!0,cancelable:!0});wm.isOpening=i,pl(e),e.dispatchEvent(B),wm.isOpening=!1}wm.isOpening=!1;function Vk(e,t){if(e instanceof HTMLAnchorElement)t(e);else if(e.hasAttribute("data-href")){let i=document.createElement("a");i.href=e.getAttribute("data-href"),e.hasAttribute("data-target")&&(i.target=e.getAttribute("data-target")),e.hasAttribute("data-rel")&&(i.rel=e.getAttribute("data-rel")),e.hasAttribute("data-download")&&(i.download=e.getAttribute("data-download")),e.hasAttribute("data-ping")&&(i.ping=e.getAttribute("data-ping")),e.hasAttribute("data-referrer-policy")&&(i.referrerPolicy=e.getAttribute("data-referrer-policy")),e.appendChild(i),t(i),e.removeChild(i)}}function OU(e,t){Vk(e,i=>wm(i,t))}function FU(e){let t=Fw();var i;const c=t.useHref((i=e==null?void 0:e.href)!==null&&i!==void 0?i:"");return{href:e!=null&&e.href?c:void 0,target:e==null?void 0:e.target,rel:e==null?void 0:e.rel,download:e==null?void 0:e.download,ping:e==null?void 0:e.ping,referrerPolicy:e==null?void 0:e.referrerPolicy}}let Py=new Map,rS=new Set;function AD(){if(typeof window>"u")return;function e(c){return"propertyName"in c}let t=c=>{if(!e(c)||!c.target)return;let h=Py.get(c.target);h||(h=new Set,Py.set(c.target,h),c.target.addEventListener("transitioncancel",i,{once:!0})),h.add(c.propertyName)},i=c=>{if(!e(c)||!c.target)return;let h=Py.get(c.target);if(h&&(h.delete(c.propertyName),h.size===0&&(c.target.removeEventListener("transitioncancel",i),Py.delete(c.target)),Py.size===0)){for(let _ of rS)_();rS.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",i)}typeof document<"u"&&(document.readyState!=="loading"?AD():document.addEventListener("DOMContentLoaded",AD));function Uk(e){requestAnimationFrame(()=>{Py.size===0?e():rS.add(e)})}function Vw(){let e=V.useRef(new Map),t=V.useCallback((h,_,w,a)=>{let A=a!=null&&a.once?(...B)=>{e.current.delete(w),w(...B)}:w;e.current.set(w,{type:_,eventTarget:h,fn:A,options:a}),h.addEventListener(_,A,a)},[]),i=V.useCallback((h,_,w,a)=>{var A;let B=((A=e.current.get(w))===null||A===void 0?void 0:A.fn)||w;h.removeEventListener(_,B,a),e.current.delete(w)},[]),c=V.useCallback(()=>{e.current.forEach((h,_)=>{i(h.eventTarget,h.type,_,h.options)})},[i]);return V.useEffect(()=>c,[c]),{addGlobalListener:t,removeGlobalListener:i,removeAllGlobalListeners:c}}function C_(e,t){let{id:i,"aria-label":c,"aria-labelledby":h}=e;return i=Bs(i),h&&c?h=[...new Set([i,...h.trim().split(/\s+/)])].join(" "):h&&(h=h.trim().split(/\s+/).join(" ")),!c&&!h&&t&&(c=t),{id:i,"aria-label":c,"aria-labelledby":h}}function VU(e){const t=V.useRef(null);return V.useMemo(()=>({get current(){return t.current},set current(i){t.current=i,typeof e=="function"?e(i):e&&(e.current=i)}}),[e])}function kD(e,t){const i=V.useRef(!0),c=V.useRef(null);V.useEffect(()=>(i.current=!0,()=>{i.current=!1}),[]),V.useEffect(()=>{let h=c.current;i.current?i.current=!1:(!h||t.some((_,w)=>!Object.is(_,h[w])))&&e(),c.current=t},t)}function RD(e,t){const i=V.useRef(!0),c=V.useRef(null);si(()=>(i.current=!0,()=>{i.current=!1}),[]),si(()=>{i.current?i.current=!1:(!c.current||t.some((h,_)=>!Object.is(h,c[_])))&&e(),c.current=t},t)}function UU(){return typeof window.ResizeObserver<"u"}function ID(e){const{ref:t,box:i,onResize:c}=e;V.useEffect(()=>{let h=t==null?void 0:t.current;if(h)if(UU()){const _=new window.ResizeObserver(w=>{w.length&&c()});return _.observe(h,{box:i}),()=>{h&&_.unobserve(h)}}else return window.addEventListener("resize",c,!1),()=>{window.removeEventListener("resize",c,!1)}},[c,t,i])}function Gk(e,t){si(()=>{if(e&&e.ref&&t)return e.ref.current=t.current,()=>{e.ref&&(e.ref.current=null)}})}function s_(e,t){if(!e)return!1;let i=window.getComputedStyle(e),c=/(auto|scroll)/.test(i.overflow+i.overflowX+i.overflowY);return c&&t&&(c=e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth),c}function Uw(e,t){let i=e;for(s_(i,t)&&(i=i.parentElement);i&&!s_(i,t);)i=i.parentElement;return i||document.scrollingElement||document.documentElement}function GU(e,t){const i=[];for(;e&&e!==document.documentElement;)s_(e,t)&&i.push(e),e=e.parentElement;return i}let gu=typeof document<"u"&&window.visualViewport;function HU(){let e=o0(),[t,i]=V.useState(()=>e?{width:0,height:0}:zD());return V.useEffect(()=>{let c=()=>{i(h=>{let _=zD();return _.width===h.width&&_.height===h.height?h:_})};return gu?gu.addEventListener("resize",c):window.addEventListener("resize",c),()=>{gu?gu.removeEventListener("resize",c):window.removeEventListener("resize",c)}},[]),t}function zD(){return{width:gu&&(gu==null?void 0:gu.width)||window.innerWidth,height:gu&&(gu==null?void 0:gu.height)||window.innerHeight}}let qU=0;const $3=new Map;function Gw(e){let[t,i]=V.useState();return si(()=>{if(!e)return;let c=$3.get(e);if(c)i(c.element.id);else{let h=`react-aria-description-${qU++}`;i(h);let _=document.createElement("div");_.id=h,_.style.display="none",_.textContent=e,document.body.appendChild(_),c={refCount:0,element:_},$3.set(e,c)}return c.refCount++,()=>{c&&--c.refCount===0&&(c.element.remove(),$3.delete(e))}},[e]),{"aria-describedby":e?t:void 0}}function gm(e,t,i,c){let h=Zs(i),_=i==null;V.useEffect(()=>{if(_||!e.current)return;let w=e.current;return w.addEventListener(t,h,c),()=>{w.removeEventListener(t,h,c)}},[e,t,c,_,h])}function Hk(e,t){let i=LD(e,t,"left"),c=LD(e,t,"top"),h=t.offsetWidth,_=t.offsetHeight,w=e.scrollLeft,a=e.scrollTop,{borderTopWidth:A,borderLeftWidth:B,scrollPaddingTop:N,scrollPaddingRight:F,scrollPaddingBottom:G,scrollPaddingLeft:Q}=getComputedStyle(e),te=w+parseInt(B,10),Y=a+parseInt(A,10),oe=te+e.clientWidth,de=Y+e.clientHeight,me=parseInt(N,10)||0,be=parseInt(G,10)||0,pe=parseInt(F,10)||0,Se=parseInt(Q,10)||0;i<=w+Se?w=i-parseInt(B,10)-Se:i+h>oe-pe&&(w+=i+h-oe+pe),c<=Y+me?a=c-parseInt(A,10)-me:c+_>de-be&&(a+=c+_-de+be),e.scrollLeft=w,e.scrollTop=a}function LD(e,t,i){const c=i==="left"?"offsetLeft":"offsetTop";let h=0;for(;t.offsetParent&&(h+=t[c],t.offsetParent!==e);){if(t.offsetParent.contains(e)){h-=e[c];break}t=t.offsetParent}return h}function lw(e,t){if(e&&document.contains(e)){let w=document.scrollingElement||document.documentElement;if(window.getComputedStyle(w).overflow==="hidden"){let A=GU(e);for(let B of A)Hk(B,e)}else{var i;let{left:A,top:B}=e.getBoundingClientRect();e==null||(i=e.scrollIntoView)===null||i===void 0||i.call(e,{block:"nearest"});let{left:N,top:F}=e.getBoundingClientRect();if(Math.abs(A-N)>1||Math.abs(B-F)>1){var c,h,_;t==null||(h=t.containingElement)===null||h===void 0||(c=h.scrollIntoView)===null||c===void 0||c.call(h,{block:"center",inline:"center"}),(_=e.scrollIntoView)===null||_===void 0||_.call(e,{block:"nearest"})}}}}function nS(e){return e.mozInputSource===0&&e.isTrusted?!0:fx()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function WU(e){return!fx()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}function qk(e,t){let i=V.useRef(null);return e&&i.current&&t(e,i.current)&&(e=i.current),i.current=e,e}function D_(e,t,i){let c=V.useRef(t),h=Zs(()=>{i&&i(c.current)});V.useEffect(()=>{var _;let w=e==null||(_=e.current)===null||_===void 0?void 0:_.form;return w==null||w.addEventListener("reset",h),()=>{w==null||w.removeEventListener("reset",h)}},[e,h])}const KU="react-aria-clear-focus",ZU="react-aria-focus";function My(e){return bm()?e.metaKey:e.ctrlKey}const C5=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])'],XU=C5.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";C5.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const YU=C5.join(':not([hidden]):not([tabindex="-1"]),');function Wk(e){return e.matches(XU)}function JU(e){return e.matches(YU)}function Xs(e,t,i){let[c,h]=V.useState(e||t),_=V.useRef(e!==void 0),w=e!==void 0;V.useEffect(()=>{let B=_.current;B!==w&&console.warn(`WARN: A component changed from ${B?"controlled":"uncontrolled"} to ${w?"controlled":"uncontrolled"}.`),_.current=w},[w]);let a=w?e:c,A=V.useCallback((B,...N)=>{let F=(G,...Q)=>{i&&(Object.is(a,G)||i(G,...Q)),w||(a=G)};typeof B=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),h((Q,...te)=>{let Y=B(w?a:Q,...te);return F(Y,...N),w?Q:Y})):(w||h(B),F(B,...N))},[w,a,i]);return[a,A]}function Wg(e,t=-1/0,i=1/0){return Math.min(Math.max(e,t),i)}function m1(e,t){let i=e,c=t.toString(),h=c.indexOf("."),_=h>=0?c.length-h:0;if(_>0){let w=Math.pow(10,_);i=Math.round(i*w)/w}return i}function Tf(e,t,i,c){t=Number(t),i=Number(i);let h=(e-(isNaN(t)?0:t))%c,_=m1(Math.abs(h)*2>=c?e+Math.sign(h)*(c-Math.abs(h)):e-h,c);return isNaN(t)?!isNaN(i)&&_>i&&(_=Math.floor(m1(i/c,c))*c):_<t?_=t:!isNaN(i)&&_>i&&(_=t+Math.floor(m1((i-t)/c,c))*c),_=m1(_,c),_}function ml(e){e=qk(e??{},QU);let{locale:t}=Ms();return V.useMemo(()=>new gd(t,e),[t,e])}function QU(e,t){if(e===t)return!0;let i=Object.keys(e),c=Object.keys(t);if(i.length!==c.length)return!1;for(let h of i)if(t[h]!==e[h])return!1;return!0}let B3=new Map,aS=!1;try{aS=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let cw=!1;try{cw=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const Kk={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class uw{format(t){let i="";if(!aS&&this.options.signDisplay!=null?i=tG(this.numberFormatter,this.options.signDisplay,t):i=this.numberFormatter.format(t),this.options.style==="unit"&&!cw){var c;let{unit:h,unitDisplay:_="short",locale:w}=this.resolvedOptions();if(!h)return i;let a=(c=Kk[h])===null||c===void 0?void 0:c[_];i+=a[w]||a.default}return i}formatToParts(t){return this.numberFormatter.formatToParts(t)}formatRange(t,i){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(t,i);if(i<t)throw new RangeError("End date must be >= start date");return`${this.format(t)} – ${this.format(i)}`}formatRangeToParts(t,i){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(t,i);if(i<t)throw new RangeError("End date must be >= start date");let c=this.numberFormatter.formatToParts(t),h=this.numberFormatter.formatToParts(i);return[...c.map(_=>({..._,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...h.map(_=>({..._,source:"endRange"}))]}resolvedOptions(){let t=this.numberFormatter.resolvedOptions();return!aS&&this.options.signDisplay!=null&&(t={...t,signDisplay:this.options.signDisplay}),!cw&&this.options.style==="unit"&&(t={...t,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),t}constructor(t,i={}){this.numberFormatter=eG(t,i),this.options=i}}function eG(e,t={}){let{numberingSystem:i}=t;if(i&&e.includes("-nu-")&&(e.includes("-u-")||(e+="-u-"),e+=`-nu-${i}`),t.style==="unit"&&!cw){var c;let{unit:w,unitDisplay:a="short"}=t;if(!w)throw new Error('unit option must be provided with style: "unit"');if(!(!((c=Kk[w])===null||c===void 0)&&c[a]))throw new Error(`Unsupported unit ${w} with unitDisplay = ${a}`);t={...t,style:"decimal"}}let h=e+(t?Object.entries(t).sort((w,a)=>w[0]<a[0]?-1:1).join():"");if(B3.has(h))return B3.get(h);let _=new Intl.NumberFormat(e,t);return B3.set(h,_),_}function tG(e,t,i){if(t==="auto")return e.format(i);if(t==="never")return e.format(Math.abs(i));{let c=!1;if(t==="always"?c=i>0||Object.is(i,0):t==="exceptZero"&&(Object.is(i,-0)||Object.is(i,0)?i=Math.abs(i):c=i>0),c){let h=e.format(-i),_=e.format(i),w=h.replace(_,"").replace(/\u200e|\u061C/,"");return[...w].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),h.replace(_,"!!!").replace(w,"+").replace("!!!",_)}else return e.format(i)}}const rG=new RegExp("^.*\\(.*\\).*$"),nG=["latn","arab","hanidec","deva","beng"];class D5{parse(t){return N3(this.locale,this.options,t).parse(t)}isValidPartialNumber(t,i,c){return N3(this.locale,this.options,t).isValidPartialNumber(t,i,c)}getNumberingSystem(t){return N3(this.locale,this.options,t).options.numberingSystem}constructor(t,i={}){this.locale=t,this.options=i}}const $D=new Map;function N3(e,t,i){let c=BD(e,t);if(!e.includes("-nu-")&&!c.isValidPartialNumber(i)){for(let h of nG)if(h!==c.options.numberingSystem){let _=BD(e+(e.includes("-u-")?"-nu-":"-u-nu-")+h,t);if(_.isValidPartialNumber(i))return _}}return c}function BD(e,t){let i=e+(t?Object.entries(t).sort((h,_)=>h[0]<_[0]?-1:1).join():""),c=$D.get(i);return c||(c=new aG(e,t),$D.set(i,c)),c}class aG{parse(t){let i=this.sanitize(t);if(this.symbols.group&&(i=g1(i,this.symbols.group,"")),this.symbols.decimal&&(i=i.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(i=i.replace(this.symbols.minusSign,"-")),i=i.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let w=i.indexOf("-");i=i.replace("-","");let a=i.indexOf(".");a===-1&&(a=i.length),i=i.replace(".",""),a-2===0?i=`0.${i}`:a-2===-1?i=`0.0${i}`:a-2===-2?i="0.00":i=`${i.slice(0,a-2)}.${i.slice(a-2)}`,w>-1&&(i=`-${i}`)}let c=i?+i:NaN;if(isNaN(c))return NaN;if(this.options.style==="percent"){var h,_;let w={...this.options,style:"decimal",minimumFractionDigits:Math.min(((h=this.options.minimumFractionDigits)!==null&&h!==void 0?h:0)+2,20),maximumFractionDigits:Math.min(((_=this.options.maximumFractionDigits)!==null&&_!==void 0?_:0)+2,20)};return new D5(this.locale,w).parse(new uw(this.locale,w).format(c))}return this.options.currencySign==="accounting"&&rG.test(t)&&(c=-1*c),c}sanitize(t){return t=t.replace(this.symbols.literals,""),this.symbols.minusSign&&(t=t.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(t=t.replace(",",this.symbols.decimal),t=t.replace("،",this.symbols.decimal)),this.symbols.group&&(t=g1(t,".",this.symbols.group))),this.options.locale==="fr-FR"&&(t=g1(t,"."," ")),t}isValidPartialNumber(t,i=-1/0,c=1/0){return t=this.sanitize(t),this.symbols.minusSign&&t.startsWith(this.symbols.minusSign)&&i<0?t=t.slice(this.symbols.minusSign.length):this.symbols.plusSign&&t.startsWith(this.symbols.plusSign)&&c>0&&(t=t.slice(this.symbols.plusSign.length)),this.symbols.group&&t.startsWith(this.symbols.group)||this.symbols.decimal&&t.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(t=g1(t,this.symbols.group,"")),t=t.replace(this.symbols.numeral,""),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,"")),t.length===0)}constructor(t,i={}){this.locale=t,this.formatter=new Intl.NumberFormat(t,i),this.options=this.formatter.resolvedOptions(),this.symbols=sG(t,this.formatter,this.options,i);var c,h;this.options.style==="percent"&&(((c=this.options.minimumFractionDigits)!==null&&c!==void 0?c:0)>18||((h=this.options.maximumFractionDigits)!==null&&h!==void 0?h:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const ND=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),iG=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function sG(e,t,i,c){var h,_,w,a;let A=new Intl.NumberFormat(e,{...i,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),B=A.formatToParts(-10000.111),N=A.formatToParts(10000.111),F=iG.map(se=>A.formatToParts(se));var G;let Q=(G=(h=B.find(se=>se.type==="minusSign"))===null||h===void 0?void 0:h.value)!==null&&G!==void 0?G:"-",te=(_=N.find(se=>se.type==="plusSign"))===null||_===void 0?void 0:_.value;!te&&((c==null?void 0:c.signDisplay)==="exceptZero"||(c==null?void 0:c.signDisplay)==="always")&&(te="+");let oe=(w=new Intl.NumberFormat(e,{...i,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(se=>se.type==="decimal"))===null||w===void 0?void 0:w.value,de=(a=B.find(se=>se.type==="group"))===null||a===void 0?void 0:a.value,me=B.filter(se=>!ND.has(se.type)).map(se=>jD(se.value)),be=F.flatMap(se=>se.filter(ue=>!ND.has(ue.type)).map(ue=>jD(ue.value))),pe=[...new Set([...me,...be])].sort((se,ue)=>ue.length-se.length),Se=pe.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${pe.join("|")}|[\\p{White_Space}]`,"gu"),$e=[...new Intl.NumberFormat(i.locale,{useGrouping:!1}).format(9876543210)].reverse(),Le=new Map($e.map((se,ue)=>[se,ue])),re=new RegExp(`[${$e.join("")}]`,"g");return{minusSign:Q,plusSign:te,decimal:oe,group:de,literals:Se,numeral:re,index:se=>String(Le.get(se))}}function g1(e,t,i){return e.replaceAll?e.replaceAll(t,i):e.split(t).join(i)}function jD(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function iS(e={}){let{locale:t}=Ms();return V.useMemo(()=>new uw(t,e),[t,e])}let j3=new Map;function Zk(e){let{locale:t}=Ms(),i=t+(e?Object.entries(e).sort((h,_)=>h[0]<_[0]?-1:1).join():"");if(j3.has(i))return j3.get(i);let c=new Intl.Collator(t,e);return j3.set(i,c),c}function oG(e){let t=Zk({usage:"search",...e}),i=V.useCallback((_,w)=>w.length===0?!0:(_=_.normalize("NFC"),w=w.normalize("NFC"),t.compare(_.slice(0,w.length),w)===0),[t]),c=V.useCallback((_,w)=>w.length===0?!0:(_=_.normalize("NFC"),w=w.normalize("NFC"),t.compare(_.slice(-w.length),w)===0),[t]),h=V.useCallback((_,w)=>{if(w.length===0)return!0;_=_.normalize("NFC"),w=w.normalize("NFC");let a=0,A=w.length;for(;a+A<=_.length;a++){let B=_.slice(a,a+A);if(t.compare(w,B)===0)return!0}return!1},[t]);return V.useMemo(()=>({startsWith:i,endsWith:c,contains:h}),[i,c,h])}const gh={top:"top",bottom:"top",left:"left",right:"left"},dw={top:"bottom",bottom:"top",left:"right",right:"left"},lG={top:"left",left:"top"},sS={top:"height",left:"width"},Xk={width:"totalWidth",height:"totalHeight"},y1={};let Ws=typeof document<"u"?window.visualViewport:null;function OD(e){let t=0,i=0,c=0,h=0,_=0,w=0,a={};var A;let B=((A=Ws==null?void 0:Ws.scale)!==null&&A!==void 0?A:1)>1;if(e.tagName==="BODY"){let te=document.documentElement;c=te.clientWidth,h=te.clientHeight;var N;t=(N=Ws==null?void 0:Ws.width)!==null&&N!==void 0?N:c;var F;i=(F=Ws==null?void 0:Ws.height)!==null&&F!==void 0?F:h,a.top=te.scrollTop||e.scrollTop,a.left=te.scrollLeft||e.scrollLeft,Ws&&(_=Ws.offsetTop,w=Ws.offsetLeft)}else({width:t,height:i,top:_,left:w}=Hy(e)),a.top=e.scrollTop,a.left=e.scrollLeft,c=t,h=i;if(jk()&&(e.tagName==="BODY"||e.tagName==="HTML")&&B){a.top=0,a.left=0;var G;_=(G=Ws==null?void 0:Ws.pageTop)!==null&&G!==void 0?G:0;var Q;w=(Q=Ws==null?void 0:Ws.pageLeft)!==null&&Q!==void 0?Q:0}return{width:t,height:i,totalWidth:c,totalHeight:h,scroll:a,top:_,left:w}}function cG(e){return{top:e.scrollTop,left:e.scrollLeft,width:e.scrollWidth,height:e.scrollHeight}}function FD(e,t,i,c,h,_,w){var a;let A=(a=h.scroll[e])!==null&&a!==void 0?a:0,B=c[sS[e]],N=c.scroll[gh[e]]+_,F=B+c.scroll[gh[e]]-_,G=t-A+w[e]-c[gh[e]],Q=t-A+i+w[e]-c[gh[e]];return G<N?N-G:Q>F?Math.max(F-Q,N-G):0}function uG(e){let t=window.getComputedStyle(e);return{top:parseInt(t.marginTop,10)||0,bottom:parseInt(t.marginBottom,10)||0,left:parseInt(t.marginLeft,10)||0,right:parseInt(t.marginRight,10)||0}}function VD(e){if(y1[e])return y1[e];let[t,i]=e.split(" "),c=gh[t]||"right",h=lG[c];gh[i]||(i="center");let _=sS[c],w=sS[h];return y1[e]={placement:t,crossPlacement:i,axis:c,crossAxis:h,size:_,crossSize:w},y1[e]}function O3(e,t,i,c,h,_,w,a,A,B){let{placement:N,crossPlacement:F,axis:G,crossAxis:Q,size:te,crossSize:Y}=c,oe={};var de;oe[Q]=(de=e[Q])!==null&&de!==void 0?de:0;var me,be,pe,Se;F==="center"?oe[Q]+=(((me=e[Y])!==null&&me!==void 0?me:0)-((be=i[Y])!==null&&be!==void 0?be:0))/2:F!==Q&&(oe[Q]+=((pe=e[Y])!==null&&pe!==void 0?pe:0)-((Se=i[Y])!==null&&Se!==void 0?Se:0)),oe[Q]+=_;const $e=e[Q]-i[Y]+A+B,Le=e[Q]+e[Y]-A-B;if(oe[Q]=Wg(oe[Q],$e,Le),N===G){const re=a?w[te]:t[Xk[te]];oe[dw[G]]=Math.floor(re-e[G]+h)}else oe[G]=Math.floor(e[G]+e[te]+h);return oe}function dG(e,t,i,c,h,_,w,a){const A=c?i.height:t[Xk.height];var B;let N=e.top!=null?i.top+e.top:i.top+(A-((B=e.bottom)!==null&&B!==void 0?B:0)-w);var F,G,Q,te,Y,oe;let de=a!=="top"?Math.max(0,t.height+t.top+((F=t.scroll.top)!==null&&F!==void 0?F:0)-N-(((G=h.top)!==null&&G!==void 0?G:0)+((Q=h.bottom)!==null&&Q!==void 0?Q:0)+_)):Math.max(0,N+w-(t.top+((te=t.scroll.top)!==null&&te!==void 0?te:0))-(((Y=h.top)!==null&&Y!==void 0?Y:0)+((oe=h.bottom)!==null&&oe!==void 0?oe:0)+_));return Math.min(t.height-_*2,de)}function UD(e,t,i,c,h,_){let{placement:w,axis:a,size:A}=_;var B,N;if(w===a)return Math.max(0,i[a]-e[a]-((B=e.scroll[a])!==null&&B!==void 0?B:0)+t[a]-((N=c[a])!==null&&N!==void 0?N:0)-c[dw[a]]-h);var F;return Math.max(0,e[A]+e[a]+e.scroll[a]-t[a]-i[a]-i[A]-((F=c[a])!==null&&F!==void 0?F:0)-c[dw[a]]-h)}function hG(e,t,i,c,h,_,w,a,A,B,N,F,G,Q,te,Y){let oe=VD(e),{size:de,crossAxis:me,crossSize:be,placement:pe,crossPlacement:Se}=oe,$e=O3(t,a,i,oe,N,F,B,G,te,Y),Le=N,re=UD(a,B,t,h,_+N,oe);if(w&&c[de]>re){let ot=VD(`${dw[pe]} ${Se}`),Pt=O3(t,a,i,ot,N,F,B,G,te,Y);UD(a,B,t,h,_+N,ot)>re&&(oe=ot,$e=Pt,Le=N)}let Ee="bottom";oe.axis==="top"?oe.placement==="top"?Ee="top":oe.placement==="bottom"&&(Ee="bottom"):oe.crossAxis==="top"&&(oe.crossPlacement==="top"?Ee="bottom":oe.crossPlacement==="bottom"&&(Ee="top"));let se=FD(me,$e[me],i[be],a,A,_,B);$e[me]+=se;let ue=dG($e,a,B,G,h,_,i.height,Ee);Q&&Q<ue&&(ue=Q),i.height=Math.min(i.height,ue),$e=O3(t,a,i,oe,Le,F,B,G,te,Y),se=FD(me,$e[me],i[be],a,A,_,B),$e[me]+=se;let ke={},ce=t[me]+.5*t[be]-$e[me]-h[gh[me]];const Pe=te/2+Y;var xe,Te,Ie,Me;const Xe=gh[me]==="left"?((xe=h.left)!==null&&xe!==void 0?xe:0)+((Te=h.right)!==null&&Te!==void 0?Te:0):((Ie=h.top)!==null&&Ie!==void 0?Ie:0)+((Me=h.bottom)!==null&&Me!==void 0?Me:0),Ce=i[be]-Xe-te/2-Y,He=t[me]+te/2-($e[me]+h[gh[me]]),et=t[me]+t[be]-te/2-($e[me]+h[gh[me]]),Ke=Wg(ce,He,et);return ke[me]=Wg(Ke,Pe,Ce),{position:$e,maxHeight:ue,arrowOffsetLeft:ke.left,arrowOffsetTop:ke.top,placement:oe.placement}}function fG(e){let{placement:t,targetNode:i,overlayNode:c,scrollNode:h,padding:_,shouldFlip:w,boundaryElement:a,offset:A,crossOffset:B,maxHeight:N,arrowSize:F=0,arrowBoundaryOffset:G=0}=e,Q=c instanceof HTMLElement?pG(c):document.documentElement,te=Q===document.documentElement;const Y=window.getComputedStyle(Q).position;let oe=!!Y&&Y!=="static",de=te?Hy(i):GD(i,Q);if(!te){let{marginTop:ke,marginLeft:ce}=window.getComputedStyle(i);de.top+=parseInt(ke,10)||0,de.left+=parseInt(ce,10)||0}let me=Hy(c),be=uG(c);var pe,Se;me.width+=((pe=be.left)!==null&&pe!==void 0?pe:0)+((Se=be.right)!==null&&Se!==void 0?Se:0);var $e,Le;me.height+=(($e=be.top)!==null&&$e!==void 0?$e:0)+((Le=be.bottom)!==null&&Le!==void 0?Le:0);let re=cG(h),Ee=OD(a),se=OD(Q),ue=a.tagName==="BODY"?Hy(Q):GD(Q,a);return Q.tagName==="HTML"&&a.tagName==="BODY"&&(se.scroll.top=0,se.scroll.left=0),hG(t,de,me,re,be,_,w,Ee,se,ue,A,B,oe,N,F,G)}function Hy(e){let{top:t,left:i,width:c,height:h}=e.getBoundingClientRect(),{scrollTop:_,scrollLeft:w,clientTop:a,clientLeft:A}=document.documentElement;return{top:t+_-a,left:i+w-A,width:c,height:h}}function GD(e,t){let i=window.getComputedStyle(e),c;if(i.position==="fixed"){let{top:h,left:_,width:w,height:a}=e.getBoundingClientRect();c={top:h,left:_,width:w,height:a}}else{c=Hy(e);let h=Hy(t),_=window.getComputedStyle(t);h.top+=(parseInt(_.borderTopWidth,10)||0)-t.scrollTop,h.left+=(parseInt(_.borderLeftWidth,10)||0)-t.scrollLeft,c.top-=h.top,c.left-=h.left}return c.top-=parseInt(i.marginTop,10)||0,c.left-=parseInt(i.marginLeft,10)||0,c}function pG(e){let t=e.offsetParent;if(t&&t===document.body&&window.getComputedStyle(t).position==="static"&&!HD(t)&&(t=document.documentElement),t==null)for(t=e.parentElement;t&&!HD(t);)t=t.parentElement;return t||document.documentElement}function HD(e){let t=window.getComputedStyle(e);return t.transform!=="none"||/transform|perspective/.test(t.willChange)||t.filter!=="none"||t.contain==="paint"||"backdropFilter"in t&&t.backdropFilter!=="none"||"WebkitBackdropFilter"in t&&t.WebkitBackdropFilter!=="none"}const Yk=new WeakMap;function mG(e){let{triggerRef:t,isOpen:i,onClose:c}=e;V.useEffect(()=>{if(!i||c===null)return;let h=_=>{let w=_.target;if(!t.current||w instanceof Node&&!w.contains(t.current)||_.target instanceof HTMLInputElement||_.target instanceof HTMLTextAreaElement)return;let a=c||Yk.get(t.current);a&&a()};return window.addEventListener("scroll",h,!0),()=>{window.removeEventListener("scroll",h,!0)}},[i,c,t])}let ps=typeof document<"u"?window.visualViewport:null;function Jk(e){let{direction:t}=Ms(),{arrowSize:i=0,targetRef:c,overlayRef:h,scrollRef:_=h,placement:w="bottom",containerPadding:a=12,shouldFlip:A=!0,boundaryElement:B=typeof document<"u"?document.body:null,offset:N=0,crossOffset:F=0,shouldUpdatePosition:G=!0,isOpen:Q=!0,onClose:te,maxHeight:Y,arrowBoundaryOffset:oe=0}=e,[de,me]=V.useState(null),be=[G,w,h.current,c.current,_.current,a,A,B,N,F,Q,t,Y,oe,i],pe=V.useRef(ps==null?void 0:ps.scale);V.useEffect(()=>{Q&&(pe.current=ps==null?void 0:ps.scale)},[Q]);let Se=V.useCallback(()=>{if(G===!1||!Q||!h.current||!c.current||!B||(ps==null?void 0:ps.scale)!==pe.current)return;let se=null;if(_.current&&_.current.contains(document.activeElement)){var ue;let Me=(ue=document.activeElement)===null||ue===void 0?void 0:ue.getBoundingClientRect(),Xe=_.current.getBoundingClientRect();var ke;if(se={type:"top",offset:((ke=Me==null?void 0:Me.top)!==null&&ke!==void 0?ke:0)-Xe.top},se.offset>Xe.height/2){se.type="bottom";var ce;se.offset=((ce=Me==null?void 0:Me.bottom)!==null&&ce!==void 0?ce:0)-Xe.bottom}}let Pe=h.current;if(!Y&&h.current){var xe;Pe.style.top="0px",Pe.style.bottom="";var Te;Pe.style.maxHeight=((Te=(xe=window.visualViewport)===null||xe===void 0?void 0:xe.height)!==null&&Te!==void 0?Te:window.innerHeight)+"px"}let Ie=fG({placement:yG(w,t),overlayNode:h.current,targetNode:c.current,scrollNode:_.current||h.current,padding:a,shouldFlip:A,boundaryElement:B,offset:N,crossOffset:F,maxHeight:Y,arrowSize:i,arrowBoundaryOffset:oe});if(Ie.position){if(Pe.style.top="",Pe.style.bottom="",Pe.style.left="",Pe.style.right="",Object.keys(Ie.position).forEach(Me=>Pe.style[Me]=Ie.position[Me]+"px"),Pe.style.maxHeight=Ie.maxHeight!=null?Ie.maxHeight+"px":"",se&&document.activeElement&&_.current){let Me=document.activeElement.getBoundingClientRect(),Xe=_.current.getBoundingClientRect(),Ce=Me[se.type]-Xe[se.type];_.current.scrollTop+=Ce-se.offset}me(Ie)}},be);si(Se,be),gG(Se),ID({ref:h,onResize:Se}),ID({ref:c,onResize:Se});let $e=V.useRef(!1);si(()=>{let se,ue=()=>{$e.current=!0,clearTimeout(se),se=setTimeout(()=>{$e.current=!1},500),Se()},ke=()=>{$e.current&&ue()};return ps==null||ps.addEventListener("resize",ue),ps==null||ps.addEventListener("scroll",ke),()=>{ps==null||ps.removeEventListener("resize",ue),ps==null||ps.removeEventListener("scroll",ke)}},[Se]);let Le=V.useCallback(()=>{$e.current||te==null||te()},[te,$e]);mG({triggerRef:c,isOpen:Q,onClose:te&&Le});var re,Ee;return{overlayProps:{style:{position:"absolute",zIndex:1e5,...de==null?void 0:de.position,maxHeight:(re=de==null?void 0:de.maxHeight)!==null&&re!==void 0?re:"100vh"}},placement:(Ee=de==null?void 0:de.placement)!==null&&Ee!==void 0?Ee:null,arrowProps:{"aria-hidden":"true",role:"presentation",style:{left:de==null?void 0:de.arrowOffsetLeft,top:de==null?void 0:de.arrowOffsetTop}},updatePosition:Se}}function gG(e){si(()=>(window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}),[e])}function yG(e,t){return t==="rtl"?e.replace("start","right").replace("end","left"):e.replace("start","left").replace("end","right")}function xG(e){const t=Dc(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:i,visibility:c}=e.style,h=i!=="none"&&c!=="hidden"&&c!=="collapse";if(h){const{getComputedStyle:_}=e.ownerDocument.defaultView;let{display:w,visibility:a}=_(e);h=w!=="none"&&a!=="hidden"&&a!=="collapse"}return h}function vG(e,t){return!e.hasAttribute("hidden")&&!e.hasAttribute("data-react-aria-prevent-focus")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function Qk(e,t){return e.nodeName!=="#comment"&&xG(e)&&vG(e,t)&&(!e.parentElement||Qk(e.parentElement,e))}let Iy="default",oS="",O1=new WeakMap;function qD(e){if(Mm()){if(Iy==="default"){const t=Ga(e);oS=t.documentElement.style.webkitUserSelect,t.documentElement.style.webkitUserSelect="none"}Iy="disabled"}else if(e instanceof HTMLElement||e instanceof SVGElement){let t="userSelect"in e.style?"userSelect":"webkitUserSelect";O1.set(e,e.style[t]),e.style[t]="none"}}function F3(e){if(Mm()){if(Iy!=="disabled")return;Iy="restoring",setTimeout(()=>{Uk(()=>{if(Iy==="restoring"){const t=Ga(e);t.documentElement.style.webkitUserSelect==="none"&&(t.documentElement.style.webkitUserSelect=oS||""),oS="",Iy="default"}})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&O1.has(e)){let t=O1.get(e),i="userSelect"in e.style?"userSelect":"webkitUserSelect";e.style[i]==="none"&&(e.style[i]=t),e.getAttribute("style")===""&&e.removeAttribute("style"),O1.delete(e)}}const P5=rn.createContext({register:()=>{}});P5.displayName="PressResponderContext";let eR=class{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(t,i){this.nativeEvent=i,this.target=i.target,this.currentTarget=i.currentTarget,this.relatedTarget=i.relatedTarget,this.bubbles=i.bubbles,this.cancelable=i.cancelable,this.defaultPrevented=i.defaultPrevented,this.eventPhase=i.eventPhase,this.isTrusted=i.isTrusted,this.timeStamp=i.timeStamp,this.type=t}};function tR(e){let t=V.useRef({isFocused:!1,observer:null});si(()=>{const c=t.current;return()=>{c.observer&&(c.observer.disconnect(),c.observer=null)}},[]);let i=Zs(c=>{e==null||e(c)});return V.useCallback(c=>{if(c.target instanceof HTMLButtonElement||c.target instanceof HTMLInputElement||c.target instanceof HTMLTextAreaElement||c.target instanceof HTMLSelectElement){t.current.isFocused=!0;let h=c.target,_=w=>{t.current.isFocused=!1,h.disabled&&i(new eR("blur",w)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};h.addEventListener("focusout",_,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&h.disabled){var w;(w=t.current.observer)===null||w===void 0||w.disconnect();let a=h===document.activeElement?null:document.activeElement;h.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),h.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),t.current.observer.observe(h,{attributes:!0,attributeFilter:["disabled"]})}},[i])}let hw=!1;function WD(e){for(;e&&!Wk(e);)e=e.parentElement;let t=Dc(e),i=t.document.activeElement;if(!i||i===e)return;hw=!0;let c=!1,h=N=>{(N.target===i||c)&&N.stopImmediatePropagation()},_=N=>{(N.target===i||c)&&(N.stopImmediatePropagation(),!e&&!c&&(c=!0,pl(i),A()))},w=N=>{(N.target===e||c)&&N.stopImmediatePropagation()},a=N=>{(N.target===e||c)&&(N.stopImmediatePropagation(),c||(c=!0,pl(i),A()))};t.addEventListener("blur",h,!0),t.addEventListener("focusout",_,!0),t.addEventListener("focusin",a,!0),t.addEventListener("focus",w,!0);let A=()=>{cancelAnimationFrame(B),t.removeEventListener("blur",h,!0),t.removeEventListener("focusout",_,!0),t.removeEventListener("focusin",a,!0),t.removeEventListener("focus",w,!0),hw=!1,c=!1},B=requestAnimationFrame(A);return A}function _G(e,t){return t.get?t.get.call(e):t.value}function rR(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function nR(e,t){var i=rR(e,t,"get");return _G(e,i)}function bG(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}function fw(e,t,i){var c=rR(e,t,"set");return bG(e,c,i),i}function wG(e){let t=V.useContext(P5);if(t){let{register:i,...c}=t;e=xr(c,e),i()}return Gk(t,e.ref),e}var x1=new WeakMap;let v1=class{continuePropagation(){fw(this,x1,!1)}get shouldStopPropagation(){return nR(this,x1)}constructor(t,i,c,h){hx(this,x1,{writable:!0,value:void 0}),fw(this,x1,!0);var _;let w=(_=h==null?void 0:h.target)!==null&&_!==void 0?_:c.currentTarget;const a=w==null?void 0:w.getBoundingClientRect();let A,B=0,N,F=null;c.clientX!=null&&c.clientY!=null&&(N=c.clientX,F=c.clientY),a&&(N!=null&&F!=null?(A=N-a.left,B=F-a.top):(A=a.width/2,B=a.height/2)),this.type=t,this.pointerType=i,this.target=c.currentTarget,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.x=A,this.y=B}};const KD=Symbol("linkClicked");function wu(e){let{onPress:t,onPressChange:i,onPressStart:c,onPressEnd:h,onPressUp:_,isDisabled:w,isPressed:a,preventFocusOnPress:A,shouldCancelOnPointerExit:B,allowTextSelectionOnPress:N,ref:F,...G}=wG(e),[Q,te]=V.useState(!1),Y=V.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:oe,removeAllGlobalListeners:de}=Vw(),me=Zs((re,Ee)=>{let se=Y.current;if(w||se.didFirePressStart)return!1;let ue=!0;if(se.isTriggeringEvent=!0,c){let ke=new v1("pressstart",Ee,re);c(ke),ue=ke.shouldStopPropagation}return i&&i(!0),se.isTriggeringEvent=!1,se.didFirePressStart=!0,te(!0),ue}),be=Zs((re,Ee,se=!0)=>{let ue=Y.current;if(!ue.didFirePressStart)return!1;ue.didFirePressStart=!1,ue.isTriggeringEvent=!0;let ke=!0;if(h){let ce=new v1("pressend",Ee,re);h(ce),ke=ce.shouldStopPropagation}if(i&&i(!1),te(!1),t&&se&&!w){let ce=new v1("press",Ee,re);t(ce),ke&&(ke=ce.shouldStopPropagation)}return ue.isTriggeringEvent=!1,ke}),pe=Zs((re,Ee)=>{let se=Y.current;if(w)return!1;if(_){se.isTriggeringEvent=!0;let ue=new v1("pressup",Ee,re);return _(ue),se.isTriggeringEvent=!1,ue.shouldStopPropagation}return!0}),Se=Zs(re=>{let Ee=Y.current;if(Ee.isPressed&&Ee.target){Ee.didFirePressStart&&Ee.pointerType!=null&&be(vy(Ee.target,re),Ee.pointerType,!1),Ee.isPressed=!1,Ee.isOverTarget=!1,Ee.activePointerId=null,Ee.pointerType=null,de(),N||F3(Ee.target);for(let se of Ee.disposables)se();Ee.disposables=[]}}),$e=Zs(re=>{B&&Se(re)}),Le=V.useMemo(()=>{let re=Y.current,Ee={onKeyDown(ue){if(V3(ue.nativeEvent,ue.currentTarget)&&ji(ue.currentTarget,Va(ue.nativeEvent))){var ke;YD(Va(ue.nativeEvent),ue.key)&&ue.preventDefault();let ce=!0;if(!re.isPressed&&!ue.repeat){re.target=ue.currentTarget,re.isPressed=!0,re.pointerType="keyboard",ce=me(ue,"keyboard");let Pe=ue.currentTarget,xe=Te=>{V3(Te,Pe)&&!Te.repeat&&ji(Pe,Va(Te))&&re.target&&pe(vy(re.target,Te),"keyboard")};oe(Ga(ue.currentTarget),"keyup",qi(xe,se),!0)}ce&&ue.stopPropagation(),ue.metaKey&&bm()&&((ke=re.metaKeyEvents)===null||ke===void 0||ke.set(ue.key,ue.nativeEvent))}else ue.key==="Meta"&&(re.metaKeyEvents=new Map)},onClick(ue){if(!(ue&&!ji(ue.currentTarget,Va(ue.nativeEvent)))&&ue&&ue.button===0&&!re.isTriggeringEvent&&!wm.isOpening){let ke=!0;if(w&&ue.preventDefault(),!re.ignoreEmulatedMouseEvents&&!re.isPressed&&(re.pointerType==="virtual"||nS(ue.nativeEvent))){let ce=me(ue,"virtual"),Pe=pe(ue,"virtual"),xe=be(ue,"virtual");ke=ce&&Pe&&xe}else if(re.isPressed&&re.pointerType!=="keyboard"){let ce=re.pointerType||ue.nativeEvent.pointerType||"virtual";ke=be(vy(ue.currentTarget,ue),ce,!0),re.isOverTarget=!1,Se(ue)}re.ignoreEmulatedMouseEvents=!1,ke&&ue.stopPropagation()}}},se=ue=>{var ke;if(re.isPressed&&re.target&&V3(ue,re.target)){var ce;YD(Va(ue),ue.key)&&ue.preventDefault();let xe=Va(ue);be(vy(re.target,ue),"keyboard",ji(re.target,Va(ue))),de(),ue.key!=="Enter"&&M5(re.target)&&ji(re.target,xe)&&!ue[KD]&&(ue[KD]=!0,wm(re.target,ue,!1)),re.isPressed=!1,(ce=re.metaKeyEvents)===null||ce===void 0||ce.delete(ue.key)}else if(ue.key==="Meta"&&(!((ke=re.metaKeyEvents)===null||ke===void 0)&&ke.size)){var Pe;let xe=re.metaKeyEvents;re.metaKeyEvents=void 0;for(let Te of xe.values())(Pe=re.target)===null||Pe===void 0||Pe.dispatchEvent(new KeyboardEvent("keyup",Te))}};if(typeof PointerEvent<"u"){Ee.onPointerDown=ce=>{if(ce.button!==0||!ji(ce.currentTarget,Va(ce.nativeEvent)))return;if(WU(ce.nativeEvent)){re.pointerType="virtual";return}re.pointerType=ce.pointerType;let Pe=!0;if(!re.isPressed){re.isPressed=!0,re.isOverTarget=!0,re.activePointerId=ce.pointerId,re.target=ce.currentTarget,N||qD(re.target),Pe=me(ce,re.pointerType);let xe=Va(ce.nativeEvent);"releasePointerCapture"in xe&&xe.releasePointerCapture(ce.pointerId),oe(Ga(ce.currentTarget),"pointerup",ue,!1),oe(Ga(ce.currentTarget),"pointercancel",ke,!1)}Pe&&ce.stopPropagation()},Ee.onMouseDown=ce=>{if(ji(ce.currentTarget,Va(ce.nativeEvent))&&ce.button===0){if(A){let Pe=WD(ce.target);Pe&&re.disposables.push(Pe)}ce.stopPropagation()}},Ee.onPointerUp=ce=>{!ji(ce.currentTarget,Va(ce.nativeEvent))||re.pointerType==="virtual"||ce.button===0&&pe(ce,re.pointerType||ce.pointerType)},Ee.onPointerEnter=ce=>{ce.pointerId===re.activePointerId&&re.target&&!re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!0,me(vy(re.target,ce),re.pointerType))},Ee.onPointerLeave=ce=>{ce.pointerId===re.activePointerId&&re.target&&re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!1,be(vy(re.target,ce),re.pointerType,!1),$e(ce))};let ue=ce=>{if(ce.pointerId===re.activePointerId&&re.isPressed&&ce.button===0&&re.target){if(ji(re.target,Va(ce))&&re.pointerType!=null){let Pe=!1,xe=setTimeout(()=>{re.isPressed&&re.target instanceof HTMLElement&&(Pe?Se(ce):(pl(re.target),re.target.click()))},80);oe(ce.currentTarget,"click",()=>Pe=!0,!0),re.disposables.push(()=>clearTimeout(xe))}else Se(ce);re.isOverTarget=!1}},ke=ce=>{Se(ce)};Ee.onDragStart=ce=>{ji(ce.currentTarget,Va(ce.nativeEvent))&&Se(ce)}}else{Ee.onMouseDown=ce=>{if(ce.button!==0||!ji(ce.currentTarget,Va(ce.nativeEvent)))return;if(re.ignoreEmulatedMouseEvents){ce.stopPropagation();return}if(re.isPressed=!0,re.isOverTarget=!0,re.target=ce.currentTarget,re.pointerType=nS(ce.nativeEvent)?"virtual":"mouse",Iw.flushSync(()=>me(ce,re.pointerType))&&ce.stopPropagation(),A){let xe=WD(ce.target);xe&&re.disposables.push(xe)}oe(Ga(ce.currentTarget),"mouseup",ue,!1)},Ee.onMouseEnter=ce=>{if(!ji(ce.currentTarget,Va(ce.nativeEvent)))return;let Pe=!0;re.isPressed&&!re.ignoreEmulatedMouseEvents&&re.pointerType!=null&&(re.isOverTarget=!0,Pe=me(ce,re.pointerType)),Pe&&ce.stopPropagation()},Ee.onMouseLeave=ce=>{if(!ji(ce.currentTarget,Va(ce.nativeEvent)))return;let Pe=!0;re.isPressed&&!re.ignoreEmulatedMouseEvents&&re.pointerType!=null&&(re.isOverTarget=!1,Pe=be(ce,re.pointerType,!1),$e(ce)),Pe&&ce.stopPropagation()},Ee.onMouseUp=ce=>{ji(ce.currentTarget,Va(ce.nativeEvent))&&!re.ignoreEmulatedMouseEvents&&ce.button===0&&pe(ce,re.pointerType||"mouse")};let ue=ce=>{if(ce.button===0){if(re.ignoreEmulatedMouseEvents){re.ignoreEmulatedMouseEvents=!1;return}re.target&&re.target.contains(ce.target)&&re.pointerType!=null||Se(ce),re.isOverTarget=!1}};Ee.onTouchStart=ce=>{if(!ji(ce.currentTarget,Va(ce.nativeEvent)))return;let Pe=SG(ce.nativeEvent);if(!Pe)return;re.activePointerId=Pe.identifier,re.ignoreEmulatedMouseEvents=!0,re.isOverTarget=!0,re.isPressed=!0,re.target=ce.currentTarget,re.pointerType="touch",N||qD(re.target),me(lm(re.target,ce),re.pointerType)&&ce.stopPropagation(),oe(Dc(ce.currentTarget),"scroll",ke,!0)},Ee.onTouchMove=ce=>{if(!ji(ce.currentTarget,Va(ce.nativeEvent)))return;if(!re.isPressed){ce.stopPropagation();return}let Pe=ZD(ce.nativeEvent,re.activePointerId),xe=!0;Pe&&XD(Pe,ce.currentTarget)?!re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!0,xe=me(lm(re.target,ce),re.pointerType)):re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!1,xe=be(lm(re.target,ce),re.pointerType,!1),$e(lm(re.target,ce))),xe&&ce.stopPropagation()},Ee.onTouchEnd=ce=>{if(!ji(ce.currentTarget,Va(ce.nativeEvent)))return;if(!re.isPressed){ce.stopPropagation();return}let Pe=ZD(ce.nativeEvent,re.activePointerId),xe=!0;Pe&&XD(Pe,ce.currentTarget)&&re.pointerType!=null?(pe(lm(re.target,ce),re.pointerType),xe=be(lm(re.target,ce),re.pointerType)):re.isOverTarget&&re.pointerType!=null&&(xe=be(lm(re.target,ce),re.pointerType,!1)),xe&&ce.stopPropagation(),re.isPressed=!1,re.activePointerId=null,re.isOverTarget=!1,re.ignoreEmulatedMouseEvents=!0,re.target&&!N&&F3(re.target),de()},Ee.onTouchCancel=ce=>{ji(ce.currentTarget,Va(ce.nativeEvent))&&(ce.stopPropagation(),re.isPressed&&Se(lm(re.target,ce)))};let ke=ce=>{re.isPressed&&ji(Va(ce),re.target)&&Se({currentTarget:re.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};Ee.onDragStart=ce=>{ji(ce.currentTarget,Va(ce.nativeEvent))&&Se(ce)}}return Ee},[oe,w,A,de,N,Se,$e,be,me,pe]);return V.useEffect(()=>{let re=Y.current;return()=>{var Ee;N||F3((Ee=re.target)!==null&&Ee!==void 0?Ee:void 0);for(let se of re.disposables)se();re.disposables=[]}},[N]),{isPressed:a||Q,pressProps:xr(G,Le)}}function M5(e){return e.tagName==="A"&&e.hasAttribute("href")}function V3(e,t){const{key:i,code:c}=e,h=t,_=h.getAttribute("role");return(i==="Enter"||i===" "||i==="Spacebar"||c==="Space")&&!(h instanceof Dc(h).HTMLInputElement&&!aR(h,i)||h instanceof Dc(h).HTMLTextAreaElement||h.isContentEditable)&&!((_==="link"||!_&&M5(h))&&i!=="Enter")}function SG(e){const{targetTouches:t}=e;return t.length>0?t[0]:null}function ZD(e,t){const i=e.changedTouches;for(let c=0;c<i.length;c++){const h=i[c];if(h.identifier===t)return h}return null}function lm(e,t){let i=0,c=0;return t.targetTouches&&t.targetTouches.length===1&&(i=t.targetTouches[0].clientX,c=t.targetTouches[0].clientY),{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:i,clientY:c}}function vy(e,t){let i=t.clientX,c=t.clientY;return{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:i,clientY:c}}function TG(e){let t=0,i=0;return e.width!==void 0?t=e.width/2:e.radiusX!==void 0&&(t=e.radiusX),e.height!==void 0?i=e.height/2:e.radiusY!==void 0&&(i=e.radiusY),{top:e.clientY-i,right:e.clientX+t,bottom:e.clientY+i,left:e.clientX-t}}function EG(e,t){return!(e.left>t.right||t.left>e.right||e.top>t.bottom||t.top>e.bottom)}function XD(e,t){let i=t.getBoundingClientRect(),c=TG(e);return EG(i,c)}function CG(e){return e instanceof HTMLInputElement?!1:e instanceof HTMLButtonElement?e.type!=="submit"&&e.type!=="reset":!M5(e)}function YD(e,t){return e instanceof HTMLInputElement?!aR(e,t):CG(e)}const DG=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function aR(e,t){return e.type==="checkbox"||e.type==="radio"?t===" ":DG.has(e.type)}let c0=null,lS=new Set,Kv=new Map,e0=!1,cS=!1;const PG={Tab:!0,Escape:!0};function Hw(e,t){for(let i of lS)i(e,t)}function MG(e){return!(e.metaKey||!bm()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function pw(e){e0=!0,MG(e)&&(c0="keyboard",Hw("keyboard",e))}function yu(e){c0="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(e0=!0,Hw("pointer",e))}function iR(e){nS(e)&&(e0=!0,c0="virtual")}function sR(e){e.target===window||e.target===document||hw||!e.isTrusted||(!e0&&!cS&&(c0="virtual",Hw("virtual",e)),e0=!1,cS=!1)}function oR(){hw||(e0=!1,cS=!0)}function uS(e){if(typeof window>"u"||Kv.get(Dc(e)))return;const t=Dc(e),i=Ga(e);let c=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){e0=!0,c.apply(this,arguments)},i.addEventListener("keydown",pw,!0),i.addEventListener("keyup",pw,!0),i.addEventListener("click",iR,!0),t.addEventListener("focus",sR,!0),t.addEventListener("blur",oR,!1),typeof PointerEvent<"u"?(i.addEventListener("pointerdown",yu,!0),i.addEventListener("pointermove",yu,!0),i.addEventListener("pointerup",yu,!0)):(i.addEventListener("mousedown",yu,!0),i.addEventListener("mousemove",yu,!0),i.addEventListener("mouseup",yu,!0)),t.addEventListener("beforeunload",()=>{lR(e)},{once:!0}),Kv.set(t,{focus:c})}const lR=(e,t)=>{const i=Dc(e),c=Ga(e);t&&c.removeEventListener("DOMContentLoaded",t),Kv.has(i)&&(i.HTMLElement.prototype.focus=Kv.get(i).focus,c.removeEventListener("keydown",pw,!0),c.removeEventListener("keyup",pw,!0),c.removeEventListener("click",iR,!0),i.removeEventListener("focus",sR,!0),i.removeEventListener("blur",oR,!1),typeof PointerEvent<"u"?(c.removeEventListener("pointerdown",yu,!0),c.removeEventListener("pointermove",yu,!0),c.removeEventListener("pointerup",yu,!0)):(c.removeEventListener("mousedown",yu,!0),c.removeEventListener("mousemove",yu,!0),c.removeEventListener("mouseup",yu,!0)),Kv.delete(i))};function AG(e){const t=Ga(e);let i;return t.readyState!=="loading"?uS(e):(i=()=>{uS(e)},t.addEventListener("DOMContentLoaded",i)),()=>lR(e,i)}typeof document<"u"&&AG();function t0(){return c0!=="pointer"}function Sm(){return c0}function kG(e){c0=e,Hw(e,null)}const RG=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function IG(e,t,i){let c=Ga(i==null?void 0:i.target);const h=typeof window<"u"?Dc(i==null?void 0:i.target).HTMLInputElement:HTMLInputElement,_=typeof window<"u"?Dc(i==null?void 0:i.target).HTMLTextAreaElement:HTMLTextAreaElement,w=typeof window<"u"?Dc(i==null?void 0:i.target).HTMLElement:HTMLElement,a=typeof window<"u"?Dc(i==null?void 0:i.target).KeyboardEvent:KeyboardEvent;return e=e||c.activeElement instanceof h&&!RG.has(c.activeElement.type)||c.activeElement instanceof _||c.activeElement instanceof w&&c.activeElement.isContentEditable,!(e&&t==="keyboard"&&i instanceof a&&!PG[i.key])}function cR(e,t,i){uS(),V.useEffect(()=>{let c=(h,_)=>{IG(!!(i!=null&&i.isTextInput),h,_)&&e(t0())};return lS.add(c),()=>{lS.delete(c)}},t)}function r0(e){const t=Ga(e),i=bo(t);if(Sm()==="virtual"){let c=i;Uk(()=>{bo(t)===c&&e.isConnected&&pl(e)})}else pl(e)}function P_(e){let{isDisabled:t,onFocus:i,onBlur:c,onFocusChange:h}=e;const _=V.useCallback(A=>{if(A.target===A.currentTarget)return c&&c(A),h&&h(!1),!0},[c,h]),w=tR(_),a=V.useCallback(A=>{const B=Ga(A.target),N=B?bo(B):bo();A.target===A.currentTarget&&N===Va(A.nativeEvent)&&(i&&i(A),h&&h(!0),w(A))},[h,i,w]);return{focusProps:{onFocus:!t&&(i||h||c)?a:void 0,onBlur:!t&&(c||h)?_:void 0}}}function JD(e){if(!e)return;let t=!0;return i=>{let c={...i,preventDefault(){i.preventDefault()},isDefaultPrevented(){return i.isDefaultPrevented()},stopPropagation(){t?console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior."):t=!0},continuePropagation(){t=!1},isPropagationStopped(){return t}};e(c),t&&i.stopPropagation()}}function uR(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:JD(e.onKeyDown),onKeyUp:JD(e.onKeyUp)}}}let zG=rn.createContext(null);function LG(e){let t=V.useContext(zG)||{};Gk(t,e);let{ref:i,...c}=t;return c}function M_(e,t){let{focusProps:i}=P_(e),{keyboardProps:c}=uR(e),h=xr(i,c),_=LG(t),w=e.isDisabled?{}:_,a=V.useRef(e.autoFocus);V.useEffect(()=>{a.current&&t.current&&r0(t.current),a.current=!1},[t]);let A=e.excludeFromTabOrder?-1:0;return e.isDisabled&&(A=void 0),{focusableProps:xr({...h,tabIndex:A},w)}}function $G({children:e}){let t=V.useMemo(()=>({register:()=>{}}),[]);return rn.createElement(P5.Provider,{value:t},e)}function yd(e){let{isDisabled:t,onBlurWithin:i,onFocusWithin:c,onFocusWithinChange:h}=e,_=V.useRef({isFocusWithin:!1}),{addGlobalListener:w,removeAllGlobalListeners:a}=Vw(),A=V.useCallback(F=>{F.currentTarget.contains(F.target)&&_.current.isFocusWithin&&!F.currentTarget.contains(F.relatedTarget)&&(_.current.isFocusWithin=!1,a(),i&&i(F),h&&h(!1))},[i,h,_,a]),B=tR(A),N=V.useCallback(F=>{if(!F.currentTarget.contains(F.target))return;const G=Ga(F.target),Q=bo(G);if(!_.current.isFocusWithin&&Q===Va(F.nativeEvent)){c&&c(F),h&&h(!0),_.current.isFocusWithin=!0,B(F);let te=F.currentTarget;w(G,"focus",Y=>{if(_.current.isFocusWithin&&!ji(te,Y.target)){let oe=new eR("blur",new G.defaultView.FocusEvent("blur",{relatedTarget:Y.target}));oe.target=te,oe.currentTarget=te,A(oe)}},{capture:!0})}},[c,h,B,w,A]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:N,onBlur:A}}}let mw=!1,U3=0;function dS(){mw=!0,setTimeout(()=>{mw=!1},50)}function QD(e){e.pointerType==="touch"&&dS()}function BG(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",QD):document.addEventListener("touchend",dS),U3++,()=>{U3--,!(U3>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",QD):document.removeEventListener("touchend",dS))}}function wo(e){let{onHoverStart:t,onHoverChange:i,onHoverEnd:c,isDisabled:h}=e,[_,w]=V.useState(!1),a=V.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;V.useEffect(BG,[]);let{addGlobalListener:A,removeAllGlobalListeners:B}=Vw(),{hoverProps:N,triggerHoverEnd:F}=V.useMemo(()=>{let G=(Y,oe)=>{if(a.pointerType=oe,h||oe==="touch"||a.isHovered||!Y.currentTarget.contains(Y.target))return;a.isHovered=!0;let de=Y.currentTarget;a.target=de,A(Ga(Y.target),"pointerover",me=>{a.isHovered&&a.target&&!ji(a.target,me.target)&&Q(me,me.pointerType)},{capture:!0}),t&&t({type:"hoverstart",target:de,pointerType:oe}),i&&i(!0),w(!0)},Q=(Y,oe)=>{let de=a.target;a.pointerType="",a.target=null,!(oe==="touch"||!a.isHovered||!de)&&(a.isHovered=!1,B(),c&&c({type:"hoverend",target:de,pointerType:oe}),i&&i(!1),w(!1))},te={};return typeof PointerEvent<"u"?(te.onPointerEnter=Y=>{mw&&Y.pointerType==="mouse"||G(Y,Y.pointerType)},te.onPointerLeave=Y=>{!h&&Y.currentTarget.contains(Y.target)&&Q(Y,Y.pointerType)}):(te.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},te.onMouseEnter=Y=>{!a.ignoreEmulatedMouseEvents&&!mw&&G(Y,"mouse"),a.ignoreEmulatedMouseEvents=!1},te.onMouseLeave=Y=>{!h&&Y.currentTarget.contains(Y.target)&&Q(Y,"mouse")}),{hoverProps:te,triggerHoverEnd:Q}},[t,i,c,h,a,A,B]);return V.useEffect(()=>{h&&F({currentTarget:a.target},a.pointerType)},[h]),{hoverProps:N,isHovered:_}}function NG(e){let{ref:t,onInteractOutside:i,isDisabled:c,onInteractOutsideStart:h}=e,_=V.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),w=Zs(A=>{i&&_1(A,t)&&(h&&h(A),_.current.isPointerDown=!0)}),a=Zs(A=>{i&&i(A)});V.useEffect(()=>{let A=_.current;if(c)return;const B=t.current,N=Ga(B);if(typeof PointerEvent<"u"){let F=G=>{A.isPointerDown&&_1(G,t)&&a(G),A.isPointerDown=!1};return N.addEventListener("pointerdown",w,!0),N.addEventListener("pointerup",F,!0),()=>{N.removeEventListener("pointerdown",w,!0),N.removeEventListener("pointerup",F,!0)}}else{let F=Q=>{A.ignoreEmulatedMouseEvents?A.ignoreEmulatedMouseEvents=!1:A.isPointerDown&&_1(Q,t)&&a(Q),A.isPointerDown=!1},G=Q=>{A.ignoreEmulatedMouseEvents=!0,A.isPointerDown&&_1(Q,t)&&a(Q),A.isPointerDown=!1};return N.addEventListener("mousedown",w,!0),N.addEventListener("mouseup",F,!0),N.addEventListener("touchstart",w,!0),N.addEventListener("touchend",G,!0),()=>{N.removeEventListener("mousedown",w,!0),N.removeEventListener("mouseup",F,!0),N.removeEventListener("touchstart",w,!0),N.removeEventListener("touchend",G,!0)}}},[t,c,w,a])}function _1(e,t){if(e.button>0)return!1;if(e.target){const i=e.target.ownerDocument;if(!i||!i.documentElement.contains(e.target)||e.target.closest("[data-react-aria-top-layer]"))return!1}return t.current?!e.composedPath().includes(t.current):!1}function jG(e,t){let{onScroll:i,isDisabled:c}=e,h=V.useCallback(_=>{_.ctrlKey||(_.preventDefault(),_.stopPropagation(),i&&i({deltaX:_.deltaX,deltaY:_.deltaY}))},[i]);gm(t,"wheel",c?void 0:h)}const OG=500;function dR(e){let{isDisabled:t,onLongPressStart:i,onLongPressEnd:c,onLongPress:h,threshold:_=OG,accessibilityDescription:w}=e;const a=V.useRef(void 0);let{addGlobalListener:A,removeGlobalListener:B}=Vw(),{pressProps:N}=wu({isDisabled:t,onPressStart(G){if(G.continuePropagation(),(G.pointerType==="mouse"||G.pointerType==="touch")&&(i&&i({...G,type:"longpressstart"}),a.current=setTimeout(()=>{G.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),Ga(G.target).activeElement!==G.target&&pl(G.target),h&&h({...G,type:"longpress"}),a.current=void 0},_),G.pointerType==="touch")){let Q=te=>{te.preventDefault()};A(G.target,"contextmenu",Q,{once:!0}),A(window,"pointerup",()=>{setTimeout(()=>{B(G.target,"contextmenu",Q)},30)},{once:!0})}},onPressEnd(G){a.current&&clearTimeout(a.current),c&&(G.pointerType==="mouse"||G.pointerType==="touch")&&c({...G,type:"longpressend"})}}),F=Gw(h&&!t?w:void 0);return{longPressProps:xr(N,F)}}const eP=rn.createContext(null),hS="react-aria-focus-scope-restore";let mi=null;function hR(e){let{children:t,contain:i,restoreFocus:c,autoFocus:h}=e,_=V.useRef(null),w=V.useRef(null),a=V.useRef([]),{parentNode:A}=V.useContext(eP)||{},B=V.useMemo(()=>new pS({scopeRef:a}),[a]);si(()=>{let G=A||Cs.root;if(Cs.getTreeNode(G.scopeRef)&&mi&&!gw(mi,G.scopeRef)){let Q=Cs.getTreeNode(mi);Q&&(G=Q)}G.addChild(B),Cs.addNode(B)},[B,A]),si(()=>{let G=Cs.getTreeNode(a);G&&(G.contain=!!i)},[i]),si(()=>{var G;let Q=(G=_.current)===null||G===void 0?void 0:G.nextSibling,te=[],Y=oe=>oe.stopPropagation();for(;Q&&Q!==w.current;)te.push(Q),Q.addEventListener(hS,Y),Q=Q.nextSibling;return a.current=te,()=>{for(let oe of te)oe.removeEventListener(hS,Y)}},[t]),HG(a,c,i),VG(a,i),qG(a,c,i),GG(a,h),V.useEffect(()=>{const G=bo(Ga(a.current?a.current[0]:void 0));let Q=null;if(Su(G,a.current)){for(let te of Cs.traverse())te.scopeRef&&Su(G,te.scopeRef.current)&&(Q=te);Q===Cs.getTreeNode(a)&&(mi=Q.scopeRef)}},[a]),si(()=>()=>{var G,Q,te;let Y=(te=(Q=Cs.getTreeNode(a))===null||Q===void 0||(G=Q.parent)===null||G===void 0?void 0:G.scopeRef)!==null&&te!==void 0?te:null;(a===mi||gw(a,mi))&&(!Y||Cs.getTreeNode(Y))&&(mi=Y),Cs.removeTreeNode(a)},[a]);let N=V.useMemo(()=>FG(a),[]),F=V.useMemo(()=>({focusManager:N,parentNode:B}),[B,N]);return rn.createElement(eP.Provider,{value:F},rn.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:_}),t,rn.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:w}))}function FG(e){return{focusNext(t={}){let i=e.current,{from:c,tabbable:h,wrap:_,accept:w}=t;var a;let A=c||bo(Ga((a=i[0])!==null&&a!==void 0?a:void 0)),B=i[0].previousElementSibling,N=Gg(i),F=Ho(N,{tabbable:h,accept:w},i);F.currentNode=Su(A,i)?A:B;let G=F.nextNode();return!G&&_&&(F.currentNode=B,G=F.nextNode()),G&&$l(G,!0),G},focusPrevious(t={}){let i=e.current,{from:c,tabbable:h,wrap:_,accept:w}=t;var a;let A=c||bo(Ga((a=i[0])!==null&&a!==void 0?a:void 0)),B=i[i.length-1].nextElementSibling,N=Gg(i),F=Ho(N,{tabbable:h,accept:w},i);F.currentNode=Su(A,i)?A:B;let G=F.previousNode();return!G&&_&&(F.currentNode=B,G=F.previousNode()),G&&$l(G,!0),G},focusFirst(t={}){let i=e.current,{tabbable:c,accept:h}=t,_=Gg(i),w=Ho(_,{tabbable:c,accept:h},i);w.currentNode=i[0].previousElementSibling;let a=w.nextNode();return a&&$l(a,!0),a},focusLast(t={}){let i=e.current,{tabbable:c,accept:h}=t,_=Gg(i),w=Ho(_,{tabbable:c,accept:h},i);w.currentNode=i[i.length-1].nextElementSibling;let a=w.previousNode();return a&&$l(a,!0),a}}}function Gg(e){return e[0].parentElement}function jv(e){let t=Cs.getTreeNode(mi);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function VG(e,t){let i=V.useRef(void 0),c=V.useRef(void 0);si(()=>{let h=e.current;if(!t){c.current&&(cancelAnimationFrame(c.current),c.current=void 0);return}const _=Ga(h?h[0]:void 0);let w=B=>{if(B.key!=="Tab"||B.altKey||B.ctrlKey||B.metaKey||!jv(e)||B.isComposing)return;let N=bo(_),F=e.current;if(!F||!Su(N,F))return;let G=Gg(F),Q=Ho(G,{tabbable:!0},F);if(!N)return;Q.currentNode=N;let te=B.shiftKey?Q.previousNode():Q.nextNode();te||(Q.currentNode=B.shiftKey?F[F.length-1].nextElementSibling:F[0].previousElementSibling,te=B.shiftKey?Q.previousNode():Q.nextNode()),B.preventDefault(),te&&$l(te,!0)},a=B=>{(!mi||gw(mi,e))&&Su(Va(B),e.current)?(mi=e,i.current=Va(B)):jv(e)&&!ym(Va(B),e)?i.current?i.current.focus():mi&&mi.current&&fS(mi.current):jv(e)&&(i.current=Va(B))},A=B=>{c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame(()=>{let N=Sm(),F=(N==="virtual"||N===null)&&fx()&&Ok(),G=bo(_);if(!F&&G&&jv(e)&&!ym(G,e)){mi=e;let te=Va(B);if(te&&te.isConnected){var Q;i.current=te,(Q=i.current)===null||Q===void 0||Q.focus()}else mi.current&&fS(mi.current)}})};return _.addEventListener("keydown",w,!1),_.addEventListener("focusin",a,!1),h==null||h.forEach(B=>B.addEventListener("focusin",a,!1)),h==null||h.forEach(B=>B.addEventListener("focusout",A,!1)),()=>{_.removeEventListener("keydown",w,!1),_.removeEventListener("focusin",a,!1),h==null||h.forEach(B=>B.removeEventListener("focusin",a,!1)),h==null||h.forEach(B=>B.removeEventListener("focusout",A,!1))}},[e,t]),si(()=>()=>{c.current&&cancelAnimationFrame(c.current)},[c])}function fR(e){return ym(e)}function Su(e,t){return!e||!t?!1:t.some(i=>i.contains(e))}function ym(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:i}of Cs.traverse(Cs.getTreeNode(t)))if(i&&Su(e,i.current))return!0;return!1}function UG(e){return ym(e,mi)}function gw(e,t){var i;let c=(i=Cs.getTreeNode(t))===null||i===void 0?void 0:i.parent;for(;c;){if(c.scopeRef===e)return!0;c=c.parent}return!1}function $l(e,t=!1){if(e!=null&&!t)try{r0(e)}catch{}else if(e!=null)try{e.focus()}catch{}}function pR(e,t=!0){let i=e[0].previousElementSibling,c=Gg(e),h=Ho(c,{tabbable:t},e);h.currentNode=i;let _=h.nextNode();return t&&!_&&(c=Gg(e),h=Ho(c,{tabbable:!1},e),h.currentNode=i,_=h.nextNode()),_}function fS(e,t=!0){$l(pR(e,t))}function GG(e,t){const i=rn.useRef(t);V.useEffect(()=>{if(i.current){mi=e;const c=Ga(e.current?e.current[0]:void 0);!Su(bo(c),mi.current)&&e.current&&fS(e.current)}i.current=!1},[e])}function HG(e,t,i){si(()=>{if(t||i)return;let c=e.current;const h=Ga(c?c[0]:void 0);let _=w=>{let a=Va(w);Su(a,e.current)?mi=e:fR(a)||(mi=null)};return h.addEventListener("focusin",_,!1),c==null||c.forEach(w=>w.addEventListener("focusin",_,!1)),()=>{h.removeEventListener("focusin",_,!1),c==null||c.forEach(w=>w.removeEventListener("focusin",_,!1))}},[e,t,i])}function tP(e){let t=Cs.getTreeNode(mi);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(t==null?void 0:t.scopeRef)===e}function qG(e,t,i){const c=V.useRef(typeof document<"u"?bo(Ga(e.current?e.current[0]:void 0)):null);si(()=>{let h=e.current;const _=Ga(h?h[0]:void 0);if(!t||i)return;let w=()=>{(!mi||gw(mi,e))&&Su(bo(_),e.current)&&(mi=e)};return _.addEventListener("focusin",w,!1),h==null||h.forEach(a=>a.addEventListener("focusin",w,!1)),()=>{_.removeEventListener("focusin",w,!1),h==null||h.forEach(a=>a.removeEventListener("focusin",w,!1))}},[e,i]),si(()=>{const h=Ga(e.current?e.current[0]:void 0);if(!t)return;let _=w=>{if(w.key!=="Tab"||w.altKey||w.ctrlKey||w.metaKey||!jv(e)||w.isComposing)return;let a=h.activeElement;if(!ym(a,e)||!tP(e))return;let A=Cs.getTreeNode(e);if(!A)return;let B=A.nodeToRestore,N=Ho(h.body,{tabbable:!0});N.currentNode=a;let F=w.shiftKey?N.previousNode():N.nextNode();if((!B||!B.isConnected||B===h.body)&&(B=void 0,A.nodeToRestore=void 0),(!F||!ym(F,e))&&B){N.currentNode=B;do F=w.shiftKey?N.previousNode():N.nextNode();while(ym(F,e));w.preventDefault(),w.stopPropagation(),F?$l(F,!0):fR(B)?$l(B,!0):a.blur()}};return i||h.addEventListener("keydown",_,!0),()=>{i||h.removeEventListener("keydown",_,!0)}},[e,t,i]),si(()=>{const h=Ga(e.current?e.current[0]:void 0);if(!t)return;let _=Cs.getTreeNode(e);if(_){var w;return _.nodeToRestore=(w=c.current)!==null&&w!==void 0?w:void 0,()=>{let a=Cs.getTreeNode(e);if(!a)return;let A=a.nodeToRestore,B=bo(h);if(t&&A&&(B&&ym(B,e)||B===h.body&&tP(e))){let N=Cs.clone();requestAnimationFrame(()=>{if(h.activeElement===h.body){let F=N.getTreeNode(e);for(;F;){if(F.nodeToRestore&&F.nodeToRestore.isConnected){rP(F.nodeToRestore);return}F=F.parent}for(F=N.getTreeNode(e);F;){if(F.scopeRef&&F.scopeRef.current&&Cs.getTreeNode(F.scopeRef)){let G=pR(F.scopeRef.current,!0);rP(G);return}F=F.parent}}})}}}},[e,t])}function rP(e){e.dispatchEvent(new CustomEvent(hS,{bubbles:!0,cancelable:!0}))&&$l(e)}function Ho(e,t,i){let c=t!=null&&t.tabbable?JU:Wk,h=(e==null?void 0:e.nodeType)===Node.ELEMENT_NODE?e:null,_=Ga(h),w=DU(_,e||_,NodeFilter.SHOW_ELEMENT,{acceptNode(a){var A;return!(t==null||(A=t.from)===null||A===void 0)&&A.contains(a)?NodeFilter.FILTER_REJECT:c(a)&&Qk(a)&&(!i||Su(a,i))&&(!(t!=null&&t.accept)||t.accept(a))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(w.currentNode=t.from),w}function A5(e,t={}){return{focusNext(i={}){let c=e.current;if(!c)return null;let{from:h,tabbable:_=t.tabbable,wrap:w=t.wrap,accept:a=t.accept}=i,A=h||bo(Ga(c)),B=Ho(c,{tabbable:_,accept:a});c.contains(A)&&(B.currentNode=A);let N=B.nextNode();return!N&&w&&(B.currentNode=c,N=B.nextNode()),N&&$l(N,!0),N},focusPrevious(i=t){let c=e.current;if(!c)return null;let{from:h,tabbable:_=t.tabbable,wrap:w=t.wrap,accept:a=t.accept}=i,A=h||bo(Ga(c)),B=Ho(c,{tabbable:_,accept:a});if(c.contains(A))B.currentNode=A;else{let F=G3(B);return F&&$l(F,!0),F??null}let N=B.previousNode();if(!N&&w){B.currentNode=c;let F=G3(B);if(!F)return null;N=F}return N&&$l(N,!0),N??null},focusFirst(i=t){let c=e.current;if(!c)return null;let{tabbable:h=t.tabbable,accept:_=t.accept}=i,a=Ho(c,{tabbable:h,accept:_}).nextNode();return a&&$l(a,!0),a},focusLast(i=t){let c=e.current;if(!c)return null;let{tabbable:h=t.tabbable,accept:_=t.accept}=i,w=Ho(c,{tabbable:h,accept:_}),a=G3(w);return a&&$l(a,!0),a??null}}}function G3(e){let t,i;do i=e.lastChild(),i&&(t=i);while(i);return t}class k5{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,i,c){let h=this.fastMap.get(i??null);if(!h)return;let _=new pS({scopeRef:t});h.addChild(_),_.parent=h,this.fastMap.set(t,_),c&&(_.nodeToRestore=c)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(t===null)return;let i=this.fastMap.get(t);if(!i)return;let c=i.parent;for(let _ of this.traverse())_!==i&&i.nodeToRestore&&_.nodeToRestore&&i.scopeRef&&i.scopeRef.current&&Su(_.nodeToRestore,i.scopeRef.current)&&(_.nodeToRestore=i.nodeToRestore);let h=i.children;c&&(c.removeChild(i),h.size>0&&h.forEach(_=>c&&c.addChild(_))),this.fastMap.delete(i.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.size>0)for(let i of t.children)yield*this.traverse(i)}clone(){var t;let i=new k5;var c;for(let h of this.traverse())i.addTreeNode(h.scopeRef,(c=(t=h.parent)===null||t===void 0?void 0:t.scopeRef)!==null&&c!==void 0?c:null,h.nodeToRestore);return i}constructor(){this.fastMap=new Map,this.root=new pS({scopeRef:null}),this.fastMap.set(null,this.root)}}class pS{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){this.children=new Set,this.contain=!1,this.scopeRef=t.scopeRef}}let Cs=new k5;function Ac(e={}){let{autoFocus:t=!1,isTextInput:i,within:c}=e,h=V.useRef({isFocused:!1,isFocusVisible:t||t0()}),[_,w]=V.useState(!1),[a,A]=V.useState(()=>h.current.isFocused&&h.current.isFocusVisible),B=V.useCallback(()=>A(h.current.isFocused&&h.current.isFocusVisible),[]),N=V.useCallback(Q=>{h.current.isFocused=Q,w(Q),B()},[B]);cR(Q=>{h.current.isFocusVisible=Q,B()},[],{isTextInput:i});let{focusProps:F}=P_({isDisabled:c,onFocusChange:N}),{focusWithinProps:G}=yd({isDisabled:!c,onFocusWithinChange:N});return{isFocused:_,isFocusVisible:a,focusProps:c?G:F}}function mR(e){let t=ZG(Ga(e));t!==e&&(t&&WG(t,e),e&&KG(e,t))}function WG(e,t){e.dispatchEvent(new FocusEvent("blur",{relatedTarget:t})),e.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:t}))}function KG(e,t){e.dispatchEvent(new FocusEvent("focus",{relatedTarget:t})),e.dispatchEvent(new FocusEvent("focusin",{bubbles:!0,relatedTarget:t}))}function ZG(e){let t=bo(e),i=t==null?void 0:t.getAttribute("aria-activedescendant");return i&&e.getElementById(i)||t}const hh=[];function R5(e,t){let{onClose:i,shouldCloseOnBlur:c,isOpen:h,isDismissable:_=!1,isKeyboardDismissDisabled:w=!1,shouldCloseOnInteractOutside:a}=e;V.useEffect(()=>{if(h&&!hh.includes(t))return hh.push(t),()=>{let te=hh.indexOf(t);te>=0&&hh.splice(te,1)}},[h,t]);let A=()=>{hh[hh.length-1]===t&&i&&i()},B=te=>{(!a||a(te.target))&&hh[hh.length-1]===t&&(te.stopPropagation(),te.preventDefault())},N=te=>{(!a||a(te.target))&&(hh[hh.length-1]===t&&(te.stopPropagation(),te.preventDefault()),A())},F=te=>{te.key==="Escape"&&!w&&!te.nativeEvent.isComposing&&(te.stopPropagation(),te.preventDefault(),A())};NG({ref:t,onInteractOutside:_&&h?N:void 0,onInteractOutsideStart:B});let{focusWithinProps:G}=yd({isDisabled:!c,onBlurWithin:te=>{!te.relatedTarget||UG(te.relatedTarget)||(!a||a(te.relatedTarget))&&(i==null||i())}}),Q=te=>{te.target===te.currentTarget&&te.preventDefault()};return{overlayProps:{onKeyDown:F,...G},underlayProps:{onPointerDown:Q}}}function gR(e,t,i){let{type:c}=e,{isOpen:h}=t;V.useEffect(()=>{i&&i.current&&Yk.set(i.current,t.close)});let _;c==="menu"?_=!0:c==="listbox"&&(_="listbox");let w=Bs();return{triggerProps:{"aria-haspopup":_,"aria-expanded":h,"aria-controls":h?w:void 0,onPress:t.toggle},overlayProps:{id:w}}}const H3=typeof document<"u"&&window.visualViewport,XG=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let b1=0,q3;function yR(e={}){let{isDisabled:t}=e;si(()=>{if(!t)return b1++,b1===1&&(Mm()?q3=JG():q3=YG()),()=>{b1--,b1===0&&q3()}},[t])}function YG(){return qi(zy(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),zy(document.documentElement,"overflow","hidden"))}function JG(){let e,t,i=B=>{e=Uw(B.target,!0),!(e===document.documentElement&&e===document.body)&&e instanceof HTMLElement&&window.getComputedStyle(e).overscrollBehavior==="auto"&&(t=zy(e,"overscrollBehavior","contain"))},c=B=>{if(!e||e===document.documentElement||e===document.body){B.preventDefault();return}e.scrollHeight===e.clientHeight&&e.scrollWidth===e.clientWidth&&B.preventDefault()},h=()=>{t&&t()},_=B=>{let N=B.target;QG(N)&&(a(),N.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{N.style.transform="",H3&&(H3.height<window.innerHeight?requestAnimationFrame(()=>{nP(N)}):H3.addEventListener("resize",()=>nP(N),{once:!0}))}))},w=null,a=()=>{if(w)return;let B=()=>{window.scrollTo(0,0)},N=window.pageXOffset,F=window.pageYOffset;w=qi(Sv(window,"scroll",B),zy(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),zy(document.documentElement,"overflow","hidden"),zy(document.body,"marginTop",`-${F}px`),()=>{window.scrollTo(N,F)}),window.scrollTo(0,0)},A=qi(Sv(document,"touchstart",i,{passive:!1,capture:!0}),Sv(document,"touchmove",c,{passive:!1,capture:!0}),Sv(document,"touchend",h,{passive:!1,capture:!0}),Sv(document,"focus",_,!0));return()=>{t==null||t(),w==null||w(),A()}}function zy(e,t,i){let c=e.style[t];return e.style[t]=i,()=>{e.style[t]=c}}function Sv(e,t,i,c){return e.addEventListener(t,i,c),()=>{e.removeEventListener(t,i,c)}}function nP(e){let t=document.scrollingElement||document.documentElement,i=e;for(;i&&i!==t;){let c=Uw(i);if(c!==document.documentElement&&c!==document.body&&c!==i){let h=c.getBoundingClientRect().top,_=i.getBoundingClientRect().top;_>h+i.clientHeight&&(c.scrollTop+=_-h)}i=c.parentElement}}function QG(e){return e instanceof HTMLInputElement&&!XG.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}const mS=rn.createContext(null);function eH(e){let{children:t}=e,i=V.useContext(mS),[c,h]=V.useState(0),_=V.useMemo(()=>({parent:i,modalCount:c,addModal(){h(w=>w+1),i&&i.addModal()},removeModal(){h(w=>w-1),i&&i.removeModal()}}),[i,c]);return rn.createElement(mS.Provider,{value:_},t)}function tH(){let e=V.useContext(mS);return{modalProviderProps:{"aria-hidden":e&&e.modalCount>0?!0:void 0}}}function rH(e){let{modalProviderProps:t}=tH();return rn.createElement("div",{"data-overlay-container":!0,...e,...t})}function xR(e){return rn.createElement(eH,null,rn.createElement(rH,e))}function aP(e){let t=o0(),{portalContainer:i=t?null:document.body,...c}=e;if(rn.useEffect(()=>{if(i!=null&&i.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[i]),!i)return null;let h=rn.createElement(xR,c);return $A.createPortal(h,i)}var vR={};vR={dismiss:"تجاهل"};var _R={};_R={dismiss:"Отхвърляне"};var bR={};bR={dismiss:"Odstranit"};var wR={};wR={dismiss:"Luk"};var SR={};SR={dismiss:"Schließen"};var TR={};TR={dismiss:"Απόρριψη"};var ER={};ER={dismiss:"Dismiss"};var CR={};CR={dismiss:"Descartar"};var DR={};DR={dismiss:"Lõpeta"};var PR={};PR={dismiss:"Hylkää"};var MR={};MR={dismiss:"Rejeter"};var AR={};AR={dismiss:"התעלם"};var kR={};kR={dismiss:"Odbaci"};var RR={};RR={dismiss:"Elutasítás"};var IR={};IR={dismiss:"Ignora"};var zR={};zR={dismiss:"閉じる"};var LR={};LR={dismiss:"무시"};var $R={};$R={dismiss:"Atmesti"};var BR={};BR={dismiss:"Nerādīt"};var NR={};NR={dismiss:"Lukk"};var jR={};jR={dismiss:"Negeren"};var OR={};OR={dismiss:"Zignoruj"};var FR={};FR={dismiss:"Descartar"};var VR={};VR={dismiss:"Dispensar"};var UR={};UR={dismiss:"Revocare"};var GR={};GR={dismiss:"Пропустить"};var HR={};HR={dismiss:"Zrušiť"};var qR={};qR={dismiss:"Opusti"};var WR={};WR={dismiss:"Odbaci"};var KR={};KR={dismiss:"Avvisa"};var ZR={};ZR={dismiss:"Kapat"};var XR={};XR={dismiss:"Скасувати"};var YR={};YR={dismiss:"取消"};var JR={};JR={dismiss:"關閉"};var QR={};QR={"ar-AE":vR,"bg-BG":_R,"cs-CZ":bR,"da-DK":wR,"de-DE":SR,"el-GR":TR,"en-US":ER,"es-ES":CR,"et-EE":DR,"fi-FI":PR,"fr-FR":MR,"he-IL":AR,"hr-HR":kR,"hu-HU":RR,"it-IT":IR,"ja-JP":zR,"ko-KR":LR,"lt-LT":$R,"lv-LV":BR,"nb-NO":NR,"nl-NL":jR,"pl-PL":OR,"pt-BR":FR,"pt-PT":VR,"ro-RO":UR,"ru-RU":GR,"sk-SK":HR,"sl-SI":qR,"sr-SP":WR,"sv-SE":KR,"tr-TR":ZR,"uk-UA":XR,"zh-CN":YR,"zh-TW":JR};const iP={border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"};function nH(e={}){let{style:t,isFocusable:i}=e,[c,h]=V.useState(!1),{focusWithinProps:_}=yd({isDisabled:!i,onFocusWithinChange:a=>h(a)}),w=V.useMemo(()=>c?t:t?{...iP,...t}:iP,[c]);return{visuallyHiddenProps:{..._,style:w}}}function gS(e){let{children:t,elementType:i="div",isFocusable:c,style:h,..._}=e,{visuallyHiddenProps:w}=nH(e);return rn.createElement(i,xr(_,w),t)}function aH(e){return e&&e.__esModule?e.default:e}function Qy(e){let{onDismiss:t,...i}=e,c=Eu(aH(QR),"@react-aria/overlays"),h=C_(i,c.format("dismiss")),_=()=>{t&&t()};return rn.createElement(gS,null,rn.createElement("button",{...h,tabIndex:-1,onClick:_,style:{width:1,height:1}}))}let Tv=new WeakMap,uu=[];function eI(e,t=document.body){let i=new Set(e),c=new Set,h=A=>{for(let G of A.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))i.add(G);let B=G=>{if(i.has(G)||G.parentElement&&c.has(G.parentElement)&&G.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let Q of i)if(G.contains(Q))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},N=document.createTreeWalker(A,NodeFilter.SHOW_ELEMENT,{acceptNode:B}),F=B(A);if(F===NodeFilter.FILTER_ACCEPT&&_(A),F!==NodeFilter.FILTER_REJECT){let G=N.nextNode();for(;G!=null;)_(G),G=N.nextNode()}},_=A=>{var B;let N=(B=Tv.get(A))!==null&&B!==void 0?B:0;A.getAttribute("aria-hidden")==="true"&&N===0||(N===0&&A.setAttribute("aria-hidden","true"),c.add(A),Tv.set(A,N+1))};uu.length&&uu[uu.length-1].disconnect(),h(t);let w=new MutationObserver(A=>{for(let B of A)if(!(B.type!=="childList"||B.addedNodes.length===0)&&![...i,...c].some(N=>N.contains(B.target))){for(let N of B.removedNodes)N instanceof Element&&(i.delete(N),c.delete(N));for(let N of B.addedNodes)(N instanceof HTMLElement||N instanceof SVGElement)&&(N.dataset.liveAnnouncer==="true"||N.dataset.reactAriaTopLayer==="true")?i.add(N):N instanceof Element&&h(N)}});w.observe(t,{childList:!0,subtree:!0});let a={visibleNodes:i,hiddenNodes:c,observe(){w.observe(t,{childList:!0,subtree:!0})},disconnect(){w.disconnect()}};return uu.push(a),()=>{w.disconnect();for(let A of c){let B=Tv.get(A);B!=null&&(B===1?(A.removeAttribute("aria-hidden"),Tv.delete(A)):Tv.set(A,B-1))}a===uu[uu.length-1]?(uu.pop(),uu.length&&uu[uu.length-1].observe()):uu.splice(uu.indexOf(a),1)}}const iH=V.createContext({});function sH(){var e;return(e=V.useContext(iH))!==null&&e!==void 0?e:{}}const tI=rn.createContext(null);function I5(e){let t=o0(),{portalContainer:i=t?null:document.body,isExiting:c}=e,[h,_]=V.useState(!1),w=V.useMemo(()=>({contain:h,setContain:_}),[h,_]),{getContainer:a}=sH();if(!e.portalContainer&&a&&(i=a()),!i)return null;let A=e.children;return e.disableFocusManagement||(A=rn.createElement(hR,{restoreFocus:!0,contain:(e.shouldContainFocus||h)&&!c},A)),A=rn.createElement(tI.Provider,{value:w},rn.createElement($G,null,A)),$A.createPortal(A,i)}function rI(){let e=V.useContext(tI),t=e==null?void 0:e.setContain;si(()=>{t==null||t(!0)},[t])}const z5=V.createContext({});function qw(e){const t=V.useRef(null);return t.current===null&&(t.current=e()),t.current}const A_=V.createContext(null),o_=V.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class oH extends V.Component{getSnapshotBeforeUpdate(t){const i=this.props.childRef.current;if(i&&t.isPresent&&!this.props.isPresent){const c=i.offsetParent,h=c instanceof HTMLElement&&c.offsetWidth||0,_=this.props.sizeRef.current;_.height=i.offsetHeight||0,_.width=i.offsetWidth||0,_.top=i.offsetTop,_.left=i.offsetLeft,_.right=h-_.width-_.left}return null}componentDidUpdate(){}render(){return this.props.children}}function lH({children:e,isPresent:t,anchorX:i}){const c=V.useId(),h=V.useRef(null),_=V.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:w}=V.useContext(o_);return V.useInsertionEffect(()=>{const{width:a,height:A,top:B,left:N,right:F}=_.current;if(t||!h.current||!a||!A)return;const G=i==="left"?`left: ${N}`:`right: ${F}`;h.current.dataset.motionPopId=c;const Q=document.createElement("style");return w&&(Q.nonce=w),document.head.appendChild(Q),Q.sheet&&Q.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${A}px !important;
            ${G}px !important;
            top: ${B}px !important;
          }
        `),()=>{document.head.removeChild(Q)}},[t]),b.jsx(oH,{isPresent:t,childRef:h,sizeRef:_,children:V.cloneElement(e,{ref:h})})}const cH=({children:e,initial:t,isPresent:i,onExitComplete:c,custom:h,presenceAffectsLayout:_,mode:w,anchorX:a})=>{const A=qw(uH),B=V.useId(),N=V.useCallback(G=>{A.set(G,!0);for(const Q of A.values())if(!Q)return;c&&c()},[A,c]),F=V.useMemo(()=>({id:B,initial:t,isPresent:i,custom:h,onExitComplete:N,register:G=>(A.set(G,!1),()=>A.delete(G))}),_?[Math.random(),N]:[i,N]);return V.useMemo(()=>{A.forEach((G,Q)=>A.set(Q,!1))},[i]),V.useEffect(()=>{!i&&!A.size&&c&&c()},[i]),w==="popLayout"&&(e=b.jsx(lH,{isPresent:i,anchorX:a,children:e})),b.jsx(A_.Provider,{value:F,children:e})};function uH(){return new Map}function nI(e=!0){const t=V.useContext(A_);if(t===null)return[!0,null];const{isPresent:i,onExitComplete:c,register:h}=t,_=V.useId();V.useEffect(()=>{e&&h(_)},[e]);const w=V.useCallback(()=>e&&c&&c(_),[_,c,e]);return!i&&c?[!1,w]:[!0]}function Ioe(){return dH(V.useContext(A_))}function dH(e){return e===null?!0:e.isPresent}const w1=e=>e.key||"";function sP(e){const t=[];return V.Children.forEach(e,i=>{V.isValidElement(i)&&t.push(i)}),t}const L5=typeof window<"u",aI=L5?V.useLayoutEffect:V.useEffect,Uf=({children:e,custom:t,initial:i=!0,onExitComplete:c,presenceAffectsLayout:h=!0,mode:_="sync",propagate:w=!1,anchorX:a="left"})=>{const[A,B]=nI(w),N=V.useMemo(()=>sP(e),[e]),F=w&&!A?[]:N.map(w1),G=V.useRef(!0),Q=V.useRef(N),te=qw(()=>new Map),[Y,oe]=V.useState(N),[de,me]=V.useState(N);aI(()=>{G.current=!1,Q.current=N;for(let Se=0;Se<de.length;Se++){const $e=w1(de[Se]);F.includes($e)?te.delete($e):te.get($e)!==!0&&te.set($e,!1)}},[de,F.length,F.join("-")]);const be=[];if(N!==Y){let Se=[...N];for(let $e=0;$e<de.length;$e++){const Le=de[$e],re=w1(Le);F.includes(re)||(Se.splice($e,0,Le),be.push(Le))}_==="wait"&&be.length&&(Se=be),me(sP(Se)),oe(N);return}const{forceRender:pe}=V.useContext(z5);return b.jsx(b.Fragment,{children:de.map(Se=>{const $e=w1(Se),Le=w&&!A?!1:N===de||F.includes($e),re=()=>{if(te.has($e))te.set($e,!0);else return;let Ee=!0;te.forEach(se=>{se||(Ee=!1)}),Ee&&(pe==null||pe(),me(Q.current),w&&(B==null||B()),c&&c())};return b.jsx(cH,{isPresent:Le,initial:!G.current||i?void 0:!1,custom:Le?void 0:t,presenceAffectsLayout:h,mode:_,onExitComplete:Le?void 0:re,anchorX:a,children:Se},$e)})})},Bl=e=>e;let zoe=Bl,iI=Bl;function $5(e){let t;return()=>(t===void 0&&(t=e()),t)}const ex=(e,t,i)=>{const c=t-e;return c===0?1:(i-e)/c},If=e=>e*1e3,zf=e=>e/1e3,Ww={skipAnimations:!1,useManualTiming:!1};function hH(e){let t=new Set,i=new Set,c=!1,h=!1;const _=new WeakSet;let w={delta:0,timestamp:0,isProcessing:!1};function a(B){_.has(B)&&(A.schedule(B),e()),B(w)}const A={schedule:(B,N=!1,F=!1)=>{const Q=F&&c?t:i;return N&&_.add(B),Q.has(B)||Q.add(B),B},cancel:B=>{i.delete(B),_.delete(B)},process:B=>{if(w=B,c){h=!0;return}c=!0,[t,i]=[i,t],t.forEach(a),t.clear(),c=!1,h&&(h=!1,A.process(B))}};return A}const S1=["read","resolveKeyframes","update","preRender","render","postRender"],fH=40;function sI(e,t){let i=!1,c=!0;const h={delta:0,timestamp:0,isProcessing:!1},_=()=>i=!0,w=S1.reduce((de,me)=>(de[me]=hH(_),de),{}),{read:a,resolveKeyframes:A,update:B,preRender:N,render:F,postRender:G}=w,Q=()=>{const de=Ww.useManualTiming?h.timestamp:performance.now();i=!1,h.delta=c?1e3/60:Math.max(Math.min(de-h.timestamp,fH),1),h.timestamp=de,h.isProcessing=!0,a.process(h),A.process(h),B.process(h),N.process(h),F.process(h),G.process(h),h.isProcessing=!1,i&&t&&(c=!1,e(Q))},te=()=>{i=!0,c=!0,h.isProcessing||e(Q)};return{schedule:S1.reduce((de,me)=>{const be=w[me];return de[me]=(pe,Se=!1,$e=!1)=>(i||te(),be.schedule(pe,Se,$e)),de},{}),cancel:de=>{for(let me=0;me<S1.length;me++)w[S1[me]].cancel(de)},state:h,steps:w}}const{schedule:Ci,cancel:Tm,state:vo,steps:W3}=sI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Bl,!0),B5=V.createContext({strict:!1}),oP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},tx={};for(const e in oP)tx[e]={isEnabled:t=>oP[e].some(i=>!!t[i])};function yS(e){for(const t in e)tx[t]={...tx[t],...e[t]}}function Tu({children:e,features:t,strict:i=!1}){const[,c]=V.useState(!K3(t)),h=V.useRef(void 0);if(!K3(t)){const{renderer:_,...w}=t;h.current=_,yS(w)}return V.useEffect(()=>{K3(t)&&t().then(({renderer:_,...w})=>{yS(w),h.current=_,c(!0)})},[]),b.jsx(B5.Provider,{value:{renderer:h.current,strict:i},children:e})}function K3(e){return typeof e=="function"}const pH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yw(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||pH.has(e)}let oI=e=>!yw(e);function lI(e){e&&(oI=t=>t.startsWith("on")?!yw(t):e(t))}try{lI(require("@emotion/is-prop-valid").default)}catch{}function mH(e,t,i){const c={};for(const h in e)h==="values"&&typeof e.values=="object"||(oI(h)||i===!0&&yw(h)||!t&&!yw(h)||e.draggable&&h.startsWith("onDrag"))&&(c[h]=e[h]);return c}function cI({children:e,isValidProp:t,...i}){t&&lI(t),i={...V.useContext(o_),...i},i.isStatic=qw(()=>i.isStatic);const c=V.useMemo(()=>i,[JSON.stringify(i.transition),i.transformPagePoint,i.reducedMotion]);return b.jsx(o_.Provider,{value:c,children:e})}function uI(e){if(typeof Proxy>"u")return e;const t=new Map,i=(...c)=>e(...c);return new Proxy(i,{get:(c,h)=>h==="create"?e:(t.has(h)||t.set(h,e(h)),t.get(h))})}const Kw=V.createContext({});function l_(e){return typeof e=="string"||Array.isArray(e)}function Zw(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const N5=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],j5=["initial",...N5];function Xw(e){return Zw(e.animate)||j5.some(t=>l_(e[t]))}function dI(e){return!!(Xw(e)||e.variants)}function gH(e,t){if(Xw(e)){const{initial:i,animate:c}=e;return{initial:i===!1||l_(i)?i:void 0,animate:l_(c)?c:void 0}}return e.inherit!==!1?t:{}}function yH(e){const{initial:t,animate:i}=gH(e,V.useContext(Kw));return V.useMemo(()=>({initial:t,animate:i}),[lP(t),lP(i)])}function lP(e){return Array.isArray(e)?e.join(" "):e}const xH=Symbol.for("motionComponentSymbol");function Ly(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function vH(e,t,i){return V.useCallback(c=>{c&&e.onMount&&e.onMount(c),t&&(c?t.mount(c):t.unmount()),i&&(typeof i=="function"?i(c):Ly(i)&&(i.current=c))},[t])}const O5=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_H="framerAppearId",hI="data-"+O5(_H),{schedule:F5}=sI(queueMicrotask,!1),fI=V.createContext({});function bH(e,t,i,c,h){var _,w;const{visualElement:a}=V.useContext(Kw),A=V.useContext(B5),B=V.useContext(A_),N=V.useContext(o_).reducedMotion,F=V.useRef(null);c=c||A.renderer,!F.current&&c&&(F.current=c(e,{visualState:t,parent:a,props:i,presenceContext:B,blockInitialAnimation:B?B.initial===!1:!1,reducedMotionConfig:N}));const G=F.current,Q=V.useContext(fI);G&&!G.projection&&h&&(G.type==="html"||G.type==="svg")&&wH(F.current,i,h,Q);const te=V.useRef(!1);V.useInsertionEffect(()=>{G&&te.current&&G.update(i,B)});const Y=i[hI],oe=V.useRef(!!Y&&!(!((_=window.MotionHandoffIsComplete)===null||_===void 0)&&_.call(window,Y))&&((w=window.MotionHasOptimisedAnimation)===null||w===void 0?void 0:w.call(window,Y)));return aI(()=>{G&&(te.current=!0,window.MotionIsMounted=!0,G.updateFeatures(),F5.render(G.render),oe.current&&G.animationState&&G.animationState.animateChanges())}),V.useEffect(()=>{G&&(!oe.current&&G.animationState&&G.animationState.animateChanges(),oe.current&&(queueMicrotask(()=>{var de;(de=window.MotionHandoffMarkAsComplete)===null||de===void 0||de.call(window,Y)}),oe.current=!1))}),G}function wH(e,t,i,c){const{layoutId:h,layout:_,drag:w,dragConstraints:a,layoutScroll:A,layoutRoot:B}=t;e.projection=new i(e.latestValues,t["data-framer-portal-id"]?void 0:pI(e.parent)),e.projection.setOptions({layoutId:h,layout:_,alwaysMeasureLayout:!!w||a&&Ly(a),visualElement:e,animationType:typeof _=="string"?_:"both",initialPromotionConfig:c,layoutScroll:A,layoutRoot:B})}function pI(e){if(e)return e.options.allowProjection!==!1?e.projection:pI(e.parent)}function SH({preloadedFeatures:e,createVisualElement:t,useRender:i,useVisualState:c,Component:h}){var _,w;e&&yS(e);function a(B,N){let F;const G={...V.useContext(o_),...B,layoutId:TH(B)},{isStatic:Q}=G,te=yH(B),Y=c(B,Q);if(!Q&&L5){EH();const oe=CH(G);F=oe.MeasureLayout,te.visualElement=bH(h,Y,G,t,oe.ProjectionNode)}return b.jsxs(Kw.Provider,{value:te,children:[F&&te.visualElement?b.jsx(F,{visualElement:te.visualElement,...G}):null,i(h,B,vH(Y,te.visualElement,N),Y,Q,te.visualElement)]})}a.displayName=`motion.${typeof h=="string"?h:`create(${(w=(_=h.displayName)!==null&&_!==void 0?_:h.name)!==null&&w!==void 0?w:""})`}`;const A=V.forwardRef(a);return A[xH]=h,A}function TH({layoutId:e}){const t=V.useContext(z5).id;return t&&e!==void 0?t+"-"+e:e}function EH(e,t){V.useContext(B5).strict}function CH(e){const{drag:t,layout:i}=tx;if(!t&&!i)return{};const c={...t,...i};return{MeasureLayout:t!=null&&t.isEnabled(e)||i!=null&&i.isEnabled(e)?c.MeasureLayout:void 0,ProjectionNode:c.ProjectionNode}}const DH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function V5(e){return typeof e!="string"||e.includes("-")?!1:!!(DH.indexOf(e)>-1||/[A-Z]/u.test(e))}function cP(e){const t=[{},{}];return e==null||e.values.forEach((i,c)=>{t[0][c]=i.get(),t[1][c]=i.getVelocity()}),t}function U5(e,t,i,c){if(typeof t=="function"){const[h,_]=cP(c);t=t(i!==void 0?i:e.custom,h,_)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[h,_]=cP(c);t=t(i!==void 0?i:e.custom,h,_)}return t}const xS=e=>Array.isArray(e),PH=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),MH=e=>xS(e)?e[e.length-1]||0:e,qo=e=>!!(e&&e.getVelocity);function F1(e){const t=qo(e)?e.get():e;return PH(t)?t.toValue():t}function AH({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:i},c,h,_){const w={latestValues:kH(c,h,_,e),renderState:t()};return i&&(w.onMount=a=>i({props:c,current:a,...w}),w.onUpdate=a=>i(a)),w}const mI=e=>(t,i)=>{const c=V.useContext(Kw),h=V.useContext(A_),_=()=>AH(e,t,c,h);return i?_():qw(_)};function kH(e,t,i,c){const h={},_=c(e,{});for(const G in _)h[G]=F1(_[G]);let{initial:w,animate:a}=e;const A=Xw(e),B=dI(e);t&&B&&!A&&e.inherit!==!1&&(w===void 0&&(w=t.initial),a===void 0&&(a=t.animate));let N=i?i.initial===!1:!1;N=N||w===!1;const F=N?a:w;if(F&&typeof F!="boolean"&&!Zw(F)){const G=Array.isArray(F)?F:[F];for(let Q=0;Q<G.length;Q++){const te=U5(e,G[Q]);if(te){const{transitionEnd:Y,transition:oe,...de}=te;for(const me in de){let be=de[me];if(Array.isArray(be)){const pe=N?be.length-1:0;be=be[pe]}be!==null&&(h[me]=be)}for(const me in Y)h[me]=Y[me]}}}return h}const px=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],u0=new Set(px),gI=e=>t=>typeof t=="string"&&t.startsWith(e),G5=gI("--"),RH=gI("var(--"),H5=e=>RH(e)?IH.test(e.split("/*")[0].trim()):!1,IH=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yI=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Bf=(e,t,i)=>i>t?t:i<e?e:i,mx={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},c_={...mx,transform:e=>Bf(0,1,e)},T1={...mx,default:1},k_=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),hm=k_("deg"),xh=k_("%"),jn=k_("px"),zH=k_("vh"),LH=k_("vw"),uP={...xh,parse:e=>xh.parse(e)/100,transform:e=>xh.transform(e*100)},$H={borderWidth:jn,borderTopWidth:jn,borderRightWidth:jn,borderBottomWidth:jn,borderLeftWidth:jn,borderRadius:jn,radius:jn,borderTopLeftRadius:jn,borderTopRightRadius:jn,borderBottomRightRadius:jn,borderBottomLeftRadius:jn,width:jn,maxWidth:jn,height:jn,maxHeight:jn,top:jn,right:jn,bottom:jn,left:jn,padding:jn,paddingTop:jn,paddingRight:jn,paddingBottom:jn,paddingLeft:jn,margin:jn,marginTop:jn,marginRight:jn,marginBottom:jn,marginLeft:jn,backgroundPositionX:jn,backgroundPositionY:jn},BH={rotate:hm,rotateX:hm,rotateY:hm,rotateZ:hm,scale:T1,scaleX:T1,scaleY:T1,scaleZ:T1,skew:hm,skewX:hm,skewY:hm,distance:jn,translateX:jn,translateY:jn,translateZ:jn,x:jn,y:jn,z:jn,perspective:jn,transformPerspective:jn,opacity:c_,originX:uP,originY:uP,originZ:jn},dP={...mx,transform:Math.round},q5={...$H,...BH,zIndex:dP,size:jn,fillOpacity:c_,strokeOpacity:c_,numOctaves:dP},NH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},jH=px.length;function OH(e,t,i){let c="",h=!0;for(let _=0;_<jH;_++){const w=px[_],a=e[w];if(a===void 0)continue;let A=!0;if(typeof a=="number"?A=a===(w.startsWith("scale")?1:0):A=parseFloat(a)===0,!A||i){const B=yI(a,q5[w]);if(!A){h=!1;const N=NH[w]||w;c+=`${N}(${B}) `}i&&(t[w]=B)}}return c=c.trim(),i?c=i(t,h?"":c):h&&(c="none"),c}function W5(e,t,i){const{style:c,vars:h,transformOrigin:_}=e;let w=!1,a=!1;for(const A in t){const B=t[A];if(u0.has(A)){w=!0;continue}else if(G5(A)){h[A]=B;continue}else{const N=yI(B,q5[A]);A.startsWith("origin")?(a=!0,_[A]=N):c[A]=N}}if(t.transform||(w||i?c.transform=OH(t,e.transform,i):c.transform&&(c.transform="none")),a){const{originX:A="50%",originY:B="50%",originZ:N=0}=_;c.transformOrigin=`${A} ${B} ${N}`}}const FH={offset:"stroke-dashoffset",array:"stroke-dasharray"},VH={offset:"strokeDashoffset",array:"strokeDasharray"};function UH(e,t,i=1,c=0,h=!0){e.pathLength=1;const _=h?FH:VH;e[_.offset]=jn.transform(-c);const w=jn.transform(t),a=jn.transform(i);e[_.array]=`${w} ${a}`}function hP(e,t,i){return typeof e=="string"?e:jn.transform(t+i*e)}function GH(e,t,i){const c=hP(t,e.x,e.width),h=hP(i,e.y,e.height);return`${c} ${h}`}function K5(e,{attrX:t,attrY:i,attrScale:c,originX:h,originY:_,pathLength:w,pathSpacing:a=1,pathOffset:A=0,...B},N,F){if(W5(e,B,F),N){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:G,style:Q,dimensions:te}=e;G.transform&&(te&&(Q.transform=G.transform),delete G.transform),te&&(h!==void 0||_!==void 0||Q.transform)&&(Q.transformOrigin=GH(te,h!==void 0?h:.5,_!==void 0?_:.5)),t!==void 0&&(G.x=t),i!==void 0&&(G.y=i),c!==void 0&&(G.scale=c),w!==void 0&&UH(G,w,a,A,!1)}const Z5=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),xI=()=>({...Z5(),attrs:{}}),X5=e=>typeof e=="string"&&e.toLowerCase()==="svg";function vI(e,{style:t,vars:i},c,h){Object.assign(e.style,t,h&&h.getProjectionStyles(c));for(const _ in i)e.style.setProperty(_,i[_])}const _I=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bI(e,t,i,c){vI(e,t,void 0,c);for(const h in t.attrs)e.setAttribute(_I.has(h)?h:O5(h),t.attrs[h])}const u_={};function HH(e){for(const t in e)u_[t]=e[t],G5(t)&&(u_[t].isCSSVariable=!0)}function wI(e,{layout:t,layoutId:i}){return u0.has(e)||e.startsWith("origin")||(t||i!==void 0)&&(!!u_[e]||e==="opacity")}function Y5(e,t,i){var c;const{style:h}=e,_={};for(const w in h)(qo(h[w])||t.style&&qo(t.style[w])||wI(w,e)||((c=i==null?void 0:i.getValue(w))===null||c===void 0?void 0:c.liveStyle)!==void 0)&&(_[w]=h[w]);return _}function SI(e,t,i){const c=Y5(e,t,i);for(const h in e)if(qo(e[h])||qo(t[h])){const _=px.indexOf(h)!==-1?"attr"+h.charAt(0).toUpperCase()+h.substring(1):h;c[_]=e[h]}return c}function qH(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const fP=["x","y","width","height","cx","cy","r"],WH={useVisualState:mI({scrapeMotionValuesFromProps:SI,createRenderState:xI,onUpdate:({props:e,prevProps:t,current:i,renderState:c,latestValues:h})=>{if(!i)return;let _=!!e.drag;if(!_){for(const a in h)if(u0.has(a)){_=!0;break}}if(!_)return;let w=!t;if(t)for(let a=0;a<fP.length;a++){const A=fP[a];e[A]!==t[A]&&(w=!0)}w&&Ci.read(()=>{qH(i,c),Ci.render(()=>{K5(c,h,X5(i.tagName),e.transformTemplate),bI(i,c)})})}})},KH={useVisualState:mI({scrapeMotionValuesFromProps:Y5,createRenderState:Z5})};function TI(e,t,i){for(const c in t)!qo(t[c])&&!wI(c,i)&&(e[c]=t[c])}function ZH({transformTemplate:e},t){return V.useMemo(()=>{const i=Z5();return W5(i,t,e),Object.assign({},i.vars,i.style)},[t])}function XH(e,t){const i=e.style||{},c={};return TI(c,i,e),Object.assign(c,ZH(e,t)),c}function YH(e,t){const i={},c=XH(e,t);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,c.userSelect=c.WebkitUserSelect=c.WebkitTouchCallout="none",c.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=c,i}function JH(e,t,i,c){const h=V.useMemo(()=>{const _=xI();return K5(_,t,X5(c),e.transformTemplate),{..._.attrs,style:{..._.style}}},[t]);if(e.style){const _={};TI(_,e.style,e),h.style={..._,...h.style}}return h}function QH(e=!1){return(i,c,h,{latestValues:_},w)=>{const A=(V5(i)?JH:YH)(c,_,w,i),B=mH(c,typeof i=="string",e),N=i!==V.Fragment?{...B,...A,ref:h}:{},{children:F}=c,G=V.useMemo(()=>qo(F)?F.get():F,[F]);return V.createElement(i,{...N,children:G})}}function EI(e,t){return function(c,{forwardMotionProps:h}={forwardMotionProps:!1}){const w={...V5(c)?WH:KH,preloadedFeatures:e,useRender:QH(h),createVisualElement:t,Component:c};return SH(w)}}const eq=EI(),jl=uI(eq);function CI(e,t){if(!Array.isArray(t))return!1;const i=t.length;if(i!==e.length)return!1;for(let c=0;c<i;c++)if(t[c]!==e[c])return!1;return!0}function Yw(e,t,i){const c=e.getProps();return U5(c,t,i!==void 0?i:c.custom,e)}const tq=$5(()=>window.ScrollTimeline!==void 0);class rq{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,i){for(let c=0;c<this.animations.length;c++)this.animations[c][t]=i}attachTimeline(t,i){const c=this.animations.map(h=>{if(tq()&&h.attachTimeline)return h.attachTimeline(t);if(typeof i=="function")return i(h)});return()=>{c.forEach((h,_)=>{h&&h(),this.animations[_].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let i=0;i<this.animations.length;i++)t=Math.max(t,this.animations[i].duration);return t}runAll(t){this.animations.forEach(i=>i[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class nq extends rq{then(t,i){return Promise.all(this.animations).then(t).catch(i)}}function J5(e,t){return e?e[t]||e.default||e:void 0}const vS=2e4;function DI(e){let t=0;const i=50;let c=e.next(t);for(;!c.done&&t<vS;)t+=i,c=e.next(t);return t>=vS?1/0:t}function Q5(e){return typeof e=="function"}function pP(e,t){e.timeline=t,e.onfinish=null}const eT=e=>Array.isArray(e)&&typeof e[0]=="number",aq={linearEasing:void 0};function iq(e,t){const i=$5(e);return()=>{var c;return(c=aq[t])!==null&&c!==void 0?c:i()}}const xw=iq(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),PI=(e,t,i=10)=>{let c="";const h=Math.max(Math.round(t/i),2);for(let _=0;_<h;_++)c+=e(ex(0,h-1,_))+", ";return`linear(${c.substring(0,c.length-2)})`};function MI(e){return!!(typeof e=="function"&&xw()||!e||typeof e=="string"&&(e in _S||xw())||eT(e)||Array.isArray(e)&&e.every(MI))}const Ov=([e,t,i,c])=>`cubic-bezier(${e}, ${t}, ${i}, ${c})`,_S={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ov([0,.65,.55,1]),circOut:Ov([.55,0,1,.45]),backIn:Ov([.31,.01,.66,-.59]),backOut:Ov([.33,1.53,.69,.99])};function AI(e,t){if(e)return typeof e=="function"&&xw()?PI(e,t):eT(e)?Ov(e):Array.isArray(e)?e.map(i=>AI(i,t)||_S.easeOut):_S[e]}const fd={x:!1,y:!1};function kI(){return fd.x||fd.y}function sq(e,t,i){var c;if(e instanceof Element)return[e];if(typeof e=="string"){let h=document;t&&(h=t.current);const _=(c=i==null?void 0:i[e])!==null&&c!==void 0?c:h.querySelectorAll(e);return _?Array.from(_):[]}return Array.from(e)}function RI(e,t){const i=sq(e),c=new AbortController,h={passive:!0,...t,signal:c.signal};return[i,h,()=>c.abort()]}function mP(e){return!(e.pointerType==="touch"||kI())}function oq(e,t,i={}){const[c,h,_]=RI(e,i),w=a=>{if(!mP(a))return;const{target:A}=a,B=t(A,a);if(typeof B!="function"||!A)return;const N=F=>{mP(F)&&(B(F),A.removeEventListener("pointerleave",N))};A.addEventListener("pointerleave",N,h)};return c.forEach(a=>{a.addEventListener("pointerenter",w,h)}),_}const II=(e,t)=>t?e===t?!0:II(e,t.parentElement):!1,tT=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,lq=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function cq(e){return lq.has(e.tagName)||e.tabIndex!==-1}const Fv=new WeakSet;function gP(e){return t=>{t.key==="Enter"&&e(t)}}function Z3(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const uq=(e,t)=>{const i=e.currentTarget;if(!i)return;const c=gP(()=>{if(Fv.has(i))return;Z3(i,"down");const h=gP(()=>{Z3(i,"up")}),_=()=>Z3(i,"cancel");i.addEventListener("keyup",h,t),i.addEventListener("blur",_,t)});i.addEventListener("keydown",c,t),i.addEventListener("blur",()=>i.removeEventListener("keydown",c),t)};function yP(e){return tT(e)&&!kI()}function dq(e,t,i={}){const[c,h,_]=RI(e,i),w=a=>{const A=a.currentTarget;if(!yP(a)||Fv.has(A))return;Fv.add(A);const B=t(A,a),N=(Q,te)=>{window.removeEventListener("pointerup",F),window.removeEventListener("pointercancel",G),!(!yP(Q)||!Fv.has(A))&&(Fv.delete(A),typeof B=="function"&&B(Q,{success:te}))},F=Q=>{N(Q,i.useGlobalTarget||II(A,Q.target))},G=Q=>{N(Q,!1)};window.addEventListener("pointerup",F,h),window.addEventListener("pointercancel",G,h)};return c.forEach(a=>{!cq(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(i.useGlobalTarget?window:a).addEventListener("pointerdown",w,h),a.addEventListener("focus",B=>uq(B,h),h)}),_}function hq(e){return e==="x"||e==="y"?fd[e]?null:(fd[e]=!0,()=>{fd[e]=!1}):fd.x||fd.y?null:(fd.x=fd.y=!0,()=>{fd.x=fd.y=!1})}const zI=new Set(["width","height","top","left","right","bottom",...px]);let V1;function fq(){V1=void 0}const vh={now:()=>(V1===void 0&&vh.set(vo.isProcessing||Ww.useManualTiming?vo.timestamp:performance.now()),V1),set:e=>{V1=e,queueMicrotask(fq)}};function rT(e,t){e.indexOf(t)===-1&&e.push(t)}function nT(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)}function Loe([...e],t,i){const c=t<0?e.length+t:t;if(c>=0&&c<e.length){const h=i<0?e.length+i:i,[_]=e.splice(t,1);e.splice(h,0,_)}return e}class aT{constructor(){this.subscriptions=[]}add(t){return rT(this.subscriptions,t),()=>nT(this.subscriptions,t)}notify(t,i,c){const h=this.subscriptions.length;if(h)if(h===1)this.subscriptions[0](t,i,c);else for(let _=0;_<h;_++){const w=this.subscriptions[_];w&&w(t,i,c)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function LI(e,t){return t?e*(1e3/t):0}const xP=30,pq=e=>!isNaN(parseFloat(e)),vP={current:void 0};class mq{constructor(t,i={}){this.version="12.0.6",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(c,h=!0)=>{const _=vh.now();this.updatedAt!==_&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(c),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),h&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=i.owner}setCurrent(t){this.current=t,this.updatedAt=vh.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=pq(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,i){this.events[t]||(this.events[t]=new aT);const c=this.events[t].add(i);return t==="change"?()=>{c(),Ci.read(()=>{this.events.change.getSize()||this.stop()})}:c}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,i){this.passiveEffect=t,this.stopPassiveEffect=i}set(t,i=!0){!i||!this.passiveEffect?this.updateAndNotify(t,i):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,i,c){this.set(i),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-c}jump(t,i=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return vP.current&&vP.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=vh.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>xP)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,xP);return LI(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(t){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=t(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function d_(e,t){return new mq(e,t)}function gq(e,t,i){e.hasValue(t)?e.getValue(t).set(i):e.addValue(t,d_(i))}function yq(e,t){const i=Yw(e,t);let{transitionEnd:c={},transition:h={},..._}=i||{};_={..._,...c};for(const w in _){const a=MH(_[w]);gq(e,w,a)}}function xq(e){return!!(qo(e)&&e.add)}function bS(e,t){const i=e.getValue("willChange");if(xq(i))return i.add(t)}function $I(e){return e.props[hI]}const BI={current:!1},NI=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e,vq=1e-7,_q=12;function bq(e,t,i,c,h){let _,w,a=0;do w=t+(i-t)/2,_=NI(w,c,h)-e,_>0?i=w:t=w;while(Math.abs(_)>vq&&++a<_q);return w}function R_(e,t,i,c){if(e===t&&i===c)return Bl;const h=_=>bq(_,0,1,e,i);return _=>_===0||_===1?_:NI(h(_),t,c)}const jI=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,OI=e=>t=>1-e(1-t),FI=R_(.33,1.53,.69,.99),iT=OI(FI),VI=jI(iT),UI=e=>(e*=2)<1?.5*iT(e):.5*(2-Math.pow(2,-10*(e-1))),sT=e=>1-Math.sin(Math.acos(e)),GI=OI(sT),HI=jI(sT),qI=e=>/^0[^.\s]+$/u.test(e);function wq(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||qI(e):!0}const Zv=e=>Math.round(e*1e5)/1e5,oT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Sq(e){return e==null}const Tq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lT=(e,t)=>i=>!!(typeof i=="string"&&Tq.test(i)&&i.startsWith(e)||t&&!Sq(i)&&Object.prototype.hasOwnProperty.call(i,t)),WI=(e,t,i)=>c=>{if(typeof c!="string")return c;const[h,_,w,a]=c.match(oT);return{[e]:parseFloat(h),[t]:parseFloat(_),[i]:parseFloat(w),alpha:a!==void 0?parseFloat(a):1}},Eq=e=>Bf(0,255,e),X3={...mx,transform:e=>Math.round(Eq(e))},Hg={test:lT("rgb","red"),parse:WI("red","green","blue"),transform:({red:e,green:t,blue:i,alpha:c=1})=>"rgba("+X3.transform(e)+", "+X3.transform(t)+", "+X3.transform(i)+", "+Zv(c_.transform(c))+")"};function Cq(e){let t="",i="",c="",h="";return e.length>5?(t=e.substring(1,3),i=e.substring(3,5),c=e.substring(5,7),h=e.substring(7,9)):(t=e.substring(1,2),i=e.substring(2,3),c=e.substring(3,4),h=e.substring(4,5),t+=t,i+=i,c+=c,h+=h),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(c,16),alpha:h?parseInt(h,16)/255:1}}const wS={test:lT("#"),parse:Cq,transform:Hg.transform},$y={test:lT("hsl","hue"),parse:WI("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:i,alpha:c=1})=>"hsla("+Math.round(e)+", "+xh.transform(Zv(t))+", "+xh.transform(Zv(i))+", "+Zv(c_.transform(c))+")"},Go={test:e=>Hg.test(e)||wS.test(e)||$y.test(e),parse:e=>Hg.test(e)?Hg.parse(e):$y.test(e)?$y.parse(e):wS.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Hg.transform(e):$y.transform(e)},Dq=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Pq(e){var t,i;return isNaN(e)&&typeof e=="string"&&(((t=e.match(oT))===null||t===void 0?void 0:t.length)||0)+(((i=e.match(Dq))===null||i===void 0?void 0:i.length)||0)>0}const KI="number",ZI="color",Mq="var",Aq="var(",_P="${}",kq=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function h_(e){const t=e.toString(),i=[],c={color:[],number:[],var:[]},h=[];let _=0;const a=t.replace(kq,A=>(Go.test(A)?(c.color.push(_),h.push(ZI),i.push(Go.parse(A))):A.startsWith(Aq)?(c.var.push(_),h.push(Mq),i.push(A)):(c.number.push(_),h.push(KI),i.push(parseFloat(A))),++_,_P)).split(_P);return{values:i,split:a,indexes:c,types:h}}function XI(e){return h_(e).values}function YI(e){const{split:t,types:i}=h_(e),c=t.length;return h=>{let _="";for(let w=0;w<c;w++)if(_+=t[w],h[w]!==void 0){const a=i[w];a===KI?_+=Zv(h[w]):a===ZI?_+=Go.transform(h[w]):_+=h[w]}return _}}const Rq=e=>typeof e=="number"?0:e;function Iq(e){const t=XI(e);return YI(e)(t.map(Rq))}const Em={test:Pq,parse:XI,createTransformer:YI,getAnimatableNone:Iq},zq=new Set(["brightness","contrast","saturate","opacity"]);function Lq(e){const[t,i]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[c]=i.match(oT)||[];if(!c)return e;const h=i.replace(c,"");let _=zq.has(t)?1:0;return c!==i&&(_*=100),t+"("+_+h+")"}const $q=/\b([a-z-]*)\(.*?\)/gu,SS={...Em,getAnimatableNone:e=>{const t=e.match($q);return t?t.map(Lq).join(" "):e}},Bq={...q5,color:Go,backgroundColor:Go,outlineColor:Go,fill:Go,stroke:Go,borderColor:Go,borderTopColor:Go,borderRightColor:Go,borderBottomColor:Go,borderLeftColor:Go,filter:SS,WebkitFilter:SS},cT=e=>Bq[e];function JI(e,t){let i=cT(e);return i!==SS&&(i=Em),i.getAnimatableNone?i.getAnimatableNone(t):void 0}const Nq=new Set(["auto","none","0"]);function jq(e,t,i){let c=0,h;for(;c<e.length&&!h;){const _=e[c];typeof _=="string"&&!Nq.has(_)&&h_(_).values.length&&(h=e[c]),c++}if(h&&i)for(const _ of t)e[_]=JI(i,h)}const bP=e=>e===mx||e===jn,wP=(e,t)=>parseFloat(e.split(", ")[t]),SP=(e,t)=>(i,{transform:c})=>{if(c==="none"||!c)return 0;const h=c.match(/^matrix3d\((.+)\)$/u);if(h)return wP(h[1],t);{const _=c.match(/^matrix\((.+)\)$/u);return _?wP(_[1],e):0}},Oq=new Set(["x","y","z"]),Fq=px.filter(e=>!Oq.has(e));function Vq(e){const t=[];return Fq.forEach(i=>{const c=e.getValue(i);c!==void 0&&(t.push([i,c.get()]),c.set(i.startsWith("scale")?1:0))}),t}const rx={width:({x:e},{paddingLeft:t="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),height:({y:e},{paddingTop:t="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:SP(4,13),y:SP(5,14)};rx.translateX=rx.x;rx.translateY=rx.y;const Kg=new Set;let TS=!1,ES=!1;function QI(){if(ES){const e=Array.from(Kg).filter(c=>c.needsMeasurement),t=new Set(e.map(c=>c.element)),i=new Map;t.forEach(c=>{const h=Vq(c);h.length&&(i.set(c,h),c.render())}),e.forEach(c=>c.measureInitialState()),t.forEach(c=>{c.render();const h=i.get(c);h&&h.forEach(([_,w])=>{var a;(a=c.getValue(_))===null||a===void 0||a.set(w)})}),e.forEach(c=>c.measureEndState()),e.forEach(c=>{c.suspendedScrollY!==void 0&&window.scrollTo(0,c.suspendedScrollY)})}ES=!1,TS=!1,Kg.forEach(e=>e.complete()),Kg.clear()}function e8(){Kg.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ES=!0)})}function Uq(){e8(),QI()}class uT{constructor(t,i,c,h,_,w=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=i,this.name=c,this.motionValue=h,this.element=_,this.isAsync=w}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Kg.add(this),TS||(TS=!0,Ci.read(e8),Ci.resolveKeyframes(QI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:i,element:c,motionValue:h}=this;for(let _=0;_<t.length;_++)if(t[_]===null)if(_===0){const w=h==null?void 0:h.get(),a=t[t.length-1];if(w!==void 0)t[0]=w;else if(c&&i){const A=c.readValue(i,a);A!=null&&(t[0]=A)}t[0]===void 0&&(t[0]=a),h&&w===void 0&&h.set(t[0])}else t[_]=t[_-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Kg.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Kg.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const t8=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Gq=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Hq(e){const t=Gq.exec(e);if(!t)return[,];const[,i,c,h]=t;return[`--${i??c}`,h]}function r8(e,t,i=1){const[c,h]=Hq(e);if(!c)return;const _=window.getComputedStyle(t).getPropertyValue(c);if(_){const w=_.trim();return t8(w)?parseFloat(w):w}return H5(h)?r8(h,t,i+1):h}const n8=e=>t=>t.test(e),qq={test:e=>e==="auto",parse:e=>e},a8=[mx,jn,xh,hm,LH,zH,qq],TP=e=>a8.find(n8(e));class i8 extends uT{constructor(t,i,c,h,_){super(t,i,c,h,_,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:i,name:c}=this;if(!i||!i.current)return;super.readKeyframes();for(let A=0;A<t.length;A++){let B=t[A];if(typeof B=="string"&&(B=B.trim(),H5(B))){const N=r8(B,i.current);N!==void 0&&(t[A]=N),A===t.length-1&&(this.finalKeyframe=B)}}if(this.resolveNoneKeyframes(),!zI.has(c)||t.length!==2)return;const[h,_]=t,w=TP(h),a=TP(_);if(w!==a)if(bP(w)&&bP(a))for(let A=0;A<t.length;A++){const B=t[A];typeof B=="string"&&(t[A]=parseFloat(B))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:i}=this,c=[];for(let h=0;h<t.length;h++)wq(t[h])&&c.push(h);c.length&&jq(t,c,i)}measureInitialState(){const{element:t,unresolvedKeyframes:i,name:c}=this;if(!t||!t.current)return;c==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rx[c](t.measureViewportBox(),window.getComputedStyle(t.current)),i[0]=this.measuredOrigin;const h=i[i.length-1];h!==void 0&&t.getValue(c,h).jump(h,!1)}measureEndState(){var t;const{element:i,name:c,unresolvedKeyframes:h}=this;if(!i||!i.current)return;const _=i.getValue(c);_&&_.jump(this.measuredOrigin,!1);const w=h.length-1,a=h[w];h[w]=rx[c](i.measureViewportBox(),window.getComputedStyle(i.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([A,B])=>{i.getValue(A).set(B)}),this.resolveNoneKeyframes()}}const EP=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Em.test(e)||e==="0")&&!e.startsWith("url("));function Wq(e){const t=e[0];if(e.length===1)return!0;for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}function Kq(e,t,i,c){const h=e[0];if(h===null)return!1;if(t==="display"||t==="visibility")return!0;const _=e[e.length-1],w=EP(h,t),a=EP(_,t);return!w||!a?!1:Wq(e)||(i==="spring"||Q5(i))&&c}const Zq=e=>e!==null;function Jw(e,{repeat:t,repeatType:i="loop"},c){const h=e.filter(Zq),_=t&&i!=="loop"&&t%2===1?0:h.length-1;return!_||c===void 0?h[_]:c}const Xq=40;class s8{constructor({autoplay:t=!0,delay:i=0,type:c="keyframes",repeat:h=0,repeatDelay:_=0,repeatType:w="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=vh.now(),this.options={autoplay:t,delay:i,type:c,repeat:h,repeatDelay:_,repeatType:w,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Xq?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Uq(),this._resolved}onKeyframesResolved(t,i){this.resolvedAt=vh.now(),this.hasAttemptedResolve=!0;const{name:c,type:h,velocity:_,delay:w,onComplete:a,onUpdate:A,isGenerator:B}=this.options;if(!B&&!Kq(t,c,h,_))if(BI.current||!w){A&&A(Jw(t,this.options,i)),a&&a(),this.resolveFinishedPromise();return}else this.options.duration=0;const N=this.initPlayback(t,i);N!==!1&&(this._resolved={keyframes:t,finalKeyframe:i,...N},this.onPostResolved())}onPostResolved(){}then(t,i){return this.currentFinishedPromise.then(t,i)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Hi=(e,t,i)=>e+(t-e)*i;function Y3(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function Yq({hue:e,saturation:t,lightness:i,alpha:c}){e/=360,t/=100,i/=100;let h=0,_=0,w=0;if(!t)h=_=w=i;else{const a=i<.5?i*(1+t):i+t-i*t,A=2*i-a;h=Y3(A,a,e+1/3),_=Y3(A,a,e),w=Y3(A,a,e-1/3)}return{red:Math.round(h*255),green:Math.round(_*255),blue:Math.round(w*255),alpha:c}}function vw(e,t){return i=>i>0?t:e}const J3=(e,t,i)=>{const c=e*e,h=i*(t*t-c)+c;return h<0?0:Math.sqrt(h)},Jq=[wS,Hg,$y],Qq=e=>Jq.find(t=>t.test(e));function CP(e){const t=Qq(e);if(!t)return!1;let i=t.parse(e);return t===$y&&(i=Yq(i)),i}const DP=(e,t)=>{const i=CP(e),c=CP(t);if(!i||!c)return vw(e,t);const h={...i};return _=>(h.red=J3(i.red,c.red,_),h.green=J3(i.green,c.green,_),h.blue=J3(i.blue,c.blue,_),h.alpha=Hi(i.alpha,c.alpha,_),Hg.transform(h))},eW=(e,t)=>i=>t(e(i)),I_=(...e)=>e.reduce(eW),CS=new Set(["none","hidden"]);function tW(e,t){return CS.has(e)?i=>i<=0?e:t:i=>i>=1?t:e}function rW(e,t){return i=>Hi(e,t,i)}function dT(e){return typeof e=="number"?rW:typeof e=="string"?H5(e)?vw:Go.test(e)?DP:iW:Array.isArray(e)?o8:typeof e=="object"?Go.test(e)?DP:nW:vw}function o8(e,t){const i=[...e],c=i.length,h=e.map((_,w)=>dT(_)(_,t[w]));return _=>{for(let w=0;w<c;w++)i[w]=h[w](_);return i}}function nW(e,t){const i={...e,...t},c={};for(const h in i)e[h]!==void 0&&t[h]!==void 0&&(c[h]=dT(e[h])(e[h],t[h]));return h=>{for(const _ in c)i[_]=c[_](h);return i}}function aW(e,t){var i;const c=[],h={color:0,var:0,number:0};for(let _=0;_<t.values.length;_++){const w=t.types[_],a=e.indexes[w][h[w]],A=(i=e.values[a])!==null&&i!==void 0?i:0;c[_]=A,h[w]++}return c}const iW=(e,t)=>{const i=Em.createTransformer(t),c=h_(e),h=h_(t);return c.indexes.var.length===h.indexes.var.length&&c.indexes.color.length===h.indexes.color.length&&c.indexes.number.length>=h.indexes.number.length?CS.has(e)&&!h.values.length||CS.has(t)&&!c.values.length?tW(e,t):I_(o8(aW(c,h),h.values),i):vw(e,t)};function l8(e,t,i){return typeof e=="number"&&typeof t=="number"&&typeof i=="number"?Hi(e,t,i):dT(e)(e,t)}const sW=5;function c8(e,t,i){const c=Math.max(t-sW,0);return LI(i-e(c),t-c)}const ns={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},PP=.001;function oW({duration:e=ns.duration,bounce:t=ns.bounce,velocity:i=ns.velocity,mass:c=ns.mass}){let h,_,w=1-t;w=Bf(ns.minDamping,ns.maxDamping,w),e=Bf(ns.minDuration,ns.maxDuration,zf(e)),w<1?(h=B=>{const N=B*w,F=N*e,G=N-i,Q=DS(B,w),te=Math.exp(-F);return PP-G/Q*te},_=B=>{const F=B*w*e,G=F*i+i,Q=Math.pow(w,2)*Math.pow(B,2)*e,te=Math.exp(-F),Y=DS(Math.pow(B,2),w);return(-h(B)+PP>0?-1:1)*((G-Q)*te)/Y}):(h=B=>{const N=Math.exp(-B*e),F=(B-i)*e+1;return-.001+N*F},_=B=>{const N=Math.exp(-B*e),F=(i-B)*(e*e);return N*F});const a=5/e,A=cW(h,_,a);if(e=If(e),isNaN(A))return{stiffness:ns.stiffness,damping:ns.damping,duration:e};{const B=Math.pow(A,2)*c;return{stiffness:B,damping:w*2*Math.sqrt(c*B),duration:e}}}const lW=12;function cW(e,t,i){let c=i;for(let h=1;h<lW;h++)c=c-e(c)/t(c);return c}function DS(e,t){return e*Math.sqrt(1-t*t)}const uW=["duration","bounce"],dW=["stiffness","damping","mass"];function MP(e,t){return t.some(i=>e[i]!==void 0)}function hW(e){let t={velocity:ns.velocity,stiffness:ns.stiffness,damping:ns.damping,mass:ns.mass,isResolvedFromDuration:!1,...e};if(!MP(e,dW)&&MP(e,uW))if(e.visualDuration){const i=e.visualDuration,c=2*Math.PI/(i*1.2),h=c*c,_=2*Bf(.05,1,1-(e.bounce||0))*Math.sqrt(h);t={...t,mass:ns.mass,stiffness:h,damping:_}}else{const i=oW(e);t={...t,...i,mass:ns.mass},t.isResolvedFromDuration=!0}return t}function u8(e=ns.visualDuration,t=ns.bounce){const i=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:c,restDelta:h}=i;const _=i.keyframes[0],w=i.keyframes[i.keyframes.length-1],a={done:!1,value:_},{stiffness:A,damping:B,mass:N,duration:F,velocity:G,isResolvedFromDuration:Q}=hW({...i,velocity:-zf(i.velocity||0)}),te=G||0,Y=B/(2*Math.sqrt(A*N)),oe=w-_,de=zf(Math.sqrt(A/N)),me=Math.abs(oe)<5;c||(c=me?ns.restSpeed.granular:ns.restSpeed.default),h||(h=me?ns.restDelta.granular:ns.restDelta.default);let be;if(Y<1){const Se=DS(de,Y);be=$e=>{const Le=Math.exp(-Y*de*$e);return w-Le*((te+Y*de*oe)/Se*Math.sin(Se*$e)+oe*Math.cos(Se*$e))}}else if(Y===1)be=Se=>w-Math.exp(-de*Se)*(oe+(te+de*oe)*Se);else{const Se=de*Math.sqrt(Y*Y-1);be=$e=>{const Le=Math.exp(-Y*de*$e),re=Math.min(Se*$e,300);return w-Le*((te+Y*de*oe)*Math.sinh(re)+Se*oe*Math.cosh(re))/Se}}const pe={calculatedDuration:Q&&F||null,next:Se=>{const $e=be(Se);if(Q)a.done=Se>=F;else{let Le=0;Y<1&&(Le=Se===0?If(te):c8(be,Se,$e));const re=Math.abs(Le)<=c,Ee=Math.abs(w-$e)<=h;a.done=re&&Ee}return a.value=a.done?w:$e,a},toString:()=>{const Se=Math.min(DI(pe),vS),$e=PI(Le=>pe.next(Se*Le).value,Se,30);return Se+"ms "+$e}};return pe}function AP({keyframes:e,velocity:t=0,power:i=.8,timeConstant:c=325,bounceDamping:h=10,bounceStiffness:_=500,modifyTarget:w,min:a,max:A,restDelta:B=.5,restSpeed:N}){const F=e[0],G={done:!1,value:F},Q=re=>a!==void 0&&re<a||A!==void 0&&re>A,te=re=>a===void 0?A:A===void 0||Math.abs(a-re)<Math.abs(A-re)?a:A;let Y=i*t;const oe=F+Y,de=w===void 0?oe:w(oe);de!==oe&&(Y=de-F);const me=re=>-Y*Math.exp(-re/c),be=re=>de+me(re),pe=re=>{const Ee=me(re),se=be(re);G.done=Math.abs(Ee)<=B,G.value=G.done?de:se};let Se,$e;const Le=re=>{Q(G.value)&&(Se=re,$e=u8({keyframes:[G.value,te(G.value)],velocity:c8(be,re,G.value),damping:h,stiffness:_,restDelta:B,restSpeed:N}))};return Le(0),{calculatedDuration:null,next:re=>{let Ee=!1;return!$e&&Se===void 0&&(Ee=!0,pe(re),Le(re)),Se!==void 0&&re>=Se?$e.next(re-Se):(!Ee&&pe(re),G)}}}const fW=R_(.42,0,1,1),pW=R_(0,0,.58,1),d8=R_(.42,0,.58,1),mW=e=>Array.isArray(e)&&typeof e[0]!="number",gW={linear:Bl,easeIn:fW,easeInOut:d8,easeOut:pW,circIn:sT,circInOut:HI,circOut:GI,backIn:iT,backInOut:VI,backOut:FI,anticipate:UI},kP=e=>{if(eT(e)){iI(e.length===4);const[t,i,c,h]=e;return R_(t,i,c,h)}else if(typeof e=="string")return gW[e];return e};function yW(e,t,i){const c=[],h=i||l8,_=e.length-1;for(let w=0;w<_;w++){let a=h(e[w],e[w+1]);if(t){const A=Array.isArray(t)?t[w]||Bl:t;a=I_(A,a)}c.push(a)}return c}function xW(e,t,{clamp:i=!0,ease:c,mixer:h}={}){const _=e.length;if(iI(_===t.length),_===1)return()=>t[0];if(_===2&&t[0]===t[1])return()=>t[1];const w=e[0]===e[1];e[0]>e[_-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=yW(t,c,h),A=a.length,B=N=>{if(w&&N<e[0])return t[0];let F=0;if(A>1)for(;F<e.length-2&&!(N<e[F+1]);F++);const G=ex(e[F],e[F+1],N);return a[F](G)};return i?N=>B(Bf(e[0],e[_-1],N)):B}function vW(e,t){const i=e[e.length-1];for(let c=1;c<=t;c++){const h=ex(0,t,c);e.push(Hi(i,1,h))}}function _W(e){const t=[0];return vW(t,e.length-1),t}function bW(e,t){return e.map(i=>i*t)}function wW(e,t){return e.map(()=>t||d8).splice(0,e.length-1)}function _w({duration:e=300,keyframes:t,times:i,ease:c="easeInOut"}){const h=mW(c)?c.map(kP):kP(c),_={done:!1,value:t[0]},w=bW(i&&i.length===t.length?i:_W(t),e),a=xW(w,t,{ease:Array.isArray(h)?h:wW(t,h)});return{calculatedDuration:e,next:A=>(_.value=a(A),_.done=A>=e,_)}}const SW=e=>{const t=({timestamp:i})=>e(i);return{start:()=>Ci.update(t,!0),stop:()=>Tm(t),now:()=>vo.isProcessing?vo.timestamp:vh.now()}},TW={decay:AP,inertia:AP,tween:_w,keyframes:_w,spring:u8},EW=e=>e/100;class Qw extends s8{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:A}=this.options;A&&A()};const{name:i,motionValue:c,element:h,keyframes:_}=this.options,w=(h==null?void 0:h.KeyframeResolver)||uT,a=(A,B)=>this.onKeyframesResolved(A,B);this.resolver=new w(_,a,i,c,h),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:i="keyframes",repeat:c=0,repeatDelay:h=0,repeatType:_,velocity:w=0}=this.options,a=Q5(i)?i:TW[i]||_w;let A,B;a!==_w&&typeof t[0]!="number"&&(A=I_(EW,l8(t[0],t[1])),t=[0,100]);const N=a({...this.options,keyframes:t});_==="mirror"&&(B=a({...this.options,keyframes:[...t].reverse(),velocity:-w})),N.calculatedDuration===null&&(N.calculatedDuration=DI(N));const{calculatedDuration:F}=N,G=F+h,Q=G*(c+1)-h;return{generator:N,mirroredGenerator:B,mapPercentToKeyframes:A,calculatedDuration:F,resolvedDuration:G,totalDuration:Q}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,i=!1){const{resolved:c}=this;if(!c){const{keyframes:re}=this.options;return{done:!0,value:re[re.length-1]}}const{finalKeyframe:h,generator:_,mirroredGenerator:w,mapPercentToKeyframes:a,keyframes:A,calculatedDuration:B,totalDuration:N,resolvedDuration:F}=c;if(this.startTime===null)return _.next(0);const{delay:G,repeat:Q,repeatType:te,repeatDelay:Y,onUpdate:oe}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-N/this.speed,this.startTime)),i?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const de=this.currentTime-G*(this.speed>=0?1:-1),me=this.speed>=0?de<0:de>N;this.currentTime=Math.max(de,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=N);let be=this.currentTime,pe=_;if(Q){const re=Math.min(this.currentTime,N)/F;let Ee=Math.floor(re),se=re%1;!se&&re>=1&&(se=1),se===1&&Ee--,Ee=Math.min(Ee,Q+1),!!(Ee%2)&&(te==="reverse"?(se=1-se,Y&&(se-=Y/F)):te==="mirror"&&(pe=w)),be=Bf(0,1,se)*F}const Se=me?{done:!1,value:A[0]}:pe.next(be);a&&(Se.value=a(Se.value));let{done:$e}=Se;!me&&B!==null&&($e=this.speed>=0?this.currentTime>=N:this.currentTime<=0);const Le=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$e);return Le&&h!==void 0&&(Se.value=Jw(A,this.options,h)),oe&&oe(Se.value),Le&&this.finish(),Se}get duration(){const{resolved:t}=this;return t?zf(t.calculatedDuration):0}get time(){return zf(this.currentTime)}set time(t){t=If(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const i=this.playbackSpeed!==t;this.playbackSpeed=t,i&&(this.time=zf(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=SW,onPlay:i,startTime:c}=this.options;this.driver||(this.driver=t(_=>this.tick(_))),i&&i();const h=this.driver.now();this.holdTime!==null?this.startTime=h-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=h):this.startTime=c??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}function $oe(e){return new Qw(e)}const CW=new Set(["opacity","clipPath","filter","transform"]);function DW(e,t,i,{delay:c=0,duration:h=300,repeat:_=0,repeatType:w="loop",ease:a="easeInOut",times:A}={}){const B={[t]:i};A&&(B.offset=A);const N=AI(a,h);return Array.isArray(N)&&(B.easing=N),e.animate(B,{delay:c,duration:h,easing:Array.isArray(N)?"linear":N,fill:"both",iterations:_+1,direction:w==="reverse"?"alternate":"normal"})}const PW=$5(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),bw=10,MW=2e4;function AW(e){return Q5(e.type)||e.type==="spring"||!MI(e.ease)}function kW(e,t){const i=new Qw({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let c={done:!1,value:e[0]};const h=[];let _=0;for(;!c.done&&_<MW;)c=i.sample(_),h.push(c.value),_+=bw;return{times:void 0,keyframes:h,duration:_-bw,ease:"linear"}}const h8={anticipate:UI,backInOut:VI,circInOut:HI};function RW(e){return e in h8}class RP extends s8{constructor(t){super(t);const{name:i,motionValue:c,element:h,keyframes:_}=this.options;this.resolver=new i8(_,(w,a)=>this.onKeyframesResolved(w,a),i,c,h),this.resolver.scheduleResolve()}initPlayback(t,i){let{duration:c=300,times:h,ease:_,type:w,motionValue:a,name:A,startTime:B}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof _=="string"&&xw()&&RW(_)&&(_=h8[_]),AW(this.options)){const{onComplete:F,onUpdate:G,motionValue:Q,element:te,...Y}=this.options,oe=kW(t,Y);t=oe.keyframes,t.length===1&&(t[1]=t[0]),c=oe.duration,h=oe.times,_=oe.ease,w="keyframes"}const N=DW(a.owner.current,A,t,{...this.options,duration:c,times:h,ease:_});return N.startTime=B??this.calcStartTime(),this.pendingTimeline?(pP(N,this.pendingTimeline),this.pendingTimeline=void 0):N.onfinish=()=>{const{onComplete:F}=this.options;a.set(Jw(t,this.options,i)),F&&F(),this.cancel(),this.resolveFinishedPromise()},{animation:N,duration:c,times:h,type:w,ease:_,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:i}=t;return zf(i)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:i}=t;return zf(i.currentTime||0)}set time(t){const{resolved:i}=this;if(!i)return;const{animation:c}=i;c.currentTime=If(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:i}=t;return i.playbackRate}set speed(t){const{resolved:i}=this;if(!i)return;const{animation:c}=i;c.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:i}=t;return i.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:i}=t;return i.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:i}=this;if(!i)return Bl;const{animation:c}=i;pP(c,t)}return Bl}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playState==="finished"&&this.updateFinishedPromise(),i.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:i,keyframes:c,duration:h,type:_,ease:w,times:a}=t;if(i.playState==="idle"||i.playState==="finished")return;if(this.time){const{motionValue:B,onUpdate:N,onComplete:F,element:G,...Q}=this.options,te=new Qw({...Q,keyframes:c,duration:h,type:_,ease:w,times:a,isGenerator:!0}),Y=If(this.time);B.setWithVelocity(te.sample(Y-bw).value,te.sample(Y).value,bw)}const{onStop:A}=this.options;A&&A(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:i,name:c,repeatDelay:h,repeatType:_,damping:w,type:a}=t;if(!i||!i.owner||!(i.owner.current instanceof HTMLElement))return!1;const{onUpdate:A,transformTemplate:B}=i.owner.getProps();return PW()&&c&&CW.has(c)&&!A&&!B&&!h&&_!=="mirror"&&w!==0&&a!=="inertia"}}const IW={type:"spring",stiffness:500,damping:25,restSpeed:10},zW=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),LW={type:"keyframes",duration:.8},$W={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},BW=(e,{keyframes:t})=>t.length>2?LW:u0.has(e)?e.startsWith("scale")?zW(t[1]):IW:$W;function NW({when:e,delay:t,delayChildren:i,staggerChildren:c,staggerDirection:h,repeat:_,repeatType:w,repeatDelay:a,from:A,elapsed:B,...N}){return!!Object.keys(N).length}const hT=(e,t,i,c={},h,_)=>w=>{const a=J5(c,e)||{},A=a.delay||c.delay||0;let{elapsed:B=0}=c;B=B-If(A);let N={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-B,onUpdate:G=>{t.set(G),a.onUpdate&&a.onUpdate(G)},onComplete:()=>{w(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:_?void 0:h};NW(a)||(N={...N,...BW(e,N)}),N.duration&&(N.duration=If(N.duration)),N.repeatDelay&&(N.repeatDelay=If(N.repeatDelay)),N.from!==void 0&&(N.keyframes[0]=N.from);let F=!1;if((N.type===!1||N.duration===0&&!N.repeatDelay)&&(N.duration=0,N.delay===0&&(F=!0)),(BI.current||Ww.skipAnimations)&&(F=!0,N.duration=0,N.delay=0),F&&!_&&t.get()!==void 0){const G=Jw(N.keyframes,a);if(G!==void 0)return Ci.update(()=>{N.onUpdate(G),N.onComplete()}),new nq([])}return!_&&RP.supports(N)?new RP(N):new Qw(N)};function jW({protectedKeys:e,needsAnimating:t},i){const c=e.hasOwnProperty(i)&&t[i]!==!0;return t[i]=!1,c}function f8(e,t,{delay:i=0,transitionOverride:c,type:h}={}){var _;let{transition:w=e.getDefaultTransition(),transitionEnd:a,...A}=t;c&&(w=c);const B=[],N=h&&e.animationState&&e.animationState.getState()[h];for(const F in A){const G=e.getValue(F,(_=e.latestValues[F])!==null&&_!==void 0?_:null),Q=A[F];if(Q===void 0||N&&jW(N,F))continue;const te={delay:i,...J5(w||{},F)};let Y=!1;if(window.MotionHandoffAnimation){const de=$I(e);if(de){const me=window.MotionHandoffAnimation(de,F,Ci);me!==null&&(te.startTime=me,Y=!0)}}bS(e,F),G.start(hT(F,G,Q,e.shouldReduceMotion&&zI.has(F)?{type:!1}:te,e,Y));const oe=G.animation;oe&&B.push(oe)}return a&&Promise.all(B).then(()=>{Ci.update(()=>{a&&yq(e,a)})}),B}function PS(e,t,i={}){var c;const h=Yw(e,t,i.type==="exit"?(c=e.presenceContext)===null||c===void 0?void 0:c.custom:void 0);let{transition:_=e.getDefaultTransition()||{}}=h||{};i.transitionOverride&&(_=i.transitionOverride);const w=h?()=>Promise.all(f8(e,h,i)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(B=0)=>{const{delayChildren:N=0,staggerChildren:F,staggerDirection:G}=_;return OW(e,t,N+B,F,G,i)}:()=>Promise.resolve(),{when:A}=_;if(A){const[B,N]=A==="beforeChildren"?[w,a]:[a,w];return B().then(()=>N())}else return Promise.all([w(),a(i.delay)])}function OW(e,t,i=0,c=0,h=1,_){const w=[],a=(e.variantChildren.size-1)*c,A=h===1?(B=0)=>B*c:(B=0)=>a-B*c;return Array.from(e.variantChildren).sort(FW).forEach((B,N)=>{B.notify("AnimationStart",t),w.push(PS(B,t,{..._,delay:i+A(N)}).then(()=>B.notify("AnimationComplete",t)))}),Promise.all(w)}function FW(e,t){return e.sortNodePosition(t)}function VW(e,t,i={}){e.notify("AnimationStart",t);let c;if(Array.isArray(t)){const h=t.map(_=>PS(e,_,i));c=Promise.all(h)}else if(typeof t=="string")c=PS(e,t,i);else{const h=typeof t=="function"?Yw(e,t,i.custom):t;c=Promise.all(f8(e,h,i))}return c.then(()=>{e.notify("AnimationComplete",t)})}const UW=j5.length;function p8(e){if(!e)return;if(!e.isControllingVariants){const i=e.parent?p8(e.parent)||{}:{};return e.props.initial!==void 0&&(i.initial=e.props.initial),i}const t={};for(let i=0;i<UW;i++){const c=j5[i],h=e.props[c];(l_(h)||h===!1)&&(t[c]=h)}return t}const GW=[...N5].reverse(),HW=N5.length;function qW(e){return t=>Promise.all(t.map(({animation:i,options:c})=>VW(e,i,c)))}function WW(e){let t=qW(e),i=IP(),c=!0;const h=A=>(B,N)=>{var F;const G=Yw(e,N,A==="exit"?(F=e.presenceContext)===null||F===void 0?void 0:F.custom:void 0);if(G){const{transition:Q,transitionEnd:te,...Y}=G;B={...B,...Y,...te}}return B};function _(A){t=A(e)}function w(A){const{props:B}=e,N=p8(e.parent)||{},F=[],G=new Set;let Q={},te=1/0;for(let oe=0;oe<HW;oe++){const de=GW[oe],me=i[de],be=B[de]!==void 0?B[de]:N[de],pe=l_(be),Se=de===A?me.isActive:null;Se===!1&&(te=oe);let $e=be===N[de]&&be!==B[de]&&pe;if($e&&c&&e.manuallyAnimateOnMount&&($e=!1),me.protectedKeys={...Q},!me.isActive&&Se===null||!be&&!me.prevProp||Zw(be)||typeof be=="boolean")continue;const Le=KW(me.prevProp,be);let re=Le||de===A&&me.isActive&&!$e&&pe||oe>te&&pe,Ee=!1;const se=Array.isArray(be)?be:[be];let ue=se.reduce(h(de),{});Se===!1&&(ue={});const{prevResolvedValues:ke={}}=me,ce={...ke,...ue},Pe=Ie=>{re=!0,G.has(Ie)&&(Ee=!0,G.delete(Ie)),me.needsAnimating[Ie]=!0;const Me=e.getValue(Ie);Me&&(Me.liveStyle=!1)};for(const Ie in ce){const Me=ue[Ie],Xe=ke[Ie];if(Q.hasOwnProperty(Ie))continue;let Ce=!1;xS(Me)&&xS(Xe)?Ce=!CI(Me,Xe):Ce=Me!==Xe,Ce?Me!=null?Pe(Ie):G.add(Ie):Me!==void 0&&G.has(Ie)?Pe(Ie):me.protectedKeys[Ie]=!0}me.prevProp=be,me.prevResolvedValues=ue,me.isActive&&(Q={...Q,...ue}),c&&e.blockInitialAnimation&&(re=!1),re&&(!($e&&Le)||Ee)&&F.push(...se.map(Ie=>({animation:Ie,options:{type:de}})))}if(G.size){const oe={};G.forEach(de=>{const me=e.getBaseTarget(de),be=e.getValue(de);be&&(be.liveStyle=!0),oe[de]=me??null}),F.push({animation:oe})}let Y=!!F.length;return c&&(B.initial===!1||B.initial===B.animate)&&!e.manuallyAnimateOnMount&&(Y=!1),c=!1,Y?t(F):Promise.resolve()}function a(A,B){var N;if(i[A].isActive===B)return Promise.resolve();(N=e.variantChildren)===null||N===void 0||N.forEach(G=>{var Q;return(Q=G.animationState)===null||Q===void 0?void 0:Q.setActive(A,B)}),i[A].isActive=B;const F=w(A);for(const G in i)i[G].protectedKeys={};return F}return{animateChanges:w,setActive:a,setAnimateFunction:_,getState:()=>i,reset:()=>{i=IP(),c=!0}}}function KW(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!CI(t,e):!1}function kg(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function IP(){return{animate:kg(!0),whileInView:kg(),whileHover:kg(),whileTap:kg(),whileDrag:kg(),whileFocus:kg(),exit:kg()}}class Am{constructor(t){this.isMounted=!1,this.node=t}update(){}}class ZW extends Am{constructor(t){super(t),t.animationState||(t.animationState=WW(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Zw(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:i}=this.node.prevProps||{};t!==i&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let XW=0;class YW extends Am{constructor(){super(...arguments),this.id=XW++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:i}=this.node.presenceContext,{isPresent:c}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===c)return;const h=this.node.animationState.setActive("exit",!t);i&&!t&&h.then(()=>i(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const m8={animation:{Feature:ZW},exit:{Feature:YW}};function f_(e,t,i,c={passive:!0}){return e.addEventListener(t,i,c),()=>e.removeEventListener(t,i)}function z_(e){return{point:{x:e.pageX,y:e.pageY}}}const JW=e=>t=>tT(t)&&e(t,z_(t));function Xv(e,t,i,c){return f_(e,t,JW(i),c)}const zP=(e,t)=>Math.abs(e-t);function QW(e,t){const i=zP(e.x,t.x),c=zP(e.y,t.y);return Math.sqrt(i**2+c**2)}class g8{constructor(t,i,{transformPagePoint:c,contextWindow:h,dragSnapToOrigin:_=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const F=e4(this.lastMoveEventInfo,this.history),G=this.startEvent!==null,Q=QW(F.offset,{x:0,y:0})>=3;if(!G&&!Q)return;const{point:te}=F,{timestamp:Y}=vo;this.history.push({...te,timestamp:Y});const{onStart:oe,onMove:de}=this.handlers;G||(oe&&oe(this.lastMoveEvent,F),this.startEvent=this.lastMoveEvent),de&&de(this.lastMoveEvent,F)},this.handlePointerMove=(F,G)=>{this.lastMoveEvent=F,this.lastMoveEventInfo=Q3(G,this.transformPagePoint),Ci.update(this.updatePoint,!0)},this.handlePointerUp=(F,G)=>{this.end();const{onEnd:Q,onSessionEnd:te,resumeAnimation:Y}=this.handlers;if(this.dragSnapToOrigin&&Y&&Y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const oe=e4(F.type==="pointercancel"?this.lastMoveEventInfo:Q3(G,this.transformPagePoint),this.history);this.startEvent&&Q&&Q(F,oe),te&&te(F,oe)},!tT(t))return;this.dragSnapToOrigin=_,this.handlers=i,this.transformPagePoint=c,this.contextWindow=h||window;const w=z_(t),a=Q3(w,this.transformPagePoint),{point:A}=a,{timestamp:B}=vo;this.history=[{...A,timestamp:B}];const{onSessionStart:N}=i;N&&N(t,e4(a,this.history)),this.removeListeners=I_(Xv(this.contextWindow,"pointermove",this.handlePointerMove),Xv(this.contextWindow,"pointerup",this.handlePointerUp),Xv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Tm(this.updatePoint)}}function Q3(e,t){return t?{point:t(e.point)}:e}function LP(e,t){return{x:e.x-t.x,y:e.y-t.y}}function e4({point:e},t){return{point:e,delta:LP(e,y8(t)),offset:LP(e,eK(t)),velocity:tK(t,.1)}}function eK(e){return e[0]}function y8(e){return e[e.length-1]}function tK(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,c=null;const h=y8(e);for(;i>=0&&(c=e[i],!(h.timestamp-c.timestamp>If(t)));)i--;if(!c)return{x:0,y:0};const _=zf(h.timestamp-c.timestamp);if(_===0)return{x:0,y:0};const w={x:(h.x-c.x)/_,y:(h.y-c.y)/_};return w.x===1/0&&(w.x=0),w.y===1/0&&(w.y=0),w}const x8=1e-4,rK=1-x8,nK=1+x8,v8=.01,aK=0-v8,iK=0+v8;function gl(e){return e.max-e.min}function sK(e,t,i){return Math.abs(e-t)<=i}function $P(e,t,i,c=.5){e.origin=c,e.originPoint=Hi(t.min,t.max,e.origin),e.scale=gl(i)/gl(t),e.translate=Hi(i.min,i.max,e.origin)-e.originPoint,(e.scale>=rK&&e.scale<=nK||isNaN(e.scale))&&(e.scale=1),(e.translate>=aK&&e.translate<=iK||isNaN(e.translate))&&(e.translate=0)}function Yv(e,t,i,c){$P(e.x,t.x,i.x,c?c.originX:void 0),$P(e.y,t.y,i.y,c?c.originY:void 0)}function BP(e,t,i){e.min=i.min+t.min,e.max=e.min+gl(t)}function oK(e,t,i){BP(e.x,t.x,i.x),BP(e.y,t.y,i.y)}function NP(e,t,i){e.min=t.min-i.min,e.max=e.min+gl(t)}function Jv(e,t,i){NP(e.x,t.x,i.x),NP(e.y,t.y,i.y)}function lK(e,{min:t,max:i},c){return t!==void 0&&e<t?e=c?Hi(t,e,c.min):Math.max(e,t):i!==void 0&&e>i&&(e=c?Hi(i,e,c.max):Math.min(e,i)),e}function jP(e,t,i){return{min:t!==void 0?e.min+t:void 0,max:i!==void 0?e.max+i-(e.max-e.min):void 0}}function cK(e,{top:t,left:i,bottom:c,right:h}){return{x:jP(e.x,i,h),y:jP(e.y,t,c)}}function OP(e,t){let i=t.min-e.min,c=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,c]=[c,i]),{min:i,max:c}}function uK(e,t){return{x:OP(e.x,t.x),y:OP(e.y,t.y)}}function dK(e,t){let i=.5;const c=gl(e),h=gl(t);return h>c?i=ex(t.min,t.max-c,e.min):c>h&&(i=ex(e.min,e.max-h,t.min)),Bf(0,1,i)}function hK(e,t){const i={};return t.min!==void 0&&(i.min=t.min-e.min),t.max!==void 0&&(i.max=t.max-e.min),i}const MS=.35;function fK(e=MS){return e===!1?e=0:e===!0&&(e=MS),{x:FP(e,"left","right"),y:FP(e,"top","bottom")}}function FP(e,t,i){return{min:VP(e,t),max:VP(e,i)}}function VP(e,t){return typeof e=="number"?e:e[t]||0}const UP=()=>({translate:0,scale:1,origin:0,originPoint:0}),By=()=>({x:UP(),y:UP()}),GP=()=>({min:0,max:0}),ms=()=>({x:GP(),y:GP()});function hu(e){return[e("x"),e("y")]}function _8({top:e,left:t,right:i,bottom:c}){return{x:{min:t,max:i},y:{min:e,max:c}}}function pK({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function mK(e,t){if(!t)return e;const i=t({x:e.left,y:e.top}),c=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:c.y,right:c.x}}function t4(e){return e===void 0||e===1}function AS({scale:e,scaleX:t,scaleY:i}){return!t4(e)||!t4(t)||!t4(i)}function jg(e){return AS(e)||b8(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function b8(e){return HP(e.x)||HP(e.y)}function HP(e){return e&&e!=="0%"}function ww(e,t,i){const c=e-i,h=t*c;return i+h}function qP(e,t,i,c,h){return h!==void 0&&(e=ww(e,h,c)),ww(e,i,c)+t}function kS(e,t=0,i=1,c,h){e.min=qP(e.min,t,i,c,h),e.max=qP(e.max,t,i,c,h)}function w8(e,{x:t,y:i}){kS(e.x,t.translate,t.scale,t.originPoint),kS(e.y,i.translate,i.scale,i.originPoint)}const WP=.999999999999,KP=1.0000000000001;function gK(e,t,i,c=!1){const h=i.length;if(!h)return;t.x=t.y=1;let _,w;for(let a=0;a<h;a++){_=i[a],w=_.projectionDelta;const{visualElement:A}=_.options;A&&A.props.style&&A.props.style.display==="contents"||(c&&_.options.layoutScroll&&_.scroll&&_!==_.root&&jy(e,{x:-_.scroll.offset.x,y:-_.scroll.offset.y}),w&&(t.x*=w.x.scale,t.y*=w.y.scale,w8(e,w)),c&&jg(_.latestValues)&&jy(e,_.latestValues))}t.x<KP&&t.x>WP&&(t.x=1),t.y<KP&&t.y>WP&&(t.y=1)}function Ny(e,t){e.min=e.min+t,e.max=e.max+t}function ZP(e,t,i,c,h=.5){const _=Hi(e.min,e.max,h);kS(e,t,i,_,c)}function jy(e,t){ZP(e.x,t.x,t.scaleX,t.scale,t.originX),ZP(e.y,t.y,t.scaleY,t.scale,t.originY)}function S8(e,t){return _8(mK(e.getBoundingClientRect(),t))}function yK(e,t,i){const c=S8(e,i),{scroll:h}=t;return h&&(Ny(c.x,h.offset.x),Ny(c.y,h.offset.y)),c}const T8=({current:e})=>e?e.ownerDocument.defaultView:null,xK=new WeakMap;class vK{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ms(),this.visualElement=t}start(t,{snapToCursor:i=!1}={}){const{presenceContext:c}=this.visualElement;if(c&&c.isPresent===!1)return;const h=N=>{const{dragSnapToOrigin:F}=this.getProps();F?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(z_(N).point)},_=(N,F)=>{const{drag:G,dragPropagation:Q,onDragStart:te}=this.getProps();if(G&&!Q&&(this.openDragLock&&this.openDragLock(),this.openDragLock=hq(G),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hu(oe=>{let de=this.getAxisMotionValue(oe).get()||0;if(xh.test(de)){const{projection:me}=this.visualElement;if(me&&me.layout){const be=me.layout.layoutBox[oe];be&&(de=gl(be)*(parseFloat(de)/100))}}this.originPoint[oe]=de}),te&&Ci.postRender(()=>te(N,F)),bS(this.visualElement,"transform");const{animationState:Y}=this.visualElement;Y&&Y.setActive("whileDrag",!0)},w=(N,F)=>{const{dragPropagation:G,dragDirectionLock:Q,onDirectionLock:te,onDrag:Y}=this.getProps();if(!G&&!this.openDragLock)return;const{offset:oe}=F;if(Q&&this.currentDirection===null){this.currentDirection=_K(oe),this.currentDirection!==null&&te&&te(this.currentDirection);return}this.updateAxis("x",F.point,oe),this.updateAxis("y",F.point,oe),this.visualElement.render(),Y&&Y(N,F)},a=(N,F)=>this.stop(N,F),A=()=>hu(N=>{var F;return this.getAnimationState(N)==="paused"&&((F=this.getAxisMotionValue(N).animation)===null||F===void 0?void 0:F.play())}),{dragSnapToOrigin:B}=this.getProps();this.panSession=new g8(t,{onSessionStart:h,onStart:_,onMove:w,onSessionEnd:a,resumeAnimation:A},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:B,contextWindow:T8(this.visualElement)})}stop(t,i){const c=this.isDragging;if(this.cancel(),!c)return;const{velocity:h}=i;this.startAnimation(h);const{onDragEnd:_}=this.getProps();_&&Ci.postRender(()=>_(t,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:i}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:c}=this.getProps();!c&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(t,i,c){const{drag:h}=this.getProps();if(!c||!E1(t,h,this.currentDirection))return;const _=this.getAxisMotionValue(t);let w=this.originPoint[t]+c[t];this.constraints&&this.constraints[t]&&(w=lK(w,this.constraints[t],this.elastic[t])),_.set(w)}resolveConstraints(){var t;const{dragConstraints:i,dragElastic:c}=this.getProps(),h=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,_=this.constraints;i&&Ly(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&h?this.constraints=cK(h.layoutBox,i):this.constraints=!1,this.elastic=fK(c),_!==this.constraints&&h&&this.constraints&&!this.hasMutatedConstraints&&hu(w=>{this.constraints!==!1&&this.getAxisMotionValue(w)&&(this.constraints[w]=hK(h.layoutBox[w],this.constraints[w]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!Ly(t))return!1;const c=t.current,{projection:h}=this.visualElement;if(!h||!h.layout)return!1;const _=yK(c,h.root,this.visualElement.getTransformPagePoint());let w=uK(h.layout.layoutBox,_);if(i){const a=i(pK(w));this.hasMutatedConstraints=!!a,a&&(w=_8(a))}return w}startAnimation(t){const{drag:i,dragMomentum:c,dragElastic:h,dragTransition:_,dragSnapToOrigin:w,onDragTransitionEnd:a}=this.getProps(),A=this.constraints||{},B=hu(N=>{if(!E1(N,i,this.currentDirection))return;let F=A&&A[N]||{};w&&(F={min:0,max:0});const G=h?200:1e6,Q=h?40:1e7,te={type:"inertia",velocity:c?t[N]:0,bounceStiffness:G,bounceDamping:Q,timeConstant:750,restDelta:1,restSpeed:10,..._,...F};return this.startAxisValueAnimation(N,te)});return Promise.all(B).then(a)}startAxisValueAnimation(t,i){const c=this.getAxisMotionValue(t);return bS(this.visualElement,t),c.start(hT(t,c,0,i,this.visualElement,!1))}stopAnimation(){hu(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){hu(t=>{var i;return(i=this.getAxisMotionValue(t).animation)===null||i===void 0?void 0:i.pause()})}getAnimationState(t){var i;return(i=this.getAxisMotionValue(t).animation)===null||i===void 0?void 0:i.state}getAxisMotionValue(t){const i=`_drag${t.toUpperCase()}`,c=this.visualElement.getProps(),h=c[i];return h||this.visualElement.getValue(t,(c.initial?c.initial[t]:void 0)||0)}snapToCursor(t){hu(i=>{const{drag:c}=this.getProps();if(!E1(i,c,this.currentDirection))return;const{projection:h}=this.visualElement,_=this.getAxisMotionValue(i);if(h&&h.layout){const{min:w,max:a}=h.layout.layoutBox[i];_.set(t[i]-Hi(w,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:i}=this.getProps(),{projection:c}=this.visualElement;if(!Ly(i)||!c||!this.constraints)return;this.stopAnimation();const h={x:0,y:0};hu(w=>{const a=this.getAxisMotionValue(w);if(a&&this.constraints!==!1){const A=a.get();h[w]=dK({min:A,max:A},this.constraints[w])}});const{transformTemplate:_}=this.visualElement.getProps();this.visualElement.current.style.transform=_?_({},""):"none",c.root&&c.root.updateScroll(),c.updateLayout(),this.resolveConstraints(),hu(w=>{if(!E1(w,t,null))return;const a=this.getAxisMotionValue(w),{min:A,max:B}=this.constraints[w];a.set(Hi(A,B,h[w]))})}addListeners(){if(!this.visualElement.current)return;xK.set(this.visualElement,this);const t=this.visualElement.current,i=Xv(t,"pointerdown",A=>{const{drag:B,dragListener:N=!0}=this.getProps();B&&N&&this.start(A)}),c=()=>{const{dragConstraints:A}=this.getProps();Ly(A)&&A.current&&(this.constraints=this.resolveRefConstraints())},{projection:h}=this.visualElement,_=h.addEventListener("measure",c);h&&!h.layout&&(h.root&&h.root.updateScroll(),h.updateLayout()),Ci.read(c);const w=f_(window,"resize",()=>this.scalePositionWithinConstraints()),a=h.addEventListener("didUpdate",({delta:A,hasLayoutChanged:B})=>{this.isDragging&&B&&(hu(N=>{const F=this.getAxisMotionValue(N);F&&(this.originPoint[N]+=A[N].translate,F.set(F.get()+A[N].translate))}),this.visualElement.render())});return()=>{w(),i(),_(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:c=!1,dragPropagation:h=!1,dragConstraints:_=!1,dragElastic:w=MS,dragMomentum:a=!0}=t;return{...t,drag:i,dragDirectionLock:c,dragPropagation:h,dragConstraints:_,dragElastic:w,dragMomentum:a}}}function E1(e,t,i){return(t===!0||t===e)&&(i===null||i===e)}function _K(e,t=10){let i=null;return Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x"),i}class bK extends Am{constructor(t){super(t),this.removeGroupControls=Bl,this.removeListeners=Bl,this.controls=new vK(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Bl}unmount(){this.removeGroupControls(),this.removeListeners()}}const XP=e=>(t,i)=>{e&&Ci.postRender(()=>e(t,i))};class wK extends Am{constructor(){super(...arguments),this.removePointerDownListener=Bl}onPointerDown(t){this.session=new g8(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:T8(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:i,onPan:c,onPanEnd:h}=this.node.getProps();return{onSessionStart:XP(t),onStart:XP(i),onMove:c,onEnd:(_,w)=>{delete this.session,h&&Ci.postRender(()=>h(_,w))}}}mount(){this.removePointerDownListener=Xv(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const U1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function YP(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ev={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(jn.test(e))e=parseFloat(e);else return e;const i=YP(e,t.target.x),c=YP(e,t.target.y);return`${i}% ${c}%`}},SK={correct:(e,{treeScale:t,projectionDelta:i})=>{const c=e,h=Em.parse(e);if(h.length>5)return c;const _=Em.createTransformer(e),w=typeof h[0]!="number"?1:0,a=i.x.scale*t.x,A=i.y.scale*t.y;h[0+w]/=a,h[1+w]/=A;const B=Hi(a,A,.5);return typeof h[2+w]=="number"&&(h[2+w]/=B),typeof h[3+w]=="number"&&(h[3+w]/=B),_(h)}};class TK extends V.Component{componentDidMount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:c,layoutId:h}=this.props,{projection:_}=t;HH(EK),_&&(i.group&&i.group.add(_),c&&c.register&&h&&c.register(_),_.root.didUpdate(),_.addEventListener("animationComplete",()=>{this.safeToRemove()}),_.setOptions({..._.options,onExitComplete:()=>this.safeToRemove()})),U1.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:i,visualElement:c,drag:h,isPresent:_}=this.props,w=c.projection;return w&&(w.isPresent=_,h||t.layoutDependency!==i||i===void 0?w.willUpdate():this.safeToRemove(),t.isPresent!==_&&(_?w.promote():w.relegate()||Ci.postRender(()=>{const a=w.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),F5.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:i,switchLayoutGroup:c}=this.props,{projection:h}=t;h&&(h.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(h),c&&c.deregister&&c.deregister(h))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function E8(e){const[t,i]=nI(),c=V.useContext(z5);return b.jsx(TK,{...e,layoutGroup:c,switchLayoutGroup:V.useContext(fI),isPresent:t,safeToRemove:i})}const EK={borderRadius:{...Ev,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ev,borderTopRightRadius:Ev,borderBottomLeftRadius:Ev,borderBottomRightRadius:Ev,boxShadow:SK};function CK(e,t,i){const c=qo(e)?e:d_(e);return c.start(hT("",c,t,i)),c.animation}function DK(e){return e instanceof SVGElement&&e.tagName!=="svg"}const PK=(e,t)=>e.depth-t.depth;class MK{constructor(){this.children=[],this.isDirty=!1}add(t){rT(this.children,t),this.isDirty=!0}remove(t){nT(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(PK),this.isDirty=!1,this.children.forEach(t)}}function AK(e,t){const i=vh.now(),c=({timestamp:h})=>{const _=h-i;_>=t&&(Tm(c),e(_-t))};return Ci.read(c,!0),()=>Tm(c)}const C8=["TopLeft","TopRight","BottomLeft","BottomRight"],kK=C8.length,JP=e=>typeof e=="string"?parseFloat(e):e,QP=e=>typeof e=="number"||jn.test(e);function RK(e,t,i,c,h,_){h?(e.opacity=Hi(0,i.opacity!==void 0?i.opacity:1,IK(c)),e.opacityExit=Hi(t.opacity!==void 0?t.opacity:1,0,zK(c))):_&&(e.opacity=Hi(t.opacity!==void 0?t.opacity:1,i.opacity!==void 0?i.opacity:1,c));for(let w=0;w<kK;w++){const a=`border${C8[w]}Radius`;let A=eM(t,a),B=eM(i,a);if(A===void 0&&B===void 0)continue;A||(A=0),B||(B=0),A===0||B===0||QP(A)===QP(B)?(e[a]=Math.max(Hi(JP(A),JP(B),c),0),(xh.test(B)||xh.test(A))&&(e[a]+="%")):e[a]=B}(t.rotate||i.rotate)&&(e.rotate=Hi(t.rotate||0,i.rotate||0,c))}function eM(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const IK=D8(0,.5,GI),zK=D8(.5,.95,Bl);function D8(e,t,i){return c=>c<e?0:c>t?1:i(ex(e,t,c))}function tM(e,t){e.min=t.min,e.max=t.max}function du(e,t){tM(e.x,t.x),tM(e.y,t.y)}function rM(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function nM(e,t,i,c,h){return e-=t,e=ww(e,1/i,c),h!==void 0&&(e=ww(e,1/h,c)),e}function LK(e,t=0,i=1,c=.5,h,_=e,w=e){if(xh.test(t)&&(t=parseFloat(t),t=Hi(w.min,w.max,t/100)-w.min),typeof t!="number")return;let a=Hi(_.min,_.max,c);e===_&&(a-=t),e.min=nM(e.min,t,i,a,h),e.max=nM(e.max,t,i,a,h)}function aM(e,t,[i,c,h],_,w){LK(e,t[i],t[c],t[h],t.scale,_,w)}const $K=["x","scaleX","originX"],BK=["y","scaleY","originY"];function iM(e,t,i,c){aM(e.x,t,$K,i?i.x:void 0,c?c.x:void 0),aM(e.y,t,BK,i?i.y:void 0,c?c.y:void 0)}function sM(e){return e.translate===0&&e.scale===1}function P8(e){return sM(e.x)&&sM(e.y)}function oM(e,t){return e.min===t.min&&e.max===t.max}function NK(e,t){return oM(e.x,t.x)&&oM(e.y,t.y)}function lM(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function M8(e,t){return lM(e.x,t.x)&&lM(e.y,t.y)}function cM(e){return gl(e.x)/gl(e.y)}function uM(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class jK{constructor(){this.members=[]}add(t){rT(this.members,t),t.scheduleRender()}remove(t){if(nT(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(t){const i=this.members.findIndex(h=>t===h);if(i===0)return!1;let c;for(let h=i;h>=0;h--){const _=this.members[h];if(_.isPresent!==!1){c=_;break}}return c?(this.promote(c),!0):!1}promote(t,i){const c=this.lead;if(t!==c&&(this.prevLead=c,this.lead=t,t.show(),c)){c.instance&&c.scheduleRender(),t.scheduleRender(),t.resumeFrom=c,i&&(t.resumeFrom.preserveOpacity=!0),c.snapshot&&(t.snapshot=c.snapshot,t.snapshot.latestValues=c.animationValues||c.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:h}=t.options;h===!1&&c.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:i,resumingFrom:c}=t;i.onExitComplete&&i.onExitComplete(),c&&c.options.onExitComplete&&c.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function OK(e,t,i){let c="";const h=e.x.translate/t.x,_=e.y.translate/t.y,w=(i==null?void 0:i.z)||0;if((h||_||w)&&(c=`translate3d(${h}px, ${_}px, ${w}px) `),(t.x!==1||t.y!==1)&&(c+=`scale(${1/t.x}, ${1/t.y}) `),i){const{transformPerspective:B,rotate:N,rotateX:F,rotateY:G,skewX:Q,skewY:te}=i;B&&(c=`perspective(${B}px) ${c}`),N&&(c+=`rotate(${N}deg) `),F&&(c+=`rotateX(${F}deg) `),G&&(c+=`rotateY(${G}deg) `),Q&&(c+=`skewX(${Q}deg) `),te&&(c+=`skewY(${te}deg) `)}const a=e.x.scale*t.x,A=e.y.scale*t.y;return(a!==1||A!==1)&&(c+=`scale(${a}, ${A})`),c||"none"}const Og={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Vv=typeof window<"u"&&window.MotionDebug!==void 0,r4=["","X","Y","Z"],FK={visibility:"hidden"},dM=1e3;let VK=0;function n4(e,t,i,c){const{latestValues:h}=t;h[e]&&(i[e]=h[e],t.setStaticValue(e,0),c&&(c[e]=0))}function A8(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const i=$I(t);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:h,layoutId:_}=e.options;window.MotionCancelOptimisedAnimation(i,"transform",Ci,!(h||_))}const{parent:c}=e;c&&!c.hasCheckedOptimisedAppear&&A8(c)}function k8({attachResizeListener:e,defaultParent:t,measureScroll:i,checkIsScrollRoot:c,resetTransform:h}){return class{constructor(w={},a=t==null?void 0:t()){this.id=VK++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vv&&(Og.totalNodes=Og.resolvedTargetDeltas=Og.recalculatedProjection=0),this.nodes.forEach(HK),this.nodes.forEach(XK),this.nodes.forEach(YK),this.nodes.forEach(qK),Vv&&window.MotionDebug.record(Og)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=w,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let A=0;A<this.path.length;A++)this.path[A].shouldResetTransform=!0;this.root===this&&(this.nodes=new MK)}addEventListener(w,a){return this.eventHandlers.has(w)||this.eventHandlers.set(w,new aT),this.eventHandlers.get(w).add(a)}notifyListeners(w,...a){const A=this.eventHandlers.get(w);A&&A.notify(...a)}hasListeners(w){return this.eventHandlers.has(w)}mount(w,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=DK(w),this.instance=w;const{layoutId:A,layout:B,visualElement:N}=this.options;if(N&&!N.current&&N.mount(w),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(B||A)&&(this.isLayoutDirty=!0),e){let F;const G=()=>this.root.updateBlockedByResize=!1;e(w,()=>{this.root.updateBlockedByResize=!0,F&&F(),F=AK(G,250),U1.hasAnimatedSinceResize&&(U1.hasAnimatedSinceResize=!1,this.nodes.forEach(fM))})}A&&this.root.registerSharedNode(A,this),this.options.animate!==!1&&N&&(A||B)&&this.addEventListener("didUpdate",({delta:F,hasLayoutChanged:G,hasRelativeLayoutChanged:Q,layout:te})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const Y=this.options.transition||N.getDefaultTransition()||rZ,{onLayoutAnimationStart:oe,onLayoutAnimationComplete:de}=N.getProps(),me=!this.targetLayout||!M8(this.targetLayout,te),be=!G&&Q;if(this.options.layoutRoot||this.resumeFrom||be||G&&(me||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(F,be);const pe={...J5(Y,"layout"),onPlay:oe,onComplete:de};(N.shouldReduceMotion||this.options.layoutRoot)&&(pe.delay=0,pe.type=!1),this.startAnimation(pe)}else G||fM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=te})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const w=this.getStack();w&&w.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Tm(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(JK),this.animationId++)}getTransformTemplate(){const{visualElement:w}=this.options;return w&&w.getProps().transformTemplate}willUpdate(w=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&A8(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let N=0;N<this.path.length;N++){const F=this.path[N];F.shouldResetTransform=!0,F.updateScroll("snapshot"),F.options.layoutRoot&&F.willUpdate(!1)}const{layoutId:a,layout:A}=this.options;if(a===void 0&&!A)return;const B=this.getTransformTemplate();this.prevTransformTemplateValue=B?B(this.latestValues,""):void 0,this.updateSnapshot(),w&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(hM);return}this.isUpdating||this.nodes.forEach(KK),this.isUpdating=!1,this.nodes.forEach(ZK),this.nodes.forEach(UK),this.nodes.forEach(GK),this.clearAllSnapshots();const a=vh.now();vo.delta=Bf(0,1e3/60,a-vo.timestamp),vo.timestamp=a,vo.isProcessing=!0,W3.update.process(vo),W3.preRender.process(vo),W3.render.process(vo),vo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,F5.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(WK),this.sharedNodes.forEach(QK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ci.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ci.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!gl(this.snapshot.measuredBox.x)&&!gl(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let A=0;A<this.path.length;A++)this.path[A].updateScroll();const w=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ms(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,w?w.layoutBox:void 0)}updateScroll(w="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===w&&(a=!1),a){const A=c(this.instance);this.scroll={animationId:this.root.animationId,phase:w,isRoot:A,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:A}}}resetTransform(){if(!h)return;const w=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!P8(this.projectionDelta),A=this.getTransformTemplate(),B=A?A(this.latestValues,""):void 0,N=B!==this.prevTransformTemplateValue;w&&(a||jg(this.latestValues)||N)&&(h(this.instance,B),this.shouldResetTransform=!1,this.scheduleRender())}measure(w=!0){const a=this.measurePageBox();let A=this.removeElementScroll(a);return w&&(A=this.removeTransform(A)),nZ(A),{animationId:this.root.animationId,measuredBox:a,layoutBox:A,latestValues:{},source:this.id}}measurePageBox(){var w;const{visualElement:a}=this.options;if(!a)return ms();const A=a.measureViewportBox();if(!(((w=this.scroll)===null||w===void 0?void 0:w.wasRoot)||this.path.some(aZ))){const{scroll:N}=this.root;N&&(Ny(A.x,N.offset.x),Ny(A.y,N.offset.y))}return A}removeElementScroll(w){var a;const A=ms();if(du(A,w),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return A;for(let B=0;B<this.path.length;B++){const N=this.path[B],{scroll:F,options:G}=N;N!==this.root&&F&&G.layoutScroll&&(F.wasRoot&&du(A,w),Ny(A.x,F.offset.x),Ny(A.y,F.offset.y))}return A}applyTransform(w,a=!1){const A=ms();du(A,w);for(let B=0;B<this.path.length;B++){const N=this.path[B];!a&&N.options.layoutScroll&&N.scroll&&N!==N.root&&jy(A,{x:-N.scroll.offset.x,y:-N.scroll.offset.y}),jg(N.latestValues)&&jy(A,N.latestValues)}return jg(this.latestValues)&&jy(A,this.latestValues),A}removeTransform(w){const a=ms();du(a,w);for(let A=0;A<this.path.length;A++){const B=this.path[A];if(!B.instance||!jg(B.latestValues))continue;AS(B.latestValues)&&B.updateSnapshot();const N=ms(),F=B.measurePageBox();du(N,F),iM(a,B.latestValues,B.snapshot?B.snapshot.layoutBox:void 0,N)}return jg(this.latestValues)&&iM(a,this.latestValues),a}setTargetDelta(w){this.targetDelta=w,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(w){this.options={...this.options,...w,crossfade:w.crossfade!==void 0?w.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(w=!1){var a;const A=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=A.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=A.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=A.isSharedProjectionDirty);const B=!!this.resumingFrom||this!==A;if(!(w||B&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:F,layoutId:G}=this.options;if(!(!this.layout||!(F||G))){if(this.resolvedRelativeTargetAt=vo.timestamp,!this.targetDelta&&!this.relativeTarget){const Q=this.getClosestProjectingParent();Q&&Q.layout&&this.animationProgress!==1?(this.relativeParent=Q,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ms(),this.relativeTargetOrigin=ms(),Jv(this.relativeTargetOrigin,this.layout.layoutBox,Q.layout.layoutBox),du(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ms(),this.targetWithTransforms=ms()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),oK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):du(this.target,this.layout.layoutBox),w8(this.target,this.targetDelta)):du(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const Q=this.getClosestProjectingParent();Q&&!!Q.resumingFrom==!!this.resumingFrom&&!Q.options.layoutScroll&&Q.target&&this.animationProgress!==1?(this.relativeParent=Q,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ms(),this.relativeTargetOrigin=ms(),Jv(this.relativeTargetOrigin,this.target,Q.target),du(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vv&&Og.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||AS(this.parent.latestValues)||b8(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const a=this.getLead(),A=!!this.resumingFrom||this!==a;let B=!0;if((this.isProjectionDirty||!((w=this.parent)===null||w===void 0)&&w.isProjectionDirty)&&(B=!1),A&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(B=!1),this.resolvedRelativeTargetAt===vo.timestamp&&(B=!1),B)return;const{layout:N,layoutId:F}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(N||F))return;du(this.layoutCorrected,this.layout.layoutBox);const G=this.treeScale.x,Q=this.treeScale.y;gK(this.layoutCorrected,this.treeScale,this.path,A),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ms());const{target:te}=a;if(!te){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(rM(this.prevProjectionDelta.x,this.projectionDelta.x),rM(this.prevProjectionDelta.y,this.projectionDelta.y)),Yv(this.projectionDelta,this.layoutCorrected,te,this.latestValues),(this.treeScale.x!==G||this.treeScale.y!==Q||!uM(this.projectionDelta.x,this.prevProjectionDelta.x)||!uM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",te)),Vv&&Og.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(w=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),w){const A=this.getStack();A&&A.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=By(),this.projectionDelta=By(),this.projectionDeltaWithTransform=By()}setAnimationOrigin(w,a=!1){const A=this.snapshot,B=A?A.latestValues:{},N={...this.latestValues},F=By();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const G=ms(),Q=A?A.source:void 0,te=this.layout?this.layout.source:void 0,Y=Q!==te,oe=this.getStack(),de=!oe||oe.members.length<=1,me=!!(Y&&!de&&this.options.crossfade===!0&&!this.path.some(tZ));this.animationProgress=0;let be;this.mixTargetDelta=pe=>{const Se=pe/1e3;pM(F.x,w.x,Se),pM(F.y,w.y,Se),this.setTargetDelta(F),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jv(G,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eZ(this.relativeTarget,this.relativeTargetOrigin,G,Se),be&&NK(this.relativeTarget,be)&&(this.isProjectionDirty=!1),be||(be=ms()),du(be,this.relativeTarget)),Y&&(this.animationValues=N,RK(N,B,this.latestValues,Se,me,de)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Se},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(w){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Tm(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ci.update(()=>{U1.hasAnimatedSinceResize=!0,this.currentAnimation=CK(0,dM,{...w,onUpdate:a=>{this.mixTargetDelta(a),w.onUpdate&&w.onUpdate(a)},onComplete:()=>{w.onComplete&&w.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const w=this.getStack();w&&w.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(dM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const w=this.getLead();let{targetWithTransforms:a,target:A,layout:B,latestValues:N}=w;if(!(!a||!A||!B)){if(this!==w&&this.layout&&B&&R8(this.options.animationType,this.layout.layoutBox,B.layoutBox)){A=this.target||ms();const F=gl(this.layout.layoutBox.x);A.x.min=w.target.x.min,A.x.max=A.x.min+F;const G=gl(this.layout.layoutBox.y);A.y.min=w.target.y.min,A.y.max=A.y.min+G}du(a,A),jy(a,N),Yv(this.projectionDeltaWithTransform,this.layoutCorrected,a,N)}}registerSharedNode(w,a){this.sharedNodes.has(w)||this.sharedNodes.set(w,new jK),this.sharedNodes.get(w).add(a);const B=a.options.initialPromotionConfig;a.promote({transition:B?B.transition:void 0,preserveFollowOpacity:B&&B.shouldPreserveFollowOpacity?B.shouldPreserveFollowOpacity(a):void 0})}isLead(){const w=this.getStack();return w?w.lead===this:!0}getLead(){var w;const{layoutId:a}=this.options;return a?((w=this.getStack())===null||w===void 0?void 0:w.lead)||this:this}getPrevLead(){var w;const{layoutId:a}=this.options;return a?(w=this.getStack())===null||w===void 0?void 0:w.prevLead:void 0}getStack(){const{layoutId:w}=this.options;if(w)return this.root.sharedNodes.get(w)}promote({needsReset:w,transition:a,preserveFollowOpacity:A}={}){const B=this.getStack();B&&B.promote(this,A),w&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const w=this.getStack();return w?w.relegate(this):!1}resetSkewAndRotation(){const{visualElement:w}=this.options;if(!w)return;let a=!1;const{latestValues:A}=w;if((A.z||A.rotate||A.rotateX||A.rotateY||A.rotateZ||A.skewX||A.skewY)&&(a=!0),!a)return;const B={};A.z&&n4("z",w,B,this.animationValues);for(let N=0;N<r4.length;N++)n4(`rotate${r4[N]}`,w,B,this.animationValues),n4(`skew${r4[N]}`,w,B,this.animationValues);w.render();for(const N in B)w.setStaticValue(N,B[N]),this.animationValues&&(this.animationValues[N]=B[N]);w.scheduleRender()}getProjectionStyles(w){var a,A;if(!this.instance||this.isSVG)return;if(!this.isVisible)return FK;const B={visibility:""},N=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,B.opacity="",B.pointerEvents=F1(w==null?void 0:w.pointerEvents)||"",B.transform=N?N(this.latestValues,""):"none",B;const F=this.getLead();if(!this.projectionDelta||!this.layout||!F.target){const Y={};return this.options.layoutId&&(Y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,Y.pointerEvents=F1(w==null?void 0:w.pointerEvents)||""),this.hasProjected&&!jg(this.latestValues)&&(Y.transform=N?N({},""):"none",this.hasProjected=!1),Y}const G=F.animationValues||F.latestValues;this.applyTransformsToTarget(),B.transform=OK(this.projectionDeltaWithTransform,this.treeScale,G),N&&(B.transform=N(G,B.transform));const{x:Q,y:te}=this.projectionDelta;B.transformOrigin=`${Q.origin*100}% ${te.origin*100}% 0`,F.animationValues?B.opacity=F===this?(A=(a=G.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&A!==void 0?A:1:this.preserveOpacity?this.latestValues.opacity:G.opacityExit:B.opacity=F===this?G.opacity!==void 0?G.opacity:"":G.opacityExit!==void 0?G.opacityExit:0;for(const Y in u_){if(G[Y]===void 0)continue;const{correct:oe,applyTo:de,isCSSVariable:me}=u_[Y],be=B.transform==="none"?G[Y]:oe(G[Y],F);if(de){const pe=de.length;for(let Se=0;Se<pe;Se++)B[de[Se]]=be}else me?this.options.visualElement.renderState.vars[Y]=be:B[Y]=be}return this.options.layoutId&&(B.pointerEvents=F===this?F1(w==null?void 0:w.pointerEvents)||"":"none"),B}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(w=>{var a;return(a=w.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(hM),this.root.sharedNodes.clear()}}}function UK(e){e.updateLayout()}function GK(e){var t;const i=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&i&&e.hasListeners("didUpdate")){const{layoutBox:c,measuredBox:h}=e.layout,{animationType:_}=e.options,w=i.source!==e.layout.source;_==="size"?hu(F=>{const G=w?i.measuredBox[F]:i.layoutBox[F],Q=gl(G);G.min=c[F].min,G.max=G.min+Q}):R8(_,i.layoutBox,c)&&hu(F=>{const G=w?i.measuredBox[F]:i.layoutBox[F],Q=gl(c[F]);G.max=G.min+Q,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[F].max=e.relativeTarget[F].min+Q)});const a=By();Yv(a,c,i.layoutBox);const A=By();w?Yv(A,e.applyTransform(h,!0),i.measuredBox):Yv(A,c,i.layoutBox);const B=!P8(a);let N=!1;if(!e.resumeFrom){const F=e.getClosestProjectingParent();if(F&&!F.resumeFrom){const{snapshot:G,layout:Q}=F;if(G&&Q){const te=ms();Jv(te,i.layoutBox,G.layoutBox);const Y=ms();Jv(Y,c,Q.layoutBox),M8(te,Y)||(N=!0),F.options.layoutRoot&&(e.relativeTarget=Y,e.relativeTargetOrigin=te,e.relativeParent=F)}}}e.notifyListeners("didUpdate",{layout:c,snapshot:i,delta:A,layoutDelta:a,hasLayoutChanged:B,hasRelativeLayoutChanged:N})}else if(e.isLead()){const{onExitComplete:c}=e.options;c&&c()}e.options.transition=void 0}function HK(e){Vv&&Og.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function qK(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function WK(e){e.clearSnapshot()}function hM(e){e.clearMeasurements()}function KK(e){e.isLayoutDirty=!1}function ZK(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function fM(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function XK(e){e.resolveTargetDelta()}function YK(e){e.calcProjection()}function JK(e){e.resetSkewAndRotation()}function QK(e){e.removeLeadSnapshot()}function pM(e,t,i){e.translate=Hi(t.translate,0,i),e.scale=Hi(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function mM(e,t,i,c){e.min=Hi(t.min,i.min,c),e.max=Hi(t.max,i.max,c)}function eZ(e,t,i,c){mM(e.x,t.x,i.x,c),mM(e.y,t.y,i.y,c)}function tZ(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const rZ={duration:.45,ease:[.4,0,.1,1]},gM=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),yM=gM("applewebkit/")&&!gM("chrome/")?Math.round:Bl;function xM(e){e.min=yM(e.min),e.max=yM(e.max)}function nZ(e){xM(e.x),xM(e.y)}function R8(e,t,i){return e==="position"||e==="preserve-aspect"&&!sK(cM(t),cM(i),.2)}function aZ(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const iZ=k8({attachResizeListener:(e,t)=>f_(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),a4={current:void 0},I8=k8({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!a4.current){const e=new iZ({});e.mount(window),e.setOptions({layoutScroll:!0}),a4.current=e}return a4.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),sZ={pan:{Feature:wK},drag:{Feature:bK,ProjectionNode:I8,MeasureLayout:E8}};function vM(e,t,i){const{props:c}=e;e.animationState&&c.whileHover&&e.animationState.setActive("whileHover",i==="Start");const h="onHover"+i,_=c[h];_&&Ci.postRender(()=>_(t,z_(t)))}class oZ extends Am{mount(){const{current:t}=this.node;t&&(this.unmount=oq(t,(i,c)=>(vM(this.node,c,"Start"),h=>vM(this.node,h,"End"))))}unmount(){}}class lZ extends Am{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=I_(f_(this.node.current,"focus",()=>this.onFocus()),f_(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _M(e,t,i){const{props:c}=e;e.animationState&&c.whileTap&&e.animationState.setActive("whileTap",i==="Start");const h="onTap"+(i==="End"?"":i),_=c[h];_&&Ci.postRender(()=>_(t,z_(t)))}class cZ extends Am{mount(){const{current:t}=this.node;t&&(this.unmount=dq(t,(i,c)=>(_M(this.node,c,"Start"),(h,{success:_})=>_M(this.node,h,_?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const RS=new WeakMap,i4=new WeakMap,uZ=e=>{const t=RS.get(e.target);t&&t(e)},dZ=e=>{e.forEach(uZ)};function hZ({root:e,...t}){const i=e||document;i4.has(i)||i4.set(i,{});const c=i4.get(i),h=JSON.stringify(t);return c[h]||(c[h]=new IntersectionObserver(dZ,{root:e,...t})),c[h]}function fZ(e,t,i){const c=hZ(t);return RS.set(e,i),c.observe(e),()=>{RS.delete(e),c.unobserve(e)}}const pZ={some:0,all:1};class mZ extends Am{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:i,margin:c,amount:h="some",once:_}=t,w={root:i?i.current:void 0,rootMargin:c,threshold:typeof h=="number"?h:pZ[h]},a=A=>{const{isIntersecting:B}=A;if(this.isInView===B||(this.isInView=B,_&&!B&&this.hasEnteredView))return;B&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",B);const{onViewportEnter:N,onViewportLeave:F}=this.node.getProps(),G=B?N:F;G&&G(A)};return fZ(this.node.current,w,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:i}=this.node;["amount","margin","root"].some(gZ(t,i))&&this.startObserver()}unmount(){}}function gZ({viewport:e={}},{viewport:t={}}={}){return i=>e[i]!==t[i]}const z8={inView:{Feature:mZ},tap:{Feature:cZ},focus:{Feature:lZ},hover:{Feature:oZ}},yZ={layout:{ProjectionNode:I8,MeasureLayout:E8}},IS={current:null},L8={current:!1};function xZ(){if(L8.current=!0,!!L5)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>IS.current=e.matches;e.addListener(t),t()}else IS.current=!1}const vZ=[...a8,Go,Em],_Z=e=>vZ.find(n8(e)),bM=new WeakMap;function bZ(e,t,i){for(const c in t){const h=t[c],_=i[c];if(qo(h))e.addValue(c,h);else if(qo(_))e.addValue(c,d_(h,{owner:e}));else if(_!==h)if(e.hasValue(c)){const w=e.getValue(c);w.liveStyle===!0?w.jump(h):w.hasAnimated||w.set(h)}else{const w=e.getStaticValue(c);e.addValue(c,d_(w!==void 0?w:h,{owner:e}))}}for(const c in i)t[c]===void 0&&e.removeValue(c);return t}const wM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class wZ{scrapeMotionValuesFromProps(t,i,c){return{}}constructor({parent:t,props:i,presenceContext:c,reducedMotionConfig:h,blockInitialAnimation:_,visualState:w},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=uT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const Q=vh.now();this.renderScheduledAt<Q&&(this.renderScheduledAt=Q,Ci.render(this.render,!1,!0))};const{latestValues:A,renderState:B,onUpdate:N}=w;this.onUpdate=N,this.latestValues=A,this.baseTarget={...A},this.initialValues=i.initial?{...A}:{},this.renderState=B,this.parent=t,this.props=i,this.presenceContext=c,this.depth=t?t.depth+1:0,this.reducedMotionConfig=h,this.options=a,this.blockInitialAnimation=!!_,this.isControllingVariants=Xw(i),this.isVariantNode=dI(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:F,...G}=this.scrapeMotionValuesFromProps(i,{},this);for(const Q in G){const te=G[Q];A[Q]!==void 0&&qo(te)&&te.set(A[Q],!1)}}mount(t){this.current=t,bM.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,c)=>this.bindToMotionValue(c,i)),L8.current||xZ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:IS.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){bM.delete(this.current),this.projection&&this.projection.unmount(),Tm(this.notifyUpdate),Tm(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const i=this.features[t];i&&(i.unmount(),i.isMounted=!1)}this.current=null}bindToMotionValue(t,i){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const c=u0.has(t),h=i.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Ci.preRender(this.notifyUpdate),c&&this.projection&&(this.projection.isTransformDirty=!0)}),_=i.on("renderRequest",this.scheduleRender);let w;window.MotionCheckAppearSync&&(w=window.MotionCheckAppearSync(this,t,i)),this.valueSubscriptions.set(t,()=>{h(),_(),w&&w(),i.owner&&i.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in tx){const i=tx[t];if(!i)continue;const{isEnabled:c,Feature:h}=i;if(!this.features[t]&&h&&c(this.props)&&(this.features[t]=new h(this)),this.features[t]){const _=this.features[t];_.isMounted?_.update():(_.mount(),_.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ms()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,i){this.latestValues[t]=i}update(t,i){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let c=0;c<wM.length;c++){const h=wM[c];this.propEventSubscriptions[h]&&(this.propEventSubscriptions[h](),delete this.propEventSubscriptions[h]);const _="on"+h,w=t[_];w&&(this.propEventSubscriptions[h]=this.on(h,w))}this.prevMotionValues=bZ(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(t),()=>i.variantChildren.delete(t)}addValue(t,i){const c=this.values.get(t);i!==c&&(c&&this.removeValue(t),this.bindToMotionValue(t,i),this.values.set(t,i),this.latestValues[t]=i.get())}removeValue(t){this.values.delete(t);const i=this.valueSubscriptions.get(t);i&&(i(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,i){if(this.props.values&&this.props.values[t])return this.props.values[t];let c=this.values.get(t);return c===void 0&&i!==void 0&&(c=d_(i===null?void 0:i,{owner:this}),this.addValue(t,c)),c}readValue(t,i){var c;let h=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(c=this.getBaseTargetFromProps(this.props,t))!==null&&c!==void 0?c:this.readValueFromInstance(this.current,t,this.options);return h!=null&&(typeof h=="string"&&(t8(h)||qI(h))?h=parseFloat(h):!_Z(h)&&Em.test(i)&&(h=JI(t,i)),this.setBaseTarget(t,qo(h)?h.get():h)),qo(h)?h.get():h}setBaseTarget(t,i){this.baseTarget[t]=i}getBaseTarget(t){var i;const{initial:c}=this.props;let h;if(typeof c=="string"||typeof c=="object"){const w=U5(this.props,c,(i=this.presenceContext)===null||i===void 0?void 0:i.custom);w&&(h=w[t])}if(c&&h!==void 0)return h;const _=this.getBaseTargetFromProps(this.props,t);return _!==void 0&&!qo(_)?_:this.initialValues[t]!==void 0&&h===void 0?void 0:this.baseTarget[t]}on(t,i){return this.events[t]||(this.events[t]=new aT),this.events[t].add(i)}notify(t,...i){this.events[t]&&this.events[t].notify(...i)}}class $8 extends wZ{constructor(){super(...arguments),this.KeyframeResolver=i8}sortInstanceNodePosition(t,i){return t.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(t,i){return t.style?t.style[i]:void 0}removeValueFromRenderState(t,{vars:i,style:c}){delete i[t],delete c[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;qo(t)&&(this.childSubscription=t.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function SZ(e){return window.getComputedStyle(e)}class TZ extends $8{constructor(){super(...arguments),this.type="html",this.renderInstance=vI}readValueFromInstance(t,i){if(u0.has(i)){const c=cT(i);return c&&c.default||0}else{const c=SZ(t),h=(G5(i)?c.getPropertyValue(i):c[i])||0;return typeof h=="string"?h.trim():h}}measureInstanceViewportBox(t,{transformPagePoint:i}){return S8(t,i)}build(t,i,c){W5(t,i,c.transformTemplate)}scrapeMotionValuesFromProps(t,i,c){return Y5(t,i,c)}}class EZ extends $8{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ms}getBaseTargetFromProps(t,i){return t[i]}readValueFromInstance(t,i){if(u0.has(i)){const c=cT(i);return c&&c.default||0}return i=_I.has(i)?i:O5(i),t.getAttribute(i)}scrapeMotionValuesFromProps(t,i,c){return SI(t,i,c)}build(t,i,c){K5(t,i,this.isSVGTag,c.transformTemplate)}renderInstance(t,i,c,h){bI(t,i,c,h)}mount(t){this.isSVGTag=X5(t.tagName),super.mount(t)}}const B8=(e,t)=>V5(e)?new EZ(t):new TZ(t,{allowProjection:e!==V.Fragment}),CZ=EI({...m8,...z8,...sZ,...yZ},B8),N8=uI(CZ),DZ={renderer:B8,...m8,...z8};var PZ=({children:e,navigate:t,disableAnimation:i,useHref:c,disableRipple:h=!1,skipFramerMotionAnimations:_=i,reducedMotion:w="never",validationBehavior:a,locale:A="en-US",labelPlacement:B,defaultDates:N,createCalendar:F,spinnerVariant:G,...Q})=>{let te=e;t&&(te=b.jsx(NU,{navigate:t,useHref:c,children:te}));const Y=V.useMemo(()=>(i&&_&&(Ww.skipAnimations=!0),{createCalendar:F,defaultDates:N,disableAnimation:i,disableRipple:h,validationBehavior:a,labelPlacement:B,spinnerVariant:G}),[F,N==null?void 0:N.maxDate,N==null?void 0:N.minDate,i,h,a,B,G]);return b.jsx(aV,{value:Y,children:b.jsx(yV,{locale:A,children:b.jsx(cI,{reducedMotion:w,children:b.jsx(xR,{...Q,children:te})})})})};function e2(e){const t=Pi(),i=t==null?void 0:t.labelPlacement;return V.useMemo(()=>{var c,h;const _=(h=(c=e.labelPlacement)!=null?c:i)!=null?h:"inside";return _==="inside"&&!e.label?"outside":_},[e.labelPlacement,i,e.label])}function Na(e){return V.forwardRef(e)}var Zo=(e,t,i=!0)=>{if(!t)return[e,{}];const c=t.reduce((h,_)=>_ in e?{...h,[_]:e[_]}:h,{});return i?[Object.keys(e).filter(_=>!t.includes(_)).reduce((_,w)=>({..._,[w]:e[w]}),{}),c]:[e,c]},MZ={default:"bg-default text-default-foreground",primary:"bg-primary text-primary-foreground",secondary:"bg-secondary text-secondary-foreground",success:"bg-success text-success-foreground",warning:"bg-warning text-warning-foreground",danger:"bg-danger text-danger-foreground",foreground:"bg-foreground text-background"},AZ={default:"shadow-lg shadow-default/50 bg-default text-default-foreground",primary:"shadow-lg shadow-primary/40 bg-primary text-primary-foreground",secondary:"shadow-lg shadow-secondary/40 bg-secondary text-secondary-foreground",success:"shadow-lg shadow-success/40 bg-success text-success-foreground",warning:"shadow-lg shadow-warning/40 bg-warning text-warning-foreground",danger:"shadow-lg shadow-danger/40 bg-danger text-danger-foreground"},kZ={default:"bg-transparent border-default text-foreground",primary:"bg-transparent border-primary text-primary",secondary:"bg-transparent border-secondary text-secondary",success:"bg-transparent border-success text-success",warning:"bg-transparent border-warning text-warning",danger:"bg-transparent border-danger text-danger"},RZ={default:"bg-default/40 text-default-700",primary:"bg-primary/20 text-primary-600",secondary:"bg-secondary/20 text-secondary-600",success:"bg-success/20 text-success-700 dark:text-success",warning:"bg-warning/20 text-warning-700 dark:text-warning",danger:"bg-danger/20 text-danger-600 dark:text-danger-500"},IZ={default:"border-default bg-default-100 text-default-foreground",primary:"border-default bg-default-100 text-primary",secondary:"border-default bg-default-100 text-secondary",success:"border-default bg-default-100 text-success",warning:"border-default bg-default-100 text-warning",danger:"border-default bg-default-100 text-danger"},zZ={default:"bg-transparent text-default-foreground",primary:"bg-transparent text-primary",secondary:"bg-transparent text-secondary",success:"bg-transparent text-success",warning:"bg-transparent text-warning",danger:"bg-transparent text-danger"},LZ={default:"border-default text-default-foreground",primary:"border-primary text-primary",secondary:"border-secondary text-secondary",success:"border-success text-success",warning:"border-warning text-warning",danger:"border-danger text-danger"},Yr={solid:MZ,shadow:AZ,bordered:kZ,flat:RZ,faded:IZ,light:zZ,ghost:LZ},C1=["small","medium","large"],zS={theme:{opacity:["disabled"],spacing:["divider"],borderWidth:C1,borderRadius:C1},classGroups:{shadow:[{shadow:C1}],"font-size":[{text:["tiny",...C1]}],"bg-image":["bg-stripe-gradient-default","bg-stripe-gradient-primary","bg-stripe-gradient-secondary","bg-stripe-gradient-success","bg-stripe-gradient-warning","bg-stripe-gradient-danger"]}},SM=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,zl=e=>!e||typeof e!="object"||Object.keys(e).length===0,$Z=(e,t)=>JSON.stringify(e)===JSON.stringify(t);function j8(e,t){e.forEach(function(i){Array.isArray(i)?j8(i,t):t.push(i)})}function O8(e){let t=[];return j8(e,t),t}var F8=(...e)=>O8(e).filter(Boolean),V8=(e,t)=>{let i={},c=Object.keys(e),h=Object.keys(t);for(let _ of c)if(h.includes(_)){let w=e[_],a=t[_];Array.isArray(w)||Array.isArray(a)?i[_]=F8(a,w):typeof w=="object"&&typeof a=="object"?i[_]=V8(w,a):i[_]=a+" "+w}else i[_]=e[_];for(let _ of h)c.includes(_)||(i[_]=t[_]);return i},TM=e=>!e||typeof e!="string"?e:e.replace(/\s+/g," ").trim();const fT="-",BZ=e=>{const t=jZ(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:c}=e;return{getClassGroupId:w=>{const a=w.split(fT);return a[0]===""&&a.length!==1&&a.shift(),U8(a,t)||NZ(w)},getConflictingClassGroupIds:(w,a)=>{const A=i[w]||[];return a&&c[w]?[...A,...c[w]]:A}}},U8=(e,t)=>{var w;if(e.length===0)return t.classGroupId;const i=e[0],c=t.nextPart.get(i),h=c?U8(e.slice(1),c):void 0;if(h)return h;if(t.validators.length===0)return;const _=e.join(fT);return(w=t.validators.find(({validator:a})=>a(_)))==null?void 0:w.classGroupId},EM=/^\[(.+)\]$/,NZ=e=>{if(EM.test(e)){const t=EM.exec(e)[1],i=t==null?void 0:t.substring(0,t.indexOf(":"));if(i)return"arbitrary.."+i}},jZ=e=>{const{theme:t,prefix:i}=e,c={nextPart:new Map,validators:[]};return FZ(Object.entries(e.classGroups),i).forEach(([_,w])=>{LS(w,c,_,t)}),c},LS=(e,t,i,c)=>{e.forEach(h=>{if(typeof h=="string"){const _=h===""?t:CM(t,h);_.classGroupId=i;return}if(typeof h=="function"){if(OZ(h)){LS(h(c),t,i,c);return}t.validators.push({validator:h,classGroupId:i});return}Object.entries(h).forEach(([_,w])=>{LS(w,CM(t,_),i,c)})})},CM=(e,t)=>{let i=e;return t.split(fT).forEach(c=>{i.nextPart.has(c)||i.nextPart.set(c,{nextPart:new Map,validators:[]}),i=i.nextPart.get(c)}),i},OZ=e=>e.isThemeGetter,FZ=(e,t)=>t?e.map(([i,c])=>{const h=c.map(_=>typeof _=="string"?t+_:typeof _=="object"?Object.fromEntries(Object.entries(_).map(([w,a])=>[t+w,a])):_);return[i,h]}):e,VZ=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,i=new Map,c=new Map;const h=(_,w)=>{i.set(_,w),t++,t>e&&(t=0,c=i,i=new Map)};return{get(_){let w=i.get(_);if(w!==void 0)return w;if((w=c.get(_))!==void 0)return h(_,w),w},set(_,w){i.has(_)?i.set(_,w):h(_,w)}}},G8="!",UZ=e=>{const{separator:t,experimentalParseClassName:i}=e,c=t.length===1,h=t[0],_=t.length,w=a=>{const A=[];let B=0,N=0,F;for(let oe=0;oe<a.length;oe++){let de=a[oe];if(B===0){if(de===h&&(c||a.slice(oe,oe+_)===t)){A.push(a.slice(N,oe)),N=oe+_;continue}if(de==="/"){F=oe;continue}}de==="["?B++:de==="]"&&B--}const G=A.length===0?a:a.substring(N),Q=G.startsWith(G8),te=Q?G.substring(1):G,Y=F&&F>N?F-N:void 0;return{modifiers:A,hasImportantModifier:Q,baseClassName:te,maybePostfixModifierPosition:Y}};return i?a=>i({className:a,parseClassName:w}):w},GZ=e=>{if(e.length<=1)return e;const t=[];let i=[];return e.forEach(c=>{c[0]==="["?(t.push(...i.sort(),c),i=[]):i.push(c)}),t.push(...i.sort()),t},HZ=e=>({cache:VZ(e.cacheSize),parseClassName:UZ(e),...BZ(e)}),qZ=/\s+/,WZ=(e,t)=>{const{parseClassName:i,getClassGroupId:c,getConflictingClassGroupIds:h}=t,_=[],w=e.trim().split(qZ);let a="";for(let A=w.length-1;A>=0;A-=1){const B=w[A],{modifiers:N,hasImportantModifier:F,baseClassName:G,maybePostfixModifierPosition:Q}=i(B);let te=!!Q,Y=c(te?G.substring(0,Q):G);if(!Y){if(!te){a=B+(a.length>0?" "+a:a);continue}if(Y=c(G),!Y){a=B+(a.length>0?" "+a:a);continue}te=!1}const oe=GZ(N).join(":"),de=F?oe+G8:oe,me=de+Y;if(_.includes(me))continue;_.push(me);const be=h(Y,te);for(let pe=0;pe<be.length;++pe){const Se=be[pe];_.push(de+Se)}a=B+(a.length>0?" "+a:a)}return a};function KZ(){let e=0,t,i,c="";for(;e<arguments.length;)(t=arguments[e++])&&(i=H8(t))&&(c&&(c+=" "),c+=i);return c}const H8=e=>{if(typeof e=="string")return e;let t,i="";for(let c=0;c<e.length;c++)e[c]&&(t=H8(e[c]))&&(i&&(i+=" "),i+=t);return i};function $S(e,...t){let i,c,h,_=w;function w(A){const B=t.reduce((N,F)=>F(N),e());return i=HZ(B),c=i.cache.get,h=i.cache.set,_=a,a(A)}function a(A){const B=c(A);if(B)return B;const N=WZ(A,i);return h(A,N),N}return function(){return _(KZ.apply(null,arguments))}}const Ei=e=>{const t=i=>i[e]||[];return t.isThemeGetter=!0,t},q8=/^\[(?:([a-z-]+):)?(.+)\]$/i,ZZ=/^\d+\/\d+$/,XZ=new Set(["px","full","screen"]),YZ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JZ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,QZ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,eX=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tX=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ef=e=>qy(e)||XZ.has(e)||ZZ.test(e),cm=e=>gx(e,"length",cX),qy=e=>!!e&&!Number.isNaN(Number(e)),s4=e=>gx(e,"number",qy),Cv=e=>!!e&&Number.isInteger(Number(e)),rX=e=>e.endsWith("%")&&qy(e.slice(0,-1)),ha=e=>q8.test(e),um=e=>YZ.test(e),nX=new Set(["length","size","percentage"]),aX=e=>gx(e,nX,W8),iX=e=>gx(e,"position",W8),sX=new Set(["image","url"]),oX=e=>gx(e,sX,dX),lX=e=>gx(e,"",uX),Dv=()=>!0,gx=(e,t,i)=>{const c=q8.exec(e);return c?c[1]?typeof t=="string"?c[1]===t:t.has(c[1]):i(c[2]):!1},cX=e=>JZ.test(e)&&!QZ.test(e),W8=()=>!1,uX=e=>eX.test(e),dX=e=>tX.test(e),BS=()=>{const e=Ei("colors"),t=Ei("spacing"),i=Ei("blur"),c=Ei("brightness"),h=Ei("borderColor"),_=Ei("borderRadius"),w=Ei("borderSpacing"),a=Ei("borderWidth"),A=Ei("contrast"),B=Ei("grayscale"),N=Ei("hueRotate"),F=Ei("invert"),G=Ei("gap"),Q=Ei("gradientColorStops"),te=Ei("gradientColorStopPositions"),Y=Ei("inset"),oe=Ei("margin"),de=Ei("opacity"),me=Ei("padding"),be=Ei("saturate"),pe=Ei("scale"),Se=Ei("sepia"),$e=Ei("skew"),Le=Ei("space"),re=Ei("translate"),Ee=()=>["auto","contain","none"],se=()=>["auto","hidden","clip","visible","scroll"],ue=()=>["auto",ha,t],ke=()=>[ha,t],ce=()=>["",Ef,cm],Pe=()=>["auto",qy,ha],xe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Te=()=>["solid","dashed","dotted","double","none"],Ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Me=()=>["start","end","center","between","around","evenly","stretch"],Xe=()=>["","0",ha],Ce=()=>["auto","avoid","all","avoid-page","page","left","right","column"],He=()=>[qy,ha];return{cacheSize:500,separator:":",theme:{colors:[Dv],spacing:[Ef,cm],blur:["none","",um,ha],brightness:He(),borderColor:[e],borderRadius:["none","","full",um,ha],borderSpacing:ke(),borderWidth:ce(),contrast:He(),grayscale:Xe(),hueRotate:He(),invert:Xe(),gap:ke(),gradientColorStops:[e],gradientColorStopPositions:[rX,cm],inset:ue(),margin:ue(),opacity:He(),padding:ke(),saturate:He(),scale:He(),sepia:Xe(),skew:He(),space:ke(),translate:ke()},classGroups:{aspect:[{aspect:["auto","square","video",ha]}],container:["container"],columns:[{columns:[um]}],"break-after":[{"break-after":Ce()}],"break-before":[{"break-before":Ce()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...xe(),ha]}],overflow:[{overflow:se()}],"overflow-x":[{"overflow-x":se()}],"overflow-y":[{"overflow-y":se()}],overscroll:[{overscroll:Ee()}],"overscroll-x":[{"overscroll-x":Ee()}],"overscroll-y":[{"overscroll-y":Ee()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[Y]}],"inset-x":[{"inset-x":[Y]}],"inset-y":[{"inset-y":[Y]}],start:[{start:[Y]}],end:[{end:[Y]}],top:[{top:[Y]}],right:[{right:[Y]}],bottom:[{bottom:[Y]}],left:[{left:[Y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Cv,ha]}],basis:[{basis:ue()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ha]}],grow:[{grow:Xe()}],shrink:[{shrink:Xe()}],order:[{order:["first","last","none",Cv,ha]}],"grid-cols":[{"grid-cols":[Dv]}],"col-start-end":[{col:["auto",{span:["full",Cv,ha]},ha]}],"col-start":[{"col-start":Pe()}],"col-end":[{"col-end":Pe()}],"grid-rows":[{"grid-rows":[Dv]}],"row-start-end":[{row:["auto",{span:[Cv,ha]},ha]}],"row-start":[{"row-start":Pe()}],"row-end":[{"row-end":Pe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ha]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ha]}],gap:[{gap:[G]}],"gap-x":[{"gap-x":[G]}],"gap-y":[{"gap-y":[G]}],"justify-content":[{justify:["normal",...Me()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Me(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Me(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[me]}],px:[{px:[me]}],py:[{py:[me]}],ps:[{ps:[me]}],pe:[{pe:[me]}],pt:[{pt:[me]}],pr:[{pr:[me]}],pb:[{pb:[me]}],pl:[{pl:[me]}],m:[{m:[oe]}],mx:[{mx:[oe]}],my:[{my:[oe]}],ms:[{ms:[oe]}],me:[{me:[oe]}],mt:[{mt:[oe]}],mr:[{mr:[oe]}],mb:[{mb:[oe]}],ml:[{ml:[oe]}],"space-x":[{"space-x":[Le]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Le]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ha,t]}],"min-w":[{"min-w":[ha,t,"min","max","fit"]}],"max-w":[{"max-w":[ha,t,"none","full","min","max","fit","prose",{screen:[um]},um]}],h:[{h:[ha,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ha,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ha,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ha,t,"auto","min","max","fit"]}],"font-size":[{text:["base",um,cm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",s4]}],"font-family":[{font:[Dv]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ha]}],"line-clamp":[{"line-clamp":["none",qy,s4]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ef,ha]}],"list-image":[{"list-image":["none",ha]}],"list-style-type":[{list:["none","disc","decimal",ha]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[de]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[de]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Te(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ef,cm]}],"underline-offset":[{"underline-offset":["auto",Ef,ha]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ke()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ha]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ha]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[de]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...xe(),iX]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",aX]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},oX]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[te]}],"gradient-via-pos":[{via:[te]}],"gradient-to-pos":[{to:[te]}],"gradient-from":[{from:[Q]}],"gradient-via":[{via:[Q]}],"gradient-to":[{to:[Q]}],rounded:[{rounded:[_]}],"rounded-s":[{"rounded-s":[_]}],"rounded-e":[{"rounded-e":[_]}],"rounded-t":[{"rounded-t":[_]}],"rounded-r":[{"rounded-r":[_]}],"rounded-b":[{"rounded-b":[_]}],"rounded-l":[{"rounded-l":[_]}],"rounded-ss":[{"rounded-ss":[_]}],"rounded-se":[{"rounded-se":[_]}],"rounded-ee":[{"rounded-ee":[_]}],"rounded-es":[{"rounded-es":[_]}],"rounded-tl":[{"rounded-tl":[_]}],"rounded-tr":[{"rounded-tr":[_]}],"rounded-br":[{"rounded-br":[_]}],"rounded-bl":[{"rounded-bl":[_]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[de]}],"border-style":[{border:[...Te(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[de]}],"divide-style":[{divide:Te()}],"border-color":[{border:[h]}],"border-color-x":[{"border-x":[h]}],"border-color-y":[{"border-y":[h]}],"border-color-s":[{"border-s":[h]}],"border-color-e":[{"border-e":[h]}],"border-color-t":[{"border-t":[h]}],"border-color-r":[{"border-r":[h]}],"border-color-b":[{"border-b":[h]}],"border-color-l":[{"border-l":[h]}],"divide-color":[{divide:[h]}],"outline-style":[{outline:["",...Te()]}],"outline-offset":[{"outline-offset":[Ef,ha]}],"outline-w":[{outline:[Ef,cm]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[de]}],"ring-offset-w":[{"ring-offset":[Ef,cm]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",um,lX]}],"shadow-color":[{shadow:[Dv]}],opacity:[{opacity:[de]}],"mix-blend":[{"mix-blend":[...Ie(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ie()}],filter:[{filter:["","none"]}],blur:[{blur:[i]}],brightness:[{brightness:[c]}],contrast:[{contrast:[A]}],"drop-shadow":[{"drop-shadow":["","none",um,ha]}],grayscale:[{grayscale:[B]}],"hue-rotate":[{"hue-rotate":[N]}],invert:[{invert:[F]}],saturate:[{saturate:[be]}],sepia:[{sepia:[Se]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[i]}],"backdrop-brightness":[{"backdrop-brightness":[c]}],"backdrop-contrast":[{"backdrop-contrast":[A]}],"backdrop-grayscale":[{"backdrop-grayscale":[B]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[N]}],"backdrop-invert":[{"backdrop-invert":[F]}],"backdrop-opacity":[{"backdrop-opacity":[de]}],"backdrop-saturate":[{"backdrop-saturate":[be]}],"backdrop-sepia":[{"backdrop-sepia":[Se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[w]}],"border-spacing-x":[{"border-spacing-x":[w]}],"border-spacing-y":[{"border-spacing-y":[w]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ha]}],duration:[{duration:He()}],ease:[{ease:["linear","in","out","in-out",ha]}],delay:[{delay:He()}],animate:[{animate:["none","spin","ping","pulse","bounce",ha]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[pe]}],"scale-x":[{"scale-x":[pe]}],"scale-y":[{"scale-y":[pe]}],rotate:[{rotate:[Cv,ha]}],"translate-x":[{"translate-x":[re]}],"translate-y":[{"translate-y":[re]}],"skew-x":[{"skew-x":[$e]}],"skew-y":[{"skew-y":[$e]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ha]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ha]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ke()}],"scroll-mx":[{"scroll-mx":ke()}],"scroll-my":[{"scroll-my":ke()}],"scroll-ms":[{"scroll-ms":ke()}],"scroll-me":[{"scroll-me":ke()}],"scroll-mt":[{"scroll-mt":ke()}],"scroll-mr":[{"scroll-mr":ke()}],"scroll-mb":[{"scroll-mb":ke()}],"scroll-ml":[{"scroll-ml":ke()}],"scroll-p":[{"scroll-p":ke()}],"scroll-px":[{"scroll-px":ke()}],"scroll-py":[{"scroll-py":ke()}],"scroll-ps":[{"scroll-ps":ke()}],"scroll-pe":[{"scroll-pe":ke()}],"scroll-pt":[{"scroll-pt":ke()}],"scroll-pr":[{"scroll-pr":ke()}],"scroll-pb":[{"scroll-pb":ke()}],"scroll-pl":[{"scroll-pl":ke()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ha]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ef,cm,s4]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},hX=(e,{cacheSize:t,prefix:i,separator:c,experimentalParseClassName:h,extend:_={},override:w={}})=>{Uv(e,"cacheSize",t),Uv(e,"prefix",i),Uv(e,"separator",c),Uv(e,"experimentalParseClassName",h);for(const a in w)fX(e[a],w[a]);for(const a in _)pX(e[a],_[a]);return e},Uv=(e,t,i)=>{i!==void 0&&(e[t]=i)},fX=(e,t)=>{if(t)for(const i in t)Uv(e,i,t[i])},pX=(e,t)=>{if(t)for(const i in t){const c=t[i];c!==void 0&&(e[i]=(e[i]||[]).concat(c))}},K8=(e,...t)=>typeof e=="function"?$S(BS,e,...t):$S(()=>hX(BS(),e),...t),mX=$S(BS);var gX={twMerge:!0,twMergeConfig:{},responsiveVariants:!1},Z8=e=>e||void 0,p_=(...e)=>Z8(O8(e).filter(Boolean).join(" ")),o4=null,Pf={},NS=!1,Pv=(...e)=>t=>t.twMerge?((!o4||NS)&&(NS=!1,o4=zl(Pf)?mX:K8({...Pf,extend:{theme:Pf.theme,classGroups:Pf.classGroups,conflictingClassGroupModifiers:Pf.conflictingClassGroupModifiers,conflictingClassGroups:Pf.conflictingClassGroups,...Pf.extend}})),Z8(o4(p_(e)))):p_(e),DM=(e,t)=>{for(let i in t)e.hasOwnProperty(i)?e[i]=p_(e[i],t[i]):e[i]=t[i];return e},yX=(e,t)=>{let{extend:i=null,slots:c={},variants:h={},compoundVariants:_=[],compoundSlots:w=[],defaultVariants:a={}}=e,A={...gX,...t},B=i!=null&&i.base?p_(i.base,e==null?void 0:e.base):e==null?void 0:e.base,N=i!=null&&i.variants&&!zl(i.variants)?V8(h,i.variants):h,F=i!=null&&i.defaultVariants&&!zl(i.defaultVariants)?{...i.defaultVariants,...a}:a;!zl(A.twMergeConfig)&&!$Z(A.twMergeConfig,Pf)&&(NS=!0,Pf=A.twMergeConfig);let G=zl(i==null?void 0:i.slots),Q=zl(c)?{}:{base:p_(e==null?void 0:e.base,G&&(i==null?void 0:i.base)),...c},te=G?Q:DM({...i==null?void 0:i.slots},zl(Q)?{base:e==null?void 0:e.base}:Q),Y=zl(i==null?void 0:i.compoundVariants)?_:F8(i==null?void 0:i.compoundVariants,_),oe=me=>{if(zl(N)&&zl(c)&&G)return Pv(B,me==null?void 0:me.class,me==null?void 0:me.className)(A);if(Y&&!Array.isArray(Y))throw new TypeError(`The "compoundVariants" prop must be an array. Received: ${typeof Y}`);if(w&&!Array.isArray(w))throw new TypeError(`The "compoundSlots" prop must be an array. Received: ${typeof w}`);let be=(ke,ce,Pe=[],xe)=>{let Te=Pe;if(typeof ce=="string")Te=Te.concat(TM(ce).split(" ").map(Ie=>`${ke}:${Ie}`));else if(Array.isArray(ce))Te=Te.concat(ce.reduce((Ie,Me)=>Ie.concat(`${ke}:${Me}`),[]));else if(typeof ce=="object"&&typeof xe=="string"){for(let Ie in ce)if(ce.hasOwnProperty(Ie)&&Ie===xe){let Me=ce[Ie];if(Me&&typeof Me=="string"){let Xe=TM(Me);Te[xe]?Te[xe]=Te[xe].concat(Xe.split(" ").map(Ce=>`${ke}:${Ce}`)):Te[xe]=Xe.split(" ").map(Ce=>`${ke}:${Ce}`)}else Array.isArray(Me)&&Me.length>0&&(Te[xe]=Me.reduce((Xe,Ce)=>Xe.concat(`${ke}:${Ce}`),[]))}}return Te},pe=(ke,ce=N,Pe=null,xe=null)=>{var Te;let Ie=ce[ke];if(!Ie||zl(Ie))return null;let Me=(Te=xe==null?void 0:xe[ke])!=null?Te:me==null?void 0:me[ke];if(Me===null)return null;let Xe=SM(Me),Ce=Array.isArray(A.responsiveVariants)&&A.responsiveVariants.length>0||A.responsiveVariants===!0,He=F==null?void 0:F[ke],et=[];if(typeof Xe=="object"&&Ce)for(let[Pt,Et]of Object.entries(Xe)){let Wt=Ie[Et];if(Pt==="initial"){He=Et;continue}Array.isArray(A.responsiveVariants)&&!A.responsiveVariants.includes(Pt)||(et=be(Pt,Wt,et,Pe))}let Ke=Xe!=null&&typeof Xe!="object"?Xe:SM(He),ot=Ie[Ke||"false"];return typeof et=="object"&&typeof Pe=="string"&&et[Pe]?DM(et,ot):et.length>0?(et.push(ot),Pe==="base"?et.join(" "):et):ot},Se=()=>N?Object.keys(N).map(ke=>pe(ke,N)):null,$e=(ke,ce)=>{if(!N||typeof N!="object")return null;let Pe=new Array;for(let xe in N){let Te=pe(xe,N,ke,ce),Ie=ke==="base"&&typeof Te=="string"?Te:Te&&Te[ke];Ie&&(Pe[Pe.length]=Ie)}return Pe},Le={};for(let ke in me)me[ke]!==void 0&&(Le[ke]=me[ke]);let re=(ke,ce)=>{var Pe;let xe=typeof(me==null?void 0:me[ke])=="object"?{[ke]:(Pe=me[ke])==null?void 0:Pe.initial}:{};return{...F,...Le,...xe,...ce}},Ee=(ke=[],ce)=>{let Pe=[];for(let{class:xe,className:Te,...Ie}of ke){let Me=!0;for(let[Xe,Ce]of Object.entries(Ie)){let He=re(Xe,ce)[Xe];if(Array.isArray(Ce)){if(!Ce.includes(He)){Me=!1;break}}else{let et=Ke=>Ke==null||Ke===!1;if(et(Ce)&&et(He))continue;if(He!==Ce){Me=!1;break}}}Me&&(xe&&Pe.push(xe),Te&&Pe.push(Te))}return Pe},se=ke=>{let ce=Ee(Y,ke);if(!Array.isArray(ce))return ce;let Pe={};for(let xe of ce)if(typeof xe=="string"&&(Pe.base=Pv(Pe.base,xe)(A)),typeof xe=="object")for(let[Te,Ie]of Object.entries(xe))Pe[Te]=Pv(Pe[Te],Ie)(A);return Pe},ue=ke=>{if(w.length<1)return null;let ce={};for(let{slots:Pe=[],class:xe,className:Te,...Ie}of w){if(!zl(Ie)){let Me=!0;for(let Xe of Object.keys(Ie)){let Ce=re(Xe,ke)[Xe];if(Ce===void 0||(Array.isArray(Ie[Xe])?!Ie[Xe].includes(Ce):Ie[Xe]!==Ce)){Me=!1;break}}if(!Me)continue}for(let Me of Pe)ce[Me]=ce[Me]||[],ce[Me].push([xe,Te])}return ce};if(!zl(c)||!G){let ke={};if(typeof te=="object"&&!zl(te))for(let ce of Object.keys(te))ke[ce]=Pe=>{var xe,Te;return Pv(te[ce],$e(ce,Pe),((xe=se(Pe))!=null?xe:[])[ce],((Te=ue(Pe))!=null?Te:[])[ce],Pe==null?void 0:Pe.class,Pe==null?void 0:Pe.className)(A)};return ke}return Pv(B,Se(),Ee(Y),me==null?void 0:me.class,me==null?void 0:me.className)(A)},de=()=>{if(!(!N||typeof N!="object"))return Object.keys(N)};return oe.variantKeys=de(),oe.extend=i,oe.base=B,oe.slots=te,oe.variants=N,oe.defaultVariants=F,oe.compoundSlots=w,oe.compoundVariants=Y,oe},Ha=(e,t)=>{var i,c,h;return yX(e,{...t,twMerge:(i=t==null?void 0:t.twMerge)!=null?i:!0,twMergeConfig:{...t==null?void 0:t.twMergeConfig,theme:{...(c=t==null?void 0:t.twMergeConfig)==null?void 0:c.theme,...zS.theme},classGroups:{...(h=t==null?void 0:t.twMergeConfig)==null?void 0:h.classGroups,...zS.classGroups}}})},PM=Ha({slots:{base:"relative inline-flex flex-col gap-2 items-center justify-center",wrapper:"relative flex",label:"text-foreground dark:text-foreground-dark font-regular",circle1:"absolute w-full h-full rounded-full",circle2:"absolute w-full h-full rounded-full",dots:"relative rounded-full mx-auto",spinnerBars:["absolute","animate-fade-out","rounded-full","w-[25%]","h-[8%]","left-[calc(37.5%)]","top-[calc(46%)]","spinner-bar-animation"]},variants:{size:{sm:{wrapper:"w-5 h-5",circle1:"border-2",circle2:"border-2",dots:"size-1",label:"text-small"},md:{wrapper:"w-8 h-8",circle1:"border-3",circle2:"border-3",dots:"size-1.5",label:"text-medium"},lg:{wrapper:"w-10 h-10",circle1:"border-3",circle2:"border-3",dots:"size-2",label:"text-large"}},color:{current:{circle1:"border-b-current",circle2:"border-b-current",dots:"bg-current",spinnerBars:"bg-current"},white:{circle1:"border-b-white",circle2:"border-b-white",dots:"bg-white",spinnerBars:"bg-white"},default:{circle1:"border-b-default",circle2:"border-b-default",dots:"bg-default",spinnerBars:"bg-default"},primary:{circle1:"border-b-primary",circle2:"border-b-primary",dots:"bg-primary",spinnerBars:"bg-primary"},secondary:{circle1:"border-b-secondary",circle2:"border-b-secondary",dots:"bg-secondary",spinnerBars:"bg-secondary"},success:{circle1:"border-b-success",circle2:"border-b-success",dots:"bg-success",spinnerBars:"bg-success"},warning:{circle1:"border-b-warning",circle2:"border-b-warning",dots:"bg-warning",spinnerBars:"bg-warning"},danger:{circle1:"border-b-danger",circle2:"border-b-danger",dots:"bg-danger",spinnerBars:"bg-danger"}},labelColor:{foreground:{label:"text-foreground"},primary:{label:"text-primary"},secondary:{label:"text-secondary"},success:{label:"text-success"},warning:{label:"text-warning"},danger:{label:"text-danger"}},variant:{default:{circle1:["animate-spinner-ease-spin","border-solid","border-t-transparent","border-l-transparent","border-r-transparent"],circle2:["opacity-75","animate-spinner-linear-spin","border-dotted","border-t-transparent","border-l-transparent","border-r-transparent"]},gradient:{circle1:["border-0","bg-gradient-to-b","from-transparent","via-transparent","to-primary","animate-spinner-linear-spin","[animation-duration:1s]","[-webkit-mask:radial-gradient(closest-side,rgba(0,0,0,0.0)calc(100%-3px),rgba(0,0,0,1)calc(100%-3px))]"],circle2:["hidden"]},wave:{wrapper:"translate-y-3/4",dots:["animate-sway","spinner-dot-animation"]},dots:{wrapper:"translate-y-2/4",dots:["animate-blink","spinner-dot-blink-animation"]},spinner:{},simple:{wrapper:"text-foreground h-5 w-5 animate-spin",circle1:"opacity-25",circle2:"opacity-75"}}},defaultVariants:{size:"md",color:"primary",labelColor:"foreground",variant:"default"},compoundVariants:[{variant:"gradient",color:"current",class:{circle1:"to-current"}},{variant:"gradient",color:"white",class:{circle1:"to-white"}},{variant:"gradient",color:"default",class:{circle1:"to-default"}},{variant:"gradient",color:"primary",class:{circle1:"to-primary"}},{variant:"gradient",color:"secondary",class:{circle1:"to-secondary"}},{variant:"gradient",color:"success",class:{circle1:"to-success"}},{variant:"gradient",color:"warning",class:{circle1:"to-warning"}},{variant:"gradient",color:"danger",class:{circle1:"to-danger"}},{variant:"wave",size:"sm",class:{wrapper:"w-5 h-5"}},{variant:"wave",size:"md",class:{wrapper:"w-8 h-8"}},{variant:"wave",size:"lg",class:{wrapper:"w-12 h-12"}},{variant:"dots",size:"sm",class:{wrapper:"w-5 h-5"}},{variant:"dots",size:"md",class:{wrapper:"w-8 h-8"}},{variant:"dots",size:"lg",class:{wrapper:"w-12 h-12"}},{variant:"simple",size:"sm",class:{wrapper:"w-5 h-5"}},{variant:"simple",size:"md",class:{wrapper:"w-8 h-8"}},{variant:"simple",size:"lg",class:{wrapper:"w-12 h-12"}},{variant:"simple",color:"current",class:{wrapper:"text-current"}},{variant:"simple",color:"white",class:{wrapper:"text-white"}},{variant:"simple",color:"default",class:{wrapper:"text-default"}},{variant:"simple",color:"primary",class:{wrapper:"text-primary"}},{variant:"simple",color:"secondary",class:{wrapper:"text-secondary"}},{variant:"simple",color:"success",class:{wrapper:"text-success"}},{variant:"simple",color:"warning",class:{wrapper:"text-warning"}},{variant:"simple",color:"danger",class:{wrapper:"text-danger"}}]}),bh=["outline-none","data-[focus-visible=true]:z-10","data-[focus-visible=true]:outline-2","data-[focus-visible=true]:outline-focus","data-[focus-visible=true]:outline-offset-2"],t2=["outline-none","group-data-[focus-visible=true]:z-10","group-data-[focus-visible=true]:ring-2","group-data-[focus-visible=true]:ring-focus","group-data-[focus-visible=true]:ring-offset-2","group-data-[focus-visible=true]:ring-offset-background"],_y={default:["[&+.border-medium.border-default]:ms-[calc(theme(borderWidth.medium)*-1)]"],primary:["[&+.border-medium.border-primary]:ms-[calc(theme(borderWidth.medium)*-1)]"],secondary:["[&+.border-medium.border-secondary]:ms-[calc(theme(borderWidth.medium)*-1)]"],success:["[&+.border-medium.border-success]:ms-[calc(theme(borderWidth.medium)*-1)]"],warning:["[&+.border-medium.border-warning]:ms-[calc(theme(borderWidth.medium)*-1)]"],danger:["[&+.border-medium.border-danger]:ms-[calc(theme(borderWidth.medium)*-1)]"]},X8=["font-inherit","text-[100%]","leading-[1.15]","m-0","p-0","overflow-visible","box-border","absolute","top-0","w-full","h-full","opacity-[0.0001]","z-[1]","cursor-pointer","disabled:cursor-default"],xX=Ha({slots:{base:"relative z-[100]"},variants:{disableAnimation:{false:{base:""},true:{base:["data-[placement=bottom-right]:bottom-0 data-[placement=bottom-right]:right-0 w-full px-2 sm:w-auto sm:px-0 data-[placement=bottom-right]:fixed data-[placement=bottom-right]:flex data-[placement=bottom-right]:flex-col","data-[placement=bottom-left]:bottom-0 data-[placement=bottom-left]:left-0 w-full px-2 sm:w-auto sm:px-0 data-[placement=bottom-left]:fixed data-[placement=bottom-left]:flex data-[placement=bottom-left]:flex-col","data-[placement=bottom-center]:bottom-0 data-[placement=bottom-center]:fixed w-full px-2 sm:w-auto sm:px-0 data-[placement=bottom-center]:flex data-[placement=bottom-center]:flex-col data-[placement=bottom-center]:left-1/2 data-[placement=bottom-center]:-translate-x-1/2","data-[placement=top-right]:top-0 data-[placement=top-right]:right-0 w-full px-2 sm:w-auto sm:px-0 data-[placement=top-right]:fixed data-[placement=top-right]:flex data-[placement=top-right]:flex-col","data-[placement=top-left]:top-0 data-[placement=top-left]:left-0 w-full px-2 sm:w-auto sm:px-0 data-[placement=top-left]:fixed data-[placement=top-left]:flex data-[placement=top-left]:flex-col","data-[placement=top-center]:top-0 data-[placement=top-center]:fixed w-full px-2 sm:w-auto sm:px-0 data-[placement=top-center]:flex data-[placement=top-center]:flex-col data-[placement=top-center]:left-1/2 data-[placement=top-center]:-translate-x-1/2"]}}},defaultVariants:{disableAnimation:!1}}),MM=Ha({slots:{base:["flex gap-x-4 items-center","group","cursor-pointer","relative","z-50","box-border","outline-none","p-3 sm:mx-1","my-1","w-full sm:w-[356px]","min-h-4"],wrapper:["flex flex-col gap-y-0"],title:["text-sm","me-4","font-medium","text-foreground"],description:["text-sm","me-4","text-default-500"],icon:["w-6 h-6 flex-none fill-current"],loadingIcon:["w-6 h-6 flex-none fill-current"],content:["flex flex-grow flex-row gap-x-4 items-center relative"],progressTrack:["absolute inset-0 pointer-events-none bg-transparent overflow-hidden"],progressIndicator:["h-full bg-default-400 opacity-20"],motionDiv:["fixed","px-4 sm:px-0","data-[placement=bottom-right]:bottom-0 data-[placement=bottom-right]:right-0 data-[placement=bottom-right]:mx-auto w-full sm:data-[placement=bottom-right]:w-max mb-1 sm:data-[placement=bottom-right]:mr-2","data-[placement=bottom-left]:bottom-0 data-[placement=bottom-left]:left-0 data-[placement=bottom-left]:mx-auto w-full sm:data-[placement=bottom-left]:w-max mb-1 sm:data-[placement=bottom-left]:ml-2","data-[placement=bottom-center]:bottom-0 data-[placement=bottom-center]:left-0 data-[placement=bottom-center]:right-0 w-full sm:data-[placement=bottom-center]:w-max sm:data-[placement=bottom-center]:mx-auto","data-[placement=top-right]:top-0 data-[placement=top-right]:right-0 data-[placement=top-right]:mx-auto w-full sm:data-[placement=top-right]:w-max sm:data-[placement=top-right]:mr-2","data-[placement=top-left]:top-0 data-[placement=top-left]:left-0 data-[placement=top-left]:mx-auto w-full sm:data-[placement=top-left]:w-max sm:data-[placement=top-left]:ml-2","data-[placement=top-center]:top-0 data-[placement=top-center]:left-0 data-[placement=top-center]:right-0 w-full sm:data-[placement=top-center]:w-max sm:data-[placement=top-center]:mx-auto"],closeButton:["opacity-0 pointer-events-none group-hover:pointer-events-auto p-0 group-hover:opacity-100 w-6 h-6 min-w-4 absolute -right-2 -top-2 items-center justify-center bg-transparent text-default-400 hover:text-default-600 border border-3 border-transparent","data-[hidden=true]:hidden"],closeIcon:["rounded-full w-full h-full p-0.5 border border-default-400 bg-default-100"]},variants:{size:{sm:{icon:"w-5 h-5",loadingIcon:"w-5 h-5"},md:{},lg:{}},variant:{flat:"bg-content1 border border-default-100",solid:Yr.solid.default,bordered:"bg-background border border-default-200"},color:{default:"",foreground:{progressIndicator:"h-full opacity-20 bg-foreground-400"},primary:{progressIndicator:"h-full opacity-20 bg-primary-400"},secondary:{progressIndicator:"h-full opacity-20 bg-secondary-400"},success:{progressIndicator:"h-full opacity-20 bg-success-400"},warning:{progressIndicator:"h-full opacity-20 bg-warning-400"},danger:{progressIndicator:"h-full opacity-20 bg-danger-400"}},radius:{none:{base:"rounded-none",progressTrack:"rounded-none"},sm:{base:"rounded-small",progressTrack:"rounded-small"},md:{base:"rounded-medium",progressTrack:"rounded-medium"},lg:{base:"rounded-large",progressTrack:"rounded-large"},full:{base:"rounded-full",closeButton:"-top-px -right-px",progressTrack:"rounded-full"}},disableAnimation:{true:{closeButton:"transition-none",base:"data-[animation=exiting]:opacity-0"},false:{closeButton:"transition-opacity ease-in duration-300",base:["data-[animation=exiting]:transform","data-[animation=exiting]:delay-100","data-[animation=exiting]:data-[placement=bottom-right]:translate-x-28","data-[animation=exiting]:data-[placement=bottom-left]:-translate-x-28","data-[animation=exiting]:data-[placement=bottom-center]:translate-y-28","data-[animation=exiting]:data-[placement=top-right]:translate-x-28","data-[animation=exiting]:data-[placement=top-left]:-translate-x-28","data-[animation=exiting]:data-[placement=top-center]:-translate-y-28","data-[animation=exiting]:opacity-0","data-[animation=exiting]:duration-200"]}},shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}}},defaultVariants:{size:"md",variant:"flat",radius:"md",shadow:"sm"},compoundVariants:[{variant:"flat",color:"foreground",class:{base:"bg-foreground text-background",closeButton:"text-foreground-400 hover:text-foreground-600",closeIcon:"border border-foreground-400 bg-foreground-100",title:"text-background-600",description:"text-background-500"}},{variant:"flat",color:"primary",class:{base:"bg-primary-50 text-primary-600 border-primary-100",closeButton:"text-primary-400 hover:text-primary-600",closeIcon:"border border-primary-400 bg-primary-100",title:"text-primary-600",description:"text-primary-500"}},{variant:"flat",color:"secondary",class:{base:"bg-secondary-50 text-secondary-600 border-secondary-100",closeButton:"text-secondary-400 hover:text-secondary-600",closeIcon:"border border-secondary-400 bg-secondary-100",title:"text-secondary-600",description:"text-secondary-500"}},{variant:"flat",color:"success",class:{base:"bg-success-50 text-success-600 border-success-100",closeButton:"text-success-400 hover:text-success-600",closeIcon:"border border-success-400 bg-success-100",title:"text-success-600",description:"text-success-500"}},{variant:"flat",color:"warning",class:{base:"bg-warning-50 text-warning-600 border-warning-100",closeButton:"text-warning-400 hover:text-warning-600",closeIcon:"border border-warning-400 bg-warning-100",title:"text-warning-600",description:"text-warning-500"}},{variant:"flat",color:"danger",class:{base:"bg-danger-50 text-danger-600 border-danger-100",closeButton:"text-danger-400 hover:text-danger-600",closeIcon:"border border-danger-400 bg-danger-100",title:"text-danger-600",description:"text-danger-500"}},{variant:"bordered",color:"foreground",class:{base:"bg-foreground border-foreground-400 text-background",closeButton:"text-foreground-400 hover:text-foreground-600",closeIcon:"border border-foreground-400 bg-foreground-100",title:"text-background-600",description:"text-background-500"}},{variant:"bordered",color:"primary",class:{base:"border-primary-400 text-primary-600",closeButton:"text-primary-400 hover:text-primary-600",closeIcon:"border border-primary-400 bg-primary-100",title:"text-primary-600",description:"text-primary-500"}},{variant:"bordered",color:"secondary",class:{base:"border-secondary-400 text-secondary-600",closeButton:"text-secondary-400 hover:text-secondary-600",closeIcon:"border border-secondary-400 bg-secondary-100",title:"text-secondary-600",description:"text-secondary-500"}},{variant:"bordered",color:"success",class:{base:"border-success-400 text-success-600",closeButton:"text-success-400 hover:text-success-600",closeIcon:"border border-success-400 bg-success-100",title:"text-success-600",description:"text-success-500"}},{variant:"bordered",color:"warning",class:{base:"border-warning-400 text-warning-600",closeButton:"text-warning-400 hover:text-warning-600",closeIcon:"border border-warning-400 bg-warning-100",title:"text-warning-600",description:"text-warning-500"}},{variant:"bordered",color:"danger",class:{base:"border-danger-400 text-danger-600",closeButton:"text-danger-400 hover:text-danger-600",closeIcon:"border border-danger-400 bg-danger-100",title:"text-danger-600",description:"text-danger-500"}},{variant:"solid",color:"foreground",class:{base:Yr.solid.foreground,closeButton:"text-foreground-400 hover:text-foreground-600",closeIcon:"border border-foreground-400 bg-foreground-100",title:"text-background",description:"text-background"}},{variant:"solid",color:"primary",class:{base:Yr.solid.primary,closeButton:"text-primary-400 hover:text-primary-600",closeIcon:"border border-primary-400 bg-primary-100",title:"text-primary-foreground",description:"text-primary-foreground"}},{variant:"solid",color:"secondary",class:{base:Yr.solid.secondary,closeButton:"text-secondary-400 hover:text-secondary-600",closeIcon:"border border-secondary-400 bg-secondary-100",title:"text-secondary-foreground",description:"text-secondary-foreground"}},{variant:"solid",color:"success",class:{base:Yr.solid.success,closeButton:"text-success-400 hover:text-success-600",closeIcon:"border border-success-400 bg-success-100",title:"text-success-foreground",description:"text-success-foreground"}},{variant:"solid",color:"warning",class:{base:Yr.solid.warning,closeButton:"text-warning-400 hover:text-warning-600",closeIcon:"border border-warning-400 bg-warning-100",title:"text-warning-foreground",description:"text-warning-foreground"}},{variant:"solid",color:"danger",class:{base:Yr.solid.danger,closeButton:"text-danger-400 hover:text-danger-600",closeIcon:"border border-danger-400 bg-danger-100",title:"text-danger-foreground",description:"text-danger-foreground"}}]}),Sw=Ha({slots:{base:["z-0","relative","bg-transparent","before:content-['']","before:hidden","before:z-[-1]","before:absolute","before:rotate-45","before:w-2.5","before:h-2.5","before:rounded-sm","data-[arrow=true]:before:block","data-[placement=top]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=top]:before:left-1/2","data-[placement=top]:before:-translate-x-1/2","data-[placement=top-start]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=top-start]:before:left-3","data-[placement=top-end]:before:-bottom-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=top-end]:before:right-3","data-[placement=bottom]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=bottom]:before:left-1/2","data-[placement=bottom]:before:-translate-x-1/2","data-[placement=bottom-start]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=bottom-start]:before:left-3","data-[placement=bottom-end]:before:-top-[calc(theme(spacing.5)/4_-_1.5px)]","data-[placement=bottom-end]:before:right-3","data-[placement=left]:before:-right-[calc(theme(spacing.5)/4_-_2px)]","data-[placement=left]:before:top-1/2","data-[placement=left]:before:-translate-y-1/2","data-[placement=left-start]:before:-right-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=left-start]:before:top-1/4","data-[placement=left-end]:before:-right-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=left-end]:before:bottom-1/4","data-[placement=right]:before:-left-[calc(theme(spacing.5)/4_-_2px)]","data-[placement=right]:before:top-1/2","data-[placement=right]:before:-translate-y-1/2","data-[placement=right-start]:before:-left-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=right-start]:before:top-1/4","data-[placement=right-end]:before:-left-[calc(theme(spacing.5)/4_-_3px)]","data-[placement=right-end]:before:bottom-1/4",...bh],content:["z-10","px-2.5","py-1","w-full","inline-flex","flex-col","items-center","justify-center","box-border","subpixel-antialiased","outline-none","box-border"],trigger:["z-10"],backdrop:["hidden"],arrow:[]},variants:{size:{sm:{content:"text-tiny"},md:{content:"text-small"},lg:{content:"text-medium"}},color:{default:{base:"before:bg-content1 before:shadow-small",content:"bg-content1"},foreground:{base:"before:bg-foreground",content:Yr.solid.foreground},primary:{base:"before:bg-primary",content:Yr.solid.primary},secondary:{base:"before:bg-secondary",content:Yr.solid.secondary},success:{base:"before:bg-success",content:Yr.solid.success},warning:{base:"before:bg-warning",content:Yr.solid.warning},danger:{base:"before:bg-danger",content:Yr.solid.danger}},radius:{none:{content:"rounded-none"},sm:{content:"rounded-small"},md:{content:"rounded-medium"},lg:{content:"rounded-large"},full:{content:"rounded-full"}},shadow:{none:{content:"shadow-none"},sm:{content:"shadow-small"},md:{content:"shadow-medium"},lg:{content:"shadow-large"}},backdrop:{transparent:{},opaque:{backdrop:"bg-overlay/50 backdrop-opacity-disabled"},blur:{backdrop:"backdrop-blur-sm backdrop-saturate-150 bg-overlay/30"}},triggerScaleOnOpen:{true:{trigger:["aria-expanded:scale-[0.97]","aria-expanded:opacity-70","subpixel-antialiased"]},false:{}},disableAnimation:{true:{base:"animate-none"}},isTriggerDisabled:{true:{trigger:"opacity-disabled pointer-events-none"},false:{}}},defaultVariants:{color:"default",radius:"lg",size:"md",shadow:"md",backdrop:"transparent",triggerScaleOnOpen:!0},compoundVariants:[{backdrop:["opaque","blur"],class:{backdrop:"block w-full h-full fixed inset-0 -z-30"}}]}),AM=Ha({slots:{base:"flex flex-col gap-2 w-full",label:"",labelWrapper:"flex justify-between",value:"",track:"z-0 relative bg-default-300/50 overflow-hidden rtl:rotate-180",indicator:"h-full"},variants:{color:{default:{indicator:"bg-default-400"},primary:{indicator:"bg-primary"},secondary:{indicator:"bg-secondary"},success:{indicator:"bg-success"},warning:{indicator:"bg-warning"},danger:{indicator:"bg-danger"}},size:{sm:{label:"text-small",value:"text-small",track:"h-1"},md:{label:"text-medium",value:"text-medium",track:"h-3"},lg:{label:"text-large",value:"text-large",track:"h-5"}},radius:{none:{track:"rounded-none",indicator:"rounded-none"},sm:{track:"rounded-small",indicator:"rounded-small"},md:{track:"rounded-medium",indicator:"rounded-medium"},lg:{track:"rounded-large",indicator:"rounded-large"},full:{track:"rounded-full",indicator:"rounded-full"}},isStriped:{true:{indicator:"bg-stripe-gradient-default bg-stripe-size"}},isIndeterminate:{true:{indicator:["absolute","w-full","origin-left","animate-indeterminate-bar"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:{},false:{indicator:"transition-transform !duration-500"}}},defaultVariants:{color:"primary",size:"md",radius:"full",isStriped:!1,isIndeterminate:!1,isDisabled:!1},compoundVariants:[{disableAnimation:!0,isIndeterminate:!1,class:{indicator:"!transition-none motion-reduce:transition-none"}},{color:"primary",isStriped:!0,class:{indicator:"bg-stripe-gradient-primary bg-stripe-size"}},{color:"secondary",isStriped:!0,class:{indicator:"bg-stripe-gradient-secondary bg-stripe-size"}},{color:"success",isStriped:!0,class:{indicator:"bg-stripe-gradient-success bg-stripe-size"}},{color:"warning",isStriped:!0,class:{indicator:"bg-stripe-gradient-warning bg-stripe-size"}},{color:"danger",isStriped:!0,class:{indicator:"bg-stripe-gradient-danger bg-stripe-size"}}]},{twMerge:!0}),kM=Ha({slots:{base:"flex flex-col justify-center gap-1 max-w-fit items-center",label:"",svgWrapper:"relative block",svg:"z-0 relative overflow-hidden",track:"h-full stroke-default-300/50",indicator:"h-full stroke-current",value:"absolute font-normal inset-0 flex items-center justify-center"},variants:{color:{default:{svg:"text-default-400"},primary:{svg:"text-primary"},secondary:{svg:"text-secondary"},success:{svg:"text-success"},warning:{svg:"text-warning"},danger:{svg:"text-danger"}},size:{sm:{svg:"w-8 h-8",label:"text-small",value:"text-[0.5rem]"},md:{svg:"w-10 h-10",label:"text-small",value:"text-[0.55rem]"},lg:{svg:"w-12 h-12",label:"text-medium",value:"text-[0.6rem]"}},isIndeterminate:{true:{svg:"animate-spinner-ease-spin"}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:{},false:{indicator:"transition-all !duration-500"}}},defaultVariants:{color:"primary",size:"md",isDisabled:!1},compoundVariants:[{disableAnimation:!0,isIndeterminate:!1,class:{svg:"!transition-none motion-reduce:transition-none"}}]}),vX=Ha({slots:{base:"group relative max-w-fit inline-flex items-center justify-start cursor-pointer tap-highlight-transparent p-2 -m-2 select-none",wrapper:["relative","inline-flex","items-center","justify-center","flex-shrink-0","overflow-hidden","border-solid","border-medium","box-border","border-default","rounded-full","group-data-[hover-unselected=true]:bg-default-100",...t2],hiddenInput:X8,labelWrapper:"flex flex-col ml-1",control:["z-10","w-2","h-2","opacity-0","scale-0","origin-center","rounded-full","group-data-[selected=true]:opacity-100","group-data-[selected=true]:scale-100"],label:"relative text-foreground select-none",description:"relative text-foreground-400"},variants:{color:{default:{control:"bg-default-500 text-default-foreground",wrapper:"group-data-[selected=true]:border-default-500"},primary:{control:"bg-primary text-primary-foreground",wrapper:"group-data-[selected=true]:border-primary"},secondary:{control:"bg-secondary text-secondary-foreground",wrapper:"group-data-[selected=true]:border-secondary"},success:{control:"bg-success text-success-foreground",wrapper:"group-data-[selected=true]:border-success"},warning:{control:"bg-warning text-warning-foreground",wrapper:"group-data-[selected=true]:border-warning"},danger:{control:"bg-danger text-danger-foreground",wrapper:"group-data-[selected=true]:border-danger"}},size:{sm:{wrapper:"w-4 h-4",control:"w-1.5 h-1.5",labelWrapper:"ml-1",label:"text-small",description:"text-tiny"},md:{wrapper:"w-5 h-5",control:"w-2 h-2",labelWrapper:"ms-2",label:"text-medium",description:"text-small"},lg:{wrapper:"w-6 h-6",control:"w-2.5 h-2.5",labelWrapper:"ms-2",label:"text-large",description:"text-medium"}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},isInvalid:{true:{control:"bg-danger text-danger-foreground",wrapper:"border-danger group-data-[selected=true]:border-danger",label:"text-danger",description:"text-danger-300"}},disableAnimation:{true:{},false:{wrapper:["group-data-[pressed=true]:scale-95","transition-transform-colors","motion-reduce:transition-none"],control:"transition-transform-opacity motion-reduce:transition-none",label:"transition-colors motion-reduce:transition-none",description:"transition-colors motion-reduce:transition-none"}}},defaultVariants:{color:"primary",size:"md",isDisabled:!1,isInvalid:!1}}),_X=Ha({slots:{base:"relative flex flex-col gap-2",label:"relative text-foreground-500",wrapper:"flex flex-col flex-wrap gap-2 data-[orientation=horizontal]:flex-row",description:"text-tiny text-foreground-400",errorMessage:"text-tiny text-danger"},variants:{isRequired:{true:{label:"after:content-['*'] after:text-danger after:ml-0.5"}},isInvalid:{true:{description:"text-danger"}},disableAnimation:{true:{},false:{description:"transition-colors !duration-150 motion-reduce:transition-none"}}},defaultVariants:{isInvalid:!1,isRequired:!1}}),RM=Ha({slots:{base:"group flex flex-col data-[hidden=true]:hidden",label:["absolute","z-10","pointer-events-none","origin-top-left","flex-shrink-0","rtl:origin-top-right","subpixel-antialiased","block","text-small","text-foreground-500"],mainWrapper:"h-full",inputWrapper:"relative w-full inline-flex tap-highlight-transparent flex-row items-center shadow-sm px-3 gap-3",innerWrapper:"inline-flex w-full items-center h-full box-border",input:["w-full font-normal bg-transparent !outline-none placeholder:text-foreground-500 focus-visible:outline-none","data-[has-start-content=true]:ps-1.5","data-[has-end-content=true]:pe-1.5","file:cursor-pointer file:bg-transparent file:border-0","autofill:bg-transparent bg-clip-text"],clearButton:["p-2","-m-2","z-10","absolute","end-3","start-auto","pointer-events-none","appearance-none","outline-none","select-none","opacity-0","hover:!opacity-100","cursor-pointer","active:!opacity-70","rounded-full",...bh],helperWrapper:"hidden group-data-[has-helper=true]:flex p-1 relative flex-col gap-1.5",description:"text-tiny text-foreground-400",errorMessage:"text-tiny text-danger"},variants:{variant:{flat:{inputWrapper:["bg-default-100","data-[hover=true]:bg-default-200","group-data-[focus=true]:bg-default-100"]},faded:{inputWrapper:["bg-default-100","border-medium","border-default-200","data-[hover=true]:border-default-400 focus-within:border-default-400"],value:"group-data-[has-value=true]:text-default-foreground"},bordered:{inputWrapper:["border-medium","border-default-200","data-[hover=true]:border-default-400","group-data-[focus=true]:border-default-foreground"]},underlined:{inputWrapper:["!px-1","!pb-0","!gap-0","relative","box-border","border-b-medium","shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","border-default-200","!rounded-none","hover:border-default-300","after:content-['']","after:w-0","after:origin-center","after:bg-default-foreground","after:absolute","after:left-1/2","after:-translate-x-1/2","after:-bottom-[2px]","after:h-[2px]","group-data-[focus=true]:after:w-full"],innerWrapper:"pb-1",label:"group-data-[filled-within=true]:text-foreground"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{label:"text-tiny",inputWrapper:"h-8 min-h-8 px-2 rounded-small",input:"text-small",clearButton:"text-medium"},md:{inputWrapper:"h-10 min-h-10 rounded-medium",input:"text-small",clearButton:"text-large"},lg:{label:"text-medium",inputWrapper:"h-12 min-h-12 rounded-large",input:"text-medium",clearButton:"text-large"}},radius:{none:{inputWrapper:"rounded-none"},sm:{inputWrapper:"rounded-small"},md:{inputWrapper:"rounded-medium"},lg:{inputWrapper:"rounded-large"},full:{inputWrapper:"rounded-full"}},labelPlacement:{outside:{mainWrapper:"flex flex-col"},"outside-left":{base:"flex-row items-center flex-nowrap data-[has-helper=true]:items-start",inputWrapper:"flex-1",mainWrapper:"flex flex-col",label:"relative text-foreground pe-2 ps-2 pointer-events-auto"},inside:{label:"cursor-text",inputWrapper:"flex-col items-start justify-center gap-0",innerWrapper:"group-data-[has-label=true]:items-end"}},fullWidth:{true:{base:"w-full"},false:{}},isClearable:{true:{input:"peer pe-6 input-search-cancel-button-none",clearButton:["peer-data-[filled=true]:pointer-events-auto","peer-data-[filled=true]:opacity-70 peer-data-[filled=true]:block","peer-data-[filled=true]:scale-100"]}},isDisabled:{true:{base:"opacity-disabled pointer-events-none",inputWrapper:"pointer-events-none",label:"pointer-events-none"}},isInvalid:{true:{label:"!text-danger",input:"!placeholder:text-danger !text-danger"}},isRequired:{true:{label:"after:content-['*'] after:text-danger after:ms-0.5"}},isMultiline:{true:{label:"relative",inputWrapper:"!h-auto",innerWrapper:"items-start group-data-[has-label=true]:items-start",input:"resize-none data-[hide-scroll=true]:scrollbar-hide",clearButton:"absolute top-2 right-2 rtl:right-auto rtl:left-2 z-10"}},disableAnimation:{true:{input:"transition-none",inputWrapper:"transition-none",label:"transition-none"},false:{inputWrapper:"transition-background motion-reduce:transition-none !duration-150",label:["will-change-auto","!duration-200","!ease-out","motion-reduce:transition-none","transition-[transform,color,left,opacity]"],clearButton:["scale-90","ease-out","duration-150","transition-[opacity,transform]","motion-reduce:transition-none","motion-reduce:scale-100"]}}},defaultVariants:{variant:"flat",color:"default",size:"md",fullWidth:!0,isDisabled:!1,isMultiline:!1},compoundVariants:[{variant:"flat",color:"default",class:{input:"group-data-[has-value=true]:text-default-foreground"}},{variant:"flat",color:"primary",class:{inputWrapper:["bg-primary-100","data-[hover=true]:bg-primary-50","text-primary","group-data-[focus=true]:bg-primary-50","placeholder:text-primary"],input:"placeholder:text-primary",label:"text-primary"}},{variant:"flat",color:"secondary",class:{inputWrapper:["bg-secondary-100","text-secondary","data-[hover=true]:bg-secondary-50","group-data-[focus=true]:bg-secondary-50","placeholder:text-secondary"],input:"placeholder:text-secondary",label:"text-secondary"}},{variant:"flat",color:"success",class:{inputWrapper:["bg-success-100","text-success-600","dark:text-success","placeholder:text-success-600","dark:placeholder:text-success","data-[hover=true]:bg-success-50","group-data-[focus=true]:bg-success-50"],input:"placeholder:text-success-600 dark:placeholder:text-success",label:"text-success-600 dark:text-success"}},{variant:"flat",color:"warning",class:{inputWrapper:["bg-warning-100","text-warning-600","dark:text-warning","placeholder:text-warning-600","dark:placeholder:text-warning","data-[hover=true]:bg-warning-50","group-data-[focus=true]:bg-warning-50"],input:"placeholder:text-warning-600 dark:placeholder:text-warning",label:"text-warning-600 dark:text-warning"}},{variant:"flat",color:"danger",class:{inputWrapper:["bg-danger-100","text-danger","dark:text-danger-500","placeholder:text-danger","dark:placeholder:text-danger-500","data-[hover=true]:bg-danger-50","group-data-[focus=true]:bg-danger-50"],input:"placeholder:text-danger dark:placeholder:text-danger-500",label:"text-danger dark:text-danger-500"}},{variant:"faded",color:"primary",class:{label:"text-primary",inputWrapper:"data-[hover=true]:border-primary focus-within:border-primary"}},{variant:"faded",color:"secondary",class:{label:"text-secondary",inputWrapper:"data-[hover=true]:border-secondary focus-within:border-secondary"}},{variant:"faded",color:"success",class:{label:"text-success",inputWrapper:"data-[hover=true]:border-success focus-within:border-success"}},{variant:"faded",color:"warning",class:{label:"text-warning",inputWrapper:"data-[hover=true]:border-warning focus-within:border-warning"}},{variant:"faded",color:"danger",class:{label:"text-danger",inputWrapper:"data-[hover=true]:border-danger focus-within:border-danger"}},{variant:"underlined",color:"default",class:{input:"group-data-[has-value=true]:text-foreground"}},{variant:"underlined",color:"primary",class:{inputWrapper:"after:bg-primary",label:"text-primary"}},{variant:"underlined",color:"secondary",class:{inputWrapper:"after:bg-secondary",label:"text-secondary"}},{variant:"underlined",color:"success",class:{inputWrapper:"after:bg-success",label:"text-success"}},{variant:"underlined",color:"warning",class:{inputWrapper:"after:bg-warning",label:"text-warning"}},{variant:"underlined",color:"danger",class:{inputWrapper:"after:bg-danger",label:"text-danger"}},{variant:"bordered",color:"primary",class:{inputWrapper:"group-data-[focus=true]:border-primary",label:"text-primary"}},{variant:"bordered",color:"secondary",class:{inputWrapper:"group-data-[focus=true]:border-secondary",label:"text-secondary"}},{variant:"bordered",color:"success",class:{inputWrapper:"group-data-[focus=true]:border-success",label:"text-success"}},{variant:"bordered",color:"warning",class:{inputWrapper:"group-data-[focus=true]:border-warning",label:"text-warning"}},{variant:"bordered",color:"danger",class:{inputWrapper:"group-data-[focus=true]:border-danger",label:"text-danger"}},{labelPlacement:"inside",color:"default",class:{label:"group-data-[filled-within=true]:text-default-600"}},{labelPlacement:"outside",color:"default",class:{label:"group-data-[filled-within=true]:text-foreground"}},{radius:"full",size:["sm"],class:{inputWrapper:"px-3"}},{radius:"full",size:"md",class:{inputWrapper:"px-4"}},{radius:"full",size:"lg",class:{inputWrapper:"px-5"}},{disableAnimation:!1,variant:["faded","bordered"],class:{inputWrapper:"transition-colors motion-reduce:transition-none"}},{disableAnimation:!1,variant:"underlined",class:{inputWrapper:"after:transition-width motion-reduce:after:transition-none"}},{variant:["flat","faded"],class:{inputWrapper:[...t2]}},{isInvalid:!0,variant:"flat",class:{inputWrapper:["!bg-danger-50","data-[hover=true]:!bg-danger-100","group-data-[focus=true]:!bg-danger-50"]}},{isInvalid:!0,variant:"bordered",class:{inputWrapper:"!border-danger group-data-[focus=true]:!border-danger"}},{isInvalid:!0,variant:"underlined",class:{inputWrapper:"after:!bg-danger"}},{labelPlacement:"inside",size:"sm",class:{inputWrapper:"h-12 py-1.5 px-3"}},{labelPlacement:"inside",size:"md",class:{inputWrapper:"h-14 py-2"}},{labelPlacement:"inside",size:"lg",class:{inputWrapper:"h-16 py-2.5 gap-0"}},{labelPlacement:"inside",size:"sm",variant:["bordered","faded"],class:{inputWrapper:"py-1"}},{labelPlacement:["inside","outside"],class:{label:["group-data-[filled-within=true]:pointer-events-auto"]}},{labelPlacement:"outside",isMultiline:!1,class:{base:"relative justify-end",label:["pb-0","z-20","top-1/2","-translate-y-1/2","group-data-[filled-within=true]:start-0"]}},{labelPlacement:["inside"],class:{label:["group-data-[filled-within=true]:scale-85"]}},{labelPlacement:["inside"],variant:"flat",class:{innerWrapper:"pb-0.5"}},{variant:"underlined",size:"sm",class:{innerWrapper:"pb-1"}},{variant:"underlined",size:["md","lg"],class:{innerWrapper:"pb-1.5"}},{labelPlacement:"inside",size:["sm","md"],class:{label:"text-small"}},{labelPlacement:"inside",isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px)]"]}},{labelPlacement:"inside",isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px)]"]}},{labelPlacement:"inside",isMultiline:!1,size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px)]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_5px)]"]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_3.5px)]"]}},{labelPlacement:"inside",variant:"underlined",size:"lg",isMultiline:!1,class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_4px)]"]}},{labelPlacement:"outside",size:"sm",isMultiline:!1,class:{label:["start-2","text-tiny","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.tiny)/2_+_16px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_8px)]"}},{labelPlacement:"outside",size:"md",isMultiline:!1,class:{label:["start-3","end-auto","text-small","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_20px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_10px)]"}},{labelPlacement:"outside",size:"lg",isMultiline:!1,class:{label:["start-3","end-auto","text-medium","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_24px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_12px)]"}},{labelPlacement:"outside-left",size:"sm",class:{label:"group-data-[has-helper=true]:pt-2"}},{labelPlacement:"outside-left",size:"md",class:{label:"group-data-[has-helper=true]:pt-3"}},{labelPlacement:"outside-left",size:"lg",class:{label:"group-data-[has-helper=true]:pt-4"}},{labelPlacement:["outside","outside-left"],isMultiline:!0,class:{inputWrapper:"py-2"}},{labelPlacement:"outside",isMultiline:!0,class:{label:"pb-1.5"}},{labelPlacement:"inside",isMultiline:!0,class:{label:"pb-0.5",input:"pt-0"}},{isMultiline:!0,disableAnimation:!1,class:{input:"transition-height !duration-100 motion-reduce:transition-none"}},{labelPlacement:["inside","outside"],class:{label:["pe-2","max-w-full","text-ellipsis","overflow-hidden"]}},{isMultiline:!0,radius:"full",class:{inputWrapper:"data-[has-multiple-rows=true]:rounded-large"}},{isClearable:!0,isMultiline:!0,class:{clearButton:["group-data-[has-value=true]:opacity-70 group-data-[has-value=true]:block","group-data-[has-value=true]:scale-100","group-data-[has-value=true]:pointer-events-auto"]}}]}),bX=Ha({slots:{base:"w-full relative flex flex-col gap-1 p-1 overflow-clip",list:"w-full flex flex-col gap-0.5 outline-none",emptyContent:["h-10","px-2","py-1.5","w-full","h-full","text-foreground-400","text-start"]}}),IM=Ha({slots:{base:["flex","group","gap-2","items-center","justify-between","relative","px-2","py-1.5","w-full","h-full","box-border","rounded-small","subpixel-antialiased","outline-none","cursor-pointer","tap-highlight-transparent",...bh,"data-[focus-visible=true]:dark:ring-offset-background-content1"],wrapper:"w-full flex flex-col items-start justify-center",title:"flex-1 text-small font-normal",description:["w-full","text-tiny","text-foreground-500","group-hover:text-current"],selectedIcon:["text-inherit","w-3","h-3","flex-shrink-0"],shortcut:["px-1","py-0.5","rounded","font-sans","text-foreground-500","text-tiny","border-small","border-default-300","group-hover:border-current"]},variants:{variant:{solid:{base:""},bordered:{base:"border-medium border-transparent bg-transparent"},light:{base:"bg-transparent"},faded:{base:["border-small border-transparent hover:border-default data-[hover=true]:bg-default-100","data-[selectable=true]:focus:border-default data-[selectable=true]:focus:bg-default-100"]},flat:{base:""},shadow:{base:"data-[hover=true]:shadow-lg"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},showDivider:{true:{base:["mb-1.5","after:content-['']","after:absolute","after:-bottom-1","after:left-0","after:right-0","after:h-divider","after:bg-divider"]},false:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{},false:{base:"data-[hover=true]:transition-colors"}},hasTitleTextChild:{true:{title:"truncate"}},hasDescriptionTextChild:{true:{description:"truncate"}}},defaultVariants:{variant:"solid",color:"default",showDivider:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:["data-[hover=true]:bg-default","data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:bg-default","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"solid",color:"primary",class:{base:["data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground","data-[selectable=true]:focus:bg-primary data-[selectable=true]:focus:text-primary-foreground"]}},{variant:"solid",color:"secondary",class:{base:["data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground","data-[selectable=true]:focus:bg-secondary data-[selectable=true]:focus:text-secondary-foreground"]}},{variant:"solid",color:"success",class:{base:["data-[hover=true]:bg-success data-[hover=true]:text-success-foreground","data-[selectable=true]:focus:bg-success data-[selectable=true]:focus:text-success-foreground"]}},{variant:"solid",color:"warning",class:{base:["data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground","data-[selectable=true]:focus:bg-warning data-[selectable=true]:focus:text-warning-foreground"]}},{variant:"solid",color:"danger",class:{base:["data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground","data-[selectable=true]:focus:bg-danger data-[selectable=true]:focus:text-danger-foreground"]}},{variant:"shadow",color:"default",class:{base:["data-[hover=true]:shadow-default/50 data-[hover=true]:bg-default data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:shadow-default/50 data-[selectable=true]:focus:bg-default data-[selectable=true]:focus:text-default-foreground"]}},{variant:"shadow",color:"primary",class:{base:["data-[hover=true]:shadow-primary/30 data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground","data-[selectable=true]:focus:shadow-primary/30 data-[selectable=true]:focus:bg-primary data-[selectable=true]:focus:text-primary-foreground"]}},{variant:"shadow",color:"secondary",class:{base:["data-[hover=true]:shadow-secondary/30 data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground","data-[selectable=true]:focus:shadow-secondary/30 data-[selectable=true]:focus:bg-secondary data-[selectable=true]:focus:text-secondary-foreground"]}},{variant:"shadow",color:"success",class:{base:["data-[hover=true]:shadow-success/30 data-[hover=true]:bg-success data-[hover=true]:text-success-foreground","data-[selectable=true]:focus:shadow-success/30 data-[selectable=true]:focus:bg-success data-[selectable=true]:focus:text-success-foreground"]}},{variant:"shadow",color:"warning",class:{base:["data-[hover=true]:shadow-warning/30 data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground","data-[selectable=true]:focus:shadow-warning/30 data-[selectable=true]:focus:bg-warning data-[selectable=true]:focus:text-warning-foreground"]}},{variant:"shadow",color:"danger",class:{base:["data-[hover=true]:shadow-danger/30 data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground","data-[selectable=true]:focus:shadow-danger/30 data-[selectable=true]:focus:bg-danger data-[selectable=true]:focus:text-danger-foreground"]}},{variant:"bordered",color:"default",class:{base:["data-[hover=true]:border-default","data-[selectable=true]:focus:border-default"]}},{variant:"bordered",color:"primary",class:{base:["data-[hover=true]:border-primary data-[hover=true]:text-primary","data-[selectable=true]:focus:border-primary data-[selectable=true]:focus:text-primary"]}},{variant:"bordered",color:"secondary",class:{base:["data-[hover=true]:border-secondary data-[hover=true]:text-secondary","data-[selectable=true]:focus:border-secondary data-[selectable=true]:focus:text-secondary"]}},{variant:"bordered",color:"success",class:{base:["data-[hover=true]:border-success data-[hover=true]:text-success","data-[selectable=true]:focus:border-success data-[selectable=true]:focus:text-success"]}},{variant:"bordered",color:"warning",class:{base:["data-[hover=true]:border-warning data-[hover=true]:text-warning","data-[selectable=true]:focus:border-warning data-[selectable=true]:focus:text-warning"]}},{variant:"bordered",color:"danger",class:{base:["data-[hover=true]:border-danger data-[hover=true]:text-danger","data-[selectable=true]:focus:border-danger data-[selectable=true]:focus:text-danger"]}},{variant:"flat",color:"default",class:{base:["data-[hover=true]:bg-default/40","data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:bg-default/40","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"flat",color:"primary",class:{base:["data-[hover=true]:bg-primary/20 data-[hover=true]:text-primary","data-[selectable=true]:focus:bg-primary/20 data-[selectable=true]:focus:text-primary"]}},{variant:"flat",color:"secondary",class:{base:["data-[hover=true]:bg-secondary/20 data-[hover=true]:text-secondary","data-[selectable=true]:focus:bg-secondary/20 data-[selectable=true]:focus:text-secondary"]}},{variant:"flat",color:"success",class:{base:["data-[hover=true]:bg-success/20 data-[hover=true]:text-success","data-[selectable=true]:focus:bg-success/20 data-[selectable=true]:focus:text-success"]}},{variant:"flat",color:"warning",class:{base:["data-[hover=true]:bg-warning/20 data-[hover=true]:text-warning","data-[selectable=true]:focus:bg-warning/20 data-[selectable=true]:focus:text-warning"]}},{variant:"flat",color:"danger",class:{base:["data-[hover=true]:bg-danger/20 data-[hover=true]:text-danger","data-[selectable=true]:focus:bg-danger/20 data-[selectable=true]:focus:text-danger"]}},{variant:"faded",color:"default",class:{base:["data-[hover=true]:text-default-foreground","data-[selectable=true]:focus:text-default-foreground"]}},{variant:"faded",color:"primary",class:{base:["data-[hover=true]:text-primary","data-[selectable=true]:focus:text-primary"]}},{variant:"faded",color:"secondary",class:{base:["data-[hover=true]:text-secondary","data-[selectable=true]:focus:text-secondary"]}},{variant:"faded",color:"success",class:{base:["data-[hover=true]:text-success","data-[selectable=true]:focus:text-success"]}},{variant:"faded",color:"warning",class:{base:["data-[hover=true]:text-warning","data-[selectable=true]:focus:text-warning"]}},{variant:"faded",color:"danger",class:{base:["data-[hover=true]:text-danger","data-[selectable=true]:focus:text-danger"]}},{variant:"light",color:"default",class:{base:["data-[hover=true]:text-default-500","data-[selectable=true]:focus:text-default-500"]}},{variant:"light",color:"primary",class:{base:["data-[hover=true]:text-primary","data-[selectable=true]:focus:text-primary"]}},{variant:"light",color:"secondary",class:{base:["data-[hover=true]:text-secondary","data-[selectable=true]:focus:text-secondary"]}},{variant:"light",color:"success",class:{base:["data-[hover=true]:text-success","data-[selectable=true]:focus:text-success"]}},{variant:"light",color:"warning",class:{base:["data-[hover=true]:text-warning","data-[selectable=true]:focus:text-warning"]}},{variant:"light",color:"danger",class:{base:["data-[hover=true]:text-danger","data-[selectable=true]:focus:text-danger"]}}]}),wX=Ha({slots:{base:"relative mb-2",heading:"pl-1 text-tiny text-foreground-500",group:"data-[has-title=true]:pt-1",divider:"mt-2"}}),zM=Ha({slots:{wrapper:["flex","w-screen","h-[100dvh]","fixed","inset-0","z-50","overflow-x-auto","justify-center","h-[--visual-viewport-height]"],base:["flex","flex-col","relative","bg-white","z-50","w-full","box-border","bg-content1","outline-none","mx-1","my-1","sm:mx-6","sm:my-16"],backdrop:"z-50",header:"flex py-4 px-6 flex-initial text-large font-semibold",body:"flex flex-1 flex-col gap-3 px-6 py-2",footer:"flex flex-row gap-2 px-6 py-4 justify-end",closeButton:["absolute","appearance-none","outline-none","select-none","top-1","end-1","p-2","text-foreground-500","rounded-full","hover:bg-default-100","active:bg-default-200","tap-highlight-transparent",...bh]},variants:{size:{xs:{base:"max-w-xs"},sm:{base:"max-w-sm"},md:{base:"max-w-md"},lg:{base:"max-w-lg"},xl:{base:"max-w-xl"},"2xl":{base:"max-w-2xl"},"3xl":{base:"max-w-3xl"},"4xl":{base:"max-w-4xl"},"5xl":{base:"max-w-5xl"},full:{base:"my-0 mx-0 sm:mx-0 sm:my-0 max-w-full h-[100dvh] min-h-[100dvh] !rounded-none"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"}},placement:{auto:{wrapper:"items-end sm:items-center"},center:{wrapper:"items-center sm:items-center"},top:{wrapper:"items-start sm:items-start"},"top-center":{wrapper:"items-start sm:items-center"},bottom:{wrapper:"items-end sm:items-end"},"bottom-center":{wrapper:"items-end sm:items-center"}},shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},backdrop:{transparent:{backdrop:"hidden"},opaque:{backdrop:"bg-overlay/50 backdrop-opacity-disabled"},blur:{backdrop:"backdrop-blur-md backdrop-saturate-150 bg-overlay/30"}},scrollBehavior:{normal:{base:"overflow-y-hidden"},inside:{base:"max-h-[calc(100%_-_8rem)]",body:"overflow-y-auto"},outside:{wrapper:"items-start sm:items-start overflow-y-auto",base:"my-16"}},disableAnimation:{false:{wrapper:["[--scale-enter:100%]","[--scale-exit:100%]","[--slide-enter:0px]","[--slide-exit:80px]","sm:[--scale-enter:100%]","sm:[--scale-exit:103%]","sm:[--slide-enter:0px]","sm:[--slide-exit:0px]"]}}},defaultVariants:{size:"md",radius:"lg",shadow:"sm",placement:"auto",backdrop:"opaque",scrollBehavior:"normal"},compoundVariants:[{backdrop:["opaque","blur"],class:{backdrop:"w-screen h-screen fixed inset-0"}}]}),LM=Ha({slots:{base:"group flex flex-col data-[hidden=true]:hidden",label:["absolute","z-10","pointer-events-none","origin-top-left","flex-shrink-0","rtl:origin-top-right","subpixel-antialiased","block","text-small","text-foreground-500"],mainWrapper:"h-full",inputWrapper:"relative w-full inline-flex tap-highlight-transparent flex-row items-center shadow-sm px-3 gap-3",innerWrapper:"inline-flex w-full items-center h-full box-border",input:["w-full font-normal bg-transparent !outline-none placeholder:text-foreground-500 focus-visible:outline-none","data-[has-start-content=true]:ps-1.5","data-[has-end-content=true]:pe-1.5","autofill:bg-transparent bg-clip-text"],clearButton:["p-2","-m-2","z-10","end-3","start-auto","pointer-events-none","appearance-none","outline-none","select-none","opacity-0","hover:!opacity-100","cursor-pointer","active:!opacity-70","rounded-full",...bh],stepperButton:["bg-transparent","flex","justify-center","items-center","before:absolute","before:w-8","before:h-8","before:rounded-full","after:shadow-small","after:bg-background","data-[focused=true]:z-10","min-w-5","w-5","h-5","overflow-visible","transition-opacity","data-[hover=true]:opacity-70","data-[pressed=true]:opacity-disabled"],stepperWrapper:["flex","flex-col","ps-1","h-full","justify-center"],helperWrapper:"hidden group-data-[has-helper=true]:flex py-2 relative flex-col gap-1.5",description:"text-tiny text-foreground-400",errorMessage:"text-tiny text-danger"},variants:{variant:{flat:{inputWrapper:["bg-default-100","data-[hover=true]:bg-default-200","group-data-[focus=true]:bg-default-100"]},faded:{inputWrapper:["bg-default-100","border-medium","border-default-200","data-[hover=true]:border-default-400 focus-within:border-default-400"],value:"group-data-[has-value=true]:text-default-foreground"},bordered:{inputWrapper:["border-medium","border-default-200","data-[hover=true]:border-default-400","group-data-[focus=true]:border-default-foreground"]},underlined:{inputWrapper:["!px-1","!pb-0","!gap-0","relative","box-border","border-b-medium","shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","border-default-200","!rounded-none","hover:border-default-300","after:content-['']","after:w-0","after:origin-center","after:bg-default-foreground","after:absolute","after:left-1/2","after:-translate-x-1/2","after:-bottom-[2px]","after:h-[2px]","group-data-[focus=true]:after:w-full"],innerWrapper:"pb-1",label:"group-data-[filled-within=true]:text-foreground"}},color:{default:{},primary:{stepperButton:"text-primary"},secondary:{stepperButton:"text-secondary"},success:{stepperButton:"text-success"},warning:{stepperButton:"text-warning"},danger:{stepperButton:"text-danger"}},size:{sm:{label:"text-tiny",inputWrapper:"h-8 min-h-8 px-2 rounded-small",input:"text-small",clearButton:"text-medium"},md:{inputWrapper:"h-10 min-h-10 rounded-medium",input:"text-small",clearButton:"text-large"},lg:{label:"text-medium",inputWrapper:"h-12 min-h-12 rounded-large",input:"text-medium",clearButton:"text-large"}},radius:{none:{inputWrapper:"rounded-none"},sm:{inputWrapper:"rounded-small"},md:{inputWrapper:"rounded-medium"},lg:{inputWrapper:"rounded-large"},full:{inputWrapper:"rounded-full"}},labelPlacement:{outside:{mainWrapper:"flex flex-col",stepperButton:"min-w-3 w-3 h-3"},"outside-left":{base:"flex-row items-center flex-nowrap data-[has-helper=true]:items-start",inputWrapper:"flex-1",mainWrapper:"flex flex-col",label:"relative text-foreground pe-2 ps-2 pointer-events-auto",stepperButton:"min-w-3 w-3 h-3"},inside:{label:"cursor-text",inputWrapper:"flex-col items-start justify-center gap-0",innerWrapper:"group-data-[has-label=true]:items-end"}},fullWidth:{true:{base:"w-full"},false:{}},isClearable:{true:{input:"peer pe-6 input-search-cancel-button-none",clearButton:["peer-data-[filled=true]:pointer-events-auto","peer-data-[filled=true]:opacity-70 peer-data-[filled=true]:block","peer-data-[filled=true]:scale-100"]}},isDisabled:{true:{base:"opacity-disabled pointer-events-none",inputWrapper:"pointer-events-none",label:"pointer-events-none"}},isInvalid:{true:{label:"!text-danger",input:"!placeholder:text-danger !text-danger"}},isRequired:{true:{label:"after:content-['*'] after:text-danger after:ms-0.5"}},disableAnimation:{true:{input:"transition-none",inputWrapper:"transition-none",label:"transition-none"},false:{inputWrapper:"transition-background motion-reduce:transition-none !duration-150",label:["will-change-auto","!duration-200","!ease-out","motion-reduce:transition-none","transition-[transform,color,left,opacity]"],clearButton:["scale-90","ease-out","duration-150","transition-[opacity,transform]","motion-reduce:transition-none","motion-reduce:scale-100"]}}},defaultVariants:{variant:"flat",color:"default",size:"md",fullWidth:!0,labelPlacement:"inside",isDisabled:!1},compoundVariants:[{variant:"flat",color:"default",class:{input:"group-data-[has-value=true]:text-default-foreground"}},{variant:"flat",color:"primary",class:{inputWrapper:["bg-primary-100","data-[hover=true]:bg-primary-50","text-primary","group-data-[focus=true]:bg-primary-50","placeholder:text-primary"],input:"placeholder:text-primary",label:"text-primary"}},{variant:"flat",color:"secondary",class:{inputWrapper:["bg-secondary-100","text-secondary","data-[hover=true]:bg-secondary-50","group-data-[focus=true]:bg-secondary-50","placeholder:text-secondary"],input:"placeholder:text-secondary",label:"text-secondary"}},{variant:"flat",color:"success",class:{inputWrapper:["bg-success-100","text-success-600","dark:text-success","placeholder:text-success-600","dark:placeholder:text-success","data-[hover=true]:bg-success-50","group-data-[focus=true]:bg-success-50"],input:"placeholder:text-success-600 dark:placeholder:text-success",label:"text-success-600 dark:text-success"}},{variant:"flat",color:"warning",class:{inputWrapper:["bg-warning-100","text-warning-600","dark:text-warning","placeholder:text-warning-600","dark:placeholder:text-warning","data-[hover=true]:bg-warning-50","group-data-[focus=true]:bg-warning-50"],input:"placeholder:text-warning-600 dark:placeholder:text-warning",label:"text-warning-600 dark:text-warning"}},{variant:"flat",color:"danger",class:{inputWrapper:["bg-danger-100","text-danger","dark:text-danger-500","placeholder:text-danger","dark:placeholder:text-danger-500","data-[hover=true]:bg-danger-50","group-data-[focus=true]:bg-danger-50"],input:"placeholder:text-danger dark:placeholder:text-danger-500",label:"text-danger dark:text-danger-500"}},{variant:"faded",color:"primary",class:{label:"text-primary",inputWrapper:"data-[hover=true]:border-primary focus-within:border-primary"}},{variant:"faded",color:"secondary",class:{label:"text-secondary",inputWrapper:"data-[hover=true]:border-secondary focus-within:border-secondary"}},{variant:"faded",color:"success",class:{label:"text-success",inputWrapper:"data-[hover=true]:border-success focus-within:border-success"}},{variant:"faded",color:"warning",class:{label:"text-warning",inputWrapper:"data-[hover=true]:border-warning focus-within:border-warning"}},{variant:"faded",color:"danger",class:{label:"text-danger",inputWrapper:"data-[hover=true]:border-danger focus-within:border-danger"}},{variant:"underlined",color:"default",class:{input:"group-data-[has-value=true]:text-foreground"}},{variant:"underlined",color:"primary",class:{inputWrapper:"after:bg-primary",label:"text-primary"}},{variant:"underlined",color:"secondary",class:{inputWrapper:"after:bg-secondary",label:"text-secondary"}},{variant:"underlined",color:"success",class:{inputWrapper:"after:bg-success",label:"text-success"}},{variant:"underlined",color:"warning",class:{inputWrapper:"after:bg-warning",label:"text-warning"}},{variant:"underlined",color:"danger",class:{inputWrapper:"after:bg-danger",label:"text-danger"}},{variant:"bordered",color:"primary",class:{inputWrapper:"group-data-[focus=true]:border-primary",label:"text-primary"}},{variant:"bordered",color:"secondary",class:{inputWrapper:"group-data-[focus=true]:border-secondary",label:"text-secondary"}},{variant:"bordered",color:"success",class:{inputWrapper:"group-data-[focus=true]:border-success",label:"text-success"}},{variant:"bordered",color:"warning",class:{inputWrapper:"group-data-[focus=true]:border-warning",label:"text-warning"}},{variant:"bordered",color:"danger",class:{inputWrapper:"group-data-[focus=true]:border-danger",label:"text-danger"}},{labelPlacement:"inside",color:"default",class:{label:"group-data-[filled-within=true]:text-default-600"}},{labelPlacement:"outside",color:"default",class:{label:"group-data-[filled-within=true]:text-foreground"}},{radius:"full",size:["sm"],class:{inputWrapper:"px-3"}},{radius:"full",size:"md",class:{inputWrapper:"px-4"}},{radius:"full",size:"lg",class:{inputWrapper:"px-5"}},{disableAnimation:!1,variant:["faded","bordered"],class:{inputWrapper:"transition-colors motion-reduce:transition-none"}},{disableAnimation:!1,variant:"underlined",class:{inputWrapper:"after:transition-width motion-reduce:after:transition-none"}},{variant:["flat","faded"],class:{inputWrapper:[...t2]}},{isInvalid:!0,variant:"flat",class:{inputWrapper:["!bg-danger-50","data-[hover=true]:!bg-danger-100","group-data-[focus=true]:!bg-danger-50"]}},{isInvalid:!0,variant:"bordered",class:{inputWrapper:"!border-danger group-data-[focus=true]:!border-danger"}},{isInvalid:!0,variant:"underlined",class:{inputWrapper:"after:!bg-danger"}},{labelPlacement:"inside",size:"sm",class:{inputWrapper:"h-12 py-1.5 px-3"}},{labelPlacement:"inside",size:"md",class:{inputWrapper:"h-14 py-2"}},{labelPlacement:"inside",size:"lg",class:{inputWrapper:"h-16 py-2.5 gap-0"}},{labelPlacement:"inside",size:"sm",variant:["bordered","faded"],class:{inputWrapper:"py-1"}},{labelPlacement:["inside","outside"],class:{label:["group-data-[filled-within=true]:pointer-events-auto"]}},{labelPlacement:"outside",class:{base:"relative justify-end",label:["pb-0","z-20","top-1/2","-translate-y-1/2","group-data-[filled-within=true]:start-0"]}},{labelPlacement:["inside"],class:{label:["group-data-[filled-within=true]:scale-85"]}},{labelPlacement:"inside",size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px)]"]}},{labelPlacement:"inside",size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px)]"]}},{labelPlacement:"inside",size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px)]"]}},{labelPlacement:["inside"],variant:"flat",class:{innerWrapper:"pb-0.5"}},{variant:"underlined",size:"sm",class:{innerWrapper:"pb-1"}},{variant:"underlined",size:["md","lg"],class:{innerWrapper:"pb-1.5"}},{labelPlacement:"inside",size:["sm","md"],class:{label:"text-small",stepperButton:"before:h-6"}},{labelPlacement:"inside",variant:["faded","bordered"],size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:["faded","bordered"],size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px_-_theme(borderWidth.medium))]"]}},{labelPlacement:"inside",variant:"underlined",size:"sm",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_5px)]"]}},{labelPlacement:"inside",variant:"underlined",size:"md",class:{label:["group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_3.5px)]"]}},{labelPlacement:"inside",variant:"underlined",size:"lg",class:{label:["text-medium","group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_4px)]"]}},{labelPlacement:"outside",size:"sm",class:{label:["start-2","text-tiny","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.tiny)/2_+_16px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_8px)]",stepperButton:"before:h-4"}},{labelPlacement:"outside",size:"md",class:{label:["start-3","end-auto","text-small","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_20px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_10px)]",stepperButton:"before:h-4"}},{labelPlacement:"outside",size:"lg",class:{label:["start-3","end-auto","text-medium","group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_24px)]"],base:"data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_12px)]",stepperButton:"min-4 w-4 h-4 before:h-6"}},{labelPlacement:"outside-left",size:"sm",class:{label:"group-data-[has-helper=true]:pt-2",stepperButton:"before:h-4"}},{labelPlacement:"outside-left",size:"md",class:{label:"group-data-[has-helper=true]:pt-3",stepperButton:"before:h-4"}},{labelPlacement:"outside-left",size:"lg",class:{label:"group-data-[has-helper=true]:pt-4",stepperButton:"min-4 w-4 h-4 before:h-6"}},{labelPlacement:["inside","outside"],class:{label:["pe-2","max-w-full","text-ellipsis","overflow-hidden"]}}]}),SX=Ha({base:"shrink-0 bg-divider border-none",variants:{orientation:{horizontal:"w-full h-divider",vertical:"h-full w-divider"}},defaultVariants:{orientation:"horizontal"}}),TX=Ha({slots:{base:["absolute","m-0","sm:m-0","overflow-y-auto"]},variants:{size:{xs:{base:"max-w-xs max-h-[20rem]"},sm:{base:"max-w-sm max-h-[24rem]"},md:{base:"max-w-md max-h-[28rem]"},lg:{base:"max-w-lg max-h-[32rem]"},xl:{base:"max-w-xl max-h-[36rem]"},"2xl":{base:"max-w-2xl max-h-[42rem]"},"3xl":{base:"max-w-3xl max-h-[48rem]"},"4xl":{base:"max-w-4xl max-h-[56rem]"},"5xl":{base:"max-w-5xl max-h-[64rem]"},full:{base:"max-w-full max-h-full h-[100dvh] !rounded-none"}},placement:{top:{base:"inset-x-0 top-0 max-w-[none] rounded-t-none"},right:{base:"inset-y-0 right-0 max-h-[none] rounded-r-none"},bottom:{base:"inset-x-0 bottom-0 max-w-[none] rounded-b-none"},left:{base:"inset-y-0 left-0 max-h-[none] rounded-l-none"}}}}),EX=Ha({base:["w-full","p-1","min-w-[200px]"]});Ha({slots:{base:["flex","group","gap-2","items-center","justify-between","relative","px-2","py-1.5","w-full","h-full","box-border","rounded-small","outline-none","cursor-pointer","tap-highlight-transparent","data-[pressed=true]:opacity-70",...bh,"data-[focus-visible=true]:dark:ring-offset-background-content1"],wrapper:"w-full flex flex-col items-start justify-center",title:"flex-1 text-small font-normal truncate",description:["w-full","text-tiny","text-foreground-500","group-hover:text-current"],selectedIcon:["text-inherit","w-3","h-3","flex-shrink-0"],shortcut:["px-1","py-0.5","rounded","font-sans","text-foreground-500","text-tiny","border-small","border-default-300","group-hover:border-current"]},variants:{variant:{solid:{base:""},bordered:{base:"border-medium border-transparent bg-transparent"},light:{base:"bg-transparent"},faded:{base:"border-small border-transparent hover:border-default data-[hover=true]:bg-default-100"},flat:{base:""},shadow:{base:"data-[hover=true]:shadow-lg"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{},false:{}}},defaultVariants:{variant:"solid",color:"default"},compoundVariants:[{variant:"solid",color:"default",class:{base:"data-[hover=true]:bg-default data-[hover=true]:text-default-foreground"}},{variant:"solid",color:"primary",class:{base:"data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground"}},{variant:"solid",color:"secondary",class:{base:"data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground"}},{variant:"solid",color:"success",class:{base:"data-[hover=true]:bg-success data-[hover=true]:text-success-foreground"}},{variant:"solid",color:"warning",class:{base:"data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground"}},{variant:"solid",color:"danger",class:{base:"data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground"}},{variant:"shadow",color:"default",class:{base:"data-[hover=true]:shadow-default/50 data-[hover=true]:bg-default data-[hover=true]:text-default-foreground"}},{variant:"shadow",color:"primary",class:{base:"data-[hover=true]:shadow-primary/30 data-[hover=true]:bg-primary data-[hover=true]:text-primary-foreground"}},{variant:"shadow",color:"secondary",class:{base:"data-[hover=true]:shadow-secondary/30 data-[hover=true]:bg-secondary data-[hover=true]:text-secondary-foreground"}},{variant:"shadow",color:"success",class:{base:"data-[hover=true]:shadow-success/30 data-[hover=true]:bg-success data-[hover=true]:text-success-foreground"}},{variant:"shadow",color:"warning",class:{base:"data-[hover=true]:shadow-warning/30 data-[hover=true]:bg-warning data-[hover=true]:text-warning-foreground"}},{variant:"shadow",color:"danger",class:{base:"data-[hover=true]:shadow-danger/30 data-[hover=true]:bg-danger data-[hover=true]:text-danger-foreground"}},{variant:"bordered",color:"default",class:{base:"data-[hover=true]:border-default"}},{variant:"bordered",color:"primary",class:{base:"data-[hover=true]:border-primary data-[hover=true]:text-primary"}},{variant:"bordered",color:"secondary",class:{base:"data-[hover=true]:border-secondary data-[hover=true]:text-secondary"}},{variant:"bordered",color:"success",class:{base:"data-[hover=true]:border-success data-[hover=true]:text-success"}},{variant:"bordered",color:"warning",class:{base:"data-[hover=true]:border-warning data-[hover=true]:text-warning"}},{variant:"bordered",color:"danger",class:{base:"data-[hover=true]:border-danger data-[hover=true]:text-danger"}},{variant:"flat",color:"default",class:{base:"data-[hover=true]:bg-default/40 data-[hover=true]:text-default-foreground"}},{variant:"flat",color:"primary",class:{base:"data-[hover=true]:bg-primary/20 data-[hover=true]:text-primary"}},{variant:"flat",color:"secondary",class:{base:"data-[hover=true]:bg-secondary/20 data-[hover=true]:text-secondary"}},{variant:"flat",color:"success",class:{base:"data-[hover=true]:bg-success/20 data-[hover=true]:text-success "}},{variant:"flat",color:"warning",class:{base:"data-[hover=true]:bg-warning/20 data-[hover=true]:text-warning"}},{variant:"flat",color:"danger",class:{base:"data-[hover=true]:bg-danger/20 data-[hover=true]:text-danger"}},{variant:"faded",color:"default",class:{base:"data-[hover=true]:text-default-foreground"}},{variant:"faded",color:"primary",class:{base:"data-[hover=true]:text-primary"}},{variant:"faded",color:"secondary",class:{base:"data-[hover=true]:text-secondary"}},{variant:"faded",color:"success",class:{base:"data-[hover=true]:text-success"}},{variant:"faded",color:"warning",class:{base:"data-[hover=true]:text-warning"}},{variant:"faded",color:"danger",class:{base:"data-[hover=true]:text-danger"}},{variant:"light",color:"default",class:{base:"data-[hover=true]:text-default-500"}},{variant:"light",color:"primary",class:{base:"data-[hover=true]:text-primary"}},{variant:"light",color:"secondary",class:{base:"data-[hover=true]:text-secondary"}},{variant:"light",color:"success",class:{base:"data-[hover=true]:text-success"}},{variant:"light",color:"warning",class:{base:"data-[hover=true]:text-warning"}},{variant:"light",color:"danger",class:{base:"data-[hover=true]:text-danger"}}]});Ha({slots:{base:"relative mb-2",heading:"pl-1 text-tiny text-foreground-500",group:"data-[has-title=true]:pt-1",divider:"mt-2"}});Ha({base:"w-full flex flex-col gap-0.5 p-1"});var CX=Ha({base:"flex flex-col gap-2 items-start"}),$M=Ha({slots:{base:["relative","flex","flex-col","w-fit"],wrapper:["group","flex items-center","has-[:disabled]:opacity-60"],input:["absolute","inset-0","border-none","outline-none","bg-transparent","text-transparent"],segmentWrapper:["inline-flex","gap-x-1","py-2"],segment:["h-10","w-10","font-semibold","flex","justify-center","items-center","border-default-200","data-[active=true]:border-default-400","data-[active=true]:scale-110","shadow-sm","hover:bg-danger",...bh],passwordChar:["w-1","h-1","bg-default-800","rounded-full"],caret:["animate-[appearance-in_1s_infinite]","font-extralight","h-full","w-full","flex","justify-center","items-center","text-2xl","h-[50%]","w-px","bg-foreground"],helperWrapper:["text-tiny","mt-0.5","font-extralight",""],errorMessage:["text-tiny text-danger w-full"],description:["text-tiny text-foreground-400"]},variants:{variant:{flat:{segment:["border-transparent","bg-default-100","data-[active=true]:bg-default-200"]},faded:{segment:["bg-default-100","border-medium"]},bordered:{segment:["border-medium"]},underlined:{segment:["shadow-none","relative","box-border","!rounded-none","border-b-medium","shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","border-default-200","after:content-['']","after:w-0","after:origin-center","after:bg-default-foreground","after:absolute","after:left-1/2","after:-translate-x-1/2","after:-bottom-[2px]","after:h-[2px]","data-[active=true]:border-default-300","data-[active=true]:after:w-full","data-[active=true]:scale-100"]}},isDisabled:{true:{segment:"opacity-disabled pointer-events-none",input:"pointer-events-none"}},isInvalid:{true:{}},isReadOnly:{true:{caret:"bg-transparent",segment:"transition-none data-[active=true]:scale-100"}},fullWidth:{true:{base:"w-full"}},radius:{none:{segment:"rounded-none"},sm:{segment:"rounded-sm"},md:{segment:"rounded-md"},lg:{segment:"rounded-lg"},full:{segment:"rounded-full"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{segment:"h-8 min-h-8 w-8 min-w-8 text-small"},md:{segment:"h-10 min-h-10 w-10 min-w-10 text-small"},lg:{segment:"h-12 min-h-12 w-12 min-w-12 text-medium"}},disableAnimation:{true:{segment:"transition-none",caret:"animate-none"},false:{segment:"transition duration-150"}}},defaultVariants:{variant:"flat",color:"default",radius:"md",size:"md"},compoundVariants:[{variant:"flat",color:"default",class:{segment:["bg-default-100","data-[active=true]:bg-default-200"]}},{variant:"flat",color:"primary",class:{segment:["bg-primary-100","data-[active=true]:bg-primary-200","text-primary"],caret:["bg-primary"],passwordChar:["bg-primary"]}},{variant:"flat",color:"secondary",class:{segment:["bg-secondary-100","data-[active=true]:bg-secondary-200","text-secondary"],caret:["bg-secondary"],passwordChar:["bg-secondary"]}},{variant:"flat",color:"success",class:{segment:["bg-success-100","data-[active=true]:bg-success-200","text-success"],caret:["bg-success"],passwordChar:["bg-success"]}},{variant:"flat",color:"warning",class:{segment:["bg-warning-100","data-[active=true]:bg-warning-200","text-warning"],caret:["bg-warning"],passwordChar:["bg-warning"]}},{variant:"flat",color:"danger",class:{segment:["bg-danger-100","data-[active=true]:bg-danger-200","text-danger"],caret:["bg-danger"],passwordChar:["bg-danger"]}},{variant:"faded",color:"default",class:{segment:""}},{variant:"faded",color:"primary",class:{segment:["bg-primary-100","text-primary","border-primary-200","data-[active=true]:border-primary"],caret:["bg-primary"],passwordChar:["bg-primary"]}},{variant:"faded",color:"secondary",class:{segment:["bg-secondary-100","text-secondary","border-secondary-200","data-[active=true]:border-secondary"],caret:["bg-secondary"],passwordChar:["bg-secondary"]}},{variant:"faded",color:"success",class:{segment:["bg-success-100","text-success","border-success-200","data-[active=true]:border-success"],caret:["bg-success"],passwordChar:["bg-success"]}},{variant:"faded",color:"warning",class:{segment:["bg-warning-100","text-warning","border-warning-200","data-[active=true]:border-warning"],caret:["bg-warning"],passwordChar:["bg-warning"]}},{variant:"faded",color:"danger",class:{segment:["bg-danger-100","text-danger","border-danger-200","data-[active=true]:border-danger"],caret:["bg-danger"],passwordChar:["bg-danger"]}},{variant:"bordered",color:"default",class:{segment:"data-[has-value=true]:text-default-foreground data-[active=true]:border-foreground"}},{variant:"bordered",color:"primary",class:{segment:["border-primary-200","text-primary","data-[active=true]:border-primary"],caret:["bg-primary"],passwordChar:["bg-primary"]}},{variant:"bordered",color:"secondary",class:{segment:["border-secondary-200","text-secondary","data-[active=true]:border-secondary"],caret:["bg-secondary"],passwordChar:["bg-secondary"]}},{variant:"bordered",color:"success",class:{segment:["border-success-200","text-success","data-[active=true]:border-success"],caret:["bg-success"],passwordChar:["bg-success"]}},{variant:"bordered",color:"warning",class:{segment:["border-warning-200","text-warning","data-[active=true]:border-warning"],caret:["bg-warning"],passwordChar:["bg-warning"]}},{variant:"bordered",color:"danger",class:{segment:["border-danger-200","text-danger","data-[active=true]:border-danger"],caret:["bg-danger"],passwordChar:["bg-danger"]}},{variant:"underlined",color:"default",class:{segment:"data-[has-value=true]:text-default-foreground after:bg-foreground"}},{variant:"underlined",color:"primary",class:{segment:["border-primary-200","text-primary","after:bg-primary"],caret:["bg-primary"],passwordChar:["bg-primary"]}},{variant:"underlined",color:"secondary",class:{segment:["border-secondary-200","text-secondary","after:bg-secondary"],caret:["bg-secondary"],passwordChar:["bg-secondary"]}},{variant:"underlined",color:"success",class:{segment:["border-success-200","text-success","after:bg-success"],caret:["bg-success"],passwordChar:["bg-success"]}},{variant:"underlined",color:"warning",class:{segment:["border-warning-200","text-warning","after:bg-warning"],caret:["bg-warning"],passwordChar:["bg-warning"]}},{variant:"underlined",color:"danger",class:{segment:["border-danger-200","text-danger","after:bg-danger"],caret:["bg-danger"],passwordChar:["bg-danger"]}},{variant:"flat",isInvalid:!0,class:{segment:["bg-danger-50","data-[active=true]:bg-danger-100","text-danger"],caret:["bg-danger"]}},{variant:"faded",isInvalid:!0,class:{segment:["bg-danger-50","text-danger","border-danger-200","data-[active=true]:border-danger-400"],caret:["bg-danger"]}},{variant:"bordered",isInvalid:!0,class:{segment:["border-danger-200","text-danger","data-[active=true]:border-danger-400"],caret:["bg-danger"]}},{variant:"underlined",isInvalid:!0,class:{segment:["border-danger-200","text-danger","data-[active=true]:after:bg-danger-400"],caret:["bg-danger"]}},{disableAnimation:!1,variant:"underlined",class:{segment:"after:transition-width motion-reduce:after:transition-none"}}]}),Y8=Ha({base:["z-0","group","relative","inline-flex","items-center","justify-center","box-border","appearance-none","outline-none","select-none","whitespace-nowrap","min-w-max","font-normal","subpixel-antialiased","overflow-hidden","tap-highlight-transparent","data-[pressed=true]:scale-[0.97]",...bh],variants:{variant:{solid:"",bordered:"border-medium bg-transparent",light:"bg-transparent",flat:"",faded:"border-medium",shadow:"",ghost:"border-medium bg-transparent"},size:{sm:"px-3 min-w-16 h-8 text-tiny gap-2 rounded-small",md:"px-4 min-w-20 h-10 text-small gap-2 rounded-medium",lg:"px-6 min-w-24 h-12 text-medium gap-3 rounded-large"},color:{default:"",primary:"",secondary:"",success:"",warning:"",danger:""},radius:{none:"rounded-none",sm:"rounded-small",md:"rounded-medium",lg:"rounded-large",full:"rounded-full"},fullWidth:{true:"w-full"},isDisabled:{true:"opacity-disabled pointer-events-none"},isInGroup:{true:"[&:not(:first-child):not(:last-child)]:rounded-none"},isIconOnly:{true:"px-0 !gap-0",false:"[&>svg]:max-w-[theme(spacing.8)]"},disableAnimation:{true:"!transition-none data-[pressed=true]:scale-100",false:"transition-transform-colors-opacity motion-reduce:transition-none"}},defaultVariants:{size:"md",variant:"solid",color:"default",fullWidth:!1,isDisabled:!1,isInGroup:!1},compoundVariants:[{variant:"solid",color:"default",class:Yr.solid.default},{variant:"solid",color:"primary",class:Yr.solid.primary},{variant:"solid",color:"secondary",class:Yr.solid.secondary},{variant:"solid",color:"success",class:Yr.solid.success},{variant:"solid",color:"warning",class:Yr.solid.warning},{variant:"solid",color:"danger",class:Yr.solid.danger},{variant:"shadow",color:"default",class:Yr.shadow.default},{variant:"shadow",color:"primary",class:Yr.shadow.primary},{variant:"shadow",color:"secondary",class:Yr.shadow.secondary},{variant:"shadow",color:"success",class:Yr.shadow.success},{variant:"shadow",color:"warning",class:Yr.shadow.warning},{variant:"shadow",color:"danger",class:Yr.shadow.danger},{variant:"bordered",color:"default",class:Yr.bordered.default},{variant:"bordered",color:"primary",class:Yr.bordered.primary},{variant:"bordered",color:"secondary",class:Yr.bordered.secondary},{variant:"bordered",color:"success",class:Yr.bordered.success},{variant:"bordered",color:"warning",class:Yr.bordered.warning},{variant:"bordered",color:"danger",class:Yr.bordered.danger},{variant:"flat",color:"default",class:Yr.flat.default},{variant:"flat",color:"primary",class:Yr.flat.primary},{variant:"flat",color:"secondary",class:Yr.flat.secondary},{variant:"flat",color:"success",class:Yr.flat.success},{variant:"flat",color:"warning",class:Yr.flat.warning},{variant:"flat",color:"danger",class:Yr.flat.danger},{variant:"faded",color:"default",class:Yr.faded.default},{variant:"faded",color:"primary",class:Yr.faded.primary},{variant:"faded",color:"secondary",class:Yr.faded.secondary},{variant:"faded",color:"success",class:Yr.faded.success},{variant:"faded",color:"warning",class:Yr.faded.warning},{variant:"faded",color:"danger",class:Yr.faded.danger},{variant:"light",color:"default",class:[Yr.light.default,"data-[hover=true]:bg-default/40"]},{variant:"light",color:"primary",class:[Yr.light.primary,"data-[hover=true]:bg-primary/20"]},{variant:"light",color:"secondary",class:[Yr.light.secondary,"data-[hover=true]:bg-secondary/20"]},{variant:"light",color:"success",class:[Yr.light.success,"data-[hover=true]:bg-success/20"]},{variant:"light",color:"warning",class:[Yr.light.warning,"data-[hover=true]:bg-warning/20"]},{variant:"light",color:"danger",class:[Yr.light.danger,"data-[hover=true]:bg-danger/20"]},{variant:"ghost",color:"default",class:[Yr.ghost.default,"data-[hover=true]:!bg-default"]},{variant:"ghost",color:"primary",class:[Yr.ghost.primary,"data-[hover=true]:!bg-primary data-[hover=true]:!text-primary-foreground"]},{variant:"ghost",color:"secondary",class:[Yr.ghost.secondary,"data-[hover=true]:!bg-secondary data-[hover=true]:!text-secondary-foreground"]},{variant:"ghost",color:"success",class:[Yr.ghost.success,"data-[hover=true]:!bg-success data-[hover=true]:!text-success-foreground"]},{variant:"ghost",color:"warning",class:[Yr.ghost.warning,"data-[hover=true]:!bg-warning data-[hover=true]:!text-warning-foreground"]},{variant:"ghost",color:"danger",class:[Yr.ghost.danger,"data-[hover=true]:!bg-danger data-[hover=true]:!text-danger-foreground"]},{isInGroup:!0,class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,size:"sm",class:"rounded-none first:rounded-s-small last:rounded-e-small"},{isInGroup:!0,size:"md",class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,size:"lg",class:"rounded-none first:rounded-s-large last:rounded-e-large"},{isInGroup:!0,isRounded:!0,class:"rounded-none first:rounded-s-full last:rounded-e-full"},{isInGroup:!0,radius:"none",class:"rounded-none first:rounded-s-none last:rounded-e-none"},{isInGroup:!0,radius:"sm",class:"rounded-none first:rounded-s-small last:rounded-e-small"},{isInGroup:!0,radius:"md",class:"rounded-none first:rounded-s-medium last:rounded-e-medium"},{isInGroup:!0,radius:"lg",class:"rounded-none first:rounded-s-large last:rounded-e-large"},{isInGroup:!0,radius:"full",class:"rounded-none first:rounded-s-full last:rounded-e-full"},{isInGroup:!0,variant:["ghost","bordered"],color:"default",className:_y.default},{isInGroup:!0,variant:["ghost","bordered"],color:"primary",className:_y.primary},{isInGroup:!0,variant:["ghost","bordered"],color:"secondary",className:_y.secondary},{isInGroup:!0,variant:["ghost","bordered"],color:"success",className:_y.success},{isInGroup:!0,variant:["ghost","bordered"],color:"warning",className:_y.warning},{isInGroup:!0,variant:["ghost","bordered"],color:"danger",className:_y.danger},{isIconOnly:!0,size:"sm",class:"min-w-8 w-8 h-8"},{isIconOnly:!0,size:"md",class:"min-w-10 w-10 h-10"},{isIconOnly:!0,size:"lg",class:"min-w-12 w-12 h-12"},{variant:["solid","faded","flat","bordered","shadow"],class:"data-[hover=true]:opacity-hover"}]});Ha({base:"inline-flex items-center justify-center h-auto",variants:{fullWidth:{true:"w-full"}},defaultVariants:{fullWidth:!1}});var BM=Ha({slots:{base:["relative w-fit max-w-full shadow-small inline-block overflow-y-hidden","rounded-large overflow-x-auto bg-default-50 dark:bg-background","w-[calc(var(--visible-months)_*_var(--calendar-width))]"],prevButton:["order-1"],nextButton:["order-3"],headerWrapper:["px-4 py-2 flex items-center justify-between gap-2 bg-content1 overflow-hidden rtl:flex-row-reverse","[&_.chevron-icon]:flex-none","after:content-['']","after:bg-content1 origin-top","after:w-full after:h-0","after:absolute after:top-0 after:left-0"],header:"flex w-full items-center justify-center gap-2 z-10 order-2",title:"text-default-500 text-small font-medium",content:"w-[calc(var(--visible-months)_*_var(--calendar-width))]",gridWrapper:"flex max-w-full overflow-hidden pb-2 h-auto relative",grid:"w-full border-collapse z-0",gridHeader:"bg-content1 shadow-[0px_20px_20px_0px_rgb(0_0_0/0.05)]",gridHeaderRow:"px-4 pb-2 flex justify-center text-default-400",gridHeaderCell:"flex w-8 justify-center items-center font-medium text-small",gridBody:"",gridBodyRow:"flex justify-center items-center first:mt-2",cell:"py-0.5 px-0",cellButton:["w-8 h-8 flex items-center text-foreground justify-center rounded-full","box-border appearance-none select-none whitespace-nowrap font-normal","subpixel-antialiased overflow-hidden tap-highlight-transparent","data-[disabled=true]:text-default-300","data-[disabled=true]:cursor-default","data-[readonly=true]:cursor-default","data-[disabled=true]:transition-none","data-[unavailable=true]:text-default-300","data-[unavailable=true]:cursor-default","data-[unavailable=true]:line-through",...bh],pickerWrapper:"absolute inset-x-0 top-0 flex w-full h-[var(--picker-height)] justify-center opacity-0 pointer-events-none",pickerMonthList:"items-start",pickerYearList:"items-center",pickerHighlight:"h-8 bg-default-200 absolute w-[calc(100%_-_16px)] rounded-medium z-0 top-1/2 -translate-y-1/2 pointer-events-none",pickerItem:["w-full flex text-foreground items-center h-8 leading-[32px] min-h-[32px] snap-center text-large z-20","data-[pressed=true]:opacity-50",...bh],helperWrapper:"px-4 pb-2 max-w-[270px] flex justify-start flex-wrap items-center",errorMessage:"text-small text-danger break-words max-w-full"},variants:{color:{foreground:{},primary:{},secondary:{},success:{},warning:{},danger:{}},isRange:{true:{cellButton:["relative","overflow-visible","before:content-[''] before:absolute before:inset-0 before:z-[-1] before:rounded-none","data-[outside-month=true]:before:hidden","data-[selected=true]:data-[range-selection=true]:data-[outside-month=true]:bg-transparent","data-[selected=true]:data-[range-selection=true]:data-[outside-month=true]:text-default-300","data-[range-start=true]:before:rounded-s-full","data-[selection-start=true]:before:rounded-s-full","data-[range-end=true]:before:rounded-e-full","data-[selection-end=true]:before:rounded-e-full","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:rounded-full","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:rounded-full"]},false:{}},hideDisabledDates:{true:{cellButton:"data-[disabled=true]:data-[outside-month=true]:opacity-0"},false:{}},isHeaderWrapperExpanded:{true:{headerWrapper:["[&_.chevron-icon]:rotate-180","after:h-full","after:z-0"],pickerWrapper:"opacity-100 pointer-events-auto z-10",gridWrapper:"h-[var(--picker-height)] overflow-y-hidden",grid:"opacity-0 pointer-events-none",nextButton:"opacity-0 pointer-events-none",prevButton:"opacity-0 pointer-events-none"},false:{}},showMonthAndYearPickers:{true:{base:"[--picker-height:224px]",header:"h-8 bg-default-100 rounded-full"},false:{}},showShadow:{true:{cellButton:"data-[selected=true]:shadow-md"},false:{cellButton:"shadow-none data-[selected=true]:shadow-none"}},disableAnimation:{true:{cellButton:"transition-none"},false:{headerWrapper:["[&_.chevron-icon]:transition-transform","after:transition-height"],grid:"transition-opacity",cellButton:["origin-center transition-[transform,background-color,color] !duration-150"],pickerWrapper:"transition-opacity !duration-250",pickerItem:"transition-opacity"}},isRTL:{true:{nextButton:"order-1",prevButton:"order-3"},false:{}}},defaultVariants:{color:"primary",showShadow:!1,hideDisabledDates:!1,showMonthAndYearPickers:!1,isRTL:!1},compoundVariants:[{isRange:!1,color:"foreground",class:{cellButton:["data-[hover=true]:bg-default-200","data-[selected=true]:bg-foreground","data-[selected=true]:text-background","data-[hover=true]:bg-foreground-200","data-[hover=true]:text-foreground-600","data-[selected=true]:data-[hover=true]:bg-foreground","data-[selected=true]:data-[hover=true]:text-background"]}},{isRange:!1,color:"primary",class:{cellButton:["data-[selected=true]:bg-primary","data-[selected=true]:text-primary-foreground","data-[hover=true]:bg-primary-50","data-[hover=true]:text-primary-400","data-[selected=true]:data-[hover=true]:bg-primary","data-[selected=true]:data-[hover=true]:text-primary-foreground"]}},{isRange:!1,color:"secondary",class:{cellButton:["data-[selected=true]:bg-secondary","data-[selected=true]:text-secondary-foreground","data-[hover=true]:bg-secondary-50","data-[hover=true]:text-secondary-400","data-[selected=true]:data-[hover=true]:bg-secondary","data-[selected=true]:data-[hover=true]:text-secondary-foreground"]}},{isRange:!1,color:"success",class:{cellButton:["data-[selected=true]:bg-success","data-[selected=true]:text-success-foreground","data-[hover=true]:bg-success-100","data-[hover=true]:text-success-600","dark:data-[hover=true]:bg-success-50","dark:data-[hover=true]:text-success-500","data-[selected=true]:data-[hover=true]:bg-success","dark:data-[selected=true]:data-[hover=true]:bg-success","dark:data-[selected=true]:data-[hover=true]:text-success-foreground","data-[selected=true]:data-[hover=true]:text-success-foreground"]}},{isRange:!1,color:"warning",class:{cellButton:["data-[selected=true]:bg-warning","data-[selected=true]:text-warning-foreground","data-[hover=true]:bg-warning-100","data-[hover=true]:text-warning-600","dark:data-[hover=true]:bg-warning-50","dark:data-[hover=true]:text-warning-500","data-[selected=true]:data-[hover=true]:bg-warning","dark:data-[selected=true]:data-[hover=true]:bg-warning","dark:data-[selected=true]:data-[hover=true]:text-warning-foreground","data-[selected=true]:data-[hover=true]:text-warning-foreground"]}},{isRange:!1,color:"danger",class:{cellButton:["data-[selected=true]:bg-danger","data-[selected=true]:text-danger-foreground","data-[hover=true]:bg-danger-100","data-[hover=true]:text-danger-500","dark:data-[hover=true]:bg-danger-50","dark:data-[hover=true]:text-danger-500","data-[selected=true]:data-[hover=true]:bg-danger","dark:data-[selected=true]:data-[hover=true]:bg-danger","dark:data-[selected=true]:data-[hover=true]:text-danger-foreground","data-[selected=true]:data-[hover=true]:text-danger-foreground"]}},{isRange:!0,color:"foreground",class:{cellButton:["data-[selected=true]:data-[range-selection=true]:before:bg-foreground/10","data-[selected=true]:data-[range-selection=true]:text-foreground","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:bg-foreground","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:text-background","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:bg-foreground","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:text-background"]}},{isRange:!0,color:"primary",class:{cellButton:["data-[selected=true]:data-[range-selection=true]:before:bg-primary-50","data-[selected=true]:data-[range-selection=true]:text-primary","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:bg-primary","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:text-primary-foreground","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:bg-primary","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:text-primary-foreground"]}},{isRange:!0,color:"secondary",class:{cellButton:["data-[selected=true]:data-[range-selection=true]:before:bg-secondary-50","data-[selected=true]:data-[range-selection=true]:text-secondary","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:bg-secondary","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:text-secondary-foreground","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:bg-secondary","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:text-secondary-foreground"]}},{isRange:!0,color:"success",class:{cellButton:["data-[selected=true]:data-[range-selection=true]:before:bg-success-100","data-[selected=true]:data-[range-selection=true]:text-success-600","dark:data-[selected=true]:data-[range-selection=true]:before:bg-success-50","dark:data-[selected=true]:data-[range-selection=true]:text-success-500","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:bg-success","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:text-success-foreground","dark:data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:text-success-foreground","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:bg-success","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:text-success-foreground","dark:data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:text-success-foreground"]}},{isRange:!0,color:"warning",class:{cellButton:["data-[selected=true]:data-[range-selection=true]:before:bg-warning-100","dark:data-[selected=true]:data-[range-selection=true]:before:bg-warning-50","data-[selected=true]:data-[range-selection=true]:text-warning-500","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:bg-warning","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:text-warning-foreground","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:bg-warning","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:text-warning-foreground"]}},{isRange:!0,color:"danger",class:{cellButton:["data-[selected=true]:data-[range-selection=true]:before:bg-danger-50","data-[selected=true]:data-[range-selection=true]:text-danger-500","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:bg-danger","data-[selected=true]:data-[selection-start=true]:data-[range-selection=true]:text-danger-foreground","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:bg-danger","data-[selected=true]:data-[selection-end=true]:data-[range-selection=true]:text-danger-foreground"]}},{showShadow:!0,color:"foreground",class:{cellButton:"data-[selected=true]:shadow-foreground/40"}},{showShadow:!0,color:"primary",class:{cellButton:"data-[selected=true]:shadow-primary/40"}},{showShadow:!0,color:"secondary",class:{cellButton:"data-[selected=true]:shadow-secondary/40"}},{showShadow:!0,color:"success",class:{cellButton:"data-[selected=true]:shadow-success/40"}},{showShadow:!0,color:"warning",class:{cellButton:"data-[selected=true]:shadow-warning/40"}},{showShadow:!0,color:"danger",class:{cellButton:"data-[selected=true]:shadow-danger/40"}},{showShadow:!0,isRange:!0,class:{cellButton:["data-[selected=true]:shadow-none","data-[selected=true]:data-[selection-start=true]:shadow-md","data-[selected=true]:data-[selection-end=true]:shadow-md"]}}],compoundSlots:[{slots:["prevButton","nextButton"],class:["text-medium","text-default-400"]},{slots:["pickerMonthList","pickerYearList"],class:["flex flex-col px-4 overflow-y-scroll scrollbar-hide snap-y snap-mandatory","[--scroll-shadow-size:100px]","[mask-image:linear-gradient(#000,#000,transparent_0,#000_var(--scroll-shadow-size),#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]"]}]}),DX=Ha({slots:{base:"group relative max-w-fit inline-flex items-center justify-start cursor-pointer tap-highlight-transparent p-2 -m-2 select-none",wrapper:["relative","inline-flex","items-center","justify-center","flex-shrink-0","overflow-hidden","before:content-['']","before:absolute","before:inset-0","before:border-solid","before:border-2","before:box-border","before:border-default","after:content-['']","after:absolute","after:inset-0","after:scale-50","after:opacity-0","after:origin-center","group-data-[selected=true]:after:scale-100","group-data-[selected=true]:after:opacity-100","group-data-[hover=true]:before:bg-default-100",...t2],hiddenInput:X8,icon:"z-10 w-4 h-3 opacity-0 group-data-[selected=true]:opacity-100 pointer-events-none",label:"relative text-foreground select-none"},variants:{color:{default:{wrapper:"after:bg-default after:text-default-foreground text-default-foreground"},primary:{wrapper:"after:bg-primary after:text-primary-foreground text-primary-foreground"},secondary:{wrapper:"after:bg-secondary after:text-secondary-foreground text-secondary-foreground"},success:{wrapper:"after:bg-success after:text-success-foreground text-success-foreground"},warning:{wrapper:"after:bg-warning after:text-warning-foreground text-warning-foreground"},danger:{wrapper:"after:bg-danger after:text-danger-foreground text-danger-foreground"}},size:{sm:{wrapper:["w-4 h-4 me-2","rounded-[calc(theme(borderRadius.medium)*0.5)]","before:rounded-[calc(theme(borderRadius.medium)*0.5)]","after:rounded-[calc(theme(borderRadius.medium)*0.5)]"],label:"text-small",icon:"w-3 h-2"},md:{wrapper:["w-5 h-5 me-2","rounded-[calc(theme(borderRadius.medium)*0.6)]","before:rounded-[calc(theme(borderRadius.medium)*0.6)]","after:rounded-[calc(theme(borderRadius.medium)*0.6)]"],label:"text-medium",icon:"w-4 h-3"},lg:{wrapper:["w-6 h-6 me-2","rounded-[calc(theme(borderRadius.medium)*0.7)]","before:rounded-[calc(theme(borderRadius.medium)*0.7)]","after:rounded-[calc(theme(borderRadius.medium)*0.7)]"],label:"text-large",icon:"w-5 h-4"}},radius:{none:{wrapper:"rounded-none before:rounded-none after:rounded-none"},sm:{wrapper:["rounded-[calc(theme(borderRadius.medium)*0.5)]","before:rounded-[calc(theme(borderRadius.medium)*0.5)]","after:rounded-[calc(theme(borderRadius.medium)*0.5)]"]},md:{wrapper:["rounded-[calc(theme(borderRadius.medium)*0.6)]","before:rounded-[calc(theme(borderRadius.medium)*0.6)]","after:rounded-[calc(theme(borderRadius.medium)*0.6)]"]},lg:{wrapper:["rounded-[calc(theme(borderRadius.medium)*0.7)]","before:rounded-[calc(theme(borderRadius.medium)*0.7)]","after:rounded-[calc(theme(borderRadius.medium)*0.7)]"]},full:{wrapper:"rounded-full before:rounded-full after:rounded-full"}},lineThrough:{true:{label:["inline-flex","items-center","justify-center","before:content-['']","before:absolute","before:bg-foreground","before:w-0","before:h-0.5","group-data-[selected=true]:opacity-60","group-data-[selected=true]:before:w-full"]}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},isInvalid:{true:{wrapper:"before:border-danger",label:"text-danger"}},disableAnimation:{true:{wrapper:"transition-none",icon:"transition-none",label:"transition-none"},false:{wrapper:["before:transition-colors","group-data-[pressed=true]:scale-95","transition-transform","after:transition-transform-opacity","after:!ease-linear","after:!duration-200","motion-reduce:transition-none"],icon:"transition-opacity motion-reduce:transition-none",label:"transition-colors-opacity before:transition-width motion-reduce:transition-none"}}},defaultVariants:{color:"primary",size:"md",isDisabled:!1,lineThrough:!1}});Ha({slots:{base:"relative flex flex-col gap-2",label:"relative text-medium text-foreground-500",wrapper:"flex flex-col flex-wrap gap-2 data-[orientation=horizontal]:flex-row",description:"text-small text-foreground-400",errorMessage:"text-small text-danger"},variants:{isRequired:{true:{label:"after:content-['*'] after:text-danger after:ml-0.5"}},isInvalid:{true:{description:"text-danger"}},disableAnimation:{true:{},false:{description:"transition-colors !duration-150 motion-reduce:transition-none"}}},defaultVariants:{isInvalid:!1,isRequired:!1}});var m_=Ha({slots:{base:"group flex flex-col",label:["block subpixel-antialiased text-small text-default-600","group-data-[required=true]:after:content-['*'] group-data-[required=true]:after:text-danger group-data-[required=true]:after:ml-0.5","group-data-[invalid=true]:text-danger"],inputWrapper:["relative px-3 gap-3 w-full inline-flex flex-row items-center","cursor-text tap-highlight-transparent shadow-sm"],input:"flex h-full gap-x-0.5 w-full font-normal",innerWrapper:["flex items-center text-default-400 w-full gap-x-2 h-6","group-data-[invalid=true]:text-danger"],segment:["group first:-ml-0.5 [&:not(:first-child)]:-ml-1 px-0.5 my-auto box-content tabular-nums text-start","inline-block outline-none focus:shadow-sm rounded-md","text-foreground-500 data-[editable=true]:text-foreground","data-[editable=true]:data-[placeholder=true]:text-foreground-500","data-[invalid=true]:text-danger-300 data-[invalid=true]:data-[editable=true]:text-danger","data-[invalid=true]:focus:bg-danger-400/50 dark:data-[invalid=true]:focus:bg-danger-400/20","data-[invalid=true]:data-[editable=true]:focus:text-danger"],helperWrapper:"hidden group-data-[has-helper=true]:flex p-1 relative flex-col gap-1.5",description:"text-tiny text-foreground-400",errorMessage:"text-tiny text-danger"},variants:{variant:{flat:{inputWrapper:["bg-default-100","hover:bg-default-200","focus-within:hover:bg-default-100","group-data-[invalid=true]:bg-danger-50","group-data-[invalid=true]:hover:bg-danger-100","group-data-[invalid=true]:focus-within:hover:bg-danger-50"]},faded:{inputWrapper:["bg-default-100","border-medium","border-default-200","hover:border-default-400","group-data-[invalid=true]:bg-danger-50","group-data-[invalid=true]:hover:bg-danger-100","group-data-[invalid=true]:focus-within:hover:bg-danger-50"]},bordered:{inputWrapper:["border-medium","border-default-200","hover:border-default-400","focus-within:border-default-foreground","focus-within:hover:border-default-foreground","group-data-[invalid=true]:border-danger","group-data-[invalid=true]:hover:border-danger","group-data-[invalid=true]:focus-within:hover:border-danger"]},underlined:{inputWrapper:["px-1","pb-1","gap-0","relative","box-border","border-b-medium","shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","border-default-200","!rounded-none","hover:border-default-300","after:content-['']","after:w-0","after:origin-center","after:bg-default-foreground","after:absolute","after:left-1/2","after:-translate-x-1/2","after:-bottom-[2px]","after:h-[2px]","focus-within:after:w-full","group-data-[invalid=true]:after:bg-danger"]}},color:{default:{segment:"focus:bg-default-400/50 data-[editable=true]:focus:text-default-foreground"},primary:{segment:"focus:bg-primary-400/50 data-[editable=true]:focus:text-primary"},secondary:{segment:"focus:bg-secondary-400/50 data-[editable=true]:focus:text-secondary"},success:{segment:"focus:bg-success-400/50 dark:focus:bg-success-400/20 data-[editable=true]:focus:text-success"},warning:{segment:"focus:bg-warning-400/50 dark:focus:bg-warning-400/20 data-[editable=true]:focus:text-warning"},danger:{segment:"focus:bg-danger-400/50 dark:focus:bg-danger-400/20 data-[editable=true]:focus:text-danger"}},size:{sm:{label:"text-tiny",input:"text-small",inputWrapper:"h-8 min-h-8 px-2 rounded-small"},md:{input:"text-small",inputWrapper:"h-10 min-h-10 rounded-medium",clearButton:"text-large"},lg:{label:"text-medium",input:"text-medium",inputWrapper:"h-12 min-h-12 rounded-large"}},radius:{none:{inputWrapper:"rounded-none"},sm:{inputWrapper:"rounded-small"},md:{inputWrapper:"rounded-medium"},lg:{inputWrapper:"rounded-large"},full:{inputWrapper:"rounded-full"}},labelPlacement:{outside:{base:"flex flex-col data-[has-helper=true]:pb-[calc(theme(fontSize.tiny)_+8px)] gap-y-1.5",label:"w-full text-foreground",helperWrapper:"absolute top-[calc(100%_+_2px)] start-0"},"outside-left":{base:"flex-row items-center data-[has-helper=true]:pb-[calc(theme(fontSize.tiny)_+_8px)] gap-x-2 flex-nowrap",label:"relative text-foreground",inputWrapper:"relative flex-1",helperWrapper:"absolute top-[calc(100%_+_2px)] start-0"},inside:{label:"w-full text-tiny cursor-text",inputWrapper:"flex-col items-start justify-center gap-0"}},fullWidth:{true:{base:"w-full",inputWrapper:"w-full"}},isDisabled:{true:{base:"opacity-disabled pointer-events-none",inputWrapper:"pointer-events-none",label:"pointer-events-none"}},disableAnimation:{true:{label:"transition-none",input:"transition-none",inputWrapper:"transition-none"},false:{label:["!ease-out","!duration-200","will-change-auto","motion-reduce:transition-none","transition-[color,opacity]"],inputWrapper:"transition-background motion-reduce:transition-none !duration-150",segment:"transition-colors motion-reduce:transition-none"}}},defaultVariants:{variant:"flat",color:"default",size:"md",fullWidth:!0,isDisabled:!1},compoundVariants:[{variant:"flat",color:"primary",class:{innerWrapper:"text-primary",inputWrapper:["bg-primary-100","hover:bg-primary-50","focus-within:bg-primary-50"],segment:"text-primary-300 data-[editable=true]:data-[placeholder=true]:text-primary-300 data-[editable=true]:text-primary",label:"text-primary"}},{variant:"flat",color:"secondary",class:{innerWrapper:"text-secondary",inputWrapper:["bg-secondary-100","hover:bg-secondary-50","focus-within:bg-secondary-50"],segment:"text-secondary-300 data-[editable=true]:data-[placeholder=true]:text-secondary-300 data-[editable=true]:text-secondary",label:"text-secondary"}},{variant:"flat",color:"success",class:{innerWrapper:"text-success-600 dark:text-success",inputWrapper:["bg-success-100","hover:bg-success-50","focus-within:bg-success-50"],segment:"text-success-400 data-[editable=true]:data-[placeholder=true]:text-success-400 data-[editable=true]:text-success-600 data-[editable=true]:focus:text-success-600",label:"text-success-600 dark:text-success"}},{variant:"flat",color:"warning",class:{innerWrapper:"text-warning-600 dark:text-warning",inputWrapper:["bg-warning-100","hover:bg-warning-50","focus-within:bg-warning-50"],segment:"text-warning-400 data-[editable=true]:data-[placeholder=true]:text-warning-400 data-[editable=true]:text-warning-600 data-[editable=true]:focus:text-warning-600",label:"text-warning-600 dark:text-warning"}},{variant:"flat",color:"danger",class:{innerWrapper:"text-danger",inputWrapper:["bg-danger-100","hover:bg-danger-50","focus-within:bg-danger-50"],segment:"text-danger-300 data-[editable=true]:data-[placeholder=true]:text-danger-300 data-[editable=true]:text-danger",label:"text-danger"}},{variant:"faded",color:"primary",class:{innerWrapper:"text-primary",inputWrapper:["hover:border-primary","focus-within:border-primary","focus-within:hover:border-primary"],label:"text-primary"}},{variant:"faded",color:"secondary",class:{innerWrapper:"text-secondary",inputWrapper:["hover:border-secondary","focus-within:border-secondary","focus-within:hover:border-secondary"],label:"text-secondary"}},{variant:"faded",color:"success",class:{innerWrapper:"text-success",inputWrapper:["hover:border-success","focus-within:border-success","focus-within:hover:border-success"],label:"text-success"}},{variant:"faded",color:"warning",class:{innerWrapper:"text-warning",inputWrapper:["hover:border-warning","focus-within:border-warning","focus-within:hover:border-warning"],label:"text-warning"}},{variant:"faded",color:"danger",class:{innerWrapper:"text-danger",inputWrapper:["hover:border-danger","focus-within:border-danger","focus-within:hover:border-danger"],label:"text-danger"}},{variant:"bordered",color:"primary",class:{innerWrapper:"text-primary",inputWrapper:["focus-within:border-primary","focus-within:hover:border-primary"],label:"text-primary"}},{variant:"bordered",color:"secondary",class:{innerWrapper:"text-secondary",inputWrapper:["focus-within:border-secondary","focus-within:hover:border-secondary"],label:"text-secondary"}},{variant:"bordered",color:"success",class:{innerWrapper:"text-success",inputWrapper:["focus-within:border-success","focus-within:hover:border-success"],label:"text-success"}},{variant:"bordered",color:"warning",class:{innerWrapper:"text-warning",inputWrapper:["focus-within:border-warning","focus-within:hover:border-warning"],label:"text-warning"}},{variant:"bordered",color:"danger",class:{innerWrapper:"text-danger",inputWrapper:["focus-within:border-danger","focus-within:hover:border-danger"],label:"text-danger"}},{variant:"underlined",color:"primary",class:{innerWrapper:"text-primary",inputWrapper:"after:bg-primary",label:"text-primary"}},{variant:"underlined",color:"secondary",class:{innerWrapper:"text-secondary",inputWrapper:"after:bg-secondary",label:"text-secondary"}},{variant:"underlined",color:"success",class:{innerWrapper:"text-success",inputWrapper:"after:bg-success",label:"text-success"}},{variant:"underlined",color:"warning",class:{innerWrapper:"text-warning",inputWrapper:"after:bg-warning",label:"text-warning"}},{variant:"underlined",color:"danger",class:{innerWrapper:"text-danger",inputWrapper:"after:bg-danger",label:"text-danger"}},{labelPlacement:"inside",size:"sm",class:{inputWrapper:"h-12 py-1.5 px-3"}},{labelPlacement:"inside",size:"md",class:{inputWrapper:"h-14 py-2"}},{labelPlacement:"inside",size:"lg",class:{label:"text-medium",inputWrapper:"h-16 py-2.5 gap-0"}},{disableAnimation:!1,variant:["faded","bordered"],class:{inputWrapper:"transition-colors motion-reduce:transition-none"}},{disableAnimation:!1,variant:"underlined",class:{inputWrapper:"after:transition-width motion-reduce:after:transition-none"}}]}),J8=Ha({slots:{base:"group w-full",selectorButton:"-mx-2 text-inherit",selectorIcon:"text-lg text-inherit pointer-events-none flex-shrink-0",popoverContent:"p-0 w-full",calendar:"w-[calc(var(--visible-months)_*_var(--calendar-width))] shadow-none",calendarContent:"w-[calc(var(--visible-months)_*_var(--calendar-width))]",timeInputLabel:"font-medium",timeInput:"px-5 pb-4 flex-wrap gap-x-6"}});Ha({extend:J8,slots:{calendar:"group",bottomContent:"flex flex-col gap-y-2",timeInputWrapper:"flex flex-col group-data-[has-multiple-months=true]:flex-row",separator:"-mx-1 text-inherit"}});var NM=Ha({slots:{base:"flex flex-grow flex-row w-full items-start py-3 px-4 gap-x-1",mainWrapper:"h-full flex-grow min-h-10 ms-2 flex flex-col box-border items-start text-inherit justify-center",title:"text-small w-full font-medium block text-inherit leading-5",description:"pl-[1px] text-small font-normal text-inherit",closeButton:"relative text-inherit translate-x-1 -translate-y-1",iconWrapper:"flex-none relative w-9 h-9 rounded-full grid place-items-center",alertIcon:"fill-current w-6 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},variants:{color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},variant:{solid:{},flat:{},faded:{base:"border-small"},bordered:{base:"border-small bg-transparent"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},hideIcon:{true:{iconWrapper:"hidden"}},hideIconWrapper:{true:{base:"gap-x-0",iconWrapper:"!bg-transparent !shadow-none !border-none"}},hasContent:{false:{base:"items-start",mainWrapper:"justify-center items-center"}}},defaultVariants:{color:"default",variant:"flat",radius:"md",hideIcon:!1,hideIconWrapper:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:Yr.solid.default,closeButton:"data-[hover]:bg-default-100",alertIcon:"text-default-foreground"}},{variant:"solid",color:"primary",class:{base:Yr.solid.primary}},{variant:"solid",color:"secondary",class:{base:Yr.solid.secondary}},{variant:"solid",color:"success",class:{base:Yr.solid.success}},{variant:"solid",color:"warning",class:{base:Yr.solid.warning}},{variant:"solid",color:"danger",class:{base:Yr.solid.danger}},{variant:["flat","faded"],color:"default",class:{base:[Yr.flat.default,"bg-default-100 dark:bg-default-50/50","text-default-foreground"],description:"text-default-600",closeButton:"text-default-400",iconWrapper:"bg-default-50 dark:bg-default-100 border-default-200"}},{variant:["flat","faded"],color:"primary",class:{base:[Yr.flat.primary,"bg-primary-50 dark:bg-primary-50/50"],closeButton:"text-primary-500 data-[hover]:bg-primary-200",iconWrapper:"bg-primary-50 dark:bg-primary-100 border-primary-100"}},{variant:["flat","faded"],color:"secondary",class:{base:[Yr.flat.secondary,"bg-secondary-50 dark:bg-secondary-50/50"],closeButton:"text-secondary-500 data-[hover]:bg-secondary-200",iconWrapper:"bg-secondary-50 dark:bg-secondary-100 border-secondary-100"}},{variant:["flat","faded"],color:"success",class:{base:[Yr.flat.success,"bg-success-50 dark:bg-success-50/50"],closeButton:"text-success-500 data-[hover]:bg-success-200",iconWrapper:"bg-success-50 dark:bg-success-100 border-success-100"}},{variant:["flat","faded"],color:"warning",class:{base:[Yr.flat.warning,"bg-warning-50 dark:bg-warning-50/50"],closeButton:"text-warning-500 data-[hover]:bg-warning-200",iconWrapper:"bg-warning-50 dark:bg-warning-100 border-warning-100"}},{variant:["flat","faded"],color:"danger",class:{base:[Yr.flat.danger,"bg-danger-50 dark:bg-danger-50/50"],closeButton:"text-danger-500 data-[hover]:bg-danger-200",iconWrapper:"bg-danger-50 dark:bg-danger-100 border-danger-100"}},{variant:"faded",color:"default",class:{base:"border-default-300 dark:border-default-200"}},{variant:"faded",color:"primary",class:{base:"border-primary-200 dark:border-primary-100"}},{variant:"faded",color:"secondary",class:{base:"border-secondary-200"}},{variant:"faded",color:"success",class:{base:"border-success-300 dark:border-success-100"}},{variant:"faded",color:"warning",class:{base:"border-warning-300 dark:border-warning-100"}},{variant:"faded",color:"danger",class:{base:"border-danger-200 dark:border-danger-100"}},{variant:"bordered",color:"default",class:{base:[Yr.bordered.default],description:"text-default-600",closeButton:"text-default-400"}},{variant:"bordered",color:"primary",class:{base:[Yr.bordered.primary],closeButton:"data-[hover]:bg-primary-50"}},{variant:"bordered",color:"secondary",class:{base:[Yr.bordered.secondary],closeButton:"data-[hover]:bg-secondary-50"}},{variant:"bordered",color:"success",class:{base:[Yr.bordered.success],closeButton:"data-[hover]:bg-success-50"}},{variant:"bordered",color:"warning",class:{base:[Yr.bordered.warning],closeButton:"data-[hover]:bg-warning-100"}},{variant:"bordered",color:"danger",class:{base:[Yr.bordered.danger],closeButton:"data-[hover]:bg-danger-50"}},{variant:["flat","bordered","faded"],class:{iconWrapper:"shadow-small"}},{variant:["flat","faded"],class:{iconWrapper:"shadow-small border-1"}},{variant:"bordered",color:"default",class:{iconWrapper:"bg-default-200 dark:bg-default-100"}},{variant:"bordered",color:"primary",class:{iconWrapper:"bg-primary-100 dark:bg-primary-50"}},{variant:"bordered",color:"secondary",class:{iconWrapper:"bg-secondary-100 dark:bg-secondary-50"}},{variant:"bordered",color:"success",class:{iconWrapper:"bg-success-100 dark:bg-success-50"}},{variant:"bordered",color:"warning",class:{iconWrapper:"bg-warning-100 dark:bg-warning-50"}},{variant:"bordered",color:"danger",class:{iconWrapper:"bg-danger-100 dark:bg-danger-50"}}]}),PX=(e,t)=>{if(!e&&!t)return{};const i=new Set([...Object.keys(e||{}),...Object.keys(t||{})]);return Array.from(i).reduce((c,h)=>({...c,[h]:Nr(e==null?void 0:e[h],t==null?void 0:t[h])}),{})};function Q8(e){var t,i,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=Q8(e[t]))&&(c&&(c+=" "),c+=i);else for(t in e)e[t]&&(c&&(c+=" "),c+=t);return c}function MX(){for(var e,t,i=0,c="";i<arguments.length;)(e=arguments[i++])&&(t=Q8(e))&&(c&&(c+=" "),c+=t);return c}var AX=K8({extend:zS});function Zg(...e){return AX(MX(e))}const kX="modulepreload",RX=function(e){return"/"+e},jM={},km=function(t,i,c){let h=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const w=document.querySelector("meta[property=csp-nonce]"),a=(w==null?void 0:w.nonce)||(w==null?void 0:w.getAttribute("nonce"));h=Promise.allSettled(i.map(A=>{if(A=RX(A),A in jM)return;jM[A]=!0;const B=A.endsWith(".css"),N=B?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${N}`))return;const F=document.createElement("link");if(F.rel=B?"stylesheet":kX,B||(F.as="script"),F.crossOrigin="",F.href=A,a&&F.setAttribute("nonce",a),document.head.appendChild(F),B)return new Promise((G,Q)=>{F.addEventListener("load",G),F.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${A}`)))})}))}function _(w){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=w,window.dispatchEvent(a),!a.defaultPrevented)throw w}return h.then(w=>{for(const a of w||[])a.status==="rejected"&&_(a.reason);return t().catch(_)})};function jS(e){return $U()?e.altKey:e.ctrlKey}function G1(e,t){var i,c;let h=`[data-key="${CSS.escape(String(t))}"]`,_=(i=e.current)===null||i===void 0?void 0:i.dataset.collection;return _&&(h=`[data-collection="${CSS.escape(_)}"]${h}`),(c=e.current)===null||c===void 0?void 0:c.querySelector(h)}const e7=new WeakMap;function IX(e){let t=Bs();return e7.set(e,t),t}function zX(e){return e7.get(e)}const LX=1e3;function $X(e){let{keyboardDelegate:t,selectionManager:i,onTypeSelect:c}=e,h=V.useRef({search:"",timeout:void 0}).current,_=w=>{let a=BX(w.key);if(!(!a||w.ctrlKey||w.metaKey||!w.currentTarget.contains(w.target))){if(a===" "&&h.search.trim().length>0&&(w.preventDefault(),"continuePropagation"in w||w.stopPropagation()),h.search+=a,t.getKeyForSearch!=null){let A=t.getKeyForSearch(h.search,i.focusedKey);A==null&&(A=t.getKeyForSearch(h.search)),A!=null&&(i.setFocusedKey(A),c&&c(A))}clearTimeout(h.timeout),h.timeout=setTimeout(()=>{h.search=""},LX)}};return{typeSelectProps:{onKeyDownCapture:t.getKeyForSearch?_:void 0}}}function BX(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function NX(e){let{selectionManager:t,keyboardDelegate:i,ref:c,autoFocus:h=!1,shouldFocusWrap:_=!1,disallowEmptySelection:w=!1,disallowSelectAll:a=!1,selectOnFocus:A=t.selectionBehavior==="replace",disallowTypeAhead:B=!1,shouldUseVirtualFocus:N,allowsTabNavigation:F=!1,isVirtualized:G,scrollRef:Q=c,linkBehavior:te="action"}=e,{direction:Y}=Ms(),oe=Fw(),de=xe=>{var Te;if(xe.altKey&&xe.key==="Tab"&&xe.preventDefault(),!(!((Te=c.current)===null||Te===void 0)&&Te.contains(xe.target)))return;const Ie=(De,ur)=>{if(De!=null){if(t.isLink(De)&&te==="selection"&&A&&!jS(xe)){Iw.flushSync(()=>{t.setFocusedKey(De,ur)});let Sr=G1(c,De),yt=t.getItemProps(De);Sr&&oe.open(Sr,xe,yt.href,yt.routerOptions);return}if(t.setFocusedKey(De,ur),t.isLink(De)&&te==="override")return;xe.shiftKey&&t.selectionMode==="multiple"?t.extendSelection(De):A&&!jS(xe)&&t.replaceSelection(De)}};switch(xe.key){case"ArrowDown":if(i.getKeyBelow){var Me,Xe,Ce;let De=t.focusedKey!=null?(Me=i.getKeyBelow)===null||Me===void 0?void 0:Me.call(i,t.focusedKey):(Xe=i.getFirstKey)===null||Xe===void 0?void 0:Xe.call(i);De==null&&_&&(De=(Ce=i.getFirstKey)===null||Ce===void 0?void 0:Ce.call(i,t.focusedKey)),De!=null&&(xe.preventDefault(),Ie(De))}break;case"ArrowUp":if(i.getKeyAbove){var He,et,Ke;let De=t.focusedKey!=null?(He=i.getKeyAbove)===null||He===void 0?void 0:He.call(i,t.focusedKey):(et=i.getLastKey)===null||et===void 0?void 0:et.call(i);De==null&&_&&(De=(Ke=i.getLastKey)===null||Ke===void 0?void 0:Ke.call(i,t.focusedKey)),De!=null&&(xe.preventDefault(),Ie(De))}break;case"ArrowLeft":if(i.getKeyLeftOf){var ot,Pt,Et;let De=t.focusedKey!=null?(ot=i.getKeyLeftOf)===null||ot===void 0?void 0:ot.call(i,t.focusedKey):null;De==null&&_&&(De=Y==="rtl"?(Pt=i.getFirstKey)===null||Pt===void 0?void 0:Pt.call(i,t.focusedKey):(Et=i.getLastKey)===null||Et===void 0?void 0:Et.call(i,t.focusedKey)),De!=null&&(xe.preventDefault(),Ie(De,Y==="rtl"?"first":"last"))}break;case"ArrowRight":if(i.getKeyRightOf){var Wt,Dt,er;let De=t.focusedKey!=null?(Wt=i.getKeyRightOf)===null||Wt===void 0?void 0:Wt.call(i,t.focusedKey):null;De==null&&_&&(De=Y==="rtl"?(Dt=i.getLastKey)===null||Dt===void 0?void 0:Dt.call(i,t.focusedKey):(er=i.getFirstKey)===null||er===void 0?void 0:er.call(i,t.focusedKey)),De!=null&&(xe.preventDefault(),Ie(De,Y==="rtl"?"last":"first"))}break;case"Home":if(i.getFirstKey){if(t.focusedKey===null&&xe.shiftKey)return;xe.preventDefault();let De=i.getFirstKey(t.focusedKey,My(xe));t.setFocusedKey(De),De!=null&&(My(xe)&&xe.shiftKey&&t.selectionMode==="multiple"?t.extendSelection(De):A&&t.replaceSelection(De))}break;case"End":if(i.getLastKey){if(t.focusedKey===null&&xe.shiftKey)return;xe.preventDefault();let De=i.getLastKey(t.focusedKey,My(xe));t.setFocusedKey(De),De!=null&&(My(xe)&&xe.shiftKey&&t.selectionMode==="multiple"?t.extendSelection(De):A&&t.replaceSelection(De))}break;case"PageDown":if(i.getKeyPageBelow&&t.focusedKey!=null){let De=i.getKeyPageBelow(t.focusedKey);De!=null&&(xe.preventDefault(),Ie(De))}break;case"PageUp":if(i.getKeyPageAbove&&t.focusedKey!=null){let De=i.getKeyPageAbove(t.focusedKey);De!=null&&(xe.preventDefault(),Ie(De))}break;case"a":My(xe)&&t.selectionMode==="multiple"&&a!==!0&&(xe.preventDefault(),t.selectAll());break;case"Escape":!w&&t.selectedKeys.size!==0&&(xe.stopPropagation(),xe.preventDefault(),t.clearSelection());break;case"Tab":if(!F){if(xe.shiftKey)c.current.focus();else{let De=Ho(c.current,{tabbable:!0}),ur,Sr;do Sr=De.lastChild(),Sr&&(ur=Sr);while(Sr);ur&&!ur.contains(document.activeElement)&&pl(ur)}break}}},me=V.useRef({top:0,left:0});gm(Q,"scroll",G?void 0:()=>{var xe,Te,Ie,Me;me.current={top:(Ie=(xe=Q.current)===null||xe===void 0?void 0:xe.scrollTop)!==null&&Ie!==void 0?Ie:0,left:(Me=(Te=Q.current)===null||Te===void 0?void 0:Te.scrollLeft)!==null&&Me!==void 0?Me:0}});let be=xe=>{if(t.isFocused){xe.currentTarget.contains(xe.target)||t.setFocused(!1);return}if(xe.currentTarget.contains(xe.target)){if(t.setFocused(!0),t.focusedKey==null){var Te,Ie;let Ce=et=>{et!=null&&(t.setFocusedKey(et),A&&!t.isSelected(et)&&t.replaceSelection(et))},He=xe.relatedTarget;var Me,Xe;He&&xe.currentTarget.compareDocumentPosition(He)&Node.DOCUMENT_POSITION_FOLLOWING?Ce((Me=t.lastSelectedKey)!==null&&Me!==void 0?Me:(Te=i.getLastKey)===null||Te===void 0?void 0:Te.call(i)):Ce((Xe=t.firstSelectedKey)!==null&&Xe!==void 0?Xe:(Ie=i.getFirstKey)===null||Ie===void 0?void 0:Ie.call(i))}else!G&&Q.current&&(Q.current.scrollTop=me.current.top,Q.current.scrollLeft=me.current.left);if(t.focusedKey!=null&&Q.current){let Ce=G1(c,t.focusedKey);Ce instanceof HTMLElement&&(!Ce.contains(document.activeElement)&&!N&&pl(Ce),Sm()==="keyboard"&&lw(Ce,{containingElement:c.current}))}}},pe=xe=>{xe.currentTarget.contains(xe.relatedTarget)||t.setFocused(!1)},Se=V.useRef(!1);gm(c,ZU,N?xe=>{let{detail:Te}=xe;xe.stopPropagation(),t.setFocused(!0),(Te==null?void 0:Te.focusStrategy)==="first"&&(Se.current=!0)}:void 0);let $e=Zs(()=>{var xe,Te;let Ie=(Te=(xe=i.getFirstKey)===null||xe===void 0?void 0:xe.call(i))!==null&&Te!==void 0?Te:null;Ie==null?(mR(c.current),t.collection.size>0&&(Se.current=!1)):(t.setFocusedKey(Ie),Se.current=!1)});RD(()=>{Se.current&&$e()},[t.collection,$e]);let Le=Zs(()=>{t.collection.size>0&&(Se.current=!1)});RD(()=>{Le()},[t.focusedKey,Le]),gm(c,KU,N?xe=>{var Te;xe.stopPropagation(),t.setFocused(!1),!((Te=xe.detail)===null||Te===void 0)&&Te.clearFocusKey&&t.setFocusedKey(null)}:void 0);const re=V.useRef(h),Ee=V.useRef(!1);V.useEffect(()=>{if(re.current){var xe,Te;let Xe=null;var Ie;h==="first"&&(Xe=(Ie=(xe=i.getFirstKey)===null||xe===void 0?void 0:xe.call(i))!==null&&Ie!==void 0?Ie:null);var Me;h==="last"&&(Xe=(Me=(Te=i.getLastKey)===null||Te===void 0?void 0:Te.call(i))!==null&&Me!==void 0?Me:null);let Ce=t.selectedKeys;if(Ce.size){for(let He of Ce)if(t.canSelectItem(He)){Xe=He;break}}t.setFocused(!0),t.setFocusedKey(Xe),Xe==null&&!N&&c.current&&r0(c.current),t.collection.size>0&&(re.current=!1,Ee.current=!0)}});let se=V.useRef(t.focusedKey);V.useEffect(()=>{if(t.isFocused&&t.focusedKey!=null&&(t.focusedKey!==se.current||Ee.current)&&Q.current&&c.current){let xe=Sm(),Te=G1(c,t.focusedKey);if(!(Te instanceof HTMLElement))return;(xe==="keyboard"||Ee.current)&&(Hk(Q.current,Te),xe!=="virtual"&&lw(Te,{containingElement:c.current}))}!N&&t.isFocused&&t.focusedKey==null&&se.current!=null&&c.current&&r0(c.current),se.current=t.focusedKey,Ee.current=!1}),gm(c,"react-aria-focus-scope-restore",xe=>{xe.preventDefault(),t.setFocused(!0)});let ue={onKeyDown:de,onFocus:be,onBlur:pe,onMouseDown(xe){Q.current===xe.target&&xe.preventDefault()}},{typeSelectProps:ke}=$X({keyboardDelegate:i,selectionManager:t});B||(ue=xr(ke,ue));let ce;N||(ce=t.focusedKey==null?0:-1);let Pe=IX(t.collection);return{collectionProps:xr(ue,{tabIndex:ce,"data-collection":Pe})}}function jX(e){let{id:t,selectionManager:i,key:c,ref:h,shouldSelectOnPressUp:_,shouldUseVirtualFocus:w,focus:a,isDisabled:A,onAction:B,allowsDifferentPressOrigin:N,linkBehavior:F="action"}=e,G=Fw();t=Bs(t);let Q=Me=>{if(Me.pointerType==="keyboard"&&jS(Me))i.toggleSelection(c);else{if(i.selectionMode==="none")return;if(i.isLink(c)){if(F==="selection"&&h.current){let Xe=i.getItemProps(c);G.open(h.current,Me,Xe.href,Xe.routerOptions),i.setSelectedKeys(i.selectedKeys);return}else if(F==="override"||F==="none")return}i.selectionMode==="single"?i.isSelected(c)&&!i.disallowEmptySelection?i.toggleSelection(c):i.replaceSelection(c):Me&&Me.shiftKey?i.extendSelection(c):i.selectionBehavior==="toggle"||Me&&(My(Me)||Me.pointerType==="touch"||Me.pointerType==="virtual")?i.toggleSelection(c):i.replaceSelection(c)}};V.useEffect(()=>{c===i.focusedKey&&i.isFocused&&(w?mR(h.current):a?a():document.activeElement!==h.current&&h.current&&r0(h.current))},[h,c,i.focusedKey,i.childFocusStrategy,i.isFocused,w]),A=A||i.isDisabled(c);let te={};!w&&!A?te={tabIndex:c===i.focusedKey?0:-1,onFocus(Me){Me.target===h.current&&i.setFocusedKey(c)}}:A&&(te.onMouseDown=Me=>{Me.preventDefault()});let Y=i.isLink(c)&&F==="override",oe=i.isLink(c)&&F!=="selection"&&F!=="none",de=!A&&i.canSelectItem(c)&&!Y,me=(B||oe)&&!A,be=me&&(i.selectionBehavior==="replace"?!de:!de||i.isEmpty),pe=me&&de&&i.selectionBehavior==="replace",Se=be||pe,$e=V.useRef(null),Le=Se&&de,re=V.useRef(!1),Ee=V.useRef(!1),se=Me=>{if(B&&B(),oe&&h.current){let Xe=i.getItemProps(c);G.open(h.current,Me,Xe.href,Xe.routerOptions)}},ue={};_?(ue.onPressStart=Me=>{$e.current=Me.pointerType,re.current=Le,Me.pointerType==="keyboard"&&(!Se||FM())&&Q(Me)},N?(ue.onPressUp=be?void 0:Me=>{Me.pointerType==="mouse"&&de&&Q(Me)},ue.onPress=be?se:Me=>{Me.pointerType!=="keyboard"&&Me.pointerType!=="mouse"&&de&&Q(Me)}):ue.onPress=Me=>{if(be||pe&&Me.pointerType!=="mouse"){if(Me.pointerType==="keyboard"&&!OM())return;se(Me)}else Me.pointerType!=="keyboard"&&de&&Q(Me)}):(ue.onPressStart=Me=>{$e.current=Me.pointerType,re.current=Le,Ee.current=be,de&&(Me.pointerType==="mouse"&&!be||Me.pointerType==="keyboard"&&(!me||FM()))&&Q(Me)},ue.onPress=Me=>{(Me.pointerType==="touch"||Me.pointerType==="pen"||Me.pointerType==="virtual"||Me.pointerType==="keyboard"&&Se&&OM()||Me.pointerType==="mouse"&&Ee.current)&&(Se?se(Me):de&&Q(Me))}),te["data-collection"]=zX(i.collection),te["data-key"]=c,ue.preventFocusOnPress=w,w&&(ue=xr(ue,{onPressStart(Me){Me.pointerType!=="touch"&&(i.setFocused(!0),i.setFocusedKey(c))},onPress(Me){Me.pointerType==="touch"&&(i.setFocused(!0),i.setFocusedKey(c))}}));let{pressProps:ke,isPressed:ce}=wu(ue),Pe=pe?Me=>{$e.current==="mouse"&&(Me.stopPropagation(),Me.preventDefault(),se(Me))}:void 0,{longPressProps:xe}=dR({isDisabled:!Le,onLongPress(Me){Me.pointerType==="touch"&&(Q(Me),i.setSelectionBehavior("toggle"))}}),Te=Me=>{$e.current==="touch"&&re.current&&Me.preventDefault()},Ie=i.isLink(c)?Me=>{wm.isOpening||Me.preventDefault()}:void 0;return{itemProps:xr(te,de||be||w?ke:{},Le?xe:{},{onDoubleClick:Pe,onDragStartCapture:Te,onClick:Ie,id:t},w?{onMouseDown:Me=>Me.preventDefault()}:void 0),isPressed:ce,isSelected:i.isSelected(c),isFocused:i.isFocused&&i.focusedKey===c,isDisabled:A,allowsSelection:de,hasAction:Se}}function OM(){let e=window.event;return(e==null?void 0:e.key)==="Enter"}function FM(){let e=window.event;return(e==null?void 0:e.key)===" "||(e==null?void 0:e.code)==="Space"}class VM{getItemRect(t){let i=this.ref.current;if(!i)return null;let c=t!=null?G1(this.ref,t):null;if(!c)return null;let h=i.getBoundingClientRect(),_=c.getBoundingClientRect();return{x:_.left-h.left+i.scrollLeft,y:_.top-h.top+i.scrollTop,width:_.width,height:_.height}}getContentSize(){let t=this.ref.current;var i,c;return{width:(i=t==null?void 0:t.scrollWidth)!==null&&i!==void 0?i:0,height:(c=t==null?void 0:t.scrollHeight)!==null&&c!==void 0?c:0}}getVisibleRect(){let t=this.ref.current;var i,c,h,_;return{x:(i=t==null?void 0:t.scrollLeft)!==null&&i!==void 0?i:0,y:(c=t==null?void 0:t.scrollTop)!==null&&c!==void 0?c:0,width:(h=t==null?void 0:t.offsetWidth)!==null&&h!==void 0?h:0,height:(_=t==null?void 0:t.offsetHeight)!==null&&_!==void 0?_:0}}constructor(t){this.ref=t}}class OX{isDisabled(t){var i;return this.disabledBehavior==="all"&&(((i=t.props)===null||i===void 0?void 0:i.isDisabled)||this.disabledKeys.has(t.key))}findNextNonDisabled(t,i){let c=t;for(;c!=null;){let h=this.collection.getItem(c);if((h==null?void 0:h.type)==="item"&&!this.isDisabled(h))return c;c=i(c)}return null}getNextKey(t){let i=t;return i=this.collection.getKeyAfter(i),this.findNextNonDisabled(i,c=>this.collection.getKeyAfter(c))}getPreviousKey(t){let i=t;return i=this.collection.getKeyBefore(i),this.findNextNonDisabled(i,c=>this.collection.getKeyBefore(c))}findKey(t,i,c){let h=t,_=this.layoutDelegate.getItemRect(h);if(!_||h==null)return null;let w=_;do{if(h=i(h),h==null)break;_=this.layoutDelegate.getItemRect(h)}while(_&&c(w,_)&&h!=null);return h}isSameRow(t,i){return t.y===i.y||t.x!==i.x}isSameColumn(t,i){return t.x===i.x||t.y!==i.y}getKeyBelow(t){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(t,i=>this.getNextKey(i),this.isSameRow):this.getNextKey(t)}getKeyAbove(t){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(t,i=>this.getPreviousKey(i),this.isSameRow):this.getPreviousKey(t)}getNextColumn(t,i){return i?this.getPreviousKey(t):this.getNextKey(t)}getKeyRightOf(t){let i=this.direction==="ltr"?"getKeyRightOf":"getKeyLeftOf";return this.layoutDelegate[i]?(t=this.layoutDelegate[i](t),this.findNextNonDisabled(t,c=>this.layoutDelegate[i](c))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(t,this.direction==="rtl"):this.findKey(t,c=>this.getNextColumn(c,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(t,this.direction==="rtl"):null}getKeyLeftOf(t){let i=this.direction==="ltr"?"getKeyLeftOf":"getKeyRightOf";return this.layoutDelegate[i]?(t=this.layoutDelegate[i](t),this.findNextNonDisabled(t,c=>this.layoutDelegate[i](c))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(t,this.direction==="ltr"):this.findKey(t,c=>this.getNextColumn(c,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(t,this.direction==="ltr"):null}getFirstKey(){let t=this.collection.getFirstKey();return this.findNextNonDisabled(t,i=>this.collection.getKeyAfter(i))}getLastKey(){let t=this.collection.getLastKey();return this.findNextNonDisabled(t,i=>this.collection.getKeyBefore(i))}getKeyPageAbove(t){let i=this.ref.current,c=this.layoutDelegate.getItemRect(t);if(!c)return null;if(i&&!s_(i))return this.getFirstKey();let h=t;if(this.orientation==="horizontal"){let _=Math.max(0,c.x+c.width-this.layoutDelegate.getVisibleRect().width);for(;c&&c.x>_&&h!=null;)h=this.getKeyAbove(h),c=h==null?null:this.layoutDelegate.getItemRect(h)}else{let _=Math.max(0,c.y+c.height-this.layoutDelegate.getVisibleRect().height);for(;c&&c.y>_&&h!=null;)h=this.getKeyAbove(h),c=h==null?null:this.layoutDelegate.getItemRect(h)}return h??this.getFirstKey()}getKeyPageBelow(t){let i=this.ref.current,c=this.layoutDelegate.getItemRect(t);if(!c)return null;if(i&&!s_(i))return this.getLastKey();let h=t;if(this.orientation==="horizontal"){let _=Math.min(this.layoutDelegate.getContentSize().width,c.y-c.width+this.layoutDelegate.getVisibleRect().width);for(;c&&c.x<_&&h!=null;)h=this.getKeyBelow(h),c=h==null?null:this.layoutDelegate.getItemRect(h)}else{let _=Math.min(this.layoutDelegate.getContentSize().height,c.y-c.height+this.layoutDelegate.getVisibleRect().height);for(;c&&c.y<_&&h!=null;)h=this.getKeyBelow(h),c=h==null?null:this.layoutDelegate.getItemRect(h)}return h??this.getLastKey()}getKeyForSearch(t,i){if(!this.collator)return null;let c=this.collection,h=i||this.getFirstKey();for(;h!=null;){let _=c.getItem(h);if(!_)return null;let w=_.textValue.slice(0,t.length);if(_.textValue&&this.collator.compare(w,t)===0)return h;h=this.getNextKey(h)}return null}constructor(...t){if(t.length===1){let i=t[0];this.collection=i.collection,this.ref=i.ref,this.collator=i.collator,this.disabledKeys=i.disabledKeys||new Set,this.disabledBehavior=i.disabledBehavior||"all",this.orientation=i.orientation||"vertical",this.direction=i.direction,this.layout=i.layout||"stack",this.layoutDelegate=i.layoutDelegate||new VM(i.ref)}else this.collection=t[0],this.disabledKeys=t[1],this.ref=t[2],this.collator=t[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all",this.layoutDelegate=new VM(this.ref);this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function FX(e){let{selectionManager:t,collection:i,disabledKeys:c,ref:h,keyboardDelegate:_,layoutDelegate:w}=e,a=Zk({usage:"search",sensitivity:"base"}),A=t.disabledBehavior,B=V.useMemo(()=>_||new OX({collection:i,disabledKeys:c,disabledBehavior:A,ref:h,collator:a,layoutDelegate:w}),[_,w,i,c,h,a,A]),{collectionProps:N}=NX({...e,ref:h,selectionManager:t,keyboardDelegate:B});return{listProps:N}}var VX=e=>b.jsxs("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:[b.jsx("path",{d:"M7.75 2.5a.75.75 0 0 0-1.5 0v1.58c-1.44.115-2.384.397-3.078 1.092c-.695.694-.977 1.639-1.093 3.078h19.842c-.116-1.44-.398-2.384-1.093-3.078c-.694-.695-1.639-.977-3.078-1.093V2.5a.75.75 0 0 0-1.5 0v1.513C15.585 4 14.839 4 14 4h-4c-.839 0-1.585 0-2.25.013z",fill:"currentColor"}),b.jsx("path",{clipRule:"evenodd",d:"M2 12c0-.839 0-1.585.013-2.25h19.974C22 10.415 22 11.161 22 12v2c0 3.771 0 5.657-1.172 6.828C19.657 22 17.771 22 14 22h-4c-3.771 0-5.657 0-6.828-1.172C2 19.657 2 17.771 2 14zm15 2a1 1 0 1 0 0-2a1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2a1 1 0 0 0 0 2m-4-5a1 1 0 1 1-2 0a1 1 0 0 1 2 0m0 4a1 1 0 1 1-2 0a1 1 0 0 1 2 0m-6-3a1 1 0 1 0 0-2a1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2a1 1 0 0 0 0 2",fill:"currentColor",fillRule:"evenodd"})]}),t7=e=>b.jsx("svg",{className:"fill-current",fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...e,children:b.jsx("path",{clipRule:"evenodd",d:"M3 10.417C3 7.219 3 5.62 3.378 5.082C3.755 4.545 5.258 4.03 8.265 3.001L8.838 2.805C10.405 2.268 11.188 2 12 2C12.812 2 13.595 2.268 15.162 2.805L15.735 3.001C18.742 4.03 20.245 4.545 20.622 5.082C21 5.62 21 7.22 21 10.417V11.991C21 17.629 16.761 20.366 14.101 21.527C13.38 21.842 13.02 22 12 22C10.98 22 10.62 21.842 9.899 21.527C7.239 20.365 3 17.63 3 11.991V10.417ZM12 7.25C12.1989 7.25 12.3897 7.32902 12.5303 7.46967C12.671 7.61032 12.75 7.80109 12.75 8V12C12.75 12.1989 12.671 12.3897 12.5303 12.5303C12.3897 12.671 12.1989 12.75 12 12.75C11.8011 12.75 11.6103 12.671 11.4697 12.5303C11.329 12.3897 11.25 12.1989 11.25 12V8C11.25 7.80109 11.329 7.61032 11.4697 7.46967C11.6103 7.32902 11.8011 7.25 12 7.25ZM12 16C12.2652 16 12.5196 15.8946 12.7071 15.7071C12.8946 15.5196 13 15.2652 13 15C13 14.7348 12.8946 14.4804 12.7071 14.2929C12.5196 14.1054 12.2652 14 12 14C11.7348 14 11.4804 14.1054 11.2929 14.2929C11.1054 14.4804 11 14.7348 11 15C11 15.2652 11.1054 15.5196 11.2929 15.7071C11.4804 15.8946 11.7348 16 12 16Z",fill:"currentColor",fillRule:"evenodd"})}),r7=e=>b.jsx("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...e,children:b.jsx("path",{d:`
          M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2Z
          M16.78 9.7L11.11 15.37C10.97 15.51 10.78 15.59 10.58 15.59C10.38 15.59 10.19 15.51 10.05 15.37L7.22 12.54
          C6.93 12.25 6.93 11.77 7.22 11.48C7.51 11.19 7.99 11.19 8.28 11.48L10.58 13.78L15.72 8.64
          C16.01 8.35 16.49 8.35 16.78 8.64C17.07 8.93 17.07 9.4 16.78 9.7Z
        `})}),UM=e=>b.jsx("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...e,children:b.jsx("path",{d:"M12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22ZM12.75 16C12.75 16.41 12.41 16.75 12 16.75C11.59 16.75 11.25 16.41 11.25 16L11.25 11C11.25 10.59 11.59 10.25 12 10.25C12.41 10.25 12.75 10.59 12.75 11L12.75 16ZM11.08 7.62C11.13 7.49 11.2 7.39 11.29 7.29C11.39 7.2 11.5 7.13 11.62 7.08C11.74 7.03 11.87 7 12 7C12.13 7 12.26 7.03 12.38 7.08C12.5 7.13 12.61 7.2 12.71 7.29C12.8 7.39 12.87 7.49 12.92 7.62C12.97 7.74 13 7.87 13 8C13 8.13 12.97 8.26 12.92 8.38C12.87 8.5 12.8 8.61 12.71 8.71C12.61 8.8 12.5 8.87 12.38 8.92C12.14 9.02 11.86 9.02 11.62 8.92C11.5 8.87 11.39 8.8 11.29 8.71C11.2 8.61 11.13 8.5 11.08 8.38C11.03 8.26 11 8.13 11 8C11 7.87 11.03 7.74 11.08 7.62Z"})}),l4=e=>b.jsx("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...e,children:b.jsx("path",{d:"M12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22ZM12.75 16C12.75 16.41 12.41 16.75 12 16.75C11.59 16.75 11.25 16.41 11.25 16L11.25 11C11.25 10.59 11.59 10.25 12 10.25C12.41 10.25 12.75 10.59 12.75 11L12.75 16ZM11.08 7.62C11.13 7.49 11.2 7.39 11.29 7.29C11.39 7.2 11.5 7.13 11.62 7.08C11.74 7.03 11.87 7 12 7C12.13 7 12.26 7.03 12.38 7.08C12.5 7.13 12.61 7.2 12.71 7.29C12.8 7.39 12.87 7.49 12.92 7.62C12.97 7.74 13 7.87 13 8C13 8.13 12.97 8.26 12.92 8.38C12.87 8.5 12.8 8.61 12.71 8.71C12.61 8.8 12.5 8.87 12.38 8.92C12.14 9.02 11.86 9.02 11.62 8.92C11.5 8.87 11.39 8.8 11.29 8.71C11.2 8.61 11.13 8.5 11.08 8.38C11.03 8.26 11 8.13 11 8C11 7.87 11.03 7.74 11.08 7.62Z"})}),UX=({strokeWidth:e=1.5,...t})=>b.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:e,viewBox:"0 0 24 24",width:"1em",...t,children:b.jsx("path",{d:"m18 15-6-6-6 6"})}),pT=e=>b.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:b.jsx("path",{d:"M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z",fill:"currentColor"})}),mT=e=>{const{isSelected:t,isIndeterminate:i,disableAnimation:c,...h}=e;return b.jsx("svg",{"aria-hidden":"true",className:"fill-current",fill:"none",focusable:"false",height:"1em",role:"presentation",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:"1em",...h,children:b.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})},n7=e=>b.jsx("svg",{className:"fill-current",fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",...e,children:b.jsx("path",{d:"M17.51 3.85L11.57 0.42C10.6 -0.14 9.4 -0.14 8.42 0.42L2.49 3.85C1.52 4.41 0.919998 5.45 0.919998 6.58V13.42C0.919998 14.54 1.52 15.58 2.49 16.15L8.43 19.58C9.4 20.14 10.6 20.14 11.58 19.58L17.52 16.15C18.49 15.59 19.09 14.55 19.09 13.42V6.58C19.08 5.45 18.48 4.42 17.51 3.85ZM9.25 5.75C9.25 5.34 9.59 5 10 5C10.41 5 10.75 5.34 10.75 5.75V11C10.75 11.41 10.41 11.75 10 11.75C9.59 11.75 9.25 11.41 9.25 11V5.75ZM10.92 14.63C10.87 14.75 10.8 14.86 10.71 14.96C10.52 15.15 10.27 15.25 10 15.25C9.87 15.25 9.74 15.22 9.62 15.17C9.49 15.12 9.39 15.05 9.29 14.96C9.2 14.86 9.13 14.75 9.07 14.63C9.02 14.51 9 14.38 9 14.25C9 13.99 9.1 13.73 9.29 13.54C9.39 13.45 9.49 13.38 9.62 13.33C9.99 13.17 10.43 13.26 10.71 13.54C10.8 13.64 10.87 13.74 10.92 13.87C10.97 13.99 11 14.12 11 14.25C11 14.38 10.97 14.51 10.92 14.63Z"})}),GX=({strokeWidth:e=1.5,...t})=>b.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:e,viewBox:"0 0 24 24",width:"1em",...t,children:b.jsx("path",{d:"m6 9 6 6 6-6"})});function HX(){const[e,t]=V.useState({width:null,height:null}),i=V.useRef(null);return[V.useCallback(h=>{if(i.current&&(i.current.disconnect(),i.current=null),(h==null?void 0:h.nodeType)===Node.ELEMENT_NODE){const _=new ResizeObserver(([w])=>{if(w&&w.borderBoxSize){const{inlineSize:a,blockSize:A}=w.borderBoxSize[0];t({width:a,height:A})}});_.observe(h),i.current=_}},[]),e]}var a7=V.forwardRef((e,t)=>{const{children:i,...c}=e;let[h,_]=HX();return b.jsx(Tu,{features:DZ,children:b.jsx(jl.div,{ref:t,animate:{width:_.width&&(_==null?void 0:_.width)>0?_.width:"auto",height:_.height&&_.height>0?_.height:"auto"},children:b.jsx("div",{ref:h,...c,children:i})})})});a7.displayName="HeroUI - ResizablePanel";var Xg={ease:[.36,.66,.4,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1]},nx={scaleSpring:{enter:{transform:"scale(1)",opacity:1,transition:{type:"spring",bounce:0,duration:.2}},exit:{transform:"scale(0.85)",opacity:0,transition:{type:"easeOut",duration:.15}}},scaleSpringOpacity:{initial:{opacity:0,transform:"scale(0.8)"},enter:{opacity:1,transform:"scale(1)",transition:{type:"spring",bounce:0,duration:.3}},exit:{opacity:0,transform:"scale(0.96)",transition:{type:"easeOut",bounce:0,duration:.15}}},fade:{enter:{opacity:1,transition:{duration:.4,ease:Xg.ease}},exit:{opacity:0,transition:{duration:.3,ease:Xg.ease}}}};class qX{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(t){let i=this.keyMap.get(t);var c;return i&&(c=i.prevKey)!==null&&c!==void 0?c:null}getKeyAfter(t){let i=this.keyMap.get(t);var c;return i&&(c=i.nextKey)!==null&&c!==void 0?c:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(t){var i;return(i=this.keyMap.get(t))!==null&&i!==void 0?i:null}at(t){const i=[...this.getKeys()];return this.getItem(i[t])}constructor(t,{expandedKeys:i}={}){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.iterable=t,i=i||new Set;let c=a=>{if(this.keyMap.set(a.key,a),a.childNodes&&(a.type==="section"||i.has(a.key)))for(let A of a.childNodes)c(A)};for(let a of t)c(a);let h=null,_=0;for(let[a,A]of this.keyMap)h?(h.nextKey=a,A.prevKey=h.key):(this.firstKey=a,A.prevKey=void 0),A.type==="item"&&(A.index=_++),h=A,h.nextKey=void 0;var w;this.lastKey=(w=h==null?void 0:h.key)!==null&&w!==void 0?w:null}}class pd extends Set{constructor(t,i,c){super(t),t instanceof pd?(this.anchorKey=i??t.anchorKey,this.currentKey=c??t.currentKey):(this.anchorKey=i??null,this.currentKey=c??null)}}function WX(e,t){if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0}function KX(e){let{selectionMode:t="none",disallowEmptySelection:i=!1,allowDuplicateSelectionEvents:c,selectionBehavior:h="toggle",disabledBehavior:_="all"}=e,w=V.useRef(!1),[,a]=V.useState(!1),A=V.useRef(null),B=V.useRef(null),[,N]=V.useState(null),F=V.useMemo(()=>GM(e.selectedKeys),[e.selectedKeys]),G=V.useMemo(()=>GM(e.defaultSelectedKeys,new pd),[e.defaultSelectedKeys]),[Q,te]=Xs(F,G,e.onSelectionChange),Y=V.useMemo(()=>e.disabledKeys?new Set(e.disabledKeys):new Set,[e.disabledKeys]),[oe,de]=V.useState(h);h==="replace"&&oe==="toggle"&&typeof Q=="object"&&Q.size===0&&de("replace");let me=V.useRef(h);return V.useEffect(()=>{h!==me.current&&(de(h),me.current=h)},[h]),{selectionMode:t,disallowEmptySelection:i,selectionBehavior:oe,setSelectionBehavior:de,get isFocused(){return w.current},setFocused(be){w.current=be,a(be)},get focusedKey(){return A.current},get childFocusStrategy(){return B.current},setFocusedKey(be,pe="first"){A.current=be,B.current=pe,N(be)},selectedKeys:Q,setSelectedKeys(be){(c||!WX(be,Q))&&te(be)},disabledKeys:Y,disabledBehavior:_}}function GM(e,t){return e?e==="all"?"all":new pd(e):t}function i7(e){return null}i7.getCollectionNode=function*(t,i){let{childItems:c,title:h,children:_}=t,w=t.title||t.children,a=t.textValue||(typeof w=="string"?w:"")||t["aria-label"]||"";!a&&!(i!=null&&i.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:t,rendered:w,textValue:a,"aria-label":t["aria-label"],hasChildNodes:ZX(t),*childNodes(){if(c)for(let A of c)yield{type:"item",value:A};else if(h){let A=[];rn.Children.forEach(_,B=>{A.push({type:"item",element:B})}),yield*A}}}};function ZX(e){return e.hasChildItems!=null?e.hasChildItems:!!(e.childItems||e.title&&rn.Children.count(e.children)>0)}let XX=i7;class YX{build(t,i){return this.context=i,HM(()=>this.iterateCollection(t))}*iterateCollection(t){let{children:i,items:c}=t;if(rn.isValidElement(i)&&i.type===rn.Fragment)yield*this.iterateCollection({children:i.props.children,items:c});else if(typeof i=="function"){if(!c)throw new Error("props.children was a function but props.items is missing");let h=0;for(let _ of c)yield*this.getFullNode({value:_,index:h},{renderer:i}),h++}else{let h=[];rn.Children.forEach(i,w=>{w&&h.push(w)});let _=0;for(let w of h){let a=this.getFullNode({element:w,index:_},{});for(let A of a)_++,yield A}}}getKey(t,i,c,h){if(t.key!=null)return t.key;if(i.type==="cell"&&i.key!=null)return`${h}${i.key}`;let _=i.value;if(_!=null){var w;let a=(w=_.key)!==null&&w!==void 0?w:_.id;if(a==null)throw new Error("No key found for item");return a}return h?`${h}.${i.index}`:`$.${i.index}`}getChildState(t,i){return{renderer:i.renderer||t.renderer}}*getFullNode(t,i,c,h){if(rn.isValidElement(t.element)&&t.element.type===rn.Fragment){let oe=[];rn.Children.forEach(t.element.props.children,me=>{oe.push(me)});var _;let de=(_=t.index)!==null&&_!==void 0?_:0;for(const me of oe)yield*this.getFullNode({element:me,index:de++},i,c,h);return}let w=t.element;if(!w&&t.value&&i&&i.renderer){let oe=this.cache.get(t.value);if(oe&&(!oe.shouldInvalidate||!oe.shouldInvalidate(this.context))){oe.index=t.index,oe.parentKey=h?h.key:null,yield oe;return}w=i.renderer(t.value)}if(rn.isValidElement(w)){let oe=w.type;if(typeof oe!="function"&&typeof oe.getCollectionNode!="function"){let pe=w.type;throw new Error(`Unknown element <${pe}> in collection.`)}let de=oe.getCollectionNode(w.props,this.context);var a;let me=(a=t.index)!==null&&a!==void 0?a:0,be=de.next();for(;!be.done&&be.value;){let pe=be.value;t.index=me;var A;let Se=(A=pe.key)!==null&&A!==void 0?A:null;Se==null&&(Se=pe.element?null:this.getKey(w,t,i,c));let Le=[...this.getFullNode({...pe,key:Se,index:me,wrapper:JX(t.wrapper,pe.wrapper)},this.getChildState(i,pe),c?`${c}${w.key}`:w.key,h)];for(let re of Le){var B,N;re.value=(N=(B=pe.value)!==null&&B!==void 0?B:t.value)!==null&&N!==void 0?N:null,re.value&&this.cache.set(re.value,re);var F;if(t.type&&re.type!==t.type)throw new Error(`Unsupported type <${c4(re.type)}> in <${c4((F=h==null?void 0:h.type)!==null&&F!==void 0?F:"unknown parent type")}>. Only <${c4(t.type)}> is supported.`);me++,yield re}be=de.next(Le)}return}if(t.key==null||t.type==null)return;let G=this;var Q,te;let Y={type:t.type,props:t.props,key:t.key,parentKey:h?h.key:null,value:(Q=t.value)!==null&&Q!==void 0?Q:null,level:h?h.level+1:0,index:t.index,rendered:t.rendered,textValue:(te=t.textValue)!==null&&te!==void 0?te:"","aria-label":t["aria-label"],wrapper:t.wrapper,shouldInvalidate:t.shouldInvalidate,hasChildNodes:t.hasChildNodes||!1,childNodes:HM(function*(){if(!t.hasChildNodes||!t.childNodes)return;let oe=0;for(let de of t.childNodes()){de.key!=null&&(de.key=`${Y.key}${de.key}`);let me=G.getFullNode({...de,index:oe},G.getChildState(i,de),Y.key,Y);for(let be of me)oe++,yield be}})};yield Y}constructor(){this.cache=new WeakMap}}function HM(e){let t=[],i=null;return{*[Symbol.iterator](){for(let c of t)yield c;i||(i=e());for(let c of i)t.push(c),yield c}}}function JX(e,t){if(e&&t)return i=>e(t(i));if(e)return e;if(t)return t}function c4(e){return e[0].toUpperCase()+e.slice(1)}function QX(e,t,i){let c=V.useMemo(()=>new YX,[]),{children:h,items:_,collection:w}=e;return V.useMemo(()=>{if(w)return w;let A=c.build({children:h,items:_},i);return t(A)},[c,h,_,w,i,t])}function s7(e,t){return typeof t.getChildren=="function"?t.getChildren(e.key):e.childNodes}function eY(e){return tY(e)}function tY(e,t){for(let i of e)return i}function u4(e,t,i){if(t.parentKey===i.parentKey)return t.index-i.index;let c=[...qM(e,t),t],h=[...qM(e,i),i],_=c.slice(0,h.length).findIndex((w,a)=>w!==h[a]);return _!==-1?(t=c[_],i=h[_],t.index-i.index):c.findIndex(w=>w===i)>=0?1:(h.findIndex(w=>w===t)>=0,-1)}function qM(e,t){let i=[],c=t;for(;(c==null?void 0:c.parentKey)!=null;)c=e.getItem(c.parentKey),c&&i.unshift(c);return i}const WM=new WeakMap;function rY(e){let t=WM.get(e);if(t!=null)return t;let i=0,c=h=>{for(let _ of h)_.type==="section"?c(s7(_,e)):i++};return c(e),WM.set(e,i),i}class gT{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(t){this.state.setSelectionBehavior(t)}get isFocused(){return this.state.isFocused}setFocused(t){this.state.setFocused(t)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(t,i){(t==null||this.collection.getItem(t))&&this.state.setFocusedKey(t,i)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(t){if(this.state.selectionMode==="none")return!1;let i=this.getKey(t);return i==null?!1:this.state.selectedKeys==="all"?this.canSelectItem(i):this.state.selectedKeys.has(i)}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let t=this.getSelectAllKeys(),i=this.state.selectedKeys;return this._isSelectAll=t.every(c=>i.has(c)),this._isSelectAll}get firstSelectedKey(){let t=null;for(let c of this.state.selectedKeys){let h=this.collection.getItem(c);(!t||h&&u4(this.collection,h,t)<0)&&(t=h)}var i;return(i=t==null?void 0:t.key)!==null&&i!==void 0?i:null}get lastSelectedKey(){let t=null;for(let c of this.state.selectedKeys){let h=this.collection.getItem(c);(!t||h&&u4(this.collection,h,t)>0)&&(t=h)}var i;return(i=t==null?void 0:t.key)!==null&&i!==void 0?i:null}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(t){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(t);return}let i=this.getKey(t);if(i==null)return;let c;if(this.state.selectedKeys==="all")c=new pd([i],i,i);else{let w=this.state.selectedKeys;var h;let a=(h=w.anchorKey)!==null&&h!==void 0?h:i;c=new pd(w,a,i);var _;for(let A of this.getKeyRange(a,(_=w.currentKey)!==null&&_!==void 0?_:i))c.delete(A);for(let A of this.getKeyRange(i,a))this.canSelectItem(A)&&c.add(A)}this.state.setSelectedKeys(c)}getKeyRange(t,i){let c=this.collection.getItem(t),h=this.collection.getItem(i);return c&&h?u4(this.collection,c,h)<=0?this.getKeyRangeInternal(t,i):this.getKeyRangeInternal(i,t):[]}getKeyRangeInternal(t,i){var c;if(!((c=this.layoutDelegate)===null||c===void 0)&&c.getKeyRange)return this.layoutDelegate.getKeyRange(t,i);let h=[],_=t;for(;_!=null;){let w=this.collection.getItem(_);if(w&&(w.type==="item"||w.type==="cell"&&this.allowsCellSelection)&&h.push(_),_===i)return h;_=this.collection.getKeyAfter(_)}return[]}getKey(t){let i=this.collection.getItem(t);if(!i||i.type==="cell"&&this.allowsCellSelection)return t;for(;i&&i.type!=="item"&&i.parentKey!=null;)i=this.collection.getItem(i.parentKey);return!i||i.type!=="item"?null:i.key}toggleSelection(t){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(t)){this.replaceSelection(t);return}let i=this.getKey(t);if(i==null)return;let c=new pd(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);c.has(i)?c.delete(i):this.canSelectItem(i)&&(c.add(i),c.anchorKey=i,c.currentKey=i),!(this.disallowEmptySelection&&c.size===0)&&this.state.setSelectedKeys(c)}replaceSelection(t){if(this.selectionMode==="none")return;let i=this.getKey(t);if(i==null)return;let c=this.canSelectItem(i)?new pd([i],i,i):new pd;this.state.setSelectedKeys(c)}setSelectedKeys(t){if(this.selectionMode==="none")return;let i=new pd;for(let c of t){let h=this.getKey(c);if(h!=null&&(i.add(h),this.selectionMode==="single"))break}this.state.setSelectedKeys(i)}getSelectAllKeys(){let t=[],i=c=>{for(;c!=null;){if(this.canSelectItem(c)){var h;let w=this.collection.getItem(c);(w==null?void 0:w.type)==="item"&&t.push(c);var _;w!=null&&w.hasChildNodes&&(this.allowsCellSelection||w.type!=="item")&&i((_=(h=eY(s7(w,this.collection)))===null||h===void 0?void 0:h.key)!==null&&_!==void 0?_:null)}c=this.collection.getKeyAfter(c)}};return i(this.collection.getFirstKey()),t}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new pd)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(t,i){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(t)&&!this.disallowEmptySelection?this.toggleSelection(t):this.replaceSelection(t):this.selectionBehavior==="toggle"||i&&(i.pointerType==="touch"||i.pointerType==="virtual")?this.toggleSelection(t):this.replaceSelection(t))}isSelectionEqual(t){if(t===this.state.selectedKeys)return!0;let i=this.selectedKeys;if(t.size!==i.size)return!1;for(let c of t)if(!i.has(c))return!1;for(let c of i)if(!t.has(c))return!1;return!0}canSelectItem(t){var i;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(t))return!1;let c=this.collection.getItem(t);return!(!c||!(c==null||(i=c.props)===null||i===void 0)&&i.isDisabled||c.type==="cell"&&!this.allowsCellSelection)}isDisabled(t){var i,c;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(t)||!!(!((c=this.collection.getItem(t))===null||c===void 0||(i=c.props)===null||i===void 0)&&i.isDisabled))}isLink(t){var i,c;return!!(!((c=this.collection.getItem(t))===null||c===void 0||(i=c.props)===null||i===void 0)&&i.href)}getItemProps(t){var i;return(i=this.collection.getItem(t))===null||i===void 0?void 0:i.props}withCollection(t){return new gT(t,this.state,{allowsCellSelection:this.allowsCellSelection,layoutDelegate:this.layoutDelegate||void 0})}constructor(t,i,c){this.collection=t,this.state=i;var h;this.allowsCellSelection=(h=c==null?void 0:c.allowsCellSelection)!==null&&h!==void 0?h:!1,this._isSelectAll=null,this.layoutDelegate=(c==null?void 0:c.layoutDelegate)||null}}function nY(e){let{onExpandedChange:t}=e,[i,c]=Xs(e.expandedKeys?new Set(e.expandedKeys):void 0,e.defaultExpandedKeys?new Set(e.defaultExpandedKeys):new Set,t),h=KX(e),_=V.useMemo(()=>e.disabledKeys?new Set(e.disabledKeys):new Set,[e.disabledKeys]),w=QX(e,V.useCallback(A=>new qX(A,{expandedKeys:i}),[i]),null);return V.useEffect(()=>{h.focusedKey!=null&&!w.getItem(h.focusedKey)&&h.setFocusedKey(null)},[w,h.focusedKey]),{collection:w,expandedKeys:i,disabledKeys:_,toggleKey:A=>{c(aY(i,A))},setExpandedKeys:c,selectionManager:new gT(w,h)}}function aY(e,t){let i=new Set(e);return i.has(t)?i.delete(t):i.add(t),i}function iY(e){let t=Wo(e,{enabled:typeof e.elementType=="string"}),i;return e.orientation==="vertical"&&(i="vertical"),e.elementType!=="hr"?{separatorProps:{...t,role:"separator","aria-orientation":i}}:{separatorProps:t}}function sY(e){const{as:t,className:i,orientation:c,...h}=e;let _=t||"hr";_==="hr"&&c==="vertical"&&(_="div");const{separatorProps:w}=iY({elementType:typeof _=="string"?_:"hr",orientation:c}),a=V.useMemo(()=>SX({orientation:c,className:i}),[c,i]),A=V.useCallback((B={})=>({className:a,role:"separator","data-orientation":c,...w,...h,...B}),[a,c,w,h]);return{Component:_,getDividerProps:A}}var o7=Na((e,t)=>{const{Component:i,getDividerProps:c}=sY({...e});return b.jsx(i,{ref:t,...c()})});o7.displayName="HeroUI.Divider";var oY=o7,yT=e=>{const t={top:{originY:1},bottom:{originY:0},left:{originX:1},right:{originX:0},"top-start":{originX:0,originY:1},"top-end":{originX:1,originY:1},"bottom-start":{originX:0,originY:0},"bottom-end":{originX:1,originY:0},"right-start":{originX:0,originY:0},"right-end":{originX:0,originY:1},"left-start":{originX:1,originY:0},"left-end":{originX:1,originY:1}};return(t==null?void 0:t[e])||{}},l7=e=>({top:"top",bottom:"bottom",left:"left",right:"right","top-start":"top start","top-end":"top end","bottom-start":"bottom start","bottom-end":"bottom end","left-start":"left top","left-end":"left bottom","right-start":"right top","right-end":"right bottom"})[e],lY=(e,t)=>{if(t.includes("-")){const[i]=t.split("-");if(i.includes(e))return!1}return!0},Tw=(e,t)=>{if(t.includes("-")){const[,i]=t.split("-");return`${e}-${i}`}return e},Mv=new WeakMap,Ll=[];function cY(e,t=document.body){let i=new Set(e),c=new Set,h=A=>{for(let G of A.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))i.add(G);let B=G=>{if(i.has(G)||G.parentElement&&c.has(G.parentElement)&&G.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let Q of i)if(G.contains(Q))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},N=document.createTreeWalker(A,NodeFilter.SHOW_ELEMENT,{acceptNode:B}),F=B(A);if(F===NodeFilter.FILTER_ACCEPT&&_(A),F!==NodeFilter.FILTER_REJECT){let G=N.nextNode();for(;G!=null;)_(G),G=N.nextNode()}},_=A=>{var B;let N=(B=Mv.get(A))!=null?B:0;A.getAttribute("aria-hidden")==="true"&&N===0||(N===0&&A.setAttribute("aria-hidden","true"),c.add(A),Mv.set(A,N+1))};Ll.length&&Ll[Ll.length-1].disconnect(),h(t);let w=new MutationObserver(A=>{for(let B of A)if(!(B.type!=="childList"||B.addedNodes.length===0)&&![...i,...c].some(N=>N.contains(B.target))){for(let N of B.removedNodes)N instanceof Element&&(i.delete(N),c.delete(N));for(let N of B.addedNodes)(N instanceof HTMLElement||N instanceof SVGElement)&&(N.dataset.liveAnnouncer==="true"||N.dataset.reactAriaTopLayer==="true")?i.add(N):N instanceof Element&&h(N)}});w.observe(t,{childList:!0,subtree:!0});let a={visibleNodes:i,hiddenNodes:c,observe(){w.observe(t,{childList:!0,subtree:!0})},disconnect(){w.disconnect()}};return Ll.push(a),()=>{w.disconnect();for(let A of c){let B=Mv.get(A);B!=null&&(B===1?(A.removeAttribute("aria-hidden"),Mv.delete(A)):Mv.set(A,B-1))}a===Ll[Ll.length-1]?(Ll.pop(),Ll.length&&Ll[Ll.length-1].observe()):Ll.splice(Ll.indexOf(a),1)}}function uY(e){let t=Ll[Ll.length-1];if(t&&!t.visibleNodes.has(e))return t.visibleNodes.add(e),()=>{t.visibleNodes.delete(e)}}var xT=(e,t,i)=>{const c=t==null?void 0:t.current;if(!c||!c.contains(e)){const h=document.querySelectorAll("body > span[data-focus-scope-start]");let _=[];if(h.forEach(w=>{_.push(w.nextElementSibling)}),_.length===1)return i.close(),!1}return!c||!c.contains(e)},yx=globalThis!=null&&globalThis.document?V.useLayoutEffect:V.useEffect,[Noe,dY]=Th({name:"ButtonGroupContext",strict:!1});function r2(e,t){let{elementType:i="button",isDisabled:c,onPress:h,onPressStart:_,onPressEnd:w,onPressChange:a,preventFocusOnPress:A,allowFocusWhenDisabled:B,onClick:N,href:F,target:G,rel:Q,type:te="button",allowTextSelectionOnPress:Y,role:oe}=e,de;i==="button"?de={type:te,disabled:c}:de={role:"button",href:i==="a"&&!c?F:void 0,target:i==="a"?G:void 0,type:i==="input"?te:void 0,disabled:i==="input"?c:void 0,"aria-disabled":!c||i==="input"?void 0:c,rel:i==="a"?Q:void 0};let me=Mm()||fx();N&&typeof N=="function"&&oe!=="link"&&!(e.hasOwnProperty("aria-expanded")&&e.hasOwnProperty("aria-controls"))&&$w("onClick is deprecated, please use onPress instead. See: https://github.com/heroui-inc/heroui/issues/4292","useButton");const be=re=>{me&&(N==null||N(re)),h==null||h(re)};let{pressProps:pe,isPressed:Se}=wu({onPressStart:_,onPressEnd:w,onPressChange:a,onPress:be,isDisabled:c,preventFocusOnPress:A,allowTextSelectionOnPress:Y,ref:t}),{focusableProps:$e}=M_(e,t);B&&($e.tabIndex=c?-1:$e.tabIndex);let Le=xr($e,pe,Fl(e,{labelable:!0}));return{isPressed:Se,buttonProps:xr(de,Le,{"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],"aria-current":e["aria-current"],onClick:re=>{te==="button"&&me||N==null||N(re)}})}}var hY=()=>km(()=>import("./index-hP_uZtvp.js"),[]).then(e=>e.default),c7=e=>{const{ripples:t=[],motionProps:i,color:c="currentColor",style:h,onClear:_}=e;return b.jsx(b.Fragment,{children:t.map(w=>{const a=h5(.01*w.size,.2,w.size>100?.75:.5);return b.jsx(Tu,{features:hY,children:b.jsx(Uf,{mode:"popLayout",children:b.jsx(jl.span,{animate:{transform:"scale(2)",opacity:0},className:"heroui-ripple",exit:{opacity:0},initial:{transform:"scale(0)",opacity:.35},style:{position:"absolute",backgroundColor:c,borderRadius:"100%",transformOrigin:"center",pointerEvents:"none",overflow:"hidden",inset:0,zIndex:0,top:w.y,left:w.x,width:`${w.size}px`,height:`${w.size}px`,...h},transition:{duration:a},onAnimationComplete:()=>{_(w.key)},...i})})},w.key)})})};c7.displayName="HeroUI.Ripple";var fY=c7;function pY(e={}){const[t,i]=V.useState([]),c=V.useCallback(_=>{const w=_.target,a=Math.max(w.clientWidth,w.clientHeight);i(A=>[...A,{key:XA(A.length.toString()),size:a,x:_.x-a/2,y:_.y-a/2}])},[]),h=V.useCallback(_=>{i(w=>w.filter(a=>a.key!==_))},[]);return{ripples:t,onClear:h,onPress:c,...e}}function mY(e){var t,i,c,h,_,w,a,A,B;const N=dY(),F=Pi(),G=!!N,{ref:Q,as:te,children:Y,startContent:oe,endContent:de,autoFocus:me,className:be,spinner:pe,isLoading:Se=!1,disableRipple:$e=!1,fullWidth:Le=(t=N==null?void 0:N.fullWidth)!=null?t:!1,radius:re=N==null?void 0:N.radius,size:Ee=(i=N==null?void 0:N.size)!=null?i:"md",color:se=(c=N==null?void 0:N.color)!=null?c:"default",variant:ue=(h=N==null?void 0:N.variant)!=null?h:"solid",disableAnimation:ke=(w=(_=N==null?void 0:N.disableAnimation)!=null?_:F==null?void 0:F.disableAnimation)!=null?w:!1,isDisabled:ce=(a=N==null?void 0:N.isDisabled)!=null?a:!1,isIconOnly:Pe=(A=N==null?void 0:N.isIconOnly)!=null?A:!1,spinnerPlacement:xe="start",onPress:Te,onClick:Ie,...Me}=e,Xe=te||"button",Ce=typeof Xe=="string",He=Ba(Q),et=(B=$e||(F==null?void 0:F.disableRipple))!=null?B:ke,{isFocusVisible:Ke,isFocused:ot,focusProps:Pt}=Ac({autoFocus:me}),Et=ce||Se,Wt=V.useMemo(()=>Y8({size:Ee,color:se,variant:ue,radius:re,fullWidth:Le,isDisabled:Et,isInGroup:G,disableAnimation:ke,isIconOnly:Pe,className:be}),[Ee,se,ue,re,Le,Et,G,Pe,ke,be]),{onPress:Dt,onClear:er,ripples:De}=pY(),ur=V.useCallback(Xr=>{et||Et||ke||He.current&&Dt(Xr)},[et,Et,ke,He,Dt]),{buttonProps:Sr,isPressed:yt}=r2({elementType:te,isDisabled:Et,onPress:qi(Te,ur),onClick:Ie,...Me},He),{isHovered:dt,hoverProps:$t}=wo({isDisabled:Et}),or=V.useCallback((Xr={})=>({"data-disabled":Vt(Et),"data-focus":Vt(ot),"data-pressed":Vt(yt),"data-focus-visible":Vt(Ke),"data-hover":Vt(dt),"data-loading":Vt(Se),...xr(Sr,Pt,$t,Wo(Me,{enabled:Ce}),Wo(Xr)),className:Wt}),[Se,Et,ot,yt,Ce,Ke,dt,Sr,Pt,$t,Me,Wt]),Er=Xr=>V.isValidElement(Xr)?V.cloneElement(Xr,{"aria-hidden":!0,focusable:!1,tabIndex:-1}):null,mr=Er(oe),Pr=Er(de),Fr=V.useMemo(()=>({sm:"sm",md:"sm",lg:"md"})[Ee],[Ee]),Bn=V.useCallback(()=>({ripples:De,onClear:er}),[De,er]);return{Component:Xe,children:Y,domRef:He,spinner:pe,styles:Wt,startContent:mr,endContent:Pr,isLoading:Se,spinnerPlacement:xe,spinnerSize:Fr,disableRipple:et,getButtonProps:or,getRippleProps:Bn,isIconOnly:Pe}}function gY(e){var t,i;const[c,h]=Zo(e,PM.variantKeys),_=Pi(),w=(i=(t=e==null?void 0:e.variant)!=null?t:_==null?void 0:_.spinnerVariant)!=null?i:"default",{children:a,className:A,classNames:B,label:N,...F}=c,G=V.useMemo(()=>PM({...h}),[Ko(h)]),Q=Nr(B==null?void 0:B.base,A),te=N||a,Y=V.useMemo(()=>te&&typeof te=="string"?te:F["aria-label"]?"":"Loading",[a,te,F["aria-label"]]),oe=V.useCallback(()=>({"aria-label":Y,className:G.base({class:Q}),...F}),[Y,G,Q,F]);return{label:te,slots:G,classNames:B,variant:w,getSpinnerProps:oe}}var u7=Na((e,t)=>{const{slots:i,classNames:c,label:h,variant:_,getSpinnerProps:w}=gY({...e});return _==="wave"||_==="dots"?b.jsxs("div",{ref:t,...w(),children:[b.jsx("div",{className:i.wrapper({class:c==null?void 0:c.wrapper}),children:[...new Array(3)].map((a,A)=>b.jsx("i",{className:i.dots({class:c==null?void 0:c.dots}),style:{"--dot-index":A}},`dot-${A}`))}),h&&b.jsx("span",{className:i.label({class:c==null?void 0:c.label}),children:h})]}):_==="simple"?b.jsxs("div",{ref:t,...w(),children:[b.jsxs("svg",{className:i.wrapper({class:c==null?void 0:c.wrapper}),fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:i.circle1({class:c==null?void 0:c.circle1}),cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:i.circle2({class:c==null?void 0:c.circle2}),d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",fill:"currentColor"})]}),h&&b.jsx("span",{className:i.label({class:c==null?void 0:c.label}),children:h})]}):_==="spinner"?b.jsxs("div",{ref:t,...w(),children:[b.jsx("div",{className:i.wrapper({class:c==null?void 0:c.wrapper}),children:[...new Array(12)].map((a,A)=>b.jsx("i",{className:i.spinnerBars({class:c==null?void 0:c.spinnerBars}),style:{"--bar-index":A}},`star-${A}`))}),h&&b.jsx("span",{className:i.label({class:c==null?void 0:c.label}),children:h})]}):b.jsxs("div",{ref:t,...w(),children:[b.jsxs("div",{className:i.wrapper({class:c==null?void 0:c.wrapper}),children:[b.jsx("i",{className:i.circle1({class:c==null?void 0:c.circle1})}),b.jsx("i",{className:i.circle2({class:c==null?void 0:c.circle2})})]}),h&&b.jsx("span",{className:i.label({class:c==null?void 0:c.label}),children:h})]})});u7.displayName="HeroUI.Spinner";var vT=u7,d7=Na((e,t)=>{const{Component:i,domRef:c,children:h,spinnerSize:_,spinner:w=b.jsx(vT,{color:"current",size:_}),spinnerPlacement:a,startContent:A,endContent:B,isLoading:N,disableRipple:F,getButtonProps:G,getRippleProps:Q,isIconOnly:te}=mY({...e,ref:t});return b.jsxs(i,{ref:c,...G(),children:[A,N&&a==="start"&&w,N&&te?null:h,N&&a==="end"&&w,B,!F&&b.jsx(fY,{...Q()})]})});d7.displayName="HeroUI.Button";var $r=d7;const h7={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},f7={...h7,customError:!0,valid:!1},Ay={isInvalid:!1,validationDetails:h7,validationErrors:[]},p7=V.createContext({}),ax="__formValidationState"+Date.now();function Rm(e){if(e[ax]){let{realtimeValidation:t,displayValidation:i,updateValidation:c,resetValidation:h,commitValidation:_}=e[ax];return{realtimeValidation:t,displayValidation:i,updateValidation:c,resetValidation:h,commitValidation:_}}return yY(e)}function yY(e){let{isInvalid:t,validationState:i,name:c,value:h,builtinValidation:_,validate:w,validationBehavior:a="aria"}=e;i&&(t||(t=i==="invalid"));let A=t!==void 0?{isInvalid:t,validationErrors:[],validationDetails:f7}:null,B=V.useMemo(()=>{if(!w||h==null)return null;let se=xY(w,h);return KM(se)},[w,h]);_!=null&&_.validationDetails.valid&&(_=void 0);let N=V.useContext(p7),F=V.useMemo(()=>c?Array.isArray(c)?c.flatMap(se=>OS(N[se])):OS(N[c]):[],[N,c]),[G,Q]=V.useState(N),[te,Y]=V.useState(!1);N!==G&&(Q(N),Y(!1));let oe=V.useMemo(()=>KM(te?[]:F),[te,F]),de=V.useRef(Ay),[me,be]=V.useState(Ay),pe=V.useRef(Ay),Se=()=>{if(!$e)return;Le(!1);let se=B||_||de.current;d4(se,pe.current)||(pe.current=se,be(se))},[$e,Le]=V.useState(!1);return V.useEffect(Se),{realtimeValidation:A||oe||B||_||Ay,displayValidation:a==="native"?A||oe||me:A||oe||B||_||me,updateValidation(se){a==="aria"&&!d4(me,se)?be(se):de.current=se},resetValidation(){let se=Ay;d4(se,pe.current)||(pe.current=se,be(se)),a==="native"&&Le(!1),Y(!0)},commitValidation(){a==="native"&&Le(!0),Y(!0)}}}function OS(e){return e?Array.isArray(e)?e:[e]:[]}function xY(e,t){if(typeof e=="function"){let i=e(t);if(i&&typeof i!="boolean")return OS(i)}return[]}function KM(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:f7}:null}function d4(e,t){return e===t?!0:!!e&&!!t&&e.isInvalid===t.isInvalid&&e.validationErrors.length===t.validationErrors.length&&e.validationErrors.every((i,c)=>i===t.validationErrors[c])&&Object.entries(e.validationDetails).every(([i,c])=>t.validationDetails[i]===c)}function L_(e,t,i){let{validationBehavior:c,focus:h}=e;si(()=>{if(c==="native"&&(i!=null&&i.current)&&!i.current.disabled){let A=t.realtimeValidation.isInvalid?t.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";i.current.setCustomValidity(A),i.current.hasAttribute("title")||(i.current.title=""),t.realtimeValidation.isInvalid||t.updateValidation(_Y(i.current))}});let _=Zs(()=>{t.resetValidation()}),w=Zs(A=>{var B;t.displayValidation.isInvalid||t.commitValidation();let N=i==null||(B=i.current)===null||B===void 0?void 0:B.form;if(!A.defaultPrevented&&i&&N&&bY(N)===i.current){var F;h?h():(F=i.current)===null||F===void 0||F.focus(),kG("keyboard")}A.preventDefault()}),a=Zs(()=>{t.commitValidation()});V.useEffect(()=>{let A=i==null?void 0:i.current;if(!A)return;let B=A.form;return A.addEventListener("invalid",w),A.addEventListener("change",a),B==null||B.addEventListener("reset",_),()=>{A.removeEventListener("invalid",w),A.removeEventListener("change",a),B==null||B.removeEventListener("reset",_)}},[i,w,a,_,c])}function vY(e){let t=e.validity;return{badInput:t.badInput,customError:t.customError,patternMismatch:t.patternMismatch,rangeOverflow:t.rangeOverflow,rangeUnderflow:t.rangeUnderflow,stepMismatch:t.stepMismatch,tooLong:t.tooLong,tooShort:t.tooShort,typeMismatch:t.typeMismatch,valueMissing:t.valueMissing,valid:t.valid}}function _Y(e){return{isInvalid:!e.validity.valid,validationDetails:vY(e),validationErrors:e.validationMessage?[e.validationMessage]:[]}}function bY(e){for(let t=0;t<e.elements.length;t++){let i=e.elements[t];if(!i.validity.valid)return i}return null}const _T=typeof document<"u"?rn.useLayoutEffect:()=>{};function Vg(e){const t=V.useRef(null);return _T(()=>{t.current=e},[e]),V.useCallback((...i)=>{const c=t.current;return c==null?void 0:c(...i)},[])}let FS=new Map;typeof FinalizationRegistry<"u"&&new FinalizationRegistry(e=>{FS.delete(e)});function wY(e,t){if(e===t)return e;let i=FS.get(e);if(i)return i.forEach(h=>h.current=t),t;let c=FS.get(t);return c?(c.forEach(h=>h.current=e),e):t}function m7(...e){return(...t)=>{for(let i of e)typeof i=="function"&&i(...t)}}const bu=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},n0=e=>e&&"window"in e&&e.window===e?e:bu(e).defaultView||window;function SY(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function TY(e){return SY(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}function Es(e,t){if(!l0())return t&&e?e.contains(t):!1;if(!e||!t)return!1;let i=t;for(;i!==null;){if(i===e)return!0;i.tagName==="SLOT"&&i.assignedSlot?i=i.assignedSlot.parentNode:TY(i)?i=i.host:i=i.parentNode}return!1}const Ew=(e=document)=>{var t;if(!l0())return e.activeElement;let i=e.activeElement;for(;i&&"shadowRoot"in i&&(!((t=i.shadowRoot)===null||t===void 0)&&t.activeElement);)i=i.shadowRoot.activeElement;return i};function Ni(e){return l0()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function g7(e){var t,i,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(t=0;t<h;t++)e[t]&&(i=g7(e[t]))&&(c&&(c+=" "),c+=i)}else for(i in e)e[i]&&(c&&(c+=" "),c+=i);return c}function EY(){for(var e,t,i=0,c="",h=arguments.length;i<h;i++)(e=arguments[i])&&(t=g7(e))&&(c&&(c+=" "),c+=t);return c}function Yg(...e){let t={...e[0]};for(let i=1;i<e.length;i++){let c=e[i];for(let h in c){let _=t[h],w=c[h];typeof _=="function"&&typeof w=="function"&&h[0]==="o"&&h[1]==="n"&&h.charCodeAt(2)>=65&&h.charCodeAt(2)<=90?t[h]=m7(_,w):(h==="className"||h==="UNSAFE_className")&&typeof _=="string"&&typeof w=="string"?t[h]=EY(_,w):h==="id"&&_&&w?t.id=wY(_,w):t[h]=w!==void 0?w:_}}return t}const CY=new Set(["id"]),DY=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),PY=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),MY=/^(data-.*)$/;function AY(e,t={}){let{labelable:i,isLink:c,propNames:h}=t,_={};for(const w in e)Object.prototype.hasOwnProperty.call(e,w)&&(CY.has(w)||i&&DY.has(w)||c&&PY.has(w)||h!=null&&h.has(w)||MY.test(w))&&(_[w]=e[w]);return _}function ix(e){if(kY())e.focus({preventScroll:!0});else{let t=RY(e);e.focus(),IY(t)}}let D1=null;function kY(){if(D1==null){D1=!1;try{document.createElement("div").focus({get preventScroll(){return D1=!0,!0}})}catch{}}return D1}function RY(e){let t=e.parentNode,i=[],c=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==c;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&i.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return c instanceof HTMLElement&&i.push({element:c,scrollTop:c.scrollTop,scrollLeft:c.scrollLeft}),i}function IY(e){for(let{element:t,scrollTop:i,scrollLeft:c}of e)t.scrollTop=i,t.scrollLeft=c}function n2(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(i=>e.test(i.brand)))||e.test(window.navigator.userAgent)}function bT(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Im(e){let t=null;return()=>(t==null&&(t=e()),t)}const g_=Im(function(){return bT(/^Mac/i)}),zY=Im(function(){return bT(/^iPhone/i)}),y7=Im(function(){return bT(/^iPad/i)||g_()&&navigator.maxTouchPoints>1}),x7=Im(function(){return zY()||y7()}),LY=Im(function(){return n2(/AppleWebKit/i)&&!$Y()}),$Y=Im(function(){return n2(/Chrome/i)}),v7=Im(function(){return n2(/Android/i)}),BY=Im(function(){return n2(/Firefox/i)});function y_(e,t,i=!0){var c,h;let{metaKey:_,ctrlKey:w,altKey:a,shiftKey:A}=t;BY()&&(!((h=window.event)===null||h===void 0||(c=h.type)===null||c===void 0)&&c.startsWith("key"))&&e.target==="_blank"&&(g_()?_=!0:w=!0);let B=LY()&&g_()&&!y7()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:_,ctrlKey:w,altKey:a,shiftKey:A}):new MouseEvent("click",{metaKey:_,ctrlKey:w,altKey:a,shiftKey:A,bubbles:!0,cancelable:!0});y_.isOpening=i,ix(e),e.dispatchEvent(B),y_.isOpening=!1}y_.isOpening=!1;let ky=new Map,VS=new Set;function ZM(){if(typeof window>"u")return;function e(c){return"propertyName"in c}let t=c=>{if(!e(c)||!c.target)return;let h=ky.get(c.target);h||(h=new Set,ky.set(c.target,h),c.target.addEventListener("transitioncancel",i,{once:!0})),h.add(c.propertyName)},i=c=>{if(!e(c)||!c.target)return;let h=ky.get(c.target);if(h&&(h.delete(c.propertyName),h.size===0&&(c.target.removeEventListener("transitioncancel",i),ky.delete(c.target)),ky.size===0)){for(let _ of VS)_();VS.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",i)}typeof document<"u"&&(document.readyState!=="loading"?ZM():document.addEventListener("DOMContentLoaded",ZM));function _7(e){requestAnimationFrame(()=>{ky.size===0?e():VS.add(e)})}function NY(){let e=V.useRef(new Map),t=V.useCallback((h,_,w,a)=>{let A=a!=null&&a.once?(...B)=>{e.current.delete(w),w(...B)}:w;e.current.set(w,{type:_,eventTarget:h,fn:A,options:a}),h.addEventListener(_,A,a)},[]),i=V.useCallback((h,_,w,a)=>{var A;let B=((A=e.current.get(w))===null||A===void 0?void 0:A.fn)||w;h.removeEventListener(_,B,a),e.current.delete(w)},[]),c=V.useCallback(()=>{e.current.forEach((h,_)=>{i(h.eventTarget,h.type,_,h.options)})},[i]);return V.useEffect(()=>c,[c]),{addGlobalListener:t,removeGlobalListener:i,removeAllGlobalListeners:c}}function b7(e,t){_T(()=>{if(e&&e.ref&&t)return e.ref.current=t.current,()=>{e.ref&&(e.ref.current=null)}})}function US(e){return e.mozInputSource===0&&e.isTrusted?!0:v7()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function jY(e){return!v7()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}function OY(e,t,i){let c=V.useRef(t),h=Vg(()=>{i&&i(c.current)});V.useEffect(()=>{var _;let w=e==null||(_=e.current)===null||_===void 0?void 0:_.form;return w==null||w.addEventListener("reset",h),()=>{w==null||w.removeEventListener("reset",h)}},[e,h])}const w7=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])'],FY=w7.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";w7.push('[tabindex]:not([tabindex="-1"]):not([disabled])');function VY(e){return e.matches(FY)}let Oy="default",GS="",H1=new WeakMap;function XM(e){if(x7()){if(Oy==="default"){const t=bu(e);GS=t.documentElement.style.webkitUserSelect,t.documentElement.style.webkitUserSelect="none"}Oy="disabled"}else if(e instanceof HTMLElement||e instanceof SVGElement){let t="userSelect"in e.style?"userSelect":"webkitUserSelect";H1.set(e,e.style[t]),e.style[t]="none"}}function h4(e){if(x7()){if(Oy!=="disabled")return;Oy="restoring",setTimeout(()=>{_7(()=>{if(Oy==="restoring"){const t=bu(e);t.documentElement.style.webkitUserSelect==="none"&&(t.documentElement.style.webkitUserSelect=GS||""),GS="",Oy="default"}})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&H1.has(e)){let t=H1.get(e),i="userSelect"in e.style?"userSelect":"webkitUserSelect";e.style[i]==="none"&&(e.style[i]=t),e.getAttribute("style")===""&&e.removeAttribute("style"),H1.delete(e)}}const S7=rn.createContext({register:()=>{}});S7.displayName="PressResponderContext";class UY{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(t,i){this.nativeEvent=i,this.target=i.target,this.currentTarget=i.currentTarget,this.relatedTarget=i.relatedTarget,this.bubbles=i.bubbles,this.cancelable=i.cancelable,this.defaultPrevented=i.defaultPrevented,this.eventPhase=i.eventPhase,this.isTrusted=i.isTrusted,this.timeStamp=i.timeStamp,this.type=t}}function GY(e){let t=V.useRef({isFocused:!1,observer:null});_T(()=>{const c=t.current;return()=>{c.observer&&(c.observer.disconnect(),c.observer=null)}},[]);let i=Vg(c=>{e==null||e(c)});return V.useCallback(c=>{if(c.target instanceof HTMLButtonElement||c.target instanceof HTMLInputElement||c.target instanceof HTMLTextAreaElement||c.target instanceof HTMLSelectElement){t.current.isFocused=!0;let h=c.target,_=w=>{t.current.isFocused=!1,h.disabled&&i(new UY("blur",w)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};h.addEventListener("focusout",_,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&h.disabled){var w;(w=t.current.observer)===null||w===void 0||w.disconnect();let a=h===document.activeElement?null:document.activeElement;h.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),h.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),t.current.observer.observe(h,{attributes:!0,attributeFilter:["disabled"]})}},[i])}let Cw=!1;function YM(e){for(;e&&!VY(e);)e=e.parentElement;let t=n0(e),i=t.document.activeElement;if(!i||i===e)return;Cw=!0;let c=!1,h=N=>{(N.target===i||c)&&N.stopImmediatePropagation()},_=N=>{(N.target===i||c)&&(N.stopImmediatePropagation(),!e&&!c&&(c=!0,ix(i),A()))},w=N=>{(N.target===e||c)&&N.stopImmediatePropagation()},a=N=>{(N.target===e||c)&&(N.stopImmediatePropagation(),c||(c=!0,ix(i),A()))};t.addEventListener("blur",h,!0),t.addEventListener("focusout",_,!0),t.addEventListener("focusin",a,!0),t.addEventListener("focus",w,!0);let A=()=>{cancelAnimationFrame(B),t.removeEventListener("blur",h,!0),t.removeEventListener("focusout",_,!0),t.removeEventListener("focusin",a,!0),t.removeEventListener("focus",w,!0),Cw=!1,c=!1},B=requestAnimationFrame(A);return A}function HY(e){let t=V.useContext(S7);if(t){let{register:i,...c}=t;e=Yg(c,e),i()}return b7(t,e.ref),e}var P1=new WeakMap;class M1{continuePropagation(){fw(this,P1,!1)}get shouldStopPropagation(){return nR(this,P1)}constructor(t,i,c,h){hx(this,P1,{writable:!0,value:void 0}),fw(this,P1,!0);var _;let w=(_=h==null?void 0:h.target)!==null&&_!==void 0?_:c.currentTarget;const a=w==null?void 0:w.getBoundingClientRect();let A,B=0,N,F=null;c.clientX!=null&&c.clientY!=null&&(N=c.clientX,F=c.clientY),a&&(N!=null&&F!=null?(A=N-a.left,B=F-a.top):(A=a.width/2,B=a.height/2)),this.type=t,this.pointerType=i,this.target=c.currentTarget,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.x=A,this.y=B}}const JM=Symbol("linkClicked");function QM(e){let{onPress:t,onPressChange:i,onPressStart:c,onPressEnd:h,onPressUp:_,isDisabled:w,isPressed:a,preventFocusOnPress:A,shouldCancelOnPointerExit:B,allowTextSelectionOnPress:N,ref:F,...G}=HY(e),[Q,te]=V.useState(!1),Y=V.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:oe,removeAllGlobalListeners:de}=NY(),me=Vg((re,Ee)=>{let se=Y.current;if(w||se.didFirePressStart)return!1;let ue=!0;if(se.isTriggeringEvent=!0,c){let ke=new M1("pressstart",Ee,re);c(ke),ue=ke.shouldStopPropagation}return i&&i(!0),se.isTriggeringEvent=!1,se.didFirePressStart=!0,te(!0),ue}),be=Vg((re,Ee,se=!0)=>{let ue=Y.current;if(!ue.didFirePressStart)return!1;ue.didFirePressStart=!1,ue.isTriggeringEvent=!0;let ke=!0;if(h){let ce=new M1("pressend",Ee,re);h(ce),ke=ce.shouldStopPropagation}if(i&&i(!1),te(!1),t&&se&&!w){let ce=new M1("press",Ee,re);t(ce),ke&&(ke=ce.shouldStopPropagation)}return ue.isTriggeringEvent=!1,ke}),pe=Vg((re,Ee)=>{let se=Y.current;if(w)return!1;if(_){se.isTriggeringEvent=!0;let ue=new M1("pressup",Ee,re);return _(ue),se.isTriggeringEvent=!1,ue.shouldStopPropagation}return!0}),Se=Vg(re=>{let Ee=Y.current;if(Ee.isPressed&&Ee.target){Ee.didFirePressStart&&Ee.pointerType!=null&&be(by(Ee.target,re),Ee.pointerType,!1),Ee.isPressed=!1,Ee.isOverTarget=!1,Ee.activePointerId=null,Ee.pointerType=null,de(),N||h4(Ee.target);for(let se of Ee.disposables)se();Ee.disposables=[]}}),$e=Vg(re=>{B&&Se(re)}),Le=V.useMemo(()=>{let re=Y.current,Ee={onKeyDown(ue){if(f4(ue.nativeEvent,ue.currentTarget)&&Es(ue.currentTarget,Ni(ue.nativeEvent))){var ke;r6(Ni(ue.nativeEvent),ue.key)&&ue.preventDefault();let ce=!0;if(!re.isPressed&&!ue.repeat){re.target=ue.currentTarget,re.isPressed=!0,re.pointerType="keyboard",ce=me(ue,"keyboard");let Pe=ue.currentTarget,xe=Te=>{f4(Te,Pe)&&!Te.repeat&&Es(Pe,Ni(Te))&&re.target&&pe(by(re.target,Te),"keyboard")};oe(bu(ue.currentTarget),"keyup",m7(xe,se),!0)}ce&&ue.stopPropagation(),ue.metaKey&&g_()&&((ke=re.metaKeyEvents)===null||ke===void 0||ke.set(ue.key,ue.nativeEvent))}else ue.key==="Meta"&&(re.metaKeyEvents=new Map)},onClick(ue){if(!(ue&&!Es(ue.currentTarget,Ni(ue.nativeEvent)))&&ue&&ue.button===0&&!re.isTriggeringEvent&&!y_.isOpening){let ke=!0;if(w&&ue.preventDefault(),!re.ignoreEmulatedMouseEvents&&!re.isPressed&&(re.pointerType==="virtual"||US(ue.nativeEvent))){let ce=me(ue,"virtual"),Pe=pe(ue,"virtual"),xe=be(ue,"virtual");ke=ce&&Pe&&xe}else if(re.isPressed&&re.pointerType!=="keyboard"){let ce=re.pointerType||ue.nativeEvent.pointerType||"virtual";ke=be(by(ue.currentTarget,ue),ce,!0),re.isOverTarget=!1,Se(ue)}re.ignoreEmulatedMouseEvents=!1,ke&&ue.stopPropagation()}}},se=ue=>{var ke;if(re.isPressed&&re.target&&f4(ue,re.target)){var ce;r6(Ni(ue),ue.key)&&ue.preventDefault();let xe=Ni(ue);be(by(re.target,ue),"keyboard",Es(re.target,Ni(ue))),de(),ue.key!=="Enter"&&wT(re.target)&&Es(re.target,xe)&&!ue[JM]&&(ue[JM]=!0,y_(re.target,ue,!1)),re.isPressed=!1,(ce=re.metaKeyEvents)===null||ce===void 0||ce.delete(ue.key)}else if(ue.key==="Meta"&&(!((ke=re.metaKeyEvents)===null||ke===void 0)&&ke.size)){var Pe;let xe=re.metaKeyEvents;re.metaKeyEvents=void 0;for(let Te of xe.values())(Pe=re.target)===null||Pe===void 0||Pe.dispatchEvent(new KeyboardEvent("keyup",Te))}};if(typeof PointerEvent<"u"){Ee.onPointerDown=ce=>{if(ce.button!==0||!Es(ce.currentTarget,Ni(ce.nativeEvent)))return;if(jY(ce.nativeEvent)){re.pointerType="virtual";return}re.pointerType=ce.pointerType;let Pe=!0;if(!re.isPressed){re.isPressed=!0,re.isOverTarget=!0,re.activePointerId=ce.pointerId,re.target=ce.currentTarget,N||XM(re.target),Pe=me(ce,re.pointerType);let xe=Ni(ce.nativeEvent);"releasePointerCapture"in xe&&xe.releasePointerCapture(ce.pointerId),oe(bu(ce.currentTarget),"pointerup",ue,!1),oe(bu(ce.currentTarget),"pointercancel",ke,!1)}Pe&&ce.stopPropagation()},Ee.onMouseDown=ce=>{if(Es(ce.currentTarget,Ni(ce.nativeEvent))&&ce.button===0){if(A){let Pe=YM(ce.target);Pe&&re.disposables.push(Pe)}ce.stopPropagation()}},Ee.onPointerUp=ce=>{!Es(ce.currentTarget,Ni(ce.nativeEvent))||re.pointerType==="virtual"||ce.button===0&&pe(ce,re.pointerType||ce.pointerType)},Ee.onPointerEnter=ce=>{ce.pointerId===re.activePointerId&&re.target&&!re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!0,me(by(re.target,ce),re.pointerType))},Ee.onPointerLeave=ce=>{ce.pointerId===re.activePointerId&&re.target&&re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!1,be(by(re.target,ce),re.pointerType,!1),$e(ce))};let ue=ce=>{if(ce.pointerId===re.activePointerId&&re.isPressed&&ce.button===0&&re.target){if(Es(re.target,Ni(ce))&&re.pointerType!=null){let Pe=!1,xe=setTimeout(()=>{re.isPressed&&re.target instanceof HTMLElement&&(Pe?Se(ce):(ix(re.target),re.target.click()))},80);oe(ce.currentTarget,"click",()=>Pe=!0,!0),re.disposables.push(()=>clearTimeout(xe))}else Se(ce);re.isOverTarget=!1}},ke=ce=>{Se(ce)};Ee.onDragStart=ce=>{Es(ce.currentTarget,Ni(ce.nativeEvent))&&Se(ce)}}else{Ee.onMouseDown=ce=>{if(ce.button!==0||!Es(ce.currentTarget,Ni(ce.nativeEvent)))return;if(re.ignoreEmulatedMouseEvents){ce.stopPropagation();return}if(re.isPressed=!0,re.isOverTarget=!0,re.target=ce.currentTarget,re.pointerType=US(ce.nativeEvent)?"virtual":"mouse",Iw.flushSync(()=>me(ce,re.pointerType))&&ce.stopPropagation(),A){let xe=YM(ce.target);xe&&re.disposables.push(xe)}oe(bu(ce.currentTarget),"mouseup",ue,!1)},Ee.onMouseEnter=ce=>{if(!Es(ce.currentTarget,Ni(ce.nativeEvent)))return;let Pe=!0;re.isPressed&&!re.ignoreEmulatedMouseEvents&&re.pointerType!=null&&(re.isOverTarget=!0,Pe=me(ce,re.pointerType)),Pe&&ce.stopPropagation()},Ee.onMouseLeave=ce=>{if(!Es(ce.currentTarget,Ni(ce.nativeEvent)))return;let Pe=!0;re.isPressed&&!re.ignoreEmulatedMouseEvents&&re.pointerType!=null&&(re.isOverTarget=!1,Pe=be(ce,re.pointerType,!1),$e(ce)),Pe&&ce.stopPropagation()},Ee.onMouseUp=ce=>{Es(ce.currentTarget,Ni(ce.nativeEvent))&&!re.ignoreEmulatedMouseEvents&&ce.button===0&&pe(ce,re.pointerType||"mouse")};let ue=ce=>{if(ce.button===0){if(re.ignoreEmulatedMouseEvents){re.ignoreEmulatedMouseEvents=!1;return}re.target&&re.target.contains(ce.target)&&re.pointerType!=null||Se(ce),re.isOverTarget=!1}};Ee.onTouchStart=ce=>{if(!Es(ce.currentTarget,Ni(ce.nativeEvent)))return;let Pe=qY(ce.nativeEvent);if(!Pe)return;re.activePointerId=Pe.identifier,re.ignoreEmulatedMouseEvents=!0,re.isOverTarget=!0,re.isPressed=!0,re.target=ce.currentTarget,re.pointerType="touch",N||XM(re.target),me(dm(re.target,ce),re.pointerType)&&ce.stopPropagation(),oe(n0(ce.currentTarget),"scroll",ke,!0)},Ee.onTouchMove=ce=>{if(!Es(ce.currentTarget,Ni(ce.nativeEvent)))return;if(!re.isPressed){ce.stopPropagation();return}let Pe=e6(ce.nativeEvent,re.activePointerId),xe=!0;Pe&&t6(Pe,ce.currentTarget)?!re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!0,xe=me(dm(re.target,ce),re.pointerType)):re.isOverTarget&&re.pointerType!=null&&(re.isOverTarget=!1,xe=be(dm(re.target,ce),re.pointerType,!1),$e(dm(re.target,ce))),xe&&ce.stopPropagation()},Ee.onTouchEnd=ce=>{if(!Es(ce.currentTarget,Ni(ce.nativeEvent)))return;if(!re.isPressed){ce.stopPropagation();return}let Pe=e6(ce.nativeEvent,re.activePointerId),xe=!0;Pe&&t6(Pe,ce.currentTarget)&&re.pointerType!=null?(pe(dm(re.target,ce),re.pointerType),xe=be(dm(re.target,ce),re.pointerType)):re.isOverTarget&&re.pointerType!=null&&(xe=be(dm(re.target,ce),re.pointerType,!1)),xe&&ce.stopPropagation(),re.isPressed=!1,re.activePointerId=null,re.isOverTarget=!1,re.ignoreEmulatedMouseEvents=!0,re.target&&!N&&h4(re.target),de()},Ee.onTouchCancel=ce=>{Es(ce.currentTarget,Ni(ce.nativeEvent))&&(ce.stopPropagation(),re.isPressed&&Se(dm(re.target,ce)))};let ke=ce=>{re.isPressed&&Es(Ni(ce),re.target)&&Se({currentTarget:re.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1})};Ee.onDragStart=ce=>{Es(ce.currentTarget,Ni(ce.nativeEvent))&&Se(ce)}}return Ee},[oe,w,A,de,N,Se,$e,be,me,pe]);return V.useEffect(()=>{let re=Y.current;return()=>{var Ee;N||h4((Ee=re.target)!==null&&Ee!==void 0?Ee:void 0);for(let se of re.disposables)se();re.disposables=[]}},[N]),{isPressed:a||Q,pressProps:Yg(G,Le)}}function wT(e){return e.tagName==="A"&&e.hasAttribute("href")}function f4(e,t){const{key:i,code:c}=e,h=t,_=h.getAttribute("role");return(i==="Enter"||i===" "||i==="Spacebar"||c==="Space")&&!(h instanceof n0(h).HTMLInputElement&&!T7(h,i)||h instanceof n0(h).HTMLTextAreaElement||h.isContentEditable)&&!((_==="link"||!_&&wT(h))&&i!=="Enter")}function qY(e){const{targetTouches:t}=e;return t.length>0?t[0]:null}function e6(e,t){const i=e.changedTouches;for(let c=0;c<i.length;c++){const h=i[c];if(h.identifier===t)return h}return null}function dm(e,t){let i=0,c=0;return t.targetTouches&&t.targetTouches.length===1&&(i=t.targetTouches[0].clientX,c=t.targetTouches[0].clientY),{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:i,clientY:c}}function by(e,t){let i=t.clientX,c=t.clientY;return{currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,clientX:i,clientY:c}}function WY(e){let t=0,i=0;return e.width!==void 0?t=e.width/2:e.radiusX!==void 0&&(t=e.radiusX),e.height!==void 0?i=e.height/2:e.radiusY!==void 0&&(i=e.radiusY),{top:e.clientY-i,right:e.clientX+t,bottom:e.clientY+i,left:e.clientX-t}}function KY(e,t){return!(e.left>t.right||t.left>e.right||e.top>t.bottom||t.top>e.bottom)}function t6(e,t){let i=t.getBoundingClientRect(),c=WY(e);return KY(i,c)}function ZY(e){return e instanceof HTMLInputElement?!1:e instanceof HTMLButtonElement?e.type!=="submit"&&e.type!=="reset":!wT(e)}function r6(e,t){return e instanceof HTMLInputElement?!T7(e,t):ZY(e)}const XY=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function T7(e,t){return e.type==="checkbox"||e.type==="radio"?t===" ":XY.has(e.type)}let $_=null,YY=new Set,Qv=new Map,a0=!1,HS=!1;function ST(e,t){for(let i of YY)i(e,t)}function JY(e){return!(e.metaKey||!g_()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function Dw(e){a0=!0,JY(e)&&($_="keyboard",ST("keyboard",e))}function xu(e){$_="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(a0=!0,ST("pointer",e))}function E7(e){US(e)&&(a0=!0,$_="virtual")}function C7(e){e.target===window||e.target===document||Cw||!e.isTrusted||(!a0&&!HS&&($_="virtual",ST("virtual",e)),a0=!1,HS=!1)}function D7(){Cw||(a0=!1,HS=!0)}function n6(e){if(typeof window>"u"||Qv.get(n0(e)))return;const t=n0(e),i=bu(e);let c=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){a0=!0,c.apply(this,arguments)},i.addEventListener("keydown",Dw,!0),i.addEventListener("keyup",Dw,!0),i.addEventListener("click",E7,!0),t.addEventListener("focus",C7,!0),t.addEventListener("blur",D7,!1),typeof PointerEvent<"u"?(i.addEventListener("pointerdown",xu,!0),i.addEventListener("pointermove",xu,!0),i.addEventListener("pointerup",xu,!0)):(i.addEventListener("mousedown",xu,!0),i.addEventListener("mousemove",xu,!0),i.addEventListener("mouseup",xu,!0)),t.addEventListener("beforeunload",()=>{P7(e)},{once:!0}),Qv.set(t,{focus:c})}const P7=(e,t)=>{const i=n0(e),c=bu(e);t&&c.removeEventListener("DOMContentLoaded",t),Qv.has(i)&&(i.HTMLElement.prototype.focus=Qv.get(i).focus,c.removeEventListener("keydown",Dw,!0),c.removeEventListener("keyup",Dw,!0),c.removeEventListener("click",E7,!0),i.removeEventListener("focus",C7,!0),i.removeEventListener("blur",D7,!1),typeof PointerEvent<"u"?(c.removeEventListener("pointerdown",xu,!0),c.removeEventListener("pointermove",xu,!0),c.removeEventListener("pointerup",xu,!0)):(c.removeEventListener("mousedown",xu,!0),c.removeEventListener("mousemove",xu,!0),c.removeEventListener("mouseup",xu,!0)),Qv.delete(i))};function QY(e){const t=bu(e);let i;return t.readyState!=="loading"?n6(e):(i=()=>{n6(e)},t.addEventListener("DOMContentLoaded",i)),()=>P7(e,i)}typeof document<"u"&&QY();function eJ(){return $_}function tJ(e){const t=bu(e),i=Ew(t);if(eJ()==="virtual"){let c=i;_7(()=>{Ew(t)===c&&e.isConnected&&ix(e)})}else ix(e)}function rJ(e){let{isDisabled:t,onFocus:i,onBlur:c,onFocusChange:h}=e;const _=V.useCallback(A=>{if(A.target===A.currentTarget)return c&&c(A),h&&h(!1),!0},[c,h]),w=GY(_),a=V.useCallback(A=>{const B=bu(A.target),N=B?Ew(B):Ew();A.target===A.currentTarget&&N===Ni(A.nativeEvent)&&(i&&i(A),h&&h(!0),w(A))},[h,i,w]);return{focusProps:{onFocus:!t&&(i||h||c)?a:void 0,onBlur:!t&&(c||h)?_:void 0}}}function a6(e){if(!e)return;let t=!0;return i=>{let c={...i,preventDefault(){i.preventDefault()},isDefaultPrevented(){return i.isDefaultPrevented()},stopPropagation(){t?console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior."):t=!0},continuePropagation(){t=!1},isPropagationStopped(){return t}};e(c),t&&i.stopPropagation()}}function nJ(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:a6(e.onKeyDown),onKeyUp:a6(e.onKeyUp)}}}let aJ=rn.createContext(null);function iJ(e){let t=V.useContext(aJ)||{};b7(t,e);let{ref:i,...c}=t;return c}function sJ(e,t){let{focusProps:i}=rJ(e),{keyboardProps:c}=nJ(e),h=Yg(i,c),_=iJ(t),w=e.isDisabled?{}:_,a=V.useRef(e.autoFocus);V.useEffect(()=>{a.current&&t.current&&tJ(t.current),a.current=!1},[t]);let A=e.excludeFromTabOrder?-1:0;return e.isDisabled&&(A=void 0),{focusableProps:Yg({...h,tabIndex:A},w)}}function oJ(e,t,i){let{isDisabled:c=!1,isReadOnly:h=!1,value:_,name:w,children:a,"aria-label":A,"aria-labelledby":B,validationState:N="valid",isInvalid:F}=e,G=$e=>{$e.stopPropagation(),t.setSelected($e.target.checked)},Q=a!=null,te=A!=null||B!=null;!Q&&!te&&console.warn("If you do not provide children, you must specify an aria-label for accessibility");let{pressProps:Y,isPressed:oe}=QM({isDisabled:c}),{pressProps:de,isPressed:me}=QM({onPress(){var $e;t.toggle(),($e=i.current)===null||$e===void 0||$e.focus()},isDisabled:c||h}),{focusableProps:be}=sJ(e,i),pe=Yg(Y,be),Se=AY(e,{labelable:!0});return OY(i,t.isSelected,t.setSelected),{labelProps:Yg(de,{onClick:$e=>$e.preventDefault()}),inputProps:Yg(Se,{"aria-invalid":F||N==="invalid"||void 0,"aria-errormessage":e["aria-errormessage"],"aria-controls":e["aria-controls"],"aria-readonly":h||void 0,onChange:G,disabled:c,..._==null?{}:{value:_},name:w,type:"checkbox",...pe}),isSelected:t.isSelected,isPressed:oe||me,isDisabled:c,isReadOnly:h,isInvalid:F||N==="invalid"}}function M7(e,t,i){let c=Rm({...e,value:t.isSelected}),{isInvalid:h,validationErrors:_,validationDetails:w}=c.displayValidation,{labelProps:a,inputProps:A,isSelected:B,isPressed:N,isDisabled:F,isReadOnly:G}=oJ({...e,isInvalid:h},t,i);L_(e,c,i);let{isIndeterminate:Q,isRequired:te,validationBehavior:Y="aria"}=e;V.useEffect(()=>{i.current&&(i.current.indeterminate=!!Q)});let{pressProps:oe}=wu({isDisabled:F||G,onPress(){let{[ax]:de}=e,{commitValidation:me}=de||c;me()}});return{labelProps:xr(a,oe),inputProps:{...A,checked:B,"aria-required":te&&Y==="aria"||void 0,required:te&&Y==="native"},isSelected:B,isPressed:N,isDisabled:F,isReadOnly:G,isInvalid:h,validationErrors:_,validationDetails:w}}const lJ=new WeakMap;function A7(e){let{id:t,label:i,"aria-labelledby":c,"aria-label":h,labelElementType:_="label"}=e;t=Bs(t);let w=Bs(),a={};i?(c=c?`${w} ${c}`:w,a={id:w,htmlFor:_==="label"?t:void 0}):!c&&!h&&console.warn("If you do not provide a visible label, you must specify an aria-label or aria-labelledby attribute for accessibility");let A=C_({id:t,"aria-label":h,"aria-labelledby":c});return{labelProps:a,fieldProps:A}}function a2(e){let{description:t,errorMessage:i,isInvalid:c,validationState:h}=e,{labelProps:_,fieldProps:w}=A7(e),a=vm([!!t,!!i,c,h]),A=vm([!!t,!!i,c,h]);return w=xr(w,{"aria-describedby":[a,A,e["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:_,fieldProps:w,descriptionProps:{id:a},errorMessageProps:{id:A}}}function k7(e={}){let{isReadOnly:t}=e,[i,c]=Xs(e.isSelected,e.defaultSelected||!1,e.onChange);function h(w){t||c(w)}function _(){t||c(!i)}return{isSelected:i,setSelected:h,toggle:_}}function cJ(e,t,i){const c=k7({isReadOnly:e.isReadOnly||t.isReadOnly,isSelected:t.isSelected(e.value),onChange(oe){oe?t.addValue(e.value):t.removeValue(e.value),e.onChange&&e.onChange(oe)}});let{name:h,descriptionId:_,errorMessageId:w,validationBehavior:a}=lJ.get(t);var A;a=(A=e.validationBehavior)!==null&&A!==void 0?A:a;let{realtimeValidation:B}=Rm({...e,value:c.isSelected,name:void 0,validationBehavior:"aria"}),N=V.useRef(Ay),F=()=>{t.setInvalid(e.value,B.isInvalid?B:N.current)};V.useEffect(F);let G=t.realtimeValidation.isInvalid?t.realtimeValidation:B,Q=a==="native"?t.displayValidation:G;var te;let Y=M7({...e,isReadOnly:e.isReadOnly||t.isReadOnly,isDisabled:e.isDisabled||t.isDisabled,name:e.name||h,isRequired:(te=e.isRequired)!==null&&te!==void 0?te:t.isRequired,validationBehavior:a,[ax]:{realtimeValidation:G,displayValidation:Q,resetValidation:t.resetValidation,commitValidation:t.commitValidation,updateValidation(oe){N.current=oe,F()}}},c,i);return{...Y,inputProps:{...Y.inputProps,"aria-describedby":[e["aria-describedby"],t.isInvalid?w:null,_].filter(Boolean).join(" ")||void 0}}}var i6=Symbol("default");function Gf(e,t){let i=V.useContext(e);if(t===null)return null;if(i&&typeof i=="object"&&"slots"in i&&i.slots){let c=new Intl.ListFormat().format(Object.keys(i.slots).map(_=>`"${_}"`));if(!t&&!i.slots[i6])throw new Error(`A slot prop is required. Valid slot names are ${c}.`);let h=t||i6;if(!i.slots[h])throw new Error(`Invalid slot "${t}". Valid slot names are ${c}.`);return i.slots[h]}return i}function uJ(e,t,i){let c=Gf(i,e.slot)||{},{ref:h,..._}=c,w=VU(V.useMemo(()=>T5(t,h),[t,h])),a=xr(_,e);return"style"in _&&_.style&&"style"in e&&e.style&&(typeof _.style=="function"||typeof e.style=="function"?a.style=A=>{let B=typeof _.style=="function"?_.style(A):_.style,N={...A.defaultStyle,...B},F=typeof e.style=="function"?e.style({...A,defaultStyle:N}):e.style;return{...N,...F}}:a.style={..._.style,...e.style}),[a,w]}var wh=V.createContext(null);V.forwardRef(function(t,i){[t,i]=uJ(t,i,wh);let{validationErrors:c,validationBehavior:h="native",children:_,className:w,...a}=t;const A=V.useMemo(()=>CX({className:w}),[w]);return b.jsx("form",{noValidate:h!=="native",...a,ref:i,className:A,children:b.jsx(wh.Provider,{value:{...t,validationBehavior:h},children:b.jsx(p7.Provider,{value:c??{},children:_})})})});var[joe,dJ]=Th({name:"CheckboxGroupContext",strict:!1});function hJ(e){const{isSelected:t,disableAnimation:i,...c}=e;return b.jsx("svg",{"aria-hidden":"true",fill:"none",role:"presentation",stroke:"currentColor",strokeDasharray:22,strokeDashoffset:t?44:66,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,style:!i&&t?{transition:"stroke-dashoffset 250ms linear 0.2s"}:{},viewBox:"0 0 17 18",...c,children:b.jsx("polyline",{points:"1 9 7 14 15 4"})})}function fJ(e){const{isSelected:t,disableAnimation:i,...c}=e;return b.jsx("svg",{stroke:"currentColor",strokeWidth:3,viewBox:"0 0 24 24",...c,children:b.jsx("line",{x1:"21",x2:"3",y1:"12",y2:"12"})})}function pJ(e){const{isIndeterminate:t,...i}=e,c=t?fJ:hJ;return b.jsx(c,{...i})}function qS(e,t=[]){const i=V.useRef(e);return yx(()=>{i.current=e}),V.useCallback((...c)=>{var h;return(h=i.current)==null?void 0:h.call(i,...c)},t)}function mJ(e={}){var t,i,c,h,_,w,a,A;const B=Pi(),N=dJ(),{validationBehavior:F}=Gf(wh)||{},G=!!N,{as:Q,ref:te,value:Y="",children:oe,icon:de,name:me,isRequired:be,isReadOnly:pe=!1,autoFocus:Se=!1,isSelected:$e,size:Le=(t=N==null?void 0:N.size)!=null?t:"md",color:re=(i=N==null?void 0:N.color)!=null?i:"primary",radius:Ee=N==null?void 0:N.radius,lineThrough:se=(c=N==null?void 0:N.lineThrough)!=null?c:!1,isDisabled:ue=(h=N==null?void 0:N.isDisabled)!=null?h:!1,disableAnimation:ke=(w=(_=N==null?void 0:N.disableAnimation)!=null?_:B==null?void 0:B.disableAnimation)!=null?w:!1,validationState:ce,isInvalid:Pe=ce?ce==="invalid":(a=N==null?void 0:N.isInvalid)!=null?a:!1,isIndeterminate:xe=!1,validationBehavior:Te=G?N.validationBehavior:(A=F??(B==null?void 0:B.validationBehavior))!=null?A:"native",defaultSelected:Ie,classNames:Me,className:Xe,onValueChange:Ce,validate:He,...et}=e,Ke=Q||"label",ot=V.useRef(null),Pt=V.useRef(null);let Et=e.onChange;G&&(Et=qi(()=>{N.groupState.resetValidation()},Et));const Wt=V.useId(),Dt=V.useMemo(()=>({name:me,value:Y,children:oe,autoFocus:Se,defaultSelected:Ie,isIndeterminate:xe,isRequired:be,isInvalid:Pe,isSelected:$e,isDisabled:ue,isReadOnly:pe,"aria-label":d5(et["aria-label"],oe),"aria-labelledby":et["aria-labelledby"]||Wt,onChange:Ce}),[me,Y,oe,Se,Ie,xe,be,Pe,$e,ue,pe,et["aria-label"],et["aria-labelledby"],Wt,Ce]),er=k7(Dt),De={isInvalid:Pe,isRequired:be,validate:He,validationState:ce,validationBehavior:Te},{inputProps:ur,isSelected:Sr,isDisabled:yt,isReadOnly:dt,isPressed:$t,isInvalid:or}=G?cJ({...Dt,...De},N.groupState,Pt):M7({...Dt,...De},er,Pt),Er=yt||dt,mr=ce==="invalid"||Pe||or,Pr=Er?!1:$t,{hoverProps:Fr,isHovered:Bn}=wo({isDisabled:ur.disabled}),{focusProps:Xr,isFocused:On,isFocusVisible:fr}=Ac({autoFocus:ur.autoFocus}),Tn=V.useMemo(()=>DX({color:re,size:Le,radius:Ee,isInvalid:mr,lineThrough:se,isDisabled:yt,disableAnimation:ke}),[re,Le,Ee,mr,se,yt,ke]);yx(()=>{if(!Pt.current)return;const Wn=!!Pt.current.checked;er.setSelected(Wn)},[Pt.current]);const kr=qS(Et),Dr=V.useCallback(Wn=>{if(dt||yt){Wn.preventDefault();return}kr==null||kr(Wn)},[dt,yt,kr]),Br=Nr(Me==null?void 0:Me.base,Xe),an=V.useCallback(()=>({ref:ot,className:Tn.base({class:Br}),"data-disabled":Vt(yt),"data-selected":Vt(Sr||xe),"data-invalid":Vt(mr),"data-hover":Vt(Bn),"data-focus":Vt(On),"data-pressed":Vt(Pr),"data-readonly":Vt(ur.readOnly),"data-focus-visible":Vt(fr),"data-indeterminate":Vt(xe),...xr(Fr,et)}),[Tn,Br,yt,Sr,xe,mr,Bn,On,Pr,ur.readOnly,fr,Fr,et]),Sa=V.useCallback((Wn={})=>({...Wn,"aria-hidden":!0,className:Nr(Tn.wrapper({class:Nr(Me==null?void 0:Me.wrapper,Wn==null?void 0:Wn.className)}))}),[Tn,Me==null?void 0:Me.wrapper]),Za=V.useCallback(()=>({ref:f5(Pt,te),...xr(ur,Xr),className:Tn.hiddenInput({class:Me==null?void 0:Me.hiddenInput}),onChange:qi(ur.onChange,Dr)}),[ur,Xr,Dr,Me==null?void 0:Me.hiddenInput]),oa=V.useCallback(()=>({id:Wt,className:Tn.label({class:Me==null?void 0:Me.label})}),[Tn,Me==null?void 0:Me.label,yt,Sr,mr]),qn=V.useCallback(()=>({isSelected:Sr,isIndeterminate:xe,disableAnimation:ke,className:Tn.icon({class:Me==null?void 0:Me.icon})}),[Tn,Me==null?void 0:Me.icon,Sr,xe,ke]);return{Component:Ke,icon:de,children:oe,isSelected:Sr,isDisabled:yt,isInvalid:mr,isFocused:On,isHovered:Bn,isFocusVisible:fr,getBaseProps:an,getWrapperProps:Sa,getInputProps:Za,getLabelProps:oa,getIconProps:qn}}var R7=Na((e,t)=>{const{Component:i,children:c,icon:h=b.jsx(pJ,{}),getBaseProps:_,getWrapperProps:w,getInputProps:a,getIconProps:A,getLabelProps:B}=mJ({...e,ref:t}),N=typeof h=="function"?h(A()):V.cloneElement(h,A());return b.jsxs(i,{..._(),children:[b.jsx("input",{...a()}),b.jsx("span",{...w(),children:N}),c&&b.jsx("span",{...B(),children:c})]})});R7.displayName="HeroUI.Checkbox";var gi=R7;const s6=e=>typeof e=="object"&&e!=null&&e.nodeType===1,o6=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",A1=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const i=getComputedStyle(e,null);return o6(i.overflowY,t)||o6(i.overflowX,t)||(c=>{const h=(_=>{if(!_.ownerDocument||!_.ownerDocument.defaultView)return null;try{return _.ownerDocument.defaultView.frameElement}catch{return null}})(c);return!!h&&(h.clientHeight<c.scrollHeight||h.clientWidth<c.scrollWidth)})(e)}return!1},k1=(e,t,i,c,h,_,w,a)=>_<e&&w>t||_>e&&w<t?0:_<=e&&a<=i||w>=t&&a>=i?_-e-c:w>t&&a<i||_<e&&a>i?w-t+h:0,gJ=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},l6=(e,t)=>{var i,c,h,_;if(typeof document>"u")return[];const{scrollMode:w,block:a,inline:A,boundary:B,skipOverflowHiddenElements:N}=t,F=typeof B=="function"?B:Te=>Te!==B;if(!s6(e))throw new TypeError("Invalid target");const G=document.scrollingElement||document.documentElement,Q=[];let te=e;for(;s6(te)&&F(te);){if(te=gJ(te),te===G){Q.push(te);break}te!=null&&te===document.body&&A1(te)&&!A1(document.documentElement)||te!=null&&A1(te,N)&&Q.push(te)}const Y=(c=(i=window.visualViewport)==null?void 0:i.width)!=null?c:innerWidth,oe=(_=(h=window.visualViewport)==null?void 0:h.height)!=null?_:innerHeight,{scrollX:de,scrollY:me}=window,{height:be,width:pe,top:Se,right:$e,bottom:Le,left:re}=e.getBoundingClientRect(),{top:Ee,right:se,bottom:ue,left:ke}=(Te=>{const Ie=window.getComputedStyle(Te);return{top:parseFloat(Ie.scrollMarginTop)||0,right:parseFloat(Ie.scrollMarginRight)||0,bottom:parseFloat(Ie.scrollMarginBottom)||0,left:parseFloat(Ie.scrollMarginLeft)||0}})(e);let ce=a==="start"||a==="nearest"?Se-Ee:a==="end"?Le+ue:Se+be/2-Ee+ue,Pe=A==="center"?re+pe/2-ke+se:A==="end"?$e+se:re-ke;const xe=[];for(let Te=0;Te<Q.length;Te++){const Ie=Q[Te],{height:Me,width:Xe,top:Ce,right:He,bottom:et,left:Ke}=Ie.getBoundingClientRect();if(w==="if-needed"&&Se>=0&&re>=0&&Le<=oe&&$e<=Y&&(Ie===G&&!A1(Ie)||Se>=Ce&&Le<=et&&re>=Ke&&$e<=He))return xe;const ot=getComputedStyle(Ie),Pt=parseInt(ot.borderLeftWidth,10),Et=parseInt(ot.borderTopWidth,10),Wt=parseInt(ot.borderRightWidth,10),Dt=parseInt(ot.borderBottomWidth,10);let er=0,De=0;const ur="offsetWidth"in Ie?Ie.offsetWidth-Ie.clientWidth-Pt-Wt:0,Sr="offsetHeight"in Ie?Ie.offsetHeight-Ie.clientHeight-Et-Dt:0,yt="offsetWidth"in Ie?Ie.offsetWidth===0?0:Xe/Ie.offsetWidth:0,dt="offsetHeight"in Ie?Ie.offsetHeight===0?0:Me/Ie.offsetHeight:0;if(G===Ie)er=a==="start"?ce:a==="end"?ce-oe:a==="nearest"?k1(me,me+oe,oe,Et,Dt,me+ce,me+ce+be,be):ce-oe/2,De=A==="start"?Pe:A==="center"?Pe-Y/2:A==="end"?Pe-Y:k1(de,de+Y,Y,Pt,Wt,de+Pe,de+Pe+pe,pe),er=Math.max(0,er+me),De=Math.max(0,De+de);else{er=a==="start"?ce-Ce-Et:a==="end"?ce-et+Dt+Sr:a==="nearest"?k1(Ce,et,Me,Et,Dt+Sr,ce,ce+be,be):ce-(Ce+Me/2)+Sr/2,De=A==="start"?Pe-Ke-Pt:A==="center"?Pe-(Ke+Xe/2)+ur/2:A==="end"?Pe-He+Wt+ur:k1(Ke,He,Xe,Pt,Wt+ur,Pe,Pe+pe,pe);const{scrollLeft:$t,scrollTop:or}=Ie;er=dt===0?0:Math.max(0,Math.min(or+er/dt,Ie.scrollHeight-Me/dt+Sr)),De=yt===0?0:Math.max(0,Math.min($t+De/yt,Ie.scrollWidth-Xe/yt+ur)),ce+=or-er,Pe+=$t-De}xe.push({el:Ie,top:er,left:De})}return xe},yJ=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function xJ(e,t){if(!e.isConnected||!(c=>{let h=c;for(;h&&h.parentNode;){if(h.parentNode===document)return!0;h=h.parentNode instanceof ShadowRoot?h.parentNode.host:h.parentNode}return!1})(e))return;if((c=>typeof c=="object"&&typeof c.behavior=="function")(t))return t.behavior(l6(e,t));const i=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:c,top:h,left:_}of l6(e,yJ(t)))c.scroll({top:h,left:_,behavior:i})}let vJ=Math.round(Math.random()*1e10),_J=0;function bJ(e){let t=V.useMemo(()=>e.name||`radio-group-${vJ}-${++_J}`,[e.name]);var i;let[c,h]=Xs(e.value,(i=e.defaultValue)!==null&&i!==void 0?i:null,e.onChange),[_,w]=V.useState(null),a=Rm({...e,value:c}),A=N=>{!e.isReadOnly&&!e.isDisabled&&(h(N),a.commitValidation())},B=a.displayValidation.isInvalid;return{...a,name:t,selectedValue:c,setSelectedValue:A,lastFocusedValue:_,setLastFocusedValue:w,isDisabled:e.isDisabled||!1,isReadOnly:e.isReadOnly||!1,isRequired:e.isRequired||!1,validationState:e.validationState||(B?"invalid":null),isInvalid:B}}const I7=new WeakMap;function wJ(e,t,i){let{value:c,children:h,"aria-label":_,"aria-labelledby":w}=e;const a=e.isDisabled||t.isDisabled;let A=h!=null,B=_!=null||w!=null;!A&&!B&&console.warn("If you do not provide children, you must specify an aria-label for accessibility");let N=t.selectedValue===c,F=re=>{re.stopPropagation(),t.setSelectedValue(c)},{pressProps:G,isPressed:Q}=wu({isDisabled:a}),{pressProps:te,isPressed:Y}=wu({isDisabled:a,onPress(){var re;t.setSelectedValue(c),(re=i.current)===null||re===void 0||re.focus()}}),{focusableProps:oe}=M_(xr(e,{onFocus:()=>t.setLastFocusedValue(c)}),i),de=xr(G,oe),me=Fl(e,{labelable:!0}),be=-1;t.selectedValue!=null?t.selectedValue===c&&(be=0):(t.lastFocusedValue===c||t.lastFocusedValue==null)&&(be=0),a&&(be=void 0);let{name:pe,descriptionId:Se,errorMessageId:$e,validationBehavior:Le}=I7.get(t);return D_(i,t.selectedValue,t.setSelectedValue),L_({validationBehavior:Le},t,i),{labelProps:xr(te,{onClick:re=>re.preventDefault()}),inputProps:xr(me,{...de,type:"radio",name:pe,tabIndex:be,disabled:a,required:t.isRequired&&Le==="native",checked:N,value:c,onChange:F,"aria-describedby":[e["aria-describedby"],t.isInvalid?$e:null,Se].filter(Boolean).join(" ")||void 0}),isDisabled:a,isSelected:N,isPressed:Q||Y}}function SJ(e,t){let{name:i,isReadOnly:c,isRequired:h,isDisabled:_,orientation:w="vertical",validationBehavior:a="aria"}=e,{direction:A}=Ms(),{isInvalid:B,validationErrors:N,validationDetails:F}=t.displayValidation,{labelProps:G,fieldProps:Q,descriptionProps:te,errorMessageProps:Y}=a2({...e,labelElementType:"span",isInvalid:t.isInvalid,errorMessage:e.errorMessage||N}),oe=Fl(e,{labelable:!0}),{focusWithinProps:de}=yd({onBlurWithin(pe){var Se;(Se=e.onBlur)===null||Se===void 0||Se.call(e,pe),t.selectedValue||t.setLastFocusedValue(null)},onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange}),me=pe=>{let Se;switch(pe.key){case"ArrowRight":A==="rtl"&&w!=="vertical"?Se="prev":Se="next";break;case"ArrowLeft":A==="rtl"&&w!=="vertical"?Se="next":Se="prev";break;case"ArrowDown":Se="next";break;case"ArrowUp":Se="prev";break;default:return}pe.preventDefault();let $e=Ho(pe.currentTarget,{from:pe.target}),Le;Se==="next"?(Le=$e.nextNode(),Le||($e.currentNode=pe.currentTarget,Le=$e.firstChild())):(Le=$e.previousNode(),Le||($e.currentNode=pe.currentTarget,Le=$e.lastChild())),Le&&(Le.focus(),t.setSelectedValue(Le.value))},be=Bs(i);return I7.set(t,{name:be,descriptionId:te.id,errorMessageId:Y.id,validationBehavior:a}),{radioGroupProps:xr(oe,{role:"radiogroup",onKeyDown:me,"aria-invalid":t.isInvalid||void 0,"aria-errormessage":e["aria-errormessage"],"aria-readonly":c||void 0,"aria-required":h||void 0,"aria-disabled":_||void 0,"aria-orientation":w,...Q,...de}),labelProps:G,descriptionProps:te,errorMessageProps:Y,isInvalid:B,validationErrors:N,validationDetails:F}}function TJ(e){var t,i;const c=Pi(),{validationBehavior:h}=Gf(wh)||{},{as:_,ref:w,classNames:a,children:A,label:B,value:N,name:F,isInvalid:G,validationState:Q,validationBehavior:te=(t=h??(c==null?void 0:c.validationBehavior))!=null?t:"native",size:Y="md",color:oe="primary",isDisabled:de=!1,disableAnimation:me=(i=c==null?void 0:c.disableAnimation)!=null?i:!1,orientation:be="vertical",isRequired:pe=!1,isReadOnly:Se,errorMessage:$e,description:Le,className:re,onChange:Ee,onValueChange:se,...ue}=e,ke=_||"div",ce=typeof ke=="string",Pe=Ba(w),xe=V.useMemo(()=>({...ue,value:N,name:F,"aria-label":d5(ue["aria-label"],B),isRequired:pe,isReadOnly:Se,isInvalid:Q==="invalid"||G,orientation:be,validationBehavior:te,onChange:se}),[ue,N,F,B,pe,Se,G,Q,te,be,se]),Te=bJ(xe),{labelProps:Ie,radioGroupProps:Me,errorMessageProps:Xe,descriptionProps:Ce,isInvalid:He,validationErrors:et,validationDetails:Ke}=SJ(xe,Te),ot=xe.isInvalid||He||Te.isInvalid,Pt=V.useMemo(()=>({size:Y,color:oe,groupState:Te,isRequired:pe,isInvalid:ot,isDisabled:de,disableAnimation:me,onChange:Ee}),[Y,oe,pe,de,ot,Ee,me,Te.name,Te.isDisabled,Te.isReadOnly,Te.isRequired,Te.selectedValue,Te.lastFocusedValue]),Et=V.useMemo(()=>_X({isRequired:pe,isInvalid:ot,disableAnimation:me}),[ot,pe,me]),Wt=Nr(a==null?void 0:a.base,re),Dt=V.useCallback(()=>({ref:Pe,className:Et.base({class:Wt}),...xr(Me,Wo(ue,{enabled:ce}))}),[Pe,Et,Wt,Me,ue]),er=V.useCallback(()=>({className:Et.label({class:a==null?void 0:a.label}),...Ie}),[Et,a==null?void 0:a.label,Ie,a==null?void 0:a.label]),De=V.useCallback(()=>({className:Et.wrapper({class:a==null?void 0:a.wrapper}),role:"presentation","data-orientation":be}),[Et,a==null?void 0:a.wrapper,be,Et.wrapper]),ur=V.useCallback((yt={})=>({...yt,...Ce,className:Et.description({class:Nr(a==null?void 0:a.description,yt==null?void 0:yt.className)})}),[Et,a==null?void 0:a.description,Ce,Et.description]),Sr=V.useCallback((yt={})=>({...yt,...Xe,className:Et.errorMessage({class:Nr(a==null?void 0:a.errorMessage,yt==null?void 0:yt.className)})}),[Et,a==null?void 0:a.errorMessage,Xe]);return{Component:ke,children:A,label:B,context:Pt,description:Le,isInvalid:ot,errorMessage:typeof $e=="function"?$e({isInvalid:ot,validationErrors:et,validationDetails:Ke}):$e||(et==null?void 0:et.join(" ")),getGroupProps:Dt,getLabelProps:er,getWrapperProps:De,getDescriptionProps:ur,getErrorMessageProps:Sr}}var[EJ,CJ]=Th({name:"RadioGroupContext",strict:!1}),z7=Na((e,t)=>{const{Component:i,children:c,label:h,context:_,description:w,isInvalid:a,errorMessage:A,getGroupProps:B,getLabelProps:N,getWrapperProps:F,getDescriptionProps:G,getErrorMessageProps:Q}=TJ({...e,ref:t});return b.jsxs(i,{...B(),children:[h&&b.jsx("span",{...N(),children:h}),b.jsx("div",{...F(),children:b.jsx(EJ,{value:_,children:c})}),a&&A?b.jsx("div",{...Q(),children:A}):w?b.jsx("div",{...G(),children:w}):null]})});z7.displayName="HeroUI.RadioGroup";var c6=z7;function DJ(e){var t,i,c,h,_;const w=Pi(),a=CJ(),{as:A,ref:B,classNames:N,id:F,value:G,children:Q,description:te,size:Y=(t=a==null?void 0:a.size)!=null?t:"md",color:oe=(i=a==null?void 0:a.color)!=null?i:"primary",isDisabled:de=(c=a==null?void 0:a.isDisabled)!=null?c:!1,disableAnimation:me=(_=(h=a==null?void 0:a.disableAnimation)!=null?h:w==null?void 0:w.disableAnimation)!=null?_:!1,onChange:be=a==null?void 0:a.onChange,autoFocus:pe=!1,className:Se,...$e}=e,Le=A||"label",re=Ba(B),Ee=V.useRef(null),se=V.useId(),ue=V.useId(),ke=V.useMemo(()=>{var $t;return($t=a.isRequired)!=null?$t:!1},[a.isRequired]),ce=a.isInvalid,Pe=V.useMemo(()=>{const $t=[$e["aria-describedby"],ue].filter(Boolean).join(" ")||void 0;return{id:F,isRequired:ke,isDisabled:de,"aria-label":$e["aria-label"],"aria-labelledby":$e["aria-labelledby"]||se,"aria-describedby":$t}},[F,de,ke,te,$e["aria-label"],$e["aria-labelledby"],$e["aria-describedby"],ue]),{inputProps:xe,isDisabled:Te,isSelected:Ie,isPressed:Me}=wJ({value:G,children:typeof Q=="function"?!0:Q,...Pe},a.groupState,Ee),{focusProps:Xe,isFocused:Ce,isFocusVisible:He}=Ac({autoFocus:pe}),et=Te||xe.readOnly,{hoverProps:Ke,isHovered:ot}=wo({isDisabled:et}),Pt=et?!1:Me,Et=V.useMemo(()=>vX({color:oe,size:Y,isInvalid:ce,isDisabled:Te,disableAnimation:me}),[oe,Y,Te,ce,me]),Wt=Nr(N==null?void 0:N.base,Se),Dt=V.useCallback(($t={})=>({...$t,ref:re,className:Et.base({class:Wt}),"data-disabled":Vt(Te),"data-focus":Vt(Ce),"data-focus-visible":Vt(He),"data-selected":Vt(Ie),"data-invalid":Vt(ce),"data-hover":Vt(ot),"data-pressed":Vt(Pt),"data-hover-unselected":Vt(ot&&!Ie),"data-readonly":Vt(xe.readOnly),"aria-required":Vt(ke),...xr(Ke,$e)}),[Et,Wt,re,Te,Ce,He,Ie,ce,ot,Pt,xe.readOnly,ke,$e]),er=V.useCallback(($t={})=>({...$t,"aria-hidden":!0,className:Nr(Et.wrapper({class:Nr(N==null?void 0:N.wrapper,$t.className)}))}),[Et,N==null?void 0:N.wrapper]),De=V.useCallback(($t={})=>({ref:Ee,...xr($t,xe,Xe),className:Et.hiddenInput({class:N==null?void 0:N.hiddenInput}),onChange:qi(xe.onChange,be)}),[xe,Xe,be]),ur=V.useCallback(($t={})=>({...$t,id:se,className:Et.label({class:N==null?void 0:N.label})}),[Et,N==null?void 0:N.label,Te,Ie,ce]),Sr=V.useCallback(($t={})=>({...$t,className:Et.labelWrapper({class:N==null?void 0:N.labelWrapper})}),[Et,N==null?void 0:N.labelWrapper]),yt=V.useCallback(($t={})=>({...$t,className:Et.control({class:N==null?void 0:N.control})}),[Et,N==null?void 0:N.control]),dt=V.useCallback(($t={})=>({...$t,id:ue,className:Et.description({class:N==null?void 0:N.description})}),[Et,N==null?void 0:N.description]);return{Component:Le,children:Q,isSelected:Ie,isDisabled:Te,isInvalid:ce,isFocusVisible:He,description:te,getBaseProps:Dt,getWrapperProps:er,getInputProps:De,getLabelProps:ur,getLabelWrapperProps:Sr,getControlProps:yt,getDescriptionProps:dt}}var L7=Na((e,t)=>{const{Component:i,children:c,description:h,getBaseProps:_,getWrapperProps:w,getInputProps:a,getLabelProps:A,getLabelWrapperProps:B,getControlProps:N,getDescriptionProps:F}=DJ({...e,ref:t});return b.jsxs(i,{..._(),children:[b.jsx("input",{...a()}),b.jsx("span",{...w(),children:b.jsx("span",{...N()})}),b.jsxs("div",{...B(),children:[c&&b.jsx("span",{...A(),children:c}),h&&b.jsx("span",{...F(),children:h})]})]})});L7.displayName="HeroUI.Radio";var R1=L7;function B_(e){let[t,i]=Xs(e.isOpen,e.defaultOpen||!1,e.onOpenChange);const c=V.useCallback(()=>{i(!0)},[i]),h=V.useCallback(()=>{i(!1)},[i]),_=V.useCallback(()=>{i(!t)},[i,t]);return{isOpen:t,setOpen:i,open:c,close:h,toggle:_}}const PJ=1500,u6=500;let Rg={},MJ=0,Av=!1,Cf=null,Ig=null;function AJ(e={}){let{delay:t=PJ,closeDelay:i=u6}=e,{isOpen:c,open:h,close:_}=B_(e),w=V.useMemo(()=>`${++MJ}`,[]),a=V.useRef(null),A=V.useRef(_),B=()=>{Rg[w]=G},N=()=>{for(let te in Rg)te!==w&&(Rg[te](!0),delete Rg[te])},F=()=>{a.current&&clearTimeout(a.current),a.current=null,N(),B(),Av=!0,h(),Cf&&(clearTimeout(Cf),Cf=null),Ig&&(clearTimeout(Ig),Ig=null)},G=te=>{te||i<=0?(a.current&&clearTimeout(a.current),a.current=null,A.current()):a.current||(a.current=setTimeout(()=>{a.current=null,A.current()},i)),Cf&&(clearTimeout(Cf),Cf=null),Av&&(Ig&&clearTimeout(Ig),Ig=setTimeout(()=>{delete Rg[w],Ig=null,Av=!1},Math.max(u6,i)))},Q=()=>{N(),B(),!c&&!Cf&&!Av?Cf=setTimeout(()=>{Cf=null,Av=!0,F()},t):c||F()};return V.useEffect(()=>{A.current=_},[_]),V.useEffect(()=>()=>{a.current&&clearTimeout(a.current),Rg[w]&&delete Rg[w]},[w]),{isOpen:c,open:te=>{!te&&t>0&&!a.current?Q():F()},close:G}}function kJ(e,t){let i=Fl(e,{labelable:!0}),{hoverProps:c}=wo({onHoverStart:()=>t==null?void 0:t.open(!0),onHoverEnd:()=>t==null?void 0:t.close()});return{tooltipProps:xr(i,c,{role:"tooltip"})}}function RJ(e,t,i){let{isDisabled:c,trigger:h}=e,_=Bs(),w=V.useRef(!1),a=V.useRef(!1),A=()=>{(w.current||a.current)&&t.open(a.current)},B=de=>{!w.current&&!a.current&&t.close(de)};V.useEffect(()=>{let de=me=>{i&&i.current&&me.key==="Escape"&&(me.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener("keydown",de,!0),()=>{document.removeEventListener("keydown",de,!0)}},[i,t]);let N=()=>{h!=="focus"&&(Sm()==="pointer"?w.current=!0:w.current=!1,A())},F=()=>{h!=="focus"&&(a.current=!1,w.current=!1,B())},G=()=>{a.current=!1,w.current=!1,B(!0)},Q=()=>{t0()&&(a.current=!0,A())},te=()=>{a.current=!1,w.current=!1,B(!0)},{hoverProps:Y}=wo({isDisabled:c,onHoverStart:N,onHoverEnd:F}),{focusableProps:oe}=M_({isDisabled:c,onFocus:Q,onBlur:te},i);return{triggerProps:{"aria-describedby":t.isOpen?_:void 0,...xr(oe,Y,{onPointerDown:G,onKeyDown:G,tabIndex:void 0})},tooltipProps:{id:_}}}function IJ(e){var t,i;const c=Pi(),[h,_]=Zo(e,Sw.variantKeys),{ref:w,as:a,isOpen:A,content:B,children:N,defaultOpen:F,onOpenChange:G,isDisabled:Q,trigger:te,shouldFlip:Y=!0,containerPadding:oe=12,placement:de="top",delay:me=0,closeDelay:be=500,showArrow:pe=!1,offset:Se=7,crossOffset:$e=0,isDismissable:Le,shouldCloseOnBlur:re=!0,portalContainer:Ee,isKeyboardDismissDisabled:se=!1,updatePositionDeps:ue=[],shouldCloseOnInteractOutside:ke,className:ce,onClose:Pe,motionProps:xe,classNames:Te,...Ie}=h,Me=a||"div",Xe=(i=(t=e==null?void 0:e.disableAnimation)!=null?t:c==null?void 0:c.disableAnimation)!=null?i:!1,Ce=AJ({delay:me,closeDelay:be,isDisabled:Q,defaultOpen:F,isOpen:A,onOpenChange:or=>{G==null||G(or),or||Pe==null||Pe()}}),He=V.useRef(null),et=V.useRef(null),Ke=V.useId(),ot=Ce.isOpen&&!Q;V.useImperativeHandle(w,()=>qF(et));const{triggerProps:Pt,tooltipProps:Et}=RJ({isDisabled:Q,trigger:te},Ce,He),{tooltipProps:Wt}=kJ({isOpen:ot,...xr(h,Et)},Ce),{overlayProps:Dt,placement:er,updatePosition:De}=Jk({isOpen:ot,targetRef:He,placement:l7(de),overlayRef:et,offset:pe?Se+3:Se,crossOffset:$e,shouldFlip:Y,containerPadding:oe});yx(()=>{ue.length&&De()},ue);const{overlayProps:ur}=R5({isOpen:ot,onClose:Ce.close,isDismissable:Le,shouldCloseOnBlur:re,isKeyboardDismissDisabled:se,shouldCloseOnInteractOutside:ke},et),Sr=V.useMemo(()=>{var or,Er,mr;return Sw({..._,disableAnimation:Xe,radius:(or=e==null?void 0:e.radius)!=null?or:"md",size:(Er=e==null?void 0:e.size)!=null?Er:"md",shadow:(mr=e==null?void 0:e.shadow)!=null?mr:"sm"})},[Ko(_),Xe,e==null?void 0:e.radius,e==null?void 0:e.size,e==null?void 0:e.shadow]),yt=V.useCallback((or={},Er=null)=>({...xr(Pt,or),ref:f5(Er,He),"aria-describedby":ot?Ke:void 0}),[Pt,ot,Ke,Ce]),dt=V.useCallback(()=>({ref:et,"data-slot":"base","data-open":Vt(ot),"data-arrow":Vt(pe),"data-disabled":Vt(Q),"data-placement":Tw(er||"top",de),...xr(Wt,ur,Ie),style:xr(Dt.style,Ie.style,h.style),className:Sr.base({class:Te==null?void 0:Te.base}),id:Ke}),[Sr,ot,pe,Q,er,de,Wt,ur,Ie,Dt,h,Ke]),$t=V.useCallback(()=>({"data-slot":"content","data-open":Vt(ot),"data-arrow":Vt(pe),"data-disabled":Vt(Q),"data-placement":Tw(er||"top",de),className:Sr.content({class:Nr(Te==null?void 0:Te.content,ce)})}),[Sr,ot,pe,Q,er,de,Te]);return{Component:Me,content:B,children:N,isOpen:ot,triggerRef:He,showArrow:pe,portalContainer:Ee,placement:de,disableAnimation:Xe,isDisabled:Q,motionProps:xe,getTooltipContentProps:$t,getTriggerProps:yt,getTooltipProps:dt}}var zJ=()=>km(()=>import("./index-hP_uZtvp.js"),[]).then(e=>e.default),$7=Na((e,t)=>{var i;const{Component:c,children:h,content:_,isOpen:w,portalContainer:a,placement:A,disableAnimation:B,motionProps:N,getTriggerProps:F,getTooltipProps:G,getTooltipContentProps:Q}=IJ({...e,ref:t});let te;try{if(V.Children.count(h)!==1)throw new Error;if(!V.isValidElement(h))te=b.jsx("p",{...F(),children:h});else{const Se=h,$e=(i=Se.props.ref)!=null?i:Se.ref;te=V.cloneElement(Se,F(Se.props,$e))}}catch{te=b.jsx("span",{}),$w("Tooltip must have only one child node. Please, check your code.")}const{ref:Y,id:oe,style:de,...me}=G(),be=b.jsx("div",{ref:Y,id:oe,style:de,children:b.jsx(Tu,{features:zJ,children:b.jsx(jl.div,{animate:"enter",exit:"exit",initial:"exit",variants:nx.scaleSpring,...xr(N,me),style:{...yT(A)},children:b.jsx(c,{...Q(),children:_})})})});return b.jsxs(b.Fragment,{children:[te,B&&w?b.jsx(aP,{portalContainer:a,children:b.jsx("div",{ref:Y,id:oe,style:de,...me,children:b.jsx(c,{...Q(),children:_})})}):b.jsx(Uf,{children:w?b.jsx(aP,{portalContainer:a,children:be}):null})]})});$7.displayName="HeroUI.Tooltip";var LJ=$7;function B7(e={}){const{rerender:t=!1,delay:i=0}=e,c=V.useRef(!1),[h,_]=V.useState(!1);return V.useEffect(()=>{c.current=!0;let w=null;return t&&(i>0?w=setTimeout(()=>{_(!0)},i):_(!0)),()=>{c.current=!1,t&&_(!1),w&&clearTimeout(w)}},[t]),[V.useCallback(()=>c.current,[]),h]}function N7(e){let{value:t=0,minValue:i=0,maxValue:c=100,valueLabel:h,isIndeterminate:_,formatOptions:w={style:"percent"}}=e,a=Fl(e,{labelable:!0}),{labelProps:A,fieldProps:B}=A7({...e,labelElementType:"span"});t=Wg(t,i,c);let N=(t-i)/(c-i),F=iS(w);if(!_&&!h){let G=w.style==="percent"?N:t;h=F.format(G)}return{progressBarProps:xr(a,{...B,"aria-valuenow":_?void 0:t,"aria-valuemin":i,"aria-valuemax":c,"aria-valuetext":_?void 0:h,role:"progressbar"}),labelProps:A}}function $J(e){var t,i,c;const h=Pi(),[_,w]=Zo(e,kM.variantKeys),{ref:a,as:A,id:B,className:N,classNames:F,label:G,valueLabel:Q,value:te=void 0,minValue:Y=0,maxValue:oe=100,strokeWidth:de,showValueLabel:me=!1,formatOptions:be={style:"percent"},...pe}=_,Se=A||"div",$e=Ba(a),Le=Nr(F==null?void 0:F.base,N),[,re]=B7({rerender:!0,delay:100}),Ee=((t=e.isIndeterminate)!=null?t:!0)&&te===void 0,se=(c=(i=e.disableAnimation)!=null?i:h==null?void 0:h.disableAnimation)!=null?c:!1,{progressBarProps:ue,labelProps:ke}=N7({id:B,label:G,value:te,minValue:Y,maxValue:oe,valueLabel:Q,formatOptions:be,isIndeterminate:Ee,"aria-labelledby":e["aria-labelledby"],"aria-label":e["aria-label"]}),ce=V.useMemo(()=>kM({...w,disableAnimation:se,isIndeterminate:Ee}),[Ko(w),se,Ee]),Pe=se?!0:re,xe=16,Te=de||(e.size==="sm"?2:3),Ie=16-Te,Me=2*Ie*Math.PI,Xe=V.useMemo(()=>Pe?Ee?.25:te?YA((te-Y)/(oe-Y),1):0:0,[Pe,te,Y,oe,Ee]),Ce=Me-Xe*Me,He=V.useCallback((Et={})=>({ref:$e,"data-indeterminate":Vt(Ee),"data-disabled":Vt(e.isDisabled),className:ce.base({class:Le}),...xr(ue,pe,Et)}),[$e,ce,Ee,e.isDisabled,Le,ue,pe]),et=V.useCallback((Et={})=>({className:ce.label({class:F==null?void 0:F.label}),...xr(ke,Et)}),[ce,F,ke]),Ke=V.useCallback((Et={})=>({viewBox:"0 0 32 32",fill:"none",strokeWidth:Te,className:ce.svg({class:F==null?void 0:F.svg}),...Et}),[Te,ce,F]),ot=V.useCallback((Et={})=>({cx:xe,cy:xe,r:Ie,role:"presentation",strokeDasharray:`${Me} ${Me}`,strokeDashoffset:Ce,transform:"rotate(-90 16 16)",strokeLinecap:"round",className:ce.indicator({class:F==null?void 0:F.indicator}),...Et}),[ce,F,Ce,Me,Ie]),Pt=V.useCallback((Et={})=>({cx:xe,cy:xe,r:Ie,role:"presentation",strokeDasharray:`${Me} ${Me}`,strokeDashoffset:0,transform:"rotate(-90 16 16)",strokeLinecap:"round",className:ce.track({class:F==null?void 0:F.track}),...Et}),[ce,F,Me,Ie]);return{Component:Se,domRef:$e,slots:ce,classNames:F,label:G,showValueLabel:me,getProgressBarProps:He,getLabelProps:et,getSvgProps:Ke,getIndicatorProps:ot,getTrackProps:Pt}}var j7=Na((e,t)=>{const{Component:i,slots:c,classNames:h,label:_,showValueLabel:w,getProgressBarProps:a,getLabelProps:A,getSvgProps:B,getIndicatorProps:N,getTrackProps:F}=$J({ref:t,...e}),G=a();return b.jsxs(i,{...G,children:[b.jsxs("div",{className:c.svgWrapper({class:h==null?void 0:h.svgWrapper}),children:[b.jsxs("svg",{...B(),children:[b.jsx("circle",{...F()}),b.jsx("circle",{...N()})]}),w&&b.jsx("span",{className:c.value({class:h==null?void 0:h.value}),children:G["aria-valuetext"]})]}),_&&b.jsx("span",{...A(),children:_})]})});j7.displayName="HeroUI.CircularProgress";var i2=j7;function BJ(e){var t,i;const c=Pi(),[h,_]=Zo(e,AM.variantKeys),{ref:w,as:a,id:A,className:B,classNames:N,label:F,valueLabel:G,value:Q=0,minValue:te=0,maxValue:Y=100,showValueLabel:oe=!1,formatOptions:de={style:"percent"},...me}=h,be=a||"div",pe=Ba(w),Se=Nr(N==null?void 0:N.base,B),[,$e]=B7({rerender:!0,delay:100}),Le=e.isIndeterminate,re=(i=(t=e.disableAnimation)!=null?t:c==null?void 0:c.disableAnimation)!=null?i:!1,{progressBarProps:Ee,labelProps:se}=N7({id:A,label:F,value:Q,minValue:te,maxValue:Y,valueLabel:G,formatOptions:de,isIndeterminate:Le,"aria-labelledby":e["aria-labelledby"],"aria-label":e["aria-label"]}),ue=V.useMemo(()=>AM({..._,disableAnimation:re}),[Ko(_),re]),ke=re?!0:$e,ce=V.useMemo(()=>Le||!ke?void 0:YA((Q-te)/(Y-te)*100),[ke,Le,Q,te,Y]),Pe=V.useCallback((Te={})=>({ref:pe,"data-indeterminate":Vt(Le),"data-disabled":Vt(e.isDisabled),className:ue.base({class:Se}),...xr(Ee,me,Te)}),[pe,ue,Le,e.isDisabled,Se,Ee,me]),xe=V.useCallback((Te={})=>({className:ue.label({class:N==null?void 0:N.label}),...xr(se,Te)}),[ue,N,se]);return{Component:be,domRef:pe,slots:ue,classNames:N,label:F,percentage:ce,showValueLabel:oe,getProgressBarProps:Pe,getLabelProps:xe}}var O7=Na((e,t)=>{const{Component:i,slots:c,classNames:h,label:_,percentage:w,showValueLabel:a,getProgressBarProps:A,getLabelProps:B}=BJ({...e,ref:t}),N=A(),F=_||a;return b.jsxs(i,{...N,children:[F?b.jsxs("div",{className:c.labelWrapper({class:h==null?void 0:h.labelWrapper}),children:[_&&b.jsx("span",{...B(),children:_}),a&&b.jsx("span",{className:c.value({class:h==null?void 0:h.value}),children:N["aria-valuetext"]})]}):null,b.jsx("div",{className:c.track({class:h==null?void 0:h.track}),children:b.jsx("div",{className:c.indicator({class:h==null?void 0:h.indicator}),style:{transform:`translateX(-${100-(w||0)}%)`}})})]})});O7.displayName="HeroUI.Progress";var NJ=O7;function F7(e,t){let{inputElementType:i="input",isDisabled:c=!1,isRequired:h=!1,isReadOnly:_=!1,type:w="text",validationBehavior:a="aria"}=e,[A,B]=Xs(e.value,e.defaultValue||"",e.onChange),{focusableProps:N}=M_(e,t),F=Rm({...e,value:A}),{isInvalid:G,validationErrors:Q,validationDetails:te}=F.displayValidation,{labelProps:Y,fieldProps:oe,descriptionProps:de,errorMessageProps:me}=a2({...e,isInvalid:G,errorMessage:e.errorMessage||Q}),be=Fl(e,{labelable:!0});const pe={type:w,pattern:e.pattern};return D_(t,A,B),L_(e,F,t),V.useEffect(()=>{if(t.current instanceof Dc(t.current).HTMLTextAreaElement){let Se=t.current;Object.defineProperty(Se,"defaultValue",{get:()=>Se.value,set:()=>{},configurable:!0})}},[t]),{labelProps:Y,inputProps:xr(be,i==="input"?pe:void 0,{disabled:c,readOnly:_,required:h&&a==="native","aria-required":h&&a==="aria"||void 0,"aria-invalid":G||void 0,"aria-errormessage":e["aria-errormessage"],"aria-activedescendant":e["aria-activedescendant"],"aria-autocomplete":e["aria-autocomplete"],"aria-haspopup":e["aria-haspopup"],"aria-controls":e["aria-controls"],value:A,onChange:Se=>B(Se.target.value),autoComplete:e.autoComplete,autoCapitalize:e.autoCapitalize,maxLength:e.maxLength,minLength:e.minLength,name:e.name,placeholder:e.placeholder,inputMode:e.inputMode,autoCorrect:e.autoCorrect,spellCheck:e.spellCheck,[parseInt(rn.version,10)>=17?"enterKeyHint":"enterkeyhint"]:e.enterKeyHint,onCopy:e.onCopy,onCut:e.onCut,onPaste:e.onPaste,onCompositionEnd:e.onCompositionEnd,onCompositionStart:e.onCompositionStart,onCompositionUpdate:e.onCompositionUpdate,onSelect:e.onSelect,onBeforeInput:e.onBeforeInput,onInput:e.onInput,...N,...oe}),descriptionProps:de,errorMessageProps:me,isInvalid:G,validationErrors:Q,validationDetails:te}}function d6(){return typeof window<"u"&&window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"}function jJ(e,t,i){let c=Zs(F=>{let G=i.current;if(!G)return;let Q=null;switch(F.inputType){case"historyUndo":case"historyRedo":return;case"insertLineBreak":return;case"deleteContent":case"deleteByCut":case"deleteByDrag":Q=G.value.slice(0,G.selectionStart)+G.value.slice(G.selectionEnd);break;case"deleteContentForward":Q=G.selectionEnd===G.selectionStart?G.value.slice(0,G.selectionStart)+G.value.slice(G.selectionEnd+1):G.value.slice(0,G.selectionStart)+G.value.slice(G.selectionEnd);break;case"deleteContentBackward":Q=G.selectionEnd===G.selectionStart?G.value.slice(0,G.selectionStart-1)+G.value.slice(G.selectionStart):G.value.slice(0,G.selectionStart)+G.value.slice(G.selectionEnd);break;case"deleteSoftLineBackward":case"deleteHardLineBackward":Q=G.value.slice(G.selectionStart);break;default:F.data!=null&&(Q=G.value.slice(0,G.selectionStart)+F.data+G.value.slice(G.selectionEnd));break}(Q==null||!t.validate(Q))&&F.preventDefault()});V.useEffect(()=>{if(!d6()||!i.current)return;let F=i.current;return F.addEventListener("beforeinput",c,!1),()=>{F.removeEventListener("beforeinput",c,!1)}},[i,c]);let h=d6()?null:F=>{let G=F.target.value.slice(0,F.target.selectionStart)+F.data+F.target.value.slice(F.target.selectionEnd);t.validate(G)||F.preventDefault()},{labelProps:_,inputProps:w,descriptionProps:a,errorMessageProps:A,...B}=F7(e,i),N=V.useRef(null);return{inputProps:xr(w,{onBeforeInput:h,onCompositionStart(){let{value:F,selectionStart:G,selectionEnd:Q}=i.current;N.current={value:F,selectionStart:G,selectionEnd:Q}},onCompositionEnd(){if(i.current&&!t.validate(i.current.value)){let{value:F,selectionStart:G,selectionEnd:Q}=N.current;i.current.value=F,i.current.setSelectionRange(G,Q),t.setInputValue(F)}}}),labelProps:_,descriptionProps:a,errorMessageProps:A,...B}}function V7(e){var t,i,c,h,_,w,a;const A=Pi(),{validationBehavior:B}=Gf(wh)||{},[N,F]=Zo(e,RM.variantKeys),{ref:G,as:Q,type:te,label:Y,baseRef:oe,wrapperRef:de,description:me,className:be,classNames:pe,autoFocus:Se,startContent:$e,endContent:Le,onClear:re,onChange:Ee,validationState:se,validationBehavior:ue=(t=B??(A==null?void 0:A.validationBehavior))!=null?t:"native",innerWrapperRef:ke,onValueChange:ce=()=>{},...Pe}=N,xe=V.useCallback(Gt=>{ce(Gt??"")},[ce]),[Te,Ie]=V.useState(!1),Me=Q||"div",Xe=(c=(i=e.disableAnimation)!=null?i:A==null?void 0:A.disableAnimation)!=null?c:!1,Ce=Ba(G),He=Ba(oe),et=Ba(de),Ke=Ba(ke),[ot,Pt]=Xs(N.value,(h=N.defaultValue)!=null?h:"",xe),Et=te==="file",Wt=((a=(w=(_=Ce==null?void 0:Ce.current)==null?void 0:_.files)==null?void 0:w.length)!=null?a:0)>0,Dt=["date","time","month","week","range"].includes(te),er=!md(ot)||Dt||Wt,De=er||Te,ur=te==="hidden",Sr=e.isMultiline,yt=Nr(pe==null?void 0:pe.base,be,er?"is-filled":""),dt=V.useCallback(()=>{var Gt;Et?Ce.current.value="":Pt(""),re==null||re(),(Gt=Ce.current)==null||Gt.focus()},[Pt,re,Et]);yx(()=>{Ce.current&&Pt(Ce.current.value)},[Ce.current]);const{labelProps:$t,inputProps:or,isInvalid:Er,validationErrors:mr,validationDetails:Pr,descriptionProps:Fr,errorMessageProps:Bn}=F7({...e,validationBehavior:ue,autoCapitalize:e.autoCapitalize,value:ot,"aria-label":d5(e["aria-label"],e.label,e.placeholder),inputElementType:Sr?"textarea":"input",onChange:Pt},Ce);Et&&(delete or.value,delete or.onChange);const{isFocusVisible:Xr,isFocused:On,focusProps:fr}=Ac({autoFocus:Se,isTextInput:!0}),{isHovered:Tn,hoverProps:kr}=wo({isDisabled:!!(e!=null&&e.isDisabled)}),{isHovered:Dr,hoverProps:Br}=wo({isDisabled:!!(e!=null&&e.isDisabled)}),{focusProps:an,isFocusVisible:Sa}=Ac(),{focusWithinProps:Za}=yd({onFocusWithinChange:Ie}),{pressProps:oa}=wu({isDisabled:!!(e!=null&&e.isDisabled)||!!(e!=null&&e.isReadOnly),onPress:dt}),qn=se==="invalid"||Er,Wn=e2({labelPlacement:e.labelPlacement,label:Y}),Da=typeof N.errorMessage=="function"?N.errorMessage({isInvalid:qn,validationErrors:mr,validationDetails:Pr}):N.errorMessage||(mr==null?void 0:mr.join(" ")),Ia=!!re||e.isClearable,ja=!!Y||!!me||!!Da,Wr=!!N.placeholder,yi=!!Y,Zn=!!me||!!Da,cn=Wn==="outside"||Wn==="outside-left",ya=Wn==="inside",Xa=Ce.current?(!Ce.current.value||Ce.current.value===""||!ot||ot==="")&&Wr:!1,js=Wn==="outside-left",qa=!!$e,yn=cn?Wn==="outside-left"||Wr||Wn==="outside"&&qa:!1,St=Wn==="outside"&&!Wr&&!qa,ye=V.useMemo(()=>RM({...F,isInvalid:qn,labelPlacement:Wn,isClearable:Ia,disableAnimation:Xe}),[Ko(F),qn,Wn,Ia,qa,Xe]),Ae=V.useCallback((Gt={})=>({ref:He,className:ye.base({class:yt}),"data-slot":"base","data-filled":Vt(er||Wr||qa||Xa||Et),"data-filled-within":Vt(De||Wr||qa||Xa||Et),"data-focus-within":Vt(Te),"data-focus-visible":Vt(Xr),"data-readonly":Vt(e.isReadOnly),"data-focus":Vt(On),"data-hover":Vt(Tn||Dr),"data-required":Vt(e.isRequired),"data-invalid":Vt(qn),"data-disabled":Vt(e.isDisabled),"data-has-elements":Vt(ja),"data-has-helper":Vt(Zn),"data-has-label":Vt(yi),"data-has-value":Vt(!Xa),"data-hidden":Vt(ur),...Za,...Gt}),[ye,yt,er,On,Tn,Dr,qn,Zn,yi,ja,Xa,qa,Te,Xr,De,Wr,Za,ur,e.isReadOnly,e.isRequired,e.isDisabled]),Ve=V.useCallback((Gt={})=>({"data-slot":"label",className:ye.label({class:pe==null?void 0:pe.label}),...xr($t,Br,Gt)}),[ye,Dr,$t,pe==null?void 0:pe.label]),Je=V.useCallback(Gt=>{Gt.key==="Escape"&&ot&&(Ia||re)&&!e.isReadOnly&&(Pt(""),re==null||re())},[ot,Pt,re,Ia,e.isReadOnly]),tt=V.useCallback((Gt={})=>({"data-slot":"input","data-filled":Vt(er),"data-filled-within":Vt(De),"data-has-start-content":Vt(qa),"data-has-end-content":Vt(!!Le),className:ye.input({class:Nr(pe==null?void 0:pe.input,er?"is-filled":"",Sr?"pe-0":"",te==="password"?"[&::-ms-reveal]:hidden":"")}),...xr(fr,or,Wo(Pe,{enabled:!0,labelable:!0,omitEventNames:new Set(Object.keys(or))}),Gt),"aria-readonly":Vt(e.isReadOnly),onChange:qi(or.onChange,Ee),onKeyDown:qi(or.onKeyDown,Gt.onKeyDown,Je),ref:Ce}),[ye,ot,fr,or,Pe,er,De,qa,Le,pe==null?void 0:pe.input,e.isReadOnly,e.isRequired,Ee,Je]),ut=V.useCallback((Gt={})=>({ref:et,"data-slot":"input-wrapper","data-hover":Vt(Tn||Dr),"data-focus-visible":Vt(Xr),"data-focus":Vt(On),className:ye.inputWrapper({class:Nr(pe==null?void 0:pe.inputWrapper,er?"is-filled":"")}),...xr(Gt,kr),onClick:cr=>{Ce.current&&cr.currentTarget===cr.target&&Ce.current.focus()},style:{cursor:"text",...Gt.style}}),[ye,Tn,Dr,Xr,On,ot,pe==null?void 0:pe.inputWrapper]),bt=V.useCallback((Gt={})=>({...Gt,ref:Ke,"data-slot":"inner-wrapper",onClick:cr=>{Ce.current&&cr.currentTarget===cr.target&&Ce.current.focus()},className:ye.innerWrapper({class:Nr(pe==null?void 0:pe.innerWrapper,Gt==null?void 0:Gt.className)})}),[ye,pe==null?void 0:pe.innerWrapper]),ft=V.useCallback((Gt={})=>({...Gt,"data-slot":"main-wrapper",className:ye.mainWrapper({class:Nr(pe==null?void 0:pe.mainWrapper,Gt==null?void 0:Gt.className)})}),[ye,pe==null?void 0:pe.mainWrapper]),pt=V.useCallback((Gt={})=>({...Gt,"data-slot":"helper-wrapper",className:ye.helperWrapper({class:Nr(pe==null?void 0:pe.helperWrapper,Gt==null?void 0:Gt.className)})}),[ye,pe==null?void 0:pe.helperWrapper]),At=V.useCallback((Gt={})=>({...Gt,...Fr,"data-slot":"description",className:ye.description({class:Nr(pe==null?void 0:pe.description,Gt==null?void 0:Gt.className)})}),[ye,pe==null?void 0:pe.description]),It=V.useCallback((Gt={})=>({...Gt,...Bn,"data-slot":"error-message",className:ye.errorMessage({class:Nr(pe==null?void 0:pe.errorMessage,Gt==null?void 0:Gt.className)})}),[ye,Bn,pe==null?void 0:pe.errorMessage]),Jt=V.useCallback((Gt={})=>({...Gt,type:"button",tabIndex:-1,disabled:e.isDisabled,"aria-label":"clear input","data-slot":"clear-button","data-focus-visible":Vt(Sa),className:ye.clearButton({class:Nr(pe==null?void 0:pe.clearButton,Gt==null?void 0:Gt.className)}),...xr(oa,an)}),[ye,Sa,oa,an,pe==null?void 0:pe.clearButton]);return{Component:Me,classNames:pe,domRef:Ce,label:Y,description:me,startContent:$e,endContent:Le,labelPlacement:Wn,isClearable:Ia,hasHelper:Zn,hasStartContent:qa,isLabelOutside:yn,isOutsideLeft:js,isLabelOutsideAsPlaceholder:St,shouldLabelBeOutside:cn,shouldLabelBeInside:ya,hasPlaceholder:Wr,isInvalid:qn,errorMessage:Da,getBaseProps:Ae,getLabelProps:Ve,getInputProps:tt,getMainWrapperProps:ft,getInputWrapperProps:ut,getInnerWrapperProps:bt,getHelperWrapperProps:pt,getDescriptionProps:At,getErrorMessageProps:It,getClearButtonProps:Jt}}var U7=Na((e,t)=>{const{Component:i,label:c,description:h,isClearable:_,startContent:w,endContent:a,labelPlacement:A,hasHelper:B,isOutsideLeft:N,shouldLabelBeOutside:F,errorMessage:G,isInvalid:Q,getBaseProps:te,getLabelProps:Y,getInputProps:oe,getInnerWrapperProps:de,getInputWrapperProps:me,getMainWrapperProps:be,getHelperWrapperProps:pe,getDescriptionProps:Se,getErrorMessageProps:$e,getClearButtonProps:Le}=V7({...e,ref:t}),re=c?b.jsx("label",{...Y(),children:c}):null,Ee=V.useMemo(()=>_?b.jsx("button",{...Le(),children:a||b.jsx(pT,{})}):a,[_,Le]),se=V.useMemo(()=>{const ce=Q&&G;return!B||!(ce||h)?null:b.jsx("div",{...pe(),children:ce?b.jsx("div",{...$e(),children:G}):b.jsx("div",{...Se(),children:h})})},[B,Q,G,h,pe,$e,Se]),ue=V.useMemo(()=>b.jsxs("div",{...de(),children:[w,b.jsx("input",{...oe()}),Ee]}),[w,Ee,oe,de]),ke=V.useMemo(()=>F?b.jsxs("div",{...be(),children:[b.jsxs("div",{...me(),children:[N?null:re,ue]}),se]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{...me(),children:[re,ue]}),se]}),[A,se,F,re,ue,G,h,be,me,$e,Se]);return b.jsxs(i,{...te(),children:[N?re:null,ke]})});U7.displayName="HeroUI.Input";var Xn=U7;function Pw(){return Pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var c in i)({}).hasOwnProperty.call(i,c)&&(e[c]=i[c])}return e},Pw.apply(null,arguments)}function OJ(e,t){if(e==null)return{};var i={};for(var c in e)if({}.hasOwnProperty.call(e,c)){if(t.indexOf(c)!==-1)continue;i[c]=e[c]}return i}var FJ=V.useLayoutEffect,VJ=function(t){var i=rn.useRef(t);return FJ(function(){i.current=t}),i},h6=function(t,i){if(typeof t=="function"){t(i);return}t.current=i},UJ=function(t,i){var c=rn.useRef();return rn.useCallback(function(h){t.current=h,c.current&&h6(c.current,null),c.current=i,i&&h6(i,h)},[i])},f6={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},GJ=function(t){Object.keys(f6).forEach(function(i){t.style.setProperty(i,f6[i],"important")})},p6=GJ,dl=null,m6=function(t,i){var c=t.scrollHeight;return i.sizingStyle.boxSizing==="border-box"?c+i.borderSize:c-i.paddingSize};function HJ(e,t,i,c){i===void 0&&(i=1),c===void 0&&(c=1/0),dl||(dl=document.createElement("textarea"),dl.setAttribute("tabindex","-1"),dl.setAttribute("aria-hidden","true"),p6(dl)),dl.parentNode===null&&document.body.appendChild(dl);var h=e.paddingSize,_=e.borderSize,w=e.sizingStyle,a=w.boxSizing;Object.keys(w).forEach(function(G){var Q=G;dl.style[Q]=w[Q]}),p6(dl),dl.value=t;var A=m6(dl,e);dl.value=t,A=m6(dl,e),dl.value="x";var B=dl.scrollHeight-h,N=B*i;a==="border-box"&&(N=N+h+_),A=Math.max(N,A);var F=B*c;return a==="border-box"&&(F=F+h+_),A=Math.min(F,A),[A,B]}var g6=function(){},qJ=function(t,i){return t.reduce(function(c,h){return c[h]=i[h],c},{})},WJ=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],KJ=!!document.documentElement.currentStyle,ZJ=function(t){var i=window.getComputedStyle(t);if(i===null)return null;var c=qJ(WJ,i),h=c.boxSizing;if(h==="")return null;KJ&&h==="border-box"&&(c.width=parseFloat(c.width)+parseFloat(c.borderRightWidth)+parseFloat(c.borderLeftWidth)+parseFloat(c.paddingRight)+parseFloat(c.paddingLeft)+"px");var _=parseFloat(c.paddingBottom)+parseFloat(c.paddingTop),w=parseFloat(c.borderBottomWidth)+parseFloat(c.borderTopWidth);return{sizingStyle:c,paddingSize:_,borderSize:w}},XJ=ZJ;function TT(e,t,i){var c=VJ(i);V.useLayoutEffect(function(){var h=function(w){return c.current(w)};if(e)return e.addEventListener(t,h),function(){return e.removeEventListener(t,h)}},[])}var YJ=function(t,i){TT(document.body,"reset",function(c){t.current.form===c.target&&i(c)})},JJ=function(t){TT(window,"resize",t)},QJ=function(t){TT(document.fonts,"loadingdone",t)},eQ=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],tQ=function(t,i){var c=t.cacheMeasurements,h=t.maxRows,_=t.minRows,w=t.onChange,a=w===void 0?g6:w,A=t.onHeightChange,B=A===void 0?g6:A,N=OJ(t,eQ),F=N.value!==void 0,G=V.useRef(null),Q=UJ(G,i),te=V.useRef(0),Y=V.useRef(),oe=function(){var be=G.current,pe=c&&Y.current?Y.current:XJ(be);if(pe){Y.current=pe;var Se=HJ(pe,be.value||be.placeholder||"x",_,h),$e=Se[0],Le=Se[1];te.current!==$e&&(te.current=$e,be.style.setProperty("height",$e+"px","important"),B($e,{rowHeight:Le}))}},de=function(be){F||oe(),a(be)};return V.useLayoutEffect(oe),YJ(G,function(){if(!F){var me=G.current.value;requestAnimationFrame(function(){var be=G.current;be&&me!==be.value&&oe()})}}),JJ(oe),QJ(oe),V.createElement("textarea",Pw({},N,{onChange:de,ref:Q}))},rQ=V.forwardRef(tQ),G7=Na(({style:e,minRows:t=3,maxRows:i=8,cacheMeasurements:c=!1,disableAutosize:h=!1,onHeightChange:_,...w},a)=>{const{Component:A,label:B,description:N,startContent:F,endContent:G,hasHelper:Q,shouldLabelBeOutside:te,shouldLabelBeInside:Y,isInvalid:oe,errorMessage:de,getBaseProps:me,getLabelProps:be,getInputProps:pe,getInnerWrapperProps:Se,getInputWrapperProps:$e,getHelperWrapperProps:Le,getDescriptionProps:re,getErrorMessageProps:Ee,isClearable:se,getClearButtonProps:ue}=V7({...w,ref:a,isMultiline:!0}),[ke,ce]=V.useState(t>1),[Pe,xe]=V.useState(!1),Te=B?b.jsx("label",{...be(),children:B}):null,Ie=pe(),Me=(ot,Pt)=>{if(t===1&&ce(ot>=Pt.rowHeight*2),i>t){const Et=ot>=i*Pt.rowHeight;xe(Et)}_==null||_(ot,Pt)},Xe=h?b.jsx("textarea",{...Ie,style:xr(Ie.style,e??{})}):b.jsx(rQ,{...Ie,cacheMeasurements:c,"data-hide-scroll":Vt(!Pe),maxRows:i,minRows:t,style:xr(Ie.style,e??{}),onHeightChange:Me}),Ce=V.useMemo(()=>se?b.jsx("button",{...ue(),children:b.jsx(pT,{})}):null,[se,ue]),He=V.useMemo(()=>F||G?b.jsxs("div",{...Se(),children:[F,Xe,G]}):b.jsx("div",{...Se(),children:Xe}),[F,Ie,G,Se]),et=oe&&de,Ke=et||N;return b.jsxs(A,{...me(),children:[te?Te:null,b.jsxs("div",{...$e(),"data-has-multiple-rows":Vt(ke),children:[Y?Te:null,He,Ce]}),Q&&Ke?b.jsx("div",{...Le(),children:et?b.jsx("div",{...Ee(),children:de}):b.jsx("div",{...re(),children:N})}):null]})});G7.displayName="HeroUI.Textarea";var p4=G7;function nQ(e,t){const{groupRef:i,triggerRef:c,popoverRef:h,showArrow:_,offset:w=7,crossOffset:a=0,scrollRef:A,shouldFlip:B,boundaryElement:N,isDismissable:F=!0,shouldCloseOnBlur:G=!0,shouldCloseOnScroll:Q=!0,placement:te="top",containerPadding:Y,shouldCloseOnInteractOutside:oe,isNonModal:de,isKeyboardDismissDisabled:me,updatePositionDeps:be=[],...pe}=e,Se=de??!0,$e=pe.trigger==="SubmenuTrigger",{overlayProps:Le,underlayProps:re}=R5({isOpen:t.isOpen,onClose:t.close,shouldCloseOnBlur:G,isDismissable:F||$e,isKeyboardDismissDisabled:me,shouldCloseOnInteractOutside:oe||(ce=>xT(ce,c,t))},h),{overlayProps:Ee,arrowProps:se,placement:ue,updatePosition:ke}=Jk({...pe,shouldFlip:B,crossOffset:a,targetRef:c,overlayRef:h,isOpen:t.isOpen,scrollRef:A,boundaryElement:N,containerPadding:Y,placement:l7(te),offset:_?w+3:w,onClose:Se&&!$e&&Q?t.close:()=>{}});return yx(()=>{be.length&&ke()},be),V.useEffect(()=>{var ce,Pe;if(t.isOpen&&h.current)return Se?uY((ce=i==null?void 0:i.current)!=null?ce:h.current):cY([(Pe=i==null?void 0:i.current)!=null?Pe:h.current])},[Se,t.isOpen,h,i]),{popoverProps:xr(Le,Ee),arrowProps:se,underlayProps:re,placement:ue}}var aQ="top";function H7(e){var t,i,c;const h=Pi(),[_,w]=Zo(e,Sw.variantKeys),{as:a,ref:A,children:B,state:N,triggerRef:F,scrollRef:G,defaultOpen:Q,onOpenChange:te,isOpen:Y,isNonModal:oe=!0,shouldFlip:de=!0,containerPadding:me=12,shouldBlockScroll:be=!1,isDismissable:pe=!0,shouldCloseOnBlur:Se,portalContainer:$e,updatePositionDeps:Le,dialogProps:re,placement:Ee=aQ,triggerType:se="dialog",showArrow:ue=!1,offset:ke=7,crossOffset:ce=0,boundaryElement:Pe,isKeyboardDismissDisabled:xe,shouldCloseOnInteractOutside:Te,shouldCloseOnScroll:Ie,motionProps:Me,className:Xe,classNames:Ce,onClose:He,...et}=_,Ke=a||"div",ot=Ba(A),Pt=V.useRef(null),Et=V.useRef(!1),Wt=F||Pt,Dt=(i=(t=e.disableAnimation)!=null?t:h==null?void 0:h.disableAnimation)!=null?i:!1,er=B_({isOpen:Y,defaultOpen:Q,onOpenChange:Dr=>{te==null||te(Dr),Dr||He==null||He()}}),De=N||er,{popoverProps:ur,underlayProps:Sr,placement:yt}=nQ({triggerRef:Wt,isNonModal:oe,popoverRef:ot,placement:Ee,offset:ke,scrollRef:G,isDismissable:pe,shouldCloseOnBlur:Se,boundaryElement:Pe,crossOffset:ce,shouldFlip:de,containerPadding:me,updatePositionDeps:Le,isKeyboardDismissDisabled:xe,shouldCloseOnScroll:Ie,shouldCloseOnInteractOutside:Te},De),dt=V.useMemo(()=>yt?lY(yt,Ee)?yt:Ee:null,[yt,Ee]),{triggerProps:$t}=gR({type:se},De,Wt),{isFocusVisible:or,isFocused:Er,focusProps:mr}=Ac(),Pr=V.useMemo(()=>Sw({...w}),[Ko(w)]),Fr=Nr(Ce==null?void 0:Ce.base,Xe);yR({isDisabled:!(be&&De.isOpen)});const Bn=(Dr={})=>({ref:ot,...xr(ur,et,Dr),style:xr(ur.style,et.style,Dr.style)}),Xr=(Dr={})=>({"data-slot":"base","data-open":Vt(De.isOpen),"data-focus":Vt(Er),"data-arrow":Vt(ue),"data-focus-visible":Vt(or),"data-placement":yt?Tw(yt,Ee):void 0,...xr(mr,re,Dr),className:Pr.base({class:Nr(Fr)}),style:{outline:"none"}}),On=V.useCallback((Dr={})=>({"data-slot":"content","data-open":Vt(De.isOpen),"data-arrow":Vt(ue),"data-placement":yt?Tw(yt,Ee):void 0,className:Pr.content({class:Nr(Ce==null?void 0:Ce.content,Dr.className)})}),[Pr,De.isOpen,ue,dt,Ee,Ce,yt]),fr=V.useCallback(Dr=>{var Br;let an;return Dr.pointerType==="touch"&&((e==null?void 0:e.backdrop)==="blur"||(e==null?void 0:e.backdrop)==="opaque")?an=setTimeout(()=>{Et.current=!0},100):Et.current=!0,(Br=$t.onPress)==null||Br.call($t,Dr),()=>{clearTimeout(an)}},[$t==null?void 0:$t.onPress]),Tn=V.useCallback((Dr={},Br=null)=>{const{isDisabled:an,...Sa}=Dr;return{"data-slot":"trigger",...xr({"aria-haspopup":"dialog"},$t,Sa),onPress:fr,isDisabled:an,className:Pr.trigger({class:Nr(Ce==null?void 0:Ce.trigger,Dr.className),isTriggerDisabled:an}),ref:T5(Br,Wt)}},[De,$t,fr,Wt]),kr=V.useCallback((Dr={})=>({"data-slot":"backdrop",className:Pr.backdrop({class:Ce==null?void 0:Ce.backdrop}),onClick:Br=>{if(!Et.current){Br.preventDefault();return}De.close(),Et.current=!1},...Sr,...Dr}),[Pr,De.isOpen,Ce,Sr]);return V.useEffect(()=>{if(De.isOpen&&(ot!=null&&ot.current))return eI([ot==null?void 0:ot.current])},[De.isOpen,ot]),{state:De,Component:Ke,children:B,classNames:Ce,showArrow:ue,triggerRef:Wt,placement:dt,isNonModal:oe,popoverRef:ot,portalContainer:$e,isOpen:De.isOpen,onClose:De.close,disableAnimation:Dt,shouldBlockScroll:be,backdrop:(c=e.backdrop)!=null?c:"transparent",motionProps:Me,getBackdropProps:kr,getPopoverProps:Bn,getTriggerProps:Tn,getDialogProps:Xr,getContentProps:On}}function ET(e,t){let{role:i="dialog"}=e,c=vm();c=e["aria-label"]?void 0:c;let h=V.useRef(!1);return V.useEffect(()=>{if(t.current&&!t.current.contains(document.activeElement)){r0(t.current);let _=setTimeout(()=>{document.activeElement===t.current&&(h.current=!0,t.current&&(t.current.blur(),r0(t.current)),h.current=!1)},500);return()=>{clearTimeout(_)}}},[t]),rI(),{dialogProps:{...Fl(e,{labelable:!0}),role:i,tabIndex:-1,"aria-labelledby":e["aria-labelledby"]||c,onBlur:_=>{h.current&&_.stopPropagation()}},titleProps:{id:c}}}var q7=()=>km(()=>import("./index-hP_uZtvp.js"),[]).then(e=>e.default),W7=Na(({children:e,motionProps:t,placement:i,disableAnimation:c,style:h={},transformOrigin:_={},...w},a)=>{let A=h;return _.originX!==void 0||_.originY!==void 0?A={...A,transformOrigin:_}:i&&(A={...A,...yT(i==="center"?"top":i)}),c?b.jsx("div",{...w,ref:a,children:e}):b.jsx(Tu,{features:q7,children:b.jsx(jl.div,{ref:a,animate:"enter",exit:"exit",initial:"initial",style:A,variants:nx.scaleSpringOpacity,...xr(w,t),children:e})})});W7.displayName="HeroUI.FreeSoloPopoverWrapper";var K7=Na(({children:e,transformOrigin:t,disableDialogFocus:i=!1,...c},h)=>{const{Component:_,state:w,placement:a,backdrop:A,portalContainer:B,disableAnimation:N,motionProps:F,isNonModal:G,getPopoverProps:Q,getBackdropProps:te,getDialogProps:Y,getContentProps:oe}=H7({...c,ref:h}),de=V.useRef(null),{dialogProps:me,titleProps:be}=ET({},de),pe=Y({...!i&&{ref:de},...me}),Se=V.useMemo(()=>A==="transparent"?null:N?b.jsx("div",{...te()}):b.jsx(Tu,{features:q7,children:b.jsx(jl.div,{animate:"enter",exit:"exit",initial:"exit",variants:nx.fade,...te()})}),[A,N,te]);return b.jsxs(I5,{portalContainer:B,children:[!G&&Se,b.jsx(_,{...Q(),children:b.jsxs(W7,{disableAnimation:N,motionProps:F,placement:a,tabIndex:-1,transformOrigin:t,...pe,children:[!G&&b.jsx(Qy,{onDismiss:w.close}),b.jsx("div",{...oe(),children:typeof e=="function"?e(be):e}),b.jsx(Qy,{onDismiss:w.close})]})})]})});K7.displayName="HeroUI.FreeSoloPopover";var iQ=K7,[sQ,Z7]=Th({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),y6=()=>km(()=>import("./index-hP_uZtvp.js"),[]).then(e=>e.default),X7=e=>{const{as:t,children:i,className:c,...h}=e,{Component:_,placement:w,backdrop:a,motionProps:A,disableAnimation:B,getPopoverProps:N,getDialogProps:F,getBackdropProps:G,getContentProps:Q,isNonModal:te,onClose:Y}=Z7(),oe=V.useRef(null),{dialogProps:de,titleProps:me}=ET({},oe),be=F({ref:oe,...de,...h}),pe=t||_||"div",Se=b.jsxs(b.Fragment,{children:[!te&&b.jsx(Qy,{onDismiss:Y}),b.jsx(pe,{...be,children:b.jsx("div",{...Q({className:c}),children:typeof i=="function"?i(me):i})}),b.jsx(Qy,{onDismiss:Y})]}),$e=V.useMemo(()=>a==="transparent"?null:B?b.jsx("div",{...G()}):b.jsx(Tu,{features:y6,children:b.jsx(jl.div,{animate:"enter",exit:"exit",initial:"exit",variants:nx.fade,...G()})}),[a,B,G]),Le=w?yT(w==="center"?"top":w):void 0,re=b.jsx(b.Fragment,{children:B?Se:b.jsx(Tu,{features:y6,children:b.jsx(jl.div,{animate:"enter",exit:"exit",initial:"initial",style:Le,variants:nx.scaleSpringOpacity,...A,children:Se})})});return b.jsxs("div",{...N(),children:[$e,re]})};X7.displayName="HeroUI.PopoverContent";var oQ=X7,Y7=e=>{var t;const{triggerRef:i,getTriggerProps:c}=Z7(),{children:h,..._}=e,w=V.useMemo(()=>typeof h=="string"?b.jsx("p",{children:h}):V.Children.only(h),[h]),a=(t=w.props.ref)!=null?t:w.ref,{onPress:A,isDisabled:B,...N}=V.useMemo(()=>c(xr(_,w.props),a),[c,w.props,_,a]),[,F]=eV(h,$r),{buttonProps:G}=r2({onPress:A,isDisabled:B},i),Q=V.useMemo(()=>(F==null?void 0:F[0])!==void 0,[F]);return Q||delete N.preventFocusOnPress,V.cloneElement(w,xr(N,Q?{onPress:A,isDisabled:B}:G))};Y7.displayName="HeroUI.PopoverTrigger";var lQ=Y7,J7=Na((e,t)=>{const{children:i,...c}=e,h=H7({...c,ref:t}),[_,w]=V.Children.toArray(i),a=b.jsx(I5,{portalContainer:h.portalContainer,children:w});return b.jsxs(sQ,{value:h,children:[_,h.disableAnimation&&h.isOpen?a:b.jsx(Uf,{children:h.isOpen?a:null})]})});J7.displayName="HeroUI.Popover";var cQ=J7,[uQ,Q7]=Th({name:"DropdownContext",errorMessage:"useDropdownContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Dropdown />`"});function dQ(e){const{isSelected:t,disableAnimation:i,...c}=e;return b.jsx("svg",{"aria-hidden":"true","data-selected":t,role:"presentation",viewBox:"0 0 17 18",...c,children:b.jsx("polyline",{fill:"none",points:"1 9 7 14 15 4",stroke:"currentColor",strokeDasharray:22,strokeDashoffset:t?44:66,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,style:i?{}:{transition:"stroke-dashoffset 200ms ease"}})})}var ez={};ez={longPressMessage:"اضغط مطولاً أو اضغط على Alt + السهم لأسفل لفتح القائمة"};var tz={};tz={longPressMessage:"Натиснете продължително или натиснете Alt+ стрелка надолу, за да отворите менюто"};var rz={};rz={longPressMessage:"Dlouhým stiskem nebo stisknutím kláves Alt + šipka dolů otevřete nabídku"};var nz={};nz={longPressMessage:"Langt tryk eller tryk på Alt + pil ned for at åbne menuen"};var az={};az={longPressMessage:"Drücken Sie lange oder drücken Sie Alt + Nach-unten, um das Menü zu öffnen"};var iz={};iz={longPressMessage:"Πιέστε παρατεταμένα ή πατήστε Alt + κάτω βέλος για να ανοίξετε το μενού"};var sz={};sz={longPressMessage:"Long press or press Alt + ArrowDown to open menu"};var oz={};oz={longPressMessage:"Mantenga pulsado o pulse Alt + flecha abajo para abrir el menú"};var lz={};lz={longPressMessage:"Menüü avamiseks vajutage pikalt või vajutage klahve Alt + allanool"};var cz={};cz={longPressMessage:"Avaa valikko painamalla pohjassa tai näppäinyhdistelmällä Alt + Alanuoli"};var uz={};uz={longPressMessage:"Appuyez de manière prolongée ou appuyez sur Alt + Flèche vers le bas pour ouvrir le menu."};var dz={};dz={longPressMessage:"לחץ לחיצה ארוכה או הקש Alt + ArrowDown כדי לפתוח את התפריט"};var hz={};hz={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dolje za otvaranje izbornika"};var fz={};fz={longPressMessage:"Nyomja meg hosszan, vagy nyomja meg az Alt + lefele nyíl gombot a menü megnyitásához"};var pz={};pz={longPressMessage:"Premere a lungo o premere Alt + Freccia giù per aprire il menu"};var mz={};mz={longPressMessage:"長押しまたは Alt+下矢印キーでメニューを開く"};var gz={};gz={longPressMessage:"길게 누르거나 Alt + 아래쪽 화살표를 눌러 메뉴 열기"};var yz={};yz={longPressMessage:"Norėdami atidaryti meniu, nuspaudę palaikykite arba paspauskite „Alt + ArrowDown“."};var xz={};xz={longPressMessage:"Lai atvērtu izvēlni, turiet nospiestu vai nospiediet taustiņu kombināciju Alt + lejupvērstā bultiņa"};var vz={};vz={longPressMessage:"Langt trykk eller trykk Alt + PilNed for å åpne menyen"};var _z={};_z={longPressMessage:"Druk lang op Alt + pijl-omlaag of druk op Alt om het menu te openen"};var bz={};bz={longPressMessage:"Naciśnij i przytrzymaj lub naciśnij klawisze Alt + Strzałka w dół, aby otworzyć menu"};var wz={};wz={longPressMessage:"Pressione e segure ou pressione Alt + Seta para baixo para abrir o menu"};var Sz={};Sz={longPressMessage:"Prima continuamente ou prima Alt + Seta Para Baixo para abrir o menu"};var Tz={};Tz={longPressMessage:"Apăsați lung sau apăsați pe Alt + săgeată în jos pentru a deschide meniul"};var Ez={};Ez={longPressMessage:"Нажмите и удерживайте или нажмите Alt + Стрелка вниз, чтобы открыть меню"};var Cz={};Cz={longPressMessage:"Ponuku otvoríte dlhým stlačením alebo stlačením klávesu Alt + klávesu so šípkou nadol"};var Dz={};Dz={longPressMessage:"Za odprtje menija pritisnite in držite gumb ali pritisnite Alt+puščica navzdol"};var Pz={};Pz={longPressMessage:"Dugo pritisnite ili pritisnite Alt + strelicu prema dole da otvorite meni"};var Mz={};Mz={longPressMessage:"Håll nedtryckt eller tryck på Alt + pil nedåt för att öppna menyn"};var Az={};Az={longPressMessage:"Menüyü açmak için uzun basın veya Alt + Aşağı Ok tuşuna basın"};var kz={};kz={longPressMessage:"Довго або звичайно натисніть комбінацію клавіш Alt і стрілка вниз, щоб відкрити меню"};var Rz={};Rz={longPressMessage:"长按或按 Alt + 向下方向键以打开菜单"};var Iz={};Iz={longPressMessage:"長按或按 Alt+向下鍵以開啟功能表"};var zz={};zz={"ar-AE":ez,"bg-BG":tz,"cs-CZ":rz,"da-DK":nz,"de-DE":az,"el-GR":iz,"en-US":sz,"es-ES":oz,"et-EE":lz,"fi-FI":cz,"fr-FR":uz,"he-IL":dz,"hr-HR":hz,"hu-HU":fz,"it-IT":pz,"ja-JP":mz,"ko-KR":gz,"lt-LT":yz,"lv-LV":xz,"nb-NO":vz,"nl-NL":_z,"pl-PL":bz,"pt-BR":wz,"pt-PT":Sz,"ro-RO":Tz,"ru-RU":Ez,"sk-SK":Cz,"sl-SI":Dz,"sr-SP":Pz,"sv-SE":Mz,"tr-TR":Az,"uk-UA":kz,"zh-CN":Rz,"zh-TW":Iz};function hQ(e){return e&&e.__esModule?e.default:e}function fQ(e,t,i){let{type:c="menu",isDisabled:h,trigger:_="press"}=e,w=Bs(),{triggerProps:a,overlayProps:A}=gR({type:c},t,i),B=Q=>{if(!h&&!(_==="longPress"&&!Q.altKey)&&i&&i.current)switch(Q.key){case"Enter":case" ":if(_==="longPress")return;case"ArrowDown":"continuePropagation"in Q||Q.stopPropagation(),Q.preventDefault(),t.toggle("first");break;case"ArrowUp":"continuePropagation"in Q||Q.stopPropagation(),Q.preventDefault(),t.toggle("last");break;default:"continuePropagation"in Q&&Q.continuePropagation()}},N=Eu(hQ(zz),"@react-aria/menu"),{longPressProps:F}=dR({isDisabled:h||_!=="longPress",accessibilityDescription:N.format("longPressMessage"),onLongPressStart(){t.close()},onLongPress(){t.open("first")}}),G={preventFocusOnPress:!0,onPressStart(Q){Q.pointerType!=="touch"&&Q.pointerType!=="keyboard"&&!h&&(pl(Q.target),t.open(Q.pointerType==="virtual"?"first":null))},onPress(Q){Q.pointerType==="touch"&&!h&&t.toggle()}};return delete a.onPress,{menuTriggerProps:{...a,..._==="press"?G:F,id:w,onKeyDown:B},menuProps:{...A,"aria-labelledby":w,autoFocus:t.focusStrategy||!0,onClose:t.close}}}const Lz=new WeakMap;function pQ(e,t,i){let{shouldFocusWrap:c=!0,onKeyDown:h,onKeyUp:_,...w}=e;!e["aria-label"]&&!e["aria-labelledby"]&&console.warn("An aria-label or aria-labelledby prop is required for accessibility.");let a=Fl(e,{labelable:!0}),{listProps:A}=FX({...w,ref:i,selectionManager:t.selectionManager,collection:t.collection,disabledKeys:t.disabledKeys,shouldFocusWrap:c,linkBehavior:"override"});return Lz.set(t,{onClose:e.onClose,onAction:e.onAction,shouldUseVirtualFocus:e.shouldUseVirtualFocus}),{menuProps:xr(a,{onKeyDown:h,onKeyUp:_},{role:"menu",...A,onKeyDown:B=>{var N;(B.key!=="Escape"||e.shouldUseVirtualFocus)&&((N=A.onKeyDown)===null||N===void 0||N.call(A,B))}})}}function mQ(e,t,i){let{id:c,key:h,closeOnSelect:_,isVirtualized:w,"aria-haspopup":a,onPressStart:A,onPressUp:B,onPress:N,onPressChange:F,onPressEnd:G,onHoverStart:Q,onHoverChange:te,onHoverEnd:Y,onKeyDown:oe,onKeyUp:de,onFocus:me,onFocusChange:be,onBlur:pe,selectionManager:Se=t.selectionManager}=e,$e=!!a,Le=$e&&e["aria-expanded"]==="true";var re;let Ee=(re=e.isDisabled)!==null&&re!==void 0?re:Se.isDisabled(h);var se;let ue=(se=e.isSelected)!==null&&se!==void 0?se:Se.isSelected(h),ke=Lz.get(t),ce=t.collection.getItem(h),Pe=e.onClose||ke.onClose,xe=Fw(),Te=$t=>{var or;if(!$e){if(!(ce==null||(or=ce.props)===null||or===void 0)&&or.onAction?ce.props.onAction():e.onAction&&e.onAction(h),ke.onAction){let Er=ke.onAction;Er(h)}$t.target instanceof HTMLAnchorElement&&ce&&xe.open($t.target,$t,ce.props.href,ce.props.routerOptions)}},Ie="menuitem";$e||(Se.selectionMode==="single"?Ie="menuitemradio":Se.selectionMode==="multiple"&&(Ie="menuitemcheckbox"));let Me=vm(),Xe=vm(),Ce=vm(),He={id:c,"aria-disabled":Ee||void 0,role:Ie,"aria-label":e["aria-label"],"aria-labelledby":Me,"aria-describedby":[Xe,Ce].filter(Boolean).join(" ")||void 0,"aria-controls":e["aria-controls"],"aria-haspopup":a,"aria-expanded":e["aria-expanded"]};Se.selectionMode!=="none"&&!$e&&(He["aria-checked"]=ue),w&&(He["aria-posinset"]=ce==null?void 0:ce.index,He["aria-setsize"]=rY(t.collection));let et=$t=>{$t.pointerType==="keyboard"&&Te($t),A==null||A($t)},Ke=()=>{!$e&&Pe&&(_??(Se.selectionMode!=="multiple"||Se.isLink(h)))&&Pe()},ot=$t=>{$t.pointerType==="mouse"&&(Te($t),Ke()),B==null||B($t)},Pt=$t=>{$t.pointerType!=="keyboard"&&$t.pointerType!=="mouse"&&(Te($t),Ke()),N==null||N($t)},{itemProps:Et,isFocused:Wt}=jX({id:c,selectionManager:Se,key:h,ref:i,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,linkBehavior:"none",shouldUseVirtualFocus:ke.shouldUseVirtualFocus}),{pressProps:Dt,isPressed:er}=wu({onPressStart:et,onPress:Pt,onPressUp:ot,onPressChange:F,onPressEnd:G,isDisabled:Ee}),{hoverProps:De}=wo({isDisabled:Ee,onHoverStart($t){!t0()&&!(Le&&a)&&(Se.setFocused(!0),Se.setFocusedKey(h)),Q==null||Q($t)},onHoverChange:te,onHoverEnd:Y}),{keyboardProps:ur}=uR({onKeyDown:$t=>{if($t.repeat){$t.continuePropagation();return}switch($t.key){case" ":!Ee&&Se.selectionMode==="none"&&!$e&&_!==!1&&Pe&&Pe();break;case"Enter":!Ee&&_!==!1&&!$e&&Pe&&Pe();break;default:$e||$t.continuePropagation(),oe==null||oe($t);break}},onKeyUp:de}),{focusProps:Sr}=P_({onBlur:pe,onFocus:me,onFocusChange:be}),yt=Fl(ce==null?void 0:ce.props);delete yt.id;let dt=FU(ce==null?void 0:ce.props);return{menuItemProps:{...He,...xr(yt,dt,$e?{onFocus:Et.onFocus,"data-collection":Et["data-collection"],"data-key":Et["data-key"]}:Et,Dt,De,ur,Sr,ke.shouldUseVirtualFocus||$e?{onMouseDown:$t=>$t.preventDefault()}:void 0),tabIndex:Et.tabIndex!=null&&Le&&!ke.shouldUseVirtualFocus?-1:Et.tabIndex},labelProps:{id:Me},descriptionProps:{id:Xe},keyboardShortcutProps:{id:Ce},isFocused:Wt,isFocusVisible:Wt&&Se.isFocused&&t0()&&!Le,isSelected:ue,isPressed:er,isDisabled:Ee}}function gQ(e){let{heading:t,"aria-label":i}=e,c=Bs();return{itemProps:{role:"presentation"},headingProps:t?{id:c,role:"presentation"}:{},groupProps:{role:"group","aria-label":i,"aria-labelledby":t?c:void 0}}}var yQ=700;function $z(){return o0()||typeof window>"u"?!1:window.screen.width<=yQ}function xQ(e){var t,i;const c=Pi(),[h,_]=Zo(e,IM.variantKeys),{as:w,item:a,state:A,shortcut:B,description:N,startContent:F,endContent:G,isVirtualized:Q,selectedIcon:te,className:Y,classNames:oe,onAction:de,autoFocus:me,onPress:be,onPressStart:pe,onPressUp:Se,onPressEnd:$e,onPressChange:Le,onHoverStart:re,onHoverChange:Ee,onHoverEnd:se,hideSelectedIcon:ue=!1,isReadOnly:ke=!1,closeOnSelect:ce,onClose:Pe,onClick:xe,...Te}=h,Ie=(i=(t=e.disableAnimation)!=null?t:c==null?void 0:c.disableAnimation)!=null?i:!1,Me=V.useRef(null),Xe=w||(Te!=null&&Te.href?"a":"li"),Ce=typeof Xe=="string",{rendered:He,key:et}=a,Ke=A.disabledKeys.has(et)||e.isDisabled,ot=A.selectionManager.selectionMode!=="none",Pt=$z(),{isFocusVisible:Et,focusProps:Wt}=Ac({autoFocus:me});xe&&typeof xe=="function"&&$w("onClick is deprecated, please use onPress instead. See: https://github.com/heroui-inc/heroui/issues/4292","MenuItem");const Dt=V.useCallback(Dr=>{xe==null||xe(Dr),be==null||be(Dr)},[xe,be]),{isPressed:er,isFocused:De,isSelected:ur,isDisabled:Sr,menuItemProps:yt,labelProps:dt,descriptionProps:$t,keyboardShortcutProps:or}=mQ({key:et,onClose:Pe,isDisabled:Ke,onPress:Dt,onPressStart:pe,onPressUp:Se,onPressEnd:$e,onPressChange:Le,"aria-label":h["aria-label"],closeOnSelect:ce,isVirtualized:Q,onAction:de},A,Me);let{hoverProps:Er,isHovered:mr}=wo({isDisabled:Sr,onHoverStart(Dr){t0()||(A.selectionManager.setFocused(!0),A.selectionManager.setFocusedKey(et)),re==null||re(Dr)},onHoverChange:Ee,onHoverEnd:se}),Pr=yt;const Fr=V.useMemo(()=>IM({..._,isDisabled:Sr,disableAnimation:Ie,hasTitleTextChild:typeof He=="string",hasDescriptionTextChild:typeof N=="string"}),[Ko(_),Sr,Ie,He,N]),Bn=Nr(oe==null?void 0:oe.base,Y);ke&&(Pr=YF(Pr));const Xr=(Dr={})=>({ref:Me,...xr(ke?{}:Wt,Wo(Te,{enabled:Ce}),Pr,Er,Dr),"data-focus":Vt(De),"data-selectable":Vt(ot),"data-hover":Vt(Pt?mr||er:mr),"data-disabled":Vt(Sr),"data-selected":Vt(ur),"data-pressed":Vt(er),"data-focus-visible":Vt(Et),className:Fr.base({class:Nr(Bn,Dr.className)})}),On=(Dr={})=>({...xr(dt,Dr),className:Fr.title({class:oe==null?void 0:oe.title})}),fr=(Dr={})=>({...xr($t,Dr),className:Fr.description({class:oe==null?void 0:oe.description})}),Tn=(Dr={})=>({...xr(or,Dr),className:Fr.shortcut({class:oe==null?void 0:oe.shortcut})}),kr=V.useCallback((Dr={})=>({"aria-hidden":Vt(!0),"data-disabled":Vt(Sr),className:Fr.selectedIcon({class:oe==null?void 0:oe.selectedIcon}),...Dr}),[Sr,Fr,oe]);return{Component:Xe,domRef:Me,slots:Fr,classNames:oe,isSelectable:ot,isSelected:ur,isDisabled:Sr,rendered:He,shortcut:B,description:N,startContent:F,endContent:G,selectedIcon:te,disableAnimation:Ie,getItemProps:Xr,getLabelProps:On,hideSelectedIcon:ue,getDescriptionProps:fr,getKeyboardShortcutProps:Tn,getSelectedIconProps:kr}}var Bz=e=>{const{Component:t,slots:i,classNames:c,rendered:h,shortcut:_,description:w,isSelectable:a,isSelected:A,isDisabled:B,selectedIcon:N,startContent:F,endContent:G,disableAnimation:Q,hideSelectedIcon:te,getItemProps:Y,getLabelProps:oe,getDescriptionProps:de,getKeyboardShortcutProps:me,getSelectedIconProps:be}=xQ(e),pe=V.useMemo(()=>{const Se=b.jsx(dQ,{disableAnimation:Q,isSelected:A});return typeof N=="function"?N({icon:Se,isSelected:A,isDisabled:B}):N||Se},[N,A,B,Q]);return b.jsxs(t,{...Y(),children:[F,w?b.jsxs("div",{className:i.wrapper({class:c==null?void 0:c.wrapper}),children:[b.jsx("span",{...oe(),children:h}),b.jsx("span",{...de(),children:w})]}):b.jsx("span",{...oe(),children:h}),_&&b.jsx("kbd",{...me(),children:_}),a&&!te&&b.jsx("span",{...be(),children:pe}),G]})};Bz.displayName="HeroUI.MenuItem";var Nz=Bz,jz=Na(({item:e,state:t,as:i,variant:c,color:h,disableAnimation:_,onAction:w,closeOnSelect:a,className:A,classNames:B,showDivider:N=!1,hideSelectedIcon:F,dividerProps:G={},itemClasses:Q,title:te,...Y},oe)=>{const de=i||"li",me=V.useMemo(()=>wX(),[]),be=Nr(B==null?void 0:B.base,A),pe=Nr(B==null?void 0:B.divider,G==null?void 0:G.className),{itemProps:Se,headingProps:$e,groupProps:Le}=gQ({heading:e.rendered,"aria-label":e["aria-label"]});return b.jsxs(de,{"data-slot":"base",...xr(Se,Y),className:me.base({class:be}),children:[e.rendered&&b.jsx("span",{...$e,className:me.heading({class:B==null?void 0:B.heading}),"data-slot":"heading",children:e.rendered}),b.jsxs("ul",{...Le,className:me.group({class:B==null?void 0:B.group}),"data-has-title":!!e.rendered,"data-slot":"group",children:[[...e.childNodes].map(re=>{const{key:Ee,props:se}=re;let ue=b.jsx(Nz,{classNames:Q,closeOnSelect:a,color:h,disableAnimation:_,hideSelectedIcon:F,item:re,state:t,variant:c,onAction:w,...se},Ee);return re.wrapper&&(ue=re.wrapper(ue)),ue}),N&&b.jsx(oY,{as:"li",className:me.divider({class:pe}),...G})]})]})});jz.displayName="HeroUI.MenuSection";var vQ=jz;function _Q(e){var t;const i=Pi(),{as:c,ref:h,variant:_,color:w,children:a,disableAnimation:A=(t=i==null?void 0:i.disableAnimation)!=null?t:!1,onAction:B,closeOnSelect:N,itemClasses:F,className:G,state:Q,topContent:te,bottomContent:Y,hideEmptyContent:oe=!1,hideSelectedIcon:de=!1,emptyContent:me="No items.",menuProps:be,onClose:pe,classNames:Se,...$e}=e,Le=c||"ul",re=Ba(h),Ee=typeof Le=="string",se=nY({...$e,...be,children:a}),ue=Q||se,{menuProps:ke}=pQ({...$e,...be,onAction:B},ue,re),ce=V.useMemo(()=>bX({className:G}),[G]),Pe=Nr(Se==null?void 0:Se.base,G);return{Component:Le,state:ue,variant:_,color:w,disableAnimation:A,onClose:pe,topContent:te,bottomContent:Y,closeOnSelect:N,className:G,itemClasses:F,getBaseProps:(Me={})=>({ref:re,"data-slot":"base",className:ce.base({class:Pe}),...Wo($e,{enabled:Ee}),...Me}),getListProps:(Me={})=>({"data-slot":"list",className:ce.list({class:Se==null?void 0:Se.list}),...ke,...Me}),hideEmptyContent:oe,hideSelectedIcon:de,getEmptyContentProps:(Me={})=>({children:me,className:ce.emptyContent({class:Se==null?void 0:Se.emptyContent}),...Me})}}var bQ=Na(function(t,i){const{Component:c,state:h,closeOnSelect:_,color:w,disableAnimation:a,hideSelectedIcon:A,hideEmptyContent:B,variant:N,onClose:F,topContent:G,bottomContent:Q,itemClasses:te,getBaseProps:Y,getListProps:oe,getEmptyContentProps:de}=_Q({...t,ref:i}),me=b.jsxs(c,{...oe(),children:[!h.collection.size&&!B&&b.jsx("li",{children:b.jsx("div",{...de()})}),[...h.collection].map(be=>{const pe={closeOnSelect:_,color:w,disableAnimation:a,item:be,state:h,variant:N,onClose:F,hideSelectedIcon:A,...be.props},Se=PX(te,pe==null?void 0:pe.classNames);if(be.type==="section")return b.jsx(vQ,{...pe,itemClasses:Se},be.key);let $e=b.jsx(Nz,{...pe,classNames:Se},be.key);return be.wrapper&&($e=be.wrapper($e)),$e})]});return b.jsxs("div",{...Y(),children:[G,me,Q]})}),wQ=bQ,SQ=XX,_m=SQ,TQ=Na(function(t,i){const{getMenuProps:c}=Q7();return b.jsx(oQ,{children:b.jsx(hR,{contain:!0,restoreFocus:!0,children:b.jsx(wQ,{...c(t,i)})})})}),CT=TQ,Oz=e=>{const{getMenuTriggerProps:t}=Q7(),{children:i,...c}=e;return b.jsx(lQ,{...t(c),children:i})};Oz.displayName="HeroUI.DropdownTrigger";var DT=Oz;function EQ(e){let t=B_(e),[i,c]=V.useState(null),[h,_]=V.useState([]),w=()=>{_([]),t.close()};return{focusStrategy:i,...t,open(B=null){c(B),t.open()},toggle(B=null){c(B),t.toggle()},close(){w()},expandedKeysStack:h,openSubmenu:(B,N)=>{_(F=>N>F.length?F:[...F.slice(0,N),B])},closeSubmenu:(B,N)=>{_(F=>F[N]===B?F.slice(0,N):F)}}}var CQ=(e,t)=>{if(e){const i=Array.isArray(e.children)?e.children:[...(e==null?void 0:e.items)||[]];if(i&&i.length)return i.find(h=>{if(h&&h.key===t)return h})||{}}return null},DQ=(e,t,i)=>{const c=i||CQ(e,t);return c&&c.props&&"closeOnSelect"in c.props?c.props.closeOnSelect:e==null?void 0:e.closeOnSelect};function PQ(e){var t;const i=Pi(),{as:c,triggerRef:h,isOpen:_,defaultOpen:w,onOpenChange:a,isDisabled:A,type:B="menu",trigger:N="press",placement:F="bottom",closeOnSelect:G=!0,shouldBlockScroll:Q=!0,classNames:te,disableAnimation:Y=(t=i==null?void 0:i.disableAnimation)!=null?t:!1,onClose:oe,className:de,...me}=e,be=c||"div",pe=V.useRef(null),Se=h||pe,$e=V.useRef(null),Le=V.useRef(null),re=EQ({trigger:N,isOpen:_,defaultOpen:w,onOpenChange:Te=>{a==null||a(Te),Te||oe==null||oe()}}),{menuTriggerProps:Ee,menuProps:se}=fQ({type:B,trigger:N,isDisabled:A},re,Se),ue=V.useMemo(()=>EX({className:de}),[de]),ke=Te=>{Te!==void 0&&!Te||G&&re.close()},ce=(Te={})=>{const Ie=xr(me,Te);return{state:re,placement:F,ref:Le,disableAnimation:Y,shouldBlockScroll:Q,scrollRef:$e,triggerRef:Se,...Ie,classNames:{...te,...Te.classNames,content:Nr(ue,te==null?void 0:te.content,Te.className)},shouldCloseOnInteractOutside:Ie!=null&&Ie.shouldCloseOnInteractOutside?Ie.shouldCloseOnInteractOutside:Me=>xT(Me,pe,re)}},Pe=(Te={})=>{const{onPress:Ie,onPressStart:Me,...Xe}=Ee;return xr(Xe,{isDisabled:A},Te)},xe=(Te,Ie=null)=>({ref:f5(Ie,$e),menuProps:se,closeOnSelect:G,...xr(Te,{onAction:(Me,Xe)=>{const Ce=DQ(Te,Me,Xe);ke(Ce)},onClose:re.close})});return{Component:be,menuRef:$e,menuProps:se,closeOnSelect:G,onClose:re.close,autoFocus:re.focusStrategy||!0,disableAnimation:Y,getPopoverProps:ce,getMenuProps:xe,getMenuTriggerProps:Pe}}var Fz=e=>{const{children:t,...i}=e,c=PQ(i),[h,_]=rn.Children.toArray(t);return b.jsx(uQ,{value:c,children:b.jsxs(cQ,{...c.getPopoverProps(),children:[h,_]})})};Fz.displayName="HeroUI.Dropdown";var PT=Fz,[MQ,s2]=Th({name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Modal />`"}),Vz=Na((e,t)=>{const{as:i,children:c,className:h,..._}=e,{slots:w,classNames:a,bodyId:A,setBodyMounted:B}=s2(),N=Ba(t),F=i||"div";return V.useEffect(()=>(B(!0),()=>B(!1)),[B]),b.jsx(F,{ref:N,className:w.body({class:Nr(a==null?void 0:a.body,h)}),id:A,..._,children:c})});Vz.displayName="HeroUI.ModalBody";var Uz=Vz,AQ={enter:{scale:"var(--scale-enter)",y:"var(--slide-enter)",opacity:1,willChange:"auto",transition:{scale:{duration:.4,ease:Xg.ease},opacity:{duration:.4,ease:Xg.ease},y:{type:"spring",bounce:0,duration:.6}}},exit:{scale:"var(--scale-exit)",y:"var(--slide-exit)",opacity:0,willChange:"transform",transition:{duration:.3,ease:Xg.ease}}},x6=()=>km(()=>import("./index-hP_uZtvp.js"),[]).then(e=>e.default),Gz=e=>{const{as:t,children:i,role:c="dialog",...h}=e,{Component:_,domRef:w,slots:a,classNames:A,motionProps:B,backdrop:N,closeButton:F,hideCloseButton:G,disableAnimation:Q,getDialogProps:te,getBackdropProps:Y,getCloseButtonProps:oe,onClose:de}=s2(),me=t||_||"div",be=HU(),{dialogProps:pe}=ET({role:c},w),Se=V.isValidElement(F)?V.cloneElement(F,oe()):b.jsx("button",{...oe(),children:b.jsx(mT,{})}),$e=V.useCallback(ke=>{ke.key==="Tab"&&ke.nativeEvent.isComposing&&(ke.stopPropagation(),ke.preventDefault())},[]),Le=te(xr(pe,h)),re=b.jsxs(me,{...Le,onKeyDown:qi(Le.onKeyDown,$e),children:[b.jsx(Qy,{onDismiss:de}),!G&&Se,typeof i=="function"?i(de):i,b.jsx(Qy,{onDismiss:de})]}),Ee=V.useMemo(()=>N==="transparent"?null:Q?b.jsx("div",{...Y()}):b.jsx(Tu,{features:x6,children:b.jsx(jl.div,{animate:"enter",exit:"exit",initial:"exit",variants:nx.fade,...Y()})}),[N,Q,Y]),se={"--visual-viewport-height":be.height+"px"},ue=Q?b.jsx("div",{className:a.wrapper({class:A==null?void 0:A.wrapper}),"data-slot":"wrapper",style:se,children:re}):b.jsx(Tu,{features:x6,children:b.jsx(jl.div,{animate:"enter",className:a.wrapper({class:A==null?void 0:A.wrapper}),"data-slot":"wrapper",exit:"exit",initial:"exit",variants:AQ,...B,style:se,children:re})});return b.jsxs("div",{tabIndex:-1,children:[Ee,ue]})};Gz.displayName="HeroUI.ModalContent";var kQ=Gz,Hz=Na((e,t)=>{const{as:i,children:c,className:h,..._}=e,{slots:w,classNames:a}=s2(),A=Ba(t),B=i||"footer";return b.jsx(B,{ref:A,className:w.footer({class:Nr(a==null?void 0:a.footer,h)}),..._,children:c})});Hz.displayName="HeroUI.ModalFooter";var MT=Hz,qz=Na((e,t)=>{const{as:i,children:c,className:h,..._}=e,{slots:w,classNames:a,headerId:A,setHeaderMounted:B}=s2(),N=Ba(t),F=i||"header";return V.useEffect(()=>(B(!0),()=>B(!1)),[B]),b.jsx(F,{ref:N,className:w.header({class:Nr(a==null?void 0:a.header,h)}),id:A,..._,children:c})});qz.displayName="HeroUI.ModalHeader";var AT=qz;function RQ(e={shouldBlockScroll:!0},t,i){let{overlayProps:c,underlayProps:h}=R5({...e,isOpen:t.isOpen,onClose:t.close},i);return yR({isDisabled:!t.isOpen||!e.shouldBlockScroll}),rI(),V.useEffect(()=>{if(t.isOpen&&i.current)return eI([i.current])},[t.isOpen,i]),{modalProps:xr(c),underlayProps:h}}function IQ(e){var t,i,c;const h=Pi(),[_,w]=Zo(e,zM.variantKeys),{ref:a,as:A,className:B,classNames:N,isOpen:F,defaultOpen:G,onOpenChange:Q,motionProps:te,closeButton:Y,isDismissable:oe=!0,hideCloseButton:de=!1,shouldBlockScroll:me=!0,portalContainer:be,isKeyboardDismissDisabled:pe=!1,onClose:Se,...$e}=_,Le=A||"section",re=Ba(a),Ee=V.useRef(null),[se,ue]=V.useState(!1),[ke,ce]=V.useState(!1),Pe=(i=(t=e.disableAnimation)!=null?t:h==null?void 0:h.disableAnimation)!=null?i:!1,xe=V.useId(),Te=V.useId(),Ie=V.useId(),Me=B_({isOpen:F,defaultOpen:G,onOpenChange:er=>{Q==null||Q(er),er||Se==null||Se()}}),{modalProps:Xe,underlayProps:Ce}=RQ({isDismissable:oe,shouldBlockScroll:me,isKeyboardDismissDisabled:pe},Me,re),{buttonProps:He}=r2({onPress:Me.close},Ee),{isFocusVisible:et,focusProps:Ke}=Ac(),ot=Nr(N==null?void 0:N.base,B),Pt=V.useMemo(()=>zM({...w,disableAnimation:Pe}),[Ko(w),Pe]),Et=(er={},De=null)=>{var ur;return{ref:T5(De,re),...xr(Xe,$e,er),className:Pt.base({class:Nr(ot,er.className)}),id:xe,"data-open":Vt(Me.isOpen),"data-dismissable":Vt(oe),"aria-modal":Vt(!0),"data-placement":(ur=e==null?void 0:e.placement)!=null?ur:"right","aria-labelledby":se?Te:void 0,"aria-describedby":ke?Ie:void 0}},Wt=V.useCallback((er={})=>({className:Pt.backdrop({class:N==null?void 0:N.backdrop}),onClick:()=>Me.close(),...Ce,...er}),[Pt,N,Ce]),Dt=()=>({role:"button",tabIndex:0,"aria-label":"Close","data-focus-visible":Vt(et),className:Pt.closeButton({class:N==null?void 0:N.closeButton}),...xr(He,Ke)});return{Component:Le,slots:Pt,domRef:re,headerId:Te,bodyId:Ie,motionProps:te,classNames:N,isDismissable:oe,closeButton:Y,hideCloseButton:de,portalContainer:be,shouldBlockScroll:me,backdrop:(c=e.backdrop)!=null?c:"opaque",isOpen:Me.isOpen,onClose:Me.close,disableAnimation:Pe,setBodyMounted:ce,setHeaderMounted:ue,getDialogProps:Et,getBackdropProps:Wt,getCloseButtonProps:Dt}}var Wz=Na((e,t)=>{const{children:i,...c}=e,h=IQ({...c,ref:t}),_=b.jsx(I5,{portalContainer:h.portalContainer,children:i});return b.jsx(MQ,{value:h,children:h.disableAnimation&&h.isOpen?_:b.jsx(Uf,{children:h.isOpen?_:null})})});Wz.displayName="HeroUI.Modal";var zQ=Wz;function LQ(e={}){const{id:t,defaultOpen:i,isOpen:c,onClose:h,onOpen:_,onChange:w=()=>{}}=e,a=qS(_),A=qS(h),[B,N]=Xs(c,i||!1,w),F=V.useId(),G=t||F,Q=c!==void 0,te=V.useCallback(()=>{Q||N(!1),A==null||A()},[Q,A]),Y=V.useCallback(()=>{Q||N(!0),a==null||a()},[Q,a]),oe=V.useCallback(()=>{(B?te:Y)()},[B,Y,te]);return{isOpen:!!B,onOpen:Y,onClose:te,onOpenChange:oe,isControlled:Q,getButtonProps:(de={})=>({...de,"aria-expanded":B,"aria-controls":G,onClick:qi(de.onClick,oe)}),getDisclosureProps:(de={})=>({...de,hidden:!B,id:G})}}const Kz=7e3;let fu=null;function WS(e,t="assertive",i=Kz){fu?fu.announce(e,t,i):(fu=new BQ,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?fu.announce(e,t,i):setTimeout(()=>{fu!=null&&fu.isAttached()&&(fu==null||fu.announce(e,t,i))},100))}function $Q(e){fu&&fu.clear(e)}class BQ{isAttached(){var t;return(t=this.node)===null||t===void 0?void 0:t.isConnected}createLog(t){let i=document.createElement("div");return i.setAttribute("role","log"),i.setAttribute("aria-live",t),i.setAttribute("aria-relevant","additions"),i}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(t,i="assertive",c=Kz){var h,_;if(!this.node)return;let w=document.createElement("div");typeof t=="object"?(w.setAttribute("role","img"),w.setAttribute("aria-labelledby",t["aria-labelledby"])):w.textContent=t,i==="assertive"?(h=this.assertiveLog)===null||h===void 0||h.appendChild(w):(_=this.politeLog)===null||_===void 0||_.appendChild(w),t!==""&&setTimeout(()=>{w.remove()},c)}clear(t){this.node&&((!t||t==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!t||t==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}function NQ(e){var t,i,c,h,_,w,a;const[A,B]=Zo(e,BM.variantKeys),N=Pi(),{locale:F,direction:G}=Ms(),Q=G==="rtl",te=ow(new gd(F).resolvedOptions().calendar),Y=JA(te.identifier),{ref:oe,as:de,children:me,className:be,topContent:pe,bottomContent:Se,showHelper:$e=!0,firstDayOfWeek:Le,calendarWidth:re=256,visibleMonths:Ee=1,weekdayStyle:se="narrow",navButtonProps:ue={},isHeaderExpanded:ke,isHeaderDefaultExpanded:ce,onHeaderExpandedChange:Pe=()=>{},createCalendar:xe=(t=N==null?void 0:N.createCalendar)!=null?t:null,minValue:Te=(c=(i=N==null?void 0:N.defaultDates)==null?void 0:i.minDate)!=null?c:new Di(te,1900+Y,1,1),maxValue:Ie=(_=(h=N==null?void 0:N.defaultDates)==null?void 0:h.maxDate)!=null?_:new Di(te,2099+Y,12,31),prevButtonProps:Me,nextButtonProps:Xe,errorMessage:Ce,classNames:He,...et}=A,Ke=de||"div",ot=h5(Ee,1,3),Pt=e.showMonthAndYearPickers&&ot===1,Et=Ba(oe),Wt=V.useCallback(Fr=>{Pe(Fr||!1)},[Pe]),[Dt,er]=Xs(ke,ce??!1,Wt),De=V.useMemo(()=>({months:ot}),[ot]),ur=ot>1,Sr=typeof Ke=="string",yt=V.useMemo(()=>BM({...B,showMonthAndYearPickers:Pt,isRange:!!e.isRange,isHeaderWrapperExpanded:Dt,className:be,isRTL:Q}),[Ko(B),Pt,Dt,be]),dt=(a=(w=e.disableAnimation)!=null?w:N==null?void 0:N.disableAnimation)!=null?a:!1,$t={size:"sm",variant:"light",radius:"full",isIconOnly:!0,disableAnimation:dt,...ue},or={"data-slot":"base","data-has-multiple-months":Vt(ur),style:{"--visible-months":typeof ot=="number"?`${ot}`:ot,"--calendar-width":typeof re=="number"?`${re}px`:re}};return{Component:Ke,children:me,domRef:Et,slots:yt,locale:F,minValue:Te,maxValue:Ie,baseProps:or,showHelper:$e,firstDayOfWeek:Le,weekdayStyle:se,visibleMonths:ot,visibleDuration:De,shouldFilterDOMProps:Sr,isHeaderExpanded:Dt,showMonthAndYearPickers:Pt,disableAnimation:dt,createCalendar:xe,getPrevButtonProps:(Fr={})=>({"data-slot":"prev-button",tabIndex:Dt?-1:0,className:yt.prevButton({class:He==null?void 0:He.prevButton}),...xr($t,Me,Fr)}),getNextButtonProps:(Fr={})=>({"data-slot":"next-button",tabIndex:Dt?-1:0,className:yt.nextButton({class:He==null?void 0:He.nextButton}),...xr($t,Xe,Fr)}),getErrorMessageProps:(Fr={})=>({"data-slot":"error-message",className:yt.errorMessage({class:He==null?void 0:He.errorMessage}),...Fr}),setIsHeaderExpanded:er,topContent:pe,bottomContent:Se,errorMessage:Ce,classNames:He,otherProps:et}}var Zz={};Zz={dateRange:e=>`${e.startDate} إلى ${e.endDate}`,dateSelected:e=>`${e.date} المحدد`,finishRangeSelectionPrompt:"انقر لإنهاء عملية تحديد نطاق التاريخ",maximumDate:"آخر تاريخ متاح",minimumDate:"أول تاريخ متاح",next:"التالي",previous:"السابق",selectedDateDescription:e=>`تاريخ محدد: ${e.date}`,selectedRangeDescription:e=>`المدى الزمني المحدد: ${e.dateRange}`,startRangeSelectionPrompt:"انقر لبدء عملية تحديد نطاق التاريخ",todayDate:e=>`اليوم، ${e.date}`,todayDateSelected:e=>`اليوم، ${e.date} محدد`};var Xz={};Xz={dateRange:e=>`${e.startDate} до ${e.endDate}`,dateSelected:e=>`Избрано е ${e.date}`,finishRangeSelectionPrompt:"Натиснете, за да довършите избора на времеви интервал",maximumDate:"Последна налична дата",minimumDate:"Първа налична дата",next:"Напред",previous:"Назад",selectedDateDescription:e=>`Избрана дата: ${e.date}`,selectedRangeDescription:e=>`Избран диапазон: ${e.dateRange}`,startRangeSelectionPrompt:"Натиснете, за да пристъпите към избора на времеви интервал",todayDate:e=>`Днес, ${e.date}`,todayDateSelected:e=>`Днес, ${e.date} са избрани`};var Yz={};Yz={dateRange:e=>`${e.startDate} až ${e.endDate}`,dateSelected:e=>`Vybráno ${e.date}`,finishRangeSelectionPrompt:"Kliknutím dokončíte výběr rozsahu dat",maximumDate:"Poslední dostupné datum",minimumDate:"První dostupné datum",next:"Další",previous:"Předchozí",selectedDateDescription:e=>`Vybrané datum: ${e.date}`,selectedRangeDescription:e=>`Vybrané období: ${e.dateRange}`,startRangeSelectionPrompt:"Kliknutím zahájíte výběr rozsahu dat",todayDate:e=>`Dnes, ${e.date}`,todayDateSelected:e=>`Dnes, vybráno ${e.date}`};var Jz={};Jz={dateRange:e=>`${e.startDate} til ${e.endDate}`,dateSelected:e=>`${e.date} valgt`,finishRangeSelectionPrompt:"Klik for at fuldføre valg af datoområde",maximumDate:"Sidste ledige dato",minimumDate:"Første ledige dato",next:"Næste",previous:"Forrige",selectedDateDescription:e=>`Valgt dato: ${e.date}`,selectedRangeDescription:e=>`Valgt interval: ${e.dateRange}`,startRangeSelectionPrompt:"Klik for at starte valg af datoområde",todayDate:e=>`I dag, ${e.date}`,todayDateSelected:e=>`I dag, ${e.date} valgt`};var Qz={};Qz={dateRange:e=>`${e.startDate} bis ${e.endDate}`,dateSelected:e=>`${e.date} ausgewählt`,finishRangeSelectionPrompt:"Klicken, um die Auswahl des Datumsbereichs zu beenden",maximumDate:"Letztes verfügbares Datum",minimumDate:"Erstes verfügbares Datum",next:"Weiter",previous:"Zurück",selectedDateDescription:e=>`Ausgewähltes Datum: ${e.date}`,selectedRangeDescription:e=>`Ausgewählter Bereich: ${e.dateRange}`,startRangeSelectionPrompt:"Klicken, um die Auswahl des Datumsbereichs zu beginnen",todayDate:e=>`Heute, ${e.date}`,todayDateSelected:e=>`Heute, ${e.date} ausgewählt`};var eL={};eL={dateRange:e=>`${e.startDate} έως ${e.endDate}`,dateSelected:e=>`Επιλέχθηκε ${e.date}`,finishRangeSelectionPrompt:"Κάντε κλικ για να ολοκληρώσετε την επιλογή εύρους ημερομηνιών",maximumDate:"Τελευταία διαθέσιμη ημερομηνία",minimumDate:"Πρώτη διαθέσιμη ημερομηνία",next:"Επόμενο",previous:"Προηγούμενο",selectedDateDescription:e=>`Επιλεγμένη ημερομηνία: ${e.date}`,selectedRangeDescription:e=>`Επιλεγμένο εύρος: ${e.dateRange}`,startRangeSelectionPrompt:"Κάντε κλικ για να ξεκινήσετε την επιλογή εύρους ημερομηνιών",todayDate:e=>`Σήμερα, ${e.date}`,todayDateSelected:e=>`Σήμερα, επιλέχτηκε ${e.date}`};var tL={};tL={previous:"Previous",next:"Next",selectedDateDescription:e=>`Selected Date: ${e.date}`,selectedRangeDescription:e=>`Selected Range: ${e.dateRange}`,todayDate:e=>`Today, ${e.date}`,todayDateSelected:e=>`Today, ${e.date} selected`,dateSelected:e=>`${e.date} selected`,startRangeSelectionPrompt:"Click to start selecting date range",finishRangeSelectionPrompt:"Click to finish selecting date range",minimumDate:"First available date",maximumDate:"Last available date",dateRange:e=>`${e.startDate} to ${e.endDate}`};var rL={};rL={dateRange:e=>`${e.startDate} a ${e.endDate}`,dateSelected:e=>`${e.date} seleccionado`,finishRangeSelectionPrompt:"Haga clic para terminar de seleccionar rango de fechas",maximumDate:"Última fecha disponible",minimumDate:"Primera fecha disponible",next:"Siguiente",previous:"Anterior",selectedDateDescription:e=>`Fecha seleccionada: ${e.date}`,selectedRangeDescription:e=>`Intervalo seleccionado: ${e.dateRange}`,startRangeSelectionPrompt:"Haga clic para comenzar a seleccionar un rango de fechas",todayDate:e=>`Hoy, ${e.date}`,todayDateSelected:e=>`Hoy, ${e.date} seleccionado`};var nL={};nL={dateRange:e=>`${e.startDate} kuni ${e.endDate}`,dateSelected:e=>`${e.date} valitud`,finishRangeSelectionPrompt:"Klõpsake kuupäevavahemiku valimise lõpetamiseks",maximumDate:"Viimane saadaolev kuupäev",minimumDate:"Esimene saadaolev kuupäev",next:"Järgmine",previous:"Eelmine",selectedDateDescription:e=>`Valitud kuupäev: ${e.date}`,selectedRangeDescription:e=>`Valitud vahemik: ${e.dateRange}`,startRangeSelectionPrompt:"Klõpsake kuupäevavahemiku valimiseks",todayDate:e=>`Täna, ${e.date}`,todayDateSelected:e=>`Täna, ${e.date} valitud`};var aL={};aL={dateRange:e=>`${e.startDate} – ${e.endDate}`,dateSelected:e=>`${e.date} valittu`,finishRangeSelectionPrompt:"Lopeta päivämääräalueen valinta napsauttamalla tätä.",maximumDate:"Viimeinen varattavissa oleva päivämäärä",minimumDate:"Ensimmäinen varattavissa oleva päivämäärä",next:"Seuraava",previous:"Edellinen",selectedDateDescription:e=>`Valittu päivämäärä: ${e.date}`,selectedRangeDescription:e=>`Valittu aikaväli: ${e.dateRange}`,startRangeSelectionPrompt:"Aloita päivämääräalueen valinta napsauttamalla tätä.",todayDate:e=>`Tänään, ${e.date}`,todayDateSelected:e=>`Tänään, ${e.date} valittu`};var iL={};iL={dateRange:e=>`${e.startDate} à ${e.endDate}`,dateSelected:e=>`${e.date} sélectionné`,finishRangeSelectionPrompt:"Cliquer pour finir de sélectionner la plage de dates",maximumDate:"Dernière date disponible",minimumDate:"Première date disponible",next:"Suivant",previous:"Précédent",selectedDateDescription:e=>`Date sélectionnée : ${e.date}`,selectedRangeDescription:e=>`Plage sélectionnée : ${e.dateRange}`,startRangeSelectionPrompt:"Cliquer pour commencer à sélectionner la plage de dates",todayDate:e=>`Aujourd'hui, ${e.date}`,todayDateSelected:e=>`Aujourd’hui, ${e.date} sélectionné`};var sL={};sL={dateRange:e=>`${e.startDate} עד ${e.endDate}`,dateSelected:e=>`${e.date} נבחר`,finishRangeSelectionPrompt:"חץ כדי לסיים את בחירת טווח התאריכים",maximumDate:"תאריך פנוי אחרון",minimumDate:"תאריך פנוי ראשון",next:"הבא",previous:"הקודם",selectedDateDescription:e=>`תאריך נבחר: ${e.date}`,selectedRangeDescription:e=>`טווח נבחר: ${e.dateRange}`,startRangeSelectionPrompt:"לחץ כדי להתחיל בבחירת טווח התאריכים",todayDate:e=>`היום, ${e.date}`,todayDateSelected:e=>`היום, ${e.date} נבחר`};var oL={};oL={dateRange:e=>`${e.startDate} do ${e.endDate}`,dateSelected:e=>`${e.date} odabran`,finishRangeSelectionPrompt:"Kliknite da dovršite raspon odabranih datuma",maximumDate:"Posljednji raspoloživi datum",minimumDate:"Prvi raspoloživi datum",next:"Sljedeći",previous:"Prethodni",selectedDateDescription:e=>`Odabrani datum: ${e.date}`,selectedRangeDescription:e=>`Odabrani raspon: ${e.dateRange}`,startRangeSelectionPrompt:"Kliknite da započnete raspon odabranih datuma",todayDate:e=>`Danas, ${e.date}`,todayDateSelected:e=>`Danas, odabran ${e.date}`};var lL={};lL={dateRange:e=>`${e.startDate}–${e.endDate}`,dateSelected:e=>`${e.date} kiválasztva`,finishRangeSelectionPrompt:"Kattintson a dátumtartomány kijelölésének befejezéséhez",maximumDate:"Utolsó elérhető dátum",minimumDate:"Az első elérhető dátum",next:"Következő",previous:"Előző",selectedDateDescription:e=>`Kijelölt dátum: ${e.date}`,selectedRangeDescription:e=>`Kijelölt tartomány: ${e.dateRange}`,startRangeSelectionPrompt:"Kattintson a dátumtartomány kijelölésének indításához",todayDate:e=>`Ma, ${e.date}`,todayDateSelected:e=>`Ma, ${e.date} kijelölve`};var cL={};cL={dateRange:e=>`Da ${e.startDate} a ${e.endDate}`,dateSelected:e=>`${e.date} selezionata`,finishRangeSelectionPrompt:"Fai clic per completare la selezione dell’intervallo di date",maximumDate:"Ultima data disponibile",minimumDate:"Prima data disponibile",next:"Successivo",previous:"Precedente",selectedDateDescription:e=>`Data selezionata: ${e.date}`,selectedRangeDescription:e=>`Intervallo selezionato: ${e.dateRange}`,startRangeSelectionPrompt:"Fai clic per selezionare l’intervallo di date",todayDate:e=>`Oggi, ${e.date}`,todayDateSelected:e=>`Oggi, ${e.date} selezionata`};var uL={};uL={dateRange:e=>`${e.startDate} から ${e.endDate}`,dateSelected:e=>`${e.date} を選択`,finishRangeSelectionPrompt:"クリックして日付範囲の選択を終了",maximumDate:"最終利用可能日",minimumDate:"最初の利用可能日",next:"次へ",previous:"前へ",selectedDateDescription:e=>`選択した日付 : ${e.date}`,selectedRangeDescription:e=>`選択範囲 : ${e.dateRange}`,startRangeSelectionPrompt:"クリックして日付範囲の選択を開始",todayDate:e=>`本日、${e.date}`,todayDateSelected:e=>`本日、${e.date} を選択`};var dL={};dL={dateRange:e=>`${e.startDate} ~ ${e.endDate}`,dateSelected:e=>`${e.date} 선택됨`,finishRangeSelectionPrompt:"날짜 범위 선택을 완료하려면 클릭하십시오.",maximumDate:"마지막으로 사용 가능한 일자",minimumDate:"처음으로 사용 가능한 일자",next:"다음",previous:"이전",selectedDateDescription:e=>`선택 일자: ${e.date}`,selectedRangeDescription:e=>`선택 범위: ${e.dateRange}`,startRangeSelectionPrompt:"날짜 범위 선택을 시작하려면 클릭하십시오.",todayDate:e=>`오늘, ${e.date}`,todayDateSelected:e=>`오늘, ${e.date} 선택됨`};var hL={};hL={dateRange:e=>`Nuo ${e.startDate} iki ${e.endDate}`,dateSelected:e=>`Pasirinkta ${e.date}`,finishRangeSelectionPrompt:"Spustelėkite, kad baigtumėte pasirinkti datų intervalą",maximumDate:"Paskutinė galima data",minimumDate:"Pirmoji galima data",next:"Paskesnis",previous:"Ankstesnis",selectedDateDescription:e=>`Pasirinkta data: ${e.date}`,selectedRangeDescription:e=>`Pasirinktas intervalas: ${e.dateRange}`,startRangeSelectionPrompt:"Spustelėkite, kad pradėtumėte pasirinkti datų intervalą",todayDate:e=>`Šiandien, ${e.date}`,todayDateSelected:e=>`Šiandien, pasirinkta ${e.date}`};var fL={};fL={dateRange:e=>`No ${e.startDate} līdz ${e.endDate}`,dateSelected:e=>`Atlasīts: ${e.date}`,finishRangeSelectionPrompt:"Noklikšķiniet, lai pabeigtu datumu diapazona atlasi",maximumDate:"Pēdējais pieejamais datums",minimumDate:"Pirmais pieejamais datums",next:"Tālāk",previous:"Atpakaļ",selectedDateDescription:e=>`Atlasītais datums: ${e.date}`,selectedRangeDescription:e=>`Atlasītais diapazons: ${e.dateRange}`,startRangeSelectionPrompt:"Noklikšķiniet, lai sāktu datumu diapazona atlasi",todayDate:e=>`Šodien, ${e.date}`,todayDateSelected:e=>`Atlasīta šodiena, ${e.date}`};var pL={};pL={dateRange:e=>`${e.startDate} til ${e.endDate}`,dateSelected:e=>`${e.date} valgt`,finishRangeSelectionPrompt:"Klikk for å fullføre valg av datoområde",maximumDate:"Siste tilgjengelige dato",minimumDate:"Første tilgjengelige dato",next:"Neste",previous:"Forrige",selectedDateDescription:e=>`Valgt dato: ${e.date}`,selectedRangeDescription:e=>`Valgt område: ${e.dateRange}`,startRangeSelectionPrompt:"Klikk for å starte valg av datoområde",todayDate:e=>`I dag, ${e.date}`,todayDateSelected:e=>`I dag, ${e.date} valgt`};var mL={};mL={dateRange:e=>`${e.startDate} tot ${e.endDate}`,dateSelected:e=>`${e.date} geselecteerd`,finishRangeSelectionPrompt:"Klik om de selectie van het datumbereik te voltooien",maximumDate:"Laatste beschikbare datum",minimumDate:"Eerste beschikbare datum",next:"Volgende",previous:"Vorige",selectedDateDescription:e=>`Geselecteerde datum: ${e.date}`,selectedRangeDescription:e=>`Geselecteerd bereik: ${e.dateRange}`,startRangeSelectionPrompt:"Klik om het datumbereik te selecteren",todayDate:e=>`Vandaag, ${e.date}`,todayDateSelected:e=>`Vandaag, ${e.date} geselecteerd`};var gL={};gL={dateRange:e=>`${e.startDate} do ${e.endDate}`,dateSelected:e=>`Wybrano ${e.date}`,finishRangeSelectionPrompt:"Kliknij, aby zakończyć wybór zakresu dat",maximumDate:"Ostatnia dostępna data",minimumDate:"Pierwsza dostępna data",next:"Dalej",previous:"Wstecz",selectedDateDescription:e=>`Wybrana data: ${e.date}`,selectedRangeDescription:e=>`Wybrany zakres: ${e.dateRange}`,startRangeSelectionPrompt:"Kliknij, aby rozpocząć wybór zakresu dat",todayDate:e=>`Dzisiaj, ${e.date}`,todayDateSelected:e=>`Dzisiaj wybrano ${e.date}`};var yL={};yL={dateRange:e=>`${e.startDate} a ${e.endDate}`,dateSelected:e=>`${e.date} selecionado`,finishRangeSelectionPrompt:"Clique para concluir a seleção do intervalo de datas",maximumDate:"Última data disponível",minimumDate:"Primeira data disponível",next:"Próximo",previous:"Anterior",selectedDateDescription:e=>`Data selecionada: ${e.date}`,selectedRangeDescription:e=>`Intervalo selecionado: ${e.dateRange}`,startRangeSelectionPrompt:"Clique para iniciar a seleção do intervalo de datas",todayDate:e=>`Hoje, ${e.date}`,todayDateSelected:e=>`Hoje, ${e.date} selecionado`};var xL={};xL={dateRange:e=>`${e.startDate} a ${e.endDate}`,dateSelected:e=>`${e.date} selecionado`,finishRangeSelectionPrompt:"Clique para terminar de selecionar o intervalo de datas",maximumDate:"Última data disponível",minimumDate:"Primeira data disponível",next:"Próximo",previous:"Anterior",selectedDateDescription:e=>`Data selecionada: ${e.date}`,selectedRangeDescription:e=>`Intervalo selecionado: ${e.dateRange}`,startRangeSelectionPrompt:"Clique para começar a selecionar o intervalo de datas",todayDate:e=>`Hoje, ${e.date}`,todayDateSelected:e=>`Hoje, ${e.date} selecionado`};var vL={};vL={dateRange:e=>`De la ${e.startDate} până la ${e.endDate}`,dateSelected:e=>`${e.date} selectată`,finishRangeSelectionPrompt:"Apăsaţi pentru a finaliza selecţia razei pentru dată",maximumDate:"Ultima dată disponibilă",minimumDate:"Prima dată disponibilă",next:"Următorul",previous:"Înainte",selectedDateDescription:e=>`Dată selectată: ${e.date}`,selectedRangeDescription:e=>`Interval selectat: ${e.dateRange}`,startRangeSelectionPrompt:"Apăsaţi pentru a începe selecţia razei pentru dată",todayDate:e=>`Astăzi, ${e.date}`,todayDateSelected:e=>`Azi, ${e.date} selectată`};var _L={};_L={dateRange:e=>`С ${e.startDate} по ${e.endDate}`,dateSelected:e=>`Выбрано ${e.date}`,finishRangeSelectionPrompt:"Щелкните, чтобы завершить выбор диапазона дат",maximumDate:"Последняя доступная дата",minimumDate:"Первая доступная дата",next:"Далее",previous:"Назад",selectedDateDescription:e=>`Выбранная дата: ${e.date}`,selectedRangeDescription:e=>`Выбранный диапазон: ${e.dateRange}`,startRangeSelectionPrompt:"Щелкните, чтобы начать выбор диапазона дат",todayDate:e=>`Сегодня, ${e.date}`,todayDateSelected:e=>`Сегодня, выбрано ${e.date}`};var bL={};bL={dateRange:e=>`Od ${e.startDate} do ${e.endDate}`,dateSelected:e=>`Vybratý dátum ${e.date}`,finishRangeSelectionPrompt:"Kliknutím dokončíte výber rozsahu dátumov",maximumDate:"Posledný dostupný dátum",minimumDate:"Prvý dostupný dátum",next:"Nasledujúce",previous:"Predchádzajúce",selectedDateDescription:e=>`Vybratý dátum: ${e.date}`,selectedRangeDescription:e=>`Vybratý rozsah: ${e.dateRange}`,startRangeSelectionPrompt:"Kliknutím spustíte výber rozsahu dátumov",todayDate:e=>`Dnes ${e.date}`,todayDateSelected:e=>`Vybratý dnešný dátum ${e.date}`};var wL={};wL={dateRange:e=>`${e.startDate} do ${e.endDate}`,dateSelected:e=>`${e.date} izbrano`,finishRangeSelectionPrompt:"Kliknite za dokončanje izbire datumskega obsega",maximumDate:"Zadnji razpoložljivi datum",minimumDate:"Prvi razpoložljivi datum",next:"Naprej",previous:"Nazaj",selectedDateDescription:e=>`Izbrani datum: ${e.date}`,selectedRangeDescription:e=>`Izbrano območje: ${e.dateRange}`,startRangeSelectionPrompt:"Kliknite za začetek izbire datumskega obsega",todayDate:e=>`Danes, ${e.date}`,todayDateSelected:e=>`Danes, ${e.date} izbrano`};var SL={};SL={dateRange:e=>`${e.startDate} do ${e.endDate}`,dateSelected:e=>`${e.date} izabran`,finishRangeSelectionPrompt:"Kliknite da dovršite opseg izabranih datuma",maximumDate:"Zadnji raspoloživi datum",minimumDate:"Prvi raspoloživi datum",next:"Sledeći",previous:"Prethodni",selectedDateDescription:e=>`Izabrani datum: ${e.date}`,selectedRangeDescription:e=>`Izabrani period: ${e.dateRange}`,startRangeSelectionPrompt:"Kliknite da započnete opseg izabranih datuma",todayDate:e=>`Danas, ${e.date}`,todayDateSelected:e=>`Danas, izabran ${e.date}`};var TL={};TL={dateRange:e=>`${e.startDate} till ${e.endDate}`,dateSelected:e=>`${e.date} har valts`,finishRangeSelectionPrompt:"Klicka för att avsluta val av datumintervall",maximumDate:"Sista tillgängliga datum",minimumDate:"Första tillgängliga datum",next:"Nästa",previous:"Föregående",selectedDateDescription:e=>`Valt datum: ${e.date}`,selectedRangeDescription:e=>`Valt intervall: ${e.dateRange}`,startRangeSelectionPrompt:"Klicka för att välja datumintervall",todayDate:e=>`Idag, ${e.date}`,todayDateSelected:e=>`Idag, ${e.date} har valts`};var EL={};EL={dateRange:e=>`${e.startDate} - ${e.endDate}`,dateSelected:e=>`${e.date} seçildi`,finishRangeSelectionPrompt:"Tarih aralığı seçimini tamamlamak için tıklayın",maximumDate:"Son müsait tarih",minimumDate:"İlk müsait tarih",next:"Sonraki",previous:"Önceki",selectedDateDescription:e=>`Seçilen Tarih: ${e.date}`,selectedRangeDescription:e=>`Seçilen Aralık: ${e.dateRange}`,startRangeSelectionPrompt:"Tarih aralığı seçimini başlatmak için tıklayın",todayDate:e=>`Bugün, ${e.date}`,todayDateSelected:e=>`Bugün, ${e.date} seçildi`};var CL={};CL={dateRange:e=>`${e.startDate} — ${e.endDate}`,dateSelected:e=>`Вибрано ${e.date}`,finishRangeSelectionPrompt:"Натисніть, щоб завершити вибір діапазону дат",maximumDate:"Остання доступна дата",minimumDate:"Перша доступна дата",next:"Наступний",previous:"Попередній",selectedDateDescription:e=>`Вибрана дата: ${e.date}`,selectedRangeDescription:e=>`Вибраний діапазон: ${e.dateRange}`,startRangeSelectionPrompt:"Натисніть, щоб почати вибір діапазону дат",todayDate:e=>`Сьогодні, ${e.date}`,todayDateSelected:e=>`Сьогодні, вибрано ${e.date}`};var DL={};DL={dateRange:e=>`${e.startDate} 至 ${e.endDate}`,dateSelected:e=>`已选择 ${e.date}`,finishRangeSelectionPrompt:"单击以完成选择日期范围",maximumDate:"最后一个可用日期",minimumDate:"第一个可用日期",next:"下一页",previous:"上一页",selectedDateDescription:e=>`选定的日期：${e.date}`,selectedRangeDescription:e=>`选定的范围：${e.dateRange}`,startRangeSelectionPrompt:"单击以开始选择日期范围",todayDate:e=>`今天，即 ${e.date}`,todayDateSelected:e=>`已选择今天，即 ${e.date}`};var PL={};PL={dateRange:e=>`${e.startDate} 至 ${e.endDate}`,dateSelected:e=>`已選取 ${e.date}`,finishRangeSelectionPrompt:"按一下以完成選取日期範圍",maximumDate:"最後一個可用日期",minimumDate:"第一個可用日期",next:"下一頁",previous:"上一頁",selectedDateDescription:e=>`選定的日期：${e.date}`,selectedRangeDescription:e=>`選定的範圍：${e.dateRange}`,startRangeSelectionPrompt:"按一下以開始選取日期範圍",todayDate:e=>`今天，${e.date}`,todayDateSelected:e=>`已選取今天，${e.date}`};var N_={};N_={"ar-AE":Zz,"bg-BG":Xz,"cs-CZ":Yz,"da-DK":Jz,"de-DE":Qz,"el-GR":eL,"en-US":tL,"es-ES":rL,"et-EE":nL,"fi-FI":aL,"fr-FR":iL,"he-IL":sL,"hr-HR":oL,"hu-HU":lL,"it-IT":cL,"ja-JP":uL,"ko-KR":dL,"lt-LT":hL,"lv-LV":fL,"nb-NO":pL,"nl-NL":mL,"pl-PL":gL,"pt-BR":yL,"pt-PT":xL,"ro-RO":vL,"ru-RU":_L,"sk-SK":bL,"sl-SI":wL,"sr-SP":SL,"sv-SE":TL,"tr-TR":EL,"uk-UA":CL,"zh-CN":DL,"zh-TW":PL};function ML(e){return e&&e.__esModule?e.default:e}const kT=new WeakMap;function x_(e){return(e==null?void 0:e.calendar.identifier)==="gregory"&&e.era==="BC"?"short":void 0}function jQ(e){let t=Eu(ML(N_),"@react-aria/calendar"),i,c;var h;"highlightedRange"in e?{start:i,end:c}=e.highlightedRange||{}:i=c=(h=e.value)!==null&&h!==void 0?h:void 0;let _=ml({weekday:"long",month:"long",year:"numeric",day:"numeric",era:x_(i)||x_(c),timeZone:e.timeZone}),w="anchorDate"in e?e.anchorDate:null;return V.useMemo(()=>{if(!w&&i&&c)if(Ds(i,c)){let a=_.format(i.toDate(e.timeZone));return t.format("selectedDateDescription",{date:a})}else{let a=ZS(_,t,i,c,e.timeZone);return t.format("selectedRangeDescription",{dateRange:a})}return""},[i,c,w,e.timeZone,t,_])}function KS(e,t,i,c){let h=Eu(ML(N_),"@react-aria/calendar"),_=x_(e)||x_(t),w=ml({month:"long",year:"numeric",era:_,calendar:e.calendar.identifier,timeZone:i}),a=ml({month:"long",year:"numeric",day:"numeric",era:_,calendar:e.calendar.identifier,timeZone:i});return V.useMemo(()=>{if(Ds(e,Jg(e))){if(Ds(t,ew(e)))return w.format(e.toDate(i));if(Ds(t,ew(t)))return c?ZS(w,h,e,t,i):w.formatRange(e.toDate(i),t.toDate(i))}return c?ZS(a,h,e,t,i):a.formatRange(e.toDate(i),t.toDate(i))},[e,t,w,a,h,i,c])}function ZS(e,t,i,c,h){let _=e.formatRangeToParts(i.toDate(h),c.toDate(h)),w=-1;for(let B=0;B<_.length;B++){let N=_[B];if(N.source==="shared"&&N.type==="literal")w=B;else if(N.source==="endRange")break}let a="",A="";for(let B=0;B<_.length;B++)B<w?a+=_[B].value:B>w&&(A+=_[B].value);return t.format("dateRange",{startDate:a,endDate:A})}function OQ(e){return e&&e.__esModule?e.default:e}function FQ(e,t){let i=Eu(OQ(N_),"@react-aria/calendar"),c=Fl(e),h=KS(t.visibleRange.start,t.visibleRange.end,t.timeZone,!1),_=KS(t.visibleRange.start,t.visibleRange.end,t.timeZone,!0);kD(()=>{t.isFocused||WS(_)},[_]);let w=jQ(t);kD(()=>{w&&WS(w,"polite",4e3)},[w]);let a=vm([!!e.errorMessage,e.isInvalid,e.validationState]);kT.set(t,{ariaLabel:e["aria-label"],ariaLabelledBy:e["aria-labelledby"],errorMessageId:a,selectedDateDescription:w});let[A,B]=V.useState(!1),N=e.isDisabled||t.isNextVisibleRangeInvalid();N&&A&&(B(!1),t.setFocused(!0));let[F,G]=V.useState(!1),Q=e.isDisabled||t.isPreviousVisibleRangeInvalid();Q&&F&&(G(!1),t.setFocused(!0));let te=C_({id:e.id,"aria-label":[e["aria-label"],_].filter(Boolean).join(", "),"aria-labelledby":e["aria-labelledby"]});return{calendarProps:xr(c,te,{role:"application","aria-describedby":e["aria-describedby"]||void 0}),nextButtonProps:{onPress:()=>t.focusNextPage(),"aria-label":i.format("next"),isDisabled:N,onFocusChange:B},prevButtonProps:{onPress:()=>t.focusPreviousPage(),"aria-label":i.format("previous"),isDisabled:Q,onFocusChange:G},errorMessageProps:{id:a},title:h}}function VQ(e,t){return FQ(e,t)}function UQ(e,t){let{startDate:i=t.visibleRange.start,endDate:c=t.visibleRange.end,firstDayOfWeek:h}=e,{direction:_}=Ms(),w=te=>{switch(te.key){case"Enter":case" ":te.preventDefault(),t.selectFocusedDate();break;case"PageUp":te.preventDefault(),te.stopPropagation(),t.focusPreviousSection(te.shiftKey);break;case"PageDown":te.preventDefault(),te.stopPropagation(),t.focusNextSection(te.shiftKey);break;case"End":te.preventDefault(),te.stopPropagation(),t.focusSectionEnd();break;case"Home":te.preventDefault(),te.stopPropagation(),t.focusSectionStart();break;case"ArrowLeft":te.preventDefault(),te.stopPropagation(),_==="rtl"?t.focusNextDay():t.focusPreviousDay();break;case"ArrowUp":te.preventDefault(),te.stopPropagation(),t.focusPreviousRow();break;case"ArrowRight":te.preventDefault(),te.stopPropagation(),_==="rtl"?t.focusPreviousDay():t.focusNextDay();break;case"ArrowDown":te.preventDefault(),te.stopPropagation(),t.focusNextRow();break;case"Escape":"setAnchorDate"in t&&(te.preventDefault(),t.setAnchorDate(null));break}},a=KS(i,c,t.timeZone,!0),{ariaLabel:A,ariaLabelledBy:B}=kT.get(t),N=C_({"aria-label":[A,a].filter(Boolean).join(", "),"aria-labelledby":B}),F=ml({weekday:e.weekdayStyle||"narrow",timeZone:t.timeZone}),{locale:G}=Ms(),Q=V.useMemo(()=>{let te=a_(Pm(t.timeZone),G,h);return[...new Array(7).keys()].map(Y=>{let de=te.add({days:Y}).toDate(t.timeZone);return F.format(de)})},[G,t.timeZone,F,h]);return{gridProps:xr(N,{role:"grid","aria-readonly":t.isReadOnly||void 0,"aria-disabled":t.isDisabled||void 0,"aria-multiselectable":"highlightedRange"in t||void 0,onKeyDown:w,onFocus:()=>t.setFocused(!0),onBlur:()=>t.setFocused(!1)}),headerProps:{"aria-hidden":!0},weekDays:Q}}function GQ(e){return e&&e.__esModule?e.default:e}function HQ(e,t,i){let{date:c,isDisabled:h}=e,{errorMessageId:_,selectedDateDescription:w}=kT.get(t),a=Eu(GQ(N_),"@react-aria/calendar"),A=ml({weekday:"long",day:"numeric",month:"long",year:"numeric",era:x_(c),timeZone:t.timeZone}),B=t.isSelected(c),N=t.isCellFocused(c);h=h||t.isCellDisabled(c);let F=t.isCellUnavailable(c),G=!h&&!F,Q=t.isValueInvalid&&!!("highlightedRange"in t?!t.anchorDate&&t.highlightedRange&&c.compare(t.highlightedRange.start)>=0&&c.compare(t.highlightedRange.end)<=0:t.value&&Ds(t.value,c));Q&&(B=!0),c=qk(c,EV);let te=V.useMemo(()=>c.toDate(t.timeZone),[c,t.timeZone]),Y=sk(c,t.timeZone),oe=V.useMemo(()=>{let ue="";return"highlightedRange"in t&&t.value&&!t.anchorDate&&(Ds(c,t.value.start)||Ds(c,t.value.end))&&(ue=w+", "),ue+=A.format(te),Y?ue=a.format(B?"todayDateSelected":"todayDate",{date:ue}):B&&(ue=a.format("dateSelected",{date:ue})),t.minValue&&Ds(c,t.minValue)?ue+=", "+a.format("minimumDate"):t.maxValue&&Ds(c,t.maxValue)&&(ue+=", "+a.format("maximumDate")),ue},[A,te,a,B,Y,c,t,w]),de="";"anchorDate"in t&&N&&!t.isReadOnly&&G&&(t.anchorDate?de=a.format("finishRangeSelectionPrompt"):de=a.format("startRangeSelectionPrompt"));let me=Gw(de),be=V.useRef(!1),pe=V.useRef(!1),Se=V.useRef(void 0),{pressProps:$e,isPressed:Le}=wu({shouldCancelOnPointerExit:"anchorDate"in t&&!!t.anchorDate,preventFocusOnPress:!0,isDisabled:!G||t.isReadOnly,onPressStart(ue){if(t.isReadOnly){t.setFocusedDate(c);return}if("highlightedRange"in t&&!t.anchorDate&&(ue.pointerType==="mouse"||ue.pointerType==="touch")){if(t.highlightedRange&&!Q){if(Ds(c,t.highlightedRange.start)){t.setAnchorDate(t.highlightedRange.end),t.setFocusedDate(c),t.setDragging(!0),pe.current=!0;return}else if(Ds(c,t.highlightedRange.end)){t.setAnchorDate(t.highlightedRange.start),t.setFocusedDate(c),t.setDragging(!0),pe.current=!0;return}}let ke=()=>{t.setDragging(!0),Se.current=void 0,t.selectDate(c),t.setFocusedDate(c),be.current=!0};ue.pointerType==="touch"?Se.current=setTimeout(ke,200):ke()}},onPressEnd(){pe.current=!1,be.current=!1,clearTimeout(Se.current),Se.current=void 0},onPress(){!("anchorDate"in t)&&!t.isReadOnly&&(t.selectDate(c),t.setFocusedDate(c))},onPressUp(ue){if(!t.isReadOnly&&("anchorDate"in t&&Se.current&&(t.selectDate(c),t.setFocusedDate(c)),"anchorDate"in t))if(pe.current)t.setAnchorDate(c);else if(t.anchorDate&&!be.current)t.selectDate(c),t.setFocusedDate(c);else if(ue.pointerType==="keyboard"&&!t.anchorDate){t.selectDate(c);let ke=c.add({days:1});t.isInvalid(ke)&&(ke=c.subtract({days:1})),t.isInvalid(ke)||t.setFocusedDate(ke)}else ue.pointerType==="virtual"&&(t.selectDate(c),t.setFocusedDate(c))}}),re;h||(re=Ds(c,t.focusedDate)?0:-1),V.useEffect(()=>{N&&i.current&&(pl(i.current),Sm()!=="pointer"&&document.activeElement===i.current&&lw(i.current,{containingElement:Uw(i.current)}))},[N,i]);let Ee=ml({day:"numeric",timeZone:t.timeZone,calendar:c.calendar.identifier}),se=V.useMemo(()=>Ee.formatToParts(te).find(ue=>ue.type==="day").value,[Ee,te]);return{cellProps:{role:"gridcell","aria-disabled":!G||void 0,"aria-selected":B||void 0,"aria-invalid":Q||void 0},buttonProps:xr($e,{onFocus(){h||t.setFocusedDate(c)},tabIndex:re,role:"button","aria-disabled":!G||void 0,"aria-label":oe,"aria-invalid":Q||void 0,"aria-describedby":[Q?_:void 0,me["aria-describedby"]].filter(Boolean).join(" ")||void 0,onPointerEnter(ue){"highlightDate"in t&&(ue.pointerType!=="touch"||t.isDragging)&&G&&t.highlightDate(c)},onPointerDown(ue){"releasePointerCapture"in ue.target&&ue.target.releasePointerCapture(ue.pointerId)},onContextMenu(ue){ue.preventDefault()}}),isPressed:Le,isFocused:N,isSelected:B,isDisabled:h,isUnavailable:F,isOutsideVisibleRange:c.compare(t.visibleRange.start)<0||c.compare(t.visibleRange.end)>0,isInvalid:Q,formattedDate:se}}function m4(e,t,i){return t!=null&&e.compare(t)<0||i!=null&&e.compare(i)>0}function v6(e,t,i,c,h){let _={};for(let a in t)_[a]=Math.floor(t[a]/2),_[a]>0&&t[a]%2===0&&_[a]--;let w=qg(e,t,i).subtract(_);return v_(e,w,t,i,c,h)}function qg(e,t,i,c,h){let _=e;return t.years?_=tw(e):t.months?_=Jg(e):t.weeks&&(_=a_(e,i)),v_(e,_,t,i,c,h)}function XS(e,t,i,c,h){let _={...t};_.days?_.days--:_.weeks?_.weeks--:_.months?_.months--:_.years&&_.years--;let w=qg(e,t,i).subtract(_);return v_(e,w,t,i,c,h)}function v_(e,t,i,c,h,_){if(h&&e.compare(h)>=0){let w=dk(t,qg(yh(h),i,c));w&&(t=w)}if(_&&e.compare(_)<=0){let w=uk(t,XS(yh(_),i,c));w&&(t=w)}return t}function zg(e,t,i){if(t){let c=dk(e,yh(t));c&&(e=c)}if(i){let c=uk(e,yh(i));c&&(e=c)}return e}function qQ(e,t,i){if(!i)return e;for(;e.compare(t)>=0&&i(e);)e=e.subtract({days:1});return e.compare(t)>=0?e:null}function WQ(e){let t=V.useMemo(()=>new gd(e.locale),[e.locale]),i=V.useMemo(()=>t.resolvedOptions(),[t]),{locale:c,createCalendar:h,visibleDuration:_={months:1},minValue:w,maxValue:a,selectionAlignment:A,isDateUnavailable:B,pageBehavior:N="visible",firstDayOfWeek:F}=e,G=V.useMemo(()=>h(i.calendar),[h,i.calendar]);var Q;let[te,Y]=Xs(e.value,(Q=e.defaultValue)!==null&&Q!==void 0?Q:null,e.onChange),oe=V.useMemo(()=>te?Gi(yh(te),G):null,[te,G]),de=V.useMemo(()=>te&&"timeZone"in te?te.timeZone:i.timeZone,[te,i.timeZone]),me=V.useMemo(()=>e.focusedValue?zg(Gi(yh(e.focusedValue),G),w,a):void 0,[e.focusedValue,G,w,a]),be=V.useMemo(()=>zg(e.defaultFocusedValue?Gi(yh(e.defaultFocusedValue),G):oe||Gi(Pm(de),G),w,a),[e.defaultFocusedValue,oe,de,G,w,a]),[pe,Se]=Xs(me,be,e.onFocusChange),[$e,Le]=V.useState(()=>{switch(A){case"start":return qg(pe,_,c,w,a);case"end":return XS(pe,_,c,w,a);case"center":default:return v6(pe,_,c,w,a)}}),[re,Ee]=V.useState(e.autoFocus||!1),se=V.useMemo(()=>{let He={..._};return He.days?He.days--:He.days=-1,$e.add(He)},[$e,_]),[ue,ke]=V.useState(G.identifier);if(G.identifier!==ue){let He=Gi(pe,G);Le(v6(He,_,c,w,a)),Se(He),ke(G.identifier)}m4(pe,w,a)?Se(zg(pe,w,a)):pe.compare($e)<0?Le(XS(pe,_,c,w,a)):pe.compare(se)>0&&Le(qg(pe,_,c,w,a));function ce(He){He=zg(He,w,a),Se(He)}function Pe(He){if(!e.isDisabled&&!e.isReadOnly){let et=He;if(et===null){Y(null);return}if(et=zg(et,w,a),et=qQ(et,$e,B),!et)return;et=Gi(et,(te==null?void 0:te.calendar)||new Nl),te&&"hour"in te?Y(te.set(et)):Y(et)}}let xe=V.useMemo(()=>oe?B&&B(oe)?!0:m4(oe,w,a):!1,[oe,B,w,a]),Te=e.isInvalid||e.validationState==="invalid"||xe,Ie=Te?"invalid":null,Me=V.useMemo(()=>N==="visible"?_:g4(_),[N,_]);var Xe,Ce;return{isDisabled:(Xe=e.isDisabled)!==null&&Xe!==void 0?Xe:!1,isReadOnly:(Ce=e.isReadOnly)!==null&&Ce!==void 0?Ce:!1,value:oe,setValue:Pe,visibleRange:{start:$e,end:se},minValue:w,maxValue:a,focusedDate:pe,timeZone:de,validationState:Ie,isValueInvalid:Te,setFocusedDate(He){ce(He),Ee(!0)},focusNextDay(){ce(pe.add({days:1}))},focusPreviousDay(){ce(pe.subtract({days:1}))},focusNextRow(){_.days?this.focusNextPage():(_.weeks||_.months||_.years)&&ce(pe.add({weeks:1}))},focusPreviousRow(){_.days?this.focusPreviousPage():(_.weeks||_.months||_.years)&&ce(pe.subtract({weeks:1}))},focusNextPage(){let He=$e.add(Me);Se(zg(pe.add(Me),w,a)),Le(qg(v_(pe,He,Me,c,w,a),Me,c))},focusPreviousPage(){let He=$e.subtract(Me);Se(zg(pe.subtract(Me),w,a)),Le(qg(v_(pe,He,Me,c,w,a),Me,c))},focusSectionStart(){_.days?ce($e):_.weeks?ce(a_(pe,c)):(_.months||_.years)&&ce(Jg(pe))},focusSectionEnd(){_.days?ce(se):_.weeks?ce(MV(pe,c)):(_.months||_.years)&&ce(ew(pe))},focusNextSection(He){if(!He&&!_.days){ce(pe.add(g4(_)));return}_.days?this.focusNextPage():_.weeks?ce(pe.add({months:1})):(_.months||_.years)&&ce(pe.add({years:1}))},focusPreviousSection(He){if(!He&&!_.days){ce(pe.subtract(g4(_)));return}_.days?this.focusPreviousPage():_.weeks?ce(pe.subtract({months:1})):(_.months||_.years)&&ce(pe.subtract({years:1}))},selectFocusedDate(){B&&B(pe)||Pe(pe)},selectDate(He){Pe(He)},isFocused:re,setFocused:Ee,isInvalid(He){return m4(He,w,a)},isSelected(He){return oe!=null&&Ds(He,oe)&&!this.isCellDisabled(He)&&!this.isCellUnavailable(He)},isCellFocused(He){return re&&pe&&Ds(He,pe)},isCellDisabled(He){return e.isDisabled||He.compare($e)<0||He.compare(se)>0||this.isInvalid(He)},isCellUnavailable(He){return e.isDateUnavailable?e.isDateUnavailable(He):!1},isPreviousVisibleRangeInvalid(){let He=$e.subtract({days:1});return Ds(He,$e)||this.isInvalid(He)},isNextVisibleRangeInvalid(){let He=se.add({days:1});return Ds(He,se)||this.isInvalid(He)},getDatesInWeek(He,et=$e){let Ke=et.add({weeks:He}),ot=[];Ke=a_(Ke,c,F);let Pt=Nw(Ke,c,F);for(let Et=0;Et<Pt;Et++)ot.push(null);for(;ot.length<7;){ot.push(Ke);let Et=Ke.add({days:1});if(Ds(Ke,Et))break;Ke=Et}for(;ot.length<7;)ot.push(null);return ot}}}function g4(e){let t={...e};for(let i in e)t[i]=1;return t}function KQ({buttonPickerProps:e,className:t,...i}){const{Component:c,slots:h,children:_,domRef:w,locale:a,minValue:A,maxValue:B,showHelper:N,firstDayOfWeek:F,weekdayStyle:G,visibleDuration:Q,baseProps:te,disableAnimation:Y,shouldFilterDOMProps:oe,isHeaderExpanded:de,visibleMonths:me,createCalendar:be,showMonthAndYearPickers:pe,getPrevButtonProps:Se,getNextButtonProps:$e,getErrorMessageProps:Le,setIsHeaderExpanded:re,topContent:Ee,bottomContent:se,errorMessage:ue,classNames:ke,otherProps:ce}=NQ(i),Pe=V.useRef(null),xe=WQ({...i,locale:a,minValue:A,maxValue:B,visibleDuration:Q,createCalendar:!be||typeof be!="function"?ow:be}),{title:Te,calendarProps:Ie,prevButtonProps:Me,nextButtonProps:Xe,errorMessageProps:Ce}=VQ(i,xe),He=Nr(ke==null?void 0:ke.base,t),et={...xr(e,{isDisabled:i.isDisabled}),onPress:qi(e==null?void 0:e.onPress,()=>re(!de))},Ke=(Pt={})=>({...te,Component:c,showHelper:N,firstDayOfWeek:F,topContent:Ee,bottomContent:se,buttonPickerProps:et,calendarRef:w,calendarProps:Ie,prevButtonProps:Se(Me),nextButtonProps:$e(Xe),errorMessageProps:Le(Ce),className:h.base({class:He}),errorMessage:ue,...Wo(ce,{enabled:oe}),...Pt}),ot=V.useMemo(()=>({state:xe,slots:h,headerRef:Pe,weekdayStyle:G,isHeaderExpanded:de,setIsHeaderExpanded:re,visibleMonths:me,classNames:ke,showMonthAndYearPickers:pe,disableAnimation:Y}),[xe,h,ke,G,de,re,me,Y,pe]);return{Component:c,children:_,domRef:w,context:ot,state:xe,slots:h,title:Te,classNames:ke,getBaseCalendarProps:Ke}}var ZQ=e=>b.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 16 16",width:"1em",...e,children:b.jsx("path",{d:"M10 3.33334L6 8.00001L10 12.6667",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})}),XQ=e=>b.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 16 16",width:"1em",...e,children:b.jsx("path",{d:"M6 3.33334L10 8.00001L6 12.6667",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})}),YQ=e=>b.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:b.jsx("path",{d:"M19 9L12 15L5 9",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})}),[JQ,o2]=Th({name:"CalendarContext",strict:!0,errorMessage:"useContext: `context` is undefined. Seems you forgot to wrap component within the CalendarProvider"}),QQ={type:"spring",bounce:0,duration:.3},AL={enter:e=>({x:`${e*100}%`}),center:{x:"0%"},exit:e=>({x:`${e*-100}%`})};function eee(e){const{direction:t,date:i,currentMonth:c,buttonPickerProps:h}=e,{state:_,slots:w,headerRef:a,showMonthAndYearPickers:A,isHeaderExpanded:B,setIsHeaderExpanded:N,disableAnimation:F,classNames:G}=o2(),te=ml({month:"long",era:c.calendar.identifier==="gregory"&&c.era==="BC"?"short":void 0,calendar:c.calendar.identifier,timeZone:_.timeZone,year:"numeric"}).format(i.toDate(_.timeZone)),Y=b.jsx(b.Fragment,{children:F?b.jsx("span",{"aria-hidden":!0,className:w==null?void 0:w.title({class:G==null?void 0:G.title}),"data-slot":"title",children:te},c.month):b.jsx(jl.span,{animate:"center","aria-hidden":!0,className:w==null?void 0:w.title({class:G==null?void 0:G.title}),custom:t,"data-slot":"title",exit:"exit",initial:"enter",variants:B?{}:AL,children:te},c.month)}),oe={ref:a,className:w==null?void 0:w.header({class:G==null?void 0:G.header}),"data-slot":"header"},de=V.useCallback(me=>{me.key==="Escape"&&(me.preventDefault(),me.stopPropagation(),N==null||N(!1))},[N]);return A?b.jsx($r,{...oe,"aria-label":"switch to year and month view",disableAnimation:F,endContent:b.jsx(YQ,{className:"chevron-icon"}),onKeyDown:de,...h,children:Y}):b.jsx("header",{...oe,children:Y})}function tee(e){const{state:t,slots:i,isPickerVisible:c,currentMonth:h,classNames:_,firstDayOfWeek:w,...a}=e,A=V.useRef(null),{cellProps:B,buttonProps:N,isPressed:F,isSelected:G,isDisabled:Q,isFocused:te,isInvalid:Y,formattedDate:oe}=HQ({...a,isDisabled:!cD(a.date,h)||c},t,A),de=t.isCellUnavailable(a.date),me=!Q&&!Y&&t.isCellUnavailable(a.date.add({days:1})),be=!Q&&!Y&&t.isCellUnavailable(a.date.subtract({days:1})),pe="highlightedRange"in t&&t.highlightedRange,Se=G&&pe?Ds(a.date,pe.start):!1,$e=G&&pe?Ds(a.date,pe.end):!1,{locale:Le}=Ms(),re=Nw(a.date,Le,w),Ee=G&&(be||re===0||a.date.day===1),se=G&&(me||re===6||a.date.day===h.calendar.getDaysInMonth(h)),{focusProps:ue,isFocusVisible:ke}=Ac(),{hoverProps:ce,isHovered:Pe}=wo({isDisabled:Q||de||t.isReadOnly});return b.jsx("td",{className:i==null?void 0:i.cell({class:_==null?void 0:_.cell}),"data-slot":"cell",...B,children:b.jsx("span",{...xr(N,ce,ue),ref:A,className:i==null?void 0:i.cellButton({class:_==null?void 0:_.cellButton}),"data-disabled":Vt(Q&&!Y),"data-focus-visible":Vt(te&&ke),"data-hover":Vt(Pe),"data-invalid":Vt(Y),"data-outside-month":Vt(!cD(a.date,h)),"data-pressed":Vt(F&&!t.isReadOnly),"data-range-end":Vt(se),"data-range-selection":Vt(G&&"highlightedRange"in t),"data-range-start":Vt(Ee),"data-readonly":Vt(t.isReadOnly),"data-selected":Vt(G),"data-selection-end":Vt($e),"data-selection-start":Vt(Se),"data-today":Vt(sk(a.date,t.timeZone)),"data-unavailable":Vt(de),children:b.jsx("span",{children:oe})})})}function ree(e){const{startDate:t,direction:i,currentMonth:c,firstDayOfWeek:h}=e,{locale:_}=Ms(),w=RV(t,_,h),{state:a,slots:A,weekdayStyle:B,isHeaderExpanded:N,disableAnimation:F,classNames:G}=o2(),{gridProps:Q,headerProps:te,weekDays:Y}=UQ({...e,weekdayStyle:B,endDate:ew(t),firstDayOfWeek:h},a),oe=[...new Array(w).keys()].map(de=>b.jsx("tr",{className:A==null?void 0:A.gridBodyRow({class:G==null?void 0:G.gridBodyRow}),"data-slot":"grid-body-row",inert:WA(!!N),children:a.getDatesInWeek(de,t).map((me,be)=>me?b.jsx(tee,{classNames:G,currentMonth:t,date:me,firstDayOfWeek:h,isPickerVisible:N,slots:A,state:a},be):b.jsx("td",{},be))},de));return b.jsxs("table",{...Q,"aria-hidden":Vt(N),className:A==null?void 0:A.grid({class:G==null?void 0:G.grid}),"data-slot":"grid",tabIndex:-1,children:[b.jsx("thead",{...te,className:A==null?void 0:A.gridHeader({class:G==null?void 0:G.gridHeader}),"data-slot":"grid-header",children:b.jsx("tr",{className:A==null?void 0:A.gridHeaderRow({class:G==null?void 0:G.gridHeaderRow}),"data-slot":"grid-header-row",children:Y.map((de,me)=>b.jsx("th",{className:A==null?void 0:A.gridHeaderCell({class:G==null?void 0:G.gridHeaderCell}),"data-slot":"grid-header-cell",children:b.jsx("span",{children:de})},me))})}),F?b.jsx("tbody",{className:A==null?void 0:A.gridBody({class:G==null?void 0:G.gridBody}),"data-slot":"grid-body",tabIndex:N?-1:0,children:oe},c):b.jsx(jl.tbody,{animate:"center",className:A==null?void 0:A.gridBody({class:G==null?void 0:G.gridBody}),custom:i,"data-slot":"grid-body",exit:"exit",initial:"enter",variants:AL,children:oe},c)]})}function nee(e,t){const i=[];if(!e||!t)return i;let c=tw(e);for(;c.compare(t)<=0;)i.push(c),c=tw(c.add({years:1}));return i}function aee(e,t){return e.add({months:t})}function iee(e){const i=[tw(e)];for(;i.length<12;){const c=i[i.length-1];i.push(aee(c,1))}return i}var _6=200;function see(e){var t;const{date:i,currentMonth:c}=e,{slots:h,state:_,headerRef:w,isHeaderExpanded:a,setIsHeaderExpanded:A,classNames:B}=o2(),N=V.useRef(null),F=V.useRef(null),G=V.useRef(null),Q=V.useRef(),te=V.useRef(),Y=ml({month:"long",era:c.calendar.identifier==="gregory"&&c.era==="BC"?"short":void 0,calendar:c.calendar.identifier,timeZone:_.timeZone}),oe=ml({year:"numeric",timeZone:_.timeZone}),de=(t=nee(_.minValue,_.maxValue))==null?void 0:t.map(Ee=>({value:Ee.year,label:oe.format(Ee.toDate(_.timeZone))})),me=iee(i).map(Ee=>({value:Ee.month,label:Y.format(Ee.toDate(_.timeZone))}));function be(Ee){return Ee.current||(Ee.current=new Map),Ee.current}function pe(Ee,se,ue){const ke=be(ue==="months"?Q:te);Ee?ke.set(se,Ee):ke.delete(se)}const Se=V.useCallback((Ee,se,ue)=>{if(!(Ee.target instanceof HTMLElement))return;const ke=be(ue==="months"?Q:te),Pe=Array.from(ke.values()).find(Ie=>{const Me=Ie.getBoundingClientRect(),Xe=se==null?void 0:se.getBoundingClientRect();return Xe?WF(Me,Xe):!1}),xe=Number(Pe==null?void 0:Pe.getAttribute("data-value"));if(!xe)return;let Te=_.focusedDate.set(ue==="months"?{month:xe}:{year:xe});_.setFocusedDate(Te)},[_,a]);V.useEffect(()=>{a&&($e(i.month,"months",!1),$e(i.year,"years",!1))},[a]),V.useEffect(()=>{const Ee=G.current,se=F.current,ue=N.current;if(!ue)return;const ke=rD(Pe=>Se(Pe,ue,"months"),_6),ce=rD(Pe=>Se(Pe,ue,"years"),_6);return Ee==null||Ee.addEventListener("scroll",ke),se==null||se.addEventListener("scroll",ce),()=>{ke&&(Ee==null||Ee.removeEventListener("scroll",ke)),ce&&(se==null||se.removeEventListener("scroll",ce))}},[Se]);function $e(Ee,se,ue=!0){const ke=se==="months"?Q:te,ce=se==="months"?G:F,xe=be(ke).get(Ee);xe&&xJ(xe,{scrollMode:"always",behavior:ue?"smooth":"auto",boundary:ce.current})}const Le=V.useCallback((Ee,se)=>{const ue=Ee.target,ke=Number(ue.getAttribute("data-value"));ke&&$e(ke,se)},[_]),re=V.useCallback((Ee,se,ue)=>{var ke;const ce=be(ue==="months"?Q:te);if(!ce.get(se))return;let xe=se;switch(Ee.key){case"ArrowDown":xe=se+1;break;case"ArrowUp":xe=se-1;break;case"Home":xe=0;break;case"End":xe=me.length-1;break;case"PageUp":xe=se-3;break;case"PageDown":xe=se+3;break;case"Escape":case"Enter":case" ":A==null||A(!1),(ke=w==null?void 0:w.current)==null||ke.focus();return}const Te=ce.get(xe);Te==null||Te.focus()},[_]);return{state:_,slots:h,classNames:B,years:de,months:me,highlightRef:N,monthsListRef:G,yearsListRef:F,getItemRef:pe,isHeaderExpanded:a,onPickerItemPressed:Le,onPickerItemKeyDown:re}}var YS=V.forwardRef(({children:e,autoFocus:t,isDisabled:i,onKeyDown:c,...h},_)=>{const w=Ba(_),{buttonProps:a,isPressed:A}=r2({elementType:"button",isDisabled:i,onKeyDown:c,...h},w),{isFocusVisible:B,isFocused:N,focusProps:F}=Ac({autoFocus:t}),{isHovered:G,hoverProps:Q}=wo({isDisabled:i});return b.jsx("button",{ref:w,"data-disabled":Vt(i),"data-focus":Vt(N),"data-focus-visible":Vt(B),"data-hover":Vt(G),"data-pressed":Vt(A),"data-slot":"picker-item",...xr(F,Q,a,Wo(h,{enabled:!0})),children:e})});YS.displayName="CalendarPickerItem";var b6=3;function oee(e){const{state:t,slots:i,months:c,years:h,highlightRef:_,monthsListRef:w,yearsListRef:a,classNames:A,getItemRef:B,isHeaderExpanded:N,onPickerItemPressed:F,onPickerItemKeyDown:G}=see(e),Q=V.useCallback(Y=>b.jsx("div",{"aria-hidden":"true",className:i==null?void 0:i.pickerItem({class:A==null?void 0:A.pickerItem}),"data-slot":"picker-item-empty",tabIndex:-1,...Y,children:" "}),[i,A==null?void 0:A.pickerItem]),te=V.useCallback(({children:Y})=>b.jsxs(b.Fragment,{children:[Array.from({length:b6},(oe,de)=>b.jsx(Q,{},de)),Y,Array.from({length:b6},(oe,de)=>b.jsx(Q,{},de))]}),[Q]);return b.jsxs("div",{className:i==null?void 0:i.pickerWrapper({class:A==null?void 0:A.pickerWrapper}),"data-slot":"picker-wrapper",inert:WA(!N),children:[b.jsx("div",{ref:_,className:i==null?void 0:i.pickerHighlight({class:A==null?void 0:A.pickerHighlight}),"data-slot":"picker-highlight"}),b.jsx("div",{ref:w,className:i==null?void 0:i.pickerMonthList({class:A==null?void 0:A.pickerMonthList}),"data-slot":"picker-month-list",children:b.jsx(te,{children:c.map(Y=>{var oe;return b.jsx(YS,{ref:de=>B(de,Y.value,"months"),className:i==null?void 0:i.pickerItem({class:A==null?void 0:A.pickerItem}),"data-value":Y.value,tabIndex:!N||((oe=t.focusedDate)==null?void 0:oe.month)!==Y.value?-1:0,onKeyDown:de=>G(de,Y.value,"months"),onPress:de=>F(de,"months"),children:Y.label},`picker-month-${Y.value}`)})})}),b.jsx("div",{ref:a,className:i==null?void 0:i.pickerYearList({class:A==null?void 0:A.pickerYearList}),"data-slot":"picker-year-list",children:b.jsx(te,{children:h.map(Y=>{var oe;return b.jsx(YS,{ref:de=>B(de,Y.value,"years"),className:i==null?void 0:i.pickerItem({class:A==null?void 0:A.pickerItem}),"data-value":Y.value,tabIndex:!N||((oe=t.focusedDate)==null?void 0:oe.year)!==Y.value?-1:0,onKeyDown:de=>G(de,Y.value,"years"),onPress:de=>F(de,"years"),children:Y.label},`picker-year-${Y.value}`)})})})]})}var lee=()=>km(()=>import("./index-hP_uZtvp.js"),[]).then(e=>e.default),kL=V.forwardRef((e,t)=>b.jsx("div",{ref:t,...e}));kL.displayName="HeroUI - PopLayoutWrapper";function cee(e){const{Component:t="div",showHelper:i,topContent:c,bottomContent:h,calendarProps:_,nextButtonProps:w,prevButtonProps:a,buttonPickerProps:A,errorMessageProps:B,calendarRef:N,errorMessage:F,firstDayOfWeek:G,...Q}=e,{state:te,slots:Y,visibleMonths:oe,showMonthAndYearPickers:de,disableAnimation:me,classNames:be}=o2(),[pe,Se]=V.useState(0),{direction:$e}=Ms(),Le=te.visibleRange.start,re=[],Ee=[],se=$e==="rtl";for(let ke=0;ke<oe;ke++){let ce=Le.add({months:ke});re.push(b.jsxs(V.Fragment,{children:[ke===0&&b.jsx($r,{...se?w:a,onPress:qi(se?w.onPress:a.onPress,()=>Se(-1)),children:b.jsx(ZQ,{})}),b.jsx(eee,{buttonPickerProps:A,currentMonth:Le,date:ce,direction:pe}),ke===oe-1&&b.jsx($r,{...se?a:w,onPress:qi(se?a.onPress:w.onPress,()=>Se(1)),children:b.jsx(XQ,{})})]},`calendar-header-${ke}`));const Pe=V.createElement(ree,{...e,key:`calendar-month-${ke}`,currentMonth:Le.month,direction:pe,firstDayOfWeek:G,startDate:ce});Ee.push(de?b.jsxs(V.Fragment,{children:[Pe,b.jsx(oee,{currentMonth:Le,date:ce})]},`calendar-month-with-pickers-${ke}`):Pe)}const ue=b.jsxs(b.Fragment,{children:[b.jsx("div",{className:Y==null?void 0:Y.headerWrapper({class:be==null?void 0:be.headerWrapper}),"data-slot":"header-wrapper",children:re},"header-wrapper"),b.jsx("div",{className:Y==null?void 0:Y.gridWrapper({class:be==null?void 0:be.gridWrapper}),"data-slot":"grid-wrapper",children:Ee},"grid-wrapper")]});return b.jsxs(t,{...xr(_,Q),ref:N,children:[c,b.jsx(gS,{children:b.jsx("h2",{children:_["aria-label"]})}),me?b.jsx("div",{className:Y==null?void 0:Y.content({class:be==null?void 0:be.content}),"data-slot":"content",children:ue}):b.jsx(a7,{className:Y==null?void 0:Y.content({class:be==null?void 0:be.content}),"data-slot":"content",children:b.jsx(Uf,{custom:pe,initial:!1,mode:"popLayout",children:b.jsx(kL,{children:b.jsx(cI,{transition:QQ,children:b.jsx(Tu,{features:lee,children:ue})})})})}),b.jsx(gS,{children:b.jsx("button",{"aria-label":w["aria-label"],disabled:w.isDisabled,tabIndex:-1,onClick:()=>te.focusNextPage()})}),te.isValueInvalid&&i&&b.jsx("div",{className:Y==null?void 0:Y.helperWrapper({class:be==null?void 0:be.helperWrapper}),"data-slot":"helper-wrapper",children:b.jsx("span",{...B,className:Y==null?void 0:Y.errorMessage({class:be==null?void 0:be.errorMessage}),"data-slot":"error-message",children:F||"Selected date unavailable."})}),h]})}var uee=Na(function(t,i){const{context:c,getBaseCalendarProps:h}=KQ({...t,ref:i});return b.jsx(JQ,{value:c,children:b.jsx(cee,{...h()})})}),dee=uee,RL={};RL={calendar:"التقويم",day:"يوم",dayPeriod:"ص/م",endDate:"تاريخ الانتهاء",era:"العصر",hour:"الساعات",minute:"الدقائق",month:"الشهر",second:"الثواني",selectedDateDescription:e=>`تاريخ محدد: ${e.date}`,selectedRangeDescription:e=>`المدى الزمني المحدد: ${e.startDate} إلى ${e.endDate}`,selectedTimeDescription:e=>`الوقت المحدد: ${e.time}`,startDate:"تاريخ البدء",timeZoneName:"التوقيت",weekday:"اليوم",year:"السنة"};var IL={};IL={calendar:"Календар",day:"ден",dayPeriod:"пр.об./сл.об.",endDate:"Крайна дата",era:"ера",hour:"час",minute:"минута",month:"месец",second:"секунда",selectedDateDescription:e=>`Избрана дата: ${e.date}`,selectedRangeDescription:e=>`Избран диапазон: ${e.startDate} до ${e.endDate}`,selectedTimeDescription:e=>`Избрано време: ${e.time}`,startDate:"Начална дата",timeZoneName:"часова зона",weekday:"ден от седмицата",year:"година"};var zL={};zL={calendar:"Kalendář",day:"den",dayPeriod:"část dne",endDate:"Konečné datum",era:"letopočet",hour:"hodina",minute:"minuta",month:"měsíc",second:"sekunda",selectedDateDescription:e=>`Vybrané datum: ${e.date}`,selectedRangeDescription:e=>`Vybrané období: ${e.startDate} až ${e.endDate}`,selectedTimeDescription:e=>`Vybraný čas: ${e.time}`,startDate:"Počáteční datum",timeZoneName:"časové pásmo",weekday:"den v týdnu",year:"rok"};var LL={};LL={calendar:"Kalender",day:"dag",dayPeriod:"AM/PM",endDate:"Slutdato",era:"æra",hour:"time",minute:"minut",month:"måned",second:"sekund",selectedDateDescription:e=>`Valgt dato: ${e.date}`,selectedRangeDescription:e=>`Valgt interval: ${e.startDate} til ${e.endDate}`,selectedTimeDescription:e=>`Valgt tidspunkt: ${e.time}`,startDate:"Startdato",timeZoneName:"tidszone",weekday:"ugedag",year:"år"};var $L={};$L={calendar:"Kalender",day:"Tag",dayPeriod:"Tageshälfte",endDate:"Enddatum",era:"Epoche",hour:"Stunde",minute:"Minute",month:"Monat",second:"Sekunde",selectedDateDescription:e=>`Ausgewähltes Datum: ${e.date}`,selectedRangeDescription:e=>`Ausgewählter Bereich: ${e.startDate} bis ${e.endDate}`,selectedTimeDescription:e=>`Ausgewählte Zeit: ${e.time}`,startDate:"Anfangsdatum",timeZoneName:"Zeitzone",weekday:"Wochentag",year:"Jahr"};var BL={};BL={calendar:"Ημερολόγιο",day:"ημέρα",dayPeriod:"π.μ./μ.μ.",endDate:"Ημερομηνία λήξης",era:"περίοδος",hour:"ώρα",minute:"λεπτό",month:"μήνας",second:"δευτερόλεπτο",selectedDateDescription:e=>`Επιλεγμένη ημερομηνία: ${e.date}`,selectedRangeDescription:e=>`Επιλεγμένο εύρος: ${e.startDate} έως ${e.endDate}`,selectedTimeDescription:e=>`Επιλεγμένη ώρα: ${e.time}`,startDate:"Ημερομηνία έναρξης",timeZoneName:"ζώνη ώρας",weekday:"καθημερινή",year:"έτος"};var NL={};NL={era:"era",year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",dayPeriod:"AM/PM",calendar:"Calendar",startDate:"Start Date",endDate:"End Date",weekday:"day of the week",timeZoneName:"time zone",selectedDateDescription:e=>`Selected Date: ${e.date}`,selectedRangeDescription:e=>`Selected Range: ${e.startDate} to ${e.endDate}`,selectedTimeDescription:e=>`Selected Time: ${e.time}`};var jL={};jL={calendar:"Calendario",day:"día",dayPeriod:"a. m./p. m.",endDate:"Fecha final",era:"era",hour:"hora",minute:"minuto",month:"mes",second:"segundo",selectedDateDescription:e=>`Fecha seleccionada: ${e.date}`,selectedRangeDescription:e=>`Rango seleccionado: ${e.startDate} a ${e.endDate}`,selectedTimeDescription:e=>`Hora seleccionada: ${e.time}`,startDate:"Fecha de inicio",timeZoneName:"zona horaria",weekday:"día de la semana",year:"año"};var OL={};OL={calendar:"Kalender",day:"päev",dayPeriod:"enne/pärast lõunat",endDate:"Lõppkuupäev",era:"ajastu",hour:"tund",minute:"minut",month:"kuu",second:"sekund",selectedDateDescription:e=>`Valitud kuupäev: ${e.date}`,selectedRangeDescription:e=>`Valitud vahemik: ${e.startDate} kuni ${e.endDate}`,selectedTimeDescription:e=>`Valitud aeg: ${e.time}`,startDate:"Alguskuupäev",timeZoneName:"ajavöönd",weekday:"nädalapäev",year:"aasta"};var FL={};FL={calendar:"Kalenteri",day:"päivä",dayPeriod:"vuorokaudenaika",endDate:"Päättymispäivä",era:"aikakausi",hour:"tunti",minute:"minuutti",month:"kuukausi",second:"sekunti",selectedDateDescription:e=>`Valittu päivämäärä: ${e.date}`,selectedRangeDescription:e=>`Valittu aikaväli: ${e.startDate} – ${e.endDate}`,selectedTimeDescription:e=>`Valittu aika: ${e.time}`,startDate:"Alkamispäivä",timeZoneName:"aikavyöhyke",weekday:"viikonpäivä",year:"vuosi"};var VL={};VL={calendar:"Calendrier",day:"jour",dayPeriod:"cadran",endDate:"Date de fin",era:"ère",hour:"heure",minute:"minute",month:"mois",second:"seconde",selectedDateDescription:e=>`Date sélectionnée : ${e.date}`,selectedRangeDescription:e=>`Plage sélectionnée : ${e.startDate} au ${e.endDate}`,selectedTimeDescription:e=>`Heure choisie : ${e.time}`,startDate:"Date de début",timeZoneName:"fuseau horaire",weekday:"jour de la semaine",year:"année"};var UL={};UL={calendar:"לוח שנה",day:"יום",dayPeriod:"לפנה״צ/אחה״צ",endDate:"תאריך סיום",era:"תקופה",hour:"שעה",minute:"דקה",month:"חודש",second:"שנייה",selectedDateDescription:e=>`תאריך נבחר: ${e.date}`,selectedRangeDescription:e=>`טווח נבחר: ${e.startDate} עד ${e.endDate}`,selectedTimeDescription:e=>`זמן נבחר: ${e.time}`,startDate:"תאריך התחלה",timeZoneName:"אזור זמן",weekday:"יום בשבוע",year:"שנה"};var GL={};GL={calendar:"Kalendar",day:"dan",dayPeriod:"AM/PM",endDate:"Datum završetka",era:"era",hour:"sat",minute:"minuta",month:"mjesec",second:"sekunda",selectedDateDescription:e=>`Odabrani datum: ${e.date}`,selectedRangeDescription:e=>`Odabrani raspon: ${e.startDate} do ${e.endDate}`,selectedTimeDescription:e=>`Odabrano vrijeme: ${e.time}`,startDate:"Datum početka",timeZoneName:"vremenska zona",weekday:"dan u tjednu",year:"godina"};var HL={};HL={calendar:"Naptár",day:"nap",dayPeriod:"napszak",endDate:"Befejező dátum",era:"éra",hour:"óra",minute:"perc",month:"hónap",second:"másodperc",selectedDateDescription:e=>`Kijelölt dátum: ${e.date}`,selectedRangeDescription:e=>`Kijelölt tartomány: ${e.startDate}–${e.endDate}`,selectedTimeDescription:e=>`Kijelölt idő: ${e.time}`,startDate:"Kezdő dátum",timeZoneName:"időzóna",weekday:"hét napja",year:"év"};var qL={};qL={calendar:"Calendario",day:"giorno",dayPeriod:"AM/PM",endDate:"Data finale",era:"era",hour:"ora",minute:"minuto",month:"mese",second:"secondo",selectedDateDescription:e=>`Data selezionata: ${e.date}`,selectedRangeDescription:e=>`Intervallo selezionato: da ${e.startDate} a ${e.endDate}`,selectedTimeDescription:e=>`Ora selezionata: ${e.time}`,startDate:"Data iniziale",timeZoneName:"fuso orario",weekday:"giorno della settimana",year:"anno"};var WL={};WL={calendar:"カレンダー",day:"日",dayPeriod:"午前/午後",endDate:"終了日",era:"時代",hour:"時",minute:"分",month:"月",second:"秒",selectedDateDescription:e=>`選択した日付 : ${e.date}`,selectedRangeDescription:e=>`選択範囲 : ${e.startDate} から ${e.endDate}`,selectedTimeDescription:e=>`選択した時間 : ${e.time}`,startDate:"開始日",timeZoneName:"タイムゾーン",weekday:"曜日",year:"年"};var KL={};KL={calendar:"달력",day:"일",dayPeriod:"오전/오후",endDate:"종료일",era:"연호",hour:"시",minute:"분",month:"월",second:"초",selectedDateDescription:e=>`선택 일자: ${e.date}`,selectedRangeDescription:e=>`선택 범위: ${e.startDate} ~ ${e.endDate}`,selectedTimeDescription:e=>`선택 시간: ${e.time}`,startDate:"시작일",timeZoneName:"시간대",weekday:"요일",year:"년"};var ZL={};ZL={calendar:"Kalendorius",day:"diena",dayPeriod:"iki pietų / po pietų",endDate:"Pabaigos data",era:"era",hour:"valanda",minute:"minutė",month:"mėnuo",second:"sekundė",selectedDateDescription:e=>`Pasirinkta data: ${e.date}`,selectedRangeDescription:e=>`Pasirinktas intervalas: nuo ${e.startDate} iki ${e.endDate}`,selectedTimeDescription:e=>`Pasirinktas laikas: ${e.time}`,startDate:"Pradžios data",timeZoneName:"laiko juosta",weekday:"savaitės diena",year:"metai"};var XL={};XL={calendar:"Kalendārs",day:"diena",dayPeriod:"priekšpusdienā/pēcpusdienā",endDate:"Beigu datums",era:"ēra",hour:"stundas",minute:"minūtes",month:"mēnesis",second:"sekundes",selectedDateDescription:e=>`Atlasītais datums: ${e.date}`,selectedRangeDescription:e=>`Atlasītais diapazons: no ${e.startDate} līdz ${e.endDate}`,selectedTimeDescription:e=>`Atlasītais laiks: ${e.time}`,startDate:"Sākuma datums",timeZoneName:"laika josla",weekday:"nedēļas diena",year:"gads"};var YL={};YL={calendar:"Kalender",day:"dag",dayPeriod:"a.m./p.m.",endDate:"Sluttdato",era:"tidsalder",hour:"time",minute:"minutt",month:"måned",second:"sekund",selectedDateDescription:e=>`Valgt dato: ${e.date}`,selectedRangeDescription:e=>`Valgt område: ${e.startDate} til ${e.endDate}`,selectedTimeDescription:e=>`Valgt tid: ${e.time}`,startDate:"Startdato",timeZoneName:"tidssone",weekday:"ukedag",year:"år"};var JL={};JL={calendar:"Kalender",day:"dag",dayPeriod:"a.m./p.m.",endDate:"Einddatum",era:"tijdperk",hour:"uur",minute:"minuut",month:"maand",second:"seconde",selectedDateDescription:e=>`Geselecteerde datum: ${e.date}`,selectedRangeDescription:e=>`Geselecteerd bereik: ${e.startDate} tot ${e.endDate}`,selectedTimeDescription:e=>`Geselecteerde tijd: ${e.time}`,startDate:"Startdatum",timeZoneName:"tijdzone",weekday:"dag van de week",year:"jaar"};var QL={};QL={calendar:"Kalendarz",day:"dzień",dayPeriod:"rano / po południu / wieczorem",endDate:"Data końcowa",era:"era",hour:"godzina",minute:"minuta",month:"miesiąc",second:"sekunda",selectedDateDescription:e=>`Wybrana data: ${e.date}`,selectedRangeDescription:e=>`Wybrany zakres: ${e.startDate} do ${e.endDate}`,selectedTimeDescription:e=>`Wybrany czas: ${e.time}`,startDate:"Data początkowa",timeZoneName:"strefa czasowa",weekday:"dzień tygodnia",year:"rok"};var e$={};e$={calendar:"Calendário",day:"dia",dayPeriod:"AM/PM",endDate:"Data final",era:"era",hour:"hora",minute:"minuto",month:"mês",second:"segundo",selectedDateDescription:e=>`Data selecionada: ${e.date}`,selectedRangeDescription:e=>`Intervalo selecionado: ${e.startDate} a ${e.endDate}`,selectedTimeDescription:e=>`Hora selecionada: ${e.time}`,startDate:"Data inicial",timeZoneName:"fuso horário",weekday:"dia da semana",year:"ano"};var t$={};t$={calendar:"Calendário",day:"dia",dayPeriod:"am/pm",endDate:"Data de Término",era:"era",hour:"hora",minute:"minuto",month:"mês",second:"segundo",selectedDateDescription:e=>`Data selecionada: ${e.date}`,selectedRangeDescription:e=>`Intervalo selecionado: ${e.startDate} a ${e.endDate}`,selectedTimeDescription:e=>`Hora selecionada: ${e.time}`,startDate:"Data de Início",timeZoneName:"fuso horário",weekday:"dia da semana",year:"ano"};var r$={};r$={calendar:"Calendar",day:"zi",dayPeriod:"a.m/p.m.",endDate:"Dată final",era:"eră",hour:"oră",minute:"minut",month:"lună",second:"secundă",selectedDateDescription:e=>`Dată selectată: ${e.date}`,selectedRangeDescription:e=>`Interval selectat: de la ${e.startDate} până la ${e.endDate}`,selectedTimeDescription:e=>`Ora selectată: ${e.time}`,startDate:"Dată început",timeZoneName:"fus orar",weekday:"ziua din săptămână",year:"an"};var n$={};n$={calendar:"Календарь",day:"день",dayPeriod:"AM/PM",endDate:"Дата окончания",era:"эра",hour:"час",minute:"минута",month:"месяц",second:"секунда",selectedDateDescription:e=>`Выбранная дата: ${e.date}`,selectedRangeDescription:e=>`Выбранный диапазон: с ${e.startDate} по ${e.endDate}`,selectedTimeDescription:e=>`Выбранное время: ${e.time}`,startDate:"Дата начала",timeZoneName:"часовой пояс",weekday:"день недели",year:"год"};var a$={};a$={calendar:"Kalendár",day:"deň",dayPeriod:"AM/PM",endDate:"Dátum ukončenia",era:"letopočet",hour:"hodina",minute:"minúta",month:"mesiac",second:"sekunda",selectedDateDescription:e=>`Vybratý dátum: ${e.date}`,selectedRangeDescription:e=>`Vybratý rozsah: od ${e.startDate} do ${e.endDate}`,selectedTimeDescription:e=>`Vybratý čas: ${e.time}`,startDate:"Dátum začatia",timeZoneName:"časové pásmo",weekday:"deň týždňa",year:"rok"};var i$={};i$={calendar:"Koledar",day:"dan",dayPeriod:"dop/pop",endDate:"Datum konca",era:"doba",hour:"ura",minute:"minuta",month:"mesec",second:"sekunda",selectedDateDescription:e=>`Izbrani datum: ${e.date}`,selectedRangeDescription:e=>`Izbrano območje: ${e.startDate} do ${e.endDate}`,selectedTimeDescription:e=>`Izbrani čas: ${e.time}`,startDate:"Datum začetka",timeZoneName:"časovni pas",weekday:"dan v tednu",year:"leto"};var s$={};s$={calendar:"Kalendar",day:"дан",dayPeriod:"пре подне/по подне",endDate:"Datum završetka",era:"ера",hour:"сат",minute:"минут",month:"месец",second:"секунд",selectedDateDescription:e=>`Izabrani datum: ${e.date}`,selectedRangeDescription:e=>`Izabrani opseg: od ${e.startDate} do ${e.endDate}`,selectedTimeDescription:e=>`Izabrano vreme: ${e.time}`,startDate:"Datum početka",timeZoneName:"временска зона",weekday:"дан у недељи",year:"година"};var o$={};o$={calendar:"Kalender",day:"dag",dayPeriod:"fm/em",endDate:"Slutdatum",era:"era",hour:"timme",minute:"minut",month:"månad",second:"sekund",selectedDateDescription:e=>`Valt datum: ${e.date}`,selectedRangeDescription:e=>`Valt intervall: ${e.startDate} till ${e.endDate}`,selectedTimeDescription:e=>`Vald tid: ${e.time}`,startDate:"Startdatum",timeZoneName:"tidszon",weekday:"veckodag",year:"år"};var l$={};l$={calendar:"Takvim",day:"gün",dayPeriod:"ÖÖ/ÖS",endDate:"Bitiş Tarihi",era:"çağ",hour:"saat",minute:"dakika",month:"ay",second:"saniye",selectedDateDescription:e=>`Seçilen Tarih: ${e.date}`,selectedRangeDescription:e=>`Seçilen Aralık: ${e.startDate} - ${e.endDate}`,selectedTimeDescription:e=>`Seçilen Zaman: ${e.time}`,startDate:"Başlangıç Tarihi",timeZoneName:"saat dilimi",weekday:"haftanın günü",year:"yıl"};var c$={};c$={calendar:"Календар",day:"день",dayPeriod:"дп/пп",endDate:"Дата завершення",era:"ера",hour:"година",minute:"хвилина",month:"місяць",second:"секунда",selectedDateDescription:e=>`Вибрана дата: ${e.date}`,selectedRangeDescription:e=>`Вибраний діапазон: ${e.startDate} — ${e.endDate}`,selectedTimeDescription:e=>`Вибраний час: ${e.time}`,startDate:"Дата початку",timeZoneName:"часовий пояс",weekday:"день тижня",year:"рік"};var u$={};u$={calendar:"日历",day:"日",dayPeriod:"上午/下午",endDate:"结束日期",era:"纪元",hour:"小时",minute:"分钟",month:"月",second:"秒",selectedDateDescription:e=>`选定的日期：${e.date}`,selectedRangeDescription:e=>`选定的范围：${e.startDate} 至 ${e.endDate}`,selectedTimeDescription:e=>`选定的时间：${e.time}`,startDate:"开始日期",timeZoneName:"时区",weekday:"工作日",year:"年"};var d$={};d$={calendar:"日曆",day:"日",dayPeriod:"上午/下午",endDate:"結束日期",era:"纪元",hour:"小时",minute:"分钟",month:"月",second:"秒",selectedDateDescription:e=>`選定的日期：${e.date}`,selectedRangeDescription:e=>`選定的範圍：${e.startDate} 至 ${e.endDate}`,selectedTimeDescription:e=>`選定的時間：${e.time}`,startDate:"開始日期",timeZoneName:"时区",weekday:"工作日",year:"年"};var l2={};l2={"ar-AE":RL,"bg-BG":IL,"cs-CZ":zL,"da-DK":LL,"de-DE":$L,"el-GR":BL,"en-US":NL,"es-ES":jL,"et-EE":OL,"fi-FI":FL,"fr-FR":VL,"he-IL":UL,"hr-HR":GL,"hu-HU":HL,"it-IT":qL,"ja-JP":WL,"ko-KR":KL,"lt-LT":ZL,"lv-LV":XL,"nb-NO":YL,"nl-NL":JL,"pl-PL":QL,"pt-BR":e$,"pt-PT":t$,"ro-RO":r$,"ru-RU":n$,"sk-SK":a$,"sl-SI":i$,"sr-SP":s$,"sv-SE":o$,"tr-TR":l$,"uk-UA":c$,"zh-CN":u$,"zh-TW":d$};function h$(e,t,i){let{direction:c}=Ms(),h=V.useMemo(()=>A5(t),[t]),_=A=>{if(A.currentTarget.contains(A.target)&&(A.altKey&&(A.key==="ArrowDown"||A.key==="ArrowUp")&&"setOpen"in e&&(A.preventDefault(),A.stopPropagation(),e.setOpen(!0)),!i))switch(A.key){case"ArrowLeft":if(A.preventDefault(),A.stopPropagation(),c==="rtl"){if(t.current){let B=A.target,N=w6(t.current,B.getBoundingClientRect().left,-1);N&&N.focus()}}else h.focusPrevious();break;case"ArrowRight":if(A.preventDefault(),A.stopPropagation(),c==="rtl"){if(t.current){let B=A.target,N=w6(t.current,B.getBoundingClientRect().left,1);N&&N.focus()}}else h.focusNext();break}},w=()=>{var A;if(!t.current)return;let B=(A=window.event)===null||A===void 0?void 0:A.target,N=Ho(t.current,{tabbable:!0});if(B&&(N.currentNode=B,B=N.previousNode()),!B){let F;do F=N.lastChild(),F&&(B=F);while(F)}for(;B!=null&&B.hasAttribute("data-placeholder");){let F=N.previousNode();if(F&&F.hasAttribute("data-placeholder"))B=F;else break}B&&B.focus()},{pressProps:a}=wu({preventFocusOnPress:!0,allowTextSelectionOnPress:!0,onPressStart(A){A.pointerType==="mouse"&&w()},onPress(A){A.pointerType!=="mouse"&&w()}});return xr(a,{onKeyDown:_})}function w6(e,t,i){let c=Ho(e,{tabbable:!0}),h=c.nextNode(),_=null,w=1/0;for(;h;){let A=h.getBoundingClientRect().left-t,B=Math.abs(A);Math.sign(A)===i&&B<w&&(_=h,w=B),h=c.nextNode()}return _}function hee(e){return e&&e.__esModule?e.default:e}const f$=new WeakMap,q1="__role_"+Date.now(),fee="__focusManager_"+Date.now();function p$(e,t,i){var c;let{isInvalid:h,validationErrors:_,validationDetails:w}=t.displayValidation,{labelProps:a,fieldProps:A,descriptionProps:B,errorMessageProps:N}=a2({...e,labelElementType:"span",isInvalid:h,errorMessage:e.errorMessage||_}),F=V.useRef(null),{focusWithinProps:G}=yd({...e,onFocusWithin(se){var ue;F.current=t.value,(ue=e.onFocus)===null||ue===void 0||ue.call(e,se)},onBlurWithin:se=>{var ue;t.confirmPlaceholder(),t.value!==F.current&&t.commitValidation(),(ue=e.onBlur)===null||ue===void 0||ue.call(e,se)},onFocusWithinChange:e.onFocusChange}),Q=Eu(hee(l2),"@react-aria/datepicker"),te=t.maxGranularity==="hour"?"selectedTimeDescription":"selectedDateDescription",Y=t.maxGranularity==="hour"?"time":"date",oe=t.value?Q.format(te,{[Y]:t.formatValue({month:"long"})}):"",de=Gw(oe),me=e[q1]==="presentation"?A["aria-describedby"]:[de["aria-describedby"],A["aria-describedby"]].filter(Boolean).join(" ")||void 0,be=e[fee],pe=V.useMemo(()=>be||A5(i),[be,i]),Se=h$(t,i,e[q1]==="presentation");f$.set(t,{ariaLabel:e["aria-label"],ariaLabelledBy:[a.id,e["aria-labelledby"]].filter(Boolean).join(" ")||void 0,ariaDescribedBy:me,focusManager:pe});let $e=V.useRef(e.autoFocus),Le;e[q1]==="presentation"?Le={role:"presentation"}:Le=xr(A,{role:"group","aria-disabled":e.isDisabled||void 0,"aria-describedby":me}),V.useEffect(()=>{$e.current&&pe.focusFirst(),$e.current=!1},[pe]),D_(e.inputRef,t.value,t.setValue),L_({...e,focus(){pe.focusFirst()}},t,e.inputRef);let re={type:"hidden",name:e.name,value:((c=t.value)===null||c===void 0?void 0:c.toString())||"",disabled:e.isDisabled};e.validationBehavior==="native"&&(re.type="text",re.hidden=!0,re.required=e.isRequired,re.onChange=()=>{});let Ee=Fl(e);return{labelProps:{...a,onClick:()=>{pe.focusFirst()}},fieldProps:xr(Ee,Le,Se,G,{onKeyDown(se){e.onKeyDown&&e.onKeyDown(se)},onKeyUp(se){e.onKeyUp&&e.onKeyUp(se)},style:{unicodeBidi:"isolate"}}),inputProps:re,descriptionProps:B,errorMessageProps:N,isInvalid:h,validationErrors:_,validationDetails:w}}function pee(e,t,i){var c;let h=p$(e,t,i);return h.inputProps.value=((c=t.timeValue)===null||c===void 0?void 0:c.toString())||"",h}function mee(e){return e&&e.__esModule?e.default:e}function gee(e,t,i){let c=Bs(),h=Bs(),_=Bs(),w=Eu(mee(l2),"@react-aria/datepicker"),{isInvalid:a,validationErrors:A,validationDetails:B}=t.displayValidation,{labelProps:N,fieldProps:F,descriptionProps:G,errorMessageProps:Q}=a2({...e,labelElementType:"span",isInvalid:a,errorMessage:e.errorMessage||A}),te=h$(t,i),Y=F["aria-labelledby"]||F.id,{locale:oe}=Ms(),de=t.formatValue(oe,{month:"long"}),me=de?w.format("selectedDateDescription",{date:de}):"",be=Gw(me),pe=[be["aria-describedby"],F["aria-describedby"]].filter(Boolean).join(" ")||void 0,Se=Fl(e),$e=V.useMemo(()=>A5(i),[i]),Le=V.useRef(!1),{focusWithinProps:re}=yd({...e,isDisabled:t.isOpen,onBlurWithin:Ee=>{let se=document.getElementById(h);if(!(se!=null&&se.contains(Ee.relatedTarget))){var ue,ke;Le.current=!1,(ue=e.onBlur)===null||ue===void 0||ue.call(e,Ee),(ke=e.onFocusChange)===null||ke===void 0||ke.call(e,!1)}},onFocusWithin:Ee=>{if(!Le.current){var se,ue;Le.current=!0,(se=e.onFocus)===null||se===void 0||se.call(e,Ee),(ue=e.onFocusChange)===null||ue===void 0||ue.call(e,!0)}}});return{groupProps:xr(Se,te,F,be,re,{role:"group","aria-disabled":e.isDisabled||null,"aria-labelledby":Y,"aria-describedby":pe,onKeyDown(Ee){t.isOpen||e.onKeyDown&&e.onKeyDown(Ee)},onKeyUp(Ee){t.isOpen||e.onKeyUp&&e.onKeyUp(Ee)}}),labelProps:{...N,onClick:()=>{$e.focusFirst()}},fieldProps:{...F,id:_,[q1]:"presentation","aria-describedby":pe,value:t.value,onChange:t.setValue,placeholderValue:e.placeholderValue,hideTimeZone:e.hideTimeZone,hourCycle:e.hourCycle,shouldForceLeadingZeros:e.shouldForceLeadingZeros,granularity:e.granularity,isDisabled:e.isDisabled,isReadOnly:e.isReadOnly,isRequired:e.isRequired,validationBehavior:e.validationBehavior,[ax]:t,autoFocus:e.autoFocus,name:e.name},descriptionProps:G,errorMessageProps:Q,buttonProps:{...be,id:c,"aria-haspopup":"dialog","aria-label":w.format("calendar"),"aria-labelledby":`${c} ${Y}`,"aria-describedby":pe,"aria-expanded":t.isOpen,isDisabled:e.isDisabled||e.isReadOnly,onPress:()=>t.setOpen(!0)},dialogProps:{id:h,"aria-labelledby":`${c} ${Y}`},calendarProps:{autoFocus:!0,value:t.dateValue,onChange:t.setDateValue,minValue:e.minValue,maxValue:e.maxValue,isDisabled:e.isDisabled,isReadOnly:e.isReadOnly,isDateUnavailable:e.isDateUnavailable,defaultFocusedValue:t.dateValue?void 0:e.placeholderValue,isInvalid:t.isInvalid,errorMessage:typeof e.errorMessage=="function"?e.errorMessage(t.displayValidation):e.errorMessage||t.displayValidation.validationErrors.join(" ")},isInvalid:a,validationErrors:A,validationDetails:B}}function yee(e){return e&&e.__esModule?e.default:e}function xee(){let{locale:e}=Ms(),t=ak(yee(l2),"@react-aria/datepicker");return V.useMemo(()=>{try{return new Intl.DisplayNames(e,{type:"dateTimeField"})}catch{return new vee(e,t)}},[e,t])}class vee{of(t){return this.dictionary.getStringForLocale(t,this.locale)}constructor(t,i){this.locale=t,this.dictionary=i}}var m$={};m$={Empty:"فارغ"};var g$={};g$={Empty:"Изпразни"};var y$={};y$={Empty:"Prázdné"};var x$={};x$={Empty:"Tom"};var v$={};v$={Empty:"Leer"};var _$={};_$={Empty:"Άδειο"};var b$={};b$={Empty:"Empty"};var w$={};w$={Empty:"Vacío"};var S$={};S$={Empty:"Tühjenda"};var T$={};T$={Empty:"Tyhjä"};var E$={};E$={Empty:"Vide"};var C$={};C$={Empty:"ריק"};var D$={};D$={Empty:"Prazno"};var P$={};P$={Empty:"Üres"};var M$={};M$={Empty:"Vuoto"};var A$={};A$={Empty:"空"};var k$={};k$={Empty:"비어 있음"};var R$={};R$={Empty:"Tuščias"};var I$={};I$={Empty:"Tukšs"};var z$={};z$={Empty:"Tom"};var L$={};L$={Empty:"Leeg"};var $$={};$$={Empty:"Pusty"};var B$={};B$={Empty:"Vazio"};var N$={};N$={Empty:"Vazio"};var j$={};j$={Empty:"Gol"};var O$={};O$={Empty:"Не заполнено"};var F$={};F$={Empty:"Prázdne"};var V$={};V$={Empty:"Prazen"};var U$={};U$={Empty:"Prazno"};var G$={};G$={Empty:"Tomt"};var H$={};H$={Empty:"Boş"};var q$={};q$={Empty:"Пусто"};var W$={};W$={Empty:"空"};var K$={};K$={Empty:"空白"};var Z$={};Z$={"ar-AE":m$,"bg-BG":g$,"cs-CZ":y$,"da-DK":x$,"de-DE":v$,"el-GR":_$,"en-US":b$,"es-ES":w$,"et-EE":S$,"fi-FI":T$,"fr-FR":E$,"he-IL":C$,"hr-HR":D$,"hu-HU":P$,"it-IT":M$,"ja-JP":A$,"ko-KR":k$,"lt-LT":R$,"lv-LV":I$,"nb-NO":z$,"nl-NL":L$,"pl-PL":$$,"pt-BR":B$,"pt-PT":N$,"ro-RO":j$,"ru-RU":O$,"sk-SK":F$,"sl-SI":V$,"sr-SP":U$,"sv-SE":G$,"tr-TR":H$,"uk-UA":q$,"zh-CN":W$,"zh-TW":K$};const _ee=typeof document<"u"?rn.useLayoutEffect:()=>{};function S6(e){const t=V.useRef(null);return _ee(()=>{t.current=e},[e]),V.useCallback((...i)=>{const c=t.current;return c==null?void 0:c(...i)},[])}function bee(){let e=V.useRef(new Map),t=V.useCallback((h,_,w,a)=>{let A=a!=null&&a.once?(...B)=>{e.current.delete(w),w(...B)}:w;e.current.set(w,{type:_,eventTarget:h,fn:A,options:a}),h.addEventListener(_,A,a)},[]),i=V.useCallback((h,_,w,a)=>{var A;let B=((A=e.current.get(w))===null||A===void 0?void 0:A.fn)||w;h.removeEventListener(_,B,a),e.current.delete(w)},[]),c=V.useCallback(()=>{e.current.forEach((h,_)=>{i(h.eventTarget,h.type,_,h.options)})},[i]);return V.useEffect(()=>c,[c]),{addGlobalListener:t,removeGlobalListener:i,removeAllGlobalListeners:c}}const wee=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),See=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function Tee(e){if(Intl.Locale){let i=new Intl.Locale(e).maximize(),c=typeof i.getTextInfo=="function"?i.getTextInfo():i.textInfo;if(c)return c.direction==="rtl";if(i.script)return wee.has(i.script)}let t=e.split("-")[0];return See.has(t)}const Eee=Symbol.for("react-aria.i18n.locale");function X$(){let e=typeof window<"u"&&window[Eee]||typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:Tee(e)?"rtl":"ltr"}}let JS=X$(),Gv=new Set;function T6(){JS=X$();for(let e of Gv)e(JS)}function Cee(){let e=o0(),[t,i]=V.useState(JS);return V.useEffect(()=>(Gv.size===0&&window.addEventListener("languagechange",T6),Gv.add(i),()=>{Gv.delete(i),Gv.size===0&&window.removeEventListener("languagechange",T6)}),[]),e?{locale:"en-US",direction:"ltr"}:t}const Dee=rn.createContext(null);function Pee(){let e=Cee();return V.useContext(Dee)||e}const E6=new WeakMap;function Mee(e){let t=E6.get(e);return t||(t=new Of(e),E6.set(e,t)),t}function Aee(e,t){return t&&Of.getGlobalDictionaryForPackage(t)||Mee(e)}function kee(e,t){let{locale:i}=Pee(),c=Aee(e,t);return V.useMemo(()=>new m5(i,c),[i,c])}function Ree(e){return e&&e.__esModule?e.default:e}function Y$(e){const t=V.useRef(void 0);let{value:i,textValue:c,minValue:h,maxValue:_,isDisabled:w,isReadOnly:a,isRequired:A,onIncrement:B,onIncrementPage:N,onDecrement:F,onDecrementPage:G,onDecrementToMin:Q,onIncrementToMax:te}=e;const Y=kee(Ree(Z$),"@react-aria/spinbutton"),oe=()=>clearTimeout(t.current);V.useEffect(()=>()=>oe(),[]);let de=ue=>{if(!(ue.ctrlKey||ue.metaKey||ue.shiftKey||ue.altKey||a))switch(ue.key){case"PageUp":if(N){ue.preventDefault(),N==null||N();break}case"ArrowUp":case"Up":B&&(ue.preventDefault(),B==null||B());break;case"PageDown":if(G){ue.preventDefault(),G==null||G();break}case"ArrowDown":case"Down":F&&(ue.preventDefault(),F==null||F());break;case"Home":Q&&(ue.preventDefault(),Q==null||Q());break;case"End":te&&(ue.preventDefault(),te==null||te());break}},me=V.useRef(!1),be=()=>{me.current=!0},pe=()=>{me.current=!1},Se=c===""?Y.format("Empty"):(c||`${i}`).replace("-","−");V.useEffect(()=>{me.current&&($Q("assertive"),WS(Se,"assertive"))},[Se]);const $e=S6(ue=>{oe(),B==null||B(),t.current=window.setTimeout(()=>{(_===void 0||isNaN(_)||i===void 0||isNaN(i)||i<_)&&$e(60)},ue)}),Le=S6(ue=>{oe(),F==null||F(),t.current=window.setTimeout(()=>{(h===void 0||isNaN(h)||i===void 0||isNaN(i)||i>h)&&Le(60)},ue)});let re=ue=>{ue.preventDefault()},{addGlobalListener:Ee,removeAllGlobalListeners:se}=bee();return{spinButtonProps:{role:"spinbutton","aria-valuenow":i!==void 0&&!isNaN(i)?i:void 0,"aria-valuetext":Se,"aria-valuemin":h,"aria-valuemax":_,"aria-disabled":w||void 0,"aria-readonly":a||void 0,"aria-required":A||void 0,onKeyDown:de,onFocus:be,onBlur:pe},incrementButtonProps:{onPressStart:()=>{$e(400),Ee(window,"contextmenu",re)},onPressEnd:()=>{oe(),se()},onFocus:be,onBlur:pe},decrementButtonProps:{onPressStart:()=>{Le(400),Ee(window,"contextmenu",re)},onPressEnd:()=>{oe(),se()},onFocus:be,onBlur:pe}}}function Iee(e,t,i){let c=V.useRef(""),{locale:h,direction:_}=Ms(),w=xee(),{ariaLabel:a,ariaLabelledBy:A,ariaDescribedBy:B,focusManager:N}=f$.get(t),F=e.isPlaceholder?"":e.text,G=V.useMemo(()=>t.dateFormatter.resolvedOptions(),[t.dateFormatter]),Q=ml({month:"long",timeZone:G.timeZone}),te=ml({hour:"numeric",hour12:G.hour12,timeZone:G.timeZone});if(e.type==="month"&&!e.isPlaceholder){let Ce=Q.format(t.dateValue);F=Ce!==F?`${F} – ${Ce}`:Ce}else e.type==="hour"&&!e.isPlaceholder&&(F=te.format(t.dateValue));let{spinButtonProps:Y}=Y$({value:e.value,textValue:F,minValue:e.minValue,maxValue:e.maxValue,isDisabled:t.isDisabled,isReadOnly:t.isReadOnly||!e.isEditable,isRequired:t.isRequired,onIncrement:()=>{c.current="",t.increment(e.type)},onDecrement:()=>{c.current="",t.decrement(e.type)},onIncrementPage:()=>{c.current="",t.incrementPage(e.type)},onDecrementPage:()=>{c.current="",t.decrementPage(e.type)},onIncrementToMax:()=>{c.current="",e.maxValue!==void 0&&t.setSegment(e.type,e.maxValue)},onDecrementToMin:()=>{c.current="",e.minValue!==void 0&&t.setSegment(e.type,e.minValue)}}),oe=V.useMemo(()=>new D5(h,{maximumFractionDigits:0}),[h]),de=()=>{if(e.text===e.placeholder&&N.focusPrevious(),oe.isValidPartialNumber(e.text)&&!t.isReadOnly&&!e.isPlaceholder){let Ce=e.text.slice(0,-1),He=oe.parse(Ce);Ce=He===0?"":Ce,Ce.length===0||He===0?t.clearSegment(e.type):t.setSegment(e.type,He),c.current=Ce}else e.type==="dayPeriod"&&t.clearSegment(e.type)},me=Ce=>{if(Ce.key==="a"&&(bm()?Ce.metaKey:Ce.ctrlKey)&&Ce.preventDefault(),!(Ce.ctrlKey||Ce.metaKey||Ce.shiftKey||Ce.altKey))switch(Ce.key){case"Backspace":case"Delete":Ce.preventDefault(),Ce.stopPropagation(),de();break}},{startsWith:be}=oG({sensitivity:"base"}),pe=ml({hour:"numeric",hour12:!0}),Se=V.useMemo(()=>{let Ce=new Date;return Ce.setHours(0),pe.formatToParts(Ce).find(He=>He.type==="dayPeriod").value},[pe]),$e=V.useMemo(()=>{let Ce=new Date;return Ce.setHours(12),pe.formatToParts(Ce).find(He=>He.type==="dayPeriod").value},[pe]),Le=ml({year:"numeric",era:"narrow",timeZone:"UTC"}),re=V.useMemo(()=>{if(e.type!=="era")return[];let Ce=Gi(new Di(1,1,1),t.calendar),He=t.calendar.getEras().map(Ke=>{let ot=Ce.set({year:1,month:1,day:1,era:Ke}).toDate("UTC"),Et=Le.formatToParts(ot).find(Wt=>Wt.type==="era").value;return{era:Ke,formatted:Et}}),et=zee(He.map(Ke=>Ke.formatted));if(et)for(let Ke of He)Ke.formatted=Ke.formatted.slice(et);return He},[Le,t.calendar,e.type]),Ee=Ce=>{if(t.isDisabled||t.isReadOnly)return;let He=c.current+Ce;switch(e.type){case"dayPeriod":if(be(Se,Ce))t.setSegment("dayPeriod",0);else if(be($e,Ce))t.setSegment("dayPeriod",12);else break;N.focusNext();break;case"era":{let et=re.find(Ke=>be(Ke.formatted,Ce));et&&(t.setSegment("era",et.era),N.focusNext());break}case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!oe.isValidPartialNumber(He))return;let et=oe.parse(He),Ke=et,ot=e.minValue===0;if(e.type==="hour"&&t.dateFormatter.resolvedOptions().hour12){switch(t.dateFormatter.resolvedOptions().hourCycle){case"h11":et>11&&(Ke=oe.parse(Ce));break;case"h12":ot=!1,et>12&&(Ke=oe.parse(Ce));break}e.value!==void 0&&e.value>=12&&et>1&&(et+=12)}else e.maxValue!==void 0&&et>e.maxValue&&(Ke=oe.parse(Ce));if(isNaN(et))return;let Pt=Ke!==0||ot;Pt&&t.setSegment(e.type,Ke),e.maxValue!==void 0&&(+(et+"0")>e.maxValue||He.length>=String(e.maxValue).length)?(c.current="",Pt&&N.focusNext()):c.current=He;break}}},se=()=>{c.current="",i.current&&lw(i.current,{containingElement:Uw(i.current)});let Ce=window.getSelection();Ce==null||Ce.collapse(i.current)},ue=V.useRef(typeof document<"u"?document:null);gm(ue,"selectionchange",()=>{var Ce;let He=window.getSelection();He!=null&&He.anchorNode&&(!((Ce=i.current)===null||Ce===void 0)&&Ce.contains(He==null?void 0:He.anchorNode))&&He.collapse(i.current)});let ke=V.useRef("");gm(i,"beforeinput",Ce=>{if(i.current)switch(Ce.preventDefault(),Ce.inputType){case"deleteContentBackward":case"deleteContentForward":oe.isValidPartialNumber(e.text)&&!t.isReadOnly&&de();break;case"insertCompositionText":ke.current=i.current.textContent,i.current.textContent=i.current.textContent;break;default:Ce.data!=null&&Ee(Ce.data);break}}),gm(i,"input",Ce=>{let{inputType:He,data:et}=Ce;switch(He){case"insertCompositionText":i.current&&(i.current.textContent=ke.current),et!=null&&(be(Se,et)||be($e,et))&&Ee(et);break}}),si(()=>{let Ce=i.current;return()=>{document.activeElement===Ce&&(N.focusPrevious()||N.focusNext())}},[i,N]);let ce=Mm()||e.type==="timeZoneName"?{role:"textbox","aria-valuemax":null,"aria-valuemin":null,"aria-valuetext":null,"aria-valuenow":null}:{},Pe=V.useMemo(()=>t.segments.find(Ce=>Ce.isEditable),[t.segments]);e!==Pe&&!t.isInvalid&&(B=void 0);let xe=Bs(),Te=!t.isDisabled&&!t.isReadOnly&&e.isEditable,Ie=e.type==="literal"?"":w.of(e.type),Me=C_({"aria-label":`${Ie}${a?`, ${a}`:""}${A?", ":""}`,"aria-labelledby":A});if(e.type==="literal")return{segmentProps:{"aria-hidden":!0}};let Xe={caretColor:"transparent"};if(_==="rtl"){Xe.unicodeBidi="embed";let Ce=G[e.type];(Ce==="numeric"||Ce==="2-digit")&&(Xe.direction="ltr")}return{segmentProps:xr(Y,Me,{id:xe,...ce,"aria-invalid":t.isInvalid?"true":void 0,"aria-describedby":B,"aria-readonly":t.isReadOnly||!e.isEditable?"true":void 0,"data-placeholder":e.isPlaceholder||void 0,contentEditable:Te,suppressContentEditableWarning:Te,spellCheck:Te?"false":void 0,autoCorrect:Te?"off":void 0,[parseInt(rn.version,10)>=17?"enterKeyHint":"enterkeyhint"]:Te?"next":void 0,inputMode:t.isDisabled||e.type==="dayPeriod"||e.type==="era"||!Te?void 0:"numeric",tabIndex:t.isDisabled?void 0:0,onKeyDown:me,onFocus:se,style:Xe,onPointerDown(Ce){Ce.stopPropagation()},onMouseDown(Ce){Ce.stopPropagation()}})}}function zee(e){e.sort();let t=e[0],i=e[e.length-1];for(let c=0;c<t.length;c++)if(t[c]!==i[c])return c;return 0}var Lee=({state:e,segment:t,slots:i,classNames:c,...h})=>{const _=V.useRef(null);let{segmentProps:w}=Iee(t,e,_);return b.jsx("div",{...xr(w,h),ref:_,className:i.segment({class:c==null?void 0:c.segment}),"data-editable":Vt(t.isEditable),"data-invalid":Vt(e.isInvalid),"data-placeholder":Vt(t.isPlaceholder),"data-slot":"segment","data-type":t.type,style:{...w.style},children:t.text})},RT=V.forwardRef((e,t)=>{const{as:i,state:c,slots:h,inputProps:_,classNames:w,...a}=e,A=i||"div";return b.jsxs(A,{...a,ref:t,children:[c.segments.map((B,N)=>b.jsx(Lee,{classNames:w,segment:B,slots:h,state:c},N)),b.jsx("input",{..._})]})});RT.displayName="HeroUI.DateInputField";var IT=Na((e,t)=>{const{as:i,label:c,children:h,description:_,startContent:w,endContent:a,errorMessage:A,shouldLabelBeOutside:B,isInvalid:N,groupProps:F,labelProps:G,wrapperProps:Q,helperWrapperProps:te,errorMessageProps:Y,descriptionProps:oe,validationErrors:de,validationDetails:me,...be}=e,pe=i||"div",Se=c?b.jsx("span",{...G,children:c}):null,$e=typeof A=="function"?A({isInvalid:N,validationErrors:de,validationDetails:me}):A||(de==null?void 0:de.join(" ")),Le=!!_||!!$e,re=V.useMemo(()=>Le?b.jsx("div",{...te,children:N&&$e?b.jsx("div",{...Y,children:$e}):_?b.jsx("div",{...oe,children:_}):null}):null,[Le,$e,_,te,Y,oe]);return b.jsxs(pe,{...be,ref:t,"data-has-helper":Vt(Le),children:[B?Se:null,b.jsxs("div",{...F,children:[B?null:Se,b.jsxs("div",{...Q,children:[w,h,a]}),B?re:null]}),B?null:re]})});IT.displayName="HeroUI.DateInputGroup";var J$={};J$={rangeOverflow:e=>`يجب أن تكون القيمة ${e.maxValue} أو قبل ذلك.`,rangeReversed:"تاريخ البدء يجب أن يكون قبل تاريخ الانتهاء.",rangeUnderflow:e=>`يجب أن تكون القيمة ${e.minValue} أو بعد ذلك.`,unavailableDate:"البيانات المحددة غير متاحة."};var Q$={};Q$={rangeOverflow:e=>`Стойността трябва да е ${e.maxValue} или по-ранна.`,rangeReversed:"Началната дата трябва да е преди крайната.",rangeUnderflow:e=>`Стойността трябва да е ${e.minValue} или по-късно.`,unavailableDate:"Избраната дата не е налична."};var eB={};eB={rangeOverflow:e=>`Hodnota musí být ${e.maxValue} nebo dřívější.`,rangeReversed:"Datum zahájení musí předcházet datu ukončení.",rangeUnderflow:e=>`Hodnota musí být ${e.minValue} nebo pozdější.`,unavailableDate:"Vybrané datum není k dispozici."};var tB={};tB={rangeOverflow:e=>`Værdien skal være ${e.maxValue} eller tidligere.`,rangeReversed:"Startdatoen skal være før slutdatoen.",rangeUnderflow:e=>`Værdien skal være ${e.minValue} eller nyere.`,unavailableDate:"Den valgte dato er ikke tilgængelig."};var rB={};rB={rangeOverflow:e=>`Der Wert muss ${e.maxValue} oder früher sein.`,rangeReversed:"Das Anfangsdatum muss vor dem Enddatum liegen.",rangeUnderflow:e=>`Der Wert muss ${e.minValue} oder später sein.`,unavailableDate:"Das ausgewählte Datum ist nicht verfügbar."};var nB={};nB={rangeOverflow:e=>`Η τιμή πρέπει να είναι ${e.maxValue} ή παλαιότερη.`,rangeReversed:"Η ημερομηνία έναρξης πρέπει να είναι πριν από την ημερομηνία λήξης.",rangeUnderflow:e=>`Η τιμή πρέπει να είναι ${e.minValue} ή μεταγενέστερη.`,unavailableDate:"Η επιλεγμένη ημερομηνία δεν είναι διαθέσιμη."};var aB={};aB={rangeUnderflow:e=>`Value must be ${e.minValue} or later.`,rangeOverflow:e=>`Value must be ${e.maxValue} or earlier.`,rangeReversed:"Start date must be before end date.",unavailableDate:"Selected date unavailable."};var iB={};iB={rangeOverflow:e=>`El valor debe ser ${e.maxValue} o anterior.`,rangeReversed:"La fecha de inicio debe ser anterior a la fecha de finalización.",rangeUnderflow:e=>`El valor debe ser ${e.minValue} o posterior.`,unavailableDate:"Fecha seleccionada no disponible."};var sB={};sB={rangeOverflow:e=>`Väärtus peab olema ${e.maxValue} või varasem.`,rangeReversed:"Alguskuupäev peab olema enne lõppkuupäeva.",rangeUnderflow:e=>`Väärtus peab olema ${e.minValue} või hilisem.`,unavailableDate:"Valitud kuupäev pole saadaval."};var oB={};oB={rangeOverflow:e=>`Arvon on oltava ${e.maxValue} tai sitä aikaisempi.`,rangeReversed:"Aloituspäivän on oltava ennen lopetuspäivää.",rangeUnderflow:e=>`Arvon on oltava ${e.minValue} tai sitä myöhäisempi.`,unavailableDate:"Valittu päivämäärä ei ole käytettävissä."};var lB={};lB={rangeOverflow:e=>`La valeur doit être ${e.maxValue} ou antérieure.`,rangeReversed:"La date de début doit être antérieure à la date de fin.",rangeUnderflow:e=>`La valeur doit être ${e.minValue} ou ultérieure.`,unavailableDate:"La date sélectionnée n’est pas disponible."};var cB={};cB={rangeOverflow:e=>`הערך חייב להיות ${e.maxValue} או מוקדם יותר.`,rangeReversed:"תאריך ההתחלה חייב להיות לפני תאריך הסיום.",rangeUnderflow:e=>`הערך חייב להיות ${e.minValue} או מאוחר יותר.`,unavailableDate:"התאריך הנבחר אינו זמין."};var uB={};uB={rangeOverflow:e=>`Vrijednost mora biti ${e.maxValue} ili ranije.`,rangeReversed:"Datum početka mora biti prije datuma završetka.",rangeUnderflow:e=>`Vrijednost mora biti ${e.minValue} ili kasnije.`,unavailableDate:"Odabrani datum nije dostupan."};var dB={};dB={rangeOverflow:e=>`Az értéknek ${e.maxValue} vagy korábbinak kell lennie.`,rangeReversed:"A kezdő dátumnak a befejező dátumnál korábbinak kell lennie.",rangeUnderflow:e=>`Az értéknek ${e.minValue} vagy későbbinek kell lennie.`,unavailableDate:"A kiválasztott dátum nem érhető el."};var hB={};hB={rangeOverflow:e=>`Il valore deve essere ${e.maxValue} o precedente.`,rangeReversed:"La data di inizio deve essere antecedente alla data di fine.",rangeUnderflow:e=>`Il valore deve essere ${e.minValue} o successivo.`,unavailableDate:"Data selezionata non disponibile."};var fB={};fB={rangeOverflow:e=>`値は ${e.maxValue} 以下にする必要があります。`,rangeReversed:"開始日は終了日より前にする必要があります。",rangeUnderflow:e=>`値は ${e.minValue} 以上にする必要があります。`,unavailableDate:"選択した日付は使用できません。"};var pB={};pB={rangeOverflow:e=>`값은 ${e.maxValue} 이전이어야 합니다.`,rangeReversed:"시작일은 종료일 이전이어야 합니다.",rangeUnderflow:e=>`값은 ${e.minValue} 이상이어야 합니다.`,unavailableDate:"선택한 날짜를 사용할 수 없습니다."};var mB={};mB={rangeOverflow:e=>`Reikšmė turi būti ${e.maxValue} arba ankstesnė.`,rangeReversed:"Pradžios data turi būti ankstesnė nei pabaigos data.",rangeUnderflow:e=>`Reikšmė turi būti ${e.minValue} arba naujesnė.`,unavailableDate:"Pasirinkta data nepasiekiama."};var gB={};gB={rangeOverflow:e=>`Vērtībai ir jābūt ${e.maxValue} vai agrākai.`,rangeReversed:"Sākuma datumam ir jābūt pirms beigu datuma.",rangeUnderflow:e=>`Vērtībai ir jābūt ${e.minValue} vai vēlākai.`,unavailableDate:"Atlasītais datums nav pieejams."};var yB={};yB={rangeOverflow:e=>`Verdien må være ${e.maxValue} eller tidligere.`,rangeReversed:"Startdatoen må være før sluttdatoen.",rangeUnderflow:e=>`Verdien må være ${e.minValue} eller senere.`,unavailableDate:"Valgt dato utilgjengelig."};var xB={};xB={rangeOverflow:e=>`Waarde moet ${e.maxValue} of eerder zijn.`,rangeReversed:"De startdatum moet voor de einddatum liggen.",rangeUnderflow:e=>`Waarde moet ${e.minValue} of later zijn.`,unavailableDate:"Geselecteerde datum niet beschikbaar."};var vB={};vB={rangeOverflow:e=>`Wartość musi mieć wartość ${e.maxValue} lub wcześniejszą.`,rangeReversed:"Data rozpoczęcia musi być wcześniejsza niż data zakończenia.",rangeUnderflow:e=>`Wartość musi mieć wartość ${e.minValue} lub późniejszą.`,unavailableDate:"Wybrana data jest niedostępna."};var _B={};_B={rangeOverflow:e=>`O valor deve ser ${e.maxValue} ou anterior.`,rangeReversed:"A data inicial deve ser anterior à data final.",rangeUnderflow:e=>`O valor deve ser ${e.minValue} ou posterior.`,unavailableDate:"Data selecionada indisponível."};var bB={};bB={rangeOverflow:e=>`O valor tem de ser ${e.maxValue} ou anterior.`,rangeReversed:"A data de início deve ser anterior à data de fim.",rangeUnderflow:e=>`O valor tem de ser ${e.minValue} ou posterior.`,unavailableDate:"Data selecionada indisponível."};var wB={};wB={rangeOverflow:e=>`Valoarea trebuie să fie ${e.maxValue} sau anterioară.`,rangeReversed:"Data de început trebuie să fie anterioară datei de sfârșit.",rangeUnderflow:e=>`Valoarea trebuie să fie ${e.minValue} sau ulterioară.`,unavailableDate:"Data selectată nu este disponibilă."};var SB={};SB={rangeOverflow:e=>`Значение должно быть не позже ${e.maxValue}.`,rangeReversed:"Дата начала должна предшествовать дате окончания.",rangeUnderflow:e=>`Значение должно быть не раньше ${e.minValue}.`,unavailableDate:"Выбранная дата недоступна."};var TB={};TB={rangeOverflow:e=>`Hodnota musí byť ${e.maxValue} alebo skoršia.`,rangeReversed:"Dátum začiatku musí byť skorší ako dátum konca.",rangeUnderflow:e=>`Hodnota musí byť ${e.minValue} alebo neskoršia.`,unavailableDate:"Vybratý dátum je nedostupný."};var EB={};EB={rangeOverflow:e=>`Vrednost mora biti ${e.maxValue} ali starejša.`,rangeReversed:"Začetni datum mora biti pred končnim datumom.",rangeUnderflow:e=>`Vrednost mora biti ${e.minValue} ali novejša.`,unavailableDate:"Izbrani datum ni na voljo."};var CB={};CB={rangeOverflow:e=>`Vrednost mora da bude ${e.maxValue} ili starija.`,rangeReversed:"Datum početka mora biti pre datuma završetka.",rangeUnderflow:e=>`Vrednost mora da bude ${e.minValue} ili novija.`,unavailableDate:"Izabrani datum nije dostupan."};var DB={};DB={rangeOverflow:e=>`Värdet måste vara ${e.maxValue} eller tidigare.`,rangeReversed:"Startdatumet måste vara före slutdatumet.",rangeUnderflow:e=>`Värdet måste vara ${e.minValue} eller senare.`,unavailableDate:"Det valda datumet är inte tillgängligt."};var PB={};PB={rangeOverflow:e=>`Değer, ${e.maxValue} veya öncesi olmalıdır.`,rangeReversed:"Başlangıç tarihi bitiş tarihinden önce olmalıdır.",rangeUnderflow:e=>`Değer, ${e.minValue} veya sonrası olmalıdır.`,unavailableDate:"Seçilen tarih kullanılamıyor."};var MB={};MB={rangeOverflow:e=>`Значення має бути не пізніше ${e.maxValue}.`,rangeReversed:"Дата початку має передувати даті завершення.",rangeUnderflow:e=>`Значення має бути не раніше ${e.minValue}.`,unavailableDate:"Вибрана дата недоступна."};var AB={};AB={rangeOverflow:e=>`值必须是 ${e.maxValue} 或更早日期。`,rangeReversed:"开始日期必须早于结束日期。",rangeUnderflow:e=>`值必须是 ${e.minValue} 或更晚日期。`,unavailableDate:"所选日期不可用。"};var kB={};kB={rangeOverflow:e=>`值必須是 ${e.maxValue} 或更早。`,rangeReversed:"開始日期必須在結束日期之前。",rangeUnderflow:e=>`值必須是 ${e.minValue} 或更晚。`,unavailableDate:"所選日期無法使用。"};var RB={};RB={"ar-AE":J$,"bg-BG":Q$,"cs-CZ":eB,"da-DK":tB,"de-DE":rB,"el-GR":nB,"en-US":aB,"es-ES":iB,"et-EE":sB,"fi-FI":oB,"fr-FR":lB,"he-IL":cB,"hr-HR":uB,"hu-HU":dB,"it-IT":hB,"ja-JP":fB,"ko-KR":pB,"lt-LT":mB,"lv-LV":gB,"nb-NO":yB,"nl-NL":xB,"pl-PL":vB,"pt-BR":_B,"pt-PT":bB,"ro-RO":wB,"ru-RU":SB,"sk-SK":TB,"sl-SI":EB,"sr-SP":CB,"sv-SE":DB,"tr-TR":PB,"uk-UA":MB,"zh-CN":AB,"zh-TW":kB};function $ee(e){return e&&e.__esModule?e.default:e}const Bee=new Of($ee(RB));function Nee(){return typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US"}function IB(e,t,i,c,h){let _=e!=null&&i!=null&&e.compare(i)>0,w=e!=null&&t!=null&&e.compare(t)<0,a=e!=null&&(c==null?void 0:c(e))||!1,A=_||w||a,B=[];if(A){let N=Nee(),F=Of.getGlobalDictionaryForPackage("@react-stately/datepicker")||Bee,G=new m5(N,F),Q=new gd(N,Wy({},h)),te=Q.resolvedOptions().timeZone;w&&t!=null&&B.push(G.format("rangeUnderflow",{minValue:Q.format(t.toDate(te))})),_&&i!=null&&B.push(G.format("rangeOverflow",{maxValue:Q.format(i.toDate(te))})),a&&B.push(G.format("unavailableDate"))}return{isInvalid:A,validationErrors:B,validationDetails:{badInput:a,customError:!1,patternMismatch:!1,rangeOverflow:_,rangeUnderflow:w,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!A}}}const jee={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit"},Oee={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};function Wy(e,t){e={...t.shouldForceLeadingZeros?Oee:jee,...e};let c=t.granularity||"minute",h=Object.keys(e);var _;let w=h.indexOf((_=t.maxGranularity)!==null&&_!==void 0?_:"year");w<0&&(w=0);let a=h.indexOf(c);if(a<0&&(a=2),w>a)throw new Error("maxGranularity must be greater than granularity");let A=h.slice(w,a+1).reduce((N,F)=>(N[F]=e[F],N),{});return t.hourCycle!=null&&(A.hour12=t.hourCycle===12),A.timeZone=t.timeZone||"UTC",(c==="hour"||c==="minute"||c==="second")&&t.timeZone&&!t.hideTimeZone&&(A.timeZoneName="short"),t.showEra&&w===0&&(A.era="short"),A}function C6(e){return e&&"hour"in e?e:new E_}function zB(e,t){if(e===null)return null;if(e)return Gi(e,t)}function kv(e,t,i,c){if(e)return zB(e,i);let h=Gi(ok(c??Ff()).set({hour:0,minute:0,second:0,millisecond:0}),i);return t==="year"||t==="month"||t==="day"?yh(h):c?h:Lf(h)}function LB(e,t){let i=e&&"timeZone"in e?e.timeZone:void 0,c=e&&"minute"in e?"minute":"day";if(e&&t&&!(t in e))throw new Error("Invalid granularity "+t+" for value "+e.toString());let[h,_]=V.useState([c,i]);e&&(h[0]!==c||h[1]!==i)&&_([c,i]),t||(t=e?c:h[0]);let w=e?i:h[1];return[t,w]}function Fee(e){let t=B_(e),[i,c]=Xs(e.value,e.defaultValue||null,e.onChange),h=i||e.placeholderValue||null,[_,w]=LB(h,e.granularity),a=i!=null?i.toDate(w??"UTC"):null,A=_==="hour"||_==="minute"||_==="second";var B;let N=(B=e.shouldCloseOnSelect)!==null&&B!==void 0?B:!0,[F,G]=V.useState(null),[Q,te]=V.useState(null);if(i&&(F=i,"hour"in i&&(Q=i)),h&&!(_ in h))throw new Error("Invalid granularity "+_+" for value "+h.toString());let Y=(i==null?void 0:i.calendar.identifier)==="gregory"&&i.era==="BC",oe=V.useMemo(()=>({granularity:_,timeZone:w,hideTimeZone:e.hideTimeZone,hourCycle:e.hourCycle,shouldForceLeadingZeros:e.shouldForceLeadingZeros,showEra:Y}),[_,e.hourCycle,e.shouldForceLeadingZeros,w,e.hideTimeZone,Y]),{minValue:de,maxValue:me,isDateUnavailable:be}=e,pe=V.useMemo(()=>IB(i,de,me,be,oe),[i,de,me,be,oe]),Se=Rm({...e,value:i,builtinValidation:pe}),$e=Se.displayValidation.isInvalid,Le=e.validationState||($e?"invalid":null),re=(ue,ke)=>{c("timeZone"in ke?ke.set(yh(ue)):Lf(ue,ke)),G(null),te(null),Se.commitValidation()};return{...Se,value:i,setValue:c,dateValue:F,timeValue:Q,setDateValue:ue=>{let ke=typeof N=="function"?N():N;A?Q||ke?re(ue,Q||C6(e.defaultValue||e.placeholderValue)):G(ue):(c(ue),Se.commitValidation()),ke&&t.setOpen(!1)},setTimeValue:ue=>{F&&ue?re(F,ue):te(ue)},granularity:_,hasTime:A,...t,setOpen(ue){!ue&&!i&&F&&A&&re(F,Q||C6(e.defaultValue||e.placeholderValue)),t.setOpen(ue)},validationState:Le,isInvalid:$e,formatValue(ue,ke){if(!a)return"";let ce=Wy(ke,oe);return new gd(ue,ce).format(a)},getDateFormatter(ue,ke){let ce={...oe,...ke},Pe=Wy({},ce);return new gd(ue,Pe)}}}const Vee=new Of({ach:{year:"mwaka",month:"dwe",day:"nino"},af:{year:"jjjj",month:"mm",day:"dd"},am:{year:"ዓዓዓዓ",month:"ሚሜ",day:"ቀቀ"},an:{year:"aaaa",month:"mm",day:"dd"},ar:{year:"سنة",month:"شهر",day:"يوم"},ast:{year:"aaaa",month:"mm",day:"dd"},az:{year:"iiii",month:"aa",day:"gg"},be:{year:"гггг",month:"мм",day:"дд"},bg:{year:"гггг",month:"мм",day:"дд"},bn:{year:"yyyy",month:"মিমি",day:"dd"},br:{year:"bbbb",month:"mm",day:"dd"},bs:{year:"gggg",month:"mm",day:"dd"},ca:{year:"aaaa",month:"mm",day:"dd"},cak:{year:"jjjj",month:"ii",day:"q'q'"},ckb:{year:"ساڵ",month:"مانگ",day:"ڕۆژ"},cs:{year:"rrrr",month:"mm",day:"dd"},cy:{year:"bbbb",month:"mm",day:"dd"},da:{year:"åååå",month:"mm",day:"dd"},de:{year:"jjjj",month:"mm",day:"tt"},dsb:{year:"llll",month:"mm",day:"źź"},el:{year:"εεεε",month:"μμ",day:"ηη"},en:{year:"yyyy",month:"mm",day:"dd"},eo:{year:"jjjj",month:"mm",day:"tt"},es:{year:"aaaa",month:"mm",day:"dd"},et:{year:"aaaa",month:"kk",day:"pp"},eu:{year:"uuuu",month:"hh",day:"ee"},fa:{year:"سال",month:"ماه",day:"روز"},ff:{year:"hhhh",month:"ll",day:"ññ"},fi:{year:"vvvv",month:"kk",day:"pp"},fr:{year:"aaaa",month:"mm",day:"jj"},fy:{year:"jjjj",month:"mm",day:"dd"},ga:{year:"bbbb",month:"mm",day:"ll"},gd:{year:"bbbb",month:"mm",day:"ll"},gl:{year:"aaaa",month:"mm",day:"dd"},he:{year:"שנה",month:"חודש",day:"יום"},hr:{year:"gggg",month:"mm",day:"dd"},hsb:{year:"llll",month:"mm",day:"dd"},hu:{year:"éééé",month:"hh",day:"nn"},ia:{year:"aaaa",month:"mm",day:"dd"},id:{year:"tttt",month:"bb",day:"hh"},it:{year:"aaaa",month:"mm",day:"gg"},ja:{year:"年",month:"月",day:"日"},ka:{year:"წწწწ",month:"თთ",day:"რრ"},kk:{year:"жжжж",month:"аа",day:"кк"},kn:{year:"ವವವವ",month:"ಮಿಮೀ",day:"ದಿದಿ"},ko:{year:"연도",month:"월",day:"일"},lb:{year:"jjjj",month:"mm",day:"dd"},lo:{year:"ປປປປ",month:"ດດ",day:"ວວ"},lt:{year:"mmmm",month:"mm",day:"dd"},lv:{year:"gggg",month:"mm",day:"dd"},meh:{year:"aaaa",month:"mm",day:"dd"},ml:{year:"വർഷം",month:"മാസം",day:"തീയതി"},ms:{year:"tttt",month:"mm",day:"hh"},nl:{year:"jjjj",month:"mm",day:"dd"},nn:{year:"åååå",month:"mm",day:"dd"},no:{year:"åååå",month:"mm",day:"dd"},oc:{year:"aaaa",month:"mm",day:"jj"},pl:{year:"rrrr",month:"mm",day:"dd"},pt:{year:"aaaa",month:"mm",day:"dd"},rm:{year:"oooo",month:"mm",day:"dd"},ro:{year:"aaaa",month:"ll",day:"zz"},ru:{year:"гггг",month:"мм",day:"дд"},sc:{year:"aaaa",month:"mm",day:"dd"},scn:{year:"aaaa",month:"mm",day:"jj"},sk:{year:"rrrr",month:"mm",day:"dd"},sl:{year:"llll",month:"mm",day:"dd"},sr:{year:"гггг",month:"мм",day:"дд"},sv:{year:"åååå",month:"mm",day:"dd"},szl:{year:"rrrr",month:"mm",day:"dd"},tg:{year:"сссс",month:"мм",day:"рр"},th:{year:"ปปปป",month:"ดด",day:"วว"},tr:{year:"yyyy",month:"aa",day:"gg"},uk:{year:"рррр",month:"мм",day:"дд"},"zh-CN":{year:"年",month:"月",day:"日"},"zh-TW":{year:"年",month:"月",day:"日"}},"en");function Uee(e,t,i){return e==="era"||e==="dayPeriod"?t:e==="year"||e==="month"||e==="day"?Vee.getStringForLocale(e,i):"––"}const W1={year:!0,month:!0,day:!0,hour:!0,minute:!0,second:!0,dayPeriod:!0,era:!0},D6={year:5,month:2,day:7,hour:2,minute:15,second:15},Gee={dayperiod:"dayPeriod"};function $B(e){let{locale:t,createCalendar:i,hideTimeZone:c,isDisabled:h=!1,isReadOnly:_=!1,isRequired:w=!1,minValue:a,maxValue:A,isDateUnavailable:B}=e,N=e.value||e.defaultValue||e.placeholderValue||null,[F,G]=LB(N,e.granularity),Q=G||"UTC";if(N&&!(F in N))throw new Error("Invalid granularity "+F+" for value "+N.toString());let te=V.useMemo(()=>new gd(t),[t]),Y=V.useMemo(()=>i(te.resolvedOptions().calendar),[i,te]);var oe;let[de,me]=Xs(e.value,(oe=e.defaultValue)!==null&&oe!==void 0?oe:null,e.onChange),be=V.useMemo(()=>{var Dt;return(Dt=zB(de,Y))!==null&&Dt!==void 0?Dt:null},[de,Y]),[pe,Se]=V.useState(()=>kv(e.placeholderValue,F,Y,G)),$e=be||pe,Le=Y.identifier==="gregory"&&$e.era==="BC",re=V.useMemo(()=>{var Dt;return{granularity:F,maxGranularity:(Dt=e.maxGranularity)!==null&&Dt!==void 0?Dt:"year",timeZone:G,hideTimeZone:c,hourCycle:e.hourCycle,showEra:Le,shouldForceLeadingZeros:e.shouldForceLeadingZeros}},[e.maxGranularity,F,e.hourCycle,e.shouldForceLeadingZeros,G,c,Le]),Ee=V.useMemo(()=>Wy({},re),[re]),se=V.useMemo(()=>new gd(t,Ee),[t,Ee]),ue=V.useMemo(()=>se.resolvedOptions(),[se]),ke=V.useMemo(()=>se.formatToParts(new Date).filter(Dt=>W1[Dt.type]).reduce((Dt,er)=>(Dt[er.type]=!0,Dt),{}),[se]),[ce,Pe]=V.useState(()=>e.value||e.defaultValue?{...ke}:{}),xe=V.useRef(null),Te=V.useRef(Y.identifier);V.useEffect(()=>{Y.identifier!==Te.current&&(Te.current=Y.identifier,Se(Dt=>Object.keys(ce).length>0?Gi(Dt,Y):kv(e.placeholderValue,F,Y,G)))},[Y,F,ce,G,e.placeholderValue]),de&&Object.keys(ce).length<Object.keys(ke).length&&(ce={...ke},Pe(ce)),de==null&&Object.keys(ce).length===Object.keys(ke).length&&(ce={},Pe(ce),Se(kv(e.placeholderValue,F,Y,G)));let Ie=be&&Object.keys(ce).length>=Object.keys(ke).length?be:pe,Me=Dt=>{if(e.isDisabled||e.isReadOnly)return;let er=Object.keys(ce),De=Object.keys(ke);Dt==null?(me(null),Se(kv(e.placeholderValue,F,Y,G)),Pe({})):er.length>=De.length||er.length===De.length-1&&ke.dayPeriod&&!ce.dayPeriod&&xe.current!=="dayPeriod"?(Dt=Gi(Dt,(N==null?void 0:N.calendar)||new Nl),me(Dt)):Se(Dt),xe.current=null},Xe=V.useMemo(()=>Ie.toDate(Q),[Ie,Q]),Ce=V.useMemo(()=>Hee(Xe,ce,se,ue,Ie,Y,t,F),[Xe,ce,se,ue,Ie,Y,t,F]);ke.era&&ce.year&&!ce.era?(ce.era=!0,Pe({...ce})):!ke.era&&ce.era&&(delete ce.era,Pe({...ce}));let He=Dt=>{ce[Dt]=!0,Dt==="year"&&ke.era&&(ce.era=!0),Pe({...ce})},et=(Dt,er)=>{if(ce[Dt])Me(qee(Ie,Dt,er,ue));else{He(Dt);let De=Object.keys(ce),ur=Object.keys(ke);(De.length>=ur.length||De.length===ur.length-1&&ke.dayPeriod&&!ce.dayPeriod)&&Me(Ie)}},Ke=V.useMemo(()=>IB(de,a,A,B,re),[de,a,A,B,re]),ot=Rm({...e,value:de,builtinValidation:Ke}),Pt=ot.displayValidation.isInvalid,Et=e.validationState||(Pt?"invalid":null);var Wt;return{...ot,value:be,dateValue:Xe,calendar:Y,setValue:Me,segments:Ce,dateFormatter:se,validationState:Et,isInvalid:Pt,granularity:F,maxGranularity:(Wt=e.maxGranularity)!==null&&Wt!==void 0?Wt:"year",isDisabled:h,isReadOnly:_,isRequired:w,increment(Dt){et(Dt,1)},decrement(Dt){et(Dt,-1)},incrementPage(Dt){et(Dt,D6[Dt]||1)},decrementPage(Dt){et(Dt,-(D6[Dt]||1))},setSegment(Dt,er){He(Dt),Me(Wee(Ie,Dt,er,ue))},confirmPlaceholder(){if(e.isDisabled||e.isReadOnly)return;let Dt=Object.keys(ce),er=Object.keys(ke);Dt.length===er.length-1&&ke.dayPeriod&&!ce.dayPeriod&&(ce={...ke},Pe(ce),Me(Ie.copy()))},clearSegment(Dt){delete ce[Dt],xe.current=Dt,Pe({...ce});let er=kv(e.placeholderValue,F,Y,G),De=Ie;if(Dt==="dayPeriod"&&"hour"in Ie&&"hour"in er){let ur=Ie.hour>=12,Sr=er.hour>=12;ur&&!Sr?De=Ie.set({hour:Ie.hour-12}):!ur&&Sr&&(De=Ie.set({hour:Ie.hour+12}))}else Dt==="hour"&&"hour"in Ie&&Ie.hour>=12&&ce.dayPeriod?De=Ie.set({hour:er.hour+12}):Dt in Ie&&(De=Ie.set({[Dt]:er[Dt]}));me(null),Me(De)},formatValue(Dt){if(!be)return"";let er=Wy(Dt,re);return new gd(t,er).format(Xe)},getDateFormatter(Dt,er){let De={...re,...er},ur=Wy({},De);return new gd(Dt,ur)}}}function Hee(e,t,i,c,h,_,w,a){let A=["hour","minute","second"],B=i.formatToParts(e),N=[];for(let F of B){let G=W1[F.type];F.type==="era"&&_.getEras().length===1&&(G=!1);let Q=W1[F.type]&&!t[F.type],te=W1[F.type]?Uee(F.type,F.value,w):null,Y={type:Gee[F.type]||F.type,text:Q?te:F.value,...I1(h,F.type,c),isPlaceholder:Q,placeholder:te,isEditable:G};F.type==="hour"?(N.push({type:"literal",text:"⁦",...I1(h,"literal",c),isPlaceholder:!1,placeholder:"",isEditable:!1}),N.push(Y),F.type===a&&N.push({type:"literal",text:"⁩",...I1(h,"literal",c),isPlaceholder:!1,placeholder:"",isEditable:!1})):A.includes(F.type)&&F.type===a?(N.push(Y),N.push({type:"literal",text:"⁩",...I1(h,"literal",c),isPlaceholder:!1,placeholder:"",isEditable:!1})):N.push(Y)}return N}function I1(e,t,i){switch(t){case"era":{let c=e.calendar.getEras();return{value:c.indexOf(e.era),minValue:0,maxValue:c.length-1}}case"year":return{value:e.year,minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,minValue:DV(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:PV(e),maxValue:e.calendar.getDaysInMonth(e)}}if("hour"in e)switch(t){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12};case"hour":if(i.hour12){let c=e.hour>=12;return{value:e.hour,minValue:c?12:0,maxValue:c?23:11}}return{value:e.hour,minValue:0,maxValue:23};case"minute":return{value:e.minute,minValue:0,maxValue:59};case"second":return{value:e.second,minValue:0,maxValue:59}}return{}}function qee(e,t,i,c){switch(t){case"era":case"year":case"month":case"day":return e.cycle(t,i,{round:t==="year"})}if("hour"in e)switch(t){case"dayPeriod":{let h=e.hour,_=h>=12;return e.set({hour:_?h-12:h+12})}case"hour":case"minute":case"second":return e.cycle(t,i,{round:t!=="hour",hourCycle:c.hour12?12:24})}throw new Error("Unknown segment: "+t)}function Wee(e,t,i,c){switch(t){case"day":case"month":case"year":case"era":return e.set({[t]:i})}if("hour"in e&&typeof i=="number")switch(t){case"dayPeriod":{let h=e.hour,_=h>=12;return i>=12===_?e:e.set({hour:_?h-12:h+12})}case"hour":if(c.hour12){let _=e.hour>=12;!_&&i===12&&(i=0),_&&i<12&&(i+=12)}case"minute":case"second":return e.set({[t]:i})}throw new Error("Unknown segment: "+t)}function Kee(e){let{placeholderValue:t=new E_,minValue:i,maxValue:c,granularity:h,validate:_}=e;var w;let[a,A]=Xs(e.value,(w=e.defaultValue)!==null&&w!==void 0?w:null,e.onChange),B=a||t,N=B&&"day"in B?B:void 0,F=e.defaultValue&&"timeZone"in e.defaultValue?e.defaultValue.timeZone:void 0,G=V.useMemo(()=>{let be=B&&"timeZone"in B?B.timeZone:void 0;return(be||F)&&t?mk(Rv(t),be||F):Rv(t)},[t,B,F]),Q=V.useMemo(()=>Rv(i,N),[i,N]),te=V.useMemo(()=>Rv(c,N),[c,N]),Y=V.useMemo(()=>a&&"day"in a?pD(a):a,[a]),oe=V.useMemo(()=>a==null?null:Rv(a),[a]);return{...$B({...e,value:oe,defaultValue:void 0,minValue:Q,maxValue:te,onChange:be=>{A(N||F?be:be&&pD(be))},granularity:h||"minute",maxGranularity:"hour",placeholderValue:G??void 0,createCalendar:()=>new Nl,validate:V.useCallback(()=>_==null?void 0:_(a),[_,a])}),timeValue:Y}}function Rv(e,t=Pm(Ff())){return e?"day"in e?e:Lf(t,e):null}function Zee(e){var t,i,c,h,_,w,a;const A=Pi(),{validationBehavior:B}=Gf(wh)||{},[N,F]=Zo(e,m_.variantKeys),{locale:G}=Ms(),Q=ow(new gd(G).resolvedOptions().calendar),te=JA(Q.identifier),{ref:Y,as:oe,label:de,inputRef:me,description:be,startContent:pe,endContent:Se,className:$e,classNames:Le,validationState:re,groupProps:Ee={},labelProps:se,fieldProps:ue,innerWrapperProps:ke,errorMessageProps:ce,descriptionProps:Pe,validationBehavior:xe=(t=B??(A==null?void 0:A.validationBehavior))!=null?t:"native",shouldForceLeadingZeros:Te=!0,minValue:Ie=(c=(i=A==null?void 0:A.defaultDates)==null?void 0:i.minDate)!=null?c:new Di(Q,1900+te,1,1),maxValue:Me=(_=(h=A==null?void 0:A.defaultDates)==null?void 0:h.maxDate)!=null?_:new Di(Q,2099+te,12,31),createCalendar:Xe=(w=A==null?void 0:A.createCalendar)!=null?w:null,isInvalid:Ce=re?re==="invalid":!1,errorMessage:He}=N,et=Ba(Y),Ke=Ba(me),ot=(a=e.disableAnimation)!=null?a:A==null?void 0:A.disableAnimation,Pt=$B({...e,label:de,locale:G,minValue:Ie,maxValue:Me,validationBehavior:xe,shouldForceLeadingZeros:Te,createCalendar:!Xe||typeof Xe!="function"?ow:Xe}),{labelProps:Et,fieldProps:Wt,inputProps:Dt,validationErrors:er,validationDetails:De,descriptionProps:ur,errorMessageProps:Sr,isInvalid:yt}=p$({...e,label:de,validationBehavior:xe,inputRef:Ke},Pt,et),dt=Nr(Le==null?void 0:Le.base,$e),$t=Ce||yt,or=e2({labelPlacement:e.labelPlacement,label:de}),Er=or==="outside"||or==="outside-left",mr=V.useMemo(()=>m_({...F,disableAnimation:ot,labelPlacement:or}),[Ko(F),ot,or]),Pr=Br=>({...xr(Et,se,Br),"data-slot":"label",className:mr.label({class:Nr(Le==null?void 0:Le.label,void 0)})}),Fr=Br=>({...Br,...Dt,ref:Ke}),Bn=(Br={})=>({ref:et,"data-slot":"input-field",...xr(Wt,ue,Br),className:mr.input({class:Nr(Le==null?void 0:Le.input,Br==null?void 0:Br.className)})}),Xr=(Br={})=>({...Br,...Ee,"data-slot":"input-wrapper",className:mr.inputWrapper({class:Le==null?void 0:Le.inputWrapper}),onClick:Wt.onClick}),On=Br=>{const an=xr(ke,Br);return{...an,"data-slot":"inner-wrapper",className:mr.innerWrapper({class:Zg(Le==null?void 0:Le.innerWrapper,an==null?void 0:an.className)})}},fr=Br=>({...Br,"data-slot":"helper-wrapper",className:mr.helperWrapper({class:Nr(Le==null?void 0:Le.helperWrapper,void 0)})}),Tn=(Br={})=>({...xr(Sr,ce,Br),"data-slot":"error-message",className:mr.errorMessage({class:Nr(Le==null?void 0:Le.errorMessage,Br==null?void 0:Br.className)})}),kr=(Br={})=>({...xr(ur,Pe,Br),"data-slot":"description",className:mr.description({class:Nr(Le==null?void 0:Le.description,Br==null?void 0:Br.className)})});return{state:Pt,domRef:et,slots:mr,classNames:Le,labelPlacement:or,getBaseGroupProps:()=>({as:oe,label:de,description:be,endContent:Se,errorMessage:He,isInvalid:$t,startContent:pe,validationDetails:De,validationErrors:er,shouldLabelBeOutside:Er,"data-slot":"base","data-required":Vt(e.isRequired),"data-disabled":Vt(e.isDisabled),"data-readonly":Vt(e.isReadOnly),"data-invalid":Vt($t),"data-has-start-content":Vt(!!pe),"data-has-end-content":Vt(!!Se),descriptionProps:kr(),errorMessageProps:Tn(),groupProps:Xr(),helperWrapperProps:fr(),labelProps:Pr(),wrapperProps:On(),className:mr.base({class:dt})}),getFieldProps:Bn,getInputProps:Fr}}var Xee=Na(function(t,i){const{state:c,slots:h,classNames:_,getBaseGroupProps:w,getInputProps:a,getFieldProps:A}=Zee({...t,ref:i});return b.jsx(IT,{...w(),children:b.jsx(RT,{classNames:_,inputProps:a(),slots:h,state:c,...A()})})}),Yee=Xee;function Jee(e){var t,i;const c=Pi(),{validationBehavior:h}=Gf(wh)||{},[_,w]=Zo(e,m_.variantKeys),{ref:a,as:A,label:B,inputRef:N,description:F,startContent:G,endContent:Q,className:te,classNames:Y,groupProps:oe={},labelProps:de,fieldProps:me,errorMessageProps:be,descriptionProps:pe,validationBehavior:Se=(t=h??(c==null?void 0:c.validationBehavior))!=null?t:"native",shouldForceLeadingZeros:$e=!0,minValue:Le,maxValue:re,isInvalid:Ee,errorMessage:se}=_,ue=Ba(a),ke=Ba(N),{locale:ce}=Ms(),Pe=(i=e.disableAnimation)!=null?i:c==null?void 0:c.disableAnimation,xe=Kee({...e,label:B,locale:ce,minValue:Le,maxValue:re,validationBehavior:Se,isInvalid:Ee,shouldForceLeadingZeros:$e}),{labelProps:Te,fieldProps:Ie,inputProps:Me,validationErrors:Xe,validationDetails:Ce,descriptionProps:He,errorMessageProps:et,isInvalid:Ke}=pee({...e,label:B,validationBehavior:Se,inputRef:ke},xe,ue),ot=Nr(Y==null?void 0:Y.base,te),Pt=e2({labelPlacement:e.labelPlacement,label:B}),Et=Pt==="outside"||Pt==="outside-left",Wt=V.useMemo(()=>m_({...w,disableAnimation:Pe,labelPlacement:Pt}),[Ko(w),Pt,Pe]),Dt=Er=>({...xr(Te,de,Er),"data-slot":"label",className:Wt.label({class:Nr(Y==null?void 0:Y.label,void 0)})}),er=Er=>({...Er,...Me,ref:ke}),De=(Er={})=>({ref:ue,"data-slot":"input",...xr(Ie,me,Er),className:Wt.input({class:Nr(Y==null?void 0:Y.input,Er==null?void 0:Er.className)})}),ur=(Er={})=>({...Er,...oe,"data-slot":"input-wrapper",className:Wt.inputWrapper({class:Y==null?void 0:Y.inputWrapper}),onClick:Ie.onClick}),Sr=Er=>({...Er,"data-slot":"inner-wrapper",className:Wt.innerWrapper({class:Y==null?void 0:Y.innerWrapper})}),yt=Er=>({...Er,"data-slot":"helper-wrapper",className:Wt.helperWrapper({class:Nr(Y==null?void 0:Y.helperWrapper,void 0)})}),dt=(Er={})=>({...xr(et,be,Er),"data-slot":"error-message",className:Wt.errorMessage({class:Nr(Y==null?void 0:Y.errorMessage,Er==null?void 0:Er.className)})}),$t=(Er={})=>({...xr(He,pe,Er),"data-slot":"description",className:Wt.description({class:Nr(Y==null?void 0:Y.description,Er==null?void 0:Er.className)})});return{state:xe,domRef:ue,slots:Wt,classNames:Y,labelPlacement:Pt,getBaseGroupProps:()=>({as:A,label:B,description:F,endContent:Q,errorMessage:se,isInvalid:Ke,startContent:G,validationDetails:Ce,validationErrors:Xe,shouldLabelBeOutside:Et,"data-slot":"base","data-required":Vt(e.isRequired),"data-disabled":Vt(e.isDisabled),"data-readonly":Vt(e.isReadOnly),"data-invalid":Vt(Ke),"data-has-start-content":Vt(!!G),"data-has-end-content":Vt(!!Q),descriptionProps:$t(),errorMessageProps:dt(),groupProps:ur(),helperWrapperProps:yt(),labelProps:Dt(),wrapperProps:Sr(),className:Wt.base({class:ot})}),getFieldProps:De,getInputProps:er}}var Qee=Na(function(t,i){const{state:c,slots:h,classNames:_,getBaseGroupProps:w,getInputProps:a,getFieldProps:A}=Jee({...t,ref:i});return b.jsx(IT,{...w(),children:b.jsx(RT,{classNames:_,inputProps:a(),slots:h,state:c,...A()})})}),BB=Qee,ete={"ar-AE":{endTime:"وقت الانتهاء",startTime:"وقت البدء",time:"الوقت"},"bg-BG":{endTime:"Краен час",startTime:"Начален час",time:"Време"},"cs-CZ":{endTime:"Konečný čas",startTime:"Počáteční čas",time:"Čas"},"da-DK":{endTime:"Sluttidspunkt",startTime:"Starttidspunkt",time:"Klokkeslæt"},"de-DE":{endTime:"Endzeit",startTime:"Startzeit",time:"Uhrzeit"},"el-GR":{endTime:"Χρόνος λήξης",startTime:"Ώρα έναρξης",time:"Χρόνος"},"en-US":{time:"Time",startTime:"Start time",endTime:"End time"},"es-ES":{endTime:"Hora de finalización",startTime:"Hora de inicio",time:"Hora"},"et-EE":{endTime:"Lõpuaeg",startTime:"Algusaeg",time:"Aeg"},"fi-FI":{endTime:"Päättymisaika",startTime:"Alkamisaika",time:"Aika"},"fr-FR":{endTime:"Heure de fin",startTime:"Heure de début",time:"Heure"},"he-IL":{endTime:"שעת סיום",startTime:"שעת התחלה",time:"זמן"},"hr-HR":{endTime:"Vrijeme završetka",startTime:"Vrijeme početka",time:"Vrijeme"},"hu-HU":{endTime:"Befejezés ideje",startTime:"Kezdés ideje",time:"Idő"},"it-IT":{endTime:"Ora di fine",startTime:"Ora di inizio",time:"Ora"},"ja-JP":{endTime:"終了時刻",startTime:"開始時刻",time:"時刻"},"ko-KR":{endTime:"종료 시간",startTime:"시작 시간",time:"시간"},"it-LT":{endTime:"Pabaigos laikas",startTime:"Pradžios laikas",time:"Laikas"},"lv-LV":{endTime:"Beigu laiks",startTime:"Sākuma laiks",time:"Laiks"},"nb-NO":{endTime:"Sluttid",startTime:"Starttid",time:"Tid"},"nl-NL":{endTime:"Eindtijd",startTime:"Starttijd",time:"Tijd"},"pl-PL":{endTime:"Godzina końcowa",startTime:"Godzina początkowa",time:"Godzina"},"pt-BR":{endTime:"Hora final",startTime:"Hora inicial",time:"Hora"},"pt-PT":{endTime:"Terminar tempo",startTime:"Iniciar tempo",time:"Tempo"},"ro-RO":{endTime:"Ora de sfârșit",startTime:"Ora de început",time:"Ora"},"ru-RU":{endTime:"Время окончания",startTime:"Время начала",time:"Время"},"sk-SK":{endTime:"Čas ukončenia",startTime:"Čas začiatku",time:"Čas"},"sl-SI":{endTime:"Končni čas",startTime:"Začetni čas",time:"Čas"},"sr-SP":{endTime:"Završno vreme",startTime:"Početno vreme",time:"Vreme"},"sv-SE":{endTime:"Sluttid",startTime:"Starttid",time:"Tid"},"tr-TR":{endTime:"Bitiş saati",startTime:"Başlangıç saati",time:"Saat"},"uk-UA":{endTime:"Час завершення",startTime:"Час початку",time:"Час"},"zh-CN":{endTime:"结束时间",startTime:"开始时间",time:"时间"},"zh-TW":{endTime:"結束時間",startTime:"開始時間",time:"時間"}};function tte(e){var t,i,c,h;const _=Pi(),[w,a]=Zo(e,m_.variantKeys),{as:A,ref:B,label:N,endContent:F,selectorIcon:G,inputRef:Q,isInvalid:te,errorMessage:Y,description:oe,startContent:de,validationState:me,validationBehavior:be,visibleMonths:pe=1,firstDayOfWeek:Se,pageBehavior:$e="visible",calendarWidth:Le=256,isDateUnavailable:re,shouldForceLeadingZeros:Ee,showMonthAndYearPickers:se=!1,selectorButtonProps:ue={},popoverProps:ke={},timeInputProps:ce={},calendarProps:Pe={},CalendarTopContent:xe,CalendarBottomContent:Te,createCalendar:Ie}=w,{isHeaderExpanded:Me,isHeaderDefaultExpanded:Xe,onHeaderExpandedChange:Ce,...He}=Pe,et=V.useCallback(Xr=>{Ce==null||Ce(Xr||!1)},[Ce]),[Ke,ot]=Xs(Me,Xe??!1,et),Pt=Ba(B),Et=(i=(t=e.disableAnimation)!=null?t:_==null?void 0:_.disableAnimation)!=null?i:!1;let Wt=Eu(ete);const Dt=e.color==="default"||!e.color,er=pe>1,De=e==null?void 0:e.placeholderValue,ur=De&&"hour"in De?De:null,Sr=e.minValue&&"hour"in e.minValue?e.minValue:null,yt=e.maxValue&&"hour"in e.maxValue?e.maxValue:null,dt={popoverProps:xr({offset:13,placement:"bottom",triggerScaleOnOpen:!1,disableAnimation:Et},ke),selectorButtonProps:xr({isIconOnly:!0,radius:"full",size:"sm",variant:"light",disableAnimation:Et},ue),calendarProps:xr({showHelper:!1,visibleMonths:pe,pageBehavior:$e,isDateUnavailable:re,showMonthAndYearPickers:se,isHeaderExpanded:Ke,onHeaderExpandedChange:ot,color:Dt?"primary":e.color,disableAnimation:Et,firstDayOfWeek:Se},He)},$t={as:A,label:N,ref:Pt,inputRef:Q,description:oe,validationState:me,shouldForceLeadingZeros:Ee,isInvalid:te,errorMessage:Y,validationBehavior:be,"data-invalid":Vt(e==null?void 0:e.isInvalid)},or={...ce,size:"sm",labelPlacement:"outside-left",label:(ce==null?void 0:ce.label)||Wt.format("time"),placeholderValue:ur,hourCycle:w.hourCycle,hideTimeZone:w.hideTimeZone,validationBehavior:be},Er={...dt.popoverProps,children:(h=(c=dt.popoverProps)==null?void 0:c.children)!=null?h:[],triggerRef:Pt},mr={...dt.calendarProps,calendarWidth:Le,"data-slot":"calendar"},Pr={...dt.selectorButtonProps,"data-slot":"selector-button"};return{domRef:Pt,startContent:de,endContent:F,selectorIcon:G,createCalendar:Ie,stringFormatter:Wt,hasMultipleMonths:er,slotsProps:dt,timeMinValue:Sr,timeMaxValue:yt,visibleMonths:pe,isCalendarHeaderExpanded:Ke,disableAnimation:Et,CalendarTopContent:xe,CalendarBottomContent:Te,variantProps:a,dateInputProps:$t,timeInputProps:or,popoverProps:Er,calendarProps:mr,userTimeInputProps:ce,selectorButtonProps:Pr,selectorIconProps:{"data-slot":"selector-icon"},onClose:()=>{Me===void 0&&ot(!1)}}}function rte({className:e,classNames:t,...i}){var c,h,_;const w=Pi(),{validationBehavior:a}=Gf(wh)||{},A=(_=(h=(c=i.validationBehavior)!=null?c:a)!=null?h:w==null?void 0:w.validationBehavior)!=null?_:"native",{domRef:B,startContent:N,endContent:F,selectorIcon:G,createCalendar:Q,isCalendarHeaderExpanded:te,disableAnimation:Y,CalendarTopContent:oe,slotsProps:de,timeMinValue:me,timeMaxValue:be,CalendarBottomContent:pe,dateInputProps:Se,timeInputProps:$e,popoverProps:Le,calendarProps:re,variantProps:Ee,userTimeInputProps:se,selectorButtonProps:ue,selectorIconProps:ke,onClose:ce}=tte({...i,validationBehavior:A});let Pe=Fee({...i,validationBehavior:A,shouldCloseOnSelect:()=>!Pe.hasTime,onOpenChange:dt=>{dt||ce()}});const xe=V.useRef(null),Te=Nr(t==null?void 0:t.base,e),Ie=V.useMemo(()=>J8({...Ee,className:e}),[Ko(Ee),e]);let{groupProps:Me,labelProps:Xe,fieldProps:Ce,buttonProps:He,dialogProps:et,calendarProps:Ke,descriptionProps:ot,errorMessageProps:Pt}=gee({...i,validationBehavior:A},Pe,B);i.maxValue&&"hour"in i.maxValue&&i.maxValue;const Et=Pe.granularity==="hour"||Pe.granularity==="minute"||Pe.granularity==="second"?Pe.granularity:null,Wt=!!Et;return{state:Pe,startContent:N,endContent:F,selectorIcon:G,showTimeField:Wt,isCalendarHeaderExpanded:te,disableAnimation:Y,CalendarTopContent:oe,CalendarBottomContent:pe,getDateInputProps:()=>({...Se,classNames:t,groupProps:Me,labelProps:Xe,createCalendar:Q,errorMessageProps:Pt,descriptionProps:ot,...xr(Ee,Ce,{minValue:i.minValue,maxValue:i.maxValue,fullWidth:!0,disableAnimation:Y}),className:Ie.base({class:Te}),innerWrapperProps:{ref:xe},"data-open":Vt(Pe.isOpen)}),getPopoverProps:(dt={})=>{var $t,or;return{state:Pe,dialogProps:et,...Le,triggerRef:xe,classNames:{content:Ie.popoverContent({class:Nr(t==null?void 0:t.popoverContent,(or=($t=de.popoverProps)==null?void 0:$t.classNames)==null?void 0:or.content,dt.className)})},shouldCloseOnInteractOutside:Le!=null&&Le.shouldCloseOnInteractOutside?Le.shouldCloseOnInteractOutside:Er=>xT(Er,xe,Pe)}},getSelectorButtonProps:()=>({...He,...ue,onPress:Pe.toggle,className:Ie.selectorButton({class:t==null?void 0:t.selectorButton})}),getCalendarProps:()=>{var dt,$t;return{...Ke,...re,classNames:{...re.classNames,base:Ie.calendar({class:Nr(t==null?void 0:t.base,(dt=re.classNames)==null?void 0:dt.base)}),content:Ie.calendarContent({class:Nr(t==null?void 0:t.calendarContent,($t=re.classNames)==null?void 0:$t.content)})}}},getTimeInputProps:()=>{var dt,$t;return Wt?{...$e,value:Pe.timeValue,onChange:Pe.setTimeValue,granularity:Et,minValue:me??void 0,maxValue:be??void 0,classNames:{base:Ie.timeInput({class:Nr(t==null?void 0:t.timeInput,(dt=se==null?void 0:se.classNames)==null?void 0:dt.base)}),label:Ie.timeInputLabel({class:Nr(t==null?void 0:t.timeInputLabel,($t=se==null?void 0:se.classNames)==null?void 0:$t.label)})}}:{}},getSelectorIconProps:()=>({...ke,className:Ie.selectorIcon({class:t==null?void 0:t.selectorIcon})})}}var nte=Na(function(t,i){const{selectorButtonPlacement:c="end",...h}=t,{state:_,startContent:w,endContent:a,selectorIcon:A,showTimeField:B,disableAnimation:N,isCalendarHeaderExpanded:F,getDateInputProps:G,getPopoverProps:Q,getTimeInputProps:te,getSelectorButtonProps:Y,getSelectorIconProps:oe,getCalendarProps:de,CalendarTopContent:me,CalendarBottomContent:be}=rte({...h,ref:i}),pe=V.isValidElement(A)?V.cloneElement(A,oe()):b.jsx(VX,{...oe()}),Se=V.useMemo(()=>F?null:B?b.jsxs(b.Fragment,{children:[b.jsx(BB,{...te()}),be]}):be,[_,B,be,F]),$e=V.useMemo(()=>F?null:me,[B,me,F]),Le=_.isOpen?b.jsx(iQ,{...Q(),children:b.jsx(dee,{...de(),bottomContent:Se,topContent:$e})}):null,re={...G(),endContent:c==="end"?b.jsx($r,{...Y(),children:a||pe}):a,startContent:c==="start"?b.jsx($r,{...Y(),children:w||pe}):w};return b.jsxs(b.Fragment,{children:[b.jsx(Yee,{...re}),N?Le:b.jsx(Uf,{children:Le})]})}),xx=nte;function ate(e){const[t,i]=Zo(e,NM.variantKeys),{as:c,title:h,children:_,description:w,onClose:a,isClosable:A,ref:B,icon:N,startContent:F,endContent:G,isVisible:Q,isDefaultVisible:te,onVisibleChange:Y,closeButtonProps:oe={size:"sm"},className:de,classNames:me,...be}=t,[pe,Se]=Xs(Q,te??!0,Y),Le=typeof(c||"div")=="string",re=Ba(B),Ee=V.useCallback(()=>{Se(!1),a==null||a()},[Se,a]),se=Nr(me==null?void 0:me.base,de),ue=V.useMemo(()=>NM({hasContent:!md(w)||!md(_),...i}),[w,Ko(i)]),ke=V.useCallback(()=>({"data-visible":Vt(pe),"data-closeable":Vt(A),"data-has-title":Vt(!md(h)),"data-has-description":Vt(!md(w)),...xr(Wo(be,{enabled:Le}),Wo(t)),className:ue.base({class:se})}),[ue,se]),ce=V.useCallback(()=>({className:ue.mainWrapper({class:me==null?void 0:me.mainWrapper})}),[ue,me==null?void 0:me.mainWrapper]),Pe=V.useCallback(()=>({className:ue.description({class:me==null?void 0:me.description})}),[ue,me==null?void 0:me.description]),xe=V.useCallback(()=>({className:ue.title({class:me==null?void 0:me.title})}),[ue,me==null?void 0:me.title]),Te=V.useCallback(()=>({...oe,className:ue.closeButton({class:me==null?void 0:me.closeButton})}),[ue,me==null?void 0:me.closeButton]),Ie=V.useCallback(()=>({className:ue.alertIcon({class:me==null?void 0:me.alertIcon})}),[ue,me==null?void 0:me.alertIcon]),Me=V.useCallback(()=>({className:ue.iconWrapper({class:me==null?void 0:me.iconWrapper})}),[ue,me==null?void 0:me.iconWrapper]);return{title:h,icon:N,children:_,description:w,isClosable:A,domRef:re,endContent:G,startContent:F,getBaseProps:ke,getMainWrapperProps:ce,getDescriptionProps:Pe,getTitleProps:xe,color:i.color,getCloseButtonProps:Te,handleClose:Ee,isVisible:pe,onClose:a,getAlertIconProps:Ie,getIconWrapperProps:Me}}var P6={primary:UM,secondary:UM,success:r7,warning:t7,danger:n7},NB=Na((e,t)=>{const{title:i,icon:c,children:h,description:_,endContent:w,startContent:a,isClosable:A,domRef:B,handleClose:N,getBaseProps:F,getMainWrapperProps:G,getDescriptionProps:Q,getTitleProps:te,getCloseButtonProps:Y,color:oe,isVisible:de,onClose:me,getAlertIconProps:be,getIconWrapperProps:pe}=ate({...e,ref:t});if(!de)return null;const Se=c&&V.isValidElement(c)?V.cloneElement(c,be()):null,$e=P6[oe]||P6.primary;return b.jsxs("div",{ref:B,role:"alert",...F(),children:[a,b.jsx("div",{...pe(),children:Se||b.jsx($e,{...be()})}),b.jsxs("div",{...G(),children:[!md(i)&&b.jsx("div",{...te(),children:i}),!md(_)&&b.jsx("div",{...Q(),children:_}),h]}),w,(A||me)&&b.jsx($r,{isIconOnly:!0,"aria-label":"Close",radius:"full",variant:"light",onPress:N,...Y(),children:b.jsx(mT,{height:20,width:20})})]})});NB.displayName="HeroUI.Alert";var ite=NB;function ste(e){const{ref:t,className:i,classNames:c,placement:h="right",scrollBehavior:_="inside",size:w="md",motionProps:a,...A}=e,B=Ba(t),N=V.useMemo(()=>{if(!md(a))return a;const te=h==="left"||h==="right"?"x":"y";return{variants:{enter:{[te]:0,transition:{[te]:{duration:.2,ease:Xg.easeOut}}},exit:{[te]:h==="top"||h==="left"?"-100%":"100%",transition:{[te]:{duration:.1,ease:Xg.easeIn}}}}}},[h,a]),F=Nr(c==null?void 0:c.base,i),G=V.useMemo(()=>TX({size:w,placement:h}),[w,h]),Q=V.useCallback(()=>({classNames:{...c,base:G.base({class:F})},motionProps:N,scrollBehavior:_,size:w,...A}),[F,c,N,_,w,A]);return{domRef:B,getModalProps:Q}}var jB=Na(({children:e,...t},i)=>{const{domRef:c,getModalProps:h}=ste({...t,ref:i});return b.jsx(zQ,{ref:c,...h(),children:e})});jB.displayName="HeroUI.Drawer";var ote=jB,[lte,cte]=Th({name:"InputOtpContext",errorMessage:"useInputOtpContext: `context` is undefined. Seems like you forgot to wrap all input-otp components within `<InputOtp />`"}),ute=({...e})=>{var t;const{classNames:i,slots:c,type:h}=cte(),_=Nr(i==null?void 0:i.passwordChar),w=Nr(i==null?void 0:i.caret),a=Nr(i==null?void 0:i.segment),A=V.useMemo(()=>{var B,N;return e.isActive&&!e.char?b.jsx("div",{className:Zg((B=c.caret)==null?void 0:B.call(c,{class:w}))}):e.char?h==="password"?b.jsx("div",{className:Zg((N=c.passwordChar)==null?void 0:N.call(c,{class:_}))}):b.jsx("div",{children:e.char}):b.jsx("div",{children:e.placeholderChar})},[e.char,e.isActive,e.placeholderChar,h]);return b.jsx("div",{className:Zg((t=c.segment)==null?void 0:t.call(c,{class:a})),"data-active":Vt(e.isActive),"data-focus":Vt(e.isFocused&&e.isActive),"data-focus-visible":Vt(e.isFocusVisible&&e.isActive),"data-has-value":Vt(!!e.char),"data-slot":"segment2",role:"presentation",children:A})};function dte(e){var t,i,c,h;const _=Pi(),{validationBehavior:w}=Gf(wh)||{},[a,A]=Zo(e,$M.variantKeys),{ref:B,baseRef:N,as:F,className:G,classNames:Q,length:te=4,autoFocus:Y,"aria-label":oe="One-time password input",onValueChange:de=()=>{},allowedKeys:me="^[0-9]*$",validationBehavior:be=(t=w??(_==null?void 0:_.validationBehavior))!=null?t:"native",type:pe,name:Se,maxLength:$e,minLength:Le,textAlign:re="center",onComplete:Ee=()=>{},pushPasswordManagerStrategy:se,pasteTransformer:ue,containerClassName:ke,noScriptCSSFallback:ce,onChange:Pe,inputMode:xe,...Te}=a,Ie=F||"div",Me=Ba(B),Xe=Ba(N),{isFocusVisible:Ce,isFocused:He,focusProps:et}=Ac({autoFocus:Y,isTextInput:!0}),Ke=V.useCallback(kr=>{de(kr??"")},[de]),[ot,Pt]=Xs(a.value,(i=a.defaultValue)!=null?i:"",Ke),Et=(h=(c=e.disableAnimation)!=null?c:_==null?void 0:_.disableAnimation)!=null?h:!1,Wt=e.isDisabled,Dt=Nr(Q==null?void 0:Q.base,G),er=Rm({...a,validationBehavior:be,value:ot});D_(Me,ot,Pt),L_({...a,validationBehavior:be},er,Me);const{isInvalid:De,validationErrors:ur,validationDetails:Sr}=er.displayValidation,yt=e.isReadOnly,dt=e.isRequired,$t=e.isInvalid||De,or=typeof a.errorMessage=="function"?a.errorMessage({isInvalid:$t,validationErrors:ur,validationDetails:Sr}):a.errorMessage||(ur==null?void 0:ur.join(" ")),Er=a.description,mr=!!Er||!!or,Pr=V.useMemo(()=>$M({...A,disableAnimation:Et,isInvalid:$t,isReadOnly:yt}),[Ko(A),Et,$t,yt]),Fr=V.useCallback((kr={})=>({ref:Xe,className:Pr.base({class:Dt}),"data-slot":"base","data-disabled":Vt(Wt),"data-invalid":Vt($t),"data-required":Vt(e==null?void 0:e.isRequired),"data-readonly":Vt(e==null?void 0:e.isReadOnly),"data-filled":Vt(ot.length===te),"aria-label":oe,"aria-required":Vt(e.isRequired),"aria-readonly":Vt(e==null?void 0:e.isReadOnly),role:"base",...xr(Wo(Te,{enabled:!0}),Wo(kr)),onChange:Dr=>{var Br;const an=(Br=Dr.target)==null?void 0:Br.value;new RegExp(me).test(an)&&(Pe==null||Pe(Dr))}}),[Xe,Pr,Dt,Wt,$t,dt,yt,ot,te]),Bn=V.useCallback((kr={})=>{var Dr;return{...et,required:dt,disabled:Wt,readOnly:yt,pattern:me,maxLength:$e??te,minLength:Le??te,textAlign:re,ref:Me,name:Se,value:ot,autoFocus:Y,onChange:Pt,onBlur:qi(et.onBlur,kr==null?void 0:kr.onBlur),onComplete:Ee,pushPasswordManagerStrategy:se,pasteTransformer:ue,noScriptCSSFallback:ce,inputMode:xe??(JF(me)?"numeric":"text"),containerClassName:(Dr=Pr.wrapper)==null?void 0:Dr.call(Pr,{class:Nr(Q==null?void 0:Q.wrapper,ke)}),...kr}},[xe,dt,Wt,yt,me,Me,Se,ot,te,Pt,a.onBlur,Ee,Y]),Xr=V.useCallback((kr={})=>({className:Pr.segmentWrapper({class:Nr(Q==null?void 0:Q.segmentWrapper,kr==null?void 0:kr.className)}),"data-slot":"segment-wrapper","data-disabled":Vt(Wt),"aria-label":oe,...kr}),[Q==null?void 0:Q.segmentWrapper,Wt]),On=V.useCallback((kr={})=>({className:Pr.helperWrapper({class:Nr(Q==null?void 0:Q.helperWrapper,kr==null?void 0:kr.className)}),"data-slot":"helper-wrapper",...kr}),[Q==null?void 0:Q.helperWrapper]),fr=V.useCallback((kr={})=>({className:Pr.errorMessage({class:Nr(Q==null?void 0:Q.errorMessage,kr==null?void 0:kr.className)}),"data-slot":"error-message",...kr}),[Q==null?void 0:Q.errorMessage]),Tn=V.useCallback((kr={})=>({className:Pr.description({class:Nr(Q==null?void 0:Q.description,kr==null?void 0:kr.className)}),"data-slot":"description",...kr}),[Q==null?void 0:Q.description]);return{Component:Ie,inputRef:Me,length:te,value:ot,type:pe,slots:Pr,hasHelper:mr,classNames:Q,isInvalid:$t,description:Er,errorMessage:or,isFocusVisible:Ce,isFocused:He,getBaseProps:Fr,getInputOtpProps:Bn,getSegmentWrapperProps:Xr,getHelperWrapperProps:On,getErrorMessageProps:fr,getDescriptionProps:Tn}}var hte=Object.defineProperty,fte=Object.defineProperties,pte=Object.getOwnPropertyDescriptors,Mw=Object.getOwnPropertySymbols,OB=Object.prototype.hasOwnProperty,FB=Object.prototype.propertyIsEnumerable,M6=(e,t,i)=>t in e?hte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,mte=(e,t)=>{for(var i in t||(t={}))OB.call(t,i)&&M6(e,i,t[i]);if(Mw)for(var i of Mw(t))FB.call(t,i)&&M6(e,i,t[i]);return e},gte=(e,t)=>fte(e,pte(t)),yte=(e,t)=>{var i={};for(var c in e)OB.call(e,c)&&t.indexOf(c)<0&&(i[c]=e[c]);if(e!=null&&Mw)for(var c of Mw(e))t.indexOf(c)<0&&FB.call(e,c)&&(i[c]=e[c]);return i};function xte(e){let t=setTimeout(e,0),i=setTimeout(e,10),c=setTimeout(e,50);return[t,i,c]}function vte(e){let t=V.useRef();return V.useEffect(()=>{t.current=e}),t.current}var _te=18,VB=40,bte=`${VB}px`,wte=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Ste({containerRef:e,inputRef:t,pushPasswordManagerStrategy:i,isFocused:c}){let[h,_]=V.useState(!1),[w,a]=V.useState(!1),[A,B]=V.useState(!1),N=V.useMemo(()=>i==="none"?!1:(i==="increase-width"||i==="experimental-no-flickering")&&h&&w,[h,w,i]),F=V.useCallback(()=>{let G=e.current,Q=t.current;if(!G||!Q||A||i==="none")return;let te=G,Y=te.getBoundingClientRect().left+te.offsetWidth,oe=te.getBoundingClientRect().top+te.offsetHeight/2,de=Y-_te,me=oe;document.querySelectorAll(wte).length===0&&document.elementFromPoint(de,me)===G||(_(!0),B(!0))},[e,t,A,i]);return V.useEffect(()=>{let G=e.current;if(!G||i==="none")return;function Q(){let Y=window.innerWidth-G.getBoundingClientRect().right;a(Y>=VB)}Q();let te=setInterval(Q,1e3);return()=>{clearInterval(te)}},[e,i]),V.useEffect(()=>{let G=c||document.activeElement===t.current;if(i==="none"||!G)return;let Q=setTimeout(F,0),te=setTimeout(F,2e3),Y=setTimeout(F,5e3),oe=setTimeout(()=>{B(!0)},6e3);return()=>{clearTimeout(Q),clearTimeout(te),clearTimeout(Y),clearTimeout(oe)}},[t,c,i,F]),{hasPWMBadge:h,willPushPWMBadge:N,PWM_BADGE_SPACE_WIDTH:bte}}var Tte=V.createContext({}),UB=V.forwardRef((e,t)=>{var i=e,{value:c,onChange:h,maxLength:_,textAlign:w="left",pattern:a,placeholder:A,inputMode:B="numeric",onComplete:N,pushPasswordManagerStrategy:F="increase-width",pasteTransformer:G,containerClassName:Q,noScriptCSSFallback:te=Ete,render:Y,children:oe}=i,de=yte(i,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),me,be,pe,Se,$e;let[Le,re]=V.useState(typeof de.defaultValue=="string"?de.defaultValue:""),Ee=c??Le,se=vte(Ee),ue=V.useCallback(dt=>{h==null||h(dt),re(dt)},[h]),ke=V.useMemo(()=>a?typeof a=="string"?new RegExp(a):a:null,[a]),ce=V.useRef(null),Pe=V.useRef(null),xe=V.useRef({value:Ee,onChange:ue,isIOS:typeof window<"u"&&((be=(me=window==null?void 0:window.CSS)==null?void 0:me.supports)==null?void 0:be.call(me,"-webkit-touch-callout","none"))}),Te=V.useRef({prev:[(pe=ce.current)==null?void 0:pe.selectionStart,(Se=ce.current)==null?void 0:Se.selectionEnd,($e=ce.current)==null?void 0:$e.selectionDirection]});V.useImperativeHandle(t,()=>ce.current,[]),V.useEffect(()=>{let dt=ce.current,$t=Pe.current;if(!dt||!$t)return;xe.current.value!==dt.value&&xe.current.onChange(dt.value),Te.current.prev=[dt.selectionStart,dt.selectionEnd,dt.selectionDirection];function or(){if(document.activeElement!==dt){et(null),ot(null);return}let Pr=dt.selectionStart,Fr=dt.selectionEnd,Bn=dt.selectionDirection,Xr=dt.maxLength,On=dt.value,fr=Te.current.prev,Tn=-1,kr=-1,Dr;if(On.length!==0&&Pr!==null&&Fr!==null){let Za=Pr===Fr,oa=Pr===On.length&&On.length<Xr;if(Za&&!oa){let qn=Pr;if(qn===0)Tn=0,kr=1,Dr="forward";else if(qn===Xr)Tn=qn-1,kr=qn,Dr="backward";else if(Xr>1&&On.length>1){let Wn=0;if(fr[0]!==null&&fr[1]!==null){Dr=qn<fr[1]?"backward":"forward";let Da=fr[0]===fr[1]&&fr[0]<Xr;Dr==="backward"&&!Da&&(Wn=-1)}Tn=Wn+qn,kr=Wn+qn+1}}Tn!==-1&&kr!==-1&&Tn!==kr&&ce.current.setSelectionRange(Tn,kr,Dr)}let Br=Tn!==-1?Tn:Pr,an=kr!==-1?kr:Fr,Sa=Dr??Bn;et(Br),ot(an),Te.current.prev=[Br,an,Sa]}if(document.addEventListener("selectionchange",or,{capture:!0}),or(),document.activeElement===dt&&Ce(!0),!document.getElementById("input-otp-style")){let Pr=document.createElement("style");if(Pr.id="input-otp-style",document.head.appendChild(Pr),Pr.sheet){let Fr="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Iv(Pr.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Iv(Pr.sheet,`[data-input-otp]:autofill { ${Fr} }`),Iv(Pr.sheet,`[data-input-otp]:-webkit-autofill { ${Fr} }`),Iv(Pr.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Iv(Pr.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Er=()=>{$t&&$t.style.setProperty("--root-height",`${dt.clientHeight}px`)};Er();let mr=new ResizeObserver(Er);return mr.observe(dt),()=>{document.removeEventListener("selectionchange",or,{capture:!0}),mr.disconnect()}},[]);let[Ie,Me]=V.useState(!1),[Xe,Ce]=V.useState(!1),[He,et]=V.useState(null),[Ke,ot]=V.useState(null);V.useEffect(()=>{xte(()=>{var dt,$t,or,Er;(dt=ce.current)==null||dt.dispatchEvent(new Event("input"));let mr=($t=ce.current)==null?void 0:$t.selectionStart,Pr=(or=ce.current)==null?void 0:or.selectionEnd,Fr=(Er=ce.current)==null?void 0:Er.selectionDirection;mr!==null&&Pr!==null&&(et(mr),ot(Pr),Te.current.prev=[mr,Pr,Fr])})},[Ee,Xe]),V.useEffect(()=>{se!==void 0&&Ee!==se&&se.length<_&&Ee.length===_&&(N==null||N(Ee))},[_,N,se,Ee]);let Pt=Ste({containerRef:Pe,inputRef:ce,pushPasswordManagerStrategy:F,isFocused:Xe}),Et=V.useCallback(dt=>{let $t=dt.currentTarget.value.slice(0,_);if($t.length>0&&ke&&!ke.test($t)){dt.preventDefault();return}typeof se=="string"&&$t.length<se.length&&document.dispatchEvent(new Event("selectionchange")),ue($t)},[_,ue,se,ke]),Wt=V.useCallback(()=>{var dt;if(ce.current){let $t=Math.min(ce.current.value.length,_-1),or=ce.current.value.length;(dt=ce.current)==null||dt.setSelectionRange($t,or),et($t),ot(or)}Ce(!0)},[_]),Dt=V.useCallback(dt=>{var $t,or;let Er=ce.current;if(!G&&(!xe.current.isIOS||!dt.clipboardData||!Er))return;let mr=dt.clipboardData.getData("text/plain"),Pr=G?G(mr):mr;console.log({_content:mr,content:Pr}),dt.preventDefault();let Fr=($t=ce.current)==null?void 0:$t.selectionStart,Bn=(or=ce.current)==null?void 0:or.selectionEnd,Xr=(Fr!==Bn?Ee.slice(0,Fr)+Pr+Ee.slice(Bn):Ee.slice(0,Fr)+Pr+Ee.slice(Fr)).slice(0,_);if(Xr.length>0&&ke&&!ke.test(Xr))return;Er.value=Xr,ue(Xr);let On=Math.min(Xr.length,_-1),fr=Xr.length;Er.setSelectionRange(On,fr),et(On),ot(fr)},[_,ue,ke,Ee]),er=V.useMemo(()=>({position:"relative",cursor:de.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[de.disabled]),De=V.useMemo(()=>({position:"absolute",inset:0,width:Pt.willPushPWMBadge?`calc(100% + ${Pt.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:Pt.willPushPWMBadge?`inset(0 ${Pt.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:w,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[Pt.PWM_BADGE_SPACE_WIDTH,Pt.willPushPWMBadge,w]),ur=V.useMemo(()=>V.createElement("input",gte(mte({autoComplete:de.autoComplete||"one-time-code"},de),{"data-input-otp":!0,"data-input-otp-placeholder-shown":Ee.length===0||void 0,"data-input-otp-mss":He,"data-input-otp-mse":Ke,inputMode:B,pattern:ke==null?void 0:ke.source,"aria-placeholder":A,style:De,maxLength:_,value:Ee,ref:ce,onPaste:dt=>{var $t;Dt(dt),($t=de.onPaste)==null||$t.call(de,dt)},onChange:Et,onMouseOver:dt=>{var $t;Me(!0),($t=de.onMouseOver)==null||$t.call(de,dt)},onMouseLeave:dt=>{var $t;Me(!1),($t=de.onMouseLeave)==null||$t.call(de,dt)},onFocus:dt=>{var $t;Wt(),($t=de.onFocus)==null||$t.call(de,dt)},onBlur:dt=>{var $t;Ce(!1),($t=de.onBlur)==null||$t.call(de,dt)}})),[Et,Wt,Dt,B,De,_,Ke,He,de,ke==null?void 0:ke.source,Ee]),Sr=V.useMemo(()=>({slots:Array.from({length:_}).map((dt,$t)=>{var or;let Er=Xe&&He!==null&&Ke!==null&&(He===Ke&&$t===He||$t>=He&&$t<Ke),mr=Ee[$t]!==void 0?Ee[$t]:null,Pr=Ee[0]!==void 0?null:(or=A==null?void 0:A[$t])!=null?or:null;return{char:mr,placeholderChar:Pr,isActive:Er,hasFakeCaret:Er&&mr===null}}),isFocused:Xe,isHovering:!de.disabled&&Ie}),[Xe,Ie,_,Ke,He,de.disabled,Ee]),yt=V.useMemo(()=>Y?Y(Sr):V.createElement(Tte.Provider,{value:Sr},oe),[oe,Sr,Y]);return V.createElement(V.Fragment,null,te!==null&&V.createElement("noscript",null,V.createElement("style",null,te)),V.createElement("div",{ref:Pe,"data-input-otp-container":!0,style:er,className:Q},yt,V.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},ur)))});UB.displayName="Input";function Iv(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var Ete=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,GB=Na((e,t)=>{const i=dte({...e,ref:t}),{Component:c,hasHelper:h,isInvalid:_,errorMessage:w,description:a,isFocusVisible:A,isFocused:B,getBaseProps:N,getInputOtpProps:F,getSegmentWrapperProps:G,getHelperWrapperProps:Q,getErrorMessageProps:te,getDescriptionProps:Y}=i,oe=V.useMemo(()=>h?b.jsx("div",{...Q(),children:_&&w?b.jsx("div",{...te(),children:w}):b.jsx("div",{...Y(),children:a})}):null,[h,_,w,a,Q,te,Y]);return b.jsx(lte,{value:i,children:b.jsxs(c,{...N(),children:[b.jsx(UB,{...F(),render:({slots:de})=>b.jsx("div",{...G(),children:de.map((me,be)=>b.jsx(ute,{...me,isFocusVisible:A,isFocused:B},be))})}),oe]})})});GB.displayName="HeroUI.InputOtp";var A6=GB,HB=({direction:e,...t})=>b.jsx($r,{disableRipple:!0,isIconOnly:!0,...t,children:e=="up"?b.jsx(UX,{}):b.jsx(GX,{})});HB.displayName="HeroUI.NumberInputStepper";var k6=HB;function Cte(e){let{minValue:t,maxValue:i,step:c,formatOptions:h,value:_,defaultValue:w=NaN,onChange:a,locale:A,isDisabled:B,isReadOnly:N}=e;_===null&&(_=NaN),_!==void 0&&!isNaN(_)&&(c!==void 0&&!isNaN(c)?_=Tf(_,t,i,c):_=Wg(_,t,i)),isNaN(w)||(c!==void 0&&!isNaN(c)?w=Tf(w,t,i,c):w=Wg(w,t,i));let[F,G]=Xs(_,isNaN(w)?NaN:w,a),[Q,te]=V.useState(()=>isNaN(F)?"":new uw(A,h).format(F)),Y=V.useMemo(()=>new D5(A,h),[A,h]),oe=V.useMemo(()=>Y.getNumberingSystem(Q),[Y,Q]),de=V.useMemo(()=>new uw(A,{...h,numberingSystem:oe}),[A,h,oe]),me=V.useMemo(()=>de.resolvedOptions(),[de]),be=V.useCallback(et=>isNaN(et)||et===null?"":de.format(et),[de]),pe=Rm({...e,value:F}),Se=c!==void 0&&!isNaN(c)?c:1;me.style==="percent"&&(c===void 0||isNaN(c))&&(Se=.01);let[$e,Le]=V.useState(F),[re,Ee]=V.useState(A),[se,ue]=V.useState(h);(!Object.is(F,$e)||A!==re||h!==se)&&(te(be(F)),Le(F),Ee(A),ue(h));let ke=V.useMemo(()=>Y.parse(Q),[Y,Q]),ce=()=>{if(!Q.length){G(NaN),te(_===void 0?"":be(F));return}if(isNaN(ke)){te(be(F));return}let et;c===void 0||isNaN(c)?et=Wg(ke,t,i):et=Tf(ke,t,i,c),et=Y.parse(be(et)),G(et),te(be(_===void 0?et:F))},Pe=(et,Ke=0)=>{let ot=ke;if(isNaN(ot)){let Pt=isNaN(Ke)?0:Ke;return Tf(Pt,t,i,Se)}else{let Pt=Tf(ot,t,i,Se);return et==="+"&&Pt>ot||et==="-"&&Pt<ot?Pt:Tf(y4(et,ot,Se),t,i,Se)}},xe=()=>{let et=Pe("+",t);et===F&&te(be(et)),G(et),pe.commitValidation()},Te=()=>{let et=Pe("-",i);et===F&&te(be(et)),G(et),pe.commitValidation()},Ie=()=>{i!=null&&(G(Tf(i,t,i,Se)),pe.commitValidation())},Me=()=>{t!=null&&(G(t),pe.commitValidation())},Xe=V.useMemo(()=>!B&&!N&&(isNaN(ke)||i===void 0||isNaN(i)||Tf(ke,t,i,Se)>ke||y4("+",ke,Se)<=i),[B,N,t,i,Se,ke]),Ce=V.useMemo(()=>!B&&!N&&(isNaN(ke)||t===void 0||isNaN(t)||Tf(ke,t,i,Se)<ke||y4("-",ke,Se)>=t),[B,N,t,i,Se,ke]);return{...pe,validate:et=>Y.isValidPartialNumber(et,t,i),increment:xe,incrementToMax:Ie,decrement:Te,decrementToMin:Me,canIncrement:Xe,canDecrement:Ce,minValue:t,maxValue:i,numberValue:ke,setNumberValue:G,setInputValue:te,inputValue:Q,commit:ce}}function y4(e,t,i){let c=e==="+"?t+i:t-i;if(t%1!==0||i%1!==0){const h=t.toString().split("."),_=i.toString().split("."),w=h[1]&&h[1].length||0,a=_[1]&&_[1].length||0,A=Math.pow(10,Math.max(w,a));t=Math.round(t*A),i=Math.round(i*A),c=e==="+"?t+i:t-i,c/=A}return c}var qB={};qB={decrease:e=>`خفض ${e.fieldLabel}`,increase:e=>`زيادة ${e.fieldLabel}`,numberField:"حقل رقمي"};var WB={};WB={decrease:e=>`Намаляване ${e.fieldLabel}`,increase:e=>`Усилване ${e.fieldLabel}`,numberField:"Номер на полето"};var KB={};KB={decrease:e=>`Snížit ${e.fieldLabel}`,increase:e=>`Zvýšit ${e.fieldLabel}`,numberField:"Číselné pole"};var ZB={};ZB={decrease:e=>`Reducer ${e.fieldLabel}`,increase:e=>`Øg ${e.fieldLabel}`,numberField:"Talfelt"};var XB={};XB={decrease:e=>`${e.fieldLabel} verringern`,increase:e=>`${e.fieldLabel} erhöhen`,numberField:"Nummernfeld"};var YB={};YB={decrease:e=>`Μείωση ${e.fieldLabel}`,increase:e=>`Αύξηση ${e.fieldLabel}`,numberField:"Πεδίο αριθμού"};var JB={};JB={decrease:e=>`Decrease ${e.fieldLabel}`,increase:e=>`Increase ${e.fieldLabel}`,numberField:"Number field"};var QB={};QB={decrease:e=>`Reducir ${e.fieldLabel}`,increase:e=>`Aumentar ${e.fieldLabel}`,numberField:"Campo de número"};var eN={};eN={decrease:e=>`Vähenda ${e.fieldLabel}`,increase:e=>`Suurenda ${e.fieldLabel}`,numberField:"Numbri väli"};var tN={};tN={decrease:e=>`Vähennä ${e.fieldLabel}`,increase:e=>`Lisää ${e.fieldLabel}`,numberField:"Numerokenttä"};var rN={};rN={decrease:e=>`Diminuer ${e.fieldLabel}`,increase:e=>`Augmenter ${e.fieldLabel}`,numberField:"Champ de nombre"};var nN={};nN={decrease:e=>`הקטן ${e.fieldLabel}`,increase:e=>`הגדל ${e.fieldLabel}`,numberField:"שדה מספר"};var aN={};aN={decrease:e=>`Smanji ${e.fieldLabel}`,increase:e=>`Povećaj ${e.fieldLabel}`,numberField:"Polje broja"};var iN={};iN={decrease:e=>`${e.fieldLabel} csökkentése`,increase:e=>`${e.fieldLabel} növelése`,numberField:"Számmező"};var sN={};sN={decrease:e=>`Riduci ${e.fieldLabel}`,increase:e=>`Aumenta ${e.fieldLabel}`,numberField:"Campo numero"};var oN={};oN={decrease:e=>`${e.fieldLabel}を縮小`,increase:e=>`${e.fieldLabel}を拡大`,numberField:"数値フィールド"};var lN={};lN={decrease:e=>`${e.fieldLabel} 감소`,increase:e=>`${e.fieldLabel} 증가`,numberField:"번호 필드"};var cN={};cN={decrease:e=>`Sumažinti ${e.fieldLabel}`,increase:e=>`Padidinti ${e.fieldLabel}`,numberField:"Numerio laukas"};var uN={};uN={decrease:e=>`Samazināšana ${e.fieldLabel}`,increase:e=>`Palielināšana ${e.fieldLabel}`,numberField:"Skaitļu lauks"};var dN={};dN={decrease:e=>`Reduser ${e.fieldLabel}`,increase:e=>`Øk ${e.fieldLabel}`,numberField:"Tallfelt"};var hN={};hN={decrease:e=>`${e.fieldLabel} verlagen`,increase:e=>`${e.fieldLabel} verhogen`,numberField:"Getalveld"};var fN={};fN={decrease:e=>`Zmniejsz ${e.fieldLabel}`,increase:e=>`Zwiększ ${e.fieldLabel}`,numberField:"Pole numeru"};var pN={};pN={decrease:e=>`Diminuir ${e.fieldLabel}`,increase:e=>`Aumentar ${e.fieldLabel}`,numberField:"Campo de número"};var mN={};mN={decrease:e=>`Diminuir ${e.fieldLabel}`,increase:e=>`Aumentar ${e.fieldLabel}`,numberField:"Campo numérico"};var gN={};gN={decrease:e=>`Scădere ${e.fieldLabel}`,increase:e=>`Creștere ${e.fieldLabel}`,numberField:"Câmp numeric"};var yN={};yN={decrease:e=>`Уменьшение ${e.fieldLabel}`,increase:e=>`Увеличение ${e.fieldLabel}`,numberField:"Числовое поле"};var xN={};xN={decrease:e=>`Znížiť ${e.fieldLabel}`,increase:e=>`Zvýšiť ${e.fieldLabel}`,numberField:"Číselné pole"};var vN={};vN={decrease:e=>`Upadati ${e.fieldLabel}`,increase:e=>`Povečajte ${e.fieldLabel}`,numberField:"Številčno polje"};var _N={};_N={decrease:e=>`Smanji ${e.fieldLabel}`,increase:e=>`Povećaj ${e.fieldLabel}`,numberField:"Polje broja"};var bN={};bN={decrease:e=>`Minska ${e.fieldLabel}`,increase:e=>`Öka ${e.fieldLabel}`,numberField:"Nummerfält"};var wN={};wN={decrease:e=>`${e.fieldLabel} azalt`,increase:e=>`${e.fieldLabel} arttır`,numberField:"Sayı alanı"};var SN={};SN={decrease:e=>`Зменшити ${e.fieldLabel}`,increase:e=>`Збільшити ${e.fieldLabel}`,numberField:"Поле номера"};var TN={};TN={decrease:e=>`降低 ${e.fieldLabel}`,increase:e=>`提高 ${e.fieldLabel}`,numberField:"数字字段"};var EN={};EN={decrease:e=>`縮小 ${e.fieldLabel}`,increase:e=>`放大 ${e.fieldLabel}`,numberField:"數字欄位"};var CN={};CN={"ar-AE":qB,"bg-BG":WB,"cs-CZ":KB,"da-DK":ZB,"de-DE":XB,"el-GR":YB,"en-US":JB,"es-ES":QB,"et-EE":eN,"fi-FI":tN,"fr-FR":rN,"he-IL":nN,"hr-HR":aN,"hu-HU":iN,"it-IT":sN,"ja-JP":oN,"ko-KR":lN,"lt-LT":cN,"lv-LV":uN,"nb-NO":dN,"nl-NL":hN,"pl-PL":fN,"pt-BR":pN,"pt-PT":mN,"ro-RO":gN,"ru-RU":yN,"sk-SK":xN,"sl-SI":vN,"sr-SP":_N,"sv-SE":bN,"tr-TR":wN,"uk-UA":SN,"zh-CN":TN,"zh-TW":EN};function Dte(e){return e&&e.__esModule?e.default:e}function Pte(e,t,i){let{id:c,decrementAriaLabel:h,incrementAriaLabel:_,isDisabled:w,isReadOnly:a,isRequired:A,minValue:B,maxValue:N,autoFocus:F,label:G,formatOptions:Q,onBlur:te=()=>{},onFocus:Y,onFocusChange:oe,onKeyDown:de,onKeyUp:me,description:be,errorMessage:pe,isWheelDisabled:Se,...$e}=e,{increment:Le,incrementToMax:re,decrement:Ee,decrementToMin:se,numberValue:ue,inputValue:ke,commit:ce,commitValidation:Pe}=t;const xe=Eu(Dte(CN),"@react-aria/numberfield");let Te=Bs(c),{focusProps:Ie}=P_({onBlur(){ce()}}),Me=iS(Q),Xe=V.useMemo(()=>Me.resolvedOptions(),[Me]),Ce=iS({...Q,currencySign:void 0}),He=V.useMemo(()=>isNaN(ue)?"":Ce.format(ue),[Ce,ue]),{spinButtonProps:et,incrementButtonProps:Ke,decrementButtonProps:ot}=Y$({isDisabled:w,isReadOnly:a,isRequired:A,maxValue:N,minValue:B,onIncrement:Le,onIncrementToMax:re,onDecrement:Ee,onDecrementToMin:se,value:ue,textValue:He}),[Pt,Et]=V.useState(!1),{focusWithinProps:Wt}=yd({isDisabled:w,onFocusWithinChange:Et}),Dt=V.useCallback(oa=>{Math.abs(oa.deltaY)<=Math.abs(oa.deltaX)||(oa.deltaY>0?Le():oa.deltaY<0&&Ee())},[Ee,Le]);jG({onScroll:Dt,isDisabled:Se||w||a||!Pt},i);var De;let ur=((De=Xe.maximumFractionDigits)!==null&&De!==void 0?De:0)>0,Sr=t.minValue===void 0||isNaN(t.minValue)||t.minValue<0,yt="numeric";Bk()?Sr?yt="text":ur&&(yt="decimal"):fx()&&(Sr?yt="numeric":ur&&(yt="decimal"));let dt=oa=>{t.validate(oa)&&t.setInputValue(oa)},$t=Fl(e),or=V.useCallback(oa=>{oa.key==="Enter"?(ce(),Pe()):oa.continuePropagation()},[ce,Pe]),{isInvalid:Er,validationErrors:mr,validationDetails:Pr}=t.displayValidation,{labelProps:Fr,inputProps:Bn,descriptionProps:Xr,errorMessageProps:On}=jJ({...$e,...$t,name:void 0,label:G,autoFocus:F,isDisabled:w,isReadOnly:a,isRequired:A,validate:void 0,[ax]:t,value:ke,defaultValue:void 0,autoComplete:"off","aria-label":e["aria-label"]||void 0,"aria-labelledby":e["aria-labelledby"]||void 0,id:Te,type:"text",inputMode:yt,onChange:dt,onBlur:te,onFocus:Y,onFocusChange:oe,onKeyDown:V.useMemo(()=>qi(or,de),[or,de]),onKeyUp:me,description:be,errorMessage:pe},t,i);D_(i,t.numberValue,t.setNumberValue);let fr=xr(et,Ie,Bn,{role:null,"aria-roledescription":Mm()?null:xe.format("numberField"),"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null,autoCorrect:"off",spellCheck:"false"});e.validationBehavior==="native"&&(fr["aria-required"]=void 0);let Tn=oa=>{var qn;document.activeElement!==i.current&&(oa.pointerType==="mouse"?(qn=i.current)===null||qn===void 0||qn.focus():oa.target.focus())},kr=e["aria-label"]||(typeof e.label=="string"?e.label:""),Dr;kr||(Dr=e.label!=null?Fr.id:e["aria-labelledby"]);let Br=Bs(),an=Bs(),Sa=xr(Ke,{"aria-label":_||xe.format("increase",{fieldLabel:kr}).trim(),id:Dr&&!_?Br:null,"aria-labelledby":Dr&&!_?`${Br} ${Dr}`:null,"aria-controls":Te,excludeFromTabOrder:!0,preventFocusOnPress:!0,allowFocusWhenDisabled:!0,isDisabled:!t.canIncrement,onPressStart:Tn}),Za=xr(ot,{"aria-label":h||xe.format("decrease",{fieldLabel:kr}).trim(),id:Dr&&!h?an:null,"aria-labelledby":Dr&&!h?`${an} ${Dr}`:null,"aria-controls":Te,excludeFromTabOrder:!0,preventFocusOnPress:!0,allowFocusWhenDisabled:!0,isDisabled:!t.canDecrement,onPressStart:Tn});return{groupProps:{...Wt,role:"group","aria-disabled":w,"aria-invalid":Er?"true":void 0},labelProps:Fr,inputProps:fr,incrementButtonProps:Sa,decrementButtonProps:Za,errorMessageProps:On,descriptionProps:Xr,isInvalid:Er,validationErrors:mr,validationDetails:Pr}}function Mte(e){var t,i,c;const h=Pi(),{validationBehavior:_}=Gf(wh)||{},[w,a]=Zo(e,LM.variantKeys),{ref:A,as:B,label:N,baseRef:F,wrapperRef:G,description:Q,className:te,classNames:Y,autoFocus:oe,startContent:de,endContent:me,onClear:be,onChange:pe,validationBehavior:Se=(t=_??(h==null?void 0:h.validationBehavior))!=null?t:"native",innerWrapperRef:$e,onValueChange:Le,hideStepper:re,...Ee}=w,[se,ue]=V.useState(!1),ke=B||"div",ce=(c=(i=e.disableAnimation)!=null?i:h==null?void 0:h.disableAnimation)!=null?c:!1,Pe=Ba(A),xe=Ba(F),Te=Ba(G),Ie=Ba($e),{locale:Me}=Ms(),Xe=Cte({...e,validationBehavior:Se,locale:Me,onChange:qi(Le,pe)}),{groupProps:Ce,labelProps:He,inputProps:et,incrementButtonProps:Ke,decrementButtonProps:ot,descriptionProps:Pt,errorMessageProps:Et,isInvalid:Wt,validationErrors:Dt,validationDetails:er}=Pte({...e,validationBehavior:Se},Xe,Pe),De=isNaN(Xe.numberValue)?"":Xe.numberValue,ur=!md(De),Sr=ur||se,yt=Nr(Y==null?void 0:Y.base,te,ur?"is-filled":""),dt=V.useCallback(()=>{var pt;Xe.setInputValue(""),be==null||be(),(pt=Pe.current)==null||pt.focus()},[Xe.setInputValue,be]);yx(()=>{Pe.current&&Xe.setInputValue(Pe.current.value)},[Pe.current]);const{isFocusVisible:$t,isFocused:or,focusProps:Er}=Ac({autoFocus:oe,isTextInput:!0}),{isHovered:mr,hoverProps:Pr}=wo({isDisabled:!!(e!=null&&e.isDisabled)}),{isHovered:Fr,hoverProps:Bn}=wo({isDisabled:!!(e!=null&&e.isDisabled)}),{focusProps:Xr,isFocusVisible:On}=Ac(),{focusWithinProps:fr}=yd({onFocusWithinChange:ue}),{pressProps:Tn}=wu({isDisabled:!!(e!=null&&e.isDisabled)||!!(e!=null&&e.isReadOnly),onPress:dt}),kr=e2({labelPlacement:e.labelPlacement,label:N}),Dr=typeof w.errorMessage=="function"?w.errorMessage({isInvalid:Wt,validationErrors:Dt,validationDetails:er}):w.errorMessage||(Dt==null?void 0:Dt.join(" ")),Br=!!be||e.isClearable,an=!!N||!!Q||!!Dr,Sa=!!w.placeholder,Za=!!N,oa=!!Q||!!Dr,qn=kr==="outside"||kr==="outside-left",Wn=kr==="inside",Da=Pe.current?(!Pe.current.value||Pe.current.value===""||!De)&&Sa:!1,Ia=kr==="outside-left",ja=!!de,Wr=qn?kr==="outside-left"||Sa||kr==="outside"&&ja:!1,yi=kr==="outside"&&!Sa&&!ja,Zn=V.useMemo(()=>LM({...a,isInvalid:Wt,isClearable:Br,disableAnimation:ce}),[Ko(a),Wt,Br,ja,ce]),cn=V.useCallback(pt=>{pt.key==="Escape"&&De&&(Br||be)&&!e.isReadOnly&&(Xe.setInputValue(""),be==null||be())},[De,Xe.setInputValue,be,Br,e.isReadOnly]),ya=V.useCallback((pt={})=>({ref:xe,className:Zn.base({class:yt}),"data-slot":"base","data-filled":Vt(ur||Sa||ja||Da),"data-filled-within":Vt(Sr||Sa||ja||Da),"data-focus-within":Vt(se),"data-focus-visible":Vt($t),"data-readonly":Vt(e.isReadOnly),"data-focus":Vt(or),"data-hover":Vt(mr||Fr),"data-required":Vt(e.isRequired),"data-invalid":Vt(Wt),"data-disabled":Vt(e.isDisabled),"data-has-elements":Vt(an),"data-has-helper":Vt(oa),"data-has-label":Vt(Za),"data-has-value":Vt(!Da),...fr,...pt}),[Zn,yt,ur,or,mr,Fr,Wt,oa,Za,an,Da,ja,se,$t,Sa,fr,e.isReadOnly,e.isRequired,e.isDisabled]),Xa=V.useCallback((pt={})=>({"data-slot":"label",className:Zn.label({class:Y==null?void 0:Y.label}),...xr(He,Bn,pt)}),[Zn,Fr,He,Y==null?void 0:Y.label]),js=V.useCallback((pt={})=>({"data-slot":"input","data-filled":Vt(ur),"data-has-start-content":Vt(ja),"data-has-end-content":Vt(!!me),className:Zn.input({class:Nr(Y==null?void 0:Y.input,ur?"is-filled":"")}),...xr(Er,et,Wo(Ee,{enabled:!0,labelable:!0,omitEventNames:new Set(Object.keys(et)),omitPropNames:new Set(["value"])}),pt),"aria-readonly":Vt(e.isReadOnly),onChange:qi(et.onChange,pe),onKeyDown:qi(et.onKeyDown,pt.onKeyDown,cn),ref:Pe}),[Zn,Er,et,Ee,ur,ja,me,Y==null?void 0:Y.input,e.isReadOnly,e.isRequired,pe,cn]),qa=V.useCallback((pt={})=>({name:e.name,value:De,"data-slot":"hidden-input",type:"hidden",...pt}),[De,e.name]),yn=V.useCallback((pt={})=>({ref:Te,"data-slot":"input-wrapper","data-hover":Vt(mr||Fr),"data-focus-visible":Vt($t),"data-focus":Vt(or),className:Zn.inputWrapper({class:Nr(Y==null?void 0:Y.inputWrapper,ur?"is-filled":"")}),...xr(pt,Pr),onClick:At=>{Pe.current&&At.currentTarget===At.target&&Pe.current.focus()},style:{cursor:"text",...pt.style}}),[Zn,mr,Fr,$t,or,De,Y==null?void 0:Y.inputWrapper]),St=V.useCallback((pt={})=>({ref:Ie,"data-slot":"inner-wrapper",onClick:At=>{Pe.current&&At.currentTarget===At.target&&Pe.current.focus()},className:Zn.innerWrapper({class:Nr(Y==null?void 0:Y.innerWrapper,pt==null?void 0:pt.className)}),...xr(Ce,pt)}),[Zn,Y==null?void 0:Y.innerWrapper]),ye=V.useCallback((pt={})=>({...pt,"data-slot":"main-wrapper",className:Zn.mainWrapper({class:Nr(Y==null?void 0:Y.mainWrapper,pt==null?void 0:pt.className)})}),[Zn,Y==null?void 0:Y.mainWrapper]),Ae=V.useCallback((pt={})=>({...pt,"data-slot":"helper-wrapper",className:Zn.helperWrapper({class:Nr(Y==null?void 0:Y.helperWrapper,pt==null?void 0:pt.className)})}),[Zn,Y==null?void 0:Y.helperWrapper]),Ve=V.useCallback((pt={})=>({...pt,...Pt,"data-slot":"description",className:Zn.description({class:Nr(Y==null?void 0:Y.label,pt==null?void 0:pt.className)})}),[Zn,Y==null?void 0:Y.description]),Je=V.useCallback((pt={})=>({...pt,...Et,"data-slot":"error-message",className:Zn.errorMessage({class:Nr(Y==null?void 0:Y.errorMessage,pt==null?void 0:pt.className)})}),[Zn,Et,Y==null?void 0:Y.errorMessage]),tt=V.useCallback((pt={})=>({...pt,type:"button",tabIndex:-1,disabled:e.isDisabled,"aria-label":"clear input","data-slot":"clear-button","data-focus-visible":Vt(On),className:Zn.clearButton({class:Nr(Y==null?void 0:Y.clearButton,pt==null?void 0:pt.className)}),...xr(Tn,Xr)}),[Zn,On,Tn,Xr,Y==null?void 0:Y.clearButton]),ut=V.useCallback((pt={})=>({...pt,"data-slot":"stepper-wrapper",className:Zn.stepperWrapper({class:Nr(Y==null?void 0:Y.stepperWrapper,pt==null?void 0:pt.className)})}),[Zn]),bt=V.useCallback((pt={})=>({...pt,type:"button",disabled:e.isDisabled,"data-slot":"increase-button",className:Zn.stepperButton({class:Nr(Y==null?void 0:Y.stepperButton,pt==null?void 0:pt.className)}),...xr(Ke,pt)}),[Zn]),ft=V.useCallback((pt={})=>({type:"button",disabled:e.isDisabled,"data-slot":"decrease-button",className:Zn.stepperButton({class:Nr(Y==null?void 0:Y.stepperButton,pt==null?void 0:pt.className)}),...xr(ot,pt)}),[Zn]);return{Component:ke,classNames:Y,domRef:Pe,label:N,description:Q,startContent:de,endContent:me,labelPlacement:kr,isClearable:Br,hasHelper:oa,hasStartContent:ja,isLabelOutside:Wr,isOutsideLeft:Ia,isLabelOutsideAsPlaceholder:yi,shouldLabelBeOutside:qn,shouldLabelBeInside:Wn,hasPlaceholder:Sa,isInvalid:Wt,errorMessage:Dr,hideStepper:re,incrementButtonProps:Ke,decrementButtonProps:ot,getBaseProps:ya,getLabelProps:Xa,getNumberInputProps:js,getHiddenNumberInputProps:qa,getMainWrapperProps:ye,getInputWrapperProps:yn,getInnerWrapperProps:St,getHelperWrapperProps:Ae,getDescriptionProps:Ve,getErrorMessageProps:Je,getClearButtonProps:tt,getStepperIncreaseButtonProps:bt,getStepperDecreaseButtonProps:ft,getStepperWrapperProps:ut}}var DN=Na((e,t)=>{const{Component:i,label:c,description:h,isClearable:_,startContent:w,endContent:a,labelPlacement:A,hasHelper:B,isOutsideLeft:N,shouldLabelBeOutside:F,errorMessage:G,isInvalid:Q,hideStepper:te,getBaseProps:Y,getLabelProps:oe,getNumberInputProps:de,getHiddenNumberInputProps:me,getInnerWrapperProps:be,getInputWrapperProps:pe,getMainWrapperProps:Se,getHelperWrapperProps:$e,getDescriptionProps:Le,getErrorMessageProps:re,getClearButtonProps:Ee,getStepperIncreaseButtonProps:se,getStepperDecreaseButtonProps:ue,getStepperWrapperProps:ke}=Mte({...e,ref:t}),ce=c?b.jsx("label",{...oe(),children:c}):null,Pe=V.useMemo(()=>_?b.jsxs(b.Fragment,{children:[b.jsx("button",{...Ee(),children:b.jsx(pT,{})}),a]}):a,[_,Ee]),xe=V.useMemo(()=>{const Me=Q&&G;return!B||!(Me||h)?null:b.jsx("div",{...$e(),children:Me?b.jsx("div",{...re(),children:G}):b.jsx("div",{...Le(),children:h})})},[B,Q,G,h,$e,re,Le]),Te=V.useMemo(()=>b.jsxs("div",{...be(),children:[w,b.jsx("input",{...de()}),b.jsx("input",{...me()}),Pe,!te&&b.jsxs("div",{...ke(),children:[b.jsx(k6,{...se(),direction:"up"}),b.jsx(k6,{...ue(),direction:"down"})]})]}),[w,Pe,de,be]),Ie=V.useMemo(()=>F?b.jsxs("div",{...Se(),children:[b.jsxs("div",{...pe(),children:[N?null:ce,Te]}),xe]}):b.jsxs(b.Fragment,{children:[b.jsxs("div",{...pe(),children:[ce,Te]}),xe]}),[A,xe,F,ce,Te,G,h,Se,pe,re,Le]);return b.jsxs(i,{...Y(),children:[N?ce:null,Ie]})});DN.displayName="HeroUI.NumberInput";var gs=DN,PN={};PN={close:"إغلاق",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} إشعار`,other:()=>`${t.number(e.count)} إشعارات`})}.`};var MN={};MN={close:"Затвори",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} известие`,other:()=>`${t.number(e.count)} известия`})}.`};var AN={};AN={close:"Zavřít",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} oznámení`,other:()=>`${t.number(e.count)} oznámení`})}.`};var kN={};kN={close:"Luk",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} besked`,other:()=>`${t.number(e.count)} beskeder`})}.`};var RN={};RN={close:"Schließen",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} Benachrichtigung`,other:()=>`${t.number(e.count)} Benachrichtigungen`})}.`};var IN={};IN={close:"Κλείσιμο",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} ειδοποίηση`,other:()=>`${t.number(e.count)} ειδοποιήσεις`})}.`};var zN={};zN={close:"Close",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notification`,other:()=>`${t.number(e.count)} notifications`})}.`};var LN={};LN={close:"Cerrar",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notificación`,other:()=>`${t.number(e.count)} notificaciones`})}.`};var $N={};$N={close:"Sule",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} teatis`,other:()=>`${t.number(e.count)} teatist`})}.`};var BN={};BN={close:"Sulje",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} ilmoitus`,other:()=>`${t.number(e.count)} ilmoitusta`})}.`};var NN={};NN={close:"Fermer",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notification`,other:()=>`${t.number(e.count)} notifications`})}.`};var jN={};jN={close:"סגור",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} התראה`,other:()=>`${t.number(e.count)} התראות`})}.`};var ON={};ON={close:"Zatvori",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} obavijest`,other:()=>`${t.number(e.count)} obavijesti`})}.`};var FN={};FN={close:"Bezárás",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} értesítés`,other:()=>`${t.number(e.count)} értesítés`})}.`};var VN={};VN={close:"Chiudi",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notifica`,other:()=>`${t.number(e.count)} notifiche`})}.`};var UN={};UN={close:"閉じる",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} 個の通知`,other:()=>`${t.number(e.count)} 個の通知`})}。`};var GN={};GN={close:"닫기",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)}개 알림`,other:()=>`${t.number(e.count)}개 알림`})}.`};var HN={};HN={close:"Uždaryti",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} pranešimas`,other:()=>`${t.number(e.count)} pranešimai`})}.`};var qN={};qN={close:"Aizvērt",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} paziņojums`,other:()=>`${t.number(e.count)} paziņojumi`})}.`};var WN={};WN={close:"Lukk",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} varsling`,other:()=>`${t.number(e.count)} varsler`})}.`};var KN={};KN={close:"Sluiten",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} melding`,other:()=>`${t.number(e.count)} meldingen`})}.`};var ZN={};ZN={close:"Zamknij",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} powiadomienie`,few:()=>`${t.number(e.count)} powiadomienia`,many:()=>`${t.number(e.count)} powiadomień`,other:()=>`${t.number(e.count)} powiadomienia`})}.`};var XN={};XN={close:"Fechar",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notificação`,other:()=>`${t.number(e.count)} notificações`})}.`};var YN={};YN={close:"Fechar",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notificação`,other:()=>`${t.number(e.count)} notificações`})}.`};var JN={};JN={close:"Închideţi",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} notificare`,other:()=>`${t.number(e.count)} notificări`})}.`};var QN={};QN={close:"Закрыть",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} уведомление`,other:()=>`${t.number(e.count)} уведомления`})}.`};var ej={};ej={close:"Zatvoriť",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} oznámenie`,few:()=>`${t.number(e.count)} oznámenia`,other:()=>`${t.number(e.count)} oznámení`})}.`};var tj={};tj={close:"Zapri",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} obvestilo`,two:()=>`${t.number(e.count)} obvestili`,few:()=>`${t.number(e.count)} obvestila`,other:()=>`${t.number(e.count)} obvestil`})}.`};var rj={};rj={close:"Zatvori",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} obaveštenje`,other:()=>`${t.number(e.count)} obaveštenja`})}.`};var nj={};nj={close:"Stäng",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} meddelande`,other:()=>`${t.number(e.count)} meddelanden`})}.`};var aj={};aj={close:"Kapat",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} bildirim`,other:()=>`${t.number(e.count)} bildirim`})}.`};var ij={};ij={close:"Закрити",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} сповіщення`,other:()=>`${t.number(e.count)} сповіщення`})}.`};var sj={};sj={close:"关闭",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} 个通知`,other:()=>`${t.number(e.count)} 个通知`})}。`};var oj={};oj={close:"關閉",notifications:(e,t)=>`${t.plural(e.count,{one:()=>`${t.number(e.count)} 個通知`,other:()=>`${t.number(e.count)} 個通知`})}。`};var zT={};zT={"ar-AE":PN,"bg-BG":MN,"cs-CZ":AN,"da-DK":kN,"de-DE":RN,"el-GR":IN,"en-US":zN,"es-ES":LN,"et-EE":$N,"fi-FI":BN,"fr-FR":NN,"he-IL":jN,"hr-HR":ON,"hu-HU":FN,"it-IT":VN,"ja-JP":UN,"ko-KR":GN,"lt-LT":HN,"lv-LV":qN,"nb-NO":WN,"nl-NL":KN,"pl-PL":ZN,"pt-BR":XN,"pt-PT":YN,"ro-RO":JN,"ru-RU":QN,"sk-SK":ej,"sl-SI":tj,"sr-SP":rj,"sv-SE":nj,"tr-TR":aj,"uk-UA":ij,"zh-CN":sj,"zh-TW":oj};function Ate(e){return e&&e.__esModule?e.default:e}function kte(e,t,i){let{key:c,timer:h,timeout:_,animation:w}=e.toast;V.useEffect(()=>{if(!(h==null||_==null))return h.reset(_),()=>{h.pause()}},[h,_]);let[a,A]=rn.useState(!1);V.useEffect(()=>{(w==="entering"||w==="queued")&&A(!0)},[w]);let B=Bs(),N=vm(),F=Eu(Ate(zT),"@react-aria/toast");return{toastProps:{role:"alertdialog","aria-modal":"false","aria-label":e["aria-label"],"aria-labelledby":e["aria-labelledby"]||B,"aria-describedby":e["aria-describedby"]||N,"aria-details":e["aria-details"],"aria-hidden":w==="exiting"?"true":void 0,tabIndex:0},contentProps:{role:"alert","aria-atomic":"true",style:{visibility:a||w===null?"visible":"hidden"}},titleProps:{id:B},descriptionProps:{id:N},closeButtonProps:{"aria-label":F.format("close"),onPress:()=>t.close(c)}}}var x4={exports:{}},v4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R6;function Rte(){if(R6)return v4;R6=1;var e=s0();function t(F,G){return F===G&&(F!==0||1/F===1/G)||F!==F&&G!==G}var i=typeof Object.is=="function"?Object.is:t,c=e.useState,h=e.useEffect,_=e.useLayoutEffect,w=e.useDebugValue;function a(F,G){var Q=G(),te=c({inst:{value:Q,getSnapshot:G}}),Y=te[0].inst,oe=te[1];return _(function(){Y.value=Q,Y.getSnapshot=G,A(Y)&&oe({inst:Y})},[F,Q,G]),h(function(){return A(Y)&&oe({inst:Y}),F(function(){A(Y)&&oe({inst:Y})})},[F]),w(Q),Q}function A(F){var G=F.getSnapshot;F=F.value;try{var Q=G();return!i(F,Q)}catch{return!0}}function B(F,G){return G()}var N=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?B:a;return v4.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:N,v4}var I6;function Ite(){return I6||(I6=1,x4.exports=Rte()),x4.exports}var lj=Ite();const cj=1,_4=Symbol.for("react-aria-landmark-manager");function zte(e){return document.addEventListener("react-aria-landmark-manager-change",e),()=>document.removeEventListener("react-aria-landmark-manager-change",e)}function z6(){if(typeof document>"u")return null;let e=document[_4];return e&&e.version>=cj?e:(document[_4]=new $te,document.dispatchEvent(new CustomEvent("react-aria-landmark-manager-change")),document[_4])}function Lte(){return lj.useSyncExternalStore(zte,z6,z6)}class $te{setupIfNeeded(){this.isListening||(document.addEventListener("keydown",this.f6Handler,{capture:!0}),document.addEventListener("focusin",this.focusinHandler,{capture:!0}),document.addEventListener("focusout",this.focusoutHandler,{capture:!0}),this.isListening=!0)}teardownIfNeeded(){!this.isListening||this.landmarks.length>0||this.refCount>0||(document.removeEventListener("keydown",this.f6Handler,{capture:!0}),document.removeEventListener("focusin",this.focusinHandler,{capture:!0}),document.removeEventListener("focusout",this.focusoutHandler,{capture:!0}),this.isListening=!1)}focusLandmark(t,i){var c,h;(h=this.landmarks.find(_=>_.ref.current===t))===null||h===void 0||(c=h.focus)===null||c===void 0||c.call(h,i)}getLandmarksByRole(t){return new Set(this.landmarks.filter(i=>i.role===t))}getLandmarkByRole(t){return this.landmarks.find(i=>i.role===t)}addLandmark(t){if(this.setupIfNeeded(),this.landmarks.find(h=>h.ref===t.ref)||!t.ref.current)return;if(this.landmarks.filter(h=>h.role==="main").length>1&&console.error('Page can contain no more than one landmark with the role "main".'),this.landmarks.length===0){this.landmarks=[t],this.checkLabels(t.role);return}let i=0,c=this.landmarks.length-1;for(;i<=c;){let h=Math.floor((i+c)/2),_=t.ref.current.compareDocumentPosition(this.landmarks[h].ref.current);!!(_&Node.DOCUMENT_POSITION_PRECEDING||_&Node.DOCUMENT_POSITION_CONTAINS)?i=h+1:c=h-1}this.landmarks.splice(i,0,t),this.checkLabels(t.role)}updateLandmark(t){let i=this.landmarks.findIndex(c=>c.ref===t.ref);i>=0&&(this.landmarks[i]={...this.landmarks[i],...t},this.checkLabels(this.landmarks[i].role))}removeLandmark(t){this.landmarks=this.landmarks.filter(i=>i.ref!==t),this.teardownIfNeeded()}checkLabels(t){let i=this.getLandmarksByRole(t);if(i.size>1){let c=[...i].filter(h=>!h.label);if(c.length>0)console.warn(`Page contains more than one landmark with the '${t}' role. If two or more landmarks on a page share the same role, all must be labeled with an aria-label or aria-labelledby attribute: `,c.map(h=>h.ref.current));else{let h=[...i].map(w=>w.label);h.filter((w,a)=>h.indexOf(w)!==a).forEach(w=>{console.warn(`Page contains more than one landmark with the '${t}' role and '${w}' label. If two or more landmarks on a page share the same role, they must have unique labels: `,[...i].filter(a=>a.label===w).map(a=>a.ref.current))})}}}closestLandmark(t){let i=new Map(this.landmarks.map(h=>[h.ref.current,h])),c=t;for(;c&&!i.has(c)&&c!==document.body&&c.parentElement;)c=c.parentElement;return i.get(c)}getNextLandmark(t,{backward:i}){var c;let h=this.closestLandmark(t),_=i?this.landmarks.length-1:0;h&&(_=this.landmarks.indexOf(h)+(i?-1:1));let w=()=>{if(_<0){if(!t.dispatchEvent(new CustomEvent("react-aria-landmark-navigation",{detail:{direction:"backward"},bubbles:!0,cancelable:!0})))return!0;_=this.landmarks.length-1}else if(_>=this.landmarks.length){if(!t.dispatchEvent(new CustomEvent("react-aria-landmark-navigation",{detail:{direction:"forward"},bubbles:!0,cancelable:!0})))return!0;_=0}return _<0||_>=this.landmarks.length};if(w())return;let a=_;for(;!((c=this.landmarks[_].ref.current)===null||c===void 0)&&c.closest("[aria-hidden=true]");){if(_+=i?-1:1,w())return;if(_===a)break}return this.landmarks[_]}f6Handler(t){t.key==="F6"&&(t.altKey?this.focusMain():this.navigate(t.target,t.shiftKey))&&(t.preventDefault(),t.stopPropagation())}focusMain(){let t=this.getLandmarkByRole("main");return t&&t.ref.current&&document.contains(t.ref.current)?(this.focusLandmark(t.ref.current,"forward"),!0):!1}navigate(t,i){let c=this.getNextLandmark(t,{backward:i});if(!c)return!1;if(c.lastFocused){let h=c.lastFocused;if(document.body.contains(h))return h.focus(),!0}return c.ref.current&&document.contains(c.ref.current)?(this.focusLandmark(c.ref.current,i?"backward":"forward"),!0):!1}focusinHandler(t){let i=this.closestLandmark(t.target);i&&i.ref.current!==t.target&&this.updateLandmark({ref:i.ref,lastFocused:t.target});let c=t.relatedTarget;if(c){let h=this.closestLandmark(c);h&&h.ref.current===c&&h.blur()}}focusoutHandler(t){let i=t.target,c=t.relatedTarget;if(!c||c===document){let h=this.closestLandmark(i);h&&h.ref.current===i&&h.blur()}}createLandmarkController(){let t=this;return t.refCount++,t.setupIfNeeded(),{navigate(i,c){let h=(c==null?void 0:c.from)||document.activeElement;return t.navigate(h,i==="backward")},focusNext(i){let c=(i==null?void 0:i.from)||document.activeElement;return t.navigate(c,!1)},focusPrevious(i){let c=(i==null?void 0:i.from)||document.activeElement;return t.navigate(c,!0)},focusMain(){return t.focusMain()},dispose(){t&&(t.refCount--,t.teardownIfNeeded(),t=null)}}}registerLandmark(t){return this.landmarks.find(i=>i.ref===t.ref)?this.updateLandmark(t):this.addLandmark(t),()=>this.removeLandmark(t.ref)}constructor(){this.landmarks=[],this.isListening=!1,this.refCount=0,this.version=cj,this.f6Handler=this.f6Handler.bind(this),this.focusinHandler=this.focusinHandler.bind(this),this.focusoutHandler=this.focusoutHandler.bind(this)}}function Bte(e,t){const{role:i,"aria-label":c,"aria-labelledby":h,focus:_}=e;let w=Lte(),a=c||h,[A,B]=V.useState(!1),N=V.useCallback(()=>{B(!0)},[B]),F=V.useCallback(()=>{B(!1)},[B]);return si(()=>{if(w)return w.registerLandmark({ref:t,label:a,role:i,focus:_||N,blur:F})},[w,a,t,i,_,N,F]),V.useEffect(()=>{var G;A&&((G=t.current)===null||G===void 0||G.focus())},[A,t]),{landmarkProps:{role:i,tabIndex:A?-1:void 0,"aria-label":c,"aria-labelledby":h}}}function Nte(e){return e&&e.__esModule?e.default:e}function jte(e,t,i){let c=Eu(Nte(zT),"@react-aria/toast"),{landmarkProps:h}=Bte({role:"region","aria-label":e["aria-label"]||c.format("notifications",{count:t.visibleToasts.length})},i),{hoverProps:_}=wo({onHoverStart:t.pauseAll,onHoverEnd:t.resumeAll}),w=V.useRef([]),a=V.useRef(t.visibleToasts),A=V.useRef(null);si(()=>{if(A.current===-1||t.visibleToasts.length===0||!i.current){w.current=[],a.current=t.visibleToasts;return}if(w.current=[...i.current.querySelectorAll('[role="alertdialog"]')],a.current.length===t.visibleToasts.length&&t.visibleToasts.every((Q,te)=>Q.key===a.current[te].key)){a.current=t.visibleToasts;return}let F=a.current.map((Q,te)=>({...Q,i:te,isRemoved:!t.visibleToasts.some(Y=>Q.key===Y.key)})),G=F.findIndex(Q=>Q.i===A.current);if(G>-1){let Q=0,te,Y;for(;Q<=G;)F[Q].isRemoved||(Y=Math.max(0,Q-1)),Q++;for(;Q<F.length;){if(!F[Q].isRemoved){te=Q-1;break}Q++}Y===void 0&&te===void 0&&(Y=0),Y>=0&&Y<w.current.length?pl(w.current[Y]):te>=0&&te<w.current.length&&pl(w.current[te])}a.current=t.visibleToasts},[t.visibleToasts,i]);let B=V.useRef(null),{focusWithinProps:N}=yd({onFocusWithin:F=>{t.pauseAll(),B.current=F.relatedTarget},onBlurWithin:()=>{t.resumeAll(),B.current=null}});return V.useEffect(()=>{t.visibleToasts.length===0&&B.current&&document.body.contains(B.current)&&(Sm()==="pointer"?pl(B.current):B.current.focus(),B.current=null)},[i,t.visibleToasts.length]),V.useEffect(()=>()=>{B.current&&document.body.contains(B.current)&&(Sm()==="pointer"?pl(B.current):B.current.focus(),B.current=null)},[i]),{regionProps:xr(h,_,N,{tabIndex:-1,"data-react-aria-top-layer":!0,onFocus:F=>{let G=F.target.closest('[role="alertdialog"]');A.current=w.current.findIndex(Q=>Q===G)},onBlur:()=>{A.current=-1}})}}var L6=100,$6=20;function Ote(e){var t,i;const[c,h]=Zo(e,MM.variantKeys),{ref:_,as:w,title:a,description:A,className:B,classNames:N,toast:F,endContent:G,closeIcon:Q,hideIcon:te=!1,placement:Y="bottom-right",isRegionExpanded:oe,hideCloseButton:de=!1,state:me,total:be=1,index:pe=0,heights:Se,promise:$e,setHeights:Le,toastOffset:re=0,motionProps:Ee,timeout:se=6e3,shouldShowTimeoutProgress:ue=!1,icon:ke,onClose:ce,severity:Pe,maxVisibleToasts:xe,...Te}=c,{isHovered:Ie,hoverProps:Me}=wo({isDisabled:!1}),Xe=Pi(),Ce=(i=(t=e==null?void 0:e.disableAnimation)!=null?t:Xe==null?void 0:Xe.disableAnimation)!=null?i:!1,He=$z();let et=Y;He&&(Y.includes("top")?et="top-center":et="bottom-center");const Ke=V.useRef(null),ot=V.useRef(null),Pt=V.useRef(0),Et=V.useRef(null),Wt=V.useRef(0),Dt=V.useRef(0);V.useEffect(()=>{Et.current&&(Et.current.style.width="0%")},[]);const[er,De]=V.useState(!!$e);V.useEffect(()=>{$e&&$e.finally(()=>{De(!1)})},[$e]),V.useEffect(()=>{const yn=St=>{if(!se||er)return;if(ot.current===null&&(ot.current=St),Ie||oe||pe!=be-1){Wt.current+=St-ot.current,ot.current=null,Ke.current=requestAnimationFrame(yn);return}const ye=St-ot.current+Wt.current;Dt.current=ye,Dt.current>=se&&me.close(F.key),Pt.current=Math.min(ye/se*100,100),Et.current&&(Et.current.style.width=`${ue?Pt.current:0}%`),Pt.current<100&&(Ke.current=requestAnimationFrame(yn))};return Ke.current=requestAnimationFrame(yn),()=>{Ke.current!==null&&cancelAnimationFrame(Ke.current)}},[se,ue,me,Ie,pe,be,oe,er]);const ur=w||"div",Sr=ke,yt=Ba(_),dt=Nr(B,N==null?void 0:N.base),{toastProps:$t,contentProps:or,titleProps:Er,descriptionProps:mr,closeButtonProps:Pr}=kte(c,me),[Fr,Bn]=V.useState(!1);V.useEffect(()=>{Bn(!0)},[]);const[Xr,On]=V.useState(0);V.useLayoutEffect(()=>{if(!yt.current||!Fr)return;const yn=yt.current,St=yn.style.height;yn.style.height="auto";const ye=getComputedStyle(yn),Ae=parseFloat(ye.marginTop),Ve=parseFloat(ye.marginBottom),Je=yn.getBoundingClientRect().height+Ae+Ve;yn.style.height=St,On(ut=>ut!==Je?Je:ut);const tt=[...Se];tt.length>pe?tt[pe]=Je:tt.push(Je),Le(tt)},[Fr,be,Le,pe]);let fr=4;for(let yn=pe+1;yn<be;yn++)fr+=Se[yn];const Tn=Se[Se.length-1],kr=V.useMemo(()=>MM({...h,disableAnimation:Ce}),[Ko(h)]),Dr=et.includes("top")?1:-1,Br={hidden:{opacity:0,y:-50*Dr},visible:{opacity:1,y:0},exit:{opacity:0,y:-50*Dr}},[an,Sa]=V.useState(!1),[Za,oa]=V.useState(0),qn=(yn,St)=>{const ye=et.includes("right"),Ae=et.includes("left"),Ve=et==="top-center",Je=et==="bottom-center";if(ye&&yn>=L6||Ae&&yn<=-100||Ve&&St<=-20||Je&&St>=$6)return!0},Wn=yn=>{const St={top:0,bottom:0,right:0,left:0};return yn==="bottom-center"?(St.bottom=1,St):yn==="top-center"?(St.top=1,St):yn.includes("right")?(St.right=1,St):yn.includes("left")?(St.left=1,St):(St.left=1,St.right=1,St)};let Da;an&&et==="bottom-center"||et==="top-center"?Da=Math.max(0,1-Za/($6+5)):an&&(Da=Math.max(0,1-Za/(L6+20)));const Ia=V.useCallback((yn={})=>({ref:yt,className:kr.base({class:Nr(dt,N==null?void 0:N.base)}),"data-has-title":Vt(!md(a)),"data-has-description":Vt(!md(A)),"data-placement":et,"data-drag-value":Za,"data-toast":!0,"aria-label":"toast",style:{opacity:Da},...xr(yn,Te,$t,Me)}),[kr,N,$t,Me,F,F.key,Da]),ja=V.useCallback((yn={})=>({className:kr.wrapper({class:N==null?void 0:N.wrapper}),...yn}),[]),Wr=V.useCallback((yn={})=>({"aria-label":"descriptionIcon",className:kr.icon({class:N==null?void 0:N.icon}),...yn}),[]),yi=V.useCallback((yn={})=>({className:kr.loadingIcon({class:N==null?void 0:N.loadingIcon}),...yn}),[]),Zn=V.useCallback((yn={})=>({className:kr.content({class:N==null?void 0:N.content}),...xr(yn,Te,or)}),[or]),cn=V.useCallback((yn={})=>({className:kr.title({class:N==null?void 0:N.title}),...xr(yn,Te,Er)}),[Er]),ya=V.useCallback((yn={})=>({className:kr.description({class:N==null?void 0:N.description}),...xr(yn,Te,mr)}),[mr]),Xa=V.useCallback((yn={})=>({className:kr.closeButton({class:N==null?void 0:N.closeButton}),"aria-label":"closeButton","data-hidden":Vt(de),...xr(yn,Pr,{onPress:qi(()=>{setTimeout(()=>document.body.focus(),0)},ce)})}),[Pr,ce]),js=V.useCallback((yn={})=>({className:kr.closeIcon({class:N==null?void 0:N.closeIcon}),"aria-label":"closeIcon",...yn}),[]),qa=V.useCallback((yn={})=>{const St=oe?xe-1:Math.min(2,xe-1),ye=be-pe-1<=St,Ae=et==="bottom-center"||et==="top-center"?"y":"x",Ve={left:0,right:0,top:0,bottom:0},Je=Wn(et),tt=et.includes("top")?{top:oe||an?fr+re:(be-1-pe)*8+re,bottom:"auto"}:et.includes("bottom")?{bottom:oe||an?fr+re:(be-1-pe)*8+re,top:"auto"}:{};return{animate:{opacity:ye?1:0,pointerEvents:ye?"all":"none",scaleX:oe||an?1:1-(be-1-pe)*.1,height:oe||an?Xr:Tn,y:0,...tt},drag:Ae,dragConstraints:Ve,exit:{opacity:0},initial:{opacity:0,scale:1,y:-40*Dr},transition:{duration:.3,ease:"easeOut"},variants:Br,dragElastic:Je,onDragEnd:(ut,bt)=>{const{x:ft,y:pt}=bt.offset;if(Sa(!1),qn(ft,pt)){const At=Se;At.splice(pe,1),Le([...At]),me.close(F.key);return}oa(0)},onDrag:(ut,bt)=>{let ft=0;et==="top-center"?ft=-bt.offset.y:et==="bottom-center"?ft=bt.offset.y:et.includes("right")?ft=bt.offset.x:et.includes("left")&&(ft=-bt.offset.x),ft>=0&&oa(ft)},onDragStart:()=>{Sa(!0)},"data-drag":Vt(an),"data-placement":et,"data-drag-value":Za,className:kr.motionDiv({class:N==null?void 0:N.motionDiv}),...yn,...Ee}},[Pr,be,pe,et,oe,fr,Dr,Xr,Tn,Br,N,an,Vt,Sa,qn,kr,re,xe]);return{Component:ur,title:a,description:A,icon:ke,loadingIcon:Sr,domRef:yt,severity:Pe,closeIcon:Q,classNames:N,color:h.color,hideIcon:te,placement:et,state:me,toast:F,disableAnimation:Ce,isProgressBarVisible:!!se,total:be,index:pe,getWrapperProps:ja,getToastProps:Ia,getTitleProps:cn,getContentProps:Zn,getDescriptionProps:ya,getCloseButtonProps:Xa,getIconProps:Wr,getMotionDivProps:qa,getCloseIconProps:js,getLoadingIconProps:yi,progressBarRef:Et,endContent:G,slots:kr,isRegionExpanded:oe,liftHeight:fr,frontHeight:Tn,initialHeight:Xr,isLoading:er}}var Fte=()=>km(()=>import("./src-UW24ZMRV-DCCgXxZU.js"),[]).then(e=>e.default),uj=e=>{const{ripples:t=[],motionProps:i,color:c="currentColor",style:h,onClear:_}=e;return b.jsx(b.Fragment,{children:t.map(w=>{const a=h5(.01*w.size,.2,w.size>100?.75:.5);return b.jsx(Tu,{features:Fte,children:b.jsx(Uf,{mode:"popLayout",children:b.jsx(jl.span,{animate:{transform:"scale(2)",opacity:0},className:"heroui-ripple",exit:{opacity:0},initial:{transform:"scale(0)",opacity:.35},style:{position:"absolute",backgroundColor:c,borderRadius:"100%",transformOrigin:"center",pointerEvents:"none",overflow:"hidden",inset:0,zIndex:0,top:w.y,left:w.x,width:`${w.size}px`,height:`${w.size}px`,...h},transition:{duration:a},onAnimationComplete:()=>{_(w.key)},...i})})},w.key)})})};uj.displayName="HeroUI.Ripple";var Vte=uj;function Ute(e={}){const[t,i]=V.useState([]),c=V.useCallback(_=>{const w=_.target,a=Math.max(w.clientWidth,w.clientHeight);i(A=>[...A,{key:XA(A.length.toString()),size:a,x:_.x-a/2,y:_.y-a/2}])},[]),h=V.useCallback(_=>{i(w=>w.filter(a=>a.key!==_))},[]);return{ripples:t,onClear:h,onPress:c,...e}}function Gte(e={}){let{autoFocus:t=!1,isTextInput:i,within:c}=e,h=V.useRef({isFocused:!1,isFocusVisible:t||t0()}),[_,w]=V.useState(!1),[a,A]=V.useState(()=>h.current.isFocused&&h.current.isFocusVisible),B=V.useCallback(()=>A(h.current.isFocused&&h.current.isFocusVisible),[]),N=V.useCallback(Q=>{h.current.isFocused=Q,w(Q),B()},[B]);cR(Q=>{h.current.isFocusVisible=Q,B()},[],{isTextInput:i});let{focusProps:F}=P_({isDisabled:c,onFocusChange:N}),{focusWithinProps:G}=yd({isDisabled:!c,onFocusWithinChange:N});return{isFocused:_,isFocusVisible:a,focusProps:c?G:F}}function Hte(e,t){let{elementType:i="button",isDisabled:c,onPress:h,onPressStart:_,onPressEnd:w,onPressChange:a,preventFocusOnPress:A,allowFocusWhenDisabled:B,onClick:N,href:F,target:G,rel:Q,type:te="button",allowTextSelectionOnPress:Y,role:oe}=e,de;i==="button"?de={type:te,disabled:c}:de={role:"button",href:i==="a"&&!c?F:void 0,target:i==="a"?G:void 0,type:i==="input"?te:void 0,disabled:i==="input"?c:void 0,"aria-disabled":!c||i==="input"?void 0:c,rel:i==="a"?Q:void 0};let me=Mm()||fx();N&&typeof N=="function"&&oe!=="link"&&!(e.hasOwnProperty("aria-expanded")&&e.hasOwnProperty("aria-controls"))&&$w("onClick is deprecated, please use onPress instead. See: https://github.com/heroui-inc/heroui/issues/4292","useButton");const be=re=>{me&&(N==null||N(re)),h==null||h(re)};let{pressProps:pe,isPressed:Se}=wu({onPressStart:_,onPressEnd:w,onPressChange:a,onPress:be,isDisabled:c,preventFocusOnPress:A,allowTextSelectionOnPress:Y,ref:t}),{focusableProps:$e}=M_(e,t);B&&($e.tabIndex=c?-1:$e.tabIndex);let Le=xr($e,pe,Fl(e,{labelable:!0}));return{isPressed:Se,buttonProps:xr(de,Le,{"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],"aria-current":e["aria-current"],onClick:re=>{te==="button"&&me||N==null||N(re)}})}}var[Ooe,qte]=Th({name:"ButtonGroupContext",strict:!1});function Wte(e){var t,i,c,h,_,w,a,A,B;const N=qte(),F=Pi(),G=!!N,{ref:Q,as:te,children:Y,startContent:oe,endContent:de,autoFocus:me,className:be,spinner:pe,isLoading:Se=!1,disableRipple:$e=!1,fullWidth:Le=(t=N==null?void 0:N.fullWidth)!=null?t:!1,radius:re=N==null?void 0:N.radius,size:Ee=(i=N==null?void 0:N.size)!=null?i:"md",color:se=(c=N==null?void 0:N.color)!=null?c:"default",variant:ue=(h=N==null?void 0:N.variant)!=null?h:"solid",disableAnimation:ke=(w=(_=N==null?void 0:N.disableAnimation)!=null?_:F==null?void 0:F.disableAnimation)!=null?w:!1,isDisabled:ce=(a=N==null?void 0:N.isDisabled)!=null?a:!1,isIconOnly:Pe=(A=N==null?void 0:N.isIconOnly)!=null?A:!1,spinnerPlacement:xe="start",onPress:Te,onClick:Ie,...Me}=e,Xe=te||"button",Ce=typeof Xe=="string",He=Ba(Q),et=(B=$e||(F==null?void 0:F.disableRipple))!=null?B:ke,{isFocusVisible:Ke,isFocused:ot,focusProps:Pt}=Gte({autoFocus:me}),Et=ce||Se,Wt=V.useMemo(()=>Y8({size:Ee,color:se,variant:ue,radius:re,fullWidth:Le,isDisabled:Et,isInGroup:G,disableAnimation:ke,isIconOnly:Pe,className:be}),[Ee,se,ue,re,Le,Et,G,Pe,ke,be]),{onPress:Dt,onClear:er,ripples:De}=Ute(),ur=V.useCallback(Xr=>{et||Et||ke||He.current&&Dt(Xr)},[et,Et,ke,He,Dt]),{buttonProps:Sr,isPressed:yt}=Hte({elementType:te,isDisabled:Et,onPress:qi(Te,ur),onClick:Ie,...Me},He),{isHovered:dt,hoverProps:$t}=wo({isDisabled:Et}),or=V.useCallback((Xr={})=>({"data-disabled":Vt(Et),"data-focus":Vt(ot),"data-pressed":Vt(yt),"data-focus-visible":Vt(Ke),"data-hover":Vt(dt),"data-loading":Vt(Se),...xr(Sr,Pt,$t,Wo(Me,{enabled:Ce}),Wo(Xr)),className:Wt}),[Se,Et,ot,yt,Ce,Ke,dt,Sr,Pt,$t,Me,Wt]),Er=Xr=>V.isValidElement(Xr)?V.cloneElement(Xr,{"aria-hidden":!0,focusable:!1,tabIndex:-1}):null,mr=Er(oe),Pr=Er(de),Fr=V.useMemo(()=>({sm:"sm",md:"sm",lg:"md"})[Ee],[Ee]),Bn=V.useCallback(()=>({ripples:De,onClear:er}),[De,er]);return{Component:Xe,children:Y,domRef:He,spinner:pe,styles:Wt,startContent:mr,endContent:Pr,isLoading:Se,spinnerPlacement:xe,spinnerSize:Fr,disableRipple:et,getButtonProps:or,getRippleProps:Bn,isIconOnly:Pe}}var dj=Na((e,t)=>{const{Component:i,domRef:c,children:h,spinnerSize:_,spinner:w=b.jsx(vT,{color:"current",size:_}),spinnerPlacement:a,startContent:A,endContent:B,isLoading:N,disableRipple:F,getButtonProps:G,getRippleProps:Q,isIconOnly:te}=Wte({...e,ref:t});return b.jsxs(i,{ref:c,...G(),children:[A,N&&a==="start"&&w,N&&te?null:h,N&&a==="end"&&w,B,!F&&b.jsx(Vte,{...Q()})]})});dj.displayName="HeroUI.Button";var Kte=dj,Zte=()=>km(()=>import("./index-C5lj5ajw.js"),[]).then(e=>e.domMax),b4={default:l4,primary:l4,secondary:l4,success:r7,warning:t7,danger:n7},hj=Na((e,t)=>{const{severity:i,Component:c,icon:h,loadingIcon:_,domRef:w,endContent:a,color:A,hideIcon:B,closeIcon:N,disableAnimation:F,progressBarRef:G,classNames:Q,slots:te,getWrapperProps:Y,isProgressBarVisible:oe,getToastProps:de,getContentProps:me,getTitleProps:be,getDescriptionProps:pe,getCloseButtonProps:Se,getIconProps:$e,getMotionDivProps:Le,getCloseIconProps:re,getLoadingIconProps:Ee,isLoading:se}=Ote({...e,ref:t}),ue=h&&V.isValidElement(h)?V.cloneElement(h,$e()):null,ke=i?b4[i]:b4[A]||b4.default,ce=_&&V.isValidElement(_)?V.cloneElement(_,Ee()):null,Pe=se?ce||b.jsx(vT,{"aria-label":"loadingIcon",classNames:{wrapper:Ee().className},color:"current"}):null,xe=N&&V.isValidElement(N)?V.cloneElement(N,{}):null,Te=b.jsxs(c,{ref:w,...de(),children:[b.jsxs("div",{...me(),children:[B&&!se?null:Pe||ue||b.jsx(ke,{...$e()}),b.jsxs("div",{...Y(),children:[b.jsx("div",{...be(),children:e.toast.content.title}),b.jsx("div",{...pe(),children:e.toast.content.description})]})]}),oe&&b.jsx("div",{className:te.progressTrack({class:Q==null?void 0:Q.progressTrack}),children:b.jsx("div",{ref:G,className:te.progressIndicator({class:Q==null?void 0:Q.progressIndicator})})}),b.jsx(Kte,{isIconOnly:!0,...Se(),children:xe||b.jsx(mT,{...re()})}),a]});return b.jsx(b.Fragment,{children:F?Te:b.jsx(Tu,{features:Zte,children:b.jsx(Uf,{children:b.jsx(jl.div,{...Le(),children:b.jsx(jl.div,{animate:{opacity:1},exit:{opacity:0},initial:{opacity:0},transition:{duration:.25,ease:"easeOut",delay:.1},children:Te},"inner-div")})})})})});hj.displayName="HeroUI.Toast";var Xte=hj;function Yte({toastQueue:e,placement:t,disableAnimation:i,maxVisibleToasts:c,toastOffset:h,toastProps:_={},className:w,classNames:a,...A}){var B,N;const F=V.useRef(null),{regionProps:G}=jte(A,e,F),{hoverProps:Q,isHovered:te}=wo({isDisabled:!1}),[Y,oe]=V.useState(!1),de=V.useMemo(()=>xX({disableAnimation:i}),[i]),me=Nr(a==null?void 0:a.base,w);V.useEffect(()=>{function Le(re){F.current&&!F.current.contains(re.target)&&oe(!1)}return document.addEventListener("touchstart",Le),()=>{document.removeEventListener("touchstart",Le)}},[]);const[be,pe]=V.useState([]),Se=(N=(B=e.visibleToasts)==null?void 0:B.length)!=null?N:0,$e=V.useCallback(()=>{oe(!0)},[]);return b.jsx("div",{...xr(G,Q),ref:F,className:de.base({class:me}),"data-placement":t,onTouchStart:$e,children:e.visibleToasts.map((Le,re)=>i&&Se-re>c?null:i||Se-re<=4||te&&Se-re<=c+1?b.jsx(Xte,{state:e,toast:Le,...xr(_,Le.content),disableAnimation:i,heights:be,index:re,isRegionExpanded:te||Y,maxVisibleToasts:c,placement:t,setHeights:pe,toastOffset:h,total:Se},Le.key):null)})}function Jte(e){let t=V.useCallback(h=>e.subscribe(h),[e]),i=V.useCallback(()=>e.visibleToasts,[e]);return{visibleToasts:lj.useSyncExternalStore(t,i,i),add:(h,_)=>e.add(h,_),close:h=>e.close(h),remove:h=>e.remove(h),pauseAll:()=>e.pauseAll(),resumeAll:()=>e.resumeAll()}}class Qte{subscribe(t){return this.subscriptions.add(t),()=>this.subscriptions.delete(t)}add(t,i={}){let c=Math.random().toString(36),h={...i,content:t,key:c,timer:i.timeout?new ere(()=>this.close(c),i.timeout):void 0},_=0,w=this.queue.length;for(;_<w;){let A=Math.floor((_+w)/2);(h.priority||0)>(this.queue[A].priority||0)?w=A:_=A+1}this.queue.splice(_,0,h),h.animation=_<this.maxVisibleToasts?"entering":"queued";let a=this.maxVisibleToasts;for(;a<this.queue.length;)this.queue[a++].animation="queued";return this.updateVisibleToasts({action:"add"}),c}close(t){let i=this.queue.findIndex(_=>_.key===t);if(i>=0){var c,h;(c=(h=this.queue[i]).onClose)===null||c===void 0||c.call(h),this.queue.splice(i,1)}this.updateVisibleToasts({action:"close",key:t})}remove(t){this.updateVisibleToasts({action:"remove",key:t})}updateVisibleToasts(t){let{action:i,key:c}=t,h=this.queue.slice(0,this.maxVisibleToasts);if(i==="add"&&this.hasExitAnimation){let _=this.visibleToasts.filter(w=>!h.some(a=>w.key===a.key)).map(w=>({...w,animation:"exiting"}));this.visibleToasts=_.concat(h).sort((w,a)=>{var A,B;return((A=a.priority)!==null&&A!==void 0?A:0)-((B=w.priority)!==null&&B!==void 0?B:0)})}else i==="close"&&this.hasExitAnimation?this.visibleToasts=this.visibleToasts.map(_=>_.key!==c?_:{..._,animation:"exiting"}):this.visibleToasts=h;for(let _ of this.subscriptions)_()}pauseAll(){for(let t of this.visibleToasts)t.timer&&t.timer.pause()}resumeAll(){for(let t of this.visibleToasts)t.timer&&t.timer.resume()}constructor(t){this.queue=[],this.subscriptions=new Set,this.visibleToasts=[];var i;this.maxVisibleToasts=(i=t==null?void 0:t.maxVisibleToasts)!==null&&i!==void 0?i:1;var c;this.hasExitAnimation=(c=t==null?void 0:t.hasExitAnimation)!==null&&c!==void 0?c:!1}}class ere{reset(t){this.remaining=t,this.resume()}pause(){this.timerId!=null&&(clearTimeout(this.timerId),this.timerId=null,this.remaining-=Date.now()-this.startTime)}resume(){this.remaining<=0||(this.startTime=Date.now(),this.timerId=setTimeout(()=>{this.timerId=null,this.remaining=0,this.callback()},this.remaining))}constructor(t,i){this.startTime=null,this.remaining=i,this.callback=t}}var e_=null,tre=()=>(e_||(e_=new Qte({maxVisibleToasts:1/0})),e_),rre=({placement:e="bottom-right",disableAnimation:t=!1,maxVisibleToasts:i=3,toastOffset:c=0,toastProps:h={},regionProps:_})=>{var w;const a=Jte(tre()),A=Pi(),B=(w=t??(A==null?void 0:A.disableAnimation))!=null?w:!1;return a.visibleToasts.length==0?null:b.jsx(Yte,{disableAnimation:B,maxVisibleToasts:i,placement:e,toastOffset:c,toastProps:h,toastQueue:a,..._})},Rn=({...e})=>{e_&&e_.add(e)};const gn="https://api.gatorpool.app";console.log("Environment:","production");console.log("Fetch base:",gn);const d0="/assets/logo-GclM95Hg.png";function c2(){const[e,t]=V.useState(!1),[i,c]=V.useState(!1);return V.useEffect(()=>{fetch(gn+"/v1/auth/verify",{method:"POST",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},credentials:"include",body:JSON.stringify({})}).then(h=>h.json()).then(h=>{h.success?c(!0):c(!1)}).catch(h=>{c(!1)})},[]),b.jsx(b.Fragment,{children:b.jsx("nav",{className:"bg-white dark:bg-[#0c0c0c] border-b-1 border-neutral-200 dark:border-neutral-800 fixed z-30 text-black dark:text-white w-full shadow",children:b.jsxs("div",{className:"max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"flex items-center justify-between h-20",children:[b.jsxs("div",{className:"flex flex-row md:justify-between w-full items-center",children:[b.jsx("div",{className:"flex flex-row space-x-6 items-center",children:b.jsxs("div",{className:"flex flex-row items-center",children:[b.jsx("img",{src:d0,alt:"GatorPool",className:"w-12 h-12 rounded-full bg-secondary"}),b.jsx("span",{className:"ml-1 text-xl font-semibold",children:"GatorPool"})]})}),b.jsxs("div",{className:"flex flex-row ml-auto md:mb- space-x-0 lg:space-x-4",children:[b.jsxs("div",{className:"hidden md:flex space-x-2",children:[b.jsx(pi,{to:"/",className:"block font-RobotoRegular text-lg rounded-full text-black dark:text-white px-4 py-2 ",children:"Home"}),b.jsx(pi,{to:"/about",className:"block font-RobotoRegular text-lg rounded-full text-black dark:text-white px-4 py-2 ",children:"About"}),b.jsx(pi,{to:"/safety",className:"block font-RobotoRegular text-lg rounded-full text-black dark:text-white px-4 py-2",children:"Safety"})]}),i?b.jsx(pi,{to:"/dashboard",className:"block font-RobotoRegular text-sm md:text-lg rounded-full text-black dark:text-white px-3 py-2 ",children:"Dashboard"}):b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(pi,{to:"/auth/signup",className:"block font-RobotoRegular text-sm md:text-lg rounded-full text-black dark:text-white px-3 py-2 ",children:"Try Now"}),b.jsx(pi,{to:"/auth/signin",className:"block font-RobotoRegular text-sm md:text-lg rounded-full text-black dark:text-white px-3 py-2 ",children:"Login"})]})]})]}),b.jsx("div",{className:"md:hidden",children:b.jsx("button",{onClick:()=>t(!e),className:"text-black dark:text-white mt-2 md:mt-0 focus:outline-none",children:b.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e?b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})})]}),e&&b.jsxs("div",{className:"md:hidden flex flex-col space-y-2 mt-2",children:[b.jsx(pi,{to:"/",className:"block py-2 px-4 text-black dark:text-white",children:"Home"}),b.jsx(pi,{to:"/about",className:"block font-RobotoRegular py-2 px-4 text-black dark:text-white hover:bg-primarynewdark",children:"About"}),b.jsx(pi,{to:"/safety",className:"block font-RobotoRegular py-2 px-4 text-black dark:text-white hover:bg-primarynewdark",children:"Safety"})]})]})})})}var K1={exports:{}},nre=K1.exports,B6;function are(){return B6||(B6=1,function(e,t){(function(i,c){e.exports=c()})(nre,function(){var i,c,h;function _(a,A){if(!i)i=A;else if(!c)c=A;else{var B="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+i+")(sharedChunk); ("+c+")(sharedChunk); self.onerror = null;",N={};i(N),h=A(N),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(h.workerUrl=window.URL.createObjectURL(new Blob([B],{type:"text/javascript"})))}}_(["exports"],function(a){function A(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var B,N={},F={};function G(){if(B)return F;B=1,Object.defineProperty(F,"__esModule",{value:!0}),F.setMatrixArrayType=function(g){F.ARRAY_TYPE=r=g},F.toRadian=function(g){return g*u},F.equals=function(g,f){return Math.abs(g-f)<=l*Math.max(1,Math.abs(g),Math.abs(f))},F.RANDOM=F.ARRAY_TYPE=F.EPSILON=void 0;var l=1e-6;F.EPSILON=l;var r=typeof Float32Array<"u"?Float32Array:Array;F.ARRAY_TYPE=r;var s=Math.random;F.RANDOM=s;var u=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var g=0,f=arguments.length;f--;)g+=arguments[f]*arguments[f];return Math.sqrt(g)}),F}var Q,te={};function Y(){if(Q)return te;function l(f){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},l(f)}Q=1,Object.defineProperty(te,"__esModule",{value:!0}),te.create=function(){var f=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f},te.clone=function(f){var x=new r.ARRAY_TYPE(4);return x[0]=f[0],x[1]=f[1],x[2]=f[2],x[3]=f[3],x},te.copy=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=x[2],f[3]=x[3],f},te.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f},te.fromValues=function(f,x,C,M){var $=new r.ARRAY_TYPE(4);return $[0]=f,$[1]=x,$[2]=C,$[3]=M,$},te.set=function(f,x,C,M,$){return f[0]=x,f[1]=C,f[2]=M,f[3]=$,f},te.transpose=function(f,x){if(f===x){var C=x[1];f[1]=x[2],f[2]=C}else f[0]=x[0],f[1]=x[2],f[2]=x[1],f[3]=x[3];return f},te.invert=function(f,x){var C=x[0],M=x[1],$=x[2],T=x[3],k=C*T-$*M;return k?(f[0]=T*(k=1/k),f[1]=-M*k,f[2]=-$*k,f[3]=C*k,f):null},te.adjoint=function(f,x){var C=x[0];return f[0]=x[3],f[1]=-x[1],f[2]=-x[2],f[3]=C,f},te.determinant=function(f){return f[0]*f[3]-f[2]*f[1]},te.multiply=u,te.rotate=function(f,x,C){var M=x[0],$=x[1],T=x[2],k=x[3],I=Math.sin(C),P=Math.cos(C);return f[0]=M*P+T*I,f[1]=$*P+k*I,f[2]=M*-I+T*P,f[3]=$*-I+k*P,f},te.scale=function(f,x,C){var M=x[1],$=x[2],T=x[3],k=C[0],I=C[1];return f[0]=x[0]*k,f[1]=M*k,f[2]=$*I,f[3]=T*I,f},te.fromRotation=function(f,x){var C=Math.sin(x),M=Math.cos(x);return f[0]=M,f[1]=C,f[2]=-C,f[3]=M,f},te.fromScaling=function(f,x){return f[0]=x[0],f[1]=0,f[2]=0,f[3]=x[1],f},te.str=function(f){return"mat2("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")"},te.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3])},te.LDU=function(f,x,C,M){return f[2]=M[2]/M[0],C[0]=M[0],C[1]=M[1],C[3]=M[3]-f[2]*C[1],[f,x,C]},te.add=function(f,x,C){return f[0]=x[0]+C[0],f[1]=x[1]+C[1],f[2]=x[2]+C[2],f[3]=x[3]+C[3],f},te.subtract=g,te.exactEquals=function(f,x){return f[0]===x[0]&&f[1]===x[1]&&f[2]===x[2]&&f[3]===x[3]},te.equals=function(f,x){var C=f[0],M=f[1],$=f[2],T=f[3],k=x[0],I=x[1],P=x[2],R=x[3];return Math.abs(C-k)<=r.EPSILON*Math.max(1,Math.abs(C),Math.abs(k))&&Math.abs(M-I)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(I))&&Math.abs($-P)<=r.EPSILON*Math.max(1,Math.abs($),Math.abs(P))&&Math.abs(T-R)<=r.EPSILON*Math.max(1,Math.abs(T),Math.abs(R))},te.multiplyScalar=function(f,x,C){return f[0]=x[0]*C,f[1]=x[1]*C,f[2]=x[2]*C,f[3]=x[3]*C,f},te.multiplyScalarAndAdd=function(f,x,C,M){return f[0]=x[0]+C[0]*M,f[1]=x[1]+C[1]*M,f[2]=x[2]+C[2]*M,f[3]=x[3]+C[3]*M,f},te.sub=te.mul=void 0;var r=function(f,x){if(f&&f.__esModule)return f;if(f===null||l(f)!=="object"&&typeof f!="function")return{default:f};var C=s(void 0);if(C&&C.has(f))return C.get(f);var M={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in f)if(T!=="default"&&Object.prototype.hasOwnProperty.call(f,T)){var k=$?Object.getOwnPropertyDescriptor(f,T):null;k&&(k.get||k.set)?Object.defineProperty(M,T,k):M[T]=f[T]}return M.default=f,C&&C.set(f,M),M}(G());function s(f){if(typeof WeakMap!="function")return null;var x=new WeakMap,C=new WeakMap;return(s=function(M){return M?C:x})(f)}function u(f,x,C){var M=x[0],$=x[1],T=x[2],k=x[3],I=C[0],P=C[1],R=C[2],j=C[3];return f[0]=M*I+T*P,f[1]=$*I+k*P,f[2]=M*R+T*j,f[3]=$*R+k*j,f}function g(f,x,C){return f[0]=x[0]-C[0],f[1]=x[1]-C[1],f[2]=x[2]-C[2],f[3]=x[3]-C[3],f}return te.mul=u,te.sub=g,te}var oe,de={};function me(){if(oe)return de;function l(f){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},l(f)}oe=1,Object.defineProperty(de,"__esModule",{value:!0}),de.create=function(){var f=new r.ARRAY_TYPE(6);return r.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[4]=0,f[5]=0),f[0]=1,f[3]=1,f},de.clone=function(f){var x=new r.ARRAY_TYPE(6);return x[0]=f[0],x[1]=f[1],x[2]=f[2],x[3]=f[3],x[4]=f[4],x[5]=f[5],x},de.copy=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=x[2],f[3]=x[3],f[4]=x[4],f[5]=x[5],f},de.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=0,f[5]=0,f},de.fromValues=function(f,x,C,M,$,T){var k=new r.ARRAY_TYPE(6);return k[0]=f,k[1]=x,k[2]=C,k[3]=M,k[4]=$,k[5]=T,k},de.set=function(f,x,C,M,$,T,k){return f[0]=x,f[1]=C,f[2]=M,f[3]=$,f[4]=T,f[5]=k,f},de.invert=function(f,x){var C=x[0],M=x[1],$=x[2],T=x[3],k=x[4],I=x[5],P=C*T-M*$;return P?(f[0]=T*(P=1/P),f[1]=-M*P,f[2]=-$*P,f[3]=C*P,f[4]=($*I-T*k)*P,f[5]=(M*k-C*I)*P,f):null},de.determinant=function(f){return f[0]*f[3]-f[1]*f[2]},de.multiply=u,de.rotate=function(f,x,C){var M=x[0],$=x[1],T=x[2],k=x[3],I=x[4],P=x[5],R=Math.sin(C),j=Math.cos(C);return f[0]=M*j+T*R,f[1]=$*j+k*R,f[2]=M*-R+T*j,f[3]=$*-R+k*j,f[4]=I,f[5]=P,f},de.scale=function(f,x,C){var M=x[1],$=x[2],T=x[3],k=x[4],I=x[5],P=C[0],R=C[1];return f[0]=x[0]*P,f[1]=M*P,f[2]=$*R,f[3]=T*R,f[4]=k,f[5]=I,f},de.translate=function(f,x,C){var M=x[0],$=x[1],T=x[2],k=x[3],I=x[4],P=x[5],R=C[0],j=C[1];return f[0]=M,f[1]=$,f[2]=T,f[3]=k,f[4]=M*R+T*j+I,f[5]=$*R+k*j+P,f},de.fromRotation=function(f,x){var C=Math.sin(x),M=Math.cos(x);return f[0]=M,f[1]=C,f[2]=-C,f[3]=M,f[4]=0,f[5]=0,f},de.fromScaling=function(f,x){return f[0]=x[0],f[1]=0,f[2]=0,f[3]=x[1],f[4]=0,f[5]=0,f},de.fromTranslation=function(f,x){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=x[0],f[5]=x[1],f},de.str=function(f){return"mat2d("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+")"},de.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],1)},de.add=function(f,x,C){return f[0]=x[0]+C[0],f[1]=x[1]+C[1],f[2]=x[2]+C[2],f[3]=x[3]+C[3],f[4]=x[4]+C[4],f[5]=x[5]+C[5],f},de.subtract=g,de.multiplyScalar=function(f,x,C){return f[0]=x[0]*C,f[1]=x[1]*C,f[2]=x[2]*C,f[3]=x[3]*C,f[4]=x[4]*C,f[5]=x[5]*C,f},de.multiplyScalarAndAdd=function(f,x,C,M){return f[0]=x[0]+C[0]*M,f[1]=x[1]+C[1]*M,f[2]=x[2]+C[2]*M,f[3]=x[3]+C[3]*M,f[4]=x[4]+C[4]*M,f[5]=x[5]+C[5]*M,f},de.exactEquals=function(f,x){return f[0]===x[0]&&f[1]===x[1]&&f[2]===x[2]&&f[3]===x[3]&&f[4]===x[4]&&f[5]===x[5]},de.equals=function(f,x){var C=f[0],M=f[1],$=f[2],T=f[3],k=f[4],I=f[5],P=x[0],R=x[1],j=x[2],W=x[3],K=x[4],ae=x[5];return Math.abs(C-P)<=r.EPSILON*Math.max(1,Math.abs(C),Math.abs(P))&&Math.abs(M-R)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(R))&&Math.abs($-j)<=r.EPSILON*Math.max(1,Math.abs($),Math.abs(j))&&Math.abs(T-W)<=r.EPSILON*Math.max(1,Math.abs(T),Math.abs(W))&&Math.abs(k-K)<=r.EPSILON*Math.max(1,Math.abs(k),Math.abs(K))&&Math.abs(I-ae)<=r.EPSILON*Math.max(1,Math.abs(I),Math.abs(ae))},de.sub=de.mul=void 0;var r=function(f,x){if(f&&f.__esModule)return f;if(f===null||l(f)!=="object"&&typeof f!="function")return{default:f};var C=s(void 0);if(C&&C.has(f))return C.get(f);var M={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in f)if(T!=="default"&&Object.prototype.hasOwnProperty.call(f,T)){var k=$?Object.getOwnPropertyDescriptor(f,T):null;k&&(k.get||k.set)?Object.defineProperty(M,T,k):M[T]=f[T]}return M.default=f,C&&C.set(f,M),M}(G());function s(f){if(typeof WeakMap!="function")return null;var x=new WeakMap,C=new WeakMap;return(s=function(M){return M?C:x})(f)}function u(f,x,C){var M=x[0],$=x[1],T=x[2],k=x[3],I=x[4],P=x[5],R=C[0],j=C[1],W=C[2],K=C[3],ae=C[4],ie=C[5];return f[0]=M*R+T*j,f[1]=$*R+k*j,f[2]=M*W+T*K,f[3]=$*W+k*K,f[4]=M*ae+T*ie+I,f[5]=$*ae+k*ie+P,f}function g(f,x,C){return f[0]=x[0]-C[0],f[1]=x[1]-C[1],f[2]=x[2]-C[2],f[3]=x[3]-C[3],f[4]=x[4]-C[4],f[5]=x[5]-C[5],f}return de.mul=u,de.sub=g,de}var be,pe={};function Se(){if(be)return pe;function l(f){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},l(f)}be=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.create=function(){var f=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f},pe.fromMat4=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=x[2],f[3]=x[4],f[4]=x[5],f[5]=x[6],f[6]=x[8],f[7]=x[9],f[8]=x[10],f},pe.clone=function(f){var x=new r.ARRAY_TYPE(9);return x[0]=f[0],x[1]=f[1],x[2]=f[2],x[3]=f[3],x[4]=f[4],x[5]=f[5],x[6]=f[6],x[7]=f[7],x[8]=f[8],x},pe.copy=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=x[2],f[3]=x[3],f[4]=x[4],f[5]=x[5],f[6]=x[6],f[7]=x[7],f[8]=x[8],f},pe.fromValues=function(f,x,C,M,$,T,k,I,P){var R=new r.ARRAY_TYPE(9);return R[0]=f,R[1]=x,R[2]=C,R[3]=M,R[4]=$,R[5]=T,R[6]=k,R[7]=I,R[8]=P,R},pe.set=function(f,x,C,M,$,T,k,I,P,R){return f[0]=x,f[1]=C,f[2]=M,f[3]=$,f[4]=T,f[5]=k,f[6]=I,f[7]=P,f[8]=R,f},pe.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},pe.transpose=function(f,x){if(f===x){var C=x[1],M=x[2],$=x[5];f[1]=x[3],f[2]=x[6],f[3]=C,f[5]=x[7],f[6]=M,f[7]=$}else f[0]=x[0],f[1]=x[3],f[2]=x[6],f[3]=x[1],f[4]=x[4],f[5]=x[7],f[6]=x[2],f[7]=x[5],f[8]=x[8];return f},pe.invert=function(f,x){var C=x[0],M=x[1],$=x[2],T=x[3],k=x[4],I=x[5],P=x[6],R=x[7],j=x[8],W=j*k-I*R,K=-j*T+I*P,ae=R*T-k*P,ie=C*W+M*K+$*ae;return ie?(f[0]=W*(ie=1/ie),f[1]=(-j*M+$*R)*ie,f[2]=(I*M-$*k)*ie,f[3]=K*ie,f[4]=(j*C-$*P)*ie,f[5]=(-I*C+$*T)*ie,f[6]=ae*ie,f[7]=(-R*C+M*P)*ie,f[8]=(k*C-M*T)*ie,f):null},pe.adjoint=function(f,x){var C=x[0],M=x[1],$=x[2],T=x[3],k=x[4],I=x[5],P=x[6],R=x[7],j=x[8];return f[0]=k*j-I*R,f[1]=$*R-M*j,f[2]=M*I-$*k,f[3]=I*P-T*j,f[4]=C*j-$*P,f[5]=$*T-C*I,f[6]=T*R-k*P,f[7]=M*P-C*R,f[8]=C*k-M*T,f},pe.determinant=function(f){var x=f[3],C=f[4],M=f[5],$=f[6],T=f[7],k=f[8];return f[0]*(k*C-M*T)+f[1]*(-k*x+M*$)+f[2]*(T*x-C*$)},pe.multiply=u,pe.translate=function(f,x,C){var M=x[0],$=x[1],T=x[2],k=x[3],I=x[4],P=x[5],R=x[6],j=x[7],W=x[8],K=C[0],ae=C[1];return f[0]=M,f[1]=$,f[2]=T,f[3]=k,f[4]=I,f[5]=P,f[6]=K*M+ae*k+R,f[7]=K*$+ae*I+j,f[8]=K*T+ae*P+W,f},pe.rotate=function(f,x,C){var M=x[0],$=x[1],T=x[2],k=x[3],I=x[4],P=x[5],R=x[6],j=x[7],W=x[8],K=Math.sin(C),ae=Math.cos(C);return f[0]=ae*M+K*k,f[1]=ae*$+K*I,f[2]=ae*T+K*P,f[3]=ae*k-K*M,f[4]=ae*I-K*$,f[5]=ae*P-K*T,f[6]=R,f[7]=j,f[8]=W,f},pe.scale=function(f,x,C){var M=C[0],$=C[1];return f[0]=M*x[0],f[1]=M*x[1],f[2]=M*x[2],f[3]=$*x[3],f[4]=$*x[4],f[5]=$*x[5],f[6]=x[6],f[7]=x[7],f[8]=x[8],f},pe.fromTranslation=function(f,x){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=x[0],f[7]=x[1],f[8]=1,f},pe.fromRotation=function(f,x){var C=Math.sin(x),M=Math.cos(x);return f[0]=M,f[1]=C,f[2]=0,f[3]=-C,f[4]=M,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},pe.fromScaling=function(f,x){return f[0]=x[0],f[1]=0,f[2]=0,f[3]=0,f[4]=x[1],f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},pe.fromMat2d=function(f,x){return f[0]=x[0],f[1]=x[1],f[2]=0,f[3]=x[2],f[4]=x[3],f[5]=0,f[6]=x[4],f[7]=x[5],f[8]=1,f},pe.fromQuat=function(f,x){var C=x[0],M=x[1],$=x[2],T=x[3],k=C+C,I=M+M,P=$+$,R=C*k,j=M*k,W=M*I,K=$*k,ae=$*I,ie=$*P,J=T*k,le=T*I,fe=T*P;return f[0]=1-W-ie,f[3]=j-fe,f[6]=K+le,f[1]=j+fe,f[4]=1-R-ie,f[7]=ae-J,f[2]=K-le,f[5]=ae+J,f[8]=1-R-W,f},pe.normalFromMat4=function(f,x){var C=x[0],M=x[1],$=x[2],T=x[3],k=x[4],I=x[5],P=x[6],R=x[7],j=x[8],W=x[9],K=x[10],ae=x[11],ie=x[12],J=x[13],le=x[14],fe=x[15],_e=C*I-M*k,je=C*P-$*k,Ne=C*R-T*k,Be=M*P-$*I,Qe=M*R-T*I,Ue=$*R-T*P,rt=j*J-W*ie,st=j*le-K*ie,it=j*fe-ae*ie,ct=W*le-K*J,gt=W*fe-ae*J,vt=K*fe-ae*le,ht=_e*vt-je*gt+Ne*ct+Be*it-Qe*st+Ue*rt;return ht?(f[0]=(I*vt-P*gt+R*ct)*(ht=1/ht),f[1]=(P*it-k*vt-R*st)*ht,f[2]=(k*gt-I*it+R*rt)*ht,f[3]=($*gt-M*vt-T*ct)*ht,f[4]=(C*vt-$*it+T*st)*ht,f[5]=(M*it-C*gt-T*rt)*ht,f[6]=(J*Ue-le*Qe+fe*Be)*ht,f[7]=(le*Ne-ie*Ue-fe*je)*ht,f[8]=(ie*Qe-J*Ne+fe*_e)*ht,f):null},pe.projection=function(f,x,C){return f[0]=2/x,f[1]=0,f[2]=0,f[3]=0,f[4]=-2/C,f[5]=0,f[6]=-1,f[7]=1,f[8]=1,f},pe.str=function(f){return"mat3("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+")"},pe.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8])},pe.add=function(f,x,C){return f[0]=x[0]+C[0],f[1]=x[1]+C[1],f[2]=x[2]+C[2],f[3]=x[3]+C[3],f[4]=x[4]+C[4],f[5]=x[5]+C[5],f[6]=x[6]+C[6],f[7]=x[7]+C[7],f[8]=x[8]+C[8],f},pe.subtract=g,pe.multiplyScalar=function(f,x,C){return f[0]=x[0]*C,f[1]=x[1]*C,f[2]=x[2]*C,f[3]=x[3]*C,f[4]=x[4]*C,f[5]=x[5]*C,f[6]=x[6]*C,f[7]=x[7]*C,f[8]=x[8]*C,f},pe.multiplyScalarAndAdd=function(f,x,C,M){return f[0]=x[0]+C[0]*M,f[1]=x[1]+C[1]*M,f[2]=x[2]+C[2]*M,f[3]=x[3]+C[3]*M,f[4]=x[4]+C[4]*M,f[5]=x[5]+C[5]*M,f[6]=x[6]+C[6]*M,f[7]=x[7]+C[7]*M,f[8]=x[8]+C[8]*M,f},pe.exactEquals=function(f,x){return f[0]===x[0]&&f[1]===x[1]&&f[2]===x[2]&&f[3]===x[3]&&f[4]===x[4]&&f[5]===x[5]&&f[6]===x[6]&&f[7]===x[7]&&f[8]===x[8]},pe.equals=function(f,x){var C=f[0],M=f[1],$=f[2],T=f[3],k=f[4],I=f[5],P=f[6],R=f[7],j=f[8],W=x[0],K=x[1],ae=x[2],ie=x[3],J=x[4],le=x[5],fe=x[6],_e=x[7],je=x[8];return Math.abs(C-W)<=r.EPSILON*Math.max(1,Math.abs(C),Math.abs(W))&&Math.abs(M-K)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(K))&&Math.abs($-ae)<=r.EPSILON*Math.max(1,Math.abs($),Math.abs(ae))&&Math.abs(T-ie)<=r.EPSILON*Math.max(1,Math.abs(T),Math.abs(ie))&&Math.abs(k-J)<=r.EPSILON*Math.max(1,Math.abs(k),Math.abs(J))&&Math.abs(I-le)<=r.EPSILON*Math.max(1,Math.abs(I),Math.abs(le))&&Math.abs(P-fe)<=r.EPSILON*Math.max(1,Math.abs(P),Math.abs(fe))&&Math.abs(R-_e)<=r.EPSILON*Math.max(1,Math.abs(R),Math.abs(_e))&&Math.abs(j-je)<=r.EPSILON*Math.max(1,Math.abs(j),Math.abs(je))},pe.sub=pe.mul=void 0;var r=function(f,x){if(f&&f.__esModule)return f;if(f===null||l(f)!=="object"&&typeof f!="function")return{default:f};var C=s(void 0);if(C&&C.has(f))return C.get(f);var M={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in f)if(T!=="default"&&Object.prototype.hasOwnProperty.call(f,T)){var k=$?Object.getOwnPropertyDescriptor(f,T):null;k&&(k.get||k.set)?Object.defineProperty(M,T,k):M[T]=f[T]}return M.default=f,C&&C.set(f,M),M}(G());function s(f){if(typeof WeakMap!="function")return null;var x=new WeakMap,C=new WeakMap;return(s=function(M){return M?C:x})(f)}function u(f,x,C){var M=x[0],$=x[1],T=x[2],k=x[3],I=x[4],P=x[5],R=x[6],j=x[7],W=x[8],K=C[0],ae=C[1],ie=C[2],J=C[3],le=C[4],fe=C[5],_e=C[6],je=C[7],Ne=C[8];return f[0]=K*M+ae*k+ie*R,f[1]=K*$+ae*I+ie*j,f[2]=K*T+ae*P+ie*W,f[3]=J*M+le*k+fe*R,f[4]=J*$+le*I+fe*j,f[5]=J*T+le*P+fe*W,f[6]=_e*M+je*k+Ne*R,f[7]=_e*$+je*I+Ne*j,f[8]=_e*T+je*P+Ne*W,f}function g(f,x,C){return f[0]=x[0]-C[0],f[1]=x[1]-C[1],f[2]=x[2]-C[2],f[3]=x[3]-C[3],f[4]=x[4]-C[4],f[5]=x[5]-C[5],f[6]=x[6]-C[6],f[7]=x[7]-C[7],f[8]=x[8]-C[8],f}return pe.mul=u,pe.sub=g,pe}var $e,Le={};function re(){if($e)return Le;function l(T){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},l(T)}$e=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.create=function(){var T=new r.ARRAY_TYPE(16);return r.ARRAY_TYPE!=Float32Array&&(T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=0,T[12]=0,T[13]=0,T[14]=0),T[0]=1,T[5]=1,T[10]=1,T[15]=1,T},Le.clone=function(T){var k=new r.ARRAY_TYPE(16);return k[0]=T[0],k[1]=T[1],k[2]=T[2],k[3]=T[3],k[4]=T[4],k[5]=T[5],k[6]=T[6],k[7]=T[7],k[8]=T[8],k[9]=T[9],k[10]=T[10],k[11]=T[11],k[12]=T[12],k[13]=T[13],k[14]=T[14],k[15]=T[15],k},Le.copy=function(T,k){return T[0]=k[0],T[1]=k[1],T[2]=k[2],T[3]=k[3],T[4]=k[4],T[5]=k[5],T[6]=k[6],T[7]=k[7],T[8]=k[8],T[9]=k[9],T[10]=k[10],T[11]=k[11],T[12]=k[12],T[13]=k[13],T[14]=k[14],T[15]=k[15],T},Le.fromValues=function(T,k,I,P,R,j,W,K,ae,ie,J,le,fe,_e,je,Ne){var Be=new r.ARRAY_TYPE(16);return Be[0]=T,Be[1]=k,Be[2]=I,Be[3]=P,Be[4]=R,Be[5]=j,Be[6]=W,Be[7]=K,Be[8]=ae,Be[9]=ie,Be[10]=J,Be[11]=le,Be[12]=fe,Be[13]=_e,Be[14]=je,Be[15]=Ne,Be},Le.set=function(T,k,I,P,R,j,W,K,ae,ie,J,le,fe,_e,je,Ne,Be){return T[0]=k,T[1]=I,T[2]=P,T[3]=R,T[4]=j,T[5]=W,T[6]=K,T[7]=ae,T[8]=ie,T[9]=J,T[10]=le,T[11]=fe,T[12]=_e,T[13]=je,T[14]=Ne,T[15]=Be,T},Le.identity=u,Le.transpose=function(T,k){if(T===k){var I=k[1],P=k[2],R=k[3],j=k[6],W=k[7],K=k[11];T[1]=k[4],T[2]=k[8],T[3]=k[12],T[4]=I,T[6]=k[9],T[7]=k[13],T[8]=P,T[9]=j,T[11]=k[14],T[12]=R,T[13]=W,T[14]=K}else T[0]=k[0],T[1]=k[4],T[2]=k[8],T[3]=k[12],T[4]=k[1],T[5]=k[5],T[6]=k[9],T[7]=k[13],T[8]=k[2],T[9]=k[6],T[10]=k[10],T[11]=k[14],T[12]=k[3],T[13]=k[7],T[14]=k[11],T[15]=k[15];return T},Le.invert=function(T,k){var I=k[0],P=k[1],R=k[2],j=k[3],W=k[4],K=k[5],ae=k[6],ie=k[7],J=k[8],le=k[9],fe=k[10],_e=k[11],je=k[12],Ne=k[13],Be=k[14],Qe=k[15],Ue=I*K-P*W,rt=I*ae-R*W,st=I*ie-j*W,it=P*ae-R*K,ct=P*ie-j*K,gt=R*ie-j*ae,vt=J*Ne-le*je,ht=J*Be-fe*je,Rt=J*Qe-_e*je,Yt=le*Be-fe*Ne,Lt=le*Qe-_e*Ne,ar=fe*Qe-_e*Be,nr=Ue*ar-rt*Lt+st*Yt+it*Rt-ct*ht+gt*vt;return nr?(T[0]=(K*ar-ae*Lt+ie*Yt)*(nr=1/nr),T[1]=(R*Lt-P*ar-j*Yt)*nr,T[2]=(Ne*gt-Be*ct+Qe*it)*nr,T[3]=(fe*ct-le*gt-_e*it)*nr,T[4]=(ae*Rt-W*ar-ie*ht)*nr,T[5]=(I*ar-R*Rt+j*ht)*nr,T[6]=(Be*st-je*gt-Qe*rt)*nr,T[7]=(J*gt-fe*st+_e*rt)*nr,T[8]=(W*Lt-K*Rt+ie*vt)*nr,T[9]=(P*Rt-I*Lt-j*vt)*nr,T[10]=(je*ct-Ne*st+Qe*Ue)*nr,T[11]=(le*st-J*ct-_e*Ue)*nr,T[12]=(K*ht-W*Yt-ae*vt)*nr,T[13]=(I*Yt-P*ht+R*vt)*nr,T[14]=(Ne*rt-je*it-Be*Ue)*nr,T[15]=(J*it-le*rt+fe*Ue)*nr,T):null},Le.adjoint=function(T,k){var I=k[0],P=k[1],R=k[2],j=k[3],W=k[4],K=k[5],ae=k[6],ie=k[7],J=k[8],le=k[9],fe=k[10],_e=k[11],je=k[12],Ne=k[13],Be=k[14],Qe=k[15];return T[0]=K*(fe*Qe-_e*Be)-le*(ae*Qe-ie*Be)+Ne*(ae*_e-ie*fe),T[1]=-(P*(fe*Qe-_e*Be)-le*(R*Qe-j*Be)+Ne*(R*_e-j*fe)),T[2]=P*(ae*Qe-ie*Be)-K*(R*Qe-j*Be)+Ne*(R*ie-j*ae),T[3]=-(P*(ae*_e-ie*fe)-K*(R*_e-j*fe)+le*(R*ie-j*ae)),T[4]=-(W*(fe*Qe-_e*Be)-J*(ae*Qe-ie*Be)+je*(ae*_e-ie*fe)),T[5]=I*(fe*Qe-_e*Be)-J*(R*Qe-j*Be)+je*(R*_e-j*fe),T[6]=-(I*(ae*Qe-ie*Be)-W*(R*Qe-j*Be)+je*(R*ie-j*ae)),T[7]=I*(ae*_e-ie*fe)-W*(R*_e-j*fe)+J*(R*ie-j*ae),T[8]=W*(le*Qe-_e*Ne)-J*(K*Qe-ie*Ne)+je*(K*_e-ie*le),T[9]=-(I*(le*Qe-_e*Ne)-J*(P*Qe-j*Ne)+je*(P*_e-j*le)),T[10]=I*(K*Qe-ie*Ne)-W*(P*Qe-j*Ne)+je*(P*ie-j*K),T[11]=-(I*(K*_e-ie*le)-W*(P*_e-j*le)+J*(P*ie-j*K)),T[12]=-(W*(le*Be-fe*Ne)-J*(K*Be-ae*Ne)+je*(K*fe-ae*le)),T[13]=I*(le*Be-fe*Ne)-J*(P*Be-R*Ne)+je*(P*fe-R*le),T[14]=-(I*(K*Be-ae*Ne)-W*(P*Be-R*Ne)+je*(P*ae-R*K)),T[15]=I*(K*fe-ae*le)-W*(P*fe-R*le)+J*(P*ae-R*K),T},Le.determinant=function(T){var k=T[0],I=T[1],P=T[2],R=T[3],j=T[4],W=T[5],K=T[6],ae=T[7],ie=T[8],J=T[9],le=T[10],fe=T[11],_e=T[12],je=T[13],Ne=T[14],Be=T[15];return(k*W-I*j)*(le*Be-fe*Ne)-(k*K-P*j)*(J*Be-fe*je)+(k*ae-R*j)*(J*Ne-le*je)+(I*K-P*W)*(ie*Be-fe*_e)-(I*ae-R*W)*(ie*Ne-le*_e)+(P*ae-R*K)*(ie*je-J*_e)},Le.multiply=g,Le.translate=function(T,k,I){var P,R,j,W,K,ae,ie,J,le,fe,_e,je,Ne=I[0],Be=I[1],Qe=I[2];return k===T?(T[12]=k[0]*Ne+k[4]*Be+k[8]*Qe+k[12],T[13]=k[1]*Ne+k[5]*Be+k[9]*Qe+k[13],T[14]=k[2]*Ne+k[6]*Be+k[10]*Qe+k[14],T[15]=k[3]*Ne+k[7]*Be+k[11]*Qe+k[15]):(R=k[1],j=k[2],W=k[3],K=k[4],ae=k[5],ie=k[6],J=k[7],le=k[8],fe=k[9],_e=k[10],je=k[11],T[0]=P=k[0],T[1]=R,T[2]=j,T[3]=W,T[4]=K,T[5]=ae,T[6]=ie,T[7]=J,T[8]=le,T[9]=fe,T[10]=_e,T[11]=je,T[12]=P*Ne+K*Be+le*Qe+k[12],T[13]=R*Ne+ae*Be+fe*Qe+k[13],T[14]=j*Ne+ie*Be+_e*Qe+k[14],T[15]=W*Ne+J*Be+je*Qe+k[15]),T},Le.scale=function(T,k,I){var P=I[0],R=I[1],j=I[2];return T[0]=k[0]*P,T[1]=k[1]*P,T[2]=k[2]*P,T[3]=k[3]*P,T[4]=k[4]*R,T[5]=k[5]*R,T[6]=k[6]*R,T[7]=k[7]*R,T[8]=k[8]*j,T[9]=k[9]*j,T[10]=k[10]*j,T[11]=k[11]*j,T[12]=k[12],T[13]=k[13],T[14]=k[14],T[15]=k[15],T},Le.rotate=function(T,k,I,P){var R,j,W,K,ae,ie,J,le,fe,_e,je,Ne,Be,Qe,Ue,rt,st,it,ct,gt,vt,ht,Rt,Yt,Lt=P[0],ar=P[1],nr=P[2],gr=Math.hypot(Lt,ar,nr);return gr<r.EPSILON?null:(Lt*=gr=1/gr,ar*=gr,nr*=gr,R=Math.sin(I),j=Math.cos(I),ae=k[1],ie=k[2],J=k[3],fe=k[5],_e=k[6],je=k[7],Be=k[9],Qe=k[10],Ue=k[11],rt=Lt*Lt*(W=1-j)+j,ct=Lt*ar*W-nr*R,gt=ar*ar*W+j,vt=nr*ar*W+Lt*R,ht=Lt*nr*W+ar*R,Rt=ar*nr*W-Lt*R,Yt=nr*nr*W+j,T[0]=(K=k[0])*rt+(le=k[4])*(st=ar*Lt*W+nr*R)+(Ne=k[8])*(it=nr*Lt*W-ar*R),T[1]=ae*rt+fe*st+Be*it,T[2]=ie*rt+_e*st+Qe*it,T[3]=J*rt+je*st+Ue*it,T[4]=K*ct+le*gt+Ne*vt,T[5]=ae*ct+fe*gt+Be*vt,T[6]=ie*ct+_e*gt+Qe*vt,T[7]=J*ct+je*gt+Ue*vt,T[8]=K*ht+le*Rt+Ne*Yt,T[9]=ae*ht+fe*Rt+Be*Yt,T[10]=ie*ht+_e*Rt+Qe*Yt,T[11]=J*ht+je*Rt+Ue*Yt,k!==T&&(T[12]=k[12],T[13]=k[13],T[14]=k[14],T[15]=k[15]),T)},Le.rotateX=function(T,k,I){var P=Math.sin(I),R=Math.cos(I),j=k[4],W=k[5],K=k[6],ae=k[7],ie=k[8],J=k[9],le=k[10],fe=k[11];return k!==T&&(T[0]=k[0],T[1]=k[1],T[2]=k[2],T[3]=k[3],T[12]=k[12],T[13]=k[13],T[14]=k[14],T[15]=k[15]),T[4]=j*R+ie*P,T[5]=W*R+J*P,T[6]=K*R+le*P,T[7]=ae*R+fe*P,T[8]=ie*R-j*P,T[9]=J*R-W*P,T[10]=le*R-K*P,T[11]=fe*R-ae*P,T},Le.rotateY=function(T,k,I){var P=Math.sin(I),R=Math.cos(I),j=k[0],W=k[1],K=k[2],ae=k[3],ie=k[8],J=k[9],le=k[10],fe=k[11];return k!==T&&(T[4]=k[4],T[5]=k[5],T[6]=k[6],T[7]=k[7],T[12]=k[12],T[13]=k[13],T[14]=k[14],T[15]=k[15]),T[0]=j*R-ie*P,T[1]=W*R-J*P,T[2]=K*R-le*P,T[3]=ae*R-fe*P,T[8]=j*P+ie*R,T[9]=W*P+J*R,T[10]=K*P+le*R,T[11]=ae*P+fe*R,T},Le.rotateZ=function(T,k,I){var P=Math.sin(I),R=Math.cos(I),j=k[0],W=k[1],K=k[2],ae=k[3],ie=k[4],J=k[5],le=k[6],fe=k[7];return k!==T&&(T[8]=k[8],T[9]=k[9],T[10]=k[10],T[11]=k[11],T[12]=k[12],T[13]=k[13],T[14]=k[14],T[15]=k[15]),T[0]=j*R+ie*P,T[1]=W*R+J*P,T[2]=K*R+le*P,T[3]=ae*R+fe*P,T[4]=ie*R-j*P,T[5]=J*R-W*P,T[6]=le*R-K*P,T[7]=fe*R-ae*P,T},Le.fromTranslation=function(T,k){return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=k[0],T[13]=k[1],T[14]=k[2],T[15]=1,T},Le.fromScaling=function(T,k){return T[0]=k[0],T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=k[1],T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=k[2],T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},Le.fromRotation=function(T,k,I){var P,R,j,W=I[0],K=I[1],ae=I[2],ie=Math.hypot(W,K,ae);return ie<r.EPSILON?null:(W*=ie=1/ie,K*=ie,ae*=ie,P=Math.sin(k),R=Math.cos(k),T[0]=W*W*(j=1-R)+R,T[1]=K*W*j+ae*P,T[2]=ae*W*j-K*P,T[3]=0,T[4]=W*K*j-ae*P,T[5]=K*K*j+R,T[6]=ae*K*j+W*P,T[7]=0,T[8]=W*ae*j+K*P,T[9]=K*ae*j-W*P,T[10]=ae*ae*j+R,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T)},Le.fromXRotation=function(T,k){var I=Math.sin(k),P=Math.cos(k);return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=P,T[6]=I,T[7]=0,T[8]=0,T[9]=-I,T[10]=P,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},Le.fromYRotation=function(T,k){var I=Math.sin(k),P=Math.cos(k);return T[0]=P,T[1]=0,T[2]=-I,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=I,T[9]=0,T[10]=P,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},Le.fromZRotation=function(T,k){var I=Math.sin(k),P=Math.cos(k);return T[0]=P,T[1]=I,T[2]=0,T[3]=0,T[4]=-I,T[5]=P,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},Le.fromRotationTranslation=f,Le.fromQuat2=function(T,k){var I=new r.ARRAY_TYPE(3),P=-k[0],R=-k[1],j=-k[2],W=k[3],K=k[4],ae=k[5],ie=k[6],J=k[7],le=P*P+R*R+j*j+W*W;return le>0?(I[0]=2*(K*W+J*P+ae*j-ie*R)/le,I[1]=2*(ae*W+J*R+ie*P-K*j)/le,I[2]=2*(ie*W+J*j+K*R-ae*P)/le):(I[0]=2*(K*W+J*P+ae*j-ie*R),I[1]=2*(ae*W+J*R+ie*P-K*j),I[2]=2*(ie*W+J*j+K*R-ae*P)),f(T,k,I),T},Le.getTranslation=function(T,k){return T[0]=k[12],T[1]=k[13],T[2]=k[14],T},Le.getScaling=x,Le.getRotation=function(T,k){var I=new r.ARRAY_TYPE(3);x(I,k);var P=1/I[0],R=1/I[1],j=1/I[2],W=k[0]*P,K=k[1]*R,ae=k[2]*j,ie=k[4]*P,J=k[5]*R,le=k[6]*j,fe=k[8]*P,_e=k[9]*R,je=k[10]*j,Ne=W+J+je,Be=0;return Ne>0?(Be=2*Math.sqrt(Ne+1),T[3]=.25*Be,T[0]=(le-_e)/Be,T[1]=(fe-ae)/Be,T[2]=(K-ie)/Be):W>J&&W>je?(Be=2*Math.sqrt(1+W-J-je),T[3]=(le-_e)/Be,T[0]=.25*Be,T[1]=(K+ie)/Be,T[2]=(fe+ae)/Be):J>je?(Be=2*Math.sqrt(1+J-W-je),T[3]=(fe-ae)/Be,T[0]=(K+ie)/Be,T[1]=.25*Be,T[2]=(le+_e)/Be):(Be=2*Math.sqrt(1+je-W-J),T[3]=(K-ie)/Be,T[0]=(fe+ae)/Be,T[1]=(le+_e)/Be,T[2]=.25*Be),T},Le.fromRotationTranslationScale=function(T,k,I,P){var R=k[0],j=k[1],W=k[2],K=k[3],ae=R+R,ie=j+j,J=W+W,le=R*ae,fe=R*ie,_e=R*J,je=j*ie,Ne=j*J,Be=W*J,Qe=K*ae,Ue=K*ie,rt=K*J,st=P[0],it=P[1],ct=P[2];return T[0]=(1-(je+Be))*st,T[1]=(fe+rt)*st,T[2]=(_e-Ue)*st,T[3]=0,T[4]=(fe-rt)*it,T[5]=(1-(le+Be))*it,T[6]=(Ne+Qe)*it,T[7]=0,T[8]=(_e+Ue)*ct,T[9]=(Ne-Qe)*ct,T[10]=(1-(le+je))*ct,T[11]=0,T[12]=I[0],T[13]=I[1],T[14]=I[2],T[15]=1,T},Le.fromRotationTranslationScaleOrigin=function(T,k,I,P,R){var j=k[0],W=k[1],K=k[2],ae=k[3],ie=j+j,J=W+W,le=K+K,fe=j*ie,_e=j*J,je=j*le,Ne=W*J,Be=W*le,Qe=K*le,Ue=ae*ie,rt=ae*J,st=ae*le,it=P[0],ct=P[1],gt=P[2],vt=R[0],ht=R[1],Rt=R[2],Yt=(1-(Ne+Qe))*it,Lt=(_e+st)*it,ar=(je-rt)*it,nr=(_e-st)*ct,gr=(1-(fe+Qe))*ct,jt=(Be+Ue)*ct,Mr=(je+rt)*gt,sr=(Be-Ue)*gt,Cr=(1-(fe+Ne))*gt;return T[0]=Yt,T[1]=Lt,T[2]=ar,T[3]=0,T[4]=nr,T[5]=gr,T[6]=jt,T[7]=0,T[8]=Mr,T[9]=sr,T[10]=Cr,T[11]=0,T[12]=I[0]+vt-(Yt*vt+nr*ht+Mr*Rt),T[13]=I[1]+ht-(Lt*vt+gr*ht+sr*Rt),T[14]=I[2]+Rt-(ar*vt+jt*ht+Cr*Rt),T[15]=1,T},Le.fromQuat=function(T,k){var I=k[0],P=k[1],R=k[2],j=k[3],W=I+I,K=P+P,ae=R+R,ie=I*W,J=P*W,le=P*K,fe=R*W,_e=R*K,je=R*ae,Ne=j*W,Be=j*K,Qe=j*ae;return T[0]=1-le-je,T[1]=J+Qe,T[2]=fe-Be,T[3]=0,T[4]=J-Qe,T[5]=1-ie-je,T[6]=_e+Ne,T[7]=0,T[8]=fe+Be,T[9]=_e-Ne,T[10]=1-ie-le,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T},Le.frustum=function(T,k,I,P,R,j,W){var K=1/(I-k),ae=1/(R-P),ie=1/(j-W);return T[0]=2*j*K,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=2*j*ae,T[6]=0,T[7]=0,T[8]=(I+k)*K,T[9]=(R+P)*ae,T[10]=(W+j)*ie,T[11]=-1,T[12]=0,T[13]=0,T[14]=W*j*2*ie,T[15]=0,T},Le.perspectiveNO=C,Le.perspectiveZO=function(T,k,I,P,R){var j,W=1/Math.tan(k/2);return T[0]=W/I,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=W,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=-1,T[12]=0,T[13]=0,T[15]=0,R!=null&&R!==1/0?(T[10]=R*(j=1/(P-R)),T[14]=R*P*j):(T[10]=-1,T[14]=-P),T},Le.perspectiveFromFieldOfView=function(T,k,I,P){var R=Math.tan(k.upDegrees*Math.PI/180),j=Math.tan(k.downDegrees*Math.PI/180),W=Math.tan(k.leftDegrees*Math.PI/180),K=Math.tan(k.rightDegrees*Math.PI/180),ae=2/(W+K),ie=2/(R+j);return T[0]=ae,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=ie,T[6]=0,T[7]=0,T[8]=-(W-K)*ae*.5,T[9]=(R-j)*ie*.5,T[10]=P/(I-P),T[11]=-1,T[12]=0,T[13]=0,T[14]=P*I/(I-P),T[15]=0,T},Le.orthoNO=M,Le.orthoZO=function(T,k,I,P,R,j,W){var K=1/(k-I),ae=1/(P-R),ie=1/(j-W);return T[0]=-2*K,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=-2*ae,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=ie,T[11]=0,T[12]=(k+I)*K,T[13]=(R+P)*ae,T[14]=j*ie,T[15]=1,T},Le.lookAt=function(T,k,I,P){var R,j,W,K,ae,ie,J,le,fe,_e,je=k[0],Ne=k[1],Be=k[2],Qe=P[0],Ue=P[1],rt=P[2],st=I[0],it=I[1],ct=I[2];return Math.abs(je-st)<r.EPSILON&&Math.abs(Ne-it)<r.EPSILON&&Math.abs(Be-ct)<r.EPSILON?u(T):(J=je-st,le=Ne-it,fe=Be-ct,R=Ue*(fe*=_e=1/Math.hypot(J,le,fe))-rt*(le*=_e),j=rt*(J*=_e)-Qe*fe,W=Qe*le-Ue*J,(_e=Math.hypot(R,j,W))?(R*=_e=1/_e,j*=_e,W*=_e):(R=0,j=0,W=0),K=le*W-fe*j,ae=fe*R-J*W,ie=J*j-le*R,(_e=Math.hypot(K,ae,ie))?(K*=_e=1/_e,ae*=_e,ie*=_e):(K=0,ae=0,ie=0),T[0]=R,T[1]=K,T[2]=J,T[3]=0,T[4]=j,T[5]=ae,T[6]=le,T[7]=0,T[8]=W,T[9]=ie,T[10]=fe,T[11]=0,T[12]=-(R*je+j*Ne+W*Be),T[13]=-(K*je+ae*Ne+ie*Be),T[14]=-(J*je+le*Ne+fe*Be),T[15]=1,T)},Le.targetTo=function(T,k,I,P){var R=k[0],j=k[1],W=k[2],K=P[0],ae=P[1],ie=P[2],J=R-I[0],le=j-I[1],fe=W-I[2],_e=J*J+le*le+fe*fe;_e>0&&(J*=_e=1/Math.sqrt(_e),le*=_e,fe*=_e);var je=ae*fe-ie*le,Ne=ie*J-K*fe,Be=K*le-ae*J;return(_e=je*je+Ne*Ne+Be*Be)>0&&(je*=_e=1/Math.sqrt(_e),Ne*=_e,Be*=_e),T[0]=je,T[1]=Ne,T[2]=Be,T[3]=0,T[4]=le*Be-fe*Ne,T[5]=fe*je-J*Be,T[6]=J*Ne-le*je,T[7]=0,T[8]=J,T[9]=le,T[10]=fe,T[11]=0,T[12]=R,T[13]=j,T[14]=W,T[15]=1,T},Le.str=function(T){return"mat4("+T[0]+", "+T[1]+", "+T[2]+", "+T[3]+", "+T[4]+", "+T[5]+", "+T[6]+", "+T[7]+", "+T[8]+", "+T[9]+", "+T[10]+", "+T[11]+", "+T[12]+", "+T[13]+", "+T[14]+", "+T[15]+")"},Le.frob=function(T){return Math.hypot(T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],T[8],T[9],T[10],T[11],T[12],T[13],T[14],T[15])},Le.add=function(T,k,I){return T[0]=k[0]+I[0],T[1]=k[1]+I[1],T[2]=k[2]+I[2],T[3]=k[3]+I[3],T[4]=k[4]+I[4],T[5]=k[5]+I[5],T[6]=k[6]+I[6],T[7]=k[7]+I[7],T[8]=k[8]+I[8],T[9]=k[9]+I[9],T[10]=k[10]+I[10],T[11]=k[11]+I[11],T[12]=k[12]+I[12],T[13]=k[13]+I[13],T[14]=k[14]+I[14],T[15]=k[15]+I[15],T},Le.subtract=$,Le.multiplyScalar=function(T,k,I){return T[0]=k[0]*I,T[1]=k[1]*I,T[2]=k[2]*I,T[3]=k[3]*I,T[4]=k[4]*I,T[5]=k[5]*I,T[6]=k[6]*I,T[7]=k[7]*I,T[8]=k[8]*I,T[9]=k[9]*I,T[10]=k[10]*I,T[11]=k[11]*I,T[12]=k[12]*I,T[13]=k[13]*I,T[14]=k[14]*I,T[15]=k[15]*I,T},Le.multiplyScalarAndAdd=function(T,k,I,P){return T[0]=k[0]+I[0]*P,T[1]=k[1]+I[1]*P,T[2]=k[2]+I[2]*P,T[3]=k[3]+I[3]*P,T[4]=k[4]+I[4]*P,T[5]=k[5]+I[5]*P,T[6]=k[6]+I[6]*P,T[7]=k[7]+I[7]*P,T[8]=k[8]+I[8]*P,T[9]=k[9]+I[9]*P,T[10]=k[10]+I[10]*P,T[11]=k[11]+I[11]*P,T[12]=k[12]+I[12]*P,T[13]=k[13]+I[13]*P,T[14]=k[14]+I[14]*P,T[15]=k[15]+I[15]*P,T},Le.exactEquals=function(T,k){return T[0]===k[0]&&T[1]===k[1]&&T[2]===k[2]&&T[3]===k[3]&&T[4]===k[4]&&T[5]===k[5]&&T[6]===k[6]&&T[7]===k[7]&&T[8]===k[8]&&T[9]===k[9]&&T[10]===k[10]&&T[11]===k[11]&&T[12]===k[12]&&T[13]===k[13]&&T[14]===k[14]&&T[15]===k[15]},Le.equals=function(T,k){var I=T[0],P=T[1],R=T[2],j=T[3],W=T[4],K=T[5],ae=T[6],ie=T[7],J=T[8],le=T[9],fe=T[10],_e=T[11],je=T[12],Ne=T[13],Be=T[14],Qe=T[15],Ue=k[0],rt=k[1],st=k[2],it=k[3],ct=k[4],gt=k[5],vt=k[6],ht=k[7],Rt=k[8],Yt=k[9],Lt=k[10],ar=k[11],nr=k[12],gr=k[13],jt=k[14],Mr=k[15];return Math.abs(I-Ue)<=r.EPSILON*Math.max(1,Math.abs(I),Math.abs(Ue))&&Math.abs(P-rt)<=r.EPSILON*Math.max(1,Math.abs(P),Math.abs(rt))&&Math.abs(R-st)<=r.EPSILON*Math.max(1,Math.abs(R),Math.abs(st))&&Math.abs(j-it)<=r.EPSILON*Math.max(1,Math.abs(j),Math.abs(it))&&Math.abs(W-ct)<=r.EPSILON*Math.max(1,Math.abs(W),Math.abs(ct))&&Math.abs(K-gt)<=r.EPSILON*Math.max(1,Math.abs(K),Math.abs(gt))&&Math.abs(ae-vt)<=r.EPSILON*Math.max(1,Math.abs(ae),Math.abs(vt))&&Math.abs(ie-ht)<=r.EPSILON*Math.max(1,Math.abs(ie),Math.abs(ht))&&Math.abs(J-Rt)<=r.EPSILON*Math.max(1,Math.abs(J),Math.abs(Rt))&&Math.abs(le-Yt)<=r.EPSILON*Math.max(1,Math.abs(le),Math.abs(Yt))&&Math.abs(fe-Lt)<=r.EPSILON*Math.max(1,Math.abs(fe),Math.abs(Lt))&&Math.abs(_e-ar)<=r.EPSILON*Math.max(1,Math.abs(_e),Math.abs(ar))&&Math.abs(je-nr)<=r.EPSILON*Math.max(1,Math.abs(je),Math.abs(nr))&&Math.abs(Ne-gr)<=r.EPSILON*Math.max(1,Math.abs(Ne),Math.abs(gr))&&Math.abs(Be-jt)<=r.EPSILON*Math.max(1,Math.abs(Be),Math.abs(jt))&&Math.abs(Qe-Mr)<=r.EPSILON*Math.max(1,Math.abs(Qe),Math.abs(Mr))},Le.sub=Le.mul=Le.ortho=Le.perspective=void 0;var r=function(T,k){if(T&&T.__esModule)return T;if(T===null||l(T)!=="object"&&typeof T!="function")return{default:T};var I=s(void 0);if(I&&I.has(T))return I.get(T);var P={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in T)if(j!=="default"&&Object.prototype.hasOwnProperty.call(T,j)){var W=R?Object.getOwnPropertyDescriptor(T,j):null;W&&(W.get||W.set)?Object.defineProperty(P,j,W):P[j]=T[j]}return P.default=T,I&&I.set(T,P),P}(G());function s(T){if(typeof WeakMap!="function")return null;var k=new WeakMap,I=new WeakMap;return(s=function(P){return P?I:k})(T)}function u(T){return T[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1,T}function g(T,k,I){var P=k[0],R=k[1],j=k[2],W=k[3],K=k[4],ae=k[5],ie=k[6],J=k[7],le=k[8],fe=k[9],_e=k[10],je=k[11],Ne=k[12],Be=k[13],Qe=k[14],Ue=k[15],rt=I[0],st=I[1],it=I[2],ct=I[3];return T[0]=rt*P+st*K+it*le+ct*Ne,T[1]=rt*R+st*ae+it*fe+ct*Be,T[2]=rt*j+st*ie+it*_e+ct*Qe,T[3]=rt*W+st*J+it*je+ct*Ue,T[4]=(rt=I[4])*P+(st=I[5])*K+(it=I[6])*le+(ct=I[7])*Ne,T[5]=rt*R+st*ae+it*fe+ct*Be,T[6]=rt*j+st*ie+it*_e+ct*Qe,T[7]=rt*W+st*J+it*je+ct*Ue,T[8]=(rt=I[8])*P+(st=I[9])*K+(it=I[10])*le+(ct=I[11])*Ne,T[9]=rt*R+st*ae+it*fe+ct*Be,T[10]=rt*j+st*ie+it*_e+ct*Qe,T[11]=rt*W+st*J+it*je+ct*Ue,T[12]=(rt=I[12])*P+(st=I[13])*K+(it=I[14])*le+(ct=I[15])*Ne,T[13]=rt*R+st*ae+it*fe+ct*Be,T[14]=rt*j+st*ie+it*_e+ct*Qe,T[15]=rt*W+st*J+it*je+ct*Ue,T}function f(T,k,I){var P=k[0],R=k[1],j=k[2],W=k[3],K=P+P,ae=R+R,ie=j+j,J=P*K,le=P*ae,fe=P*ie,_e=R*ae,je=R*ie,Ne=j*ie,Be=W*K,Qe=W*ae,Ue=W*ie;return T[0]=1-(_e+Ne),T[1]=le+Ue,T[2]=fe-Qe,T[3]=0,T[4]=le-Ue,T[5]=1-(J+Ne),T[6]=je+Be,T[7]=0,T[8]=fe+Qe,T[9]=je-Be,T[10]=1-(J+_e),T[11]=0,T[12]=I[0],T[13]=I[1],T[14]=I[2],T[15]=1,T}function x(T,k){var I=k[4],P=k[5],R=k[6],j=k[8],W=k[9],K=k[10];return T[0]=Math.hypot(k[0],k[1],k[2]),T[1]=Math.hypot(I,P,R),T[2]=Math.hypot(j,W,K),T}function C(T,k,I,P,R){var j,W=1/Math.tan(k/2);return T[0]=W/I,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=W,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[11]=-1,T[12]=0,T[13]=0,T[15]=0,R!=null&&R!==1/0?(T[10]=(R+P)*(j=1/(P-R)),T[14]=2*R*P*j):(T[10]=-1,T[14]=-2*P),T}function M(T,k,I,P,R,j,W){var K=1/(k-I),ae=1/(P-R),ie=1/(j-W);return T[0]=-2*K,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=-2*ae,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=2*ie,T[11]=0,T[12]=(k+I)*K,T[13]=(R+P)*ae,T[14]=(W+j)*ie,T[15]=1,T}function $(T,k,I){return T[0]=k[0]-I[0],T[1]=k[1]-I[1],T[2]=k[2]-I[2],T[3]=k[3]-I[3],T[4]=k[4]-I[4],T[5]=k[5]-I[5],T[6]=k[6]-I[6],T[7]=k[7]-I[7],T[8]=k[8]-I[8],T[9]=k[9]-I[9],T[10]=k[10]-I[10],T[11]=k[11]-I[11],T[12]=k[12]-I[12],T[13]=k[13]-I[13],T[14]=k[14]-I[14],T[15]=k[15]-I[15],T}return Le.perspective=C,Le.ortho=M,Le.mul=g,Le.sub=$,Le}var Ee,se={},ue={};function ke(){if(Ee)return ue;function l(R){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},l(R)}Ee=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.create=u,ue.clone=function(R){var j=new r.ARRAY_TYPE(3);return j[0]=R[0],j[1]=R[1],j[2]=R[2],j},ue.length=g,ue.fromValues=function(R,j,W){var K=new r.ARRAY_TYPE(3);return K[0]=R,K[1]=j,K[2]=W,K},ue.copy=function(R,j){return R[0]=j[0],R[1]=j[1],R[2]=j[2],R},ue.set=function(R,j,W,K){return R[0]=j,R[1]=W,R[2]=K,R},ue.add=function(R,j,W){return R[0]=j[0]+W[0],R[1]=j[1]+W[1],R[2]=j[2]+W[2],R},ue.subtract=f,ue.multiply=x,ue.divide=C,ue.ceil=function(R,j){return R[0]=Math.ceil(j[0]),R[1]=Math.ceil(j[1]),R[2]=Math.ceil(j[2]),R},ue.floor=function(R,j){return R[0]=Math.floor(j[0]),R[1]=Math.floor(j[1]),R[2]=Math.floor(j[2]),R},ue.min=function(R,j,W){return R[0]=Math.min(j[0],W[0]),R[1]=Math.min(j[1],W[1]),R[2]=Math.min(j[2],W[2]),R},ue.max=function(R,j,W){return R[0]=Math.max(j[0],W[0]),R[1]=Math.max(j[1],W[1]),R[2]=Math.max(j[2],W[2]),R},ue.round=function(R,j){return R[0]=Math.round(j[0]),R[1]=Math.round(j[1]),R[2]=Math.round(j[2]),R},ue.scale=function(R,j,W){return R[0]=j[0]*W,R[1]=j[1]*W,R[2]=j[2]*W,R},ue.scaleAndAdd=function(R,j,W,K){return R[0]=j[0]+W[0]*K,R[1]=j[1]+W[1]*K,R[2]=j[2]+W[2]*K,R},ue.distance=M,ue.squaredDistance=$,ue.squaredLength=T,ue.negate=function(R,j){return R[0]=-j[0],R[1]=-j[1],R[2]=-j[2],R},ue.inverse=function(R,j){return R[0]=1/j[0],R[1]=1/j[1],R[2]=1/j[2],R},ue.normalize=function(R,j){var W=j[0],K=j[1],ae=j[2],ie=W*W+K*K+ae*ae;return ie>0&&(ie=1/Math.sqrt(ie)),R[0]=j[0]*ie,R[1]=j[1]*ie,R[2]=j[2]*ie,R},ue.dot=k,ue.cross=function(R,j,W){var K=j[0],ae=j[1],ie=j[2],J=W[0],le=W[1],fe=W[2];return R[0]=ae*fe-ie*le,R[1]=ie*J-K*fe,R[2]=K*le-ae*J,R},ue.lerp=function(R,j,W,K){var ae=j[0],ie=j[1],J=j[2];return R[0]=ae+K*(W[0]-ae),R[1]=ie+K*(W[1]-ie),R[2]=J+K*(W[2]-J),R},ue.hermite=function(R,j,W,K,ae,ie){var J=ie*ie,le=J*(2*ie-3)+1,fe=J*(ie-2)+ie,_e=J*(ie-1),je=J*(3-2*ie);return R[0]=j[0]*le+W[0]*fe+K[0]*_e+ae[0]*je,R[1]=j[1]*le+W[1]*fe+K[1]*_e+ae[1]*je,R[2]=j[2]*le+W[2]*fe+K[2]*_e+ae[2]*je,R},ue.bezier=function(R,j,W,K,ae,ie){var J=1-ie,le=J*J,fe=ie*ie,_e=le*J,je=3*ie*le,Ne=3*fe*J,Be=fe*ie;return R[0]=j[0]*_e+W[0]*je+K[0]*Ne+ae[0]*Be,R[1]=j[1]*_e+W[1]*je+K[1]*Ne+ae[1]*Be,R[2]=j[2]*_e+W[2]*je+K[2]*Ne+ae[2]*Be,R},ue.random=function(R,j){j=j||1;var W=2*r.RANDOM()*Math.PI,K=2*r.RANDOM()-1,ae=Math.sqrt(1-K*K)*j;return R[0]=Math.cos(W)*ae,R[1]=Math.sin(W)*ae,R[2]=K*j,R},ue.transformMat4=function(R,j,W){var K=j[0],ae=j[1],ie=j[2],J=W[3]*K+W[7]*ae+W[11]*ie+W[15];return R[0]=(W[0]*K+W[4]*ae+W[8]*ie+W[12])/(J=J||1),R[1]=(W[1]*K+W[5]*ae+W[9]*ie+W[13])/J,R[2]=(W[2]*K+W[6]*ae+W[10]*ie+W[14])/J,R},ue.transformMat3=function(R,j,W){var K=j[0],ae=j[1],ie=j[2];return R[0]=K*W[0]+ae*W[3]+ie*W[6],R[1]=K*W[1]+ae*W[4]+ie*W[7],R[2]=K*W[2]+ae*W[5]+ie*W[8],R},ue.transformQuat=function(R,j,W){var K=W[0],ae=W[1],ie=W[2],J=j[0],le=j[1],fe=j[2],_e=ae*fe-ie*le,je=ie*J-K*fe,Ne=K*le-ae*J,Be=ae*Ne-ie*je,Qe=ie*_e-K*Ne,Ue=K*je-ae*_e,rt=2*W[3];return je*=rt,Ne*=rt,Qe*=2,Ue*=2,R[0]=J+(_e*=rt)+(Be*=2),R[1]=le+je+Qe,R[2]=fe+Ne+Ue,R},ue.rotateX=function(R,j,W,K){var ae=[],ie=[];return ae[0]=j[0]-W[0],ae[1]=j[1]-W[1],ae[2]=j[2]-W[2],ie[0]=ae[0],ie[1]=ae[1]*Math.cos(K)-ae[2]*Math.sin(K),ie[2]=ae[1]*Math.sin(K)+ae[2]*Math.cos(K),R[0]=ie[0]+W[0],R[1]=ie[1]+W[1],R[2]=ie[2]+W[2],R},ue.rotateY=function(R,j,W,K){var ae=[],ie=[];return ae[0]=j[0]-W[0],ae[1]=j[1]-W[1],ae[2]=j[2]-W[2],ie[0]=ae[2]*Math.sin(K)+ae[0]*Math.cos(K),ie[1]=ae[1],ie[2]=ae[2]*Math.cos(K)-ae[0]*Math.sin(K),R[0]=ie[0]+W[0],R[1]=ie[1]+W[1],R[2]=ie[2]+W[2],R},ue.rotateZ=function(R,j,W,K){var ae=[],ie=[];return ae[0]=j[0]-W[0],ae[1]=j[1]-W[1],ae[2]=j[2]-W[2],ie[0]=ae[0]*Math.cos(K)-ae[1]*Math.sin(K),ie[1]=ae[0]*Math.sin(K)+ae[1]*Math.cos(K),ie[2]=ae[2],R[0]=ie[0]+W[0],R[1]=ie[1]+W[1],R[2]=ie[2]+W[2],R},ue.angle=function(R,j){var W=R[0],K=R[1],ae=R[2],ie=j[0],J=j[1],le=j[2],fe=Math.sqrt(W*W+K*K+ae*ae)*Math.sqrt(ie*ie+J*J+le*le),_e=fe&&k(R,j)/fe;return Math.acos(Math.min(Math.max(_e,-1),1))},ue.zero=function(R){return R[0]=0,R[1]=0,R[2]=0,R},ue.str=function(R){return"vec3("+R[0]+", "+R[1]+", "+R[2]+")"},ue.exactEquals=function(R,j){return R[0]===j[0]&&R[1]===j[1]&&R[2]===j[2]},ue.equals=function(R,j){var W=R[0],K=R[1],ae=R[2],ie=j[0],J=j[1],le=j[2];return Math.abs(W-ie)<=r.EPSILON*Math.max(1,Math.abs(W),Math.abs(ie))&&Math.abs(K-J)<=r.EPSILON*Math.max(1,Math.abs(K),Math.abs(J))&&Math.abs(ae-le)<=r.EPSILON*Math.max(1,Math.abs(ae),Math.abs(le))},ue.forEach=ue.sqrLen=ue.len=ue.sqrDist=ue.dist=ue.div=ue.mul=ue.sub=void 0;var r=function(R,j){if(R&&R.__esModule)return R;if(R===null||l(R)!=="object"&&typeof R!="function")return{default:R};var W=s(void 0);if(W&&W.has(R))return W.get(R);var K={},ae=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ie in R)if(ie!=="default"&&Object.prototype.hasOwnProperty.call(R,ie)){var J=ae?Object.getOwnPropertyDescriptor(R,ie):null;J&&(J.get||J.set)?Object.defineProperty(K,ie,J):K[ie]=R[ie]}return K.default=R,W&&W.set(R,K),K}(G());function s(R){if(typeof WeakMap!="function")return null;var j=new WeakMap,W=new WeakMap;return(s=function(K){return K?W:j})(R)}function u(){var R=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0),R}function g(R){return Math.hypot(R[0],R[1],R[2])}function f(R,j,W){return R[0]=j[0]-W[0],R[1]=j[1]-W[1],R[2]=j[2]-W[2],R}function x(R,j,W){return R[0]=j[0]*W[0],R[1]=j[1]*W[1],R[2]=j[2]*W[2],R}function C(R,j,W){return R[0]=j[0]/W[0],R[1]=j[1]/W[1],R[2]=j[2]/W[2],R}function M(R,j){return Math.hypot(j[0]-R[0],j[1]-R[1],j[2]-R[2])}function $(R,j){var W=j[0]-R[0],K=j[1]-R[1],ae=j[2]-R[2];return W*W+K*K+ae*ae}function T(R){var j=R[0],W=R[1],K=R[2];return j*j+W*W+K*K}function k(R,j){return R[0]*j[0]+R[1]*j[1]+R[2]*j[2]}ue.sub=f,ue.mul=x,ue.div=C,ue.dist=M,ue.sqrDist=$,ue.len=g,ue.sqrLen=T;var I,P=(I=u(),function(R,j,W,K,ae,ie){var J,le;for(j||(j=3),W||(W=0),le=K?Math.min(K*j+W,R.length):R.length,J=W;J<le;J+=j)I[0]=R[J],I[1]=R[J+1],I[2]=R[J+2],ae(I,I,ie),R[J]=I[0],R[J+1]=I[1],R[J+2]=I[2];return R});return ue.forEach=P,ue}var ce,Pe,xe={};function Te(){if(ce)return xe;function l(P){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},l(P)}ce=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.create=u,xe.clone=function(P){var R=new r.ARRAY_TYPE(4);return R[0]=P[0],R[1]=P[1],R[2]=P[2],R[3]=P[3],R},xe.fromValues=function(P,R,j,W){var K=new r.ARRAY_TYPE(4);return K[0]=P,K[1]=R,K[2]=j,K[3]=W,K},xe.copy=function(P,R){return P[0]=R[0],P[1]=R[1],P[2]=R[2],P[3]=R[3],P},xe.set=function(P,R,j,W,K){return P[0]=R,P[1]=j,P[2]=W,P[3]=K,P},xe.add=function(P,R,j){return P[0]=R[0]+j[0],P[1]=R[1]+j[1],P[2]=R[2]+j[2],P[3]=R[3]+j[3],P},xe.subtract=g,xe.multiply=f,xe.divide=x,xe.ceil=function(P,R){return P[0]=Math.ceil(R[0]),P[1]=Math.ceil(R[1]),P[2]=Math.ceil(R[2]),P[3]=Math.ceil(R[3]),P},xe.floor=function(P,R){return P[0]=Math.floor(R[0]),P[1]=Math.floor(R[1]),P[2]=Math.floor(R[2]),P[3]=Math.floor(R[3]),P},xe.min=function(P,R,j){return P[0]=Math.min(R[0],j[0]),P[1]=Math.min(R[1],j[1]),P[2]=Math.min(R[2],j[2]),P[3]=Math.min(R[3],j[3]),P},xe.max=function(P,R,j){return P[0]=Math.max(R[0],j[0]),P[1]=Math.max(R[1],j[1]),P[2]=Math.max(R[2],j[2]),P[3]=Math.max(R[3],j[3]),P},xe.round=function(P,R){return P[0]=Math.round(R[0]),P[1]=Math.round(R[1]),P[2]=Math.round(R[2]),P[3]=Math.round(R[3]),P},xe.scale=function(P,R,j){return P[0]=R[0]*j,P[1]=R[1]*j,P[2]=R[2]*j,P[3]=R[3]*j,P},xe.scaleAndAdd=function(P,R,j,W){return P[0]=R[0]+j[0]*W,P[1]=R[1]+j[1]*W,P[2]=R[2]+j[2]*W,P[3]=R[3]+j[3]*W,P},xe.distance=C,xe.squaredDistance=M,xe.length=$,xe.squaredLength=T,xe.negate=function(P,R){return P[0]=-R[0],P[1]=-R[1],P[2]=-R[2],P[3]=-R[3],P},xe.inverse=function(P,R){return P[0]=1/R[0],P[1]=1/R[1],P[2]=1/R[2],P[3]=1/R[3],P},xe.normalize=function(P,R){var j=R[0],W=R[1],K=R[2],ae=R[3],ie=j*j+W*W+K*K+ae*ae;return ie>0&&(ie=1/Math.sqrt(ie)),P[0]=j*ie,P[1]=W*ie,P[2]=K*ie,P[3]=ae*ie,P},xe.dot=function(P,R){return P[0]*R[0]+P[1]*R[1]+P[2]*R[2]+P[3]*R[3]},xe.cross=function(P,R,j,W){var K=j[0]*W[1]-j[1]*W[0],ae=j[0]*W[2]-j[2]*W[0],ie=j[0]*W[3]-j[3]*W[0],J=j[1]*W[2]-j[2]*W[1],le=j[1]*W[3]-j[3]*W[1],fe=j[2]*W[3]-j[3]*W[2],_e=R[0],je=R[1],Ne=R[2],Be=R[3];return P[0]=je*fe-Ne*le+Be*J,P[1]=-_e*fe+Ne*ie-Be*ae,P[2]=_e*le-je*ie+Be*K,P[3]=-_e*J+je*ae-Ne*K,P},xe.lerp=function(P,R,j,W){var K=R[0],ae=R[1],ie=R[2],J=R[3];return P[0]=K+W*(j[0]-K),P[1]=ae+W*(j[1]-ae),P[2]=ie+W*(j[2]-ie),P[3]=J+W*(j[3]-J),P},xe.random=function(P,R){var j,W,K,ae,ie,J;R=R||1;do ie=(j=2*r.RANDOM()-1)*j+(W=2*r.RANDOM()-1)*W;while(ie>=1);do J=(K=2*r.RANDOM()-1)*K+(ae=2*r.RANDOM()-1)*ae;while(J>=1);var le=Math.sqrt((1-ie)/J);return P[0]=R*j,P[1]=R*W,P[2]=R*K*le,P[3]=R*ae*le,P},xe.transformMat4=function(P,R,j){var W=R[0],K=R[1],ae=R[2],ie=R[3];return P[0]=j[0]*W+j[4]*K+j[8]*ae+j[12]*ie,P[1]=j[1]*W+j[5]*K+j[9]*ae+j[13]*ie,P[2]=j[2]*W+j[6]*K+j[10]*ae+j[14]*ie,P[3]=j[3]*W+j[7]*K+j[11]*ae+j[15]*ie,P},xe.transformQuat=function(P,R,j){var W=R[0],K=R[1],ae=R[2],ie=j[0],J=j[1],le=j[2],fe=j[3],_e=fe*W+J*ae-le*K,je=fe*K+le*W-ie*ae,Ne=fe*ae+ie*K-J*W,Be=-ie*W-J*K-le*ae;return P[0]=_e*fe+Be*-ie+je*-le-Ne*-J,P[1]=je*fe+Be*-J+Ne*-ie-_e*-le,P[2]=Ne*fe+Be*-le+_e*-J-je*-ie,P[3]=R[3],P},xe.zero=function(P){return P[0]=0,P[1]=0,P[2]=0,P[3]=0,P},xe.str=function(P){return"vec4("+P[0]+", "+P[1]+", "+P[2]+", "+P[3]+")"},xe.exactEquals=function(P,R){return P[0]===R[0]&&P[1]===R[1]&&P[2]===R[2]&&P[3]===R[3]},xe.equals=function(P,R){var j=P[0],W=P[1],K=P[2],ae=P[3],ie=R[0],J=R[1],le=R[2],fe=R[3];return Math.abs(j-ie)<=r.EPSILON*Math.max(1,Math.abs(j),Math.abs(ie))&&Math.abs(W-J)<=r.EPSILON*Math.max(1,Math.abs(W),Math.abs(J))&&Math.abs(K-le)<=r.EPSILON*Math.max(1,Math.abs(K),Math.abs(le))&&Math.abs(ae-fe)<=r.EPSILON*Math.max(1,Math.abs(ae),Math.abs(fe))},xe.forEach=xe.sqrLen=xe.len=xe.sqrDist=xe.dist=xe.div=xe.mul=xe.sub=void 0;var r=function(P,R){if(P&&P.__esModule)return P;if(P===null||l(P)!=="object"&&typeof P!="function")return{default:P};var j=s(void 0);if(j&&j.has(P))return j.get(P);var W={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in P)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(P,ae)){var ie=K?Object.getOwnPropertyDescriptor(P,ae):null;ie&&(ie.get||ie.set)?Object.defineProperty(W,ae,ie):W[ae]=P[ae]}return W.default=P,j&&j.set(P,W),W}(G());function s(P){if(typeof WeakMap!="function")return null;var R=new WeakMap,j=new WeakMap;return(s=function(W){return W?j:R})(P)}function u(){var P=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0,P[2]=0,P[3]=0),P}function g(P,R,j){return P[0]=R[0]-j[0],P[1]=R[1]-j[1],P[2]=R[2]-j[2],P[3]=R[3]-j[3],P}function f(P,R,j){return P[0]=R[0]*j[0],P[1]=R[1]*j[1],P[2]=R[2]*j[2],P[3]=R[3]*j[3],P}function x(P,R,j){return P[0]=R[0]/j[0],P[1]=R[1]/j[1],P[2]=R[2]/j[2],P[3]=R[3]/j[3],P}function C(P,R){return Math.hypot(R[0]-P[0],R[1]-P[1],R[2]-P[2],R[3]-P[3])}function M(P,R){var j=R[0]-P[0],W=R[1]-P[1],K=R[2]-P[2],ae=R[3]-P[3];return j*j+W*W+K*K+ae*ae}function $(P){return Math.hypot(P[0],P[1],P[2],P[3])}function T(P){var R=P[0],j=P[1],W=P[2],K=P[3];return R*R+j*j+W*W+K*K}xe.sub=g,xe.mul=f,xe.div=x,xe.dist=C,xe.sqrDist=M,xe.len=$,xe.sqrLen=T;var k,I=(k=u(),function(P,R,j,W,K,ae){var ie,J;for(R||(R=4),j||(j=0),J=W?Math.min(W*R+j,P.length):P.length,ie=j;ie<J;ie+=R)k[0]=P[ie],k[1]=P[ie+1],k[2]=P[ie+2],k[3]=P[ie+3],K(k,k,ae),P[ie]=k[0],P[ie+1]=k[1],P[ie+2]=k[2],P[ie+3]=k[3];return P});return xe.forEach=I,xe}function Ie(){if(Pe)return se;function l(Ue){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rt){return typeof rt}:function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},l(Ue)}Pe=1,Object.defineProperty(se,"__esModule",{value:!0}),se.create=C,se.identity=function(Ue){return Ue[0]=0,Ue[1]=0,Ue[2]=0,Ue[3]=1,Ue},se.setAxisAngle=M,se.getAxisAngle=function(Ue,rt){var st=2*Math.acos(rt[3]),it=Math.sin(st/2);return it>r.EPSILON?(Ue[0]=rt[0]/it,Ue[1]=rt[1]/it,Ue[2]=rt[2]/it):(Ue[0]=1,Ue[1]=0,Ue[2]=0),st},se.getAngle=function(Ue,rt){var st=j(Ue,rt);return Math.acos(2*st*st-1)},se.multiply=$,se.rotateX=function(Ue,rt,st){st*=.5;var it=rt[0],ct=rt[1],gt=rt[2],vt=rt[3],ht=Math.sin(st),Rt=Math.cos(st);return Ue[0]=it*Rt+vt*ht,Ue[1]=ct*Rt+gt*ht,Ue[2]=gt*Rt-ct*ht,Ue[3]=vt*Rt-it*ht,Ue},se.rotateY=function(Ue,rt,st){st*=.5;var it=rt[0],ct=rt[1],gt=rt[2],vt=rt[3],ht=Math.sin(st),Rt=Math.cos(st);return Ue[0]=it*Rt-gt*ht,Ue[1]=ct*Rt+vt*ht,Ue[2]=gt*Rt+it*ht,Ue[3]=vt*Rt-ct*ht,Ue},se.rotateZ=function(Ue,rt,st){st*=.5;var it=rt[0],ct=rt[1],gt=rt[2],vt=rt[3],ht=Math.sin(st),Rt=Math.cos(st);return Ue[0]=it*Rt+ct*ht,Ue[1]=ct*Rt-it*ht,Ue[2]=gt*Rt+vt*ht,Ue[3]=vt*Rt-gt*ht,Ue},se.calculateW=function(Ue,rt){var st=rt[0],it=rt[1],ct=rt[2];return Ue[0]=st,Ue[1]=it,Ue[2]=ct,Ue[3]=Math.sqrt(Math.abs(1-st*st-it*it-ct*ct)),Ue},se.exp=T,se.ln=k,se.pow=function(Ue,rt,st){return k(Ue,rt),R(Ue,Ue,st),T(Ue,Ue),Ue},se.slerp=I,se.random=function(Ue){var rt=r.RANDOM(),st=r.RANDOM(),it=r.RANDOM(),ct=Math.sqrt(1-rt),gt=Math.sqrt(rt);return Ue[0]=ct*Math.sin(2*Math.PI*st),Ue[1]=ct*Math.cos(2*Math.PI*st),Ue[2]=gt*Math.sin(2*Math.PI*it),Ue[3]=gt*Math.cos(2*Math.PI*it),Ue},se.invert=function(Ue,rt){var st=rt[0],it=rt[1],ct=rt[2],gt=rt[3],vt=st*st+it*it+ct*ct+gt*gt,ht=vt?1/vt:0;return Ue[0]=-st*ht,Ue[1]=-it*ht,Ue[2]=-ct*ht,Ue[3]=gt*ht,Ue},se.conjugate=function(Ue,rt){return Ue[0]=-rt[0],Ue[1]=-rt[1],Ue[2]=-rt[2],Ue[3]=rt[3],Ue},se.fromMat3=P,se.fromEuler=function(Ue,rt,st,it){var ct=.5*Math.PI/180;rt*=ct,st*=ct,it*=ct;var gt=Math.sin(rt),vt=Math.cos(rt),ht=Math.sin(st),Rt=Math.cos(st),Yt=Math.sin(it),Lt=Math.cos(it);return Ue[0]=gt*Rt*Lt-vt*ht*Yt,Ue[1]=vt*ht*Lt+gt*Rt*Yt,Ue[2]=vt*Rt*Yt-gt*ht*Lt,Ue[3]=vt*Rt*Lt+gt*ht*Yt,Ue},se.str=function(Ue){return"quat("+Ue[0]+", "+Ue[1]+", "+Ue[2]+", "+Ue[3]+")"},se.setAxes=se.sqlerp=se.rotationTo=se.equals=se.exactEquals=se.normalize=se.sqrLen=se.squaredLength=se.len=se.length=se.lerp=se.dot=se.scale=se.mul=se.add=se.set=se.copy=se.fromValues=se.clone=void 0;var r=x(G()),s=x(Se()),u=x(ke()),g=x(Te());function f(Ue){if(typeof WeakMap!="function")return null;var rt=new WeakMap,st=new WeakMap;return(f=function(it){return it?st:rt})(Ue)}function x(Ue,rt){if(Ue&&Ue.__esModule)return Ue;if(Ue===null||l(Ue)!=="object"&&typeof Ue!="function")return{default:Ue};var st=f(rt);if(st&&st.has(Ue))return st.get(Ue);var it={},ct=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var gt in Ue)if(gt!=="default"&&Object.prototype.hasOwnProperty.call(Ue,gt)){var vt=ct?Object.getOwnPropertyDescriptor(Ue,gt):null;vt&&(vt.get||vt.set)?Object.defineProperty(it,gt,vt):it[gt]=Ue[gt]}return it.default=Ue,st&&st.set(Ue,it),it}function C(){var Ue=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(Ue[0]=0,Ue[1]=0,Ue[2]=0),Ue[3]=1,Ue}function M(Ue,rt,st){st*=.5;var it=Math.sin(st);return Ue[0]=it*rt[0],Ue[1]=it*rt[1],Ue[2]=it*rt[2],Ue[3]=Math.cos(st),Ue}function $(Ue,rt,st){var it=rt[0],ct=rt[1],gt=rt[2],vt=rt[3],ht=st[0],Rt=st[1],Yt=st[2],Lt=st[3];return Ue[0]=it*Lt+vt*ht+ct*Yt-gt*Rt,Ue[1]=ct*Lt+vt*Rt+gt*ht-it*Yt,Ue[2]=gt*Lt+vt*Yt+it*Rt-ct*ht,Ue[3]=vt*Lt-it*ht-ct*Rt-gt*Yt,Ue}function T(Ue,rt){var st=rt[0],it=rt[1],ct=rt[2],gt=rt[3],vt=Math.sqrt(st*st+it*it+ct*ct),ht=Math.exp(gt),Rt=vt>0?ht*Math.sin(vt)/vt:0;return Ue[0]=st*Rt,Ue[1]=it*Rt,Ue[2]=ct*Rt,Ue[3]=ht*Math.cos(vt),Ue}function k(Ue,rt){var st=rt[0],it=rt[1],ct=rt[2],gt=rt[3],vt=Math.sqrt(st*st+it*it+ct*ct),ht=vt>0?Math.atan2(vt,gt)/vt:0;return Ue[0]=st*ht,Ue[1]=it*ht,Ue[2]=ct*ht,Ue[3]=.5*Math.log(st*st+it*it+ct*ct+gt*gt),Ue}function I(Ue,rt,st,it){var ct,gt,vt,ht,Rt,Yt=rt[0],Lt=rt[1],ar=rt[2],nr=rt[3],gr=st[0],jt=st[1],Mr=st[2],sr=st[3];return(gt=Yt*gr+Lt*jt+ar*Mr+nr*sr)<0&&(gt=-gt,gr=-gr,jt=-jt,Mr=-Mr,sr=-sr),1-gt>r.EPSILON?(ct=Math.acos(gt),vt=Math.sin(ct),ht=Math.sin((1-it)*ct)/vt,Rt=Math.sin(it*ct)/vt):(ht=1-it,Rt=it),Ue[0]=ht*Yt+Rt*gr,Ue[1]=ht*Lt+Rt*jt,Ue[2]=ht*ar+Rt*Mr,Ue[3]=ht*nr+Rt*sr,Ue}function P(Ue,rt){var st,it=rt[0]+rt[4]+rt[8];if(it>0)st=Math.sqrt(it+1),Ue[3]=.5*st,Ue[0]=(rt[5]-rt[7])*(st=.5/st),Ue[1]=(rt[6]-rt[2])*st,Ue[2]=(rt[1]-rt[3])*st;else{var ct=0;rt[4]>rt[0]&&(ct=1),rt[8]>rt[3*ct+ct]&&(ct=2);var gt=(ct+1)%3,vt=(ct+2)%3;st=Math.sqrt(rt[3*ct+ct]-rt[3*gt+gt]-rt[3*vt+vt]+1),Ue[ct]=.5*st,Ue[3]=(rt[3*gt+vt]-rt[3*vt+gt])*(st=.5/st),Ue[gt]=(rt[3*gt+ct]+rt[3*ct+gt])*st,Ue[vt]=(rt[3*vt+ct]+rt[3*ct+vt])*st}return Ue}se.clone=g.clone,se.fromValues=g.fromValues,se.copy=g.copy,se.set=g.set,se.add=g.add,se.mul=$;var R=g.scale;se.scale=R;var j=g.dot;se.dot=j,se.lerp=g.lerp;var W=g.length;se.length=W,se.len=W;var K=g.squaredLength;se.squaredLength=K,se.sqrLen=K;var ae=g.normalize;se.normalize=ae,se.exactEquals=g.exactEquals,se.equals=g.equals;var ie,J,le,fe=(ie=u.create(),J=u.fromValues(1,0,0),le=u.fromValues(0,1,0),function(Ue,rt,st){var it=u.dot(rt,st);return it<-.999999?(u.cross(ie,J,rt),u.len(ie)<1e-6&&u.cross(ie,le,rt),u.normalize(ie,ie),M(Ue,ie,Math.PI),Ue):it>.999999?(Ue[0]=0,Ue[1]=0,Ue[2]=0,Ue[3]=1,Ue):(u.cross(ie,rt,st),Ue[0]=ie[0],Ue[1]=ie[1],Ue[2]=ie[2],Ue[3]=1+it,ae(Ue,Ue))});se.rotationTo=fe;var _e,je,Ne=(_e=C(),je=C(),function(Ue,rt,st,it,ct,gt){return I(_e,rt,ct,gt),I(je,st,it,gt),I(Ue,_e,je,2*gt*(1-gt)),Ue});se.sqlerp=Ne;var Be,Qe=(Be=s.create(),function(Ue,rt,st,it){return Be[0]=st[0],Be[3]=st[1],Be[6]=st[2],Be[1]=it[0],Be[4]=it[1],Be[7]=it[2],Be[2]=-rt[0],Be[5]=-rt[1],Be[8]=-rt[2],ae(Ue,P(Ue,Be))});return se.setAxes=Qe,se}var Me,Xe={};function Ce(){if(Me)return Xe;function l(I){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},l(I)}Me=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.create=function(){var I=new r.ARRAY_TYPE(8);return r.ARRAY_TYPE!=Float32Array&&(I[0]=0,I[1]=0,I[2]=0,I[4]=0,I[5]=0,I[6]=0,I[7]=0),I[3]=1,I},Xe.clone=function(I){var P=new r.ARRAY_TYPE(8);return P[0]=I[0],P[1]=I[1],P[2]=I[2],P[3]=I[3],P[4]=I[4],P[5]=I[5],P[6]=I[6],P[7]=I[7],P},Xe.fromValues=function(I,P,R,j,W,K,ae,ie){var J=new r.ARRAY_TYPE(8);return J[0]=I,J[1]=P,J[2]=R,J[3]=j,J[4]=W,J[5]=K,J[6]=ae,J[7]=ie,J},Xe.fromRotationTranslationValues=function(I,P,R,j,W,K,ae){var ie=new r.ARRAY_TYPE(8);ie[0]=I,ie[1]=P,ie[2]=R,ie[3]=j;var J=.5*W,le=.5*K,fe=.5*ae;return ie[4]=J*j+le*R-fe*P,ie[5]=le*j+fe*I-J*R,ie[6]=fe*j+J*P-le*I,ie[7]=-J*I-le*P-fe*R,ie},Xe.fromRotationTranslation=x,Xe.fromTranslation=function(I,P){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=.5*P[0],I[5]=.5*P[1],I[6]=.5*P[2],I[7]=0,I},Xe.fromRotation=function(I,P){return I[0]=P[0],I[1]=P[1],I[2]=P[2],I[3]=P[3],I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},Xe.fromMat4=function(I,P){var R=s.create();u.getRotation(R,P);var j=new r.ARRAY_TYPE(3);return u.getTranslation(j,P),x(I,R,j),I},Xe.copy=C,Xe.identity=function(I){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},Xe.set=function(I,P,R,j,W,K,ae,ie,J){return I[0]=P,I[1]=R,I[2]=j,I[3]=W,I[4]=K,I[5]=ae,I[6]=ie,I[7]=J,I},Xe.getDual=function(I,P){return I[0]=P[4],I[1]=P[5],I[2]=P[6],I[3]=P[7],I},Xe.setDual=function(I,P){return I[4]=P[0],I[5]=P[1],I[6]=P[2],I[7]=P[3],I},Xe.getTranslation=function(I,P){var R=P[4],j=P[5],W=P[6],K=P[7],ae=-P[0],ie=-P[1],J=-P[2],le=P[3];return I[0]=2*(R*le+K*ae+j*J-W*ie),I[1]=2*(j*le+K*ie+W*ae-R*J),I[2]=2*(W*le+K*J+R*ie-j*ae),I},Xe.translate=function(I,P,R){var j=P[0],W=P[1],K=P[2],ae=P[3],ie=.5*R[0],J=.5*R[1],le=.5*R[2],fe=P[4],_e=P[5],je=P[6],Ne=P[7];return I[0]=j,I[1]=W,I[2]=K,I[3]=ae,I[4]=ae*ie+W*le-K*J+fe,I[5]=ae*J+K*ie-j*le+_e,I[6]=ae*le+j*J-W*ie+je,I[7]=-j*ie-W*J-K*le+Ne,I},Xe.rotateX=function(I,P,R){var j=-P[0],W=-P[1],K=-P[2],ae=P[3],ie=P[4],J=P[5],le=P[6],fe=P[7],_e=ie*ae+fe*j+J*K-le*W,je=J*ae+fe*W+le*j-ie*K,Ne=le*ae+fe*K+ie*W-J*j,Be=fe*ae-ie*j-J*W-le*K;return s.rotateX(I,P,R),I[4]=_e*(ae=I[3])+Be*(j=I[0])+je*(K=I[2])-Ne*(W=I[1]),I[5]=je*ae+Be*W+Ne*j-_e*K,I[6]=Ne*ae+Be*K+_e*W-je*j,I[7]=Be*ae-_e*j-je*W-Ne*K,I},Xe.rotateY=function(I,P,R){var j=-P[0],W=-P[1],K=-P[2],ae=P[3],ie=P[4],J=P[5],le=P[6],fe=P[7],_e=ie*ae+fe*j+J*K-le*W,je=J*ae+fe*W+le*j-ie*K,Ne=le*ae+fe*K+ie*W-J*j,Be=fe*ae-ie*j-J*W-le*K;return s.rotateY(I,P,R),I[4]=_e*(ae=I[3])+Be*(j=I[0])+je*(K=I[2])-Ne*(W=I[1]),I[5]=je*ae+Be*W+Ne*j-_e*K,I[6]=Ne*ae+Be*K+_e*W-je*j,I[7]=Be*ae-_e*j-je*W-Ne*K,I},Xe.rotateZ=function(I,P,R){var j=-P[0],W=-P[1],K=-P[2],ae=P[3],ie=P[4],J=P[5],le=P[6],fe=P[7],_e=ie*ae+fe*j+J*K-le*W,je=J*ae+fe*W+le*j-ie*K,Ne=le*ae+fe*K+ie*W-J*j,Be=fe*ae-ie*j-J*W-le*K;return s.rotateZ(I,P,R),I[4]=_e*(ae=I[3])+Be*(j=I[0])+je*(K=I[2])-Ne*(W=I[1]),I[5]=je*ae+Be*W+Ne*j-_e*K,I[6]=Ne*ae+Be*K+_e*W-je*j,I[7]=Be*ae-_e*j-je*W-Ne*K,I},Xe.rotateByQuatAppend=function(I,P,R){var j=R[0],W=R[1],K=R[2],ae=R[3],ie=P[0],J=P[1],le=P[2],fe=P[3];return I[0]=ie*ae+fe*j+J*K-le*W,I[1]=J*ae+fe*W+le*j-ie*K,I[2]=le*ae+fe*K+ie*W-J*j,I[3]=fe*ae-ie*j-J*W-le*K,I[4]=(ie=P[4])*ae+(fe=P[7])*j+(J=P[5])*K-(le=P[6])*W,I[5]=J*ae+fe*W+le*j-ie*K,I[6]=le*ae+fe*K+ie*W-J*j,I[7]=fe*ae-ie*j-J*W-le*K,I},Xe.rotateByQuatPrepend=function(I,P,R){var j=P[0],W=P[1],K=P[2],ae=P[3],ie=R[0],J=R[1],le=R[2],fe=R[3];return I[0]=j*fe+ae*ie+W*le-K*J,I[1]=W*fe+ae*J+K*ie-j*le,I[2]=K*fe+ae*le+j*J-W*ie,I[3]=ae*fe-j*ie-W*J-K*le,I[4]=j*(fe=R[7])+ae*(ie=R[4])+W*(le=R[6])-K*(J=R[5]),I[5]=W*fe+ae*J+K*ie-j*le,I[6]=K*fe+ae*le+j*J-W*ie,I[7]=ae*fe-j*ie-W*J-K*le,I},Xe.rotateAroundAxis=function(I,P,R,j){if(Math.abs(j)<r.EPSILON)return C(I,P);var W=Math.hypot(R[0],R[1],R[2]);j*=.5;var K=Math.sin(j),ae=K*R[0]/W,ie=K*R[1]/W,J=K*R[2]/W,le=Math.cos(j),fe=P[0],_e=P[1],je=P[2],Ne=P[3];I[0]=fe*le+Ne*ae+_e*J-je*ie,I[1]=_e*le+Ne*ie+je*ae-fe*J,I[2]=je*le+Ne*J+fe*ie-_e*ae,I[3]=Ne*le-fe*ae-_e*ie-je*J;var Be=P[4],Qe=P[5],Ue=P[6],rt=P[7];return I[4]=Be*le+rt*ae+Qe*J-Ue*ie,I[5]=Qe*le+rt*ie+Ue*ae-Be*J,I[6]=Ue*le+rt*J+Be*ie-Qe*ae,I[7]=rt*le-Be*ae-Qe*ie-Ue*J,I},Xe.add=function(I,P,R){return I[0]=P[0]+R[0],I[1]=P[1]+R[1],I[2]=P[2]+R[2],I[3]=P[3]+R[3],I[4]=P[4]+R[4],I[5]=P[5]+R[5],I[6]=P[6]+R[6],I[7]=P[7]+R[7],I},Xe.multiply=M,Xe.scale=function(I,P,R){return I[0]=P[0]*R,I[1]=P[1]*R,I[2]=P[2]*R,I[3]=P[3]*R,I[4]=P[4]*R,I[5]=P[5]*R,I[6]=P[6]*R,I[7]=P[7]*R,I},Xe.lerp=function(I,P,R,j){var W=1-j;return $(P,R)<0&&(j=-j),I[0]=P[0]*W+R[0]*j,I[1]=P[1]*W+R[1]*j,I[2]=P[2]*W+R[2]*j,I[3]=P[3]*W+R[3]*j,I[4]=P[4]*W+R[4]*j,I[5]=P[5]*W+R[5]*j,I[6]=P[6]*W+R[6]*j,I[7]=P[7]*W+R[7]*j,I},Xe.invert=function(I,P){var R=k(P);return I[0]=-P[0]/R,I[1]=-P[1]/R,I[2]=-P[2]/R,I[3]=P[3]/R,I[4]=-P[4]/R,I[5]=-P[5]/R,I[6]=-P[6]/R,I[7]=P[7]/R,I},Xe.conjugate=function(I,P){return I[0]=-P[0],I[1]=-P[1],I[2]=-P[2],I[3]=P[3],I[4]=-P[4],I[5]=-P[5],I[6]=-P[6],I[7]=P[7],I},Xe.normalize=function(I,P){var R=k(P);if(R>0){R=Math.sqrt(R);var j=P[0]/R,W=P[1]/R,K=P[2]/R,ae=P[3]/R,ie=P[4],J=P[5],le=P[6],fe=P[7],_e=j*ie+W*J+K*le+ae*fe;I[0]=j,I[1]=W,I[2]=K,I[3]=ae,I[4]=(ie-j*_e)/R,I[5]=(J-W*_e)/R,I[6]=(le-K*_e)/R,I[7]=(fe-ae*_e)/R}return I},Xe.str=function(I){return"quat2("+I[0]+", "+I[1]+", "+I[2]+", "+I[3]+", "+I[4]+", "+I[5]+", "+I[6]+", "+I[7]+")"},Xe.exactEquals=function(I,P){return I[0]===P[0]&&I[1]===P[1]&&I[2]===P[2]&&I[3]===P[3]&&I[4]===P[4]&&I[5]===P[5]&&I[6]===P[6]&&I[7]===P[7]},Xe.equals=function(I,P){var R=I[0],j=I[1],W=I[2],K=I[3],ae=I[4],ie=I[5],J=I[6],le=I[7],fe=P[0],_e=P[1],je=P[2],Ne=P[3],Be=P[4],Qe=P[5],Ue=P[6],rt=P[7];return Math.abs(R-fe)<=r.EPSILON*Math.max(1,Math.abs(R),Math.abs(fe))&&Math.abs(j-_e)<=r.EPSILON*Math.max(1,Math.abs(j),Math.abs(_e))&&Math.abs(W-je)<=r.EPSILON*Math.max(1,Math.abs(W),Math.abs(je))&&Math.abs(K-Ne)<=r.EPSILON*Math.max(1,Math.abs(K),Math.abs(Ne))&&Math.abs(ae-Be)<=r.EPSILON*Math.max(1,Math.abs(ae),Math.abs(Be))&&Math.abs(ie-Qe)<=r.EPSILON*Math.max(1,Math.abs(ie),Math.abs(Qe))&&Math.abs(J-Ue)<=r.EPSILON*Math.max(1,Math.abs(J),Math.abs(Ue))&&Math.abs(le-rt)<=r.EPSILON*Math.max(1,Math.abs(le),Math.abs(rt))},Xe.sqrLen=Xe.squaredLength=Xe.len=Xe.length=Xe.dot=Xe.mul=Xe.setReal=Xe.getReal=void 0;var r=f(G()),s=f(Ie()),u=f(re());function g(I){if(typeof WeakMap!="function")return null;var P=new WeakMap,R=new WeakMap;return(g=function(j){return j?R:P})(I)}function f(I,P){if(I&&I.__esModule)return I;if(I===null||l(I)!=="object"&&typeof I!="function")return{default:I};var R=g(P);if(R&&R.has(I))return R.get(I);var j={},W=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in I)if(K!=="default"&&Object.prototype.hasOwnProperty.call(I,K)){var ae=W?Object.getOwnPropertyDescriptor(I,K):null;ae&&(ae.get||ae.set)?Object.defineProperty(j,K,ae):j[K]=I[K]}return j.default=I,R&&R.set(I,j),j}function x(I,P,R){var j=.5*R[0],W=.5*R[1],K=.5*R[2],ae=P[0],ie=P[1],J=P[2],le=P[3];return I[0]=ae,I[1]=ie,I[2]=J,I[3]=le,I[4]=j*le+W*J-K*ie,I[5]=W*le+K*ae-j*J,I[6]=K*le+j*ie-W*ae,I[7]=-j*ae-W*ie-K*J,I}function C(I,P){return I[0]=P[0],I[1]=P[1],I[2]=P[2],I[3]=P[3],I[4]=P[4],I[5]=P[5],I[6]=P[6],I[7]=P[7],I}function M(I,P,R){var j=P[0],W=P[1],K=P[2],ae=P[3],ie=R[4],J=R[5],le=R[6],fe=R[7],_e=P[4],je=P[5],Ne=P[6],Be=P[7],Qe=R[0],Ue=R[1],rt=R[2],st=R[3];return I[0]=j*st+ae*Qe+W*rt-K*Ue,I[1]=W*st+ae*Ue+K*Qe-j*rt,I[2]=K*st+ae*rt+j*Ue-W*Qe,I[3]=ae*st-j*Qe-W*Ue-K*rt,I[4]=j*fe+ae*ie+W*le-K*J+_e*st+Be*Qe+je*rt-Ne*Ue,I[5]=W*fe+ae*J+K*ie-j*le+je*st+Be*Ue+Ne*Qe-_e*rt,I[6]=K*fe+ae*le+j*J-W*ie+Ne*st+Be*rt+_e*Ue-je*Qe,I[7]=ae*fe-j*ie-W*J-K*le+Be*st-_e*Qe-je*Ue-Ne*rt,I}Xe.getReal=s.copy,Xe.setReal=s.copy,Xe.mul=M;var $=s.dot;Xe.dot=$;var T=s.length;Xe.length=T,Xe.len=T;var k=s.squaredLength;return Xe.squaredLength=k,Xe.sqrLen=k,Xe}var He,et,Ke={};function ot(){if(He)return Ke;function l(P){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},l(P)}He=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.create=u,Ke.clone=function(P){var R=new r.ARRAY_TYPE(2);return R[0]=P[0],R[1]=P[1],R},Ke.fromValues=function(P,R){var j=new r.ARRAY_TYPE(2);return j[0]=P,j[1]=R,j},Ke.copy=function(P,R){return P[0]=R[0],P[1]=R[1],P},Ke.set=function(P,R,j){return P[0]=R,P[1]=j,P},Ke.add=function(P,R,j){return P[0]=R[0]+j[0],P[1]=R[1]+j[1],P},Ke.subtract=g,Ke.multiply=f,Ke.divide=x,Ke.ceil=function(P,R){return P[0]=Math.ceil(R[0]),P[1]=Math.ceil(R[1]),P},Ke.floor=function(P,R){return P[0]=Math.floor(R[0]),P[1]=Math.floor(R[1]),P},Ke.min=function(P,R,j){return P[0]=Math.min(R[0],j[0]),P[1]=Math.min(R[1],j[1]),P},Ke.max=function(P,R,j){return P[0]=Math.max(R[0],j[0]),P[1]=Math.max(R[1],j[1]),P},Ke.round=function(P,R){return P[0]=Math.round(R[0]),P[1]=Math.round(R[1]),P},Ke.scale=function(P,R,j){return P[0]=R[0]*j,P[1]=R[1]*j,P},Ke.scaleAndAdd=function(P,R,j,W){return P[0]=R[0]+j[0]*W,P[1]=R[1]+j[1]*W,P},Ke.distance=C,Ke.squaredDistance=M,Ke.length=$,Ke.squaredLength=T,Ke.negate=function(P,R){return P[0]=-R[0],P[1]=-R[1],P},Ke.inverse=function(P,R){return P[0]=1/R[0],P[1]=1/R[1],P},Ke.normalize=function(P,R){var j=R[0],W=R[1],K=j*j+W*W;return K>0&&(K=1/Math.sqrt(K)),P[0]=R[0]*K,P[1]=R[1]*K,P},Ke.dot=function(P,R){return P[0]*R[0]+P[1]*R[1]},Ke.cross=function(P,R,j){var W=R[0]*j[1]-R[1]*j[0];return P[0]=P[1]=0,P[2]=W,P},Ke.lerp=function(P,R,j,W){var K=R[0],ae=R[1];return P[0]=K+W*(j[0]-K),P[1]=ae+W*(j[1]-ae),P},Ke.random=function(P,R){R=R||1;var j=2*r.RANDOM()*Math.PI;return P[0]=Math.cos(j)*R,P[1]=Math.sin(j)*R,P},Ke.transformMat2=function(P,R,j){var W=R[0],K=R[1];return P[0]=j[0]*W+j[2]*K,P[1]=j[1]*W+j[3]*K,P},Ke.transformMat2d=function(P,R,j){var W=R[0],K=R[1];return P[0]=j[0]*W+j[2]*K+j[4],P[1]=j[1]*W+j[3]*K+j[5],P},Ke.transformMat3=function(P,R,j){var W=R[0],K=R[1];return P[0]=j[0]*W+j[3]*K+j[6],P[1]=j[1]*W+j[4]*K+j[7],P},Ke.transformMat4=function(P,R,j){var W=R[0],K=R[1];return P[0]=j[0]*W+j[4]*K+j[12],P[1]=j[1]*W+j[5]*K+j[13],P},Ke.rotate=function(P,R,j,W){var K=R[0]-j[0],ae=R[1]-j[1],ie=Math.sin(W),J=Math.cos(W);return P[0]=K*J-ae*ie+j[0],P[1]=K*ie+ae*J+j[1],P},Ke.angle=function(P,R){var j=P[0],W=P[1],K=R[0],ae=R[1],ie=Math.sqrt(j*j+W*W)*Math.sqrt(K*K+ae*ae);return Math.acos(Math.min(Math.max(ie&&(j*K+W*ae)/ie,-1),1))},Ke.zero=function(P){return P[0]=0,P[1]=0,P},Ke.str=function(P){return"vec2("+P[0]+", "+P[1]+")"},Ke.exactEquals=function(P,R){return P[0]===R[0]&&P[1]===R[1]},Ke.equals=function(P,R){var j=P[0],W=P[1],K=R[0],ae=R[1];return Math.abs(j-K)<=r.EPSILON*Math.max(1,Math.abs(j),Math.abs(K))&&Math.abs(W-ae)<=r.EPSILON*Math.max(1,Math.abs(W),Math.abs(ae))},Ke.forEach=Ke.sqrLen=Ke.sqrDist=Ke.dist=Ke.div=Ke.mul=Ke.sub=Ke.len=void 0;var r=function(P,R){if(P&&P.__esModule)return P;if(P===null||l(P)!=="object"&&typeof P!="function")return{default:P};var j=s(void 0);if(j&&j.has(P))return j.get(P);var W={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in P)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(P,ae)){var ie=K?Object.getOwnPropertyDescriptor(P,ae):null;ie&&(ie.get||ie.set)?Object.defineProperty(W,ae,ie):W[ae]=P[ae]}return W.default=P,j&&j.set(P,W),W}(G());function s(P){if(typeof WeakMap!="function")return null;var R=new WeakMap,j=new WeakMap;return(s=function(W){return W?j:R})(P)}function u(){var P=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0),P}function g(P,R,j){return P[0]=R[0]-j[0],P[1]=R[1]-j[1],P}function f(P,R,j){return P[0]=R[0]*j[0],P[1]=R[1]*j[1],P}function x(P,R,j){return P[0]=R[0]/j[0],P[1]=R[1]/j[1],P}function C(P,R){return Math.hypot(R[0]-P[0],R[1]-P[1])}function M(P,R){var j=R[0]-P[0],W=R[1]-P[1];return j*j+W*W}function $(P){return Math.hypot(P[0],P[1])}function T(P){var R=P[0],j=P[1];return R*R+j*j}Ke.len=$,Ke.sub=g,Ke.mul=f,Ke.div=x,Ke.dist=C,Ke.sqrDist=M,Ke.sqrLen=T;var k,I=(k=u(),function(P,R,j,W,K,ae){var ie,J;for(R||(R=2),j||(j=0),J=W?Math.min(W*R+j,P.length):P.length,ie=j;ie<J;ie+=R)k[0]=P[ie],k[1]=P[ie+1],K(k,k,ae),P[ie]=k[0],P[ie+1]=k[1];return P});return Ke.forEach=I,Ke}function Pt(){if(et)return N;function l(P){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},l(P)}et=1,Object.defineProperty(N,"__esModule",{value:!0}),N.vec4=N.vec3=N.vec2=N.quat2=N.quat=N.mat4=N.mat3=N.mat2d=N.mat2=N.glMatrix=void 0;var r=I(G());N.glMatrix=r;var s=I(Y());N.mat2=s;var u=I(me());N.mat2d=u;var g=I(Se());N.mat3=g;var f=I(re());N.mat4=f;var x=I(Ie());N.quat=x;var C=I(Ce());N.quat2=C;var M=I(ot());N.vec2=M;var $=I(ke());N.vec3=$;var T=I(Te());function k(P){if(typeof WeakMap!="function")return null;var R=new WeakMap,j=new WeakMap;return(k=function(W){return W?j:R})(P)}function I(P,R){if(P&&P.__esModule)return P;if(P===null||l(P)!=="object"&&typeof P!="function")return{default:P};var j=k(R);if(j&&j.has(P))return j.get(P);var W={},K=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ae in P)if(ae!=="default"&&Object.prototype.hasOwnProperty.call(P,ae)){var ie=K?Object.getOwnPropertyDescriptor(P,ae):null;ie&&(ie.get||ie.set)?Object.defineProperty(W,ae,ie):W[ae]=P[ae]}return W.default=P,j&&j.set(P,W),W}return N.vec4=T,N}var Et,Wt,Dt,er,De=Pt(),ur=function(){if(Wt)return Et;function l(r,s,u,g){this.cx=3*r,this.bx=3*(u-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(g-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=s,this.p2x=u,this.p2y=g}return Wt=1,Et=l,l.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,s){if(s===void 0&&(s=1e-6),r<0)return 0;if(r>1)return 1;for(var u=r,g=0;g<8;g++){var f=this.sampleCurveX(u)-r;if(Math.abs(f)<s)return u;var x=this.sampleCurveDerivativeX(u);if(Math.abs(x)<1e-6)break;u-=f/x}var C=0,M=1;for(u=r,g=0;g<20&&(f=this.sampleCurveX(u),!(Math.abs(f-r)<s));g++)r>f?C=u:M=u,u=.5*(M-C)+C;return u},solve:function(r,s){return this.sampleCurveY(this.solveCurveX(r,s))}},Et}(),Sr=A(ur);function yt(){if(er)return Dt;function l(r,s){this.x=r,this.y=s}return er=1,Dt=l,l.prototype={clone:function(){return new l(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,s){return this.clone()._rotateAround(r,s)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var s=r.x-this.x,u=r.y-this.y;return s*s+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,s){return Math.atan2(this.x*s-this.y*r,this.x*r+this.y*s)},_matMult:function(r){var s=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=s,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var s=Math.cos(r),u=Math.sin(r),g=u*this.x+s*this.y;return this.x=s*this.x-u*this.y,this.y=g,this},_rotateAround:function(r,s){var u=Math.cos(r),g=Math.sin(r),f=s.y+g*(this.x-s.x)+u*(this.y-s.y);return this.x=s.x+u*(this.x-s.x)-g*(this.y-s.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},l.convert=function(r){return r instanceof l?r:Array.isArray(r)?new l(r[0],r[1]):r},Dt}var dt=A(yt());function $t(l,r){if(Array.isArray(l)){if(!Array.isArray(r)||l.length!==r.length)return!1;for(let s=0;s<l.length;s++)if(!$t(l[s],r[s]))return!1;return!0}if(typeof l=="object"&&l!==null&&r!==null){if(typeof r!="object"||Object.keys(l).length!==Object.keys(r).length)return!1;for(const s in l)if(!$t(l[s],r[s]))return!1;return!0}return l===r}const or=Math.PI/180,Er=180/Math.PI;function mr(l){return l*or}function Pr(l){return l*Er}const Fr=[[0,0],[1,0],[1,1],[0,1]];function Bn(l){if(l<=0)return 0;if(l>=1)return 1;const r=l*l,s=r*l;return 4*(l<.5?s:3*(l-r)+s-.75)}function Xr(l,r,s,u){const g=new Sr(l,r,s,u);return function(f){return g.solve(f)}}const On=Xr(.25,.1,.25,1);function fr(l,r,s){return Math.min(s,Math.max(r,l))}function Tn(l,r,s){return(s=fr((s-l)/(r-l),0,1))*s*(3-2*s)}function kr(l,r,s){const u=s-r,g=((l-r)%u+u)%u+r;return g===r?s:g}function Dr(l,r,s){if(!l.length)return s(null,[]);let u=l.length;const g=new Array(l.length);let f=null;l.forEach((x,C)=>{r(x,(M,$)=>{M&&(f=M),g[C]=$,--u==0&&s(f,g)})})}function Br(l,...r){for(const s of r)for(const u in s)l[u]=s[u];return l}let an=1;function Sa(){return an++}function Za(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))}function oa(l,r){l.forEach(s=>{r[s]&&(r[s]=r[s].bind(r))})}function qn(l,r){return l.indexOf(r,l.length-r.length)!==-1}function Wn(l,r,s){const u={};for(const g in l)u[g]=r.call(this,l[g],g,l);return u}function Da(l,r,s){const u={};for(const g in l)r.call(this,l[g],g,l)&&(u[g]=l[g]);return u}function Ia(l){return Array.isArray(l)?l.map(Ia):typeof l=="object"&&l?Wn(l,Ia):l}const ja={};function Wr(l){ja[l]||(typeof console<"u"&&console.warn(l),ja[l]=!0)}function yi(l,r,s){return(s.y-l.y)*(r.x-l.x)>(r.y-l.y)*(s.x-l.x)}function Zn(l){let r=0;for(let s,u,g=0,f=l.length,x=f-1;g<f;x=g++)s=l[g],u=l[x],r+=(u.x-s.x)*(s.y+u.y);return r}function cn([l,r,s]){const u=mr(r+90),g=mr(s);return{x:l*Math.cos(u)*Math.sin(g),y:l*Math.sin(u)*Math.sin(g),z:l*Math.cos(g),azimuthal:r,polar:s}}function ya(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Xa(l){const r={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,u,g,f)=>{const x=g||f;return r[u]=!x||x.toLowerCase(),""}),r["max-age"]){const s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r}let js=null;function qa(l,r){return[l[4*r],l[4*r+1],l[4*r+2],l[4*r+3]]}function yn(l,r,s,u){for(;r<s;){const g=r+s>>1;l[g]<u?r=g+1:s=g}return r}function St(l,r,s,u){for(;r<s;){const g=r+s>>1;l[g]<=u?r=g+1:s=g}return r}function ye(l){return l>0?1/(1.001-l):1+l}function Ae(l){return l>0?1-1/(1.001-l):-l}const Ve={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Ve.API_URL)return null;try{const l=new URL(Ve.API_URL);return l.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":l.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Je(l){return Ve.API_URL_REGEX.test(l)}function tt(l){return Ve.API_SPRITE_REGEX.test(l)}let ut,bt,ft,pt,At,It;function Jt(){return ut==null&&(ut=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),ut}const Gt={now:()=>pt!==void 0?pt:performance.now(),setNow(l){pt=l},restoreNow(){pt=void 0},frame(l){const r=requestAnimationFrame(l);return{cancel:()=>cancelAnimationFrame(r)}},getImageData(l,r=0){const{width:s,height:u}=l;At||(At=document.createElement("canvas"));const g=At.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(s>At.width||u>At.height)&&(At.width=s,At.height=u),g.clearRect(-r,-r,s+2*r,u+2*r),g.drawImage(l,0,0,s,u),g.getImageData(-r,-r,s+2*r,u+2*r)},resolveURL:l=>(bt||(bt=document.createElement("a")),bt.href=l,bt.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(ft==null&&(ft=window.matchMedia("(prefers-reduced-motion: reduce)")),ft.matches)},hasCanvasFingerprintNoise(){if(It!==void 0)return It;if(!Jt())return It=!1,!1;const l=new OffscreenCanvas(85,1),r=l.getContext("2d",{willReadFrequently:!0});let s=0;for(let g=0;g<l.width;++g)r.fillStyle=`rgba(${s++},${s++},${s++}, 255)`,r.fillRect(g,0,1,1);const u=r.getImageData(0,0,l.width,l.height);s=0;for(let g=0;g<u.data.length;++g)if(g%4!=3&&s++!==u.data[g])return It=!0,!0;return It=!1,!1}};function cr(l,r){const s=l.indexOf("?");if(s<0)return`${l}?${new URLSearchParams(r).toString()}`;const u=new URLSearchParams(l.slice(s));for(const g in r)u.set(g,r[g]);return`${l.slice(0,s)}?${u.toString()}`}function Ur(l,r={persistentParams:[]}){const s=l.indexOf("?");if(s<0)return l;const u=new URLSearchParams,g=new URLSearchParams(l.slice(s));for(const x of r.persistentParams){const C=g.get(x);C&&u.set(x,C)}const f=u.toString();return`${l.slice(0,s)}${f.length>0?`?${f}`:""}`}const Jr="mapbox-tiles";let Lr=500,Qr=50;const Yn=["language","worldview","jobid"];let Dn,un;function Jn(){try{return caches}catch{}}function Qn(){const l=Jn();l&&Dn==null&&(Dn=l.open(Jr))}let ei=1/0;const _s={supported:!1,testSupport:function(l){!As&&hi&&(So?Vl(l):oi=l)}};let oi,hi,As=!1,So=!1;const Hf=typeof self<"u"?self:{};function Vl(l){const r=l.createTexture();l.bindTexture(l.TEXTURE_2D,r);try{if(l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,hi),l.isContextLost())return;_s.supported=!0}catch{}l.deleteTexture(r),As=!0}Hf.document&&(hi=Hf.document.createElement("img"),hi.onload=function(){oi&&Vl(oi),oi=null,So=!0},hi.onerror=function(){As=!0,oi=null},hi.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ul={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Ul);class xd extends Error{constructor(r,s,u){s===401&&Je(u)&&(r+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(r),this.status=s,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const vd=ya()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,yl=function(l,r){if(!(/^file:/.test(s=l.url)||/^file:/.test(vd())&&!/^\w+:/.test(s))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(u,g){const f=new AbortController,x=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:vd(),referrerPolicy:u.referrerPolicy,signal:f.signal});let C=!1,M=!1;const $=(T=x.url).indexOf("sku=")>0&&Je(T);var T;u.type==="json"&&x.headers.set("Accept","application/json");const k=(P,R,j)=>{if(M)return;if(P&&P.message!=="SecurityError"&&Wr(P.toString()),R&&j)return I(R);const W=Date.now();fetch(x).then(K=>{if(K.ok){const ae=$?K.clone():null;return I(K,ae,W)}return g(new xd(K.statusText,K.status,u.url))}).catch(K=>{K.name!=="AbortError"&&g(new Error(`${K.message} ${u.url}`))})},I=(P,R,j)=>{(u.type==="arrayBuffer"?P.arrayBuffer():u.type==="json"?P.json():P.text()).then(W=>{M||(R&&j&&function(K,ae,ie){if(Qn(),Dn==null)return;const J=Xa(ae.headers.get("Cache-Control")||"");if(J["no-store"])return;const le={status:ae.status,statusText:ae.statusText,headers:new Headers};ae.headers.forEach((je,Ne)=>le.headers.set(Ne,je)),J["max-age"]&&le.headers.set("Expires",new Date(ie+1e3*J["max-age"]).toUTCString());const fe=le.headers.get("Expires");if(!fe||new Date(fe).getTime()-ie<42e4)return;let _e=Ur(K.url,{persistentParams:Yn});if(ae.status===206){const je=K.headers.get("Range");if(!je)return;le.status=200,_e=cr(_e,{range:je})}(function(je,Ne){if(un===void 0)try{new Response(new ReadableStream),un=!0}catch{un=!1}un?Ne(je.body):je.blob().then(Ne)})(ae,je=>{const Ne=new Response((Be=ae.status)!==200&&Be!==404&&[101,103,204,205,304].includes(Be)?null:je,le);var Be;Qn(),Dn!=null&&Dn.then(Qe=>Qe.put(_e,Ne)).catch(Qe=>Wr(Qe.message))})}(x,R,j),C=!0,g(null,W,P.headers.get("Cache-Control"),P.headers.get("Expires")))}).catch(W=>{M||g(new Error(W.message))})};return $?function(P,R){if(Qn(),Dn==null)return R(null);Dn.then(j=>{let W=Ur(P.url,{persistentParams:Yn});const K=P.headers.get("Range");K&&(W=cr(W,{range:K})),j.match(W).then(ae=>{const ie=function(J){if(!J)return!1;const le=new Date(J.headers.get("Expires")||0),fe=Xa(J.headers.get("Cache-Control")||"");return le>Date.now()&&!fe["no-cache"]}(ae);j.delete(W),ie&&j.put(W,ae.clone()),R(null,ae,ie)}).catch(R)}).catch(R)}(x,k):k(null,null),{cancel:()=>{M=!0,C||f.abort()}}}(l,r);if(ya()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,r,void 0,!0)}var s;return function(u,g){const f=new XMLHttpRequest;f.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(f.responseType="arraybuffer");for(const x in u.headers)f.setRequestHeader(x,u.headers[x]);return u.type==="json"&&(f.responseType="text",f.setRequestHeader("Accept","application/json")),f.withCredentials=u.credentials==="include",f.onerror=()=>{g(new Error(f.statusText))},f.onload=()=>{if((f.status>=200&&f.status<300||f.status===0)&&f.response!==null){let x=f.response;if(u.type==="json")try{x=JSON.parse(f.response)}catch(C){return g(C)}g(null,x,f.getResponseHeader("Cache-Control"),f.getResponseHeader("Expires"))}else g(new xd(f.statusText,f.status,u.url))},f.send(u.body),{cancel:()=>f.abort()}}(l,r)},Wi=function(l,r){return yl(Br(l,{type:"arrayBuffer"}),r)};function qf(l){const r=document.createElement("a");return r.href=l,r.protocol===location.protocol&&r.host===location.host}const h0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Du,_d;Du=[],_d=0;const Pu=function(l,r){if(_s.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*"),_d>=Ve.MAX_PARALLEL_IMAGE_REQUESTS){const f={requestParameters:l,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return Du.push(f),f}_d++;let s=!1;const u=()=>{if(!s)for(s=!0,_d--;Du.length&&_d<Ve.MAX_PARALLEL_IMAGE_REQUESTS;){const f=Du.shift(),{requestParameters:x,callback:C,cancelled:M}=f;M||(f.cancel=Pu(x,C).cancel)}},g=Wi(l,(f,x,C,M)=>{u(),f?r(f):x&&(self.createImageBitmap?function($,T){const k=new Blob([new Uint8Array($)],{type:"image/png"});createImageBitmap(k).then(I=>{T(null,I)}).catch(I=>{T(new Error(`Could not load image because of ${I.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(x,($,T)=>r($,T,C,M)):function($,T){const k=new Image;k.onload=()=>{T(null,k),URL.revokeObjectURL(k.src),k.onload=null,requestAnimationFrame(()=>{k.src=h0})},k.onerror=()=>T(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const I=new Blob([new Uint8Array($)],{type:"image/png"});k.src=$.byteLength?URL.createObjectURL(I):h0}(x,($,T)=>r($,T,C,M)))});return{cancel:()=>{g.cancel(),u()}}};var zm,ti,Ys,Js={exports:{}},Qs={exports:{}},Os={exports:{}},Eh=function(){if(Ys)return Js.exports;Ys=1;var l=(zm||(zm=1,Qs.exports=function(s,u){var g,f,x,C,M,$,T,k;for(f=s.length-(g=3&s.length),x=u,M=3432918353,$=461845907,k=0;k<f;)T=255&s.charCodeAt(k)|(255&s.charCodeAt(++k))<<8|(255&s.charCodeAt(++k))<<16|(255&s.charCodeAt(++k))<<24,++k,x=27492+(65535&(C=5*(65535&(x=(x^=T=(65535&(T=(T=(65535&T)*M+(((T>>>16)*M&65535)<<16)&4294967295)<<15|T>>>17))*$+(((T>>>16)*$&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(T=0,g){case 3:T^=(255&s.charCodeAt(k+2))<<16;case 2:T^=(255&s.charCodeAt(k+1))<<8;case 1:x^=T=(65535&(T=(T=(65535&(T^=255&s.charCodeAt(k)))*M+(((T>>>16)*M&65535)<<16)&4294967295)<<15|T>>>17))*$+(((T>>>16)*$&65535)<<16)&4294967295}return x^=s.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),Qs.exports),r=(ti||(ti=1,Os.exports=function(s,u){for(var g,f=s.length,x=u^f,C=0;f>=4;)g=1540483477*(65535&(g=255&s.charCodeAt(C)|(255&s.charCodeAt(++C))<<8|(255&s.charCodeAt(++C))<<16|(255&s.charCodeAt(++C))<<24))+((1540483477*(g>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),f-=4,++C;switch(f){case 3:x^=(255&s.charCodeAt(C+2))<<16;case 2:x^=(255&s.charCodeAt(C+1))<<8;case 1:x=1540483477*(65535&(x^=255&s.charCodeAt(C)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),Os.exports);return Js.exports=l,Js.exports.murmur3=l,Js.exports.murmur2=r,Js.exports}(),bd=A(Eh);class eo{constructor(r,...s){Br(this,s[0]||{}),this.type=r}}class kc extends eo{constructor(r,s={}){super("error",Br({error:r},s))}}function Ch(l,r,s){s[l]&&s[l].indexOf(r)!==-1||(s[l]=s[l]||[],s[l].push(r))}function Wf(l,r,s){if(s&&s[l]){const u=s[l].indexOf(r);u!==-1&&s[l].splice(u,1)}}class Rc{on(r,s){return this._listeners=this._listeners||{},Ch(r,s,this._listeners),this}off(r,s){return Wf(r,s,this._listeners),Wf(r,s,this._oneTimeListeners),this}once(r,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Ch(r,s,this._oneTimeListeners),this):new Promise(u=>this.once(r,u))}fire(r,s){const u=typeof r=="string"?new eo(r,s):r,g=u.type;if(this.listens(g)){u.target=this;const f=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const M of f)M.call(this,u);const x=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const M of x)Wf(g,M,this._oneTimeListeners),M.call(this,u);const C=this._eventedParent;C&&(Br(u,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(u))}else u instanceof kc&&console.error(u.error);return this}listens(r){return!!(this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r))}setEventedParent(r,s){return this._eventedParent=r,this._eventedParentData=s,this}}var To,Kf={},Mu=function(){if(To)return Kf;To=1;var l={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(f){return(f=Math.round(f))<0?0:f>255?255:f}function s(f){return r(f[f.length-1]==="%"?parseFloat(f)/100*255:parseInt(f))}function u(f){return(x=f[f.length-1]==="%"?parseFloat(f)/100:parseFloat(f))<0?0:x>1?1:x;var x}function g(f,x,C){return C<0?C+=1:C>1&&(C-=1),6*C<1?f+(x-f)*C*6:2*C<1?x:3*C<2?f+(x-f)*(2/3-C)*6:f}try{Kf.parseCSSColor=function(f){var x,C=f.replace(/ /g,"").toLowerCase();if(C in l)return l[C].slice();if(C[0]==="#")return C.length===4?(x=parseInt(C.substr(1),16))>=0&&x<=4095?[(3840&x)>>4|(3840&x)>>8,240&x|(240&x)>>4,15&x|(15&x)<<4,1]:null:C.length===7&&(x=parseInt(C.substr(1),16))>=0&&x<=16777215?[(16711680&x)>>16,(65280&x)>>8,255&x,1]:null;var M=C.indexOf("("),$=C.indexOf(")");if(M!==-1&&$+1===C.length){var T=C.substr(0,M),k=C.substr(M+1,$-(M+1)).split(","),I=1;switch(T){case"rgba":if(k.length!==4)return null;I=u(k.pop());case"rgb":return k.length!==3?null:[s(k[0]),s(k[1]),s(k[2]),I];case"hsla":if(k.length!==4)return null;I=u(k.pop());case"hsl":if(k.length!==3)return null;var P=(parseFloat(k[0])%360+360)%360/360,R=u(k[1]),j=u(k[2]),W=j<=.5?j*(R+1):j+R-j*R,K=2*j-W;return[r(255*g(K,W,P+1/3)),r(255*g(K,W,P)),r(255*g(K,W,P-1/3)),I];default:return null}}return null}}catch{}return Kf}();class In{constructor(r,s,u,g=1){this.r=r,this.g=s,this.b=u,this.a=g}static parse(r){if(!r)return;if(r instanceof In)return r;if(typeof r!="string")return;const s=Mu.parseCSSColor(r);return s?new In(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toStringPremultipliedAlpha(){const[r,s,u,g]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(r)},${Math.round(s)},${Math.round(u)},${g})`}toString(){const[r,s,u,g]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*r)},${Math.round(255*s)},${Math.round(255*u)},${g})`}toRenderColor(r){const{r:s,g:u,b:g,a:f}=this;return new Lm(r,s,u,g,f)}clone(){return new In(this.r,this.g,this.b,this.a)}}class Lm{constructor(r,s,u,g,f){if(r){const x=r.image.height,C=x*x;s=f===0?0:s/f*(x-1),u=f===0?0:u/f*(x-1),g=f===0?0:g/f*(x-1);const M=Math.floor(s),$=Math.floor(u),T=Math.floor(g),k=Math.ceil(s),I=Math.ceil(u),P=Math.ceil(g),R=s-M,j=u-$,W=g-T,K=r.image.data,ae=4*(M+$*C+T*x),ie=4*(M+$*C+P*x),J=4*(M+I*C+T*x),le=4*(M+I*C+P*x),fe=4*(k+$*C+T*x),_e=4*(k+$*C+P*x),je=4*(k+I*C+T*x),Ne=4*(k+I*C+P*x);if(ae<0||Ne>=K.length)throw new Error("out of range");this.r=Or(Or(Or(K[ae],K[ie],W),Or(K[J],K[le],W),j),Or(Or(K[fe],K[_e],W),Or(K[je],K[Ne],W),j),R)/255*f,this.g=Or(Or(Or(K[ae+1],K[ie+1],W),Or(K[J+1],K[le+1],W),j),Or(Or(K[fe+1],K[_e+1],W),Or(K[je+1],K[Ne+1],W),j),R)/255*f,this.b=Or(Or(Or(K[ae+2],K[ie+2],W),Or(K[J+2],K[le+2],W),j),Or(Or(K[fe+2],K[_e+2],W),Or(K[je+2],K[Ne+2],W),j),R)/255*f,this.a=f}else this.r=s,this.g=u,this.b=g,this.a=f}toArray(){const{r,g:s,b:u,a:g}=this;return g===0?[0,0,0,0]:[255*r/g,255*s/g,255*u/g,g]}toHslaArray(){if(this.a===0)return[0,0,0,0];const{r,g:s,b:u,a:g}=this,f=Math.min(Math.max(r/g,0),1),x=Math.min(Math.max(s/g,0),1),C=Math.min(Math.max(u/g,0),1),M=Math.min(f,x,C),$=Math.max(f,x,C),T=(M+$)/2;if(M===$)return[0,0,100*T,g];const k=$-M,I=T>.5?k/(2-$-M):k/($+M);let P=0;return $===f?P=(x-C)/k+(x<C?6:0):$===x?P=(C-f)/k+2:$===C&&(P=(f-x)/k+4),P*=60,[Math.min(Math.max(P,0),360),Math.min(Math.max(100*I,0),100),Math.min(Math.max(100*T,0),100),g]}toArray01(){const{r,g:s,b:u,a:g}=this;return g===0?[0,0,0,0]:[r/g,s/g,u/g,g]}toArray01Scaled(r){const{r:s,g:u,b:g,a:f}=this;return f===0?[0,0,0]:[s/f*r,u/f*r,g/f*r]}toArray01PremultipliedAlpha(){const{r,g:s,b:u,a:g}=this;return[r,s,u,g]}toArray01Linear(){const{r,g:s,b:u,a:g}=this;return g===0?[0,0,0,0]:[Math.pow(r/g,2.2),Math.pow(s/g,2.2),Math.pow(u/g,2.2),g]}}function Or(l,r,s){return l*(1-s)+r*s}function Ic(l,r,s){return l.map((u,g)=>Or(u,r[g],s))}In.black=new In(0,0,0,1),In.white=new In(1,1,1,1),In.transparent=new In(0,0,0,0),In.red=new In(1,0,0,1),In.blue=new In(0,0,1,1);var zn=Object.freeze({__proto__:null,array:Ic,color:function(l,r,s){return new In(Or(l.r,r.r,s),Or(l.g,r.g,s),Or(l.b,r.b,s),Or(l.a,r.a,s))},number:Or});function wd(l,...r){for(const s of r)for(const u in s)l[u]=s[u];return l}class to extends Error{constructor(r,s){super(s),this.message=s,this.key=r}}class Au{constructor(r,s=[]){this.parent=r,this.bindings={};for(const[u,g]of s)this.bindings[u]=g}concat(r){return new Au(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Fs={kind:"null"},wr={kind:"number"},Ln={kind:"string"},_n={kind:"boolean"},bs={kind:"color"},xl={kind:"object"},En={kind:"value"},ku={kind:"collator"},Eo={kind:"formatted"},zc={kind:"resolvedImage"};function Pa(l,r){return{kind:"array",itemType:l,N:r}}function ea(l){if(l.kind==="array"){const r=ea(l.itemType);return typeof l.N=="number"?`array<${r}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${r}>`}return l.kind}const Dh=[Fs,wr,Ln,_n,bs,Eo,xl,Pa(En),zc];function Gl(l,r){if(r.kind==="error")return null;if(l.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Gl(l.itemType,r.itemType))&&(typeof l.N!="number"||l.N===r.N))return null}else{if(l.kind===r.kind)return null;if(l.kind==="value"){for(const s of Dh)if(!Gl(s,r))return null}}return`Expected ${ea(l)} but found ${ea(r)} instead.`}function Zf(l,r){return r.some(s=>s.kind===l.kind)}function Lc(l,r){return r.some(s=>s==="null"?l===null:s==="array"?Array.isArray(l):s==="object"?l&&!Array.isArray(l)&&typeof l=="object":s===typeof l)}class Sd{constructor(r,s,u){this.sensitivity=r?s?"variant":"case":s?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,s){return this.collator.compare(r,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Hl{constructor(r,s,u,g,f){this.text=r.normalize?r.normalize():r,this.image=s,this.scale=u,this.fontStack=g,this.textColor=f}}class Mi{constructor(r){this.sections=r}static fromString(r){return new Mi([new Hl(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.namePrimary)}static factory(r){return r instanceof Mi?r:Mi.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}serialize(){const r=["format"];for(const s of this.sections){if(s.image){r.push(["image",s.image.namePrimary]);continue}r.push(s.text);const u={};s.fontStack&&(u["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(u["font-scale"]=s.scale),s.textColor&&(u["text-color"]=["rgba"].concat(s.textColor.toRenderColor(null).toArray())),r.push(u)}return r}}class Yo{constructor(r,s){if(this.id=r,this.options=s||{params:{}},this.options.transform){const{a:u,b:g,c:f,d:x,e:C,f:M}=this.options.transform;this.options.transform=new DOMMatrix([u,g,f,x,C,M])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}static deserializeId(r){return JSON.parse(r).id}static deserializeFromString(r){const s=JSON.parse(r),{a:u,b:g,c:f,d:x,e:C,f:M}=s.options.transform;return new DOMMatrix([u,g,f,x,C,M]),new Yo(s.id,s.options)}scaleSelf(r){return this.options.transform=this.options.transform.scale(r),this}serialize(){const r={id:this.id};this.options&&(r.options=this.options);const{a:s,b:u,c:g,d:f,e:x,f:C}=this.options.transform;return r.options.transform={a:s,b:u,c:g,d:f,e:x,f:C},JSON.stringify(r)}}class Ai{constructor(r){this.namePrimary=r.namePrimary,r.nameSecondary&&(this.nameSecondary=r.nameSecondary),r.optionsPrimary&&(this.optionsPrimary=r.optionsPrimary),r.optionsSecondary&&(this.optionsSecondary=r.optionsSecondary),this.available=r.available}toString(){return this.namePrimary&&this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}getPrimary(){return new Yo(this.namePrimary,{params:this.optionsPrimary&&this.optionsPrimary.params||{}})}getSerializedPrimary(){return this.getPrimary().serialize()}getSecondary(){return this.nameSecondary?new Yo(this.nameSecondary,{params:this.optionsSecondary&&this.optionsSecondary.params||{}}):null}static from(r){return typeof r=="string"?Ai.build(r):r}static build(r,s,u,g){return r?new Ai({namePrimary:r,nameSecondary:s,optionsPrimary:u,optionsSecondary:g,available:!1}):null}}function Ru(l,r,s,u){return typeof l=="number"&&l>=0&&l<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[l,r,s,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[l,r,s,u]:[l,r,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Iu(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof In||l instanceof Sd||l instanceof Mi||l instanceof Ai)return!0;if(Array.isArray(l)){for(const r of l)if(!Iu(r))return!1;return!0}if(typeof l=="object"){for(const r in l)if(!Iu(l[r]))return!1;return!0}return!1}function wa(l){if(l===null)return Fs;if(typeof l=="string")return Ln;if(typeof l=="boolean")return _n;if(typeof l=="number")return wr;if(l instanceof In)return bs;if(l instanceof Sd)return ku;if(l instanceof Mi)return Eo;if(l instanceof Ai)return zc;if(Array.isArray(l)){const r=l.length;let s;for(const u of l){const g=wa(u);if(s){if(s===g)continue;s=En;break}s=g}return Pa(s||En,r)}return xl}function Jo(l){const r=typeof l;return l===null?"":r==="string"||r==="number"||r==="boolean"?String(l):l instanceof In?l.toStringPremultipliedAlpha():l instanceof Mi||l instanceof Ai?l.toString():JSON.stringify(l)}class Co{constructor(r,s){this.type=r,this.value=s}static parse(r,s){if(r.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Iu(r[1]))return s.error("invalid value");const u=r[1];let g=wa(u);const f=s.expectedType;return g.kind!=="array"||g.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(g=f),new Co(g,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof In?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof Mi?this.value.serialize():this.value}}class ri{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const Ph={string:Ln,number:wr,boolean:_n,object:xl};class Do{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");let u,g=1;const f=r[0];if(f==="array"){let C,M;if(r.length>2){const $=r[1];if(typeof $!="string"||!($ in Ph)||$==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);C=Ph[$],g++}else C=En;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return s.error('The length argument to "array" must be a positive integer literal',2);M=r[2],g++}u=Pa(C,M)}else u=Ph[f];const x=[];for(;g<r.length;g++){const C=s.parse(r[g],g,En);if(!C)return null;x.push(C)}return new Do(u,x)}evaluate(r){for(let s=0;s<this.args.length;s++){const u=this.args[s].evaluate(r);if(!Gl(this.type,wa(u)))return u;if(s===this.args.length-1)throw new ri(`The expression ${JSON.stringify(this.args[s].serialize())} evaluated to ${ea(wa(u))} but was expected to be of type ${ea(this.type)}.`)}return null}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=this.type,s=[r.kind];if(r.kind==="array"){const u=r.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){s.push(u.kind);const g=r.N;(typeof g=="number"||this.args.length>1)&&s.push(g)}}return s.concat(this.args.map(u=>u.serialize()))}}class vl{constructor(r){this.type=Eo,this.sections=r}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const u=r[1];if(!Array.isArray(u)&&typeof u=="object")return s.error("First argument must be an image or text section.");const g=[];let f=!1;for(let x=1;x<=r.length-1;++x){const C=r[x];if(f&&typeof C=="object"&&!Array.isArray(C)){f=!1;let M=null;if(C["font-scale"]&&(M=s.parseObjectValue(C["font-scale"],x,"font-scale",wr),!M))return null;let $=null;if(C["text-font"]&&($=s.parseObjectValue(C["text-font"],x,"text-font",Pa(Ln)),!$))return null;let T=null;if(C["text-color"]&&(T=s.parseObjectValue(C["text-color"],x,"text-color",bs),!T))return null;const k=g[g.length-1];k.scale=M,k.font=$,k.textColor=T}else{const M=s.parse(r[x],x,En);if(!M)return null;const $=M.type.kind;if($!=="string"&&$!=="value"&&$!=="null"&&$!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,g.push({content:M,scale:null,font:null,textColor:null})}}return new vl(g)}evaluate(r){return new Mi(this.sections.map(s=>{const u=s.content.evaluate(r);return wa(u)===zc?new Hl("",u,null,null,null):new Hl(Jo(u),null,s.scale?s.scale.evaluate(r):null,s.font?s.font.evaluate(r).join(","):null,s.textColor?s.textColor.evaluate(r):null)}))}eachChild(r){for(const s of this.sections)r(s.content),s.scale&&r(s.scale),s.font&&r(s.font),s.textColor&&r(s.textColor)}outputDefined(){return!1}serialize(){const r=["format"];for(const s of this.sections){r.push(s.content.serialize());const u={};s.scale&&(u["font-scale"]=s.scale.serialize()),s.font&&(u["text-font"]=s.font.serialize()),s.textColor&&(u["text-color"]=s.textColor.serialize()),r.push(u)}return r}}class Td{constructor(r,s,u,g){this._imageWarnHistory={},this.type=zc,this.inputPrimary=r,this.inputSecondary=s,this.inputPrimaryParams=u,this.inputSecondaryParams=g}static parse(r,s){if(r.length<2)return s.error("Expected two or more arguments.");let u=1;const g=[];function f(){if(u<r.length){const C=s.parse(r[u],u++,Ln);return C?(g.push({image:C,options:void 0}),!0):(s.error(g.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function x(){if(u<r.length){if((C=r[u])===null||typeof C!="object"||Array.isArray(C))return!0;const M=r[u].params,$=s.concat(u);if(!M)return u++,!0;if(typeof M!="object"||M.constructor!==Object)return $.error('Image options "params" should be an object'),!1;const T={},k=$.concat(void 0,"params");for(const I in M){if(!I)return k.error("Image parameter name should be non-empty"),!1;const P=k.concat(void 0,I).parse(M[I],void 0,bs,void 0,{typeAnnotation:"coerce"});if(!P)return!1;T[I]=P}return g[g.length-1].options=T,u++,!0}var C;return!0}for(let C=0;C<2;C++)if(!f()||!x())return;return new Td(g[0].image,g[1]?g[1].image:void 0,g[0].options,g[1]?g[1].options:void 0)}evaluateParams(r,s){const u={};if(s){for(const g in s)if(s[g])try{const f=s[g].evaluate(r),x=`Ignoring image parameter "${g}" with semi-transparent color ${f.toString()}`;if(f.a!==1){this._imageWarnHistory[x]||(console.warn(x),this._imageWarnHistory[x]=!0);continue}u[g]=f}catch{continue}if(Object.keys(u).length!==0)return{params:u}}}evaluate(r){const s=Ai.build(this.inputPrimary.evaluate(r),this.inputSecondary?this.inputSecondary.evaluate(r):void 0,this.inputPrimaryParams?this.evaluateParams(r,this.inputPrimaryParams):void 0,this.inputSecondaryParams?this.evaluateParams(r,this.inputSecondaryParams):void 0);return s&&r.availableImages&&(s.available=r.availableImages.indexOf(s.namePrimary)>-1,s.nameSecondary&&s.available&&r.availableImages&&(s.available=r.availableImages.indexOf(s.nameSecondary)>-1)),s}eachChild(r){if(r(this.inputPrimary),this.inputPrimaryParams)for(const s in this.inputPrimaryParams)this.inputPrimaryParams[s]&&r(this.inputPrimaryParams[s]);if(this.inputSecondary&&(r(this.inputSecondary),this.inputSecondaryParams))for(const s in this.inputSecondaryParams)this.inputSecondaryParams[s]&&r(this.inputSecondaryParams[s])}outputDefined(){return!1}serializeParams(r){const s={};if(r){for(const u in r)r[u]&&(s[u]=r[u].serialize());return{params:s}}}serialize(){const r=["image",this.inputPrimary.serialize()];return this.inputPrimaryParams&&r.push(this.serializeParams(this.inputPrimaryParams)),this.inputSecondary&&(r.push(this.inputSecondary.serialize()),this.inputSecondaryParams&&r.push(this.serializeParams(this.inputSecondaryParams))),r}}function zu(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}const _x={"to-boolean":_n,"to-color":bs,"to-number":wr,"to-string":Ln};class ql{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expected at least one argument.");const u=r[0],g=[];let f=Fs;if(u==="to-array"){if(!Array.isArray(r[1]))return null;const x=r[1].length;if(s.expectedType){if(s.expectedType.kind!=="array")return s.error(`Expected ${s.expectedType.kind} but found array.`);f=Pa(s.expectedType.itemType,x)}else{if(!(x>0&&Iu(r[1][0])))return null;f=Pa(wa(r[1][0]),x)}for(let C=0;C<x;C++){const M=r[1][C];let $;if(zu(M)==="array")$=s.parse(M,void 0,f.itemType);else{const T=zu(M);if(T!==f.itemType.kind)return s.error(`Expected ${f.itemType.kind} but found ${T}.`);$=s.registry.literal.parse(["literal",M===void 0?null:M],s)}if(!$)return null;g.push($)}}else{if((u==="to-boolean"||u==="to-string")&&r.length!==2)return s.error("Expected one argument.");f=_x[u];for(let x=1;x<r.length;x++){const C=s.parse(r[x],x,En);if(!C)return null;g.push(C)}}return new ql(f,g)}evaluate(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){let s,u;for(const g of this.args){if(s=g.evaluate(r),u=null,s instanceof In)return s;if(typeof s=="string"){const f=r.parseColor(s);if(f)return f}else if(Array.isArray(s)&&(u=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Ru(s[0],s[1],s[2],s[3]),!u))return new In(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new ri(u||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}if(this.type.kind==="number"){let s=null;for(const u of this.args){if(s=u.evaluate(r),s===null)return 0;const g=Number(s);if(!isNaN(g))return g}throw new ri(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?Mi.fromString(Jo(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?Ai.build(Jo(this.args[0].evaluate(r))):this.type.kind==="array"?this.args.map(s=>s.evaluate(r)):Jo(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){if(this.type.kind==="formatted")return new vl([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Td(this.args[0]).serialize();const r=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(s=>{r.push(s.serialize())}),r}}const Xf=["Unknown","Point","LineString","Polygon"];class Yf{constructor(r,s){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=r,this.options=s}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Xf[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(r){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const r=this.featureDistanceData.center,s=this.featureDistanceData.scale,{x:u,y:g}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(u*s-r[0])+this.featureDistanceData.bearing[1]*(g*s-r[1])}return 0}parseColor(r){let s=this._parseColorCache[r];return s||(s=this._parseColorCache[r]=In.parse(r)),s}getConfig(r){return this.options?this.options.get(r):null}}class Vs{constructor(r,s,u,g,f){this.name=r,this.type=s,this._evaluate=u,this.args=g,this._overloadIndex=f}evaluate(r){if(!this._evaluate){const s=Vs.definitions[this.name];this._evaluate=Array.isArray(s)?s[2]:s.overloads[this._overloadIndex][1]}return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(r=>r.serialize()))}static parse(r,s){const u=r[0],g=Vs.definitions[u];if(!g)return s.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const f=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,C=[];let M=null,$=-1;for(const[T,k]of x){if(Array.isArray(T)&&T.length!==r.length-1)continue;C.push(T),$++,M=new Lh(s.registry,s.path,null,s.scope,void 0,s._scope,s.options);const I=[];let P=!1;for(let R=1;R<r.length;R++){const j=r[R],W=Array.isArray(T)?T[R-1]:T.type,K=M.parse(j,1+I.length,W);if(!K){P=!0;break}I.push(K)}if(!P)if(Array.isArray(T)&&T.length!==I.length)M.error(`Expected ${T.length} arguments, but found ${I.length} instead.`);else{for(let R=0;R<I.length;R++){const j=Array.isArray(T)?T[R]:T.type,W=I[R];M.concat(R+1).checkSubtype(j,W.type)}if(M.errors.length===0)return new Vs(u,f,k,I,$)}}if(C.length===1)s.errors.push(...M.errors);else{const T=(C.length?C:x.map(([I])=>I)).map(Jf).join(" | "),k=[];for(let I=1;I<r.length;I++){const P=s.parse(r[I],1+k.length);if(!P)return null;k.push(ea(P.type))}s.error(`Expected arguments of type ${T}, but found (${k.join(", ")}) instead.`)}return null}static register(r,s){Vs.definitions=s;for(const u in s)r[u]=Vs}}function Jf(l){return Array.isArray(l)?`(${l.map(ea).join(", ")})`:`(${ea(l.type)}...)`}class Mh{constructor(r,s,u){this.type=ku,this.locale=u,this.caseSensitive=r,this.diacriticSensitive=s}static parse(r,s){if(r.length!==2)return s.error("Expected one argument.");const u=r[1];if(typeof u!="object"||Array.isArray(u))return s.error("Collator options argument must be an object.");const g=u["case-sensitive"]===void 0?s.parse(!1,1,_n):s.parseObjectValue(u["case-sensitive"],1,"case-sensitive",_n);if(!g)return null;const f=u["diacritic-sensitive"]===void 0?s.parse(!1,1,_n):s.parseObjectValue(u["diacritic-sensitive"],1,"diacritic-sensitive",_n);if(!f)return null;let x=null;return u.locale&&(x=s.parseObjectValue(u.locale,1,"locale",Ln),!x)?null:new Mh(g,f,x)}evaluate(r){return new Sd(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}serialize(){const r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]}}function f0(l,r,s=0,u=l.length-1,g=bx){for(;u>s;){if(u-s>600){const M=u-s+1,$=r-s+1,T=Math.log(M),k=.5*Math.exp(2*T/3),I=.5*Math.sqrt(T*k*(M-k)/M)*($-M/2<0?-1:1);f0(l,r,Math.max(s,Math.floor(r-$*k/M+I)),Math.min(u,Math.floor(r+(M-$)*k/M+I)),g)}const f=l[r];let x=s,C=u;for(Ah(l,s,r),g(l[u],f)>0&&Ah(l,s,u);x<C;){for(Ah(l,x,C),x++,C--;g(l[x],f)<0;)x++;for(;g(l[C],f)>0;)C--}g(l[s],f)===0?Ah(l,s,C):(C++,Ah(l,C,u)),C<=r&&(s=C+1),r<=C&&(u=C-1)}}function Ah(l,r,s){const u=l[r];l[r]=l[s],l[s]=u}function bx(l,r){return l<r?-1:l>r?1:0}function wx(l){let r=0;for(let s,u,g=0,f=l.length,x=f-1;g<f;x=g++)s=l[g],u=l[x],r+=(u.x-s.x)*(s.y+u.y);return r}function kh(l,r){l[0]=Math.min(l[0],r[0]),l[1]=Math.min(l[1],r[1]),l[2]=Math.max(l[2],r[0]),l[3]=Math.max(l[3],r[1])}function Rh(l,r){return!(l[0]<=r[0]||l[2]>=r[2]||l[1]<=r[1]||l[3]>=r[3])}function p0(l,r,s){const u=l[0]-r[0],g=l[1]-r[1],f=l[0]-s[0],x=l[1]-s[1];return u*x-f*g==0&&u*f<=0&&g*x<=0}function Qo(l,r,s=!1){let u=!1;for(let C=0,M=r.length;C<M;C++){const $=r[C];for(let T=0,k=$.length,I=k-1;T<k;I=T++){const P=$[I],R=$[T];if(p0(l,P,R))return s;(f=P)[1]>(g=l)[1]!=(x=R)[1]>g[1]&&g[0]<(x[0]-f[0])*(g[1]-f[1])/(x[1]-f[1])+f[0]&&(u=!u)}}var g,f,x;return u}function m0(l,r,s,u){const g=u[0]-s[0],f=u[1]-s[1],x=(l[0]-s[0])*f-g*(l[1]-s[1]),C=(r[0]-s[0])*f-g*(r[1]-s[1]);return x>0&&C<0||x<0&&C>0}function Ed(l,r,s,u){return(g=[u[0]-s[0],u[1]-s[1]])[0]*(f=[r[0]-l[0],r[1]-l[1]])[1]-g[1]*f[0]!=0&&!(!m0(l,r,s,u)||!m0(s,u,l,r));var g,f}const Us=8192;function Sx(l,r){const s=(180+l[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,g=Math.pow(2,r.z);return[Math.round(s*g*Us),Math.round(u*g*Us)]}function g0(l,r){for(let s=0;s<r.length;s++)if(Qo(l,r[s]))return!0;return!1}function y0(l,r,s){for(const u of s)for(let g=0,f=u.length,x=f-1;g<f;x=g++)if(Ed(l,r,u[x],u[g]))return!0;return!1}function $m(l,r){for(let s=0;s<l.length;++s)if(!Qo(l[s],r))return!1;for(let s=0;s<l.length-1;++s)if(y0(l[s],l[s+1],r))return!1;return!0}function Lu(l,r){for(let s=0;s<r.length;s++)if($m(l,r[s]))return!0;return!1}function dn(l,r,s){const u=[];for(let g=0;g<l.length;g++){const f=[];for(let x=0;x<l[g].length;x++){const C=Sx(l[g][x],s);kh(r,C),f.push(C)}u.push(f)}return u}function Rr(l,r,s){const u=[];for(let g=0;g<l.length;g++){const f=dn(l[g],r,s);u.push(f)}return u}function Qf(l,r,s,u){if(l[0]<s[0]||l[0]>s[2]){const g=.5*u;let f=l[0]-s[0]>g?-u:s[0]-l[0]>g?u:0;f===0&&(f=l[0]-s[2]>g?-u:s[2]-l[0]>g?u:0),l[0]+=f}kh(r,l)}function en(l,r,s,u){const g=Math.pow(2,u.z)*Us,f=[u.x*Us,u.y*Us],x=[];if(!l)return x;for(const C of l)for(const M of C){const $=[M.x+f[0],M.y+f[1]];Qf($,r,s,g),x.push($)}return x}function ep(l,r,s,u){const g=Math.pow(2,u.z)*Us,f=[u.x*Us,u.y*Us],x=[];if(!l)return x;for(const M of l){const $=[];for(const T of M){const k=[T.x+f[0],T.y+f[1]];kh(r,k),$.push(k)}x.push($)}if(r[2]-r[0]<=g/2){(C=r)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const M of x)for(const $ of M)Qf($,r,s,g)}var C;return x}class _l{constructor(r,s){this.type=_n,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Iu(r[1])){const u=r[1];if(u.type==="FeatureCollection")for(let g=0;g<u.features.length;++g){const f=u.features[g].geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new _l(u,u.features[g].geometry)}else if(u.type==="Feature"){const g=u.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new _l(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new _l(u,u)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(s,u){const g=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(!x)return!1;if(u.type==="Polygon"){const C=dn(u.coordinates,f,x),M=en(s.geometry(),g,f,x);if(!Rh(g,f))return!1;for(const $ of M)if(!Qo($,C))return!1}if(u.type==="MultiPolygon"){const C=Rr(u.coordinates,f,x),M=en(s.geometry(),g,f,x);if(!Rh(g,f))return!1;for(const $ of M)if(!g0($,C))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(s,u){const g=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(!x)return!1;if(u.type==="Polygon"){const C=dn(u.coordinates,f,x),M=ep(s.geometry(),g,f,x);if(!Rh(g,f))return!1;for(const $ of M)if(!$m($,C))return!1}if(u.type==="MultiPolygon"){const C=Rr(u.coordinates,f,x),M=ep(s.geometry(),g,f,x);if(!Rh(g,f))return!1;for(const $ of M)if(!Lu($,C))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Gr={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},$u=1/298.257223563,$c=$u*(2-$u),Cd=Math.PI/180;class Wl{static fromTile(r,s,u){const g=Math.PI*(1-2*(r+.5)/Math.pow(2,s)),f=Math.atan(.5*(Math.exp(g)-Math.exp(-g)))/Cd;return new Wl(f,u)}static get units(){return Gr}constructor(r,s){if(r===void 0)throw new Error("No latitude given.");if(s&&!Gr[s])throw new Error(`Unknown unit ${s}. Use one of: ${Object.keys(Gr).join(", ")}`);const u=6378.137*Cd*(s?Gr[s]:1),g=Math.cos(r*Cd),f=1/(1-$c*(1-g*g)),x=Math.sqrt(f);this.kx=u*x*g,this.ky=u*x*f*(1-$c)}distance(r,s){const u=ws(r[0]-s[0])*this.kx,g=(r[1]-s[1])*this.ky;return Math.sqrt(u*u+g*g)}bearing(r,s){const u=ws(s[0]-r[0])*this.kx;return Math.atan2(u,(s[1]-r[1])*this.ky)/Cd}destination(r,s,u){const g=u*Cd;return this.offset(r,Math.sin(g)*s,Math.cos(g)*s)}offset(r,s,u){return[r[0]+s/this.kx,r[1]+u/this.ky]}lineDistance(r){let s=0;for(let u=0;u<r.length-1;u++)s+=this.distance(r[u],r[u+1]);return s}area(r){let s=0;for(let u=0;u<r.length;u++){const g=r[u];for(let f=0,x=g.length,C=x-1;f<x;C=f++)s+=ws(g[f][0]-g[C][0])*(g[f][1]+g[C][1])*(u?-1:1)}return Math.abs(s)/2*this.kx*this.ky}along(r,s){let u=0;if(s<=0)return r[0];for(let g=0;g<r.length-1;g++){const f=r[g],x=r[g+1],C=this.distance(f,x);if(u+=C,u>s)return Oi(f,x,(s-(u-C))/C)}return r[r.length-1]}pointToSegmentDistance(r,s,u){let[g,f]=s,x=ws(u[0]-g)*this.kx,C=(u[1]-f)*this.ky;if(x!==0||C!==0){const M=(ws(r[0]-g)*this.kx*x+(r[1]-f)*this.ky*C)/(x*x+C*C);M>1?(g=u[0],f=u[1]):M>0&&(g+=x/this.kx*M,f+=C/this.ky*M)}return x=ws(r[0]-g)*this.kx,C=(r[1]-f)*this.ky,Math.sqrt(x*x+C*C)}pointOnLine(r,s){let u=1/0,g=r[0][0],f=r[0][1],x=0,C=0;for(let M=0;M<r.length-1;M++){let $=r[M][0],T=r[M][1],k=ws(r[M+1][0]-$)*this.kx,I=(r[M+1][1]-T)*this.ky,P=0;k===0&&I===0||(P=(ws(s[0]-$)*this.kx*k+(s[1]-T)*this.ky*I)/(k*k+I*I),P>1?($=r[M+1][0],T=r[M+1][1]):P>0&&($+=k/this.kx*P,T+=I/this.ky*P)),k=ws(s[0]-$)*this.kx,I=(s[1]-T)*this.ky;const R=k*k+I*I;R<u&&(u=R,g=$,f=T,x=M,C=P)}return{point:[g,f],index:x,t:Math.max(0,Math.min(1,C))}}lineSlice(r,s,u){let g=this.pointOnLine(u,r),f=this.pointOnLine(u,s);if(g.index>f.index||g.index===f.index&&g.t>f.t){const $=g;g=f,f=$}const x=[g.point],C=g.index+1,M=f.index;!Dd(u[C],x[0])&&C<=M&&x.push(u[C]);for(let $=C+1;$<=M;$++)x.push(u[$]);return Dd(u[M],f.point)||x.push(f.point),x}lineSliceAlong(r,s,u){let g=0;const f=[];for(let x=0;x<u.length-1;x++){const C=u[x],M=u[x+1],$=this.distance(C,M);if(g+=$,g>r&&f.length===0&&f.push(Oi(C,M,(r-(g-$))/$)),g>=s)return f.push(Oi(C,M,(s-(g-$))/$)),f;g>r&&f.push(M)}return f}bufferPoint(r,s){const u=s/this.ky,g=s/this.kx;return[r[0]-g,r[1]-u,r[0]+g,r[1]+u]}bufferBBox(r,s){const u=s/this.ky,g=s/this.kx;return[r[0]-g,r[1]-u,r[2]+g,r[3]+u]}insideBBox(r,s){return ws(r[0]-s[0])>=0&&ws(r[0]-s[2])<=0&&r[1]>=s[1]&&r[1]<=s[3]}}function Dd(l,r){return l[0]===r[0]&&l[1]===r[1]}function Oi(l,r,s){const u=ws(r[0]-l[0]);return[l[0]+u*s,l[1]+(r[1]-l[1])*s]}function ws(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}class Pd{constructor(r=[],s=(u,g)=>u<g?-1:u>g?1:0){if(this.data=r,this.length=this.data.length,this.compare=s,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:s,compare:u}=this,g=s[r];for(;r>0;){const f=r-1>>1,x=s[f];if(u(g,x)>=0)break;s[r]=x,r=f}s[r]=g}_down(r){const{data:s,compare:u}=this,g=this.length>>1,f=s[r];for(;r<g;){let x=1+(r<<1);const C=x+1;if(C<this.length&&u(s[C],s[x])<0&&(x=C),u(s[x],f)>=0)break;s[r]=s[x],r=x}s[r]=f}}var lr=8192;function Ih(l,r){return r.dist-l.dist}const bl=100,Ki=50;function x0(l){const r=[1/0,1/0,-1/0,-1/0];if(r.length!==l.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!==l[s])return!1;return!0}function tp(l){return l[1]-l[0]+1}function Kl(l,r){const s=l[1]>=l[0]&&l[1]<r;return s||console.warn("Distance Expression: Index is out of range"),s}function Md(l,r){if(l[0]>l[1])return[null,null];const s=tp(l);if(r){if(s===2)return[l,null];const u=Math.floor(s/2);return[[l[0],l[0]+u],[l[0]+u,l[1]]]}{if(s===1)return[l,null];const u=Math.floor(s/2)-1;return[[l[0],l[0]+u],[l[0]+u+1,l[1]]]}}function ki(l,r){const s=[1/0,1/0,-1/0,-1/0];if(!Kl(r,l.length))return s;for(let u=r[0];u<=r[1];++u)kh(s,l[u]);return s}function wl(l){const r=[1/0,1/0,-1/0,-1/0];for(let s=0;s<l.length;++s)for(let u=0;u<l[s].length;++u)kh(r,l[s][u]);return r}function Bu(l,r,s){if(x0(l)||x0(r))return NaN;let u=0,g=0;return l[2]<r[0]&&(u=r[0]-l[2]),l[0]>r[2]&&(u=l[0]-r[2]),l[1]>r[3]&&(g=l[1]-r[3]),l[3]<r[1]&&(g=r[1]-l[3]),s.distance([0,0],[u,g])}function v0(l){return 360*l-180}function _0(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function rp(l,r){const s=Math.pow(2,r.z),u=(l.y/lr+r.y)/s;return[v0((l.x/lr+r.x)/s),_0(u)]}function np(l,r){const s=[];for(let u=0;u<l.length;++u)s.push(rp(l[u],r));return s}function b0(l,r,s){const u=s.pointOnLine(r,l).point;return s.distance(l,u)}function Nu(l,r,s,u,g){const f=s.slice(u[0],u[1]+1);let x=1/0;for(let C=r[0];C<=r[1];++C)if((x=Math.min(x,b0(l[C],f,g)))===0)return 0;return x}function Ad(l,r,s,u,g){const f=Math.min(g.pointToSegmentDistance(l,s,u),g.pointToSegmentDistance(r,s,u)),x=Math.min(g.pointToSegmentDistance(s,l,r),g.pointToSegmentDistance(u,l,r));return Math.min(f,x)}function el(l,r,s,u,g){if(!Kl(r,l.length)||!Kl(u,s.length))return NaN;let f=1/0;for(let x=r[0];x<r[1];++x)for(let C=u[0];C<u[1];++C){if(Ed(l[x],l[x+1],s[C],s[C+1]))return 0;f=Math.min(f,Ad(l[x],l[x+1],s[C],s[C+1],g))}return f}function Bm(l,r,s,u,g){if(!Kl(r,l.length)||!Kl(u,s.length))return NaN;let f=1/0;for(let x=r[0];x<=r[1];++x)for(let C=u[0];C<=u[1];++C)if((f=Math.min(f,g.distance(l[x],s[C])))===0)return f;return f}function w0(l,r,s){if(Qo(l,r,!0))return 0;let u=1/0;for(const g of r){const f=g.length;if(f<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(g[0]!==g[f-1]&&(u=Math.min(u,s.pointToSegmentDistance(l,g[f-1],g[0])))===0||(u=Math.min(u,b0(l,g,s)))===0)return u}return u}function Zl(l,r,s,u){if(!Kl(r,l.length))return NaN;for(let f=r[0];f<=r[1];++f)if(Qo(l[f],s,!0))return 0;let g=1/0;for(let f=r[0];f<r[1];++f)for(const x of s)for(let C=0,M=x.length,$=M-1;C<M;$=C++){if(Ed(l[f],l[f+1],x[$],x[C]))return 0;g=Math.min(g,Ad(l[f],l[f+1],x[$],x[C],u))}return g}function Bc(l,r){for(const s of l)for(let u=0;u<=s.length-1;++u)if(Qo(s[u],r,!0))return!0;return!1}function ap(l,r,s,u=1/0){const g=wl(l),f=wl(r);if(u!==1/0&&Bu(g,f,s)>=u)return u;if(Rh(g,f)){if(Bc(l,r))return 0}else if(Bc(r,l))return 0;let x=u;for(const C of l)for(let M=0,$=C.length,T=$-1;M<$;T=M++)for(const k of r)for(let I=0,P=k.length,R=P-1;I<P;R=I++){if(Ed(C[T],C[M],k[R],k[I]))return 0;x=Math.min(x,Ad(C[T],C[M],k[R],k[I],s))}return x}function ks(l,r,s,u,g,f,x){if(f===null||x===null)return;const C=Bu(ki(u,f),ki(g,x),s);C<r&&l.push({dist:C,range1:f,range2:x})}function Nc(l,r,s,u,g=1/0){let f=Math.min(u.distance(l[0],s[0][0]),g);if(f===0)return f;const x=new Pd([{dist:0,range1:[0,l.length-1],range2:[0,0]}],Ih),C=r?Ki:bl,M=wl(s);for(;x.length;){const $=x.pop();if($.dist>=f)continue;const T=$.range1;if(tp(T)<=C){if(!Kl(T,l.length))return NaN;if(r){const k=Zl(l,T,s,u);if((f=Math.min(f,k))===0)return f}else for(let k=T[0];k<=T[1];++k){const I=w0(l[k],s,u);if((f=Math.min(f,I))===0)return f}}else{const k=Md(T,r);if(k[0]!==null){const I=Bu(ki(l,k[0]),M,u);I<f&&x.push({dist:I,range1:k[0],range2:[0,0]})}if(k[1]!==null){const I=Bu(ki(l,k[1]),M,u);I<f&&x.push({dist:I,range1:k[1],range2:[0,0]})}}}return f}function ip(l,r,s,u,g,f=1/0){let x=Math.min(f,g.distance(l[0],s[0]));if(x===0)return x;const C=new Pd([{dist:0,range1:[0,l.length-1],range2:[0,s.length-1]}],Ih),M=r?Ki:bl,$=u?Ki:bl;for(;C.length;){const T=C.pop();if(T.dist>=x)continue;const k=T.range1,I=T.range2;if(tp(k)<=M&&tp(I)<=$){if(!Kl(k,l.length)||!Kl(I,s.length))return NaN;if(r&&u?x=Math.min(x,el(l,k,s,I,g)):r||u?r&&!u?x=Math.min(x,Nu(s,I,l,k,g)):!r&&u&&(x=Math.min(x,Nu(l,k,s,I,g))):x=Math.min(x,Bm(l,k,s,I,g)),x===0)return x}else{const P=Md(k,r),R=Md(I,u);ks(C,x,g,l,s,P[0],R[0]),ks(C,x,g,l,s,P[0],R[1]),ks(C,x,g,l,s,P[1],R[0]),ks(C,x,g,l,s,P[1],R[1])}}return x}function zh(l,r,s,u,g=1/0){let f=g;const x=ki(l,[0,l.length-1]);for(const C of s)if(!(f!==1/0&&Bu(x,ki(C,[0,C.length-1]),u)>=f)&&(f=Math.min(f,ip(l,r,C,!0,u,f)),f===0))return f;return f}function kd(l,r,s,u,g=1/0){let f=g;const x=ki(l,[0,l.length-1]);for(const C of s){if(f!==1/0&&Bu(x,wl(C),u)>=f)continue;const M=Nc(l,r,C,u,f);if(isNaN(M))return M;if((f=Math.min(f,M))===0)return f}return f}function sp(l){return l==="Point"||l==="MultiPoint"||l==="LineString"||l==="MultiLineString"||l==="Polygon"||l==="MultiPolygon"}class jc{constructor(r,s){this.type=wr,this.geojson=r,this.geometries=s}static parse(r,s){if(r.length!==2)return s.error(`'distance' expression requires either one argument, but found ' ${r.length-1} instead.`);if(Iu(r[1])){const u=r[1];if(u.type==="FeatureCollection"){for(let g=0;g<u.features.length;++g)if(sp(u.features[g].geometry.type))return new jc(u,u.features[g].geometry)}else if(u.type==="Feature"){if(sp(u.geometry.type))return new jc(u,u.geometry)}else if(sp(u.type))return new jc(u,u)}return s.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(r){const s=r.geometry(),u=r.canonicalID();if(s!=null&&u!=null){if(r.geometryType()==="Point")return function(g,f,x){const C=[];for(const $ of g)for(const T of $)C.push(rp(T,f));const M=new Wl(C[0][1],"meters");return x.type==="Point"||x.type==="MultiPoint"||x.type==="LineString"?ip(C,!1,x.type==="Point"?[x.coordinates]:x.coordinates,x.type==="LineString",M):x.type==="MultiLineString"?zh(C,!1,x.coordinates,M):x.type==="Polygon"||x.type==="MultiPolygon"?kd(C,!1,x.type==="Polygon"?[x.coordinates]:x.coordinates,M):null}(s,u,this.geometries);if(r.geometryType()==="LineString")return function(g,f,x){const C=[];for(const $ of g){const T=[];for(const k of $)T.push(rp(k,f));C.push(T)}const M=new Wl(C[0][0][1],"meters");if(x.type==="Point"||x.type==="MultiPoint"||x.type==="LineString")return zh(x.type==="Point"?[x.coordinates]:x.coordinates,x.type==="LineString",C,M);if(x.type==="MultiLineString"){let $=1/0;for(let T=0;T<x.coordinates.length;T++){const k=zh(x.coordinates[T],!0,C,M,$);if(isNaN(k))return k;if(($=Math.min($,k))===0)return $}return $}if(x.type==="Polygon"||x.type==="MultiPolygon"){let $=1/0;for(let T=0;T<C.length;T++){const k=kd(C[T],!0,x.type==="Polygon"?[x.coordinates]:x.coordinates,M,$);if(isNaN(k))return k;if(($=Math.min($,k))===0)return $}return $}return null}(s,u,this.geometries);if(r.geometryType()==="Polygon")return function(g,f,x){const C=[];for(const $ of function(T,k){const I=T.length;if(I<=1)return[T];const P=[];let R,j;for(let W=0;W<I;W++){const K=wx(T[W]);K!==0&&(T[W].area=Math.abs(K),j===void 0&&(j=K<0),j===K<0?(R&&P.push(R),R=[T[W]]):R.push(T[W]))}return R&&P.push(R),P}(g)){const T=[];for(let k=0;k<$.length;++k)T.push(np($[k],f));C.push(T)}const M=new Wl(C[0][0][0][1],"meters");if(x.type==="Point"||x.type==="MultiPoint"||x.type==="LineString")return kd(x.type==="Point"?[x.coordinates]:x.coordinates,x.type==="LineString",C,M);if(x.type==="MultiLineString"){let $=1/0;for(let T=0;T<x.coordinates.length;T++){const k=kd(x.coordinates[T],!0,C,M,$);if(isNaN(k))return k;if(($=Math.min($,k))===0)return $}return $}return x.type==="Polygon"||x.type==="MultiPolygon"?function($,T,k){let I=1/0;for(const P of $)for(const R of T){const j=ap(P,R,k,I);if(isNaN(j))return j;if((I=Math.min(I,j))===0)return I}return I}(x.type==="Polygon"?[x.coordinates]:x.coordinates,C,M):null}(s,u,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function op(l,r){switch(l){case"string":return Jo(r);case"number":return+r;case"boolean":return!!r;case"color":return In.parse(r);case"formatted":return Mi.fromString(Jo(r));case"resolvedImage":return Ai.build(Jo(r))}return r}function lp(l,r,s,u){return u!==void 0&&(l=u*Math.round(l/u)),r!==void 0&&l<r&&(l=r),s!==void 0&&l>s&&(l=s),l}class Oc{constructor(r,s,u){this.type=r,this.key=s,this.scope=u}static parse(r,s){let u=s.expectedType;if(u==null&&(u=En),r.length<2||r.length>3)return s.error("Invalid number of arguments for 'config' expression.");const g=s.parse(r[1],1);if(!(g instanceof Co))return s.error("Key name of 'config' expression must be a string literal.");if(r.length>=3){const f=s.parse(r[2],2);return f instanceof Co?new Oc(u,Jo(g.value),Jo(f.value)):s.error("Scope of 'config' expression must be a string literal.")}return new Oc(u,Jo(g.value))}evaluate(r){const s=[this.key,this.scope,r.scope].filter(Boolean).join(""),u=r.getConfig(s);if(!u)return null;const{type:g,value:f,values:x,minValue:C,maxValue:M,stepValue:$}=u,T=u.default.evaluate(r);let k=T;if(f){const I=r.scope;r.scope=(I||"").split("").slice(1).join(""),k=f.evaluate(r),r.scope=I}return g&&(k=op(g,k)),k===void 0||C===void 0&&M===void 0&&$===void 0||(typeof k=="number"?k=lp(k,C,M,$):Array.isArray(k)&&(k=k.map(I=>typeof I=="number"?lp(I,C,M,$):I))),f!==void 0&&k!==void 0&&x&&!x.includes(k)&&(k=T,g&&(k=op(g,k))),(g&&g!==this.type||k!==void 0&&wa(k)!==this.type)&&(k=op(this.type.kind,k)),k}eachChild(){}outputDefined(){return!1}serialize(){const r=["config",this.key];return this.scope&&r.concat(this.key),r}}function Fc(l){if(l instanceof Vs&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof _l||l instanceof jc)return!1;let r=!0;return l.eachChild(s=>{r&&!Fc(s)&&(r=!1)}),r}function Rs(l){if(l instanceof Vs&&l.name==="feature-state")return!1;let r=!0;return l.eachChild(s=>{r&&!Rs(s)&&(r=!1)}),r}function Vc(l){if(l instanceof Oc)return new Set([l.key]);let r=new Set;return l.eachChild(s=>{r=new Set([...r,...Vc(s)])}),r}function Ri(l,r){if(l instanceof Vs&&r.indexOf(l.name)>=0)return!1;let s=!0;return l.eachChild(u=>{s&&!Ri(u,r)&&(s=!1)}),s}class Zi{constructor(r,s){this.type=s.type,this.name=r,this.boundExpression=s}static parse(r,s){if(r.length!==2||typeof r[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const u=r[1];return s.scope.has(u)?new Zi(u,s.scope.get(u)):s.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Xl{constructor(r,s=[],u,g=new Au,f=[],x,C){this.registry=r,this.path=s,this.key=s.map(M=>typeof M=="string"?`['${M}']`:`[${M}]`).join(""),this.scope=g,this.errors=f,this.expectedType=u,this._scope=x,this.options=C}parse(r,s,u,g,f={}){return s||u?this.concat(s,null,u,g)._parse(r,f):this._parse(r,f)}parseObjectValue(r,s,u,g,f,x={}){return this.concat(s,u,g,f)._parse(r,x)}_parse(r,s){function u(g,f,x){return x==="assert"?new Do(f,[g]):x==="coerce"?new ql(f,[g]):g}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=typeof r[0]=="string"?this.registry[r[0]]:void 0;if(g){let f=g.parse(r,this);if(!f)return null;if(this.expectedType){const x=this.expectedType,C=f.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||C.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string"){if(this.checkSubtype(x,C))return null}else f=u(f,x,s.typeAnnotation||"coerce");else f=u(f,x,s.typeAnnotation||"assert")}if(!(f instanceof Co)&&f.type.kind!=="resolvedImage"&&ju(f)){const x=new Yf(this._scope,this.options);try{f=new Co(f.type,f.evaluate(x))}catch(C){return this.error(C.message),null}}return f}return ql.parse(["to-array",r],this)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,s,u,g){let f=typeof r=="number"?this.path.concat(r):this.path;f=typeof s=="string"?f.concat(s):f;const x=g?this.scope.concat(g):this.scope;return new Xl(this.registry,f,u||null,x,this.errors,this._scope,this.options)}error(r,...s){const u=`${this.key}${s.map(g=>`[${g}]`).join("")}`;this.errors.push(new to(u,r))}checkSubtype(r,s){const u=Gl(r,s);return u&&this.error(u),u}}var Lh=Xl;function ju(l){if(l instanceof Zi)return ju(l.boundExpression);if(l instanceof Vs&&l.name==="error"||l instanceof Mh||l instanceof _l||l instanceof jc||l instanceof Oc)return!1;const r=l instanceof ql||l instanceof Do;let s=!0;return l.eachChild(u=>{s=r?s&&ju(u):s&&u instanceof Co}),!!s&&Fc(l)&&Ri(l,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function Po(l,r){const s=l.length-1;let u,g,f=0,x=s,C=0;for(;f<=x;)if(C=Math.floor((f+x)/2),u=l[C],g=l[C+1],u<=r){if(C===s||r<g)return C;f=C+1}else{if(!(u>r))throw new ri("Input is not a number.");x=C-1}return 0}class bn{constructor(r,s,u){this.type=r,this.input=s,this.labels=[],this.outputs=[];for(const[g,f]of u)this.labels.push(g),this.outputs.push(f)}static parse(r,s){if(r.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return s.error("Expected an even number of arguments.");const u=s.parse(r[1],1,wr);if(!u)return null;const g=[];let f=null;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);for(let x=1;x<r.length;x+=2){const C=x===1?-1/0:r[x],M=r[x+1],$=x,T=x+1;if(typeof C!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(g.length&&g[g.length-1][0]>=C)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',$);const k=s.parse(M,T,f);if(!k)return null;f=f||k.type,g.push([C,k])}return new bn(f,u,g)}evaluate(r){const s=this.labels,u=this.outputs;if(s.length===1)return u[0].evaluate(r);const g=this.input.evaluate(r);if(g<=s[0])return u[0].evaluate(r);const f=s.length;return g>=s[f-1]?u[f-1].evaluate(r):u[Po(s,g)].evaluate(r)}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){const r=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&r.push(this.labels[s]),r.push(this.outputs[s].serialize());return r}}const Ou=.95047,Nm=1.08883,$h=4/29,Mo=6/29,S0=3*Mo*Mo,Un=Mo*Mo*Mo,jm=Math.PI/180,Yl=180/Math.PI;function cp(l){return l>Un?Math.pow(l,1/3):l/S0+$h}function Rd(l){return l>Mo?l*l*l:S0*(l-$h)}function Jl(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function Bh(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function up(l){const r=Bh(l.r),s=Bh(l.g),u=Bh(l.b),g=cp((.4124564*r+.3575761*s+.1804375*u)/Ou),f=cp((.2126729*r+.7151522*s+.072175*u)/1);return{l:116*f-16,a:500*(g-f),b:200*(f-cp((.0193339*r+.119192*s+.9503041*u)/Nm)),alpha:l.a}}function Fu(l){let r=(l.l+16)/116,s=isNaN(l.a)?r:r+l.a/500,u=isNaN(l.b)?r:r-l.b/200;return r=1*Rd(r),s=Ou*Rd(s),u=Nm*Rd(u),new In(Jl(3.2404542*s-1.5371385*r-.4985314*u),Jl(-.969266*s+1.8760108*r+.041556*u),Jl(.0556434*s-.2040259*r+1.0572252*u),l.alpha)}function Id(l,r,s){const u=r-l;return l+s*(u>180||u<-180?u-360*Math.round(u/360):u)}const Uc={forward:up,reverse:Fu,interpolate:function(l,r,s){return{l:Or(l.l,r.l,s),a:Or(l.a,r.a,s),b:Or(l.b,r.b,s),alpha:Or(l.alpha,r.alpha,s)}}},Gc={forward:function(l){const{l:r,a:s,b:u}=up(l),g=Math.atan2(u,s)*Yl;return{h:g<0?g+360:g,c:Math.sqrt(s*s+u*u),l:r,alpha:l.a}},reverse:function(l){const r=l.h*jm,s=l.c;return Fu({l:l.l,a:Math.cos(r)*s,b:Math.sin(r)*s,alpha:l.alpha})},interpolate:function(l,r,s){return{h:Id(l.h,r.h,s),c:Or(l.c,r.c,s),l:Or(l.l,r.l,s),alpha:Or(l.alpha,r.alpha,s)}}};var ro=Object.freeze({__proto__:null,hcl:Gc,lab:Uc});class Ya{constructor(r,s,u,g,f,x){this.type=r,this.operator=s,this.interpolation=u,this.input=g,this.dynamicStops=f,this.labels=[],this.outputs=[];for(const[C,M]of x)this.labels.push(C),this.outputs.push(M)}static interpolationFactor(r,s,u,g){let f=0;if(r.name==="exponential")f=Ql(s,r.base,u,g);else if(r.name==="linear")f=Ql(s,1,u,g);else if(r.name==="cubic-bezier"){const x=r.controlPoints;f=new Sr(x[0],x[1],x[2],x[3]).solve(Ql(s,1,u,g))}return f}static parse(r,s){let[u,g,f,...x]=r;if(!Array.isArray(g)||g.length===0)return s.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const $=g[1];if(typeof $!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:$}}else{if(g[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const $=g.slice(1);if($.length!==4||$.some(T=>typeof T!="number"||T<0||T>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:$}}}if(r.length-1<3)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length-1>3&&(r.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(f=s.parse(f,2,wr),!f)return null;const C=[];let M=null;if(u==="interpolate-hcl"||u==="interpolate-lab"?M=bs:s.expectedType&&s.expectedType.kind!=="value"&&(M=s.expectedType),r.length-1==3){const $=s.parse(x[0],3,En);return $?new Ya(M,u,g,f,$,C):null}for(let $=0;$<x.length;$+=2){const T=x[$],k=x[$+1],I=$+3,P=$+4;if(typeof T!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(C.length&&C[C.length-1][0]>=T)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const R=s.parse(k,P,M);if(!R)return null;M=M||R.type,C.push([T,R])}return M.kind==="number"||M.kind==="color"||M.kind==="array"&&M.itemType.kind==="number"&&typeof M.N=="number"?new Ya(M,u,g,f,null,C):s.error(`Type ${ea(M)} is not interpolatable.`)}evaluate(r){let s=this.labels,u=this.outputs;if(this.dynamicStops){const T=this.dynamicStops.evaluate(r);if(T.length%2!=0)throw new ri("Expected an even number of arguments.");s=[],u=[];for(let k=0;k<T.length;k+=2){const I=T[k],P=new Co(wr,T[k+1]);if(typeof I!="number")throw new ri('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.');if(s.length&&s[s.length-1]>=I)throw new ri('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.');s.push(I),u.push(P)}if(s.length===0)throw new ri("Expected at least one input/output pair.")}if(s.length===1)return u[0].evaluate(r);const g=this.input.evaluate(r);if(g<=s[0])return u[0].evaluate(r);const f=s.length;if(g>=s[f-1])return u[f-1].evaluate(r);const x=Po(s,g),C=Ya.interpolationFactor(this.interpolation,g,s[x],s[x+1]),M=u[x].evaluate(r),$=u[x+1].evaluate(r);return this.operator==="interpolate"?zn[this.type.kind.toLowerCase()](M,$,C):this.operator==="interpolate-hcl"?Gc.reverse(Gc.interpolate(Gc.forward(M),Gc.forward($),C)):Uc.reverse(Uc.interpolate(Uc.forward(M),Uc.forward($),C))}eachChild(r){r(this.input);for(const s of this.outputs)r(s)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){let r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,r,this.input.serialize()];if(this.dynamicStops)s.push(this.dynamicStops.serialize());else for(let u=0;u<this.labels.length;u++)s.push(this.labels[u],this.outputs[u].serialize());return s}}function Ql(l,r,s,u){const g=u-s,f=l-s;return g===0?0:r===1?f/g:(Math.pow(r,f)-1)/(Math.pow(r,g)-1)}class Ao{constructor(r,s){this.type=r,this.args=s}static parse(r,s){if(r.length<2)return s.error("Expectected at least one argument.");let u=null;const g=s.expectedType;g&&g.kind!=="value"&&(u=g);const f=[];for(const C of r.slice(1)){const M=s.parse(C,1+f.length,u,void 0,{typeAnnotation:"omit"});if(!M)return null;u=u||M.type,f.push(M)}const x=g&&f.some(C=>Gl(g,C.type));return new Ao(x?En:u,f)}evaluate(r){let s,u=null,g=0;for(const f of this.args){if(g++,u=f.evaluate(r),u&&u instanceof Ai&&!u.available&&(s||(s=u),u=null,g===this.args.length))return s;if(u!==null)break}return u}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=["coalesce"];return this.eachChild(s=>{r.push(s.serialize())}),r}}class ko{constructor(r,s){this.type=s.type,this.bindings=[].concat(r),this.result=s}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const s of this.bindings)r(s[1]);r(this.result)}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const u=[];for(let f=1;f<r.length-1;f+=2){const x=r[f];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,f);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",f);const C=s.parse(r[f+1],f+1);if(!C)return null;u.push([x,C])}const g=s.parse(r[r.length-1],r.length-1,s.expectedType,u);return g?new ko(u,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const r=["let"];for(const[s,u]of this.bindings)r.push(s,u.serialize());return r.push(this.result.serialize()),r}}class ec{constructor(r,s,u){this.type=r,this.index=s,this.input=u}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,wr),g=s.parse(r[2],2,Pa(s.expectedType||En));return u&&g?new ec(g.type.itemType,u,g):null}evaluate(r){const s=this.index.evaluate(r),u=this.input.evaluate(r);if(s<0)throw new ri(`Array index out of bounds: ${s} < 0.`);if(s>u.length-1)throw new ri(`Array index out of bounds: ${s} > ${u.length-1}.`);if(s===Math.floor(s))return u[s];const g=Math.floor(s),f=Math.ceil(s),x=u[g],C=u[f];if(typeof x!="number"||typeof C!="number")throw new ri(`Cannot interpolate between non-number values at index ${s}.`);const M=s-g;return x*(1-M)+C*M}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class dp{constructor(r,s){this.type=_n,this.needle=r,this.haystack=s}static parse(r,s){if(r.length!==3)return s.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,En),g=s.parse(r[2],2,En);return u&&g?Zf(u.type,[_n,Ln,wr,Fs,En])?new dp(u,g):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ea(u.type)} instead`):null}evaluate(r){const s=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(u==null)return!1;if(!Lc(s,["boolean","string","number","null"]))throw new ri(`Expected first argument to be of type boolean, string, number or null, but found ${ea(wa(s))} instead.`);if(!Lc(u,["string","array"]))throw new ri(`Expected second argument to be of type array or string, but found ${ea(wa(u))} instead.`);return u.indexOf(s)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class zd{constructor(r,s,u){this.type=wr,this.needle=r,this.haystack=s,this.fromIndex=u}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,En),g=s.parse(r[2],2,En);if(!u||!g)return null;if(!Zf(u.type,[_n,Ln,wr,Fs,En]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ea(u.type)} instead`);if(r.length===4){const f=s.parse(r[3],3,wr);return f?new zd(u,g,f):null}return new zd(u,g)}evaluate(r){const s=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!Lc(s,["boolean","string","number","null"]))throw new ri(`Expected first argument to be of type boolean, string, number or null, but found ${ea(wa(s))} instead.`);if(!Lc(u,["string","array"]))throw new ri(`Expected second argument to be of type array or string, but found ${ea(wa(u))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(r);return u.indexOf(s,g)}return u.indexOf(s)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Nh{constructor(r,s,u,g,f,x){this.inputType=r,this.type=s,this.input=u,this.cases=g,this.outputs=f,this.otherwise=x}static parse(r,s){if(r.length<5)return s.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return s.error("Expected an even number of arguments.");let u,g;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);const f={},x=[];for(let $=2;$<r.length-1;$+=2){let T=r[$];const k=r[$+1];Array.isArray(T)||(T=[T]);const I=s.concat($);if(T.length===0)return I.error("Expected at least one branch label.");for(const R of T){if(typeof R!="number"&&typeof R!="string")return I.error("Branch labels must be numbers or strings.");if(typeof R=="number"&&Math.abs(R)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof R=="number"&&Math.floor(R)!==R)return I.error("Numeric branch labels must be integer values.");if(u){if(I.checkSubtype(u,wa(R)))return null}else u=wa(R);if(f[String(R)]!==void 0)return I.error("Branch labels must be unique.");f[String(R)]=x.length}const P=s.parse(k,$,g);if(!P)return null;g=g||P.type,x.push(P)}const C=s.parse(r[1],1,En);if(!C)return null;const M=s.parse(r[r.length-1],r.length-1,g);return M?C.type.kind!=="value"&&s.concat(1).checkSubtype(u,C.type)?null:new Nh(u,g,C,f,x,M):null}evaluate(r){const s=this.input.evaluate(r);return(wa(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),u=[],g={};for(const x of s){const C=g[this.cases[x]];C===void 0?(g[this.cases[x]]=u.length,u.push([this.cases[x],[x]])):u[C][1].push(x)}const f=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,C]of u)r.push(C.length===1?f(C[0]):C.map(f)),r.push(this.outputs[x].serialize());return r.push(this.otherwise.serialize()),r}}class as{constructor(r,s,u){this.type=r,this.branches=s,this.otherwise=u}static parse(r,s){if(r.length<4)return s.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return s.error("Expected an odd number of arguments.");let u;s.expectedType&&s.expectedType.kind!=="value"&&(u=s.expectedType);const g=[];for(let x=1;x<r.length-1;x+=2){const C=s.parse(r[x],x,_n);if(!C)return null;const M=s.parse(r[x+1],x+1,u);if(!M)return null;g.push([C,M]),u=u||M.type}const f=s.parse(r[r.length-1],r.length-1,u);return f?new as(u,g,f):null}evaluate(r){for(const[s,u]of this.branches)if(s.evaluate(r))return u.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[s,u]of this.branches)r(s),r(u);r(this.otherwise)}outputDefined(){return this.branches.every(([r,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["case"];return this.eachChild(s=>{r.push(s.serialize())}),r}}class Ja{constructor(r,s,u,g){this.type=r,this.input=s,this.beginIndex=u,this.endIndex=g}static parse(r,s){if(r.length<=2||r.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=s.parse(r[1],1,En),g=s.parse(r[2],2,wr);if(!u||!g)return null;if(!Zf(u.type,[Pa(En),Ln,En]))return s.error(`Expected first argument to be of type array or string, but found ${ea(u.type)} instead`);if(r.length===4){const f=s.parse(r[3],3,wr);return f?new Ja(u.type,u,g,f):null}return new Ja(u.type,u,g)}evaluate(r){const s=this.input.evaluate(r),u=this.beginIndex.evaluate(r);if(!Lc(s,["string","array"]))throw new ri(`Expected first argument to be of type array or string, but found ${ea(wa(s))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(r);return s.slice(u,g)}return s.slice(u)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Ta(l,r){return l==="=="||l==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Hc(l,r,s,u){return u.compare(r,s)===0}function Is(l,r,s){const u=l!=="=="&&l!=="!=";return class fj{constructor(f,x,C){this.type=_n,this.lhs=f,this.rhs=x,this.collator=C,this.hasUntypedArgument=f.type.kind==="value"||x.type.kind==="value"}static parse(f,x){if(f.length!==3&&f.length!==4)return x.error("Expected two or three arguments.");const C=f[0];let M=x.parse(f[1],1,En);if(!M)return null;if(!Ta(C,M.type))return x.concat(1).error(`"${C}" comparisons are not supported for type '${ea(M.type)}'.`);let $=x.parse(f[2],2,En);if(!$)return null;if(!Ta(C,$.type))return x.concat(2).error(`"${C}" comparisons are not supported for type '${ea($.type)}'.`);if(M.type.kind!==$.type.kind&&M.type.kind!=="value"&&$.type.kind!=="value")return x.error(`Cannot compare types '${ea(M.type)}' and '${ea($.type)}'.`);u&&(M.type.kind==="value"&&$.type.kind!=="value"?M=new Do($.type,[M]):M.type.kind!=="value"&&$.type.kind==="value"&&($=new Do(M.type,[$])));let T=null;if(f.length===4){if(M.type.kind!=="string"&&$.type.kind!=="string"&&M.type.kind!=="value"&&$.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(T=x.parse(f[3],3,ku),!T)return null}return new fj(M,$,T)}evaluate(f){const x=this.lhs.evaluate(f),C=this.rhs.evaluate(f);if(u&&this.hasUntypedArgument){const M=wa(x),$=wa(C);if(M.kind!==$.kind||M.kind!=="string"&&M.kind!=="number")throw new ri(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${M.kind}, ${$.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const M=wa(x),$=wa(C);if(M.kind!=="string"||$.kind!=="string")return r(f,x,C)}return this.collator?s(f,x,C,this.collator.evaluate(f)):r(f,x,C)}eachChild(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)}outputDefined(){return!0}serialize(){const f=[l];return this.eachChild(x=>{f.push(x.serialize())}),f}}}const Om=Is("==",function(l,r,s){return r===s},Hc),Vu=Is("!=",function(l,r,s){return r!==s},function(l,r,s,u){return!Hc(0,r,s,u)}),T0=Is("<",function(l,r,s){return r<s},function(l,r,s,u){return u.compare(r,s)<0}),E0=Is(">",function(l,r,s){return r>s},function(l,r,s,u){return u.compare(r,s)>0}),jh=Is("<=",function(l,r,s){return r<=s},function(l,r,s,u){return u.compare(r,s)<=0}),Oh=Is(">=",function(l,r,s){return r>=s},function(l,r,s,u){return u.compare(r,s)>=0});class Ld{constructor(r,s,u,g,f,x){this.type=Ln,this.number=r,this.locale=s,this.currency=u,this.unit=g,this.minFractionDigits=f,this.maxFractionDigits=x}static parse(r,s){if(r.length!==3)return s.error("Expected two arguments.");const u=s.parse(r[1],1,wr);if(!u)return null;const g=r[2];if(typeof g!="object"||Array.isArray(g))return s.error("NumberFormat options argument must be an object.");let f=null;if(g.locale&&(f=s.parseObjectValue(g.locale,2,"locale",Ln),!f))return null;let x=null;if(g.currency&&(x=s.parseObjectValue(g.currency,2,"currency",Ln),!x))return null;let C=null;if(g.unit&&(C=s.parseObjectValue(g.unit,2,"unit",Ln),!C))return null;let M=null;if(g["min-fraction-digits"]&&(M=s.parseObjectValue(g["min-fraction-digits"],2,"min-fraction-digits",wr),!M))return null;let $=null;return g["max-fraction-digits"]&&($=s.parseObjectValue(g["max-fraction-digits"],2,"max-fraction-digits",wr),!$)?null:new Ld(u,f,x,C,M,$)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(r):void 0,unit:this.unit?this.unit.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.unit&&r(this.unit),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.unit&&(r.unit=this.unit.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]}}class Uu{constructor(r){this.type=wr,this.input=r}static parse(r,s){if(r.length!==2)return s.error(`Expected 1 argument, but found ${r.length-1} instead.`);const u=s.parse(r[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${ea(u.type)} instead.`):new Uu(u):null}evaluate(r){const s=this.input.evaluate(r);if(typeof s=="string"||Array.isArray(s))return s.length;throw new ri(`Expected value to be of type string or array, but found ${ea(wa(s))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){const r=["length"];return this.eachChild(s=>{r.push(s.serialize())}),r}}function Fh(l){return function(){l=1831565813+(l|=0)|0;let r=Math.imul(l^l>>>15,1|l);return r=r+Math.imul(r^r>>>7,61|r)^r,((r^r>>>14)>>>0)/4294967296}}const Ro={"==":Om,"!=":Vu,">":E0,"<":T0,">=":Oh,"<=":jh,array:Do,at:ec,boolean:Do,case:as,coalesce:Ao,collator:Mh,format:vl,image:Td,in:dp,"index-of":zd,interpolate:Ya,"interpolate-hcl":Ya,"interpolate-lab":Ya,length:Uu,let:ko,literal:Co,match:Nh,number:Do,"number-format":Ld,object:Do,slice:Ja,step:bn,string:Do,"to-boolean":ql,"to-color":ql,"to-number":ql,"to-string":ql,var:Zi,within:_l,distance:jc,config:Oc};function Sl(l,[r,s,u,g]){r=r.evaluate(l),s=s.evaluate(l),u=u.evaluate(l);const f=g?g.evaluate(l):1,x=Ru(r,s,u,f);if(x)throw new ri(x);return new In(r/255*f,s/255*f,u/255*f,f)}function tc(l,[r,s,u,g]){r=r.evaluate(l),s=s.evaluate(l),u=u.evaluate(l);const f=g?g.evaluate(l):1,x=function($,T,k,I){return typeof $=="number"&&$>=0&&$<=360?typeof T=="number"&&T>=0&&T<=100&&typeof k=="number"&&k>=0&&k<=100?I===void 0||typeof I=="number"&&I>=0&&I<=1?null:`Invalid hsla value [${[$,T,k,I].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof I=="number"?[$,T,k,I]:[$,T,k]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof I=="number"?[$,T,k,I]:[$,T,k]).join(", ")}]: 'h' must be between 0 and 360.`}(r,s,u,f);if(x)throw new ri(x);const C=`hsla(${r}, ${s}%, ${u}%, ${f})`,M=In.parse(C);if(!M)throw new ri(`Failed to parse HSLA color: ${C}`);return M}function tl(l,r){return l in r}function $d(l,r){const s=r[l];return s===void 0?null:s}function Gs(l){return{type:l}}function Gu(l){return{result:"success",value:l}}function Io(l){return{result:"error",value:l}}function rc(l,r){return!!l&&!!l.parameters&&l.parameters.indexOf(r)>-1}function xi(l){return l["property-type"]==="data-driven"}function Hu(l){return rc(l.expression,"measure-light")}function Fm(l){return rc(l.expression,"zoom")}function Vm(l){return!!l.expression&&l.expression.interpolated}function hp(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)}function C0(l){return l}function Ii(l,r){const s=r.type==="color",u=l.stops&&typeof l.stops[0][0]=="object",g=u||!(u||l.property!==void 0),f=l.type||(Vm(r)?"exponential":"interval");if(s&&((l=wd({},l)).stops&&(l.stops=l.stops.map($=>[$[0],In.parse($[1])])),l.default=In.parse(l.default?l.default:r.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!ro[l.colorSpace])throw new Error(`Unknown color space: ${l.colorSpace}`);let x,C,M;if(f==="exponential")x=Uh;else if(f==="interval")x=Bd;else if(f==="categorical"){x=Vh,C=Object.create(null);for(const $ of l.stops)C[$[0]]=$[1];M=typeof l.stops[0][0]}else{if(f!=="identity")throw new Error(`Unknown function type "${f}"`);x=nc}if(u){const $={},T=[];for(let P=0;P<l.stops.length;P++){const R=l.stops[P],j=R[0].zoom;$[j]===void 0&&($[j]={zoom:j,type:l.type,property:l.property,default:l.default,stops:[]},T.push(j)),$[j].stops.push([R[0].value,R[1]])}const k=[];for(const P of T)k.push([$[P].zoom,Ii($[P],r)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:Ya.interpolationFactor.bind(void 0,I),zoomStops:k.map(P=>P[0]),evaluate:({zoom:P},R)=>Uh({stops:k,base:l.base},r,P).evaluate(P,R)}}if(g){const $=f==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:$,interpolationFactor:Ya.interpolationFactor.bind(void 0,$),zoomStops:l.stops.map(T=>T[0]),evaluate:({zoom:T})=>x(l,r,T,C,M)}}return{kind:"source",evaluate($,T){const k=T&&T.properties?T.properties[l.property]:void 0;return k===void 0?qu(l.default,r.default):x(l,r,k,C,M)}}}function qu(l,r,s){return l!==void 0?l:r!==void 0?r:s!==void 0?s:void 0}function Vh(l,r,s,u,g){return qu(typeof s===g?u[s]:void 0,l.default,r.default)}function Bd(l,r,s){if(zu(s)!=="number")return qu(l.default,r.default);const u=l.stops.length;if(u===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[u-1][0])return l.stops[u-1][1];const g=Po(l.stops.map(f=>f[0]),s);return l.stops[g][1]}function Uh(l,r,s){const u=l.base!==void 0?l.base:1;if(zu(s)!=="number")return qu(l.default,r.default);const g=l.stops.length;if(g===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[g-1][0])return l.stops[g-1][1];const f=Po(l.stops.map(T=>T[0]),s),x=function(T,k,I,P){const R=P-I,j=T-I;return R===0?0:k===1?j/R:(Math.pow(k,j)-1)/(Math.pow(k,R)-1)}(s,u,l.stops[f][0],l.stops[f+1][0]),C=l.stops[f][1],M=l.stops[f+1][1];let $=zn[r.type]||C0;if(l.colorSpace&&l.colorSpace!=="rgb"){const T=ro[l.colorSpace];$=(k,I)=>T.reverse(T.interpolate(T.forward(k),T.forward(I),x))}return typeof C.evaluate=="function"?{evaluate(...T){const k=C.evaluate.apply(void 0,T),I=M.evaluate.apply(void 0,T);if(k!==void 0&&I!==void 0)return $(k,I,x)}}:$(C,M,x)}function nc(l,r,s){return r.type==="color"?s=In.parse(s):r.type==="formatted"?s=Mi.fromString(s.toString()):r.type==="resolvedImage"?s=Ai.build(s.toString()):zu(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0),qu(s,l.default,r.default)}Vs.register(Ro,{error:[{kind:"error"},[Ln],(l,[r])=>{throw new ri(r.evaluate(l))}],typeof:[Ln,[En],(l,[r])=>ea(wa(r.evaluate(l)))],"to-rgba":[Pa(wr,4),[bs],(l,[r])=>r.evaluate(l).toRenderColor(null).toArray()],"to-hsla":[Pa(wr,4),[bs],(l,[r])=>r.evaluate(l).toRenderColor(null).toHslaArray()],rgb:[bs,[wr,wr,wr],Sl],rgba:[bs,[wr,wr,wr,wr],Sl],hsl:[bs,[wr,wr,wr],tc],hsla:[bs,[wr,wr,wr,wr],tc],has:{type:_n,overloads:[[[Ln],(l,[r])=>tl(r.evaluate(l),l.properties())],[[Ln,xl],(l,[r,s])=>tl(r.evaluate(l),s.evaluate(l))]]},get:{type:En,overloads:[[[Ln],(l,[r])=>$d(r.evaluate(l),l.properties())],[[Ln,xl],(l,[r,s])=>$d(r.evaluate(l),s.evaluate(l))]]},"feature-state":[En,[Ln],(l,[r])=>$d(r.evaluate(l),l.featureState||{})],properties:[xl,[],l=>l.properties()],"geometry-type":[Ln,[],l=>l.geometryType()],id:[En,[],l=>l.id()],zoom:[wr,[],l=>l.globals.zoom],pitch:[wr,[],l=>l.globals.pitch||0],"distance-from-center":[wr,[],l=>l.distanceFromCenter()],"measure-light":[wr,[Ln],(l,[r])=>l.measureLight(r.evaluate(l))],"heatmap-density":[wr,[],l=>l.globals.heatmapDensity||0],"line-progress":[wr,[],l=>l.globals.lineProgress||0],"raster-value":[wr,[],l=>l.globals.rasterValue||0],"raster-particle-speed":[wr,[],l=>l.globals.rasterParticleSpeed||0],"sky-radial-progress":[wr,[],l=>l.globals.skyRadialProgress||0],accumulated:[En,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[wr,Gs(wr),(l,r)=>{let s=0;for(const u of r)s+=u.evaluate(l);return s}],"*":[wr,Gs(wr),(l,r)=>{let s=1;for(const u of r)s*=u.evaluate(l);return s}],"-":{type:wr,overloads:[[[wr,wr],(l,[r,s])=>r.evaluate(l)-s.evaluate(l)],[[wr],(l,[r])=>-r.evaluate(l)]]},"/":[wr,[wr,wr],(l,[r,s])=>r.evaluate(l)/s.evaluate(l)],"%":[wr,[wr,wr],(l,[r,s])=>r.evaluate(l)%s.evaluate(l)],ln2:[wr,[],()=>Math.LN2],pi:[wr,[],()=>Math.PI],e:[wr,[],()=>Math.E],"^":[wr,[wr,wr],(l,[r,s])=>Math.pow(r.evaluate(l),s.evaluate(l))],sqrt:[wr,[wr],(l,[r])=>Math.sqrt(r.evaluate(l))],log10:[wr,[wr],(l,[r])=>Math.log(r.evaluate(l))/Math.LN10],ln:[wr,[wr],(l,[r])=>Math.log(r.evaluate(l))],log2:[wr,[wr],(l,[r])=>Math.log(r.evaluate(l))/Math.LN2],sin:[wr,[wr],(l,[r])=>Math.sin(r.evaluate(l))],cos:[wr,[wr],(l,[r])=>Math.cos(r.evaluate(l))],tan:[wr,[wr],(l,[r])=>Math.tan(r.evaluate(l))],asin:[wr,[wr],(l,[r])=>Math.asin(r.evaluate(l))],acos:[wr,[wr],(l,[r])=>Math.acos(r.evaluate(l))],atan:[wr,[wr],(l,[r])=>Math.atan(r.evaluate(l))],min:[wr,Gs(wr),(l,r)=>Math.min(...r.map(s=>s.evaluate(l)))],max:[wr,Gs(wr),(l,r)=>Math.max(...r.map(s=>s.evaluate(l)))],abs:[wr,[wr],(l,[r])=>Math.abs(r.evaluate(l))],round:[wr,[wr],(l,[r])=>{const s=r.evaluate(l);return s<0?-Math.round(-s):Math.round(s)}],floor:[wr,[wr],(l,[r])=>Math.floor(r.evaluate(l))],ceil:[wr,[wr],(l,[r])=>Math.ceil(r.evaluate(l))],"filter-==":[_n,[Ln,En],(l,[r,s])=>l.properties()[r.value]===s.value],"filter-id-==":[_n,[En],(l,[r])=>l.id()===r.value],"filter-type-==":[_n,[Ln],(l,[r])=>l.geometryType()===r.value],"filter-<":[_n,[Ln,En],(l,[r,s])=>{const u=l.properties()[r.value],g=s.value;return typeof u==typeof g&&u<g}],"filter-id-<":[_n,[En],(l,[r])=>{const s=l.id(),u=r.value;return typeof s==typeof u&&s<u}],"filter->":[_n,[Ln,En],(l,[r,s])=>{const u=l.properties()[r.value],g=s.value;return typeof u==typeof g&&u>g}],"filter-id->":[_n,[En],(l,[r])=>{const s=l.id(),u=r.value;return typeof s==typeof u&&s>u}],"filter-<=":[_n,[Ln,En],(l,[r,s])=>{const u=l.properties()[r.value],g=s.value;return typeof u==typeof g&&u<=g}],"filter-id-<=":[_n,[En],(l,[r])=>{const s=l.id(),u=r.value;return typeof s==typeof u&&s<=u}],"filter->=":[_n,[Ln,En],(l,[r,s])=>{const u=l.properties()[r.value],g=s.value;return typeof u==typeof g&&u>=g}],"filter-id->=":[_n,[En],(l,[r])=>{const s=l.id(),u=r.value;return typeof s==typeof u&&s>=u}],"filter-has":[_n,[En],(l,[r])=>r.value in l.properties()],"filter-has-id":[_n,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[_n,[Pa(Ln)],(l,[r])=>r.value.indexOf(l.geometryType())>=0],"filter-id-in":[_n,[Pa(En)],(l,[r])=>r.value.indexOf(l.id())>=0],"filter-in-small":[_n,[Ln,Pa(En)],(l,[r,s])=>s.value.indexOf(l.properties()[r.value])>=0],"filter-in-large":[_n,[Ln,Pa(En)],(l,[r,s])=>function(u,g,f,x){for(;f<=x;){const C=f+x>>1;if(g[C]===u)return!0;g[C]>u?x=C-1:f=C+1}return!1}(l.properties()[r.value],s.value,0,s.value.length-1)],all:{type:_n,overloads:[[[_n,_n],(l,[r,s])=>r.evaluate(l)&&s.evaluate(l)],[Gs(_n),(l,r)=>{for(const s of r)if(!s.evaluate(l))return!1;return!0}]]},any:{type:_n,overloads:[[[_n,_n],(l,[r,s])=>r.evaluate(l)||s.evaluate(l)],[Gs(_n),(l,r)=>{for(const s of r)if(s.evaluate(l))return!0;return!1}]]},"!":[_n,[_n],(l,[r])=>!r.evaluate(l)],"is-supported-script":[_n,[Ln],(l,[r])=>{const s=l.globals&&l.globals.isSupportedScript;return!s||s(r.evaluate(l))}],upcase:[Ln,[Ln],(l,[r])=>r.evaluate(l).toUpperCase()],downcase:[Ln,[Ln],(l,[r])=>r.evaluate(l).toLowerCase()],concat:[Ln,Gs(En),(l,r)=>r.map(s=>Jo(s.evaluate(l))).join("")],"resolved-locale":[Ln,[ku],(l,[r])=>r.evaluate(l).resolvedLocale()],random:[wr,[wr,wr,En],(l,r)=>{const[s,u,g]=r.map(x=>x.evaluate(l));if(s>u||s===u)return s;let f;if(typeof g=="string")f=function(x){let C=0;if(x.length===0)return C;for(let M=0;M<x.length;M++)C=(C<<5)-C+x.charCodeAt(M),C|=0;return C}(g);else{if(typeof g!="number")throw new ri(`Invalid seed input: ${g}`);f=g}return s+Fh(f)()*(u-s)}]});class qc{constructor(r,s,u,g){this.expression=r,this._warningHistory={},this._evaluator=new Yf(u,g),this._defaultValue=s?function(f){return f.type==="color"&&(hp(f.default)||Array.isArray(f.default))?new In(0,0,0,0):f.type==="color"?In.parse(f.default)||null:f.default===void 0?null:f.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null,this.configDependencies=Vc(r)}evaluateWithoutErrorHandling(r,s,u,g,f,x,C,M){return this._evaluator.globals=r,this._evaluator.feature=s,this._evaluator.featureState=u,this._evaluator.canonical=g||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=x,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=M||null,this.expression.evaluate(this._evaluator)}evaluate(r,s,u,g,f,x,C,M){this._evaluator.globals=r,this._evaluator.feature=s||null,this._evaluator.featureState=u||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=x||null,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=M||null;try{const $=this.expression.evaluate(this._evaluator);if($==null||typeof $=="number"&&$!=$)return this._defaultValue;if(this._enumValues&&!($ in this._enumValues))throw new ri(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify($)} instead.`);return $}catch($){return this._warningHistory[$.message]||(this._warningHistory[$.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${$.message}`)),this._defaultValue}}}function fp(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in Ro}function Nd(l,r,s,u){const g=new Lh(Ro,[],r?function(x){const C={color:bs,string:Ln,number:wr,enum:Ln,boolean:_n,formatted:Eo,resolvedImage:zc};return x.type==="array"?Pa(C[x.value]||En,x.length):C[x.type]}(r):void 0,void 0,void 0,s,u),f=g.parse(l,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Gu(new qc(f,r,s,u)):Io(g.errors)}class Um{constructor(r,s,u,g){this.kind=r,this._styleExpression=s,this.isLightConstant=u,this.isLineProgressConstant=g,this.isStateDependent=r!=="constant"&&!Rs(s.expression),this.configDependencies=Vc(s.expression)}evaluateWithoutErrorHandling(r,s,u,g,f,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,u,g,f,x)}evaluate(r,s,u,g,f,x){return this._styleExpression.evaluate(r,s,u,g,f,x)}}class Wu{constructor(r,s,u,g,f,x){this.kind=r,this.zoomStops=u,this._styleExpression=s,this.isStateDependent=r!=="camera"&&!Rs(s.expression),this.isLightConstant=f,this.isLineProgressConstant=x,this.configDependencies=Vc(s.expression),this.interpolationType=g}evaluateWithoutErrorHandling(r,s,u,g,f,x){return this._styleExpression.evaluateWithoutErrorHandling(r,s,u,g,f,x)}evaluate(r,s,u,g,f,x){return this._styleExpression.evaluate(r,s,u,g,f,x)}interpolationFactor(r,s,u){return this.interpolationType?Ya.interpolationFactor(this.interpolationType,r,s,u):0}}function ac(l,r,s,u){if((l=Nd(l,r,s,u)).result==="error")return l;const g=l.value.expression,f=Fc(g);if(!f&&!xi(r))return Io([new to("","data expressions not supported")]);const x=Ri(g,["zoom","pitch","distance-from-center"]);if(!x&&!Fm(r))return Io([new to("","zoom expressions not supported")]);const C=Ri(g,["measure-light"]);if(!C&&!Hu(r))return Io([new to("","measure-light expression not supported")]);const M=Ri(g,["line-progress"]);if(!M&&!function(k){return rc(k.expression,"line-progress")}(r))return Io([new to("","line-progress expression not supported")]);const $=r.expression&&r.expression.relaxZoomRestriction,T=Ku(g);return T||x||$?T instanceof to?Io([T]):T instanceof Ya&&!Vm(r)?Io([new to("",'"interpolate" expressions cannot be used with this property')]):Gu(T?new Wu(f&&M?"camera":"composite",l.value,T.labels,T instanceof Ya?T.interpolation:void 0,C,M):new Um(f&&M?"constant":"source",l.value,C,M)):Io([new to("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class jd{constructor(r,s){this._parameters=r,this._specification=s,wd(this,Ii(this._parameters,this._specification))}static deserialize(r){return new jd(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function Ku(l){let r=null;if(l instanceof ko)r=Ku(l.result);else if(l instanceof Ao){for(const s of l.args)if(r=Ku(s),r)break}else(l instanceof bn||l instanceof Ya)&&l.input instanceof Vs&&l.input.name==="zoom"&&(r=l);return r instanceof to||l.eachChild(s=>{const u=Ku(s);u instanceof to?r=u:r&&u&&r!==u&&(r=new to("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}var pp,Zu,D0=function(){if(Zu)return pp;Zu=1,pp=r;var l=3;function r(s,u,g){var f=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var x=new Int32Array(this.arrayBuffer);s=x[0],this.d=(u=x[1])+2*(g=x[2]);for(var C=0;C<this.d*this.d;C++){var M=x[l+C],$=x[l+C+1];f.push(M===$?null:x.subarray(M,$))}var T=x[l+f.length+1];this.keys=x.subarray(x[l+f.length],T),this.bboxes=x.subarray(T),this.insert=this._insertReadonly}else{this.d=u+2*g;for(var k=0;k<this.d*this.d;k++)f.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=s,this.padding=g,this.scale=u/s,this.uid=0;var I=g/u*s;this.min=-I,this.max=s+I}return r.prototype.insert=function(s,u,g,f,x){this._forEachCell(u,g,f,x,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(f),this.bboxes.push(x)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(s,u,g,f,x,C){this.cells[x].push(C)},r.prototype.query=function(s,u,g,f,x){var C=this.min,M=this.max;if(s<=C&&u<=C&&M<=g&&M<=f&&!x)return Array.prototype.slice.call(this.keys);var $=[];return this._forEachCell(s,u,g,f,this._queryCell,$,{},x),$},r.prototype._queryCell=function(s,u,g,f,x,C,M,$){var T=this.cells[x];if(T!==null)for(var k=this.keys,I=this.bboxes,P=0;P<T.length;P++){var R=T[P];if(M[R]===void 0){var j=4*R;($?$(I[j+0],I[j+1],I[j+2],I[j+3]):s<=I[j+2]&&u<=I[j+3]&&g>=I[j+0]&&f>=I[j+1])?(M[R]=!0,C.push(k[R])):M[R]=!1}}},r.prototype._forEachCell=function(s,u,g,f,x,C,M,$){for(var T=this._convertToCellCoord(s),k=this._convertToCellCoord(u),I=this._convertToCellCoord(g),P=this._convertToCellCoord(f),R=T;R<=I;R++)for(var j=k;j<=P;j++){var W=this.d*j+R;if((!$||$(this._convertFromCellCoord(R),this._convertFromCellCoord(j),this._convertFromCellCoord(R+1),this._convertFromCellCoord(j+1)))&&x.call(this,s,u,g,f,W,C,M,$))return}},r.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},r.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,u=l+this.cells.length+1+1,g=0,f=0;f<this.cells.length;f++)g+=this.cells[f].length;var x=new Int32Array(u+g+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;for(var C=u,M=0;M<s.length;M++){var $=s[M];x[l+M]=C,x.set($,C),C+=$.length}return x[l+s.length]=C,x.set(this.keys,C),x[l+s.length+1]=C+=this.keys.length,x.set(this.bboxes,C),C+=this.bboxes.length,x.buffer},pp}(),ic=A(D0);const Xu={};function Tr(l,r,s={}){Object.defineProperty(l,"_classRegistryKey",{value:r,writable:!1}),Xu[r]={klass:l,omit:s.omit||[]}}Tr(Object,"Object"),ic.serialize=function(l,r){const s=l.toArrayBuffer();return r&&r.add(s),{buffer:s}},ic.deserialize=function(l){return new ic(l.buffer)},Object.defineProperty(ic,"name",{value:"Grid"}),Tr(ic,"Grid"),typeof DOMMatrix<"u"&&Tr(DOMMatrix,"DOMMatrix"),Tr(In,"Color"),Tr(Error,"Error"),Tr(Mi,"Formatted"),Tr(Hl,"FormattedSection"),Tr(xd,"AJAXError"),Tr(Ai,"ResolvedImage"),Tr(jd,"StylePropertyFunction"),Tr(qc,"StyleExpression",{omit:["_evaluator"]}),Tr(Yo,"ImageIdWithOptions"),Tr(Wu,"ZoomDependentExpression"),Tr(Um,"ZoomConstantExpression"),Tr(Vs,"CompoundExpression",{omit:["_evaluate"]});for(const l in Ro)Xu[Ro[l]._classRegistryKey]||Tr(Ro[l],`Expression${l}`);function Od(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function Gm(l){return self.ImageBitmap&&l instanceof ImageBitmap}function Ss(l,r){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp)return l;if(Od(l)||Gm(l))return r&&r.add(l),l;if(ArrayBuffer.isView(l))return r&&r.add(l.buffer),l;if(l instanceof ImageData)return r&&r.add(l.data.buffer),l;if(Array.isArray(l)){const s=[];for(const u of l)s.push(Ss(u,r));return s}if(l instanceof Map){const s={$name:"Map"};for(const[u,g]of l.entries())s[u]=Ss(g);return s}if(l instanceof Set){const s={$name:"Set"};let u=0;for(const g of l.values())s[++u]=Ss(g);return s}if(typeof l=="object"){const s=l.constructor,u=s._classRegistryKey;if(!u)throw new Error(`Can't serialize object of unregistered class "${u}".`);const g=s.serialize?s.serialize(l,r):{};if(!s.serialize){for(const f in l)l.hasOwnProperty(f)&&(Xu[u].omit.indexOf(f)>=0||(g[f]=Ss(l[f],r)));l instanceof Error&&(g.message=l.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(g.$name=u),g}throw new Error("can't serialize object of type "+typeof l)}function Wc(l){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||Od(l)||Gm(l)||ArrayBuffer.isView(l)||l instanceof ImageData)return l;if(Array.isArray(l))return l.map(Wc);if(typeof l=="object"){const r=l.$name||"Object";if(r==="Map"){const g=new Map;for(const f of Object.keys(l))f!=="$name"&&g.set(f,Wc(l[f]));return g}if(r==="Set"){const g=new Set;for(const f of Object.keys(l))f!=="$name"&&g.add(Wc(l[f]));return g}const{klass:s}=Xu[r];if(!s)throw new Error(`Can't deserialize unregistered class "${r}".`);if(s.deserialize)return s.deserialize(l);const u=Object.create(s.prototype);for(const g of Object.keys(l))g!=="$name"&&(u[g]=Wc(l[g]));return u}throw new Error("can't deserialize object of type "+typeof l)}const Ir={"Latin-1 Supplement":l=>l>=128&&l<=255,Arabic:l=>l>=1536&&l<=1791,"Arabic Supplement":l=>l>=1872&&l<=1919,"Arabic Extended-A":l=>l>=2208&&l<=2303,"Hangul Jamo":l=>l>=4352&&l<=4607,"Unified Canadian Aboriginal Syllabics":l=>l>=5120&&l<=5759,Khmer:l=>l>=6016&&l<=6143,"Unified Canadian Aboriginal Syllabics Extended":l=>l>=6320&&l<=6399,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"CJK Radicals Supplement":l=>l>=11904&&l<=12031,"Kangxi Radicals":l=>l>=12032&&l<=12255,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Bopomofo:l=>l>=12544&&l<=12591,"Hangul Compatibility Jamo":l=>l>=12592&&l<=12687,Kanbun:l=>l>=12688&&l<=12703,"Bopomofo Extended":l=>l>=12704&&l<=12735,"CJK Strokes":l=>l>=12736&&l<=12783,"Katakana Phonetic Extensions":l=>l>=12784&&l<=12799,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"CJK Unified Ideographs Extension A":l=>l>=13312&&l<=19903,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Yi Syllables":l=>l>=40960&&l<=42127,"Yi Radicals":l=>l>=42128&&l<=42191,"Hangul Jamo Extended-A":l=>l>=43360&&l<=43391,"Hangul Syllables":l=>l>=44032&&l<=55215,"Hangul Jamo Extended-B":l=>l>=55216&&l<=55295,"Private Use Area":l=>l>=57344&&l<=63743,"CJK Compatibility Ideographs":l=>l>=63744&&l<=64255,"Arabic Presentation Forms-A":l=>l>=64336&&l<=65023,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Arabic Presentation Forms-B":l=>l>=65136&&l<=65279,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519,Osage:l=>l>=66736&&l<=66815,"CJK Unified Ideographs Extension B":l=>l>=131072&&l<=173791};function Tl(l){for(const r of l)if(rl(r.charCodeAt(0)))return!0;return!1}function mp(l){for(const r of l)if(!gp(r.charCodeAt(0)))return!1;return!0}function gp(l){return!(Ir.Arabic(l)||Ir["Arabic Supplement"](l)||Ir["Arabic Extended-A"](l)||Ir["Arabic Presentation Forms-A"](l)||Ir["Arabic Presentation Forms-B"](l))}function rl(l){return!(l!==746&&l!==747&&(l<4352||!(Ir["Bopomofo Extended"](l)||Ir.Bopomofo(l)||Ir["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||Ir["CJK Compatibility Ideographs"](l)||Ir["CJK Compatibility"](l)||Ir["CJK Radicals Supplement"](l)||Ir["CJK Strokes"](l)||!(!Ir["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||Ir["CJK Unified Ideographs Extension A"](l)||Ir["CJK Unified Ideographs"](l)||Ir["Enclosed CJK Letters and Months"](l)||Ir["Hangul Compatibility Jamo"](l)||Ir["Hangul Jamo Extended-A"](l)||Ir["Hangul Jamo Extended-B"](l)||Ir["Hangul Jamo"](l)||Ir["Hangul Syllables"](l)||Ir.Hiragana(l)||Ir["Ideographic Description Characters"](l)||Ir.Kanbun(l)||Ir["Kangxi Radicals"](l)||Ir["Katakana Phonetic Extensions"](l)||Ir.Katakana(l)&&l!==12540||!(!Ir["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!Ir["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||Ir["Unified Canadian Aboriginal Syllabics"](l)||Ir["Unified Canadian Aboriginal Syllabics Extended"](l)||Ir["Vertical Forms"](l)||Ir["Yijing Hexagram Symbols"](l)||Ir["Yi Syllables"](l)||Ir["Yi Radicals"](l))))}function El(l){return!(rl(l)||function(r){return!!(Ir["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Ir["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Ir["Letterlike Symbols"](r)||Ir["Number Forms"](r)||Ir["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Ir["Control Pictures"](r)&&r!==9251||Ir["Optical Character Recognition"](r)||Ir["Enclosed Alphanumerics"](r)||Ir["Geometric Shapes"](r)||Ir["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Ir["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Ir["CJK Symbols and Punctuation"](r)||Ir.Katakana(r)||Ir["Private Use Area"](r)||Ir["CJK Compatibility Forms"](r)||Ir["Small Form Variants"](r)||Ir["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(l))}function Kc(l){return l>=1424&&l<=2303||Ir["Arabic Presentation Forms-A"](l)||Ir["Arabic Presentation Forms-B"](l)}function Gh(l,r){return!(!r&&Kc(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||Ir.Khmer(l))}function yp(l){for(const r of l)if(Kc(r.charCodeAt(0)))return!0;return!1}const Yu="deferred",Hs="loading",xp="loaded";let vp=null,zi="unavailable",nl=null;const Fd=function(l){l&&typeof l=="string"&&l.indexOf("NetworkError")>-1&&(zi="error"),vp&&vp(l)};function Vd(){Zc.fire(new eo("pluginStateChange",{pluginStatus:zi,pluginURL:nl}))}const Zc=new Rc,al=function(){return zi},ta=function(){if(zi!==Yu||!nl)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");zi=Hs,Vd(),nl&&Wi({url:nl},l=>{l?Fd(l):(zi=xp,Vd())})},na={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>zi===xp||na.applyArabicShaping!=null,isLoading:()=>zi===Hs,setState(l){zi=l.pluginStatus,nl=l.pluginURL},isParsed:()=>na.applyArabicShaping!=null&&na.processBidirectionalText!=null&&na.processStyledBidirectionalText!=null,getPluginURL:()=>nl};class Cn{constructor(r,s){this.zoom=r,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.transition=s.transition,this.pitch=s.pitch,this.brightness=s.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(r){return function(s,u){for(const g of s)if(!Gh(g.charCodeAt(0),u))return!1;return!0}(r,na.isLoaded())}}class sc{constructor(r,s,u,g){this.property=r,this.value=s,this.expression=function(f,x,C,M){if(hp(f))return new jd(f,x);if(fp(f)||Array.isArray(f)&&f.length>0){const $=ac(f,x,C,M);if($.result==="error")throw new Error($.value.map(T=>`${T.key}: ${T.message}`).join(", "));return $.value}{let $=f;return typeof f=="string"&&x.type==="color"&&($=In.parse(f)),{kind:"constant",configDependencies:new Set,evaluate:()=>$}}}(s===void 0?r.specification.default:s,r.specification,u,g)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,s,u){return this.property.possiblyEvaluate(this,r,s,u)}}class oc{constructor(r,s,u){this.property=r,this.value=new sc(r,void 0,s,u)}transitioned(r,s){return new Cl(this.property,this.value,s,Br({},r.transition,this.transition),r.now)}untransitioned(){return new Cl(this.property,this.value,null,{},0)}}class il{constructor(r,s,u){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues),this._scope=s,this._options=u,this.configDependencies=new Set}getValue(r){return Ia(this._values[r].value.value)}setValue(r,s){this._values.hasOwnProperty(r)||(this._values[r]=new oc(this._values[r].property,this._scope,this._options)),this._values[r].value=new sc(this._values[r].property,s===null?void 0:Ia(s),this._scope,this._options),this._values[r].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[r].value.expression.configDependencies]))}setTransitionOrValue(r,s){s&&(this._options=s);const u=this._properties.properties;if(r)for(const g in r){const f=r[g];if(qn(g,"-transition")){const x=g.slice(0,-11);u[x]&&this.setTransition(x,f)}else u.hasOwnProperty(g)&&this.setValue(g,f)}}getTransition(r){return Ia(this._values[r].transition)}setTransition(r,s){this._values.hasOwnProperty(r)||(this._values[r]=new oc(this._values[r].property)),this._values[r].transition=Ia(s)||void 0}serialize(){const r={};for(const s of Object.keys(this._values)){const u=this.getValue(s);u!==void 0&&(r[s]=u);const g=this.getTransition(s);g!==void 0&&(r[`${s}-transition`]=g)}return r}transitioned(r,s){const u=new Ud(this._properties);for(const g of Object.keys(this._values))u._values[g]=this._values[g].transitioned(r,s._values[g]);return u}untransitioned(){const r=new Ud(this._properties);for(const s of Object.keys(this._values))r._values[s]=this._values[s].untransitioned();return r}}class Cl{constructor(r,s,u,g,f){const x=g.delay||0,C=g.duration||0;f=f||0,this.property=r,this.value=s,this.begin=f+x,this.end=this.begin+C,r.specification.transition&&(g.delay||g.duration)&&(this.prior=u)}possiblyEvaluate(r,s,u){const g=r.now||0,f=this.value.possiblyEvaluate(r,s,u),x=this.prior;if(x){if(g>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(g<this.begin)return x.possiblyEvaluate(r,s,u);{const C=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,s,u),f,Bn(C))}}return f}}class Ud{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,s,u){const g=new Wa(this._properties);for(const f of Object.keys(this._values))g._values[f]=this._values[f].possiblyEvaluate(r,s,u);return g}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Gd{constructor(r,s,u){this._properties=r,this._values=Object.create(r.defaultPropertyValues),this._scope=s,this._options=u,this.configDependencies=new Set}getValue(r){return Ia(this._values[r].value)}setValue(r,s){this._values[r]=new sc(this._values[r].property,s===null?void 0:Ia(s),this._scope,this._options),this._values[r].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[r].expression.configDependencies]))}serialize(){const r={};for(const s of Object.keys(this._values)){const u=this.getValue(s);u!==void 0&&(r[s]=u)}return r}possiblyEvaluate(r,s,u){const g=new Wa(this._properties);for(const f of Object.keys(this._values))g._values[f]=this._values[f].possiblyEvaluate(r,s,u);return g}}class Hd{constructor(r,s,u){this.property=r,this.value=s,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,s,u,g){return this.property.evaluate(this.value,this.parameters,r,s,u,g)}}class Wa{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class tr{constructor(r){this.specification=r}possiblyEvaluate(r,s){return r.expression.evaluate(s)}interpolate(r,s,u){const g=zn[this.specification.type];return g?g(r,s,u):r}}class vr{constructor(r,s){this.specification=r,this.overrides=s}possiblyEvaluate(r,s,u,g){return new Hd(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(s,null,{},u,g)}:r.expression,s)}interpolate(r,s,u){if(r.value.kind!=="constant"||s.value.kind!=="constant")return r;if(r.value.value===void 0||s.value.value===void 0)return new Hd(this,{kind:"constant",value:void 0},r.parameters);const g=zn[this.specification.type];return g?new Hd(this,{kind:"constant",value:g(r.value.value,s.value.value,u)},r.parameters):r}evaluate(r,s,u,g,f,x){return r.kind==="constant"?r.value:r.evaluate(s,u,g,f,x)}}class lc{constructor(r){this.specification=r}possiblyEvaluate(r,s,u,g){return!!r.expression.evaluate(s,null,{},u,g)}interpolate(){return!1}}class Ma{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const s=new Cn(0,{});for(const u in r){const g=r[u];g.specification.overridable&&this.overridableProperties.push(u);const f=this.defaultPropertyValues[u]=new sc(g,void 0),x=this.defaultTransitionablePropertyValues[u]=new oc(g);this.defaultTransitioningPropertyValues[u]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=f.possiblyEvaluate(s)}}}Tr(vr,"DataDrivenProperty"),Tr(tr,"DataConstantProperty"),Tr(lc,"ColorRampProperty");var Tt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow","experimental":true},"rain":{"type":"rain","experimental":true},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor","experimental":true},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"metadata":{"type":"*"},"selectors":{"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"type":"string","required":true},"properties":{"type":"selectorProperty","required":false},"featureNamespace":{"type":"string","required":false}},"selectorProperty":{"experimental":true,"*":{"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-quality":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]},"experimental":true},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant"},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","experimental":true,"private":true,"expression":{},"property-type":"data-constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"line-cross-slope":{"type":"number","experimental":true,"expression":{},"property-type":"constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","experimental":true,"private":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.4,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","property-type":"data-constant","default":0.71,"minimum":0,"maximum":5,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.57,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","property-type":"data-constant","default":0.7,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}},"buildingFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"flat","property-type":"data-constant"},"fill-extrusion-base-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"terrain","property-type":"data-constant"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"experimental":true,"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function _p(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function qd(l){if(Array.isArray(l))return l.map(qd);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const r={};for(const s in l)r[s]=qd(l[s]);return r}return _p(l)}function Hh(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const r of l.slice(1))if(!Hh(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}function zs(l,r="",s=null,u="fill"){if(l==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Hh(l)||(l=Xc(l));const g=l;let f=!0;try{f=function(T){if(!Dl(T))return T;let k=qd(T);return bp(k),k=vi(k),k}(g)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(g,null,2)}
        `)}let x=null,C=null;if(u!=="background"&&u!=="sky"&&u!=="slot"){C=Tt[`filter_${u}`];const T=Nd(f,C,r,s);if(T.result==="error")throw new Error(T.value.map(k=>`${k.key}: ${k.message}`).join(", "));x=(k,I,P)=>T.value.evaluate(k,I,{},P)}let M=null,$=null;if(f!==g){const T=Nd(g,C,r,s);if(T.result==="error")throw new Error(T.value.map(k=>`${k.key}: ${k.message}`).join(", "));M=(k,I,P,R,j)=>T.value.evaluate(k,I,{},P,void 0,void 0,R,j),$=!Fc(T.value.expression)}return{filter:x,dynamicFilter:M||void 0,needGeometry:Ls(f),needFeature:!!$}}function vi(l){if(!Array.isArray(l))return l;const r=function(s){if(wp.has(s[0])){for(let u=1;u<s.length;u++)if(Dl(s[u]))return!0}return s}(l);return r===!0?r:r.map(s=>vi(s))}function bp(l){let r=!1;const s=[];if(l[0]==="case"){for(let u=1;u<l.length-1;u+=2)r=r||Dl(l[u]),s.push(l[u+1]);s.push(l[l.length-1])}else if(l[0]==="match"){r=r||Dl(l[1]);for(let u=2;u<l.length-1;u+=2)s.push(l[u+1]);s.push(l[l.length-1])}else if(l[0]==="step"){r=r||Dl(l[1]);for(let u=1;u<l.length-1;u+=2)s.push(l[u+1])}r&&(l.length=0,l.push("any",...s));for(let u=1;u<l.length;u++)bp(l[u])}function Dl(l){if(!Array.isArray(l))return!1;if((r=l[0])==="pitch"||r==="distance-from-center")return!0;var r;for(let s=1;s<l.length;s++)if(Dl(l[s]))return!0;return!1}const wp=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Hm(l,r){return l<r?-1:l>r?1:0}function Ls(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let r=1;r<l.length;r++)if(Ls(l[r]))return!0;return!1}function Xc(l){if(!l)return!0;const r=l[0];return l.length<=1?r!=="any":r==="=="?Wd(l[1],l[2],"=="):r==="!="?qh(Wd(l[1],l[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Wd(l[1],l[2],r):r==="any"?(s=l.slice(1),["any"].concat(s.map(Xc))):r==="all"?["all"].concat(l.slice(1).map(Xc)):r==="none"?["all"].concat(l.slice(1).map(Xc).map(qh)):r==="in"?Ju(l[1],l.slice(2)):r==="!in"?qh(Ju(l[1],l.slice(2))):r==="has"?qm(l[1]):r!=="!has"||qh(qm(l[1]));var s}function Wd(l,r,s){switch(l){case"$type":return[`filter-type-${s}`,r];case"$id":return[`filter-id-${s}`,r];default:return[`filter-${s}`,l,r]}}function Ju(l,r){if(r.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(s=>typeof s!=typeof r[0])?["filter-in-large",l,["literal",r.sort(Hm)]]:["filter-in-small",l,["literal",r]]}}function qm(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function qh(l){return["!",l]}const zo="";function Lo(l,r){return r?`${l}${zo}${r}`:l}const Yc="-transition",P0=new Set(["fill","line","background","hillshade","raster"]);class is extends Rc{constructor(r,s,u,g,f){if(super(),this.id=r.id,this.fqid=Lo(this.id,u),this.type=r.type,this.scope=u,this.lut=g,this.options=f,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,r.type!=="custom"){if(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type&&r.type!=="background"&&r.type!=="sky"&&r.type!=="slot"){this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter;const x=Nd(this.filter,Tt[`filter_${r.type}`]);x.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,...x.value.configDependencies]))}if(r.slot&&(this.slot=r.slot),s.layout&&(this._unevaluatedLayout=new Gd(s.layout,this.scope,f),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),s.paint){this._transitionablePaint=new il(s.paint,this.scope,f);for(const x in r.paint)this.setPaintProperty(x,r.paint[x]);for(const x in r.layout)this.setLayoutProperty(x,r.layout[x]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Wa(s.paint)}}}onAdd(r){}onRemove(r){}isDraped(r){return!this.is3D()&&P0.has(this.type)}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,s){if(this.type==="custom"&&r==="visibility")return void(this.visibility=s);const u=this._unevaluatedLayout;u._properties.properties[r]&&(u.setValue(r,s),this.configDependencies=new Set([...this.configDependencies,...u.configDependencies]),r==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(r){return qn(r,Yc)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,s){const u=this._transitionablePaint,g=u._properties.properties;if(qn(r,Yc)){const k=r.slice(0,-11);return g[k]&&u.setTransition(k,s||void 0),!1}if(!g[r])return!1;const f=u._values[r],x=f.value.isDataDriven(),C=f.value;u.setValue(r,s),this.configDependencies=new Set([...this.configDependencies,...u.configDependencies]),this._handleSpecialPaintPropertyUpdate(r);const M=u._values[r].value,$=M.isDataDriven(),T=qn(r,"pattern")||r==="line-dasharray";return $||x||T||this._handleOverridablePaintPropertyUpdate(r,C,M)}_handleSpecialPaintPropertyUpdate(r){}getProgramIds(){return null}getDefaultProgramParams(r,s,u){return null}_handleOverridablePaintPropertyUpdate(r,s,u){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,s){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,s)}serialize(){return Da({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(r,s)=>!(r===void 0||s==="layout"&&!Object.keys(r).length||s==="paint"&&!Object.keys(r).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const r in this.paint._values){const s=this.paint.get(r);if(s instanceof Hd&&xi(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}compileFilter(r){this._filterCompiled||(this._featureFilter=zs(this.filter,this.scope,r),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(r){this._stats&&(r.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(r){}queryIntersectsFeature(r,s,u,g,f,x,C,M,$){}}const M0={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Wh{constructor(r,s){this._structArray=r,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class xa{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,s){return r._trim(),s&&(r.isTransferred=!0,s.add(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const s=Object.create(this.prototype);return s.arrayBuffer=r.arrayBuffer,s.length=r.length,s.capacity=r.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...r){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...r){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Fn(l,r=1){let s=0,u=0;return{members:l.map(g=>{const f=M0[g.type].BYTES_PER_ELEMENT,x=s=Kh(s,Math.max(r,f)),C=g.components||1;return u=Math.max(u,f),s+=f*C,{name:g.name,type:g.type,components:C,offset:x}}),size:Kh(s,Math.max(u,r)),alignment:r}}function Kh(l,r){return Math.ceil(l/r)*r}class no extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s){const u=this.length;return this.resize(u+1),this.emplace(u,r,s)}emplace(r,s,u){const g=2*r;return this.int16[g+0]=s,this.int16[g+1]=u,r}}no.prototype.bytesPerElement=4,Tr(no,"StructArrayLayout2i4");class Kd extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u)}emplace(r,s,u,g){const f=3*r;return this.int16[f+0]=s,this.int16[f+1]=u,this.int16[f+2]=g,r}}Kd.prototype.bytesPerElement=6,Tr(Kd,"StructArrayLayout3i6");class cc extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,g){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,u,g)}emplace(r,s,u,g,f){const x=4*r;return this.int16[x+0]=s,this.int16[x+1]=u,this.int16[x+2]=g,this.int16[x+3]=f,r}}cc.prototype.bytesPerElement=8,Tr(cc,"StructArrayLayout4i8");class Sp extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,u,g,f)}emplace(r,s,u,g,f,x){const C=5*r;return this.int16[C+0]=s,this.int16[C+1]=u,this.int16[C+2]=g,this.int16[C+3]=f,this.int16[C+4]=x,r}}Sp.prototype.bytesPerElement=10,Tr(Sp,"StructArrayLayout5i10");class ao extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C){const M=this.length;return this.resize(M+1),this.emplace(M,r,s,u,g,f,x,C)}emplace(r,s,u,g,f,x,C,M){const $=6*r,T=12*r,k=3*r;return this.int16[$+0]=s,this.int16[$+1]=u,this.uint8[T+4]=g,this.uint8[T+5]=f,this.uint8[T+6]=x,this.uint8[T+7]=C,this.float32[k+2]=M,r}}ao.prototype.bytesPerElement=12,Tr(ao,"StructArrayLayout2i4ub1f12");class uc extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,u,g)}emplace(r,s,u,g,f){const x=4*r;return this.float32[x+0]=s,this.float32[x+1]=u,this.float32[x+2]=g,this.float32[x+3]=f,r}}uc.prototype.bytesPerElement=16,Tr(uc,"StructArrayLayout4f16");class dc extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u)}emplace(r,s,u,g){const f=3*r;return this.float32[f+0]=s,this.float32[f+1]=u,this.float32[f+2]=g,r}}dc.prototype.bytesPerElement=12,Tr(dc,"StructArrayLayout3f12");class hc extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,u,g,f)}emplace(r,s,u,g,f,x){const C=6*r,M=3*r;return this.uint16[C+0]=s,this.uint16[C+1]=u,this.uint16[C+2]=g,this.uint16[C+3]=f,this.float32[M+2]=x,r}}hc.prototype.bytesPerElement=12,Tr(hc,"StructArrayLayout4ui1f12");class fc extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,g){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,u,g)}emplace(r,s,u,g,f){const x=4*r;return this.uint16[x+0]=s,this.uint16[x+1]=u,this.uint16[x+2]=g,this.uint16[x+3]=f,r}}fc.prototype.bytesPerElement=8,Tr(fc,"StructArrayLayout4ui8");class Qu extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x){const C=this.length;return this.resize(C+1),this.emplace(C,r,s,u,g,f,x)}emplace(r,s,u,g,f,x,C){const M=6*r;return this.int16[M+0]=s,this.int16[M+1]=u,this.int16[M+2]=g,this.int16[M+3]=f,this.int16[M+4]=x,this.int16[M+5]=C,r}}Qu.prototype.bytesPerElement=12,Tr(Qu,"StructArrayLayout6i12");class Tp extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C,M,$,T,k,I){const P=this.length;return this.resize(P+1),this.emplace(P,r,s,u,g,f,x,C,M,$,T,k,I)}emplace(r,s,u,g,f,x,C,M,$,T,k,I,P){const R=12*r;return this.int16[R+0]=s,this.int16[R+1]=u,this.int16[R+2]=g,this.int16[R+3]=f,this.uint16[R+4]=x,this.uint16[R+5]=C,this.uint16[R+6]=M,this.uint16[R+7]=$,this.int16[R+8]=T,this.int16[R+9]=k,this.int16[R+10]=I,this.int16[R+11]=P,r}}Tp.prototype.bytesPerElement=24,Tr(Tp,"StructArrayLayout4i4ui4i24");class Zd extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x){const C=this.length;return this.resize(C+1),this.emplace(C,r,s,u,g,f,x)}emplace(r,s,u,g,f,x,C){const M=10*r,$=5*r;return this.int16[M+0]=s,this.int16[M+1]=u,this.int16[M+2]=g,this.float32[$+2]=f,this.float32[$+3]=x,this.float32[$+4]=C,r}}Zd.prototype.bytesPerElement=20,Tr(Zd,"StructArrayLayout3i3f20");class ed extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint32[1*r+0]=s,r}}ed.prototype.bytesPerElement=4,Tr(ed,"StructArrayLayout1ul4");class pc extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s){const u=this.length;return this.resize(u+1),this.emplace(u,r,s)}emplace(r,s,u){const g=2*r;return this.uint16[g+0]=s,this.uint16[g+1]=u,r}}pc.prototype.bytesPerElement=4,Tr(pc,"StructArrayLayout2ui4");class Ep extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C,M,$,T,k,I,P){const R=this.length;return this.resize(R+1),this.emplace(R,r,s,u,g,f,x,C,M,$,T,k,I,P)}emplace(r,s,u,g,f,x,C,M,$,T,k,I,P,R){const j=20*r,W=10*r;return this.int16[j+0]=s,this.int16[j+1]=u,this.int16[j+2]=g,this.int16[j+3]=f,this.int16[j+4]=x,this.float32[W+3]=C,this.float32[W+4]=M,this.float32[W+5]=$,this.float32[W+6]=T,this.int16[j+14]=k,this.uint32[W+8]=I,this.uint16[j+18]=P,this.uint16[j+19]=R,r}}Ep.prototype.bytesPerElement=40,Tr(Ep,"StructArrayLayout5i4f1i1ul2ui40");class Zh extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C){const M=this.length;return this.resize(M+1),this.emplace(M,r,s,u,g,f,x,C)}emplace(r,s,u,g,f,x,C,M){const $=8*r;return this.int16[$+0]=s,this.int16[$+1]=u,this.int16[$+2]=g,this.int16[$+4]=f,this.int16[$+5]=x,this.int16[$+6]=C,this.int16[$+7]=M,r}}Zh.prototype.bytesPerElement=16,Tr(Zh,"StructArrayLayout3i2i2i16");class Xh extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,u,g,f)}emplace(r,s,u,g,f,x){const C=4*r,M=8*r;return this.float32[C+0]=s,this.float32[C+1]=u,this.float32[C+2]=g,this.int16[M+6]=f,this.int16[M+7]=x,r}}Xh.prototype.bytesPerElement=16,Tr(Xh,"StructArrayLayout2f1f2i16");class Cp extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x){const C=this.length;return this.resize(C+1),this.emplace(C,r,s,u,g,f,x)}emplace(r,s,u,g,f,x,C){const M=20*r,$=5*r;return this.uint8[M+0]=s,this.uint8[M+1]=u,this.float32[$+1]=g,this.float32[$+2]=f,this.float32[$+3]=x,this.float32[$+4]=C,r}}Cp.prototype.bytesPerElement=20,Tr(Cp,"StructArrayLayout2ub4f20");class Fi extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u){const g=this.length;return this.resize(g+1),this.emplace(g,r,s,u)}emplace(r,s,u,g){const f=3*r;return this.uint16[f+0]=s,this.uint16[f+1]=u,this.uint16[f+2]=g,r}}Fi.prototype.bytesPerElement=6,Tr(Fi,"StructArrayLayout3ui6");class Yh extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C,M,$,T,k,I,P,R,j,W,K,ae,ie,J,le){const fe=this.length;return this.resize(fe+1),this.emplace(fe,r,s,u,g,f,x,C,M,$,T,k,I,P,R,j,W,K,ae,ie,J,le)}emplace(r,s,u,g,f,x,C,M,$,T,k,I,P,R,j,W,K,ae,ie,J,le,fe){const _e=30*r,je=15*r,Ne=60*r;return this.int16[_e+0]=s,this.int16[_e+1]=u,this.int16[_e+2]=g,this.float32[je+2]=f,this.float32[je+3]=x,this.uint16[_e+8]=C,this.uint16[_e+9]=M,this.uint32[je+5]=$,this.uint32[je+6]=T,this.uint32[je+7]=k,this.uint16[_e+16]=I,this.uint16[_e+17]=P,this.uint16[_e+18]=R,this.float32[je+10]=j,this.float32[je+11]=W,this.uint8[Ne+48]=K,this.uint8[Ne+49]=ae,this.uint8[Ne+50]=ie,this.uint32[je+13]=J,this.int16[_e+28]=le,this.uint8[Ne+58]=fe,r}}Yh.prototype.bytesPerElement=60,Tr(Yh,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Jh extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C,M,$,T,k,I,P,R,j,W,K,ae,ie,J,le,fe,_e,je,Ne,Be,Qe,Ue,rt,st,it,ct){const gt=this.length;return this.resize(gt+1),this.emplace(gt,r,s,u,g,f,x,C,M,$,T,k,I,P,R,j,W,K,ae,ie,J,le,fe,_e,je,Ne,Be,Qe,Ue,rt,st,it,ct)}emplace(r,s,u,g,f,x,C,M,$,T,k,I,P,R,j,W,K,ae,ie,J,le,fe,_e,je,Ne,Be,Qe,Ue,rt,st,it,ct,gt){const vt=20*r,ht=40*r,Rt=80*r;return this.float32[vt+0]=s,this.float32[vt+1]=u,this.int16[ht+4]=g,this.int16[ht+5]=f,this.int16[ht+6]=x,this.int16[ht+7]=C,this.int16[ht+8]=M,this.int16[ht+9]=$,this.int16[ht+10]=T,this.int16[ht+11]=k,this.int16[ht+12]=I,this.uint16[ht+13]=P,this.uint16[ht+14]=R,this.uint16[ht+15]=j,this.uint16[ht+16]=W,this.uint16[ht+17]=K,this.uint16[ht+18]=ae,this.uint16[ht+19]=ie,this.uint16[ht+20]=J,this.uint16[ht+21]=le,this.uint16[ht+22]=fe,this.uint16[ht+23]=_e,this.uint16[ht+24]=je,this.uint16[ht+25]=Ne,this.uint16[ht+26]=Be,this.uint16[ht+27]=Qe,this.uint32[vt+14]=Ue,this.float32[vt+15]=rt,this.float32[vt+16]=st,this.float32[vt+17]=it,this.float32[vt+18]=ct,this.uint8[Rt+76]=gt,r}}Jh.prototype.bytesPerElement=80,Tr(Jh,"StructArrayLayout2f9i15ui1ul4f1ub80");class td extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.float32[1*r+0]=s,r}}td.prototype.bytesPerElement=4,Tr(td,"StructArrayLayout1f4");class Ts extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f){const x=this.length;return this.resize(x+1),this.emplace(x,r,s,u,g,f)}emplace(r,s,u,g,f,x){const C=5*r;return this.float32[C+0]=s,this.float32[C+1]=u,this.float32[C+2]=g,this.float32[C+3]=f,this.float32[C+4]=x,r}}Ts.prototype.bytesPerElement=20,Tr(Ts,"StructArrayLayout5f20");class Qh extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C){const M=this.length;return this.resize(M+1),this.emplace(M,r,s,u,g,f,x,C)}emplace(r,s,u,g,f,x,C,M){const $=7*r;return this.float32[$+0]=s,this.float32[$+1]=u,this.float32[$+2]=g,this.float32[$+3]=f,this.float32[$+4]=x,this.float32[$+5]=C,this.float32[$+6]=M,r}}Qh.prototype.bytesPerElement=28,Tr(Qh,"StructArrayLayout7f28");class Dp extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C,M,$,T,k){const I=this.length;return this.resize(I+1),this.emplace(I,r,s,u,g,f,x,C,M,$,T,k)}emplace(r,s,u,g,f,x,C,M,$,T,k,I){const P=11*r;return this.float32[P+0]=s,this.float32[P+1]=u,this.float32[P+2]=g,this.float32[P+3]=f,this.float32[P+4]=x,this.float32[P+5]=C,this.float32[P+6]=M,this.float32[P+7]=$,this.float32[P+8]=T,this.float32[P+9]=k,this.float32[P+10]=I,r}}Dp.prototype.bytesPerElement=44,Tr(Dp,"StructArrayLayout11f44");class Wm extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C,M,$){const T=this.length;return this.resize(T+1),this.emplace(T,r,s,u,g,f,x,C,M,$)}emplace(r,s,u,g,f,x,C,M,$,T){const k=9*r;return this.float32[k+0]=s,this.float32[k+1]=u,this.float32[k+2]=g,this.float32[k+3]=f,this.float32[k+4]=x,this.float32[k+5]=C,this.float32[k+6]=M,this.float32[k+7]=$,this.float32[k+8]=T,r}}Wm.prototype.bytesPerElement=36,Tr(Wm,"StructArrayLayout9f36");class mc extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s){const u=this.length;return this.resize(u+1),this.emplace(u,r,s)}emplace(r,s,u){const g=2*r;return this.float32[g+0]=s,this.float32[g+1]=u,r}}mc.prototype.bytesPerElement=8,Tr(mc,"StructArrayLayout2f8");class Xd extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,s,u,g){const f=this.length;return this.resize(f+1),this.emplace(f,r,s,u,g)}emplace(r,s,u,g,f){const x=6*r;return this.uint32[3*r+0]=s,this.uint16[x+2]=u,this.uint16[x+3]=g,this.uint16[x+4]=f,r}}Xd.prototype.bytesPerElement=12,Tr(Xd,"StructArrayLayout1ul3ui12");class ef extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint16[1*r+0]=s,r}}ef.prototype.bytesPerElement=2,Tr(ef,"StructArrayLayout1ui2");class tf extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C,M,$,T,k,I,P,R,j,W){const K=this.length;return this.resize(K+1),this.emplace(K,r,s,u,g,f,x,C,M,$,T,k,I,P,R,j,W)}emplace(r,s,u,g,f,x,C,M,$,T,k,I,P,R,j,W,K){const ae=16*r;return this.float32[ae+0]=s,this.float32[ae+1]=u,this.float32[ae+2]=g,this.float32[ae+3]=f,this.float32[ae+4]=x,this.float32[ae+5]=C,this.float32[ae+6]=M,this.float32[ae+7]=$,this.float32[ae+8]=T,this.float32[ae+9]=k,this.float32[ae+10]=I,this.float32[ae+11]=P,this.float32[ae+12]=R,this.float32[ae+13]=j,this.float32[ae+14]=W,this.float32[ae+15]=K,r}}tf.prototype.bytesPerElement=64,Tr(tf,"StructArrayLayout16f64");class Yd extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,s,u,g,f,x,C){const M=this.length;return this.resize(M+1),this.emplace(M,r,s,u,g,f,x,C)}emplace(r,s,u,g,f,x,C,M){const $=10*r,T=5*r;return this.uint16[$+0]=s,this.uint16[$+1]=u,this.uint16[$+2]=g,this.uint16[$+3]=f,this.float32[T+2]=x,this.float32[T+3]=C,this.float32[T+4]=M,r}}Yd.prototype.bytesPerElement=20,Tr(Yd,"StructArrayLayout4ui3f20");class Pp extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.int16[1*r+0]=s,r}}Pp.prototype.bytesPerElement=2,Tr(Pp,"StructArrayLayout1i2");class Mp extends xa{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(r){const s=this.length;return this.resize(s+1),this.emplace(s,r)}emplace(r,s){return this.uint8[1*r+0]=s,r}}Mp.prototype.bytesPerElement=1,Tr(Mp,"StructArrayLayout1ub1");class rf extends Wh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}rf.prototype.size=40;class Km extends Ep{get(r){return new rf(this,r)}}Tr(Km,"CollisionBoxArray");class Jd extends Wh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(r){this._structArray.uint8[this._pos1+49]=r}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(r){this._structArray.uint8[this._pos1+50]=r}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(r){this._structArray.uint32[this._pos4+13]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(r){this._structArray.uint8[this._pos1+58]=r}}Jd.prototype.size=60;class Ap extends Yh{get(r){return new Jd(this,r)}}Tr(Ap,"PlacedSymbolArray");class nf extends Wh{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(r){this._structArray.uint32[this._pos4+14]=r}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(r){this._structArray.float32[this._pos4+18]=r}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}nf.prototype.size=80;class Zm extends Jh{get(r){return new nf(this,r)}}Tr(Zm,"SymbolInstanceArray");class Qd extends td{getoffsetX(r){return this.float32[1*r+0]}}Tr(Qd,"GlyphOffsetArray");class Jc extends no{getx(r){return this.int16[2*r+0]}gety(r){return this.int16[2*r+1]}}Tr(Jc,"SymbolLineVertexArray");class $s extends Wh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}$s.prototype.size=12;class eh extends Xd{get(r){return new $s(this,r)}}Tr(eh,"FeatureIndexArray");class A0 extends pc{geta_centroid_pos0(r){return this.uint16[2*r+0]}geta_centroid_pos1(r){return this.uint16[2*r+1]}}Tr(A0,"FillExtrusionCentroidArray");class rd extends Wh{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}rd.prototype.size=6;class th extends Kd{get(r){return new rd(this,r)}}Tr(th,"FillExtrusionWallArray");const kp=Fn([{name:"a_pos",components:2,type:"Int16"}],4),nd=Fn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Aa{constructor(r=[]){this.segments=r}_prepareSegment(r,s,u,g){let f=this.segments[this.segments.length-1];return r>Aa.MAX_VERTEX_ARRAY_LENGTH&&Wr(`Max vertices per segment is ${Aa.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!f||f.vertexLength+r>Aa.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==g)&&(f={vertexOffset:s,primitiveOffset:u,vertexLength:0,primitiveLength:0},g!==void 0&&(f.sortKey=g),this.segments.push(f)),f}prepareSegment(r,s,u,g){return this._prepareSegment(r,s.length,u.length,g)}get(){return this.segments}destroy(){for(const r of this.segments)for(const s in r.vaos)r.vaos[s].destroy()}static simpleSegment(r,s,u,g){return new Aa([{vertexOffset:r,primitiveOffset:s,vertexLength:u,primitiveLength:g,vaos:{},sortKey:0}])}}function af(l,r){return 256*(l=fr(Math.floor(l),0,255))+fr(Math.floor(r),0,255)}Aa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Tr(Aa,"SegmentVector");const k0=Fn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),rh=Fn([{name:"a_dash",components:4,type:"Uint16"}]);class Qc{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(r,s,u,g){this.ids.push(io(r)),this.positions.push(s,u,g)}eachPosition(r,s){const u=io(r);let g=0,f=this.ids.length-1;for(;g<f;){const x=g+f>>1;this.ids[x]>=u?f=x:g=x+1}for(;this.ids[g]===u;)s(this.positions[3*g],this.positions[3*g+1],this.positions[3*g+2]),g++}static serialize(r,s){const u=new Float64Array(r.ids),g=new Uint32Array(r.positions);return so(u,g,0,u.length-1),s&&(s.add(u.buffer),s.add(g.buffer)),{ids:u,positions:g}}static deserialize(r){const s=new Qc;let u;s.ids=r.ids,s.positions=r.positions;for(const g of s.ids)g!==u&&s.uniqueIds.push(g),u=g;return s.indexed=!0,s}}function io(l){const r=+l;return!isNaN(r)&&Number.MIN_SAFE_INTEGER<=r&&r<=Number.MAX_SAFE_INTEGER?r:bd(String(l))}function so(l,r,s,u){for(;s<u;){const g=l[s+u>>1];let f=s-1,x=u+1;for(;;){do f++;while(l[f]<g);do x--;while(l[x]>g);if(f>=x)break;$o(l,f,x),$o(r,3*f,3*x),$o(r,3*f+1,3*x+1),$o(r,3*f+2,3*x+2)}x-s<u-x?(so(l,r,s,x),s=x+1):(so(l,r,x+1,u),u=x)}}function $o(l,r,s){const u=l[r];l[r]=l[s],l[s]=u}Tr(Qc,"FeaturePositionMap");class Pl{constructor(r){this.gl=r.gl,this.initialized=!1}fetchUniformLocation(r,s){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(r,s),this.initialized=!0),!!this.location}set(r,s,u){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class oo extends Pl{constructor(r){super(r),this.current=0}set(r,s,u){this.fetchUniformLocation(r,s)&&this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}}class fa extends Pl{constructor(r){super(r),this.current=0}set(r,s,u){this.fetchUniformLocation(r,s)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class ka extends Pl{constructor(r){super(r),this.current=[0,0]}set(r,s,u){this.fetchUniformLocation(r,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1])))}}class nh extends Pl{constructor(r){super(r),this.current=[0,0,0]}set(r,s,u){this.fetchUniformLocation(r,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2])))}}class ad extends Pl{constructor(r){super(r),this.current=[0,0,0,0]}set(r,s,u){this.fetchUniformLocation(r,s)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class Rp extends Pl{constructor(r){super(r),this.current=In.transparent.toRenderColor(null)}set(r,s,u){this.fetchUniformLocation(r,s)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const Ip=new Float32Array(16);class ah extends Pl{constructor(r){super(r),this.current=Ip}set(r,s,u){if(this.fetchUniformLocation(r,s)){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let g=1;g<16;g++)if(u[g]!==this.current[g]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}}}const id=new Float32Array(9),zp=new Float32Array(4);class Lp extends Pl{constructor(r){super(r),this.current=zp}set(r,s,u){if(this.fetchUniformLocation(r,s)){for(let g=0;g<4;g++)if(u[g]!==this.current[g]){this.current=u,this.gl.uniformMatrix2fv(this.location,!1,u);break}}}}function sf(l){return[af(255*l.r,255*l.g),af(255*l.b,255*l.a)]}class sd{constructor(r,s,u,g){this.value=r,this.uniformNames=s.map(f=>`u_${f}`),this.type=u,this.context=g}setUniform(r,s,u,g,f){const x=g.constantOr(this.value);s.set(r,f,x instanceof In?x.toRenderColor(this.ignoreLut?null:this.context.lut):x)}getBinding(r,s){return this.type==="color"?new Rp(r):new fa(r)}}class gc{constructor(r,s){this.uniformNames=s.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(r){this.pixelRatio=r.pixelRatio||1,this.pattern=r.tl.concat(r.br)}setUniform(r,s,u,g,f){const x=f==="u_pattern"||f==="u_dash"?this.pattern:f==="u_pixel_ratio"?this.pixelRatio:null;x&&s.set(r,f,x)}getBinding(r,s){return s==="u_pattern"||s==="u_dash"?new ad(r):new fa(r)}}class Ml{constructor(r,s,u,g){this.expression=r,this.type=u,this.maxValue=0,this.paintVertexAttributes=s.map(f=>({name:`a_${f}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(r,s,u,g,f,x,C){const M=this.paintVertexArray.length,$=this.expression.evaluate(new Cn(0,{brightness:x}),s,{},f,g,C);this.paintVertexArray.resize(r),this._setPaintValue(M,r,$,this.context)}updatePaintArray(r,s,u,g,f,x,C){const M=this.expression.evaluate({zoom:0,brightness:C},u,g,void 0,f);this._setPaintValue(r,s,M,this.context)}_setPaintValue(r,s,u,g){if(this.type==="color"){const f=sf(u.toRenderColor(this.ignoreLut?null:g.lut));for(let x=r;x<s;x++)this.paintVertexArray.emplace(x,f[0],f[1])}else{for(let f=r;f<s;f++)this.paintVertexArray.emplace(f,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class lo{constructor(r,s,u,g,f,x){this.expression=r,this.uniformNames=s.map(C=>`u_${C}_t`),this.type=u,this.useIntegerZoom=g,this.context=f,this.maxValue=0,this.paintVertexAttributes=s.map(C=>({name:`a_${C}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(r,s,u,g,f,x,C){const M=this.expression.evaluate(new Cn(this.context.zoom,{brightness:x}),s,{},f,g,C),$=this.expression.evaluate(new Cn(this.context.zoom+1,{brightness:x}),s,{},f,g,C),T=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(T,r,M,$,this.context)}updatePaintArray(r,s,u,g,f,x,C){const M=this.expression.evaluate({zoom:this.context.zoom,brightness:C},u,g,void 0,f),$=this.expression.evaluate({zoom:this.context.zoom+1,brightness:C},u,g,void 0,f);this._setPaintValue(r,s,M,$,this.context)}_setPaintValue(r,s,u,g,f){if(this.type==="color"){const x=sf(u.toRenderColor(this.ignoreLut?null:f.lut)),C=sf(u.toRenderColor(this.ignoreLut?null:f.lut));for(let M=r;M<s;M++)this.paintVertexArray.emplace(M,x[0],x[1],C[0],C[1])}else{for(let x=r;x<s;x++)this.paintVertexArray.emplace(x,u,g);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(g))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,s,u,g,f){const x=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,C=fr(this.expression.interpolationFactor(x,this.context.zoom,this.context.zoom+1),0,1);s.set(r,f,C)}getBinding(r,s){return new fa(r)}}class yc{constructor(r,s,u,g,f){this.expression=r,this.layerId=f,this.paintVertexAttributes=(u==="array"?rh:k0).members;for(let x=0;x<s.length;++x);this.paintVertexArray=new g}populatePaintArray(r,s,u,g){const f=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValues(f,r,s.patterns&&s.patterns[this.layerId],u)}updatePaintArray(r,s,u,g,f,x,C){this._setPaintValues(r,s,u.patterns&&u.patterns[this.layerId],x)}_setPaintValues(r,s,u,g){if(!g||!u)return;const f=g[u];if(!f)return;const{tl:x,br:C,pixelRatio:M}=f;for(let $=r;$<s;$++)this.paintVertexArray.emplace($,x[0],x[1],C[0],C[1],M)}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class eu{constructor(r,s,u=()=>!0){this.binders={},this._buffers=[],this.context=s;const g=[];for(const f in r.paint._values){const x=r.paint.get(f),C=r.paint.get(`${f}-use-theme`);if(f.endsWith("-use-theme")||!u(f)||!(x instanceof Hd&&xi(x.property.specification)))continue;const M=_i(f,r.type),$=x.value,T=x.property.specification.type,k=!!x.property.useIntegerZoom,I=f==="line-dasharray"||f.endsWith("pattern"),P=f==="line-dasharray"&&r.layout.get("line-cap").value.kind!=="constant";if($.kind!=="constant"||P)if($.kind==="source"||P||I){const R=ih(f,T,"source");this.binders[f]=I?new yc($,M,T,R,r.id):new Ml($,M,T,R),g.push(`/a_${f}`)}else{const R=ih(f,T,"composite");this.binders[f]=new lo($,M,T,k,s,R),g.push(`/z_${f}`)}else this.binders[f]=I?new gc($.value,M):new sd($.value,M,T,s),g.push(`/u_${f}`);C&&(this.binders[f].ignoreLut=C.constantOr("default")==="none",this.binders[f].checkUseTheme=!0)}this.cacheKey=g.sort().join("")}getMaxValue(r){const s=this.binders[r];return s instanceof Ml||s instanceof lo?s.maxValue:0}populatePaintArrays(r,s,u,g,f,x,C){for(const M in this.binders){const $=this.binders[M];$.context=this.context,($ instanceof Ml||$ instanceof lo||$ instanceof yc)&&$.populatePaintArray(r,s,u,g,f,x,C)}}setConstantPatternPositions(r){for(const s in this.binders){const u=this.binders[s];u instanceof gc&&u.setConstantPatternPositions(r)}}updatePaintArrays(r,s,u,g,f,x,C,M,$){let T=!1;const k=Object.keys(r),I=k.length!==0&&!M,P=I?k:s.uniqueIds;this.context.lut=f.lut;for(const R in this.binders){const j=this.binders[R];if(j.context=this.context,(j instanceof Ml||j instanceof lo||j instanceof yc)&&(j.expression.isStateDependent===!0||j.expression.isLightConstant===!1)){const W=f.paint.get(R);j.expression=W.value;for(const K of P){const ae=r[K.toString()];s.eachPosition(K,(ie,J,le)=>{const fe=g.feature(ie);j.updatePaintArray(J,le,fe,ae,x,C,$)})}if(!I)for(const K of u.uniqueIds){const ae=r[K.toString()];u.eachPosition(K,(ie,J,le)=>{const fe=g.feature(ie);j.updatePaintArray(J,le,fe,ae,x,C,$)})}T=!0}}return T}defines(){const r=[];for(const s in this.binders){const u=this.binders[s];(u instanceof sd||u instanceof gc)&&r.push(...u.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return r}getBinderAttributes(){const r=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof Ml||u instanceof lo||u instanceof yc)for(let g=0;g<u.paintVertexAttributes.length;g++)r.push(u.paintVertexAttributes[g].name)}return r}getBinderUniforms(){const r=[];for(const s in this.binders){const u=this.binders[s];if(u instanceof sd||u instanceof gc||u instanceof lo)for(const g of u.uniformNames)r.push(g)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r){const s=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof sd||g instanceof gc||g instanceof lo)for(const f of g.uniformNames)s.push({name:f,property:u,binding:g.getBinding(r,f)})}return s}setUniforms(r,s,u,g,f){for(const{name:x,property:C,binding:M}of u){if(this.binders[C].checkUseTheme&&this.binders[C]instanceof sd){const $=g.get(`${C}-use-theme`);$.isConstant()&&(this.binders[C].ignoreLut=$.constantOr("default")==="none")}this.binders[C].setUniform(r,M,f,g.get(C),x)}}updatePaintBuffers(){this._buffers=[];for(const r in this.binders){const s=this.binders[r];(s instanceof Ml||s instanceof lo||s instanceof yc)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(r){for(const s in this.binders){const u=this.binders[s];(u instanceof Ml||u instanceof lo||u instanceof yc)&&u.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const s=this.binders[r];(s instanceof Ml||s instanceof lo||s instanceof yc)&&s.destroy()}}}class tu{constructor(r,s,u=()=>!0){this.programConfigurations={};for(const g of r)this.programConfigurations[g.id]=new eu(g,s,u);this.needsUpload=!1,this._featureMap=new Qc,this._featureMapWithoutIds=new Qc,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(r,s,u,g,f,x,C,M){for(const $ in this.programConfigurations)this.programConfigurations[$].populatePaintArrays(r,s,g,f,x,C,M);s.id!==void 0?this._featureMap.add(s.id,u,this._bufferOffset,r):(this._featureMapWithoutIds.add(this._idlessCounter,u,this._bufferOffset,r),this._idlessCounter+=1),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,s,u,g,f,x,C){for(const M of u)this.needsUpload=this.programConfigurations[M.id].updatePaintArrays(r,this._featureMap,this._featureMapWithoutIds,s,M,g,f,x,C||0)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}const R0={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function _i(l,r){return R0[l]||[l.replace(`${r}-`,"").replace(/-/g,"_")]}const ss={"line-pattern":{source:hc,composite:hc},"fill-pattern":{source:hc,composite:hc},"fill-extrusion-pattern":{source:hc,composite:hc},"line-dasharray":{source:fc,composite:fc}},I0={color:{source:mc,composite:uc},number:{source:td,composite:mc}};function ih(l,r,s){const u=ss[l];return u&&u[s]||I0[r][s]}Tr(sd,"ConstantBinder"),Tr(gc,"PatternConstantBinder"),Tr(Ml,"SourceExpressionBinder"),Tr(yc,"PatternCompositeBinder"),Tr(lo,"CompositeExpressionBinder"),Tr(eu,"ProgramConfiguration",{omit:["_buffers"]}),Tr(tu,"ProgramConfigurationSet");const os=lr/Math.PI/2,of=5,Xm=6,lf=16383,xc=64,cf=[xc,32,16],co=-os,uo=os;function ru(l,r,s,u=os){return s=mr(s),[l*Math.sin(s)*u,-r*u,l*Math.cos(s)*u]}function Al(l,r,s){return ru(Math.cos(mr(l)),Math.sin(mr(l)),r,s)}const nu=63710088e-1,$p=2*Math.PI*nu;class $n{constructor(r,s){if(isNaN(r)||isNaN(s))throw new Error(`Invalid LngLat object: (${r}, ${s})`);if(this.lng=+r,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new $n(kr(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const s=Math.PI/180,u=this.lat*s,g=r.lat*s,f=Math.sin(u)*Math.sin(g)+Math.cos(u)*Math.cos(g)*Math.cos((r.lng-this.lng)*s);return nu*Math.acos(Math.min(f,1))}toBounds(r=0){const s=360*r/40075017,u=s/Math.cos(Math.PI/180*this.lat);return new sl({lng:this.lng-u,lat:this.lat-s},{lng:this.lng+u,lat:this.lat+s})}toEcef(r){return Al(this.lat,this.lng,os+r*os/nu)}static convert(r){if(r instanceof $n)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new $n(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new $n(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class sl{constructor(r,s){if(r)if(s)this.setSouthWest(r).setNorthEast(s);else if(r.length===4){const u=r;this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]])}else{const u=r;this.setSouthWest(u[0]).setNorthEast(u[1])}}setNorthEast(r){return this._ne=r instanceof $n?new $n(r.lng,r.lat):$n.convert(r),this}setSouthWest(r){return this._sw=r instanceof $n?new $n(r.lng,r.lat):$n.convert(r),this}extend(r){const s=this._sw,u=this._ne;let g,f;if(r instanceof $n)g=r,f=r;else{if(!(r instanceof sl))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(sl.convert(r)):this.extend($n.convert(r)):typeof r=="object"&&r!==null&&r.hasOwnProperty("lat")&&(r.hasOwnProperty("lon")||r.hasOwnProperty("lng"))?this.extend($n.convert(r)):this;if(g=r._sw,f=r._ne,!g||!f)return this}return s||u?(s.lng=Math.min(g.lng,s.lng),s.lat=Math.min(g.lat,s.lat),u.lng=Math.max(f.lng,u.lng),u.lat=Math.max(f.lat,u.lat)):(this._sw=new $n(g.lng,g.lat),this._ne=new $n(f.lng,f.lat)),this}getCenter(){return new $n((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new $n(this.getWest(),this.getNorth())}getSouthEast(){return new $n(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:s,lat:u}=$n.convert(r);let g=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&g}static convert(r){if(r)return r instanceof sl?r:new sl(r)}}const Ym=0,Jm=25.5;function od(l){return $p*Math.cos(l*Math.PI/180)}function ol(l){return(180+l)/360}function ls(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function Xi(l,r){return l/od(r)}function qs(l){return 360*l-180}function Li(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function kl(l,r){return l*od(Li(r))}const cs=85.051129;function Bp(l){return Math.cos(mr(fr(l,-85.051129,cs)))}function p(l,r){const s=fr(r,Ym,Jm),u=Math.pow(2,s);return Bp(l)*$p/(512*u)}function n(l){return 1/Math.cos(l*Math.PI/180)}function o(l,r=0){const s=Math.exp(Math.PI*(1-(l.y+r/lr)/(1<<l.z)*2));return 80150034*s/(s*s+1)/lr/(1<<l.z)}class m{constructor(r,s,u=0){this.x=+r,this.y=+s,this.z=+u}static fromLngLat(r,s=0){const u=$n.convert(r);return new m(ol(u.lng),ls(u.lat),Xi(s,u.lat))}toLngLat(){return new $n(qs(this.x),Li(this.y))}toAltitude(){return kl(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/$p*n(Li(this.y))}}function v(l,r,s,u,g,f,x,C,M){const $=(r+u)/2,T=(s+g)/2,k=new dt($,T);C(k),function(I,P,R,j,W,K){const ae=R-W,ie=j-K;return Math.abs((j-P)*ae-(R-I)*ie)/Math.hypot(ae,ie)}(k.x,k.y,f.x,f.y,x.x,x.y)>=M?(v(l,r,s,$,T,f,k,C,M),v(l,$,T,u,g,k,x,C,M)):l.push(x)}function S(l,r,s){let u=l[0],g=u.x,f=u.y;r(u);const x=[u];for(let C=1;C<l.length;C++){const M=l[C],{x:$,y:T}=M;r(M),v(x,g,f,$,T,u,M,r,s),g=$,f=T,u=M}return x}function D(l,r,s,u){if(u(r,s)){const g=r.add(s)._mult(.5);D(l,r,g,u),D(l,g,s,u)}else l.push(s)}function L(l,r){let s=l[0];const u=[s];for(let g=1;g<l.length;g++){const f=l[g];D(u,s,f,r),s=f}return u}const O=Math.pow(2,14)-1,U=-O-1;function q(l,r){const s=Math.round(l.x*r),u=Math.round(l.y*r);return l.x=fr(s,U,O),l.y=fr(u,U,O),(s<l.x||s>l.x+1||u<l.y||u>l.y+1)&&Wr("Geometry exceeds allowed extent, reduce your vector tile buffer size"),l}function Z(l,r,s){const u=l.loadGeometry(),g=l.extent,f=lr/g;if(r&&s&&s.projection.isReprojectedInTileSpace){const x=1<<r.z,{scale:C,x:M,y:$,projection:T}=s,k=I=>{const P=qs((r.x+I.x/g)/x),R=Li((r.y+I.y/g)/x),j=T.project(P,R);I.x=(j.x*C-M)*g,I.y=(j.y*C-$)*g};for(let I=0;I<u.length;I++)if(l.type!==1)u[I]=S(u[I],k,1);else{const P=[];for(const R of u[I])R.x<0||R.x>=g||R.y<0||R.y>=g||(k(R),P.push(R));u[I]=P}}for(const x of u)for(const C of x)q(C,f);return u}function X(l,r){return{type:l.type,id:l.id,properties:l.properties,geometry:r?Z(l):[]}}function ne(l,r,s,u,g){l.emplaceBack(2*r+(u+1)/2,2*s+(g+1)/2)}function ge(l,r,s){l.emplaceBack(r.x,r.y,r.z,s[0]*16384,s[1]*16384,s[2]*16384)}class he{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.hasPattern=!1,this.projection=r.projection,this.layoutVertexArray=new no,this.indexArray=new Fi,this.segments=new Aa,this.programConfigurations=new tu(r.layers,{zoom:r.zoom,lut:r.lut}),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}updateFootprints(r,s){}populate(r,s,u,g){const f=this.layers[0],x=[];let C=null;f.type==="circle"&&(C=f.layout.get("circle-sort-key"));for(const{feature:$,id:T,index:k,sourceLayerIndex:I}of r){const P=this.layers[0]._featureFilter.needGeometry,R=X($,P);if(!this.layers[0]._featureFilter.filter(new Cn(this.zoom),R,u))continue;const j=C?C.evaluate(R,{},u):void 0,W={id:T,properties:$.properties,type:$.type,sourceLayerIndex:I,index:k,geometry:P?R.geometry:Z($,u,g),patterns:{},sortKey:j};x.push(W)}C&&x.sort(($,T)=>$.sortKey-T.sortKey);let M=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new Qu,M=g.projection);for(const $ of x){const{geometry:T,index:k,sourceLayerIndex:I}=$,P=r[k].feature;this.addFeature($,T,k,s.availableImages,u,M,s.brightness),s.featureIndex.insert(P,T,k,I,this.index)}}update(r,s,u,g,f,x,C){this.programConfigurations.updatePaintArrays(r,s,f,u,g,x,C)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,kp.members),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,nd.members))),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(r,s,u,g,f,x,C){for(const M of s)for(const $ of M){const T=$.x,k=$.y;if(T<0||T>=lr||k<0||k>=lr)continue;if(x){const R=x.projectTilePoint(T,k,f),j=x.upVector(f,T,k),W=this.globeExtVertexArray;ge(W,R,j),ge(W,R,j),ge(W,R,j),ge(W,R,j)}const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),P=I.vertexLength;ne(this.layoutVertexArray,T,k,-1,-1),ne(this.layoutVertexArray,T,k,1,-1),ne(this.layoutVertexArray,T,k,1,1),ne(this.layoutVertexArray,T,k,-1,1),this.indexArray.emplaceBack(P,P+1,P+2),this.indexArray.emplaceBack(P,P+2,P+3),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,{},g,f,C)}}function ve(l,r){for(let s=0;s<l.length;s++)if(nt(r,l[s]))return!0;for(let s=0;s<r.length;s++)if(nt(l,r[s]))return!0;return!!Fe(l,r)}function we(l,r,s){return!!nt(l,r)||!!Ge(r,l,s)}function ze(l,r){if(l.length===1)return We(r,l[0]);for(let s=0;s<r.length;s++){const u=r[s];for(let g=0;g<u.length;g++)if(nt(l,u[g]))return!0}for(let s=0;s<l.length;s++)if(We(r,l[s]))return!0;for(let s=0;s<r.length;s++)if(Fe(l,r[s]))return!0;return!1}function Oe(l,r,s){if(l.length>1){if(Fe(l,r))return!0;for(let u=0;u<r.length;u++)if(Ge(r[u],l,s))return!0}for(let u=0;u<l.length;u++)if(Ge(l[u],r,s))return!0;return!1}function Fe(l,r){if(l.length===0||r.length===0)return!1;for(let s=0;s<l.length-1;s++){const u=l[s],g=l[s+1];for(let f=0;f<r.length-1;f++)if(Ye(u,g,r[f],r[f+1]))return!0}return!1}function Ye(l,r,s,u){return yi(l,s,u)!==yi(r,s,u)&&yi(l,r,s)!==yi(l,r,u)}function Ge(l,r,s){const u=s*s;if(r.length===1)return l.distSqr(r[0])<u;for(let g=1;g<r.length;g++)if(Ze(l,r[g-1],r[g])<u)return!0;return!1}function Ze(l,r,s){const u=r.distSqr(s);if(u===0)return l.distSqr(r);const g=((l.x-r.x)*(s.x-r.x)+(l.y-r.y)*(s.y-r.y))/u;return l.distSqr(g<0?r:g>1?s:s.sub(r)._mult(g)._add(r))}function We(l,r){let s,u,g,f=!1;for(let x=0;x<l.length;x++){s=l[x];for(let C=0,M=s.length-1;C<s.length;M=C++)u=s[C],g=s[M],u.y>r.y!=g.y>r.y&&r.x<(g.x-u.x)*(r.y-u.y)/(g.y-u.y)+u.x&&(f=!f)}return f}function nt(l,r){let s=!1;for(let u=0,g=l.length-1;u<l.length;g=u++){const f=l[u],x=l[g];f.y>r.y!=x.y>r.y&&r.x<(x.x-f.x)*(r.y-f.y)/(x.y-f.y)+f.x&&(s=!s)}return s}function at(l,r,s,u,g){for(const x of l)if(r<=x.x&&s<=x.y&&u>=x.x&&g>=x.y)return!0;const f=[new dt(r,s),new dt(r,g),new dt(u,g),new dt(u,s)];if(l.length>2){for(const x of f)if(nt(l,x))return!0}for(let x=0;x<l.length-1;x++)if(Ct(l[x],l[x+1],f))return!0;return!1}function Ct(l,r,s){const u=s[0],g=s[2];if(l.x<u.x&&r.x<u.x||l.x>g.x&&r.x>g.x||l.y<u.y&&r.y<u.y||l.y>g.y&&r.y>g.y)return!1;const f=yi(l,r,s[0]);return f!==yi(l,r,s[1])||f!==yi(l,r,s[2])||f!==yi(l,r,s[3])}function _t(l,r,s,u,g,f){let x=r.y-l.y,C=l.x-r.x;if(f=f||0){const M=x*x+C*C;if(M===0)return!0;const $=Math.sqrt(M);x/=$,C/=$}return!((s.x-l.x)*x+(s.y-l.y)*C-f<0||(u.x-l.x)*x+(u.y-l.y)*C-f<0||(g.x-l.x)*x+(g.y-l.y)*C-f<0)}function lt(l,r,s,u,g,f,x){return!(_t(l,r,u,g,f,x)||_t(r,s,u,g,f,x)||_t(s,l,u,g,f,x)||_t(u,g,l,r,s,x)||_t(g,f,l,r,s,x)||_t(f,u,l,r,s,x))}function mt(l,r,s){const u=r.paint.get(l).value;return u.kind==="constant"?u.value:s.programConfigurations.get(r.id).getMaxValue(l)}function Nt(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function qt(l,r,s,u,g){if(!r[0]&&!r[1])return l;const f=dt.convert(r)._mult(g);s==="viewport"&&f._rotate(-u);const x=[];for(let C=0;C<l.length;C++)x.push(l[C].sub(f));return x}function Zt(l,r,s,u){const g=dt.convert(l)._mult(u);return r==="viewport"&&g._rotate(-s),g}let xt,Ft;Tr(he,"CircleBucket",{omit:["layers"]});var Mt,Qt={exports:{}},Ot=(Mt||(Mt=1,function(l,r){(function(s){function u(f,x,C){var M=g(256*f,256*(x=Math.pow(2,C)-x-1),C),$=g(256*(f+1),256*(x+1),C);return M[0]+","+M[1]+","+$[0]+","+$[1]}function g(f,x,C){var M=2*Math.PI*6378137/256/Math.pow(2,C);return[f*M-2*Math.PI*6378137/2,x*M-2*Math.PI*6378137/2]}s.getURL=function(f,x,C,M,$,T){return T=T||{},f+"?"+["bbox="+u(C,M,$),"format="+(T.format||"image/png"),"service="+(T.service||"WMS"),"version="+(T.version||"1.1.1"),"request="+(T.request||"GetMap"),"srs="+(T.srs||"EPSG:3857"),"width="+(T.width||256),"height="+(T.height||256),"layers="+x].join("&")},s.getTileBBox=u,s.getMercCoords=g,Object.defineProperty(s,"__esModule",{value:!0})})(r)}(0,Qt.exports)),Qt.exports);class zt{constructor(r,s,u){this.z=r,this.x=s,this.y=u,this.key=yr(0,r,r,s,u)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,s){const u=Ot.getTileBBox(this.x,this.y,this.z),g=function(f,x,C){let M,$="";for(let T=f;T>0;T--)M=1<<T-1,$+=(x&M?1:0)+(C&M?2:0);return $}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class dr{constructor(r,s){this.wrap=r,this.canonical=s,this.key=yr(r,s.z,s.z,s.x,s.y)}}class rr{constructor(r,s,u,g,f){this.overscaledZ=r,this.wrap=s,this.canonical=new zt(u,+g,+f),this.key=s===0&&r===u?this.canonical.key:yr(s,r,u,g,f)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){const s=this.canonical.z-r;return r>this.canonical.z?new rr(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new rr(r,this.wrap,r,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(r,s=!0){if(this.overscaledZ===r&&s)return this.key;if(r>this.canonical.z)return yr(this.wrap*+s,r,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-r;return yr(this.wrap*+s,r,r,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(r){if(r.wrap!==this.wrap)return!1;const s=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.z<this.canonical.z&&r.canonical.x===this.canonical.x>>s&&r.canonical.y===this.canonical.y>>s}children(r){if(this.overscaledZ>=r)return[new rr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,u=2*this.canonical.x,g=2*this.canonical.y;return[new rr(s,this.wrap,s,u,g),new rr(s,this.wrap,s,u+1,g),new rr(s,this.wrap,s,u,g+1),new rr(s,this.wrap,s,u+1,g+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new rr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new rr(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new dr(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function yr(l,r,s,u,g){const f=1<<Math.min(s,22);let x=f*(g%f)+u%f;return l&&s<22&&(x+=f*f*((l<0?-2*l-1:2*l)%(1<<2*(22-s)))),16*(32*x+s)+(r-s)}const _r=[l=>{let r=l.canonical.x-1,s=l.wrap;return r<0&&(r=(1<<l.canonical.z)-1,s--),new rr(l.overscaledZ,s,l.canonical.z,r,l.canonical.y)},l=>{let r=l.canonical.x+1,s=l.wrap;return r===1<<l.canonical.z&&(r=0,s++),new rr(l.overscaledZ,s,l.canonical.z,r,l.canonical.y)},l=>new rr(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,(l.canonical.y===0?1<<l.canonical.z:l.canonical.y)-1),l=>new rr(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y===(1<<l.canonical.z)-1?0:l.canonical.y+1)];Tr(zt,"CanonicalTileID"),Tr(rr,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Kr=Fn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Ar}=Kr,zr=Fn([{name:"a_pos_3",components:3,type:"Int16"}]);var Hr=Fn([{name:"a_pos",type:"Int16",components:2}]);class mn{constructor(r,s){this.pos=r,this.dir=s}intersectsPlane(r,s,u){const g=De.vec3.dot(s,this.dir);if(Math.abs(g)<1e-6)return!1;const f=((r[0]-this.pos[0])*s[0]+(r[1]-this.pos[1])*s[1]+(r[2]-this.pos[2])*s[2])/g;return u[0]=this.pos[0]+this.dir[0]*f,u[1]=this.pos[1]+this.dir[1]*f,u[2]=this.pos[2]+this.dir[2]*f,!0}closestPointOnSphere(r,s,u){if(De.vec3.equals(this.pos,r)||s===0)return u[0]=u[1]=u[2]=0,!1;const[g,f,x]=this.dir,C=this.pos[0]-r[0],M=this.pos[1]-r[1],$=this.pos[2]-r[2],T=g*g+f*f+x*x,k=2*(C*g+M*f+$*x),I=k*k-4*T*(C*C+M*M+$*$-s*s);if(I<0){const P=Math.max(-k/2,0),R=C+g*P,j=M+f*P,W=$+x*P,K=Math.hypot(R,j,W);return u[0]=R*s/K,u[1]=j*s/K,u[2]=W*s/K,!1}{const P=(-k-Math.sqrt(I))/(2*T);if(P<0){const R=Math.hypot(C,M,$);return u[0]=C*s/R,u[1]=M*s/R,u[2]=$*s/R,!1}return u[0]=C+g*P,u[1]=M+f*P,u[2]=$+x*P,!0}}}class ln{constructor(r,s,u,g,f){this.TL=r,this.TR=s,this.BR=u,this.BL=g,this.horizon=f}static fromInvProjectionMatrix(r,s,u){const g=[-1,1,1],f=[1,1,1],x=[1,-1,1],C=[-1,-1,1],M=De.vec3.transformMat4(g,g,r),$=De.vec3.transformMat4(f,f,r),T=De.vec3.transformMat4(x,x,r),k=De.vec3.transformMat4(C,C,r);return new ln(M,$,T,k,s/u)}}function pa(l,r,s){let u=1/0,g=-1/0;const f=[];for(const x of l){De.vec3.sub(f,x,r);const C=De.vec3.dot(f,s);u=Math.min(u,C),g=Math.max(g,C)}return[u,g]}function ma(l,r){let s=!0;for(let u=0;u<l.planes.length;u++){const g=l.planes[u];let f=0;for(let x=0;x<r.length;x++)f+=De.vec3.dot(g,r[x])+g[3]>=0;if(f===0)return 0;f!==r.length&&(s=!1)}return s?2:1}function Gn(l,r){for(const s of l.projections){const u=pa(r,l.points[0],s.axis);if(s.projection[1]<u[0]||s.projection[0]>u[1])return 0}return 1}function Kn(l,r){let s=0;const u=[0,0,0,0];for(let g=0;g<l.length;g++)u[0]=l[g][0],u[1]=l[g][1],u[2]=l[g][2],u[3]=1,De.vec4.dot(u,r)>=0&&s++;return s}class sn{constructor(r,s){this.points=r||new Array(8).fill([0,0,0]),this.planes=s||new Array(6).fill([0,0,0,0]),this.bounds=jr.fromPoints(this.points),this.projections=[],this.frustumEdges=[De.vec3.sub([],this.points[2],this.points[3]),De.vec3.sub([],this.points[0],this.points[3]),De.vec3.sub([],this.points[4],this.points[0]),De.vec3.sub([],this.points[5],this.points[1]),De.vec3.sub([],this.points[6],this.points[2]),De.vec3.sub([],this.points[7],this.points[3])];for(const u of this.frustumEdges){const g=[0,-u[2],u[1]],f=[u[2],0,-u[0]];this.projections.push({axis:g,projection:pa(this.points,this.points[0],g)}),this.projections.push({axis:f,projection:pa(this.points,this.points[0],f)})}}static fromInvProjectionMatrix(r,s,u,g){const f=Math.pow(2,u),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map($=>{const T=De.vec4.transformMat4([],$,r),k=1/T[3]/s*f;return De.vec4.mul(T,T,[k,k,g?1/T[3]:k,k])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map($=>{const T=De.vec3.sub([],x[$[0]],x[$[1]]),k=De.vec3.sub([],x[$[2]],x[$[1]]),I=De.vec3.normalize([],De.vec3.cross([],T,k)),P=-De.vec3.dot(I,x[$[1]]);return I.concat(P)}),M=[];for(let $=0;$<x.length;$++)M.push([x[$][0],x[$][1],x[$][2]]);return new sn(M,C)}intersectsPrecise(r,s,u){for(let g=0;g<s.length;g++)if(!Kn(r,s[g]))return 0;for(let g=0;g<this.planes.length;g++)if(!Kn(r,this.planes[g]))return 0;for(const g of u)for(const f of this.frustumEdges){const x=De.vec3.cross([],g,f),C=De.vec3.length(x);if(C===0)continue;De.vec3.scale(x,x,1/C);const M=pa(this.points,this.points[0],x),$=pa(r,this.points[0],x);if(M[0]>$[1]||$[0]>M[1])return 0}return 1}containsPoint(r){for(const s of this.planes){const u=s[3];if(De.vec3.dot([s[0],s[1],s[2]],r)+u<0)return!1}return!0}}class jr{static fromPoints(r){const s=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const g of r)De.vec3.min(s,s,g),De.vec3.max(u,u,g);return new jr(s,u)}static fromTileIdAndHeight(r,s,u){const g=1<<r.canonical.z,f=r.canonical.x,x=r.canonical.y;return new jr([f/g,x/g,s],[(f+1)/g,(x+1)/g,u])}static applyTransform(r,s){const u=r.getCorners();for(let g=0;g<u.length;++g)De.vec3.transformMat4(u[g],u[g],s);return jr.fromPoints(u)}static applyTransformFast(r,s){const u=[s[12],s[13],s[14]],g=[...u];for(let f=0;f<3;f++)for(let x=0;x<3;x++){const C=s[4*x+f],M=C*r.min[x],$=C*r.max[x];u[f]+=Math.min(M,$),g[f]+=Math.max(M,$)}return new jr(u,g)}static projectAabbCorners(r,s){const u=r.getCorners();for(let g=0;g<u.length;++g)De.vec3.transformMat4(u[g],u[g],s);return u}constructor(r,s){this.min=r,this.max=s,this.center=De.vec3.scale([],De.vec3.add([],this.min,this.max),.5)}quadrant(r){const s=[r%2==0,r<2],u=De.vec3.clone(this.min),g=De.vec3.clone(this.max);for(let f=0;f<s.length;f++)u[f]=s[f]?this.min[f]:this.center[f],g[f]=s[f]?this.center[f]:this.max[f];return g[2]=this.max[2],new jr(u,g)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}distanceZ(r){return Math.max(Math.min(this.max[2],r[2]),this.min[2])-r[2]}getCorners(){const r=this.min,s=this.max;return[[r[0],r[1],r[2]],[s[0],r[1],r[2]],[s[0],s[1],r[2]],[r[0],s[1],r[2]],[r[0],r[1],s[2]],[s[0],r[1],s[2]],[s[0],s[1],s[2]],[r[0],s[1],s[2]]]}intersects(r){return this.intersectsAabb(r.bounds)?ma(r,this.getCorners()):0}intersectsFlat(r){return this.intersectsAabb(r.bounds)?ma(r,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(r,s){return s||this.intersects(r)?Gn(r,this.getCorners()):0}intersectsPreciseFlat(r,s){return s||this.intersectsFlat(r)?Gn(r,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(r){for(let s=0;s<3;++s)if(this.min[s]>r.max[s]||r.min[s]>this.max[s])return!1;return!0}intersectsAabbXY(r){return!(this.min[0]>r.max[0]||r.min[0]>this.max[0]||this.min[1]>r.max[1]||r.min[1]>this.max[1])}encapsulate(r){for(let s=0;s<3;s++)this.min[s]=Math.min(this.min[s],r.min[s]),this.max[s]=Math.max(this.max[s],r.max[s])}encapsulatePoint(r){for(let s=0;s<3;s++)this.min[s]=Math.min(this.min[s],r[s]),this.max[s]=Math.max(this.max[s],r[s])}closestPoint(r){return[Math.max(Math.min(this.max[0],r[0]),this.min[0]),Math.max(Math.min(this.max[1],r[1]),this.min[1]),Math.max(Math.min(this.max[2],r[2]),this.min[2])]}}function Vn(l){return l*os/nu}Tr(jr,"Aabb");const Zr=[new jr([co,co,co],[uo,uo,uo]),new jr([co,co,co],[0,0,uo]),new jr([0,co,co],[uo,0,uo]),new jr([co,0,co],[0,uo,uo]),new jr([0,0,co],[uo,uo,uo])];function xn(l,r,s,u=!0){const g=De.vec3.scale([],l._camera.position,l.worldSize),f=[r,s,1,1];De.vec4.transformMat4(f,f,l.pixelMatrixInverse),De.vec4.scale(f,f,1/f[3]);const x=De.vec3.sub([],f,g),C=De.vec3.normalize([],x),M=l.globeMatrix,$=[M[12],M[13],M[14]],T=De.vec3.sub([],$,g),k=De.vec3.length(T),I=De.vec3.normalize([],T),P=l.worldSize/(2*Math.PI),R=De.vec3.dot(I,C),j=Math.asin(P/k);if(j<Math.acos(R)){if(!u)return null;const Qe=[],Ue=[];De.vec3.scale(Qe,C,k/R),De.vec3.normalize(Ue,De.vec3.sub(Ue,Qe,T)),De.vec3.normalize(C,De.vec3.add(C,T,De.vec3.scale(C,Ue,Math.tan(j)*k)))}const W=[];new mn(g,C).closestPointOnSphere($,P,W);const K=De.vec3.normalize([],qa(M,0)),ae=De.vec3.normalize([],qa(M,1)),ie=De.vec3.normalize([],qa(M,2)),J=De.vec3.dot(K,W),le=De.vec3.dot(ae,W),fe=De.vec3.dot(ie,W),_e=Pr(Math.asin(-le/P));let je=Pr(Math.atan2(J,fe));je=l.center.lng+function(Qe,Ue){const rt=(Ue-Qe+180)%360-180;return rt<-180?rt+360:rt}(l.center.lng,je);const Ne=ol(je),Be=fr(ls(_e),0,1);return new m(Ne,Be)}class vn{constructor(r,s,u){this.a=De.vec3.sub([],r,u),this.b=De.vec3.sub([],s,u),this.center=u;const g=De.vec3.normalize([],this.a),f=De.vec3.normalize([],this.b);this.angle=Math.acos(De.vec3.dot(g,f))}}function Mn(l,r){if(l.angle===0)return null;let s;return s=l.a[r]===0?1/l.angle*.5*Math.PI:1/l.angle*Math.atan(l.b[r]/l.a[r]/Math.sin(l.angle)-1/Math.tan(l.angle)),s<0||s>1?null:function(u,g,f,x){const C=Math.sin(f);return u*(Math.sin((1-x)*f)/C)+g*(Math.sin(x*f)/C)}(l.a[r],l.b[r],l.angle,fr(s,0,1))+l.center[r]}function Sn(l){if(l.z<=1)return Zr[l.z+2*l.y+l.x];const r=Hn(ia(l));return jr.fromPoints(r)}function Ea(l,r,s){return De.vec3.scale(l,l,1-s),De.vec3.scaleAndAdd(l,l,r,s)}function ni(l,r,s){for(const u of l)De.vec3.transformMat4(u,u,r),De.vec3.scale(u,u,s)}function Ca(l,r,s,u){const g=r/l.worldSize,f=l.globeMatrix;if(s.z<=1){const Ne=Sn(s).getCorners();return ni(Ne,f,g),jr.fromPoints(Ne)}const x=ia(s,u),C=Hn(x,os+Vn(l._tileCoverLift));ni(C,f,g);const M=Number.MAX_VALUE,$=[-M,-M,-M],T=[M,M,M];if(x.contains(l.center)){for(const Qe of C)De.vec3.min(T,T,Qe),De.vec3.max($,$,Qe);$[2]=0;const Ne=l.point,Be=[Ne.x*g,Ne.y*g,0];return De.vec3.min(T,T,Be),De.vec3.max($,$,Be),new jr(T,$)}if(l._tileCoverLift>0){for(const Ne of C)De.vec3.min(T,T,Ne),De.vec3.max($,$,Ne);return new jr(T,$)}const k=[f[12]*g,f[13]*g,f[14]*g],I=x.getCenter(),P=fr(l.center.lat,-85.051129,cs),R=fr(I.lat,-85.051129,cs),j=ol(l.center.lng),W=ls(P);let K=j-ol(I.lng);const ae=W-ls(R);K>.5?K-=1:K<-.5&&(K+=1);let ie=0;if(Math.abs(K)>Math.abs(ae))ie=K>=0?1:3;else{ie=ae>=0?0:2;const Ne=[f[4]*g,f[5]*g,f[6]*g],Be=-Math.sin(mr(ae>=0?x.getSouth():x.getNorth()))*os;De.vec3.scaleAndAdd(k,k,Ne,Be)}const J=C[ie],le=C[(ie+1)%4],fe=new vn(J,le,k),_e=[Mn(fe,0)||J[0],Mn(fe,1)||J[1],Mn(fe,2)||J[2]],je=Qi(l.zoom);if(je>0){const Ne=function({x:Qe,y:Ue,z:rt},st,it,ct,gt){const vt=1/(1<<rt);let ht=Qe*vt,Rt=ht+vt,Yt=Ue*vt,Lt=Yt+vt,ar=0;const nr=(ht+Rt)/2-ct;return nr>.5?ar=-1:nr<-.5&&(ar=1),ht=((ht+ar)*st-(ct*=st))*it+ct,Rt=((Rt+ar)*st-ct)*it+ct,Yt=(Yt*st-(gt*=st))*it+gt,Lt=(Lt*st-gt)*it+gt,[[ht,Lt,0],[Rt,Lt,0],[Rt,Yt,0],[ht,Yt,0]]}(s,r,l._pixelsPerMercatorPixel,j,W);for(let Qe=0;Qe<C.length;Qe++)Ea(C[Qe],Ne[Qe],je);const Be=De.vec3.add([],Ne[ie],Ne[(ie+1)%4]);De.vec3.scale(Be,Be,.5),Ea(_e,Be,je)}for(const Ne of C)De.vec3.min(T,T,Ne),De.vec3.max($,$,Ne);return T[2]=Math.min(J[2],le[2]),De.vec3.min(T,T,_e),De.vec3.max($,$,_e),new jr(T,$)}function ia({x:l,y:r,z:s},u=!1){const g=1/(1<<s),f=new $n(qs(l*g),r===(1<<s)-1&&u?-90:Li((r+1)*g)),x=new $n(qs((l+1)*g),r===0&&u?90:Li(r*g));return new sl(f,x)}function Hn(l,r=os){const s=mr(l.getNorth()),u=mr(l.getSouth()),g=Math.cos(s),f=Math.cos(u),x=Math.sin(s),C=Math.sin(u),M=l.getWest(),$=l.getEast();return[ru(f,C,M,r),ru(f,C,$,r),ru(g,x,$,r),ru(g,x,M,r)]}function qr(l,r,s,u){const g=1<<s.z,f=(l/lr+s.x)/g;return Al(Li((r/lr+s.y)/g),qs(f),u)}function va({min:l,max:r}){return lf/Math.max(r[0]-l[0],r[1]-l[1],r[2]-l[2])}const Qa=new Float64Array(16);function aa(l){const r=va(l),s=De.mat4.fromScaling(Qa,[r,r,r]);return De.mat4.translate(s,s,De.vec3.negate([],l.min))}function za(l){const r=De.mat4.fromTranslation(Qa,l.min),s=1/va(l);return De.mat4.scale(r,r,[s,s,s])}function Yi(l){const r=lr/(2*Math.PI);return l/(2*Math.PI)/r}function Ji(l,r){return lr/(512*Math.pow(2,l))*va(Sn(r))}function fi(l,r,s,u,g){const f=Yi(s),x=[l,r,-s/(2*Math.PI)],C=De.mat4.identity(new Float64Array(16));return De.mat4.translate(C,C,x),De.mat4.scale(C,C,[f,f,f]),De.mat4.rotateX(C,C,mr(-g)),De.mat4.rotateY(C,C,mr(-u)),C}function Qi(l){return Tn(of,Xm,l)}function ho(l,r){const s=Al(r.lat,r.lng),u=function(f){const x=Al(f._center.lat,f._center.lng),C=De.vec3.fromValues(0,1,0);let M=De.vec3.cross([],C,x);const $=De.mat4.fromRotation([],-f.angle,x);M=De.vec3.transformMat4(M,M,$),De.mat4.fromRotation($,-f._pitch,M);const T=De.vec3.normalize([],x);return De.vec3.scale(T,T,Vn(f.cameraToCenterDistance/f.pixelsPerMeter)),De.vec3.transformMat4(T,T,$),De.vec3.add([],x,T)}(l),g=De.vec3.subtract([],u,s);return De.vec3.angle(g,s)}function us(l,r){return ho(l,r)>Math.PI/2*1.01}const ll=mr(85),ds=Math.cos(ll),li=Math.sin(ll),Bo=De.mat4.create(),vc=l=>{const r=[];return l.paint.get("circle-pitch-alignment")==="map"&&r.push("PITCH_WITH_MAP"),l.paint.get("circle-pitch-scale")==="map"&&r.push("SCALE_WITH_MAP"),r};function _c(l,r,s,u,g,f,x,C,M){if(f&&l.queryGeometry.isAboveHorizon)return!1;f&&(M*=l.pixelToTileUnitsFactor);const $=l.tileID.canonical,T=s.projection.upVectorScale($,s.center.lat,s.worldSize).metersToTile;for(const k of r)for(const I of k){const P=I.add(C),R=g&&s.elevation?s.elevation.exaggeration()*g.getElevationAt(P.x,P.y,!0):0,j=s.projection.projectTilePoint(P.x,P.y,$);if(R>0){const ie=s.projection.upVector($,P.x,P.y);j.x+=ie[0]*T*R,j.y+=ie[1]*T*R,j.z+=ie[2]*T*R}const W=f?P:Tx(j.x,j.y,j.z,u),K=f?l.tilespaceRays.map(ie=>Qm(ie,R)):l.queryGeometry.screenGeometry,ae=De.vec4.transformMat4([],[j.x,j.y,j.z,1],u);if(!x&&f?M*=ae[3]/s.cameraToCenterDistance:x&&!f&&(M*=s.cameraToCenterDistance/ae[3]),f){const ie=Li((I.y/lr+$.y)/(1<<$.z));M/=s.projection.pixelsPerMeter(ie,1)/Xi(1,ie)}if(we(K,W,M))return!0}return!1}function Tx(l,r,s,u){const g=De.vec4.transformMat4([],[l,r,s,1],u);return new dt(g[0]/g[3],g[1]/g[3])}const z0=De.vec3.fromValues(0,0,0),U_=De.vec3.fromValues(0,0,1);function Qm(l,r){const s=De.vec3.create();return z0[2]=r,l.intersectsPlane(z0,U_,s),new dt(s[0],s[1])}class L0 extends he{}let No,Ex,jo,Cx;function Dx(l,{width:r,height:s},u,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==r*s*u)throw new RangeError("mismatched image size")}else g=new Uint8Array(r*s*u);return l.width=r,l.height=s,l.data=g,l}function G_(l,r,s){const{width:u,height:g}=r;u===l.width&&g===l.height||(au(l,r,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,u),height:Math.min(l.height,g)},s,null),l.width=u,l.height=g,l.data=r.data)}function au(l,r,s,u,g,f,x,C){if(g.width===0||g.height===0)return r;if(g.width>l.width||g.height>l.height||s.x>l.width-g.width||s.y>l.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>r.width||g.height>r.height||u.x>r.width-g.width||u.y>r.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const M=l.data,$=r.data,T=f===4&&C;for(let k=0;k<g.height;k++){const I=((s.y+k)*l.width+s.x)*f,P=((u.y+k)*r.width+u.x)*f;if(T)for(let R=0;R<g.width;R++){const j=I+R*f+3,W=P+R*f;$[W+0]=255,$[W+1]=255,$[W+2]=255,$[W+3]=M[j]}else if(x)for(let R=0;R<g.width;R++){const j=I+R*f,W=P+R*f,K=M[j+3],ae=new In(M[j+0]/255*K,M[j+1]/255*K,M[j+2]/255*K,K).toRenderColor(x).toArray();$[W+0]=ae[0],$[W+1]=ae[1],$[W+2]=ae[2],$[W+3]=ae[3]}else for(let R=0;R<g.width*f;R++)$[P+R]=M[I+R]}return r}Tr(L0,"HeatmapBucket",{omit:["layers"]});class bc{constructor(r,s){Dx(this,r,1,s)}resize(r){G_(this,new bc(r),1)}clone(){return new bc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,u,g,f){au(r,s,u,g,f,1,null)}}class es{constructor(r,s){Dx(this,r,4,s)}resize(r){G_(this,new es(r),4)}replace(r,s){s?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new es({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,s,u,g,f,x,C){au(r,s,u,g,f,4,x,C)}}class uf{constructor(r,s){this.width=r.width,this.height=r.height,this.data=s instanceof Uint8Array?new Float32Array(s.buffer):s}}function Np(l){const r={},s=l.resolution||256,u=l.clips?l.clips.length:1,g=l.image||new es({width:s,height:u}),f=(x,C,M)=>{r[l.evaluationKey]=M;const $=l.expression.evaluate(r);$&&(g.data[x+C+0]=Math.floor(255*$.r/$.a),g.data[x+C+1]=Math.floor(255*$.g/$.a),g.data[x+C+2]=Math.floor(255*$.b/$.a),g.data[x+C+3]=Math.floor(255*$.a))};if(l.clips)for(let x=0,C=0;x<u;++x,C+=4*s)for(let M=0,$=0;M<s;M++,$+=4){const T=M/(s-1),{start:k,end:I}=l.clips[x];f(C,$,k*(1-T)+I*T)}else for(let x=0,C=0;x<s;x++,C+=4)f(0,C,x/(s-1));return g}Tr(bc,"AlphaImage"),Tr(es,"RGBAImage");const H_=Fn([{name:"a_pos",components:2,type:"Int16"}],4),{members:q_}=H_;function df(l,r,s=2){const u=r&&r.length,g=u?r[0]*s:l.length;let f=$0(l,0,g,s,!0);const x=[];if(!f||f.next===f.prev)return x;let C,M,$;if(u&&(f=function(T,k,I,P){const R=[];for(let j=0,W=k.length;j<W;j++){const K=$0(T,k[j]*P,j<W-1?k[j+1]*P:T.length,P,!1);K===K.next&&(K.steiner=!0),R.push(Y_(K))}R.sort(B0);for(let j=0;j<R.length;j++)I=Z_(R[j],I);return I}(l,r,f,s)),l.length>80*s){C=1/0,M=1/0;let T=-1/0,k=-1/0;for(let I=s;I<g;I+=s){const P=l[I],R=l[I+1];P<C&&(C=P),R<M&&(M=R),P>T&&(T=P),R>k&&(k=R)}$=Math.max(T-C,k-M),$=$!==0?32767/$:0}return eg(f,x,s,C,M,$,0),x}function $0(l,r,s,u,g){let f;if(g===function(x,C,M,$){let T=0;for(let k=C,I=M-$;k<M;k+=$)T+=(x[I]-x[k])*(x[k+1]+x[I+1]),I=k;return T}(l,r,s,u)>0)for(let x=r;x<s;x+=u)f=Q_(x/u|0,l[x],l[x+1],f);else for(let x=s-u;x>=r;x-=u)f=Q_(x/u|0,l[x],l[x+1],f);return f&&tg(f,f.next)&&(ng(f),f=f.next),f}function hf(l,r){if(!l)return l;r||(r=l);let s,u=l;do if(s=!1,u.steiner||!tg(u,u.next)&&ai(u.prev,u,u.next)!==0)u=u.next;else{if(ng(u),u=r=u.prev,u===u.next)break;s=!0}while(s||u!==r);return r}function eg(l,r,s,u,g,f,x){if(!l)return;!x&&f&&function(M,$,T,k){let I=M;do I.z===0&&(I.z=N0(I.x,I.y,$,T,k)),I.prevZ=I.prev,I.nextZ=I.next,I=I.next;while(I!==M);I.prevZ.nextZ=null,I.prevZ=null,function(P){let R,j=1;do{let W,K=P;P=null;let ae=null;for(R=0;K;){R++;let ie=K,J=0;for(let fe=0;fe<j&&(J++,ie=ie.nextZ,ie);fe++);let le=j;for(;J>0||le>0&&ie;)J!==0&&(le===0||!ie||K.z<=ie.z)?(W=K,K=K.nextZ,J--):(W=ie,ie=ie.nextZ,le--),ae?ae.nextZ=W:P=W,W.prevZ=ae,ae=W;K=ie}ae.nextZ=null,j*=2}while(R>1)}(I)}(l,u,g,f);let C=l;for(;l.prev!==l.next;){const M=l.prev,$=l.next;if(f?W_(l,u,g,f):E2(l))r.push(M.i,l.i,$.i),ng(l),l=$.next,C=$.next;else if((l=$)===C){x?x===1?eg(l=K_(hf(l),r),r,s,u,g,f,2):x===2&&jp(l,r,s,u,g,f):eg(hf(l),r,s,u,g,f,1);break}}}function E2(l){const r=l.prev,s=l,u=l.next;if(ai(r,s,u)>=0)return!1;const g=r.x,f=s.x,x=u.x,C=r.y,M=s.y,$=u.y,T=g<f?g<x?g:x:f<x?f:x,k=C<M?C<$?C:$:M<$?M:$,I=g>f?g>x?g:x:f>x?f:x,P=C>M?C>$?C:$:M>$?M:$;let R=u.next;for(;R!==r;){if(R.x>=T&&R.x<=I&&R.y>=k&&R.y<=P&&ff(g,C,f,M,x,$,R.x,R.y)&&ai(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function W_(l,r,s,u){const g=l.prev,f=l,x=l.next;if(ai(g,f,x)>=0)return!1;const C=g.x,M=f.x,$=x.x,T=g.y,k=f.y,I=x.y,P=C<M?C<$?C:$:M<$?M:$,R=T<k?T<I?T:I:k<I?k:I,j=C>M?C>$?C:$:M>$?M:$,W=T>k?T>I?T:I:k>I?k:I,K=N0(P,R,r,s,u),ae=N0(j,W,r,s,u);let ie=l.prevZ,J=l.nextZ;for(;ie&&ie.z>=K&&J&&J.z<=ae;){if(ie.x>=P&&ie.x<=j&&ie.y>=R&&ie.y<=W&&ie!==g&&ie!==x&&ff(C,T,M,k,$,I,ie.x,ie.y)&&ai(ie.prev,ie,ie.next)>=0||(ie=ie.prevZ,J.x>=P&&J.x<=j&&J.y>=R&&J.y<=W&&J!==g&&J!==x&&ff(C,T,M,k,$,I,J.x,J.y)&&ai(J.prev,J,J.next)>=0))return!1;J=J.nextZ}for(;ie&&ie.z>=K;){if(ie.x>=P&&ie.x<=j&&ie.y>=R&&ie.y<=W&&ie!==g&&ie!==x&&ff(C,T,M,k,$,I,ie.x,ie.y)&&ai(ie.prev,ie,ie.next)>=0)return!1;ie=ie.prevZ}for(;J&&J.z<=ae;){if(J.x>=P&&J.x<=j&&J.y>=R&&J.y<=W&&J!==g&&J!==x&&ff(C,T,M,k,$,I,J.x,J.y)&&ai(J.prev,J,J.next)>=0)return!1;J=J.nextZ}return!0}function K_(l,r){let s=l;do{const u=s.prev,g=s.next.next;!tg(u,g)&&Px(u,s,s.next,g)&&rg(u,g)&&rg(g,u)&&(r.push(u.i,s.i,g.i),ng(s),ng(s.next),s=l=g),s=s.next}while(s!==l);return hf(s)}function jp(l,r,s,u,g,f){let x=l;do{let C=x.next.next;for(;C!==x.prev;){if(x.i!==C.i&&J_(x,C)){let M=Mx(x,C);return x=hf(x,x.next),M=hf(M,M.next),eg(x,r,s,u,g,f,0),void eg(M,r,s,u,g,f,0)}C=C.next}x=x.next}while(x!==l)}function B0(l,r){return l.x-r.x}function Z_(l,r){const s=function(g,f){let x=f;const C=g.x,M=g.y;let $,T=-1/0;do{if(M<=x.y&&M>=x.next.y&&x.next.y!==x.y){const j=x.x+(M-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(j<=C&&j>T&&(T=j,$=x.x<x.next.x?x:x.next,j===C))return $}x=x.next}while(x!==f);if(!$)return null;const k=$,I=$.x,P=$.y;let R=1/0;x=$;do{if(C>=x.x&&x.x>=I&&C!==x.x&&ff(M<P?C:T,M,I,P,M<P?T:C,M,x.x,x.y)){const j=Math.abs(M-x.y)/(C-x.x);rg(x,g)&&(j<R||j===R&&(x.x>$.x||x.x===$.x&&X_($,x)))&&($=x,R=j)}x=x.next}while(x!==k);return $}(l,r);if(!s)return r;const u=Mx(s,l);return hf(u,u.next),hf(s,s.next)}function X_(l,r){return ai(l.prev,l,r.prev)<0&&ai(r.next,l,l.next)<0}function N0(l,r,s,u,g){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-s)*g|0)|l<<8))|l<<4))|l<<2))|l<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-u)*g|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Y_(l){let r=l,s=l;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==l);return s}function ff(l,r,s,u,g,f,x,C){return(g-x)*(r-C)>=(l-x)*(f-C)&&(l-x)*(u-C)>=(s-x)*(r-C)&&(s-x)*(f-C)>=(g-x)*(u-C)}function J_(l,r){return l.next.i!==r.i&&l.prev.i!==r.i&&!function(s,u){let g=s;do{if(g.i!==s.i&&g.next.i!==s.i&&g.i!==u.i&&g.next.i!==u.i&&Px(g,g.next,s,u))return!0;g=g.next}while(g!==s);return!1}(l,r)&&(rg(l,r)&&rg(r,l)&&function(s,u){let g=s,f=!1;const x=(s.x+u.x)/2,C=(s.y+u.y)/2;do g.y>C!=g.next.y>C&&g.next.y!==g.y&&x<(g.next.x-g.x)*(C-g.y)/(g.next.y-g.y)+g.x&&(f=!f),g=g.next;while(g!==s);return f}(l,r)&&(ai(l.prev,l,r.prev)||ai(l,r.prev,r))||tg(l,r)&&ai(l.prev,l,l.next)>0&&ai(r.prev,r,r.next)>0)}function ai(l,r,s){return(r.y-l.y)*(s.x-r.x)-(r.x-l.x)*(s.y-r.y)}function tg(l,r){return l.x===r.x&&l.y===r.y}function Px(l,r,s,u){const g=Op(ai(l,r,s)),f=Op(ai(l,r,u)),x=Op(ai(s,u,l)),C=Op(ai(s,u,r));return g!==f&&x!==C||!(g!==0||!La(l,s,r))||!(f!==0||!La(l,u,r))||!(x!==0||!La(s,l,u))||!(C!==0||!La(s,r,u))}function La(l,r,s){return r.x<=Math.max(l.x,s.x)&&r.x>=Math.min(l.x,s.x)&&r.y<=Math.max(l.y,s.y)&&r.y>=Math.min(l.y,s.y)}function Op(l){return l>0?1:l<0?-1:0}function rg(l,r){return ai(l.prev,l,l.next)<0?ai(l,r,l.next)>=0&&ai(l,l.prev,r)>=0:ai(l,r,l.prev)<0||ai(l,l.next,r)<0}function Mx(l,r){const s=Ax(l.i,l.x,l.y),u=Ax(r.i,r.x,r.y),g=l.next,f=r.prev;return l.next=r,r.prev=l,s.next=g,g.prev=s,u.next=s,s.prev=u,f.next=u,u.prev=f,u}function Q_(l,r,s,u){const g=Ax(l,r,s);return u?(g.next=u.next,g.prev=u,u.next.prev=g,u.next=g):(g.prev=g,g.next=g),g}function ng(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Ax(l,r,s){return{i:l,x:r,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function pf(l,r){const s=l.length;if(s<=1)return[l];const u=[];let g,f;for(let x=0;x<s;x++){const C=Zn(l[x]);C!==0&&(l[x].area=Math.abs(C),f===void 0&&(f=C<0),f===C<0?(g&&u.push(g),g=[l[x]]):g.push(l[x]))}if(g&&u.push(g),r>1)for(let x=0;x<u.length;x++)u[x].length<=r||(f0(u[x],r,1,u[x].length-1,Fp),u[x]=u[x].slice(0,r));return u}function Fp(l,r){return r.area-l.area}function j0(l,r){if(!l)return null;const s=typeof l=="string"?l:l.getPrimary().id;r[s]||(r[s]=[]);const u=Ai.from(l).getPrimary();return r[s].push(u),u.serialize()}function Vp(l,r,s){const u=s.patternDependencies;let g=!1;for(const f of r){const x=f.paint.get(`${l}-pattern`);x.isConstant()||(g=!0),j0(x.constantOr(null),u)&&(g=!0)}return g}function ag(l,r,s,u,g){const f=g.patternDependencies;for(const x of r){const C=x.paint.get(`${l}-pattern`).value;if(C.kind!=="constant"){let M=C.evaluate({zoom:u},s,{},g.availableImages);M=M&&M.name?M.name:M;const $=j0(M,f);$&&(s.patterns[x.id]=$)}}return s}class ld{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new no,this.indexArray=new Fi,this.indexArray2=new pc,this.programConfigurations=new tu(r.layers,{zoom:r.zoom,lut:r.lut}),this.segments=new Aa,this.segments2=new Aa,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.projection=r.projection}updateFootprints(r,s){}populate(r,s,u,g){this.hasPattern=Vp("fill",this.layers,s);const f=this.layers[0].layout.get("fill-sort-key"),x=[];for(const{feature:C,id:M,index:$,sourceLayerIndex:T}of r){const k=this.layers[0]._featureFilter.needGeometry,I=X(C,k);if(!this.layers[0]._featureFilter.filter(new Cn(this.zoom),I,u))continue;const P=f?f.evaluate(I,{},u,s.availableImages):void 0,R={id:M,properties:C.properties,type:C.type,sourceLayerIndex:T,index:$,geometry:k?I.geometry:Z(C,u,g),patterns:{},sortKey:P};x.push(R)}f&&x.sort((C,M)=>C.sortKey-M.sortKey);for(const C of x){const{geometry:M,index:$,sourceLayerIndex:T}=C;if(this.hasPattern){const k=ag("fill",this.layers,C,this.zoom,s);this.patternFeatures.push(k)}else this.addFeature(C,M,$,u,{},s.availableImages,s.brightness);s.featureIndex.insert(r[$].feature,M,$,T,this.index)}}update(r,s,u,g,f,x,C){this.programConfigurations.updatePaintArrays(r,s,f,u,g,x,C)}addFeatures(r,s,u,g,f,x){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,s,u,g,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,q_),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,s,u,g,f,x=[],C){for(const M of pf(s,500)){let $=0;for(const j of M)$+=j.length;const T=this.segments.prepareSegment($,this.layoutVertexArray,this.indexArray),k=T.vertexLength,I=[],P=[];for(const j of M){if(j.length===0)continue;j!==M[0]&&P.push(I.length/2);const W=this.segments2.prepareSegment(j.length,this.layoutVertexArray,this.indexArray2),K=W.vertexLength;this.layoutVertexArray.emplaceBack(j[0].x,j[0].y),this.indexArray2.emplaceBack(K+j.length-1,K),I.push(j[0].x),I.push(j[0].y);for(let ae=1;ae<j.length;ae++)this.layoutVertexArray.emplaceBack(j[ae].x,j[ae].y),this.indexArray2.emplaceBack(K+ae-1,K+ae),I.push(j[ae].x),I.push(j[ae].y);W.vertexLength+=j.length,W.primitiveLength+=j.length}const R=df(I,P);for(let j=0;j<R.length;j+=3)this.indexArray.emplaceBack(k+R[j],k+R[j+1],k+R[j+2]);T.vertexLength+=$,T.primitiveLength+=R.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,f,x,g,C)}}let wc,Up,eb,kx;Tr(ld,"FillBucket",{omit:["layers","patternFeatures"]});class O0{constructor(r,s,u,g){if(this.triangleCount=s.length/3,this.min=new dt(0,0),this.max=new dt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||r.length===0)return;const[f,x]=[r[0].clone(),r[0].clone()];for(let k=1;k<r.length;++k){const I=r[k];f.x=Math.min(f.x,I.x),f.y=Math.min(f.y,I.y),x.x=Math.max(x.x,I.x),x.y=Math.max(x.y,I.y)}if(g){const k=Math.ceil(Math.max(x.x-f.x,x.y-f.y)/g);u=Math.max(u,k)}if(u===0)return;this.min=f,this.max=x;const C=this.max.sub(this.min);C.x=Math.max(C.x,1),C.y=Math.max(C.y,1);const M=Math.max(C.x,C.y)/u;this.cellsX=Math.max(1,Math.ceil(C.x/M)),this.cellsY=Math.max(1,Math.ceil(C.y/M)),this.xScale=1/M,this.yScale=1/M;const $=[];for(let k=0;k<this.triangleCount;k++){const I=r[s[3*k+0]].sub(this.min),P=r[s[3*k+1]].sub(this.min),R=r[s[3*k+2]].sub(this.min),j=Sc(Math.floor(Math.min(I.x,P.x,R.x)),this.xScale,this.cellsX),W=Sc(Math.floor(Math.max(I.x,P.x,R.x)),this.xScale,this.cellsX),K=Sc(Math.floor(Math.min(I.y,P.y,R.y)),this.yScale,this.cellsY),ae=Sc(Math.floor(Math.max(I.y,P.y,R.y)),this.yScale,this.cellsY),ie=new dt(0,0),J=new dt(0,0),le=new dt(0,0),fe=new dt(0,0);for(let _e=K;_e<=ae;++_e){ie.y=J.y=_e*M,le.y=fe.y=(_e+1)*M;for(let je=j;je<=W;++je)ie.x=le.x=je*M,J.x=fe.x=(je+1)*M,(lt(I,P,R,ie,J,fe)||lt(I,P,R,ie,fe,le))&&$.push({cellIdx:_e*this.cellsX+je,triIdx:k})}}if($.length===0)return;$.sort((k,I)=>k.cellIdx-I.cellIdx||k.triIdx-I.triIdx);let T=0;for(;T<$.length;){const k=$[T].cellIdx,I={start:this.payload.length,len:0};for(;T<$.length&&$[T].cellIdx===k;)++I.len,this.payload.push($[T++].triIdx);this.cells[k]=I}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(r,s){if(this.triangleCount===0||this.cells.length===0||r.x>this.max.x||this.min.x>r.x||r.y>this.max.y||this.min.y>r.y)return;const u=Sc(r.x-this.min.x,this.xScale,this.cellsX),g=Sc(r.y-this.min.y,this.yScale,this.cellsY),f=this.cells[g*this.cellsX+u];if(f){this._lazyInitLookup();for(let x=0;x<f.len;x++){const C=this.payload[f.start+x],M=Math.floor(C/8),$=1<<C%8;if(!(this.lookup[M]&$)&&(this.lookup[M]|=$,s.push(C),s.length===this.triangleCount))return}}}query(r,s,u){if(this.triangleCount===0||this.cells.length===0||r.x>this.max.x||this.min.x>s.x||r.y>this.max.y||this.min.y>s.y)return;this._lazyInitLookup();const g=Sc(r.x-this.min.x,this.xScale,this.cellsX),f=Sc(s.x-this.min.x,this.xScale,this.cellsX),x=Sc(r.y-this.min.y,this.yScale,this.cellsY),C=Sc(s.y-this.min.y,this.yScale,this.cellsY);for(let M=x;M<=C;M++)for(let $=g;$<=f;$++){const T=this.cells[M*this.cellsX+$];if(T)for(let k=0;k<T.len;k++){const I=this.payload[T.start+k],P=Math.floor(I/8),R=1<<I%8;if(!(this.lookup[P]&R)&&(this.lookup[P]|=R,u.push(I),u.length===this.triangleCount))return}}}}function Sc(l,r,s){return Math.max(0,Math.min(s-1,Math.floor(l*r)))}Tr(O0,"TriangleGridIndex");class Rx{constructor(r){this.zoom=r.zoom,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.footprints=[]}updateFootprints(r,s){for(const u of this.footprints)s.push({footprint:u,id:r})}populate(r,s,u,g){const f=[];for(const{feature:x,id:C,index:M,sourceLayerIndex:$}of r){const T=this.layers[0]._featureFilter.needGeometry,k=X(x,T);if(!this.layers[0]._featureFilter.filter(new Cn(this.zoom),k,u))continue;const I={id:C,properties:x.properties,type:x.type,sourceLayerIndex:$,index:M,geometry:T?k.geometry:Z(x,u,g),patterns:{}};f.push(I)}for(const x of f){const{geometry:C,index:M,sourceLayerIndex:$}=x;this.addFeature(x,C,M,u,{},s.availableImages,s.brightness),s.featureIndex.insert(r[M].feature,C,M,$,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(r){}update(r,s,u,g,f,x,C){}destroy(){}addFeature(r,s,u,g,f,x=[],C){for(const M of pf(s,2)){const $=[],T=[],k=[],I=new dt(1/0,1/0),P=new dt(-1/0,-1/0);for(const W of M)if(W.length!==0){W!==M[0]&&k.push(T.length/2);for(let K=0;K<W.length;K++)T.push(W[K].x),T.push(W[K].y),$.push(W[K]),I.x=Math.min(I.x,W[K].x),I.y=Math.min(I.y,W[K].y),P.x=Math.max(P.x,W[K].x),P.y=Math.max(P.y,W[K].y)}const R=df(T,k),j=new O0($,R,8,256);this.footprints.push({vertices:$,indices:R,grid:j,min:I,max:P})}}}Tr(Rx,"ClipBucket",{omit:["layers"]});const C2=Fn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Ix=Fn([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),tb=Fn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),rb=Fn([{name:"a_join_normal_inside",components:3,type:"Int16"}]),D2=Fn([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),zx=Fn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Lx}=C2;var $x,nb,mf,ab,F0,ga,V0,gf={};function U0(){if(nb)return $x;nb=1;var l=yt();function r(g,f,x,C,M){this.properties={},this.extent=x,this.type=0,this._pbf=g,this._geometry=-1,this._keys=C,this._values=M,g.readFields(s,this,f)}function s(g,f,x){g==1?f.id=x.readVarint():g==2?function(C,M){for(var $=C.readVarint()+C.pos;C.pos<$;){var T=M._keys[C.readVarint()],k=M._values[C.readVarint()];M.properties[T]=k}}(x,f):g==3?f.type=x.readVarint():g==4&&(f._geometry=x.pos)}function u(g){for(var f,x,C=0,M=0,$=g.length,T=$-1;M<$;T=M++)C+=((x=g[T]).x-(f=g[M]).x)*(f.y+x.y);return C}return $x=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var f,x=g.readVarint()+g.pos,C=1,M=0,$=0,T=0,k=[];g.pos<x;){if(M<=0){var I=g.readVarint();C=7&I,M=I>>3}if(M--,C===1||C===2)$+=g.readSVarint(),T+=g.readSVarint(),C===1&&(f&&k.push(f),f=[]),f.push(new l($,T));else{if(C!==7)throw new Error("unknown command "+C);f&&f.push(f[0].clone())}}return f&&k.push(f),k},r.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var f=g.readVarint()+g.pos,x=1,C=0,M=0,$=0,T=1/0,k=-1/0,I=1/0,P=-1/0;g.pos<f;){if(C<=0){var R=g.readVarint();x=7&R,C=R>>3}if(C--,x===1||x===2)(M+=g.readSVarint())<T&&(T=M),M>k&&(k=M),($+=g.readSVarint())<I&&(I=$),$>P&&(P=$);else if(x!==7)throw new Error("unknown command "+x)}return[T,I,k,P]},r.prototype.toGeoJSON=function(g,f,x){var C,M,$=this.extent*Math.pow(2,x),T=this.extent*g,k=this.extent*f,I=this.loadGeometry(),P=r.types[this.type];function R(K){for(var ae=0;ae<K.length;ae++){var ie=K[ae];K[ae]=[360*(ie.x+T)/$-180,360/Math.PI*Math.atan(Math.exp((180-360*(ie.y+k)/$)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(C=0;C<I.length;C++)j[C]=I[C][0];R(I=j);break;case 2:for(C=0;C<I.length;C++)R(I[C]);break;case 3:for(I=function(K){var ae=K.length;if(ae<=1)return[K];for(var ie,J,le=[],fe=0;fe<ae;fe++){var _e=u(K[fe]);_e!==0&&(J===void 0&&(J=_e<0),J===_e<0?(ie&&le.push(ie),ie=[K[fe]]):ie.push(K[fe]))}return ie&&le.push(ie),le}(I),C=0;C<I.length;C++)for(M=0;M<I[C].length;M++)R(I[C][M])}I.length===1?I=I[0]:P="Multi"+P;var W={type:"Feature",geometry:{type:P,coordinates:I},properties:this.properties};return"id"in this&&(W.id=this.id),W},$x}function Bx(){if(ab)return mf;ab=1;var l=U0();function r(u,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(s,this,g),this.length=this._features.length}function s(u,g,f){u===15?g.version=f.readVarint():u===1?g.name=f.readString():u===5?g.extent=f.readVarint():u===2?g._features.push(f.pos):u===3?g._keys.push(f.readString()):u===4&&g._values.push(function(x){for(var C=null,M=x.readVarint()+x.pos;x.pos<M;){var $=x.readVarint()>>3;C=$===1?x.readString():$===2?x.readFloat():$===3?x.readDouble():$===4?x.readVarint64():$===5?x.readVarint():$===6?x.readSVarint():$===7?x.readBoolean():null}return C}(f))}return mf=r,r.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var g=this._pbf.readVarint()+this._pbf.pos;return new l(this._pbf,g,this.extent,this._keys,this._values)},mf}function G0(){return V0||(V0=1,gf.VectorTile=function(){if(ga)return F0;ga=1;var l=Bx();function r(s,u,g){if(s===3){var f=new l(g,g.readVarint()+g.pos);f.length&&(u[f.name]=f)}}return F0=function(s,u){this.layers=s.readFields(r,{},u)},F0}(),gf.VectorTileFeature=U0(),gf.VectorTileLayer=Bx()),gf}var iu=G0();class su extends dt{constructor(r,s,u){super(r,s),this.z=u}}class yf extends su{constructor(r,s,u,g){super(r,s,u),this.w=g}}function ig(l,r,s,u){const g=[],f=u===0?(x,C,M,$,T,k)=>{x.push(new dt(k,M+(k-C)/($-C)*(T-M)))}:(x,C,M,$,T,k)=>{x.push(new dt(C+(k-M)/(T-M)*($-C),k))};for(const x of l){const C=[];for(const M of x){if(M.length<=2)continue;const $=[];for(let I=0;I<M.length-1;I++){const P=M[I].x,R=M[I].y,j=M[I+1].x,W=M[I+1].y,K=u===0?P:R,ae=u===0?j:W;K<r?ae>r&&f($,P,R,j,W,r):K>s?ae<s&&f($,P,R,j,W,s):$.push(M[I]),ae<r&&K>=r&&f($,P,R,j,W,r),ae>s&&K<=s&&f($,P,R,j,W,s)}let T=M[M.length-1];const k=u===0?T.x:T.y;k>=r&&k<=s&&$.push(T),$.length&&(T=$[$.length-1],$[0].x===T.x&&$[0].y===T.y||$.push($[0]),C.push($))}C.length&&g.push(C)}return g}function ib(l,r,s,u){const g=s==="x"?"y":"x",f=(u-l[s])/(r[s]-l[s]);l[g]=l[g]+(r[g]-l[g])*f,l[s]=u,l.hasOwnProperty("z")&&(l.z=Or(l.z,r.z,f)),l.hasOwnProperty("w")&&(l.w=Or(l.w,r.w,f))}function sb(l,r,s,u){const g=s,f=u;for(const x of["x","y"]){let C=l,M=r;C[x]>=M[x]&&(C=r,M=l),C[x]<g&&M[x]>g&&ib(C,M,x,g),C[x]<f&&M[x]>f&&ib(M,C,x,f)}}const sg=Number.MAX_SAFE_INTEGER;function Nx(l,r,s,u){return l.order<r||l.order===sg||!(l.clipMask&s)||function(g,f){return f.length!==0&&f.find(x=>x===g)===void 0}(u,l.clipScope)}function xf(l,r){return l.x-r.x||l.y-r.y}function Oa(l,r){return xf(l.min,r.min)===0&&xf(l.max,r.max)===0}function og(l,r){return!(l.min.x>r.max.x||l.max.x<r.min.x||l.min.y>r.max.y||l.max.y<r.min.y)}function hs(l,r){if(l.length!==r.length)return!1;for(let s=0;s<l.length;s++)if(l[s].sourceId!==r[s].sourceId||!Oa(l[s],r[s])||l[s].order!==r[s].order||l[s].clipMask!==r[s].clipMask||!$t(l[s].clipScope,r[s].clipScope))return!1;return!0}function ob(l,r,s){const u=1/lr,g=1/(1<<s.canonical.z),f=(r.x*u+s.canonical.x)*g+s.wrap,x=(r.y*u+s.canonical.y)*g;return{min:new dt((l.x*u+s.canonical.x)*g+s.wrap,(l.y*u+s.canonical.y)*g),max:new dt(f,x)}}function jx(l,r,s){const u=1<<s.canonical.z,g=((r.x-s.wrap)*u-s.canonical.x)*lr,f=(r.y*u-s.canonical.y)*lr;return{min:new dt(((l.x-s.wrap)*u-s.canonical.x)*lr,(l.y*u-s.canonical.y)*lr),max:new dt(g,f)}}function H0(l,r,s,u,g,f,x){const C=l.indices,M=l.vertices,$=[];for(let T=u;T<u+g;T+=3){const k=r[s[T+0]+f],I=r[s[T+1]+f],P=r[s[T+2]+f],R=Math.min(k.x,I.x,P.x),j=Math.max(k.x,I.x,P.x),W=Math.min(k.y,I.y,P.y),K=Math.max(k.y,I.y,P.y);$.length=0,l.grid.query(new dt(R,W),new dt(j,K),$);for(let ae=0;ae<$.length;ae++){const ie=$[ae];if(lt(M[C[3*ie+0]],M[C[3*ie+1]],M[C[3*ie+2]],k,I,P,x))return!0}}return!1}function lg(l,r,s,u){if(!l||!s)return!1;let g=l.vertices;if(!r.canonical.equals(u.canonical)||r.wrap!==u.wrap){if(s.vertices.length<l.vertices.length)return lg(s,u,l,r);const f=r.canonical,x=u.canonical,C=Math.pow(2,x.z-f.z);g=l.vertices.map(M=>new dt((M.x+f.x*lr)*C-x.x*lr,(M.y+f.y*lr)*C-x.y*lr))}return H0(s,g,l.indices,0,l.indices.length,0,0)}function Ox(l,r,s,u){const g=Math.pow(2,u.z-s.z);return new dt((l+s.x*lr)*g-u.x*lr,(r+s.y*lr)*g-u.y*lr)}function Fx(l,r){const s=[];r.grid.queryPoint(l,s);const u=r.indices,g=r.vertices;for(let f=0;f<s.length;f++){const x=s[f];if(nt([g[u[3*x+0]],g[u[3*x+1]],g[u[3*x+2]]],l))return!0}return!1}const cg=[new dt(0,0),new dt(lr,0),new dt(lr,lr),new dt(0,lr)];function q0(l,r){const s=[];let u=[];if(!r||l.length<2)return[l];if(l.length===2)return Ct(l[0],l[1],cg)?[l]:[];for(let g=0;g<l.length+2;g++){const f=l[g%l.length],x=l[(g+1)%l.length],C=Ct(g===0?l[l.length-1]:l[(g-1)%l.length],f,cg),M=Ct(f,x,cg),$=C||M;$&&u.push(f),$&&M||u.length>0&&(u.length>1&&s.push(u),u=[])}return u.length>1&&s.push(u),s}const Vx=iu.VectorTileFeature.types,lb=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],P2=["fill-extrusion-flood-light-ground-radius"],cb=Math.pow(2,13),M2=Math.pow(2,15)-1,ub=new dt(0,1),fo=2147483648;function Gp(l,r,s,u,g,f,x,C){l.emplaceBack((r<<1)+x,(s<<1)+f,(Math.floor(u*cb)<<1)+g,Math.round(C))}function vf(l,r,s){l.emplaceBack(r.x*lr,r.y*lr,s?1:0)}function W0(l,r,s,u,g,f){l.emplaceBack(r.x,r.y,(s.x<<1)+u,(s.y<<1)+g,f)}function ug(l,r,s){l.emplaceBack(r.x,r.y,r.z,s[0]*16384,s[1]*16384,s[2]*16384)}class K0{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class db{constructor(){this.centroidXY=new dt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new dt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new dt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new dt(this.max.x-this.min.x,this.max.y-this.min.y)}}class Rl{constructor(){this.acc=new dt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(r,s){r.min.x===Number.MAX_VALUE&&(r.min.x=r.max.x=s.x,r.min.y=r.max.y=s.y)}appendEdge(r,s,u){this.accCount++,this.acc._add(s);let g=!!this.borders;s.x<r.min.x?(r.min.x=s.x,g=!0):s.x>r.max.x&&(r.max.x=s.x,g=!0),s.y<r.min.y?(r.min.y=s.y,g=!0):s.y>r.max.y&&(r.max.y=s.y,g=!0),((s.x===0||s.x===lr)&&s.x===u.x)!=((s.y===0||s.y===lr)&&s.y===u.y)&&this.processBorderOverlap(s,u),g&&this.checkBorderIntersection(s,u)}checkBorderIntersection(r,s){s.x<0!=r.x<0&&this.addBorderIntersection(0,Or(s.y,r.y,(0-s.x)/(r.x-s.x))),s.x>lr!=r.x>lr&&this.addBorderIntersection(1,Or(s.y,r.y,(lr-s.x)/(r.x-s.x))),s.y<0!=r.y<0&&this.addBorderIntersection(2,Or(s.x,r.x,(0-s.y)/(r.y-s.y))),s.y>lr!=r.y>lr&&this.addBorderIntersection(3,Or(s.x,r.x,(lr-s.y)/(r.y-s.y)))}addBorderIntersection(r,s){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[r];s<u[0]&&(u[0]=s),s>u[1]&&(u[1]=s)}processBorderOverlap(r,s){if(r.x===s.x){if(r.y===s.y)return;const u=r.x===0?0:1;this.addBorderIntersection(u,s.y),this.addBorderIntersection(u,r.y)}else{const u=r.y===0?2:3;this.addBorderIntersection(u,s.x),this.addBorderIntersection(u,r.x)}}centroid(){return this.accCount===0?new dt(0,0):new dt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((r,s)=>r+ +(s[0]!==Number.MAX_VALUE),0):0}}function Z0(l,r){const s=l.add(r)._unit(),u=fr(l.x*s.x+l.y*s.y,-1,1);var g,f,x;return x=Math.acos(u),Math.min(4,Math.max(-4,Math.tan(x)))/4*M2*((g=l).x*(f=r).y-g.y*f.x<0?-1:1)}const hb=[l=>l.x<0,l=>l.x>lr,l=>l.y<0,l=>l.y>lr];function fb(l,r,s,u){const g=[4];if(u===0)return g;s._mult(u);const f=l.sub(s),x=r.sub(s),C=[l,r,f,x];for(let M=0;M<4;M++)for(const $ of C)if(hb[M]($)){g.push(M);break}return g}class Hp{constructor(r){this.vertexArray=new Sp,this.indexArray=new Fi,this.programConfigurations=new tu(r.layers,{zoom:r.zoom,lut:r.lut},s=>P2.includes(s)),this._segments=new Aa,this.hiddenByLandmarkVertexArray=new Mp,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Aa}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(r,s,u,g=!1){const f=r.length;if(f>2){let x=Math.max(0,this._segments.get().length-1);const C=this._segments._prepareSegment(4*f,this.vertexArray.length,2*this._segmentToGroundQuads[x].length);let M;x!==this._segments.get().length-1&&(x++,this._segmentToGroundQuads[x]=[],this._segmentToRegionTriCounts[x]=[0,0,0,0,0]);{const $=r[0],T=r[1];M=Z0($.sub(r[f-1])._perp()._unit(),T.sub($)._perp()._unit())}for(let $=0;$<f;$++){const T=$===f-1?0:$+1,k=r[$],I=r[T],P=r[T===f-1?0:T+1],R=I.sub(k)._perp()._unit(),j=Z0(R,P.sub(I)._perp()._unit()),W=M,K=j;if(Gx(k,I,s)||g&&pb(k,s)&&pb(I,s)){M=j;continue}const ae=C.vertexLength;W0(this.vertexArray,k,I,1,1,W),W0(this.vertexArray,k,I,1,0,W),W0(this.vertexArray,k,I,0,1,K),W0(this.vertexArray,k,I,0,0,K),C.vertexLength+=4;const ie=fb(k,I,R,u);for(const J of ie)this._segmentToGroundQuads[x].push({id:ae,region:J}),this._segmentToRegionTriCounts[x][J]+=2,C.primitiveLength+=2;M=j}}}prepareBorderSegments(){if(!this.hasData())return;const r=this._segments.get(),s=r.length;for(let u=0;u<s;u++)this._segmentToGroundQuads[u].sort((g,f)=>g.region-f.region);for(let u=0;u<s;u++){const g=this._segmentToGroundQuads[u],f=r[u],x=this._segmentToRegionTriCounts[u];x.reduce((M,$)=>M+$,0);let C=0;for(let M=0;M<=4;M++){const $=x[M];if($!==0){let T=this.regionSegments[M];T||(T=this.regionSegments[M]=new Aa);const k={vertexOffset:f.vertexOffset,primitiveOffset:f.primitiveOffset+C,vertexLength:f.vertexLength,primitiveLength:$};T.get().push(k)}C+=$}for(let M=0;M<g.length;M++){const $=g[M].id;this.indexArray.emplaceBack($,$+1,$+3),this.indexArray.emplaceBack($,$+3,$+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(r,s,u,g,f,x){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,r,s,u,g,f,x)}upload(r){this.hasData()&&(this.vertexBuffer=r.createVertexBuffer(this.vertexArray,Ix.members),this.indexBuffer=r.createIndexBuffer(this.indexArray))}uploadPaintProperties(r){this.hasData()&&this.programConfigurations.upload(r)}update(r,s,u,g,f,x,C){this.hasData()&&this.programConfigurations.updatePaintArrays(r,s,u,g,f,x,C)}updateHiddenByLandmark(r){if(!this.hasData())return;const s=r.groundVertexCount+r.groundVertexArrayOffset;if(r.groundVertexCount===0)return;const u=r.flags&fo?1:0;for(let g=r.groundVertexArrayOffset;g<s;++g)this.hiddenByLandmarkVertexArray.emplace(g,u);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(r){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=r.createVertexBuffer(this.hiddenByLandmarkVertexArray,D2.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let r=0;r<=4;r++){const s=this.regionSegments[r];s&&s.destroy()}}}}class po{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=r.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Fi,this.footprintVertices=new no,this.footprintSegments=[],this.layoutVertexArray=new cc,this.centroidVertexArray=new A0,this.wallVertexArray=new th,this.indexArray=new Fi,this.programConfigurations=new tu(r.layers,{zoom:r.zoom,lut:r.lut},s=>lb.includes(s)),this.segments=new Aa,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.groundEffect=new Hp(r),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(r,s){}populate(r,s,u,g){this.features=[],this.hasPattern=Vp("fill-extrusion",this.layers,s),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=o(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:f,id:x,index:C,sourceLayerIndex:M}of r){const $=this.layers[0]._featureFilter.needGeometry,T=X(f,$);if(!this.layers[0]._featureFilter.filter(new Cn(this.zoom),T,u))continue;const k={id:x,sourceLayerIndex:M,index:C,geometry:$?T.geometry:Z(f,u,g),properties:f.properties,type:f.type,patterns:{}},I=this.layoutVertexArray.length,P=Vx[k.type]==="Polygon";if(this.hasPattern)this.features.push(ag("fill-extrusion",this.layers,k,this.zoom,s));else if(this.wallMode)for(const R of k.geometry)for(const j of q0(R,P))this.addFeature(k,[j],C,u,{},s.availableImages,g,s.brightness);else this.addFeature(k,k.geometry,C,u,{},s.availableImages,g,s.brightness);s.featureIndex.insert(f,k.geometry,C,M,this.index,I)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(r,s,u,g,f,x){for(const C of this.features){const M=Vx[C.type]==="Polygon",{geometry:$}=C;if(this.wallMode)for(const T of $)for(const k of q0(T,M))this.addFeature(C,[k],C.index,s,u,g,f,x);else this.addFeature(C,$,C.index,s,u,g,f,x)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(r,s,u,g,f,x,C){this.programConfigurations.updatePaintArrays(r,s,f,u,g,x,C),this.groundEffect.update(r,s,f,u,g,x,C)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Lx),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.wallVertexBuffer=r.createVertexBuffer(this.wallVertexArray,rb.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=r.createVertexBuffer(this.layoutVertexExtArray,zx.members,!0)),this.groundEffect.upload(r)),this.groundEffect.uploadPaintProperties(r),this.programConfigurations.upload(r),this.uploaded=!0}uploadCentroid(r){this.groundEffect.uploadHiddenByLandmark(r),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,tb.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,s,u,g,f,x,C,M){const $=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(r,{})/this.tileToMeter,T=[new dt(0,0),new dt(lr,lr)],k=C.projection,I=k.name==="globe",P=this.wallMode||Vx[r.type]==="Polygon",R=new Rl;R.centroidDataIndex=this.centroidData.length;const j=new db,W=this.layers[0].paint.get("fill-extrusion-base").evaluate(r,{},g)<=0,K=this.layers[0].paint.get("fill-extrusion-height").evaluate(r,{},g);let ae;if(j.height=K,j.vertexArrayOffset=this.layoutVertexArray.length,j.groundVertexArrayOffset=this.groundEffect.vertexArray.length,I&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Qu),this.wallMode){if(I)return void Wr("Non zero fill-extrusion-line-width is not yet supported on globe.");if(s.length!==1)return;ae=function(Be){const Qe=Be[0].x===Be[Be.length-1].x&&Be[0].y===Be[Be.length-1].y;(function(gr){let jt=0;const Mr=gr.length;for(let sr=0;sr<Mr;sr++)jt+=(gr[(sr+1)%Mr].x-gr[sr].x)*(gr[(sr+1)%Mr].y+gr[sr].y);return jt>=0})(Be)||(Be=Be.reverse());const rt={geometry:[],joinNormals:[],indices:[]},st=[],it=[],ct=[];let gt=Be.length;for(;gt>=2&&Be[gt-1].equals(Be[gt-2]);)gt--;if(gt<(Qe?3:2))return rt;let vt,ht,Rt,Yt,Lt,ar=0;for(;ar<gt-1&&Be[ar].equals(Be[ar+1]);)ar++;Qe&&(vt=Be[gt-2],Lt=Be[ar].sub(vt)._unit()._perp());for(let gr=ar;gr<gt;gr++){if(Rt=gr===gt-1?Qe?Be[ar+1]:void 0:Be[gr+1],Rt&&Be[gr].equals(Rt))continue;Lt&&(Yt=Lt),vt&&(ht=vt),vt=Be[gr],Lt=Rt?Rt.sub(vt)._unit()._perp():Yt,Yt=Yt||Lt;let jt=Yt.add(Lt);jt.x===0&&jt.y===0||jt._unit();const Mr=jt.x*Lt.x+jt.y*Lt.y,sr=Mr!==0?1/Mr:1/0,Cr=Yt.x*Lt.y-Yt.y*Lt.x>0;let Vr="miter";const on=2;Vr==="miter"&&sr>on&&(Vr="bevel"),Vr==="bevel"&&(sr>100&&(Vr="flipbevel"),sr<on&&(Vr="miter"));const fn=(wn,pn,Pn,_a)=>{const ca=new dt(wn.x,wn.y),tn=new dt(wn.x,wn.y);ca.x+=pn.x*_a,ca.y+=pn.y*_a,tn.x-=pn.x*Math.max(Pn,1),tn.y-=pn.y*Math.max(Pn,1),ct.push(pn),st.push(ca),it.push(tn)};if(Vr==="miter")jt._mult(sr),fn(vt,jt,0,0);else if(Vr==="flipbevel")jt=Lt.mult(-1),fn(vt,jt,0,0),fn(vt,jt.mult(-1),0,0);else{const wn=-Math.sqrt(sr*sr-1),pn=Cr?wn:0,Pn=Cr?0:wn;ht&&fn(vt,Yt,pn,Pn),Rt&&fn(vt,Lt,pn,Pn)}}rt.geometry=[...st,...it.reverse(),st[0]],rt.joinNormals=[...ct,...ct.reverse(),ct[ct.length-1]];const nr=rt.geometry.length-1;for(let gr=0;gr<nr/2;gr++)if(gr+1<nr/2){let jt=gr,Mr=gr+1,sr=nr-1-gr,Cr=nr-2-gr;jt=jt===0?nr-1:jt-1,Mr=Mr===0?nr-1:Mr-1,sr=sr===0?nr-1:sr-1,Cr=Cr===0?nr-1:Cr-1,rt.indices.push(sr),rt.indices.push(Mr),rt.indices.push(jt),rt.indices.push(sr),rt.indices.push(Cr),rt.indices.push(Mr)}return rt}(s[0]),s=[ae.geometry]}const ie=(Be,Qe)=>Be<(Qe.length-1)/2||Be===Qe.length-1,J=this.wallMode?[s]:pf(s,500);for(let Be=J.length-1;Be>=0;Be--){const Qe=J[Be];(Qe.length===0||(le=Qe[0]).every(Ue=>Ue.x<=0)||le.every(Ue=>Ue.x>=lr)||le.every(Ue=>Ue.y<=0)||le.every(Ue=>Ue.y>=lr))&&J.splice(Be,1)}var le;let fe;if(I)fe=gb(J,T,g);else{fe=[];for(const Be of J)fe.push({polygon:Be,bounds:T})}const _e=P?this.edgeRadius:0,je=_e>0&&this.zoom<17,Ne=(Be,Qe)=>{if(Be.length===0)return!1;const Ue=Be[Be.length-1];return Qe.x===Ue.x&&Qe.y===Ue.y};for(const{polygon:Be,bounds:Qe}of fe){let Ue=0,rt=0;for(const gt of Be)P&&!gt[0].equals(gt[gt.length-1])&&gt.push(gt[0]),rt+=P?gt.length-1:gt.length;const st=this.segments.prepareSegment((P?5:4)*rt,this.layoutVertexArray,this.indexArray);j.footprintSegIdx<0&&(j.footprintSegIdx=this.footprintSegments.length),j.polygonSegIdx<0&&(j.polygonSegIdx=this.polygonSegments.length);const it={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},ct=new K0;if(ct.vertexOffset=this.footprintVertices.length,ct.indexOffset=3*this.footprintIndices.length,ct.ringIndices=[],P){const gt=[],vt=[];Ue=st.vertexLength;for(let Rt=0;Rt<Be.length;Rt++){const Yt=Be[Rt];Yt.length&&Rt!==0&&vt.push(gt.length/2);const Lt=[];let ar,nr;ar=Yt[1].sub(Yt[0])._perp()._unit(),ct.ringIndices.push(Yt.length-1);for(let gr=1;gr<Yt.length;gr++){const jt=Yt[gr],Mr=Yt[gr===Yt.length-1?1:gr+1],sr=jt.clone();if(_e){nr=Mr.sub(jt)._perp()._unit();const Cr=ar.add(nr)._unit(),Vr=_e*Math.min(4,1/(ar.x*Cr.x+ar.y*Cr.y));sr.x+=Vr*Cr.x,sr.y+=Vr*Cr.y,sr.x=Math.round(sr.x),sr.y=Math.round(sr.y),ar=nr}if(!W||_e!==0&&!je||Ne(Lt,sr)||Lt.push(sr),Gp(this.layoutVertexArray,sr.x,sr.y,0,0,1,1,0),this.wallMode){const Cr=ie(gr,Yt);vf(this.wallVertexArray,ae.joinNormals[gr],!Cr)}st.vertexLength++,this.footprintVertices.emplaceBack(jt.x,jt.y),gt.push(jt.x,jt.y),I&&ug(this.layoutVertexExtArray,k.projectTilePoint(sr.x,sr.y,g),k.upVector(g,sr.x,sr.y))}W&&(_e===0||je)&&(Lt.length!==0&&Ne(Lt,Lt[0])&&Lt.pop(),this.groundEffect.addData(Lt,Qe,$))}const ht=this.wallMode?ae.indices:df(gt,vt);for(let Rt=0;Rt<ht.length;Rt+=3)this.footprintIndices.emplaceBack(ct.vertexOffset+ht[Rt+0],ct.vertexOffset+ht[Rt+1],ct.vertexOffset+ht[Rt+2]),this.indexArray.emplaceBack(Ue+ht[Rt],Ue+ht[Rt+2],Ue+ht[Rt+1]),st.primitiveLength++;ct.indexCount+=ht.length,ct.vertexCount+=this.footprintVertices.length-ct.vertexOffset}for(let gt=0;gt<Be.length;gt++){const vt=Be[gt];R.startRing(j,vt[0]);let ht=vt.length>4&&_f(vt[vt.length-2],vt[0],vt[1]),Rt=_e?X0(vt[vt.length-2],vt[0],vt[1],_e):0;const Yt=[];let Lt,ar,nr;ar=vt[1].sub(vt[0])._perp()._unit();let gr=!0;for(let jt=1,Mr=0;jt<vt.length;jt++){let sr=vt[jt-1],Cr=vt[jt];const Vr=vt[jt===vt.length-1?1:jt+1];if(R.appendEdge(j,Cr,sr),Gx(Cr,sr,Qe)){_e&&(ar=Vr.sub(Cr)._perp()._unit(),gr=!gr);continue}const on=Cr.sub(sr)._perp(),fn=on.x/(Math.abs(on.x)+Math.abs(on.y)),wn=on.y>0?1:0,pn=sr.dist(Cr);if(Mr+pn>32768&&(Mr=0),_e){nr=Vr.sub(Cr)._perp()._unit();let tn=ou(sr,Cr,Vr,Ux(ar,nr),_e);isNaN(tn)&&(tn=0);const ua=Cr.sub(sr)._unit();sr=sr.add(ua.mult(Rt))._round(),Cr=Cr.add(ua.mult(-tn))._round(),Rt=tn,ar=nr,W&&this.zoom>=17&&(Ne(Yt,sr)||Yt.push(sr),Ne(Yt,Cr)||Yt.push(Cr))}const Pn=st.vertexLength,_a=vt.length>4&&_f(sr,Cr,Vr);let ca=Hx(Mr,ht,gr);if(Gp(this.layoutVertexArray,sr.x,sr.y,fn,wn,0,0,ca),Gp(this.layoutVertexArray,sr.x,sr.y,fn,wn,0,1,ca),this.wallMode){const tn=ie(jt-1,vt),ua=ae.joinNormals[jt-1];vf(this.wallVertexArray,ua,tn),vf(this.wallVertexArray,ua,tn)}if(Mr+=pn,ca=Hx(Mr,_a,!gr),ht=_a,Gp(this.layoutVertexArray,Cr.x,Cr.y,fn,wn,0,0,ca),Gp(this.layoutVertexArray,Cr.x,Cr.y,fn,wn,0,1,ca),this.wallMode){const tn=ie(jt,vt),ua=ae.joinNormals[jt];vf(this.wallVertexArray,ua,tn),vf(this.wallVertexArray,ua,tn)}if(st.vertexLength+=4,this.indexArray.emplaceBack(Pn+0,Pn+1,Pn+2),this.indexArray.emplaceBack(Pn+1,Pn+3,Pn+2),st.primitiveLength+=2,_e){const tn=Ue+(jt===1?vt.length-2:jt-2),ua=jt===1?Ue:tn+1;if(this.indexArray.emplaceBack(Pn+1,tn,Pn+3),this.indexArray.emplaceBack(tn,ua,Pn+3),st.primitiveLength+=2,Lt===void 0&&(Lt=Pn),!Gx(Vr,vt[jt],Qe)){const sa=jt===vt.length-1?Lt:st.vertexLength;this.indexArray.emplaceBack(Pn+2,Pn+3,sa),this.indexArray.emplaceBack(Pn+3,sa+1,sa),this.indexArray.emplaceBack(Pn+3,ua,sa+1),st.primitiveLength+=3}gr=!gr}if(I){const tn=this.layoutVertexExtArray,ua=k.projectTilePoint(sr.x,sr.y,g),sa=k.projectTilePoint(Cr.x,Cr.y,g),ba=k.upVector(g,sr.x,sr.y),wi=k.upVector(g,Cr.x,Cr.y);ug(tn,ua,ba),ug(tn,ua,ba),ug(tn,sa,wi),ug(tn,sa,wi)}}P&&(Ue+=vt.length-1),W&&_e&&this.zoom>=17&&(Yt.length!==0&&Ne(Yt,Yt[0])&&Yt.pop(),this.groundEffect.addData(Yt,Qe,$,_e>0))}this.footprintSegments.push(ct),it.triangleCount=this.indexArray.length-it.triangleArrayOffset,this.polygonSegments.push(it),++j.footprintSegLen,++j.polygonSegLen}if(j.vertexCount=this.layoutVertexArray.length-j.vertexArrayOffset,j.groundVertexCount=this.groundEffect.vertexArray.length-j.groundVertexArrayOffset,j.vertexCount!==0){if(j.centroidXY=R.borders?ub:this.encodeCentroid(R,j),this.centroidData.push(j),R.borders){this.featuresOnBorder.push(R);const Be=this.featuresOnBorder.length-1;for(let Qe=0;Qe<R.borders.length;Qe++)R.borders[Qe][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[Qe].push(Be)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,f,x,g,M),this.groundEffect.addPaintPropertiesData(r,u,f,x,g,M),this.maxHeight=Math.max(this.maxHeight,K)}}sortBorders(){for(let r=0;r<this.borderFeatureIndices.length;r++)this.borderFeatureIndices[r].sort((s,u)=>this.featuresOnBorder[s].borders[r][0]-this.featuresOnBorder[u].borders[r][0])}splitToSubtiles(){const r=[];for(let C=0;C<this.centroidData.length;C++){const M=this.centroidData[C],$=+(M.min.y+M.max.y>lr),T=2*$+(+(M.min.x+M.max.x>lr)^$);for(let k=0;k<M.polygonSegLen;k++){const I=M.polygonSegIdx+k;r.push({centroidIdx:C,subtile:T,polygonSegmentIdx:I,triangleSegmentIdx:this.polygonSegments[I].triangleSegIdx})}}const s=new Fi;r.sort((C,M)=>C.triangleSegmentIdx===M.triangleSegmentIdx?C.subtile-M.subtile:C.triangleSegmentIdx-M.triangleSegmentIdx);let u=0,g=0,f=0;for(const C of r){if(C.triangleSegmentIdx!==u)break;f++}const x=r.length;for(;g!==r.length;){u=r[g].triangleSegmentIdx;let C=0,M=g,$=g;for(let T=M;T<f&&r[T].subtile===C;T++)$++;for(;M!==f;){const T=r[M];C=T.subtile;const k=this.centroidData[T.centroidIdx].min.clone(),I=this.centroidData[T.centroidIdx].max.clone(),P={vertexOffset:this.segments.segments[u].vertexOffset,primitiveOffset:s.length,vertexLength:this.segments.segments[u].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let R=M;R<$;R++){const j=r[R],W=this.polygonSegments[j.polygonSegmentIdx],K=this.centroidData[j.centroidIdx].min,ae=this.centroidData[j.centroidIdx].max,ie=this.indexArray.uint16;for(let J=W.triangleArrayOffset;J<W.triangleArrayOffset+W.triangleCount;J++)s.emplaceBack(ie[3*J],ie[3*J+1],ie[3*J+2]);P.primitiveLength+=W.triangleCount,k.x=Math.min(k.x,K.x),k.y=Math.min(k.y,K.y),I.x=Math.max(I.x,ae.x),I.y=Math.max(I.y,ae.y)}P.primitiveLength>0&&this.triangleSubSegments.push({segment:P,min:k,max:I}),M=$;for(let R=M;R<f&&r[R].subtile===r[M].subtile;R++)$++}g=f;for(let T=g;T<x&&r[T].triangleSegmentIdx===r[g].triangleSegmentIdx;T++)f++}s._trim(),this.indexArray=s}getVisibleSegments(r,s,u){const g=new Aa;if(this.wallMode){for(const j of this.triangleSubSegments)g.segments.push(j.segment);return g}let f=0,x=0;const C=1<<r.canonical.z;if(s){const j=s.getMinMaxForTile(r);j&&(f=j.min,x=j.max)}x+=this.maxHeight;const M=r.toUnwrapped();let $;const T=[M.canonical.x/C+M.wrap,M.canonical.y/C],k=[(M.canonical.x+1)/C+M.wrap,(M.canonical.y+1)/C],I=(j,W,K)=>[j[0]*(1-K[0])+W[0]*K[0],j[1]*(1-K[1])+W[1]*K[1]],P=[],R=[];for(const j of this.triangleSubSegments){P[0]=j.min.x/lr,P[1]=j.min.y/lr,R[0]=j.max.x/lr,R[1]=j.max.y/lr;const W=I(T,k,P),K=I(T,k,R);if(new jr([W[0],W[1],f],[K[0],K[1],x]).intersectsPrecise(u)===0){$&&(g.segments.push($),$=void 0);continue}const ae=j.segment;$&&$.vertexOffset!==ae.vertexOffset&&(g.segments.push($),$=void 0),$?($.vertexLength+=ae.vertexLength,$.primitiveLength+=ae.primitiveLength):$={vertexOffset:ae.vertexOffset,primitiveLength:ae.primitiveLength,vertexLength:ae.vertexLength,primitiveOffset:ae.primitiveOffset,sortKey:void 0,vaos:{}}}return $&&g.segments.push($),g}encodeCentroid(r,s){const u=r.centroid(),g=s.span(),f=Math.min(7,Math.round(g.x*this.tileToMeter/10)),x=Math.min(7,Math.round(g.y*this.tileToMeter/10));return new dt(fr(u.x,1,lr-1)<<3|f,fr(u.y,1,lr-1)<<3|x)}encodeBorderCentroid(r){if(!r.borders)return new dt(0,0);const s=r.borders,u=Number.MAX_VALUE;if(s[0][0]!==u||s[1][0]!==u){const g=s[0][0]!==u?0:1;return new dt(6|(s[0][0]!==u?0:65528),(s[g][0]+s[g][1])/2<<3|6)}{const g=s[2][0]!==u?2:3;return new dt((s[g][0]+s[g][1])/2<<3|6,6|(s[2][0]!==u?0:65528))}}showCentroid(r){const s=this.centroidData[r.centroidDataIndex];s.flags&=fo,s.centroidXY.x=0,s.centroidXY.y=0,this.writeCentroidToBuffer(s)}writeCentroidToBuffer(r){this.groundEffect.updateHiddenByLandmark(r);const s=r.vertexArrayOffset,u=r.vertexCount+r.vertexArrayOffset,g=r.flags&fo?ub:r.centroidXY,f=this.centroidVertexArray.geta_centroid_pos0(s);if(this.centroidVertexArray.geta_centroid_pos1(s)!==g.y||f!==g.x){for(let x=s;x<u;++x)this.centroidVertexArray.emplace(x,g.x,g.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const r of this.centroidData)this.writeCentroidToBuffer(r)}updateReplacement(r,s,u){if(s.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=s.updateTime;const g=s.getReplacementRegionsForTile(r.toUnwrapped());if(hs(this.activeReplacements,g))return;if(this.activeReplacements=g,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const x of this.centroidData)x.flags&=2147483647;const f=[];for(const x of this.activeReplacements){if(x.order<u)continue;const C=Math.max(1,Math.pow(2,x.footprintTileId.canonical.z-r.canonical.z));for(const M of this.centroidData)if(!(M.flags&fo||x.min.x>M.max.x||M.min.x>x.max.x||x.min.y>M.max.y||M.min.y>x.max.y))for(let $=0;$<M.footprintSegLen;$++){const T=this.footprintSegments[M.footprintSegIdx+$];if(f.length=0,A2(this.footprintVertices,T.vertexOffset,T.vertexCount,x.footprintTileId.canonical,r.canonical,f),H0(x.footprint,f,this.footprintIndices.uint16,T.indexOffset,T.indexCount,-T.vertexOffset,-C)){M.flags|=fo;break}}}for(const x of this.centroidData)this.writeCentroidToBuffer(x);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(r,s,u){let g=!1;for(let f=0;f<u.footprintSegLen;f++){const x=this.footprintSegments[u.footprintSegIdx+f];let C=0;for(const M of x.ringIndices){for(let $=C,T=M+C-1;$<M+C;T=$++){const k=this.footprintVertices.int16[2*($+x.vertexOffset)+0],I=this.footprintVertices.int16[2*($+x.vertexOffset)+1],P=this.footprintVertices.int16[2*(T+x.vertexOffset)+1];I>s!=P>s&&r<(this.footprintVertices.int16[2*(T+x.vertexOffset)+0]-k)*(s-I)/(P-I)+k&&(g=!g)}C=M}}return g}getHeightAtTileCoord(r,s){let u=Number.NEGATIVE_INFINITY,g=!0;const f=4*(r+lr)*lr+(s+lr);if(this.partLookup.hasOwnProperty(f)){const x=this.partLookup[f];return x?{height:x.height,hidden:!!(x.flags&fo)}:void 0}for(const x of this.centroidData)r>x.max.x||x.min.x>r||s>x.max.y||x.min.y>s||this.footprintContainsPoint(r,s,x)&&x&&x.height>u&&(u=x.height,this.partLookup[f]=x,g=!!(x.flags&fo));if(u!==Number.NEGATIVE_INFINITY)return{height:u,hidden:g};this.partLookup[f]=void 0}}function Ux(l,r){const s=l.add(r)._unit();return l.x*s.x+l.y*s.y}function X0(l,r,s,u){const g=r.sub(l)._perp()._unit(),f=s.sub(r)._perp()._unit();return ou(l,r,s,Ux(g,f),u)}function ou(l,r,s,u,g){const f=Math.sqrt(1-u*u);return Math.min(l.dist(r)/3,r.dist(s)/3,g*f/u)}function Gx(l,r,s){return l.x<s[0].x&&r.x<s[0].x||l.x>s[1].x&&r.x>s[1].x||l.y<s[0].y&&r.y<s[0].y||l.y>s[1].y&&r.y>s[1].y}function pb(l,r){return l.x<r[0].x||l.x>r[1].x||l.y<r[0].y||l.y>r[1].y}function _f(l,r,s){if(l.x<0||l.x>=lr||r.x<0||r.x>=lr||s.x<0||s.x>=lr)return!1;const u=s.sub(r),g=u.perp(),f=l.sub(r);return(u.x*f.x+u.y*f.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(f.x*f.x+f.y*f.y))>-.866&&g.x*f.x+g.y*f.y<0}function Hx(l,r,s){const u=r?2|l:-3&l;return s?1|u:-2&u}function mb(){const l=Math.PI/32,r=Math.tan(l),s=nu;return s*Math.sqrt(1+2*r*r)-s}function gb(l,r,s){const u=1<<s.z,g=qs(s.x/u),f=qs((s.x+1)/u),x=Li(s.y/u),C=Li((s.y+1)/u);return function(M,$,T,k,I=0,P){const R=[];if(!M.length||!T||!k)return R;const j=(fe,_e)=>{for(const je of fe)R.push({polygon:je,bounds:_e})},W=Math.ceil(Math.log2(T)),K=Math.ceil(Math.log2(k)),ae=W-K,ie=[];for(let fe=0;fe<Math.abs(ae);fe++)ie.push(ae>0?0:1);for(let fe=0;fe<Math.min(W,K);fe++)ie.push(0),ie.push(1);let J=M;if(J=ig(J,$[0].y-I,$[1].y+I,1),J=ig(J,$[0].x-I,$[1].x+I,0),!J.length)return R;const le=[];for(ie.length?le.push({polygons:J,bounds:$,depth:0}):j(J,$);le.length;){const fe=le.pop(),_e=fe.depth,je=ie[_e],Ne=fe.bounds[0],Be=fe.bounds[1],Qe=je===0?Ne.x:Ne.y,Ue=je===0?Be.x:Be.y,rt=P?P(je,Qe,Ue):.5*(Qe+Ue),st=ig(fe.polygons,Qe-I,rt+I,je),it=ig(fe.polygons,rt-I,Ue+I,je);if(st.length){const ct=[Ne,new dt(je===0?rt:Be.x,je===1?rt:Be.y)];ie.length>_e+1?le.push({polygons:st,bounds:ct,depth:_e+1}):j(st,ct)}if(it.length){const ct=[new dt(je===0?rt:Ne.x,je===1?rt:Ne.y),Be];ie.length>_e+1?le.push({polygons:it,bounds:ct,depth:_e+1}):j(it,ct)}}return R}(l,r,Math.ceil((f-g)/11.25),Math.ceil((x-C)/11.25),1,(M,$,T)=>{if(M===0)return .5*($+T);{const k=Li((s.y+$/lr)/u);return(ls(.5*(Li((s.y+T/lr)/u)+k))*u-s.y)*lr}})}function A2(l,r,s,u,g,f){const x=Math.pow(2,u.z-g.z);for(let C=0;C<s;C++){let M=l.int16[2*(C+r)+0],$=l.int16[2*(C+r)+1];M=(M+g.x*lr)*x-u.x*lr,$=($+g.y*lr)*x-u.y*lr,f.push(new dt(M,$))}}let yb,xb;function dg(l,r){return l.x*r.x+l.y*r.y}function vb(l,r){if(l.length===1){let s=0;const u=r[s++];let g;for(;!g||u.equals(g);)if(g=r[s++],!g)return 1/0;for(;s<r.length;s++){const f=r[s],x=l[0],C=g.sub(u),M=f.sub(u),$=x.sub(u),T=dg(C,C),k=dg(C,M),I=dg(M,M),P=dg($,C),R=dg($,M),j=T*I-k*k,W=(I*P-k*R)/j,K=(T*R-k*P)/j,ae=u.z*(1-W-K)+g.z*W+f.z*K;if(isFinite(ae))return ae}return 1/0}{let s=1/0;for(const u of r)s=Math.min(s,u.z);return s}}function qx(l,r,s,u,g,f,x,C){const M=x*g.getElevationAt(l,r,!0,!0),$=f[0]!==0,T=$?f[1]===0?x*(f[0]/7-450):x*function(k,I,P){const R=Math.floor(I[0]/8),j=Math.floor(I[1]/8),W=10*(I[0]-8*R),K=10*(I[1]-8*j),ae=k.getElevationAt(R,j,!0,!0),ie=k.getMeterToDEM(P),J=Math.floor(.5*(W*ie-1)),le=Math.floor(.5*(K*ie-1)),fe=k.tileCoordToPixel(R,j),_e=2*J+1,je=2*le+1,Ne=function(it,ct,gt,vt,ht){return[it.getElevationAtPixel(ct,gt,!0),it.getElevationAtPixel(ct+ht,gt,!0),it.getElevationAtPixel(ct,gt+ht,!0),it.getElevationAtPixel(ct+vt,gt+ht,!0)]}(k,fe.x-J,fe.y-le,_e,je),Be=Math.abs(Ne[0]-Ne[1]),Qe=Math.abs(Ne[2]-Ne[3]),Ue=Math.abs(Ne[0]-Ne[2])+Math.abs(Ne[1]-Ne[3]),rt=Math.min(.25,.5*ie*(Be+Qe)/_e),st=Math.min(.25,.5*ie*Ue/je);return ae+Math.max(rt*W,st*K)}(g,f,C):M;return{base:M+(s===0?-1:s),top:$?Math.max(T+u,M+s+2):M+u}}Tr(po,"FillExtrusionBucket",{omit:["layers","features"]}),Tr(db,"PartData"),Tr(K0,"FootprintSegment"),Tr(Rl,"BorderCentroidData"),Tr(Hp,"GroundEffect");const qp=Fn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),hg=Fn([{name:"a_z_offset_width",components:2,type:"Float32"}],4),{members:_b}=qp,k2=Fn([{name:"a_packed",components:4,type:"Float32"}]),{members:Wp}=k2,fg=Fn([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:bb}=fg;class pg{constructor(r,s){this.width=r,this.height=s,this.nextRow=0,this.image=new bc({width:r,height:s}),this.positions={},this.uploaded=!1}getDash(r,s){const u=this.getKey(r,s);return this.positions[u]}trim(){const r=this.width,s=this.height=Za(this.nextRow);this.image.resize({width:r,height:s})}getKey(r,s){return r.join(",")+s}getDashRanges(r,s,u){const g=[];let f=r.length%2==1?-r[r.length-1]*u:0,x=r[0]*u,C=!0;g.push({left:f,right:x,isDash:C,zeroLength:r[0]===0});let M=r[0];for(let $=1;$<r.length;$++){C=!C;const T=r[$];f=M*u,M+=T,x=M*u,g.push({left:f,right:x,isDash:C,zeroLength:T===0})}return g}addRoundDash(r,s,u){const g=s/2;for(let f=-u;f<=u;f++){const x=this.width*(this.nextRow+u+f);let C=0,M=r[C];for(let $=0;$<this.width;$++){$/M.right>1&&(M=r[++C]);const T=Math.abs($-M.left),k=Math.abs($-M.right),I=Math.min(T,k);let P;const R=f/u*(g+1);if(M.isDash){const j=g-Math.abs(R);P=Math.sqrt(I*I+j*j)}else P=g-Math.sqrt(I*I+R*R);this.image.data[x+$]=Math.max(0,Math.min(255,P+128))}}}addRegularDash(r,s){for(let M=r.length-1;M>=0;--M){const $=r[M],T=r[M+1];$.zeroLength?r.splice(M,1):T&&T.isDash===$.isDash&&(T.left=$.left,r.splice(M,1))}const u=r[0],g=r[r.length-1];u.isDash===g.isDash&&(u.left=g.left-this.width,g.right=u.right+this.width);const f=this.width*this.nextRow;let x=0,C=r[x];for(let M=0;M<this.width;M++){M/C.right>1&&(C=r[++x]);const $=Math.abs(M-C.left),T=Math.abs(M-C.right),k=Math.min($,T);this.image.data[f+M]=Math.max(0,Math.min(255,(C.isDash?k:-k)+s+128))}}addDash(r,s){const u=this.getKey(r,s);if(this.positions[u])return this.positions[u];const g=s==="round",f=g?7:0,x=2*f+1;if(this.nextRow+x>this.height)return Wr("LineAtlas out of space"),null;r.length===0&&r.push(1);let C=0;for(let T=0;T<r.length;T++)r[T]<0&&(Wr("Negative value is found in line dasharray, replacing values with 0"),r[T]=0),C+=r[T];if(C!==0){const T=this.width/C,k=this.getDashRanges(r,this.width,T);g?this.addRoundDash(k,T,f):this.addRegularDash(k,s==="square"?.5*T:0)}const M=this.nextRow+f;this.nextRow+=x;const $={tl:[M,f],br:[C,0]};return this.positions[u]=$,$}}Tr(pg,"LineAtlas");const Wx=iu.VectorTileFeature.types,Kx=Math.cos(Math.PI/180*37.5),Y0=Math.cos(Math.PI/180*5);class J0{constructor(r){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.zoom=r.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.index=r.index,this.projection=r.projection,this.hasPattern=!1,this.hasZOffset=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new ao,this.layoutVertexArray2=new uc,this.patternVertexArray=new dc,this.indexArray=new Fi,this.programConfigurations=new tu(r.layers,{zoom:r.zoom,lut:r.lut}),this.segments=new Aa,this.maxLineLength=0,this.zOffsetVertexArray=new mc,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.tessellationStep=r.tessellationStep?r.tessellationStep:lr/64}updateFootprints(r,s){}populate(r,s,u,g){this.hasPattern=Vp("line",this.layers,s);const f=this.layers[0].layout.get("line-sort-key");this.tileToMeter=o(u),this.hasZOffset=!this.layers[0].isDraped();const x=this.layers[0].layout.get("line-elevation-reference");this.hasZOffset&&x==="none"&&Wr(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`);const C=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.hasZOffset&&C!==void 0;const M=[];for(const{feature:I,id:P,index:R,sourceLayerIndex:j}of r){const W=this.layers[0]._featureFilter.needGeometry,K=X(I,W);if(!this.layers[0]._featureFilter.filter(new Cn(this.zoom),K,u))continue;const ae=f?f.evaluate(K,{},u):void 0,ie={id:P,properties:I.properties,type:I.type,sourceLayerIndex:j,index:R,geometry:W?K.geometry:Z(I,u,g),patterns:{},sortKey:ae};M.push(ie)}f&&M.sort((I,P)=>I.sortKey-P.sortKey);const{lineAtlas:$,featureIndex:T}=s,k=this.addConstantDashes($);for(const I of M){const{geometry:P,index:R,sourceLayerIndex:j}=I;if(k&&this.addFeatureDashes(I,$),this.hasPattern){const W=ag("line",this.layers,I,this.zoom,s);this.patternFeatures.push(W)}else this.addFeature(I,P,R,u,$.positions,s.availableImages,s.brightness);T.insert(r[R].feature,P,R,j,this.index)}}addConstantDashes(r){let s=!1;for(const u of this.layers){const g=u.paint.get("line-dasharray").value,f=u.layout.get("line-cap").value;if(g.kind!=="constant"||f.kind!=="constant")s=!0;else{const x=f.value,C=g.value;if(!C)continue;r.addDash(C,x)}}return s}addFeatureDashes(r,s){const u=this.zoom;for(const g of this.layers){const f=g.paint.get("line-dasharray").value,x=g.layout.get("line-cap").value;if(f.kind==="constant"&&x.kind==="constant")continue;let C,M;if(f.kind==="constant"){if(C=f.value,!C)continue}else C=f.evaluate({zoom:u},r);M=x.kind==="constant"?x.value:x.evaluate({zoom:u},r),s.addDash(C,M),r.patterns[g.id]=s.getKey(C,M)}}update(r,s,u,g,f,x,C){this.programConfigurations.updatePaintArrays(r,s,f,u,g,x,C)}addFeatures(r,s,u,g,f,x){for(const C of this.patternFeatures)this.addFeature(C,C.geometry,C.index,s,u,g,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,Wp)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=r.createVertexBuffer(this.patternVertexArray,bb)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=r.createVertexBuffer(this.zOffsetVertexArray,hg.members,!0)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,_b),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,s,u,g,f,x,C){const M=this.layers[0].layout,$=M.get("line-join").evaluate(r,{}),T=M.get("line-cap").evaluate(r,{}),k=M.get("line-miter-limit"),I=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(r),this.lineFeature=r,this.zOffsetValue=M.get("line-z-offset").value;const P=this.layers[0].paint.get("line-width").value;P.kind!=="constant"&&P.isLineProgressConstant===!1&&(this.variableWidthValue=P);for(const R of s)this.addLine(R,r,g,$,T,k,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,f,x,g,C)}addLine(r,s,u,g,f,x,C){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const M=g==="none";if(this.patternJoinNone=this.hasPattern&&M,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ie=0;ie<r.length-1;ie++)this.totalDistance+=r[ie].dist(r[ie+1]);this.totalFeatureLength=this.totalDistance/(this.lineClips.end-this.lineClips.start),this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const $=Wx[s.type]==="Polygon";let T=r.length;for(;T>=2&&r[T-1].equals(r[T-2]);)T--;let k=0;for(;k<T-1&&r[k].equals(r[k+1]);)k++;if(T<($?3:2))return;g==="bevel"&&(x=1.05);const I=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let P,R,j,W,K,ae;this.e1=this.e2=-1,$&&(P=r[T-2],K=r[k].sub(P)._unit()._perp());for(let ie=k;ie<T;ie++){if(j=ie===T-1?$?r[k+1]:void 0:r[ie+1],j&&r[ie].equals(j))continue;K&&(W=K),P&&(R=P),P=r[ie],ae=this.evaluateLineProgressFeatures(R?R.dist(P):0),K=j?j.sub(P)._unit()._perp():W,W=W||K;const J=R&&j;let le=J?g:$||M?"butt":f;const fe=W.x*K.x+W.y*K.y;if(M){const st=function(it){if(it.patternJoinNone){const ct=it.segmentPoints.length/2,gt=it.lineSoFar-it.segmentStart;for(let vt=0;vt<ct;++vt){const ht=it.segmentPoints[2*vt+1],Rt=Math.round(it.segmentPoints[2*vt])+.5+.25*ht;it.patternVertexArray.emplaceBack(Rt,gt,it.segmentStart),it.patternVertexArray.emplaceBack(Rt,gt,it.segmentStart)}it.segmentPoints.length=0}it.e1=it.e2=-1};if(J&&fe<Y0){this.updateDistance(R,P),this.addCurrentVertex(P,W,1,1,I,ae),st(this),this.addCurrentVertex(P,K,-1,-1,I,ae);continue}if(R){if(!j){this.updateDistance(R,P),this.addCurrentVertex(P,W,1,1,I,ae),st(this);continue}le="miter"}}let _e=W.add(K);_e.x===0&&_e.y===0||_e._unit();const je=_e.x*K.x+_e.y*K.y,Ne=je!==0?1/je:1/0,Be=2*Math.sqrt(2-2*je),Qe=je<Kx&&R&&j,Ue=W.x*K.y-W.y*K.x>0,rt=this.overscaling<=16?15*lr/(512*this.overscaling):0;if(J&&le==="round"){if(Ne<C)le="miter";else if(Ne<=2){const st=Q0(P,-10,lr+10);le=this.hasZOffset&&(st||this.hasCrossSlope)?"miter":"fakeround"}}if(le==="miter"&&Ne>x&&(le="bevel"),le==="bevel"&&(Ne>2&&(le="flipbevel"),Ne<x&&(le="miter")),R&&!(le==="miter"&&Qe)&&this.updateDistance(R,P),le==="miter")if(Qe){const st=P.dist(R);if(st>2*rt){const ct=P.sub(P.sub(R)._mult(rt/st)._round());this.updateDistance(R,ct),this.addCurrentVertex(ct,W,0,0,I,ae),R=ct}this.updateDistance(R,P),_e._mult(Ne),this.addCurrentVertex(P,_e,0,0,I,ae);const it=P.dist(j);if(it>2*rt){const ct=P.add(j.sub(P)._mult(rt/it)._round());this.updateDistance(P,ct),this.addCurrentVertex(ct,K,0,0,I,ae),P=ct}}else _e._mult(Ne),this.addCurrentVertex(P,_e,0,0,I,ae);else if(le==="flipbevel"){if(Ne>100)_e=K.mult(-1);else{const st=Ne*W.add(K).mag()/W.sub(K).mag();_e._perp()._mult(st*(Ue?-1:1))}this.addCurrentVertex(P,_e,0,0,I,ae),this.addCurrentVertex(P,_e.mult(-1),0,0,I,ae)}else if(le==="bevel"||le==="fakeround"){ae!=null&&R&&this.addCurrentVertex(P,W,-1,-1,I,ae);const st=P.dist(R)<=2*rt&&le!=="bevel",it=_e.mult(Ue?1:-1);it._mult(Ne);const ct=K.mult(Ue?-1:1),gt=W.mult(Ue?-1:1),vt=this.evaluateLineProgressFeatures(this.distance);if(ae==null&&(this.addHalfVertex(P,it.x,it.y,!1,!Ue,0,I,vt),st||this.addHalfVertex(P,it.x+2*gt.x,it.y+2*gt.y,!1,Ue,0,I,vt)),le==="fakeround"){const ht=Math.round(180*Be/Math.PI/20);this.addHalfVertex(P,gt.x,gt.y,!1,Ue,0,I,vt);for(let Rt=0;Rt<ht;Rt++){let Yt=Rt/ht;if(Yt!==.5){const ar=Yt-.5;Yt+=Yt*ar*(Yt-1)*((1.0904+fe*(fe*(3.55645-1.43519*fe)-3.2452))*ar*ar+(.848013+fe*(.215638*fe-1.06021)))}const Lt=ct.sub(gt)._mult(Yt)._add(gt)._unit();this.addHalfVertex(P,Lt.x,Lt.y,!1,Ue,0,I,vt)}this.addHalfVertex(P,ct.x,ct.y,!1,Ue,0,I,vt)}st||ae!=null||this.addHalfVertex(P,it.x+2*ct.x,it.y+2*ct.y,!1,Ue,0,I,vt),ae!=null&&j&&this.addCurrentVertex(P,K,1,1,I,ae)}else le==="butt"?this.addCurrentVertex(P,_e,0,0,I,ae):le==="square"?(R||this.addCurrentVertex(P,_e,-1,-1,I,ae),this.addCurrentVertex(P,_e,0,0,I,ae),R&&this.addCurrentVertex(P,_e,1,1,I,ae)):le==="round"&&(R&&(this.addCurrentVertex(P,W,0,0,I,ae),this.addCurrentVertex(P,W,1,1,I,ae,!0)),j&&(this.addCurrentVertex(P,K,-1,-1,I,ae,!0),this.addCurrentVertex(P,K,0,0,I,ae)))}}addVerticesTo(r,s,u,g,f,x,C,M,$,T){const k=(s.w-r.w)/this.tessellationStep|0;let I=0;const P=this.scaledDistance;if(k>1){this.lineSoFar=r.w;const j=(s.x-r.x)/k,W=(s.y-r.y)/k,K=(s.z-r.z)/k,ae=(s.w-r.w)/k;for(let ie=1;ie<k;++ie){r.x+=j,r.y+=W,r.z+=K,this.lineSoFar+=ae,I+=ae;const J=this.evaluateLineProgressFeatures(this.prevDistance+I);this.scaledDistance=(this.prevDistance+I)/this.totalDistance,this.addHalfVertex(r,u,g,T,!1,C,$,J),this.addHalfVertex(r,f,x,T,!0,-M,$,J)}}this.lineSoFar=s.w,this.scaledDistance=P;const R=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(s,u,g,T,!1,C,$,R),this.addHalfVertex(s,f,x,T,!0,-M,$,R)}evaluateLineProgressFeatures(r){if(!this.variableWidthValue&&!this.hasZOffset)return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+r)/this.totalFeatureLength):Wr(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let s=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(s=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.hasZOffset?this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:s}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:s}:{zOffset:0,variableWidth:s}}addCurrentVertex(r,s,u,g,f,x,C=!1){const M=s.x+s.y*u,$=s.y-s.x*u,T=s.y*g-s.x,k=-s.y-s.x*g;if(x!=null){const I=this.hasZOffset,P=-10,R=lr+10,j=x.zOffset,W=new yf(r.x,r.y,j,this.lineSoFar),K=!!I&&Q0(r,P,R),ae=this.lineSoFar,ie=this.distance;if(this.currentVertex)if(K){const J=this.currentVertexIsOutside,le=this.currentVertex,fe=new yf(r.x,r.y,j,this.lineSoFar);if(sb(le,fe,P,R),!Q0(fe,P,R)){if(J){this.e1=this.e2=-1,this.distance-=le.dist(W),this.lineSoFar=le.w;const _e=this.evaluateLineProgressFeatures(le.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(le,M,$,C,!1,u,f,_e),this.addHalfVertex(le,T,k,C,!0,-g,f,_e),this.prevDistance=this.distance}this.distance=this.prevDistance+le.dist(fe),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(le,fe,M,$,T,k,u,g,f,C),this.distance=ie,this.scaledDistance=this.distance/this.totalDistance}}else{const J=this.currentVertex;if(this.currentVertexIsOutside){sb(J,W,P,R),this.e1=this.e2=-1,this.distance-=J.dist(W),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=J.w;const le=this.evaluateLineProgressFeatures(J.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(J,M,$,C,!1,u,f,le),this.addHalfVertex(J,T,k,C,!0,-g,f,le),this.prevDistance=this.distance,this.distance=ie,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(J,W,M,$,T,k,u,g,f,C)}else K||(this.addHalfVertex(r,M,$,C,!1,u,f,x),this.addHalfVertex(r,T,k,C,!0,-g,f,x));this.currentVertex=W,this.currentVertexIsOutside=K,this.lineSoFar=ae}else this.addHalfVertex(r,M,$,C,!1,u,f,x),this.addHalfVertex(r,T,k,C,!0,-g,f,x)}addHalfVertex({x:r,y:s},u,g,f,x,C,M,$){this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),x||this.segmentPoints.push(this.lineSoFar-this.segmentStart,C)),this.layoutVertexArray.emplaceBack((r<<1)+(f?1:0),(s<<1)+(x?1:0),Math.round(63*u)+128,Math.round(63*g)+128,1+(C===0?0:C<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const T=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),M.primitiveLength++),x?this.e2=T:this.e1=T,$!=null&&this.zOffsetVertexArray.emplaceBack($.zOffset,$.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(r,s){this.prevDistance=this.distance,this.distance+=r.dist(s),this.updateScaledDistance()}}function Q0(l,r,s){return l.x<r||l.x>s||l.y<r||l.y>s}let wb,Zx;function Kp(l,r,s){return r*(lr/(l.tileSize*Math.pow(2,s-l.tileID.overscaledZ)))}Tr(J0,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const Sb=(l,r,s)=>(1-s)*l+s*r;function Tb(l,r){return 1/Kp(l,1,r.tileZoom)}function Eb(l,r,s,u){return l.translatePosMatrix(u||r.tileID.projMatrix,r,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const mg=l=>{const r=[];gg(l)&&r.push("RENDER_LINE_DASH"),l.paint.get("line-gradient")&&r.push("RENDER_LINE_GRADIENT");const s=l.paint.get("line-trim-offset");s[0]===0&&s[1]===0||r.push("RENDER_LINE_TRIM_OFFSET"),l.paint.get("line-border-width").constantOr(1)!==0&&r.push("RENDER_LINE_BORDER");const u=l.layout.get("line-join").constantOr("miter")==="none",g=!!l.paint.get("line-pattern").constantOr(1);return u&&g&&r.push("LINE_JOIN_NONE"),r};function gg(l){const r=l.paint.get("line-dasharray").value;return r.value||r.kind!=="constant"}let yg;const Cb=()=>yg||(yg={layout:wb||(wb=new Ma({"line-cap":new vr(Tt.layout_line["line-cap"]),"line-join":new vr(Tt.layout_line["line-join"]),"line-miter-limit":new tr(Tt.layout_line["line-miter-limit"]),"line-round-limit":new tr(Tt.layout_line["line-round-limit"]),"line-sort-key":new vr(Tt.layout_line["line-sort-key"]),"line-z-offset":new vr(Tt.layout_line["line-z-offset"]),"line-elevation-reference":new tr(Tt.layout_line["line-elevation-reference"]),"line-cross-slope":new tr(Tt.layout_line["line-cross-slope"]),visibility:new tr(Tt.layout_line.visibility),"line-width-unit":new tr(Tt.layout_line["line-width-unit"])})),paint:Zx||(Zx=new Ma({"line-opacity":new vr(Tt.paint_line["line-opacity"]),"line-color":new vr(Tt.paint_line["line-color"]),"line-translate":new tr(Tt.paint_line["line-translate"]),"line-translate-anchor":new tr(Tt.paint_line["line-translate-anchor"]),"line-width":new vr(Tt.paint_line["line-width"]),"line-gap-width":new vr(Tt.paint_line["line-gap-width"]),"line-offset":new vr(Tt.paint_line["line-offset"]),"line-blur":new vr(Tt.paint_line["line-blur"]),"line-dasharray":new vr(Tt.paint_line["line-dasharray"]),"line-pattern":new vr(Tt.paint_line["line-pattern"]),"line-gradient":new lc(Tt.paint_line["line-gradient"]),"line-trim-offset":new tr(Tt.paint_line["line-trim-offset"]),"line-trim-fade-range":new tr(Tt.paint_line["line-trim-fade-range"]),"line-trim-color":new tr(Tt.paint_line["line-trim-color"]),"line-emissive-strength":new tr(Tt.paint_line["line-emissive-strength"]),"line-border-width":new vr(Tt.paint_line["line-border-width"]),"line-border-color":new vr(Tt.paint_line["line-border-color"]),"line-occlusion-opacity":new tr(Tt.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},yg);class xg extends vr{possiblyEvaluate(r,s){return s=new Cn(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,transition:s.transition}),super.possiblyEvaluate(r,s)}evaluate(r,s,u,g){return s=Br({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(r,s,u,g)}}let vg;function Xx(l,r){return r>0?r+2*l:l}const Db=Fn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Pb=Fn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Mb=Fn([{name:"a_projected_pos",components:4,type:"Float32"}],4);Fn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Yx=Fn([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),Ab=Fn([{name:"a_texb",components:2,type:"Uint16"}]),ey=Fn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),R2=Fn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);Fn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const kb=Fn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Jx=Fn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Fn([{name:"triangle",components:3,type:"Uint16"}]),Fn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Fn([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),Fn([{type:"Float32",name:"offsetX"}]),Fn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Vi=24;const Oo=128;function Zp(l,r,s,u,g){if(l.kind==="camera")return l.maxSize;if(l.kind==="composite"){const f=r.possiblyEvaluate(new Cn(l.maxZoom),s).evaluate(g,{},s),x=r.possiblyEvaluate(new Cn(l.minZoom),s).evaluate(g,{},s);return Math.max(f,x)}return r.possiblyEvaluate(new Cn(u)).evaluate(g,{},s)}function ty(l,r){const{expression:s}=r;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Cn(l+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:g}=s;let f=0;for(;f<u.length&&u[f]<=l;)f++;f=Math.max(0,f-1);let x=f;for(;x<u.length&&u[x]<l+1;)x++;x=Math.min(u.length-1,x);const C=u[f],M=u[x];return s.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:M,interpolationType:g}:{kind:"camera",minZoom:C,maxZoom:M,minSize:s.evaluate(new Cn(C)),maxSize:s.evaluate(new Cn(M)),interpolationType:g}}}function Xp(l,{uSize:r,uSizeT:s},{lowerSize:u,upperSize:g}){return l.kind==="source"?u/Oo:l.kind==="composite"?Or(u/Oo,g/Oo,s):r}function cl(l,r,s=1){let u=0,g=0;if(l.kind==="constant")g=l.layoutSize*s;else if(l.kind!=="source"){const{interpolationType:f,minZoom:x,maxZoom:C}=l,M=f?fr(Ya.interpolationFactor(f,r,x,C),0,1):0;l.kind==="camera"?g=Or(l.minSize,l.maxSize,M)*s:u=M*s}return{uSizeT:u,uSize:g}}var sh=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Oo,evaluateSizeForFeature:Xp,evaluateSizeForZoom:cl,getRasterizedIconSize:Zp,getSizeData:ty});function oh(l,r,s){return l.sections.forEach(u=>{u.text=function(g,f,x){const C=f.layout.get("text-transform").evaluate(x,{});return C==="uppercase"?g=g.toLocaleUpperCase():C==="lowercase"&&(g=g.toLocaleLowerCase()),na.applyArabicShaping&&(g=na.applyArabicShaping(g)),g}(u.text,r,s)}),l}const cd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function _g(l){return l==="︶"||l==="﹈"||l==="︸"||l==="﹄"||l==="﹂"||l==="︾"||l==="︼"||l==="︺"||l==="︘"||l==="﹀"||l==="︐"||l==="︓"||l==="︔"||l==="｀"||l==="￣"||l==="︑"||l==="︒"}function lh(l){return l==="︵"||l==="﹇"||l==="︷"||l==="﹃"||l==="﹁"||l==="︽"||l==="︻"||l==="︹"||l==="︗"||l==="︿"}var Rb,ry,Yp,Qx={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Ib(){return Rb||(Rb=1,Qx.read=function(l,r,s,u,g){var f,x,C=8*g-u-1,M=(1<<C)-1,$=M>>1,T=-7,k=s?g-1:0,I=s?-1:1,P=l[r+k];for(k+=I,f=P&(1<<-T)-1,P>>=-T,T+=C;T>0;f=256*f+l[r+k],k+=I,T-=8);for(x=f&(1<<-T)-1,f>>=-T,T+=u;T>0;x=256*x+l[r+k],k+=I,T-=8);if(f===0)f=1-$;else{if(f===M)return x?NaN:1/0*(P?-1:1);x+=Math.pow(2,u),f-=$}return(P?-1:1)*x*Math.pow(2,f-u)},Qx.write=function(l,r,s,u,g,f){var x,C,M,$=8*f-g-1,T=(1<<$)-1,k=T>>1,I=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=u?0:f-1,R=u?1:-1,j=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(C=isNaN(r)?1:0,x=T):(x=Math.floor(Math.log(r)/Math.LN2),r*(M=Math.pow(2,-x))<1&&(x--,M*=2),(r+=x+k>=1?I/M:I*Math.pow(2,1-k))*M>=2&&(x++,M/=2),x+k>=T?(C=0,x=T):x+k>=1?(C=(r*M-1)*Math.pow(2,g),x+=k):(C=r*Math.pow(2,k-1)*Math.pow(2,g),x=0));g>=8;l[s+P]=255&C,P+=R,C/=256,g-=8);for(x=x<<g|C,$+=g;$>0;l[s+P]=255&x,P+=R,x/=256,$-=8);l[s+P-R]|=128*j}),Qx}function bg(){if(Yp)return ry;Yp=1,ry=r;var l=Ib();function r(J){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(J)?J:new Uint8Array(J||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var s=4294967296,u=1/s,g=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function f(J){return J.type===r.Bytes?J.readVarint()+J.pos:J.pos+1}function x(J,le,fe){return fe?4294967296*le+(J>>>0):4294967296*(le>>>0)+(J>>>0)}function C(J,le,fe){var _e=le<=16383?1:le<=2097151?2:le<=268435455?3:Math.floor(Math.log(le)/(7*Math.LN2));fe.realloc(_e);for(var je=fe.pos-1;je>=J;je--)fe.buf[je+_e]=fe.buf[je]}function M(J,le){for(var fe=0;fe<J.length;fe++)le.writeVarint(J[fe])}function $(J,le){for(var fe=0;fe<J.length;fe++)le.writeSVarint(J[fe])}function T(J,le){for(var fe=0;fe<J.length;fe++)le.writeFloat(J[fe])}function k(J,le){for(var fe=0;fe<J.length;fe++)le.writeDouble(J[fe])}function I(J,le){for(var fe=0;fe<J.length;fe++)le.writeBoolean(J[fe])}function P(J,le){for(var fe=0;fe<J.length;fe++)le.writeFixed32(J[fe])}function R(J,le){for(var fe=0;fe<J.length;fe++)le.writeSFixed32(J[fe])}function j(J,le){for(var fe=0;fe<J.length;fe++)le.writeFixed64(J[fe])}function W(J,le){for(var fe=0;fe<J.length;fe++)le.writeSFixed64(J[fe])}function K(J,le){return(J[le]|J[le+1]<<8|J[le+2]<<16)+16777216*J[le+3]}function ae(J,le,fe){J[fe]=le,J[fe+1]=le>>>8,J[fe+2]=le>>>16,J[fe+3]=le>>>24}function ie(J,le){return(J[le]|J[le+1]<<8|J[le+2]<<16)+(J[le+3]<<24)}return r.prototype={destroy:function(){this.buf=null},readFields:function(J,le,fe){for(fe=fe||this.length;this.pos<fe;){var _e=this.readVarint(),je=_e>>3,Ne=this.pos;this.type=7&_e,J(je,le,this),this.pos===Ne&&this.skip(_e)}return le},readMessage:function(J,le){return this.readFields(J,le,this.readVarint()+this.pos)},readFixed32:function(){var J=K(this.buf,this.pos);return this.pos+=4,J},readSFixed32:function(){var J=ie(this.buf,this.pos);return this.pos+=4,J},readFixed64:function(){var J=K(this.buf,this.pos)+K(this.buf,this.pos+4)*s;return this.pos+=8,J},readSFixed64:function(){var J=K(this.buf,this.pos)+ie(this.buf,this.pos+4)*s;return this.pos+=8,J},readFloat:function(){var J=l.read(this.buf,this.pos,!0,23,4);return this.pos+=4,J},readDouble:function(){var J=l.read(this.buf,this.pos,!0,52,8);return this.pos+=8,J},readVarint:function(J){var le,fe,_e=this.buf;return le=127&(fe=_e[this.pos++]),fe<128?le:(le|=(127&(fe=_e[this.pos++]))<<7,fe<128?le:(le|=(127&(fe=_e[this.pos++]))<<14,fe<128?le:(le|=(127&(fe=_e[this.pos++]))<<21,fe<128?le:function(je,Ne,Be){var Qe,Ue,rt=Be.buf;if(Qe=(112&(Ue=rt[Be.pos++]))>>4,Ue<128||(Qe|=(127&(Ue=rt[Be.pos++]))<<3,Ue<128)||(Qe|=(127&(Ue=rt[Be.pos++]))<<10,Ue<128)||(Qe|=(127&(Ue=rt[Be.pos++]))<<17,Ue<128)||(Qe|=(127&(Ue=rt[Be.pos++]))<<24,Ue<128)||(Qe|=(1&(Ue=rt[Be.pos++]))<<31,Ue<128))return x(je,Qe,Ne);throw new Error("Expected varint not more than 10 bytes")}(le|=(15&(fe=_e[this.pos]))<<28,J,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var J=this.readVarint();return J%2==1?(J+1)/-2:J/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var J=this.readVarint()+this.pos,le=this.pos;return this.pos=J,J-le>=12&&g?function(fe,_e,je){return g.decode(fe.subarray(_e,je))}(this.buf,le,J):function(fe,_e,je){for(var Ne="",Be=_e;Be<je;){var Qe,Ue,rt,st=fe[Be],it=null,ct=st>239?4:st>223?3:st>191?2:1;if(Be+ct>je)break;ct===1?st<128&&(it=st):ct===2?(192&(Qe=fe[Be+1]))==128&&(it=(31&st)<<6|63&Qe)<=127&&(it=null):ct===3?(Ue=fe[Be+2],(192&(Qe=fe[Be+1]))==128&&(192&Ue)==128&&((it=(15&st)<<12|(63&Qe)<<6|63&Ue)<=2047||it>=55296&&it<=57343)&&(it=null)):ct===4&&(Ue=fe[Be+2],rt=fe[Be+3],(192&(Qe=fe[Be+1]))==128&&(192&Ue)==128&&(192&rt)==128&&((it=(15&st)<<18|(63&Qe)<<12|(63&Ue)<<6|63&rt)<=65535||it>=1114112)&&(it=null)),it===null?(it=65533,ct=1):it>65535&&(it-=65536,Ne+=String.fromCharCode(it>>>10&1023|55296),it=56320|1023&it),Ne+=String.fromCharCode(it),Be+=ct}return Ne}(this.buf,le,J)},readBytes:function(){var J=this.readVarint()+this.pos,le=this.buf.subarray(this.pos,J);return this.pos=J,le},readPackedVarint:function(J,le){if(this.type!==r.Bytes)return J.push(this.readVarint(le));var fe=f(this);for(J=J||[];this.pos<fe;)J.push(this.readVarint(le));return J},readPackedSVarint:function(J){if(this.type!==r.Bytes)return J.push(this.readSVarint());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readSVarint());return J},readPackedBoolean:function(J){if(this.type!==r.Bytes)return J.push(this.readBoolean());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readBoolean());return J},readPackedFloat:function(J){if(this.type!==r.Bytes)return J.push(this.readFloat());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readFloat());return J},readPackedDouble:function(J){if(this.type!==r.Bytes)return J.push(this.readDouble());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readDouble());return J},readPackedFixed32:function(J){if(this.type!==r.Bytes)return J.push(this.readFixed32());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readFixed32());return J},readPackedSFixed32:function(J){if(this.type!==r.Bytes)return J.push(this.readSFixed32());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readSFixed32());return J},readPackedFixed64:function(J){if(this.type!==r.Bytes)return J.push(this.readFixed64());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readFixed64());return J},readPackedSFixed64:function(J){if(this.type!==r.Bytes)return J.push(this.readSFixed64());var le=f(this);for(J=J||[];this.pos<le;)J.push(this.readSFixed64());return J},skip:function(J){var le=7&J;if(le===r.Varint)for(;this.buf[this.pos++]>127;);else if(le===r.Bytes)this.pos=this.readVarint()+this.pos;else if(le===r.Fixed32)this.pos+=4;else{if(le!==r.Fixed64)throw new Error("Unimplemented type: "+le);this.pos+=8}},writeTag:function(J,le){this.writeVarint(J<<3|le)},realloc:function(J){for(var le=this.length||16;le<this.pos+J;)le*=2;if(le!==this.length){var fe=new Uint8Array(le);fe.set(this.buf),this.buf=fe,this.length=le}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(J){this.realloc(4),ae(this.buf,J,this.pos),this.pos+=4},writeSFixed32:function(J){this.realloc(4),ae(this.buf,J,this.pos),this.pos+=4},writeFixed64:function(J){this.realloc(8),ae(this.buf,-1&J,this.pos),ae(this.buf,Math.floor(J*u),this.pos+4),this.pos+=8},writeSFixed64:function(J){this.realloc(8),ae(this.buf,-1&J,this.pos),ae(this.buf,Math.floor(J*u),this.pos+4),this.pos+=8},writeVarint:function(J){(J=+J||0)>268435455||J<0?function(le,fe){var _e,je;if(le>=0?(_e=le%4294967296|0,je=le/4294967296|0):(je=~(-le/4294967296),4294967295^(_e=~(-le%4294967296))?_e=_e+1|0:(_e=0,je=je+1|0)),le>=18446744073709552e3||le<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");fe.realloc(10),function(Ne,Be,Qe){Qe.buf[Qe.pos++]=127&Ne|128,Ne>>>=7,Qe.buf[Qe.pos++]=127&Ne|128,Ne>>>=7,Qe.buf[Qe.pos++]=127&Ne|128,Ne>>>=7,Qe.buf[Qe.pos++]=127&Ne|128,Qe.buf[Qe.pos]=127&(Ne>>>=7)}(_e,0,fe),function(Ne,Be){var Qe=(7&Ne)<<4;Be.buf[Be.pos++]|=Qe|((Ne>>>=3)?128:0),Ne&&(Be.buf[Be.pos++]=127&Ne|((Ne>>>=7)?128:0),Ne&&(Be.buf[Be.pos++]=127&Ne|((Ne>>>=7)?128:0),Ne&&(Be.buf[Be.pos++]=127&Ne|((Ne>>>=7)?128:0),Ne&&(Be.buf[Be.pos++]=127&Ne|((Ne>>>=7)?128:0),Ne&&(Be.buf[Be.pos++]=127&Ne)))))}(je,fe)}(J,this):(this.realloc(4),this.buf[this.pos++]=127&J|(J>127?128:0),J<=127||(this.buf[this.pos++]=127&(J>>>=7)|(J>127?128:0),J<=127||(this.buf[this.pos++]=127&(J>>>=7)|(J>127?128:0),J<=127||(this.buf[this.pos++]=J>>>7&127))))},writeSVarint:function(J){this.writeVarint(J<0?2*-J-1:2*J)},writeBoolean:function(J){this.writeVarint(!!J)},writeString:function(J){J=String(J),this.realloc(4*J.length),this.pos++;var le=this.pos;this.pos=function(_e,je,Ne){for(var Be,Qe,Ue=0;Ue<je.length;Ue++){if((Be=je.charCodeAt(Ue))>55295&&Be<57344){if(!Qe){Be>56319||Ue+1===je.length?(_e[Ne++]=239,_e[Ne++]=191,_e[Ne++]=189):Qe=Be;continue}if(Be<56320){_e[Ne++]=239,_e[Ne++]=191,_e[Ne++]=189,Qe=Be;continue}Be=Qe-55296<<10|Be-56320|65536,Qe=null}else Qe&&(_e[Ne++]=239,_e[Ne++]=191,_e[Ne++]=189,Qe=null);Be<128?_e[Ne++]=Be:(Be<2048?_e[Ne++]=Be>>6|192:(Be<65536?_e[Ne++]=Be>>12|224:(_e[Ne++]=Be>>18|240,_e[Ne++]=Be>>12&63|128),_e[Ne++]=Be>>6&63|128),_e[Ne++]=63&Be|128)}return Ne}(this.buf,J,this.pos);var fe=this.pos-le;fe>=128&&C(le,fe,this),this.pos=le-1,this.writeVarint(fe),this.pos+=fe},writeFloat:function(J){this.realloc(4),l.write(this.buf,J,this.pos,!0,23,4),this.pos+=4},writeDouble:function(J){this.realloc(8),l.write(this.buf,J,this.pos,!0,52,8),this.pos+=8},writeBytes:function(J){var le=J.length;this.writeVarint(le),this.realloc(le);for(var fe=0;fe<le;fe++)this.buf[this.pos++]=J[fe]},writeRawMessage:function(J,le){this.pos++;var fe=this.pos;J(le,this);var _e=this.pos-fe;_e>=128&&C(fe,_e,this),this.pos=fe-1,this.writeVarint(_e),this.pos+=_e},writeMessage:function(J,le,fe){this.writeTag(J,r.Bytes),this.writeRawMessage(le,fe)},writePackedVarint:function(J,le){le.length&&this.writeMessage(J,M,le)},writePackedSVarint:function(J,le){le.length&&this.writeMessage(J,$,le)},writePackedBoolean:function(J,le){le.length&&this.writeMessage(J,I,le)},writePackedFloat:function(J,le){le.length&&this.writeMessage(J,T,le)},writePackedDouble:function(J,le){le.length&&this.writeMessage(J,k,le)},writePackedFixed32:function(J,le){le.length&&this.writeMessage(J,P,le)},writePackedSFixed32:function(J,le){le.length&&this.writeMessage(J,R,le)},writePackedFixed64:function(J,le){le.length&&this.writeMessage(J,j,le)},writePackedSFixed64:function(J,le){le.length&&this.writeMessage(J,W,le)},writeBytesField:function(J,le){this.writeTag(J,r.Bytes),this.writeBytes(le)},writeFixed32Field:function(J,le){this.writeTag(J,r.Fixed32),this.writeFixed32(le)},writeSFixed32Field:function(J,le){this.writeTag(J,r.Fixed32),this.writeSFixed32(le)},writeFixed64Field:function(J,le){this.writeTag(J,r.Fixed64),this.writeFixed64(le)},writeSFixed64Field:function(J,le){this.writeTag(J,r.Fixed64),this.writeSFixed64(le)},writeVarintField:function(J,le){this.writeTag(J,r.Varint),this.writeVarint(le)},writeSVarintField:function(J,le){this.writeTag(J,r.Varint),this.writeSVarint(le)},writeStringField:function(J,le){this.writeTag(J,r.Bytes),this.writeString(le)},writeFloatField:function(J,le){this.writeTag(J,r.Fixed32),this.writeFloat(le)},writeDoubleField:function(J,le){this.writeTag(J,r.Fixed64),this.writeDouble(le)},writeBooleanField:function(J,le){this.writeVarintField(J,!!le)}},ry}var wg=A(bg());const ev=3;function ny(l,r,s){r.glyphs=[],l===1&&s.readMessage(ay,r)}function ay(l,r,s){if(l===3){const{id:u,bitmap:g,width:f,height:x,left:C,top:M,advance:$}=s.readMessage(zb,{});r.glyphs.push({id:u,bitmap:new bc({width:f+2*ev,height:x+2*ev},g),metrics:{width:f,height:x,left:C,top:M,advance:$}})}else l===4?r.ascender=s.readSVarint():l===5&&(r.descender=s.readSVarint())}function zb(l,r,s){l===1?r.id=s.readVarint():l===2?r.bitmap=s.readBytes():l===3?r.width=s.readVarint():l===4?r.height=s.readVarint():l===5?r.left=s.readSVarint():l===6?r.top=s.readSVarint():l===7&&(r.advance=s.readVarint())}const Sg=ev,mo={horizontal:1,vertical:2,horizontalOnly:3};class ch{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(r,s){const u=new ch;return u.scale=r||1,u.fontStack=s,u}static forImage(r){const s=new ch;return s.image=r,s}}class bf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,s){const u=new bf;for(let g=0;g<r.sections.length;g++){const f=r.sections[g];f.image?u.addImageSection(f):u.addTextSection(f,s)}return u}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSections(){return this.sections}getSectionIndex(r){return this.sectionIndex[r]}getCodePoint(r){return this.text.codePointAt(r)}verticalizePunctuation(r){this.text=function(s,u){let g="";for(let f=0;f<s.length;f++){const x=s.charCodeAt(f+1)||null,C=s.charCodeAt(f-1)||null;g+=!u&&(x&&El(x)&&!cd[s[f+1]]||C&&El(C)&&!cd[s[f-1]])||!cd[s[f]]?s[f]:cd[s[f]]}return g}(this.text,r)}trim(){let r=0;for(let u=0;u<this.text.length&&wf[this.text.charCodeAt(u)];u++)r++;let s=this.text.length;for(let u=this.text.length-1;u>=0&&u>=r&&wf[this.text.charCodeAt(u)];u--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)}substring(r,s){const u=new bf;return u.text=this.text.substring(r,s),u.sectionIndex=this.sectionIndex.slice(r,s),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,s)=>Math.max(r,this.sections[s].scale),0)}addTextSection(r,s){this.text+=r.text,this.sections.push(ch.forText(r.scale,r.fontStack||s));const u=this.sections.length-1;for(let g=0;g<r.text.length;++g)this.sectionIndex.push(u)}addImageSection(r){const s=r.image&&r.image.namePrimary?r.image.getPrimary():null;if(!s)return void Wr("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCodePoint(u),this.sections.push(ch.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Wr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function tv(l,r,s,u,g,f,x,C,M,$,T,k,I,P,R){const j=bf.fromFeature(l,g);k===mo.vertical&&j.verticalizePunctuation(I);let W=[];const K=function(fe,_e,je,Ne,Be,Qe){if(!fe)return[];const Ue=[],rt=function(gt,vt,ht,Rt,Yt,Lt){let ar=0;for(let nr=0;nr<gt.length();nr++){const gr=gt.getSection(nr);ar+=y(gt.getCodePoint(nr),gr,Rt,Yt,vt,Lt)}return ar/Math.max(1,Math.ceil(ar/ht))}(fe,_e,je,Ne,Be,Qe),st=fe.text.indexOf("​")>=0;let it=0;for(let gt=0;gt<fe.length();gt++){const vt=fe.getSection(gt),ht=fe.getCodePoint(gt);if(wf[ht]||(it+=y(ht,vt,Ne,Be,_e,Qe)),gt<fe.length()-1){const Rt=!((ct=ht)<11904||!(Ir["Bopomofo Extended"](ct)||Ir.Bopomofo(ct)||Ir["CJK Compatibility Forms"](ct)||Ir["CJK Compatibility Ideographs"](ct)||Ir["CJK Compatibility"](ct)||Ir["CJK Radicals Supplement"](ct)||Ir["CJK Strokes"](ct)||Ir["CJK Symbols and Punctuation"](ct)||Ir["CJK Unified Ideographs Extension A"](ct)||Ir["CJK Unified Ideographs"](ct)||Ir["Enclosed CJK Letters and Months"](ct)||Ir["Halfwidth and Fullwidth Forms"](ct)||Ir.Hiragana(ct)||Ir["Ideographic Description Characters"](ct)||Ir["Kangxi Radicals"](ct)||Ir["Katakana Phonetic Extensions"](ct)||Ir.Katakana(ct)||Ir["Vertical Forms"](ct)||Ir["Yi Radicals"](ct)||Ir["Yi Syllables"](ct)));(d[ht]||Rt||vt.image)&&Ue.push(H(gt+1,it,rt,Ue,z(ht,fe.getCodePoint(gt+1),Rt&&st),!1))}}var ct;return ee(H(fe.length(),it,rt,Ue,0,!0))}(j,$,f,r,u,P),{processBidirectionalText:ae,processStyledBidirectionalText:ie}=na;if(ae&&j.sections.length===1){const fe=ae(j.toString(),K);for(const _e of fe){const je=new bf;je.text=_e,je.sections=j.sections;for(let Ne=0;Ne<_e.length;Ne++)je.sectionIndex.push(0);W.push(je)}}else if(ie){const fe=ie(j.text,j.sectionIndex,K);for(const _e of fe){const je=new bf;je.text=_e[0],je.sectionIndex=_e[1],je.sections=j.sections,W.push(je)}}else W=function(fe,_e){const je=[],Ne=fe.text;let Be=0;for(const Qe of _e)je.push(fe.substring(Be,Qe)),Be=Qe;return Be<Ne.length&&je.push(fe.substring(Be,Ne.length)),je}(j,K);const J=[],le={positionedLines:J,text:j.toString(),top:T[1],bottom:T[1],left:T[0],right:T[0],writingMode:k,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(fe,_e,je,Ne,Be,Qe,Ue,rt,st,it,ct,gt){let vt=0,ht=0,Rt=0;const Yt=rt==="right"?1:rt==="left"?0:.5;let Lt=!1;for(const sr of Be){const Cr=sr.getSections();for(const Vr of Cr){if(Vr.image)continue;const on=_e[Vr.fontStack];if(on&&(Lt=on.ascender!==void 0&&on.descender!==void 0,!Lt))break}if(!Lt)break}let ar=0;for(const sr of Be){sr.trim();const Cr=sr.getMaxScale(),Vr=(Cr-1)*Vi,on={positionedGlyphs:[],lineOffset:0};fe.positionedLines[ar]=on;const fn=on.positionedGlyphs;let wn=0;if(!sr.length()){ht+=Qe,++ar;continue}let pn=0,Pn=0;for(let ca=0;ca<sr.length();ca++){const tn=sr.getSection(ca),ua=sr.getSectionIndex(ca),sa=sr.getCodePoint(ca);let ba=tn.scale,wi=null,Si=null,ci=null,Fo=Vi,Ra=0;const $a=!(st===mo.horizontal||!ct&&!rl(sa)||ct&&(wf[sa]||(nr=sa,Ir.Arabic(nr)||Ir["Arabic Supplement"](nr)||Ir["Arabic Extended-A"](nr)||Ir["Arabic Presentation Forms-A"](nr)||Ir["Arabic Presentation Forms-B"](nr))));if(tn.image){const go=Ne[tn.image.serialize()];if(!go)continue;ci=tn.image.id,fe.iconsInText=fe.iconsInText||!0,Si=go.paddedRect;const Ti=go.displaySize;ba=ba*Vi/gt,wi={width:Ti[0],height:Ti[1],left:0,top:-3,advance:$a?Ti[1]:Ti[0],localGlyph:!1},Ra=Lt?-wi.height*ba:Cr*Vi-17-Ti[1]*ba,Fo=wi.advance;const ul=($a?Ti[0]:Ti[1])*ba-Vi*Cr;ul>0&&ul>wn&&(wn=ul)}else{const go=je[tn.fontStack];if(!go)continue;go[sa]&&(Si=go[sa]);const Ti=_e[tn.fontStack];if(!Ti)continue;const ul=Ti.glyphs[sa];if(!ul)continue;if(wi=ul.metrics,Fo=sa!==8203?Vi:0,Lt){const Ui=Ti.ascender!==void 0?Math.abs(Ti.ascender):0,uh=Ti.descender!==void 0?Math.abs(Ti.descender):0,nm=(Ui+uh)*ba;pn<nm&&(pn=nm,Pn=(Ui-uh)/2*ba),Ra=-Ui*ba}else Ra=(Cr-ba)*Vi-17}$a?(fe.verticalizable=!0,fn.push({glyph:sa,imageName:ci,x:vt,y:ht+Ra,vertical:$a,scale:ba,localGlyph:wi.localGlyph,fontStack:tn.fontStack,sectionIndex:ua,metrics:wi,rect:Si}),vt+=Fo*ba+it):(fn.push({glyph:sa,imageName:ci,x:vt,y:ht+Ra,vertical:$a,scale:ba,localGlyph:wi.localGlyph,fontStack:tn.fontStack,sectionIndex:ua,metrics:wi,rect:Si}),vt+=wi.advance*ba+it)}fn.length!==0&&(Rt=Math.max(vt-it,Rt),Lt?qe(fn,Yt,wn,Pn,Qe*Cr/2):qe(fn,Yt,wn,0,Qe/2)),vt=0;const _a=Qe*Cr+wn;on.lineOffset=Math.max(wn,Vr),ht+=_a,++ar}var nr;const gr=ht,{horizontalAlign:jt,verticalAlign:Mr}=Re(Ue);(function(sr,Cr,Vr,on,fn,wn){const pn=(Cr-Vr)*fn,Pn=-wn*on;for(const _a of sr)for(const ca of _a.positionedGlyphs)ca.x+=pn,ca.y+=Pn})(fe.positionedLines,Yt,jt,Mr,Rt,gr),fe.top+=-Mr*gr,fe.bottom=fe.top+gr,fe.left+=-jt*Rt,fe.right=fe.left+Rt,fe.hasBaseline=Lt}(le,r,s,u,W,x,C,M,k,$,I,R),!function(fe){for(const _e of fe)if(_e.positionedGlyphs.length!==0)return!1;return!0}(J)&&le}const wf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},d={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function y(l,r,s,u,g,f){if(r.image){const x=u[r.image.serialize()];return x?x.displaySize[0]*r.scale*Vi/f+g:0}{const x=s[r.fontStack],C=x&&x.glyphs[l];return C?C.metrics.advance*r.scale+g:0}}function E(l,r,s,u){const g=Math.pow(l-r,2);return u?l<r?g/2:2*g:g+Math.abs(s)*s}function z(l,r,s){let u=0;return l===10&&(u-=1e4),s&&(u+=150),l!==40&&l!==65288||(u+=50),r!==41&&r!==65289||(u+=50),u}function H(l,r,s,u,g,f){let x=null,C=E(r,s,g,f);for(const M of u){const $=E(r-M.x,s,g,f)+M.badness;$<=C&&(x=M,C=$)}return{index:l,x:r,priorBreak:x,badness:C}}function ee(l){return l?ee(l.priorBreak).concat(l.index):[]}function Re(l){let r=.5,s=.5;switch(l){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function qe(l,r,s,u,g){if(!(r||s||u||g))return;const f=l.length-1,x=l[f],C=(x.x+x.metrics.advance*x.scale)*r;for(let M=0;M<=f;M++)l[M].x-=C,l[M].y+=s+u+g}function wt(l,r,s,u){const{horizontalAlign:g,verticalAlign:f}=Re(u),x=s[0]-l.displaySize[0]*g,C=s[1]-l.displaySize[1]*f;return{imagePrimary:l,imageSecondary:r,top:C,bottom:C+l.displaySize[1],left:x,right:x+l.displaySize[0]}}function Ht(l,r,s,u,g,f){const x=l.imagePrimary;let C;if(x.content){const W=x.content,K=x.pixelRatio||1;C=[W[0]/K,W[1]/K,x.displaySize[0]-W[2]/K,x.displaySize[1]-W[3]/K]}const M=r.left*f,$=r.right*f;let T,k,I,P;s==="width"||s==="both"?(P=g[0]+M-u[3],k=g[0]+$+u[1]):(P=g[0]+(M+$-x.displaySize[0])/2,k=P+x.displaySize[0]);const R=r.top*f,j=r.bottom*f;return s==="height"||s==="both"?(T=g[1]+R-u[0],I=g[1]+j+u[2]):(T=g[1]+(R+j-x.displaySize[1])/2,I=T+x.displaySize[1]),{imagePrimary:x,imageSecondary:void 0,top:T,right:k,bottom:I,left:P,collisionPadding:C}}class ir extends dt{constructor(r,s,u,g,f){super(r,s),this.angle=g,this.z=u,f!==void 0&&(this.segment=f)}clone(){return new ir(this.x,this.y,this.z,this.angle,this.segment)}}function br(l,r,s,u,g){if(r.segment===void 0)return!0;let f=r,x=r.segment+1,C=0;for(;C>-s/2;){if(x--,x<0)return!1;C-=l[x].dist(f),f=l[x]}C+=l[x].dist(l[x+1]),x++;const M=[];let $=0;for(;C<s/2;){const T=l[x],k=l[x+1];if(!k)return!1;let I=l[x-1].angleTo(T)-T.angleTo(k);for(I=Math.abs((I+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:C,angleDelta:I}),$+=I;C-M[0].distance>u;)$-=M.shift().angleDelta;if($>g)return!1;x++,C+=T.dist(k)}return!0}function Kt(l){let r=0;for(let s=0;s<l.length-1;s++)r+=l[s].dist(l[s+1]);return r}function Xt(l,r,s){return l?.6*r*s:0}function Nn(l,r){return Math.max(l?l.right-l.left:0,r?r.right-r.left:0)}function An(l,r,s,u,g,f){const x=Xt(s,g,f),C=Nn(s,u)*f;let M=0;const $=Kt(l)/2;for(let T=0;T<l.length-1;T++){const k=l[T],I=l[T+1],P=k.dist(I);if(M+P>$){const R=($-M)/P,j=Or(k.x,I.x,R),W=Or(k.y,I.y,R),K=new ir(j,W,0,I.angleTo(k),T);return!x||br(l,K,C,x,r)?K:void 0}M+=P}}function Ka(l,r,s,u,g,f,x,C,M){const $=Xt(u,f,x),T=Nn(u,g),k=T*x,I=l[0].x===0||l[0].x===M||l[0].y===0||l[0].y===M;return r-k<r/4&&(r=k+r/4),Bt(l,I?r/2*C%r:(T/2+2*f)*x*C%r,r,$,s,k,I,!1,M)}function Bt(l,r,s,u,g,f,x,C,M){const $=f/2,T=Kt(l);let k=0,I=r-s,P=[];for(let R=0;R<l.length-1;R++){const j=l[R],W=l[R+1],K=j.dist(W),ae=W.angleTo(j);for(;I+s<k+K;){I+=s;const ie=(I-k)/K,J=Or(j.x,W.x,ie),le=Or(j.y,W.y,ie);if(J>=0&&J<M&&le>=0&&le<M&&I-$>=0&&I+$<=T){const fe=new ir(J,le,0,ae,R);u&&!br(l,fe,f,u,g)||P.push(fe)}}k+=K}return C||P.length||x||(P=Bt(l,k/2,s,u,g,f,x,!0,M)),P}function kt(l,r,s,u,g){const f=[];for(let x=0;x<l.length;x++){const C=l[x];let M;for(let $=0;$<C.length-1;$++){let T=C[$],k=C[$+1];T.x<r&&k.x<r||(T.x<r?T=new dt(r,T.y+(r-T.x)/(k.x-T.x)*(k.y-T.y))._round():k.x<r&&(k=new dt(r,T.y+(r-T.x)/(k.x-T.x)*(k.y-T.y))._round()),T.y<s&&k.y<s||(T.y<s?T=new dt(T.x+(s-T.y)/(k.y-T.y)*(k.x-T.x),s)._round():k.y<s&&(k=new dt(T.x+(s-T.y)/(k.y-T.y)*(k.x-T.x),s)._round()),T.x>=u&&k.x>=u||(T.x>=u?T=new dt(u,T.y+(u-T.x)/(k.x-T.x)*(k.y-T.y))._round():k.x>=u&&(k=new dt(u,T.y+(u-T.x)/(k.x-T.x)*(k.y-T.y))._round()),T.y>=g&&k.y>=g||(T.y>=g?T=new dt(T.x+(g-T.y)/(k.y-T.y)*(k.x-T.x),g)._round():k.y>=g&&(k=new dt(T.x+(g-T.y)/(k.y-T.y)*(k.x-T.x),g)._round()),M&&T.equals(M[M.length-1])||(M=[T],f.push(M)),M.push(k)))))}}return f}function Ut(l){let r=0,s=0;for(const x of l)r+=x.w*x.h,s=Math.max(s,x.w);l.sort((x,C)=>C.h-x.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}];let g=0,f=0;for(const x of l)for(let C=u.length-1;C>=0;C--){const M=u[C];if(!(x.w>M.w||x.h>M.h)){if(x.x=M.x,x.y=M.y,f=Math.max(f,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===M.w&&x.h===M.h){const $=u.pop();C<u.length&&(u[C]=$)}else x.h===M.h?(M.x+=x.w,M.w-=x.w):x.w===M.w?(M.y+=x.h,M.h-=x.h):(u.push({x:M.x+x.w,y:M.y,w:M.w-x.w,h:x.h}),M.y+=x.h,M.h-=x.h);break}}return{w:g,h:f,fill:r/(g*f)||0}}Tr(ir,"Anchor");const pr=1;class nn{constructor(r,{pixelRatio:s,version:u,stretchX:g,stretchY:f,content:x},C){this.paddedRect=r,this.pixelRatio=s,this.stretchX=g,this.stretchY=f,this.content=x,this.version=u,this.padding=C}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.pixelRatio,(this.paddedRect.h-2*this.padding)/this.pixelRatio]}}class la{constructor(r,s,u){const g={},f={};this.haveRenderCallbacks=[];const x=[];this.addImages(r,g,pr,x),this.addImages(s,f,2,x);const{w:C,h:M}=Ut(x),$=new es({width:C||1,height:M||1});for(const T in r){const k=r[T],I=g[T].paddedRect;es.copy(k.data,$,{x:0,y:0},{x:I.x+pr,y:I.y+pr},k.data,u,k.sdf)}for(const T in s){const k=s[T],I=f[T].paddedRect;let P=f[T].padding;const R=I.x+P,j=I.y+P,W=k.data.width,K=k.data.height;P=P>1?P-1:P,es.copy(k.data,$,{x:0,y:0},{x:R,y:j},k.data,u),es.copy(k.data,$,{x:0,y:K-P},{x:R,y:j-P},{width:W,height:P},u),es.copy(k.data,$,{x:0,y:0},{x:R,y:j+K},{width:W,height:P},u),es.copy(k.data,$,{x:W-P,y:0},{x:R-P,y:j},{width:P,height:K},u),es.copy(k.data,$,{x:0,y:0},{x:R+W,y:j},{width:P,height:K},u),es.copy(k.data,$,{x:W-P,y:K-P},{x:R-P,y:j-P},{width:P,height:P},u),es.copy(k.data,$,{x:0,y:K-P},{x:R+W,y:j-P},{width:P,height:P},u),es.copy(k.data,$,{x:0,y:0},{x:R+W,y:j+K},{width:P,height:P},u),es.copy(k.data,$,{x:W-P,y:0},{x:R-P,y:j+K},{width:P,height:P},u)}this.image=$,this.iconPositions=g,this.patternPositions=f}addImages(r,s,u,g){for(const f in r){const x=r[f],C={x:0,y:0,w:x.data.width+2*u,h:x.data.height+2*u};g.push(C),s[f]=new nn(C,x,u),x.hasRenderCallback&&this.haveRenderCallbacks.push(Yo.deserializeId(f))}}patchUpdatedImages(r,s,u){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(g=>r.hasImage(g,u)),r.dispatchRenderCallbacks(this.haveRenderCallbacks,u);for(const g in r.getUpdatedImages(u)){for(const f of Object.keys(this.iconPositions))Yo.deserializeId(f)===g&&this.patchUpdatedImage(this.iconPositions[f],r.getImage(g,u),s);for(const f of Object.keys(this.patternPositions))Yo.deserializeId(f)===g&&this.patchUpdatedImage(this.patternPositions[f],r.getImage(g,u),s)}}patchUpdatedImage(r,s,u){if(!r||!s||r.version===s.version)return;r.version=s.version;const[g,f]=r.tl;u.update(s.data,{position:{x:g,y:f}})}}Tr(nn,"ImagePosition"),Tr(la,"ImageAtlas");const hn=1e20;function kn(l,r,s,u,g,f,x,C,M){for(let $=r;$<r+u;$++)fs(l,s*f+$,f,g,x,C,M);for(let $=s;$<s+g;$++)fs(l,$*f+r,1,u,x,C,M)}function fs(l,r,s,u,g,f,x){f[0]=0,x[0]=-1e20,x[1]=hn,g[0]=l[r];for(let C=1,M=0,$=0;C<u;C++){g[C]=l[r+C*s];const T=C*C;do{const k=f[M];$=(g[C]-g[k]+T-k*k)/(C-k)/2}while($<=x[M]&&--M>-1);M++,f[M]=C,x[M]=$,x[M+1]=hn}for(let C=0,M=0;C<u;C++){for(;x[M+1]<C;)M++;const $=f[M],T=C-$;l[r+C*s]=g[$]+T*T}}const ra=2,lu={none:0,ideographs:1,all:2};class Jp{constructor(r,s,u){this.requestManager=r,this.localGlyphMode=s,this.localFontFamily=u,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(r,s){this.urls[s]=r}getGlyphs(r,s,u){const g=[],f=this.urls[s]||Ve.GLYPHS_URL;for(const x in r)for(const C of r[x])g.push({stack:x,id:C});Dr(g,({stack:x,id:C},M)=>{let $=this.entries[x];$||($=this.entries[x]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let T=$.glyphs[C];if(T!==void 0)return void M(null,{stack:x,id:C,glyph:T});if(T=this._tinySDF($,x,C),T)return $.glyphs[C]=T,void M(null,{stack:x,id:C,glyph:T});const k=Math.floor(C/256);if(256*k>65535)return Wr("glyphs > 65535 not supported"),void M(null,{stack:x,id:C,glyph:T});if($.ranges[k])return void M(null,{stack:x,id:C,glyph:T});let I=$.requests[k];I||(I=$.requests[k]=[],Jp.loadGlyphRange(x,k,f,this.requestManager,(P,R)=>{if(R){$.ascender=R.ascender,$.descender=R.descender;for(const j in R.glyphs)this._doesCharSupportLocalGlyph(+j)||($.glyphs[+j]=R.glyphs[+j]);$.ranges[k]=!0}for(const j of I)j(P,R);delete $.requests[k]})),I.push((P,R)=>{P?M(P):R&&M(null,{stack:x,id:C,glyph:R.glyphs[C]||null})})},(x,C)=>{if(x)u(x);else if(C){const M={};for(const{stack:$,id:T,glyph:k}of C)M[$]===void 0&&(M[$]={}),M[$].glyphs===void 0&&(M[$].glyphs={}),M[$].glyphs[T]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics},M[$].ascender=this.entries[$].ascender,M[$].descender=this.entries[$].descender;u(null,M)}})}_doesCharSupportLocalGlyph(r){return this.localGlyphMode!==lu.none&&(this.localGlyphMode===lu.all?!!this.localFontFamily:!!this.localFontFamily&&(Ir["CJK Unified Ideographs"](r)||Ir["Hangul Syllables"](r)||Ir.Hiragana(r)||Ir.Katakana(r)||Ir["CJK Symbols and Punctuation"](r)||Ir["CJK Unified Ideographs Extension A"](r)||Ir["CJK Unified Ideographs Extension B"](r)||Ir.Osage(r)))}_tinySDF(r,s,u){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(u))return;let f=r.tinySDF;if(!f){let j="400";/bold/i.test(s)?j="900":/medium/i.test(s)?j="500":/light/i.test(s)&&(j="200"),f=r.tinySDF=new Jp.TinySDF({fontFamily:g,fontWeight:j,fontSize:24*ra,buffer:3*ra,radius:8*ra}),f.fontWeight=j}if(this.localGlyphs[f.fontWeight][u])return this.localGlyphs[f.fontWeight][u];const x=String.fromCodePoint(u),{data:C,width:M,height:$,glyphWidth:T,glyphHeight:k,glyphLeft:I,glyphTop:P,glyphAdvance:R}=f.draw(x);return this.localGlyphs[f.fontWeight][u]={id:u,bitmap:new bc({width:M,height:$},C),metrics:{width:T/ra,height:k/ra,left:I/ra,top:P/ra-27,advance:R/ra,localGlyph:!0}}}}Jp.loadGlyphRange=function(l,r,s,u,g){const f=256*r,x=f+255,C=u.transformRequest(u.normalizeGlyphsURL(s).replace("{fontstack}",l).replace("{range}",`${f}-${x}`),Ul.Glyphs);Wi(C,(M,$)=>{if(M)g(M);else if($){const T={},k=function(I){return new wg(I).readFields(ny,{})}($);for(const I of k.glyphs)T[I.id]=I;g(null,{glyphs:T,ascender:k.ascender,descender:k.descender})}})},Jp.TinySDF=class{constructor({fontSize:l=24,buffer:r=3,radius:s=8,cutoff:u=.25,fontFamily:g="sans-serif",fontWeight:f="normal",fontStyle:x="normal"}={}){this.buffer=r,this.cutoff=u,this.radius=s;const C=this.size=l+4*r,M=this._createCanvas(C),$=this.ctx=M.getContext("2d",{willReadFrequently:!0});$.font=`${x} ${f} ${l}px ${g}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(l){const r=document.createElement("canvas");return r.width=r.height=l,r}draw(l){const{width:r,actualBoundingBoxAscent:s,actualBoundingBoxDescent:u,actualBoundingBoxLeft:g,actualBoundingBoxRight:f}=this.ctx.measureText(l),x=Math.ceil(s),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(f-g))),M=Math.min(this.size-this.buffer,x+Math.ceil(u)),$=C+2*this.buffer,T=M+2*this.buffer,k=Math.max($*T,0),I=new Uint8ClampedArray(k),P={data:I,width:$,height:T,glyphWidth:C,glyphHeight:M,glyphTop:x,glyphLeft:0,glyphAdvance:r};if(C===0||M===0)return P;const{ctx:R,buffer:j,gridInner:W,gridOuter:K}=this;R.clearRect(j,j,C,M),R.fillText(l,j,j+x);const ae=R.getImageData(j,j,C,M);K.fill(hn,0,k),W.fill(0,0,k);for(let ie=0;ie<M;ie++)for(let J=0;J<C;J++){const le=ae.data[4*(ie*C+J)+3]/255;if(le===0)continue;const fe=(ie+j)*$+J+j;if(le===1)K[fe]=0,W[fe]=hn;else{const _e=.5-le;K[fe]=_e>0?_e*_e:0,W[fe]=_e<0?_e*_e:0}}kn(K,0,0,$,T,$,this.f,this.v,this.z),kn(W,j,j,C,M,$,this.f,this.v,this.z);for(let ie=0;ie<k;ie++){const J=Math.sqrt(K[ie])-Math.sqrt(W[ie]);I[ie]=Math.round(255-255*(J/this.radius+this.cutoff))}return P}};const Tg=pr;function qT(l,r){return l+r[1]-r[0]}function WT(l,r,s,u,g=1){const f=[],x=l.imagePrimary,C=x.pixelRatio,M=x.paddedRect.w-2*Tg,$=x.paddedRect.h-2*Tg,T=(l.right-l.left)*g,k=(l.bottom-l.top)*g,I=x.stretchX||[[0,M]],P=x.stretchY||[[0,$]],R=I.reduce(qT,0),j=P.reduce(qT,0),W=M-R,K=$-j;let ae=0,ie=R,J=0,le=j,fe=0,_e=W,je=0,Ne=K;if(x.content&&u){const Qe=x.content;ae=Lb(I,0,Qe[0]),J=Lb(P,0,Qe[1]),ie=Lb(I,Qe[0],Qe[2]),le=Lb(P,Qe[1],Qe[3]),fe=Qe[0]-ae,je=Qe[1]-J,_e=Qe[2]-Qe[0]-ie,Ne=Qe[3]-Qe[1]-le}const Be=(Qe,Ue,rt,st)=>{const it=$b(Qe.stretch-ae,ie,T,l.left*g),ct=Bb(Qe.fixed-fe,_e,Qe.stretch,R),gt=$b(Ue.stretch-J,le,k,l.top*g),vt=Bb(Ue.fixed-je,Ne,Ue.stretch,j),ht=$b(rt.stretch-ae,ie,T,l.left*g),Rt=Bb(rt.fixed-fe,_e,rt.stretch,R),Yt=$b(st.stretch-J,le,k,l.top*g),Lt=Bb(st.fixed-je,Ne,st.stretch,j),ar=new dt(it,gt),nr=new dt(ht,gt),gr=new dt(ht,Yt),jt=new dt(it,Yt),Mr=new dt(ct/C,vt/C),sr=new dt(Rt/C,Lt/C),Cr=r*Math.PI/180;if(Cr){const Pn=Math.sin(Cr),_a=Math.cos(Cr),ca=[_a,-Pn,Pn,_a];ar._matMult(ca),nr._matMult(ca),jt._matMult(ca),gr._matMult(ca)}const Vr=Qe.stretch+Qe.fixed,on=rt.stretch+rt.fixed,fn=Ue.stretch+Ue.fixed,wn=st.stretch+st.fixed,pn=l.imageSecondary;return{tl:ar,tr:nr,bl:jt,br:gr,texPrimary:{x:x.paddedRect.x+Tg+Vr,y:x.paddedRect.y+Tg+fn,w:on-Vr,h:wn-fn},texSecondary:pn?{x:pn.paddedRect.x+Tg+Vr,y:pn.paddedRect.y+Tg+fn,w:on-Vr,h:wn-fn}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Mr,pixelOffsetBR:sr,minFontScaleX:_e/C/T,minFontScaleY:Ne/C/k,isSDF:s}};if(u&&(x.stretchX||x.stretchY)){const Qe=KT(I,W,R),Ue=KT(P,K,j);for(let rt=0;rt<Qe.length-1;rt++){const st=Qe[rt],it=Qe[rt+1];for(let ct=0;ct<Ue.length-1;ct++)f.push(Be(st,Ue[ct],it,Ue[ct+1]))}}else f.push(Be({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:$+1}));return f}function Lb(l,r,s){let u=0;for(const g of l)u+=Math.max(r,Math.min(s,g[1]))-Math.max(r,Math.min(s,g[0]));return u}function KT(l,r,s){const u=[{fixed:-1,stretch:0}];for(const[g,f]of l){const x=u[u.length-1];u.push({fixed:g-x.stretch,stretch:x.stretch}),u.push({fixed:g-x.stretch,stretch:x.stretch+(f-g)})}return u.push({fixed:r+Tg,stretch:s}),u}function $b(l,r,s,u){return l/r*s+u}function Bb(l,r,s,u){return l-r*s/u}function Xj(l,r,s,u){const g=r+l.positionedLines[u].lineOffset;return u===0?s+g/2:s+(g+(r+l.positionedLines[u-1].lineOffset))/2}function Yj(l,r=1,s=!1){let u=1/0,g=1/0,f=-1/0,x=-1/0;const C=l[0];for(let P=0;P<C.length;P++){const R=C[P];(!P||R.x<u)&&(u=R.x),(!P||R.y<g)&&(g=R.y),(!P||R.x>f)&&(f=R.x),(!P||R.y>x)&&(x=R.y)}const M=Math.min(f-u,x-g);let $=M/2;const T=new Pd([],Jj);if(M===0)return new dt(u,g);for(let P=u;P<f;P+=M)for(let R=g;R<x;R+=M)T.push(new iy(P+$,R+$,$,l));let k=function(P){let R=0,j=0,W=0;const K=P[0];for(let ae=0,ie=K.length,J=ie-1;ae<ie;J=ae++){const le=K[ae],fe=K[J],_e=le.x*fe.y-fe.x*le.y;j+=(le.x+fe.x)*_e,W+=(le.y+fe.y)*_e,R+=3*_e}return new iy(j/R,W/R,0,P)}(l),I=T.length;for(;T.length;){const P=T.pop();(P.d>k.d||!k.d)&&(k=P,s&&console.log("found best %d after %d probes",Math.round(1e4*P.d)/1e4,I)),P.max-k.d<=r||($=P.h/2,T.push(new iy(P.p.x-$,P.p.y-$,$,l)),T.push(new iy(P.p.x+$,P.p.y-$,$,l)),T.push(new iy(P.p.x-$,P.p.y+$,$,l)),T.push(new iy(P.p.x+$,P.p.y+$,$,l)),I+=4)}return s&&(console.log(`num probes: ${I}`),console.log(`best distance: ${k.d}`)),k.p}function Jj(l,r){return r.max-l.max}class iy{constructor(r,s,u,g){this.p=new dt(r,s),this.h=u,this.d=function(f,x){let C=!1,M=1/0;for(let $=0;$<x.length;$++){const T=x[$];for(let k=0,I=T.length,P=I-1;k<I;P=k++){const R=T[k],j=T[P];R.y>f.y!=j.y>f.y&&f.x<(j.x-R.x)*(f.y-R.y)/(j.y-R.y)+R.x&&(C=!C),M=Math.min(M,Ze(f,R,j))}}return(C?1:-1)*Math.sqrt(M)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const I2=Number.POSITIVE_INFINITY,Qj=Math.sqrt(2);function ZT(l,[r,s]){let u=0,g=0;if(s===I2){r<0&&(r=0);const f=r/Qj;switch(l){case"top-right":case"top-left":g=f-7;break;case"bottom-right":case"bottom-left":g=7-f;break;case"bottom":g=7-r;break;case"top":g=r-7}switch(l){case"top-right":case"bottom-right":u=-f;break;case"top-left":case"bottom-left":u=f;break;case"left":u=r;break;case"right":u=-r}}else{switch(r=Math.abs(r),s=Math.abs(s),l){case"top-right":case"top-left":case"top":g=s-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-s}switch(l){case"top-right":case"bottom-right":case"right":u=-r;break;case"top-left":case"bottom-left":case"left":u=r}}return[u,g]}function z2(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function eO(l,r,s,u,g,f,x,C,M,$,T,k,I,P,R,j){let W=f.textMaxSize.evaluate(r,{},I);W===void 0?W=x*f.textScaleFactor:W*=f.textScaleFactor;const K=l.layers[0].layout,ae=K.get("icon-offset").evaluate(r,{},I),ie=YT(s.horizontal)||s.vertical,J=P.name==="globe",le=Vi,fe=x*f.textScaleFactor/le,_e=l.tilePixelRatio*W/le,je=(ct=l.overscaling,l.zoom>18&&ct>2&&(ct>>=1),Math.max(lr/(512*ct),1)*K.get("symbol-spacing")),Ne=K.get("text-padding")*l.tilePixelRatio,Be=K.get("icon-padding")*l.tilePixelRatio,Qe=mr(K.get("text-max-angle")),Ue=K.get("text-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",rt=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",st=K.get("symbol-placement"),it=je/2;var ct;const gt=K.get("icon-text-fit").evaluate(r,{},I),vt=K.get("icon-text-fit-padding").evaluate(r,{},I),ht=gt!=="none";let Rt;l.hasAnyIconTextFit===!1&&ht&&(l.hasAnyIconTextFit=!0),u&&ht&&(l.allowVerticalPlacement&&s.vertical&&(Rt=Ht(u,s.vertical,gt,vt,ae,fe)),ie&&(u=Ht(u,ie,gt,vt,ae,fe)));const Yt=(Lt,ar,nr)=>{if(ar.x<0||ar.x>=lr||ar.y<0||ar.y>=lr)return;let gr=null;if(J){const{x:jt,y:Mr,z:sr}=P.projectTilePoint(ar.x,ar.y,nr);gr={anchor:new ir(jt,Mr,sr,0,void 0),up:P.upVector(nr,ar.x,ar.y)}}(function(jt,Mr,sr,Cr,Vr,on,fn,wn,pn,Pn,_a,ca,tn,ua,sa,ba,wi,Si,ci,Fo,Ra,$a,go,Ti,ul,Ui,uh,nm){const am=jt.addToLineVertexArray(Mr,Cr);let Sf,im,sm,u1,MC,AC,kC,RC=0,IC=0,zC=0,LC=0,m3=-1,g3=-1;const dh={};let $C=bd("");const Mg=sr?sr.anchor:Mr,y3=pn.layout.get("icon-text-fit").evaluate(Ra,{},Ui)!=="none";let x3=0,v3=0;if(pn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[x3,v3]=pn.layout.get("text-offset").evaluate(Ra,{},Ui).map(Ec=>Ec*Vi):(x3=pn.layout.get("text-radial-offset").evaluate(Ra,{},Ui)*Vi,v3=I2),jt.allowVerticalPlacement&&Vr.vertical){const Ec=Vr.vertical;if(sa)AC=L2(Ec),wn&&(kC=L2(wn));else{const Il=pn.layout.get("text-rotate").evaluate(Ra,{},Ui)+90;sm=Nb(Pn,Mg,Mr,_a,ca,tn,Ec,ua,Il,ba),wn&&(u1=Nb(Pn,Mg,Mr,_a,ca,tn,wn,Si,Il))}}if(on){const Ec=jt.iconSizeData,Il=Ti?Zp(jt.iconSizeData,jt.layers[0]._unevaluatedLayout._values["icon-size"],Ui,jt.zoom,Ra):1,gy=pn.layout.get("icon-rotate").evaluate(Ra,{},Ui),BC=WT(on,gy,go,y3,Ti?1/Il:$a.iconScaleFactor),b3=wn?WT(wn,gy,go,y3,$a.iconScaleFactor):void 0;im=Nb(Pn,Mg,Mr,_a,ca,tn,on,Si,gy,null,Ti?$a.iconScaleFactor*Il:1),RC=4*BC.length;let Ag=null;Ec.kind==="source"?(Ag=[Oo*pn.layout.get("icon-size").evaluate(Ra,{},Ui)*$a.iconScaleFactor],Ag[0]>Qp&&Wr(`${jt.layerIds[0]}: Value for "icon-size" is >= ${rv}. Reduce your "icon-size".`)):Ec.kind==="composite"&&(Ag=[Oo*$a.compositeIconSizes[0].evaluate(Ra,{},Ui)*$a.iconScaleFactor,Oo*$a.compositeIconSizes[1].evaluate(Ra,{},Ui)*$a.iconScaleFactor],(Ag[0]>Qp||Ag[1]>Qp)&&Wr(`${jt.layerIds[0]}: Value for "icon-size" is >= ${rv}. Reduce your "icon-size".`)),jt.addSymbols(jt.icon,BC,Ag,Fo,ci,Ra,!1,sr,Mr,am.lineStartIndex,am.lineLength,-1,ul,Ui,uh,nm),m3=jt.icon.placedSymbolArray.length-1,b3&&(IC=4*b3.length,jt.addSymbols(jt.icon,b3,Ag,Fo,ci,Ra,mo.vertical,sr,Mr,am.lineStartIndex,am.lineLength,-1,ul,Ui,uh,nm),g3=jt.icon.placedSymbolArray.length-1)}for(const Ec in Vr.horizontal){const Il=Vr.horizontal[Ec];Sf||($C=bd(Il.text),sa?MC=L2(Il):Sf=Nb(Pn,Mg,Mr,_a,ca,tn,Il,ua,pn.layout.get("text-rotate").evaluate(Ra,{},Ui),ba));const gy=Il.positionedLines.length===1;if(zC+=XT(jt,sr,Mr,Il,fn,pn,sa,Ra,ba,am,Vr.vertical?mo.horizontal:mo.horizontalOnly,gy?Object.keys(Vr.horizontal):[Ec],dh,m3,$a,ul,Ui,uh),gy)break}Vr.vertical&&(LC+=XT(jt,sr,Mr,Vr.vertical,fn,pn,sa,Ra,ba,am,mo.vertical,["vertical"],dh,g3,$a,ul,Ui,uh));let om=-1;const _3=(Ec,Il)=>Ec?Math.max(Ec,Il):Il;om=_3(MC,om),om=_3(AC,om),om=_3(kC,om);const I9=om>-1?1:0;jt.glyphOffsetArray.length>=65535&&Wr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ra.sortKey!==void 0&&jt.addToSortKeyRanges(jt.symbolInstances.length,Ra.sortKey),jt.symbolInstances.emplaceBack(Mr.x,Mr.y,Mg.x,Mg.y,Mg.z,dh.right>=0?dh.right:-1,dh.center>=0?dh.center:-1,dh.left>=0?dh.left:-1,dh.vertical>=0?dh.vertical:-1,m3,g3,$C,Sf!==void 0?Sf:jt.collisionBoxArray.length,Sf!==void 0?Sf+1:jt.collisionBoxArray.length,sm!==void 0?sm:jt.collisionBoxArray.length,sm!==void 0?sm+1:jt.collisionBoxArray.length,im!==void 0?im:jt.collisionBoxArray.length,im!==void 0?im+1:jt.collisionBoxArray.length,u1||jt.collisionBoxArray.length,u1?u1+1:jt.collisionBoxArray.length,_a,zC,LC,RC,IC,I9,0,x3,v3,om,0,y3?1:0)})(l,ar,gr,Lt,s,u,g,Rt,l.layers[0],l.collisionBoxArray,r.index,r.sourceLayerIndex,l.index,Ne,Ue,M,0,Be,rt,ae,r,f,$,T,k,I,R,j)};if(st==="line")for(const Lt of kt(r.geometry,0,0,lr,lr)){const ar=Ka(Lt,je,Qe,s.vertical||ie,u,le,_e,l.overscaling,lr);for(const nr of ar)ie&&tO(l,ie.text,it,nr)||Yt(Lt,nr,I)}else if(st==="line-center"){for(const Lt of r.geometry)if(Lt.length>1){const ar=An(Lt,Qe,s.vertical||ie,u,le,_e);ar&&Yt(Lt,ar,I)}}else if(r.type==="Polygon")for(const Lt of pf(r.geometry,0)){const ar=Yj(Lt,16);Yt(Lt[0],new ir(ar.x,ar.y,0,0,void 0),I)}else if(r.type==="LineString")for(const Lt of r.geometry)Yt(Lt,new ir(Lt[0].x,Lt[0].y,0,0,void 0),I);else if(r.type==="Point")for(const Lt of r.geometry)for(const ar of Lt)Yt([ar],new ir(ar.x,ar.y,0,0,void 0),I)}const rv=255,Qp=rv*Oo;function XT(l,r,s,u,g,f,x,C,M,$,T,k,I,P,R,j,W,K){const ae=function(le,fe,_e,je,Ne,Be,Qe,Ue){const rt=[];if(fe.positionedLines.length===0)return rt;const st=je.layout.get("text-rotate").evaluate(Be,{})*Math.PI/180,it=function(Rt){const Yt=Rt[0],Lt=Rt[1],ar=Yt*Lt;return ar>0?[Yt,-Lt]:ar<0?[-Yt,Lt]:Yt===0?[Lt,Yt]:[Lt,-Yt]}(_e);let ct=Math.abs(fe.top-fe.bottom);for(const Rt of fe.positionedLines)ct-=Rt.lineOffset;const gt=fe.positionedLines.length,vt=ct/gt;let ht=fe.top-_e[1];for(let Rt=0;Rt<gt;++Rt){const Yt=fe.positionedLines[Rt];ht=Xj(fe,vt,ht,Rt);for(const Lt of Yt.positionedGlyphs){if(!Lt.rect)continue;const ar=Lt.rect||{};let nr=Sg+1,gr=!0,jt=1,Mr=0;if(Lt.imageName){const ci=Qe[Ai.build(Lt.imageName).getSerializedPrimary()];if(!ci)continue;if(ci.sdf){Wr("SDF images are not supported in formatted text and will be ignored.");continue}gr=!1,jt=ci.pixelRatio,nr=pr/jt}const sr=(Ne||Ue)&&Lt.vertical,Cr=Lt.metrics.advance*Lt.scale/2,Vr=Lt.metrics,on=Lt.rect;if(on===null)continue;Ue&&fe.verticalizable&&(Mr=Lt.imageName?Cr-Lt.metrics.width*Lt.scale/2:0);const fn=Ne?[Lt.x+Cr,Lt.y]:[0,0];let wn=[0,0],pn=[0,0],Pn=!1;Ne||(sr?(pn=[Lt.x+Cr+it[0],Lt.y+it[1]-Mr],Pn=!0):wn=[Lt.x+Cr+_e[0],Lt.y+_e[1]-Mr]);const _a=on.w*Lt.scale/(jt*(Lt.localGlyph?ra:1)),ca=on.h*Lt.scale/(jt*(Lt.localGlyph?ra:1));let tn,ua,sa,ba;if(sr){const ci=Lt.y-ht,Fo=new dt(-Cr,Cr-ci),Ra=-Math.PI/2,$a=new dt(...pn);tn=new dt(-Cr+wn[0],wn[1]),tn._rotateAround(Ra,Fo)._add($a),tn.x+=-ci+Cr,tn.y-=(Vr.left-nr)*Lt.scale;const go=Lt.imageName?Vr.advance*Lt.scale:Vi*Lt.scale,Ti=String.fromCodePoint(Lt.glyph);_g(Ti)?tn.x+=(1-nr)*Lt.scale:lh(Ti)?tn.x+=go-Vr.height*Lt.scale+(-nr-1)*Lt.scale:tn.x+=Lt.imageName||Vr.width+2*nr===on.w&&Vr.height+2*nr===on.h?(go-ca)/2:(go-(Vr.height+2*nr)*Lt.scale)/2,ua=new dt(tn.x,tn.y-_a),sa=new dt(tn.x+ca,tn.y),ba=new dt(tn.x+ca,tn.y-_a)}else{const ci=(Vr.left-nr)*Lt.scale-Cr+wn[0],Fo=(-Vr.top-nr)*Lt.scale+wn[1],Ra=ci+_a,$a=Fo+ca;tn=new dt(ci,Fo),ua=new dt(Ra,Fo),sa=new dt(ci,$a),ba=new dt(Ra,$a)}if(st){let ci;ci=Ne?new dt(0,0):Pn?new dt(it[0],it[1]):new dt(_e[0],_e[1]),tn._rotateAround(st,ci),ua._rotateAround(st,ci),sa._rotateAround(st,ci),ba._rotateAround(st,ci)}const wi=new dt(0,0),Si=new dt(0,0);rt.push({tl:tn,tr:ua,bl:sa,br:ba,texPrimary:ar,texSecondary:void 0,writingMode:fe.writingMode,glyphOffset:fn,sectionIndex:Lt.sectionIndex,isSDF:gr,pixelOffsetTL:wi,pixelOffsetBR:Si,minFontScaleX:0,minFontScaleY:0})}}return rt}(0,u,M,f,x,C,g,l.allowVerticalPlacement),ie=l.textSizeData;let J=null;ie.kind==="source"?(J=[Oo*f.layout.get("text-size").evaluate(C,{},W)*R.textScaleFactor],J[0]>Qp&&Wr(`${l.layerIds[0]}: Value for "text-size" is >= ${rv}. Reduce your "text-size".`)):ie.kind==="composite"&&(J=[Oo*R.compositeTextSizes[0].evaluate(C,{},W)*R.textScaleFactor,Oo*R.compositeTextSizes[1].evaluate(C,{},W)*R.textScaleFactor],(J[0]>Qp||J[1]>Qp)&&Wr(`${l.layerIds[0]}: Value for "text-size" is >= ${rv}. Reduce your "text-size".`)),l.addSymbols(l.text,ae,J,M,x,C,T,r,s,$.lineStartIndex,$.lineLength,P,j,W,K,!1);for(const le of k)I[le]=l.text.placedSymbolArray.length-1;return 4*ae.length}function YT(l){for(const r in l)return l[r];return null}function Nb(l,r,s,u,g,f,x,C,M,$,T=1){let k=x.top/T,I=x.bottom/T,P=x.left/T,R=x.right/T;const j=x.collisionPadding;if(j&&(P-=j[0],k-=j[1],R+=j[2],I+=j[3]),M){const W=new dt(P,k),K=new dt(R,k),ae=new dt(P,I),ie=new dt(R,I),J=mr(M);let le=new dt(0,0);$&&(le=new dt($[0],$[1])),W._rotateAround(J,le),K._rotateAround(J,le),ae._rotateAround(J,le),ie._rotateAround(J,le),P=Math.min(W.x,K.x,ae.x,ie.x),R=Math.max(W.x,K.x,ae.x,ie.x),k=Math.min(W.y,K.y,ae.y,ie.y),I=Math.max(W.y,K.y,ae.y,ie.y)}return l.emplaceBack(r.x,r.y,r.z,s.x,s.y,P,k,R,I,C,u,g,f),l.length-1}function L2(l){l.collisionPadding&&(l.top-=l.collisionPadding[1],l.bottom+=l.collisionPadding[3]);const r=l.bottom-l.top;return r>0?Math.max(10,r):null}function tO(l,r,s,u){const g=l.compareText;if(r in g){const f=g[r];for(let x=f.length-1;x>=0;x--)if(u.dist(f[x])<s)return!0}else g[r]=[];return g[r].push(u),!1}function JT(l,r){const s=l.fovAboveCenter,u=l.elevation?l.elevation.getMinElevationBelowMSL()*r:0,g=(l._camera.position[2]*l.worldSize-u)/Math.cos(l._pitch),f=Math.sin(s)*g/Math.sin(Math.max(Math.PI/2-l._pitch-s,.01));let x=Math.sin(l._pitch)*f+g;const C=g*(1/l._horizonShift);return l.elevation&&l.elevation.exaggeration()!==0||(x*=1+Math.max(l.zoom-17,0)),Math.min(1.01*x,C)}function nv(l,r){if(!r.isReprojectedInTileSpace)return{scale:1<<l.z,x:l.x,y:l.y,x2:l.x+1,y2:l.y+1,projection:r};const s=Math.pow(2,-l.z),u=l.x*s,g=(l.x+1)*s,f=l.y*s,x=(l.y+1)*s,C=qs(u),M=qs(g),$=Li(f),T=Li(x),k=r.project(C,$),I=r.project(M,$),P=r.project(M,T),R=r.project(C,T);let j=Math.min(k.x,I.x,P.x,R.x),W=Math.min(k.y,I.y,P.y,R.y),K=Math.max(k.x,I.x,P.x,R.x),ae=Math.max(k.y,I.y,P.y,R.y);const ie=s/16;function J(fe,_e,je,Ne,Be,Qe){const Ue=(je+Be)/2,rt=(Ne+Qe)/2,st=r.project(qs(Ue),Li(rt)),it=Math.max(0,j-st.x,W-st.y,st.x-K,st.y-ae);j=Math.min(j,st.x),K=Math.max(K,st.x),W=Math.min(W,st.y),ae=Math.max(ae,st.y),it>ie&&(J(fe,st,je,Ne,Ue,rt),J(st,_e,Ue,rt,Be,Qe))}J(k,I,u,f,g,f),J(I,P,g,f,g,x),J(P,R,g,x,u,x),J(R,k,u,x,u,f),j-=ie,W-=ie,K+=ie,ae+=ie;const le=1/Math.max(K-j,ae-W);return{scale:le,x:j*le,y:W*le,x2:K*le,y2:ae*le,projection:r}}function QT(l,{x:r,y:s},u=0){return new dt(((r-u)*l.scale-l.x)*lr,(s*l.scale-l.y)*lr)}const rO=De.mat4.identity(new Float32Array(16));class em{constructor(r){this.spec=r,this.name=r.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(r,s){return{x:0,y:0,z:0}}unproject(r,s){return new $n(0,0)}projectTilePoint(r,s,u){return{x:r,y:s,z:0}}locationPoint(r,s,u=!0){return r._coordinatePoint(r.locationCoordinate(s),u)}pixelsPerMeter(r,s){return Xi(1,r)*s}pixelSpaceConversion(r,s,u){return 1}farthestPixelDistance(r){return JT(r,r.pixelsPerMeter)}pointCoordinate(r,s,u,g){const f=r.horizonLineFromTop(!1),x=new dt(s,Math.max(f,u));return r.rayIntersectionCoordinate(r.pointRayIntersection(x,g))}pointCoordinate3D(r,s,u){const g=new dt(s,u);if(r.elevation)return r.elevation.pointCoordinate(g);{const f=this.pointCoordinate(r,g.x,g.y,0);return[f.x,f.y,f.z]}}isPointAboveHorizon(r,s){if(r.elevation&&r.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(r,s.x,s.y);const u=r.horizonLineFromTop();return s.y<u}createInversionMatrix(r,s){return rO}createTileMatrix(r,s,u){let g,f,x;const C=u.canonical,M=De.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const $=nv(C,this);g=1,f=$.x+u.wrap*$.scale,x=$.y,De.mat4.scale(M,M,[g/$.scale,g/$.scale,r.pixelsPerMeter/s])}else g=s/r.zoomScale(C.z),f=(C.x+Math.pow(2,C.z)*u.wrap)*g,x=C.y*g;return De.mat4.translate(M,M,[f,x,0]),De.mat4.scale(M,M,[g/lr,g/lr,1]),M}upVector(r,s,u){return[0,0,1]}upVectorScale(r,s,u){return{metersToTile:1}}}class nO extends em{constructor(r){super(r),this.range=[4,7],this.center=r.center||[-96,37.5];const[s,u]=this.parallels=r.parallels||[29.5,45.5],g=Math.sin(mr(s));this.n=(g+Math.sin(mr(u)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(r,s){const{n:u,c:g,r0:f}=this,x=mr(r-this.center[0]),C=mr(s),M=Math.sqrt(g-2*u*Math.sin(C))/u;return{x:M*Math.sin(x*u),y:M*Math.cos(x*u)-f,z:0}}unproject(r,s){const{n:u,c:g,r0:f}=this,x=f+s;let C=Math.atan2(r,Math.abs(x))*Math.sign(x);x*u<0&&(C-=Math.PI*Math.sign(r)*Math.sign(x));const M=mr(this.center[0])*u;C=kr(C,-Math.PI-M,Math.PI-M);const $=fr(Pr(C/u)+this.center[0],-180,180),T=Math.asin(fr((g-(r*r+x*x)*u*u)/(2*u),-1,1)),k=fr(Pr(T),-85.051129,cs);return new $n($,k)}}const av=1.340264,iv=-.081106,sv=893e-6,ov=.003796,jb=Math.sqrt(3)/2;class aO extends em{project(r,s){s=s/180*Math.PI,r=r/180*Math.PI;const u=Math.asin(jb*Math.sin(s)),g=u*u,f=g*g*g;return{x:.5*(r*Math.cos(u)/(jb*(av+3*iv*g+f*(7*sv+9*ov*g)))/Math.PI+.5),y:1-.5*(u*(av+iv*g+f*(sv+ov*g))/Math.PI+1),z:0}}unproject(r,s){r=(2*r-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,g=u*u,f=g*g*g;for(let T,k,I,P=0;P<12&&(k=u*(av+iv*g+f*(sv+ov*g))-s,I=av+3*iv*g+f*(7*sv+9*ov*g),T=k/I,u=fr(u-T,-Math.PI/3,Math.PI/3),g=u*u,f=g*g*g,!(Math.abs(T)<1e-12));++P);const x=jb*r*(av+3*iv*g+f*(7*sv+9*ov*g))/Math.cos(u),C=Math.asin(Math.sin(u)/jb),M=fr(180*x/Math.PI,-180,180),$=fr(180*C/Math.PI,-85.051129,cs);return new $n(M,$)}}class iO extends em{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0}project(r,s){return{x:.5+r/360,y:.5-s/360,z:0}}unproject(r,s){const u=360*(r-.5),g=fr(360*(.5-s),-85.051129,cs);return new $n(u,g)}}const sy=Math.PI/2;function Ob(l){return Math.tan((sy+l)/2)}class sO extends em{constructor(r){super(r),this.center=r.center||[0,30];const[s,u]=this.parallels=r.parallels||[30,30];let g=mr(s),f=mr(u);this.southernCenter=g+f<0,this.southernCenter&&(g=-g,f=-f);const x=Math.cos(g),C=Ob(g);this.n=g===f?Math.sin(g):Math.log(x/Math.cos(f))/Math.log(Ob(f)/C),this.f=x*Math.pow(Ob(g),this.n)/this.n}project(r,s){s=mr(s),this.southernCenter&&(s=-s),r=mr(r-this.center[0]);const u=1e-6,{n:g,f}=this;f>0?s<-sy+u&&(s=-sy+u):s>sy-u&&(s=sy-u);const x=f/Math.pow(Ob(s),g);let C=x*Math.sin(g*r),M=f-x*Math.cos(g*r);return C=.5*(C/Math.PI+.5),M=.5*(M/Math.PI+.5),{x:C,y:this.southernCenter?M:1-M,z:0}}unproject(r,s){r=(2*r-.5)*Math.PI,this.southernCenter&&(s=1-s),s=(2*(1-s)-.5)*Math.PI;const{n:u,f:g}=this,f=g-s,x=Math.sign(f),C=Math.sign(u)*Math.sqrt(r*r+f*f);let M=Math.atan2(r,Math.abs(f))*x;f*u<0&&(M-=Math.PI*Math.sign(r)*x);const $=fr(Pr(M/u)+this.center[0],-180,180),T=fr(Pr(2*Math.atan(Math.pow(g/C,1/u))-sy),-85.051129,cs);return new $n($,this.southernCenter?-T:T)}}class eE extends em{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(r,s){return{x:ol(r),y:ls(s),z:0}}unproject(r,s){const u=qs(r),g=Li(s);return new $n(u,g)}}const tE=mr(cs);class oO extends em{project(r,s){const u=(s=mr(s))*s,g=u*u;return{x:.5*((r=mr(r))*(.8707-.131979*u+g*(g*(.003971*u-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(s*(1.007226+u*(.015085+g*(.028874*u-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(r,s){r=(2*r-.5)*Math.PI;let u=s=(2*(1-s)-1)*Math.PI,g=25,f=0,x=u*u;do{x=u*u;const $=x*x;f=(u*(1.007226+x*(.015085+$*(.028874*x-.044475-.005916*$)))-s)/(1.007226+x*(.045255+$*(.259866*x-.311325-.005916*11*$))),u=fr(u-f,-tE,tE)}while(Math.abs(f)>1e-6&&--g>0);x=u*u;const C=fr(Pr(r/(.8707+x*(x*(x*x*x*(.003971-.001529*x)-.013791)-.131979))),-180,180),M=Pr(u);return new $n(C,M)}}const rE=mr(cs);class lO extends em{project(r,s){s=mr(s),r=mr(r);const u=Math.cos(s),g=2/Math.PI,f=Math.acos(u*Math.cos(r/2)),x=Math.sin(f)/f,C=.5*(r*g+2*u*Math.sin(r/2)/x)||0,M=.5*(s+Math.sin(s)/x)||0;return{x:.5*(C/Math.PI+.5),y:1-.5*(M/Math.PI+1),z:0}}unproject(r,s){let u=r=(2*r-.5)*Math.PI,g=s=(2*(1-s)-1)*Math.PI,f=25;const x=1e-6;let C=0,M=0;do{const $=Math.cos(g),T=Math.sin(g),k=2*T*$,I=T*T,P=$*$,R=Math.cos(u/2),j=Math.sin(u/2),W=2*R*j,K=j*j,ae=1-P*R*R,ie=ae?1/ae:0,J=ae?Math.acos($*R)*Math.sqrt(1/ae):0,le=.5*(2*J*$*j+2*u/Math.PI)-r,fe=.5*(J*T+g)-s,_e=.5*ie*(P*K+J*$*R*I)+1/Math.PI,je=ie*(W*k/4-J*T*j),Ne=.125*ie*(k*j-J*T*P*W),Be=.5*ie*(I*R+J*K*$)+.5,Qe=je*Ne-Be*_e;C=(fe*je-le*Be)/Qe,M=(le*Ne-fe*_e)/Qe,u=fr(u-C,-Math.PI,Math.PI),g=fr(g-M,-rE,rE)}while((Math.abs(C)>x||Math.abs(M)>x)&&--f>0);return new $n(Pr(u),Pr(g))}}class nE extends em{constructor(r){super(r),this.center=r.center||[0,0],this.parallels=r.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(mr(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(r,s){const{scale:u,cosPhi:g}=this;return{x:mr(r)*g*u+.5,y:-Math.sin(mr(s))/g*u+.5,z:0}}unproject(r,s){const{scale:u,cosPhi:g}=this,f=-(s-.5)/u,x=fr(Pr((r-.5)/u)/g,-180,180),C=Math.asin(fr(f*g,-1,1)),M=fr(Pr(C),-85.051129,cs);return new $n(x,M)}}class cO extends eE{constructor(r){super(r),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(r,s,u){const g=qr(r,s,u),f=aa(Sn(u));return De.vec3.transformMat4(g,g,f),{x:g[0],y:g[1],z:g[2]}}locationPoint(r,s){const u=Al(s.lat,s.lng),g=De.vec3.normalize([],u),f=r.elevation?r.elevation.getAtPointOrZero(r.locationCoordinate(s),r._centerAltitude):r._centerAltitude,x=Xi(1,0)*lr*f;De.vec3.scaleAndAdd(u,u,g,x);const C=De.mat4.identity(new Float64Array(16));return De.mat4.multiply(C,r.pixelMatrix,r.globeMatrix),De.vec3.transformMat4(u,u,C),new dt(u[0],u[1])}pixelsPerMeter(r,s){return Xi(1,0)*s}pixelSpaceConversion(r,s,u){const g=Xi(1,r)*s,f=Or(Xi(1,45)*s,g,u);return this.pixelsPerMeter(r,s)/f}createTileMatrix(r,s,u){const g=za(Sn(u.canonical));return De.mat4.multiply(new Float64Array(16),r.globeMatrix,g)}createInversionMatrix(r,s){const{center:u}=r,g=aa(Sn(s));return De.mat4.rotateY(g,g,mr(u.lng)),De.mat4.rotateX(g,g,mr(u.lat)),De.mat4.scale(g,g,[r._pixelsPerMercatorPixel,r._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(r,s,u,g){return xn(r,s,u,!0)||new m(0,0)}pointCoordinate3D(r,s,u){const g=this.pointCoordinate(r,s,u,0);return[g.x,g.y,g.z]}isPointAboveHorizon(r,s){return!xn(r,s.x,s.y,!1)}farthestPixelDistance(r){const s=function(g,f){const x=g.cameraToCenterDistance,C=g._centerAltitude*f,M=g._camera,$=g._camera.forward(),T=De.vec3.add([],De.vec3.scale([],$,-x),[0,0,C]),k=g.worldSize/(2*Math.PI),I=[0,0,-k],P=g.width/g.height,R=Math.tan(g.fovAboveCenter),j=De.vec3.scale([],M.up(),R),W=De.vec3.scale([],M.right(),R*P),K=De.vec3.normalize([],De.vec3.add([],De.vec3.add([],$,j),W)),ae=[];let ie;if(new mn(T,K).closestPointOnSphere(I,k,ae)){const J=De.vec3.add([],ae,I),le=De.vec3.sub([],J,T);ie=Math.cos(g.fovAboveCenter)*De.vec3.length(le)}else{const J=De.vec3.sub([],T,I),le=De.vec3.sub([],I,T);De.vec3.normalize(le,le);const fe=De.vec3.length(J)-k;ie=Math.sqrt(fe*(fe+2*k));const _e=Math.acos(ie/(k+fe))-Math.acos(De.vec3.dot($,le));ie*=Math.cos(_e)}return 1.01*ie}(r,this.pixelsPerMeter(r.center.lat,r.worldSize)),u=Qi(r.zoom);if(u>0){const g=JT(r,Xi(1,r.center.lat)*r.worldSize),f=r.worldSize/(2*Math.PI),x=Math.max(r.width,r.height)/r.worldSize*Math.PI;return Or(s,g+f*(1-Math.cos(x)),Math.pow(u,10))}return s}upVector(r,s,u){return qr(s,u,r,1)}upVectorScale(r){return{metersToTile:Vn(va(Sn(r)))}}}function aE(l){const r=l.parallels,s=!!r&&Math.abs(r[0]+r[1])<.01;switch(l.name){case"mercator":return new eE(l);case"equirectangular":return new iO(l);case"naturalEarth":return new oO(l);case"equalEarth":return new aO(l);case"winkelTripel":return new lO(l);case"albers":return s?new nE(l):new nO(l);case"lambertConformalConic":return s?new nE(l):new sO(l);case"globe":return new cO(l)}throw new Error(`Invalid projection name: ${l.name}`)}const uO=iu.VectorTileFeature.types,dO=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Fb(l,r,s,u,g,f,x,C,M,$,T,k,I){const P=C?Math.min(Qp,Math.round(C[0])):0,R=C?Math.min(Qp,Math.round(C[1])):0;l.emplaceBack(r,s,Math.round(32*u),Math.round(32*g),f,x,(P<<1)+(M?1:0),R,16*$,16*T,256*k,256*I)}function Vb(l,r,s){l.emplaceBack(r,s)}function Ub(l,r,s,u,g,f,x){l.emplaceBack(r,s,u,g,f,x)}function Gb(l,r,s,u,g){l.emplaceBack(r,s,u,g),l.emplaceBack(r,s,u,g),l.emplaceBack(r,s,u,g),l.emplaceBack(r,s,u,g)}function hO(l){for(const r of l.sections)if(yp(r.text))return!0;return!1}class $2{constructor(r){this.layoutVertexArray=new Tp,this.indexArray=new Fi,this.programConfigurations=r,this.segments=new Aa,this.dynamicLayoutVertexArray=new uc,this.opacityVertexArray=new ed,this.placedSymbolArray=new Ap,this.iconTransitioningVertexArray=new pc,this.globeExtVertexArray=new Zd,this.zOffsetVertexArray=new td}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(r,s,u,g,f){this.isEmpty()||(u&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Db.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,Mb.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,dO,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=r.createVertexBuffer(this.iconTransitioningVertexArray,Ab.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,Pb.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||f)&&(this.zOffsetVertexBuffer=r.createVertexBuffer(this.zOffsetVertexArray,Yx.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||g)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Tr($2,"SymbolBuffers");class B2{constructor(r,s,u){this.layoutVertexArray=new r,this.layoutAttributes=s,this.indexArray=new u,this.segments=new Aa,this.collisionVertexArray=new Cp,this.collisionVertexArrayExt=new uc}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,ey.members,!0),this.collisionVertexBufferExt=r.createVertexBuffer(this.collisionVertexArrayExt,R2.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Tr(B2,"CollisionBuffers");class Hb{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.lut=r.lut,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(x=>x.fqid),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=De.mat4.identity([]),this.placementViewportMatrix=De.mat4.identity([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ty(this.zoom,s["text-size"]),this.iconSizeData=ty(this.zoom,s["icon-size"]);const u=this.layers[0].layout,g=u.get("symbol-sort-key"),f=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(x=>mo[x]),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=r.sourceID,this.projection=r.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=u.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new $2(new tu(this.layers,{zoom:this.zoom,lut:this.lut},r=>r.startsWith("text")||r.startsWith("symbol"))),this.icon=new $2(new tu(this.layers,{zoom:this.zoom,lut:this.lut},r=>r.startsWith("icon")||r.startsWith("symbol"))),this.glyphOffsetArray=new Qd,this.lineVertexArray=new Jc,this.symbolInstances=new Zm}calculateGlyphDependencies(r,s,u,g,f){for(const x of r){const C=x.codePointAt(0);if(C===void 0)break;if(s[C]=!0,g&&f&&C<=65535){const M=cd[x];M&&(s[M.charCodeAt(0)]=!0)}}}updateFootprints(r,s){}updateReplacement(r,s){if(s.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=s.updateTime;const u=s.getReplacementRegionsForTile(r.toUnwrapped(),!0);return!hs(this.activeReplacements,u)&&(this.activeReplacements=u,!0)}populate(r,s,u,g){const f=this.layers[0],x=f.layout,C=this.projection.name==="globe",M=x.get("text-font"),$=x.get("text-field"),T=x.get("icon-image"),[k,I]=x.get("icon-size-scale-range"),P=fr(s.scaleFactor||1,k,I),R=($.value.kind!=="constant"||$.value.value instanceof Mi&&!$.value.value.isEmpty()||$.value.value.toString().length>0)&&(M.value.kind!=="constant"||M.value.value.length>0),j=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,W=x.get("symbol-sort-key");if(this.features=[],!R&&!j)return;const K=s.iconDependencies,ae=s.glyphDependencies,ie=s.availableImages,J=new Cn(this.zoom);for(const{feature:le,id:fe,index:_e,sourceLayerIndex:je}of r){const Ne=f._featureFilter.needGeometry,Be=X(le,Ne);if(!f._featureFilter.filter(J,Be,u))continue;if(Ne||(Be.geometry=Z(le,u,g)),C&&le.type!==1&&u.z<=5){const it=Be.geometry,ct=.98078528056,gt=(vt,ht)=>{const Rt=qr(vt.x,vt.y,u,1),Yt=qr(ht.x,ht.y,u,1);return De.vec3.dot(Rt,Yt)<ct};for(let vt=0;vt<it.length;vt++)it[vt]=L(it[vt],gt)}let Qe,Ue;if(R){const it=f.getValueAndResolveTokens("text-field",Be,u,ie),ct=Mi.factory(it);hO(ct)&&(this.hasRTLText=!0),(!this.hasRTLText||al()==="unavailable"||this.hasRTLText&&na.isParsed())&&(Qe=oh(ct,f,Be))}if(j){const it=f.getValueAndResolveTokens("icon-image",Be,u,ie);Ue=it instanceof Ai?it:Ai.build(it)}if(!Qe&&!Ue)continue;const rt=this.sortFeaturesByKey?W.evaluate(Be,{},u):void 0,st={id:fe,text:Qe,icon:Ue,index:_e,sourceLayerIndex:je,geometry:Be.geometry,properties:le.properties,type:uO[le.type],sortKey:rt};if(this.features.push(st),Ue){const it=Zp(this.iconSizeData,this.layers[0]._unevaluatedLayout._values["icon-size"],u,this.zoom,st)*P*this.pixelRatio,ct=Ue.getPrimary().scaleSelf(it);if(K[ct.id]=K[ct.id]||[],K[ct.id].push(ct),Ue.nameSecondary){const gt=Ue.getSecondary().scaleSelf(it);K[gt.id]=K[gt.id]||[],K[gt.id].push(gt)}}if(Qe){const it=M.evaluate(Be,{},u).join(","),ct=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(mo.vertical)>=0;for(const gt of Qe.sections)if(gt.image){const vt=gt.image.getPrimary().scaleSelf(this.pixelRatio);K[vt.id]=K[vt.id]||[],K[vt.id].push(vt)}else{const vt=Tl(Qe.toString()),ht=gt.fontStack||it,Rt=ae[ht]=ae[ht]||{};this.calculateGlyphDependencies(gt.text,Rt,ct,this.allowVerticalPlacement,vt)}}}x.get("symbol-placement")==="line"&&(this.features=function(le){const fe={},_e={},je=[];let Ne=0;function Be(st){je.push(le[st]),Ne++}function Qe(st,it,ct){const gt=_e[st];return delete _e[st],_e[it]=gt,je[gt].geometry[0].pop(),je[gt].geometry[0]=je[gt].geometry[0].concat(ct[0]),gt}function Ue(st,it,ct){const gt=fe[it];return delete fe[it],fe[st]=gt,je[gt].geometry[0].shift(),je[gt].geometry[0]=ct[0].concat(je[gt].geometry[0]),gt}function rt(st,it,ct){const gt=ct?it[0][it[0].length-1]:it[0][0];return`${st}:${gt.x}:${gt.y}`}for(let st=0;st<le.length;st++){const it=le[st],ct=it.geometry,gt=it.text?it.text.toString():null;if(!gt){Be(st);continue}const vt=rt(gt,ct),ht=rt(gt,ct,!0);if(vt in _e&&ht in fe&&_e[vt]!==fe[ht]){const Rt=Ue(vt,ht,ct),Yt=Qe(vt,ht,je[Rt].geometry);delete fe[vt],delete _e[ht],_e[rt(gt,je[Yt].geometry,!0)]=Yt,je[Rt].geometry=null}else vt in _e?Qe(vt,ht,ct):ht in fe?Ue(vt,ht,ct):(Be(st),fe[vt]=Ne-1,_e[ht]=Ne-1)}return je.filter(st=>st.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((le,fe)=>le.sortKey-fe.sortKey)}update(r,s,u,g,f,x,C){this.text.programConfigurations.updatePaintArrays(r,s,f,u,g,x,C),this.icon.programConfigurations.updatePaintArrays(r,s,f,u,g,x,C)}updateZOffset(){const r=(f,x,C)=>{u+=x,u>f.length&&f.resize(u);for(let M=-x;M<0;M++)f.emplace(M+u,C)},s=(f,x,C)=>{g+=x,g>f.length&&f.resize(g);for(let M=-x;M<0;M++)f.emplace(M+g,C)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let u=0,g=0;for(let f=0;f<this.symbolInstances.length;f++){const x=this.symbolInstances.get(f),{numHorizontalGlyphVertices:C,numVerticalGlyphVertices:M,numIconVertices:$}=x,T=x.zOffset,k=$>0;if((C>0||M>0)&&(r(this.text.zOffsetVertexArray,C,T),r(this.text.zOffsetVertexArray,M,T)),k){const{placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:P}=x;I>=0&&s(this.icon.zOffsetVertexArray,$,T),P>=0&&s(this.icon.zOffsetVertexArray,x.numVerticalIconVertices,T)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=aE(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,s){const u=this.lineVertexArray.length;if(r.segment!==void 0)for(const{x:g,y:f}of s)this.lineVertexArray.emplaceBack(g,f);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(r,s,u,g,f,x,C,M,$,T,k,I,P,R,j,W){const K=r.indexArray,ae=r.layoutVertexArray,ie=r.globeExtVertexArray,J=r.segments.prepareSegment(4*s.length,ae,K,this.canOverlap?x.sortKey:void 0),le=this.glyphOffsetArray.length,fe=J.vertexLength,_e=this.allowVerticalPlacement&&C===mo.vertical?Math.PI/2:0,je=x.text&&x.text.sections;for(let Be=0;Be<s.length;Be++){const{tl:Qe,tr:Ue,bl:rt,br:st,texPrimary:it,texSecondary:ct,pixelOffsetTL:gt,pixelOffsetBR:vt,minFontScaleX:ht,minFontScaleY:Rt,glyphOffset:Yt,isSDF:Lt,sectionIndex:ar}=s[Be],nr=J.vertexLength,gr=Yt[1];if(Fb(ae,$.x,$.y,Qe.x,gr+Qe.y,it.x,it.y,u,Lt,gt.x,gt.y,ht,Rt),Fb(ae,$.x,$.y,Ue.x,gr+Ue.y,it.x+it.w,it.y,u,Lt,vt.x,gt.y,ht,Rt),Fb(ae,$.x,$.y,rt.x,gr+rt.y,it.x,it.y+it.h,u,Lt,gt.x,vt.y,ht,Rt),Fb(ae,$.x,$.y,st.x,gr+st.y,it.x+it.w,it.y+it.h,u,Lt,vt.x,vt.y,ht,Rt),M){const{x:jt,y:Mr,z:sr}=M.anchor,[Cr,Vr,on]=M.up;Ub(ie,jt,Mr,sr,Cr,Vr,on),Ub(ie,jt,Mr,sr,Cr,Vr,on),Ub(ie,jt,Mr,sr,Cr,Vr,on),Ub(ie,jt,Mr,sr,Cr,Vr,on),Gb(r.dynamicLayoutVertexArray,jt,Mr,sr,_e)}else Gb(r.dynamicLayoutVertexArray,$.x,$.y,$.z,_e);if(W){const jt=ct||it;Vb(r.iconTransitioningVertexArray,jt.x,jt.y),Vb(r.iconTransitioningVertexArray,jt.x+jt.w,jt.y),Vb(r.iconTransitioningVertexArray,jt.x,jt.y+jt.h),Vb(r.iconTransitioningVertexArray,jt.x+jt.w,jt.y+jt.h)}K.emplaceBack(nr,nr+1,nr+2),K.emplaceBack(nr+1,nr+2,nr+3),J.vertexLength+=4,J.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Yt[0]),Be!==s.length-1&&ar===s[Be+1].sectionIndex||r.programConfigurations.populatePaintArrays(ae.length,x,x.index,{},P,R,j,je&&je[ar])}const Ne=M?M.anchor:$;r.placedSymbolArray.emplaceBack(Ne.x,Ne.y,Ne.z,$.x,$.y,le,this.glyphOffsetArray.length-le,fe,T,k,$.segment,u?u[0]:0,u?u[1]:0,g[0],g[1],C,0,!1,0,I,0)}_commitLayoutVertex(r,s,u,g,f,x,C){r.emplaceBack(s,u,g,f,x,Math.round(C.x),Math.round(C.y))}_addCollisionDebugVertices(r,s,u,g,f,x,C){const M=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),$=M.vertexLength,T=C.tileAnchorX,k=C.tileAnchorY;for(let P=0;P<4;P++)u.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(u.collisionVertexArrayExt,s,r.padding,C.zOffset),this._commitLayoutVertex(u.layoutVertexArray,g,f,x,T,k,new dt(r.x1,r.y1)),this._commitLayoutVertex(u.layoutVertexArray,g,f,x,T,k,new dt(r.x2,r.y1)),this._commitLayoutVertex(u.layoutVertexArray,g,f,x,T,k,new dt(r.x2,r.y2)),this._commitLayoutVertex(u.layoutVertexArray,g,f,x,T,k,new dt(r.x1,r.y2)),M.vertexLength+=4;const I=u.indexArray;I.emplaceBack($,$+1),I.emplaceBack($+1,$+2),I.emplaceBack($+2,$+3),I.emplaceBack($+3,$),M.primitiveLength+=4}_addTextDebugCollisionBoxes(r,s,u,g,f,x){for(let C=g;C<f;C++){const M=u.get(C),$=this.getSymbolInstanceTextSize(r,x,s,C);this._addCollisionDebugVertices(M,$,this.textCollisionBox,M.projectedAnchorX,M.projectedAnchorY,M.projectedAnchorZ,x)}}_addIconDebugCollisionBoxes(r,s,u,g,f,x){for(let C=g;C<f;C++){const M=u.get(C),$=this.getSymbolInstanceIconSize(r,s,x.placedIconSymbolIndex);this._addCollisionDebugVertices(M,$,this.iconCollisionBox,M.projectedAnchorX,M.projectedAnchorY,M.projectedAnchorZ,x)}}generateCollisionDebugBuffers(r,s,u){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new B2(Zh,kb.members,pc),this.iconCollisionBox=new B2(Zh,kb.members,pc);const g=cl(this.iconSizeData,r),f=cl(this.textSizeData,r,u);for(let x=0;x<this.symbolInstances.length;x++){const C=this.symbolInstances.get(x);this._addTextDebugCollisionBoxes(f,r,s,C.textBoxStartIndex,C.textBoxEndIndex,C),this._addTextDebugCollisionBoxes(f,r,s,C.verticalTextBoxStartIndex,C.verticalTextBoxEndIndex,C),this._addIconDebugCollisionBoxes(g,r,s,C.iconBoxStartIndex,C.iconBoxEndIndex,C),this._addIconDebugCollisionBoxes(g,r,s,C.verticalIconBoxStartIndex,C.verticalIconBoxEndIndex,C)}}getSymbolInstanceTextSize(r,s,u,g){const f=this.text.placedSymbolArray.get(s.rightJustifiedTextSymbolIndex>=0?s.rightJustifiedTextSymbolIndex:s.centerJustifiedTextSymbolIndex>=0?s.centerJustifiedTextSymbolIndex:s.leftJustifiedTextSymbolIndex>=0?s.leftJustifiedTextSymbolIndex:s.verticalPlacedTextSymbolIndex>=0?s.verticalPlacedTextSymbolIndex:g),x=Xp(this.textSizeData,r,f)/Vi;return this.tilePixelRatio*x}getSymbolInstanceIconSize(r,s,u){const g=this.icon.placedSymbolArray.get(u),f=Xp(this.iconSizeData,r,g);return this.tilePixelRatio*f}_commitDebugCollisionVertexUpdate(r,s,u,g){r.emplaceBack(s,-u,-u,g),r.emplaceBack(s,u,-u,g),r.emplaceBack(s,u,u,g),r.emplaceBack(s,-u,u,g)}_updateTextDebugCollisionBoxes(r,s,u,g,f,x,C){for(let M=g;M<f;M++){const $=u.get(M),T=this.getSymbolInstanceTextSize(r,x,s,M);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,T,$.padding,x.zOffset)}}_updateIconDebugCollisionBoxes(r,s,u,g,f,x,C){for(let M=g;M<f;M++){const $=u.get(M),T=this.getSymbolInstanceIconSize(r,s,x.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,T,$.padding,x.zOffset)}}updateCollisionDebugBuffers(r,s,u,g){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const f=cl(this.iconSizeData,r,g),x=cl(this.textSizeData,r,u);for(let C=0;C<this.symbolInstances.length;C++){const M=this.symbolInstances.get(C);this._updateTextDebugCollisionBoxes(x,r,s,M.textBoxStartIndex,M.textBoxEndIndex,M,u),this._updateTextDebugCollisionBoxes(x,r,s,M.verticalTextBoxStartIndex,M.verticalTextBoxEndIndex,M,u),this._updateIconDebugCollisionBoxes(f,r,s,M.iconBoxStartIndex,M.iconBoxEndIndex,M,g),this._updateIconDebugCollisionBoxes(f,r,s,M.verticalIconBoxStartIndex,M.verticalIconBoxEndIndex,M,g)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(r,s,u,g,f,x,C,M,$){const T={};if(s<u){const{x1:k,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ae,tileAnchorX:ie,tileAnchorY:J,featureIndex:le}=r.get(s);T.textBox={x1:k,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ae,tileAnchorX:ie,tileAnchorY:J},T.textFeatureIndex=le}if(g<f){const{x1:k,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ae,tileAnchorX:ie,tileAnchorY:J,featureIndex:le}=r.get(g);T.verticalTextBox={x1:k,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ae,tileAnchorX:ie,tileAnchorY:J},T.verticalTextFeatureIndex=le}if(x<C){const{x1:k,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ae,tileAnchorX:ie,tileAnchorY:J,featureIndex:le}=r.get(x);T.iconBox={x1:k,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ae,tileAnchorX:ie,tileAnchorY:J},T.iconFeatureIndex=le}if(M<$){const{x1:k,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ae,tileAnchorX:ie,tileAnchorY:J,featureIndex:le}=r.get(M);T.verticalIconBox={x1:k,y1:I,x2:P,y2:R,padding:j,projectedAnchorX:W,projectedAnchorY:K,projectedAnchorZ:ae,tileAnchorX:ie,tileAnchorY:J},T.verticalIconFeatureIndex=le}return T}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const u=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(r,s){const u=r.placedSymbolArray.get(s),g=u.vertexStartIndex+4*u.numGlyphs;for(let f=u.vertexStartIndex;f<g;f+=4)r.indexArray.emplaceBack(f,f+1,f+2),r.indexArray.emplaceBack(f+1,f+2,f+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(r),u=Math.cos(r),g=[],f=[],x=[];for(let C=0;C<this.symbolInstances.length;++C){x.push(C);const M=this.symbolInstances.get(C);g.push(0|Math.round(s*M.tileAnchorX+u*M.tileAnchorY)),f.push(M.featureIndex)}return x.sort((C,M)=>g[C]-g[M]||f[M]-f[C]),x}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let r=0;r<this.symbolInstances.length;++r)this.symbolInstanceIndexesSortedZOffset.push(r)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((r,s)=>this.symbolInstances.get(s).zOffset-this.symbolInstances.get(r).zOffset)}addToSortKeyRanges(r,s){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===s?u.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const u=this.symbolInstances.get(s);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:f,leftJustifiedTextSymbolIndex:x,verticalPlacedTextSymbolIndex:C,placedIconSymbolIndex:M,verticalPlacedIconSymbolIndex:$}=u;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),f>=0&&f!==g&&this.addIndicesForPlacedSymbol(this.text,f),x>=0&&x!==f&&x!==g&&this.addIndicesForPlacedSymbol(this.text,x),C>=0&&this.addIndicesForPlacedSymbol(this.text,C),M>=0&&this.addIndicesForPlacedSymbol(this.icon,M),$>=0&&this.addIndicesForPlacedSymbol(this.icon,$)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let iE,sE,N2;Tr(Hb,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Hb.addDynamicAttributes=Gb;class oE{constructor(r){this.type=r.property.overrides?r.property.overrides.runtimeType:Fs,this.defaultValue=r}evaluate(r){if(r.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(r.formattedSection))return s.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Tr(oE,"FormatSectionOverride",{omit:["defaultValue"]});const j2=()=>N2||(N2={layout:iE||(iE=new Ma({"symbol-placement":new tr(Tt.layout_symbol["symbol-placement"]),"symbol-spacing":new tr(Tt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new tr(Tt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vr(Tt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new tr(Tt.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new tr(Tt.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new tr(Tt.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new tr(Tt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new tr(Tt.layout_symbol["icon-ignore-placement"]),"icon-optional":new tr(Tt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new tr(Tt.layout_symbol["icon-rotation-alignment"]),"icon-size":new vr(Tt.layout_symbol["icon-size"]),"icon-size-scale-range":new tr(Tt.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new vr(Tt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new vr(Tt.layout_symbol["icon-text-fit-padding"]),"icon-image":new vr(Tt.layout_symbol["icon-image"]),"icon-rotate":new vr(Tt.layout_symbol["icon-rotate"]),"icon-padding":new tr(Tt.layout_symbol["icon-padding"]),"icon-keep-upright":new tr(Tt.layout_symbol["icon-keep-upright"]),"icon-offset":new vr(Tt.layout_symbol["icon-offset"]),"icon-anchor":new vr(Tt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new tr(Tt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new tr(Tt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new tr(Tt.layout_symbol["text-rotation-alignment"]),"text-field":new vr(Tt.layout_symbol["text-field"]),"text-font":new vr(Tt.layout_symbol["text-font"]),"text-size":new vr(Tt.layout_symbol["text-size"]),"text-size-scale-range":new tr(Tt.layout_symbol["text-size-scale-range"]),"text-max-width":new vr(Tt.layout_symbol["text-max-width"]),"text-line-height":new vr(Tt.layout_symbol["text-line-height"]),"text-letter-spacing":new vr(Tt.layout_symbol["text-letter-spacing"]),"text-justify":new vr(Tt.layout_symbol["text-justify"]),"text-radial-offset":new vr(Tt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new tr(Tt.layout_symbol["text-variable-anchor"]),"text-anchor":new vr(Tt.layout_symbol["text-anchor"]),"text-max-angle":new tr(Tt.layout_symbol["text-max-angle"]),"text-writing-mode":new tr(Tt.layout_symbol["text-writing-mode"]),"text-rotate":new vr(Tt.layout_symbol["text-rotate"]),"text-padding":new tr(Tt.layout_symbol["text-padding"]),"text-keep-upright":new tr(Tt.layout_symbol["text-keep-upright"]),"text-transform":new vr(Tt.layout_symbol["text-transform"]),"text-offset":new vr(Tt.layout_symbol["text-offset"]),"text-allow-overlap":new tr(Tt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new tr(Tt.layout_symbol["text-ignore-placement"]),"text-optional":new tr(Tt.layout_symbol["text-optional"]),visibility:new tr(Tt.layout_symbol.visibility)})),paint:sE||(sE=new Ma({"icon-opacity":new vr(Tt.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new vr(Tt.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new vr(Tt.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new vr(Tt.paint_symbol["text-emissive-strength"]),"icon-color":new vr(Tt.paint_symbol["icon-color"]),"icon-halo-color":new vr(Tt.paint_symbol["icon-halo-color"]),"icon-halo-width":new vr(Tt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vr(Tt.paint_symbol["icon-halo-blur"]),"icon-translate":new tr(Tt.paint_symbol["icon-translate"]),"icon-translate-anchor":new tr(Tt.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new vr(Tt.paint_symbol["icon-image-cross-fade"]),"text-opacity":new vr(Tt.paint_symbol["text-opacity"]),"text-occlusion-opacity":new vr(Tt.paint_symbol["text-occlusion-opacity"]),"text-color":new vr(Tt.paint_symbol["text-color"],{runtimeType:bs,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new vr(Tt.paint_symbol["text-halo-color"]),"text-halo-width":new vr(Tt.paint_symbol["text-halo-width"]),"text-halo-blur":new vr(Tt.paint_symbol["text-halo-blur"]),"text-translate":new tr(Tt.paint_symbol["text-translate"]),"text-translate-anchor":new tr(Tt.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new tr(Tt.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new tr(Tt.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new tr(Tt.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new tr(Tt.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new vr(Tt.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},N2);class qb extends is{constructor(r,s,u,g){super(r,j2(),s,u,g),this._colorAdjustmentMatrix=De.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=r.paint!==void 0&&("icon-occlusion-opacity"in r.paint||"text-occlusion-opacity"in r.paint)}recalculate(r,s){super.recalculate(r,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const g=[];for(const f of u)g.indexOf(f)<0&&g.push(f);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(r,s,u,g){return this._saturation===r&&this._contrast===s&&this._brightnessMin===u&&this._brightnessMax===g||(this._colorAdjustmentMatrix=function(f,x,C,M){f=Ae(f),x=ye(x);const $=De.mat4.create(),T=f/3,k=1-2*T,I=[k,T,T,0,T,k,T,0,T,T,k,0,0,0,0,1],P=.5-.5*x,R=M-C;return De.mat4.multiply($,[R,0,0,0,0,R,0,0,0,0,R,0,C,C,C,1],[x,0,0,0,0,x,0,0,0,0,x,0,P,P,P,1]),De.mat4.multiply($,$,I),$}(r,s,u,g),this._saturation=r,this._contrast=s,this._brightnessMin=u,this._brightnessMax=g),this._colorAdjustmentMatrix}getValueAndResolveTokens(r,s,u,g){const f=this.layout.get(r).evaluate(s,{},u,g),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||fp(x.value)||!f?f:function(C,M){return M.replace(/{([^{}]+)}/g,($,T)=>T in C?String(C[T]):"")}(s.properties,f)}createBucket(r){return new Hb(r)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const r of j2().paint.overridableProperties){if(!qb.hasPaintOverride(this.layout,r))continue;const s=this.paint.get(r),u=new oE(s),g=new qc(u,s.property.specification,this.scope,this.options);let f=null;f=s.value.kind==="constant"||s.value.kind==="source"?new Um("source",g):new Wu("composite",g,s.value.zoomStops,s.value._interpolationType),this.paint._values[r]=new Hd(s.property,f,s.parameters)}}_handleOverridablePaintPropertyUpdate(r,s,u){return!(!this.layout||s.isDataDriven()||u.isDataDriven())&&qb.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,s){const u=r.get("text-field"),g=j2().paint.properties[s];let f=!1;const x=C=>{for(const M of C)if(g.overrides&&g.overrides.hasOverride(M))return void(f=!0)};if(u.value.kind==="constant"&&u.value.value instanceof Mi)x(u.value.value.sections);else if(u.value.kind==="source"){const C=$=>{f||($ instanceof Co&&wa($.value)===Eo?x($.value.sections):$ instanceof vl?x($.sections):$.eachChild(C))},M=u.value;M._styleExpression&&C(M._styleExpression.expression)}return f}getProgramIds(){return["symbol"]}getDefaultProgramParams(r,s,u){return{config:new eu(this,{zoom:s,lut:u}),overrideFog:!1}}}let lE,cE,uE,dE;var O2=Fn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function F2(l){switch(l){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function V2(l){switch(l){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class U2{constructor(r,s,u,g){this.context=r,this.format=u,this.useMipmap=g&&g.useMipmap,this.texture=r.gl.createTexture(),this.update(s,{premultiply:g&&g.premultiply})}update(r,s){const u=r&&r instanceof HTMLVideoElement&&r.width===0?r.videoWidth:r.width,g=r&&r instanceof HTMLVideoElement&&r.height===0?r.videoHeight:r.height,{context:f}=this,{gl:x}=f,{x:C,y:M}=s&&s.position?s.position:{x:0,y:0},$=C+u,T=M+g;!this.size||this.size[0]===$&&this.size[1]===T||(x.bindTexture(x.TEXTURE_2D,null),x.deleteTexture(this.texture),this.texture=x.createTexture(),this.size=null),x.bindTexture(x.TEXTURE_2D,this.texture),f.pixelStoreUnpackFlipY.set(!1),f.pixelStoreUnpack.set(1),f.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA8&&(!s||s.premultiply!==!1));const k=r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||ImageBitmap&&r instanceof ImageBitmap;if(!this.size&&$>0&&T>0){const I=this.useMipmap?Math.floor(Math.log2(Math.max($,T)))+1:1;x.texStorage2D(x.TEXTURE_2D,I,this.format,$,T),this.size=[$,T]}if(this.size)if(k)x.texSubImage2D(x.TEXTURE_2D,0,C,M,F2(this.format),V2(this.format),r);else{const I=r.data;I&&x.texSubImage2D(x.TEXTURE_2D,0,C,M,u,g,F2(this.format),V2(this.format),I)}this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(r,s,u=!1){const{context:g}=this,{gl:f}=g;f.bindTexture(f.TEXTURE_2D,this.texture),r!==this.minFilter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,r),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.useMipmap&&!u?r===f.NEAREST?f.NEAREST_MIPMAP_NEAREST:f.LINEAR_MIPMAP_LINEAR:r),this.minFilter=r),s!==this.wrapS&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,s),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,s),this.wrapS=s)}bindExtraParam(r,s,u,g){const{context:f}=this,{gl:x}=f;x.bindTexture(x.TEXTURE_2D,this.texture),s!==this.magFilter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,s),this.magFilter=s),r!==this.minFilter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,this.useMipmap?r===x.NEAREST?x.NEAREST_MIPMAP_NEAREST:x.LINEAR_MIPMAP_LINEAR:r),this.minFilter=r),u!==this.wrapS&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,u),this.wrapS=u),g!==this.wrapT&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,g),this.wrapT=g)}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class Wb{constructor(r,s){this.context=r,this.texture=s}bind(r,s){const{context:u}=this,{gl:g}=u;g.bindTexture(g.TEXTURE_2D,this.texture),r!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,r),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,r),this.minFilter=r),s!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,s),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,s),this.wrapS=s)}}function Kb(l,r,s,u,g,f,x,C){const M=[l,r,1,s,u,1,g,f,1],$=[x,C,1],T=De.mat3.adjoint([],M),[k,I,P]=De.vec3.transformMat3($,$,T);return De.mat3.multiply(M,M,[k,0,0,0,I,0,0,0,P])}function hE(l,r,s,u,g,f,x,C){const M=function($,T,k,I,P,R,j,W){const K=Kb(0,0,1,0,1,1,0,1),ae=Kb($,T,k,I,P,R,j,W),ie=De.mat3.adjoint([],K);return De.mat3.multiply(ae,ae,ie)}(l,r,s,u,g,f,x,C);return[M[2]/M[8]/lr,M[5]/M[8]/lr]}function Zb(l){return[l[0],Math.min(Math.max(l[1],-85.051129),cs)]}class fE extends Rc{constructor(r,s,u,g){super(),this.id=r,this.dispatcher=u,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(g),this.options=s,this._dirty=!1}load(r,s){if(this._loaded=s||!1,this.fire(new eo("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return r&&(this.coordinates=r),this._loaded=!0,void this._finishLoading();this._imageRequest=Pu(this.map._requestManager.transformRequest(this.url,Ul.Image),(u,g)=>{this._imageRequest=null,this._loaded=!0,u?this.fire(new kc(u)):g&&(this.image=g instanceof HTMLImageElement?Gt.getImageData(g):g,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,r&&(this.coordinates=r),this._finishLoading())})}loaded(){return this._loaded}updateImage(r){return r.url?(this._imageRequest&&r.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=r.url,this.load(r.coordinates,this._loaded),this):this}setTexture(r){if(!(r.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new Wb(this.map.painter.context,r.handle),this.width=r.dimensions[0],this.height=r.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new eo("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(r){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof Wb||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(r){if(this.coordinates=r,this._boundsArray=void 0,this._unsupportedCoords=!1,!r.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let s=r[0][1],u=r[0][1];for(const f of r)f[1]>u&&(u=f[1]),f[1]<s&&(s=f[1]);const g=(u+s)/2;if(g>cs?this.onNorthPole=!0:g<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const f=r.map(m.fromLngLat);this.tileID=function(x){let C=1/0,M=1/0,$=-1/0,T=-1/0;for(const j of x)C=Math.min(C,j.x),M=Math.min(M,j.y),$=Math.max($,j.x),T=Math.max(T,j.y);const k=Math.max($-C,T-M),I=Math.max(0,Math.floor(-Math.log(k)/Math.LN2)),P=Math.pow(2,I);let R=Math.floor((C+$)/2*P);return R>1&&(R-=1),new zt(I,R,Math.floor((M+T)/2*P))}(f),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new eo("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(r){for(const K in this.tiles){const ae=this.tiles[K];ae.state!=="loaded"&&(ae.state="loaded",ae.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const s=nv(new zt(0,0,0),this.map.transform.projection),u=[s.projection.project(this.coordinates[0][0],this.coordinates[0][1]),s.projection.project(this.coordinates[1][0],this.coordinates[1][1]),s.projection.project(this.coordinates[2][0],this.coordinates[2][1]),s.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(K){const ae=K[1].x-K[0].x,ie=K[1].y-K[0].y,J=K[2].x-K[1].x,le=K[2].y-K[1].y,fe=K[3].x-K[2].x,_e=K[3].y-K[2].y,je=K[0].x-K[3].x,Ne=K[0].y-K[3].y,Be=ae*le-J*ie,Qe=J*_e-fe*le,Ue=fe*Ne-je*_e,rt=je*ie-ae*Ne;return Be>0&&Qe>0&&Ue>0&&rt>0||Be<0&&Qe<0&&Ue<0&&rt<0}(u))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const g=nv(this.tileID,this.map.transform.projection),[f,x,C,M]=this.coordinates.map(K=>{const ae=g.projection.project(K[0],K[1]);return QT(g,ae)._round()});this.perspectiveTransform=hE(f.x,f.y,x.x,x.y,C.x,C.y,M.x,M.y);const $=this._boundsArray=new cc;$.emplaceBack(f.x,f.y,0,0),$.emplaceBack(x.x,x.y,lr,0),$.emplaceBack(M.x,M.y,0,lr),$.emplaceBack(C.x,C.y,lr,lr),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=r.createVertexBuffer($,O2.members),this.boundsSegments=Aa.simpleSegment(0,0,4,2);const T=[],k=[Zb((I=this.coordinates)[0]),Zb(I[1]),Zb(I[2]),Zb(I[3])];var I;const[P,R,j,W]=function(K){let ae=K[0][0],ie=ae,J=K[0][1],le=J;for(let fe=1;fe<K.length;fe++)K[fe][0]<ae?ae=K[fe][0]:K[fe][0]>ie&&(ie=K[fe][0]),K[fe][1]<J?J=K[fe][1]:K[fe][1]>le&&(le=K[fe][1]);return[ae,J,ie-ae,le-J]}(k);{const K=new cc,[ae,ie,J,le]=function(gt){let vt=gt[0].x,ht=vt,Rt=gt[0].y,Yt=Rt;for(let Lt=1;Lt<gt.length;Lt++)gt[Lt].x<vt?vt=gt[Lt].x:gt[Lt].x>ht&&(ht=gt[Lt].x),gt[Lt].y<Rt?Rt=gt[Lt].y:gt[Lt].y>Yt&&(Yt=gt[Lt].y);return[vt,Rt,ht-vt,Yt-Rt]}(u),fe=gt=>[(gt.x-ae)/J,(gt.y-ie)/le],[_e,je,Ne,Be]=u.map(fe),Qe=function(gt,vt,ht,Rt,Yt,Lt,ar,nr){const gr=Kb(0,0,1,0,1,1,0,1),jt=Kb(gt,vt,ht,Rt,Yt,Lt,ar,nr),Mr=De.mat3.adjoint([],jt);return De.mat3.multiply(gr,gr,Mr)}(_e[0],_e[1],je[0],je[1],Ne[0],Ne[1],Be[0],Be[1]);this.elevatedGlobePerspectiveTransform=hE(_e[0],_e[1],je[0],je[1],Ne[0],Ne[1],Be[0],Be[1]);const Ue=(gt,vt)=>{T.push(gt.lng);const ht=Math.round((gt.lng-P)/j*lr),Rt=Math.round((gt.lat-R)/W*lr),Yt=fe(vt),Lt=De.vec3.transformMat3([],[Yt[0],Yt[1],1],Qe),ar=Math.round(Lt[0]/Lt[2]*lr),nr=Math.round(Lt[1]/Lt[2]*lr);K.emplaceBack(ht,Rt,ar,nr)},rt=u[3].x-u[0].x,st=u[3].y-u[0].y,it=u[2].x-u[1].x,ct=u[2].y-u[1].y;for(let gt=0;gt<65;gt++){const vt=gt/64,ht=[u[0].x+vt*rt,u[0].y+vt*st],Rt=[u[1].x+vt*it,u[1].y+vt*ct],Yt=Rt[0]-ht[0],Lt=Rt[1]-ht[1];for(let ar=0;ar<65;ar++){const nr=ar/64,gr={x:ht[0]+Yt*nr,y:ht[1]+Lt*nr};Ue(s.projection.unproject(gr.x,gr.y),gr)}}this.elevatedGlobeVertexBuffer=r.createVertexBuffer(K,O2.members)}{this.maxLongitudeTriangleSize=0;let K=[],ae=new Fi;const ie=(J,le,fe)=>{ae.emplaceBack(J,le,fe);const _e=T[J],je=T[le],Ne=T[fe],Be=Math.min(Math.min(_e,je),Ne),Qe=Math.max(Math.max(_e,je),Ne)-Be;Qe>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=Qe),K.push(Be+Qe/2)};for(let J=0;J<64;J++)for(let le=0;le<64;le++){const fe=65*J+le,_e=fe+1,je=fe+65,Ne=je+1;ie(fe,je,_e),ie(_e,je,Ne)}[K,ae]=function(J,le){const fe=Array.from({length:J.length},(Ne,Be)=>Be);fe.sort((Ne,Be)=>J[Ne]-J[Be]);const _e=[],je=new Fi;for(let Ne=0;Ne<fe.length;Ne++){const Be=fe[Ne];_e.push(J[Be]);const Qe=3*Be,Ue=Qe+1;je.emplaceBack(le.uint16[Qe],le.uint16[Ue],le.uint16[Ue+1])}return[_e,je]}(K,ae),this.elevatedGlobeTrianglesCenterLongitudes=K,this.elevatedGlobeIndexBuffer=r.createIndexBuffer(ae)}this.elevatedGlobeSegments=Aa.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,j/lr,0,W/lr,0,0,R,P,0])}prepare(){const r=Object.keys(this.tiles).length!==0;if(this.tileID&&!r)return;const s=this.map.painter.context,u=s.gl;!this._dirty||this.texture instanceof Wb||(this.texture?this.texture.update(this.image):(this.texture=new U2(s,this.image,u.RGBA8),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE)),this._dirty=!1),r&&this._prepareData(s)}loadTile(r,s){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},s(null)):(r.state="errored",s(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(r){const s=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!s)return null;const u=this.elevatedGlobeTrianglesCenterLongitudes;let g=(f=r+180)+360*Math.round((u[0]-f)/360);var f;const x=new Aa,C=(k,I)=>{x.segments.push({vertexOffset:0,primitiveOffset:k,vertexLength:s.segments[0].vertexLength,primitiveLength:I,sortKey:void 0,vaos:{}})},M=.51*this.maxLongitudeTriangleSize;if(Math.abs(u[0]-g)<=M){const k=St(u,0,u.length,g+M);return k===u.length||C(k,yn(u,k+1,u.length,g+360-M)-k),x}g<u[0]&&(g+=360);const $=yn(u,0,u.length,g-M);if($===u.length)return C(0,u.length),x;C(0,$-0);const T=St(u,$+1,u.length,g+M);return T!==u.length&&C(T,u.length-T),x}}const fO=(Math.pow(256,2)-1)/16907520;class pE extends is{constructor(r,s,u,g){super(r,{layout:uE||(uE=new Ma({visibility:new tr(Tt.layout_raster.visibility)})),paint:dE||(dE=new Ma({"raster-opacity":new tr(Tt.paint_raster["raster-opacity"]),"raster-color":new lc(Tt.paint_raster["raster-color"]),"raster-color-mix":new tr(Tt.paint_raster["raster-color-mix"]),"raster-color-range":new tr(Tt.paint_raster["raster-color-range"]),"raster-hue-rotate":new tr(Tt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new tr(Tt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new tr(Tt.paint_raster["raster-brightness-max"]),"raster-saturation":new tr(Tt.paint_raster["raster-saturation"]),"raster-contrast":new tr(Tt.paint_raster["raster-contrast"]),"raster-resampling":new tr(Tt.paint_raster["raster-resampling"]),"raster-fade-duration":new tr(Tt.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new tr(Tt.paint_raster["raster-emissive-strength"]),"raster-array-band":new tr(Tt.paint_raster["raster-array-band"]),"raster-elevation":new tr(Tt.paint_raster["raster-elevation"]),"raster-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},s,u,g),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(r){return!(r&&r._source instanceof fE&&(r._source.onNorthPole||r._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(r){r!=="raster-color"&&r!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(r){if(!this.hasColorMap()||!this._curRampRange)return;const s=this._transitionablePaint._values["raster-color"].value.expression,[u,g]=r||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(u)&&isNaN(g)||u===this._curRampRange[0]&&g===this._curRampRange[1]||(this.colorRamp=Np({expression:s,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:u,end:g}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[u,g])}}let mE,gE,yE,xE,vE;class _E extends is{constructor(r,s,u,g){super(r,{layout:mE||(mE=new Ma({visibility:new tr(Tt["layout_raster-particle"].visibility)})),paint:gE||(gE=new Ma({"raster-particle-array-band":new tr(Tt["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new tr(Tt["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new lc(Tt["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new tr(Tt["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new tr(Tt["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new tr(Tt["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new tr(Tt["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new tr(Tt["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},s,u,g),this._updateColorRamp(),this.lastInvalidatedAt=Gt.now()}onRemove(r){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(r){return!1}_handleSpecialPaintPropertyUpdate(r){r!=="raster-particle-color"&&r!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),r==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const r=this._transitionablePaint._values["raster-particle-color"].value.expression,s=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=Np({expression:r,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:s}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Gt.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class pO extends is{constructor(r,s){super(r,{},s,null),this.implementation=r,r.slot&&(this.slot=r.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(r){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(r){this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)}onRemove(r){this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)}}function G2(l,r,s){const u=[0,0,1],g=De.quat.identity([]);return De.quat.rotateY(g,g,s?-mr(l)+Math.PI:mr(l)),De.quat.rotateX(g,g,-mr(r)),De.vec3.transformQuat(u,u,g),De.vec3.normalize(u,u)}function bE(l,r){const s=Xb(l.projection,l.zoom,l.width,l.height),u=function(f,x,C,M,$){const T=new $n(C.lng-180*tm,C.lat),k=new $n(C.lng+180*tm,C.lat),I=f.project(T.lng,T.lat),P=f.project(k.lng,k.lat),R=-Math.atan2(P.y-I.y,P.x-I.x),j=m.fromLngLat(C);j.y=fr(j.y,-1+tm,1-tm);const W=j.toLngLat(),K=f.project(W.lng,W.lat),ae=m.fromLngLat(W);ae.x+=tm;const ie=ae.toLngLat(),J=f.project(ie.lng,ie.lat),le=SE(J.x-K.x,J.y-K.y,R),fe=m.fromLngLat(W);fe.y+=tm;const _e=fe.toLngLat(),je=f.project(_e.lng,_e.lat),Ne=SE(je.x-K.x,je.y-K.y,R),Be=Math.abs(le.x)/Math.abs(Ne.y),Qe=De.mat4.identity([]);De.mat4.rotateZ(Qe,Qe,-R*(1-($?0:M)));const Ue=De.mat4.identity([]);return De.mat4.scale(Ue,Ue,[1,1-(1-Be)*M,1]),Ue[4]=-Ne.x/Ne.y*M,De.mat4.rotateZ(Ue,Ue,R),De.mat4.multiply(Ue,Qe,Ue),Ue}(l.projection,0,l.center,s,r),g=wE(l);return De.mat4.scale(u,u,[g,g,1]),u}function wE(l){const r=l.projection,s=Xb(l.projection,l.zoom,l.width,l.height),u=H2(r,l.center),g=H2(r,$n.convert(r.center));return Math.pow(2,u*s+(1-s)*g)}function Xb(l,r,s,u,g=1/0){const f=l.range;if(!f)return 0;const x=Math.min(g,Math.max(s,u)),C=Math.log(x/1024)/Math.LN2;return Tn(f[0]+C,f[1]+C,r)}const tm=1/4e4;function H2(l,r){const s=fr(r.lat,-85.051129,cs),u=new $n(r.lng-180*tm,s),g=new $n(r.lng+180*tm,s),f=l.project(u.lng,s),x=l.project(g.lng,s),C=m.fromLngLat(u),M=m.fromLngLat(g),$=x.x-f.x,T=x.y-f.y,k=M.x-C.x,I=M.y-C.y,P=Math.sqrt((k*k+I*I)/($*$+T*T));return Math.log(P)/Math.LN2}function SE(l,r,s){const u=Math.cos(s),g=Math.sin(s);return{x:l*u-r*g,y:l*g+r*u}}function TE(l,r,s){De.mat4.identity(l),De.mat4.rotateZ(l,l,mr(r[2])),De.mat4.rotateX(l,l,mr(r[0])),De.mat4.rotateY(l,l,mr(r[1])),De.mat4.scale(l,l,s),De.mat4.multiply(l,l,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function Yb(l,r,s,u,g,f,x,C){const M=[s[0]-r[0],s[1]-r[1],0],$=[u[0]-r[0],u[1]-r[1],0];if(De.vec3.length(M)<1e-12||De.vec3.length($)<1e-12)return De.quat.identity(l);const T=De.vec3.cross([],M,$);De.vec3.normalize(T,T),De.vec3.subtract($,u,r),M[2]=(f-g)*C,$[2]=(x-g)*C;const k=M;return De.vec3.cross(k,M,$),De.vec3.normalize(k,k),De.quat.rotationTo(l,T,k)}function q2(l,r,s=!1){const u=Qi(r.zoom),g=function(f,x,C){const M=x.worldSize,$=[f[12],f[13],f[14]],T=Li($[1]/M),k=qs($[0]/M),I=De.mat4.identity([]),P=Xi(1,T)*M,R=Xi(1,0)*M*p(T,x.zoom),j=1/Yi(M);let W=R*j;if(C){const J=Xb(x.projection,x.zoom,x.width,x.height,1024);W=j*x.projection.pixelSpaceConversion(x.center.lat,M,J)}const K=Al(T,k);De.vec3.add(K,K,De.vec3.scale([],De.vec3.normalize([],K),P*W*$[2]));const ae=function(J){const le=[J[0],J[1],J[2]];let fe=[0,1,0];const _e=De.vec3.cross([],fe,le);return De.vec3.cross(fe,le,_e),De.vec3.squaredLength(fe)===0&&(fe=[0,1,0],De.vec3.cross(_e,le,fe)),De.vec3.normalize(_e,_e),De.vec3.normalize(fe,fe),De.vec3.normalize(le,le),[_e[0],_e[1],_e[2],0,fe[0],fe[1],fe[2],0,le[0],le[1],le[2],0,J[0],J[1],J[2],1]}(K);De.mat4.scale(I,I,[W,W,W*P]),De.mat4.translate(I,I,[-$[0],-$[1],-$[2]]);const ie=De.mat4.multiply([],x.globeMatrix,ae);return De.mat4.multiply(ie,ie,I),De.mat4.multiply(ie,ie,f),ie}(l,r,s);if(u>0){const f=function(x,C){const M=C.worldSize,$=Xi(1,0)*M*p(C.center.lat,C.zoom)/Yi(M),T=Xi(1,C.center.lat)*M,k=De.mat4.identity([]);return De.mat4.rotateY(k,k,mr(C.center.lng)),De.mat4.rotateX(k,k,mr(C.center.lat)),De.mat4.translate(k,k,[0,0,os]),De.mat4.scale(k,k,[$,$,$*T]),De.mat4.translate(k,k,[C.point.x-.5*M,C.point.y-.5*M,0]),De.mat4.multiply(k,k,x),De.mat4.multiply(k,C.globeMatrix,k)}(l,r);return function(x,C,M){const $=(R,j,W)=>{const K=De.vec3.length(R),ae=De.vec3.length(j),ie=Ea(R,j,W);return De.vec3.scale(ie,ie,1/De.vec3.length(ie)*Or(K,ae,W))},T=$([x[0],x[1],x[2]],[C[0],C[1],C[2]],M),k=$([x[4],x[5],x[6]],[C[4],C[5],C[6]],M),I=$([x[8],x[9],x[10]],[C[8],C[9],C[10]],M),P=Ea([x[12],x[13],x[14]],[C[12],C[13],C[14]],M);return[T[0],T[1],T[2],0,k[0],k[1],k[2],0,I[0],I[1],I[2],0,P[0],P[1],P[2],1]}(g,f,u)}return g}function EE(l,r,s,u){const g=jr.projectAabbCorners(u,s);let f=Number.MAX_VALUE,x=-1;for(let $=0;$<g.length;++$){const T=g[$];T[0]=(.5*T[0]+.5)*r.width,T[1]=(.5-.5*T[1])*r.height,T[2]<f&&(x=$,f=T[2])}const C=$=>new dt(g[$][0],g[$][1]);let M;switch(x){case 0:case 6:M=[C(1),C(5),C(4),C(7),C(3),C(2),C(1)];break;case 1:case 7:M=[C(0),C(4),C(5),C(6),C(2),C(3),C(0)];break;case 3:case 5:M=[C(1),C(0),C(4),C(7),C(6),C(2),C(1)];break;default:M=[C(1),C(5),C(6),C(7),C(3),C(0),C(1)]}if(ve(l,M))return f}const mO=Fn([{name:"a_pos_3f",components:3,type:"Float32"}]),gO=Fn([{name:"a_color_3f",components:3,type:"Float32"}]),yO=Fn([{name:"a_color_4f",components:4,type:"Float32"}]),xO=Fn([{name:"a_uv_2f",components:2,type:"Float32"}]),vO=Fn([{name:"a_normal_3f",components:3,type:"Float32"}]),_O=Fn([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),bO=Fn([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),CE={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class Jb{constructor(r,s,u,g){this.message=(r?`${r}: `:"")+u,g&&(this.identifier=g),s!=null&&s.__line__&&(this.line=s.__line__)}}function DE(l,r){const s=l.indexOf("://")===-1;try{return new URL(l,s&&r?"http://example.com":void 0),!0}catch{return!1}}class PE{constructor(r,s){this.feature=r,this.instancedDataOffset=s,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class ME{constructor(){this.instancedDataArray=new tf,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class W2{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.layers=r.layers,this.layerIds=this.layers.map(s=>s.fqid),this.projection=r.projection,this.index=r.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(r,s){}populate(r,s,u,g){this.tileToMeter=o(u);const f=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:x,id:C,index:M,sourceLayerIndex:$}of r){const T=C??(x.properties&&x.properties.hasOwnProperty("id")?x.properties.id:void 0),k=X(x,f);if(!this.layers[0]._featureFilter.filter(new Cn(this.zoom),k,u))continue;const I={id:T,sourceLayerIndex:$,index:M,geometry:f?k.geometry:Z(x,u,g),properties:x.properties,type:x.type,patterns:{}},P=this.addFeature(I,I.geometry,k);P&&s.featureIndex.insert(x,I.geometry,M,$,this.index,this.instancesPerModel[P].instancedDataArray.length,lr/32)}this.lookup=null}update(r,s,u,g){for(const f in this.instancesPerModel){const x=this.instancesPerModel[f];for(const C in r)x.idToFeaturesIndex.hasOwnProperty(C)&&(this.evaluate(x.features[x.idToFeaturesIndex[C]],r[C],x,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let r=!1;for(const s in this.instancesPerModel){const u=this.instancesPerModel[s];for(const g of u.features){const f=this.layers[0],x=g.feature,C=this.canonical,M=f.paint.get("model-rotation").evaluate(x,{},C),$=f.paint.get("model-scale").evaluate(x,{},C),T=f.paint.get("model-translation").evaluate(x,{},C);De.vec3.exactEquals(g.rotation,M)&&De.vec3.exactEquals(g.scale,$)&&De.vec3.exactEquals(g.translation,T)||(this.evaluate(g,g.featureStates,u,!0),r=!0)}}return r}updateReplacement(r,s,u,g){if(s.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=s.updateTime;const f=s.getReplacementRegionsForTile(r.toUnwrapped(),!0);if(hs(this.activeReplacements,f))return!1;this.activeReplacements=f;let x=!1;for(const C in this.instancesPerModel){const M=this.instancesPerModel[C],$=M.instancedDataArray;for(const T of M.features){const k=T.instancedDataOffset,I=T.instancedDataCount;for(let P=0;P<I;P++){const R=16*(P+k);let j=$.float32[R+0];const W=j>lr;j=W?j-lr:j;const K=Math.floor(j),ae=$.float32[R+1];let ie=!1;for(const J of this.activeReplacements)if(!Nx(J,u,CE.Model,g)&&!(J.min.x>K||K>J.max.x||J.min.y>ae||ae>J.max.y)&&(ie=Fx(Ox(K,ae,r.canonical,J.footprintTileId.canonical),J.footprint),ie))break;$.float32[R]=ie?j+lr:j,x=x||ie!==W}}}return x}isEmpty(){for(const r in this.instancesPerModel)if(this.instancesPerModel[r].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(r){if(!this.uploaded)for(const s in this.instancesPerModel){const u=this.instancesPerModel[s];u.instancedDataArray.length<0||u.instancedDataArray.length===0||(u.instancedDataBuffer?u.instancedDataBuffer.updateData(u.instancedDataArray):u.instancedDataBuffer=r.createVertexBuffer(u.instancedDataArray,_O.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const s in this.instancesPerModel){const u=this.instancesPerModel[s];u.instancedDataArray.length!==0&&u.instancedDataBuffer&&u.instancedDataBuffer.destroy()}const r=this.layers[0].modelManager;if(r&&this.modelUris)for(const s of this.modelUris)r.removeModel(s,"")}addFeature(r,s,u){const g=this.layers[0],f=g.layout.get("model-id").evaluate(u,{},this.canonical);if(!f)return Wr(`modelId is not evaluated for layer ${g.id} and it is not going to get rendered.`),f;DE(f,!1)&&(this.modelUris.includes(f)||this.modelUris.push(f)),this.instancesPerModel[f]||(this.instancesPerModel[f]=new ME);const x=this.instancesPerModel[f],C=x.instancedDataArray,M=new PE(u,C.length);for(const $ of s)for(const T of $){if(T.x<0||T.x>=lr||T.y<0||T.y>=lr)continue;const k=(this.lookupDim-1)/lr,I=this.lookupDim*(T.y*k|0)+T.x*k|0;if(this.lookup){if(this.lookup[I]!==0)continue;this.lookup[I]=1}this.instanceCount++;const P=C.length;C.resize(P+1),x.instancesEvaluatedElevation.push(0),C.float32[16*P]=T.x,C.float32[16*P+1]=T.y}return M.instancedDataCount=x.instancedDataArray.length-M.instancedDataOffset,M.instancedDataCount>0&&(r.id&&(x.idToFeaturesIndex[r.id]=x.features.length),x.features.push(M),this.evaluate(M,{},x,!1)),f}getModelUris(){return this.modelUris}evaluate(r,s,u,g){const f=this.layers[0],x=r.feature,C=this.canonical,M=r.rotation=f.paint.get("model-rotation").evaluate(x,s,C),$=r.scale=f.paint.get("model-scale").evaluate(x,s,C),T=r.translation=f.paint.get("model-translation").evaluate(x,s,C),k=f.paint.get("model-color").evaluate(x,s,C);k.a=f.paint.get("model-color-mix-intensity").evaluate(x,s,C);const I=[];this.maxVerticalOffset<T[2]&&(this.maxVerticalOffset=T[2]),this.maxScale=Math.max(Math.max(this.maxScale,$[0]),Math.max($[1],$[2])),TE(I,M,$);const P=Math.round(100*k.a)+k.b/1.05;for(let R=0;R<r.instancedDataCount;++R){const j=r.instancedDataOffset+R,W=16*j,K=u.instancedDataArray.float32;let ae=0;g&&(ae=K[W+6]-u.instancesEvaluatedElevation[j]);const ie=0|K[W+1];K[W]=(0|K[W])+k.r/1.05,K[W+1]=ie+k.g/1.05,K[W+2]=P,K[W+3]=1/(C.z>10?this.tileToMeter:o(C,ie)),K[W+4]=T[0],K[W+5]=T[1],K[W+6]=T[2]+ae,K[W+7]=I[0],K[W+8]=I[1],K[W+9]=I[2],K[W+10]=I[4],K[W+11]=I[5],K[W+12]=I[6],K[W+13]=I[8],K[W+14]=I[9],K[W+15]=I[10],u.instancesEvaluatedElevation[j]=T[2]}}}let AE,kE;Tr(W2,"ModelBucket",{omit:["layers"]}),Tr(ME,"PerModelAttributes"),Tr(PE,"ModelFeature");const Eg=64,oy={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function RE(l,r,s,u,g,f,x,C,M,$=!1){const T=s.zoom,k=s.project(u),I=p(u.lat,T),P=1/I;De.mat4.identity(l),De.mat4.translate(l,l,[k.x+x[0]*P,k.y+x[1]*P,x[2]]);let R=1,j=1;const W=s.worldSize;if($){if(s.projection.name==="mercator"){let J=0;s.elevation&&(J=s.elevation.getAtPointOrZero(new m(k.x/W,k.y/W),0));const le=De.vec4.transformMat4([],[k.x,k.y,J,1],s.projMatrix)[3]/s.cameraToCenterDistance;R=le,j=le*p(s.center.lat,T)}else if(s.projection.name==="globe"){const J=q2(l,s),le=De.mat4.multiply([],s.projMatrix,J),fe=[0,0,0,1];De.vec4.transformMat4(fe,fe,le);const _e=fe[3]/s.cameraToCenterDistance,je=Qi(T),Ne=s.projection.pixelsPerMeter(u.lat,W)*p(u.lat,T),Be=s.projection.pixelsPerMeter(s.center.lat,W)*p(s.center.lat,T);R=_e/Or(Ne,Bp(s.center.lat),je),j=_e*I/Ne,R*=Be,j*=Be}}else R=P;De.mat4.scale(l,l,[R,R,j]);const K=[...l],ae=r.orientation,ie=[];if(TE(ie,[ae[0]+g[0],ae[1]+g[1],ae[2]+g[2]],f),De.mat4.multiply(l,K,ie),C&&s.elevation){let J=0;const le=[];if(M&&s.elevation){J=function(je,Ne,Be,Qe,Ue){const rt=Ne.elevation;if(!rt)return 0;const st=jr.projectAabbCorners(Be,Qe),it=Xi(1,Ue.lat)*Ne.worldSize,ct=function(Mr,sr){const Cr=[0,0,1],Vr=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const on of Vr){const fn=Mr[on.corners[0]],wn=Mr[on.corners[1]],pn=Mr[on.corners[2]],Pn=[wn[0]-fn[0],wn[1]-fn[1],sr*(wn[2]-fn[2])],_a=De.vec3.cross(Pn,Pn,[pn[0]-fn[0],pn[1]-fn[1],sr*(pn[2]-fn[2])]);De.vec3.normalize(_a,_a),on.dotProductWithUp=De.vec3.dot(_a,Cr)}return Vr.sort((on,fn)=>on.dotProductWithUp-fn.dotProductWithUp),Vr[0].corners}(st,it),gt=st[ct[0]],vt=st[ct[1]],ht=st[ct[2]],Rt=st[ct[3]],Yt=rt.getAtPointOrZero(new m(gt[0]/Ne.worldSize,gt[1]/Ne.worldSize),0),Lt=rt.getAtPointOrZero(new m(vt[0]/Ne.worldSize,vt[1]/Ne.worldSize),0),ar=rt.getAtPointOrZero(new m(ht[0]/Ne.worldSize,ht[1]/Ne.worldSize),0),nr=rt.getAtPointOrZero(new m(Rt[0]/Ne.worldSize,Rt[1]/Ne.worldSize),0),gr=(Yt+nr)/2,jt=(Lt+ar)/2;return gr>jt?Lt<ar?Yb(je,vt,Rt,gt,Lt,nr,Yt,it):Yb(je,ht,gt,Rt,ar,Yt,nr,it):Yt<nr?Yb(je,gt,vt,ht,Yt,Lt,ar,it):Yb(je,Rt,ht,vt,nr,ar,Lt,it),Math.max(gr,jt)}(le,s,r.aabb,l,u);const fe=De.mat4.fromQuat([],le),_e=De.mat4.multiply([],fe,ie);De.mat4.multiply(l,K,_e)}else J=s.elevation.getAtPointOrZero(new m(k.x/W,k.y/W),0);J!==0&&(l[14]+=J)}}function lv(l,r,s=!1){l.uploaded||(l.gfxTexture=new U2(r,l.image,s?r.gl.R8:r.gl.RGBA8,{useMipmap:l.sampler.minFilter>=r.gl.NEAREST_MIPMAP_NEAREST}),l.uploaded=!0,l.image=null)}function wO(l,r,s){l.indexBuffer=r.createIndexBuffer(l.indexArray,!1,!0),l.vertexBuffer=r.createVertexBuffer(l.vertexArray,mO.members,!1,!0),l.normalArray&&(l.normalBuffer=r.createVertexBuffer(l.normalArray,vO.members,!1,!0)),l.texcoordArray&&(l.texcoordBuffer=r.createVertexBuffer(l.texcoordArray,xO.members,!1,!0)),l.colorArray&&(l.colorBuffer=r.createVertexBuffer(l.colorArray,(l.colorArray.bytesPerElement===12?gO:yO).members,!1,!0)),l.featureArray&&(l.pbrBuffer=r.createVertexBuffer(l.featureArray,bO.members,!0)),l.segments=Aa.simpleSegment(0,0,l.vertexArray.length,l.indexArray.length);const u=l.material;u.pbrMetallicRoughness.baseColorTexture&&lv(u.pbrMetallicRoughness.baseColorTexture,r),u.pbrMetallicRoughness.metallicRoughnessTexture&&lv(u.pbrMetallicRoughness.metallicRoughnessTexture,r),u.normalTexture&&lv(u.normalTexture,r),u.occlusionTexture&&lv(u.occlusionTexture,r,s),u.emissionTexture&&lv(u.emissionTexture,r)}function K2(l,r,s){if(l.meshes)for(const u of l.meshes)wO(u,r,s);if(l.children)for(const u of l.children)K2(u,r,s)}function Qb(l){if(l.meshes)for(const r of l.meshes)r.indexArray.destroy(),r.vertexArray.destroy(),r.colorArray&&r.colorArray.destroy(),r.normalArray&&r.normalArray.destroy(),r.texcoordArray&&r.texcoordArray.destroy(),r.featureArray&&r.featureArray.destroy();if(l.children)for(const r of l.children)Qb(r)}function Z2(l){if(l.meshes)for(const s of l.meshes)s.vertexBuffer&&(s.vertexBuffer.destroy(),s.indexBuffer.destroy(),s.normalBuffer&&s.normalBuffer.destroy(),s.texcoordBuffer&&s.texcoordBuffer.destroy(),s.colorBuffer&&s.colorBuffer.destroy(),s.pbrBuffer&&s.pbrBuffer.destroy(),s.segments.destroy(),s.material&&((r=s.material).pbrMetallicRoughness.baseColorTexture&&r.pbrMetallicRoughness.baseColorTexture.gfxTexture&&r.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),r.pbrMetallicRoughness.metallicRoughnessTexture&&r.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&r.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),r.normalTexture&&r.normalTexture.gfxTexture&&r.normalTexture.gfxTexture.destroy(),r.emissionTexture&&r.emissionTexture.gfxTexture&&r.emissionTexture.gfxTexture.destroy(),r.occlusionTexture&&r.occlusionTexture.gfxTexture&&r.occlusionTexture.gfxTexture.destroy()));var r;if(l.children)for(const s of l.children)Z2(s)}class ly{constructor(r,s,u){this._demTile=r,this._dem=this._demTile.dem,this._scale=s,this._offset=u}static create(r,s,u){const g=u||r.findDEMTileFor(s);if(!g||!g.dem)return;const f=g.dem,x=g.tileID,C=1<<s.canonical.z-x.canonical.z;return new ly(g,f.dim/lr/C,[(s.canonical.x/C-x.canonical.x)*f.dim,(s.canonical.y/C-x.canonical.y)*f.dim])}tileCoordToPixel(r,s){const u=s*this._scale+this._offset[1],g=Math.floor(r*this._scale+this._offset[0]),f=Math.floor(u);return new dt(g,f)}getElevationAt(r,s,u,g){const f=r*this._scale+this._offset[0],x=s*this._scale+this._offset[1],C=Math.floor(f),M=Math.floor(x),$=this._dem;return g=!!g,u?Or(Or($.get(C,M,g),$.get(C,M+1,g),x-M),Or($.get(C+1,M,g),$.get(C+1,M+1,g),x-M),f-C):$.get(C,M,g)}getElevationAtPixel(r,s,u){return this._dem.get(r,s,!!u)}getMeterToDEM(r){return(1<<this._demTile.tileID.canonical.z)*Xi(1,r)*this._dem.stride}}const X2=new Float32Array(262144),Cg=new Uint8Array(262144);function IE(l){let r=0;if(l.meshes)for(const s of l.meshes)r=Math.max(r,s.aabb.max[2]);if(l.children)for(const s of l.children)r=Math.max(r,IE(s));return r}function zE(l,r,s){if(l.meshes)for(const u of l.meshes){if(u.aabb.min[0]===1/0)continue;const g=jr.applyTransform(u.aabb,l.matrix);s.insert(r,g.min[0],g.min[1],g.max[0],g.max[1])}if(l.children)for(const u of l.children)zE(u,r,s)}const LE=["","wall","door","roof","window","lamp","logo"];class $E{constructor(r){this.node=r,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:r.id,geometry:[],properties:{height:IE(r)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new jr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let r=0;const s=new jr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const u of this.node.meshes)this.node.lightMeshIndex!==r&&(u.transformedAabb=jr.applyTransformFast(u.aabb,this.node.matrix),s.encapsulate(u.transformedAabb)),r++;this.aabb=s}return this.aabb}}class e1{constructor(r,s,u,g,f,x,C){this.id=u,this.layers=r,this.layerIds=this.layers.map(M=>M.fqid),this.stateDependentLayerIds=this.layers.filter(M=>M.isStateDependent()).map(M=>M.id),this.modelTraits|=oy.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,g&&(this.modelTraits|=oy.HasMapboxMeshFeatures),f&&(this.modelTraits|=oy.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=x,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const M of s)this.nodesInfo.push(new $E(M)),zE(M,C.featureIndexArray.length,C.grid),C.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,C.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(r,s){for(const u of this.getNodesInfo()){const g=u.node;g.footprint&&s.push({footprint:g.footprint,id:r})}}update(r){const s=Object.keys(r).length!==0;if(s&&!this.stateDependentLayers.length)return;const u=s?this.stateDependentLayers:this.layers;if(!$t(r,this.states))for(const g of u)this.evaluate(g,r);this.states=structuredClone(r)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(r){if(!this.needsUpload)return;const s=this.getNodesInfo();for(const u of s){const g=u.node;this.uploaded?this.updatePbrBuffer(g):K2(g,r,!0)}for(const u of s)Qb(u.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(r){let s=!1;if(!r.meshes)return s;for(const u of r.meshes)u.pbrBuffer&&(u.pbrBuffer.updateData(u.featureArray),s=!0);return s}needsReEvaluation(r,s,u){const g=r.transform.projectionOptions,f=r.style.getBrightness(),x=this.brightness!==f;if(!this.uploaded||this.dirty||g.name!==this.projection.name||cv(u.paint.get("model-color").value,x)||cv(u.paint.get("model-color-mix-intensity").value,x)||cv(u.paint.get("model-roughness").value,x)||cv(u.paint.get("model-emissive-strength").value,x)||cv(u.paint.get("model-height-based-emissive-strength-multiplier").value,x)){this.projection=g,this.brightness=f;const C=this.getNodesInfo();for(const M of C)M.state=null;return!0}return!1}evaluateScale(r,s){if(r.transform.zoom===this.zoom)return;this.zoom=r.transform.zoom;const u=this.getNodesInfo(),g=this.id.canonical;for(const f of u){const x=f.feature;f.evaluatedScale=s.paint.get("model-scale").evaluate(x,{},g)}}evaluate(r,s){const u=this.getNodesInfo();for(const g of u){if(!g.node.meshes)continue;const f=g.feature,x=s&&s[f.id];if($t(x,g.state))continue;g.state=structuredClone(x);const C=g.node.meshes&&g.node.meshes[0].featureData,M=g.evaluatedColor[2],$=g.evaluatedRMEA[2],T=this.id.canonical;if(g.hasTranslucentParts=!1,C){for(let k=0;k<LE.length;k++){const I=LE[k];I.length&&(f.properties.part=I);const P=r.paint.get("model-color").evaluate(f,x,T).toRenderColor(null),R=r.paint.get("model-color-mix-intensity").evaluate(f,x,T);g.evaluatedColor[k]=[P.r,P.g,P.b,R],g.evaluatedRMEA[k][0]=r.paint.get("model-roughness").evaluate(f,x,T),g.evaluatedRMEA[k][2]=r.paint.get("model-emissive-strength").evaluate(f,x,T),g.evaluatedRMEA[k][3]=P.a,g.emissionHeightBasedParams[k]=r.paint.get("model-height-based-emissive-strength-multiplier").evaluate(f,x,T),!g.hasTranslucentParts&&P.a<1&&(g.hasTranslucentParts=!0)}delete f.properties.part,TO(g,M!==g.evaluatedColor[2]||$!==g.evaluatedRMEA[2],this.modelTraits)}else g.evaluatedRMEA[0][2]=r.paint.get("model-emissive-strength").evaluate(f,x,T);g.evaluatedScale=r.paint.get("model-scale").evaluate(f,x,T),this.updatePbrBuffer(g.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(r,s,u,g){const f=r.findDEMTileFor(u);if(f&&(f.tileID.canonical!==this.terrainTile||s!==this.terrainExaggeration)){if(f.dem&&f.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=f.tileID.overscaledZ;const x=ly.create(r,u,f);if(!x)return;this.modelTraits&oy.HasMapboxMeshFeatures&&this.updateDEM(r,x,u,g);for(const C of this.getNodesInfo()){const M=C.node;if(!M.footprint||!M.footprint.vertices||!M.footprint.vertices.length)continue;const $=M.footprint.vertices;let T=x.getElevationAt($[0].x,$[0].y,!0,!0);for(let k=1;k<$.length;k++)T=Math.min(T,x.getElevationAt($[k].x,$[k].y,!0,!0));M.elevation=T}}this.terrainTile=f.tileID.canonical,this.terrainExaggeration=s}}updateDEM(r,s,u,g){let f=s._dem._modifiedForSources[g];if(f===void 0&&(s._dem._modifiedForSources[g]=[],f=s._dem._modifiedForSources[g]),f.includes(u.canonical))return;const x=s._dem.dim;f.push(u.canonical);let C=!1;for(const M of this.getNodesInfo()){const $=M.node;if(!$.footprint||!$.footprint.grid)continue;const T=$.footprint.grid,k=s.tileCoordToPixel(T.min.x,T.min.y),I=s.tileCoordToPixel(T.max.x,T.max.y),P=Math.min(Math.min(x-I.y,k.x),Math.min(k.y,x-I.x));if(P<0)continue;const R=fr(P,2,5);let j=Math.max(0,k.x-R),W=Math.max(0,k.y-R),K=Math.min(I.x+R,x-1),ae=Math.min(I.y+R,x-1);for(let fe=W;fe<=ae;++fe)for(let _e=j;_e<=K;++_e)Cg[fe*x+_e]=255;let ie=0,J=0;for(let fe=0;fe<T.cellsY;++fe)for(let _e=0;_e<T.cellsX;++_e){if(!T.cells[fe*T.cellsX+_e])continue;const je=s.tileCoordToPixel(T.min.x+_e/T.xScale,T.min.y+fe/T.yScale),Ne=s.tileCoordToPixel(T.min.x+(_e+1)/T.xScale,T.min.y+(fe+1)/T.yScale);for(let Be=je.y;Be<=Math.min(Ne.y+1,x-1);++Be)for(let Qe=je.x;Qe<=Math.min(Ne.x+1,x-1);++Qe)Cg[Be*x+Qe]===255&&(Cg[Be*x+Qe]=0,ie+=s.getElevationAtPixel(Qe,Be),J++)}const le=ie/J;j=Math.max(1,k.x-R),W=Math.max(1,k.y-R),K=Math.min(I.x+R,x-2),ae=Math.min(I.y+R,x-2),C=!0;for(let fe=W;fe<=ae;++fe)for(let _e=j;_e<=K;++_e)Cg[fe*x+_e]===0&&(X2[fe*x+_e]=s._dem.set(_e,fe,le));for(let fe=1;fe<R;++fe){j=Math.max(1,k.x-fe),W=Math.max(1,k.y-fe),K=Math.min(I.x+fe,x-2),ae=Math.min(I.y+fe,x-2);for(let _e=W;_e<=ae;++_e)for(let je=j;je<=K;++je){const Ne=_e*x+je;if(Cg[Ne]===255){let Be=0,Qe=0,Ue=-1,rt=-1;for(let st=-1;st<=1;++st)for(let it=-1;it<=1;++it){const ct=(_e+st)*x+je+it;if(Cg[ct]>=fe)continue;const gt=X2[ct],vt=Math.abs(gt);vt>Qe&&(Be=gt,Qe=vt,Ue=it,rt=st)}if(Qe>.1){const st=1-(fe+.5*Math.abs(Ue*rt))/R;let it=s._dem.get(je,_e)+Be*st;const ct=s._dem.get(je+Ue,_e+rt),gt=s._dem.get(je-Ue,_e-rt,!0);(it-ct)*(it-gt)>0&&(it=(ct+gt)/2),X2[Ne]=s._dem.set(je,_e,it),Cg[Ne]=fe}}}}}C&&(s._demTile.needsDEMTextureUpload=!0,s._dem._timestamp=Gt.now())}getNodesInfo(){return this.nodesInfo}destroy(){const r=this.getNodesInfo();for(const s of r)Qb(s.node),Z2(s.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(r,s){if(s.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=s.updateTime;const u=s.getReplacementRegionsForTile(r.toUnwrapped()),g=this.getNodesInfo();for(let f=0;f<this.nodesInfo.length;f++){const x=g[f].node;g[f].hiddenByReplacement=!!x.footprint&&!u.find(C=>C.footprint===x.footprint)}}getHeightAtTileCoord(r,s){const u=this.getNodesInfo(),g=[],f=[0,0,0],x=De.mat4.identity([]);for(let C=0;C<this.nodesInfo.length;C++){const M=u[C],$=M.node.meshes[0],T=$.transformedAabb;if(r<T.min[0]||s<T.min[1]||r>T.max[0]||s>T.max[1])continue;if(M.node.hidden===!0)return{height:1/0,maxHeight:M.feature.properties.height,hidden:!1,verticalScale:M.evaluatedScale[2]};De.mat4.invert(x,M.node.matrix),f[0]=r,f[1]=s,De.vec3.transformMat4(f,f,x);const k=(f[0]-$.aabb.min[0])/($.aabb.max[0]-$.aabb.min[0])*Eg|0,I=Math.min(63,(f[1]-$.aabb.min[1])/($.aabb.max[1]-$.aabb.min[1])*Eg|0)*Eg+Math.min(63,k),P=$.heightmap[I];if(!(P<0&&M.node.footprint))return M.hiddenByReplacement?void 0:{height:P,maxHeight:M.feature.properties.height,hidden:!1,verticalScale:M.evaluatedScale[2]};if(M.node.footprint.grid.query(new dt(r,s),new dt(r,s),g),g.length>0)return{height:void 0,maxHeight:M.feature.properties.height,hidden:M.hiddenByReplacement,verticalScale:M.evaluatedScale[2]}}}}function cv(l,r){return!l.isLightConstant&&r}function SO(l,r,s,u,g,f,x,C){let M=(61440&r|(61440&r)>>4)>>8,$=(3840&r|(3840&r)>>4)>>4,T=240&r|(240&r)>>4;s[3]>0&&(M=Or(M,255*s[0],s[3]),$=Or($,255*s[1],s[3]),T=Or(T,255*s[2],s[3]));const k=M<<8|$,I=T<<8|Math.floor(255*u[3]),P=function(fe){const _e=fr(fe,0,2);return Math.min(Math.round(.5*_e*255),255)}(u[2])<<8|15*u[0]<<4|15*u[1],R=fr(g[0],0,1),j=fr(g[1],0,1),W=fr(g[2],0,1),K=fr(g[3],0,1);let ae,ie,J,le;if(R!==j&&x!==f&&j!==R){const fe=x-f;ie=1/(fe*(j-R)),J=-(f+fe*R)/(fe*(j-R));const _e=fr(g[4],-1,1);le=Math.pow(10,_e),ae=255*W<<8|255*K}else ae=65535,ie=0,J=1,le=1;if(l.emplaceBack(k,I,P,ae,ie,J,le),C){const fe=C.length;C.clear();for(let _e=0;_e<fe;_e++)C.emplaceBack(k,I,P,ae,ie,J,le)}}function TO(l,r,s){const u=l.node;let g=0;const f=s&oy.HasMeshoptCompression;for(const x of u.meshes){if(u.lights&&u.lightMeshIndex===g||!x.featureData)continue;x.featureArray=new Yd,x.featureArray.reserve(x.featureData.length);let C=r;for(const M of x.featureData){const $=f?65535&M:M>>16&65535,T=f?M>>16&65535:65535&M,k=(15&T)<8?15&T:0,I=l.evaluatedRMEA[k],P=l.evaluatedColor[k],R=l.emissionHeightBasedParams[k];let j;if(C&&k===2&&u.lights&&(j=new Yd,j.resize(10*u.lights.length)),SO(x.featureArray,$,P,I,R,x.aabb.min[2],x.aabb.max[2],j),j&&C){C=!1;const W=u.meshes[u.lightMeshIndex];W.featureArray=j,W.featureArray._trim()}}x.featureArray._trim(),g++}}function BE(l,r,s,u){const g=1<<l.z;r.lat=Li((u/lr+l.y)/g),r.lng=qs((s/lr+l.x)/g)}Tr(e1,"Tiled3dModelBucket",{omit:["layers"]}),Tr($E,"Tiled3dModelFeature");const EO={circle:class extends is{constructor(l,r,s,u){super(l,{layout:xt||(xt=new Ma({"circle-sort-key":new vr(Tt.layout_circle["circle-sort-key"]),visibility:new tr(Tt.layout_circle.visibility)})),paint:Ft||(Ft=new Ma({"circle-radius":new vr(Tt.paint_circle["circle-radius"]),"circle-color":new vr(Tt.paint_circle["circle-color"]),"circle-blur":new vr(Tt.paint_circle["circle-blur"]),"circle-opacity":new vr(Tt.paint_circle["circle-opacity"]),"circle-translate":new tr(Tt.paint_circle["circle-translate"]),"circle-translate-anchor":new tr(Tt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new tr(Tt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new tr(Tt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vr(Tt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vr(Tt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vr(Tt.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new tr(Tt.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u)}createBucket(l){return new he(l)}queryRadius(l){const r=l;return mt("circle-radius",this,r)+mt("circle-stroke-width",this,r)+Nt(this.paint.get("circle-translate"))}queryIntersectsFeature(l,r,s,u,g,f,x,C){const M=Zt(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),f.angle,l.pixelToTileUnitsFactor),$=this.paint.get("circle-radius").evaluate(r,s)+this.paint.get("circle-stroke-width").evaluate(r,s);return _c(l,u,f,x,C,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",M,$)}getProgramIds(){return["circle"]}getDefaultProgramParams(l,r,s){const u=vc(this);return{config:new eu(this,{zoom:r,lut:s}),defines:u,overrideFog:!1}}},heatmap:class extends is{createBucket(l){return new L0(l)}constructor(l,r,s,u){super(l,{layout:No||(No=new Ma({visibility:new tr(Tt.layout_heatmap.visibility)})),paint:Ex||(Ex=new Ma({"heatmap-radius":new vr(Tt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vr(Tt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new tr(Tt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new lc(Tt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new tr(Tt.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Np({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(l){return mt("heatmap-radius",this,l)}queryIntersectsFeature(l,r,s,u,g,f,x,C){const M=this.paint.get("heatmap-radius").evaluate(r,s);return _c(l,u,f,x,C,!0,!0,new dt(0,0),M)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(l,r,s){return l==="heatmap"?{config:new eu(this,{zoom:r,lut:s}),overrideFog:!1}:{}}},hillshade:class extends is{constructor(l,r,s,u){super(l,{layout:jo||(jo=new Ma({visibility:new tr(Tt.layout_hillshade.visibility)})),paint:Cx||(Cx=new Ma({"hillshade-illumination-direction":new tr(Tt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new tr(Tt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new tr(Tt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new tr(Tt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new tr(Tt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new tr(Tt.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new tr(Tt.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(l,r,s){return{overrideFog:!1}}},fill:class extends is{constructor(l,r,s,u){super(l,{layout:wc||(wc=new Ma({"fill-sort-key":new vr(Tt.layout_fill["fill-sort-key"]),visibility:new tr(Tt.layout_fill.visibility),"fill-elevation-reference":new tr(Tt.layout_fill["fill-elevation-reference"])})),paint:Up||(Up=new Ma({"fill-antialias":new tr(Tt.paint_fill["fill-antialias"]),"fill-opacity":new vr(Tt.paint_fill["fill-opacity"]),"fill-color":new vr(Tt.paint_fill["fill-color"]),"fill-outline-color":new vr(Tt.paint_fill["fill-outline-color"]),"fill-translate":new tr(Tt.paint_fill["fill-translate"]),"fill-translate-anchor":new tr(Tt.paint_fill["fill-translate-anchor"]),"fill-pattern":new vr(Tt.paint_fill["fill-pattern"]),"fill-emissive-strength":new tr(Tt.paint_fill["fill-emissive-strength"]),"fill-z-offset":new vr(Tt.paint_fill["fill-z-offset"]),"fill-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u)}getProgramIds(){const l=this.paint.get("fill-pattern"),r=l&&l.constantOr(1),s=[r?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&s.push(r&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),s}getDefaultProgramParams(l,r,s){return{config:new eu(this,{zoom:r,lut:s}),overrideFog:!1}}recalculate(l,r){super.recalculate(l,r);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new ld(l)}queryRadius(){return Nt(this.paint.get("fill-translate"))}queryIntersectsFeature(l,r,s,u,g,f){return!l.queryGeometry.isAboveHorizon&&ze(qt(l.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),f.angle,l.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}is3D(){return this.paint.get("fill-z-offset").constantOr(1)!==0}},"fill-extrusion":class extends is{constructor(l,r,s,u){super(l,{layout:yb||(yb=new Ma({visibility:new tr(Tt["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new tr(Tt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:xb||(xb=new Ma({"fill-extrusion-opacity":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new vr(Tt["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new tr(Tt["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(l){return new po(l)}queryRadius(){return Nt(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(l,r,s,u,g,f,x,C,M){const $=Zt(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),f.angle,l.pixelToTileUnitsFactor),T=this.paint.get("fill-extrusion-height").evaluate(r,s),k=this.paint.get("fill-extrusion-base").evaluate(r,s),I=[0,0],P=C&&f.elevation,R=f.elevation?f.elevation.exaggeration():1,j=l.tile.getBucket(this);if(P&&j instanceof po){const J=j.centroidVertexArray,le=M+1;le<J.length&&(I[0]=J.geta_centroid_pos0(le),I[1]=J.geta_centroid_pos1(le))}if(I[0]===0&&I[1]===1)return!1;f.projection.name==="globe"&&(u=gb([u],[new dt(0,0),new dt(lr,lr)],l.tileID.canonical).map(J=>J.polygon).flat());const W=P?C:null,[K,ae]=function(J,le,fe,_e,je,Ne,Be,Qe,Ue,rt,st){return J.projection.name==="globe"?function(it,ct,gt,vt,ht,Rt,Yt,Lt,ar,nr,gr){const jt=[],Mr=[],sr=it.projection.upVectorScale(gr,it.center.lat,it.worldSize).metersToTile,Cr=[0,0,0,1],Vr=[0,0,0,1],on=(wn,pn,Pn,_a)=>{wn[0]=pn,wn[1]=Pn,wn[2]=_a,wn[3]=1},fn=mb();gt>0&&(gt+=fn),vt+=fn;for(const wn of ct){const pn=[],Pn=[];for(const _a of wn){const ca=_a.x+ht.x,tn=_a.y+ht.y,ua=it.projection.projectTilePoint(ca,tn,gr),sa=it.projection.upVector(gr,_a.x,_a.y);let ba=gt,wi=vt;if(Yt){const Si=qx(ca,tn,gt,vt,Yt,Lt,ar,nr);ba+=Si.base,wi+=Si.top}gt!==0?on(Cr,ua.x+sa[0]*sr*ba,ua.y+sa[1]*sr*ba,ua.z+sa[2]*sr*ba):on(Cr,ua.x,ua.y,ua.z),on(Vr,ua.x+sa[0]*sr*wi,ua.y+sa[1]*sr*wi,ua.z+sa[2]*sr*wi),De.vec3.transformMat4(Cr,Cr,Rt),De.vec3.transformMat4(Vr,Vr,Rt),pn.push(new su(Cr[0],Cr[1],Cr[2])),Pn.push(new su(Vr[0],Vr[1],Vr[2]))}jt.push(pn),Mr.push(Pn)}return[jt,Mr]}(J,le,fe,_e,je,Ne,Be,Qe,Ue,rt,st):Be?function(it,ct,gt,vt,ht,Rt,Yt,Lt,ar){const nr=[],gr=[],jt=[0,0,0,1];for(const Mr of it){const sr=[],Cr=[];for(const Vr of Mr){const on=Vr.x+vt.x,fn=Vr.y+vt.y,wn=qx(on,fn,ct,gt,Rt,Yt,Lt,ar);jt[0]=on,jt[1]=fn,jt[2]=wn.base,jt[3]=1,De.vec4.transformMat4(jt,jt,ht),jt[3]=Math.max(jt[3],1e-5);const pn=new su(jt[0]/jt[3],jt[1]/jt[3],jt[2]/jt[3]);jt[0]=on,jt[1]=fn,jt[2]=wn.top,jt[3]=1,De.vec4.transformMat4(jt,jt,ht),jt[3]=Math.max(jt[3],1e-5);const Pn=new su(jt[0]/jt[3],jt[1]/jt[3],jt[2]/jt[3]);sr.push(pn),Cr.push(Pn)}nr.push(sr),gr.push(Cr)}return[nr,gr]}(le,fe,_e,je,Ne,Be,Qe,Ue,rt):function(it,ct,gt,vt,ht){const Rt=[],Yt=[],Lt=ht[8]*ct,ar=ht[9]*ct,nr=ht[10]*ct,gr=ht[11]*ct,jt=ht[8]*gt,Mr=ht[9]*gt,sr=ht[10]*gt,Cr=ht[11]*gt;for(const Vr of it){const on=[],fn=[];for(const wn of Vr){const pn=wn.x+vt.x,Pn=wn.y+vt.y,_a=ht[0]*pn+ht[4]*Pn+ht[12],ca=ht[1]*pn+ht[5]*Pn+ht[13],tn=ht[2]*pn+ht[6]*Pn+ht[14],ua=ht[3]*pn+ht[7]*Pn+ht[15],sa=_a+Lt,ba=ca+ar,wi=tn+nr,Si=Math.max(ua+gr,1e-5),ci=_a+jt,Fo=ca+Mr,Ra=tn+sr,$a=Math.max(ua+Cr,1e-5);on.push(new su(sa/Si,ba/Si,wi/Si)),fn.push(new su(ci/$a,Fo/$a,Ra/$a))}Rt.push(on),Yt.push(fn)}return[Rt,Yt]}(le,fe,_e,je,Ne)}(f,u,k,T,$,x,W,I,R,f.center.lat,l.tileID.canonical),ie=l.queryGeometry;return function(J,le,fe){let _e=1/0;ze(fe,le)&&(_e=vb(fe,le[0]));for(let je=0;je<le.length;je++){const Ne=le[je],Be=J[je];for(let Qe=0;Qe<Ne.length-1;Qe++){const Ue=Ne[Qe],rt=[Ue,Ne[Qe+1],Be[Qe+1],Be[Qe],Ue];ve(fe,rt)&&(_e=Math.min(_e,vb(fe,rt)))}}return _e!==1/0&&_e}(K,ae,ie.isPointQuery()?ie.screenBounds:ie.screenGeometry)}},line:class extends is{constructor(l,r,s,u){const g=Cb();super(l,g,r,s,u),g.layout&&(this.layout=new Wa(g.layout)),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const r=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=r._styleExpression&&r._styleExpression.expression instanceof bn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(l,r){super.recalculate(l,r),this.paint._values["line-floorwidth"]=(()=>{if(vg)return vg;const s=Cb();return vg=new xg(s.paint.properties["line-width"].specification),vg.useIntegerZoom=!0,vg})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new J0(l)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(l,r,s){const u=mg(this);return{config:new eu(this,{zoom:r,lut:s}),defines:u,overrideFog:!1}}queryRadius(l){const r=l,s=Xx(mt("line-width",this,r),mt("line-gap-width",this,r)),u=mt("line-offset",this,r);return s/2+Math.abs(u)+Nt(this.paint.get("line-translate"))}queryIntersectsFeature(l,r,s,u,g,f){if(l.queryGeometry.isAboveHorizon)return!1;const x=qt(l.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),f.angle,l.pixelToTileUnitsFactor),C=l.pixelToTileUnitsFactor/2*Xx(this.paint.get("line-width").evaluate(r,s),this.paint.get("line-gap-width").evaluate(r,s)),M=this.paint.get("line-offset").evaluate(r,s);return M&&(u=function($,T){const k=[],I=new dt(0,0);for(let P=0;P<$.length;P++){const R=$[P],j=[];for(let W=0;W<R.length;W++){const K=R[W],ae=R[W+1],ie=W===0?I:K.sub(R[W-1])._unit()._perp(),J=W===R.length-1?I:ae.sub(K)._unit()._perp(),le=ie._add(J)._unit();le._mult(1/(le.x*J.x+le.y*J.y)),j.push(le._mult(T)._add(K))}k.push(j)}return k}(u,M*l.pixelToTileUnitsFactor)),function($,T,k){for(let I=0;I<T.length;I++){const P=T[I];if($.length>=3){for(let R=0;R<P.length;R++)if(nt($,P[R]))return!0}if(Oe($,P,k))return!0}return!1}(x,u,C)}isTileClipped(){return!0}isDraped(l){const r=this.layout.get("line-z-offset"),s=r.isConstant()&&!r.constantOr(0),u=this.layout.get("line-elevation-reference");return!(u==="sea"||u==="ground")&&(s||u!=="none")}},symbol:qb,background:class extends is{constructor(l,r,s,u){super(l,{layout:lE||(lE=new Ma({visibility:new tr(Tt.layout_background.visibility)})),paint:cE||(cE=new Ma({"background-pitch-alignment":new tr(Tt.paint_background["background-pitch-alignment"]),"background-color":new tr(Tt.paint_background["background-color"]),"background-pattern":new tr(Tt.paint_background["background-pattern"]),"background-opacity":new tr(Tt.paint_background["background-opacity"]),"background-emissive-strength":new tr(Tt.paint_background["background-emissive-strength"]),"background-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(l,r,s){return{overrideFog:!1}}is3D(){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:pE,"raster-particle":_E,sky:class extends is{constructor(l,r,s,u){super(l,{layout:yE||(yE=new Ma({visibility:new tr(Tt.layout_sky.visibility)})),paint:xE||(xE=new Ma({"sky-type":new tr(Tt.paint_sky["sky-type"]),"sky-atmosphere-sun":new tr(Tt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new tr(Tt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new tr(Tt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new tr(Tt.paint_sky["sky-gradient-radius"]),"sky-gradient":new lc(Tt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new tr(Tt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new tr(Tt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new tr(Tt.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="sky-gradient"?this._updateColorRamp():l!=="sky-atmosphere-sun"&&l!=="sky-atmosphere-halo-color"&&l!=="sky-atmosphere-color"&&l!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Np({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(l){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const r=l.style.light.properties.get("position");return this._lightPosition.azimuthal!==r.azimuthal||this._lightPosition.polar!==r.polar}return!1}getCenter(l,r){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),g=!u,f=l.style.light,x=f.properties.get("position");return g&&f.properties.get("anchor")==="viewport"&&Wr("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?G2(x.azimuthal,90-x.polar,r):G2(u[0],90-u[1],r)}const s=this.paint.get("sky-gradient-center");return G2(s[0],90-s[1],r)}isSky(){return!0}markSkyboxValid(l){this._skyboxInvalidated=!1,this._lightPosition=l.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const l=this.paint.get("sky-type");return l==="atmosphere"?["skyboxCapture","skybox"]:l==="gradient"?["skyboxGradient"]:null}},slot:class extends is{constructor(l,r,s,u){super(l,{paint:vE||(vE=new Ma({}))},r,null)}},model:class extends is{constructor(l,r,s,u){super(l,{layout:AE||(AE=new Ma({visibility:new tr(Tt.layout_model.visibility),"model-id":new vr(Tt.layout_model["model-id"])})),paint:kE||(kE=new Ma({"model-opacity":new vr(Tt.paint_model["model-opacity"]),"model-rotation":new vr(Tt.paint_model["model-rotation"]),"model-scale":new vr(Tt.paint_model["model-scale"]),"model-translation":new vr(Tt.paint_model["model-translation"]),"model-color":new vr(Tt.paint_model["model-color"]),"model-color-mix-intensity":new vr(Tt.paint_model["model-color-mix-intensity"]),"model-type":new tr(Tt.paint_model["model-type"]),"model-cast-shadows":new tr(Tt.paint_model["model-cast-shadows"]),"model-receive-shadows":new tr(Tt.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new tr(Tt.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new vr(Tt.paint_model["model-emissive-strength"]),"model-roughness":new vr(Tt.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new vr(Tt.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new tr(Tt.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new tr(Tt.paint_model["model-front-cutoff"]),"model-color-use-theme":new vr({type:"string",default:"default","property-type":"data-driven"})}))},r,s,u),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(l){return new W2(l)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(l){return l instanceof e1?lr-1:0}queryIntersectsFeature(l,r,s,u,g,f){if(!this.modelManager)return!1;const x=this.modelManager,C=l.tile.getBucket(this);if(!(C&&C instanceof W2))return!1;for(const M in C.instancesPerModel){const $=C.instancesPerModel[M],T=r.id!==void 0?r.id:r.properties&&r.properties.hasOwnProperty("id")?r.properties.id:void 0;if($.idToFeaturesIndex.hasOwnProperty(T)){const k=$.features[$.idToFeaturesIndex[T]],I=x.getModel(M,this.scope);if(!I)return!1;let P=De.mat4.create();const R=new $n(0,0),j=C.canonical;let W=Number.MAX_VALUE;for(let K=0;K<k.instancedDataCount;++K){const ae=16*(k.instancedDataOffset+K),ie=$.instancedDataArray.float32,J=[ie[ae+4],ie[ae+5],ie[ae+6]];BE(j,R,ie[ae],0|ie[ae+1]),RE(P,I,f,R,k.rotation,k.scale,J,!1,!1,!1),f.projection.name==="globe"&&(P=q2(P,f));const le=De.mat4.multiply([],f.projMatrix,P),fe=l.queryGeometry,_e=EE(fe.isPointQuery()?fe.screenBounds:fe.screenGeometry,f,le,I.aabb);_e!=null&&(W=Math.min(_e,W))}return W!==Number.MAX_VALUE&&W}}return!1}_handleOverridablePaintPropertyUpdate(l,r,s){return!(!this.layout||r.isDataDriven()||s.isDataDriven()||l!=="model-color"&&l!=="model-color-mix-intensity"&&l!=="model-rotation"&&l!=="model-scale"&&l!=="model-translation"&&l!=="model-emissive-strength")}_isPropertyZoomDependent(l){const r=this._transitionablePaint._values[l];return r!=null&&r.value!=null&&r.value.expression!=null&&r.value.expression instanceof Wu}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends is{constructor(l,r,s,u){super(l,{layout:eb||(eb=new Ma({"clip-layer-types":new tr(Tt.layout_clip["clip-layer-types"]),"clip-layer-scope":new tr(Tt.layout_clip["clip-layer-scope"])})),paint:kx||(kx=new Ma({}))},r,s,u)}recalculate(l,r){super.recalculate(l,r)}createBucket(l){return new Rx(l)}isTileClipped(){return!0}is3D(){return!0}}};class CO{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class DO{constructor(){this.tasks={},this.taskQueue=[],oa(["process"],this),this.invoker=new CO(this.process),this.nextId=0}add(r,s){const u=this.nextId++,g=function({type:f,isSymbolTile:x,zoom:C}){return C=C||0,f==="message"?0:f!=="maybePrepare"||x?f!=="parseTile"||x?f==="parseTile"&&x?300-C:f==="maybePrepare"&&x?400-C:500:200-C:100-C}(s);if(g===0){try{r()}finally{}return null}return this.tasks[u]={fn:r,metadata:s,priority:g,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const r=this.pick();if(r===null)return;const s=this.tasks[r];if(delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),!s)return;s.fn()}finally{}}pick(){let r=null,s=1/0;for(let g=0;g<this.taskQueue.length;g++){const f=this.tasks[this.taskQueue[g]];f.priority<s&&(s=f.priority,r=g)}if(r===null)return null;const u=this.taskQueue[r];return this.taskQueue.splice(r,1),u}remove(){this.invoker.remove()}}class NE{constructor(r,s,u){this.target=r,this.parent=s,this.mapId=u,this.callbacks={},this.cancelCallbacks={},oa(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new DO}send(r,s,u,g,f=!1,x){const C=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(u.metadata=x,this.callbacks[C]=u);const M=new Set;return this.target.postMessage({id:C,type:r,hasCallback:!!u,targetMapId:g,mustQueue:f,sourceMapId:this.mapId,data:Ss(s,M)},M),{cancel:()=>{u&&delete this.callbacks[C],this.target.postMessage({id:C,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}receive(r){const s=r.data,u=s.id;if(u&&(!s.targetMapId||this.mapId===s.targetMapId))if(s.type==="<cancel>"){const g=this.cancelCallbacks[u];delete this.cancelCallbacks[u],g&&g.cancel()}else if(s.mustQueue||ya()){const g=this.callbacks[u],f=this.scheduler.add(()=>this.processTask(u,s),g&&g.metadata||{type:"message"});f&&(this.cancelCallbacks[u]=f)}else this.processTask(u,s)}processTask(r,s){if(delete this.cancelCallbacks[r],s.type==="<response>"){const u=this.callbacks[r];delete this.callbacks[r],u&&(s.error?u(Wc(s.error)):u(null,Wc(s.data)))}else{const u=new Set,g=s.hasCallback?(x,C)=>{this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:x?Ss(x):null,data:Ss(C,u)},u)}:()=>{},f=Wc(s.data);if(this.parent[s.type])this.parent[s.type](s.sourceMapId,f,g);else if(this.parent.getWorkerSource){const x=s.type.split(".");this.parent.getWorkerSource(s.sourceMapId,x[0],f.source,f.scope)[x[1]](f,g)}else g(new Error(`Could not find function ${s.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var uv={workerUrl:"",workerClass:null,workerParams:void 0};const Y2="mapboxgl_preloaded_worker_pool";class Dg{constructor(){this.active={}}acquire(r,s=Dg.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<s;)this.workers.push(uv.workerClass!=null?new uv.workerClass:new self.Worker(uv.workerUrl,uv.workerParams));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.workers&&this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Y2]}numActive(){return Object.keys(this.active).length}}Dg.workerCount=2;class cy{constructor(r,s,u="Worker",g=Dg.workerCount){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=Sa();const f=this.workerPool.acquire(this.id,g);for(let x=0;x<f.length;x++){const C=new cy.Actor(f[x],s,this.id);C.name=`${u} ${x}`,this.actors.push(C)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(r,s,u){Dr(this.actors,(g,f)=>{g.send(r,s,f)},u=u||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(r=>{r.remove()}),this.actors=[],this.workerPool.release(this.id)}}let dv,J2;function t1(){return dv||(dv=new Dg),dv}cy.Actor=NE;const Q2=new In(0,0,0);var r1=(l=>(l[l.PATH_RULE_UNSPECIFIED=0]="PATH_RULE_UNSPECIFIED",l[l.PATH_RULE_NON_ZERO=1]="PATH_RULE_NON_ZERO",l[l.PATH_RULE_EVEN_ODD=2]="PATH_RULE_EVEN_ODD",l))(r1||{}),n1=(l=>(l[l.LINE_CAP_UNSPECIFIED=0]="LINE_CAP_UNSPECIFIED",l[l.LINE_CAP_BUTT=1]="LINE_CAP_BUTT",l[l.LINE_CAP_ROUND=2]="LINE_CAP_ROUND",l[l.LINE_CAP_SQUARE=3]="LINE_CAP_SQUARE",l))(n1||{}),hv=(l=>(l[l.LINE_JOIN_UNSPECIFIED=0]="LINE_JOIN_UNSPECIFIED",l[l.LINE_JOIN_MITER=1]="LINE_JOIN_MITER",l[l.LINE_JOIN_MITER_CLIP=2]="LINE_JOIN_MITER_CLIP",l[l.LINE_JOIN_ROUND=3]="LINE_JOIN_ROUND",l[l.LINE_JOIN_BEVEL=4]="LINE_JOIN_BEVEL",l))(hv||{}),jE=(l=>(l[l.PAINT_ORDER_UNSPECIFIED=0]="PAINT_ORDER_UNSPECIFIED",l[l.PAINT_ORDER_FILL_AND_STROKE=1]="PAINT_ORDER_FILL_AND_STROKE",l[l.PAINT_ORDER_STROKE_AND_FILL=2]="PAINT_ORDER_STROKE_AND_FILL",l))(jE||{}),uy=(l=>(l[l.PATH_COMMAND_UNSPECIFIED=0]="PATH_COMMAND_UNSPECIFIED",l[l.PATH_COMMAND_MOVE=1]="PATH_COMMAND_MOVE",l[l.PATH_COMMAND_LINE=2]="PATH_COMMAND_LINE",l[l.PATH_COMMAND_QUAD=3]="PATH_COMMAND_QUAD",l[l.PATH_COMMAND_CUBIC=4]="PATH_COMMAND_CUBIC",l[l.PATH_COMMAND_CLOSE=5]="PATH_COMMAND_CLOSE",l))(uy||{}),OE=(l=>(l[l.MASK_TYPE_UNSPECIFIED=0]="MASK_TYPE_UNSPECIFIED",l[l.MASK_TYPE_LUMINANCE=1]="MASK_TYPE_LUMINANCE",l[l.MASK_TYPE_ALPHA=2]="MASK_TYPE_ALPHA",l))(OE||{});function PO(l,r,s){l===1&&r.icons.push(function(u,g){return function(f){if(f.usvg_tree.height||(f.usvg_tree.height=f.usvg_tree.width),!f.metadata)return f;const{metadata:x}=f;if(x.content_area){const{content_area:C}=x;C.top==null&&(C.top=C.left),C.width==null&&(C.width=f.usvg_tree.width),C.height==null&&(C.height=C.width)}return x.stretch_x&&x.stretch_x.length&&FE(x,"x"),x.stretch_y&&x.stretch_y.length&&FE(x,"y"),f}(u.readFields(MO,{name:void 0},g))}(s,s.readVarint()+s.pos))}function FE(l,r){const s=[],u=l[`stretch_${r}`];let g=null;for(let f=0;f<u.length;f++)g===null?g=s.length===0?u[0]:s[s.length-1][1]+u[f]:(s.push([g,g+u[f]]),g=null);l[`stretch_${r}_areas`]=s}function MO(l,r,s){l===1?r.name=s.readString():l===2?r.metadata=function(u,g){return u.readFields(AO,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},g)}(s,s.readVarint()+s.pos):l===3&&(r.usvg_tree=function(u,g){return u.readFields(IO,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},g)}(s,s.readVarint()+s.pos),r.data="usvg_tree")}function AO(l,r,s){l===1?r.stretch_x=s.readPackedVarint():l===2?r.stretch_y=s.readPackedVarint():l===3?r.content_area=function(u,g){return u.readFields(kO,{left:0},g)}(s,s.readVarint()+s.pos):l===4&&r.variables.push(function(u,g){return u.readFields(RO,{name:void 0},g)}(s,s.readVarint()+s.pos))}function kO(l,r,s){l===1?r.left=s.readVarint():l===2?r.width=s.readVarint():l===3?r.top=s.readVarint():l===4&&(r.height=s.readVarint())}function RO(l,r,s){l===1?r.name=s.readString():l===2&&(r.rgb_color=s1(s.readVarint()),r.value="rgb_color")}function IO(l,r,s){l===1?r.width=r.height=s.readVarint():l===2?r.height=s.readVarint():l===3?r.children.push(a1(s,s.readVarint()+s.pos)):l===4?r.linear_gradients.push(function(u,g){return u.readFields(OO,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},g)}(s,s.readVarint()+s.pos)):l===5?r.radial_gradients.push(function(u,g){return u.readFields(VO,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},g)}(s,s.readVarint()+s.pos)):l===7?r.clip_paths.push(function(u,g){return u.readFields(UO,{children:[]},g)}(s,s.readVarint()+s.pos)):l===8&&r.masks.push(function(u,g){const f=u.readFields(GO,{left:0,width:20,mask_type:1,children:[]},g);return f.height==null&&(f.height=f.width),f.top==null&&(f.top=f.left),f}(s,s.readVarint()+s.pos))}function a1(l,r){return l.readFields(zO,{},r)}function zO(l,r,s){l===1?(r.group=function(u,g){return u.readFields(LO,{opacity:255,children:[]},g)}(s,s.readVarint()+s.pos),r.node="group"):l===2&&(r.path=function(u,g){return u.readFields(BO,{paint_order:1,commands:[],step:1,diffs:[],rule:1},g)}(s,s.readVarint()+s.pos),r.node="path")}function LO(l,r,s){l===1?r.transform=i1(s,s.readVarint()+s.pos):l===2?r.opacity=s.readVarint():l===5?r.clip_path_idx=s.readVarint():l===6?r.mask_idx=s.readVarint():l===7&&r.children.push(a1(s,s.readVarint()+s.pos))}function i1(l,r){return l.readFields($O,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},r)}function $O(l,r,s){l===1?r.sx=s.readFloat():l===2?r.ky=s.readFloat():l===3?r.kx=s.readFloat():l===4?r.sy=s.readFloat():l===5?r.tx=s.readFloat():l===6&&(r.ty=s.readFloat())}function BO(l,r,s){l===1?r.fill=function(u,g){return u.readFields(NO,{rgb_color:Q2,paint:"rgb_color",opacity:255},g)}(s,s.readVarint()+s.pos):l===2?r.stroke=function(u,g){return u.readFields(jO,{rgb_color:Q2,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},g)}(s,s.readVarint()+s.pos):l===3?r.paint_order=s.readVarint():l===5?s.readPackedVarint(r.commands):l===6?r.step=s.readFloat():l===7?s.readPackedSVarint(r.diffs):l===8&&(r.rule=s.readVarint())}function NO(l,r,s){l===1?(r.rgb_color=s1(s.readVarint()),r.paint="rgb_color"):l===2?(r.linear_gradient_idx=s.readVarint(),r.paint="linear_gradient_idx"):l===3?(r.radial_gradient_idx=s.readVarint(),r.paint="radial_gradient_idx"):l===5&&(r.opacity=s.readVarint())}function s1(l){return new In((l>>16&255)/255,(l>>8&255)/255,(255&l)/255,1)}function jO(l,r,s){l===1?(r.rgb_color=s1(s.readVarint()),r.paint="rgb_color"):l===2?(r.linear_gradient_idx=s.readVarint(),r.paint="linear_gradient_idx"):l===3?(r.radial_gradient_idx=s.readVarint(),r.paint="radial_gradient_idx"):l===5?s.readPackedFloat(r.dasharray):l===6?r.dashoffset=s.readFloat():l===7?r.miterlimit=s.readFloat():l===8?r.opacity=s.readVarint():l===9?r.width=s.readFloat():l===10?r.linecap=s.readVarint():l===11&&(r.linejoin=s.readVarint())}function OO(l,r,s){l===1?r.transform=i1(s,s.readVarint()+s.pos):l===2?r.spread_method=s.readVarint():l===3?r.stops.push(VE(s,s.readVarint()+s.pos)):l===4?r.x1=s.readFloat():l===5?r.y1=s.readFloat():l===6?r.x2=s.readFloat():l===7&&(r.y2=s.readFloat())}function VE(l,r){return l.readFields(FO,{offset:0,opacity:255,rgb_color:Q2},r)}function FO(l,r,s){l===1?r.offset=s.readFloat():l===2?r.opacity=s.readVarint():l===3&&(r.rgb_color=s1(s.readVarint()))}function VO(l,r,s){l===1?r.transform=i1(s,s.readVarint()+s.pos):l===2?r.spread_method=s.readVarint():l===3?r.stops.push(VE(s,s.readVarint()+s.pos)):l===4?r.cx=s.readFloat():l===5?r.cy=s.readFloat():l===6?r.r=s.readFloat():l===7?r.fx=s.readFloat():l===8?r.fy=s.readFloat():l===9&&(r.fr=s.readFloat())}function UO(l,r,s){l===1?r.transform=i1(s,s.readVarint()+s.pos):l===2?r.clip_path_idx=s.readVarint():l===3&&r.children.push(a1(s,s.readVarint()+s.pos))}function GO(l,r,s){l===1?r.left=r.top=s.readFloat():l===2?r.width=r.height=s.readFloat():l===3?r.top=s.readFloat():l===4?r.height=s.readFloat():l===5?r.mask_type=s.readVarint():l===6?r.mask_idx=s.readVarint():l===7&&r.children.push(a1(s,s.readVarint()+s.pos))}class HO{static calculate(r,s){const u=new Map,g=new Map;if(Object.keys(r).length===0)return u;s.forEach(f=>{g.set(f.name,f.rgb_color||new In(0,0,0))});for(const[f,x]of Object.entries(r))g.has(f)?u.set(g.get(f).toStringPremultipliedAlpha(),x):console.warn(`Ignoring unknown image variable "${f}"`);return u}}function dy(l,r=255,s){const u=r/255,g=l.toStringPremultipliedAlpha(),f=s.has(g)?s.get(g).clone():l.clone();return f.a=u,f.toString()}function e3(l,r){if(!Jt()){const s=document.createElement("canvas");return s.width=l,s.height=r,s}return new OffscreenCanvas(l,r)}function qO(l,r){const s=HO.calculate(r.params,l.metadata?l.metadata.variables:[]),u=l.usvg_tree,g=u.width,f=u.height,x=r.transform?r.transform:new DOMMatrix,C=Math.max(1,Math.round(g*x.a)),M=Math.max(1,Math.round(f*x.d)),$=new DOMMatrix([C/g,0,0,M/f,0,0]),T=e3(C,M).getContext("2d");return t3(T,$,u,u,s),T.getImageData(0,0,C,M)}function t3(l,r,s,u,g){for(const f of u.children)UE(l,r,s,f,g)}function UE(l,r,s,u,g){u.group?(l.save(),function(f,x,C,M,$){const T=M.mask_idx!=null?C.masks[M.mask_idx]:null,k=M.clip_path_idx!=null?C.clip_paths[M.clip_path_idx]:null;if(M.transform&&(x=fv(M.transform).preMultiplySelf(x)),!function(R,j,W){return R.opacity!==255||j||W}(M,k!=null,T!=null))return void t3(f,x,C,M,$);const I=e3(f.canvas.width,f.canvas.height),P=I.getContext("2d");k&&KE(P,x,C,k),t3(P,x,C,M,$),T&&ZE(P,x,C,T,$),f.globalAlpha=M.opacity/255,f.drawImage(I,0,0)}(l,r,s,u.group,g),l.restore()):u.path&&(l.save(),function(f,x,C,M,$){const T=XE(M);f.setTransform(x),M.paint_order===jE.PAINT_ORDER_FILL_AND_STROKE?(GE(f,C,M,T,$),HE(f,C,M,T,$)):(HE(f,C,M,T,$),GE(f,C,M,T,$))}(l,r,s,u.path,g),l.restore())}function GE(l,r,s,u,g){const f=s.fill;if(!f)return;const x=f.opacity/255;switch(f.paint){case"rgb_color":l.fillStyle=dy(f.rgb_color,f.opacity,g);break;case"linear_gradient_idx":l.fillStyle=qE(l,r.linear_gradients[f.linear_gradient_idx],x,g);break;case"radial_gradient_idx":l.fillStyle=WE(l,r.radial_gradients[f.radial_gradient_idx],x,g)}let C;switch(s.rule){case r1.PATH_RULE_NON_ZERO:C="nonzero";break;case r1.PATH_RULE_EVEN_ODD:C="evenodd"}l.fill(u,C)}function HE(l,r,s,u,g){const f=s.stroke;if(!f)return;l.lineWidth=f.width,l.miterLimit=f.miterlimit,l.setLineDash(f.dasharray),l.lineDashOffset=f.dashoffset;const x=f.opacity/255;switch(f.paint){case"rgb_color":l.strokeStyle=dy(f.rgb_color,f.opacity,g);break;case"linear_gradient_idx":l.strokeStyle=qE(l,r.linear_gradients[f.linear_gradient_idx],x,g);break;case"radial_gradient_idx":l.strokeStyle=WE(l,r.radial_gradients[f.radial_gradient_idx],x,g)}switch(f.linejoin){case hv.LINE_JOIN_MITER_CLIP:case hv.LINE_JOIN_MITER:l.lineJoin="miter";break;case hv.LINE_JOIN_ROUND:l.lineJoin="round";break;case hv.LINE_JOIN_BEVEL:l.lineJoin="bevel"}switch(f.linecap){case n1.LINE_CAP_BUTT:l.lineCap="butt";break;case n1.LINE_CAP_ROUND:l.lineCap="round";break;case n1.LINE_CAP_SQUARE:l.lineCap="square"}l.stroke(u)}function qE(l,r,s,u){if(r.stops.length===1){const I=r.stops[0];return dy(I.rgb_color,I.opacity*s,u)}const g=fv(r.transform),{x1:f,y1:x,x2:C,y2:M}=r,$=g.transformPoint(new DOMPoint(f,x)),T=g.transformPoint(new DOMPoint(C,M)),k=l.createLinearGradient($.x,$.y,T.x,T.y);for(const I of r.stops)k.addColorStop(I.offset,dy(I.rgb_color,I.opacity*s,u));return k}function WE(l,r,s,u){if(r.stops.length===1){const I=r.stops[0];return dy(I.rgb_color,I.opacity*s,u)}const g=fv(r.transform),{fx:f,fy:x,cx:C,cy:M}=r,$=g.transformPoint(new DOMPoint(f,x)),T=g.transformPoint(new DOMPoint(C,M)),k=l.createRadialGradient($.x,$.y,0,T.x,T.y,r.r*((g.a+g.d)/2));for(const I of r.stops)k.addColorStop(I.offset,dy(I.rgb_color,I.opacity*s,u));return k}function KE(l,r,s,u){const g=fv(u.transform).preMultiplySelf(r),f=u.clip_path_idx!=null?s.clip_paths[u.clip_path_idx]:null;f&&KE(l,g,s,f);const x=new Path2D;let C;function M($,T){if($.path){const k=$.path;x.addPath(XE(k),T),k.rule===r1.PATH_RULE_EVEN_ODD&&(C="evenodd")}else if($.group){const k=$.group.transform?fv($.group.transform).preMultiplySelf(T):T;for(const I of $.group.children)M(I,k)}}for(const $ of u.children)M($,g);l.clip(x,C)}function ZE(l,r,s,u,g){if(u.children.length===0)return;const f=u.mask_idx!=null?s.masks[u.mask_idx]:null;f&&ZE(l,r,s,f,g);const x=l.canvas.width,C=l.canvas.height,M=e3(x,C),$=M.getContext("2d"),T=u.width,k=u.height,I=u.left,P=u.top,R=new Path2D,j=new Path2D;j.rect(I,P,T,k),R.addPath(j,r),$.clip(R);for(const ae of u.children)UE($,r,s,ae,g);const W=$.getImageData(0,0,x,C),K=W.data;if(u.mask_type===OE.MASK_TYPE_LUMINANCE)for(let ae=0;ae<K.length;ae+=4)K[ae+3]=K[ae+3]/255*(.2126*K[ae]+.7152*K[ae+1]+.0722*K[ae+2]);$.putImageData(W,0,0),l.globalCompositeOperation="destination-in",l.drawImage(M,0,0)}function fv(l){return l?new DOMMatrix([l.sx,l.ky,l.kx,l.sy,l.tx,l.ty]):new DOMMatrix}function XE(l){const r=new Path2D,s=l.step;let u=l.diffs[0]*s,g=l.diffs[1]*s;r.moveTo(u,g);for(let f=0,x=2;f<l.commands.length;f++)switch(l.commands[f]){case uy.PATH_COMMAND_MOVE:u+=l.diffs[x++]*s,g+=l.diffs[x++]*s,r.moveTo(u,g);break;case uy.PATH_COMMAND_LINE:u+=l.diffs[x++]*s,g+=l.diffs[x++]*s,r.lineTo(u,g);break;case uy.PATH_COMMAND_QUAD:{const C=u+l.diffs[x++]*s,M=g+l.diffs[x++]*s;u=C+l.diffs[x++]*s,g=M+l.diffs[x++]*s,r.quadraticCurveTo(C,M,u,g);break}case uy.PATH_COMMAND_CUBIC:{const C=u+l.diffs[x++]*s,M=g+l.diffs[x++]*s,$=C+l.diffs[x++]*s,T=M+l.diffs[x++]*s;u=$+l.diffs[x++]*s,g=T+l.diffs[x++]*s,r.bezierCurveTo(C,M,$,T,u,g);break}case uy.PATH_COMMAND_CLOSE:r.closePath()}return r}class r3{constructor(r){this.capacity=r,this.cache=new Map}get(r){if(!this.cache.has(r))return;const s=this.cache.get(r);return this.cache.delete(r),this.cache.set(r,s),s}put(r,s){this.cache.has(r)?this.cache.delete(r):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(r,s)}delete(r){this.cache.delete(r)}}class n3{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(r){return new es(r,r.data)}getFromCache(r,s,u){return this.cacheMap.has(u)||this.cacheMap.set(u,new r3(150)),this.cacheMap.get(u).get(Lo(r.serialize(),s))}setInCache(r,s,u,g){this.cacheDependenciesMap.has(g)||this.cacheDependenciesMap.set(g,new Map),this.cacheMap.has(g)||this.cacheMap.set(g,new r3(150));const f=this.cacheDependenciesMap.get(g);f.get(Lo(r.id,u))||f.set(Lo(r.id,u),new Set);const x=this.cacheMap.get(g),C=r.serialize();f.get(Lo(r.id,u)).add(C),x.put(Lo(r.serialize(),u),s)}removeImagesFromCacheByIds(r,s,u=""){if(!this.cacheMap.has(u)||!this.cacheDependenciesMap.has(u))return;const g=this.cacheMap.get(u),f=this.cacheDependenciesMap.get(u);for(const x of r)if(f.has(Lo(x,s))){for(const C of f.get(Lo(x,s)))g.delete(C);f.delete(Lo(x,s))}}rasterize(r,s,u,g,f=qO){const x=this.getFromCache(r,u,g);if(x)return x.clone();const C=f(s.icon,r.options),M=n3._getImage(C);return this.setInCache(r,M,u,g),M.clone()}}class YE{constructor(r){this.size=r,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(r,s){const u=this.toIdx(r,s);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(r,s){return this.leaves[this.toIdx(r,s)]}toIdx(r,s){return s*this.size+r}}function JE(l,r,s,u){let g=0,f=Number.MAX_VALUE;for(let x=0;x<3;x++)if(Math.abs(u[x])<1e-15){if(s[x]<l[x]||s[x]>r[x])return null}else{const C=1/u[x];let M=(l[x]-s[x])*C,$=(r[x]-s[x])*C;if(M>$){const T=M;M=$,$=T}if(M>g&&(g=M),$<f&&(f=$),g>f)return null}return g}function QE(l,r,s,u,g,f,x,C,M,$,T){const k=u-l,I=g-r,P=f-s,R=x-l,j=C-r,W=M-s,K=T[1]*W-T[2]*j,ae=T[2]*R-T[0]*W,ie=T[0]*j-T[1]*R,J=k*K+I*ae+P*ie;if(Math.abs(J)<1e-15)return null;const le=1/J,fe=$[0]-l,_e=$[1]-r,je=$[2]-s,Ne=(fe*K+_e*ae+je*ie)*le;if(Ne<0||Ne>1)return null;const Be=_e*P-je*I,Qe=je*k-fe*P,Ue=fe*I-_e*k,rt=(T[0]*Be+T[1]*Qe+T[2]*Ue)*le;return rt<0||Ne+rt>1?null:(R*Be+j*Qe+W*Ue)*le}function eC(l,r,s){return(l-r)/(s-r)}function tC(l,r,s,u,g,f,x,C,M){const $=1<<s,T=f-u,k=x-g,I=(l+1)/$*T+u,P=(r+0)/$*k+g,R=(r+1)/$*k+g;C[0]=(l+0)/$*T+u,C[1]=P,M[0]=I,M[1]=R}class rC{constructor(r){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=r,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const s=function(f){const x=Math.ceil(Math.log2(f.dim/8)),C=[];let M=Math.ceil(Math.pow(2,x));const $=1/M,T=(P,R,j,W,K)=>{const ae=W?1:0,ie=(P+1)*j-ae,J=R*j,le=(R+1)*j-ae;K[0]=P*j,K[1]=J,K[2]=ie,K[3]=le};let k=new YE(M);const I=[];for(let P=0;P<M*M;P++){T(P%M,Math.floor(P/M),$,!1,I);const R=rm(I[0],I[1],f),j=rm(I[2],I[1],f),W=rm(I[2],I[3],f),K=rm(I[0],I[3],f);k.minimums.push(Math.min(R,j,W,K)),k.maximums.push(Math.max(R,j,W,K)),k.leaves.push(1)}for(C.push(k),M/=2;M>=1;M/=2){const P=C[C.length-1];k=new YE(M);for(let R=0;R<M*M;R++){T(R%M,Math.floor(R/M),2,!0,I);const j=P.getElevation(I[0],I[1]),W=P.getElevation(I[2],I[1]),K=P.getElevation(I[2],I[3]),ae=P.getElevation(I[0],I[3]),ie=P.isLeaf(I[0],I[1]),J=P.isLeaf(I[2],I[1]),le=P.isLeaf(I[2],I[3]),fe=P.isLeaf(I[0],I[3]),_e=Math.min(j.min,W.min,K.min,ae.min),je=Math.max(j.max,W.max,K.max,ae.max),Ne=ie&&J&&le&&fe;k.maximums.push(je),k.minimums.push(_e),k.leaves.push(je-_e<=5&&Ne?1:0)}C.push(k)}return C}(this.dem),u=s.length-1,g=s[u];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(s,0,0,u,0)}raycastRoot(r,s,u,g,f,x,C=1){return JE([r,s,-100],[u,g,this.maximums[0]*C],f,x)}raycast(r,s,u,g,f,x,C=1){if(!this.nodeCount)return null;const M=this.raycastRoot(r,s,u,g,f,x,C);if(M==null)return null;const $=[],T=[],k=[],I=[],P=[{idx:0,t:M,nodex:0,nodey:0,depth:0}];for(;P.length>0;){const{idx:R,t:j,nodex:W,nodey:K,depth:ae}=P.pop();if(this.leaves[R]){tC(W,K,ae,r,s,u,g,k,I);const J=1<<ae,le=(W+0)/J,fe=(W+1)/J,_e=(K+0)/J,je=(K+1)/J,Ne=rm(le,_e,this.dem)*C,Be=rm(fe,_e,this.dem)*C,Qe=rm(fe,je,this.dem)*C,Ue=rm(le,je,this.dem)*C,rt=QE(k[0],k[1],Ne,I[0],k[1],Be,I[0],I[1],Qe,f,x),st=QE(I[0],I[1],Qe,k[0],I[1],Ue,k[0],k[1],Ne,f,x),it=Math.min(rt!==null?rt:Number.MAX_VALUE,st!==null?st:Number.MAX_VALUE);if(it!==Number.MAX_VALUE)return it;{const ct=De.vec3.scaleAndAdd([],f,x,j);if(nC(Ne,Be,Ue,Qe,eC(ct[0],k[0],I[0]),eC(ct[1],k[1],I[1]))>=ct[2])return j}continue}let ie=0;for(let J=0;J<this._siblingOffset.length;J++){tC((W<<1)+this._siblingOffset[J][0],(K<<1)+this._siblingOffset[J][1],ae+1,r,s,u,g,k,I),k[2]=-100,I[2]=this.maximums[this.childOffsets[R]+J]*C;const le=JE(k,I,f,x);if(le!=null){const fe=le;$[J]=fe;let _e=!1;for(let je=0;je<ie&&!_e;je++)fe>=$[T[je]]&&(T.splice(je,0,J),_e=!0);_e||(T[ie]=J),ie++}}for(let J=0;J<ie;J++){const le=T[J];P.push({idx:this.childOffsets[R]+le,t:$[le],nodex:(W<<1)+this._siblingOffset[le][0],nodey:(K<<1)+this._siblingOffset[le][1],depth:ae+1})}}return null}_addNode(r,s,u){return this.minimums.push(r),this.maximums.push(s),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(r,s,u,g,f){if(r[g].isLeaf(s,u)===1)return;this.childOffsets[f]||(this.childOffsets[f]=this.nodeCount);const x=g-1,C=r[x];let M=0,$=0;for(let T=0;T<this._siblingOffset.length;T++){const k=2*s+this._siblingOffset[T][0],I=2*u+this._siblingOffset[T][1],P=C.getElevation(k,I),R=C.isLeaf(k,I),j=this._addNode(P.min,P.max,R);R&&(M|=1<<T),$||($=j)}for(let T=0;T<this._siblingOffset.length;T++)M&1<<T||this._construct(r,2*s+this._siblingOffset[T][0],2*u+this._siblingOffset[T][1],x,$+T)}}function nC(l,r,s,u,g,f){return Or(Or(l,s,f),Or(r,u,f),g)}function rm(l,r,s){const u=s.dim,g=fr(l*u-.5,0,u-1),f=fr(r*u-.5,0,u-1),x=Math.floor(g),C=Math.floor(f),M=Math.min(x+1,u-1),$=Math.min(C+1,u-1);return nC(s.get(x,C),s.get(M,C),s.get(x,$),s.get(M,$),g-x,f-C)}const WO={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function KO(l,r,s){return(256*l*256+256*r+s)/10-1e4}function ZO(l,r,s){return 256*l+r+s/256-32768}class o1{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(r,s,u,g=!1){if(this.uid=r,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return void Wr(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const f=this.dim=s.height-2,x=new Uint32Array(s.data.buffer);if(this.pixels=new Uint8Array(s.data.buffer),this.floatView=new Float32Array(s.data.buffer),this.borderReady=g,this._modifiedForSources={},!g){for(let M=0;M<f;M++)x[this._idx(-1,M)]=x[this._idx(0,M)],x[this._idx(f,M)]=x[this._idx(f-1,M)],x[this._idx(M,-1)]=x[this._idx(M,0)],x[this._idx(M,f)]=x[this._idx(M,f-1)];x[this._idx(-1,-1)]=x[this._idx(0,0)],x[this._idx(f,-1)]=x[this._idx(f-1,0)],x[this._idx(-1,f)]=x[this._idx(0,f-1)],x[this._idx(f,f)]=x[this._idx(f-1,f-1)]}const C=u==="terrarium"?ZO:KO;for(let M=0;M<x.length;++M){const $=4*M;this.floatView[M]=C(this.pixels[$],this.pixels[$+1],this.pixels[$+2])}this._timestamp=Gt.now()}_buildQuadTree(){this._tree=new rC(this)}get(r,s,u=!1){u&&(r=fr(r,-1,this.dim),s=fr(s,-1,this.dim));const g=this._idx(r,s);return this.floatView[g]}set(r,s,u){const g=this._idx(r,s),f=this.floatView[g];return this.floatView[g]=u,u-f}static getUnpackVector(r){return WO[r]}_idx(r,s){if(r<-1||r>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(r+1)}static pack(r,s){const u=[0,0,0,0],g=o1.getUnpackVector(s);let f=Math.floor((r+g[3])/g[2]);return u[2]=f%256,f=Math.floor(f/256),u[1]=f%256,f=Math.floor(f/256),u[0]=f,u}getPixels(){return new uf({width:this.stride,height:this.stride},this.pixels)}backfillBorder(r,s,u){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let g=s*this.dim,f=s*this.dim+this.dim,x=u*this.dim,C=u*this.dim+this.dim;switch(s){case-1:g=f-1;break;case 1:f=g+1}switch(u){case-1:x=C-1;break;case 1:C=x+1}const M=-s*this.dim,$=-u*this.dim;for(let T=x;T<C;T++)for(let k=g;k<f;k++){const I=4*this._idx(k,T),P=4*this._idx(k+M,T+$);this.pixels[I+0]=r.pixels[P+0],this.pixels[I+1]=r.pixels[P+1],this.pixels[I+2]=r.pixels[P+2],this.pixels[I+3]=r.pixels[P+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function XO(l,r,s){l===1?r.headerLength=s.readFixed32():l===2?r.x=s.readVarint():l===3?r.y=s.readVarint():l===4?r.z=s.readVarint():l===5&&r.layers.push(function(u,g){return u.readFields(t9,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},g)}(s,s.readVarint()+s.pos))}function YO(l,r,s){l===1?(r.delta_filter=function(u,g){return u.readFields(JO,{blockSize:0},g)}(s,s.readVarint()+s.pos),r.filter="delta_filter"):l===2?(s.readVarint(),r.filter="zigzag_filter"):l===3?(s.readVarint(),r.filter="bitshuffle_filter"):l===4&&(s.readVarint(),r.filter="byteshuffle_filter")}function JO(l,r,s){l===1&&(r.blockSize=s.readVarint())}function QO(l,r,s){l===1?(s.readVarint(),r.codec="gzip_data"):l===2?(s.readVarint(),r.codec="jpeg_image"):l===3?(s.readVarint(),r.codec="webp_image"):l===4&&(s.readVarint(),r.codec="png_image")}function e9(l,r,s){let u=0,g=0;l===1?r.firstByte=s.readFixed64():l===2?r.lastByte=s.readFixed64():l===3?r.filters.push(function(f,x){return f.readFields(YO,{},x)}(s,s.readVarint()+s.pos)):l===4?r.codec=function(f,x){return f.readFields(QO,{},x)}(s,s.readVarint()+s.pos):l===5?g=s.readFloat():l===6?u=s.readFloat():l===7?r.bands.push(s.readString()):l===8?r.offset=s.readDouble():l===9&&(r.scale=s.readDouble()),r.offset===0&&(r.offset=g),r.scale===0&&(r.scale=u)}function t9(l,r,s){l===1?r.version=s.readVarint():l===2?r.name=s.readString():l===3?r.units=s.readString():l===4?r.tileSize=s.readVarint():l===5?r.buffer=s.readVarint():l===6?r.pixelFormat=s.readVarint():l===7&&r.dataIndex.push(function(u,g){return u.readFields(e9,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},g)}(s,s.readVarint()+s.pos))}function r9(l,r,s){if(l===2)(function(u,g,f){u.readFields(n9,f,g)})(s,s.readVarint()+s.pos,r);else if(l===3)throw new Error("Not implemented")}function n9(l,r,s){if(l===1){let u=0;const g=s.readVarint()+s.pos;for(;s.pos<g;)r[u++]=s.readVarint()}}function a9(l,r){if(r.length!==4)throw new Error(`Expected data of dimension 4 but got ${r.length}.`);let s=r[3];for(let u=2;u>=1;u--){const g=u===1?1:0,f=u===2?1:0;for(let x=0;x<r[0];x++){const C=r[1]*x;for(let M=g;M<r[1];M++){const $=r[2]*(M+C);for(let T=f;T<r[2];T++){const k=r[3]*(T+$);for(let I=0;I<r[3];I++){const P=k+I;l[P]+=l[P-s]}}}}s*=r[u]}return l}function i9(l){for(let r=0,s=l.length;r<s;r++)l[r]=l[r]>>>1^-(1&l[r]);return l}function s9(l,r){switch(r){case"uint32":return l;case"uint16":for(let s=0;s<l.length;s+=2){const u=l[s],g=l[s+1];l[s]=(240&u)>>4|(61440&u)>>8|(240&g)<<4|61440&g,l[s+1]=15&u|(3840&u)>>4|(15&g)<<8|(3840&g)<<4}return l;case"uint8":for(let s=0;s<l.length;s+=4){const u=l[s],g=l[s+1],f=l[s+2],x=l[s+3];l[s+0]=(192&u)>>6|(192&g)>>4|(192&f)>>2|192&x,l[s+1]=(48&u)>>4|(48&g)>>2|48&f|(48&x)<<2,l[s+2]=(12&u)>>2|12&g|(12&f)<<2|(12&x)<<4,l[s+3]=3&u|(3&g)<<2|(3&f)<<4|(3&x)<<6}return l;default:throw new Error(`Invalid pixel format, "${r}"`)}}Tr(o1,"DEMData"),Tr(rC,"DemMinMaxQuadTree",{omit:["dem"]});var Tc=Uint8Array,pv=Uint16Array,o9=Int32Array,aC=new Tc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),iC=new Tc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l9=new Tc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sC=function(l,r){for(var s=new pv(31),u=0;u<31;++u)s[u]=r+=1<<l[u-1];var g=new o9(s[30]);for(u=1;u<30;++u)for(var f=s[u];f<s[u+1];++f)g[f]=f-s[u]<<5|u;return{b:s,r:g}},oC=sC(aC,2),lC=oC.b,c9=oC.r;lC[28]=258,c9[258]=28;for(var u9=sC(iC,0).b,cC=new pv(32768),bi=0;bi<32768;++bi){var hy=(43690&bi)>>1|(21845&bi)<<1;cC[bi]=((65280&(hy=(61680&(hy=(52428&hy)>>2|(13107&hy)<<2))>>4|(3855&hy)<<4))>>8|(255&hy)<<8)>>1}var mv=function(l,r,s){for(var u=l.length,g=0,f=new pv(r);g<u;++g)l[g]&&++f[l[g]-1];var x,C=new pv(r);for(g=1;g<r;++g)C[g]=C[g-1]+f[g-1]<<1;x=new pv(1<<r);var M=15-r;for(g=0;g<u;++g)if(l[g])for(var $=g<<4|l[g],T=r-l[g],k=C[l[g]-1]++<<T,I=k|(1<<T)-1;k<=I;++k)x[cC[k]>>M]=$;return x},gv=new Tc(288);for(bi=0;bi<144;++bi)gv[bi]=8;for(bi=144;bi<256;++bi)gv[bi]=9;for(bi=256;bi<280;++bi)gv[bi]=7;for(bi=280;bi<288;++bi)gv[bi]=8;var uC=new Tc(32);for(bi=0;bi<32;++bi)uC[bi]=5;var d9=mv(gv,9),h9=mv(uC,5),a3=function(l){for(var r=l[0],s=1;s<l.length;++s)l[s]>r&&(r=l[s]);return r},ud=function(l,r,s){var u=r/8|0;return(l[u]|l[u+1]<<8)>>(7&r)&s},i3=function(l,r){var s=r/8|0;return(l[s]|l[s+1]<<8|l[s+2]<<16)>>(7&r)},f9=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],dd=function(l,r,s){var u=new Error(r||f9[l]);if(u.code=l,Error.captureStackTrace&&Error.captureStackTrace(u,dd),!s)throw u;return u},p9=new Tc(0),m9=typeof TextDecoder<"u"&&new TextDecoder;try{m9.decode(p9,{stream:!0})}catch{}const g9={gzip_data:"gzip"};class cu extends Error{constructor(r){super(r),this.name="MRTError"}}const y9={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},dC={uint32:1,uint16:2,uint8:4},x9={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let s3;class o3{constructor(r=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=r}getLayer(r){const s=this.layers[r];if(!s)throw new cu(`Layer '${r}' not found`);return s}getHeaderLength(r){const s=new Uint8Array(r),u=new DataView(r);if(s[0]!==13)throw new cu("File is not a valid MRT.");return u.getUint32(1,!0)}parseHeader(r){const s=new Uint8Array(r),u=this.getHeaderLength(r);if(s.length<u)throw new cu(`Expected header with length >= ${u} but got buffer of length ${s.length}`);const g=function(f,x){return f.readFields(XO,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new s3(s.subarray(0,u)));if(!isNaN(this.x)&&(this.x!==g.x||this.y!==g.y||this.z!==g.z))throw new cu(`Invalid attempt to parse header ${g.z}/${g.x}/${g.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=g.x,this.y=g.y,this.z=g.z;for(const f of g.layers)this.layers[f.name]=new v9(f,{cacheSize:this._cacheSize});return this}createDecodingTask(r){const s=[],u=this.getLayer(r.layerName);for(let g of r.blockIndices){const f=u.dataIndex[g],x=f.firstByte-r.firstByte,C=f.lastByte-r.firstByte;if(u._blocksInProgress.has(g))continue;const M={layerName:u.name,firstByte:x,lastByte:C,pixelFormat:u.pixelFormat,blockIndex:g,blockShape:[f.bands.length].concat(u.bandShape),buffer:u.buffer,codec:f.codec.codec,filters:f.filters.map($=>$.filter)};u._blocksInProgress.add(g),s.push(M)}return new hC(s,()=>{s.forEach(g=>u._blocksInProgress.delete(g.blockIndex))},(g,f)=>{if(s.forEach(x=>u._blocksInProgress.delete(x.blockIndex)),g)throw g;f.forEach(x=>{this.getLayer(x.layerName).processDecodedData(x)})})}}class v9{constructor({version:r,name:s,units:u,tileSize:g,pixelFormat:f,buffer:x,dataIndex:C},M){if(this.version=r,this.version!==1)throw new cu(`Cannot parse raster layer encoded with MRT version ${r}`);this.name=s,this.units=u,this.tileSize=g,this.buffer=x,this.pixelFormat=y9[f],this.dataIndex=C,this.bandShape=[g+2*x,g+2*x,dC[this.pixelFormat]],this._decodedBlocks=new r3(M?M.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return dC[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:r})=>r).flat()}processDecodedData(r){const s=r.blockIndex.toString();this._decodedBlocks.get(s)||this._decodedBlocks.put(s,r.data)}getBlockForBand(r){let s=0;switch(typeof r){case"string":for(const[u,g]of this.dataIndex.entries()){for(const[f,x]of g.bands.entries())if(x===r)return{bandIndex:s+f,blockIndex:u,blockBandIndex:f};s+=g.bands.length}break;case"number":for(const[u,g]of this.dataIndex.entries()){if(r>=s&&r<s+g.bands.length)return{bandIndex:r,blockIndex:u,blockBandIndex:r-s};s+=g.bands.length}break;default:throw new cu(`Invalid band \`${JSON.stringify(r)}\`. Expected string or integer.`)}throw new cu(`Band not found: ${JSON.stringify(r)}`)}getDataRange(r){let s=1/0,u=-1/0;const g=[],f=new Set;for(const x of r){const{blockIndex:C}=this.getBlockForBand(x);if(C<0)throw new cu(`Invalid band: ${JSON.stringify(x)}`);const M=this.dataIndex[C];g.includes(C)||g.push(C),f.add(C),s=Math.min(s,M.firstByte),u=Math.max(u,M.lastByte)}if(f.size>this.cacheSize)throw new cu(`Number of blocks to decode (${f.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:s,lastByte:u,blockIndices:g}}hasBand(r){const{blockIndex:s}=this.getBlockForBand(r);return s>=0}hasDataForBand(r){const{blockIndex:s}=this.getBlockForBand(r);return s>=0&&!!this._decodedBlocks.get(s.toString())}getBandView(r){const{blockIndex:s,blockBandIndex:u}=this.getBlockForBand(r),g=this._decodedBlocks.get(s.toString());if(!g)throw new cu(`Data for band ${JSON.stringify(r)} of layer "${this.name}" not decoded.`);const f=this.dataIndex[s],x=this.bandShape.reduce(($,T)=>$*T,1),C=u*x,M=g.subarray(C,C+x);return{data:M,bytes:new Uint8Array(M.buffer).subarray(M.byteOffset,M.byteOffset+M.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:f.offset,scale:f.scale}}}o3.setPbf=function(l){s3=l};class hC{constructor(r,s,u){this.tasks=r,this._onCancel=s,this._onComplete=u,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(r,s){this._finalized||(this._onComplete(r,s),this._finalized=!0)}}o3.performDecoding=function(l,r){const s=new Uint8Array(l);return Promise.all(r.tasks.map(u=>{const{layerName:g,firstByte:f,lastByte:x,pixelFormat:C,blockShape:M,blockIndex:$,filters:T,codec:k}=u,I=s.subarray(f,x+1),P=new Uint32Array(M[0]*M[1]*M[2]);let R;if(k!=="gzip_data")throw new cu(`Unhandled codec: ${k}`);return R=function(j,W){if(!globalThis.DecompressionStream&&W==="gzip_data")return Promise.resolve(((J=function(_e){_e[0]==31&&_e[1]==139&&_e[2]==8||dd(6,"invalid gzip data");var je=_e[3],Ne=10;4&je&&(Ne+=2+(_e[10]|_e[11]<<8));for(var Be=(je>>3&1)+(je>>4&1);Be>0;Be-=!_e[Ne++]);return Ne+(2&je)}(ie=j))+8>ie.length&&dd(6,"invalid gzip data"),function(_e,je,Ne,Be){var Qe=_e.length;if(!Qe||je.f&&!je.l)return Ne||new Tc(0);var Ue=!Ne,rt=Ue||je.i!=2,st=je.i;Ue&&(Ne=new Tc(3*Qe));var it,ct,gt=function(Sf){var im=Ne.length;if(Sf>im){var sm=new Tc(Math.max(2*im,Sf));sm.set(Ne),Ne=sm}},vt=je.f||0,ht=je.p||0,Rt=je.b||0,Yt=je.l,Lt=je.d,ar=je.m,nr=je.n,gr=8*Qe;do{if(!Yt){vt=ud(_e,ht,1);var jt=ud(_e,ht+1,3);if(ht+=3,!jt){var Mr=_e[(tn=4+((ht+7)/8|0))-4]|_e[tn-3]<<8,sr=tn+Mr;if(sr>Qe){st&&dd(0);break}rt&&gt(Rt+Mr),Ne.set(_e.subarray(tn,sr),Rt),je.b=Rt+=Mr,je.p=ht=8*sr,je.f=vt;continue}if(jt==1)Yt=d9,Lt=h9,ar=9,nr=5;else if(jt==2){var Cr=ud(_e,ht,31)+257,Vr=ud(_e,ht+10,15)+4,on=Cr+ud(_e,ht+5,31)+1;ht+=14;for(var fn=new Tc(on),wn=new Tc(19),pn=0;pn<Vr;++pn)wn[l9[pn]]=ud(_e,ht+3*pn,7);ht+=3*Vr;var Pn=a3(wn),_a=(1<<Pn)-1,ca=mv(wn,Pn);for(pn=0;pn<on;){var tn,ua=ca[ud(_e,ht,_a)];if(ht+=15&ua,(tn=ua>>4)<16)fn[pn++]=tn;else{var sa=0,ba=0;for(tn==16?(ba=3+ud(_e,ht,3),ht+=2,sa=fn[pn-1]):tn==17?(ba=3+ud(_e,ht,7),ht+=3):tn==18&&(ba=11+ud(_e,ht,127),ht+=7);ba--;)fn[pn++]=sa}}var wi=fn.subarray(0,Cr),Si=fn.subarray(Cr);ar=a3(wi),nr=a3(Si),Yt=mv(wi,ar),Lt=mv(Si,nr)}else dd(1);if(ht>gr){st&&dd(0);break}}rt&&gt(Rt+131072);for(var ci=(1<<ar)-1,Fo=(1<<nr)-1,Ra=ht;;Ra=ht){var $a=(sa=Yt[i3(_e,ht)&ci])>>4;if((ht+=15&sa)>gr){st&&dd(0);break}if(sa||dd(2),$a<256)Ne[Rt++]=$a;else{if($a==256){Ra=ht,Yt=null;break}var go=$a-254;$a>264&&(go=ud(_e,ht,(1<<(Ui=aC[pn=$a-257]))-1)+lC[pn],ht+=Ui);var Ti=Lt[i3(_e,ht)&Fo],ul=Ti>>4;if(Ti||dd(3),ht+=15&Ti,Si=u9[ul],ul>3){var Ui=iC[ul];Si+=i3(_e,ht)&(1<<Ui)-1,ht+=Ui}if(ht>gr){st&&dd(0);break}rt&&gt(Rt+131072);var uh=Rt+go;if(Rt<Si){var nm=0-Si,am=Math.min(Si,uh);for(nm+Rt<0&&dd(3);Rt<am;++Rt)Ne[Rt]=(void 0)[nm+Rt]}for(;Rt<uh;++Rt)Ne[Rt]=Ne[Rt-Si]}}je.l=Yt,je.p=Ra,je.b=Rt,je.f=vt,Yt&&(vt=1,je.m=ar,je.d=Lt,je.n=nr)}while(!vt);return Rt!=Ne.length&&Ue?(it=Ne,((ct=Rt)==null||ct>it.length)&&(ct=it.length),new Tc(it.subarray(0,ct))):Ne.subarray(0,Rt)}(ie.subarray(J,-8),{i:2},new Tc(((K=ie)[(ae=K.length)-4]|K[ae-3]<<8|K[ae-2]<<16|K[ae-1]<<24)>>>0))));var K,ae,ie,J;const le=g9[W];if(!le)throw new Error(`Unhandled codec: ${W}`);const fe=new globalThis.DecompressionStream(le);return new Response(new Blob([j]).stream().pipeThrough(fe)).arrayBuffer().then(_e=>new Uint8Array(_e))}(I,k).then(j=>(function(W,K){W.readFields(r9,K)}(new s3(j),P),new x9[C](P.buffer))),R.then(j=>{for(let W=T.length-1;W>=0;W--)switch(T[W]){case"delta_filter":a9(j,M);break;case"zigzag_filter":i9(j);break;case"bitshuffle_filter":s9(j,C);break;default:throw new cu(`Unhandled filter "${T[W]}"`)}return{layerName:g,blockIndex:$,data:j}}).catch(j=>{throw j})}))},Tr(hC,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});let yv,l3,hd,fy,c3,py=null;function fC(){return ya()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:l3||Ve.DRACO_URL}function pC(){if(ya()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(fy)return fy;const l=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return fy=WebAssembly.validate(l)?Ve.MESHOPT_SIMD_URL:Ve.MESHOPT_URL,fy}const l1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},_9={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},xv={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function mC(l,r,s){const u=s.json.bufferViews.length,g=s.buffers.length;r.bufferView=u,s.json.bufferViews[u]={buffer:g,byteLength:l.byteLength},s.buffers[g]=l}const u3="KHR_draco_mesh_compression";function b9(l,r){const s=l.extensions&&l.extensions[u3];if(!s)return;const u=new hd.Decoder,g=vC(r,s.bufferView),f=new hd.Mesh;if(!u.DecodeArrayToMesh(g,g.byteLength,f))throw new Error("Failed to decode Draco mesh");const x=r.json.accessors[l.indices],C=l1[x.componentType],M=x.count*C.BYTES_PER_ELEMENT,$=hd._malloc(M);C===Uint16Array?u.GetTrianglesUInt16Array(f,M,$):u.GetTrianglesUInt32Array(f,M,$),mC(hd.memory.buffer.slice($,$+M),x,r),hd._free($);for(const T of Object.keys(s.attributes)){const k=u.GetAttributeByUniqueId(f,s.attributes[T]),I=r.json.accessors[l.attributes[T]],P=_9[I.componentType],R=I.count*xv[I.type]*l1[I.componentType].BYTES_PER_ELEMENT,j=hd._malloc(R);u.GetAttributeDataArrayForAllPoints(f,k,hd[P],R,j),mC(hd.memory.buffer.slice(j,j+R),I,r),hd._free(j)}u.destroy(),f.destroy(),delete l.extensions[u3]}const c1="EXT_meshopt_compression";function w9(l,r){if(!l.extensions||!l.extensions[c1])return;const s=l.extensions[c1],u=new Uint8Array(r.buffers[s.buffer],s.byteOffset||0,s.byteLength||0),g=new Uint8Array(s.count*s.byteStride);c3.decodeGltfBuffer(g,s.count,s.byteStride,u,s.mode,s.filter),l.buffer=r.buffers.length,l.byteOffset=0,r.buffers[l.buffer]=g.buffer,delete l.extensions[c1]}const gC=1179937895,yC=new TextDecoder("utf8");function xC(l,r){return new URL(l,r).href}function S9(l,r,s,u){return fetch(xC(l.uri,u)).then(g=>g.arrayBuffer()).then(g=>{r.buffers[s]=g})}function vC(l,r){const s=l.json.bufferViews[r];return new Uint8Array(l.buffers[s.buffer],s.byteOffset||0,s.byteLength)}function T9(l,r,s,u){if(l.uri){const g=xC(l.uri,u);return fetch(g).then(f=>f.blob()).then(f=>createImageBitmap(f)).then(f=>{r.images[s]=f})}if(l.bufferView!==void 0){const g=vC(r,l.bufferView),f=new Blob([g],{type:l.mimeType});return createImageBitmap(f).then(x=>{r.images[s]=x})}}function _C(l,r=0,s){const u={json:null,images:[],buffers:[]};if(new Uint32Array(l,r,1)[0]===gC){const T=new Uint32Array(l,r);let k=2;const I=(T[k++]>>2)-3,P=T[k++]>>2;if(k++,u.json=JSON.parse(yC.decode(T.subarray(k,k+P))),k+=P,k<I){const R=T[k++];k++;const j=r+(k<<2);u.buffers[0]=l.slice(j,j+R)}}else u.json=JSON.parse(yC.decode(new Uint8Array(l,r)));const{buffers:g,images:f,meshes:x,extensionsUsed:C,bufferViews:M}=u.json;let $=Promise.resolve();if(g){const T=[];for(let k=0;k<g.length;k++){const I=g[k];I.uri?T.push(S9(I,u,k,s)):u.buffers[k]||(u.buffers[k]=null)}$=Promise.all(T)}return $.then(()=>{const T=[],k=C&&C.includes(u3),I=C&&C.includes(c1);if(k&&T.push(function(){if(!hd)return yv??(yv=function(P){let R,j=null;function W(){R=new Uint8Array(j.buffer)}function K(){throw new Error("Unexpected Draco error.")}const ae={a:{a:K,d:function(ie,J,le){return R.copyWithin(ie,J,J+le)},c:function(ie){const J=R.length,le=Math.max(ie>>>0,Math.ceil(1.2*J)),fe=Math.ceil((le-J)/65536);try{return j.grow(fe),W(),!0}catch{return!1}},b:K}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(P,ae):P.then(ie=>ie.arrayBuffer()).then(ie=>WebAssembly.instantiate(ie,ae))).then(ie=>{const{Rb:J,Qb:le,P:fe,T:_e,X:je,Ja:Ne,La:Be,Qa:Qe,Va:Ue,Wa:rt,eb:st,jb:it,f:ct,e:gt,yb:vt,zb:ht,Ab:Rt,Bb:Yt,Db:Lt,Gb:ar}=ie.instance.exports;j=gt;const nr=(()=>{let gr=0,jt=0,Mr=0,sr=0;return Cr=>{Mr&&(J(sr),J(gr),jt+=Mr,Mr=gr=0),gr||(jt+=128,gr=le(jt));const Vr=Cr.length+7&-8;let on=gr;Vr>=jt&&(Mr=Vr,on=sr=le(Vr));for(let fn=0;fn<Cr.length;fn++)R[on+fn]=Cr[fn];return on}})();return W(),ct(),{memory:gt,_free:J,_malloc:le,Mesh:class{constructor(){this.ptr=fe()}destroy(){_e(this.ptr)}},Decoder:class{constructor(){this.ptr=Ne()}destroy(){it(this.ptr)}DecodeArrayToMesh(gr,jt,Mr){const sr=nr(gr),Cr=Be(this.ptr,sr,jt,Mr.ptr);return!!je(Cr)}GetAttributeByUniqueId(gr,jt){return{ptr:Qe(this.ptr,gr.ptr,jt)}}GetTrianglesUInt16Array(gr,jt,Mr){Ue(this.ptr,gr.ptr,jt,Mr)}GetTrianglesUInt32Array(gr,jt,Mr){rt(this.ptr,gr.ptr,jt,Mr)}GetAttributeDataArrayForAllPoints(gr,jt,Mr,sr,Cr){st(this.ptr,gr.ptr,jt.ptr,Mr,sr,Cr)}},DT_INT8:vt(),DT_UINT8:ht(),DT_INT16:Rt(),DT_UINT16:Yt(),DT_UINT32:Lt(),DT_FLOAT32:ar()}})}(fetch(fC())),yv.then(P=>{hd=P,yv=void 0}))}()),I&&T.push(function(){if(c3)return;const P=function(R){let j;const W=WebAssembly.instantiateStreaming(R,{}).then(ie=>{j=ie.instance,j.exports.__wasm_call_ctors()}),K={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ae={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:W,supported:!0,decodeGltfBuffer(ie,J,le,fe,_e,je){(function(Ne,Be,Qe,Ue,rt,st,it){const ct=Ne.exports.sbrk,gt=Ue+3&-4,vt=ct(gt*rt),ht=ct(st.length),Rt=new Uint8Array(Ne.exports.memory.buffer);Rt.set(st,ht);const Yt=Be(vt,Ue,rt,ht,st.length);if(Yt===0&&it&&it(vt,gt,rt),Qe.set(Rt.subarray(vt,vt+Ue*rt)),ct(vt-ct(0)),Yt!==0)throw new Error(`Malformed buffer data: ${Yt}`)})(j,j.exports[ae[_e]],ie,J,le,fe,j.exports[K[je]])}}}(fetch(pC()));return P.ready.then(()=>{c3=P})}()),f)for(let P=0;P<f.length;P++)T.push(T9(f[P],u,P,s));return(T.length?Promise.all(T):Promise.resolve()).then(()=>{if(k&&x)for(const{primitives:P}of x)for(const R of P)b9(R,u);if(I&&x&&M)for(const P of M)w9(P,u);return u})})}function Pg(l,r){const s=l.json.bufferViews[r.bufferView],u=l1[r.componentType];return new u(l.buffers[s.buffer],(r.byteOffset||0)+(s.byteOffset||0),r.count*(s.byteStride&&s.byteStride!==xv[r.type]*u.BYTES_PER_ELEMENT?s.byteStride/u.BYTES_PER_ELEMENT:xv[r.type]))}function d3(l,r,s,u){const g=l1[r.componentType],f=function(T){switch(T){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(g),x=l.json.bufferViews[r.bufferView],C=x.byteStride?x.byteStride/g.BYTES_PER_ELEMENT:xv[r.type],M=s.float32,$=M.length/s.capacity;for(let T=0,k=0;T<r.count*C;T+=C,k+=$)for(let I=0;I<$;I++)M[k+I]=u[T+I]*f;s._trim()}function E9(l,r,s){const u=l.indices,g=l.attributes,f={};f.indexArray=new Fi;const x=r.json.accessors[u],C=x.count/3;f.indexArray.reserve(C);const M=Pg(r,x);for(let I=0;I<C;I++)f.indexArray.emplaceBack(M[3*I],M[3*I+1],M[3*I+2]);f.indexArray._trim(),f.vertexArray=new dc;const $=r.json.accessors[g.POSITION];f.vertexArray.reserve($.count);const T=Pg(r,$);for(let I=0;I<$.count;I++)f.vertexArray.emplaceBack(T[3*I],T[3*I+1],T[3*I+2]);if(f.vertexArray._trim(),f.aabb=new jr($.min,$.max),f.centroid=function(I,P){const R=[0,0,0],j=I.length;if(j>0){for(let W=0;W<j;W++){const K=3*I[W];R[0]+=P[K],R[1]+=P[K+1],R[2]+=P[K+2]}R[0]/=j,R[1]/=j,R[2]/=j}return R}(M,T),g.COLOR_0!==void 0){const I=r.json.accessors[g.COLOR_0],P=xv[I.type],R=Pg(r,I);f.colorArray=P===3?new dc:new uc,f.colorArray.resize(I.count),d3(r,I,f.colorArray,R)}if(g.NORMAL!==void 0){f.normalArray=new dc;const I=r.json.accessors[g.NORMAL];f.normalArray.resize(I.count);const P=Pg(r,I);d3(r,I,f.normalArray,P)}if(g.TEXCOORD_0!==void 0&&s.length>0){f.texcoordArray=new mc;const I=r.json.accessors[g.TEXCOORD_0];f.texcoordArray.resize(I.count);const P=Pg(r,I);d3(r,I,f.texcoordArray,P)}if(g._FEATURE_ID_RGBA4444!==void 0){const I=r.json.accessors[g._FEATURE_ID_RGBA4444];r.json.extensionsUsed&&r.json.extensionsUsed.includes("EXT_meshopt_compression")&&(f.featureData=Pg(r,I))}g._FEATURE_RGBA4444!==void 0&&(f.featureData=new Uint32Array(Pg(r,r.json.accessors[g._FEATURE_RGBA4444]).buffer));const k=l.material;return f.material=function(I,P){const{emissiveFactor:R=[0,0,0],alphaMode:j="OPAQUE",alphaCutoff:W=.5,normalTexture:K,occlusionTexture:ae,emissiveTexture:ie,doubleSided:J}=I,{baseColorFactor:le=[1,1,1,1],metallicFactor:fe=1,roughnessFactor:_e=1,baseColorTexture:je,metallicRoughnessTexture:Ne}=I.pbrMetallicRoughness||{},Be=ae?P[ae.index]:void 0;if(ae&&ae.extensions&&ae.extensions.KHR_texture_transform&&Be){const Qe=ae.extensions.KHR_texture_transform;Be.offsetScale=[Qe.offset[0],Qe.offset[1],Qe.scale[0],Qe.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new In(...le),metallicFactor:fe,roughnessFactor:_e,baseColorTexture:je?P[je.index]:void 0,metallicRoughnessTexture:Ne?P[Ne.index]:void 0},doubleSided:J,emissiveFactor:R,alphaMode:j,alphaCutoff:W,normalTexture:K?P[K.index]:void 0,occlusionTexture:Be,emissionTexture:ie?P[ie.index]:void 0,defined:I.defined===void 0}}(k!==void 0?r.json.materials[k]:{defined:!1},s),f}function bC(l,r,s){const{matrix:u,rotation:g,translation:f,scale:x,mesh:C,extras:M,children:$}=l,T={};if(T.matrix=u||De.mat4.fromRotationTranslationScale([],g||[0,0,0,1],f||[0,0,0],x||[1,1,1]),C!==void 0){T.meshes=s[C];const k=T.anchor=[0,0];for(const I of T.meshes){const{min:P,max:R}=I.aabb;k[0]+=P[0]+R[0],k[1]+=P[1]+R[1]}k[0]=Math.floor(k[0]/T.meshes.length/2),k[1]=Math.floor(k[1]/T.meshes.length/2)}if(M&&(M.id&&(T.id=M.id),M.lights&&(T.lights=function(k){if(!k.length)return[];const I=function(K){const ae=atob(K),ie=new Uint8Array(ae.length);for(let J=0;J<ae.length;J++)ie[J]=ae.codePointAt(J);return ie}(k),P=[],R=I.length/24,j=new Uint16Array(I.buffer),W=new Float32Array(I.buffer);for(let K=0;K<R;K++){const ae=j[2*K*6]/30,ie=j[2*K*6+1]/30,J=j[2*K*6+10]/100,le=W[6*K+1],fe=W[6*K+2],_e=W[6*K+3],je=W[6*K+4],Ne=_e-le,Be=je-fe,Qe=Math.hypot(Ne,Be);P.push({pos:[le+.5*Ne,fe+.5*Be,ie],normal:[Be/Qe,-Ne/Qe,0],width:Qe,height:ae,depth:J,points:[le,fe,_e,je]})}return P}(M.lights))),$){const k=[];for(const I of $)k.push(bC(r.json.nodes[I],r,s));T.children=k}return T}function C9(l){if(l.vertices.length===0||l.indices.length===0)return null;const r=new O0(l.vertices,l.indices,8,256),[s,u]=[r.min.clone(),r.max.clone()];return{vertices:l.vertices,indices:l.indices,grid:r,min:s,max:u}}function D9(l){if(!l.extras||!l.extras.ground)return null;const r=l.extras.ground;if(!r||!Array.isArray(r)||r.length===0)return null;const s=r[0];if(!s||!Array.isArray(s)||s.length===0)return null;const u=[];for(const x of s){if(!Array.isArray(x)||x.length!==2)continue;const C=x[0],M=x[1];typeof C=="number"&&typeof M=="number"&&u.push(new dt(C,M))}if(u.length<3)return null;u.length>1&&u[u.length-1].equals(u[0])&&u.pop();let g=0;for(let x=0;x<u.length;x++){const C=u[x],M=u[(x+1)%u.length],$=u[(x+2)%u.length];g+=(C.x-M.x)*($.y-M.y)-($.x-M.x)*(C.y-M.y)}g>0&&u.reverse();const f=df(u.flatMap(x=>[x.x,x.y]),[]);return f.length===0?null:{vertices:u,indices:f}}function P9(l,r){const s=[],u=[];let g=0;const f=[];for(const x of l){g=s.length;const C=x.vertexArray.float32,M=x.indexArray.uint16;for(let $=0;$<x.vertexArray.length;$++)f[0]=C[3*$+0],f[1]=C[3*$+1],f[2]=C[3*$+2],De.vec3.transformMat4(f,f,r),s.push(new dt(f[0],f[1]));for(let $=0;$<3*x.indexArray.length;$++)u.push(M[$]+g)}if(u.length%3!=0)return null;for(let x=0;x<u.length;x+=3){const C=s[u[x+0]],M=s[u[x+1]],$=s[u[x+2]];(C.x-M.x)*($.y-M.y)-($.x-M.x)*(C.y-M.y)>0&&([u[x+1],u[x+2]]=[u[x+2],u[x+1]])}return{vertices:s,indices:u}}function wC(l){const r=function(M,$){const T=[],k=WebGL2RenderingContext;if(M.json.textures)for(const I of M.json.textures){const P={magFilter:k.LINEAR,minFilter:k.NEAREST,wrapS:k.REPEAT,wrapT:k.REPEAT};I.sampler!==void 0&&Object.assign(P,M.json.samplers[I.sampler]),T.push({image:$[I.source],sampler:P,uploaded:!1})}return T}(l,l.images),s=function(M,$){const T=[];for(const k of M.json.meshes){const I=[];for(const P of k.primitives)I.push(E9(P,M,$));T.push(I)}return T}(l,r),{scenes:u,scene:g,nodes:f}=l.json,x=u?u[g||0].nodes:f,C=[];for(const M of x)C.push(bC(f[M],l,s));return function(M,$,T){const k={},I=new Set;for(let P=0;P<M.length;P++){const R=T[$[P]];if(!R.extras)continue;const j=R.extras["mapbox:footprint:version"],W=R.extras["mapbox:footprint:id"];(j||W)&&I.add(P),j==="1.0.0"&&W&&(k[W]=P)}for(let P=0;P<M.length;P++){if(I.has(P))continue;const R=M[P],j=T[$[P]];if(!j.extras)continue;let W=null;R.id in k&&(W=P9(M[k[R.id]].meshes,R.matrix)),W||(W=D9(j)),W&&(R.footprint=C9(W))}if(I.size>0){const P=Array.from(I.values()).sort((R,j)=>R-j);for(let R=P.length-1;R>=0;R--)M.splice(P[R],1)}}(C,x,l.json.nodes),C}function M9(l){l.heightmap=new Float32Array(4096),l.heightmap.fill(-1);const r=l.vertexArray.float32,s=l.aabb.min[0]-1,u=l.aabb.min[1]-1,g=Eg/(l.aabb.max[0]-s+2),f=Eg/(l.aabb.max[1]-u+2);for(let x=0;x<r.length;x+=3){const C=r[x+2],M=(r[x+0]-s)*g|0,$=(r[x+1]-u)*f|0;C>l.heightmap[$*Eg+M]&&(l.heightmap[$*Eg+M]=C)}}function A9(l,r){const s={};s.indexArray=new Fi,s.indexArray.reserve(4*l.length),s.vertexArray=new dc,s.vertexArray.reserve(10*l.length),s.colorArray=new uc,s.vertexArray.reserve(10*l.length);let u=0;for(const x of l){const C=Math.min(10,Math.max(4,1.3*x.height))*r,M=[-x.normal[1],x.normal[0],0],$=Math.min(.29,.1*x.width/x.depth),T=x.width-2*x.depth*r*($+.01),k=De.vec3.scaleAndAdd([],x.pos,M,T/2),I=De.vec3.scaleAndAdd([],x.pos,M,-T/2),P=[k[0],k[1],k[2]+x.height],R=[I[0],I[1],I[2]+x.height],j=De.vec3.scaleAndAdd([],x.normal,M,$);De.vec3.scale(j,j,C);const W=De.vec3.scaleAndAdd([],x.normal,M,-$);De.vec3.scale(W,W,C),De.vec3.add(j,k,j),De.vec3.add(W,I,W),k[2]+=.1,I[2]+=.1,s.vertexArray.emplaceBack(j[0],j[1],j[2]),s.vertexArray.emplaceBack(W[0],W[1],W[2]),s.vertexArray.emplaceBack(k[0],k[1],k[2]),s.vertexArray.emplaceBack(I[0],I[1],I[2]),s.vertexArray.emplaceBack(P[0],P[1],P[2]),s.vertexArray.emplaceBack(R[0],R[1],R[2]),s.vertexArray.emplaceBack(k[0],k[1],k[2]),s.vertexArray.emplaceBack(I[0],I[1],I[2]),s.vertexArray.emplaceBack(j[0],j[1],j[2]),s.vertexArray.emplaceBack(W[0],W[1],W[2]);const K=T/C/2;s.colorArray.emplaceBack(-K-$,-1,K,.8),s.colorArray.emplaceBack(K+$,-1,K,.8),s.colorArray.emplaceBack(-K,0,K,1.3),s.colorArray.emplaceBack(K,0,K,1.3),s.colorArray.emplaceBack(K+$,-.8,K,.7),s.colorArray.emplaceBack(K+$,-.8,K,.7),s.colorArray.emplaceBack(0,0,K,1.3),s.colorArray.emplaceBack(0,0,K,1.3),s.colorArray.emplaceBack(K+$,-1.2,K,.8),s.colorArray.emplaceBack(K+$,-1.2,K,.8),s.indexArray.emplaceBack(6+u,4+u,8+u),s.indexArray.emplaceBack(7+u,9+u,5+u),s.indexArray.emplaceBack(0+u,1+u,2+u),s.indexArray.emplaceBack(1+u,3+u,2+u),u+=10}const g={defined:!0,emissiveFactor:[0,0,0]},f={};return f.baseColorFactor=In.white,g.pbrMetallicRoughness=f,s.material=g,s.aabb=new jr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),s}class SC{constructor(r){this._stringToNumber={},this._numberToString=[];for(let s=0;s<r.length;s++){const u=r[s];this._stringToNumber[u]=s,this._numberToString[s]=u}}encode(r){return this._stringToNumber[r]}decode(r){return this._numberToString[r]}}const k9=["id","tile","layer","source","sourceLayer","state"];class my{constructor(r,s,u,g,f){this.type="Feature",this._vectorTileFeature=r,this._z=s,this._x=u,this._y=g,this.properties=r.properties,this.id=f}clone(){const r=new my(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(r.state={...this.state}),this.layer&&(r.layer={...this.layer}),this.source&&(r.source=this.source),this.sourceLayer&&(r.sourceLayer=this.sourceLayer),r}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const s of k9)this[s]!==void 0&&(r[s]=this[s]);return r}}class TC{constructor(r,s){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new ic(lr,16,0),this.featureIndexArray=new eh,this.promoteId=s,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(r,s,u,g,f,x=0,C=0){const M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,g,f,x);const $=this.grid;for(let T=0;T<s.length;T++){const k=s[T],I=[1/0,1/0,-1/0,-1/0];for(let P=0;P<k.length;P++){const R=k[P];I[0]=Math.min(I[0],R.x),I[1]=Math.min(I[1],R.y),I[2]=Math.max(I[2],R.x),I[3]=Math.max(I[3],R.y)}C!==0&&(I[0]-=C,I[1]-=C,I[2]+=C,I[3]+=C),I[0]<lr&&I[1]<lr&&I[2]>=0&&I[3]>=0&&$.insert(M,I[0],I[1],I[2],I[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new iu.VectorTile(new wg(this.rawTileData)).layers,this.sourceLayerCoder=new SC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const r in this.vtLayers)this.vtFeatures[r]=[]}return this.vtLayers}query(r,s){const{tilespaceGeometry:u,transform:g,tileTransform:f,pixelPosMatrix:x,availableImages:C}=s;this.loadVTLayers(),this.serializedLayersCache.clear();const M=u.bufferedTilespaceBounds,$=this.grid.query(M.min.x,M.min.y,M.max.x,M.max.y,(P,R,j,W)=>at(u.bufferedTilespaceGeometry,P,R,j,W));$.sort(R9);let T=null;g.elevation&&$.length>0&&(T=ly.create(g.elevation,this.tileID));const k={};let I;for(let P=0;P<$.length;P++){const R=$[P];if(R===I)continue;I=R;const j=this.featureIndexArray.get(R);let W=null;this.is3DTile?this.loadMatchingModelFeature(k,j,r,u,g):this.loadMatchingFeature(k,j,r,C,(K,ae,ie,J=0)=>(W||(W=Z(K,this.tileID.canonical,f)),ae.queryIntersectsFeature(u,K,ie,W,this.z,g,x,T,J)))}return k}loadMatchingFeature(r,s,u,g,f){const{featureIndex:x,bucketIndex:C,sourceLayerIndex:M,layoutVertexArrayOffset:$}=s,T=this.bucketLayerIDs[C],k=u.layers,I=Object.keys(k);if(I.length&&!function(K,ae){for(let ie=0;ie<K.length;ie++)if(ae.indexOf(K[ie])>=0)return!0;return!1}(I,T))return;const P=u.sourceCache,R=this.sourceLayerCoder.decode(M),j=this.vtLayers[R].feature(x),W=this.getId(j,R);for(let K=0;K<T.length;K++){const ae=T[K];if(!k[ae])continue;const{styleLayer:ie,targets:J}=k[ae];let le={};W!==void 0&&(le=P.getFeatureState(ie.sourceLayer,W));const fe=!f||f(j,ie,le,$);if(!fe)continue;const _e=new my(j,this.z,this.x,this.y,W);_e.tile=this.tileID.canonical,_e.state=le;let je=this.serializedLayersCache.get(ae);je||(je=ie.serialize(),je.id=ae,this.serializedLayersCache.set(ae,je)),_e.source=je.source,_e.sourceLayer=je["source-layer"],_e.layer=Br({},je),_e.layer.paint=EC(je.paint,ie.paint,j,le,g),_e.layer.layout=EC(je.layout,ie.layout,j,le,g);let Ne=!1;for(const Be of J){this.updateFeatureProperties(_e,Be);const{filter:Qe}=Be;if(Qe){if(j.properties=_e.properties,Qe.needGeometry){const Ue=X(j,!0);if(!Qe.filter(new Cn(this.tileID.overscaledZ),Ue,this.tileID.canonical))continue}else if(!Qe.filter(new Cn(this.tileID.overscaledZ),j))continue}Ne=!0,Be.targetId&&this.addFeatureVariant(_e,Be)}Ne&&this.appendToResult(r,ae,x,_e,fe)}}loadMatchingModelFeature(r,s,u,g,f){const x=this.bucketLayerIDs[0][0],C=u.layers;if(!C[x])return;const{styleLayer:M,targets:$}=C[x];if(M.type!=="model")return;const T=g.tile,k=s.featureIndex,I=T.getBucket(M);if(!(I&&I instanceof e1))return;const P=function(je,Ne,Be,Qe){const Ue=je.getNodesInfo()[Ne];if(Ue.hiddenByReplacement||!Ue.node.meshes)return;let rt=Number.MAX_VALUE;const st=Ue.node,it=Be.tile,ct=Qe.calculatePosMatrix(it.tileID.toUnwrapped(),Qe.worldSize),gt=Ue.evaluatedScale;let vt=0;Qe.elevation&&st.elevation&&(vt=st.elevation*Qe.elevation.exaggeration()),De.mat4.translate(ct,ct,[(st.anchor?st.anchor[0]:0)*(gt[0]-1),(st.anchor?st.anchor[1]:0)*(gt[1]-1),vt]),De.mat4.scale(ct,ct,gt);const ht=Be.queryGeometry,Rt=ht.isPointQuery()?ht.screenBounds:ht.screenGeometry,Yt=function(ar){const nr=De.mat4.multiply([],ct,ar.matrix);De.mat4.multiply(nr,Qe.expandedFarZProjMatrix,nr);for(let gr=0;gr<ar.meshes.length;++gr){const jt=ar.meshes[gr];if(gr===ar.lightMeshIndex)continue;const Mr=EE(Rt,Qe,nr,jt.aabb);Mr!=null&&(rt=Math.min(Mr,rt))}if(ar.children)for(const gr of ar.children)Yt(gr)};if(Yt(st),rt===Number.MAX_VALUE)return;const Lt=new $n(0,0);return BE(it.tileID.canonical,Lt,Ue.node.anchor[0],Ue.node.anchor[1]),{intersectionZ:rt,position:Lt,feature:Ue.feature}}(I,k,g,f);if(!P)return;const{z:R,x:j,y:W}=T.tileID.canonical,{feature:K,intersectionZ:ae,position:ie}=P;let J={};K.id!==void 0&&(J=u.sourceCache.getFeatureState(M.sourceLayer,K.id));const le=new my({},R,j,W,K.id);le.tile=this.tileID.canonical,le.state=J,le.properties=K.properties,le.geometry={type:"Point",coordinates:[ie.lng,ie.lat]};let fe=this.serializedLayersCache.get(x);fe||(fe=M.serialize(),fe.id=x,this.serializedLayersCache.set(x,fe)),le.source=fe.source,le.sourceLayer=fe["source-layer"],le.layer=Br({},fe);let _e=!1;for(const je of $){this.updateFeatureProperties(le,je);const{filter:Ne}=je;if(Ne){if(K.properties=le.properties,Ne.needGeometry){if(!Ne.filter(new Cn(this.tileID.overscaledZ),K,this.tileID.canonical))continue}else if(!Ne.filter(new Cn(this.tileID.overscaledZ),K))continue}_e=!0,je.targetId&&this.addFeatureVariant(le,je)}_e&&this.appendToResult(r,x,k,le,ae)}updateFeatureProperties(r,s,u){if(s.properties){const g={};for(const f in s.properties){const x=s.properties[f].evaluate({zoom:this.z},r._vectorTileFeature,r.state,r.tile,u);x!=null&&(g[f]=x)}r.properties=g}}addFeatureVariant(r,s,u){const g={target:s.target,namespace:s.namespace};s.properties&&(g.properties=r.properties),r.variants=r.variants||{},r.variants[s.targetId]=r.variants[s.targetId]||[],r.variants[s.targetId].push(g)}appendToResult(r,s,u,g,f){let x=r[s];x===void 0&&(x=r[s]=[]),x.push({featureIndex:u,feature:g,intersectionZ:f})}lookupSymbolFeatures(r,s,u,g,f){const x={};this.loadVTLayers();for(const C of r)this.loadMatchingFeature(x,{bucketIndex:s,sourceLayerIndex:u,featureIndex:C,layoutVertexArrayOffset:0},g,f);return x}loadFeature(r){const{featureIndex:s,sourceLayerIndex:u}=r;this.loadVTLayers();const g=this.sourceLayerCoder.decode(u),f=this.vtFeatures[g];if(f[s])return f[s];const x=this.vtLayers[g].feature(s);return f[s]=x,x}hasLayer(r){for(const s of this.bucketLayerIDs)for(const u of s)if(r===u)return!0;return!1}getId(r,s){let u=r.id;if(this.promoteId){const g=typeof this.promoteId=="string"?this.promoteId:this.promoteId[s];g!=null&&(u=r.properties[g]),typeof u=="boolean"&&(u=Number(u))}return u}}function EC(l,r,s,u,g){return Wn(l,(f,x)=>{const C=r instanceof Wa?r.get(x):null;return C&&C.evaluate?C.evaluate(s,u,g):C})}function R9(l,r){return r-l}Tr(TC,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const CC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class h3{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,u]=new Uint8Array(r,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=u>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const f=CC[15&u];if(!f)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[C]=new Uint32Array(r,4,1);return new h3(C,x,f,r)}constructor(r,s=64,u=Float64Array,g){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=u,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const f=CC.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,C=r*this.IndexArrayType.BYTES_PER_ELEMENT,M=(8-C%8)%8;if(f<0)throw new Error(`Unexpected typed array class: ${u}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+C+M,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+C+M),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+C+M,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+f]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=r)}add(r,s){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=r,this.coords[this._pos++]=s,u}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return f3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,s,u,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:x,nodeSize:C}=this,M=[0,f.length-1,0],$=[];for(;M.length;){const T=M.pop()||0,k=M.pop()||0,I=M.pop()||0;if(k-I<=C){for(let W=I;W<=k;W++){const K=x[2*W],ae=x[2*W+1];K>=r&&K<=u&&ae>=s&&ae<=g&&$.push(f[W])}continue}const P=I+k>>1,R=x[2*P],j=x[2*P+1];R>=r&&R<=u&&j>=s&&j<=g&&$.push(f[P]),(T===0?r<=R:s<=j)&&(M.push(I),M.push(P-1),M.push(1-T)),(T===0?u>=R:g>=j)&&(M.push(P+1),M.push(k),M.push(1-T))}return $}within(r,s,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:f,nodeSize:x}=this,C=[0,g.length-1,0],M=[],$=u*u;for(;C.length;){const T=C.pop()||0,k=C.pop()||0,I=C.pop()||0;if(k-I<=x){for(let W=I;W<=k;W++)PC(f[2*W],f[2*W+1],r,s)<=$&&M.push(g[W]);continue}const P=I+k>>1,R=f[2*P],j=f[2*P+1];PC(R,j,r,s)<=$&&M.push(g[P]),(T===0?r-u<=R:s-u<=j)&&(C.push(I),C.push(P-1),C.push(1-T)),(T===0?r+u>=R:s+u>=j)&&(C.push(P+1),C.push(k),C.push(1-T))}return M}}function f3(l,r,s,u,g,f){if(g-u<=s)return;const x=u+g>>1;DC(l,r,x,u,g,f),f3(l,r,s,u,x-1,1-f),f3(l,r,s,x+1,g,1-f)}function DC(l,r,s,u,g,f){for(;g>u;){if(g-u>600){const $=g-u+1,T=s-u+1,k=Math.log($),I=.5*Math.exp(2*k/3),P=.5*Math.sqrt(k*I*($-I)/$)*(T-$/2<0?-1:1);DC(l,r,s,Math.max(u,Math.floor(s-T*I/$+P)),Math.min(g,Math.floor(s+($-T)*I/$+P)),f)}const x=r[2*s+f];let C=u,M=g;for(vv(l,r,u,s),r[2*g+f]>x&&vv(l,r,u,g);C<M;){for(vv(l,r,C,M),C++,M--;r[2*C+f]<x;)C++;for(;r[2*M+f]>x;)M--}r[2*u+f]===x?vv(l,r,u,M):(M++,vv(l,r,M,g)),M<=s&&(u=M+1),s<=M&&(g=M-1)}}function vv(l,r,s,u){p3(l,s,u),p3(r,2*s,2*u),p3(r,2*s+1,2*u+1)}function p3(l,r,s){const u=l[r];l[r]=l[s],l[s]=u}function PC(l,r,s,u){const g=l-s,f=r-u;return g*g+f*f}a.$=Hh,a.A=Ai,a.B=2,a.C=Ut,a.D=cy,a.E=Rc,a.F=nn,a.G=class extends Jb{},a.H=zu,a.I=n3,a.J=wd,a.K=_p,a.L=Vm,a.M=xi,a.N=Fm,a.O=fp,a.P=dt,a.Q=qd,a.R=Ul,a.S=ac,a.T=U2,a.U=Nd,a.V=Jb,a.W=Rs,a.X=Ri,a.Y=Fc,a.Z=Vs,a._=Mu,a.a=function(l){return Ve.API_CDN_URL_REGEX.test(l)},a.a$=my,a.a0=hp,a.a1=Hu,a.a2=function(l){const r=l.value;let s=[];if(!r)return s;const u=zu(r);return u!=="string"?(s=s.concat([new Jb(l.key,r,`string expected, "${u}" found`)]),s):(DE(r,!0)||(s=s.concat([new Jb(l.key,r,`invalid url "${r}"`)])),s)},a.a3=Tt,a.a4=il,a.a5=Ma,a.a6=tr,a.a7=class{constructor(l){this.specification=l}possiblyEvaluate(l,r){return cn(l.expression.evaluate(r))}interpolate(l,r,s){return{x:Or(l.x,r.x,s),y:Or(l.y,r.y,s),z:Or(l.z,r.z,s),azimuthal:Or(l.azimuthal,r.azimuthal,s),polar:Or(l.polar,r.polar,s)}}},a.a8=Cn,a.a9=Wu,a.aA=ls,a.aB=class{constructor(l){this.entries={},this.scheduler=l}request(l,r,s,u){const g=this.entries[l]=this.entries[l]||{callbacks:[]};if(g.result){const[f,x]=g.result;return this.scheduler?this.scheduler.add(()=>{u(f,x)},r):u(f,x),()=>{}}return g.callbacks.push(u),g.cancel||(g.cancel=s((f,x)=>{g.result=[f,x];for(const C of g.callbacks)this.scheduler?this.scheduler.add(()=>{C(f,x)},r):C(f,x);setTimeout(()=>delete this.entries[l],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(f=>f!==u),g.callbacks.length||(g.cancel(),delete this.entries[l]))}}},a.aC=Lo,a.aD=function(l,r,s){const u=JSON.stringify(l.request);return l.data&&(this.deduped.entries[u]={result:[null,l.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom},g=>{const f=Wi(l.request,(x,C,M,$)=>{x?g(x):C&&g(null,{vectorTile:s?void 0:new iu.VectorTile(new wg(C)),rawData:C,cacheControl:M,expires:$})});return()=>{f.cancel(),g()}},r)},a.aE=function(l){ei++,ei>Qr&&(l.getActor().send("enforceCacheSizeLimit",Lr),ei=0)},a.aF=function(l){return l<=1?1:Math.pow(2,Math.floor(Math.log(l)/Math.LN2))},a.aG=rr,a.aH=pE,a.aI=_E,a.aJ=fE,a.aK=function(l,r){const s=document.createElement("video");s.muted=!0,s.onloadstart=function(){r(null,s)};for(let u=0;u<l.length;u++){const g=document.createElement("source");qf(l[u])||(s.crossOrigin="Anonymous"),g.src=l[u],s.appendChild(g)}return{cancel:()=>{}}},a.aL=Wb,a.aM=function(l){return fetch(l).then(r=>r.arrayBuffer()).then(r=>_C(r,0,l))},a.aN=wC,a.aO=class{constructor(l,r,s,u){this.id=l,this.position=r!=null?new $n(r[0],r[1]):new $n(0,0),this.orientation=s??[0,0,0],this.nodes=u,this.uploaded=!1,this.aabb=new jr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(l,r){if(De.mat4.multiply(l.matrix,r,l.matrix),l.meshes)for(const s of l.meshes){const u=jr.applyTransformFast(s.aabb,l.matrix);this.aabb.encapsulate(u)}if(l.children)for(const s of l.children)this._applyTransformations(s,l.matrix)}computeBoundsAndApplyParent(){const l=De.mat4.identity([]);for(const r of this.nodes)this._applyTransformations(r,l)}computeModelMatrix(l,r,s,u,g,f,x=!1){RE(this.matrix,this,l.transform,this.position,r,s,u,g,f,x)}upload(l){if(!this.uploaded){for(const r of this.nodes)K2(r,l);for(const r of this.nodes)Qb(r);this.uploaded=!0}}destroy(){for(const l of this.nodes)Z2(l)}},a.aP=oa,a.aQ=nv,a.aR=qs,a.aS=Li,a.aT=cc,a.aU=Fi,a.aV=Sa,a.aW=Km,a.aX=Hb,a.aY=function(){na.isLoading()||na.isLoaded()||al()!=="deferred"||ta()},a.aZ=zs,a.a_=X,a.aa=m,a.ab=De,a.ac=Tn,a.ad=Wa,a.ae=Qi,a.af=Or,a.ag=lr,a.ah=Ic,a.ai=mr,a.aj=In,a.ak=class{constructor(l){this.specification=l}possiblyEvaluate(l,r){return function([s,u]){const g=cn([1,s,u]);return{x:g.x,y:g.y,z:g.z}}(l.expression.evaluate(r))}interpolate(l,r,s){return{x:Or(l.x,r.x,s),y:Or(l.y,r.y,s),z:Or(l.z,r.z,s)}}},a.al=function(l,r,s=0,u=!0){const g=new dt(s,s),f=l.sub(g),x=r.add(g),C=[f,new dt(x.x,f.y),x,new dt(f.x,x.y)];return u&&C.push(f.clone()),C},a.am=function(l,r){const s=[];for(let u=0;u<l.length;u++){const g=kr(u-1,-1,l.length-1),f=kr(u+1,-1,l.length-1),x=l[u],C=l[f],M=l[g].sub(x).unit(),$=C.sub(x).unit(),T=$.angleWithSep(M.x,M.y),k=M.add($).unit().mult(-1*r/Math.sin(T/2));s.push(x.add(k))}return s},a.an=QT,a.ao=at,a.ap=function(l,r,s=0){return De.vec3.fromValues(((r.x-s)*l.scale-l.x)*lr,(r.y*l.scale-l.y)*lr,kl(r.z,r.y))},a.aq=mn,a.ar=Kp,a.as=function(l){let r=1/0,s=1/0,u=-1/0,g=-1/0;for(const f of l)r=Math.min(r,f.x),s=Math.min(s,f.y),u=Math.max(u,f.x),g=Math.max(g,f.y);return{min:new dt(r,s),max:new dt(u,g)}},a.at=ol,a.au=nt,a.av=S,a.aw=fr,a.ax=os,a.ay=function(l,r){const s={};for(let u=0;u<r.length;u++){const g=r[u];g in l&&(s[g]=l[g])}return s},a.az=sl,a.b=function(l){return Ve.API_FONTS_REGEX.test(l)},a.b$=Xb,a.b0=Xa,a.b1=J0,a.b2=ld,a.b3=Z,a.b4=no,a.b5=ef,a.b6=Hr,a.b7=Aa,a.b8=df,a.b9=O2,a.bA=Fx,a.bB=z2,a.bC=ZT,a.bD=Re,a.bE=h3,a.bF=kr,a.bG=qa,a.bH=Xi,a.bI=function(l,r,s){l[4*r+0]=s[0],l[4*r+1]=s[1],l[4*r+2]=s[2],l[4*r+3]=s[3]},a.bJ=ah,a.bK=ka,a.bL=nh,a.bM=fa,a.bN=oo,a.bO=$n,a.bP=aE,a.bQ=dr,a.bR=sn,a.bS=wE,a.bT=zt,a.bU=Ca,a.bV=function(l,r,s,u,g,f,x,C,M){if(M.name==="globe")return Ca(l,r,new zt(s,u,g),!1);const $=nv({z:s,x:u,y:g},M);return new jr([(f+$.x/$.scale)*r,r*($.y/$.scale),x],[(f+$.x2/$.scale)*r,r*($.y2/$.scale),C])},a.bW=function(l,r,s){let u=0;for(let g=0;g<2;++g)l[g]>0&&(u+=(l[g]-0)*(l[g]-0)),r[g]<0&&(u+=(0-r[g])*(0-r[g]));return u},a.bX=cs,a.bY=Xm,a.bZ=function(l){const r=De.mat4.identity(new Float64Array(16));De.mat4.multiply(r,l.pixelMatrix,l.globeMatrix);const s=[0,co,0],u=[0,uo,0];return De.vec3.transformMat4(s,s,r),De.vec3.transformMat4(u,u,r),[s[0]>0&&s[0]<=l.width&&s[1]>0&&s[1]<=l.height&&!us(l,new $n(l.center.lat,90)),u[0]>0&&u[0]<=l.width&&u[1]>0&&u[1]<=l.height&&!us(l,new $n(l.center.lat,-90))]},a.b_=function(l,r){const{scale:s}=l.tileTransform,u=s*lr/(l.tileSize*Math.pow(2,r.zoom-l.tileID.overscaledZ+l.tileID.canonical.z));return De.mat2.scale(new Float32Array(4),r.inverseAdjustmentMatrix,[u,u])},a.ba=function(l,r){const s=Qi(r.zoom);if(s===0)return Sn(l);const u=ia(l),g=Hn(u),f=ol(u.getWest())*r.worldSize,x=ol(u.getEast())*r.worldSize,C=ls(u.getNorth())*r.worldSize,M=ls(u.getSouth())*r.worldSize,$=[f,C,0],T=[x,C,0],k=[f,M,0],I=[x,M,0],P=De.mat4.invert([],r.globeMatrix);return De.vec3.transformMat4($,$,P),De.vec3.transformMat4(T,T,P),De.vec3.transformMat4(k,k,P),De.vec3.transformMat4(I,I,P),g[0]=Ea(g[0],k,s),g[1]=Ea(g[1],I,s),g[2]=Ea(g[2],T,s),g[3]=Ea(g[3],$,s),jr.fromPoints(g)},a.bb=aa,a.bc=qr,a.bd=Ea,a.be=Kd,a.bf=zr,a.bg=o3,a.bh=wg,a.bi=Wi,a.bj=function(l){const r=[];for(const s in l)r.push(l[s]);return r},a.bk=function(l,r){const s=[];for(const u in l)u in r||s.push(u);return s},a.bl=Dr,a.bm=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.bn=$t,a.bo=function(l,r){const{x:s,y:u}=l.point,g=fi(s,u,l.worldSize/l._pixelsPerMercatorPixel,0,0);return De.mat4.multiply(g,g,za(Sn(r)))},a.bp=cl,a.bq=mo,a.br=Xp,a.bs=function(l,r,s,u,g){const f=5*r+2;l.float32[f+0]=s,l.float32[f+1]=u,l.float32[f+2]=g},a.bt=Gb,a.bu=kt,a.bv=ve,a.bw=Vi,a.bx=Nx,a.by=CE,a.bz=Ox,a.c=tt,a.c$=(l,r,s,u,g,f,x,C)=>{const M=l.transform,$=M.pitch<15?Sb(.07,.7,fr((14-M.zoom)/5,0,1)):.07,T=s.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:Eb(l,r,s,u),u_texsize:r.imageAtlasTexture?r.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:M.calculatePixelsToTileUnitsMatrix(r),u_device_pixel_ratio:g,u_width_scale:f,u_floor_width_scale:x,u_image:0,u_tile_units_to_pixels:Tb(r,M),u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:C,u_trim_fade_range:s.paint.get("line-trim-fade-range"),u_trim_color:s.paint.get("line-trim-color").toRenderColor(T?null:s.lut).toArray01(),u_emissive_strength:s.paint.get("line-emissive-strength"),u_zbias_factor:$,u_tile_to_meter:o(r.tileID.canonical,0)}},a.c0=bE,a.c1=function(l){const r=bE(l,!0);return De.mat2.invert([],[r[0],r[1],r[4],r[5]])},a.c2=ln,a.c3=function(l){const{x:r,y:s}=l.point,{lng:u,lat:g}=l._center;return fi(r,s,l.worldSize,u,g)},a.c4=Pr,a.c5=yr,a.c6=of,a.c7=function(l){const r=Math.round((l+45+360)%360/90)%4;return Fr[r]},a.c8=45,a.c9=od,a.cA=class extends Pl{constructor(l){super(l),this.current=id}set(l,r,s){if(this.fetchUniformLocation(l,r)){for(let u=0;u<9;u++)if(s[u]!==this.current[u]){this.current=s,this.gl.uniformMatrix3fv(this.location,!1,s);break}}}},a.cB=Bn,a.cC=function(l,r,s){const u=Qi(s.zoom),g=l.style.map._antialias,f=r.options.extStandardDerivativesForceOff||l.terrain&&l.terrain.exaggeration()>0;return u===0&&!g&&!f},a.cD=function(l){const r=l.pixelsPerMeter,s=r/Xi(1,l.center.lat),u=De.mat4.identity(new Float64Array(16));return De.mat4.translate(u,u,[l.point.x,l.point.y,0]),De.mat4.scale(u,u,[s,s,r]),Float32Array.from(u)},a.cE=ia,a.cF=function(l){const r=cs-5;l=fr(l,-80.051129,r)/r*90;const s=Math.pow(Math.abs(Math.sin(mr(l))),3);return Math.round(s*(cf.length-1))},a.cG=function(l,r,s,u){const g=r.getNorth(),f=r.getSouth(),x=r.getWest(),C=r.getEast(),M=1<<l.z,$=C-x,T=g-f,k=$/xc,I=-T/cf[s],P=[0,k,0,I,0,0,g,x,0];if(l.z>0){const R=180/u;De.mat3.multiply(P,P,[R/$+1,0,0,0,R/T+1,0,-.5*R/k,.5*R/I,1])}return P[2]=M,P[5]=l.x,P[8]=l.y,P},a.cH=Sn,a.cI=function(l,r,s){const u=De.mat4.identity(new Float64Array(16)),g=(r/(1<<l)-.5)*Math.PI*2;return De.mat4.rotateY(u,s.globeMatrix,g),Float32Array.from(u)},a.cJ=class{isDataAvailableAtPoint(l){const r=this._source();if(this.isUsingMockSource()||!r||l.y<0||l.y>1)return!1;const s=r.getSource().maxzoom,u=1<<s,g=Math.floor(l.x),f=Math.floor((l.x-g)*u),x=Math.floor(l.y*u),C=this.findDEMTileFor(new rr(s,g,s,f,x));return!(!C||!C.dem)}getAtPointOrZero(l,r=0){return this.getAtPoint(l,r)||0}getAtPoint(l,r,s=!0){if(this.isUsingMockSource())return null;r==null&&(r=null);const u=this._source();if(!u||l.y<0||l.y>1)return r;const g=u.getSource().maxzoom,f=1<<g,x=Math.floor(l.x),C=l.x-x,M=new rr(g,x,g,Math.floor(C*f),Math.floor(l.y*f)),$=this.findDEMTileFor(M);if(!$||!$.dem)return r;const T=$.dem,k=1<<$.tileID.canonical.z,I=(C*k-$.tileID.canonical.x)*T.dim,P=(l.y*k-$.tileID.canonical.y)*T.dim,R=Math.floor(I),j=Math.floor(P);return(s?this.exaggeration():1)*Or(Or(T.get(R,j),T.get(R,j+1),P-j),Or(T.get(R+1,j),T.get(R+1,j+1),P-j),I-R)}getAtTileOffset(l,r,s){const u=1<<l.canonical.z;return this.getAtPointOrZero(new m(l.wrap+(l.canonical.x+r/lr)/u,(l.canonical.y+s/lr)/u))}getAtTileOffsetFunc(l,r,s,u){return g=>{const f=this.getAtTileOffset(l,g.x,g.y),x=u.upVector(l.canonical,g.x,g.y),C=u.upVectorScale(l.canonical,r,s).metersToTile;return De.vec3.scale(x,x,f*C),x}}getForTilePoints(l,r,s,u){if(this.isUsingMockSource())return!1;const g=ly.create(this,l,u);return!!g&&(r.forEach(f=>{f[2]=this.exaggeration()*g.getElevationAt(f[0],f[1],s)}),!0)}getMinMaxForTile(l){if(this.isUsingMockSource())return null;const r=this.findDEMTileFor(l);if(!r||!r.dem)return null;const s=r.dem.tree,u=r.tileID,g=1<<l.canonical.z-u.canonical.z;let f=l.canonical.x/g-u.canonical.x,x=l.canonical.y/g-u.canonical.y,C=0;for(let M=0;M<l.canonical.z-u.canonical.z&&!s.leaves[C];M++){f*=2,x*=2;const $=2*Math.floor(x)+Math.floor(f);C=s.childOffsets[C]+$,f%=1,x%=1}return{min:this.exaggeration()*s.minimums[C],max:this.exaggeration()*s.maximums[C]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(l,r,s){throw new Error("Pure virtual method called.")}pointCoordinate(l){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(l){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const l=this.visibleDemTiles;if(l.length===0)return null;let r=!1,s=Number.MAX_VALUE,u=Number.MIN_VALUE;for(const g of l){const f=this.getMinMaxForTile(g.tileID);f&&(s=Math.min(s,f.min),u=Math.max(u,f.max),r=!0)}return r?{min:s,max:u}:null}},a.cK=uf,a.cL=Vn,a.cM=function(l,r){return[Math.pow(l[0],2.2)*r,Math.pow(l[1],2.2)*r,Math.pow(l[2],2.2)*r]},a.cN=Ji,a.cO=Ae,a.cP=ye,a.cQ=256,a.cR=function(l,r){const s=[0,0,0],u=aa(Sn(r.canonical));return De.vec3.transformMat4(s,s,u),De.vec3.transformMat4(s,s,l),s},a.cS=l=>({u_camera_to_center_distance:new fa(l),u_extrude_scale:new Lp(l),u_device_pixel_ratio:new fa(l),u_matrix:new ah(l),u_inv_rot_matrix:new ah(l),u_merc_center:new ka(l),u_tile_id:new nh(l),u_zoom_transition:new fa(l),u_up_dir:new nh(l),u_emissive_strength:new fa(l)}),a.cT=l=>({u_matrix:new ah(l),u_pixels_to_tile_units:new Lp(l),u_device_pixel_ratio:new fa(l),u_width_scale:new fa(l),u_floor_width_scale:new fa(l),u_units_to_pixels:new ka(l),u_dash_image:new oo(l),u_gradient_image:new oo(l),u_image_height:new fa(l),u_texsize:new ka(l),u_tile_units_to_pixels:new fa(l),u_alpha_discard_threshold:new fa(l),u_trim_offset:new ka(l),u_trim_fade_range:new ka(l),u_trim_color:new ad(l),u_emissive_strength:new fa(l),u_zbias_factor:new fa(l),u_tile_to_meter:new fa(l)}),a.cU=l=>({u_matrix:new ah(l),u_texsize:new ka(l),u_pixels_to_tile_units:new Lp(l),u_device_pixel_ratio:new fa(l),u_width_scale:new fa(l),u_floor_width_scale:new fa(l),u_image:new oo(l),u_units_to_pixels:new ka(l),u_tile_units_to_pixels:new fa(l),u_alpha_discard_threshold:new fa(l),u_trim_offset:new ka(l),u_trim_fade_range:new ka(l),u_trim_color:new ad(l),u_emissive_strength:new fa(l),u_zbias_factor:new fa(l),u_tile_to_meter:new fa(l)}),a.cV=Xh,a.cW=Jx,a.cX=sh,a.cY=vc,a.cZ=(l,r,s,u,g,f)=>{const x=l.transform,C=x.projection.name==="globe";let M;if(f.paint.get("circle-pitch-alignment")==="map")if(C){const T=Ji(x.zoom,r.canonical)*x._pixelsPerMercatorPixel;M=Float32Array.from([T,0,0,T])}else M=x.calculatePixelsToTileUnitsMatrix(s);else M=new Float32Array([x.pixelsToGLUnits[0],0,0,x.pixelsToGLUnits[1]]);const $={u_camera_to_center_distance:l.transform.getCameraToCenterDistance(x.projection),u_matrix:l.translatePosMatrix(r.projMatrix,s,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Gt.devicePixelRatio,u_extrude_scale:M,u_inv_rot_matrix:Bo,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:f.paint.get("circle-emissive-strength")};if(C){$.u_inv_rot_matrix=u,$.u_merc_center=g,$.u_tile_id=[r.canonical.x,r.canonical.y,1<<r.canonical.z],$.u_zoom_transition=Qi(x.zoom);const T=g[0]*lr,k=g[1]*lr;$.u_up_dir=x.projection.upVector(new zt(0,0,0),T,k)}return $},a.c_=mg,a.ca=ad,a.cb=function(l,r,s){const u=Math.sqrt(l*l+r*r+s*s),g=u>0?Math.acos(s/u)*Er:0;let f=l!==0||r!==0?Math.atan2(-r,-l)*Er+90:0;return f<0&&(f+=360),[u,f,g]},a.cc=o,a.cd=jr,a.ce=cn,a.cf=function(l){return[Math.pow(l[0],1/2.2),Math.pow(l[1],1/2.2),Math.pow(l[2],1/2.2)]},a.cg=function(l,r){return l.readFields(PO,{icons:[]},r)},a.ch=function(l){return l({pluginStatus:zi,pluginURL:nl}),Zc.on("pluginStateChange",l),l},a.ci=t1,a.cj=Jp,a.ck=lu,a.cl=vd,a.cm=Fd,a.cn=Ur,a.co=bd,a.cp=Ia,a.cq=function(l){const r=l.indexOf(zo);return r>=0?l.slice(0,r):l},a.cr=function(l){return l.indexOf(zo)>=0},a.cs=function(l){const r=l.indexOf(zo);return r>=0?l.slice(r+1):""},a.ct=function(l){const r=[],s=l.id;return s===void 0&&r.push({message:`layers.${s}: missing required property "id"`}),l.render===void 0&&r.push({message:`layers.${s}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&r.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),r},a.cu=function(l,r,s,u){return l.type==="custom"?new pO(l,r):new EO[l.type](l,r,s,u)},a.cv=Da,a.cw=class extends my{constructor(l,r){super(l._vectorTileFeature,l._z,l._x,l._y,l.id),l.state&&(this.state={...l.state}),this.target=r.target,this.namespace=r.namespace,r.properties&&(this.properties=r.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=l.source,this.sourceLayer=l.sourceLayer,this.layer=l.layer)}toJSON(){const l=super.toJSON();return l.target=this.target,l.namespace=this.namespace,l}},a.cx=Zc,a.cy=yl,a.cz=Rp,a.d=function(l){return Ve.API_TILEJSON_REGEX.test(l)},a.d$=Wn,a.d0=(l,r,s,u,g,f,x,C,M)=>{const $=l.transform,T=$.calculatePixelsToTileUnitsMatrix(r),k=s.paint.get("line-trim-color-use-theme").constantOr("default")==="none",I=$.pitch<15?Sb(.07,.7,fr((14-$.zoom)/5,0,1)):.07;return{u_matrix:Eb(l,r,s,u),u_pixels_to_tile_units:T,u_device_pixel_ratio:f,u_width_scale:x,u_floor_width_scale:C,u_units_to_pixels:[1/$.pixelsToGLUnits[0],1/$.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:g,u_texsize:gg(s)&&r.lineAtlasTexture?r.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Tb(r,l.transform),u_alpha_discard_threshold:0,u_trim_offset:M,u_trim_fade_range:s.paint.get("line-trim-fade-range"),u_trim_color:s.paint.get("line-trim-color").toRenderColor(k?null:s.lut).toArray01(),u_emissive_strength:s.paint.get("line-emissive-strength"),u_zbias_factor:I,u_tile_to_meter:o(r.tileID.canonical,0)}},a.d1=Za,a.d2=Np,a.d3=mb,a.d4=_r,a.d5=po,a.d6=fo,a.d7=450,a.d8=7,a.d9=fO,a.dA=On,a.dB=n,a.dC=Al,a.dD=function([l,r,s]){const u=Math.hypot(l,r,s),g=Math.atan2(l,s),f=.5*Math.PI-Math.acos(-r/u);return new $n(Pr(g),Pr(f))},a.dE=H2,a.dF=function(l){const r=l.navigator?l.navigator.userAgent:null;return!!function(s){if(js==null){const u=s.navigator?s.navigator.userAgent:null;js=!!s.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return js}(l)&&r&&(r.match("Version/15.4")||r.match("Version/15.5")||r.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},a.dG=function(l,r){Lr=l,Qr=r},a.dH=us,a.dI=ho,a.dJ=function(l){const r=[0,0,0],s=De.mat4.identity(new Float64Array(16));return De.mat4.multiply(s,l.pixelMatrix,l.globeMatrix),De.vec3.transformMat4(r,r,s),new dt(r[0],r[1])},a.dK=function(l,r,s=!1){if(zi===Yu||zi===Hs||zi===xp)throw new Error("setRTLTextPlugin cannot be called multiple times.");nl=Gt.resolveURL(l),zi=Yu,vp=r,Vd(),s||ta()},a.dL=al,a.dM=function(){t1().acquire(Y2)},a.dN=function(){const l=dv;l&&(l.isPreloaded()&&l.numActive()===1?(l.release(Y2),dv=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.dO=Dg,a.dP=function(l){const r=Jn();if(!r)return;const s=r.delete(Jr);l&&s.catch(l).then(()=>l())},a.dQ=uv,a.dR=fC,a.dS=function(l){l3=Gt.resolveURL(l),py||(py=new cy(t1(),new Rc)),py.broadcast("setDracoUrl",l3)},a.dT=pC,a.dU=function(l){fy=Gt.resolveURL(l),py||(py=new cy(t1(),new Rc)),py.broadcast("setMeshoptUrl",fy)},a.dV=Tr,a.dW=bc,a.dX=ra,a.dY=SC,a.dZ=TC,a.d_=pg,a.da=Fn,a.db=Pp,a.dc=256,a.dd=za,a.de=dc,a.df=Ts,a.dg=Qh,a.dh=function(l,r,s,u,g){return fr((l-r)/(s-r)*(g-u)+u,u,g)},a.di=Fh,a.dj=p,a.dk=class{constructor(l,r,s,u){this.context=l,this.format=u,this.size=s,this.texture=l.gl.createTexture();const[g,f,x]=this.size,{gl:C}=l;C.bindTexture(C.TEXTURE_3D,this.texture),l.pixelStoreUnpackFlipY.set(!1),l.pixelStoreUnpack.set(1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),C.texImage3D(C.TEXTURE_3D,0,this.format,g,f,x,0,F2(this.format),V2(this.format),r.data)}bind(l,r){const{context:s}=this,{gl:u}=s;u.bindTexture(u.TEXTURE_3D,this.texture),l!==this.minFilter&&(u.texParameteri(u.TEXTURE_3D,u.TEXTURE_MAG_FILTER,l),u.texParameteri(u.TEXTURE_3D,u.TEXTURE_MIN_FILTER,l),this.minFilter=l),r!==this.wrapS&&(u.texParameteri(u.TEXTURE_3D,u.TEXTURE_WRAP_S,r),u.texParameteri(u.TEXTURE_3D,u.TEXTURE_WRAP_T,r),this.wrapS=r)}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}},a.dl=q2,a.dm=[1,1,1],a.dn=ly,a.dp=oy,a.dq=pc,a.dr=mc,a.ds=nu,a.dt=Wm,a.du=Dp,a.dv=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new dt(1/0,1/0),max:new dt(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(l,r=!1){const s=ob(new dt(0,0),new dt(lr,lr),l),u=[];if(r&&!og(s,this._globalClipBounds))return u;for(const g of this._activeRegions){if(g.hiddenByOverlap||!og(s,g))continue;const f=jx(g.min,g.max,l);u.push({min:f.min,max:f.max,sourceId:this._sourceIds[g.priority],footprint:g.footprint,footprintTileId:g.tileId,order:g.order,clipMask:g.clipMask,clipScope:g.clipScope})}return u}setSources(l){this._setSources(l.map(r=>({getSourceId:()=>r.cache.id,getFootprints:()=>{const s=[];for(const u of r.cache.getVisibleCoordinates()){const g=r.cache.getTile(u).buckets[r.layer];g&&g.updateFootprints(u.toUnwrapped(),s)}return s},getOrder:()=>r.order,getClipMask:()=>r.clipMask,getClipScope:()=>r.clipScope})))}_addSource(l){const r=l.getFootprints();if(r.length===0)return;const s=l.getOrder(),u=l.getClipMask(),g=l.getClipScope();for(const f of r){if(!f.footprint)continue;const x=ob(f.footprint.min,f.footprint.max,f.id);this._activeRegions.push({min:x.min,max:x.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:f.id,footprint:f.footprint,order:s,clipMask:u,clipScope:g})}this._sourceIds.push(l.getSourceId())}_computeReplacement(){this._activeRegions.sort((r,s)=>r.priority-s.priority||xf(r.min,s.min)||xf(r.max,s.max)||r.order-s.order||r.clipMask-s.clipMask||function(u,g){const f=(x,C)=>x+C;return u.length-g.length||u.reduce(f,"").localeCompare(g.reduce(f,""))}(r.clipScope,s.clipScope));let l=this._activeRegions.length!==this._prevRegions.length;if(!l){let r=0;for(;!l&&r!==this._activeRegions.length;){const s=this._activeRegions[r],u=this._prevRegions[r];l=s.priority!==u.priority||!Oa(s,u)||s.order!==u.order||s.clipMask!==u.clipMask||!$t(s.clipScope,u.clipScope),++r}}if(l){++this._updateTime;for(const s of this._activeRegions)s.order!==sg&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,s.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,s.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,s.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,s.max.y));const r=s=>{const u=this._activeRegions;if(s>=u.length)return s;const g=u[s].priority;for(;s<u.length&&u[s].priority===g;)++s;return s};if(this._sourceIds.length>1){let s=0,u=r(s);for(;s!==u;){let g=s;const f=s;for(;g!==u;){const x=this._activeRegions[g];x.hiddenByOverlap=!1;for(let C=0;C<f;C++){const M=this._activeRegions[C];if(!M.hiddenByOverlap&&x.order===sg&&og(x,M)&&(x.hiddenByOverlap=lg(x.footprint,x.tileId,M.footprint,M.tileId),x.hiddenByOverlap))break}++g}s=u,u=r(s)}}}}_setSources(l){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let r=l.length-1;r>=0;r--)this._addSource(l[r]);this._computeReplacement()}},a.dw=class{constructor(l){this._createGrid(l),this._createPoles(l)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const l of this._poleSegments)l.destroy();for(const l of this._gridSegments)l.withSkirts.destroy(),l.withoutSkirts.destroy()}_fillGridMeshWithLods(l,r){const s=new no,u=new Fi,g=[],f=l+1+2,x=r[0]+1,C=r[0]+1+(1+r.length),M=($,T,k)=>{let I=$===f-1?$-2:$===0?$:$-1;return I+=k?24575:0,[I,T]};for(let $=0;$<f;++$)s.emplaceBack(...M($,0,!0));for(let $=0;$<x;++$)for(let T=0;T<f;++T)s.emplaceBack(...M(T,$,(T===0||T===f-1)&&!0));for(let $=0;$<r.length;++$){const T=r[$];for(let k=0;k<f;++k)s.emplaceBack(...M(k,T,!0))}for(let $=0;$<r.length;++$){const T=u.length,k=r[$]+1+2,I=new Fi;for(let j=0;j<k-1;j++){const W=j===k-2,K=W?f*(C-r.length+$-j):f;for(let ae=0;ae<f-1;ae++){const ie=j*f+ae;j===0||W||ae===0||ae===f-2?(I.emplaceBack(ie+1,ie,ie+K),I.emplaceBack(ie+K,ie+K+1,ie+1)):(u.emplaceBack(ie+1,ie,ie+K),u.emplaceBack(ie+K,ie+K+1,ie+1))}}const P=Aa.simpleSegment(0,T,s.length,u.length-T);for(let j=0;j<I.uint16.length;j+=3)u.emplaceBack(I.uint16[j],I.uint16[j+1],I.uint16[j+2]);const R=Aa.simpleSegment(0,T,s.length,u.length-T);g.push({withoutSkirts:P,withSkirts:R})}return{vertices:s,indices:u,segments:g}}_createGrid(l){const r=this._fillGridMeshWithLods(xc,cf);this._gridSegments=r.segments,this._gridBuffer=l.createVertexBuffer(r.vertices,Hr.members),this._gridIndexBuffer=l.createIndexBuffer(r.indices,!0)}_createPoles(l){const r=new Fi;for(let x=0;x<=xc;x++)r.emplaceBack(0,x+1,x+2);this._poleIndexBuffer=l.createIndexBuffer(r,!0);const s=new Ts,u=new Ts,g=new Ts,f=new Ts;this._poleSegments=[];for(let x=0,C=0;x<of;x++){const M=360/(1<<x);s.emplaceBack(0,-os,0,.5,0),u.emplaceBack(0,-os,0,.5,1),g.emplaceBack(0,-os,0,.5,.5),f.emplaceBack(0,-os,0,.5,.5);for(let $=0;$<=xc;$++){let T=$/xc,k=0;const I=Or(0,M,T),[P,R,j]=ru(ds,li,I,os);s.emplaceBack(P,R,j,T,k),u.emplaceBack(P,R,j,T,1-k);const W=mr(I);T=.5+.5*Math.sin(W),k=.5+.5*Math.cos(W),g.emplaceBack(P,R,j,T,k),f.emplaceBack(P,R,j,T,1-k)}this._poleSegments.push(Aa.simpleSegment(C,0,66,64)),C+=66}this._poleNorthVertexBuffer=l.createVertexBuffer(s,Ar,!1),this._poleSouthVertexBuffer=l.createVertexBuffer(u,Ar,!1),this._texturedPoleNorthVertexBuffer=l.createVertexBuffer(g,Ar,!1),this._texturedPoleSouthVertexBuffer=l.createVertexBuffer(f,Ar,!1)}getGridBuffers(l,r){return[this._gridBuffer,this._gridIndexBuffer,r?this._gridSegments[l].withSkirts:this._gridSegments[l].withoutSkirts]}getPoleBuffers(l,r){return[r?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,r?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[l]]}},a.dx=sg,a.dy=Xr,a.dz=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},a.e=Ve,a.e0=Yo,a.e1=la,a.e2=function(l,r,s,u,g,f,x,C,M,$,T=1,k,I){l.createArrays(),l.tilePixelRatio=lr/(512*l.overscaling),l.compareText={},l.iconsNeedLinear=!1;const P=l.layers[0].layout,R=l.layers[0]._unevaluatedLayout._values,j={};j.scaleFactor=T,j.textSizeScaleRange=P.get("text-size-scale-range"),j.iconSizeScaleRange=P.get("icon-size-scale-range");const[W,K]=j.textSizeScaleRange,[ae,ie]=j.iconSizeScaleRange;if(j.textScaleFactor=fr(j.scaleFactor,W,K),j.iconScaleFactor=fr(j.scaleFactor,ae,ie),l.textSizeData.kind==="composite"){const{minZoom:_e,maxZoom:je}=l.textSizeData;j.compositeTextSizes=[R["text-size"].possiblyEvaluate(new Cn(_e),C),R["text-size"].possiblyEvaluate(new Cn(je),C)]}if(l.iconSizeData.kind==="composite"){const{minZoom:_e,maxZoom:je}=l.iconSizeData;j.compositeIconSizes=[R["icon-size"].possiblyEvaluate(new Cn(_e),C),R["icon-size"].possiblyEvaluate(new Cn(je),C)]}j.layoutTextSize=R["text-size"].possiblyEvaluate(new Cn(M+1),C),j.layoutIconSize=R["icon-size"].possiblyEvaluate(new Cn(M+1),C),j.textMaxSize=R["text-size"].possiblyEvaluate(new Cn(18),C);const J=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point",le=P.get("text-size");let fe=!1;for(const _e of l.features)if(_e.icon&&_e.icon.nameSecondary){fe=!0;break}for(const _e of l.features){const je=P.get("text-font").evaluate(_e,{},C).join(","),Ne=le.evaluate(_e,{},C)*j.textScaleFactor,Be=j.layoutTextSize.evaluate(_e,{},C)*j.textScaleFactor,Qe=(j.layoutIconSize.evaluate(_e,{},C),{horizontal:{},vertical:void 0}),Ue=_e.text;let rt,st=[0,0];if(Ue){const vt=Ue.toString(),ht=P.get("text-letter-spacing").evaluate(_e,{},C)*Vi,Rt=P.get("text-line-height").evaluate(_e,{},C)*Vi,Yt=mp(vt)?ht:0,Lt=P.get("text-anchor").evaluate(_e,{},C),ar=P.get("text-variable-anchor");if(!ar){const sr=P.get("text-radial-offset").evaluate(_e,{},C);st=sr?ZT(Lt,[sr*Vi,I2]):P.get("text-offset").evaluate(_e,{},C).map(Cr=>Cr*Vi)}let nr=J?"center":P.get("text-justify").evaluate(_e,{},C);const gr=P.get("symbol-placement")==="point",jt=gr?P.get("text-max-width").evaluate(_e,{},C)*Vi:1/0,Mr=sr=>{l.allowVerticalPlacement&&Tl(vt)&&(Qe.vertical=tv(Ue,r,s,g,je,jt,Rt,Lt,sr,Yt,st,mo.vertical,!0,Be,Ne))};if(!J&&ar){const sr=nr==="auto"?ar.map(Vr=>z2(Vr)):[nr];let Cr=!1;for(let Vr=0;Vr<sr.length;Vr++){const on=sr[Vr];if(!Qe.horizontal[on])if(Cr)Qe.horizontal[on]=Qe.horizontal[0];else{const fn=tv(Ue,r,s,g,je,jt,Rt,"center",on,Yt,st,mo.horizontal,!1,Be,Ne);fn&&(Qe.horizontal[on]=fn,Cr=fn.positionedLines.length===1)}}Mr("left")}else{if(nr==="auto"&&(nr=z2(Lt)),gr||P.get("text-writing-mode").indexOf("horizontal")>=0||!Tl(vt)){const sr=tv(Ue,r,s,g,je,jt,Rt,Lt,nr,Yt,st,mo.horizontal,!1,Be,Ne);sr&&(Qe.horizontal[nr]=sr)}Mr(gr?"left":nr)}}let it=!1,ct=!1;if(_e.icon&&_e.icon.namePrimary){const vt=Zp(l.iconSizeData,R["icon-size"],C,l.zoom,_e)*j.iconScaleFactor*k,ht=_e.icon.getPrimary().scaleSelf(vt).serialize(),Rt=u[ht];Rt&&(rt=wt(g[ht],_e.icon.nameSecondary?g[_e.icon.getSecondary().scaleSelf(vt).serialize()]:void 0,P.get("icon-offset").evaluate(_e,{},C),P.get("icon-anchor").evaluate(_e,{},C)),it=Rt.sdf,ct=Rt.usvg,l.sdfIcons===void 0?l.sdfIcons=Rt.sdf:l.sdfIcons!==Rt.sdf&&Wr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Rt.pixelRatio!==l.pixelRatio||P.get("icon-rotate").constantOr(1)!==0)&&(l.iconsNeedLinear=!0))}const gt=YT(Qe.horizontal)||Qe.vertical;l.iconsInText||(l.iconsInText=!!gt&&gt.iconsInText),(gt||rt)&&eO(l,_e,Qe,rt,u,j,Be,0,st,it,ct,x,C,$,I,fe)}f&&l.generateCollisionDebugBuffers(M,l.collisionBoxArray,j.textScaleFactor)},a.e3=iu,a.e4=o1,a.e5=yt,a.e6=G0,a.e7=bg,a.e8=A,a.e9=function(l){let r=0;if(new Uint32Array(l,0,1)[0]!==gC){const s=new Uint32Array(l,0,7),[,,u,g,f,x]=s;r=s.byteLength+g+f+x+f,(u!==l.byteLength||r>=l.byteLength)&&Wr("Invalid b3dm header information.")}return _C(l,r)},a.ea=function(l,r){const s=wC(l);for(const u of s){for(const g of u.meshes)M9(g);u.lights&&(u.lightMeshIndex=u.meshes.length,u.meshes.push(A9(u.lights,r)))}return s},a.eb=e1,a.ec=NE,a.ed=na,a.ee=function(l){Qn(),Dn!=null&&Dn.then(r=>{r.keys().then(s=>{for(let u=0;u<s.length-l;u++)r.delete(s[u])})})},a.f=function(l){return l.indexOf("mapbox:")===0},a.g=function(l,r){return yl(Br(l,{method:"GET"}),r)},a.h=Je,a.i=function(l){return Ve.API_STYLE_REGEX.test(l)&&!tt(l)},a.j=function(l){return decodeURIComponent(atob(l).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join(""))},a.k=function(l){return btoa(encodeURIComponent(l).replace(/%([0-9A-F]{2})/g,(r,s)=>String.fromCharCode(+("0x"+s))))},a.l=Br,a.m=_s,a.n=function(l,r){return yl(Br(l,{type:"json"}),r)},a.o=Pu,a.p=function(l,r){return yl(Br(l,{method:"POST"}),r)},a.q=Gt,a.r=es,a.s=function(l){try{const r=self[l];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}},a.t=Jt,a.u=function(){return function l(r){return r?(r^Math.random()*(16>>r/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,l)}()},a.v=function(l){return!!l&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(l)},a.w=Wr,a.x=function(){return J2||(J2=new Dg),J2},a.y=kc,a.z=eo}),_(["./shared"],function(a){function A(St){const ye=St?St.url.toString():void 0;return ye?performance.getEntriesByName(ye):[]}function B(St){if(typeof St=="number"||typeof St=="boolean"||typeof St=="string"||St==null)return JSON.stringify(St);if(Array.isArray(St)){let Ae="[";for(const Ve of St)Ae+=`${B(Ve)},`;return`${Ae}]`}let ye="{";for(const Ae of Object.keys(St).sort())ye+=`${Ae}:${B(St[Ae])},`;return`${ye}}`}function N(St){let ye="";for(const Ae of a.bm)ye+=`/${B(St[Ae])}`;return ye}class F{constructor(ye){this.keyCache={},this._layers={},this._layerConfigs={},ye&&this.replace(ye)}replace(ye,Ae){this._layerConfigs={},this._layers={},this.update(ye,[],Ae)}update(ye,Ae,Ve){this._options=Ve;for(const tt of ye)this._layerConfigs[tt.id]=tt,(this._layers[tt.id]=a.cu(tt,this.scope,null,this._options)).compileFilter(Ve),this.keyCache[tt.id]&&delete this.keyCache[tt.id];for(const tt of Ae)delete this.keyCache[tt],delete this._layerConfigs[tt],delete this._layers[tt];this.familiesBySource={};const Je=function(tt,ut){const bt={};for(let pt=0;pt<tt.length;pt++){const At=tt[pt];let It=ut&&ut[At.id];!It&&(It=N(At),At.type==="line"&&At.paint)&&function Gt(cr){return typeof cr=="string"&&cr==="line-progress"||(Array.isArray(cr)?cr.some(Gt):!(!cr||typeof cr!="object")&&Object.values(cr).some(Gt))}(At.paint["line-width"])&&(It+=`/${B(At.paint["line-width"])}`),ut&&(ut[At.id]=It);let Jt=bt[It];Jt||(Jt=bt[It]=[]),Jt.push(At)}const ft=[];for(const pt in bt)ft.push(bt[pt]);return ft}(a.bj(this._layerConfigs),this.keyCache);for(const tt of Je){const ut=tt.map(Jt=>this._layers[Jt.id]),bt=ut[0];if(bt.visibility==="none")continue;const ft=bt.source||"";let pt=this.familiesBySource[ft];pt||(pt=this.familiesBySource[ft]={});const At=bt.sourceLayer||"_geojsonTileLayer";let It=pt[At];It||(It=pt[At]=[]),It.push(ut)}}}const G=1*a.dX;class Q{constructor(ye){const Ae={},Ve=[];for(const bt in ye){const ft=ye[bt],pt=Ae[bt]={};for(const At in ft.glyphs){const It=ft.glyphs[+At];if(!It||It.bitmap.width===0||It.bitmap.height===0)continue;const Jt=It.metrics.localGlyph?G:1,Gt={x:0,y:0,w:It.bitmap.width+2*Jt,h:It.bitmap.height+2*Jt};Ve.push(Gt),pt[At]=Gt}}const{w:Je,h:tt}=a.C(Ve),ut=new a.dW({width:Je||1,height:tt||1});for(const bt in ye){const ft=ye[bt];for(const pt in ft.glyphs){const At=ft.glyphs[+pt];if(!At||At.bitmap.width===0||At.bitmap.height===0)continue;const It=Ae[bt][pt],Jt=At.metrics.localGlyph?G:1;a.dW.copy(At.bitmap,ut,{x:0,y:0},{x:It.x+Jt,y:It.y+Jt},At.bitmap)}}this.image=ut,this.positions=Ae}}a.dV(Q,"GlyphAtlas");class te{constructor(ye){this.tileID=new a.aG(ye.tileID.overscaledZ,ye.tileID.wrap,ye.tileID.canonical.z,ye.tileID.canonical.x,ye.tileID.canonical.y),this.tileZoom=ye.tileZoom,this.uid=ye.uid,this.zoom=ye.zoom,this.lut=ye.lut,this.canonical=ye.tileID.canonical,this.pixelRatio=ye.pixelRatio,this.tileSize=ye.tileSize,this.source=ye.source,this.scope=ye.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ye.showCollisionBoxes,this.collectResourceTiming=!!ye.request&&ye.request.collectResourceTiming,this.promoteId=ye.promoteId,this.isSymbolTile=ye.isSymbolTile,this.tileTransform=a.aQ(ye.tileID.canonical,ye.projection),this.projection=ye.projection,this.worldview=ye.worldview,this.localizableLayerIds=ye.localizableLayerIds,this.brightness=ye.brightness,this.extraShadowCaster=!!ye.extraShadowCaster,this.tessellationStep=ye.tessellationStep,this.scaleFactor=ye.scaleFactor}parse(ye,Ae,Ve,Je,tt){this.status="parsing",this.data=ye,this.collisionBoxArray=new a.aW;const ut=new a.dY(Object.keys(ye.layers).sort()),bt=new a.dZ(this.tileID,this.promoteId);bt.bucketLayerIDs=[];const ft={},pt=new a.d_(256,256),At={featureIndex:bt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:pt,availableImages:Ve,brightness:this.brightness,scaleFactor:this.scaleFactor},It=Ae.familiesBySource[this.source];for(const Qr in It){const Yn=ye.layers[Qr];if(!Yn)continue;let Dn=!1,un=!1,Jn=!1;for(const _s of It[Qr])_s[0].type==="symbol"?Dn=!0:un=!0,_s[0].is3D()&&_s[0].type!=="model"&&(Jn=!0);if(this.extraShadowCaster&&!Jn||this.isSymbolTile===!0&&!Dn||this.isSymbolTile===!1&&!un)continue;Yn.version===1&&a.w(`Vector tile source "${this.source}" layer "${Qr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Qn=ut.encode(Qr),ei=[];for(let _s=0,oi=0;_s<Yn.length;_s++){const hi=Yn.feature(_s),As=bt.getId(hi,Qr);if(this.localizableLayerIds&&this.localizableLayerIds.has(Qr)){const So=hi.properties?hi.properties.worldview:null;if(this.worldview&&typeof So=="string")if(So==="all")hi.properties.$localized=!0;else{if(!So.split(",").includes(this.worldview))continue;hi.properties.$localized=!0,hi.properties.worldview=this.worldview}}ei.push({feature:hi,id:As,index:oi,sourceLayerIndex:Qn}),oi++}for(const _s of It[Qr]){const oi=_s[0];(!this.extraShadowCaster||oi.is3D()&&oi.type!=="model")&&(this.isSymbolTile!==void 0&&oi.type==="symbol"!==this.isSymbolTile||oi.minzoom&&this.zoom<Math.floor(oi.minzoom)||oi.maxzoom&&this.zoom>=oi.maxzoom||oi.visibility!=="none"&&(Y(_s,this.zoom,At.brightness,Ve),(ft[oi.id]=oi.createBucket({index:bt.bucketLayerIDs.length,layers:_s,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Qn,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(ei,At,this.tileID.canonical,this.tileTransform),bt.bucketLayerIDs.push(_s.map(hi=>a.aC(hi.id,hi.scope)))))}}let Jt,Gt,cr,Ur;pt.trim();const Jr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Lr=()=>{if(Jt)return this.status="done",tt(Jt);if(this.extraShadowCaster)this.status="done",tt(null,{buckets:a.bj(ft).filter(Qr=>!Qr.isEmpty()),featureIndex:bt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:At.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Gt&&cr&&Ur){const Qr=new Q(Gt),Yn=new a.e1(cr,Ur,this.lut);for(const Dn in ft){const un=ft[Dn];un instanceof a.aX?(Y(un.layers,this.zoom,At.brightness,Ve),a.e2(un,Gt,Qr.positions,cr,Yn.iconPositions,this.showCollisionBoxes,Ve,this.tileID.canonical,this.tileZoom,this.projection,this.scaleFactor,this.pixelRatio,this.brightness)):un.hasPattern&&(un instanceof a.b1||un instanceof a.b2||un instanceof a.d5)&&(Y(un.layers,this.zoom,At.brightness,Ve),un.addFeatures(At,this.tileID.canonical,Yn.patternPositions,Ve,this.tileTransform,this.brightness))}this.status="done",tt(null,{buckets:a.bj(ft).filter(Dn=>!Dn.isEmpty()),featureIndex:bt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Qr.image,lineAtlas:pt,imageAtlas:Yn,brightness:At.brightness})}};if(!this.extraShadowCaster){const Qr=a.d$(At.glyphDependencies,un=>Object.keys(un).map(Number));Object.keys(Qr).length?Je.send("getGlyphs",{uid:this.uid,stacks:Qr,scope:this.scope},(un,Jn)=>{Jt||(Jt=un,Gt=Jn,Lr())},void 0,!1,Jr):Gt={};const Yn=Object.keys(At.iconDependencies);Yn.length?Je.send("getImages",{icons:Yn,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(un,Jn)=>{if(Jt)return;Jt=un;const Qn={};Object.values(Jn).some(ei=>ei.usvg)?this.rasterize(Je,Qn,Jn,At.iconDependencies,()=>{cr=Qn,Lr()}):(this.fillImageMap(Qn,At.iconDependencies,Jn),cr=Qn,Lr())},void 0,!1,Jr):cr={};const Dn=Object.keys(At.patternDependencies);Dn.length?Je.send("getImages",{icons:Dn,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(un,Jn)=>{if(!Jt){Jt=un;const Qn={};Object.values(Jn).some(ei=>ei.usvg)?this.rasterize(Je,Qn,Jn,At.patternDependencies,()=>{Ur=Qn,Lr()}):(this.fillImageMap(Qn,At.patternDependencies,Jn),Ur=Qn,Lr())}},void 0,!1,Jr):Ur={}}Lr()}fillImageMap(ye,Ae,Ve){for(const Je in Ve){const tt=Ae[Je]||[];for(const ut of tt)Ve[ut.id].usvg||(ye[ut.serialize()]=Ve[ut.id])}}getImageTaskQueue(ye,Ae,Ve){const Je={};for(const tt in Ae){const ut=Ve[tt]||[];for(const bt of ut){const ft=bt.serialize();Ae[bt.id].usvg?Je[ft]||(Je[ft]=bt):ye[ft]=Ae[bt.id]}}return Je}rasterize(ye,Ae,Ve,Je,tt){const ut=this.getImageTaskQueue(Ae,Ve,Je);this.rasterizeTask=ye.send("rasterizeImages",{scope:this.scope,imageTasks:ut},(bt,ft)=>{if(!bt)for(const pt in ft){const{id:At}=a.e0.deserializeFromString(pt);Ae[pt]=Object.assign({},Ve[At],{data:ft[pt]})}tt()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function Y(St,ye,Ae,Ve){const Je=new a.a8(ye,{brightness:Ae});for(const tt of St)tt.recalculate(Je,Ve)}class oe extends a.E{constructor(ye,Ae,Ve,Je,tt,ut){super(),this.actor=ye,this.layerIndex=Ae,this.availableImages=Ve,this.loadVectorData=tt||a.aD,this.loading={},this.loaded={},this.deduped=new a.aB(ye.scheduler),this.isSpriteLoaded=Je,this.scheduler=ye.scheduler,this.brightness=ut}loadTile(ye,Ae){const Ve=ye.uid,Je=ye&&ye.request,tt=Je&&Je.collectResourceTiming,ut=this.loading[Ve]=new te(ye);ut.abort=this.loadVectorData(ye,(bt,ft)=>{const pt=!this.loading[Ve];if(delete this.loading[Ve],ut.cancelRasterize(),pt||bt||!ft)return ut.status="done",pt||(this.loaded[Ve]=ut),Ae(bt);const At=ft.rawData,It={};ft.expires&&(It.expires=ft.expires),ft.cacheControl&&(It.cacheControl=ft.cacheControl),ut.vectorTile=ft.vectorTile||new a.e3.VectorTile(new a.bh(At));const Jt=()=>{ut.parse(ut.vectorTile,this.layerIndex,this.availableImages,this.actor,(Gt,cr)=>{if(Gt||!cr)return Ae(Gt);const Ur={};if(tt){const Jr=A(Je);Jr.length>0&&(Ur.resourceTiming=JSON.parse(JSON.stringify(Jr)))}Ae(null,a.l({rawTileData:At.slice(0)},cr,It,Ur))})};this.isSpriteLoaded?Jt():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Jt,{type:"parseTile",isSymbolTile:ye.isSymbolTile,zoom:ye.tileZoom}):Jt()}),this.loaded=this.loaded||{},this.loaded[Ve]=ut})}reloadTile(ye,Ae){const Ve=this.loaded,Je=ye.uid;if(Ve&&Ve[Je]){const tt=Ve[Je];tt.scaleFactor=ye.scaleFactor,tt.showCollisionBoxes=ye.showCollisionBoxes,tt.projection=ye.projection,tt.brightness=ye.brightness,tt.tileTransform=a.aQ(ye.tileID.canonical,ye.projection),tt.extraShadowCaster=ye.extraShadowCaster,tt.lut=ye.lut;const ut=(bt,ft)=>{const pt=tt.reloadCallback;pt&&(delete tt.reloadCallback,tt.parse(tt.vectorTile,this.layerIndex,this.availableImages,this.actor,pt)),Ae(bt,ft)};tt.status==="parsing"?tt.reloadCallback=ut:tt.status==="done"&&(tt.vectorTile?tt.parse(tt.vectorTile,this.layerIndex,this.availableImages,this.actor,ut):ut())}else Ae(null,void 0)}abortTile(ye,Ae){const Ve=ye.uid,Je=this.loading[Ve];Je&&(Je.abort&&Je.abort(),delete this.loading[Ve]),Ae()}removeTile(ye,Ae){const Ve=this.loaded,Je=ye.uid;Ve&&Ve[Je]&&delete Ve[Je],Ae()}}class de{loadTile(ye,Ae){const{uid:Ve,encoding:Je,rawImageData:tt,padding:ut}=ye,bt=ImageBitmap&&tt instanceof ImageBitmap?this.getImageData(tt,ut):tt;Ae(null,new a.e4(Ve,bt,Je,ut<1))}getImageData(ye,Ae){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ye.width,ye.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ye.width,this.offscreenCanvas.height=ye.height,this.offscreenCanvasContext.drawImage(ye,0,0,ye.width,ye.height);const Ve=this.offscreenCanvasContext.getImageData(-Ae,-Ae,ye.width+2*Ae,ye.height+2*Ae);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Ve}}a.bg.setPbf(a.bh);class me{decodeRasterArray({task:ye,buffer:Ae},Ve){a.bg.performDecoding(Ae,ye).then(Je=>{Ve(null,Je)},Je=>{Ve(Je)})}}const be=a.e3.VectorTileFeature.prototype.toGeoJSON;class pe{constructor(ye){this._feature=ye,this.extent=a.ag,this.type=ye.type,this.properties=ye.tags,"id"in ye&&!isNaN(ye.id)&&(this.id=parseInt(ye.id,10))}loadGeometry(){if(this._feature.type===1){const ye=[];for(const Ae of this._feature.geometry)ye.push([new a.P(Ae[0],Ae[1])]);return ye}{const ye=[];for(const Ae of this._feature.geometry){const Ve=[];for(const Je of Ae)Ve.push(new a.P(Je[0],Je[1]));ye.push(Ve)}return ye}}toGeoJSON(ye,Ae,Ve){return be.call(this,ye,Ae,Ve)}}class Se{constructor(ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.ag,this.length=ye.length,this._features=ye}feature(ye){return new pe(this._features[ye])}}const $e=64/4096,Le=128;class re{constructor(){this.features=new Map}clear(){this.features.clear()}load(ye=[],Ae){for(const Ve of ye){const Je=Ve.id;if(Je==null)continue;let tt=this.features.get(Je);tt&&this.updateCache(tt,Ae),Ve.geometry?(tt=se(Ve),this.updateCache(tt,Ae),this.features.set(Je,tt)):this.features.delete(Je),this.updateCache(tt,Ae)}}updateCache(ye,Ae){for(const{canonical:Ve,uid:Je}of Object.values(Ae)){const{z:tt,x:ut,y:bt}=Ve;Ee(ye,Math.pow(2,tt),ut,bt)&&delete Ae[Je]}}getTile(ye,Ae,Ve){const Je=Math.pow(2,ye),tt=[];for(const ut of this.features.values())Ee(ut,Je,Ae,Ve)&&tt.push(Pe(ut,Je,Ae,Ve));return{features:tt}}getFeatures(){return[...this.features.values()]}}function Ee({minX:St,minY:ye,maxX:Ae,maxY:Ve},Je,tt,ut){return St<(tt+1+$e)/Je&&ye<(ut+1+$e)/Je&&Ae>(tt-$e)/Je&&Ve>(ut-$e)/Je}function se(St){const{id:ye,geometry:Ae,properties:Ve}=St;if(!Ae)return;if(Ae.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Je,coordinates:tt}=Ae,ut={id:ye,type:1,geometry:[],tags:Ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},bt=ut.geometry;if(Je==="Point")ue(tt,bt,ut);else if(Je==="MultiPoint")for(const ft of tt)ue(ft,bt,ut);else if(Je==="LineString")ut.type=2,ke(tt,bt,ut);else if(Je==="MultiLineString")ut.type=2,ce(tt,bt,ut);else if(Je==="Polygon")ut.type=3,ce(tt,bt,ut,!0);else{if(Je!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");ut.type=3;for(const ft of tt)ce(ft,bt,ut,!0)}return ut}function ue([St,ye],Ae,Ve){const Je=a.at(St);let tt=a.aA(ye);tt=tt<0?0:tt>1?1:tt,Ae.push(Je,tt),Ve.minX=Math.min(Ve.minX,Je),Ve.minY=Math.min(Ve.minY,tt),Ve.maxX=Math.max(Ve.maxX,Je),Ve.maxY=Math.max(Ve.maxY,tt)}function ke(St,ye,Ae,Ve=!1,Je=!1){const tt=[];for(const ut of St)ue(ut,tt,Ae);ye.push(tt),Ve&&function(ut,bt){let ft=0;for(let pt=0,At=ut.length,It=At-2;pt<At;It=pt,pt+=2)ft+=(ut[pt]-ut[It])*(ut[pt+1]+ut[It+1]);if(ft>0===bt)for(let pt=0,At=ut.length;pt<At/2;pt+=2){const It=ut[pt],Jt=ut[pt+1];ut[pt]=ut[At-2-pt],ut[pt+1]=ut[At-1-pt],ut[At-2-pt]=It,ut[At-1-pt]=Jt}}(tt,Je)}function ce(St,ye,Ae,Ve=!1){for(let Je=0;Je<St.length;Je++)ke(St[Je],ye,Ae,Ve,Je===0)}function Pe(St,ye,Ae,Ve){const{id:Je,type:tt,geometry:ut,tags:bt}=St,ft=[];if(tt===1)(function(pt,At,It,Jt,Gt){for(let cr=0;cr<pt.length;cr+=2){const Ur=Math.round(a.ag*(pt[cr+0]*At-It)),Jr=Math.round(a.ag*(pt[cr+1]*At-Jt));Gt.push([Ur,Jr])}})(ut,ye,Ae,Ve,ft);else for(const pt of ut)xe(pt,ye,Ae,Ve,ft);return{id:Je,type:tt,geometry:ft,tags:bt}}function xe(St,ye,Ae,Ve,Je){const ut=a.ag+Le;let bt;for(let ft=0;ft<St.length-2;ft+=2){let pt=Math.round(a.ag*(St[ft+0]*ye-Ae)),At=Math.round(a.ag*(St[ft+1]*ye-Ve)),It=Math.round(a.ag*(St[ft+2]*ye-Ae)),Jt=Math.round(a.ag*(St[ft+3]*ye-Ve));const Gt=It-pt,cr=Jt-At;pt<-128&&It<-128||(pt<-128?(At+=Math.round(cr*((-128-pt)/Gt)),pt=-128):It<-128&&(Jt=At+Math.round(cr*((-128-pt)/Gt)),It=-128),At<-128&&Jt<-128||(At<-128?(pt+=Math.round(Gt*((-128-At)/cr)),At=-128):Jt<-128&&(It=pt+Math.round(Gt*((-128-At)/cr)),Jt=-128),pt>=ut&&It>=ut||(pt>=ut?(At+=Math.round(cr*((ut-pt)/Gt)),pt=ut):It>=ut&&(Jt=At+Math.round(cr*((ut-pt)/Gt)),It=ut),At>=ut&&Jt>=ut||(At>=ut?(pt+=Math.round(Gt*((ut-At)/cr)),At=ut):Jt>=ut&&(It=pt+Math.round(Gt*((ut-At)/cr)),Jt=ut),bt&&pt===bt[bt.length-1][0]&&At===bt[bt.length-1][1]||(bt=[[pt,At]],Je.push(bt)),bt.push([It,Jt])))))}}var Te,Ie,Me,Xe={exports:{}},Ce=function(){if(Me)return Xe.exports;Me=1;var St=a.e7(),ye=function(){if(Ie)return Te;Ie=1;var At=a.e5(),It=a.e6().VectorTileFeature;function Jt(cr,Ur){this.options=Ur||{},this.features=cr,this.length=cr.length}function Gt(cr,Ur){this.id=typeof cr.id=="number"?cr.id:void 0,this.type=cr.type,this.rawGeometry=cr.type===1?[cr.geometry]:cr.geometry,this.properties=cr.tags,this.extent=Ur||4096}return Te=Jt,Jt.prototype.feature=function(cr){return new Gt(this.features[cr],this.options.extent)},Gt.prototype.loadGeometry=function(){var cr=this.rawGeometry;this.geometry=[];for(var Ur=0;Ur<cr.length;Ur++){for(var Jr=cr[Ur],Lr=[],Qr=0;Qr<Jr.length;Qr++)Lr.push(new At(Jr[Qr][0],Jr[Qr][1]));this.geometry.push(Lr)}return this.geometry},Gt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var cr=this.geometry,Ur=1/0,Jr=-1/0,Lr=1/0,Qr=-1/0,Yn=0;Yn<cr.length;Yn++)for(var Dn=cr[Yn],un=0;un<Dn.length;un++){var Jn=Dn[un];Ur=Math.min(Ur,Jn.x),Jr=Math.max(Jr,Jn.x),Lr=Math.min(Lr,Jn.y),Qr=Math.max(Qr,Jn.y)}return[Ur,Lr,Jr,Qr]},Gt.prototype.toGeoJSON=It.prototype.toGeoJSON,Te}();function Ae(At){var It=new St;return function(Jt,Gt){for(var cr in Jt.layers)Gt.writeMessage(3,Ve,Jt.layers[cr])}(At,It),It.finish()}function Ve(At,It){var Jt;It.writeVarintField(15,At.version||1),It.writeStringField(1,At.name||""),It.writeVarintField(5,At.extent||4096);var Gt={keys:[],values:[],keycache:{},valuecache:{}};for(Jt=0;Jt<At.length;Jt++)Gt.feature=At.feature(Jt),It.writeMessage(2,Je,Gt);var cr=Gt.keys;for(Jt=0;Jt<cr.length;Jt++)It.writeStringField(3,cr[Jt]);var Ur=Gt.values;for(Jt=0;Jt<Ur.length;Jt++)It.writeMessage(4,pt,Ur[Jt])}function Je(At,It){var Jt=At.feature;Jt.id!==void 0&&It.writeVarintField(1,Jt.id),It.writeMessage(2,tt,At),It.writeVarintField(3,Jt.type),It.writeMessage(4,ft,Jt)}function tt(At,It){var Jt=At.feature,Gt=At.keys,cr=At.values,Ur=At.keycache,Jr=At.valuecache;for(var Lr in Jt.properties){var Qr=Jt.properties[Lr],Yn=Ur[Lr];if(Qr!==null){Yn===void 0&&(Gt.push(Lr),Ur[Lr]=Yn=Gt.length-1),It.writeVarint(Yn);var Dn=typeof Qr;Dn!=="string"&&Dn!=="boolean"&&Dn!=="number"&&(Qr=JSON.stringify(Qr));var un=Dn+":"+Qr,Jn=Jr[un];Jn===void 0&&(cr.push(Qr),Jr[un]=Jn=cr.length-1),It.writeVarint(Jn)}}}function ut(At,It){return(It<<3)+(7&At)}function bt(At){return At<<1^At>>31}function ft(At,It){for(var Jt=At.loadGeometry(),Gt=At.type,cr=0,Ur=0,Jr=Jt.length,Lr=0;Lr<Jr;Lr++){var Qr=Jt[Lr],Yn=1;Gt===1&&(Yn=Qr.length),It.writeVarint(ut(1,Yn));for(var Dn=Gt===3?Qr.length-1:Qr.length,un=0;un<Dn;un++){un===1&&Gt!==1&&It.writeVarint(ut(2,Dn-1));var Jn=Qr[un].x-cr,Qn=Qr[un].y-Ur;It.writeVarint(bt(Jn)),It.writeVarint(bt(Qn)),cr+=Jn,Ur+=Qn}Gt===3&&It.writeVarint(ut(7,1))}}function pt(At,It){var Jt=typeof At;Jt==="string"?It.writeStringField(1,At):Jt==="boolean"?It.writeBooleanField(7,At):Jt==="number"&&(At%1!=0?It.writeDoubleField(3,At):At<0?It.writeSVarintField(6,At):It.writeVarintField(5,At))}return Xe.exports=Ae,Xe.exports.fromVectorTileJs=Ae,Xe.exports.fromGeojsonVt=function(At,It){It=It||{};var Jt={};for(var Gt in At)Jt[Gt]=new ye(At[Gt].features,It),Jt[Gt].name=Gt,Jt[Gt].version=It.version,Jt[Gt].extent=It.extent;return Ae({layers:Jt})},Xe.exports.GeoJSONWrapper=ye,Xe.exports}(),He=a.e8(Ce);const et={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:St=>St},Ke=Math.fround||(ot=new Float32Array(1),St=>(ot[0]=+St,ot[0]));var ot;const Pt=3,Et=5,Wt=6;class Dt{constructor(ye){this.options=Object.assign(Object.create(et),ye),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ye){const{log:Ae,minZoom:Ve,maxZoom:Je}=this.options;Ae&&console.time("total time");const tt=`prepare ${ye.length} points`;Ae&&console.time(tt),this.points=ye;const ut=[];for(let ft=0;ft<ye.length;ft++){const pt=ye[ft];if(!pt.geometry)continue;const[At,It]=pt.geometry.coordinates,Jt=Ke(ur(At)),Gt=Ke(Sr(It));ut.push(Jt,Gt,1/0,ft,-1,1),this.options.reduce&&ut.push(0)}let bt=this.trees[Je+1]=this._createTree(ut);Ae&&console.timeEnd(tt);for(let ft=Je;ft>=Ve;ft--){const pt=+Date.now();bt=this.trees[ft]=this._createTree(this._cluster(bt,ft)),Ae&&console.log("z%d: %d clusters in %dms",ft,bt.numItems,+Date.now()-pt)}return Ae&&console.timeEnd("total time"),this}getClusters(ye,Ae){let Ve=((ye[0]+180)%360+360)%360-180;const Je=Math.max(-90,Math.min(90,ye[1]));let tt=ye[2]===180?180:((ye[2]+180)%360+360)%360-180;const ut=Math.max(-90,Math.min(90,ye[3]));if(ye[2]-ye[0]>=360)Ve=-180,tt=180;else if(Ve>tt){const It=this.getClusters([Ve,Je,180,ut],Ae),Jt=this.getClusters([-180,Je,tt,ut],Ae);return It.concat(Jt)}const bt=this.trees[this._limitZoom(Ae)],ft=bt.range(ur(Ve),Sr(ut),ur(tt),Sr(Je)),pt=bt.data,At=[];for(const It of ft){const Jt=this.stride*It;At.push(pt[Jt+Et]>1?er(pt,Jt,this.clusterProps):this.points[pt[Jt+Pt]])}return At}getChildren(ye){const Ae=this._getOriginId(ye),Ve=this._getOriginZoom(ye),Je="No cluster with the specified id.",tt=this.trees[Ve];if(!tt)throw new Error(Je);const ut=tt.data;if(Ae*this.stride>=ut.length)throw new Error(Je);const bt=this.options.radius/(this.options.extent*Math.pow(2,Ve-1)),ft=tt.within(ut[Ae*this.stride],ut[Ae*this.stride+1],bt),pt=[];for(const At of ft){const It=At*this.stride;ut[It+4]===ye&&pt.push(ut[It+Et]>1?er(ut,It,this.clusterProps):this.points[ut[It+Pt]])}if(pt.length===0)throw new Error(Je);return pt}getLeaves(ye,Ae,Ve){const Je=[];return this._appendLeaves(Je,ye,Ae=Ae||10,Ve=Ve||0,0),Je}getTile(ye,Ae,Ve){const Je=this.trees[this._limitZoom(ye)],tt=Math.pow(2,ye),{extent:ut,radius:bt}=this.options,ft=bt/ut,pt=(Ve-ft)/tt,At=(Ve+1+ft)/tt,It={features:[]};return this._addTileFeatures(Je.range((Ae-ft)/tt,pt,(Ae+1+ft)/tt,At),Je.data,Ae,Ve,tt,It),Ae===0&&this._addTileFeatures(Je.range(1-ft/tt,pt,1,At),Je.data,tt,Ve,tt,It),Ae===tt-1&&this._addTileFeatures(Je.range(0,pt,ft/tt,At),Je.data,-1,Ve,tt,It),It.features.length?It:null}getClusterExpansionZoom(ye){let Ae=this._getOriginZoom(ye)-1;for(;Ae<=this.options.maxZoom;){const Ve=this.getChildren(ye);if(Ae++,Ve.length!==1)break;ye=Ve[0].properties.cluster_id}return Ae}_appendLeaves(ye,Ae,Ve,Je,tt){const ut=this.getChildren(Ae);for(const bt of ut){const ft=bt.properties;if(ft&&ft.cluster?tt+ft.point_count<=Je?tt+=ft.point_count:tt=this._appendLeaves(ye,ft.cluster_id,Ve,Je,tt):tt<Je?tt++:ye.push(bt),ye.length===Ve)break}return tt}_createTree(ye){const Ae=new a.bE(ye.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ve=0;Ve<ye.length;Ve+=this.stride)Ae.add(ye[Ve],ye[Ve+1]);return Ae.finish(),Ae.data=ye,Ae}_addTileFeatures(ye,Ae,Ve,Je,tt,ut){for(const bt of ye){const ft=bt*this.stride,pt=Ae[ft+Et]>1;let At,It,Jt;if(pt)At=De(Ae,ft,this.clusterProps),It=Ae[ft],Jt=Ae[ft+1];else{const Ur=this.points[Ae[ft+Pt]];At=Ur.properties;const[Jr,Lr]=Ur.geometry.coordinates;It=ur(Jr),Jt=Sr(Lr)}const Gt={type:1,geometry:[[Math.round(this.options.extent*(It*tt-Ve)),Math.round(this.options.extent*(Jt*tt-Je))]],tags:At};let cr;cr=pt||this.options.generateId?Ae[ft+Pt]:this.points[Ae[ft+Pt]].id,cr!==void 0&&(Gt.id=cr),ut.features.push(Gt)}}_limitZoom(ye){return Math.max(this.options.minZoom,Math.min(Math.floor(+ye),this.options.maxZoom+1))}_cluster(ye,Ae){const{radius:Ve,extent:Je,reduce:tt,minPoints:ut}=this.options,bt=Ve/(Je*Math.pow(2,Ae)),ft=ye.data,pt=[],At=this.stride;for(let It=0;It<ft.length;It+=At){if(ft[It+2]<=Ae)continue;ft[It+2]=Ae;const Jt=ft[It],Gt=ft[It+1],cr=ye.within(ft[It],ft[It+1],bt),Ur=ft[It+Et];let Jr=Ur;for(const Lr of cr){const Qr=Lr*At;ft[Qr+2]>Ae&&(Jr+=ft[Qr+Et])}if(Jr>Ur&&Jr>=ut){let Lr,Qr=Jt*Ur,Yn=Gt*Ur,Dn=-1;const un=(It/At<<5)+(Ae+1)+this.points.length;for(const Jn of cr){const Qn=Jn*At;if(ft[Qn+2]<=Ae)continue;ft[Qn+2]=Ae;const ei=ft[Qn+Et];Qr+=ft[Qn]*ei,Yn+=ft[Qn+1]*ei,ft[Qn+4]=un,tt&&(Lr||(Lr=this._map(ft,It,!0),Dn=this.clusterProps.length,this.clusterProps.push(Lr)),tt(Lr,this._map(ft,Qn)))}ft[It+4]=un,pt.push(Qr/Jr,Yn/Jr,1/0,un,-1,Jr),tt&&pt.push(Dn)}else{for(let Lr=0;Lr<At;Lr++)pt.push(ft[It+Lr]);if(Jr>1)for(const Lr of cr){const Qr=Lr*At;if(!(ft[Qr+2]<=Ae)){ft[Qr+2]=Ae;for(let Yn=0;Yn<At;Yn++)pt.push(ft[Qr+Yn])}}}}return pt}_getOriginId(ye){return ye-this.points.length>>5}_getOriginZoom(ye){return(ye-this.points.length)%32}_map(ye,Ae,Ve){if(ye[Ae+Et]>1){const ut=this.clusterProps[ye[Ae+Wt]];return Ve?Object.assign({},ut):ut}const Je=this.points[ye[Ae+Pt]].properties,tt=this.options.map(Je);return Ve&&tt===Je?Object.assign({},tt):tt}}function er(St,ye,Ae){return{type:"Feature",id:St[ye+Pt],properties:De(St,ye,Ae),geometry:{type:"Point",coordinates:[(Ve=St[ye],360*(Ve-.5)),yt(St[ye+1])]}};var Ve}function De(St,ye,Ae){const Ve=St[ye+Et],Je=Ve>=1e4?`${Math.round(Ve/1e3)}k`:Ve>=1e3?Math.round(Ve/100)/10+"k":Ve,tt=St[ye+Wt],ut=tt===-1?{}:Object.assign({},Ae[tt]);return Object.assign(ut,{cluster:!0,cluster_id:St[ye+Pt],point_count:Ve,point_count_abbreviated:Je})}function ur(St){return St/360+.5}function Sr(St){const ye=Math.sin(St*Math.PI/180),Ae=.5-.25*Math.log((1+ye)/(1-ye))/Math.PI;return Ae<0?0:Ae>1?1:Ae}function yt(St){const ye=(180-360*St)*Math.PI/180;return 360*Math.atan(Math.exp(ye))/Math.PI-90}function dt(St,ye,Ae,Ve){let Je=Ve;const tt=ye+(Ae-ye>>1);let ut,bt=Ae-ye;const ft=St[ye],pt=St[ye+1],At=St[Ae],It=St[Ae+1];for(let Jt=ye+3;Jt<Ae;Jt+=3){const Gt=$t(St[Jt],St[Jt+1],ft,pt,At,It);if(Gt>Je)ut=Jt,Je=Gt;else if(Gt===Je){const cr=Math.abs(Jt-tt);cr<bt&&(ut=Jt,bt=cr)}}Je>Ve&&(ut-ye>3&&dt(St,ye,ut,Ve),St[ut+2]=Je,Ae-ut>3&&dt(St,ut,Ae,Ve))}function $t(St,ye,Ae,Ve,Je,tt){let ut=Je-Ae,bt=tt-Ve;if(ut!==0||bt!==0){const ft=((St-Ae)*ut+(ye-Ve)*bt)/(ut*ut+bt*bt);ft>1?(Ae=Je,Ve=tt):ft>0&&(Ae+=ut*ft,Ve+=bt*ft)}return ut=St-Ae,bt=ye-Ve,ut*ut+bt*bt}function or(St,ye,Ae,Ve){const Je={id:St??null,type:ye,geometry:Ae,tags:Ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")Er(Je,Ae);else if(ye==="Polygon")Er(Je,Ae[0]);else if(ye==="MultiLineString")for(const tt of Ae)Er(Je,tt);else if(ye==="MultiPolygon")for(const tt of Ae)Er(Je,tt[0]);return Je}function Er(St,ye){for(let Ae=0;Ae<ye.length;Ae+=3)St.minX=Math.min(St.minX,ye[Ae]),St.minY=Math.min(St.minY,ye[Ae+1]),St.maxX=Math.max(St.maxX,ye[Ae]),St.maxY=Math.max(St.maxY,ye[Ae+1])}function mr(St,ye,Ae,Ve){if(!ye.geometry)return;const Je=ye.geometry.coordinates;if(Je&&Je.length===0)return;const tt=ye.geometry.type,ut=Math.pow(Ae.tolerance/((1<<Ae.maxZoom)*Ae.extent),2);let bt=[],ft=ye.id;if(Ae.promoteId?ft=ye.properties[Ae.promoteId]:Ae.generateId&&(ft=Ve||0),tt==="Point")Pr(Je,bt);else if(tt==="MultiPoint")for(const pt of Je)Pr(pt,bt);else if(tt==="LineString")Fr(Je,bt,ut,!1);else if(tt==="MultiLineString"){if(Ae.lineMetrics){for(const pt of Je)bt=[],Fr(pt,bt,ut,!1),St.push(or(ft,"LineString",bt,ye.properties));return}Bn(Je,bt,ut,!1)}else if(tt==="Polygon")Bn(Je,bt,ut,!0);else{if(tt!=="MultiPolygon"){if(tt==="GeometryCollection"){for(const pt of ye.geometry.geometries)mr(St,{id:ft,geometry:pt,properties:ye.properties},Ae,Ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const pt of Je){const At=[];Bn(pt,At,ut,!0),bt.push(At)}}St.push(or(ft,tt,bt,ye.properties))}function Pr(St,ye){ye.push(Xr(St[0]),On(St[1]),0)}function Fr(St,ye,Ae,Ve){let Je,tt,ut=0;for(let ft=0;ft<St.length;ft++){const pt=Xr(St[ft][0]),At=On(St[ft][1]);ye.push(pt,At,0),ft>0&&(ut+=Ve?(Je*At-pt*tt)/2:Math.sqrt(Math.pow(pt-Je,2)+Math.pow(At-tt,2))),Je=pt,tt=At}const bt=ye.length-3;ye[2]=1,dt(ye,0,bt,Ae),ye[bt+2]=1,ye.size=Math.abs(ut),ye.start=0,ye.end=ye.size}function Bn(St,ye,Ae,Ve){for(let Je=0;Je<St.length;Je++){const tt=[];Fr(St[Je],tt,Ae,Ve),ye.push(tt)}}function Xr(St){return St/360+.5}function On(St){const ye=Math.sin(St*Math.PI/180),Ae=.5-.25*Math.log((1+ye)/(1-ye))/Math.PI;return Ae<0?0:Ae>1?1:Ae}function fr(St,ye,Ae,Ve,Je,tt,ut,bt){if(Ve/=ye,tt>=(Ae/=ye)&&ut<Ve)return St;if(ut<Ae||tt>=Ve)return null;const ft=[];for(const pt of St){const At=pt.geometry;let It=pt.type;const Jt=Je===0?pt.minX:pt.minY,Gt=Je===0?pt.maxX:pt.maxY;if(Jt>=Ae&&Gt<Ve){ft.push(pt);continue}if(Gt<Ae||Jt>=Ve)continue;let cr=[];if(It==="Point"||It==="MultiPoint")Tn(At,cr,Ae,Ve,Je);else if(It==="LineString")kr(At,cr,Ae,Ve,Je,!1,bt.lineMetrics);else if(It==="MultiLineString")Br(At,cr,Ae,Ve,Je,!1);else if(It==="Polygon")Br(At,cr,Ae,Ve,Je,!0);else if(It==="MultiPolygon")for(const Ur of At){const Jr=[];Br(Ur,Jr,Ae,Ve,Je,!0),Jr.length&&cr.push(Jr)}if(cr.length){if(bt.lineMetrics&&It==="LineString"){for(const Ur of cr)ft.push(or(pt.id,It,Ur,pt.tags));continue}It!=="LineString"&&It!=="MultiLineString"||(cr.length===1?(It="LineString",cr=cr[0]):It="MultiLineString"),It!=="Point"&&It!=="MultiPoint"||(It=cr.length===3?"Point":"MultiPoint"),ft.push(or(pt.id,It,cr,pt.tags))}}return ft.length?ft:null}function Tn(St,ye,Ae,Ve,Je){for(let tt=0;tt<St.length;tt+=3){const ut=St[tt+Je];ut>=Ae&&ut<=Ve&&an(ye,St[tt],St[tt+1],St[tt+2])}}function kr(St,ye,Ae,Ve,Je,tt,ut){let bt=Dr(St);const ft=Je===0?Sa:Za;let pt,At,It=St.start;for(let Jr=0;Jr<St.length-3;Jr+=3){const Lr=St[Jr],Qr=St[Jr+1],Yn=St[Jr+2],Dn=St[Jr+3],un=St[Jr+4],Jn=Je===0?Lr:Qr,Qn=Je===0?Dn:un;let ei=!1;ut&&(pt=Math.sqrt(Math.pow(Lr-Dn,2)+Math.pow(Qr-un,2))),Jn<Ae?Qn>Ae&&(At=ft(bt,Lr,Qr,Dn,un,Ae),ut&&(bt.start=It+pt*At)):Jn>Ve?Qn<Ve&&(At=ft(bt,Lr,Qr,Dn,un,Ve),ut&&(bt.start=It+pt*At)):an(bt,Lr,Qr,Yn),Qn<Ae&&Jn>=Ae&&(At=ft(bt,Lr,Qr,Dn,un,Ae),ei=!0),Qn>Ve&&Jn<=Ve&&(At=ft(bt,Lr,Qr,Dn,un,Ve),ei=!0),!tt&&ei&&(ut&&(bt.end=It+pt*At),ye.push(bt),bt=Dr(St)),ut&&(It+=pt)}let Jt=St.length-3;const Gt=St[Jt],cr=St[Jt+1],Ur=Je===0?Gt:cr;Ur>=Ae&&Ur<=Ve&&an(bt,Gt,cr,St[Jt+2]),Jt=bt.length-3,tt&&Jt>=3&&(bt[Jt]!==bt[0]||bt[Jt+1]!==bt[1])&&an(bt,bt[0],bt[1],bt[2]),bt.length&&ye.push(bt)}function Dr(St){const ye=[];return ye.size=St.size,ye.start=St.start,ye.end=St.end,ye}function Br(St,ye,Ae,Ve,Je,tt){for(const ut of St)kr(ut,ye,Ae,Ve,Je,tt,!1)}function an(St,ye,Ae,Ve){St.push(ye,Ae,Ve)}function Sa(St,ye,Ae,Ve,Je,tt){const ut=(tt-ye)/(Ve-ye);return an(St,tt,Ae+(Je-Ae)*ut,1),ut}function Za(St,ye,Ae,Ve,Je,tt){const ut=(tt-Ae)/(Je-Ae);return an(St,ye+(Ve-ye)*ut,tt,1),ut}function oa(St,ye){const Ae=[];for(let Ve=0;Ve<St.length;Ve++){const Je=St[Ve],tt=Je.type;let ut;if(tt==="Point"||tt==="MultiPoint"||tt==="LineString")ut=qn(Je.geometry,ye);else if(tt==="MultiLineString"||tt==="Polygon"){ut=[];for(const bt of Je.geometry)ut.push(qn(bt,ye))}else if(tt==="MultiPolygon"){ut=[];for(const bt of Je.geometry){const ft=[];for(const pt of bt)ft.push(qn(pt,ye));ut.push(ft)}}Ae.push(or(Je.id,tt,ut,Je.tags))}return Ae}function qn(St,ye){const Ae=[];Ae.size=St.size,St.start!==void 0&&(Ae.start=St.start,Ae.end=St.end);for(let Ve=0;Ve<St.length;Ve+=3)Ae.push(St[Ve]+ye,St[Ve+1],St[Ve+2]);return Ae}function Wn(St,ye){if(St.transformed)return St;const Ae=1<<St.z,Ve=St.x,Je=St.y;for(const tt of St.features){const ut=tt.geometry,bt=tt.type;if(tt.geometry=[],bt===1)for(let ft=0;ft<ut.length;ft+=2)tt.geometry.push(Da(ut[ft],ut[ft+1],ye,Ae,Ve,Je));else for(let ft=0;ft<ut.length;ft++){const pt=[];for(let At=0;At<ut[ft].length;At+=2)pt.push(Da(ut[ft][At],ut[ft][At+1],ye,Ae,Ve,Je));tt.geometry.push(pt)}}return St.transformed=!0,St}function Da(St,ye,Ae,Ve,Je,tt){return[Math.round(Ae*(St*Ve-Je)),Math.round(Ae*(ye*Ve-tt))]}function Ia(St,ye,Ae,Ve,Je){const tt=ye===Je.maxZoom?0:Je.tolerance/((1<<ye)*Je.extent),ut={features:[],numPoints:0,numSimplified:0,numFeatures:St.length,source:null,x:Ae,y:Ve,z:ye,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const bt of St)ja(ut,bt,tt,Je);return ut}function ja(St,ye,Ae,Ve){const Je=ye.geometry,tt=ye.type,ut=[];if(St.minX=Math.min(St.minX,ye.minX),St.minY=Math.min(St.minY,ye.minY),St.maxX=Math.max(St.maxX,ye.maxX),St.maxY=Math.max(St.maxY,ye.maxY),tt==="Point"||tt==="MultiPoint")for(let bt=0;bt<Je.length;bt+=3)ut.push(Je[bt],Je[bt+1]),St.numPoints++,St.numSimplified++;else if(tt==="LineString")Wr(ut,Je,St,Ae,!1,!1);else if(tt==="MultiLineString"||tt==="Polygon")for(let bt=0;bt<Je.length;bt++)Wr(ut,Je[bt],St,Ae,tt==="Polygon",bt===0);else if(tt==="MultiPolygon")for(let bt=0;bt<Je.length;bt++){const ft=Je[bt];for(let pt=0;pt<ft.length;pt++)Wr(ut,ft[pt],St,Ae,!0,pt===0)}if(ut.length){let bt=ye.tags||null;if(tt==="LineString"&&Ve.lineMetrics){bt={};for(const pt in ye.tags)bt[pt]=ye.tags[pt];bt.mapbox_clip_start=Je.start/Je.size,bt.mapbox_clip_end=Je.end/Je.size}const ft={geometry:ut,type:tt==="Polygon"||tt==="MultiPolygon"?3:tt==="LineString"||tt==="MultiLineString"?2:1,tags:bt};ye.id!==null&&(ft.id=ye.id),St.features.push(ft)}}function Wr(St,ye,Ae,Ve,Je,tt){const ut=Ve*Ve;if(Ve>0&&ye.size<(Je?ut:Ve))return void(Ae.numPoints+=ye.length/3);const bt=[];for(let ft=0;ft<ye.length;ft+=3)(Ve===0||ye[ft+2]>ut)&&(Ae.numSimplified++,bt.push(ye[ft],ye[ft+1])),Ae.numPoints++;Je&&function(ft,pt){let At=0;for(let It=0,Jt=ft.length,Gt=Jt-2;It<Jt;Gt=It,It+=2)At+=(ft[It]-ft[Gt])*(ft[It+1]+ft[Gt+1]);if(At>0===pt)for(let It=0,Jt=ft.length;It<Jt/2;It+=2){const Gt=ft[It],cr=ft[It+1];ft[It]=ft[Jt-2-It],ft[It+1]=ft[Jt-1-It],ft[Jt-2-It]=Gt,ft[Jt-1-It]=cr}}(bt,tt),St.push(bt)}const yi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Zn{constructor(ye,Ae){const Ve=(Ae=this.options=function(tt,ut){for(const bt in ut)tt[bt]=ut[bt];return tt}(Object.create(yi),Ae)).debug;if(Ve&&console.time("preprocess data"),Ae.maxZoom<0||Ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ae.promoteId&&Ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let Je=function(tt,ut){const bt=[];if(tt.type==="FeatureCollection")for(let ft=0;ft<tt.features.length;ft++)mr(bt,tt.features[ft],ut,ft);else mr(bt,tt.type==="Feature"?tt:{geometry:tt},ut);return bt}(ye,Ae);this.tiles={},this.tileCoords=[],Ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ae.indexMaxZoom,Ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Je=function(tt,ut){const bt=ut.buffer/ut.extent;let ft=tt;const pt=fr(tt,1,-1-bt,bt,0,-1,2,ut),At=fr(tt,1,1-bt,2+bt,0,-1,2,ut);return(pt||At)&&(ft=fr(tt,1,-bt,1+bt,0,-1,2,ut)||[],pt&&(ft=oa(pt,1).concat(ft)),At&&(ft=ft.concat(oa(At,-1)))),ft}(Je,Ae),Je.length&&this.splitTile(Je,0,0,0),Ve&&(Je.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ye,Ae,Ve,Je,tt,ut,bt){const ft=[ye,Ae,Ve,Je],pt=this.options,At=pt.debug;for(;ft.length;){Je=ft.pop(),Ve=ft.pop(),Ae=ft.pop(),ye=ft.pop();const It=1<<Ae,Jt=cn(Ae,Ve,Je);let Gt=this.tiles[Jt];if(!Gt&&(At>1&&console.time("creation"),Gt=this.tiles[Jt]=Ia(ye,Ae,Ve,Je,pt),this.tileCoords.push({z:Ae,x:Ve,y:Je}),At)){At>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ae,Ve,Je,Gt.numFeatures,Gt.numPoints,Gt.numSimplified),console.timeEnd("creation"));const ei=`z${Ae}`;this.stats[ei]=(this.stats[ei]||0)+1,this.total++}if(Gt.source=ye,tt==null){if(Ae===pt.indexMaxZoom||Gt.numPoints<=pt.indexMaxPoints)continue}else{if(Ae===pt.maxZoom||Ae===tt)continue;if(tt!=null){const ei=tt-Ae;if(Ve!==ut>>ei||Je!==bt>>ei)continue}}if(Gt.source=null,ye.length===0)continue;At>1&&console.time("clipping");const cr=.5*pt.buffer/pt.extent,Ur=.5-cr,Jr=.5+cr,Lr=1+cr;let Qr=null,Yn=null,Dn=null,un=null,Jn=fr(ye,It,Ve-cr,Ve+Jr,0,Gt.minX,Gt.maxX,pt),Qn=fr(ye,It,Ve+Ur,Ve+Lr,0,Gt.minX,Gt.maxX,pt);ye=null,Jn&&(Qr=fr(Jn,It,Je-cr,Je+Jr,1,Gt.minY,Gt.maxY,pt),Yn=fr(Jn,It,Je+Ur,Je+Lr,1,Gt.minY,Gt.maxY,pt),Jn=null),Qn&&(Dn=fr(Qn,It,Je-cr,Je+Jr,1,Gt.minY,Gt.maxY,pt),un=fr(Qn,It,Je+Ur,Je+Lr,1,Gt.minY,Gt.maxY,pt),Qn=null),At>1&&console.timeEnd("clipping"),ft.push(Qr||[],Ae+1,2*Ve,2*Je),ft.push(Yn||[],Ae+1,2*Ve,2*Je+1),ft.push(Dn||[],Ae+1,2*Ve+1,2*Je),ft.push(un||[],Ae+1,2*Ve+1,2*Je+1)}}getTile(ye,Ae,Ve){ye=+ye,Ae=+Ae,Ve=+Ve;const Je=this.options,{extent:tt,debug:ut}=Je;if(ye<0||ye>24)return null;const bt=1<<ye,ft=cn(ye,Ae=Ae+bt&bt-1,Ve);if(this.tiles[ft])return Wn(this.tiles[ft],tt);ut>1&&console.log("drilling down to z%d-%d-%d",ye,Ae,Ve);let pt,At=ye,It=Ae,Jt=Ve;for(;!pt&&At>0;)At--,It>>=1,Jt>>=1,pt=this.tiles[cn(At,It,Jt)];return pt&&pt.source?(ut>1&&(console.log("found parent tile z%d-%d-%d",At,It,Jt),console.time("drilling down")),this.splitTile(pt.source,At,It,Jt,ye,Ae,Ve),ut>1&&console.timeEnd("drilling down"),this.tiles[ft]?Wn(this.tiles[ft],tt):null):null}}function cn(St,ye,Ae){return 32*((1<<St)*Ae+ye)+St}function ya(St,ye){const Ae=St.tileID.canonical;if(!this._geoJSONIndex)return void ye(null,null);const Ve=this._geoJSONIndex.getTile(Ae.z,Ae.x,Ae.y);if(!Ve)return void ye(null,null);const Je=new Se(Ve.features);let tt=He(Je);tt.byteOffset===0&&tt.byteLength===tt.buffer.byteLength||(tt=new Uint8Array(tt)),ye(null,{vectorTile:Je,rawData:tt.buffer})}class Xa extends oe{constructor(ye,Ae,Ve,Je,tt,ut){super(ye,Ae,Ve,Je,ya,ut),tt&&(this.loadGeoJSON=tt),this._dynamicIndex=new re}loadData(ye,Ae){const Ve=ye&&ye.request,Je=Ve&&Ve.collectResourceTiming;this.loadGeoJSON(ye,(tt,ut)=>{if(tt||!ut)return Ae(tt);if(typeof ut!="object")return Ae(new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`));{try{if(ye.filter){const ft=a.U(ye.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ft.result==="error")throw new Error(ft.value.map(pt=>`${pt.key}: ${pt.message}`).join(", "));ut.features=ut.features.filter(pt=>ft.value.evaluate({zoom:0},pt))}ye.dynamic?(ut.type==="Feature"&&(ut={type:"FeatureCollection",features:[ut]}),ye.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(ut.features,this.loaded),ye.cluster&&(ut.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=ye.cluster?new Dt(function({superclusterOptions:ft,clusterProperties:pt}){if(!pt||!ft)return ft;const At={},It={},Jt={accumulated:null,zoom:0},Gt={properties:null},cr=Object.keys(pt);for(const Ur of cr){const[Jr,Lr]=pt[Ur],Qr=a.U(Lr),Yn=a.U(typeof Jr=="string"?[Jr,["accumulated"],["get",Ur]]:Jr);At[Ur]=Qr.value,It[Ur]=Yn.value}return ft.map=Ur=>{Gt.properties=Ur;const Jr={};for(const Lr of cr)Jr[Lr]=At[Lr].evaluate(Jt,Gt);return Jr},ft.reduce=(Ur,Jr)=>{Gt.properties=Jr;for(const Lr of cr)Jt.accumulated=Ur[Lr],Ur[Lr]=It[Lr].evaluate(Jt,Gt)},ft}(ye)).load(ut.features):ye.dynamic?this._dynamicIndex:function(ft,pt){return new Zn(ft,pt)}(ut,ye.geojsonVtOptions)}catch(ft){return Ae(ft)}const bt={};if(Je){const ft=A(Ve);ft&&(bt.resourceTiming={},bt.resourceTiming[ye.source]=JSON.parse(JSON.stringify(ft)))}Ae(null,bt)}})}reloadTile(ye,Ae){const Ve=this.loaded;return Ve&&Ve[ye.uid]?ye.partial?Ae(null,void 0):super.reloadTile(ye,Ae):this.loadTile(ye,Ae)}loadGeoJSON(ye,Ae){if(ye.request)a.n(ye.request,Ae);else{if(typeof ye.data!="string")return Ae(new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`));try{return Ae(null,JSON.parse(ye.data))}catch{return Ae(new Error(`Input data given to '${ye.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ye,Ae){try{Ae(null,this._geoJSONIndex.getClusterExpansionZoom(ye.clusterId))}catch(Ve){Ae(Ve)}}getClusterChildren(ye,Ae){try{Ae(null,this._geoJSONIndex.getChildren(ye.clusterId))}catch(Ve){Ae(Ve)}}getClusterLeaves(ye,Ae){try{Ae(null,this._geoJSONIndex.getLeaves(ye.clusterId,ye.limit,ye.offset))}catch(Ve){Ae(Ve)}}}class js{constructor(ye,Ae){this.tileID=new a.aG(ye.tileID.overscaledZ,ye.tileID.wrap,ye.tileID.canonical.z,ye.tileID.canonical.x,ye.tileID.canonical.y),this.tileZoom=ye.tileZoom,this.uid=ye.uid,this.zoom=ye.zoom,this.canonical=ye.tileID.canonical,this.pixelRatio=ye.pixelRatio,this.tileSize=ye.tileSize,this.source=ye.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=ye.projection,this.brightness=Ae}parse(ye,Ae,Ve,Je){this.status="parsing";const tt=new a.aG(Ve.tileID.overscaledZ,Ve.tileID.wrap,Ve.tileID.canonical.z,Ve.tileID.canonical.x,Ve.tileID.canonical.y),ut=[],bt=Ae.familiesBySource[Ve.source],ft=new a.dZ(tt,Ve.promoteId);return ft.bucketLayerIDs=[],ft.is3DTile=!0,a.e9(ye).then(pt=>{if(!pt)return Je(new Error("Could not parse tile"));const At=a.ea(pt,1/a.cc(Ve.tileID.canonical)),It=pt.json.extensionsUsed&&pt.json.extensionsUsed.includes("MAPBOX_mesh_features")||pt.json.asset.extras&&pt.json.asset.extras.MAPBOX_mesh_features,Jt=pt.json.extensionsUsed&&pt.json.extensionsUsed.includes("EXT_meshopt_compression"),Gt=new a.a8(this.zoom,{brightness:this.brightness});for(const cr in bt)for(const Ur of bt[cr]){const Jr=Ur[0];ft.bucketLayerIDs.push(Ur.map(Qr=>a.aC(Qr.id,Qr.scope))),Jr.recalculate(Gt,[]);const Lr=new a.eb(Ur,At,tt,It,Jt,this.brightness,ft);It||(Lr.needsUpload=!0),ut.push(Lr),Lr.evaluate(Jr)}this.status="done",Je(null,{buckets:ut,featureIndex:ft,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(pt=>Je(new Error(pt.message)))}}class qa{constructor(ye,Ae,Ve,Je,tt,ut){this.actor=ye,this.layerIndex=Ae,this.availableImages=Ve,this.brightness=ut,this.loading={},this.loaded={}}loadTile(ye,Ae){const Ve=ye.uid,Je=this.loading[Ve]=new js(ye,this.brightness);a.bi(ye.request,(tt,ut)=>{const bt=!this.loading[Ve];return delete this.loading[Ve],bt||tt?(Je.status="done",bt||(this.loaded[Ve]=Je),Ae(tt)):ut&&ut.byteLength!==0?void Je.parse(ut,this.layerIndex,ye,(ft,pt)=>{Je.status="done",this.loaded=this.loaded||{},this.loaded[Ve]=Je,ft||!pt?Ae(ft):Ae(null,pt)}):(Je.status="done",this.loaded[Ve]=Je,Ae())})}reloadTile(ye,Ae){const Ve=this.loaded,Je=ye.uid;if(Ve&&Ve[Je]){const tt=Ve[Je];tt.projection=ye.projection,tt.brightness=ye.brightness;const ut=(bt,ft)=>{tt.reloadCallback&&(delete tt.reloadCallback,this.loadTile(ye,Ae)),Ae(bt,ft)};tt.status==="parsing"?tt.reloadCallback=ut:tt.status==="done"&&this.loadTile(ye,Ae)}}abortTile(ye,Ae){const Ve=ye.uid;this.loading[Ve]&&delete this.loading[Ve],Ae()}removeTile(ye,Ae){const Ve=this.loaded,Je=ye.uid;Ve&&Ve[Je]&&delete Ve[Je],Ae()}}class yn{constructor(ye){this.self=ye,this.actor=new a.ec(ye,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.imageRasterizer=new a.I,this.projections={},this.defaultProjection=a.bP({name:"mercator"}),this.workerSourceTypes={vector:oe,geojson:Xa,"batched-model":qa},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Ae,Ve)=>{if(this.workerSourceTypes[Ae])throw new Error(`Worker source with name "${Ae}" already registered.`);this.workerSourceTypes[Ae]=Ve},this.self.registerRTLTextPlugin=Ae=>{if(a.ed.isParsed())throw new Error("RTL text plugin already registered.");a.ed.applyArabicShaping=Ae.applyArabicShaping,a.ed.processBidirectionalText=Ae.processBidirectionalText,a.ed.processStyledBidirectionalText=Ae.processStyledBidirectionalText}}clearCaches(ye,Ae,Ve){delete this.layerIndexes[ye],delete this.availableImages[ye],delete this.workerSources[ye],delete this.demWorkerSources[ye],delete this.rasterArrayWorkerSource,Ve()}checkIfReady(ye,Ae,Ve){Ve()}setReferrer(ye,Ae){this.referrer=Ae}spriteLoaded(ye,{scope:Ae,isLoaded:Ve}){if(this.isSpriteLoaded[ye]||(this.isSpriteLoaded[ye]={}),this.isSpriteLoaded[ye][Ae]=Ve,this.workerSources[ye]&&this.workerSources[ye][Ae])for(const Je in this.workerSources[ye][Ae]){const tt=this.workerSources[ye][Ae][Je];for(const ut in tt){const bt=tt[ut];bt instanceof oe&&(bt.isSpriteLoaded=Ve,bt.fire(new a.z("isSpriteLoaded")))}}}setImages(ye,{scope:Ae,images:Ve},Je){if(this.availableImages[ye]||(this.availableImages[ye]={}),this.availableImages[ye][Ae]=Ve,this.workerSources[ye]&&this.workerSources[ye][Ae]){for(const tt in this.workerSources[ye][Ae]){const ut=this.workerSources[ye][Ae][tt];for(const bt in ut)ut[bt].availableImages=Ve}Je()}else Je()}setProjection(ye,Ae){this.projections[ye]=a.bP(Ae)}setBrightness(ye,Ae,Ve){this.brightness=Ae,Ve()}setLayers(ye,Ae,Ve){this.getLayerIndex(ye,Ae.scope).replace(Ae.layers,Ae.options),Ve()}updateLayers(ye,Ae,Ve){this.getLayerIndex(ye,Ae.scope).update(Ae.layers,Ae.removedIds,Ae.options),Ve()}loadTile(ye,Ae,Ve){Ae.projection=this.projections[ye]||this.defaultProjection,this.getWorkerSource(ye,Ae.type,Ae.source,Ae.scope).loadTile(Ae,Ve)}loadDEMTile(ye,Ae,Ve){this.getDEMWorkerSource(ye,Ae.source,Ae.scope).loadTile(Ae,Ve)}decodeRasterArray(ye,Ae,Ve){this.getRasterArrayWorkerSource().decodeRasterArray(Ae,Ve)}reloadTile(ye,Ae,Ve){Ae.projection=this.projections[ye]||this.defaultProjection,this.getWorkerSource(ye,Ae.type,Ae.source,Ae.scope).reloadTile(Ae,Ve)}abortTile(ye,Ae,Ve){this.getWorkerSource(ye,Ae.type,Ae.source,Ae.scope).abortTile(Ae,Ve)}removeTile(ye,Ae,Ve){this.getWorkerSource(ye,Ae.type,Ae.source,Ae.scope).removeTile(Ae,Ve)}removeSource(ye,Ae,Ve){if(!(this.workerSources[ye]&&this.workerSources[ye][Ae.scope]&&this.workerSources[ye][Ae.scope][Ae.type]&&this.workerSources[ye][Ae.scope][Ae.type][Ae.source]))return;const Je=this.workerSources[ye][Ae.scope][Ae.type][Ae.source];delete this.workerSources[ye][Ae.scope][Ae.type][Ae.source],Je.removeSource!==void 0?Je.removeSource(Ae,Ve):Ve()}loadWorkerSource(ye,Ae,Ve){try{this.self.importScripts(Ae.url),Ve()}catch(Je){Ve(Je.toString())}}syncRTLPluginState(ye,Ae,Ve){try{a.ed.setState(Ae);const Je=a.ed.getPluginURL();if(a.ed.isLoaded()&&!a.ed.isParsed()&&Je!=null){this.self.importScripts(Je);const tt=a.ed.isParsed();Ve(tt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Je}`),tt)}}catch(Je){Ve(Je.toString())}}setDracoUrl(ye,Ae){this.dracoUrl=Ae}getAvailableImages(ye,Ae){this.availableImages[ye]||(this.availableImages[ye]={});let Ve=this.availableImages[ye][Ae];return Ve||(Ve=[]),Ve}getLayerIndex(ye,Ae){this.layerIndexes[ye]||(this.layerIndexes[ye]={});let Ve=this.layerIndexes[ye][Ae];return Ve||(Ve=this.layerIndexes[ye][Ae]=new F,Ve.scope=Ae),Ve}getWorkerSource(ye,Ae,Ve,Je){return this.workerSources[ye]||(this.workerSources[ye]={}),this.workerSources[ye][Je]||(this.workerSources[ye][Je]={}),this.workerSources[ye][Je][Ae]||(this.workerSources[ye][Je][Ae]={}),this.isSpriteLoaded[ye]||(this.isSpriteLoaded[ye]={}),this.workerSources[ye][Je][Ae][Ve]||(this.workerSources[ye][Je][Ae][Ve]=new this.workerSourceTypes[Ae]({send:(tt,ut,bt,ft,pt,At)=>{this.actor.send(tt,ut,bt,ye,pt,At)},scheduler:this.actor.scheduler},this.getLayerIndex(ye,Je),this.getAvailableImages(ye,Je),this.isSpriteLoaded[ye][Je],void 0,this.brightness)),this.workerSources[ye][Je][Ae][Ve]}rasterizeImages(ye,Ae,Ve){const{imageTasks:Je,scope:tt}=Ae,ut={};for(const bt in Je){const{image:ft,imageIdWithOptions:pt}=Je[bt];ut[bt]=this.imageRasterizer.rasterize(pt,ft,tt,ye)}Ve(void 0,ut)}removeRasterizedImages(ye,Ae,Ve){const{imageIds:Je,scope:tt}=Ae;this.imageRasterizer.removeImagesFromCacheByIds(Je,tt,ye),Ve()}getDEMWorkerSource(ye,Ae,Ve){return this.demWorkerSources[ye]||(this.demWorkerSources[ye]={}),this.demWorkerSources[ye][Ve]||(this.demWorkerSources[ye][Ve]={}),this.demWorkerSources[ye][Ve][Ae]||(this.demWorkerSources[ye][Ve][Ae]=new de),this.demWorkerSources[ye][Ve][Ae]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new me),this.rasterArrayWorkerSource}enforceCacheSizeLimit(ye,Ae){a.ee(Ae)}getWorkerPerformanceMetrics(ye,Ae,Ve){Ve(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new yn(self)),yn}),_(["./shared"],function(a){var A="3.9.4";const B={create:"create",load:"load",fullLoad:"fullLoad"},N={mark(p){performance.mark(p)},measure(p,n,o){performance.measure(p,n,o)}};function F(p){const n=p.name.split("?")[0];return a.a(n)&&n.includes("mapbox-gl.js")?"javascript":a.a(n)&&n.includes("mapbox-gl.css")?"css":a.b(n)?"fontRange":a.c(n)?"sprite":a.i(n)?"style":a.d(n)?"tilejson":"other"}var G,Q={},te=function(){if(G)return Q;function p(m){return!n(m)}function n(m){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var S,D,L=new Blob([""],{type:"text/javascript"}),O=URL.createObjectURL(L);try{D=new Worker(O),S=!0}catch{S=!1}return D&&D.terminate(),URL.revokeObjectURL(O),S}()?function(){var S=document.createElement("canvas");S.width=S.height=1;var D=S.getContext("2d");if(!D)return!1;var L=D.getImageData(0,0,1,1);return L&&L.width===S.width}()?(o[v=m&&m.failIfMajorPerformanceCaveat]===void 0&&(o[v]=function(S){var D,L=function(O){var U=document.createElement("canvas"),q=Object.create(p.webGLContextAttributes);return q.failIfMajorPerformanceCaveat=O,U.getContext("webgl2",q)}(S);if(!L)return!1;try{D=L.createShader(L.VERTEX_SHADER)}catch{return!1}return!(!D||L.isContextLost())&&(L.shaderSource(D,"void main() {}"),L.compileShader(D),L.getShaderParameter(D,L.COMPILE_STATUS)===!0)}(v)),o[v]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var v}G=1,Q.supported=p,Q.notSupportedReason=n;var o={};return p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},Q}();function Y(p,n,o){const m=document.createElement(p);return n!=null&&(m.className=n),o&&o.appendChild(m),m}function oe(p,n,o){const m=document.createElementNS("http://www.w3.org/2000/svg",p);for(const v of Object.keys(n))m.setAttributeNS(null,v,String(n[v]));return o&&o.appendChild(m),m}const de=typeof document<"u"?document.documentElement&&document.documentElement.style:null,me=de&&de.userSelect!==void 0?"userSelect":"WebkitUserSelect";let be;function pe(){de&&me&&(be=de[me],de[me]="none")}function Se(){de&&me&&(de[me]=be)}function $e(p){p.preventDefault(),p.stopPropagation(),window.removeEventListener("click",$e,!0)}function Le(){window.addEventListener("click",$e,!0),window.setTimeout(()=>{window.removeEventListener("click",$e,!0)},0)}function re(p,n){const o=p.getBoundingClientRect();return ue(p,o,n)}function Ee(p,n){const o=p.getBoundingClientRect(),m=[];for(let v=0;v<n.length;v++)m.push(ue(p,o,n[v]));return m}function se(p){return window.InstallTrigger!==void 0&&p.button===2&&p.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button}function ue(p,n,o){const m=p.offsetWidth===n.width?1:p.offsetWidth/n.width;return new a.P((o.clientX-n.left)*m,(o.clientY-n.top)*m)}const ke="01",ce="NO_ACCESS_TOKEN";class Pe{constructor(n,o,m){this._transformRequestFn=n,this._customAccessToken=o,this._silenceAuthErrors=!!m,this._createSkuToken()}_createSkuToken(){const n=function(){let o="";for(let m=0;m<10;m++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ke,o].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=n.token,this._skuTokenExpiresAt=n.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(n,o){return this._transformRequestFn&&this._transformRequestFn(n,o)||{url:n}}normalizeStyleURL(n,o){if(!a.f(n))return n;const m=Te(n);return m.params.push(`sdk=js-${A}`),m.path=`/styles/v1${m.path}`,this._makeAPIURL(m,this._customAccessToken||o)}normalizeGlyphsURL(n,o){if(!a.f(n))return n;const m=Te(n);return m.path=`/fonts/v1${m.path}`,this._makeAPIURL(m,this._customAccessToken||o)}normalizeModelURL(n,o){if(!a.f(n))return n;const m=Te(n);return m.path=`/models/v1${m.path}`,this._makeAPIURL(m,this._customAccessToken||o)}normalizeSourceURL(n,o,m,v){if(!a.f(n))return n;const S=Te(n);return S.path=`/v4/${S.authority}.json`,S.params.push("secure"),m&&S.params.push(`language=${m}`),v&&S.params.push(`worldview=${v}`),this._makeAPIURL(S,this._customAccessToken||o)}normalizeIconsetURL(n,o){const m=Te(n);return a.f(n)?(m.path=`/styles/v1${m.path}/iconset.pbf`,this._makeAPIURL(m,this._customAccessToken||o)):Ie(m)}normalizeSpriteURL(n,o,m,v){const S=Te(n);return a.f(n)?(S.path=`/styles/v1${S.path}/sprite${o}${m}`,this._makeAPIURL(S,this._customAccessToken||v)):(S.path+=`${o}${m}`,Ie(S))}normalizeTileURL(n,o,m){if(this._isSkuTokenExpired()&&this._createSkuToken(),n&&!a.f(n))return n;const v=Te(n);v.path=v.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${o||m&&v.authority!=="raster"&&m===512?"@2x":""}${a.m.supported?".webp":"$1"}`),v.authority==="raster"?v.path=`/${a.e.RASTER_URL_PREFIX}${v.path}`:v.authority==="rasterarrays"?v.path=`/${a.e.RASTERARRAYS_URL_PREFIX}${v.path}`:v.authority==="3dtiles"?v.path=`/${a.e.TILES3D_URL_PREFIX}${v.path}`:(v.path=v.path.replace(/^.+\/v4\//,"/"),v.path=`/${a.e.TILE_URL_VERSION}${v.path}`);const S=this._customAccessToken||function(D){for(const L of D){const O=L.match(/^access_token=(.*)$/);if(O)return O[1]}return null}(v.params)||a.e.ACCESS_TOKEN;return a.e.REQUIRE_ACCESS_TOKEN&&S&&this._skuToken&&v.params.push(`sku=${this._skuToken}`),this._makeAPIURL(v,S)}canonicalizeTileURL(n,o){const m=Te(n);if(!m.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!m.path.match(/\.[\w]+$/))return n;let v="mapbox://";m.path.match(/^\/raster\/v1\//)?v+=`raster/${m.path.replace(`/${a.e.RASTER_URL_PREFIX}/`,"")}`:m.path.match(/^\/rasterarrays\/v1\//)?v+=`rasterarrays/${m.path.replace(`/${a.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:v+=`tiles/${m.path.replace(`/${a.e.TILE_URL_VERSION}/`,"")}`;let S=m.params;return o&&(S=S.filter(D=>!D.match(/^access_token=/))),S.length&&(v+=`?${S.join("&")}`),v}canonicalizeTileset(n,o){const m=!!o&&a.f(o),v=[];for(const S of n.tiles||[])a.h(S)?v.push(this.canonicalizeTileURL(S,m)):v.push(S);return v}_makeAPIURL(n,o){const m="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",v=Te(a.e.API_URL);if(n.protocol=v.protocol,n.authority=v.authority,n.protocol==="http"){const S=n.params.indexOf("secure");S>=0&&n.params.splice(S,1)}if(v.path!=="/"&&(n.path=`${v.path}${n.path}`),!a.e.REQUIRE_ACCESS_TOKEN)return Ie(n);if(o=o||a.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!o)throw new Error(`An API access token is required to use Mapbox GL. ${m}`);if(o[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${m}`)}return n.params=n.params.filter(S=>S.indexOf("access_token")===-1),n.params.push(`access_token=${o||""}`),Ie(n)}}const xe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Te(p){const n=p.match(xe);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function Ie(p){const n=p.params.length?`?${p.params.join("&")}`:"";return`${p.protocol}://${p.authority}${p.path}${n}`}const Me="mapbox.eventData";function Xe(p){if(!p)return null;const n=p.split(".");if(!n||n.length!==3)return null;try{return JSON.parse(a.j(n[1]))}catch{return null}}class Ce{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const o=Xe(a.e.ACCESS_TOKEN);let m="";return m=o&&o.u?a.k(o.u):a.e.ACCESS_TOKEN||"",n?`${Me}.${n}:${m}`:`${Me}:${m}`}fetchEventData(){const n=a.s("localStorage"),o=this.getStorageKey(),m=this.getStorageKey("uuid");if(n)try{const v=localStorage.getItem(o);v&&(this.eventData=JSON.parse(v));const S=localStorage.getItem(m);S&&(this.anonId=S)}catch{a.w("Unable to read from LocalStorage")}}saveEventData(){const n=a.s("localStorage"),o=this.getStorageKey(),m=this.getStorageKey("uuid"),v=this.anonId;if(n&&v)try{localStorage.setItem(m,v),Object.keys(this.eventData).length>=1&&localStorage.setItem(o,JSON.stringify(this.eventData))}catch{a.w("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,o,m,v){if(!a.e.EVENTS_URL)return;const S=Te(a.e.EVENTS_URL);S.params.push(`access_token=${v||a.e.ACCESS_TOKEN||""}`);const D={event:this.type,created:new Date(n).toISOString()},L=o?a.l(D,o):D,O={url:Ie(S),headers:{"Content-Type":"text/plain"},body:JSON.stringify([L])};this.pendingRequest=a.p(O,U=>{this.pendingRequest=null,m(U),this.saveEventData(),this.processRequests(v)})}queueRequest(n,o){this.queue.push(n),this.processRequests(o)}}const He=new class extends Ce{constructor(p){super("appUserTurnstile"),this._customAccessToken=p}postTurnstileEvent(p,n){a.e.EVENTS_URL&&a.e.ACCESS_TOKEN&&Array.isArray(p)&&p.some(o=>a.f(o)||a.h(o))&&this.queueRequest(Date.now(),n)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=Xe(a.e.ACCESS_TOKEN),o=n?n.u:a.e.ACCESS_TOKEN;let m=o!==this.eventData.tokenU;a.v(this.anonId)||(this.anonId=a.u(),m=!0);const v=this.queue.shift();if(this.eventData.lastSuccess){const S=new Date(this.eventData.lastSuccess),D=new Date(v),L=(v-this.eventData.lastSuccess)/864e5;m=m||L>=1||L<-1||S.getDate()!==D.getDate()}else m=!0;m?this.postEvent(v,{sdkIdentifier:"mapbox-gl-js",sdkVersion:A,skuId:ke,"enabled.telemetry":!1,userId:this.anonId},S=>{S||(this.eventData.lastSuccess=v,this.eventData.tokenU=o)},p):this.processRequests()}},et=He.postTurnstileEvent.bind(He),Ke=new class extends Ce{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(p,n,o,m){this.skuToken=n,this.errorCb=m,a.e.EVENTS_URL&&(o||a.e.ACCESS_TOKEN?this.queueRequest({id:p,timestamp:Date.now()},o):this.errorCb(new Error(ce)))}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:o}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),a.v(this.anonId)||(this.anonId=a.u()),this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:A,skuId:ke,skuToken:this.skuToken,userId:this.anonId},m=>{m?this.errorCb(m):n&&(this.success[n]=!0)},p))}remove(){this.errorCb=null}},ot=Ke.postMapLoadEvent.bind(Ke),Pt=new class extends Ce{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(p){let n=this.mapInstanceIdMap.get(p);return n||(n=a.u(),this.mapInstanceIdMap.set(p,n)),n}getEventId(p){const n=this.eventIdPerMapInstanceMap.get(p)||0;return this.eventIdPerMapInstanceMap.set(p,n+1),n}postStyleLoadEvent(p,n){const{map:o,style:m,importedStyles:v}=n;if(!a.e.EVENTS_URL||!p&&!a.e.ACCESS_TOKEN)return;const S=this.getMapInstanceId(o),D={mapInstanceId:S,eventId:this.getEventId(S),style:m};v.length&&(D.importedStyles=v),this.queueRequest({timestamp:Date.now(),payload:D},p)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:n,payload:o}=this.queue.shift();this.postEvent(n,o,()=>{},p)}},Et=Pt.postStyleLoadEvent.bind(Pt),Wt=new class extends Ce{constructor(){super("gljs.performance")}postPerformanceEvent(p,n){a.e.EVENTS_URL&&(p||a.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},p)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:n,performanceData:o}=this.queue.shift(),m=function(v){const S=performance.getEntriesByType("resource"),D=performance.getEntriesByType("mark"),L=function(ne){const ge={};if(ne){for(const he in ne)if(he!=="other")for(const ve of ne[he]){const we=`${he}ResolveRangeMin`,ze=`${he}ResolveRangeMax`,Oe=`${he}RequestCount`,Fe=`${he}RequestCachedCount`;ge[we]=Math.min(ge[we]||1/0,ve.startTime),ge[ze]=Math.max(ge[ze]||-1/0,ve.responseEnd);const Ye=Ge=>{ge[Ge]===void 0&&(ge[Ge]=0),++ge[Ge]};ve.transferSize!==void 0&&ve.transferSize===0&&Ye(Fe),Ye(Oe)}}return ge}(function(ne,ge){const he={};if(ne)for(const ve of ne){const we=ge(ve);he[we]===void 0&&(he[we]=[]),he[we].push(ve)}return he}(S,F)),O=window.devicePixelRatio,U=navigator.connection||navigator.mozConnection||navigator.webkitConnection,q=U?U.effectiveType:void 0,Z={counters:[],metadata:[],attributes:[]},X=(ne,ge,he)=>{he!=null&&ne.push({name:ge,value:he.toString()})};for(const ne in L)X(Z.counters,ne,L[ne]);if(v.interactionRange[0]!==1/0&&v.interactionRange[1]!==-1/0&&(X(Z.counters,"interactionRangeMin",v.interactionRange[0]),X(Z.counters,"interactionRangeMax",v.interactionRange[1])),D)for(const ne of Object.keys(B)){const ge=B[ne],he=D.find(ve=>ve.name===ge);he&&X(Z.counters,ge,he.startTime)}return X(Z.counters,"visibilityHidden",v.visibilityHidden),X(Z.attributes,"style",function(ne){if(ne)for(const ge of ne){const he=ge.name.split("?")[0];if(a.i(he)){const ve=he.split("/").slice(-2);if(ve.length===2)return`mapbox://styles/${ve[0]}/${ve[1]}`}}}(S)),X(Z.attributes,"terrainEnabled",v.terrainEnabled?"true":"false"),X(Z.attributes,"fogEnabled",v.fogEnabled?"true":"false"),X(Z.attributes,"projection",v.projection),X(Z.attributes,"zoom",v.zoom),X(Z.metadata,"devicePixelRatio",O),X(Z.metadata,"connectionEffectiveType",q),X(Z.metadata,"navigatorUserAgent",navigator.userAgent),X(Z.metadata,"screenWidth",window.screen.width),X(Z.metadata,"screenHeight",window.screen.height),X(Z.metadata,"windowWidth",window.innerWidth),X(Z.metadata,"windowHeight",window.innerHeight),X(Z.metadata,"mapWidth",v.width/O),X(Z.metadata,"mapHeight",v.height/O),X(Z.metadata,"webglRenderer",v.renderer),X(Z.metadata,"webglVendor",v.vendor),X(Z.metadata,"sdkVersion",A),X(Z.metadata,"sdkIdentifier","mapbox-gl-js"),Z}(o);for(const v of m.metadata);for(const v of m.counters);for(const v of m.attributes);this.postEvent(n,m,()=>{},p)}},Dt=Wt.postPerformanceEvent.bind(Wt),er=new class extends Ce{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(p,n,o,m){if(!a.e.API_URL||!a.e.SESSION_PATH)return;const v=Te(a.e.API_URL+a.e.SESSION_PATH);v.params.push(`sku=${n||""}`),v.params.push(`access_token=${m||a.e.ACCESS_TOKEN||""}`);const S={url:Ie(v),headers:{"Content-Type":"text/plain"}};this.pendingRequest=a.g(S,D=>{this.pendingRequest=null,o(D),this.saveEventData(),this.processRequests(m)})}getSessionAPI(p,n,o,m){this.skuToken=n,this.errorCb=m,a.e.SESSION_PATH&&a.e.API_URL&&(o||a.e.ACCESS_TOKEN?this.queueRequest({id:p,timestamp:Date.now()},o):this.errorCb(new Error(ce)))}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:o}=this.queue.shift();n&&this.success[n]||this.getSession(o,this.skuToken,m=>{m?this.errorCb(m):n&&(this.success[n]=!0)},p)}remove(){this.errorCb=null}},De=er.getSessionAPI.bind(er),ur=new Set;function Sr(p,n){n?ur.add(p):ur.delete(p)}class yt{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(n,o){this._updatedSourceCaches[n]=o,this.setDirty()}discardSourceCacheUpdate(n){delete this._updatedSourceCaches[n]}updateLayer(n){const o=n.scope;this._updatedLayers[o]=this._updatedLayers[o]||new Set,this._updatedLayers[o].add(n.id),this.setDirty()}removeLayer(n){const o=n.scope;this._removedLayers[o]=this._removedLayers[o]||{},this._updatedLayers[o]=this._updatedLayers[o]||new Set,this._removedLayers[o][n.id]=n,this._updatedLayers[o].delete(n.id),this._updatedPaintProps.delete(n.fqid),this.setDirty()}getRemovedLayer(n){return this._removedLayers[n.scope]?this._removedLayers[n.scope][n.id]:null}discardLayerRemoval(n){this._removedLayers[n.scope]&&delete this._removedLayers[n.scope][n.id]}getLayerUpdatesByScope(){const n={};for(const o in this._updatedLayers)n[o]=n[o]||{},n[o].updatedIds=Array.from(this._updatedLayers[o].values());for(const o in this._removedLayers)n[o]=n[o]||{},n[o].removedIds=Object.keys(this._removedLayers[o]);return n}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(n){this._updatedPaintProps.add(n.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(n){this._updatedImages.add(n),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function dt(p){const{userImage:n}=p;return!!(n&&n.render&&n.render())&&(p.data.replace(new Uint8Array(n.data.buffer)),!0)}class $t extends a.E{constructor(n){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0,this.spriteFormat=n,n!=="raster"&&a.t()&&(this.imageRasterizerDispatcher=new a.D(a.x(),this,"Image Rasterizer Worker",1))}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new a.I),this._imageRasterizer}createScope(n){this.images[n]={},this.loaded[n]=!1,this.updatedImages[n]={},this.patterns[n]={},this.callbackDispatchedThisFrame[n]={},this.atlasImage[n]=new a.r({width:1,height:1})}isLoaded(){for(const n in this.loaded)if(!this.loaded[n])return!1;return!0}setLoaded(n,o){if(this.loaded[o]!==n&&(this.loaded[o]=n,n)){for(const{ids:m,callback:v}of this.requestors)this._notify(m,o,v);this.requestors=[]}}hasImage(n,o){return!!this.getImage(n,o)}getImage(n,o){return this.images[o][n]}addImage(n,o,m){this._validate(n,m)&&(this.images[o][n]=m)}_validate(n,o){let m=!0;return this._validateStretch(o.stretchX,o.data&&o.data.width)||(this.fire(new a.y(new Error(`Image "${n}" has invalid "stretchX" value`))),m=!1),this._validateStretch(o.stretchY,o.data&&o.data.height)||(this.fire(new a.y(new Error(`Image "${n}" has invalid "stretchY" value`))),m=!1),this._validateContent(o.content,o)||(this.fire(new a.y(new Error(`Image "${n}" has invalid "content" value`))),m=!1),m}_validateStretch(n,o){if(!n)return!0;let m=0;for(const v of n){if(v[0]<m||v[1]<v[0]||o<v[1])return!1;m=v[1]}return!0}_validateContent(n,o){return n?n.length!==4||!o.usvg&&(n[0]<0||o.data.width<n[0]||n[1]<0||o.data.height<n[1]||n[2]<0||o.data.width<n[2]||n[3]<0||o.data.height<n[3])?!1:!(n[2]<n[0]||n[3]<n[1]):!0}updateImage(n,o,m){m.version=this.images[o][n].version+1,this.images[o][n]=m,this.updatedImages[o][n]=!0,this.removeFromImageRasterizerCache(n,o)}removeFromImageRasterizerCache(n,o){this.spriteFormat!=="raster"&&(a.t()?this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",{imageIds:[n],scope:o}):this.imageRasterizer.removeImagesFromCacheByIds([n],o))}removeImage(n,o){const m=this.images[o][n];delete this.images[o][n],delete this.patterns[o][n],this.removeFromImageRasterizerCache(n,o),m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(n){return Object.keys(this.images[n])}getImages(n,o,m){let v=!0;const S=!!this.loaded[o];if(!S)for(const D of n)this.images[o][D]||(v=!1);S||v?this._notify(n,o,m):this.requestors.push({ids:n,scope:o,callback:m})}rasterizeImages({scope:n,imageTasks:o},m){const v={};for(const S in o){const D=o[S],L=this.getImage(D.id,n);L&&(v[S]={image:L,imageIdWithOptions:D})}a.t()?this.imageRasterizerDispatcher.getActor().send("rasterizeImages",{imageTasks:v,scope:n},m):this.rasterizeImagesInMainThread({imageTasks:v,scope:n},m)}rasterizeImagesInMainThread(n,o){const{imageTasks:m,scope:v}=n,S={};for(const D in m){const{image:L,imageIdWithOptions:O}=m[D];S[D]=this.imageRasterizer.rasterize(O,L,v,"")}o(void 0,S)}getUpdatedImages(n){return this.updatedImages[n]}_notify(n,o,m){const v={};for(const S of n){this.images[o][S]||this.fire(new a.z("styleimagemissing",{id:S}));const D=this.images[o][S];D?v[S]={data:D.usvg?null:D.data.clone(),pixelRatio:D.pixelRatio,sdf:D.sdf,usvg:D.usvg,version:D.version,stretchX:D.stretchX,stretchY:D.stretchY,content:D.content,hasRenderCallback:!!(D.userImage&&D.userImage.render)}:a.w(`Image "${S}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}m(null,v)}getPixelSize(n){const{width:o,height:m}=this.atlasImage[n];return{width:o,height:m}}getPattern(n,o,m){const v=this.patterns[o][n],S=this.getImage(n,o);if(!S)return null;if(v&&v.position.version===S.version)return v.position;if(v)v.position.version=S.version;else{S.usvg&&!S.data&&(S.data=this.imageRasterizer.rasterize(a.A.from(n).getPrimary(),S,o,""));const D={w:S.data.width+2*a.B,h:S.data.height+2*a.B,x:0,y:0},L=new a.F(D,S,a.B);this.patterns[o][n]={bin:D,position:L}}return this._updatePatternAtlas(o,m),this.patterns[o][n].position}bind(n,o){const m=n.gl;let v=this.atlasTexture[o];v?this.dirty&&(v.update(this.atlasImage[o]),this.dirty=!1):(v=new a.T(n,this.atlasImage[o],m.RGBA8),this.atlasTexture[o]=v),v.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(n,o){const m=[];for(const L in this.patterns[n])m.push(this.patterns[n][L].bin);const{w:v,h:S}=a.C(m),D=this.atlasImage[n];D.resize({width:v||1,height:S||1});for(const L in this.patterns[n]){const{bin:O,position:U}=this.patterns[n][L];let q=U.padding;const Z=O.x+q,X=O.y+q,ne=this.images[n][L].data,ge=ne.width,he=ne.height;q=q>1?q-1:q,a.r.copy(ne,D,{x:0,y:0},{x:Z,y:X},{width:ge,height:he},o),a.r.copy(ne,D,{x:0,y:he-q},{x:Z,y:X-q},{width:ge,height:q},o),a.r.copy(ne,D,{x:0,y:0},{x:Z,y:X+he},{width:ge,height:q},o),a.r.copy(ne,D,{x:ge-q,y:0},{x:Z-q,y:X},{width:q,height:he},o),a.r.copy(ne,D,{x:0,y:0},{x:Z+ge,y:X},{width:q,height:he},o),a.r.copy(ne,D,{x:ge-q,y:he-q},{x:Z-q,y:X-q},{width:q,height:q},o),a.r.copy(ne,D,{x:0,y:he-q},{x:Z+ge,y:X-q},{width:q,height:q},o),a.r.copy(ne,D,{x:0,y:0},{x:Z+ge,y:X+he},{width:q,height:q},o),a.r.copy(ne,D,{x:ge-q,y:0},{x:Z-q,y:X+he},{width:q,height:q},o)}this.dirty=!0}beginFrame(){for(const n in this.images)this.callbackDispatchedThisFrame[n]={}}dispatchRenderCallbacks(n,o){for(const m of n){if(this.callbackDispatchedThisFrame[o][m])continue;this.callbackDispatchedThisFrame[o][m]=!0;const v=this.images[o][m];dt(v)&&this.updateImage(m,o,v)}}}function or(p){const n=p.key,o=p.value,m=p.valueSpec||{},v=p.objectElementValidators||{},S=p.style,D=p.styleSpec;let L=[];const O=a.H(o);if(O!=="object")return[new a.V(n,o,`object expected, ${O} found`)];for(const U in o){const q=U.split(".")[0];let Z;v[q]?Z=v[q]:m[q]?Z=Wr:v["*"]?Z=v["*"]:m["*"]&&(Z=Wr),Z?L=L.concat(Z({key:(n&&`${n}.`)+U,value:o[U],valueSpec:m[q]||m["*"],style:S,styleSpec:D,object:o,objectKey:U},o)):L.push(new a.G(n,o[U],`unknown property "${U}"`))}for(const U in m)v[U]||m[U].required&&m[U].default===void 0&&o[U]===void 0&&L.push(new a.V(n,o,`missing required property "${U}"`));return L}function Er(p){const n=p.value,o=p.valueSpec,m=p.style,v=p.styleSpec,S=p.key,D=p.arrayElementValidator||Wr;if(a.H(n)!=="array")return[new a.V(S,n,`array expected, ${a.H(n)} found`)];if(o.length&&n.length!==o.length)return[new a.V(S,n,`array length ${o.length} expected, length ${n.length} found`)];if(o["min-length"]&&n.length<o["min-length"])return[new a.V(S,n,`array length at least ${o["min-length"]} expected, length ${n.length} found`)];let L={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum,function:void 0};v.$version<7&&(L.function=o.function),a.H(o.value)==="object"&&(L=o.value);let O=[];for(let U=0;U<n.length;U++)O=O.concat(D({array:n,arrayIndex:U,value:n[U],valueSpec:L,style:m,styleSpec:v,key:`${S}[${U}]`},!0));return O}function mr(p){const n=p.key,o=p.value,m=p.valueSpec;let v=a.H(o);if(v==="number"&&o!=o&&(v="NaN"),v!=="number")return[new a.V(n,o,`number expected, ${v} found`)];if("minimum"in m){let S=m.minimum;if(a.H(m.minimum)==="array"&&(S=m.minimum[p.arrayIndex]),o<S)return[new a.V(n,o,`${o} is less than the minimum value ${S}`)]}if("maximum"in m){let S=m.maximum;if(a.H(m.maximum)==="array"&&(S=m.maximum[p.arrayIndex]),o>S)return[new a.V(n,o,`${o} is greater than the maximum value ${S}`)]}return[]}function Pr(p){const n=p.valueSpec,o=a.K(p.value.type);let m,v,S,D={};const L=o!=="categorical"&&p.value.property===void 0,O=!L,U=a.H(p.value.stops)==="array"&&a.H(p.value.stops[0])==="array"&&a.H(p.value.stops[0][0])==="object",q=or({key:p.key,value:p.value,valueSpec:p.styleSpec.function,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{stops:function(ne){if(o==="identity")return[new a.V(ne.key,ne.value,'identity function may not have a "stops" property')];let ge=[];const he=ne.value;return ge=ge.concat(Er({key:ne.key,value:he,valueSpec:ne.valueSpec,style:ne.style,styleSpec:ne.styleSpec,arrayElementValidator:Z})),a.H(he)==="array"&&he.length===0&&ge.push(new a.V(ne.key,he,"array must have at least one stop")),ge},default:function(ne){return Wr({key:ne.key,value:ne.value,valueSpec:n,style:ne.style,styleSpec:ne.styleSpec})}}});return o==="identity"&&L&&q.push(new a.V(p.key,p.value,'missing required property "property"')),o==="identity"||p.value.stops||q.push(new a.V(p.key,p.value,'missing required property "stops"')),o==="exponential"&&p.valueSpec.expression&&!a.L(p.valueSpec)&&q.push(new a.V(p.key,p.value,"exponential functions not supported")),p.styleSpec.$version>=8&&(O&&!a.M(p.valueSpec)?q.push(new a.V(p.key,p.value,"property functions not supported")):L&&!a.N(p.valueSpec)&&q.push(new a.V(p.key,p.value,"zoom functions not supported"))),o!=="categorical"&&!U||p.value.property!==void 0||q.push(new a.V(p.key,p.value,'"property" property is required')),q;function Z(ne){let ge=[];const he=ne.value,ve=ne.key;if(a.H(he)!=="array")return[new a.V(ve,he,`array expected, ${a.H(he)} found`)];if(he.length!==2)return[new a.V(ve,he,`array length 2 expected, length ${he.length} found`)];if(U){if(a.H(he[0])!=="object")return[new a.V(ve,he,`object expected, ${a.H(he[0])} found`)];if(he[0].zoom===void 0)return[new a.V(ve,he,"object stop key must have zoom")];if(he[0].value===void 0)return[new a.V(ve,he,"object stop key must have value")];const we=a.K(he[0].zoom);if(typeof we!="number")return[new a.V(ve,he[0].zoom,"stop zoom values must be numbers")];if(S&&S>we)return[new a.V(ve,he[0].zoom,"stop zoom values must appear in ascending order")];we!==S&&(S=we,v=void 0,D={}),ge=ge.concat(or({key:`${ve}[0]`,value:he[0],valueSpec:{zoom:{}},style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{zoom:mr,value:X}}))}else ge=ge.concat(X({key:`${ve}[0]`,value:he[0],style:ne.style,styleSpec:ne.styleSpec},he));return a.O(a.Q(he[1]))?ge.concat([new a.V(`${ve}[1]`,he[1],"expressions are not allowed in function stops.")]):ge.concat(Wr({key:`${ve}[1]`,value:he[1],valueSpec:n,style:ne.style,styleSpec:ne.styleSpec}))}function X(ne,ge){const he=a.H(ne.value),ve=a.K(ne.value),we=ne.value!==null?ne.value:ge;if(m){if(he!==m)return[new a.V(ne.key,we,`${he} stop domain type must match previous stop domain type ${m}`)]}else m=he;if(he!=="number"&&he!=="string"&&he!=="boolean"&&typeof ve!="number"&&typeof ve!="string"&&typeof ve!="boolean")return[new a.V(ne.key,we,"stop domain value must be a number, string, or boolean")];if(he!=="number"&&o!=="categorical"){let ze=`number expected, ${he} found`;return a.M(n)&&o===void 0&&(ze+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new a.V(ne.key,we,ze)]}return o!=="categorical"||he!=="number"||typeof ve=="number"&&isFinite(ve)&&Math.floor(ve)===ve?o!=="categorical"&&he==="number"&&typeof ve=="number"&&typeof v=="number"&&v!==void 0&&ve<v?[new a.V(ne.key,we,"stop domain values must appear in ascending order")]:(v=ve,o==="categorical"&&ve in D?[new a.V(ne.key,we,"stop domain values must be unique")]:(D[ve]=!0,[])):[new a.V(ne.key,we,`integer expected, found ${String(ve)}`)]}}function Fr(p){const n=(p.expressionContext==="property"?a.S:a.U)(a.Q(p.value),p.valueSpec);if(n.result==="error")return n.value.map(m=>new a.V(`${p.key}${m.key}`,p.value,m.message));const o=n.value.expression||n.value._styleExpression.expression;if(p.expressionContext==="property"&&p.propertyKey==="text-font"&&!o.outputDefined())return[new a.V(p.key,p.value,`Invalid data expression for "${p.propertyKey}". Output values must be contained as literals within the expression.`)];if(p.expressionContext==="property"&&p.propertyType==="layout"&&!a.W(o))return[new a.V(p.key,p.value,'"feature-state" data expressions are not supported with layout properties.')];if(p.expressionContext==="filter")return Bn(o,p);if(p.expressionContext&&p.expressionContext.indexOf("cluster")===0){if(!a.X(o,["zoom","feature-state"]))return[new a.V(p.key,p.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(p.expressionContext==="cluster-initial"&&!a.Y(o))return[new a.V(p.key,p.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Bn(p,n){const o=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const v of n.valueSpec.expression.parameters)o.delete(v);if(o.size===0)return[];const m=[];return p instanceof a.Z&&o.has(p.name)?[new a.V(n.key,n.value,`["${p.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(p.eachChild(v=>{m.push(...Bn(v,n))}),m)}function Xr(p){const n=p.key,o=p.value,m=p.valueSpec,v=[];return Array.isArray(m.values)?m.values.indexOf(a.K(o))===-1&&v.push(new a.V(n,o,`expected one of [${m.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(m.values).indexOf(a.K(o))===-1&&v.push(new a.V(n,o,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(o)} found`)),v}function On(p){return a.$(a.Q(p.value))?Fr(a.J({},p,{expressionContext:"filter",valueSpec:p.styleSpec[`filter_${p.layerType||"fill"}`]})):fr(p)}function fr(p){const n=p.value,o=p.key;if(a.H(n)!=="array")return[new a.V(o,n,`array expected, ${a.H(n)} found`)];const m=p.styleSpec;let v,S=[];if(n.length<1)return[new a.V(o,n,"filter array must have at least 1 element")];switch(S=S.concat(Xr({key:`${o}[0]`,value:n[0],valueSpec:m.filter_operator,style:p.style,styleSpec:p.styleSpec})),a.K(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&a.K(n[1])==="$type"&&S.push(new a.V(o,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&S.push(new a.V(o,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(v=a.H(n[1]),v!=="string"&&S.push(new a.V(`${o}[1]`,n[1],`string expected, ${v} found`)));for(let D=2;D<n.length;D++)v=a.H(n[D]),a.K(n[1])==="$type"?S=S.concat(Xr({key:`${o}[${D}]`,value:n[D],valueSpec:m.geometry_type,style:p.style,styleSpec:p.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&S.push(new a.V(`${o}[${D}]`,n[D],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let D=1;D<n.length;D++)S=S.concat(fr({key:`${o}[${D}]`,value:n[D],style:p.style,styleSpec:p.styleSpec}));break;case"has":case"!has":v=a.H(n[1]),n.length!==2?S.push(new a.V(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):v!=="string"&&S.push(new a.V(`${o}[1]`,n[1],`string expected, ${v} found`))}return S}function Tn(p,n){const o=p.key,m=p.style,v=p.layer,S=p.styleSpec,D=p.value,L=p.objectKey,O=S[`${n}_${p.layerType}`];if(!O)return[];const U=L.match(/^(.*)-use-theme$/);if(n==="paint"&&U&&O[U[1]])return Wr({key:o,value:D,valueSpec:{type:"string"},style:m,styleSpec:S});const q=L.match(/^(.*)-transition$/);if(n==="paint"&&q&&O[q[1]]&&O[q[1]].transition)return Wr({key:o,value:D,valueSpec:S.transition,style:m,styleSpec:S});const Z=p.valueSpec||O[L];if(!Z)return[new a.G(o,D,`unknown property "${L}"`)];let X;if(a.H(D)==="string"&&a.M(Z)&&!Z.tokens&&(X=/^{([^}]+)}$/.exec(D))){const ge=`\`{ "type": "identity", "property": ${X?JSON.stringify(X[1]):'"_"'} }\``;return[new a.V(o,D,`"${L}" does not support interpolation syntax
Use an identity property function instead: ${ge}.`)]}const ne=[];if(p.layerType==="symbol")L!=="text-field"||!m||m.glyphs||m.imports||ne.push(new a.V(o,D,'use of "text-field" requires a style "glyphs" property')),L==="text-font"&&a.a0(a.Q(D))&&a.K(D.type)==="identity"&&ne.push(new a.V(o,D,'"text-font" does not support identity functions'));else if(p.layerType==="model"&&n==="paint"&&v&&v.layout&&v.layout.hasOwnProperty("model-id")&&a.M(Z)&&(a.a1(Z)||a.N(Z))){const ge=a.S(a.Q(D),Z),he=ge.value.expression||ge.value._styleExpression.expression;he&&!a.X(he,["measure-light"])&&(L==="model-emissive-strength"&&a.Y(he)&&a.W(he)||ne.push(new a.V(o,D,`${L} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return ne.concat(Wr({key:p.key,value:D,valueSpec:Z,style:m,styleSpec:S,expressionContext:"property",propertyType:n,propertyKey:L}))}function kr(p){return Tn(p,"paint")}function Dr(p){return Tn(p,"layout")}function Br(p){let n=[];const o=p.value,m=p.key,v=p.style,S=p.styleSpec;o.type||o.ref||n.push(new a.V(m,o,'either "type" or "ref" is required'));let D=a.K(o.type);const L=a.K(o.ref);if(o.id){const O=a.K(o.id);for(let U=0;U<p.arrayIndex;U++){const q=v.layers[U];a.K(q.id)===O&&n.push(new a.V(m,o.id,`duplicate layer id "${o.id}", previously used at line ${q.id.__line__}`))}}if("ref"in o){let O;["type","source","source-layer","filter","layout"].forEach(U=>{U in o&&n.push(new a.V(m,o[U],`"${U}" is prohibited for ref layers`))}),v.layers.forEach(U=>{a.K(U.id)===L&&(O=U)}),O?O.ref?n.push(new a.V(m,o.ref,"ref cannot reference another ref layer")):D=a.K(O.type):typeof L=="string"&&n.push(new a.V(m,o.ref,`ref layer "${L}" not found`))}else if(D!=="background"&&D!=="sky"&&D!=="slot")if(o.source){const O=v.sources&&v.sources[o.source],U=O&&a.K(O.type);O?U==="vector"&&D==="raster"?n.push(new a.V(m,o.source,`layer "${o.id}" requires a raster source`)):U==="raster"&&D!=="raster"?n.push(new a.V(m,o.source,`layer "${o.id}" requires a vector source`)):U!=="vector"||o["source-layer"]?U==="raster-dem"&&D!=="hillshade"?n.push(new a.V(m,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):U!=="raster-array"||["raster","raster-particle"].includes(D)?D!=="line"||!o.paint||!o.paint["line-gradient"]&&!o.paint["line-trim-offset"]||U==="geojson"&&O.lineMetrics?D==="raster-particle"&&U!=="raster-array"&&n.push(new a.V(m,o.source,`layer "${o.id}" requires a 'raster-array' source.`)):n.push(new a.V(m,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new a.V(m,o.source,"raster-array source can only be used with layer type 'raster'.")):n.push(new a.V(m,o,`layer "${o.id}" must specify a "source-layer"`)):n.push(new a.V(m,o.source,`source "${o.source}" not found`))}else n.push(new a.V(m,o,'missing required property "source"'));return n=n.concat(or({key:m,value:o,valueSpec:S.layer,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Wr({key:`${m}.type`,value:o.type,valueSpec:S.layer.type,style:p.style,styleSpec:p.styleSpec,object:o,objectKey:"type"}),filter:O=>On(a.J({layerType:D},O)),layout:O=>or({layer:o,key:O.key,value:O.value,valueSpec:{},style:O.style,styleSpec:O.styleSpec,objectElementValidators:{"*":U=>Dr(a.J({layerType:D},U))}}),paint:O=>or({layer:o,key:O.key,value:O.value,valueSpec:{},style:O.style,styleSpec:O.styleSpec,objectElementValidators:{"*":U=>kr(a.J({layerType:D,layer:o},U))}})}})),n}function an(p){const n=p.value,o=p.key,m=a.H(n);return m!=="string"?[new a.V(o,n,`string expected, ${m} found`)]:[]}const Sa={promoteId:function({key:p,value:n}){if(a.H(n)==="string")return an({key:p,value:n});{const o=[];for(const m in n)o.push(...an({key:`${p}.${m}`,value:n[m]}));return o}}};function Za(p){const n=p.value,o=p.key,m=p.styleSpec,v=p.style;if(!n.type)return[new a.V(o,n,'"type" is required')];const S=a.K(n.type);let D=[];switch(["vector","raster","raster-dem","raster-array"].includes(S)&&(n.url||n.tiles||D.push(new a.G(o,n,'Either "url" or "tiles" is required.'))),S){case"vector":case"raster":case"raster-dem":case"raster-array":return D=D.concat(or({key:o,value:n,valueSpec:m[`source_${S.replace("-","_")}`],style:p.style,styleSpec:m,objectElementValidators:Sa})),D;case"geojson":if(D=or({key:o,value:n,valueSpec:m.source_geojson,style:v,styleSpec:m,objectElementValidators:Sa}),n.cluster)for(const L in n.clusterProperties){const[O,U]=n.clusterProperties[L],q=typeof O=="string"?[O,["accumulated"],["get",L]]:O;D.push(...Fr({key:`${o}.${L}.map`,value:U,expressionContext:"cluster-map"})),D.push(...Fr({key:`${o}.${L}.reduce`,value:q,expressionContext:"cluster-reduce"}))}return D;case"video":return or({key:o,value:n,valueSpec:m.source_video,style:v,styleSpec:m});case"image":return or({key:o,value:n,valueSpec:m.source_image,style:v,styleSpec:m});case"canvas":return[new a.V(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xr({key:`${o}.type`,value:n.type,valueSpec:{values:oa(m)}})}}function oa(p){return p.source.reduce((n,o)=>{const m=p[o];return m.type.type==="enum"&&(n=n.concat(Object.keys(m.type.values))),n},[])}function qn(p){const n=p.value,o=p.styleSpec,m=o.light,v=p.style;let S=[];const D=a.H(n);if(n===void 0)return S;if(D!=="object")return S=S.concat([new a.V("light",n,`object expected, ${D} found`)]),S;for(const L in n){const O=L.match(/^(.*)-transition$/),U=L.match(/^(.*)-use-theme$/);S=S.concat(U&&m[U[1]]?Wr({key:L,value:n[L],valueSpec:{type:"string"},style:v,styleSpec:o}):O&&m[O[1]]&&m[O[1]].transition?Wr({key:L,value:n[L],valueSpec:o.transition,style:v,styleSpec:o}):m[L]?Wr({key:L,value:n[L],valueSpec:m[L],style:v,styleSpec:o}):[new a.V(L,n[L],`unknown property "${L}"`)])}return S}function Wn(p){const n=p.value;let o=[];if(!n)return o;const m=a.H(n);if(m!=="object")return o=o.concat([new a.V("light-3d",n,`object expected, ${m} found`)]),o;const v=p.styleSpec,S=v["light-3d"],D=p.key,L=p.style,O=p.style.lights;for(const Z of["type","id"])if(!(Z in n))return o=o.concat([new a.V("light-3d",n,`missing property ${Z} on light`)]),o;if(n.type&&O)for(let Z=0;Z<p.arrayIndex;Z++){const X=a.K(n.type),ne=O[Z];a.K(ne.type)===X&&o.push(new a.V(D,n.id,`duplicate light type "${n.type}", previously defined at line ${ne.id.__line__}`))}const U=`properties_light_${n.type}`;if(!(U in v))return o=o.concat([new a.V("light-3d",n,`Invalid light type ${n.type}`)]),o;const q=v[U];for(const Z in n)if(Z==="properties"){const X=n[Z],ne=a.H(X);if(ne!=="object")return o=o.concat([new a.V("properties",X,`object expected, ${ne} found`)]),o;for(const ge in X)o=o.concat(q[ge]?Wr({key:ge,value:X[ge],valueSpec:q[ge],style:L,styleSpec:v}):[new a.G(p.key,X[ge],`unknown property "${ge}"`)])}else{const X=Z.match(/^(.*)-transition$/),ne=Z.match(/^(.*)-use-theme$/);o=o.concat(ne&&S[ne[1]]?Wr({key:Z,value:n[Z],valueSpec:{type:"string"},style:L,styleSpec:v}):X&&S[X[1]]&&S[X[1]].transition?Wr({key:Z,value:n[Z],valueSpec:v.transition,style:L,styleSpec:v}):S[Z]?Wr({key:Z,value:n[Z],valueSpec:S[Z],style:L,styleSpec:v}):[new a.G(Z,n[Z],`unknown property "${Z}"`)])}return o}function Da(p){const n=p.value,o=p.key,m=p.style,v=p.styleSpec,S=v.terrain;let D=[];const L=a.H(n);if(n===void 0||L==="null")return D;if(L!=="object")return D=D.concat([new a.V("terrain",n,`object expected, ${L} found`)]),D;for(const O in n){const U=O.match(/^(.*)-transition$/),q=O.match(/^(.*)-use-theme$/);D=D.concat(q&&S[q[1]]?Wr({key:O,value:n[O],valueSpec:{type:"string"},style:m,styleSpec:v}):U&&S[U[1]]&&S[U[1]].transition?Wr({key:O,value:n[O],valueSpec:v.transition,style:m,styleSpec:v}):S[O]?Wr({key:O,value:n[O],valueSpec:S[O],style:m,styleSpec:v}):[new a.G(O,n[O],`unknown property "${O}"`)])}if(n.source){const O=m.sources&&m.sources[n.source],U=O&&a.K(O.type);O?U!=="raster-dem"&&D.push(new a.V(o,n.source,`terrain cannot be used with a source of type ${String(U)}, it only be used with a "raster-dem" source type`)):D.push(new a.V(o,n.source,`source "${n.source}" not found`))}else D.push(new a.V(o,n,'terrain is missing required property "source"'));return D}function Ia(p){const n=p.value,o=p.style,m=p.styleSpec,v=m.fog;let S=[];const D=a.H(n);if(n===void 0)return S;if(D!=="object")return S=S.concat([new a.V("fog",n,`object expected, ${D} found`)]),S;for(const L in n){const O=L.match(/^(.*)-transition$/),U=L.match(/^(.*)-use-theme$/);S=S.concat(U&&v[U[1]]?Wr({key:L,value:n[L],valueSpec:{type:"string"},style:o,styleSpec:m}):O&&v[O[1]]&&v[O[1]].transition?Wr({key:L,value:n[L],valueSpec:m.transition,style:o,styleSpec:m}):v[L]?Wr({key:L,value:n[L],valueSpec:v[L],style:o,styleSpec:m}):[new a.G(L,n[L],`unknown property "${L}"`)])}return S}const ja={"*":()=>[],array:Er,boolean:function(p){const n=p.value,o=p.key,m=a.H(n);return m!=="boolean"?[new a.V(o,n,`boolean expected, ${m} found`)]:[]},number:mr,color:function(p){const n=p.key,o=p.value,m=a.H(o);return m!=="string"?[new a.V(n,o,`color expected, ${m} found`)]:a._.parseCSSColor(o)===null?[new a.V(n,o,`color expected, "${o}" found`)]:[]},enum:Xr,filter:On,function:Pr,layer:Br,object:or,source:Za,model:a.a2,light:qn,"light-3d":Wn,terrain:Da,fog:Ia,string:an,formatted:function(p){return an(p).length===0?[]:Fr(p)},resolvedImage:function(p){return an(p).length===0?[]:Fr(p)},projection:function(p){const n=p.value,o=p.styleSpec,m=o.projection,v=p.style;let S=[];const D=a.H(n);if(D==="object")for(const L in n)S=S.concat(Wr({key:L,value:n[L],valueSpec:m[L],style:v,styleSpec:o}));else D!=="string"&&(S=S.concat([new a.V("projection",n,`object or string expected, ${D} found`)]));return S},import:function(p){const{value:n,styleSpec:o}=p,{data:m,...v}=n;Object.defineProperty(v,"__line__",{value:n.__line__,enumerable:!1});let S=or(a.J({},p,{value:v,valueSpec:o.import}));return a.K(v.id)===""&&S.push(new a.V(`${p.key}.id`,v,"import id can't be an empty string")),m&&(S=S.concat(Zn(m,o,{key:`${p.key}.data`}))),S}};function Wr(p,n=!1){const o=p.value,m=p.valueSpec,v=p.styleSpec;if(m.expression&&a.a0(a.K(o)))return Pr(p);if(m.expression&&a.O(a.Q(o)))return Fr(p);if(m.type&&ja[m.type]){const S=ja[m.type](p);return n===!0&&S.length>0&&a.H(p.value)==="array"?Fr(p):S}return or(a.J({},p,{valueSpec:m.type?v[m.type]:m}))}function yi(p){const n=p.value,o=p.key,m=an(p);return m.length||(n.indexOf("{fontstack}")===-1&&m.push(new a.V(o,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&m.push(new a.V(o,n,'"glyphs" url must include a "{range}" token'))),m}function Zn(p,n=a.a3,o={}){return Wr({key:o.key||"",value:p,valueSpec:n.$root,styleSpec:n,style:p,objectElementValidators:{glyphs:yi,"*":()=>[]}})}function cn(p,n=a.a3){return bt(Zn(p,n))}const ya=p=>bt(Za(p)),Xa=p=>bt(qn(p)),js=p=>bt(Wn(p)),qa=p=>bt(Da(p)),yn=p=>bt(Ia(p)),St=p=>bt(function(n){const o=n.value,m=n.style,v=n.styleSpec,S=v.snow;let D=[];const L=a.H(o);if(o===void 0)return D;if(L!=="object")return D=D.concat([new a.V("snow",o,`object expected, ${L} found`)]),D;for(const O in o){const U=O.match(/^(.*)-transition$/);D=D.concat(U&&S[U[1]]&&S[U[1]].transition?Wr({key:O,value:o[O],valueSpec:v.transition,style:m,styleSpec:v}):S[O]?Wr({key:O,value:o[O],valueSpec:S[O],style:m,styleSpec:v}):[new a.G(O,o[O],`unknown property "${O}"`)])}return D}(p)),ye=p=>bt(function(n){const o=n.value,m=n.style,v=n.styleSpec,S=v.rain;let D=[];const L=a.H(o);if(o===void 0)return D;if(L!=="object")return D=D.concat([new a.V("rain",o,`object expected, ${L} found`)]),D;for(const O in o){const U=O.match(/^(.*)-transition$/);D=D.concat(U&&S[U[1]]&&S[U[1]].transition?Wr({key:O,value:o[O],valueSpec:v.transition,style:m,styleSpec:v}):S[O]?Wr({key:O,value:o[O],valueSpec:S[O],style:m,styleSpec:v}):[new a.G(O,o[O],`unknown property "${O}"`)])}return D}(p)),Ae=p=>bt(Br(p)),Ve=p=>bt(On(p)),Je=p=>bt(kr(p)),tt=p=>bt(Dr(p)),ut=p=>bt(a.a2(p));function bt(p){return p.slice().sort((n,o)=>n.line&&o.line?n.line-o.line:0)}function ft(p,n){let o=!1;if(n&&n.length)for(const m of n)m instanceof a.G?a.w(m.message):(p.fire(new a.y(new Error(m.message))),o=!0);return o}let pt;class At extends a.E{constructor(n,o="flat"){super(),this._transitionable=new a.a4(pt||(pt=new a.a5({anchor:new a.a6(a.a3.light.anchor),position:new a.a7(a.a3.light.position),color:new a.a6(a.a3.light.color),intensity:new a.a6(a.a3.light.intensity)}))),this.setLight(n,o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,o,m={}){this._validate(Xa,n,m)||(this._transitionable.setTransitionOrValue(n),this.id=o)}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,o,m){return(!m||m.validate!==!1)&&ft(this,n.call(cn,a.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:a.a3})))}}let It=class extends a.E{constructor(p,n,o,m){super(),this.scope=o,this._transitionable=new a.a4(new a.a5({source:new a.a6(a.a3.terrain.source),exaggeration:new a.a6(a.a3.terrain.exaggeration)}),o,m),this._transitionable.setTransitionOrValue(p,m),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(p,n){this._transitionable.setTransitionOrValue(p,n)}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}getExaggeration(p){return this._transitioning.possiblyEvaluate(new a.a8(p)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const p=this._transitionable._values.exaggeration;if(!p)return null;const n=p.value.expression;if(!n)return null;let o=-1,m=-1,v=1;for(const S of n.zoomStops)v=n.evaluate(new a.a8(S)),v>.01?(o=S,m=-1):m=S;return v<.01&&o>0&&m>o?[o,m]:null}isZoomDependent(){const p=this._transitionable._values.exaggeration;return p!=null&&p.value!=null&&p.value.expression!=null&&p.value.expression instanceof a.a9}};const Jt=45,Gt=65,cr=.05;function Ur(p,n,o,m){const v=a.ac(Jt,Gt,o),[S,D]=Jr(p,m);let L=1-Math.min(1,Math.exp((n-S)/(D-S)*-6));return L*=L*L,L=Math.min(1,1.00747*L),L*v*p.alpha}function Jr(p,n){const o=.5/Math.tan(.5*n);return[p.range[0]+o,p.range[1]+o]}function Lr(p,n,o,m,v){const S=a.ab.vec3.transformMat4([],[n,o,m],v.mercatorFogMatrix);return Ur(p,a.ab.vec3.length(S),v.pitch,v._fov)}function Qr(p,n,o,m,v,S,D){const L=[[o,m,0],[v,m,0],[v,S,0],[o,S,0]];let O=Number.MAX_VALUE,U=-Number.MAX_VALUE;for(const q of L){const Z=a.ab.vec3.transformMat4([],q,n),X=a.ab.vec3.length(Z);O=Math.min(O,X),U=Math.max(U,X)}return[Ur(p,O,D.pitch,D._fov),Ur(p,U,D.pitch,D._fov)]}class Yn extends a.E{constructor(n,o,m,v){super();const S=new a.a5({range:new a.a6(a.a3.fog.range),color:new a.a6(a.a3.fog.color),"color-use-theme":new a.a6({type:"string","property-type":"data-constant",default:"default"}),"high-color":new a.a6(a.a3.fog["high-color"]),"high-color-use-theme":new a.a6({type:"string","property-type":"data-constant",default:"default"}),"space-color":new a.a6(a.a3.fog["space-color"]),"space-color-use-theme":new a.a6({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new a.a6(a.a3.fog["horizon-blend"]),"star-intensity":new a.a6(a.a3.fog["star-intensity"]),"vertical-range":new a.a6(a.a3.fog["vertical-range"])});this._transitionable=new a.a4(S,m,new Map(v)),this.set(n,v),this._transitioning=this._transitionable.untransitioned(),this._transform=o,this.properties=new a.ad(S),this.scope=m}get state(){const n=this._transform,o=n.projection.name==="globe",m=a.ae(n.zoom),v=this.properties.get("range"),S=[.5,3];return{range:o?[a.af(S[0],v[0],m),a.af(S[1],v[1],m)]:v,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(n,o,m={}){if(this._validate(yn,n,m))return;const v=a.l({},n);for(const S of Object.keys(a.a3.fog))v[S]===void 0&&(v[S]=a.a3.fog[S].default);this._options=v,this._transitionable.setTransitionOrValue(this._options,o)}getOpacity(n){if(!this._transform.projection.supportsFog)return 0;const o=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:a.ac(Jt,Gt,n))*o.a}getOpacityAtLatLng(n,o){return this._transform.projection.supportsFog?function(m,v,S){const D=a.aa.fromLngLat(v),L=S.elevation?S.elevation.getAtPointOrZero(D):0;return Lr(m,D.x,D.y,L,S)}(this.state,n,o):0}getOpacityForTile(n){if(!this._transform.projection.supportsFog)return[1,1];const o=this._transform.calculateFogTileMatrix(n.toUnwrapped());return Qr(this.state,o,0,0,a.ag,a.ag,this._transform)}getOpacityForBounds(n,o,m,v,S){return this._transform.projection.supportsFog?Qr(this.state,n,o,m,v,S,this._transform):[1,1]}getFovAdjustedRange(n){return this._transform.projection.supportsFog?Jr(this.state,n):[0,1]}isVisibleOnFrustum(n){if(!this._transform.projection.supportsFog)return!1;const o=[4,5,6,7];for(const m of o){const v=n.points[m];let S;if(v[2]>=0)S=v;else{const D=n.points[m-4];S=a.ah(D,v,D[2]/(D[2]-v[2]))}if(Lr(this.state,S[0],S[1],0,this._transform)>=cr)return!0}return!1}updateConfig(n){this._transitionable.setTransitionOrValue(this._options,new Map(n))}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,o,m){return(!m||m.validate!==!1)&&ft(this,n.call(cn,a.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:a.a3})))}}let Dn,un,Jn,Qn,ei=class extends a.E{constructor(p,n,o,m){super();const v=Dn||(Dn=new a.a5({density:new a.a6(a.a3.snow.density),intensity:new a.a6(a.a3.snow.intensity),color:new a.a6(a.a3.snow.color),opacity:new a.a6(a.a3.snow.opacity),vignette:new a.a6(a.a3.snow.vignette),"vignette-color":new a.a6(a.a3.snow["vignette-color"]),"center-thinning":new a.a6(a.a3.snow["center-thinning"]),direction:new a.a6(a.a3.snow.direction),"flake-size":new a.a6(a.a3.snow["flake-size"])}));this._transitionable=new a.a4(v,o,new Map(m)),this.set(p,m),this._transitioning=this._transitionable.untransitioned(),this.properties=new a.ad(v),this.scope=o}get state(){const p=this.properties.get("opacity"),n=this.properties.get("color"),o=this.properties.get("direction"),m=a.ai(o[0]),v=-Math.max(a.ai(o[1]),.01),S=[Math.cos(m)*Math.cos(v),Math.sin(m)*Math.cos(v),Math.sin(v)],D=this.properties.get("vignette"),L=this.properties.get("vignette-color");return L.a=D,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new a.aj(n.r,n.g,n.b,n.a*p),direction:S,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:L}}get(){return this._transitionable.serialize()}set(p,n,o={}){if(this._validate(St,p,o))return;const m=a.l({},p);for(const v of Object.keys(a.a3.snow))m[v]===void 0&&(m[v]=a.a3.snow[v].default);this._options=m,this._transitionable.setTransitionOrValue(this._options,n)}updateConfig(p){this._transitionable.setTransitionOrValue(this._options,new Map(p))}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}_validate(p,n,o){return(!o||o.validate!==!1)&&ft(this,p.call(cn,a.l({value:n,style:{glyphs:!0,sprite:!0},styleSpec:a.a3})))}},_s=class extends a.E{constructor(p,n,o,m){super();const v=un||(un=new a.a5({density:new a.a6(a.a3.rain.density),intensity:new a.a6(a.a3.rain.intensity),color:new a.a6(a.a3.rain.color),opacity:new a.a6(a.a3.rain.opacity),vignette:new a.a6(a.a3.rain.vignette),"vignette-color":new a.a6(a.a3.rain["vignette-color"]),"center-thinning":new a.a6(a.a3.rain["center-thinning"]),direction:new a.a6(a.a3.rain.direction),"droplet-size":new a.a6(a.a3.rain["droplet-size"]),"distortion-strength":new a.a6(a.a3.rain["distortion-strength"])}));this._transitionable=new a.a4(v,o,new Map(m)),this.set(p,m),this._transitioning=this._transitionable.untransitioned(),this.properties=new a.ad(v),this.scope=o}get state(){const p=this.properties.get("opacity"),n=this.properties.get("color"),o=this.properties.get("direction"),m=a.ai(o[0]),v=-Math.max(a.ai(o[1]),.01),S=[Math.cos(m)*Math.cos(v),Math.sin(m)*Math.cos(v),Math.sin(v)],D=this.properties.get("vignette-color");return D.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new a.aj(n.r,n.g,n.b,n.a*p),direction:S,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:D}}get(){return this._transitionable.serialize()}set(p,n,o={}){if(this._validate(ye,p,o))return;const m=a.l({},p);for(const v of Object.keys(a.a3.rain))m[v]===void 0&&(m[v]=a.a3.rain[v].default);this._options=m,this._transitionable.setTransitionOrValue(this._options,n)}updateConfig(p){this._transitionable.setTransitionOrValue(this._options,new Map(p))}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}_validate(p,n,o){return(!o||o.validate!==!1)&&ft(this,p.call(cn,a.l({value:n,style:{glyphs:!0,sprite:!0},styleSpec:a.a3})))}};class oi extends a.E{constructor(n,o,m,v){super(),this.scope=m,this._options=n,this.properties=new a.ad(o),this._transitionable=new a.a4(o,m,new Map(v)),this._transitionable.setTransitionOrValue(n.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(n){this._transitionable.setTransitionOrValue(this._options.properties,new Map(n))}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(n,o){this._options=n,this._transitionable.setTransitionOrValue(n.properties,o)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class hi{constructor(n,o,m,v){this.screenBounds=n,this.cameraPoint=o,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=m,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(n,o){let m,v;if(n instanceof a.P||typeof n[0]=="number"){const S=a.P.convert(n);m=[S],v=o.isPointAboveHorizon(S)}else{const S=a.P.convert(n[0]),D=a.P.convert(n[1]);m=[S,D],v=a.al(S,D).every(L=>o.isPointAboveHorizon(L))}return new hi(m,o.getCameraPoint(),v,o)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(n){return a.al(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],n)}bufferedCameraGeometry(n){const o=this.screenBounds[0],m=this.screenBounds.length===1?this.screenBounds[0].add(new a.P(1,1)):this.screenBounds[1],v=a.al(o,m,0,!1);return this.cameraPoint.y>m.y&&(this.cameraPoint.x>o.x&&this.cameraPoint.x<m.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=m.x?v[2]=this.cameraPoint:this.cameraPoint.x<=o.x&&(v[3]=this.cameraPoint)),a.am(v,n)}bufferedCameraGeometryGlobe(n){const o=this.screenBounds[0],m=this.screenBounds.length===1?this.screenBounds[0].add(new a.P(1,1)):this.screenBounds[1],v=a.al(o,m,n),S=this.cameraPoint.clone();switch(3*((S.y>o.y)+(S.y>m.y))+((S.x>o.x)+(S.x>m.x))){case 0:v[0]=S,v[4]=S.clone();break;case 1:v.splice(1,0,S);break;case 2:v[1]=S;break;case 3:v.splice(4,0,S);break;case 5:v.splice(2,0,S);break;case 6:v[3]=S;break;case 7:v.splice(3,0,S);break;case 8:v[2]=S}return v}containsTile(n,o,m,v=0){const S=n.queryPadding/o._pixelsPerMercatorPixel+1,D=m?this._bufferedCameraMercator(S,o):this._bufferedScreenMercator(S,o);let L=n.tileID.wrap+(D.unwrapped?v:0);const O=D.polygon.map(ve=>a.an(n.tileTransform,ve,L));if(!a.ao(O,0,0,a.ag,a.ag))return;L=n.tileID.wrap+(this.screenGeometryMercator.unwrapped?v:0);const U=this.screenGeometryMercator.polygon.map(ve=>a.ap(n.tileTransform,ve,L)),q=U.map(ve=>new a.P(ve[0],ve[1])),Z=o.getFreeCameraOptions().position||new a.aa(0,0,0),X=a.ap(n.tileTransform,Z,L),ne=U.map(ve=>{const we=a.ab.vec3.sub(ve,ve,X);return a.ab.vec3.normalize(we,we),new a.aq(X,we)}),ge=a.ar(n,1,o.zoom)*o._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:q,tilespaceRays:ne,bufferedTilespaceGeometry:O,bufferedTilespaceBounds:(he=a.as(O),he.min.x=a.aw(he.min.x,0,a.ag),he.min.y=a.aw(he.min.y,0,a.ag),he.max.x=a.aw(he.max.x,0,a.ag),he.max.y=a.aw(he.max.y,0,a.ag),he),tile:n,tileID:n.tileID,pixelToTileUnitsFactor:ge};var he}_bufferedScreenMercator(n,o){const m=Hf(n);if(this._screenRaycastCache[m])return this._screenRaycastCache[m];{let v;return v=o.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(n),o):{polygon:this.bufferedScreenGeometry(n).map(S=>o.pointCoordinate3D(S)),unwrapped:!0},this._screenRaycastCache[m]=v,v}}_bufferedCameraMercator(n,o){const m=Hf(n);if(this._cameraRaycastCache[m])return this._cameraRaycastCache[m];{let v;return v=o.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(n),o):{polygon:this.bufferedCameraGeometry(n).map(S=>o.pointCoordinate3D(S)),unwrapped:!0},this._cameraRaycastCache[m]=v,v}}_projectAndResample(n,o){const m=function(S,D){const L=a.ab.mat4.multiply([],D.pixelMatrix,D.globeMatrix),O=[0,-a.ax,0,1],U=[0,a.ax,0,1],q=[0,0,0,1];a.ab.vec4.transformMat4(O,O,L),a.ab.vec4.transformMat4(U,U,L),a.ab.vec4.transformMat4(q,q,L);const Z=new a.P(O[0]/O[3],O[1]/O[3]),X=new a.P(U[0]/U[3],U[1]/U[3]),ne=a.au(S,Z)&&O[3]<q[3],ge=a.au(S,X)&&U[3]<q[3];if(!ne&&!ge)return null;const he=function(Ze,We,nt){for(let at=1;at<Ze.length;at++){const Ct=So(We.pointCoordinate3D(Ze[at-1]).x),_t=So(We.pointCoordinate3D(Ze[at]).x);if(nt<0){if(Ct<_t)return{idx:at,t:-Ct/(_t-1-Ct)}}else if(_t<Ct)return{idx:at,t:(1-Ct)/(_t+1-Ct)}}return null}(S,D,ne?-1:1);if(!he)return null;const{idx:ve,t:we}=he;let ze=ve>1?As(S.slice(0,ve),D):[],Oe=ve<S.length?As(S.slice(ve),D):[];ze=ze.map(Ze=>new a.P(So(Ze.x),Ze.y)),Oe=Oe.map(Ze=>new a.P(So(Ze.x),Ze.y));const Fe=[...ze];Fe.length===0&&Fe.push(Oe[Oe.length-1]);const Ye=a.af(Fe[Fe.length-1].y,(Oe.length===0?ze[0]:Oe[0]).y,we);let Ge;return Ge=ne?[new a.P(0,Ye),new a.P(0,0),new a.P(1,0),new a.P(1,Ye)]:[new a.P(1,Ye),new a.P(1,1),new a.P(0,1),new a.P(0,Ye)],Fe.push(...Ge),Oe.length===0?Fe.push(ze[0]):Fe.push(...Oe),{polygon:Fe.map(Ze=>new a.aa(Ze.x,Ze.y)),unwrapped:!1}}(n,o);if(m)return m;const v=function(S,D){let L=!1,O=-1/0,U=0;for(let Z=0;Z<S.length-1;Z++)S[Z].x>O&&(O=S[Z].x,U=Z);for(let Z=0;Z<S.length-1;Z++){const X=(U+Z)%(S.length-1),ne=S[X],ge=S[X+1];Math.abs(ne.x-ge.x)>.5&&(ne.x<ge.x?(ne.x+=1,X===0&&(S[S.length-1].x+=1)):(ge.x+=1,X+1===S.length-1&&(S[0].x+=1)),L=!0)}const q=a.at(D.center.lng);return L&&q<Math.abs(q-1)&&S.forEach(Z=>{Z.x-=1}),{polygon:S,unwrapped:L}}(As(n,o).map(S=>new a.P(So(S.x),S.y)),o);return{polygon:v.polygon.map(S=>new a.aa(S.x,S.y)),unwrapped:v.unwrapped}}}function As(p,n){return a.av(p,o=>{const m=n.pointCoordinate3D(o);o.x=m.x,o.y=m.y},1/256)}function So(p){return p<0?1+p%1:p%1}function Hf(p){return 100*p|0}function Vl(p,n,o,m,v){const S=function(L,O){if(L)return v(L);if(O){if(p.url&&O.tiles&&p.tiles&&delete p.tiles,O.variants){if(!Array.isArray(O.variants))return v(new Error("variants must be an array"));for(const q of O.variants){if(q==null||typeof q!="object"||q.constructor!==Object)return v(new Error("variant must be an object"));if(!Array.isArray(q.capabilities))return v(new Error("capabilities must be an array"));if(q.capabilities.length===1&&q.capabilities[0]==="meshopt"){O=a.l(O,q);break}}}const U=a.ay(a.l({},O,p),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);U.tiles=n.canonicalizeTileset(U,p.url),v(null,U)}},D=function(L,O,U){if(!L)return null;if(!O&&!U)return L;U=U||L.worldview_default;const q=Object.values(L.language||{});if(q.length===0)return null;const Z=Object.values(L.worldview||{});if(Z.length===0)return null;const X=q.every(ge=>ge===O),ne=Z.every(ge=>ge===U);return X&&ne?L:O in(L.language_options||{})||U in(L.worldview_options||{})?null:L.language_options&&L.worldview_options?L:null}(p.data,o,m);return D?a.q.frame(()=>S(null,D)):p.url?a.n(n.transformRequest(n.normalizeSourceURL(p.url,null,o,m),a.R.Source),S):a.q.frame(()=>{const{data:L,...O}=p;S(null,O)})}class Ul{constructor(n,o,m){this.bounds=a.az.convert(this.validateBounds(n)),this.minzoom=o||0,this.maxzoom=m||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const o=Math.pow(2,n.z),m=Math.floor(a.at(this.bounds.getWest())*o),v=Math.floor(a.aA(this.bounds.getNorth())*o),S=Math.ceil(a.at(this.bounds.getEast())*o),D=Math.ceil(a.aA(this.bounds.getSouth())*o);return n.x>=m&&n.x<S&&n.y>=v&&n.y<D}}class xd extends a.E{constructor(n,o,m,v){if(super(),this.id=n,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.l(this,a.ay(o,["url","scheme","tileSize","promoteId"])),this._options=a.l({type:"vector"},o),this._collectResourceTiming=!!o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v),this._tileWorkers={},this._deduped=new a.aB}load(n){this._loaded=!1,this.fire(new a.z("dataloading",{dataType:"source"}));const o=Array.isArray(this.map._language)?this.map._language.join():this.map._language,m=this.map.getWorldview();this._tileJSONRequest=Vl(this._options,this.map._requestManager,o,m,(v,S)=>{if(this._tileJSONRequest=null,this._loaded=!0,v)o&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${o}`),m&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${m}`),this.fire(new a.y(v));else if(S){if(a.l(this,S),this.hasWorldviews=!!S.worldview_options,S.worldview_default&&(this.worldviewDefault=S.worldview_default),S.vector_layers){this.vectorLayers=S.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const D of S.vector_layers)this.vectorLayerIds.push(D.id),S.worldview&&S.worldview[D.source]&&this.localizableLayerIds.add(D.id)}S.bounds&&(this.tileBounds=new Ul(S.bounds,this.minzoom,this.maxzoom)),et(S.tiles,this.map._requestManager._customAccessToken),this.fire(new a.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))}n&&n(v)})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}reload(){this.cancelTileJSONRequest();const n=a.aC(this.id,this.scope);this.load(()=>this.map.style.clearSource(n))}setTiles(n){return this._options.tiles=n,this.reload(),this}setUrl(n){return this.url=n,this._options.url=n,this.reload(),this}onRemove(n){this.cancelTileJSONRequest()}serialize(){return a.l({},this._options)}loadTile(n,o){const m=n.tileID.canonical.url(this.tiles,this.scheme),v=this.map._requestManager.normalizeTileURL(m),S=this.map._requestManager.transformRequest(v,a.R.Tile),D=this.map.style?this.map.style.getLut(this.scope):null,L=D?{image:D.image.clone()}:null,O={request:S,data:void 0,uid:n.uid,tileID:n.tileID,tileZoom:n.tileZoom,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,lut:L,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:a.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:n.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:n.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&a.f(m)&&(O.worldview=this.map.getWorldview()||this.worldviewDefault,O.localizableLayerIds=this.localizableLayerIds),O.request.collectResourceTiming=this._collectResourceTiming,n.actor&&n.state!=="expired")n.state==="loading"?n.reloadCallback=o:n.request=n.actor.send("reloadTile",O,U.bind(this));else if(n.actor=this._tileWorkers[v]=this._tileWorkers[v]||this.dispatcher.getActor(),this.dispatcher.ready)n.request=n.actor.send("loadTile",O,U.bind(this),void 0,!0);else{const q=a.aD.call({deduped:this._deduped},O,(Z,X)=>{Z||!X?U.call(this,Z):(O.data={cacheControl:X.cacheControl,expires:X.expires,rawData:X.rawData.slice(0)},n.actor&&n.actor.send("loadTile",O,U.bind(this),void 0,!0))},!0);n.request={cancel:q}}function U(q,Z){return delete n.request,n.aborted?o(null):q&&q.status!==404?o(q):(Z&&Z.resourceTiming&&(n.resourceTiming=Z.resourceTiming),this.map._refreshExpiredTiles&&Z&&n.setExpiryData(Z),n.loadVectorData(Z,this.map.painter),a.aE(this.dispatcher),o(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(n,o){n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id,scope:this.scope}),n.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class vd extends a.E{constructor(n,o,m,v){super(),this.id=n,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.l({type:"raster"},o),a.l(this,a.ay(o,["url","scheme","tileSize"]))}load(n){this._loaded=!1,this.fire(new a.z("dataloading",{dataType:"source"})),this._tileJSONRequest=Vl(this._options,this.map._requestManager,null,null,(o,m)=>{this._tileJSONRequest=null,this._loaded=!0,o?this.fire(new a.y(o)):m&&(a.l(this,m),m.raster_layers&&(this.rasterLayers=m.raster_layers,this.rasterLayerIds=this.rasterLayers.map(v=>v.id)),m.bounds&&(this.tileBounds=new Ul(m.bounds,this.minzoom,this.maxzoom)),et(m.tiles),this.fire(new a.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))),n&&n(o)})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}reload(){this.cancelTileJSONRequest();const n=a.aC(this.id,this.scope);this.load(()=>this.map.style.clearSource(n))}setTiles(n){return this._options.tiles=n,this.reload(),this}setUrl(n){return this.url=n,this._options.url=n,this.reload(),this}onRemove(n){this.cancelTileJSONRequest()}serialize(){return a.l({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n,o){const m=a.q.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),m,this.tileSize);n.request=a.o(this.map._requestManager.transformRequest(v,a.R.Tile),(S,D,L,O)=>(delete n.request,n.aborted?(n.state="unloaded",o(null)):S?(n.state="errored",o(S)):D?(this.map._refreshExpiredTiles&&n.setExpiryData({cacheControl:L,expires:O}),n.setTexture(D,this.map.painter),n.state="loaded",a.aE(this.dispatcher),void o(null)):o(null)))}abortTile(n,o){n.request&&(n.request.cancel(),delete n.request),o&&o()}unloadTile(n,o){n.texture&&n.texture instanceof a.T?(n.destroy(!0),n.texture&&n.texture instanceof a.T&&this.map.painter.saveTileTexture(n.texture)):n.destroy(),o&&o()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class yl extends vd{constructor(n,o,m,v){super(n,o,m,v),this.type="raster-array",this.maxzoom=22,this._options=a.l({type:"raster-array"},o)}triggerRepaint(n){const o=this.map.painter._terrain,m=this.map.style.getSourceCache(this.id);o&&o.enabled&&m&&o._clearRenderCacheForTile(m.id,n.tileID),this.map.triggerRepaint()}loadTile(n,o){const m=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),v=this.map._requestManager.transformRequest(m,a.R.Tile);n.requestParams=v,n.actor||(n.actor=this.dispatcher.getActor()),n.request=n.fetchHeader(void 0,(S,D,L,O)=>{if(delete n.request,n.aborted)return n.state="unloaded",o(null);if(S)return S.code===20?void 0:(n.state="errored",o(S));this.map._refreshExpiredTiles&&n.setExpiryData({cacheControl:L,expires:O}),n.state="empty",o(null)})}unloadTile(n,o){const m=n.texture;m&&m instanceof a.T?(n.destroy(!0),this.map.painter.saveTileTexture(m)):(n.destroy(),n.flushQueues(),n._isHeaderLoaded=!1,delete n._mrt,delete n.textureDescriptor),n.fbo&&(n.fbo.destroy(),delete n.fbo),delete n.request,delete n.requestParams,delete n.neighboringTiles,n.state="unloaded"}prepareTile(n,o,m){n._isHeaderLoaded&&(n.state!=="empty"&&(n.state="reloading"),n.fetchBand(o,m,(v,S)=>{if(v)return n.state="errored",this.fire(new a.y(v)),void this.triggerRepaint(n);S&&(n.setTexture(S,this.map.painter),n.state="loaded",this.triggerRepaint(n))}))}getInitialBand(n){if(!this.rasterLayers)return 0;const o=this.rasterLayers.find(({id:S})=>S===n),m=o&&o.fields,v=m&&m.bands&&m.bands;return v?v[0]:0}getTextureDescriptor(n,o,m){if(!n)return;const v=o.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!v)return;let S=null;o instanceof a.aH?S=o.paint.get("raster-array-band"):o instanceof a.aI&&(S=o.paint.get("raster-particle-array-band"));const D=S||this.getInitialBand(v);if(D!=null)if(n.textureDescriptor){if(!n.updateNeeded(v,D)||m)return Object.assign({},n.textureDescriptor,{texture:n.texture})}else this.prepareTile(n,v,D)}}const Wi={vector:xd,raster:vd,"raster-dem":class extends vd{constructor(p,n,o,m){super(p,n,o,m),this.type="raster-dem",this.maxzoom=22,this._options=a.l({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(p,n){const o=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function m(v,S){v&&(p.state="errored",n(v)),S&&(p.dem=S,p.dem.onDeserialize(),p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0,p.state="loaded",n(null))}p.request=a.o(this.map._requestManager.transformRequest(o,a.R.Tile),(function(v,S,D,L){if(delete p.request,p.aborted)p.state="unloaded",n(null);else if(v)p.state="errored",n(v);else if(S){this.map._refreshExpiredTiles&&p.setExpiryData({cacheControl:D,expires:L});const O=ImageBitmap&&S instanceof ImageBitmap&&a.t(),U=1-(S.width-a.aF(S.width))/2;U<1||p.neighboringTiles||(p.neighboringTiles=this._getNeighboringTiles(p.tileID));const q=O?S:a.q.getImageData(S,U),Z={uid:p.uid,coord:p.tileID,source:this.id,scope:this.scope,rawImageData:q,encoding:this.encoding,padding:U};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",Z,m.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(p){const n=p.canonical,o=Math.pow(2,n.z),m=(n.x-1+o)%o,v=n.x===0?p.wrap-1:p.wrap,S=(n.x+1+o)%o,D=n.x+1===o?p.wrap+1:p.wrap,L={};return L[new a.aG(p.overscaledZ,v,n.z,m,n.y).key]={backfilled:!1},L[new a.aG(p.overscaledZ,D,n.z,S,n.y).key]={backfilled:!1},n.y>0&&(L[new a.aG(p.overscaledZ,v,n.z,m,n.y-1).key]={backfilled:!1},L[new a.aG(p.overscaledZ,p.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},L[new a.aG(p.overscaledZ,D,n.z,S,n.y-1).key]={backfilled:!1}),n.y+1<o&&(L[new a.aG(p.overscaledZ,v,n.z,m,n.y+1).key]={backfilled:!1},L[new a.aG(p.overscaledZ,p.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},L[new a.aG(p.overscaledZ,D,n.z,S,n.y+1).key]={backfilled:!1}),L}},"raster-array":yl,geojson:class extends a.E{constructor(p,n,o,m){super(),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(m),this._data=n.data,this._options=a.l({},n),this._collectResourceTiming=n.collectResourceTiming,n.maxzoom!==void 0&&(this.maxzoom=n.maxzoom),n.minzoom!==void 0&&(this.minzoom=n.minzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const v=a.ag/this.tileSize;this.workerOptions=a.l({source:this.id,scope:this.scope,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(n.buffer!==void 0?n.buffer:128)*v,tolerance:(n.tolerance!==void 0?n.tolerance:.375)*v,extent:a.ag,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:n.clusterMaxZoom!==void 0?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:a.ag,radius:(n.clusterRadius!==void 0?n.clusterRadius:50)*v,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter,dynamic:n.dynamic},n.workerOptions)}onAdd(p){this.map=p,this.setData(this._data)}setData(p){return this._data=p,this._updateWorkerData(),this}updateData(p){if(!this._options.dynamic)return this.fire(new a.y(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof p!="string"&&(p.type==="Feature"&&(p={type:"FeatureCollection",features:[p]}),p.type!=="FeatureCollection"))return this.fire(new a.y(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof p!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const n=new Map;for(const o of this._data.features)n.set(o.id,o);for(const o of p.features)n.set(o.id,o);this._data.features=[...n.values()]}else this._data=p;return this._updateWorkerData(!0),this}getClusterExpansionZoom(p,n){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id,scope:this.scope},n),this}getClusterChildren(p,n){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id,scope:this.scope},n),this}getClusterLeaves(p,n,o,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:p,limit:n,offset:o},m),this}_updateWorkerData(p=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new a.z("dataloading",{dataType:"source"})),this._loaded=!1;const n=a.l({append:p},this.workerOptions);n.scope=this.scope;const o=this._data;typeof o=="string"?(n.request=this.map._requestManager.transformRequest(a.q.resolveURL(o),a.R.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(o),this._pendingLoad=this.actor.send(`${this.type}.loadData`,n,(m,v)=>{if(this._loaded=!0,this._pendingLoad=null,m)this.fire(new a.y(m));else{const S={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&v&&v.resourceTiming&&v.resourceTiming[this.id]&&(S.resourceTiming=v.resourceTiming[this.id]),p&&(this._partialReload=!0),this.fire(new a.z("data",S)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(p),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(p,n){const o=p.actor?"reloadTile":"loadTile";p.actor=this.actor;const m=this.map.style?this.map.style.getLut(this.scope):null,v=m?{image:m.image.clone()}:null,S=this._partialReload,D={type:this.type,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:v,scope:this.scope,pixelRatio:a.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,scaleFactor:this.map.getScaleFactor(),partial:S};p.request=this.actor.send(o,D,(L,O)=>S&&!O?(p.state="loaded",n(null)):(delete p.request,p.destroy(),p.aborted?n(null):L?n(L):(p.loadVectorData(O,this.map.painter,o==="reloadTile"),n(null))),void 0,o==="loadTile")}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p,n){this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id,scope:this.scope}),p.destroy()}onRemove(p){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return a.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends a.aJ{constructor(p,n,o,m){super(p,n,o,m),this.roundZoom=!0,this.type="video",this.options=n}load(){this._loaded=!1;const p=this.options;this.urls=[];for(const n of p.urls)this.urls.push(this.map._requestManager.transformRequest(n,a.R.Source).url);a.aK(this.urls,(n,o)=>{this._loaded=!0,n?this.fire(new a.y(n)):o&&(this.video=o,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const n=this.video.seekable;p<n.start(0)||p>n.end(0)?this.fire(new a.y(new a.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const p=this.map.painter.context,n=p.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(p,this.video,n.RGBA8),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(p)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:a.aJ,model:class extends a.E{constructor(p,n,o,m){super(),this.id=p,this.type="model",this.models=[],this._loaded=!1,this._options=n}load(){const p=[];for(const n in this._options.models){const o=this._options.models[n],m=a.aM(this.map._requestManager.transformRequest(o.uri,a.R.Model).url).then(v=>{if(!v)return;const S=a.aN(v),D=new a.aO(n,o.position,o.orientation,S);D.computeBoundsAndApplyParent(),this.models.push(D)}).catch(v=>{this.fire(new a.y(new Error(`Could not load model ${n} from ${o.uri}: ${v.message}`)))});p.push(m)}return Promise.allSettled(p).then(()=>{this._loaded=!0,this.fire(new a.z("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(n=>{this.fire(new a.y(new Error(`Could not load models: ${n.message}`)))})}onAdd(p){this.map=p,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(p,n){}serialize(){return{type:"model"}}},"batched-model":class extends a.E{constructor(p,n,o,m){super(),this.type="batched-model",this.id=p,this.tileSize=512,this._options=n,this.tiles=this._options.tiles,this.maxzoom=n.maxzoom||19,this.minzoom=n.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=o,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(m)}onAdd(p){this.map=p,this.load()}load(p){this._loaded=!1,this.fire(new a.z("dataloading",{dataType:"source"}));const n=Array.isArray(this.map._language)?this.map._language.join():this.map._language,o=this.map.getWorldview();this._tileJSONRequest=Vl(this._options,this.map._requestManager,n,o,(m,v)=>{this._tileJSONRequest=null,this._loaded=!0,m?(n&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${n}`),o&&o.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${o}`),this.fire(new a.y(m))):v&&(a.l(this,v),v.bounds&&(this.tileBounds=new Ul(v.bounds,this.minzoom,this.maxzoom)),et(v.tiles,this.map._requestManager._customAccessToken),this.fire(new a.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))),p&&p(m)})}hasTransition(){return!1}hasTile(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)}loaded(){return this._loaded}loadTile(p,n){const o=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme)),m={request:this.map._requestManager.transformRequest(o,a.R.Tile),data:void 0,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,tileSize:this.tileSize*p.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:p.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,lut:null,maxZoom:null,promoteId:null,pixelRatio:null,scaleFactor:null};if(p.actor&&p.state!=="expired")if(p.state==="loading")p.reloadCallback=n;else{if(p.buckets){const S=Object.values(p.buckets);for(const D of S)D.dirty=!0;return void(p.state="loaded")}p.request=p.actor.send("reloadTile",m,v.bind(this))}else p.actor=this.dispatcher.getActor(),p.request=p.actor.send("loadTile",m,v.bind(this),void 0,!0);function v(S,D){return p.aborted?n(null):S&&S.status!==404?n(S):(this.map._refreshExpiredTiles&&D&&p.setExpiryData(D),p.loadModelData(D,this.map.painter),p.state="loaded",void n(null))}}serialize(){return a.l({},this._options)}},canvas:class extends a.aJ{constructor(p,n,o,m){super(p,n,o,m),n.coordinates?Array.isArray(n.coordinates)&&n.coordinates.length===4&&!n.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(S=>typeof S!="number"))||this.fire(new a.y(new a.V(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.y(new a.V(`sources.${p}`,null,'missing required property "coordinates"'))),n.animate&&typeof n.animate!="boolean"&&this.fire(new a.y(new a.V(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),n.canvas?typeof n.canvas=="string"||n.canvas instanceof HTMLCanvasElement||this.fire(new a.y(new a.V(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.y(new a.V(`sources.${p}`,null,'missing required property "canvas"'))),this.options=n,this.animate=n.animate===void 0||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.y(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(p){this.pause()}prepare(){let p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const n=this.map.painter.context;this.texture?!p&&!this._playing||this.texture instanceof a.aL||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(n,this.canvas,n.gl.RGBA8,{premultiply:!0}),this._prepareData(n)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}},custom:class extends a.E{constructor(p,n,o,m){super(),this.id=p,this.type="custom",this._dataType="raster",this._dispatcher=o,this._implementation=n,this.setEventedParent(m),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new a.y(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new a.y(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Ul(this._implementation.bounds,this.minzoom,this.maxzoom)),n.update=this._update.bind(this),n.clearTiles=this._clearTiles.bind(this),n.coveringTiles=this._coveringTiles.bind(this),a.l(this,a.ay(n,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return a.ay(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new a.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(p){this.map=p,this._loaded=!1,this.fire(new a.z("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(p),this.load()}onRemove(p){this._implementation.onRemove&&this._implementation.onRemove(p)}hasTile(p){if(this._implementation.hasTile){const{x:n,y:o,z:m}=p.canonical;return this._implementation.hasTile({x:n,y:o,z:m})}return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,n){const{x:o,y:m,z:v}=p.tileID.canonical,S=new AbortController;p.request=Promise.resolve(this._implementation.loadTile({x:o,y:m,z:v},{signal:S.signal})).then((function(D){return delete p.request,p.aborted?(p.state="unloaded",n(null)):D===void 0?(p.state="errored",n(null)):D===null?(this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",n(null)):function(L){return L instanceof ImageData||L instanceof HTMLCanvasElement||L instanceof ImageBitmap||L instanceof HTMLImageElement}(D)?(this.loadTileData(p,D),p.state="loaded",void n(null)):(p.state="errored",n(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(D=>{D.code!==20&&(p.state="errored",n(D))}),p.request.cancel=()=>S.abort()}loadTileData(p,n){p.setTexture(n,this.map.painter)}unloadTile(p,n){if(p.texture&&p.texture instanceof a.T?(p.destroy(!0),p.texture&&p.texture instanceof a.T&&this.map.painter.saveTileTexture(p.texture)):p.destroy(),this._implementation.unloadTile){const{x:o,y:m,z:v}=p.tileID.canonical;this._implementation.unloadTile({x:o,y:m,z:v})}n&&n()}abortTile(p,n){p.request&&p.request.cancel&&(p.request.cancel(),delete p.request),n&&n()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(p=>({x:p.canonical.x,y:p.canonical.y,z:p.canonical.z}))}_clearTiles(){const p=a.aC(this.id,this.scope);this.map.style.clearSource(p)}_update(){this.fire(new a.z("data",{dataType:"source",sourceDataType:"content"}))}}},qf=function(p,n,o,m){const v=new Wi[n.type](p,n,o,m);if(v.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${v.id}`);return a.aP(["load","abort","unload","serialize","prepare"],v),v};function h0(p,n,o,m,v=!1){const S=n.sourceCache.transform,D=n.sourceCache.tilesIn(p,n.has3DLayers,v);D.sort(Pu);const L=[];for(const O of D){const U=O.tile.queryRenderedFeatures(n,O,o,m,S,v);Object.keys(U).length&&L.push({wrappedTileID:O.tile.tileID.wrapped().key,queryResults:U})}return L.length===0?{}:function(O){const U={},q={};for(const Z of O){const X=Z.queryResults,ne=Z.wrappedTileID,ge=q[ne]=q[ne]||{};for(const he in X){const ve=X[he],we=ge[he]=ge[he]||{},ze=U[he]=U[he]||[];for(const Oe of ve)we[Oe.featureIndex]||(we[Oe.featureIndex]=!0,ze.push(Oe))}}return U}(L)}function Du(p,n,o,m,v){const S={},D=m.queryRenderedSymbols(p),L=[];for(const O of Object.keys(D).map(Number))L.push(v[O]);L.sort(Pu);for(const O of L){const U=O.featureIndex.lookupSymbolFeatures(D[O.bucketInstanceId],O.bucketIndex,O.sourceLayerIndex,n,o);for(const q in U){const Z=S[q]=S[q]||[],X=U[q];X.sort((ne,ge)=>{const he=O.featureSortOrder;if(he){const ve=he.indexOf(ne.featureIndex);return he.indexOf(ge.featureIndex)-ve}return ge.featureIndex-ne.featureIndex});for(const ne of X)Z.push(ne)}}return S}function _d(p,n){const o=p.getRenderableIds().map(S=>p.getTileByID(S)),m=[],v={};for(let S=0;S<o.length;S++){const D=o[S],L=D.tileID.canonical.key;v[L]||(v[L]=!0,D.querySourceFeatures(m,n))}return m}function Pu(p,n){const o=p.tileID,m=n.tileID;return o.overscaledZ-m.overscaledZ||o.canonical.y-m.canonical.y||o.wrap-m.wrap||o.canonical.x-m.canonical.x}function zm(p,n){const o={};if(!n)return o;for(const m of p){const v=m.layerIds.map(S=>n.getLayer(S)).filter(Boolean);if(v.length!==0){m.layers=v,m.stateDependentLayerIds&&(m.stateDependentLayers=m.stateDependentLayerIds.map(S=>v.filter(D=>D.id===S)[0]));for(const S of v)o[S.fqid]=m}}return o}const ti=32,Ys=33,Js=new Uint16Array(8184);for(let p=0;p<2046;p++){let n=p+2,o=0,m=0,v=0,S=0,D=0,L=0;for(1&n?v=S=D=ti:o=m=L=ti;(n>>=1)>1;){const U=o+v>>1,q=m+S>>1;1&n?(v=o,S=m,o=D,m=L):(o=v,m=S,v=D,S=L),D=U,L=q}const O=4*p;Js[O+0]=o,Js[O+1]=m,Js[O+2]=v,Js[O+3]=S}const Qs=new Uint16Array(2178),Os=new Uint8Array(1089),Eh=new Uint16Array(1089);function bd(p){return p===0?-.03125:p===32?.03125:0}const eo={type:2,extent:a.ag,loadGeometry:()=>[[new a.P(0,0),new a.P(a.ag+1,0),new a.P(a.ag+1,a.ag+1),new a.P(0,a.ag+1),new a.P(0,0)]]};class kc{constructor(n,o,m,v,S){this.tileID=n,this.uid=a.aV(),this.uses=0,this.tileSize=o,this.tileZoom=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=S,v&&v.style&&(this._lastUpdatedBrightness=v.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",v&&v.transform&&(this.projection=v.transform.projection)}registerFadeDuration(n){const o=n+this.timeAdded;o<a.q.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=a.aQ(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,o,m){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=zm(n.buckets,o.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const S=this.buckets[v];if(S instanceof a.aX){if(this.hasSymbolBuckets=!0,!m)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const S=this.buckets[v];if(S instanceof a.aX&&S.hasRTLText){this.hasRTLText=!0,a.aY();break}}this.queryPadding=0;for(const v in this.buckets){const S=this.buckets[v],D=o.style.getOwnLayer(v);if(!D)continue;const L=D.queryRadius(S);this.queryPadding=Math.max(this.queryPadding,L)}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas),this._lastUpdatedBrightness=n.brightness}else this.collisionBoxArray=new a.aW}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(n,o,m){n&&(n.resourceTiming&&(this.resourceTiming=n.resourceTiming),this.buckets={...this.buckets,...zm(n.buckets,o.style)},n.featureIndex&&(this.latestFeatureIndex=n.featureIndex))}getBucket(n){return this.buckets[n.fqid]}upload(n){for(const v in this.buckets){const S=this.buckets[v];S.uploadPending()&&S.upload(n)}const o=n.gl,m=this.imageAtlas;if(m&&!m.uploaded){const v=!!Object.keys(m.patternPositions).length;this.imageAtlasTexture=new a.T(n,m.image,o.RGBA8,{useMipmap:v}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(n,this.glyphAtlasImage,o.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new a.T(n,this.lineAtlas.image,o.R8),this.lineAtlas.uploaded=!0)}prepare(n,o,m){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture,m),!o||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const v=o.style.getBrightness();(this._lastUpdatedBrightness||v)&&(this._lastUpdatedBrightness&&v&&Math.abs(this._lastUpdatedBrightness-v)<.001||(this.updateBuckets(o,this._lastUpdatedBrightness!==v),this._lastUpdatedBrightness=v))}queryRenderedFeatures(n,o,m,v,S,D){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const L=function(O,U){const q=a.ab.mat4.fromScaling([],[.5*O.width,.5*-O.height,1]);return a.ab.mat4.translate(q,q,[1,-1,0]),a.ab.mat4.multiply(q,q,O.calculateProjMatrix(U.toUnwrapped())),Float32Array.from(q)}(S,this.tileID);return this.latestFeatureIndex.query(n,{tilespaceGeometry:o,pixelPosMatrix:L,transform:v,availableImages:m,tileTransform:this.tileTransform})}querySourceFeatures(n,o){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),S=o?o.sourceLayer:"",D=v._geojsonTileLayer||v[S];if(!D)return;const L=a.aZ(o&&o.filter),{z:O,x:U,y:q}=this.tileID.canonical,Z={z:O,x:U,y:q};for(let X=0;X<D.length;X++){const ne=D.feature(X);if(L.needGeometry){const ve=a.a_(ne,!0);if(!L.filter(new a.a8(this.tileID.overscaledZ),ve,this.tileID.canonical))continue}else if(!L.filter(new a.a8(this.tileID.overscaledZ),ne))continue;const ge=m.getId(ne,S),he=new a.a$(ne,O,U,q,ge);he.tile=Z,n.push(he)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const o=this.expirationTime;if(n.cacheControl){const m=a.b0(n.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(o)if(this.expirationTime<o)v=!0;else{const S=this.expirationTime-o;S?this.expirationTime=m+Math.max(S,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(n){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&n&&this.updateBuckets(n)}updateBuckets(n,o){if(!this.latestFeatureIndex||!n.style)return;const m=this.latestFeatureIndex.loadVTLayers(),v=n.style.listImages(),S=n.style.getBrightness();for(const D in this.buckets){if(!n.style.hasLayer(D))continue;const L=this.buckets[D],O=L.layers[0],U=O.sourceLayer||"_geojsonTileLayer",q=m[U],Z=n.style.getLayerSourceCache(O);let X={};Z&&(X=Z._state.getState(U,void 0));const ne=this.imageAtlas&&this.imageAtlas.patternPositions||{},ge=Object.keys(X).length>0&&!o;ge&&!L.stateDependentLayers.length&&!o||L.update(X,q,v,ne,ge?L.stateDependentLayers:L.layers,o,S),(L instanceof a.b1||L instanceof a.b2)&&n._terrain&&n._terrain.enabled&&Z&&L.programConfigurations.needsUpload&&n._terrain._clearRenderCacheForTile(Z.id,this.tileID);const he=n&&n.style&&n.style.getOwnLayer(D);he&&(this.queryPadding=Math.max(this.queryPadding,he.queryRadius(L)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=a.q.now()+n}setTexture(n,o){const m=o.context,v=m.gl;this.texture=this.texture||o.getTileTexture(n.width),this.texture&&this.texture instanceof a.T?this.texture.update(n):(this.texture=new a.T(m,n,v.RGBA8,{useMipmap:!0}),this.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE))}setDependencies(n,o){const m={};for(const v of o)m[v]=!0;this.dependencies[n]=m}hasDependency(n,o){for(const m of n){const v=this.dependencies[m];if(v){for(const S of o)if(v[S])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,o){if(!o||o.name==="mercator"||this._tileDebugBuffer)return;const m=a.b3(eo,this.tileID.canonical,this.tileTransform)[0],v=new a.b4,S=new a.b5;for(let D=0;D<m.length;D++){const{x:L,y:O}=m[D];v.emplaceBack(L,O),S.emplaceBack(D)}S.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(S),this._tileDebugBuffer=n.createVertexBuffer(v,a.b6.members),this._tileDebugSegments=a.b7.simpleSegment(0,0,v.length,S.length)}_makeTileBoundsBuffers(n,o){if(this._tileBoundsBuffer||!o||o.name==="mercator")return;const m=a.b3(eo,this.tileID.canonical,this.tileTransform)[0];let v,S;if(this.isRaster){const D=function(L,O){const U=a.aQ(L,O),q=Math.pow(2,L.z);for(let ve=0;ve<Ys;ve++)for(let we=0;we<Ys;we++){const ze=a.aR((L.x+(we+bd(we))/ti)/q),Oe=a.aS((L.y+(ve+bd(ve))/ti)/q),Fe=O.project(ze,Oe),Ye=ve*Ys+we;Qs[2*Ye+0]=Math.round((Fe.x*U.scale-U.x)*a.ag),Qs[2*Ye+1]=Math.round((Fe.y*U.scale-U.y)*a.ag)}Os.fill(0),Eh.fill(0);for(let ve=2045;ve>=0;ve--){const we=4*ve,ze=Js[we+0],Oe=Js[we+1],Fe=Js[we+2],Ye=Js[we+3],Ge=ze+Fe>>1,Ze=Oe+Ye>>1,We=Ge+Ze-Oe,nt=Ze+ze-Ge,at=Oe*Ys+ze,Ct=Ye*Ys+Fe,_t=Ze*Ys+Ge,lt=Math.hypot((Qs[2*at+0]+Qs[2*Ct+0])/2-Qs[2*_t+0],(Qs[2*at+1]+Qs[2*Ct+1])/2-Qs[2*_t+1])>=16;Os[_t]=Os[_t]||(lt?1:0),ve<1022&&(Os[_t]=Os[_t]||Os[(Oe+nt>>1)*Ys+(ze+We>>1)]||Os[(Ye+nt>>1)*Ys+(Fe+We>>1)])}const Z=new a.aT,X=new a.aU;let ne=0;function ge(ve,we){const ze=we*Ys+ve;return Eh[ze]===0&&(Z.emplaceBack(Qs[2*ze+0],Qs[2*ze+1],ve*a.ag/ti,we*a.ag/ti),Eh[ze]=++ne),Eh[ze]-1}function he(ve,we,ze,Oe,Fe,Ye){const Ge=ve+ze>>1,Ze=we+Oe>>1;if(Math.abs(ve-Fe)+Math.abs(we-Ye)>1&&Os[Ze*Ys+Ge])he(Fe,Ye,ve,we,Ge,Ze),he(ze,Oe,Fe,Ye,Ge,Ze);else{const We=ge(ve,we),nt=ge(ze,Oe),at=ge(Fe,Ye);X.emplaceBack(We,nt,at)}}return he(0,0,ti,ti,ti,0),he(ti,ti,0,0,0,ti),{vertices:Z,indices:X}}(this.tileID.canonical,o);v=D.vertices,S=D.indices}else{v=new a.aT,S=new a.aU;for(const{x:L,y:O}of m)v.emplaceBack(L,O,0,0);const D=a.b8(v.int16,void 0,4);for(let L=0;L<D.length;L+=3)S.emplaceBack(D[L],D[L+1],D[L+2])}this._tileBoundsBuffer=n.createVertexBuffer(v,a.b9.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(S),this._tileBoundsSegments=a.b7.simpleSegment(0,0,v.length,S.length)}_makeGlobeTileDebugBuffers(n,o){const m=o.projection;if(!m||m.name!=="globe"||o.freezeTileCoverage)return;const v=this.tileID.canonical,S=a.ba(v,o),D=a.bb(S),L=a.ae(o.zoom);let O;L>0&&(O=a.ab.mat4.invert(new Float64Array(16),o.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(n,v,o,D,O,L),this._makeGlobeTileDebugTextBuffer(n,v,o,D,O,L)}_globePoint(n,o,m,v,S,D,L){let O=a.bc(n,o,m);if(D){const U=1<<m.z,q=a.at(v.center.lng),Z=a.aA(v.center.lat),X=(m.x+.5)/U-q;let ne=0;X>.5?ne=-1:X<-.5&&(ne=1);let ge=(n/a.ag+m.x)/U+ne,he=(o/a.ag+m.y)/U;ge=(ge-q)*v._pixelsPerMercatorPixel+q,he=(he-Z)*v._pixelsPerMercatorPixel+Z;const ve=[ge*v.worldSize,he*v.worldSize,0];a.ab.vec3.transformMat4(ve,ve,D),O=a.bd(O,ve,L)}return a.ab.vec3.transformMat4(O,O,S)}_makeGlobeTileDebugBorderBuffer(n,o,m,v,S,D){const L=new a.b4,O=new a.b5,U=new a.be,q=(X,ne,ge,he,ve)=>{const we=(ge-X)/(ve-1),ze=(he-ne)/(ve-1),Oe=L.length;for(let Fe=0;Fe<ve;Fe++){const Ye=X+Fe*we,Ge=ne+Fe*ze;L.emplaceBack(Ye,Ge);const Ze=this._globePoint(Ye,Ge,o,m,v,S,D);U.emplaceBack(Ze[0],Ze[1],Ze[2]),O.emplaceBack(Oe+Fe)}},Z=a.ag;q(0,0,Z,0,16),q(Z,0,Z,Z,16),q(Z,Z,0,Z,16),q(0,Z,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(O),this._tileDebugBuffer=n.createVertexBuffer(L,a.b6.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(U,a.bf.members),this._tileDebugSegments=a.b7.simpleSegment(0,0,L.length,O.length)}_makeGlobeTileDebugTextBuffer(n,o,m,v,S,D){const L=a.ag/4,O=new a.b4,U=new a.aU,q=new a.be,Z=25;U.reserve(32),O.reserve(Z),q.reserve(Z);const X=(ne,ge)=>Z*ne+ge;for(let ne=0;ne<Z;ne++){const ge=ne*L;for(let he=0;he<Z;he++){const ve=he*L;O.emplaceBack(ve,ge);const we=this._globePoint(ve,ge,o,m,v,S,D);q.emplaceBack(we[0],we[1],we[2])}}for(let ne=0;ne<4;ne++)for(let ge=0;ge<4;ge++){const he=X(ne,ge),ve=X(ne,ge+1),we=X(ne+1,ge),ze=X(ne+1,ge+1);U.emplaceBack(he,ve,we),U.emplaceBack(we,ve,ze)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(U),this._tileDebugTextBuffer=n.createVertexBuffer(O,a.b6.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(q,a.bf.members),this._tileDebugTextSegments=a.b7.simpleSegment(0,0,Z,32)}destroy(n=!1){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!n&&this.texture&&this.texture instanceof a.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}a.bg.setPbf(a.bh);class Ch extends kc{constructor(n,o,m,v,S){super(n,o,m,v,S),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(n,o){const m=o.context,v=m.gl;this.texture=this.texture||o.getTileTexture(n.width),this.texture&&this.texture instanceof a.T?this.texture.update(n,{premultiply:!1}):this.texture=new a.T(m,n,v.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(n=16384,o){const m=this._mrt=new a.bg(30),v=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(n-1)}});return this.entireBuffer=null,this.request=a.bi(v,(S,D,L,O)=>{if(S)o(S);else try{const U=m.getHeaderLength(D);if(U>n)return void(this.request=this.fetchHeader(U,o));m.parseHeader(D),this._isHeaderLoaded=!0;let q=0;for(const Z of Object.values(m.layers))q=Math.max(q,Z.dataIndex[Z.dataIndex.length-1].last_byte);D.byteLength>=q&&(this.entireBuffer=D),o(null,this.entireBuffer||D,L,O)}catch(U){o(U)}}),this.request}fetchBand(n,o,m){const v=this._mrt;if(!this._isHeaderLoaded||!v)return void m(new Error("Tile header is not ready"));const S=this.actor;if(!S)return void m(new Error("Can't fetch tile band without an actor"));let D;const L=(Z,X)=>{D.complete(Z,X),Z?m(Z):(this.updateTextureDescriptor(n,o),m(null,this.textureDescriptor&&this.textureDescriptor.img))},O=(Z,X)=>{if(Z)return m(Z);const ne=S.send("decodeRasterArray",{buffer:X,task:D},L,void 0,!0);this._workQueue.push(()=>{ne&&ne.cancel(),D.cancel()})},U=v.getLayer(n);if(!U)return void m(new Error(`Unknown sourceLayer "${n}"`));if(U.hasDataForBand(o))return this.updateTextureDescriptor(n,o),void m(null,this.textureDescriptor?this.textureDescriptor.img:null);const q=U.getDataRange([o]);if(D=v.createDecodingTask(q),!D||D.tasks.length)if(this.flushQueues(),this.entireBuffer)O(null,this.entireBuffer.slice(q.firstByte,q.lastByte+1));else{const Z=Object.assign({},this.requestParams,{headers:{Range:`bytes=${q.firstByte}-${q.lastByte}`}}),X=a.bi(Z,O);this._fetchQueue.push(()=>{X.cancel(),D.cancel()})}else m(null)}updateNeeded(n,o){return(!this.textureDescriptor||this.textureDescriptor.band!==o||this.textureDescriptor.layer!==n)&&this.state!=="errored"}updateTextureDescriptor(n,o){if(!this._mrt)return;const m=this._mrt.getLayer(n);if(!m||!m.hasBand(o)||!m.hasDataForBand(o))return;const{bytes:v,tileSize:S,buffer:D,offset:L,scale:O}=m.getBandView(o),U=S+2*D,q={data:v,width:U,height:U},Z=this.texture;Z&&Z instanceof a.T&&Z.update(q,{premultiply:!1}),this.textureDescriptor={layer:n,band:o,img:q,buffer:D,offset:L,tileSize:S,format:m.pixelFormat,mix:[O,256*O,65536*O,16777216*O]}}}class Wf{constructor(n,o){this.max=n,this.onRemove=o,this.reset()}reset(){for(const n in this.data)for(const o of this.data[n])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(n,o,m){const v=n.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const S={value:o,timeout:void 0};if(m!==void 0&&(S.timeout=setTimeout(()=>{this.remove(n,S)},m)),this.data[v].push(S),this.order.push(v),this.order.length>this.max){const D=this._getAndRemoveByKey(this.order[0]);D&&this.onRemove(D)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const o=this.data[n].shift();return o.timeout&&clearTimeout(o.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),o.value}getByKey(n){const o=this.data[n];return o?o[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,o){if(!this.has(n))return this;const m=n.wrapped().key,v=o===void 0?0:this.data[m].indexOf(o),S=this.data[m][v];return this.data[m].splice(v,1),S.timeout&&clearTimeout(S.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(S.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(n){const o=[];for(const m in this.data)for(const v of this.data[m])n(v.value)||o.push(v);for(const m of o)this.remove(m.value.tileID,m)}}class Rc{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,o,m){const v=String(o);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][v]=this.stateChanges[n][v]||{},a.l(this.stateChanges[n][v],m),this.deletedStates[n]===null){this.deletedStates[n]={};for(const S in this.state[n])S!==v&&(this.deletedStates[n][S]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][v]===null){this.deletedStates[n][v]={};for(const S in this.state[n][v])m[S]||(this.deletedStates[n][v][S]=null)}else for(const S in m)this.deletedStates[n]&&this.deletedStates[n][v]&&this.deletedStates[n][v][S]===null&&delete this.deletedStates[n][v][S]}removeFeatureState(n,o,m){if(this.deletedStates[n]===null)return;const v=String(o);if(this.deletedStates[n]=this.deletedStates[n]||{},m&&o!==void 0)this.deletedStates[n][v]!==null&&(this.deletedStates[n][v]=this.deletedStates[n][v]||{},this.deletedStates[n][v][m]=null);else if(o!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][v])for(m in this.deletedStates[n][v]={},this.stateChanges[n][v])this.deletedStates[n][v][m]=null;else this.deletedStates[n][v]=null;else this.deletedStates[n]=null}getState(n,o){const m=this.state[n]||{},v=this.stateChanges[n]||{},S=this.deletedStates[n];if(S===null)return{};if(o!==void 0){const L=String(o),O=a.l({},m[L],v[L]);if(S){const U=S[o];if(U===null)return{};for(const q in U)delete O[q]}return O}const D=a.l({},m,v);if(S)for(const L in S)delete D[L];return D}initializeTileState(n,o){n.refreshFeatureState(o)}coalesceChanges(n,o){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const S={};for(const D in this.stateChanges[v])this.state[v][D]||(this.state[v][D]={}),a.l(this.state[v][D],this.stateChanges[v][D]),S[D]=this.state[v][D];m[v]=S}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const S={};if(this.deletedStates[v]===null)for(const D in this.state[v])S[D]={},this.state[v][D]={};else for(const D in this.deletedStates[v]){if(this.deletedStates[v][D]===null)this.state[v][D]={};else if(this.state[v][D])for(const L of Object.keys(this.deletedStates[v][D]))delete this.state[v][D][L];S[D]=this.state[v][D]}m[v]=m[v]||{},a.l(m[v],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const v in n)n[v].refreshFeatureState(o)}}class To extends a.E{constructor(n,o,m){super(),this.id=n,this._onlySymbols=m,o.on("data",v=>{v.dataType==="source"&&v.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&v.dataType==="source"&&v.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),o.on("error",()=>{this._sourceErrored=!0}),this._source=o,this._tiles={},this._cache=new Wf(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=o.minTileCacheSize,this._maxTileCacheSize=o.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Rc,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(n){this.map=n,this._minTileCacheSize=this._minTileCacheSize===void 0&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const o=this._tiles[n];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,o){return n.isSymbolTile=this._onlySymbols,n.isExtraShadowCaster=this._shadowCasterTiles[n.tileID.key],this._source.loadTile(n,o)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n)}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n)}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const m=this._tiles[o];m.upload(n),m.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return a.bj(this._tiles).map(n=>n.tileID).sort(Kf).map(n=>n.key)}getRenderableIds(n,o){const m=[];for(const v in this._tiles)this._isIdRenderable(+v,n,o)&&m.push(this._tiles[v]);return n?m.sort((v,S)=>{const D=v.tileID,L=S.tileID,O=new a.P(D.canonical.x,D.canonical.y)._rotate(this.transform.angle),U=new a.P(L.canonical.x,L.canonical.y)._rotate(this.transform.angle);return D.overscaledZ-L.overscaledZ||U.y-O.y||U.x-O.x}).map(v=>v.tileID.key):m.map(v=>v.tileID).sort(Kf).map(v=>v.key)}hasRenderableParent(n){const o=this.findLoadedParent(n,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(n,o,m){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(o||!this._tiles[n].holdingForFade())&&(m||!this._shadowCasterTiles[n])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(+n,"reloading")}}_reloadTile(n,o){const m=this._tiles[n];m&&(m.state!=="loading"&&(m.state=o),this._loadTile(m,this._tileLoaded.bind(this,m,n,o)))}_tileLoaded(n,o,m,v){if(v)if(n.state="errored",v.status!==404)this._source.fire(new a.y(v,{tile:n}));else{if(this._source.fire(new a.z("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:n})),!(n.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const S=this.map.painter.terrain;this.update(this.transform,S.getScaledDemTileSize(),!0),S.resetTileLookupCache(this.id)}else this.update(this.transform)}else n.timeAdded=a.q.now(),m==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(o,n),this._source.type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new a.z("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const o=this.getRenderableIds();for(let v=0;v<o.length;v++){const S=o[v];if(n.neighboringTiles&&n.neighboringTiles[S]){const D=this.getTileByID(S);m(n,D),m(D,n)}}function m(v,S){if(!v.dem||v.dem.borderReady)return;v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0;let D=S.tileID.canonical.x-v.tileID.canonical.x;const L=S.tileID.canonical.y-v.tileID.canonical.y,O=Math.pow(2,v.tileID.canonical.z),U=S.tileID.key;D===0&&L===0||Math.abs(L)>1||(Math.abs(D)>1&&(Math.abs(D+O)===1?D+=O:Math.abs(D-O)===1&&(D-=O)),S.dem&&v.dem&&(v.dem.backfillBorder(S.dem,D,L),v.neighboringTiles&&v.neighboringTiles[U]&&(v.neighboringTiles[U].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,o,m,v){for(const S in this._tiles){let D=this._tiles[S];if(v[S]||!D.hasData()||D.tileID.overscaledZ<=o||D.tileID.overscaledZ>m)continue;let L=D.tileID;for(;D&&D.tileID.overscaledZ>o+1;){const U=D.tileID.scaledTo(D.tileID.overscaledZ-1);D=this._tiles[U.key],D&&D.hasData()&&(L=U)}let O=L;for(;O.overscaledZ>o;)if(O=O.scaledTo(O.overscaledZ-1),n[O.key]){v[L.key]=L;break}}}findLoadedParent(n,o){if(n.key in this._loadedParentTiles){const m=this._loadedParentTiles[n.key];return m&&m.tileID.overscaledZ>=o?m:null}for(let m=n.overscaledZ-1;m>=o;m--){const v=n.scaledTo(m),S=this._getLoadedTile(v);if(S)return S}}_getLoadedTile(n){const o=this._tiles[n.key];return o&&o.hasData()?o:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,o){o=o||this._source.tileSize;const m=Math.ceil(n.width/o)+1,v=Math.ceil(n.height/o)+1,S=Math.floor(m*v*5),D=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,S):S,L=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,D):D;this._cache.setMaxSize(L)}handleWrapJump(n){const o=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,o){const m={};for(const v in this._tiles){const S=this._tiles[v];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+o),m[S.tileID.key]=S}this._tiles=m;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(+v,this._tiles[v])}}update(n,o,m,v){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!m)return;this.updateCacheSize(n,o),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const S=this._source.type==="batched-model";let D,L=this._source.maxzoom;const O=this.map&&this.map.painter?this.map.painter._terrain:null;if(O&&O.sourceCache===this&&O.attenuationRange()){const Z=O.attenuationRange()[0],X=Math.floor(Z)-Math.log2(O.getDemUpscale());L>X&&(L=X)}if(this.used||this.usedForTerrain){if(this._source.tileID)D=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(Z=>new a.aG(Z.canonical.z,Z.wrap,Z.canonical.z,Z.canonical.x,Z.canonical.y));else if(this.tileCoverLift!==0){const Z=n.clone();Z.tileCoverLift=this.tileCoverLift,D=Z.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:L,roundZoom:this._source.roundZoom&&!m,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:S}),this._source.minzoom<=1&&n.projection.name==="globe"&&(D.push(new a.aG(1,0,1,0,0)),D.push(new a.aG(1,0,1,1,0)),D.push(new a.aG(1,0,1,0,1)),D.push(new a.aG(1,0,1,1,1)))}else if(D=n.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:L,roundZoom:this._source.roundZoom&&!m,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:S}),this._source.hasTile){const Z=this._source.hasTile.bind(this._source);D=D.filter(X=>Z(X))}}else D=[];if(D.length>0&&this.castsShadows&&v&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!Mu(this._source.type)){const Z=n.coveringZoomLevel({tileSize:o||this._source.tileSize,roundZoom:this._source.roundZoom&&!m}),X=Math.min(Z,this._source.maxzoom);if(S){const ne=n.extendTileCover(D,X);for(const ge of ne)D.push(ge)}else{const ne=n.extendTileCover(D,X,v);for(const ge of ne)this._shadowCasterTiles[ge.key]=!0,D.push(ge)}}const U=this._updateRetainedTiles(D);if(Mu(this._source.type)&&D.length!==0){const Z={},X={},ne=Object.keys(U);for(const he of ne){const ve=U[he],we=this._tiles[he];if(!we||we.fadeEndTime&&we.fadeEndTime<=a.q.now())continue;const ze=this.findLoadedParent(ve,Math.max(ve.overscaledZ-To.maxOverzooming,this._source.minzoom));ze&&(this._addTile(ze.tileID),Z[ze.tileID.key]=ze.tileID),X[he]=ve}const ge=D[D.length-1].overscaledZ;for(const he in this._tiles){const ve=this._tiles[he];if(U[he]||!ve.hasData())continue;let we=ve.tileID;for(;we.overscaledZ>ge;){we=we.scaledTo(we.overscaledZ-1);const ze=this._tiles[we.key];if(ze&&ze.hasData()&&X[we.key]){U[he]=ve.tileID;break}}}for(const he in Z)U[he]||(this._coveredTiles[he]=!0,U[he]=Z[he])}for(const Z in U)this._tiles[Z].clearFadeHold();const q=a.bk(this._tiles,U);for(const Z of q){const X=this._tiles[Z];X.hasSymbolBuckets&&!X.holdingForFade()?X.setHoldDuration(this.map._fadeDuration):X.hasSymbolBuckets&&!X.symbolFadeFinished()||this._removeTile(+Z)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const o={};if(n.length===0)return o;const m={},v=n.reduce((U,q)=>Math.min(U,q.overscaledZ),1/0),S=n[0].overscaledZ,D=Math.max(S-To.maxOverzooming,this._source.minzoom),L=Math.max(S+To.maxUnderzooming,this._source.minzoom),O={};for(const U of n){const q=this._addTile(U);o[U.key]=U,q.hasData()||v<this._source.maxzoom&&(O[U.key]=U)}this._retainLoadedChildren(O,v,L,o);for(const U of n){let q=this._tiles[U.key];if(q.hasData())continue;if(U.canonical.z>=this._source.maxzoom){const X=U.children(this._source.maxzoom)[0],ne=this.getTile(X);if(ne&&ne.hasData()){o[X.key]=X;continue}}else{const X=U.children(this._source.maxzoom);if(o[X[0].key]&&o[X[1].key]&&o[X[2].key]&&o[X[3].key])continue}let Z=q.wasRequested();for(let X=U.overscaledZ-1;X>=D;--X){const ne=U.scaledTo(X);if(m[ne.key]||(m[ne.key]=!0,q=this.getTile(ne),!q&&Z&&(q=this._addTile(ne)),q&&(o[ne.key]=ne,Z=q.wasRequested(),q.hasData())))break}}return o}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const o=[];let m,v=this._tiles[n].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){m=this._loadedParentTiles[v.key];break}o.push(v.key);const S=v.scaledTo(v.overscaledZ-1);if(m=this._getLoadedTile(S),m)break;v=S}for(const S of o)this._loadedParentTiles[S]=m}}_addTile(n){let o=this._tiles[n.key];if(o)return o.isExtraShadowCaster!==!0||this._shadowCasterTiles[n.key]||this._reloadTile(n.key,"reloading"),o;o=this._cache.getAndRemove(n),o&&(this._setTileReloadTimer(n.key,o),o.tileID=n,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,o)));const m=!!o;if(!m){const v=this.map?this.map.painter:null,S=this._source.tileSize*n.overscaleFactor();o=this._source.type==="raster-array"?new Ch(n,S,this.transform.tileZoom,v,this._isRaster):new kc(n,S,this.transform.tileZoom,v,this._isRaster),this._loadTile(o,this._tileLoaded.bind(this,o,n.key,o.state))}return o?(o.uses++,this._tiles[n.key]=o,m||this._source.fire(new a.z("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null}_setTileReloadTimer(n,o){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const m=o.getExpiryTimeout();m&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},m))}_removeTile(n){const o=this._tiles[n];o&&(o.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),o.uses>0||(o.hasData()&&o.state!=="reloading"||o.state==="empty"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,o,m){const v=[],S=this.transform;if(!S)return v;const D=S.projection.name==="globe",L=a.at(S.center.lng);for(const O in this._tiles){const U=this._tiles[O];if(m&&U.clearQueryDebugViz(),U.holdingForFade())continue;let q;if(D){const Z=U.tileID.canonical;if(Z.z===0){const X=[Math.abs(a.aw(L,...In(Z,-1))-L),Math.abs(a.aw(L,...In(Z,1))-L)];q=[0,2*X.indexOf(Math.min(...X))-1]}else{const X=[Math.abs(a.aw(L,...In(Z,-1))-L),Math.abs(a.aw(L,...In(Z,0))-L),Math.abs(a.aw(L,...In(Z,1))-L)];q=[X.indexOf(Math.min(...X))-1]}}else q=[0];for(const Z of q){const X=n.containsTile(U,S,o,Z);X&&v.push(X)}}return v}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(n){return this._getRenderableCoordinates(n)}_getRenderableCoordinates(n,o){const m=this.getRenderableIds(n,o).map(S=>this._tiles[S].tileID),v=this.transform.projection.name==="globe";for(const S of m)S.projMatrix=this.transform.calculateProjMatrix(S.toUnwrapped()),S.expandedProjMatrix=v?this.transform.calculateProjMatrix(S.toUnwrapped(),!1,!0):S.projMatrix;return m}sortCoordinatesByDistance(n){const o=n.slice(),m=this.transform._camera.position,v=this.transform._camera.forward(),S={};for(const D of o){const L=1/(1<<D.canonical.z);S[D.key]=((D.canonical.x+.5)*L+D.wrap-m[0])*v[0]+((D.canonical.y+.5)*L-m[1])*v[1]-m[2]*v[2]}return o.sort((D,L)=>S[D.key]-S[L.key]),o}hasTransition(){if(this._source.hasTransition())return!0;if(Mu(this._source.type))for(const n in this._tiles){const o=this._tiles[n];if(o.fadeEndTime!==void 0&&o.fadeEndTime>=a.q.now())return!0}return!1}setFeatureState(n,o,m){this._state.updateState(n=n||"_geojsonTileLayer",o,m)}removeFeatureState(n,o,m){this._state.removeFeatureState(n=n||"_geojsonTileLayer",o,m)}getFeatureState(n,o){return this._state.getState(n=n||"_geojsonTileLayer",o)}setDependencies(n,o,m){const v=this._tiles[n];v&&v.setDependencies(o,m)}reloadTilesForDependencies(n,o){for(const m in this._tiles)this._tiles[m].hasDependency(n,o)&&this._reloadTile(+m,"reloading");this._cache.filter(m=>!m.hasDependency(n,o))}_preloadTiles(n,o){if(!this._sourceLoaded){const O=()=>{this._sourceLoaded&&(this._source.off("data",O),this._preloadTiles(n,o))};return void this._source.on("data",O)}const m=new Map,v=Array.isArray(n)?n:[n],S=this.map.painter.terrain,D=this.usedForTerrain&&S?S.getScaledDemTileSize():this._source.tileSize;for(const O of v){const U=O.coveringTiles({tileSize:D,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const q of U)m.set(q.key,q);this.usedForTerrain&&O.updateElevation(!1)}const L=Array.from(m.values());a.bl(L,(O,U)=>{const q=new kc(O,this._source.tileSize*O.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(q,Z=>{this._source.type==="raster-dem"&&q.dem&&this._backfillDEM(q),U(Z,q)})},o)}}function Kf(p,n){const o=Math.abs(2*p.wrap)-+(p.wrap<0),m=Math.abs(2*n.wrap)-+(n.wrap<0);return p.overscaledZ-n.overscaledZ||m-o||n.canonical.y-p.canonical.y||n.canonical.x-p.canonical.x}function Mu(p){return p==="raster"||p==="image"||p==="video"||p==="custom"}function In(p,n){const o=1<<p.z;return[p.x/o+n,(p.x+1)/o+n]}To.maxOverzooming=10,To.maxUnderzooming=3;class Lm{constructor(n){this.style=n,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const n=!1,o=!1;for(const m in this.style._mergedLayers){const v=this.style._mergedLayers[m];if(v.type==="fill-extrusion")this.layers.push({layer:v,visible:n,visibilityChanged:o});else if(v.type==="model"){const S=this.style.getLayerSource(v);S&&S.type==="batched-model"&&this.layers.push({layer:v,visible:n,visibilityChanged:o})}}}onNewFrame(n){this.layersGotHidden=!1;for(const o of this.layers){const m=o.layer;let v=!1;m.type==="fill-extrusion"?v=!m.isHidden(n)&&m.paint.get("fill-extrusion-opacity")>0:m.type==="model"&&(v=!m.isHidden(n)&&m.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!v&&o.visible,o.visible=v}}updateZOffset(n,o){this.currentBuildingBuckets=[];for(const v of this.layers){const S=v.layer,D=this.style.getLayerSourceCache(S);let L=1;S.type==="fill-extrusion"&&(L=v.visible?S.paint.get("fill-extrusion-vertical-scale"):0);let O=D?D.getTile(o):null;if(!O&&D&&o.canonical.z>D.getSource().minzoom){let U=o.scaledTo(Math.min(D.getSource().maxzoom,o.overscaledZ-1));for(;U.overscaledZ>=D.getSource().minzoom&&(O=D.getTile(U),!O&&U.overscaledZ!==0);)U=U.scaledTo(U.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:O?O.getBucket(S):null,tileID:O?O.tileID:o,verticalScale:L})}n.hasAnyZOffset=!1;let m=!1;for(let v=0;v<n.symbolInstances.length;v++){const S=n.symbolInstances.get(v),D=S.zOffset,L=this._getHeightAtTileOffset(o,S.tileAnchorX,S.tileAnchorY);S.zOffset=L!==Number.NEGATIVE_INFINITY?L:D,m||D===S.zOffset||(m=!0),n.hasAnyZOffset||S.zOffset===0||(n.hasAnyZOffset=!0)}m&&(n.zOffsetBuffersNeedUpload=!0,n.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(n,o,m,v){let S=o,D=m;if(n.canonical.z!==v.canonical.z){const L=v.canonical,O=1/(1<<n.canonical.z-L.z);S=(o+n.canonical.x*a.ag)*O-L.x*a.ag|0,D=(m+n.canonical.y*a.ag)*O-L.y*a.ag|0}return{tileX:S,tileY:D}}_getHeightAtTileOffset(n,o,m){let v,S;for(let D=0;D<this.layers.length;++D){if(this.layers[D].layer.type!=="fill-extrusion")continue;const{bucket:L,tileID:O,verticalScale:U}=this.currentBuildingBuckets[D];if(!L)continue;const{tileX:q,tileY:Z}=this._mapCoordToOverlappingTile(n,o,m,O),X=L.getHeightAtTileCoord(q,Z);X&&X.height!==void 0&&(X.hidden?v=X.height:S=Math.max(X.height*U,S||0))}if(S!==void 0)return S;for(let D=0;D<this.layers.length;++D){const L=this.layers[D];if(L.layer.type!=="model"||!L.visible)continue;const{bucket:O,tileID:U}=this.currentBuildingBuckets[D];if(!O)continue;const{tileX:q,tileY:Z}=this._mapCoordToOverlappingTile(n,o,m,U),X=O.getHeightAtTileCoord(q,Z);if(X&&!X.hidden)return X.height===void 0&&v!==void 0?Math.min(X.maxHeight,v)*X.verticalScale:X.height?X.height*X.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Or(p,n){const o={};for(const m in p)m!=="ref"&&(o[m]=p[m]);return a.bm.forEach(m=>{m in n&&(o[m]=n[m])}),o}function Ic(p){p=p.slice();const n=Object.create(null);for(let o=0;o<p.length;o++)n[p[o].id]=p[o];for(let o=0;o<p.length;o++)"ref"in p[o]&&(p[o]=Or(p[o],n[p[o].ref]));return p}const zn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function wd(p,n,o){o.push({command:zn.addSource,args:[p,n[p]]})}function to(p,n,o){n.push({command:zn.removeSource,args:[p]}),o[p]=!0}function Au(p,n,o,m){to(p,o,m),wd(p,n,o)}function Fs(p,n,o){let m;for(m in p[o])if(p[o].hasOwnProperty(m)&&m!=="data"&&!a.bn(p[o][m],n[o][m]))return!1;for(m in n[o])if(n[o].hasOwnProperty(m)&&m!=="data"&&!a.bn(p[o][m],n[o][m]))return!1;return!0}function wr(p,n,o,m,v,S){let D;for(D in n=n||{},p=p||{})p.hasOwnProperty(D)&&(a.bn(p[D],n[D])||o.push({command:S,args:[m,D,n[D],v]}));for(D in n)n.hasOwnProperty(D)&&!p.hasOwnProperty(D)&&(a.bn(p[D],n[D])||o.push({command:S,args:[m,D,n[D],v]}))}function Ln(p){return p.id}function _n(p,n){return p[n.id]=n,p}class bs{constructor(n,o){this.reset(n,o)}reset(n,o){this.points=n||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=a.aw(n,0,1);let o=1,m=this._distances[o];const v=n*this.paddedLength+this.padding;for(;m<v&&o<this._distances.length;)m=this._distances[++o];const S=o-1,D=this._distances[S],L=m-D,O=L>0?(v-D)/L:0;return this.points[S].mult(1-O).add(this.points[o].mult(O))}}class xl{constructor(n,o,m){const v=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(n/m),this.yCellCount=Math.ceil(o/m);for(let D=0;D<this.xCellCount*this.yCellCount;D++)v.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=o,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,o,m,v,S){this._forEachCell(o,m,v,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(o),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(S)}insertCircle(n,o,m,v){this._forEachCell(o-v,m-v,o+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(o),this.circles.push(m),this.circles.push(v)}_insertBoxCell(n,o,m,v,S,D){this.boxCells[S].push(D)}_insertCircleCell(n,o,m,v,S,D){this.circleCells[S].push(D)}_query(n,o,m,v,S,D){if(m<0||n>this.width||v<0||o>this.height)return!S&&[];const L=[];if(n<=0&&o<=0&&this.width<=m&&this.height<=v){if(S)return!0;for(let O=0;O<this.boxKeys.length;O++)L.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){const U=this.circles[3*O],q=this.circles[3*O+1],Z=this.circles[3*O+2];L.push({key:this.circleKeys[O],x1:U-Z,y1:q-Z,x2:U+Z,y2:q+Z})}return D?L.filter(D):L}return this._forEachCell(n,o,m,v,this._queryCell,L,{hitTest:S,seenUids:{box:{},circle:{}}},D),S?L.length>0:L}_queryCircle(n,o,m,v,S){const D=n-m,L=n+m,O=o-m,U=o+m;if(L<0||D>this.width||U<0||O>this.height)return!v&&[];const q=[];return this._forEachCell(D,O,L,U,this._queryCellCircle,q,{hitTest:v,circle:{x:n,y:o,radius:m},seenUids:{box:{},circle:{}}},S),v?q.length>0:q}query(n,o,m,v,S){return this._query(n,o,m,v,!1,S)}hitTest(n,o,m,v,S){return this._query(n,o,m,v,!0,S)}hitTestCircle(n,o,m,v){return this._queryCircle(n,o,m,!0,v)}_queryCell(n,o,m,v,S,D,L,O){const U=L.seenUids,q=this.boxCells[S];if(q!==null){const X=this.bboxes;for(const ne of q)if(!U.box[ne]){U.box[ne]=!0;const ge=4*ne;if(n<=X[ge+2]&&o<=X[ge+3]&&m>=X[ge+0]&&v>=X[ge+1]&&(!O||O(this.boxKeys[ne]))){if(L.hitTest)return D.push(!0),!0;D.push({key:this.boxKeys[ne],x1:X[ge],y1:X[ge+1],x2:X[ge+2],y2:X[ge+3]})}}}const Z=this.circleCells[S];if(Z!==null){const X=this.circles;for(const ne of Z)if(!U.circle[ne]){U.circle[ne]=!0;const ge=3*ne;if(this._circleAndRectCollide(X[ge],X[ge+1],X[ge+2],n,o,m,v)&&(!O||O(this.circleKeys[ne]))){if(L.hitTest)return D.push(!0),!0;{const he=X[ge],ve=X[ge+1],we=X[ge+2];D.push({key:this.circleKeys[ne],x1:he-we,y1:ve-we,x2:he+we,y2:ve+we})}}}}}_queryCellCircle(n,o,m,v,S,D,L,O){const U=L.circle,q=L.seenUids,Z=this.boxCells[S];if(Z!==null){const ne=this.bboxes;for(const ge of Z)if(!q.box[ge]){q.box[ge]=!0;const he=4*ge;if(this._circleAndRectCollide(U.x,U.y,U.radius,ne[he+0],ne[he+1],ne[he+2],ne[he+3])&&(!O||O(this.boxKeys[ge])))return D.push(!0),!0}}const X=this.circleCells[S];if(X!==null){const ne=this.circles;for(const ge of X)if(!q.circle[ge]){q.circle[ge]=!0;const he=3*ge;if(this._circlesCollide(ne[he],ne[he+1],ne[he+2],U.x,U.y,U.radius)&&(!O||O(this.circleKeys[ge])))return D.push(!0),!0}}}_forEachCell(n,o,m,v,S,D,L,O){const U=this._convertToXCellCoord(n),q=this._convertToYCellCoord(o),Z=this._convertToXCellCoord(m),X=this._convertToYCellCoord(v);for(let ne=U;ne<=Z;ne++)for(let ge=q;ge<=X;ge++)if(S.call(this,n,o,m,v,this.xCellCount*ge+ne,D,L,O))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,o,m,v,S,D){const L=v-n,O=S-o,U=m+D;return U*U>L*L+O*O}_circleAndRectCollide(n,o,m,v,S,D,L){const O=(D-v)/2,U=Math.abs(n-(v+O));if(U>O+m)return!1;const q=(L-S)/2,Z=Math.abs(o-(S+q));if(Z>q+m)return!1;if(U<=O||Z<=q)return!0;const X=U-O,ne=Z-q;return X*X+ne*ne<=m*m}}const En={unknown:0,flipRequired:1,flipNotRequired:2},ku=Math.tan(85*Math.PI/180);function Eo(p,n,o,m,v,S,D){const L=a.ab.mat4.create();if(o)if(S.name==="globe"){const O=a.bo(v,n);a.ab.mat4.multiply(L,L,O)}else{const O=a.ab.mat2.invert([],D);L[0]=O[0],L[1]=O[1],L[4]=O[2],L[5]=O[3],m||a.ab.mat4.rotateZ(L,L,v.angle)}else a.ab.mat4.multiply(L,v.labelPlaneMatrix,p);return L}function zc(p,n,o,m,v,S,D){const L=Eo(p,n,o,m,v,S,D);return S.name==="globe"&&o||(L[2]=L[6]=L[10]=L[14]=0),L}function Pa(p,n,o,m,v,S,D){if(o){if(S.name==="globe"){const L=Eo(p,n,o,m,v,S,D);return a.ab.mat4.invert(L,L),a.ab.mat4.multiply(L,p,L),L}{const L=a.ab.mat4.clone(p),O=a.ab.mat4.identity([]);return O[0]=D[0],O[1]=D[1],O[4]=D[2],O[5]=D[3],a.ab.mat4.multiply(L,L,O),m||a.ab.mat4.rotateZ(L,L,-v.angle),L}}return v.glCoordMatrix}function ea(p,n,o,m){const v=[p,n,o,1];o?a.ab.vec4.transformMat4(v,v,m):Iu(v,v,m);const S=v[3];return v[0]/=S,v[1]/=S,v[2]/=S,v}function Dh(p,n){return Math.min(.5+p/n*.5,1.5)}function Gl(p,n){const o=p[0]/p[3],m=p[1]/p[3];return o>=-n[0]&&o<=n[0]&&m>=-n[1]&&m<=n[1]}function Zf(p,n,o,m,v,S,D,L,O,U){const q=o.transform,Z=m?p.textSizeData:p.iconSizeData,X=a.bp(Z,o.transform.zoom),ne=q.projection.name==="globe",ge=[256/o.width*2+1,256/o.height*2+1],he=m?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;he.clear();let ve=null;ne&&(ve=m?p.text.globeExtVertexArray:p.icon.globeExtVertexArray);const we=p.lineVertexArray,ze=m?p.text.placedSymbolArray:p.icon.placedSymbolArray,Oe=o.transform.width/o.transform.height;let Fe,Ye=!1;for(let Ge=0;Ge<ze.length;Ge++){const Ze=ze.get(Ge),{numGlyphs:We,writingMode:nt}=Ze;if(nt!==a.bq.vertical||Ye||Fe===a.bq.horizontal||(Ye=!0),Fe=nt,(Ze.hidden||nt===a.bq.vertical)&&!Ye){Ru(We,he);continue}Ye=!1;const at=new a.P(Ze.tileAnchorX,Ze.tileAnchorY);let{x:Ct,y:_t,z:lt}=q.projection.projectTilePoint(at.x,at.y,U.canonical);if(O){const[zt,dr,rr]=O(at);Ct+=zt,_t+=dr,lt+=rr}const mt=[Ct,_t,lt,1];if(a.ab.vec4.transformMat4(mt,mt,n),!Gl(mt,ge)){Ru(We,he);continue}const Nt=mt[3],qt=Dh(o.transform.getCameraToCenterDistance(q.projection),Nt),Zt=a.br(Z,X,Ze),xt=D?Zt/qt:Zt*qt,Ft=ea(Ct,_t,lt,v);if(Ft[3]<=0){Ru(We,he);continue}let Mt={};const Qt=D?null:O,Ot=Hl(Ze,xt,!1,L,n,v,S,p.glyphOffsetArray,we,he,ve,Ft,at,Mt,Oe,Qt,q.projection,U,D);Ye=Ot.useVertical,Qt&&Ot.needsFlipping&&(Mt={}),(Ot.notEnoughRoom||Ye||Ot.needsFlipping&&Hl(Ze,xt,!0,L,n,v,S,p.glyphOffsetArray,we,he,ve,Ft,at,Mt,Oe,Qt,q.projection,U,D).notEnoughRoom)&&Ru(We,he)}m?(p.text.dynamicLayoutVertexBuffer.updateData(he),ve&&p.text.globeExtVertexBuffer&&p.text.globeExtVertexBuffer.updateData(ve)):(p.icon.dynamicLayoutVertexBuffer.updateData(he),ve&&p.icon.globeExtVertexBuffer&&p.icon.globeExtVertexBuffer.updateData(ve))}function Lc(p,n,o,m,v,S,D,L,O,U,q,Z,X,ne,ge,he){const{lineStartIndex:ve,glyphStartIndex:we,segment:ze}=L,Oe=we+L.numGlyphs,Fe=ve+L.lineLength,Ye=n.getoffsetX(we),Ge=n.getoffsetX(Oe-1),Ze=Ai(p*Ye,o,m,v,S,D,ze,ve,Fe,O,U,q,Z,X,!0,ne,ge,he);if(!Ze)return null;const We=Ai(p*Ge,o,m,v,S,D,ze,ve,Fe,O,U,q,Z,X,!0,ne,ge,he);return We?{first:Ze,last:We}:null}function Sd(p,n,o,m){return p===a.bq.horizontal&&Math.abs(m)>Math.abs(o)?{useVertical:!0}:p===a.bq.vertical?m>0?{needsFlipping:!0}:null:n!==En.unknown&&function(v,S){return v===0||Math.abs(S/v)>ku}(o,m)?n===En.flipRequired?{needsFlipping:!0}:null:o<0?{needsFlipping:!0}:null}function Hl(p,n,o,m,v,S,D,L,O,U,q,Z,X,ne,ge,he,ve,we,ze){const Oe=n/24,Fe=p.lineOffsetX*Oe,Ye=p.lineOffsetY*Oe,{lineStartIndex:Ge,glyphStartIndex:Ze,numGlyphs:We,segment:nt,writingMode:at,flipState:Ct}=p,_t=Ge+p.lineLength,lt=mt=>{if(q){const[xt,Ft,Mt]=mt.up,Qt=U.length;a.bs(q,Qt+0,xt,Ft,Mt),a.bs(q,Qt+1,xt,Ft,Mt),a.bs(q,Qt+2,xt,Ft,Mt),a.bs(q,Qt+3,xt,Ft,Mt)}const[Nt,qt,Zt]=mt.point;a.bt(U,Nt,qt,Zt,mt.angle)};if(We>1){const mt=Lc(Oe,L,Fe,Ye,o,Z,X,p,O,S,ne,he,!1,ve,we,ze);if(!mt)return{notEnoughRoom:!0};if(m&&!o){let[Nt,qt,Zt]=mt.first.point,[xt,Ft,Mt]=mt.last.point;[Nt,qt]=ea(Nt,qt,Zt,D),[xt,Ft]=ea(xt,Ft,Mt,D);const Qt=Sd(at,Ct,(xt-Nt)*ge,Ft-qt);if(p.flipState=Qt&&Qt.needsFlipping?En.flipRequired:En.flipNotRequired,Qt)return Qt}lt(mt.first);for(let Nt=Ze+1;Nt<Ze+We-1;Nt++){const qt=Ai(Oe*L.getoffsetX(Nt),Fe,Ye,o,Z,X,nt,Ge,_t,O,S,ne,he,!1,!1,ve,we,ze);if(!qt)return U.length-=4*(Nt-Ze),{notEnoughRoom:!0};lt(qt)}lt(mt.last)}else{if(m&&!o){const Nt=ea(X.x,X.y,0,v),qt=Ge+nt+1,Zt=new a.P(O.getx(qt),O.gety(qt)),xt=ea(Zt.x,Zt.y,0,v),Ft=xt[3]>0?xt:Yo(X,Zt,Nt,1,v,void 0,ve,we.canonical),Mt=Sd(at,Ct,(Ft[0]-Nt[0])*ge,Ft[1]-Nt[1]);if(p.flipState=Mt&&Mt.needsFlipping?En.flipRequired:En.flipNotRequired,Mt)return Mt}const mt=Ai(Oe*L.getoffsetX(Ze),Fe,Ye,o,Z,X,nt,Ge,_t,O,S,ne,he,!1,!1,ve,we,ze);if(!mt)return{notEnoughRoom:!0};lt(mt)}return{}}function Mi(p,n,o,m,v){const{x:S,y:D,z:L}=m.projectTilePoint(p.x,p.y,n);if(!v)return ea(S,D,L,o);const[O,U,q]=v(p);return ea(S+O,D+U,L+q,o)}function Yo(p,n,o,m,v,S,D,L){const O=Mi(p.sub(n)._unit()._add(p),L,v,D,S);return a.ab.vec3.sub(O,o,O),a.ab.vec3.normalize(O,O),a.ab.vec3.scaleAndAdd(O,o,O,m)}function Ai(p,n,o,m,v,S,D,L,O,U,q,Z,X,ne,ge,he,ve,we){const ze=m?p-n:p+n;let Oe=ze>0?1:-1,Fe=0;m&&(Oe*=-1,Fe=Math.PI),Oe<0&&(Fe+=Math.PI);let Ye=L+D+(Oe>0?0:1)|0,Ge=v,Ze=v,We=0,nt=0;const at=Math.abs(ze),Ct=[],_t=[];let lt=S,mt=lt;const Nt=()=>Yo(mt,lt,Ze,at-We+1,q,X,he,ve.canonical);for(;We+nt<=at;){if(Ye+=Oe,Ye<L||Ye>=O)return null;if(Ze=Ge,mt=lt,Ct.push(Ze),ne&&_t.push(mt),lt=new a.P(U.getx(Ye),U.gety(Ye)),Ge=Z[Ye],!Ge){const dr=Mi(lt,ve.canonical,q,he,X);Ge=dr[3]>0?Z[Ye]=dr:Nt()}We+=nt,nt=a.ab.vec3.distance(Ze,Ge)}ge&&X&&(Z[Ye]&&(Ge=Nt(),nt=a.ab.vec3.distance(Ze,Ge)),Z[Ye]=Ge);const qt=(at-We)/nt,Zt=lt.sub(mt)._mult(qt)._add(mt),xt=a.ab.vec3.sub([],Ge,Ze),Ft=a.ab.vec3.scaleAndAdd([],Ze,xt,qt);let Mt=[0,0,1],Qt=xt[0],Ot=xt[1];if(we&&(Mt=he.upVector(ve.canonical,Zt.x,Zt.y),Mt[0]!==0||Mt[1]!==0||Mt[2]!==1)){const dr=[Mt[2],0,-Mt[0]],rr=a.ab.vec3.cross([],Mt,dr);a.ab.vec3.normalize(dr,dr),a.ab.vec3.normalize(rr,rr),Qt=a.ab.vec3.dot(xt,dr),Ot=a.ab.vec3.dot(xt,rr)}if(o){const dr=a.ab.vec3.cross([],Mt,xt);a.ab.vec3.normalize(dr,dr),a.ab.vec3.scaleAndAdd(Ft,Ft,dr,o*Oe)}const zt=Fe+Math.atan2(Ot,Qt);return Ct.push(Ft),ne&&_t.push(Zt),{point:Ft,angle:zt,path:Ct,tilePath:_t,up:Mt}}function Ru(p,n){const o=n.length,m=o+4*p;n.resize(m),n.float32.fill(-1/0,4*o,4*m)}function Iu(p,n,o){const m=n[0],v=n[1];return p[0]=o[0]*m+o[4]*v+o[12],p[1]=o[1]*m+o[5]*v+o[13],p[3]=o[3]*m+o[7]*v+o[15],p}const wa=100;class Jo{constructor(n,o,m=new xl(n.width+200,n.height+200,25),v=new xl(n.width+200,n.height+200,25)){this.transform=n,this.grid=m,this.ignoredGrid=v,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+wa,this.screenBottomBoundary=n.height+wa,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.fogState=o}placeCollisionBox(n,o,m,v,S,D,L,O){let U=m.projectedAnchorX,q=m.projectedAnchorY,Z=m.projectedAnchorZ;const X=m.elevation,ne=m.tileID,ge=n.getProjection();if(X&&ne){const[Ge,Ze,We]=ge.upVector(ne.canonical,m.tileAnchorX,m.tileAnchorY),nt=ge.upVectorScale(ne.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;U+=Ge*X*nt,q+=Ze*X*nt,Z+=We*X*nt}const he=this.projectAndGetPerspectiveRatio(L,U,q,Z,m.tileID,ge.name==="globe"||!!X||this.transform.pitch>0,ge),ve=D*he.perspectiveRatio,we=(m.x1*o+v.x-m.padding)*ve+he.point.x,ze=(m.y1*o+v.y-m.padding)*ve+he.point.y,Oe=(m.x2*o+v.x+m.padding)*ve+he.point.x,Fe=(m.y2*o+v.y+m.padding)*ve+he.point.y,Ye=he.perspectiveRatio<=.55||he.occluded;return!this.isInsideGrid(we,ze,Oe,Fe)||!S&&this.grid.hitTest(we,ze,Oe,Fe,O)||Ye?{box:[],offscreen:!1,occluded:he.occluded}:{box:[we,ze,Oe,Fe],offscreen:this.isOffscreen(we,ze,Oe,Fe),occluded:!1}}placeCollisionCircles(n,o,m,v,S,D,L,O,U,q,Z,X,ne,ge,he){const ve=[],we=this.transform.elevation,ze=n.getProjection(),Oe=we?we.getAtTileOffsetFunc(he,this.transform.center.lat,this.transform.worldSize,ze):null,Fe=new a.P(m.tileAnchorX,m.tileAnchorY);let{x:Ye,y:Ge,z:Ze}=ze.projectTilePoint(Fe.x,Fe.y,he.canonical);if(Oe){const[Zt,xt,Ft]=Oe(Fe);Ye+=Zt,Ge+=xt,Ze+=Ft}const We=ze.name==="globe",nt=this.projectAndGetPerspectiveRatio(L,Ye,Ge,Ze,he,We||!!we||this.transform.pitch>0,ze),{perspectiveRatio:at}=nt,Ct=(Z?D/at:D*at)/a.bw,_t=ea(Ye,Ge,Ze,O),lt=nt.signedDistanceFromCamera>0?Lc(Ct,S,m.lineOffsetX*Ct,m.lineOffsetY*Ct,!1,_t,Fe,m,v,O,{},we&&!Z?Oe:null,Z&&!!we,ze,he,Z):null;let mt=!1,Nt=!1,qt=!0;if(lt&&!nt.occluded){const Zt=.5*ne*at+ge,xt=new a.P(-100,-100),Ft=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Mt=new bs,{first:Qt,last:Ot}=lt,zt=Qt.path.length;let dr=[];for(let _r=zt-1;_r>=1;_r--)dr.push(Qt.path[_r]);for(let _r=1;_r<Ot.path.length;_r++)dr.push(Ot.path[_r]);const rr=2.5*Zt;U&&(dr=dr.map(([_r,Kr,Ar],zr)=>(Oe&&!We&&(Ar=Oe(zr<zt-1?Qt.tilePath[zt-1-zr]:Ot.tilePath[zr-zt+2])[2]),ea(_r,Kr,Ar,U))),dr.some(_r=>_r[3]<=0)&&(dr=[]));let yr=[];if(dr.length>0){let _r=1/0,Kr=-1/0,Ar=1/0,zr=-1/0;for(const Hr of dr)_r=Math.min(_r,Hr[0]),Ar=Math.min(Ar,Hr[1]),Kr=Math.max(Kr,Hr[0]),zr=Math.max(zr,Hr[1]);Kr>=xt.x&&_r<=Ft.x&&zr>=xt.y&&Ar<=Ft.y&&(yr=[dr.map(Hr=>new a.P(Hr[0],Hr[1]))],(_r<xt.x||Kr>Ft.x||Ar<xt.y||zr>Ft.y)&&(yr=a.bu(yr,xt.x,xt.y,Ft.x,Ft.y)))}for(const _r of yr){Mt.reset(_r,.25*Zt);let Kr=0;Kr=Mt.length<=.5*Zt?1:Math.ceil(Mt.paddedLength/rr)+1;for(let Ar=0;Ar<Kr;Ar++){const zr=Ar/Math.max(Kr-1,1),Hr=Mt.lerp(zr),mn=Hr.x+wa,ln=Hr.y+wa;ve.push(mn,ln,Zt,0);const pa=mn-Zt,ma=ln-Zt,Gn=mn+Zt,Kn=ln+Zt;if(qt=qt&&this.isOffscreen(pa,ma,Gn,Kn),Nt=Nt||this.isInsideGrid(pa,ma,Gn,Kn),!o&&this.grid.hitTestCircle(mn,ln,Zt,X)&&(mt=!0,!q))return{circles:[],offscreen:!1,collisionDetected:mt,occluded:!1}}}}return{circles:!q&&mt||!Nt?[]:ve,offscreen:qt,collisionDetected:mt,occluded:nt.occluded}}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let m=1/0,v=1/0,S=-1/0,D=-1/0;for(const q of n){const Z=new a.P(q.x+wa,q.y+wa);m=Math.min(m,Z.x),v=Math.min(v,Z.y),S=Math.max(S,Z.x),D=Math.max(D,Z.y),o.push(Z)}const L=this.grid.query(m,v,S,D).concat(this.ignoredGrid.query(m,v,S,D)),O={},U={};for(const q of L){const Z=q.key;if(O[Z.bucketInstanceId]===void 0&&(O[Z.bucketInstanceId]={}),O[Z.bucketInstanceId][Z.featureIndex])continue;const X=[new a.P(q.x1,q.y1),new a.P(q.x2,q.y1),new a.P(q.x2,q.y2),new a.P(q.x1,q.y2)];a.bv(o,X)&&(O[Z.bucketInstanceId][Z.featureIndex]=!0,U[Z.bucketInstanceId]===void 0&&(U[Z.bucketInstanceId]=[]),U[Z.bucketInstanceId].push(Z.featureIndex))}return U}insertCollisionBox(n,o,m,v,S){(o?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:v,collisionGroupID:S},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,o,m,v,S){const D=o?this.ignoredGrid:this.grid,L={bucketInstanceId:m,featureIndex:v,collisionGroupID:S};for(let O=0;O<n.length;O+=4)D.insertCircle(L,n[O],n[O+1],n[O+2])}projectAndGetPerspectiveRatio(n,o,m,v,S,D,L){const O=[o,m,v,1];let U=!1;v||this.transform.pitch>0?(a.ab.vec4.transformMat4(O,O,n),this.fogState&&S&&L.name!=="globe"&&(U=function(X,ne,ge,he,ve,we){const ze=we.calculateFogTileMatrix(ve),Oe=[ne,ge,he];return a.ab.vec3.transformMat4(Oe,Oe,ze),Ur(X,a.ab.vec3.length(Oe),we.pitch,we._fov)}(this.fogState,o,m,v,S.toUnwrapped(),this.transform)>.9)):Iu(O,O,n);const q=O[3];return{point:new a.P((O[0]/q+1)/2*this.transform.width+wa,(-O[1]/q+1)/2*this.transform.height+wa),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(L)/q*.5,1.5),signedDistanceFromCamera:q,occluded:D&&O[2]>q||U}}isOffscreen(n,o,m,v){return m<wa||n>=this.screenRightBoundary||v<wa||o>this.screenBottomBoundary}isInsideGrid(n,o,m,v){return m>=0&&n<this.gridRightBoundary&&v>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const n=a.ab.mat4.identity([]);return a.ab.mat4.translate(n,n,[-100,-100,0]),n}}function Co(p,n,o){const m=n.createTileMatrix(p,p.worldSize,o.toUnwrapped());return a.ab.mat4.multiply(new Float32Array(16),p.projMatrix,m)}function ri(p,n,o){if(n.projection.name===o.projection.name)return p.projMatrix;const m=o.clone();return m.setProjection(n.projection),Co(m,n.getProjection(),p)}function Ph(p,n,o){return n.name===o.projection.name?p.projMatrix:Co(o,n,p)}class Do{constructor(n,o,m,v){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?o:-o))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class vl{constructor(n,o,m,v,S,D=!1){this.text=new Do(n?n.text:null,o,m,S),this.icon=new Do(n?n.icon:null,o,v,S),this.clipped=D}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Td{constructor(n,o,m,v=!1){this.text=n,this.icon=o,this.skipFade=m,this.clipped=v}}class zu{constructor(){this.invProjMatrix=a.ab.mat4.create(),this.viewportMatrix=a.ab.mat4.create(),this.circles=[]}}class _x{constructor(n,o,m,v,S){this.bucketInstanceId=n,this.featureIndex=o,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=S}}class ql{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const o=++this.maxGroupID;this.collisionGroups[n]={ID:o,predicate:m=>m.collisionGroupID===o}}return this.collisionGroups[n]}}function Xf(p,n,o,m,v){const{horizontalAlign:S,verticalAlign:D}=a.bD(p),L=-(S-.5)*n,O=-(D-.5)*o,U=a.bC(p,m);return new a.P(L+U[0]*v,O+U[1]*v)}function Yf(p,n,o,m,v){const S=new a.P(p,n);return o&&S._rotate(m?v:-v),S}class Vs{constructor(n,o,m,v,S,D){this.transform=n.clone(),this.projection=n.projection.name,this.collisionIndex=new Jo(this.transform,S),this.buildingIndex=D,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=o,this.retainedQueryData={},this.collisionGroups=new ql(m),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(n,o,m,v,S=1){const D=m.getBucket(o),L=m.latestFeatureIndex;if(!D||!L||o.fqid!==D.layerIds[0])return;const O=D.layers[0].layout,U=D.layers[0].paint,q=m.collisionBoxArray,Z=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),X=m.tileSize/a.ag,ne=m.tileID.toUnwrapped();this.transform.setProjection(D.projection);const ge=(he=m.tileID,ve=D.getProjection(),we=this.transform,ve.name===this.projection?we.calculateProjMatrix(he.toUnwrapped()):Co(we,ve,he));var he,ve,we;const ze=O.get("text-pitch-alignment")==="map",Oe=O.get("text-rotation-alignment")==="map";o.compileFilter(o.options);const Fe=o.dynamicFilter(),Ye=o.dynamicFilterNeedsFeature(),Ge=this.transform.calculatePixelsToTileUnitsMatrix(m),Ze=zc(ge,m.tileID.canonical,ze,Oe,this.transform,D.getProjection(),Ge);let We=null;if(ze){const Zt=Pa(ge,m.tileID.canonical,ze,Oe,this.transform,D.getProjection(),Ge);We=a.ab.mat4.multiply([],this.transform.labelPlaneMatrix,Zt)}let nt=null;Fe&&m.latestFeatureIndex&&(nt={unwrappedTileID:ne,dynamicFilter:Fe,dynamicFilterNeedsFeature:Ye}),this.retainedQueryData[D.bucketInstanceId]=new _x(D.bucketInstanceId,L,D.sourceLayerIndex,D.index,m.tileID);const[at,Ct]=D.layers[0].layout.get("text-size-scale-range"),_t=a.aw(S,at,Ct),[lt,mt]=O.get("icon-size-scale-range"),Nt=a.aw(S,lt,mt),qt={bucket:D,layout:O,paint:U,posMatrix:ge,textLabelPlaneMatrix:Ze,labelToScreenMatrix:We,clippingData:nt,scale:Z,textPixelRatio:X,holdingForFade:m.holdingForFade(),collisionBoxArray:q,partiallyEvaluatedTextSize:a.bp(D.textSizeData,this.transform.zoom,_t),partiallyEvaluatedIconSize:a.bp(D.iconSizeData,this.transform.zoom,Nt),collisionGroup:this.collisionGroups.get(D.sourceID),latestFeatureIndex:m.latestFeatureIndex};if(v)for(const Zt of D.sortKeyRanges){const{sortKey:xt,symbolInstanceStart:Ft,symbolInstanceEnd:Mt}=Zt;n.push({sortKey:xt,symbolInstanceStart:Ft,symbolInstanceEnd:Mt,parameters:qt})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:D.symbolInstances.length,parameters:qt})}attemptAnchorPlacement(n,o,m,v,S,D,L,O,U,q,Z,X,ne,ge,he,ve,we,ze){const{textOffset0:Oe,textOffset1:Fe,crossTileID:Ye}=X,Ge=[Oe,Fe],Ze=Xf(n,m,v,Ge,S),We=this.collisionIndex.placeCollisionBox(ge,S,o,Yf(Ze.x,Ze.y,D,L,this.transform.angle),Z,O,U,q.predicate);if(ve){const nt=ge.getSymbolInstanceIconSize(ze,this.transform.zoom,X.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ge,nt,ve,Yf(Ze.x,Ze.y,D,L,this.transform.angle),Z,O,U,q.predicate).box.length===0)return}if(We.box.length>0){let nt;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ye]&&this.prevPlacement.placements[Ye]&&this.prevPlacement.placements[Ye].text&&(nt=this.prevPlacement.variableOffsets[Ye].anchor),this.variableOffsets[Ye]={textOffset:Ge,width:m,height:v,anchor:n,textScale:S,prevAnchor:nt},this.markUsedJustification(ge,n,X,he),ge.allowVerticalPlacement&&(this.markUsedOrientation(ge,he,X),this.placedOrientations[Ye]=he),{shift:Ze,placedGlyphBoxes:We}}}placeLayerBucketPart(n,o,m,v,S=1){const{bucket:D,layout:L,paint:O,posMatrix:U,textLabelPlaneMatrix:q,labelToScreenMatrix:Z,clippingData:X,textPixelRatio:ne,holdingForFade:ge,collisionBoxArray:he,partiallyEvaluatedTextSize:ve,partiallyEvaluatedIconSize:we,collisionGroup:ze,latestFeatureIndex:Oe}=n.parameters,Fe=L.get("text-optional"),Ye=L.get("icon-optional"),Ge=L.get("text-allow-overlap"),Ze=L.get("icon-allow-overlap"),We=L.get("text-rotation-alignment")==="map",nt=L.get("text-pitch-alignment")==="map",at=L.get("symbol-z-elevate"),Ct=O.get("symbol-z-offset"),_t=L.get("symbol-elevation-reference")==="sea",[lt,mt]=L.get("text-size-scale-range"),[Nt,qt]=L.get("icon-size-scale-range"),Zt=a.aw(S,lt,mt),xt=a.aw(S,Nt,qt);this.transform.setProjection(D.projection);let Ft=Ge&&(Ze||!D.hasIconData()||Ye),Mt=Ze&&(Ge||!D.hasTextData()||Fe);const Qt=!Ct.isConstant();!D.collisionArrays&&he&&D.deserializeCollisionBoxes(he),m&&v&&D.updateCollisionDebugBuffers(this.transform.zoom,he,Zt,xt);const Ot=(zt,dr,rr)=>{const{crossTileID:yr,numVerticalGlyphVertices:_r}=zt;let Kr=null;if(X&&X.dynamicFilterNeedsFeature||Qt){const ia=this.retainedQueryData[D.bucketInstanceId];Kr=Oe.loadFeature({featureIndex:zt.featureIndex,bucketIndex:ia.bucketIndex,sourceLayerIndex:ia.sourceLayerIndex,layoutVertexArrayOffset:0})}if(X&&!(0,X.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},Kr,this.retainedQueryData[D.bucketInstanceId].tileID.canonical,new a.P(zt.tileAnchorX,zt.tileAnchorY),this.transform.calculateDistanceTileData(X.unwrappedTileID)))return this.placements[yr]=new Td(!1,!1,!1,!0),void o.add(yr);const Ar=Ct.evaluate(Kr,{});if(o.has(yr))return;if(ge)return void(this.placements[yr]=new Td(!1,!1,!1));let zr=!1,Hr=!1,mn=!0,ln=!1,pa=!1,ma=null,Gn={box:null,offscreen:null,occluded:null},Kn={box:null},sn=null,jr=null,Vn=null,Zr=0,xn=0,vn=0;rr.textFeatureIndex?Zr=rr.textFeatureIndex:zt.useRuntimeCollisionCircles&&(Zr=zt.featureIndex),rr.verticalTextFeatureIndex&&(xn=rr.verticalTextFeatureIndex);const Mn=ia=>{ia.tileID=this.retainedQueryData[D.bucketInstanceId].tileID;const Hn=this.transform.elevation;ia.elevation=_t?Ar:Ar+(Hn?Hn.getAtTileOffset(ia.tileID,ia.tileAnchorX,ia.tileAnchorY):0),ia.elevation+=zt.zOffset},Sn=rr.textBox;if(Sn){Mn(Sn);const ia=qr=>{let va=a.bq.horizontal;if(D.allowVerticalPlacement&&!qr&&this.prevPlacement){const Qa=this.prevPlacement.placedOrientations[yr];Qa&&(this.placedOrientations[yr]=Qa,va=Qa,this.markUsedOrientation(D,va,zt))}return va},Hn=(qr,va)=>{if(D.allowVerticalPlacement&&_r>0&&rr.verticalTextBox){for(const Qa of D.writingModes)if(Qa===a.bq.vertical?(Gn=va(),Kn=Gn):Gn=qr(),Gn&&Gn.box&&Gn.box.length)break}else Gn=qr()};if(L.get("text-variable-anchor")){let qr=L.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[yr]){const aa=this.prevPlacement.variableOffsets[yr];qr.indexOf(aa.anchor)>0&&(qr=qr.filter(za=>za!==aa.anchor),qr.unshift(aa.anchor))}const va=(aa,za,Yi)=>{const Ji=D.getSymbolInstanceTextSize(ve,zt,this.transform.zoom,dr),fi=(aa.x2-aa.x1)*Ji+2*aa.padding,Qi=(aa.y2-aa.y1)*Ji+2*aa.padding,ho=zt.hasIconTextFit&&!Ze?za:null;ho&&Mn(ho);let us={box:[],offscreen:!1,occluded:!1};const ll=Ge?2*qr.length:qr.length;for(let ds=0;ds<ll;++ds){const li=this.attemptAnchorPlacement(qr[ds%qr.length],aa,fi,Qi,Ji,We,nt,ne,U,ze,ds>=qr.length,zt,dr,D,Yi,ho,ve,we);if(li&&(us=li.placedGlyphBoxes,us&&us.box&&us.box.length)){zr=!0,ma=li.shift;break}}return us};Hn(()=>va(Sn,rr.iconBox,a.bq.horizontal),()=>{const aa=rr.verticalTextBox;return aa&&Mn(aa),D.allowVerticalPlacement&&!(Gn&&Gn.box&&Gn.box.length)&&_r>0&&aa?va(aa,rr.verticalIconBox,a.bq.vertical):{box:null,offscreen:null,occluded:null}}),Gn&&(zr=Gn.box,mn=Gn.offscreen,ln=Gn.occluded);const Qa=ia(!(!Gn||!Gn.box));if(!zr&&this.prevPlacement){const aa=this.prevPlacement.variableOffsets[yr];aa&&(this.variableOffsets[yr]=aa,this.markUsedJustification(D,aa.anchor,zt,Qa))}}else{const qr=(va,Qa)=>{const aa=D.getSymbolInstanceTextSize(ve,zt,this.transform.zoom,dr,S),za=this.collisionIndex.placeCollisionBox(D,aa,va,new a.P(0,0),Ge,ne,U,ze.predicate);return za&&za.box&&za.box.length&&(this.markUsedOrientation(D,Qa,zt),this.placedOrientations[yr]=Qa),za};Hn(()=>qr(Sn,a.bq.horizontal),()=>{const va=rr.verticalTextBox;return D.allowVerticalPlacement&&_r>0&&va?(Mn(va),qr(va,a.bq.vertical)):{box:null,offscreen:null,occluded:null}}),ia(!!(Gn&&Gn.box&&Gn.box.length))}}if(sn=Gn,zr=sn&&sn.box&&sn.box.length>0,mn=sn&&sn.offscreen,ln=sn&&sn.occluded,zt.useRuntimeCollisionCircles){const ia=D.text.placedSymbolArray.get(zt.centerJustifiedTextSymbolIndex>=0?zt.centerJustifiedTextSymbolIndex:zt.verticalPlacedTextSymbolIndex),Hn=a.br(D.textSizeData,ve,ia),qr=L.get("text-padding");jr=this.collisionIndex.placeCollisionCircles(D,Ge,ia,D.lineVertexArray,D.glyphOffsetArray,Hn,U,q,Z,m,nt,ze.predicate,zt.collisionCircleDiameter*Hn/a.bw,qr,this.retainedQueryData[D.bucketInstanceId].tileID),zr=Ge||jr.circles.length>0&&!jr.collisionDetected,mn=mn&&jr.offscreen,ln=jr.occluded}if(rr.iconFeatureIndex&&(vn=rr.iconFeatureIndex),rr.iconBox){const ia=Hn=>{Mn(Hn);const qr=zt.hasIconTextFit&&ma?Yf(ma.x,ma.y,We,nt,this.transform.angle):new a.P(0,0),va=D.getSymbolInstanceIconSize(we,this.transform.zoom,zt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(D,va,Hn,qr,Ze,ne,U,ze.predicate)};Kn&&Kn.box&&Kn.box.length&&rr.verticalIconBox?(Vn=ia(rr.verticalIconBox),Hr=Vn.box.length>0):(Vn=ia(rr.iconBox),Hr=Vn.box.length>0),mn=mn&&Vn.offscreen,pa=Vn.occluded}const Ea=Fe||zt.numHorizontalGlyphVertices===0&&_r===0,ni=Ye||zt.numIconVertices===0;if(Ea||ni?ni?Ea||(Hr=Hr&&zr):zr=Hr&&zr:Hr=zr=Hr&&zr,zr&&sn&&sn.box&&this.collisionIndex.insertCollisionBox(sn.box,L.get("text-ignore-placement"),D.bucketInstanceId,Kn&&Kn.box&&xn?xn:Zr,ze.ID),Hr&&Vn&&this.collisionIndex.insertCollisionBox(Vn.box,L.get("icon-ignore-placement"),D.bucketInstanceId,vn,ze.ID),jr&&(zr&&this.collisionIndex.insertCollisionCircles(jr.circles,L.get("text-ignore-placement"),D.bucketInstanceId,Zr,ze.ID),m)){const ia=D.bucketInstanceId;let Hn=this.collisionCircleArrays[ia];Hn===void 0&&(Hn=this.collisionCircleArrays[ia]=new zu);for(let qr=0;qr<jr.circles.length;qr+=4)Hn.circles.push(jr.circles[qr+0]),Hn.circles.push(jr.circles[qr+1]),Hn.circles.push(jr.circles[qr+2]),Hn.circles.push(jr.collisionDetected?1:0)}const Ca=D.projection.name!=="globe";Ft=Ft&&(Ca||!ln),Mt=Mt&&(Ca||!pa),this.placements[yr]=new Td(zr||Ft,Hr||Mt,mn||D.justReloaded),o.add(yr)};if(at&&this.buildingIndex&&(this.buildingIndex.updateZOffset(D,this.retainedQueryData[D.bucketInstanceId].tileID),D.updateZOffset()),D.sortFeaturesByY){const zt=D.getSortedSymbolIndexes(this.transform.angle);for(let dr=zt.length-1;dr>=0;--dr){const rr=zt[dr];Ot(D.symbolInstances.get(rr),rr,D.collisionArrays[rr])}D.hasAnyZOffset&&a.w(`${D.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(D.hasAnyZOffset){const zt=D.getSortedIndexesByZOffset();for(let dr=0;dr<zt.length;++dr){const rr=zt[dr];Ot(D.symbolInstances.get(rr),rr,D.collisionArrays[rr])}}else for(let zt=n.symbolInstanceStart;zt<n.symbolInstanceEnd;zt++)Ot(D.symbolInstances.get(zt),zt,D.collisionArrays[zt]);if(m&&D.bucketInstanceId in this.collisionCircleArrays){const zt=this.collisionCircleArrays[D.bucketInstanceId];a.ab.mat4.invert(zt.invProjMatrix,U),zt.viewportMatrix=this.collisionIndex.getViewportMatrix()}D.justReloaded=!1}markUsedJustification(n,o,m,v){const{leftJustifiedTextSymbolIndex:S,centerJustifiedTextSymbolIndex:D,rightJustifiedTextSymbolIndex:L,verticalPlacedTextSymbolIndex:O,crossTileID:U}=m,q=a.bB(o),Z=v===a.bq.vertical?O:q==="left"?S:q==="center"?D:q==="right"?L:-1;S>=0&&(n.text.placedSymbolArray.get(S).crossTileID=Z>=0&&S!==Z?0:U),D>=0&&(n.text.placedSymbolArray.get(D).crossTileID=Z>=0&&D!==Z?0:U),L>=0&&(n.text.placedSymbolArray.get(L).crossTileID=Z>=0&&L!==Z?0:U),O>=0&&(n.text.placedSymbolArray.get(O).crossTileID=Z>=0&&O!==Z?0:U)}markUsedOrientation(n,o,m){const v=o===a.bq.horizontal||o===a.bq.horizontalOnly?o:0,S=o===a.bq.vertical?o:0,{leftJustifiedTextSymbolIndex:D,centerJustifiedTextSymbolIndex:L,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:U}=m,q=n.text.placedSymbolArray;D>=0&&(q.get(D).placedOrientation=v),L>=0&&(q.get(L).placedOrientation=v),O>=0&&(q.get(O).placedOrientation=v),U>=0&&(q.get(U).placedOrientation=S)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let m=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const v=o?o.symbolFadeChange(n):1,S=o?o.opacities:{},D=o?o.variableOffsets:{},L=o?o.placedOrientations:{};for(const O in this.placements){const U=this.placements[O],q=S[O];q?(this.opacities[O]=new vl(q,v,U.text,U.icon,null,U.clipped),m=m||U.text!==q.text.placed||U.icon!==q.icon.placed):(this.opacities[O]=new vl(null,v,U.text,U.icon,U.skipFade,U.clipped),m=m||U.text||U.icon)}for(const O in S){const U=S[O];if(!this.opacities[O]){const q=new vl(U,v,!1,!1);q.isHidden()||(this.opacities[O]=q,m=m||U.text.placed||U.icon.placed)}}for(const O in D)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=D[O]);for(const O in L)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=L[O]);m?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:n)}updateLayerOpacities(n,o,m,v){const S=new Set;for(const D of o){const L=D.getBucket(n);L&&D.latestFeatureIndex&&n.fqid===L.layerIds[0]&&(this.updateBucketOpacities(L,S,D,D.collisionBoxArray,m,v,D.tileID,n.scope),L.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(L,D.tileID),L.updateZOffset()))}}updateBucketOpacities(n,o,m,v,S,D,L,O){n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const U=n.layers[0].layout,q=n.layers[0].paint,Z=!!n.layers[0].dynamicFilter(),X=new vl(null,0,!1,!1,!0),ne=U.get("text-allow-overlap"),ge=U.get("icon-allow-overlap"),he=U.get("text-variable-anchor"),ve=U.get("text-rotation-alignment")==="map",we=U.get("text-pitch-alignment")==="map",ze=q.get("symbol-z-offset"),Oe=U.get("symbol-elevation-reference")==="sea",Fe=!ze.isConstant(),Ye=new vl(null,0,ne&&(ge||!n.hasIconData()||U.get("icon-optional")),ge&&(ne||!n.hasTextData()||U.get("text-optional")),!0);!n.collisionArrays&&v&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(v);const Ge=(We,nt,at)=>{for(let Ct=0;Ct<nt/4;Ct++)We.opacityVertexArray.emplaceBack(at)};let Ze=0;D&&n.updateReplacement(L,D);for(let We=0;We<n.symbolInstances.length;We++){const nt=n.symbolInstances.get(We),{numHorizontalGlyphVertices:at,numVerticalGlyphVertices:Ct,crossTileID:_t,numIconVertices:lt,tileAnchorX:mt,tileAnchorY:Nt}=nt;let qt=null;const Zt=this.retainedQueryData[n.bucketInstanceId];Fe&&nt&&Zt&&(qt=m.latestFeatureIndex.loadFeature({featureIndex:nt.featureIndex,bucketIndex:Zt.bucketIndex,sourceLayerIndex:Zt.sourceLayerIndex,layoutVertexArrayOffset:0}));const xt=ze.evaluate(qt,{}),Ft=o.has(_t);let Mt=this.opacities[_t];Ft?Mt=X:Mt||(Mt=Ye,this.opacities[_t]=Mt),o.add(_t);const Qt=at>0||Ct>0,Ot=lt>0,zt=this.placedOrientations[_t],dr=zt===a.bq.vertical,rr=zt===a.bq.horizontal||zt===a.bq.horizontalOnly;!Qt&&!Ot||Mt.isHidden()||Ze++;let yr=!1;if((Qt||Ot)&&D)for(const _r of n.activeReplacements){if(a.bx(_r,S,a.by.Symbol,O)||_r.min.x>mt||mt>_r.max.x||_r.min.y>Nt||Nt>_r.max.y)continue;const Kr=a.bz(mt,Nt,L.canonical,_r.footprintTileId.canonical);if(yr=a.bA(Kr,_r.footprint),yr)break}if(Qt){const _r=yr?Qo:p0(Mt.text);Ge(n.text,at,dr?Qo:_r),Ge(n.text,Ct,rr?Qo:_r);const Kr=Mt.text.isHidden(),{leftJustifiedTextSymbolIndex:Ar,centerJustifiedTextSymbolIndex:zr,rightJustifiedTextSymbolIndex:Hr,verticalPlacedTextSymbolIndex:mn}=nt,ln=n.text.placedSymbolArray,pa=Kr||dr?1:0;Ar>=0&&(ln.get(Ar).hidden=pa),zr>=0&&(ln.get(zr).hidden=pa),Hr>=0&&(ln.get(Hr).hidden=pa),mn>=0&&(ln.get(mn).hidden=Kr||rr?1:0);const ma=this.variableOffsets[_t];ma&&this.markUsedJustification(n,ma.anchor,nt,zt);const Gn=this.placedOrientations[_t];Gn&&(this.markUsedJustification(n,"left",nt,Gn),this.markUsedOrientation(n,Gn,nt))}if(Ot){const _r=yr?Qo:p0(Mt.icon),{placedIconSymbolIndex:Kr,verticalPlacedIconSymbolIndex:Ar}=nt,zr=n.icon.placedSymbolArray,Hr=Mt.icon.isHidden()?1:0;Kr>=0&&(Ge(n.icon,lt,dr?Qo:_r),zr.get(Kr).hidden=Hr),Ar>=0&&(Ge(n.icon,nt.numVerticalIconVertices,rr?Qo:_r),zr.get(Ar).hidden=Hr)}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const _r=n.collisionArrays[We];if(_r){let Kr=new a.P(0,0),Ar=!0;if(_r.textBox||_r.verticalTextBox){if(he){const Hr=this.variableOffsets[_t];Hr?(Kr=Xf(Hr.anchor,Hr.width,Hr.height,Hr.textOffset,Hr.textScale),ve&&Kr._rotate(we?this.transform.angle:-this.transform.angle)):Ar=!1}Z&&(Ar=!Mt.clipped),_r.textBox&&Jf(n.textCollisionBox.collisionVertexArray,Mt.text.placed,!Ar||dr,xt,Oe,Kr.x,Kr.y),_r.verticalTextBox&&Jf(n.textCollisionBox.collisionVertexArray,Mt.text.placed,!Ar||rr,xt,Oe,Kr.x,Kr.y)}const zr=Ar&&!!(!rr&&_r.verticalIconBox);_r.iconBox&&Jf(n.iconCollisionBox.collisionVertexArray,Mt.icon.placed,zr,xt,Oe,nt.hasIconTextFit?Kr.x:0,nt.hasIconTextFit?Kr.y:0),_r.verticalIconBox&&Jf(n.iconCollisionBox.collisionVertexArray,Mt.icon.placed,!zr,xt,Oe,nt.hasIconTextFit?Kr.x:0,nt.hasIconTextFit?Kr.y:0)}}}if(n.fullyClipped=Ze===0,n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){const We=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=We.invProjMatrix,n.placementViewportMatrix=We.viewportMatrix,n.collisionCircleArray=We.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,o){const m=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*m>n}setStale(){this.stale=!0}}function Jf(p,n,o,m,v,S,D){p.emplaceBack(n?1:0,o?1:0,S||0,D||0,m,v?1:0),p.emplaceBack(n?1:0,o?1:0,S||0,D||0,m,v?1:0),p.emplaceBack(n?1:0,o?1:0,S||0,D||0,m,v?1:0),p.emplaceBack(n?1:0,o?1:0,S||0,D||0,m,v?1:0)}const Mh=Math.pow(2,25),f0=Math.pow(2,24),Ah=Math.pow(2,17),bx=Math.pow(2,16),wx=Math.pow(2,9),kh=Math.pow(2,8),Rh=Math.pow(2,1);function p0(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const n=p.placed?1:0,o=Math.floor(127*p.opacity);return o*Mh+n*f0+o*Ah+n*bx+o*wx+n*kh+o*Rh+n}const Qo=0;class m0{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(n,o,m,v,S,D){const L=this._bucketParts;for(;this._currentTileIndex<n.length;)if(o.getBucketParts(L,v,n[this._currentTileIndex],this._sortAcrossTiles,D),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,L.sort((O,U)=>O.sortKey-U.sortKey));this._currentPartIndex<L.length;){const O=L[this._currentPartIndex];if(o.placeLayerBucketPart(O,this._seenCrossTileIDs,m,O.symbolInstanceStart===0,D),this._currentPartIndex++,S())return!0}return!1}}class Ed{constructor(n,o,m,v,S,D,L,O,U){this.placement=new Vs(n,S,D,L,O,U),this._currentPlacementIndex=o.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(n,o,m,v,S){const D=a.q.now(),L=()=>{const O=a.q.now()-D;return!this._forceFullPlacement&&O>2};for(;this._currentPlacementIndex>=0;){const O=o[n[this._currentPlacementIndex]],U=this.placement.collisionIndex.transform.zoom;if(O.type==="symbol"&&(!O.minzoom||O.minzoom<=U)&&(!O.maxzoom||O.maxzoom>U)){const q=O,Z=q.layout.get("symbol-z-elevate"),X=q.layout.get("symbol-sort-key").constantOr(1)!==void 0,ne=q.layout.get("symbol-z-order"),ge=ne==="viewport-y"||ne==="auto"&&!(ne!=="viewport-y"&&X),he=q.layout.get("text-allow-overlap")||q.layout.get("icon-allow-overlap")||q.layout.get("text-ignore-placement")||q.layout.get("icon-ignore-placement"),ve=ge&&he,we=this._inProgressLayer=this._inProgressLayer||new m0(q),ze=a.aC(O.source,O.scope);if(we.continuePlacement(Z||ve?v[ze]:m[ze],this.placement,this._showCollisionBoxes,O,L,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const Us=512/a.ag/2;class Sx{constructor(n,o,m){this.tileID=n,this.bucketInstanceId=m,this.index=new a.bE(o.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const v=n.canonical.x*a.ag,S=n.canonical.y*a.ag;for(let D=0;D<o.length;D++){const{key:L,crossTileID:O,tileAnchorX:U,tileAnchorY:q}=o.get(D),Z=Math.floor((v+U)*Us),X=Math.floor((S+q)*Us);this.index.add(Z,X),this.keys.push(L),this.crossTileIDs.push(O)}this.index.finish()}findMatches(n,o,m){const v=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z),S=Us/Math.pow(2,o.canonical.z-this.tileID.canonical.z),D=o.canonical.x*a.ag,L=o.canonical.y*a.ag;for(let O=0;O<n.length;O++){const U=n.get(O);if(U.crossTileID)continue;const{key:q,tileAnchorX:Z,tileAnchorY:X}=U,ne=Math.floor((D+Z)*S),ge=Math.floor((L+X)*S),he=this.index.range(ne-v,ge-v,ne+v,ge+v);for(const ve of he){const we=this.crossTileIDs[ve];if(this.keys[ve]===q&&!m.has(we)){m.add(we),U.crossTileID=we;break}}}}}class g0{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class y0{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const o=Math.round((n-this.lng)/360);if(o!==0)for(const m in this.indexes){const v=this.indexes[m],S={};for(const D in v){const L=v[D];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+o),S[L.tileID.key]=L}this.indexes[m]=S}this.lng=n}addBucket(n,o,m){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let S=0;S<o.symbolInstances.length;S++)o.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]=new Set);const v=this.usedCrossTileIDs[n.overscaledZ];for(const S in this.indexes){const D=this.indexes[S];if(Number(S)>n.overscaledZ)for(const L in D){const O=D[L];O.tileID.isChildOf(n)&&O.findMatches(o.symbolInstances,n,v)}else{const L=D[n.scaledTo(Number(S)).key];L&&L.findMatches(o.symbolInstances,n,v)}}for(let S=0;S<o.symbolInstances.length;S++){const D=o.symbolInstances.get(S);D.crossTileID||(D.crossTileID=m.generate(),v.add(D.crossTileID))}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Sx(n,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(n,o){for(const m of o.crossTileIDs)this.usedCrossTileIDs[n].delete(m)}removeStaleBuckets(n){let o=!1;for(const m in this.indexes){const v=this.indexes[m];for(const S in v)n[v[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[S]),delete v[S],o=!0)}return o}}class $m{constructor(){this.layerIndexes={},this.crossTileIDs=new g0,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,o,m,v){let S=this.layerIndexes[n.fqid];S===void 0&&(S=this.layerIndexes[n.fqid]=new y0);let D=!1;const L={};v.name!=="globe"&&S.handleWrapJump(m);for(const O of o){const U=O.getBucket(n);U&&n.fqid===U.layerIds[0]&&(U.bucketInstanceId||(U.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(O.tileID,U,this.crossTileIDs)&&(D=!0),L[U.bucketInstanceId]=!0)}return S.removeStaleBuckets(L)&&(D=!0),D}pruneUnusedLayers(n){const o={};n.forEach(m=>{o[m]=!0});for(const m in this.layerIndexes)o[m]||delete this.layerIndexes[m]}}const Lu=771;class dn{constructor(n,o,m,v){this.blendFunction=n,this.blendColor=o,this.mask=m,this.blendEquation=v}}dn.Replace=[1,0,1,0],dn.disabled=new dn(dn.Replace,a.aj.transparent,[!1,!1,!1,!1]),dn.unblended=new dn(dn.Replace,a.aj.transparent,[!0,!0,!0,!0]),dn.alphaBlended=new dn([1,Lu,1,Lu],a.aj.transparent,[!0,!0,!0,!0]),dn.alphaBlendedNonPremultiplied=new dn([770,Lu,770,Lu],a.aj.transparent,[!0,!0,!0,!0]),dn.multiply=new dn([774,0,774,0],a.aj.transparent,[!0,!0,!0,!0]);class Rr{constructor(n,o,m){this.func=n,this.mask=o,this.range=m}}Rr.ReadOnly=!1,Rr.ReadWrite=!0,Rr.disabled=new Rr(519,Rr.ReadOnly,[0,1]);const Qf=7680;class en{constructor(n,o,m,v,S,D){this.test=n,this.ref=o,this.mask=m,this.fail=v,this.depthFail=S,this.pass=D}}en.disabled=new en({func:519,mask:0},0,0,Qf,Qf,Qf);const ep=1029,_l=2305;class Gr{constructor(n,o,m){this.enable=n,this.mode=o,this.frontFace=m}}function $u(p,n){const o=a.bG(p,3);a.ab.mat4.fromQuat(p,n),a.bI(p,3,o)}function $c(p,n){const o=a.ab.quat.identity([]);return a.ab.quat.rotateZ(o,o,-n),a.ab.quat.rotateX(o,o,-p),o}function Cd(p,n){const o=[p[0],p[1],0],m=[n[0],n[1],0];if(a.ab.vec3.length(o)>=1e-15){const D=a.ab.vec3.normalize([],o);a.ab.vec3.scale(m,D,a.ab.vec3.dot(m,D)),n[0]=m[0],n[1]=m[1]}const v=a.ab.vec3.cross([],n,p);if(a.ab.vec3.len(v)<1e-15)return null;const S=Math.atan2(-v[1],v[0]);return $c(Math.atan2(Math.sqrt(p[0]*p[0]+p[1]*p[1]),-p[2]),S)}Gr.disabled=new Gr(!1,ep,_l),Gr.backCCW=new Gr(!0,ep,_l),Gr.backCW=new Gr(!0,ep,2304),Gr.frontCW=new Gr(!0,1028,2304),Gr.frontCCW=new Gr(!0,1028,_l);class Wl{constructor(n,o){this.position=n,this.orientation=o}get position(){return this._position}set position(n){if(n){const o=n instanceof a.aa?n:new a.aa(n[0],n[1],n[2]);this._renderWorldCopies&&(o.x=a.bF(o.x,0,1)),this._position=o}else this._position=null}lookAtPoint(n,o){if(this.orientation=null,!this.position)return;const m=this.position,v=this._elevation?this._elevation.getAtPointOrZero(a.aa.fromLngLat(n)):0,S=a.aa.fromLngLat(n,v),D=[S.x-m.x,S.y-m.y,S.z-m.z];o||(o=[0,0,1]),o[2]=Math.abs(o[2]),this.orientation=Cd(D,o)}setPitchBearing(n,o){this.orientation=$c(a.ai(n),a.ai(-o))}}class Dd{constructor(n,o){this._transform=a.ab.mat4.identity([]),this.orientation=o,this.position=n}get mercatorPosition(){const n=this.position;return new a.aa(n[0],n[1],n[2])}get position(){const n=a.bG(this._transform,3);return[n[0],n[1],n[2]]}set position(n){var o;n&&a.bI(this._transform,3,[(o=n)[0],o[1],o[2],1])}get orientation(){return this._orientation}set orientation(n){this._orientation=n||a.ab.quat.identity([]),n&&$u(this._transform,this._orientation)}getPitchBearing(){const n=this.forward(),o=this.right();return{bearing:Math.atan2(-o[1],o[0]),pitch:Math.atan2(Math.sqrt(n[0]*n[0]+n[1]*n[1]),-n[2])}}setPitchBearing(n,o){this._orientation=$c(n,o),$u(this._transform,this._orientation)}forward(){const n=a.bG(this._transform,2);return[-n[0],-n[1],-n[2]]}up(){const n=a.bG(this._transform,1);return[-n[0],-n[1],-n[2]]}right(){const n=a.bG(this._transform,0);return[n[0],n[1],n[2]]}getCameraToWorld(n,o){const m=new Float64Array(16);return a.ab.mat4.invert(m,this.getWorldToCamera(n,o)),m}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(n,o,m){const v=this.position;a.ab.vec3.scale(v,v,-n);const S=new Float64Array(16);return a.ab.mat4.fromScaling(S,[m,m,m]),a.ab.mat4.translate(S,S,v),S[10]*=o,S}getWorldToCamera(n,o){const m=new Float64Array(16),v=new Float64Array(4),S=this.position;return a.ab.quat.conjugate(v,this._orientation),a.ab.vec3.scale(S,S,-n),a.ab.mat4.fromQuat(m,v),a.ab.mat4.translate(m,m,S),m[1]*=-1,m[5]*=-1,m[9]*=-1,m[13]*=-1,m[8]*=o,m[9]*=o,m[10]*=o,m[11]*=o,m}getCameraToClipPerspective(n,o,m,v){const S=new Float64Array(16);return a.ab.mat4.perspective(S,n,o,m,v),S}getCameraToClipOrthographic(n,o,m,v,S,D){const L=new Float64Array(16);return a.ab.mat4.ortho(L,n,o,m,v,S,D),L}getDistanceToElevation(n,o=!1){const m=n===0?0:a.bH(n,o?a.aS(this.position[1]):this.position[1]),v=this.forward();return(m-this.position[2])/v[2]}clone(){return new Dd([...this.position],[...this.orientation])}}const Oi={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class ws{constructor(n=0,o=0,m=0,v=0){if(isNaN(n)||n<0||isNaN(o)||o<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=o,this.left=m,this.right=v}interpolate(n,o,m){return o.top!=null&&n.top!=null&&(this.top=a.af(n.top,o.top,m)),o.bottom!=null&&n.bottom!=null&&(this.bottom=a.af(n.bottom,o.bottom,m)),o.left!=null&&n.left!=null&&(this.left=a.af(n.left,o.left,m)),o.right!=null&&n.right!=null&&(this.right=a.af(n.right,o.right,m)),this}getCenter(n,o){const m=a.aw((this.left+n-this.right)/2,0,n),v=a.aw((this.top+o-this.bottom)/2,0,o);return new a.P(m,v)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new ws(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Pd=(p,n,o)=>(1-o)*p+o*n,lr=p=>p*p*p*p*p;class Ih{constructor(n,o,m,v,S,D,L){this.tileSize=512,this._renderWorldCopies=S===void 0||S,this._minZoom=n||0,this._maxZoom=o||22,this._minPitch=m??0,this._maxPitch=v??60,this.setProjection(D),this.setMaxBounds(L),this.width=0,this.height=0,this._center=new a.bO(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ws,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Dd,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const n=new Ih(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return n._elevation=this._elevation,n._centerAltitude=this._centerAltitude,n._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,n.tileSize=this.tileSize,n.mercatorFromTransition=this.mercatorFromTransition,n.width=this.width,n.height=this.height,n.cameraElevationReference=this.cameraElevationReference,n._center=this._center,n._setZoom(this.zoom),n._seaLevelZoom=this._seaLevelZoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._nearZ=this._nearZ,n._farZ=this._farZ,n._averageElevation=this._averageElevation,n._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._camera=this._camera.clone(),n._calcMatrices(),n.freezeTileCoverage=this.freezeTileCoverage,n.frustumCorners=this.frustumCorners,n}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(n){this._elevation!==n&&(this._elevation=n,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(n,o=!1){const m=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||m)&&this._updateCameraOnTerrain(),(n||m)&&this._constrainCamera(o),this._calcMatrices()}getProjection(){return a.ay(this.projection,["name","center","parallels"])}setProjection(n){this.projectionOptions=n||{name:"mercator"};const o=this.projection?this.getProjection():void 0;this.projection=a.bP(this.projectionOptions);const m=this.getProjection(),v=!a.bn(o,m);return v&&this._calcMatrices(),this.mercatorFromTransition=!1,v}setOrthographicProjectionAtLowPitch(n){return this._orthographicProjectionAtLowPitch!==n&&(this._orthographicProjectionAtLowPitch=n,this._calcMatrices(),!0)}setMercatorFromTransition(){const n=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=a.bP({name:"mercator"});const o=n!==this.projection.name;return o&&this._calcMatrices(),o}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const n=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(n))}get cameraWorldSize(){const n=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(n))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return a.bH(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return a.bF(this.rotation,-180,180)}set bearing(n){this.rotation=n}get rotation(){return-this.angle/Math.PI*180}set rotation(n){const o=-n*Math.PI/180;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=a.ab.mat2.create(),a.ab.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const o=a.aw(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const n=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/n)}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=a.ai(n),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(n){this._averageElevation=n,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(n){const o=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._setZoom(o),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(n){this._zoom=n,this.scale=this.zoomScale(n),this.tileZoom=Math.floor(n),this.zoomFraction=n-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(n){this._tileCoverLift!==n&&(this._tileCoverLift=n)}_updateCameraOnTerrain(){const n=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,o=this.elevation&&n===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||n===Number.NEGATIVE_INFINITY&&(!o||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const m=this._elevation;o||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&m.exaggeration()&&this._centerAltitudeValidForExaggeration!==m.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*m.exaggeration(),this._centerAltitudeValidForExaggeration=m.exaggeration()):(this._centerAltitude=n||0,this._centerAltitudeValidForExaggeration=m.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const n=this._elevation,o=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],m=this.horizonLineFromTop();let v=0,S=0;for(let D=0;D<o.length;D++){const L=new a.P(o[D][0]*this.width,m+o[D][1]*(this.height-m)),O=n.pointCoordinate(L);if(!O)continue;const U=1/Math.hypot(O[0]-this._camera.position[0],O[1]-this._camera.position[1]);v+=O[3]*U,S+=U}return S===0?NaN:v/S}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const n=this._seaLevelZoom,o=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),m=this.pixelsPerMeter/this.worldSize*o,v=this._mercatorZfromZoom(n),S=this._mercatorZfromZoom(this._maxZoom),D=Math.max(v-m,S);this._setZoom(this._zoomFromMercatorZ(D))}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}computeZoomRelativeTo(n){const o=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,n.toAltitude()));let m;m=n.z<this._camera.position[2]?[o.x,o.y,o.z]:[n.x,n.y,n.z];const v=a.ab.vec3.length(a.ab.vec3.sub([],this._camera.position,m));return a.aw(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(n){if(!this.height||!n.position&&!n.orientation)return;this._updateCameraState();let o=!1;if(n.orientation&&!a.ab.quat.exactEquals(n.orientation,this._camera.orientation)&&(o=this._setCameraOrientation(n.orientation)),n.position){const m=[n.position.x,n.position.y,n.position.z];a.ab.vec3.exactEquals(m,this._camera.position)||(this._setCameraPosition(m),o=!0)}o&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const n=this._camera.position,o=new Wl;return o.position=new a.aa(n[0],n[1],n[2]),o.orientation=this._camera.orientation,o._elevation=this.elevation,o._renderWorldCopies=this.renderWorldCopies,o}_setCameraOrientation(n){if(!a.ab.quat.length(n))return!1;a.ab.quat.normalize(n,n);const o=a.ab.vec3.transformQuat([],[0,0,-1],n),m=a.ab.vec3.transformQuat([],[0,-1,0],n);if(m[2]<0)return!1;const v=Cd(o,m);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(n){const o=this.zoomScale(this.minZoom)*this.tileSize,m=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;n[2]=a.aw(n[2],v/m,v/o),this._camera.position=n}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,o,m){this._unmodified=!1,this._edgeInsets.interpolate(n,o,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const o=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,o)}getVisibleUnwrappedCoordinates(n){const o=[new a.bQ(0,n)];if(this.renderWorldCopies){const m=this.pointCoordinate(new a.P(0,0)),v=this.pointCoordinate(new a.P(this.width,0)),S=this.pointCoordinate(new a.P(this.width,this.height)),D=this.pointCoordinate(new a.P(0,this.height)),L=Math.floor(Math.min(m.x,v.x,S.x,D.x)),O=Math.floor(Math.max(m.x,v.x,S.x,D.x)),U=1;for(let q=L-U;q<=O+U;q++)q!==0&&o.push(new a.bQ(q,n))}return o}isLODDisabled(n){return(!n||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(n,o,m){let v=[];const S=m!==void 0,D=!S;if(D&&this.zoom<o||S&&m[0]===0&&m[1]===0)return v;const L=new Set,O=(q,Z,X,ne,ge)=>{const he=a.c5(Z,q,X,ne,ge);L.has(he)||(v.push(new a.aG(q,Z,X,ne,ge)),L.add(he))};for(let q=0;q<n.length;q++){const Z=n[q];if(D&&Z.canonical.z!==o)continue;const X=Z.canonical,ne=Z.overscaledZ,ge=Z.wrap,he=1<<X.z,ve=X.x+1<he,we=X.x>0,ze=X.y+1<he,Oe=X.y>0,Fe=Z.wrap-(we?0:1),Ye=Z.wrap+(ve?0:1),Ge=we?X.x-1:he-1,Ze=ve?X.x+1:0;if(S)m[0]<0?(O(ne,Ye,X.z,Ze,X.y),m[1]<0&&ze&&(O(ne,ge,X.z,X.x,X.y+1),O(ne,Ye,X.z,Ze,X.y+1)),m[1]>0&&Oe&&(O(ne,ge,X.z,X.x,X.y-1),O(ne,Ye,X.z,Ze,X.y-1))):m[0]>0?(O(ne,Fe,X.z,Ge,X.y),m[1]<0&&ze&&(O(ne,ge,X.z,X.x,X.y+1),O(ne,Fe,X.z,Ge,X.y+1)),m[1]>0&&Oe&&(O(ne,ge,X.z,X.x,X.y-1),O(ne,Fe,X.z,Ge,X.y-1))):m[1]<0&&ze?O(ne,ge,X.z,X.x,X.y+1):Oe&&O(ne,ge,X.z,X.x,X.y-1);else{const We=Z.visibleQuadrants;1&We&&(O(ne,Fe,X.z,Ge,X.y),Oe&&(O(ne,ge,X.z,X.x,X.y-1),O(ne,Fe,X.z,Ge,X.y-1))),2&We&&(O(ne,Ye,X.z,Ze,X.y),Oe&&(O(ne,ge,X.z,X.x,X.y-1),O(ne,Ye,X.z,Ze,X.y-1))),4&We&&(O(ne,Fe,X.z,Ge,X.y),ze&&(O(ne,ge,X.z,X.x,X.y+1),O(ne,Fe,X.z,Ge,X.y+1))),8&We&&(O(ne,Ye,X.z,Ze,X.y),ze&&(O(ne,ge,X.z,X.x,X.y+1),O(ne,Ye,X.z,Ze,X.y+1)))}}const U=[];for(const q of v)v.some(Z=>q.isChildOf(Z))||U.push(q);if(v=U.filter(q=>!n.some(Z=>!!(q.overscaledZ<o&&Z.isChildOf(q))||q.equals(Z)||q.isChildOf(Z))),D){const q=1<<o,Z=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),X=[q*Z.x,q*Z.y],ne=4,ge=ne*ne;v=v.filter(he=>{const ve=he.canonical.x+.5-X[0],we=he.canonical.y+.5-X[1];return ve*ve+we*we<ge})}return v}coveringTiles(n){let o=this.coveringZoomLevel(n);const m=o,v=this.elevation&&this.elevation.exaggeration(),S=v&&!n.isTerrainDEM,D=this.projection.name==="mercator";if(n.minzoom!==void 0&&o<n.minzoom)return[];n.maxzoom!==void 0&&o>n.maxzoom&&(o=n.maxzoom);const L=this.locationCoordinate(this.center),O=this.center.lat,U=1<<o,q=[U*L.x,U*L.y,0],Z=this.projection.name==="globe",X=!Z,ne=a.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,o,X),ge=Z?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),he=U*a.bH(1,this.center.lat),ve=this._camera.position[2]/a.bH(1,this.center.lat),we=[U*ge.x,U*ge.y,ve*(X?1:he)],ze=Z||v,Oe=this.cameraToCenterDistance/n.tileSize*(n.roundZoom?1:.502),Fe=this.isLODDisabled(!0)?o:0;let Ye;if(this._elevation&&n.isTerrainDEM)Ye=1e4*this._elevation.exaggeration();else if(this._elevation){const xt=this._elevation.getMinMaxForVisibleTiles();Ye=xt?xt.max:this._centerAltitude}else Ye=this._centerAltitude;const Ge=n.isTerrainDEM?-Ye:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ze=this.projection.isReprojectedInTileSpace?a.bS(this):1,We=xt=>{const Mt=new a.aa(xt.x+25e-6,xt.y,xt.z),Qt=new a.aa(xt.x,xt.y+25e-6,xt.z),Ot=xt.toLngLat(),zt=Mt.toLngLat(),dr=Qt.toLngLat(),rr=this.locationCoordinate(Ot),yr=this.locationCoordinate(zt),_r=this.locationCoordinate(dr),Kr=Math.hypot(yr.x-rr.x,yr.y-rr.y),Ar=Math.hypot(_r.x-rr.x,_r.y-rr.y);return Math.sqrt(Kr*Ar)*Ze/25e-6},nt=xt=>{const Ft=Ye,Mt=Ge;return{aabb:a.bV(this,U,0,0,0,xt,Mt,Ft,this.projection),zoom:0,x:0,y:0,minZ:Mt,maxZ:Ft,wrap:xt,fullyVisible:!1}},at=[];let Ct=[];const _t=o,lt=n.reparseOverscaled?m:o,mt=(ve-this._centerAltitude)*he,Nt=xt=>{if(!this._elevation||!xt.tileID||!D)return;const Ft=this._elevation.getMinMaxForTile(xt.tileID),Mt=xt.aabb;Ft?(Mt.min[2]=Ft.min,Mt.max[2]=Ft.max,Mt.center[2]=(Mt.min[2]+Mt.max[2])/2):(xt.shouldSplit=Zt(xt),xt.shouldSplit||(Mt.min[2]=Mt.max[2]=Mt.center[2]=this._centerAltitude))},qt=(xt,Ft)=>{if(.707*Ft<xt)return 1;const Mt=Ft/xt;return Mt/(1.4144271570014144+(Math.pow(1.1,Mt-1.4144271570014144+1)-1)/(1.1-1)-1)},Zt=xt=>{if(xt.zoom<Fe)return!0;if(xt.zoom===_t)return!1;if(xt.shouldSplit!=null)return xt.shouldSplit;const Ft=xt.aabb.distanceX(we),Mt=xt.aabb.distanceY(we);let Qt=mt,Ot=1;if(Z){Qt=xt.aabb.distanceZ(we);const Ar=Math.pow(2,xt.zoom),zr=a.aS((xt.y+1)/Ar),Hr=a.aS(xt.y/Ar),mn=Math.min(Math.max(O,zr),Hr),ln=a.c9(mn)/a.c9(O);if(Ot=mn===O?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,ln/this._mercatorScaleRatio),this.zoom<=a.c6&&xt.zoom===_t-1&&ln>=.9)return!0}else if(S&&(Qt=xt.aabb.distanceZ(we)*he),this.projection.isReprojectedInTileSpace&&m<=5){const Ar=Math.pow(2,xt.zoom),zr=We(new a.aa((xt.x+.5)/Ar,(xt.y+.5)/Ar));Ot=zr>.85?1:zr}if(!D){const Ar=Math.sqrt(Ft*Ft+Mt*Mt+Qt*Qt);let zr=(1<<_t-xt.zoom)*Oe*Ot;return zr*=qt(Math.max(Qt,mt),Ar),Ar<zr}let zt=Number.MAX_VALUE,dr=0;const rr=xt.aabb.getCorners(),yr=[];for(const Ar of rr){a.ab.vec3.sub(yr,Ar,we),Z||(S?yr[2]*=he:yr[2]=mt);const zr=a.ab.vec3.dot(yr,this._camera.forward());zr<zt&&(zt=zr,dr=Math.abs(yr[2]))}let _r=(1<<_t-xt.zoom)*Oe*Ot;if(_r*=qt(Math.max(dr,mt),zt),zt<_r)return!0;const Kr=xt.aabb.closestPoint(q);return Kr[0]===q[0]&&Kr[1]===q[1]};if(this.renderWorldCopies)for(let xt=1;xt<=3;xt++)at.push(nt(-xt)),at.push(nt(xt));for(at.push(nt(0));at.length>0;){const xt=at.pop(),Ft=xt.x,Mt=xt.y;let Qt=xt.fullyVisible;const Ot=()=>this.projection.name==="globe"&&(xt.y===0||xt.y===(1<<xt.zoom)-1);if(!Qt){let zt=ze?xt.aabb.intersects(ne):xt.aabb.intersectsFlat(ne);if(zt===0&&Ot()){const dr=new a.bT(xt.zoom,Ft,Mt);zt=a.bU(this,U,dr,!0).intersects(ne)}if(zt===0)continue;Qt=zt===2}if(xt.zoom!==_t&&Zt(xt))for(let zt=0;zt<4;zt++){const dr=(Ft<<1)+zt%2,rr=(Mt<<1)+(zt>>1),yr={aabb:D?xt.aabb.quadrant(zt):a.bV(this,U,xt.zoom+1,dr,rr,xt.wrap,xt.minZ,xt.maxZ,this.projection),zoom:xt.zoom+1,x:dr,y:rr,wrap:xt.wrap,fullyVisible:Qt,tileID:void 0,shouldSplit:void 0,minZ:xt.minZ,maxZ:xt.maxZ};S&&!Z&&(yr.tileID=new a.aG(xt.zoom+1===_t?lt:xt.zoom+1,xt.wrap,xt.zoom+1,dr,rr),Nt(yr)),at.push(yr)}else{const zt=xt.zoom===_t?lt:xt.zoom;if(n.minzoom&&n.minzoom>zt)continue;let dr=0;if(!Qt){let Kr=ze?xt.aabb.intersectsPrecise(ne):xt.aabb.intersectsPreciseFlat(ne);if(Kr===0&&Ot()){const Ar=new a.bT(xt.zoom,Ft,Mt);Kr=a.bU(this,U,Ar,!0).intersectsPrecise(ne)}if(Kr===0)continue;if(n.calculateQuadrantVisibility)if(ne.containsPoint(xt.aabb.center))dr=15;else for(let Ar=0;Ar<4;Ar++)xt.aabb.quadrant(Ar).intersects(ne)!==0&&(dr|=1<<Ar)}const rr=q[0]-(.5+Ft+(xt.wrap<<xt.zoom))*(1<<o-xt.zoom),yr=q[1]-.5-Mt,_r=xt.tileID?xt.tileID:new a.aG(zt,xt.wrap,xt.zoom,Ft,Mt);n.calculateQuadrantVisibility&&(_r.visibleQuadrants=dr),Ct.push({tileID:_r,distanceSq:rr*rr+yr*yr})}}if(this.fogCullDistSq){const xt=this.fogCullDistSq,Ft=this.horizonLineFromTop();Ct=Ct.filter(Mt=>{const Qt=[0,0,0,1],Ot=[a.ag,a.ag,0,1],zt=this.calculateFogTileMatrix(Mt.tileID.toUnwrapped());a.ab.vec4.transformMat4(Qt,Qt,zt),a.ab.vec4.transformMat4(Ot,Ot,zt);const dr=a.ab.vec4.min([],Qt,Ot),rr=a.ab.vec4.max([],Qt,Ot),yr=a.bW(dr,rr);if(yr===0)return!0;let _r=!1;const Kr=this._elevation;if(Kr&&yr>xt&&Ft!==0){const Ar=this.calculateProjMatrix(Mt.tileID.toUnwrapped());let zr;n.isTerrainDEM||(zr=Kr.getMinMaxForTile(Mt.tileID)),zr||(zr={min:Ge,max:Ye});const Hr=a.c7(this.rotation),mn=[Hr[0]*a.ag,Hr[1]*a.ag,zr.max];a.ab.vec3.transformMat4(mn,mn,Ar),_r=(1-mn[1])*this.height*.5<Ft}return yr<xt||_r})}return Ct.sort((xt,Ft)=>xt.distanceSq-Ft.distanceSq).map(xt=>xt.tileID)}resize(n,o){this.width=n,this.height=o,this.pixelsToGLUnits=[2/n,-2/o],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const o=a.aw(n.lat,-a.bX,a.bX),m=this.projection.project(n.lng,o);return new a.P(m.x*this.worldSize,m.y*this.worldSize)}unproject(n){return this.projection.unproject(n.x/this.worldSize,n.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/a.bH(1,this.center.lat)/this.worldSize}setLocationAtPoint(n,o){let m,v;const S=this.centerPoint;if(this.projection.name==="globe"){const L=this.worldSize;m=(o.x-S.x)/L,v=(o.y-S.y)/L}else{const L=this.pointCoordinate(o),O=this.pointCoordinate(S);m=L.x-O.x,v=L.y-O.y}const D=this.locationCoordinate(n);this.setLocation(new a.aa(D.x-m,D.y-v))}setLocation(n){this.center=this.coordinateLocation(n),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(n){return this.projection.locationPoint(this,n)}locationPoint3D(n){return this.projection.locationPoint(this,n,!0)}pointLocation(n){return this.coordinateLocation(this.pointCoordinate(n))}pointLocation3D(n){return this.coordinateLocation(this.pointCoordinate3D(n))}locationCoordinate(n,o){const m=o?a.bH(o,n.lat):void 0,v=this.projection.project(n.lng,n.lat);return new a.aa(v.x,v.y,m)}coordinateLocation(n){return this.projection.unproject(n.x,n.y)}pointRayIntersection(n,o){const m=o??this._centerAltitude,v=[n.x,n.y,0,1],S=[n.x,n.y,1,1];a.ab.vec4.transformMat4(v,v,this.pixelMatrixInverse),a.ab.vec4.transformMat4(S,S,this.pixelMatrixInverse);const D=S[3];a.ab.vec4.scale(v,v,1/v[3]),a.ab.vec4.scale(S,S,1/D);const L=v[2],O=S[2];return{p0:v,p1:S,t:L===O?0:(m-L)/(O-L)}}screenPointToMercatorRay(n){const o=[n.x,n.y,0,1],m=[n.x,n.y,1,1];return a.ab.vec4.transformMat4(o,o,this.pixelMatrixInverse),a.ab.vec4.transformMat4(m,m,this.pixelMatrixInverse),a.ab.vec4.scale(o,o,1/o[3]),a.ab.vec4.scale(m,m,1/m[3]),o[2]=a.bH(o[2],this._center.lat)*this.worldSize,m[2]=a.bH(m[2],this._center.lat)*this.worldSize,a.ab.vec4.scale(o,o,1/this.worldSize),a.ab.vec4.scale(m,m,1/this.worldSize),new a.aq([o[0],o[1],o[2]],a.ab.vec3.normalize([],a.ab.vec3.sub([],m,o)))}rayIntersectionCoordinate(n){const{p0:o,p1:m,t:v}=n,S=a.bH(o[2],this._center.lat),D=a.bH(m[2],this._center.lat);return new a.aa(a.af(o[0],m[0],v)/this.worldSize,a.af(o[1],m[1],v)/this.worldSize,a.af(S,D,v))}pointCoordinate(n,o=this._centerAltitude){return this.projection.pointCoordinate(this,n.x,n.y,o)}pointCoordinate3D(n){if(!this.elevation)return this.pointCoordinate(n);let o=this.projection.pointCoordinate3D(this,n.x,n.y);if(o)return new a.aa(o[0],o[1],o[2]);let m=0,v=this.horizonLineFromTop();if(n.y>v)return this.pointCoordinate(n);const S=.02*v,D=n.clone();for(let L=0;L<10&&v-m>S;L++){D.y=a.af(m,v,.66);const O=this.projection.pointCoordinate3D(this,D.x,D.y);O?(v=D.y,o=O):m=D.y}return o?new a.aa(o[0],o[1],o[2]):this.pointCoordinate(n)}isPointAboveHorizon(n){return this.projection.isPointAboveHorizon(this,n)}isPointOnSurface(n){if(n.y<0||n.y>this.height||n.x<0||n.x>this.width)return!1;if(this.elevation||this.zoom>=a.bY)return!this.isPointAboveHorizon(n);const o=this.pointCoordinate(n);return o.y>=0&&o.y<=1}_coordinatePoint(n,o){const m=o&&this.elevation?this.elevation.getAtPointOrZero(n,this._centerAltitude):this._centerAltitude,v=[n.x*this.worldSize,n.y*this.worldSize,m+n.toAltitude(),1];return a.ab.vec4.transformMat4(v,v,this.pixelMatrix),v[3]>0?new a.P(v[0]/v[3],v[1]/v[3]):new a.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:n,left:o}=this._edgeInsets,m=this.height-this._edgeInsets.bottom,v=this.width-this._edgeInsets.right,S=this.pointLocation3D(new a.P(o,n)),D=this.pointLocation3D(new a.P(v,n)),L=this.pointLocation3D(new a.P(v,m)),O=this.pointLocation3D(new a.P(o,m));let U=Math.min(S.lng,D.lng,L.lng,O.lng),q=Math.max(S.lng,D.lng,L.lng,O.lng),Z=Math.min(S.lat,D.lat,L.lat,O.lat),X=Math.max(S.lat,D.lat,L.lat,O.lat);const ne=Math.pow(2,-this.zoom)/16*270,ge=this.projection.name==="globe"?1:4,he=(ve,we,ze,Oe,Fe)=>{const Ye=(ve+ze)/2,Ge=(we+Oe)/2,Ze=new a.P(Ye,Ge),{lng:We,lat:nt}=this.pointLocation3D(Ze),at=Math.max(0,U-We,Z-nt,We-q,nt-X);U=Math.min(U,We),q=Math.max(q,We),Z=Math.min(Z,nt),X=Math.max(X,nt),(Fe<ge||at>ne)&&(he(ve,we,Ye,Ge,Fe+1),he(Ye,Ge,ze,Oe,Fe+1))};if(he(o,n,v,n,1),he(v,n,v,m,1),he(v,m,o,m,1),he(o,m,o,n,1),this.projection.name==="globe"){const[ve,we]=a.bZ(this);ve?(X=90,q=180,U=-180):we&&(Z=-90,q=180,U=-180)}return new a.az(new a.bO(U,Z),new a.bO(q,X))}_getBoundsRectangular(n,o){const{top:m,left:v}=this._edgeInsets,S=this.height-this._edgeInsets.bottom,D=this.width-this._edgeInsets.right,L=new a.P(v,m),O=new a.P(D,m),U=new a.P(D,S),q=new a.P(v,S);let Z=this.pointCoordinate(L,n),X=this.pointCoordinate(O,n);const ne=this.pointCoordinate(U,o),ge=this.pointCoordinate(q,o),he=(ve,we)=>(we.y-ve.y)/(we.x-ve.x);return Z.y>1&&X.y>=0?Z=new a.aa((1-ge.y)/he(ge,Z)+ge.x,1):Z.y<0&&X.y<=1&&(Z=new a.aa(-ge.y/he(ge,Z)+ge.x,0)),X.y>1&&Z.y>=0?X=new a.aa((1-ne.y)/he(ne,X)+ne.x,1):X.y<0&&Z.y<=1&&(X=new a.aa(-ne.y/he(ne,X)+ne.x,0)),new a.az().extend(this.coordinateLocation(Z)).extend(this.coordinateLocation(X)).extend(this.coordinateLocation(ge)).extend(this.coordinateLocation(ne))}_getBoundsRectangularTerrain(){const n=this.elevation;if(!n.visibleDemTiles.length||n.isUsingMockSource())return this._getBoundsRectangular(0,0);const o=n.visibleDemTiles.reduce((m,v)=>{if(v.dem){const S=v.dem.tree;m.min=Math.min(m.min,S.minimums[0]),m.max=Math.max(m.max,S.maximums[0])}return m},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(o.min*n.exaggeration(),o.max*n.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(n=!0){const o=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,m=this.height/2-o*(1-this._horizonShift);return n?Math.max(0,m):m}getMaxBounds(){return this.maxBounds}setMaxBounds(n){this.maxBounds=n,this.minLat=-a.bX,this.maxLat=a.bX,this.minLng=-180,this.maxLng=180,n&&(this.minLat=n.getSouth(),this.maxLat=n.getNorth(),this.minLng=n.getWest(),this.maxLng=n.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=a.at(this.minLng)*this.tileSize,this.worldMaxX=a.at(this.maxLng)*this.tileSize,this.worldMinY=a.aA(this.maxLat)*this.tileSize,this.worldMaxY=a.aA(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(n,o){return this.projection.createTileMatrix(this,o,n)}calculateDistanceTileData(n){const o=n.key,m=this._distanceTileDataCache;if(m[o])return m[o];const v=n.canonical,S=1/this.height,D=this.cameraWorldSize,L=D/this.zoomScale(v.z),O=(v.x+Math.pow(2,v.z)*n.wrap)*L,U=v.y*L,q=this.point;q.x*=D/this.worldSize,q.y*=D/this.worldSize;const Z=this.angle,X=Math.sin(-Z),ne=-Math.cos(-Z);return m[o]={bearing:[X,ne],center:[(q.x-O)*S,(q.y-U)*S],scale:L/a.ag*S},m[o]}calculateFogTileMatrix(n){const o=n.key,m=this._fogTileMatrixCache;if(m[o])return m[o];const v=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,n);return a.ab.mat4.multiply(v,this.worldToFogMatrix,v),m[o]=new Float32Array(v),m[o]}calculateProjMatrix(n,o=!1,m=!1){const v=n.key;let S;if(S=m?this._expandedProjMatrixCache:o?this._alignedProjMatrixCache:this._projMatrixCache,S[v])return S[v];const D=this.calculatePosMatrix(n,this.worldSize);let L;return L=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:m?this.expandedFarZProjMatrix:o?this.alignedProjMatrix:this.projMatrix,a.ab.mat4.multiply(D,L,D),S[v]=new Float32Array(D),S[v]}calculatePixelsToTileUnitsMatrix(n){const o=n.tileID.key,m=this._pixelsToTileUnitsCache;if(m[o])return m[o];const v=a.b_(n,this);return m[o]=v,m[o]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const n=1/this.worldSize,o=a.ab.mat4.fromScaling([],[n,n,n]);return a.ab.mat4.multiply(o,o,this.globeMatrix),o}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const n=this._elevation;this._updateCameraState();const o=a.bH(1,this._center.lat)*this.worldSize,m=this._computeCameraPosition(o),v=this._camera.forward(),S=a.bH(1,this._center.lat);m[2]/=S,v[2]/=S,a.ab.vec3.normalize(v,v);const D=n.raycast(m,v,n.exaggeration());if(D){const L=a.ab.vec3.scaleAndAdd([],m,v,D),O=new a.aa(L[0],L[1],a.bH(L[2],a.aS(L[1]))),U=(O.z+a.ab.vec3.length([O.x-m[0],O.y-m[1],O.z-m[2]*S]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(U),this._centerAltitude=O.toAltitude(),this._center=this.coordinateLocation(O),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(n=!1){if(!this._elevation)return;const o=this._elevation,m=a.bH(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(m),S=o.getAtPointOrZero(new a.aa(...v)),D=this.pixelsPerMeter/this.worldSize*S,L=this._minimumHeightOverTerrain(),O=v[2]-D;if(O<=L)if(O<0||n){const U=this.locationCoordinate(this._center,this._centerAltitude),q=[v[0],v[1],U.z-v[2]],Z=a.ab.vec3.length(q);q[2]-=(L-O)/this._pixelsPerMercatorPixel;const X=a.ab.vec3.length(q);if(X===0)return;a.ab.vec3.scale(q,q,Z/X*this._pixelsPerMercatorPixel),this._camera.position=[v[0],v[1],U.z*this._pixelsPerMercatorPixel-q[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const n=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||n){const X=this.center;return X.lat=a.aw(X.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!n)&&(X.lng=a.aw(X.lng,this.minLng,this.maxLng)),this.center=X,void(this._constraining=!1)}const o=this._unmodified,{x:m,y:v}=this.point;let S=0,D=m,L=v;const O=this.width/2,U=this.height/2,q=this.worldMinY*this.scale,Z=this.worldMaxY*this.scale;if(v-U<q&&(L=q+U),v+U>Z&&(L=Z-U),Z-q<this.height&&(S=Math.max(S,this.height/(Z-q)),L=(Z+q)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const X=this.worldMinX*this.scale,ne=this.worldMaxX*this.scale,ge=this.worldSize/2-(X+ne)/2;D=(m+ge+this.worldSize)%this.worldSize-ge,D-O<X&&(D=X+O),D+O>ne&&(D=ne-O),ne-X<this.width&&(S=Math.max(S,this.width/(ne-X)),D=(ne+X)/2)}D===m&&L===v||(this.center=this.unproject(new a.P(D,L))),S&&(this.zoom+=this.scaleZoom(S)),this._constrainCamera(),this._unmodified=o,this._constraining=!1}_minZoomForBounds(){let n=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(n=Math.max(n,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),n}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,o=this.projection.name==="globe",m=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=a.bH(1,this.center.lat)/a.bH(1,a.c8));const v=a.b$(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,v),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const S=this.projection.zAxisUnit==="meters"?m:1,D=this._camera.getWorldToCamera(this.worldSize,S);let L;const O=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(O[8]=2*-n.x/this.width,O[9]=2*n.y/this.height,this.isOrthographic){let nt=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),at=nt*this.aspect,Ct=-at,_t=-nt;at-=n.x,Ct-=n.x,nt+=n.y,_t+=n.y,L=this._camera.getCameraToClipOrthographic(Ct,at,_t,nt,this._nearZ,this._farZ),((lt,mt,Nt,qt)=>{for(let Zt=0;Zt<16;Zt++)lt[Zt]=Pd(mt[Zt],Nt[Zt],qt)})(L,L,O,lr(this.pitch>=15?1:this.pitch/15))}else L=O;const U=a.ab.mat4.mul([],O,D);let q=a.ab.mat4.mul([],L,D);if(this.projection.isReprojectedInTileSpace){const nt=this.locationCoordinate(this.center),at=a.ab.mat4.identity([]);a.ab.mat4.translate(at,at,[nt.x*this.worldSize,nt.y*this.worldSize,0]),a.ab.mat4.multiply(at,at,a.c0(this)),a.ab.mat4.translate(at,at,[-nt.x*this.worldSize,-nt.y*this.worldSize,0]),a.ab.mat4.multiply(q,q,at),a.ab.mat4.multiply(U,U,at),this.inverseAdjustmentMatrix=a.c1(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=a.ab.mat4.scale([],q,[this.worldSize,this.worldSize,this.worldSize/S,1]),this.projMatrix=q,this.invProjMatrix=a.ab.mat4.invert(new Float64Array(16),this.projMatrix),o){const nt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);nt[8]=2*-n.x/this.width,nt[9]=2*n.y/this.height,this.expandedFarZProjMatrix=a.ab.mat4.mul([],nt,D)}else this.expandedFarZProjMatrix=this.projMatrix;const Z=a.ab.mat4.invert([],L);this.frustumCorners=a.c2.fromInvProjectionMatrix(Z,this.horizonLineFromTop(),this.height),this.cameraFrustum=a.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!o);const X=new Float32Array(16);a.ab.mat4.identity(X),a.ab.mat4.scale(X,X,[1,-1,1]),a.ab.mat4.rotateX(X,X,this._pitch),a.ab.mat4.rotateZ(X,X,this.angle);const ne=a.ab.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=a.ab.mat4.clone(ne);const ge=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;ne[8]=2*-n.x/this.width,ne[9]=2*(n.y+ge)/this.height,this.skyboxMatrix=a.ab.mat4.multiply(X,ne,X);const he=this.point,ve=he.x,we=he.y,ze=this.width%2/2,Oe=this.height%2/2,Fe=Math.cos(this.angle),Ye=Math.sin(this.angle),Ge=ve-Math.round(ve)+Fe*ze+Ye*Oe,Ze=we-Math.round(we)+Fe*Oe+Ye*ze,We=new Float64Array(q);if(a.ab.mat4.translate(We,We,[Ge>.5?Ge-1:Ge,Ze>.5?Ze-1:Ze,0]),this.alignedProjMatrix=We,q=a.ab.mat4.create(),a.ab.mat4.scale(q,q,[this.width/2,-this.height/2,1]),a.ab.mat4.translate(q,q,[1,-1,0]),this.labelPlaneMatrix=q,q=a.ab.mat4.create(),a.ab.mat4.scale(q,q,[1,-1,1]),a.ab.mat4.translate(q,q,[-1,-1,0]),a.ab.mat4.scale(q,q,[2/this.width,2/this.height,1]),this.glCoordMatrix=q,this.pixelMatrix=a.ab.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,U),this._calcFogMatrices(),this._distanceTileDataCache={},q=a.ab.mat4.invert(new Float64Array(16),this.pixelMatrix),!q)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=q,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=a.c3(this);const nt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=a.ab.vec3.transformMat4(nt,nt,D),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=q;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const n=this.cameraWorldSizeForFog,o=this.cameraPixelsPerMeter,m=this._camera.position,v=1/this.height/this._pixelsPerMercatorPixel,S=[n,n,o];a.ab.vec3.scale(S,S,v),a.ab.vec3.scale(m,m,-1),a.ab.vec3.multiply(m,m,S);const D=a.ab.mat4.create();a.ab.mat4.translate(D,D,m),a.ab.mat4.scale(D,D,S),this.mercatorFogMatrix=D,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(n,o,v)}_computeCameraPosition(n){const o=(n=n||this.pixelsPerMeter)/this.pixelsPerMeter,m=this._camera.forward(),v=this.point,S=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*o-n/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-m[0]*S,v.y/this.worldSize-m[1]*S,n/this.worldSize*this._centerAltitude-m[2]*S]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(n){const o=this._maxCameraBoundsDistance()*Math.cos(this._pitch),m=this._camera.position[2],v=n[2];let S=1;this.projection.wrap&&(this.center=this.center.wrap()),v>0&&(S=Math.min((o-m)/v,1)),this._camera.position=a.ab.vec3.scaleAndAdd([],this._camera.position,n,S),this._updateStateFromCamera()}_updateStateFromCamera(){const n=this._camera.position,o=this._camera.forward(),{pitch:m,bearing:v}=this._camera.getPitchBearing(),S=a.bH(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,D=this._mercatorZfromZoom(this._maxZoom)*Math.cos(a.ai(this._maxPitch)),L=Math.max((n[2]-S)/Math.cos(m),D),O=this._zoomFromMercatorZ(L);a.ab.vec3.scaleAndAdd(n,n,o,L),this._pitch=a.aw(m,a.ai(this.minPitch),a.ai(this.maxPitch)),this.angle=a.bF(v,-Math.PI,Math.PI),this._setZoom(a.aw(O,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new a.aa(n[0],n[1],n[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(n){return Math.pow(2,n)*this.tileSize}_mercatorZfromZoom(n){return this.cameraToCenterDistance/this._worldSizeFromZoom(n)}_minimumHeightOverTerrain(){const n=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(n)}_zoomFromMercatorZ(n){return this.scaleZoom(this.cameraToCenterDistance/(n*this.tileSize))}zoomFromMercatorZAdjusted(n){let o=0,m=a.bY,v=0,S=1/0;for(;m-o>1e-6&&m>o;){const D=o+.5*(m-o),L=this.tileSize*Math.pow(2,D),O=this.getCameraToCenterDistance(this.projection,D,L),U=this.scaleZoom(O/(n*this.tileSize)),q=Math.abs(D-U);q<S&&(S=q,v=D),D<U?o=D:m=D}return v}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(a.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(n,o){const m=Math.min(n.x,o.x),v=Math.max(n.x,o.x),S=Math.min(n.y,o.y),D=Math.max(n.y,o.y);if(S<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const L=[new a.P(m,S),new a.P(v,D),new a.P(m,D),new a.P(v,S)],O=this.renderWorldCopies?-3:0,U=this.renderWorldCopies?4:1;for(const q of L){const Z=this.pointRayIntersection(q);if(Z.t<0)return!0;const X=this.rayIntersectionCoordinate(Z);if(X.x<O||X.y<0||X.x>U||X.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+a.c4(this.fovAboveCenter)>88||this.anyCornerOffEdge(new a.P(0,0),new a.P(this.width,this.height))}zoomDeltaToMovement(n,o){const m=a.ab.vec3.length(a.ab.vec3.sub([],this._camera.position,n)),v=this._zoomFromMercatorZ(m)+o;return m-this._mercatorZfromZoom(v)}getCameraPoint(){if(this.projection.name==="globe"){const n=function([o,m,v],S){const D=[o,m,v,1];a.ab.vec4.transformMat4(D,D,S);const L=D[3]=Math.max(D[3],1e-6);return D[0]/=L,D[1]/=L,D[2]/=L,D}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new a.P(n[0],n[1])}{const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,n))}}getCameraToCenterDistance(n,o=this.zoom,m=this.worldSize){const v=a.b$(n,o,this.width,this.height,1024),S=n.pixelSpaceConversion(this.center.lat,m,v);let D=.5/Math.tan(.5*this._fov)*this.height*S;return this.isOrthographic&&(D=Pd(1,D,lr(this.pitch>=15?1:this.pitch/15))),D}getWorldToCameraMatrix(){const n=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&a.ab.mat4.multiply(n,n,this.globeMatrix),n}getFrustum(n){return a.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,this.projection.zAxisUnit==="meters")}}const bl=(p,n)=>{if(n>0&&p.terrain&&a.w("Cutoff is currently disabled on terrain"),n<=0||p.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const o=p.transform,m=Math.max(Math.abs(o._zoom-(p.minCutoffZoom-1)),1),v=o.isLODDisabled(!1)?a.ac(60,45,o.pitch):a.ac(30,15,o.pitch),S=o._farZ-o._nearZ,D=n*o.height,L=((1-(O=v))*o.cameraToCenterDistance+O*(o._farZ+D))*m;var O;return{shouldRenderCutoff:v<1,uniformValues:{u_cutoff_params:[o._nearZ,o._farZ,(L-o._nearZ)/S,(L-D-o._nearZ)/S]}}},Ki={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class x0{constructor(n,o){this.aabb=n,this.lastCascade=o}}class tp{add(n,o){const m=this.receivers[n.key];m!==void 0?(m.aabb.min[0]=Math.min(m.aabb.min[0],o.min[0]),m.aabb.min[1]=Math.min(m.aabb.min[1],o.min[1]),m.aabb.min[2]=Math.min(m.aabb.min[2],o.min[2]),m.aabb.max[0]=Math.max(m.aabb.max[0],o.max[0]),m.aabb.max[1]=Math.max(m.aabb.max[1],o.max[1]),m.aabb.max[2]=Math.max(m.aabb.max[2],o.max[2])):this.receivers[n.key]=new x0(o,null)}clear(){this.receivers={}}get(n){return this.receivers[n.key]}computeRequiredCascades(n,o,m){const v=a.cd.fromPoints(n.points);let S=0;for(const D in this.receivers){const L=this.receivers[D];if(!L||!v.intersectsAabb(L.aabb))continue;L.aabb.min=v.closestPoint(L.aabb.min),L.aabb.max=v.closestPoint(L.aabb.max);const O=L.aabb.getCorners();for(let U=0;U<m.length;U++){let q=!0;for(const Z of O){const X=[Z[0]*o,Z[1]*o,Z[2]];if(a.ab.vec3.transformMat4(X,X,m[U].matrix),X[0]<-1||X[0]>1||X[1]<-1||X[1]>1){q=!1;break}}if(L.lastCascade=U,S=Math.max(S,U),q)break}}return S+1}}class Kl{constructor(n){this.painter=n,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new tp,this._depthMode=new Rr(n.context.gl.LEQUAL,Rr.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,n.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),n.tp.registerParameter(Ki,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),n.tp.registerParameter(Ki,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),n.tp.registerParameter(Ki,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),n.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const n of this._cascades)n.texture.destroy(),n.framebuffer.destroy();this._cascades=[]}updateShadowParameters(n,o){const m=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!o||!o.properties)return;const v=o.properties.get("shadow-intensity");if(!o.shadowsEnabled()||v<=0||(this._shadowLayerCount=m.style.order.reduce((ge,he)=>{const ve=m.style._mergedLayers[he];return ge+(ve.hasShadowPass()&&!ve.isHidden(n.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const S=m.context,D=Ki.shadowMapResolution,L=Ki.shadowMapResolution;if(this._cascades.length===0||Ki.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let ge=0;ge<Ki.cascadeCount;++ge){const he=m._shadowMapDebug,ve=S.gl,we=S.createFramebuffer(D,L,he,"texture"),ze=new a.T(S,{width:D,height:L,data:null},ve.DEPTH_COMPONENT16);if(we.depthAttachment.set(ze.texture),he){const Oe=new a.T(S,{width:D,height:L,data:null},ve.RGBA8);we.colorAttachment.set(Oe.texture)}this._cascades.push({framebuffer:we,texture:ze,matrix:[],far:0,boundingSphereRadius:0,frustum:new a.bR,scale:0})}}this.shadowDirection=ki(o);let O=0;if(n.elevation){const ge=n.elevation,he=[1e4,-1e4];ge.visibleDemTiles.filter(ve=>ve.dem).forEach(ve=>{const we=ve.dem.tree;he[0]=Math.min(he[0],we.minimums[0]),he[1]=Math.max(he[1],we.maximums[0])}),he[0]!==1e4&&(O=(he[1]-he[0])*ge.exaggeration())}const U=1.5*n.cameraToCenterDistance,q=3*U,Z=new Float64Array(16);for(let ge=0;ge<this._cascades.length;++ge){const he=this._cascades[ge];let ve=n.height/50,we=1;Ki.cascadeCount===1?we=q:ge===0?we=U:(ve=U,we=q);const[ze,Oe]=Bu(n,this.shadowDirection,ve,we,Ki.shadowMapResolution,O);he.scale=n.scale,he.matrix=ze,he.boundingSphereRadius=Oe,a.ab.mat4.invert(Z,he.matrix),he.frustum=a.bR.fromInvProjectionMatrix(Z,1,0,!0),he.far=we}const X=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[X].far,this._cascades[X].far],this._uniformValues.u_shadow_intensity=v,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Ki.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Ki.shadowMapResolution,this._uniformValues.u_shadowmap_0=Oi.ShadowMap0,this._uniformValues.u_shadowmap_1=Oi.ShadowMap0+1,this._groundShadowTiles=m.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const ne=m.transform.elevation;for(const ge of this._groundShadowTiles){let he={min:0,max:0};if(ne){const ve=ne.getMinMaxForTile(ge);ve&&(he=ve)}this.addShadowReceiver(ge.toUnwrapped(),he.min,he.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(n){this._enabled=n}drawShadowPass(n,o){if(!this.enabled)return;const m=this.painter,v=m.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(m.transform.getFrustum(0),m.transform.worldSize,this._cascades),v.viewport.set([0,0,Ki.shadowMapResolution,Ki.shadowMapResolution]);for(let S=0;S<this._numCascadesToRender;++S){m.currentShadowCascade=S,v.bindFramebuffer.set(this._cascades[S].framebuffer.framebuffer),v.clear({color:a.aj.white,depth:1});for(const D of n.order){const L=n._mergedLayers[D];if(!L.hasShadowPass()||L.isHidden(m.transform.zoom))continue;const O=n.getLayerSourceCache(L),U=O?o[O.id]:void 0;(L.type==="model"||U&&U.length)&&m.renderLayer(m,O,L,U)}}m.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const n=this.painter,o=n.style,m=n.context,v=o.directionalLight,S=o.ambientLight;if(!v||!S)return;const D=[],L=bl(n,n.longestCutoffRange);L.shouldRenderCutoff&&D.push("RENDER_CUTOFF"),D.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&D.push("NORMAL_OFFSET");const O=wl(o,v,S),U=new Rr(m.gl.LEQUAL,Rr.ReadOnly,n.depthRangeFor3D);for(const q of this._groundShadowTiles){const Z=q.toUnwrapped(),X=n.isTileAffectedByFog(q),ne=n.getOrCreateProgram("groundShadow",{defines:D,overrideFog:X});this.setupShadows(Z,ne),n.uploadCommonUniforms(m,ne,Z,null,L);const ge={u_matrix:n.transform.calculateProjMatrix(Z),u_ground_shadow_factor:O};ne.draw(n,m.gl.TRIANGLES,U,en.disabled,dn.multiply,Gr.disabled,ge,"ground_shadow",n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments,{},n.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?dn.unblended:dn.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(n){const o=this.painter.transform,m=o.calculatePosMatrix(n,o.worldSize);return a.ab.mat4.multiply(m,this._cascades[this.painter.currentShadowCascade].matrix,m),Float32Array.from(m)}calculateShadowPassMatrixFromMatrix(n){return a.ab.mat4.multiply(n,this._cascades[this.painter.currentShadowCascade].matrix,n),Float32Array.from(n)}setupShadows(n,o,m,v=0){if(!this.enabled)return;const S=this.painter.transform,D=this.painter.context,L=D.gl,O=this._uniformValues,U=new Float64Array(16),q=S.calculatePosMatrix(n,S.worldSize);for(let Z=0;Z<this._cascades.length;Z++)a.ab.mat4.multiply(U,this._cascades[Z].matrix,q),O[Z===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(U),D.activeTexture.set(L.TEXTURE0+Oi.ShadowMap0+Z),this._cascades[Z].texture.bind(L.NEAREST,L.CLAMP_TO_EDGE);if(this.useNormalOffset=!!m,this.useNormalOffset){const Z=a.cc(n.canonical),X=2/S.tileSize*a.ag/Ki.shadowMapResolution,ne=X*this._cascades[0].boundingSphereRadius,ge=X*this._cascades[this._cascades.length-1].boundingSphereRadius,he=(m==="vector-tile"?1:3)/Math.pow(2,v-n.canonical.z-(1-S.zoom+Math.floor(S.zoom)));O.u_shadow_normal_offset=[Z,ne*he,ge*he],O.u_shadow_bias=[6e-5,.0012,.012]}else O.u_shadow_bias=[36e-5,.0012,.012];o.setShadowUniformValues(D,O)}setupShadowsFromMatrix(n,o,m=!1){if(!this.enabled)return;const v=this.painter.context,S=v.gl,D=this._uniformValues,L=new Float64Array(16);for(let O=0;O<Ki.cascadeCount;O++)a.ab.mat4.multiply(L,this._cascades[O].matrix,n),D[O===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(L),v.activeTexture.set(S.TEXTURE0+Oi.ShadowMap0+O),this._cascades[O].texture.bind(S.NEAREST,S.CLAMP_TO_EDGE);if(this.useNormalOffset=m,m){const O=Ki.normalOffset;D.u_shadow_normal_offset=[1,O,O],D.u_shadow_bias=[6e-5,.0012,.012]}else D.u_shadow_bias=[36e-5,.0012,.012];o.setShadowUniformValues(v,D)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(n,o,m,v){if(v[2]>=0)return{};const S=function(O,U,q){const Z=q/(1<<O.canonical.z);return new a.cd([O.canonical.x*Z+O.wrap*q,O.canonical.y*Z+O.wrap*q,0],[(O.canonical.x+1)*Z+O.wrap*q,(O.canonical.y+1)*Z+O.wrap*q,U])}(n,o,m).getCorners(),D=o/-v[2];v[0]<0?(a.ab.vec3.add(S[0],S[0],[v[0]*D,0,0]),a.ab.vec3.add(S[3],S[3],[v[0]*D,0,0])):v[0]>0&&(a.ab.vec3.add(S[1],S[1],[v[0]*D,0,0]),a.ab.vec3.add(S[2],S[2],[v[0]*D,0,0])),v[1]<0?(a.ab.vec3.add(S[0],S[0],[0,v[1]*D,0]),a.ab.vec3.add(S[1],S[1],[0,v[1]*D,0])):v[1]>0&&(a.ab.vec3.add(S[2],S[2],[0,v[1]*D,0]),a.ab.vec3.add(S[3],S[3],[0,v[1]*D,0]));const L={};return L.vertices=S,L.planes=[Md(S[1],S[0],S[4]),Md(S[2],S[1],S[5]),Md(S[3],S[2],S[6]),Md(S[0],S[3],S[7])],L}addShadowReceiver(n,o,m){this._receivers.add(n,a.cd.fromTileIdAndHeight(n,o,m))}getMaxCascadeForTile(n){const o=this._receivers.get(n);return o&&o.lastCascade?o.lastCascade:0}}function Md(p,n,o){const m=a.ab.vec3.sub([],o,n),v=a.ab.vec3.sub([],p,n),S=a.ab.vec3.cross([],m,v),D=a.ab.vec3.length(S);return D===0?[0,0,1,0]:(a.ab.vec3.scale(S,S,1/D),[S[0],S[1],S[2],-a.ab.vec3.dot(S,n)])}function ki(p){const n=p.properties.get("direction"),o=a.cb(n.x,n.y,n.z);o[2]=a.aw(o[2],0,75);const m=a.ce([o[0],o[1],o[2]]);return a.ab.vec3.fromValues(m.x,m.y,m.z)}function wl(p,n,o){const m=n.properties.get("color-use-theme")==="none",v=n.properties.get("color"),S=n.properties.get("intensity"),D=n.properties.get("direction"),L=[D.x,D.y,D.z],O=o.properties.get("color-use-theme")==="none",U=o.properties.get("color"),q=o.properties.get("intensity"),Z=Math.max(a.ab.vec3.dot([0,0,1],L),0),X=[0,0,0];a.ab.vec3.scale(X,U.toRenderColor(O?null:p.getLut(n.scope)).toArray01Linear().slice(0,3),q);const ne=[0,0,0];return a.ab.vec3.scale(ne,v.toRenderColor(m?null:p.getLut(o.scope)).toArray01Linear().slice(0,3),Z*S),a.cf([X[0]>0?X[0]/(X[0]+ne[0]):0,X[1]>0?X[1]/(X[1]+ne[1]):0,X[2]>0?X[2]/(X[2]+ne[2]):0])}function Bu(p,n,o,m,v,S){const D=p.zoom,L=p.scale,O=p.worldSize,U=1/O,q=p.aspect,Z=Math.sqrt(1+q*q)*Math.tan(.5*p.fovX),X=Z*Z,ne=m-o,ge=m+o;let he,ve;X>ne/ge?(he=m,ve=m*Z):(he=.5*ge*(1+X),ve=.5*Math.sqrt(ne*ne+2*(m*m+o*o)*X+ge*ge*X*X));const we=p.projection.pixelsPerMeter(p.center.lat,O),ze=p._camera.getCameraToWorldMercator(),Oe=[0,0,-he*U];a.ab.vec3.transformMat4(Oe,Oe,ze);let Fe=ve*U;const Ye=p._edgeInsets;if(!(Ye.left===0&&Ye.top===0&&Ye.right===0&&Ye.bottom===0||Ye.left===Ye.right&&Ye.top===Ye.bottom)){const Qt=p._camera.getWorldToCamera(p.worldSize,p.projection.zAxisUnit==="meters"?we:1),Ot=p._camera.getCameraToClipPerspective(p._fov,p.width/p.height,o,m);Ot[8]=2*-p.centerOffset.x/p.width,Ot[9]=2*p.centerOffset.y/p.height;const zt=new Float64Array(16);a.ab.mat4.mul(zt,Ot,Qt);const dr=new Float64Array(16);a.ab.mat4.invert(dr,zt);const rr=a.bR.fromInvProjectionMatrix(dr,O,D,!0);for(const yr of rr.points){const _r=((Ge=yr)[0]/=L,Ge[1]/=L,Ge[2]=a.bH(Ge[2],p._center.lat),Ge);Fe=Math.max(Fe,a.ab.vec3.len(a.ab.vec3.subtract([],Oe,_r)))}}var Ge;Fe*=v/(v-1);const Ze=Math.acos(n[2]),We=Math.atan2(-n[0],-n[1]),nt=new Dd;nt.position=Oe,nt.setPitchBearing(Ze,We);const at=nt.getWorldToCamera(O,we),Ct=Fe*O,_t=Math.min(p._mercatorZfromZoom(17)*O*-2,-2*Ct),lt=nt.getCameraToClipOrthographic(-Ct,Ct,-Ct,Ct,_t,(Ct+S*we)/n[2]),mt=new Float64Array(16);a.ab.mat4.multiply(mt,lt,at);const Nt=a.ab.vec3.fromValues(Math.floor(1e6*Oe[0])/1e6*O,Math.floor(1e6*Oe[1])/1e6*O,0),qt=.5*v,Zt=[0,0,0];a.ab.vec3.transformMat4(Zt,Nt,mt),a.ab.vec3.scale(Zt,Zt,qt);const xt=[Math.floor(Zt[0]),Math.floor(Zt[1]),Math.floor(Zt[2])],Ft=[0,0,0];a.ab.vec3.sub(Ft,Zt,xt),a.ab.vec3.scale(Ft,Ft,-1/qt);const Mt=new Float64Array(16);return a.ab.mat4.identity(Mt),a.ab.mat4.translate(Mt,Mt,Ft),a.ab.mat4.multiply(mt,Mt,mt),[mt,Ct]}class v0 extends a.E{constructor(n){super(),this.requestManager=n,this.models={"":{}},this.numModelsLoading={}}loadModel(n,o){return a.aM(this.requestManager.transformRequest(o,a.R.Model).url).then(m=>{if(!m)return;const v=a.aN(m),S=new a.aO(n,void 0,void 0,v);return S.computeBoundsAndApplyParent(),S}).catch(m=>{if(m&&m.status===404)return null;this.fire(new a.y(new Error(`Could not load model ${n} from ${o}: ${m.message}`)))})}load(n,o){this.models[o]||(this.models[o]={});const m=Object.keys(n);this.numModelsLoading[o]=(this.numModelsLoading[o]||0)+m.length;const v=[];for(const S of m)v.push(this.loadModel(S,n[S]));Promise.allSettled(v).then(S=>{for(let D=0;D<S.length;D++){const{status:L,value:O}=S[D];L==="fulfilled"&&O&&(this.models[o][m[D]]={model:O,numReferences:1})}this.numModelsLoading[o]-=m.length,this.fire(new a.z("data",{dataType:"style"}))}).catch(S=>{this.fire(new a.y(new Error(`Could not load models: ${S.message}`)))})}isLoaded(){for(const n in this.numModelsLoading)if(this.numModelsLoading[n]>0)return!1;return!0}hasModel(n,o){return!!this.getModel(n,o)}getModel(n,o){return this.models[o]||(this.models[o]={}),this.models[o][n]?this.models[o][n].model:void 0}addModel(n,o,m){this.models[m]||(this.models[m]={}),this.hasModel(n,m)&&this.models[m][n].numReferences++,this.load({[n]:this.requestManager.normalizeModelURL(o)},m)}addModels(n,o){this.models[o]||(this.models[o]={});const m={};for(const v in n)this.models[o][v]={},m[v]=this.requestManager.normalizeModelURL(n[v]);this.load(m,o)}addModelsFromBucket(n,o){this.models[o]||(this.models[o]={});const m={};for(const v of n)this.hasModel(v,o)?this.models[o][v].numReferences++:m[v]=this.requestManager.normalizeModelURL(v);this.load(m,o)}removeModel(n,o){if(this.models[o]&&this.models[o][n]&&(this.models[o][n].numReferences--,this.models[o][n].numReferences===0)){const m=this.models[o][n].model;delete this.models[o][n],m.destroy()}}listModels(n){return this.models[n]||(this.models[n]={}),Object.keys(this.models[n])}upload(n,o){this.models[o]||(this.models[o]={});for(const m in this.models[o])this.models[o][m].model&&this.models[o][m].model.upload(n.context)}}const _0=new a.a5({data:new a.a6(a.a3.colorTheme.data)}),rp={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function np(p){return p=p||{},Object.assign(p,rp)}class b0 extends a.E{constructor(n){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._selectedLevel=void 0,this._floorplanStates={},a.aP(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=n,this._checkFloorplanVisible(!0),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(n=>{n.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new a.y(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=n.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=n.stylesheet.indoor.buildingFeaturesetId,this._scope=n.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:n=>(n.feature&&n.feature.properties.floorplan&&this.selectFloorplan(n.feature.properties.floorplan),!0)}),this._checkFloorplanVisible(!0)}_onMove(){this._checkFloorplanVisible(!1)}_checkFloorplanVisible(n){if(!this._queryFeatureSetId||!this._map.isStyleLoaded()||this._map.transform.zoom<13)return;this._indoorData&&!function(D,L){const[O,U]=D,{center:q,radius:Z}=L,[X,ne]=q,ge=Math.abs(O-X);return Math.sqrt((ge>180?360-ge:ge)**2+(U-ne)**2)<=Z}([this._map.getCenter().lng,this._map.getCenter().lat],this._indoorData.circumCircle)&&(this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new a.z("floorplangone")));const o={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},m=new a.P(this._map.transform.width/2,this._map.transform.height/2),v=[new a.P(0,0),new a.P(this._map.transform.width,this._map.transform.height)],S=this._map.queryRenderedFeatures(n?v:m,o);S.length>0&&(this._selectedFloorplan&&S[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=S[0],this._floorplanSelected(!1)))}_floorplanSelected(n){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._indoorData.circumCircle=function(S){const[[D,L],[O,U]]=S,q=(O-D+360)%360,Z=q>180?360-q:q;return{center:[(D+Z/2+360)%360,(L+U)/2],radius:Math.sqrt(Z**2+(U-L)**2)/2}}(this._indoorData.extent),this._floorplanStates[this._indoorData.id]||(this._floorplanStates[this._indoorData.id]={});const o=this._floorplanStates[this._indoorData.id].selectedBuilding,m=this._floorplanStates[this._indoorData.id].selectedLevel;let v;if(this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",this._indoorData.floorplanIDs),this._selectedLevel)for(const S of this._indoorData.levels)S.id===this._selectedLevel.id&&(v=S.id);if(this.fire(new a.z("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:v})),o){const S=this._indoorData.buildings.find(D=>D.id===o);this._buildingSelected(S,!1)}else this._indoorData.buildings.length>0&&this._buildingSelected(this._indoorData.buildings[0],!1);if(m){const S=this._indoorData.levels.find(D=>D.id===m);this._updateLevels(S,n)}else n&&this._indoorData["default-levels"].length>0&&this.selectLevel(this._indoorData["default-levels"][0])}_buildingSelected(n,o){o&&n&&n.extent&&this._map.fitBounds(n.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=n?n.id:void 0;const m=this._indoorData.levels.filter(v=>n.levels.includes(v.id));this.fire(new a.z("buildingselected",{buildingId:n.id,levels:m}))}_levelSelected(n){if(n==="overview")this._updateLevels(void 0,!0);else{const o=this._indoorData.levels.find(m=>m.id===n);this._updateLevels(o,!0)}this.fire(new a.z("levelselected",{levelId:n==="overview"?void 0:n}))}_updateLevels(n,o){if(!n)return this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",[]]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._floorplanStates[this._indoorData.id].selectedLevel=void 0,void(o&&this._indoorData.extent&&this._map.fitBounds(this._indoorData.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}));function m(U){const q=U.indexOf("/floor/");if(q===-1)return U;const Z=q+7,X=U.indexOf("/",Z);return X===-1?U.slice(Z):U.slice(Z,X)}this._selectedLevel=n,this._floorplanStates[this._indoorData.id].selectedLevel=n?n.id:void 0;const v=[],S={},D={},L={},O={};for(const U of this._indoorData.levels)if(v.push(U.id),S[U.id]=U.height,D[U.id]=U.base,n){if(this.mergeFloors){const q=m(n.id),Z=m(U.id);L[U.id]=Z===q?"true":"false"}else L[U.id]=U.id===n.id?"true":"false";O[U.id]=U.base<n.base?"true":"false"}else O[U.id]=!0;if(this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",v]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",S]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",D]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",L]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",O]),n&&(this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!!n.isUnderground),o&&n.extent)){const U=this._map.cameraForBounds(n.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),q=this._map.getZoom(),Z=U.zoom?Math.abs(q-U.zoom):0;this._map.fitBounds(n.extent,Z>=1?{pitch:this._map.getPitch(),bearing:this._map.getBearing()}:{pitch:this._map.getPitch(),bearing:this._map.getBearing(),zoom:q})}}selectFloorplan(n){const o={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},m=[new a.P(0,0),new a.P(this._map.transform.width,this._map.transform.height)],v=this._map.queryRenderedFeatures(m,o);if(v.length>0){for(const S of v)if(JSON.parse(S.properties["indoor-data"]).floorplanIDs.includes(n)){this._selectedFloorplan=S,this._floorplanSelected(!0);break}}}selectBuilding(n){const o=this._indoorData.buildings.find(m=>m.id===n);this._buildingSelected(o,!0)}selectLevel(n){this._levelSelected(n)}}function Nu(p){if(!p.metadata||!p.metadata.content_area)return;const n=a.q.devicePixelRatio,{left:o,top:m,width:v,height:S}=p.metadata.content_area,D=o*n,L=m*n;return[D,L,D+v*n,L+S*n]}function Ad(p){if(p)return p.map(([n,o])=>[n*a.q.devicePixelRatio,o*a.q.devicePixelRatio])}const el=(p,n)=>ft(p,n&&n.filter(o=>o.identifier!=="source.canvas")),Bm=a.ay(zn,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport"]),w0=a.ay(zn,["setCenter","setZoom","setBearing","setPitch"]),Zl=new Set(["background","sky","slot","custom"]),Bc={version:8,layers:[],sources:{}},ap={duration:300,delay:0};class ks extends a.E{constructor(n,o={}){super(),this.map=n,this.scope=o.scope||"",this.globalId=null,this.fragments=[],this.importDepth=o.importDepth||0,this.importsCache=o.importsCache||new Map,this.resolvedImports=o.resolvedImports||new Set,this.transition=a.l({},ap),this._buildingIndex=new Lm(this),this.crossTileSymbolIndex=new $m,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=o.styleChanges||new yt,this.dispatcher=o.dispatcher?o.dispatcher:new a.D(a.ci(),this),o.imageManager?this.imageManager=o.imageManager:(this.imageManager=new $t(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=o.glyphManager?o.glyphManager:new a.cj(n._requestManager,o.localFontFamily?a.ck.all:o.localIdeographFontFamily?a.ck.ideographs:a.ck.none,o.localFontFamily||o.localIdeographFontFamily),o.modelManager?this.modelManager=o.modelManager:(this.modelManager=new v0(n._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=o.configOptions?o.configOptions:new Map,this._configDependentLayers=o.configDependentLayers?o.configDependentLayers:new Set,this._config=o.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:o.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=o.initialConfig,this.dispatcher.broadcast("setReferrer",a.cl());const m=this;this._rtlTextPluginCallback=ks.registerForPluginStateChange(v=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(S,D)=>{if(a.cm(S),D&&D.every(L=>L))for(const L in m._sourceCaches){const O=m._sourceCaches[L],U=O.getSource().type;U!=="vector"&&U!=="geojson"||O.reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const S=this.getOwnSource(v.sourceId);if(S&&S.vectorLayerIds)for(const D in this._layers){const L=this._layers[D];L.source===S.id&&this._validateLayer(L)}})}load(n){return n?(typeof n=="string"?this.loadURL(n):this.loadJSON(n),this):this}_getGlobalId(n){if(!n)return null;if(typeof n=="string"){if(a.f(n))return n;const o=a.cn(n);if(!o.startsWith("http"))try{return new URL(o,location.href).toString()}catch{return o}return o}return`json://${a.co(JSON.stringify(n))}`}_diffStyle(n,o,m){this.globalId=this._getGlobalId(n);const v=(S,D)=>{try{D(null,this.setState(S,m))}catch(L){D(L,!1)}};if(typeof n=="string"){const S=this.map._requestManager.normalizeStyleURL(n),D=this.map._requestManager.transformRequest(S,a.R.Style);a.n(D,(L,O)=>{L?this.fire(new a.y(L)):O&&v(O,o)})}else typeof n=="object"&&v(n,o)}loadURL(n,o={}){this.fire(new a.z("dataloading",{dataType:"style"}));const m=typeof o.validate=="boolean"?o.validate:!a.f(n);this.globalId=this._getGlobalId(n),n=this.map._requestManager.normalizeStyleURL(n,o.accessToken),this.resolvedImports.add(n);const v=this.importsCache.get(n);if(v)return this._load(v,m);const S=this.map._requestManager.transformRequest(n,a.R.Style);this._request=a.n(S,(D,L)=>{if(this._request=null,D)this.fire(new a.y(D));else if(L)return this.importsCache.set(n,L),this._load(L,m)})}loadJSON(n,o={}){this.fire(new a.z("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(n),this._request=a.q.frame(()=>{this._request=null,this._load(n,o.validate!==!1)})}loadEmpty(){this.fire(new a.z("dataloading",{dataType:"style"})),this._load(Bc,!1)}_loadImports(n,o,m){if(this.importDepth>=4)return a.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const v=[];for(const S of n){const D=this._createFragmentStyle(S),L=new Promise(q=>{D.once("style.import.load",q),D.once("error",q)}).then(()=>this.mergeAll());if(v.push(L),this.resolvedImports.has(S.url)){D.loadEmpty();continue}const O=S.data||this.importsCache.get(S.url);O?(D.loadJSON(O,{validate:o}),this._isInternalStyle(O)&&(D.globalId=null)):S.url?D.loadURL(S.url,{validate:o}):D.loadEmpty();const U={style:D,id:S.id,config:S.config};if(m){const q=this.fragments.findIndex(({id:Z})=>Z===m);this.fragments=this.fragments.slice(0,q).concat(U).concat(this.fragments.slice(q))}else this.fragments.push(U)}return Promise.allSettled(v)}getImportGlobalIds(n=this,o=new Set){for(const m of n.fragments)m.style.globalId&&o.add(m.style.globalId),this.getImportGlobalIds(m.style,o);return[...o.values()]}_createFragmentStyle(n){const o=this.scope?a.aC(n.id,this.scope):n.id;let m;const v=this._initialConfig&&this._initialConfig[o];(n.config||v)&&(m=a.l({},n.config,v));const S=new ks(this.map,{scope:o,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:m,configOptions:this.options,colorThemeOverride:n["color-theme"],configDependentLayers:this._configDependentLayers});return S.setEventedParent(this.map,{style:S}),S}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(n){return this.isRootStyle()&&(n.fragment||!!n.schema&&n.fragment!==!1)}_load(n,o){const m=n.indoor?np(n.schema):n.schema;if(this._isInternalStyle(n)){const D=a.l({},Bc,{imports:[{id:"basemap",data:n,url:""}]});return void this._load(D,o)}if(this.updateConfig(this._config,m),o&&el(this,cn(n)))return;this._loaded=!0,this.stylesheet=a.cp(n);const v=()=>{for(const U in n.sources)this.addSource(U,n.sources[U],{validate:!1,isInitialLoad:!0});n.sprite?this._loadIconset(n.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(n.glyphs,this.scope);const D=Ic(this.stylesheet.layers);if(this._order=D.map(U=>U.id),this.stylesheet.light&&a.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const U=this.stylesheet.lights[0];this.light=new At(U.properties,U.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new At(this.stylesheet.light)),this._layers={};for(const U of D){const q=a.cu(U,this.scope,this._styleColorTheme.lut,this.options);q.configDependencies.size!==0&&this._configDependentLayers.add(q.fqid),q.setEventedParent(this,{layer:{id:q.id}}),this._layers[q.id]=q;const Z=this.getOwnLayerSourceCache(q),X=!!this.directionalLight&&this.directionalLight.shadowsEnabled();Z&&q.canCastShadows()&&X&&(Z.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const L=this.stylesheet.terrain;L&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(L,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new a.z("data",{dataType:"style"}));const O=this.isRootStyle();n.imports?this._loadImports(n.imports,o).then(()=>{this._reloadImports(),this.fire(new a.z(O?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new a.z(O?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const S=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(S){const D=this._evaluateColorThemeData(S);this._loadColorTheme(D).then(()=>{v()}).catch(L=>{a.w(`Couldn't load color theme from the stylesheet: ${L}`),v()})}else this._styleColorTheme.lut=null,v()}isRootStyle(){return this.importDepth===0}mergeAll(){let n,o,m,v,S,D,L,O,U,q;const Z={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(X=>{if(X.stylesheet){if(X.light!=null&&(n=X.light),X.stylesheet.lights)for(const ne of X.stylesheet.lights)ne.type==="ambient"&&X.ambientLight!=null&&(o=X.ambientLight),ne.type==="directional"&&X.directionalLight!=null&&(m=X.directionalLight);v=this._prioritizeTerrain(v,X.terrain,X.stylesheet.terrain),X.stylesheet.fog&&X.fog!=null&&(S=X.fog),X.stylesheet.snow&&X.snow!=null&&(D=X.snow),X.stylesheet.rain&&X.rain!=null&&(L=X.rain),X.stylesheet.camera!=null&&(q=X.stylesheet.camera),X.stylesheet.projection!=null&&(O=X.stylesheet.projection),X.stylesheet.transition!=null&&(U=X.stylesheet.transition),Z[X.scope]=X._styleColorTheme}}),this.light=n,this.ambientLight=o,this.directionalLight=m,this.fog=S,this.snow=D,this.rain=L,this._styleColorThemeForScope=Z,v===null?delete this.terrain:this.terrain=v,this.camera=q||{"camera-projection":"perspective"},this.projection=O||{name:"mercator"},this.transition=a.l({},ap,U),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(n){const o=m=>{for(const v of m.fragments)o(v.style);n(m)};o(this)}_prioritizeTerrain(n,o,m){const v=n&&n.drapeRenderMode===0;return m===null?o&&o.drapeRenderMode===0?o:v?n:null:o!=null&&(!n||v||o&&o.drapeRenderMode===1)?o:n}mergeTerrain(){let n;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(o=>{n=this._prioritizeTerrain(n,o.terrain,o.stylesheet.terrain)}),n===null?delete this.terrain:this.terrain=n}mergeProjection(){let n;this.forEachFragmentStyle(o=>{o.stylesheet.projection!=null&&(n=o.stylesheet.projection)}),this.projection=n||{name:"mercator"}}mergeSources(){const n={},o={},m={};this.forEachFragmentStyle(v=>{for(const S in v._sourceCaches){const D=a.aC(S,v.scope);n[D]=v._sourceCaches[S]}for(const S in v._otherSourceCaches){const D=a.aC(S,v.scope);o[D]=v._otherSourceCaches[S]}for(const S in v._symbolSourceCaches){const D=a.aC(S,v.scope);m[D]=v._symbolSourceCaches[S]}}),this._mergedSourceCaches=n,this._mergedOtherSourceCaches=o,this._mergedSymbolSourceCaches=m}mergeLayers(){const n={},o=[],m={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(S=>{for(const D of S._order){const L=S._layers[D];if(L.type==="slot"){const O=a.cq(D);if(n[O])continue;n[O]=[]}L.slot&&n[L.slot]?n[L.slot].push(L):o.push(L)}}),this._mergedOrder=[];const v=(S=[])=>{for(const D of S)if(D.type==="slot"){const L=a.cq(D.id);n[L]&&v(n[L]),this._mergedSlots.push(L)}else{const L=a.aC(D.id,D.scope);this._mergedOrder.push(L),m[L]=D,D.is3D()&&(this._has3DLayers=!0),D.type==="circle"&&(this._hasCircleLayers=!0),D.type==="symbol"&&(this._hasSymbolLayers=!0),D.type==="clip"&&(this._clipLayerPresent=!0)}};v(o),this._mergedOrder.sort((S,D)=>{const L=m[S],O=m[D];return L.hasInitialOcclusionOpacityProperties?O.is3D()?1:0:L.is3D()&&O.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=m,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(n){return this.stylesheet.camera=a.l({},this.stylesheet.camera,n),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(n){return n.data?function(o,m,v){const S=a.l({},m);for(const L of Object.keys(a.a3.colorTheme))S[L]===void 0&&(S[L]=a.a3.colorTheme[L].default);const D=new a.a4(_0,o,new Map(v));return D.setTransitionOrValue(S,v),D.untransitioned().possiblyEvaluate(new a.a8(0))}(this.scope,n,this.options).get("data"):null}_loadColorTheme(n){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const o=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((m,v)=>{const S="data:image/png;base64,";if(!n||n.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void m();let D=n;D.startsWith(S)||(D=S+D);const L="mapbox-reserved-lut",O=new Image;O.src=D,O.onerror=()=>{this._styleColorTheme.lutLoading=!1,v(new Error("Failed to load image data"))},O.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==o)return void m();this._styleColorTheme.lutLoading=!1;const{width:U,height:q,data:Z}=a.q.getImageData(O);if(q>32)return void v(new Error("The height of the image must be less than or equal to 32 pixels."));if(U!==q*q)return void v(new Error("The width of the image must be equal to the height squared."));this.getImage(L)&&this.removeImage(L),this.addImage(L,{data:new a.r({width:U,height:q},Z),pixelRatio:1,sdf:!1,usvg:!1,version:0});const X=this.imageManager.getImage(L,this.scope);X?(this._styleColorTheme.lut={image:X.data,data:n},m()):v(new Error("Missing LUT image."))}})}getLut(n){const o=this._styleColorThemeForScope[n];return o?o.lut:null}setProjection(n){n?this.stylesheet.projection=n:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(n){this._spriteRequest=function(o,m,v){let S,D,L;const O=a.q.devicePixelRatio>1?"@2x":"";let U=a.n(m.transformRequest(m.normalizeSpriteURL(o,O,".json"),a.R.SpriteJSON),(X,ne)=>{U=null,L||(L=X,S=ne,Z())}),q=a.o(m.transformRequest(m.normalizeSpriteURL(o,O,".png"),a.R.SpriteImage),(X,ne)=>{q=null,L||(L=X,D=ne,Z())});function Z(){if(L)v(L);else if(S&&D){const X=a.q.getImageData(D),ne={};for(const ge in S){const{width:he,height:ve,x:we,y:ze,sdf:Oe,pixelRatio:Fe,stretchX:Ye,stretchY:Ge,content:Ze}=S[ge],We=new a.r({width:he,height:ve});a.r.copy(X,We,{x:we,y:ze},{x:0,y:0},{width:he,height:ve},null),ne[ge]={data:We,pixelRatio:Fe,sdf:Oe,stretchX:Ye,stretchY:Ge,content:Ze,usvg:!1}}v(null,ne)}}return{cancel(){U&&(U.cancel(),U=null),q&&(q.cancel(),q=null)}}}(n,this.map._requestManager,(o,m)=>{if(this._spriteRequest=null,o)this.fire(new a.y(o));else if(m)for(const v in m)this.imageManager.addImage(v,this.scope,m[v]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new a.z("data",{dataType:"style"}))})}_loadIconset(n){if(!a.f(n)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(n);const o=this.map._spriteFormat==="auto";var m,v;this._spriteRequest=(v=(S,D)=>{if(this._spriteRequest=null,S)o?this._loadSprite(n):this.fire(new a.y(S));else if(D)for(const L in D)this.imageManager.addImage(L,this.scope,D[L]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new a.z("data",{dataType:"style"}))},a.bi((m=this.map._requestManager).transformRequest(m.normalizeIconsetURL(n),a.R.Iconset),(S,D)=>{if(S)return void v(S);const L={},O=a.cg(new a.bh(D));for(const U of O.icons){const q={version:1,pixelRatio:a.q.devicePixelRatio,content:Nu(U),stretchX:U.metadata?Ad(U.metadata.stretch_x_areas):void 0,stretchY:U.metadata?Ad(U.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:U};L[U.name]=q}v(null,L)}))}_validateLayer(n){const o=this.getOwnSource(n.source);if(!o)return;const m=n.sourceLayer;m&&(o.type==="geojson"||o.vectorLayerIds&&o.vectorLayerIds.indexOf(m)===-1)&&this.fire(new a.y(new Error(`Source layer "${m}" does not exist on source "${o.id}" as specified by style layer "${n.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const n in this._sourceCaches)if(!this._sourceCaches[n].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:n}of this.fragments)if(!n.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((n,o)=>{const m=this.fragments[o];return m&&m.style&&(n.data=m.style.serialize()),n})}_serializeSources(){const n={};for(const o in this._sourceCaches){const m=this._sourceCaches[o].getSource();n[m.id]||(n[m.id]=m.serialize())}return n}_serializeLayers(n){const o=[];for(const m of n){const v=this._layers[m];v&&v.type!=="custom"&&o.push(v.serialize())}return o}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const n in this._sourceCaches)if(this._sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(n){return n?this.order:this._mergedOrder}isLayerDraped(n){return!!this.terrain&&n.isDraped(this.getLayerSourceCache(n))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(n){const o=this.getOwnLayer(n);if(o)return o;this.fire(new a.y(new Error(`The layer '${n}' does not exist in the map's style.`)))}_checkSource(n){const o=this.getOwnSource(n);if(o)return o;this.fire(new a.y(new Error(`The source '${n}' does not exist in the map's style.`)))}precompilePrograms(n,o){const m=this.map.painter;if(m)for(let v=n.minzoom||0;v<(n.maxzoom||25.5);v++){const S=n.getProgramIds();if(S)for(const D of S){const L=n.getDefaultProgramParams(D,o.zoom,this._styleColorTheme.lut);L&&(m.style=this,this.fog&&(m._fogVisible=!0,L.overrideFog=!0,m.getOrCreateProgram(D,L)),m._fogVisible=!1,L.overrideFog=!1,m.getOrCreateProgram(D,L),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(L.overrideRtt=!0,m.getOrCreateProgram(D,L)))}}}update(n){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(n),this.directionalLight&&this.directionalLight.recalculate(n);const o=this.calculateLightsBrightness();n.brightness=o||0,o!==this._brightness&&(this._brightness=o,this.dispatcher.broadcast("setBrightness",o));const m=this._changes.isDirty();let v=!1;if(this._changes.isDirty()){const D=this._changes.getLayerUpdatesByScope();for(const L in D){const{updatedIds:O,removedIds:U}=D[L];(O||U)&&(this._updateWorkerLayers(L,O,U),v=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(n),this.light&&this.light.updateTransitions(n),this.ambientLight&&this.ambientLight.updateTransitions(n),this.directionalLight&&this.directionalLight.updateTransitions(n),this.fog&&this.fog.updateTransitions(n),this.snow&&this.snow.updateTransitions(n),this.rain&&this.rain.updateTransitions(n),this._changes.reset()}const S={};for(const D in this._mergedSourceCaches){const L=this._mergedSourceCaches[D];S[D]=L.used,L.used=!1,L.tileCoverLift=0}for(const D of this._mergedOrder){const L=this._mergedLayers[D];if(L.recalculate(n,this._availableImages),!L.isHidden(n.zoom)){const O=this.getLayerSourceCache(L);O&&(O.used=!0,O.tileCoverLift=Math.max(O.tileCoverLift,L.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(L,n)}):this.precompilePrograms(L,n))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&v&&this.mergeLayers();for(const D in S){const L=this._mergedSourceCaches[D];S[D]!==L.used&&L.getSource().fire(new a.z("data",{sourceDataType:"visibility",dataType:"source",sourceId:L.getSource().id}))}this.light&&this.light.recalculate(n),this.terrain&&this.terrain.recalculate(n),this.fog&&this.fog.recalculate(n),this.snow&&this.snow.recalculate(n),this.rain&&this.rain.recalculate(n),this.z=n.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),m&&this.fire(new a.z("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=this._changes.getUpdatedImages();if(n.length){for(const o in this._sourceCaches)this._sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],n);this._changes.resetUpdatedImages()}}_updateWorkerLayers(n,o,m){const v=this.getFragmentStyle(n);v&&this.dispatcher.broadcast("updateLayers",{layers:o?v._serializeLayers(o):[],scope:n,removedIds:m||[],options:v.options})}setState(n,o){if(this._checkLoaded(),el(this,cn(n)))return!1;(n=a.cp(n)).layers=Ic(n.layers);const m=function(D,L){if(!D)return[{command:zn.setStyle,args:[L]}];let O=[];try{if(!a.bn(D.version,L.version))return[{command:zn.setStyle,args:[L]}];if(a.bn(D.center,L.center)||O.push({command:zn.setCenter,args:[L.center]}),a.bn(D.zoom,L.zoom)||O.push({command:zn.setZoom,args:[L.zoom]}),a.bn(D.bearing,L.bearing)||O.push({command:zn.setBearing,args:[L.bearing]}),a.bn(D.pitch,L.pitch)||O.push({command:zn.setPitch,args:[L.pitch]}),a.bn(D.sprite,L.sprite)||O.push({command:zn.setSprite,args:[L.sprite]}),a.bn(D.glyphs,L.glyphs)||O.push({command:zn.setGlyphs,args:[L.glyphs]}),a.bn(D.imports,L.imports)||function(ne=[],ge=[],he){ge=ge||[];const ve=(ne=ne||[]).map(Ln),we=ge.map(Ln),ze=ne.reduce(_n,{}),Oe=ge.reduce(_n,{}),Fe=ve.slice();let Ye,Ge,Ze,We;for(Ye=0,Ge=0;Ye<ve.length;Ye++)Ze=ve[Ye],Oe.hasOwnProperty(Ze)?Ge++:(he.push({command:zn.removeImport,args:[Ze]}),Fe.splice(Fe.indexOf(Ze,Ge),1));for(Ye=0,Ge=0;Ye<we.length;Ye++)Ze=we[we.length-1-Ye],Fe[Fe.length-1-Ye]!==Ze&&(ze.hasOwnProperty(Ze)?(he.push({command:zn.removeImport,args:[Ze]}),Fe.splice(Fe.lastIndexOf(Ze,Fe.length-Ge),1)):Ge++,We=Fe[Fe.length-Ye],he.push({command:zn.addImport,args:[Oe[Ze],We]}),Fe.splice(Fe.length-Ye,0,Ze));for(const nt of ge){const at=ze[nt.id];at&&!a.bn(at,nt)&&he.push({command:zn.updateImport,args:[nt.id,nt]})}}(D.imports,L.imports,O),a.bn(D.transition,L.transition)||O.push({command:zn.setTransition,args:[L.transition]}),a.bn(D.light,L.light)||O.push({command:zn.setLight,args:[L.light]}),a.bn(D.fog,L.fog)||O.push({command:zn.setFog,args:[L.fog]}),a.bn(D.snow,L.snow)||O.push({command:zn.setSnow,args:[L.snow]}),a.bn(D.rain,L.rain)||O.push({command:zn.setRain,args:[L.rain]}),a.bn(D.projection,L.projection)||O.push({command:zn.setProjection,args:[L.projection]}),a.bn(D.lights,L.lights)||O.push({command:zn.setLights,args:[L.lights]}),a.bn(D.camera,L.camera)||O.push({command:zn.setCamera,args:[L.camera]}),!a.bn(D["color-theme"],L["color-theme"]))return[{command:zn.setStyle,args:[L]}];const U={},q=[];(function(ne,ge,he,ve){let we;for(we in ge=ge||{},ne=ne||{})ne.hasOwnProperty(we)&&(ge.hasOwnProperty(we)||to(we,he,ve));for(we in ge){if(!ge.hasOwnProperty(we))continue;const ze=ge[we];ne.hasOwnProperty(we)?a.bn(ne[we],ze)||(ne[we].type==="geojson"&&ze.type==="geojson"&&Fs(ne,ge,we)?he.push({command:zn.setGeoJSONSourceData,args:[we,ze.data]}):Au(we,ge,he,ve)):wd(we,ge,he)}})(D.sources,L.sources,q,U);const Z=[];D.layers&&D.layers.forEach(ne=>{ne.source&&U[ne.source]?O.push({command:zn.removeLayer,args:[ne.id]}):Z.push(ne)});let X=D.terrain;X&&U[X.source]&&(O.push({command:zn.setTerrain,args:[void 0]}),X=void 0),O=O.concat(q),a.bn(X,L.terrain)||O.push({command:zn.setTerrain,args:[L.terrain]}),function(ne,ge,he){ge=ge||[];const ve=(ne=ne||[]).map(Ln),we=ge.map(Ln),ze=ne.reduce(_n,{}),Oe=ge.reduce(_n,{}),Fe=ve.slice(),Ye=Object.create(null);let Ge,Ze,We,nt,at,Ct,_t;for(Ge=0,Ze=0;Ge<ve.length;Ge++)We=ve[Ge],Oe.hasOwnProperty(We)?Ze++:(he.push({command:zn.removeLayer,args:[We]}),Fe.splice(Fe.indexOf(We,Ze),1));for(Ge=0,Ze=0;Ge<we.length;Ge++)We=we[we.length-1-Ge],Fe[Fe.length-1-Ge]!==We&&(ze.hasOwnProperty(We)?(he.push({command:zn.removeLayer,args:[We]}),Fe.splice(Fe.lastIndexOf(We,Fe.length-Ze),1)):Ze++,Ct=Fe[Fe.length-Ge],he.push({command:zn.addLayer,args:[Oe[We],Ct]}),Fe.splice(Fe.length-Ge,0,We),Ye[We]=!0);for(Ge=0;Ge<we.length;Ge++)if(We=we[Ge],nt=ze[We],at=Oe[We],!Ye[We]&&!a.bn(nt,at))if(a.bn(nt.source,at.source)&&a.bn(nt["source-layer"],at["source-layer"])&&a.bn(nt.type,at.type)){for(_t in wr(nt.layout,at.layout,he,We,null,zn.setLayoutProperty),wr(nt.paint,at.paint,he,We,null,zn.setPaintProperty),a.bn(nt.slot,at.slot)||he.push({command:zn.setSlot,args:[We,at.slot]}),a.bn(nt.filter,at.filter)||he.push({command:zn.setFilter,args:[We,at.filter]}),a.bn(nt.minzoom,at.minzoom)&&a.bn(nt.maxzoom,at.maxzoom)||he.push({command:zn.setLayerZoomRange,args:[We,at.minzoom,at.maxzoom]}),nt)nt.hasOwnProperty(_t)&&_t!=="layout"&&_t!=="paint"&&_t!=="filter"&&_t!=="metadata"&&_t!=="minzoom"&&_t!=="maxzoom"&&_t!=="slot"&&(_t.indexOf("paint.")===0?wr(nt[_t],at[_t],he,We,_t.slice(6),zn.setPaintProperty):a.bn(nt[_t],at[_t])||he.push({command:zn.setLayerProperty,args:[We,_t,at[_t]]}));for(_t in at)at.hasOwnProperty(_t)&&!nt.hasOwnProperty(_t)&&_t!=="layout"&&_t!=="paint"&&_t!=="filter"&&_t!=="metadata"&&_t!=="minzoom"&&_t!=="maxzoom"&&_t!=="slot"&&(_t.indexOf("paint.")===0?wr(nt[_t],at[_t],he,We,_t.slice(6),zn.setPaintProperty):a.bn(nt[_t],at[_t])||he.push({command:zn.setLayerProperty,args:[We,_t,at[_t]]}))}else he.push({command:zn.removeLayer,args:[We]}),Ct=Fe[Fe.lastIndexOf(We)+1],he.push({command:zn.addLayer,args:[at,Ct]})}(Z,L.layers,O)}catch(U){console.warn("Unable to compute style diff:",U),O=[{command:zn.setStyle,args:[L]}]}return O}(this.serialize(),n).filter(D=>!(D.command in w0));if(m.length===0)return!1;const v=m.filter(D=>!(D.command in Bm));if(v.length>0)throw new Error(`Unimplemented: ${v.map(D=>D.command).join(", ")}.`);const S=[];return m.forEach(D=>{S.push(this[D.command].apply(this,D.args))}),o&&Promise.all(S).then(o),this.stylesheet=n,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(n,o){return this.getImage(n)?this.fire(new a.y(new Error("An image with this name already exists."))):(this.imageManager.addImage(n,this.scope,o),this._afterImageUpdated(n),this)}updateImage(n,o,m=!1){this.imageManager.updateImage(n,this.scope,o),m&&this._afterImageUpdated(n)}getImage(n){return this.imageManager.getImage(n,this.scope)}removeImage(n){return this.getImage(n)?(this.imageManager.removeImage(n,this.scope),this._afterImageUpdated(n),this):this.fire(new a.y(new Error("No image with this name exists.")))}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(n),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new a.z("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(n,o,m={}){return this._checkLoaded(),this._validate(ut,`models.${n}`,o,null,m)||(this.modelManager.addModel(n,o,this.scope),this._changes.setDirty()),this}hasModel(n){return this.modelManager.hasModel(n,this.scope)}removeModel(n){return this.hasModel(n)?(this.modelManager.removeModel(n,this.scope),this):this.fire(new a.y(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(n,o,m={}){if(this._checkLoaded(),this.getOwnSource(n)!==void 0)throw new Error(`There is already a source with ID "${n}".`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(ya,`sources.${n}`,o,null,m))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const v=qf(n,o,this.dispatcher,this);v.scope=this.scope,v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(v.id),source:v.serialize(),sourceId:v.id}));const S=D=>{const L=(D?"symbol:":"other:")+v.id,O=a.aC(L,this.scope),U=this._sourceCaches[L]=new To(O,v,D);(D?this._symbolSourceCaches:this._otherSourceCaches)[v.id]=U,U.onAdd(this.map)};S(!1),o.type!=="vector"&&o.type!=="geojson"||S(!0),v.onAdd&&v.onAdd(this.map),m.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(n){this._checkLoaded();const o=this.getOwnSource(n);if(!o)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===n)return this.fire(new a.y(new Error(`Source "${n}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===n)return this.fire(new a.y(new Error(`Source "${n}" cannot be removed while terrain is using it.`)));const m=this.getOwnSourceCaches(n);for(const v of m){const S=a.cq(v.id);delete this._sourceCaches[S],this._changes.discardSourceCacheUpdate(v.id),v.fire(new a.z("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles()}return delete this._otherSourceCaches[n],delete this._symbolSourceCaches[n],this.mergeSources(),o.setEventedParent(null),o.onRemove&&o.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(n,o){this._checkLoaded(),this.getOwnSource(n).setData(o),this._changes.setDirty()}getOwnSource(n){const o=this.getOwnSourceCache(n);return o&&o.getSource()}getOwnSources(){const n=[];for(const o in this._otherSourceCaches){const m=this.getOwnSourceCache(o);m&&n.push(m.getSource())}return n}areTilesLoaded(){const n=this._mergedSourceCaches;for(const o in n){const m=n[o]._tiles;for(const v in m){const S=m[v];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}setLights(n){if(this._checkLoaded(),!n)return delete this.ambientLight,void delete this.directionalLight;const o=this._getTransitionParameters();for(const v of n){if(this._validate(js,"lights",v))return;switch(v.type){case"ambient":if(this.ambientLight){const S=this.ambientLight;S.set(v),S.updateTransitions(o)}else this.ambientLight=new oi(v,Jn||(Jn=new a.a5({color:new a.a6(a.a3.properties_light_ambient.color),"color-use-theme":new a.a6({type:"string",default:"default","property-type":"data-constant"}),intensity:new a.a6(a.a3.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const S=this.directionalLight;S.set(v),S.updateTransitions(o)}else this.directionalLight=new oi(v,Qn||(Qn=new a.a5({direction:new a.ak(a.a3.properties_light_directional.direction),color:new a.a6(a.a3.properties_light_directional.color),"color-use-theme":new a.a6({type:"string",default:"default","property-type":"data-constant"}),intensity:new a.a6(a.a3.properties_light_directional.intensity),"cast-shadows":new a.a6(a.a3.properties_light_directional["cast-shadows"]),"shadow-quality":new a.a6(a.a3.properties_light_directional["shadow-quality"]),"shadow-intensity":new a.a6(a.a3.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const m=new a.a8(this.z||0,o);this.ambientLight&&this.ambientLight.recalculate(m),this.directionalLight&&this.directionalLight.recalculate(m),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const n=this.directionalLight,o=this.ambientLight;if(!n||!o)return;const m=X=>.2126*(X[0]<=.03928?X[0]/12.92:Math.pow((X[0]+.055)/1.055,2.4))+.7152*(X[1]<=.03928?X[1]/12.92:Math.pow((X[1]+.055)/1.055,2.4))+.0722*(X[2]<=.03928?X[2]/12.92:Math.pow((X[2]+.055)/1.055,2.4)),v=n.properties.get("color").toRenderColor(null).toArray01(),S=n.properties.get("intensity"),D=n.properties.get("direction"),L=1-a.cb(D.x,D.y,D.z)[2]/90,O=m(v)*S*L,U=o.properties.get("color").toRenderColor(null).toArray01(),q=o.properties.get("intensity"),Z=m(U)*q;return Number(((O+Z)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const n=[];return this.directionalLight&&n.push(this.directionalLight.get()),this.ambientLight&&n.push(this.ambientLight.get()),n}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(n){if(!n)return this;if(a.cr(n)){const o=a.cs(n),m=this.fragments.find(({id:S})=>S===o);if(!m)throw new Error(`Style import '${n}' not found`);const v=a.cq(n);return m.style.getFragmentStyle(v)}{const o=this.fragments.find(({id:m})=>m===n);if(!o)throw new Error(`Style import '${n}' not found`);return o.style}}setFeaturesetSelectors(n){if(!n)return;const o={},m=(v,S="")=>`${v}::${S}`;this.featuresetSelectors={};for(const v in n){const S=this.featuresetSelectors[v]=[];for(const D of n[v].selectors){if(D.featureNamespace){const O=this.getOwnLayer(D.layer);if(!O){a.w(`Layer is undefined for selector: ${D.layer}`);continue}const U=m(O.source,O.sourceLayer);if(U in o&&o[U]!==D.featureNamespace){a.w(`"featureNamespace ${D.featureNamespace} of featureset ${v}'s selector is not associated to the same source, skip this selector`);continue}o[U]=D.featureNamespace}let L;if(D.properties)for(const O in D.properties){const U=a.U(D.properties[O]);U.result==="success"&&(L=L||{},L[O]=U.value)}S.push({layerId:D.layer,namespace:D.featureNamespace,properties:L})}}}getFeaturesetDescriptors(n){const o=this.getFragmentStyle(n);if(!o||!o.stylesheet.featuresets)return[];const m=[];for(const v in o.stylesheet.featuresets)m.push({featuresetId:v,importId:o.scope?o.scope:void 0});return m}getFeaturesetLayers(n,o){const m=this.getFragmentStyle(o),v=m.stylesheet.featuresets;if(!v||!v[n])return this.fire(new a.y(new Error(`The featureset '${n}' does not exist in the map's style and cannot be queried.`))),[];const S=[];for(const D of v[n].selectors){const L=m.getOwnLayer(D.layer);L&&S.push(L)}return S}getConfigProperty(n,o){const m=this.getFragmentStyle(n);if(!m)return null;const v=a.aC(o,m.scope),S=m.options.get(v),D=S?S.value||S.default:null;return D?D.serialize():null}setConfigProperty(n,o,m){const v=this.getFragmentStyle(n);if(!v)return;const S=v.stylesheet.indoor?np(v.stylesheet.schema):v.stylesheet.schema;if(!S||!S[o])return;const D=a.U(m);if(D.result!=="success")return void el(this,D.value);const L=D.value.expression,O=a.aC(o,v.scope),U=v.options.get(O);if(!U)return;let q;const{minValue:Z,maxValue:X,stepValue:ne,type:ge,values:he}=S[o],ve=a.U(S[o].default);ve.result==="success"&&(q=ve.value.expression),q?(this.options.set(O,{...U,value:L,default:q,minValue:Z,maxValue:X,stepValue:ne,type:ge,values:he}),this.updateConfigDependencies(o)):this.fire(new a.y(new Error(`No schema defined for the config option "${o}" in the "${n}" fragment.`)))}getConfig(n){const o=this.getFragmentStyle(n);if(!o)return null;const m=o.stylesheet.schema;if(!m)return null;const v={};for(const S in m){const D=a.aC(S,o.scope),L=o.options.get(D),O=L?L.value||L.default:null;v[S]=O?O.serialize():null}return v}setConfig(n,o){const m=this.getFragmentStyle(n);m&&(m.updateConfig(o,m.stylesheet.schema),this.updateConfigDependencies())}getSchema(n){const o=this.getFragmentStyle(n);return o?o.stylesheet.schema:null}setSchema(n,o){const m=this.getFragmentStyle(n);m&&(m.stylesheet.schema=o,m.updateConfig(m._config,o),this.updateConfigDependencies())}updateConfig(n,o){if(this._config=n,n||o)if(o)for(const m in o){let v,S;const D=a.U(o[m].default);if(D.result==="success"&&(v=D.value.expression),n&&n[m]!==void 0){const X=a.U(n[m]);X.result==="success"&&(S=X.value.expression)}const{minValue:L,maxValue:O,stepValue:U,type:q,values:Z}=o[m];if(v){const X=a.aC(m,this.scope);this.options.set(X,{default:v,value:S,minValue:L,maxValue:O,stepValue:U,type:q,values:Z})}else this.fire(new a.y(new Error(`No schema defined for config option "${m}".`)))}else this.fire(new a.y(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(n){for(const o of this._configDependentLayers){const m=this.getLayer(o);if(m){if(n&&!m.configDependencies.has(n))continue;m.possiblyEvaluateVisibility(),this._updateLayer(m)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(o=>{const m=o._styleColorTheme.colorThemeOverride?o._styleColorTheme.colorThemeOverride:o._styleColorTheme.colorTheme;if(m){const v=o._evaluateColorThemeData(m);(!o._styleColorTheme.lut&&v!==""||o._styleColorTheme.lut&&v!==o._styleColorTheme.lut.data)&&o.setColorTheme(m)}}),this._changes.setDirty()}addLayer(n,o,m={}){this._checkLoaded();const v=n.id;if(this._layers[v])return void this.fire(new a.y(new Error(`Layer with id "${v}" already exists on this map`)));let S;if(n.type==="custom"){if(el(this,a.ct(n)))return;S=a.cu(n,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof n.source=="object"&&(this.addSource(v,n.source),n=a.cp(n),n=a.l(n,{source:v})),this._validate(Ae,`layers.${v}`,n,{arrayIndex:-1},m))return;S=a.cu(n,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(S),S.setEventedParent(this,{layer:{id:v}})}S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid);let D=this._order.length;if(o){const q=this._order.indexOf(o);if(q===-1)return void this.fire(new a.y(new Error(`Layer with id "${o}" does not exist on this map.`)));S.slot===this._layers[o].slot?D=q:a.w(`Layer with id "${o}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(D,0,v),this._layerOrderChanged=!0,this._layers[v]=S;const L=this.getOwnLayerSourceCache(S),O=!!this.directionalLight&&this.directionalLight.shadowsEnabled();L&&S.canCastShadows()&&O&&(L.castsShadows=!0);const U=this._changes.getRemovedLayer(S);if(U&&S.source&&L&&S.type!=="custom"){this._changes.discardLayerRemoval(S);const q=a.aC(S.source,S.scope);U.type!==S.type?this._changes.updateSourceCache(q,"clear"):(this._changes.updateSourceCache(q,"reload"),L.pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map),S.scope=this.scope,this.mergeLayers()}moveLayer(n,o){this._checkLoaded();const m=this._checkLayer(n);if(!m||n===o)return;const v=this._order.indexOf(n);this._order.splice(v,1);let S=this._order.length;if(o){const D=this._order.indexOf(o);if(D===-1)return void this.fire(new a.y(new Error(`Layer with id "${o}" does not exist on this map.`)));m.slot===this._layers[o].slot?S=D:a.w(`Layer with id "${o}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(S,0,n),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(n){this._checkLoaded();const o=this._checkLayer(n);if(!o)return;o.setEventedParent(null);const m=this._order.indexOf(n);this._order.splice(m,1),delete this._layers[n],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(o.fqid),this._changes.removeLayer(o);const v=this.getOwnLayerSourceCache(o);if(v&&v.castsShadows){let S=!1;for(const D in this._layers)if(this._layers[D].source===o.source&&this._layers[D].canCastShadows()){S=!0;break}v.castsShadows=S}o.onRemove&&o.onRemove(this.map),this.mergeLayers()}getOwnLayer(n){return this._layers[n]}hasLayer(n){return n in this._mergedLayers}hasLayerType(n){for(const o in this._layers)if(this._layers[o].type===n)return!0;return!1}setLayerZoomRange(n,o,m){this._checkLoaded();const v=this._checkLayer(n);v&&(v.minzoom===o&&v.maxzoom===m||(o!=null&&(v.minzoom=o),m!=null&&(v.maxzoom=m),this._updateLayer(v)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(n,o){this._checkLoaded();const m=this._checkLayer(n);m&&m.slot!==o&&(m.slot=o,this._updateLayer(m))}setFilter(n,o,m={}){this._checkLoaded();const v=this._checkLayer(n);if(v&&!a.bn(v.filter,o))return o==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(Ve,`layers.${v.id}.filter`,o,{layerType:v.type},m)||(v.filter=a.cp(o),this._updateLayer(v)))}getFilter(n){const o=this._checkLayer(n);if(o)return a.cp(o.filter)}setLayoutProperty(n,o,m,v={}){this._checkLoaded();const S=this._checkLayer(n);if(S&&!a.bn(S.getLayoutProperty(o),m)){if(m!=null&&(!v||v.validate!==!1)&&el(S,tt.call(cn,{key:`layers.${n}.layout.${o}`,layerType:S.type,objectKey:o,value:m,styleSpec:a.a3,style:{glyphs:!0,sprite:!0}})))return;S.setLayoutProperty(o,m),S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid),this._updateLayer(S)}}getLayoutProperty(n,o){const m=this._checkLayer(n);if(m)return m.getLayoutProperty(o)}setPaintProperty(n,o,m,v={}){this._checkLoaded();const S=this._checkLayer(n);if(!S||a.bn(S.getPaintProperty(o),m)||m!=null&&(!v||v.validate!==!1)&&el(S,Je.call(cn,{key:`layers.${n}.paint.${o}`,layerType:S.type,objectKey:o,value:m,styleSpec:a.a3})))return;const D=S.setPaintProperty(o,m);S.configDependencies.size!==0&&this._configDependentLayers.add(S.fqid),D&&this._updateLayer(S),this._changes.updatePaintProperties(S)}getPaintProperty(n,o){const m=this._checkLayer(n);if(m)return m.getPaintProperty(o)}setFeatureState(n,o){if(this._checkLoaded(),"target"in n){if("featuresetId"in n.target){const{featuresetId:O,importId:U}=n.target,q=this.getFragmentStyle(U),Z=q.getFeaturesetLayers(O);for(const{source:X,sourceLayer:ne}of Z)q.setFeatureState({id:n.id,source:X,sourceLayer:ne},o)}else if("layerId"in n.target){const{layerId:O}=n.target,U=this.getLayer(O);this.setFeatureState({id:n.id,source:U.source,sourceLayer:U.sourceLayer},o)}return}const m=n.source,v=n.sourceLayer,S=this._checkSource(m);if(!S)return;const D=S.type;if(D==="geojson"&&v)return void this.fire(new a.y(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(D==="vector"&&!v)return void this.fire(new a.y(new Error("The sourceLayer parameter must be provided for vector source types.")));n.id===void 0&&this.fire(new a.y(new Error("The feature id parameter must be provided.")));const L=this.getOwnSourceCaches(m);for(const O of L)O.setFeatureState(v,n.id,o)}removeFeatureState(n,o){if(this._checkLoaded(),"target"in n){if("featuresetId"in n.target){const{featuresetId:O,importId:U}=n.target,q=this.getFragmentStyle(U),Z=q.getFeaturesetLayers(O);for(const{source:X,sourceLayer:ne}of Z)q.removeFeatureState({id:n.id,source:X,sourceLayer:ne},o)}else if("layerId"in n.target){const{layerId:O}=n.target,U=this.getLayer(O);this.removeFeatureState({id:n.id,source:U.source,sourceLayer:U.sourceLayer},o)}return}const m=n.source,v=this._checkSource(m);if(!v)return;const S=v.type,D=S==="vector"?n.sourceLayer:void 0;if(S==="vector"&&!D)return void this.fire(new a.y(new Error("The sourceLayer parameter must be provided for vector source types.")));if(o&&typeof n.id!="string"&&typeof n.id!="number")return void this.fire(new a.y(new Error("A feature id is required to remove its specific state property.")));const L=this.getOwnSourceCaches(m);for(const O of L)O.removeFeatureState(D,n.id,o)}getFeatureState(n){if(this._checkLoaded(),"target"in n){let S;if("featuresetId"in n.target){const{featuresetId:D,importId:L}=n.target,O=this.getFragmentStyle(L),U=O.getFeaturesetLayers(D);for(const{source:q,sourceLayer:Z}of U){const X=O.getFeatureState({id:n.id,source:q,sourceLayer:Z});if(X&&!S)S=X;else if(!a.bn(S,X))return void this.fire(new a.y(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in n.target){const{layerId:D}=n.target,L=this.getLayer(D);S=this.getFeatureState({id:n.id,source:L.source,sourceLayer:L.sourceLayer})}return S}const o=n.source,m=n.sourceLayer,v=this._checkSource(o);if(v){if(v.type!=="vector"||m)return n.id===void 0&&this.fire(new a.y(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(o)[0].getFeatureState(m,n.id);this.fire(new a.y(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(n){return this.stylesheet.transition=a.l({},this.stylesheet.transition,n),this.transition=this.stylesheet.transition,this}getTransition(){return a.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const n=this.getTerrain(),o=n&&this.terrain&&this.terrain.scope===this.scope?n:this.stylesheet.terrain;return a.cv({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:o,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},m=>m!==void 0)}_updateFilteredLayers(n){for(const o of Object.values(this._mergedLayers))n(o)&&this._updateLayer(o)}_updateLayer(n){this._changes.updateLayer(n);const o=this.getLayerSourceCache(n),m=a.aC(n.source,n.scope),v=this._changes.getUpdatedSourceCaches();n.source&&!v[m]&&o&&o.getSource().type!=="raster"&&(this._changes.updateSourceCache(m,"reload"),o.pause()),n.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(n){const o=L=>this._mergedLayers[L].is3D(),m=this.order,v={},S=[];for(let L=m.length-1;L>=0;L--){const O=m[L];if(o(O)){v[O]=L;for(const U of n){const q=U[O];if(q)for(const Z of q)S.push(Z)}}}S.sort((L,O)=>O.intersectionZ-L.intersectionZ);const D=[];for(let L=m.length-1;L>=0;L--){const O=m[L];if(o(O))for(let U=S.length-1;U>=0;U--){const q=S[U].feature;if(q.layer&&v[q.layer.id]<L)break;D.push(q),S.pop()}else for(const U of n){const q=U[O];if(q)for(const Z of q)D.push(Z.feature)}}return D}queryRenderedFeatures(n,o,m){let v;o&&!Array.isArray(o)&&o.filter&&(this._validate(Ve,"queryRenderedFeatures.filter",o.filter,null,o),v=a.aZ(o.filter));const S={},D=q=>{if(Zl.has(q.type))return;const Z=this.getOwnLayerSourceCache(q),X=S[Z.id]=S[Z.id]||{sourceCache:Z,layers:{},has3DLayers:!1};q.is3D()&&(X.has3DLayers=!0),X.layers[q.fqid]=X.layers[q.fqid]||{styleLayer:q,targets:[]},X.layers[q.fqid].targets.push({filter:v})};if(o&&o.layers){if(!Array.isArray(o.layers))return this.fire(new a.y(new Error("parameters.layers must be an Array."))),[];for(const q of o.layers){const Z=this._layers[q];if(!Z)return this.fire(new a.y(new Error(`The layer '${q}' does not exist in the map's style and cannot be queried for features.`))),[];D(Z)}}else for(const q in this._layers)D(this._layers[q]);const L=this._queryRenderedFeatures(n,S,m),O=this._flattenAndSortRenderedFeatures(L),U=[];for(const q of O)a.cs(q.layer.id)===this.scope&&U.push(q);return U}queryRenderedFeatureset(n,o,m){let v;o&&!Array.isArray(o)&&o.filter&&(this._validate(Ve,"queryRenderedFeatures.filter",o.filter,null,o),v=a.aZ(o.filter));const S="mock",D=[];if(o&&o.target)D.push({...o,targetId:S,filter:v});else{const U=this.getFeaturesetDescriptors();for(const q of U)D.push({targetId:S,filter:v,target:q});for(const{style:q}of this.fragments){const Z=q.getFeaturesetDescriptors();for(const X of Z)D.push({targetId:S,filter:v,target:X})}}const L=this.queryRenderedTargets(n,D,m),O=[];for(const U of L)for(const q of U.variants[S])O.push(new a.cw(U,q));return O}queryRenderedTargets(n,o,m){const v={},S=(L,O,U,q)=>{const Z=v[O.id]=v[O.id]||{sourceCache:O,layers:{},has3DLayers:!1};Z.layers[L.fqid]=Z.layers[L.fqid]||{styleLayer:L,targets:[]},L.is3D()&&(Z.has3DLayers=!0),Z.layers[L.fqid].targets.push(q?{...U,namespace:q.namespace,properties:q.properties}:U)};for(const L of o)if("featuresetId"in L.target){const{featuresetId:O,importId:U}=L.target,q=this.getFragmentStyle(U),Z=q.featuresetSelectors[O];if(!Z){this.fire(new a.y(new Error(`The featureset '${O}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const X of Z){const ne=q.getOwnLayer(X.layerId);ne&&!Zl.has(ne.type)&&S(ne,q.getOwnLayerSourceCache(ne),L,X)}}else if("layerId"in L.target){const{layerId:O}=L.target,U=this.getLayer(O);if(!U||Zl.has(U.type))continue;S(U,this.getLayerSourceCache(U),L)}const D=this._queryRenderedFeatures(n,v,m);return this._flattenAndSortRenderedFeatures(D)}_queryRenderedFeatures(n,o,m){const v=[],S=!!this.map._showQueryGeometry,D=hi.createFromScreenPoints(n,m);for(const L in o){const O=h0(D,o[L],this._availableImages,m,S);Object.keys(O).length&&v.push(O)}if(this.placement)for(const L in o){if(!o[L].sourceCache._onlySymbols)continue;const O=Du(D.screenGeometry,o[L],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData);Object.keys(O).length&&v.push(O)}return v}querySourceFeatures(n,o){const m=o&&o.filter;m&&this._validate(Ve,"querySourceFeatures.filter",m,null,o);let v=[];const S=this.getOwnSourceCaches(n);for(const D of S)v=v.concat(_d(D,o));return v}addSourceType(n,o,m){return ks.getSourceType(n)?m(new Error(`A source type called "${n}" already exists.`)):(ks.setSourceType(n,o),o.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:o.workerSourceURL},m):m(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(n,o,m={}){this._checkLoaded();const v=this.light.getLight();let S=!1;for(const L in n)if(!a.bn(n[L],v[L])){S=!0;break}if(!S)return;const D=this._getTransitionParameters();this.light.setLight(n,o,m),this.light.updateTransitions(D)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=a.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&a.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(n,o=1){if(this._checkLoaded(),!n)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),o===0&&delete this.terrain,n===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let m=n;const v=n.source==null;if(o===1){if(this.disableElevatedTerrain)return;if(typeof m.source=="object"){const L="terrain-dem-src";this.addSource(L,m.source),m=a.cp(m),m=a.l(m,{source:L})}const S=a.l({},m),D={};if(this.terrain&&v){S.source=this.terrain.get().source;const L=this.terrain?this.getFragmentStyle(this.terrain.scope):null;L&&(D.style=L.serialize())}if(this._validate(qa,"terrain",S,D))return}if(!this.terrain||this.terrain.scope!==this.scope&&!v||this.terrain&&o!==this.terrain.drapeRenderMode){if(!m)return;this._createTerrain(m,o),this.fire(new a.z("data",{dataType:"style"}))}else{const S=this.terrain,D=S.get();for(const L of Object.keys(a.a3.terrain))!m.hasOwnProperty(L)&&a.a3.terrain[L].default&&(m[L]=a.a3.terrain[L].default);for(const L in n)if(!a.bn(n[L],D[L])){S.set(n,this.options),this.stylesheet.terrain=n;const O=this._getTransitionParameters({duration:0});S.updateTransitions(O),this.fire(new a.z("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(n){const o=this.fog=new Yn(n,this.map.transform,this.scope,this.options);this.stylesheet.fog=o.get();const m=this._getTransitionParameters({duration:0});o.updateTransitions(m)}_createSnow(n){const o=this.snow=new ei(n,this.map.transform,this.scope,this.options);this.stylesheet.snow=o.get();const m=this._getTransitionParameters({duration:0});o.updateTransitions(m)}_createRain(n){const o=this.rain=new _s(n,this.map.transform,this.scope,this.options);this.stylesheet.rain=o.get();const m=this._getTransitionParameters({duration:0});o.updateTransitions(m)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const n of this.map._markers)n._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(n){if(this._checkLoaded(),!n)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const o=this.fog;if(!a.bn(o.get(),n)){o.set(n,this.options),this.stylesheet.fog=o.get();const m=this._getTransitionParameters({duration:0});o.updateTransitions(m)}}else this._createFog(n);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(n){if(this._checkLoaded(),!n)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const o=this.snow;if(!a.bn(o.get(),n)){o.set(n,this.options),this.stylesheet.snow=o.get();const m=this._getTransitionParameters({duration:0});o.updateTransitions(m)}}else this._createSnow(n);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(n){if(this._checkLoaded(),!n)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const o=this.rain;if(!a.bn(o.get(),n)){o.set(n,this.options),this.stylesheet.rain=o.get();const m=this._getTransitionParameters({duration:0});o.updateTransitions(m)}}else this._createRain(n);this._markersNeedUpdate=!0}_reloadColorTheme(){const n=()=>{for(const v in this._layers)this._layers[v].lut=this._styleColorTheme.lut;for(const v in this._sourceCaches)this._sourceCaches[v].clearTiles()},o=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!o)return this._styleColorTheme.lut=null,void n();const m=this._evaluateColorThemeData(o);this._loadColorTheme(m).then(()=>{this.fire(new a.z("colorthemeset")),n()}).catch(v=>{a.w(`Couldn't set color theme: ${v}`)})}setColorTheme(n){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&a.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=n,this._reloadColorTheme()}setImportColorTheme(n,o){const m=this.getFragmentStyle(n);m&&(m._styleColorTheme.colorThemeOverride=o,m._reloadColorTheme())}_getTransitionParameters(n){return{now:a.q.now(),transition:a.l(this.transition,n)}}updateDrapeFirstLayers(){if(!this.terrain)return;const n=[],o=[];for(const m of this._mergedOrder)this.isLayerDraped(this._mergedLayers[m])?n.push(m):o.push(m);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...n),this._drapedFirstOrder.push(...o)}_createTerrain(n,o){const m=this.terrain=new It(n,o,this.scope,this.options);o===1&&(this.stylesheet.terrain=n),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const v=this._getTransitionParameters({duration:0});m.updateTransitions(v)}_force3DLayerUpdate(){for(const n in this._layers){const o=this._layers[n];o.type==="fill-extrusion"&&this._updateLayer(o)}}_forceSymbolLayerUpdate(){for(const n in this._layers){const o=this._layers[n];o.type==="symbol"&&this._updateLayer(o)}}_validate(n,o,m,v,S={}){if(S&&S.validate===!1)return!1;const D=a.l({},this.serialize());return el(this,n.call(cn,a.l({key:o,style:D,value:m,styleSpec:a.a3},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.cx.off("pluginStateChange",this._rtlTextPluginCallback);for(const n in this._mergedLayers)this._mergedLayers[n].setEventedParent(null);for(const n in this._mergedSourceCaches)this._mergedSourceCaches[n].clearTiles(),this._mergedSourceCaches[n].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(n){const o=this.getSourceCaches(n);for(const m of o)m.clearTiles()}clearSources(){for(const n in this._mergedSourceCaches)this._mergedSourceCaches[n].clearTiles()}reloadSource(n){const o=this.getSourceCaches(n);for(const m of o)m.resume(),m.reload()}reloadSources(){for(const n of this.getSources())n.reload&&n.reload()}updateSources(n){let o;this.directionalLight&&(o=ki(this.directionalLight));for(const m in this._mergedSourceCaches)this._mergedSourceCaches[m].update(n,void 0,void 0,o)}_generateCollisionBoxes(){for(const n in this._sourceCaches){const o=this._sourceCaches[n];o.resume(),o.reload()}}_updatePlacement(n,o,m,v,S,D,L=!1){let O=!1,U=!1;const q={},Z={};for(const X of this._mergedOrder){const ne=this._mergedLayers[X];if(ne.type!=="symbol")continue;const ge=a.aC(ne.source,ne.scope);let he=q[ge];if(!he){const we=this.getLayerSourceCache(ne);if(!we)continue;const ze=we.getRenderableIds(!0).map(Oe=>we.getTileByID(Oe));Z[ge]=ze.slice(),he=q[ge]=ze.sort((Oe,Fe)=>Fe.tileID.overscaledZ-Oe.tileID.overscaledZ||(Oe.tileID.isLessThan(Fe.tileID)?-1:1))}const ve=this.crossTileSymbolIndex.addLayer(ne,he,o.center.lng,o.projection);O=O||ve}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),L=L||this._layerOrderChanged||v===0,this._layerOrderChanged&&this.fire(new a.z("neworder")),(L||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.q.now(),o.zoom))&&(this.pauseablePlacement=new Ed(o,this._mergedOrder,L,m,v,S,this.placement,this.fog&&o.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,q,Z,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.q.now()),U=!0),O&&this.pauseablePlacement.placement.setStale()),U||O){this._buildingIndex.onNewFrame(o.zoom);for(let X=0;X<this._mergedOrder.length;X++){const ne=this._mergedLayers[this._mergedOrder[X]];if(ne.type!=="symbol")continue;const ge=this.isLayerClipped(ne);this.placement.updateLayerOpacities(ne,q[a.aC(ne.source,ne.scope)],X,ge?D:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.q.now())}}_releaseSymbolFadeTiles(){for(const n in this._sourceCaches)this._sourceCaches[n].releaseSymbolFadeTiles()}addImport(n,o){this._checkLoaded();const m=this.stylesheet.imports=this.stylesheet.imports||[];if(m.findIndex(({id:S})=>S===n.id)!==-1)return void this.fire(new a.y(new Error(`Import with id '${n.id}' already exists in the map's style.`)));if(!o)return m.push(n),this._loadImports([n],!0);const v=m.findIndex(({id:S})=>S===o);return v===-1&&this.fire(new a.y(new Error(`Import with id "${o}" does not exist on this map.`))),this.stylesheet.imports=m.slice(0,v).concat(n).concat(m.slice(v)),this._loadImports([n],!0,o)}updateImport(n,o){this._checkLoaded();const m=this.stylesheet.imports||[],v=this.getImportIndex(n);return v===-1?this:typeof o=="string"?(this.setImportUrl(n,o),this):(o.url&&o.url!==m[v].url&&this.setImportUrl(n,o.url),a.bn(o.config,m[v].config)||this.setImportConfig(n,o.config),a.bn(o.data,m[v].data)||this.setImportData(n,o.data),this)}moveImport(n,o){this._checkLoaded();let m=this.stylesheet.imports||[];const v=this.getImportIndex(n);if(v===-1)return this;const S=this.getImportIndex(o);if(S===-1)return this;const D=m[v],L=this.fragments[v];return m=m.filter(({id:O})=>O!==n),this.fragments=this.fragments.filter(({id:O})=>O!==n),this.stylesheet.imports=m.slice(0,S).concat(D).concat(m.slice(S)),this.fragments=this.fragments.slice(0,S).concat(L).concat(this.fragments.slice(S)),this.mergeLayers(),this}setImportUrl(n,o){this._checkLoaded();const m=this.stylesheet.imports||[],v=this.getImportIndex(n);if(v===-1)return this;m[v].url=o;const S=this.fragments[v];return S.style=this._createFragmentStyle(m[v]),S.style.on("style.import.load",()=>this.mergeAll()),S.style.loadURL(o),this}setImportData(n,o){this._checkLoaded();const m=this.getImportIndex(n),v=this.stylesheet.imports||[];return m===-1?this:o?(this.fragments[m].style.setState(o),this._reloadImports(),this):(delete v[m].data,this.setImportUrl(n,v[m].url))}setImportConfig(n,o){this._checkLoaded();const m=this.getImportIndex(n),v=this.stylesheet.imports||[];if(m===-1)return this;o?v[m].config=o:delete v[m].config;const S=this.fragments[m],D=S.style.stylesheet&&S.style.stylesheet.schema;return S.config=o,S.style.updateConfig(o,D),this.updateConfigDependencies(),this}removeImport(n){this._checkLoaded();const o=this.stylesheet.imports||[],m=this.getImportIndex(n);m!==-1&&(o.splice(m,1),this.fragments[m].style._remove(),this.fragments.splice(m,1),this._reloadImports())}getImportIndex(n){const o=(this.stylesheet.imports||[]).findIndex(m=>m.id===n);return o===-1&&this.fire(new a.y(new Error(`Import '${n}' does not exist in the map's style and cannot be updated.`))),o}getLayer(n){return this._mergedLayers[n]}getSources(){const n=[];for(const o in this._mergedOtherSourceCaches){const m=this._mergedOtherSourceCaches[o];m&&n.push(m.getSource())}return n}getSource(n,o){const m=this.getSourceCache(n,o);return m&&m.getSource()}getLayerSource(n){const o=this.getLayerSourceCache(n);return o&&o.getSource()}getSourceCache(n,o){const m=a.aC(n,o);return this._mergedOtherSourceCaches[m]}getLayerSourceCache(n){const o=a.aC(n.source,n.scope);return n.type==="symbol"?this._mergedSymbolSourceCaches[o]:this._mergedOtherSourceCaches[o]}getSourceCaches(n){if(n==null)return Object.values(this._mergedSourceCaches);const o=[];return this._mergedOtherSourceCaches[n]&&o.push(this._mergedOtherSourceCaches[n]),this._mergedSymbolSourceCaches[n]&&o.push(this._mergedSymbolSourceCaches[n]),o}updateSourceCaches(){const n=this._changes.getUpdatedSourceCaches();for(const o in n){const m=n[o];m==="reload"?this.reloadSource(o):m==="clear"&&this.clearSource(o)}}updateLayers(n){const o=this._changes.getUpdatedPaintProperties();for(const m of o){const v=this.getLayer(m);v&&v.updateTransitions(n)}}getImages(n,o,m){this.imageManager.getImages(o.icons,o.scope,m),this._updateTilesForChangedImages();const v=S=>{S&&S.setDependencies(o.tileID.key,o.type,o.icons)};v(this._otherSourceCaches[o.source]),v(this._symbolSourceCaches[o.source])}rasterizeImages(n,o,m){this.imageManager.rasterizeImages(o,m)}getGlyphs(n,o,m){this.glyphManager.getGlyphs(o.stacks,o.scope,m)}getResource(n,o,m){return a.cy(o,m)}getOwnSourceCache(n){return this._otherSourceCaches[n]}getOwnLayerSourceCache(n){return n.type==="symbol"?this._symbolSourceCaches[n.source]:this._otherSourceCaches[n.source]}getOwnSourceCaches(n){const o=[];return this._otherSourceCaches[n]&&o.push(this._otherSourceCaches[n]),this._symbolSourceCaches[n]&&o.push(this._symbolSourceCaches[n]),o}_isSourceCacheLoaded(n){const o=this.getOwnSourceCaches(n);return o.length===0?(this.fire(new a.y(new Error(`There is no source with ID '${n}'`))),!1):o.every(m=>m.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(n,o){if(!this._clipLayerPresent&&n.type!=="fill-extrusion")return!1;const m=n.type==="fill-extrusion"&&n.sourceLayer==="building";if(n.is3D()){if(m||o&&o.type==="batched-model"||n.type==="model")return!0}else if(n.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(n=>{n.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ks.getSourceType=function(p){return Wi[p]},ks.setSourceType=function(p,n){Wi[p]=n},ks.registerForPluginStateChange=a.ch;var Nc=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,ip=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,zh=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,kd="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",sp=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,jc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,op=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,lp=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Oc=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,Fc=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,Rs=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz/=light_view_pos0.w;vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Vc=[];Po(Nc,Vc),Po(zh,Vc),Po(ip,Vc);const Ri={"_prelude_fog.vertex.glsl":jc,"_prelude_terrain.vertex.glsl":sp,"_prelude_shadow.vertex.glsl":Fc,"_prelude_fog.fragment.glsl":op,"_prelude_shadow.fragment.glsl":Rs,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":lp,"_prelude_raster_particle.glsl":Oc},Zi={};bn("",sp),bn(op,jc),bn(Rs,Fc),bn(lp,""),bn(Oc,"");const Xl=bn(ip,zh),Lh=Nc;var ju={background:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float opacity_t=smoothstep((1.0-blur_positive)*antialiased_blur,blur_positive*antialiased_blur,extrude_length-1.0)-smoothstep(0.0,antialiasblur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:bn("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:bn(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:bn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:bn("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:bn("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:bn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:bn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:bn(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:bn(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:bn(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec2 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
halfwidth=(u_width_scale*a_z_offset_width.y)/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec2 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:bn("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:bn("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:bn(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:bn(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#endif
}`),terrainRaster:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:bn("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:bn(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,kd),skyboxGradient:bn(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,kd),skyboxCapture:bn(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:bn(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:bn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:bn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:bn(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:bn("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:bn("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:bn("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:bn("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function Po(p,n){const o=p.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let m of o)if(m=m.trim(),m[0]==="#"&&m.includes("if")&&!m.includes("endif")){m=m.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const v=m.split(" ");for(const S of v)n.includes(S)||n.push(S)}}function bn(p,n){const o=/#include\s+"([^"]+)"/g,m=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let v=n.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);v&&(v=v.map(U=>{const q=U.split(" ");return q[q.length-1]}),v=[...new Set(v)]);const S={},D=[],L=[];if(p=p.replace(o,(U,q)=>(L.push(q),"")),(n=n.replace(o,(U,q)=>(D.push(q),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let O=[...Vc];Po(p,O),Po(n,O);for(const U of[...D,...L])Ri[U]||console.error(`Undefined include: ${U}`),Zi[U]||(Zi[U]=[],Po(Ri[U],Zi[U])),O=[...O,...Zi[U]];return{fragmentSource:p=p.replace(m,(U,q,Z,X,ne)=>(S[ne]=!0,q==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
in ${Z} ${X} ${ne};
#else
uniform ${Z} ${X} u_${ne};
#endif
`:q==="initialize"?`
#ifdef HAS_UNIFORM_u_${ne}
    ${Z} ${X} ${ne} = u_${ne};
#endif
`:q==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ne}
    in ${Z} ${X} ${ne};
#endif
`:q==="initialize-attribute"?"":void 0)),vertexSource:n=n.replace(m,(U,q,Z,X,ne)=>{const ge=X==="float"?"vec2":X,he=ne.match(/color/)?"color":ge;return q==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${ne}
in ${Z} ${X} a_${ne};
#endif
`:S[ne]?q==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
in ${Z} ${ge} a_${ne};
out ${Z} ${X} ${ne};
#else
uniform ${Z} ${X} u_${ne};
#endif
`:q==="initialize"?he==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = a_${ne};
#else
    ${Z} ${X} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = unpack_mix_${he}(a_${ne}, u_${ne}_t);
#else
    ${Z} ${X} ${ne} = u_${ne};
#endif
`:q==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ne}
    in ${Z} ${X} a_${ne};
    out ${Z} ${X} ${ne};
#endif
`:q==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ne}
    ${ne} = a_${ne};
#endif
`:void 0:q==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
in ${Z} ${ge} a_${ne};
#else
uniform ${Z} ${X} u_${ne};
#endif
`:q==="define-instanced"?he==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${ne}0;
in vec4 a_${ne}1;
in vec4 a_${ne}2;
in vec4 a_${ne}3;
#else
uniform ${Z} ${X} u_${ne};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${Z} ${ge} a_${ne};
#else
uniform ${Z} ${X} u_${ne};
#endif
`:q==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${ne}
    ${Z} ${X} ${ne} = a_${ne};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${Z} ${X} ${ne} = a_${ne};
#else
    ${Z} ${X} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${Z} ${X} ${ne} = unpack_mix_${he}(a_${ne}, u_${ne}_t);
#else
    ${Z} ${X} ${ne} = u_${ne};
#endif
`}),staticAttributes:v,usedDefines:O,vertexIncludes:D,fragmentIncludes:L}}class Ou{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(n,o,m,v,S,D,L,O){this.context=n;let U=this.boundPaintVertexBuffers.length!==v.length;for(let Z=0;!U&&Z<v.length;Z++)this.boundPaintVertexBuffers[Z]!==v[Z]&&(U=!0);let q=this.boundDynamicVertexBuffers.length!==L.length;for(let Z=0;!q&&Z<L.length;Z++)this.boundDynamicVertexBuffers[Z]!==L[Z]&&(q=!0);if(!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==m||U||q||this.boundIndexBuffer!==S||this.boundVertexOffset!==D)this.freshBind(o,m,v,S,D,L,O);else{n.bindVertexArrayOES.set(this.vao);for(const Z of L)Z&&(Z.bind(),O&&Z.instanceCount&&Z.setVertexAttribDivisor(n.gl,o,O));S&&S.dynamicDraw&&S.bind()}}freshBind(n,o,m,v,S,D,L){const O=n.numAttributes,U=this.context,q=U.gl;this.vao&&this.destroy(),this.vao=U.gl.createVertexArray(),U.bindVertexArrayOES.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=S,this.boundDynamicVertexBuffers=D,o.enableAttributes(q,n),o.bind(),o.setVertexAttribPointers(q,n,S);for(const Z of m)Z.enableAttributes(q,n),Z.bind(),Z.setVertexAttribPointers(q,n,S);for(const Z of D)Z&&(Z.enableAttributes(q,n),Z.bind(),Z.setVertexAttribPointers(q,n,S),L&&Z.instanceCount&&Z.setVertexAttribDivisor(q,n,L));v&&v.bind(),U.currentNumAttributes=O}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function Nm(p,n){const o=Math.pow(2,n.canonical.z),m=n.canonical.y;return[new a.aa(0,m/o).toLngLat().lat,new a.aa(0,(m+1)/o).toLngLat().lat]}function $h(p,n,o,m,v,S,D){const L=p.context,O=L.gl,U=o.hillshadeFBO;if(!U)return;p.prepareDrawTile();const q=p.isTileAffectedByFog(n),Z=p.getOrCreateProgram("hillshade",{overrideFog:q});L.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,U.colorAttachment.get());const X=((ve,we,ze,Oe)=>{const Fe=ze.paint.get("hillshade-shadow-color"),Ye=ze.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",Ge=ze.paint.get("hillshade-highlight-color"),Ze=ze.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",We=ze.paint.get("hillshade-accent-color"),nt=ze.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",at=ze.paint.get("hillshade-emissive-strength");let Ct=a.ai(ze.paint.get("hillshade-illumination-direction"));if(ze.paint.get("hillshade-illumination-anchor")==="viewport")Ct-=ve.transform.angle;else if(ve.style&&ve.style.enable3dLights()&&ve.style.directionalLight){const lt=ve.style.directionalLight.properties.get("direction"),mt=a.cb(lt.x,lt.y,lt.z);Ct=a.ai(mt[1])}const _t=!ve.options.moving;return{u_matrix:Oe||ve.transform.calculateProjMatrix(we.tileID.toUnwrapped(),_t),u_image:0,u_latrange:Nm(0,we.tileID),u_light:[ze.paint.get("hillshade-exaggeration"),Ct],u_shadow:Fe.toRenderColor(Ye?null:ze.lut),u_highlight:Ge.toRenderColor(Ze?null:ze.lut),u_emissive_strength:at,u_accent:We.toRenderColor(nt?null:ze.lut)}})(p,o,m,p.terrain?n.projMatrix:null);p.uploadCommonUniforms(L,Z,n.toUnwrapped());const{tileBoundsBuffer:ne,tileBoundsIndexBuffer:ge,tileBoundsSegments:he}=p.getTileBoundsBuffers(o);Z.draw(p,O.TRIANGLES,v,S,D,Gr.disabled,X,m.id,ne,ge,he)}function Mo(p,n,o){if(!n.needsDEMTextureUpload)return;const m=p.context,v=m.gl;m.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||p.getTileTexture(o.stride);const S=o.getPixels();n.demTexture?n.demTexture.update(S,{premultiply:!1}):n.demTexture=new a.T(m,S,v.R32F,{premultiply:!1}),n.needsDEMTextureUpload=!1}function S0(p,n,o){const m=p.context,v=m.gl;if(!n.dem)return;const S=n.dem;if(m.activeTexture.set(v.TEXTURE1),Mo(p,n,S),!n.demTexture)return;n.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE);const D=S.dim;m.activeTexture.set(v.TEXTURE0);let L=n.hillshadeFBO;if(!L){const X=new a.T(m,{width:D,height:D,data:null},v.RGBA8);X.bind(v.LINEAR,v.CLAMP_TO_EDGE),L=n.hillshadeFBO=m.createFramebuffer(D,D,!0,"renderbuffer"),L.colorAttachment.set(X.texture)}m.bindFramebuffer.set(L.framebuffer),m.viewport.set([0,0,D,D]);const{tileBoundsBuffer:O,tileBoundsIndexBuffer:U,tileBoundsSegments:q}=p.getMercatorTileBoundsBuffers(),Z=[];p.linearFloatFilteringSupported()&&Z.push("TERRAIN_DEM_FLOAT_FORMAT"),p.getOrCreateProgram("hillshadePrepare",{defines:Z}).draw(p,v.TRIANGLES,Rr.disabled,en.disabled,dn.unblended,Gr.disabled,((X,ne)=>{const ge=ne.stride,he=a.ab.mat4.create();return a.ab.mat4.ortho(he,0,a.ag,-a.ag,0,0,1),a.ab.mat4.translate(he,he,[0,-a.ag,0]),{u_matrix:he,u_image:1,u_dimension:[ge,ge],u_zoom:X.overscaledZ}})(n.tileID,S),o.id,O,U,q),n.needsHillshadePrepare=!1}class Un{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class jm extends Un{getDefault(){return a.aj.transparent}set(n){const o=this.current;(n.r!==o.r||n.g!==o.g||n.b!==o.b||n.a!==o.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Yl extends Un{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class cp extends Un{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Rd extends Un{getDefault(){return[!0,!0,!0,!0]}set(n){const o=this.current;(n[0]!==o[0]||n[1]!==o[1]||n[2]!==o[2]||n[3]!==o[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Jl extends Un{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class Bh extends Un{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class up extends Un{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const o=this.current;(n.func!==o.func||n.ref!==o.ref||n.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Fu extends Un{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const o=this.current;(n[0]!==o[0]||n[1]!==o[1]||n[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Id extends Un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;n?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=n,this.dirty=!1}}class Uc extends Un{getDefault(){return[0,1]}set(n){const o=this.current;(n[0]!==o[0]||n[1]!==o[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Gc extends Un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;n?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=n,this.dirty=!1}}class ro extends Un{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Ya extends Un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;n?o.enable(o.BLEND):o.disable(o.BLEND),this.current=n,this.dirty=!1}}class Ql extends Un{getDefault(){const n=this.gl;return[n.ONE,n.ZERO,n.ONE,n.ZERO]}set(n){const o=this.current;(n[0]!==o[0]||n[1]!==o[1]||n[2]!==o[2]||n[3]!==o[3]||this.dirty)&&(this.gl.blendFuncSeparate(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Ao extends Un{getDefault(){return a.aj.transparent}set(n){const o=this.current;(n.r!==o.r||n.g!==o.g||n.b!==o.b||n.a!==o.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class ko extends Un{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(n,n),this.current=n,this.dirty=!1)}}class ec extends Un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;n?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=n,this.dirty=!1}}class dp extends Un{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class zd extends Un{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}let Nh=class extends Un{getDefault(){return null}set(p){(p!==this.current||this.dirty)&&(this.gl.useProgram(p),this.current=p,this.dirty=!1)}};class as extends Un{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class Ja extends Un{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const o=this.current;(n[0]!==o[0]||n[1]!==o[1]||n[2]!==o[2]||n[3]!==o[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Ta extends Un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Hc extends Un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Is extends Un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Om extends Un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Vu extends Un{getDefault(){return null}set(n){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class T0 extends Un{getDefault(){return null}set(n){this.gl&&(n!==this.current||this.dirty)&&(this.gl.bindVertexArray(n),this.current=n,this.dirty=!1)}}class E0 extends Un{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class jh extends Un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Oh extends Un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class Ld extends Un{constructor(n,o){super(n),this.context=n,this.parent=o}getDefault(){return null}}class Uu extends Ld{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Fh extends Ld{attachment(){return this.gl.DEPTH_ATTACHMENT}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,this.attachment(),o.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Ro extends Ld{attachment(){return this.gl.DEPTH_ATTACHMENT}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,this.attachment(),o.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Sl extends Fh{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const tc=(p,n,o)=>({u_matrix:p,u_image0:0,u_skirt_height:n,u_ground_shadow_factor:o}),tl=(p,n,o,m,v,S,D,L,O,U,q,Z,X,ne,ge,he)=>({u_proj_matrix:Float32Array.from(p),u_globe_matrix:n,u_normalize_matrix:Float32Array.from(m),u_merc_matrix:o,u_zoom_transition:v,u_merc_center:S,u_image0:0,u_frustum_tl:D,u_frustum_tr:L,u_frustum_br:O,u_frustum_bl:U,u_globe_pos:q,u_globe_radius:Z,u_viewport:X,u_grid_matrix:he?Float32Array.from(he):new Float32Array(9),u_skirt_height:ne,u_far_z_cutoff:ge});function $d(p,n){return p!=null&&n!=null&&!(!p.hasData()||!n.hasData())&&p.demTexture!=null&&n.demTexture!=null&&p.tileID.key!==n.tileID.key}const Gs=new class{constructor(){this.operations={}}newMorphing(p,n,o,m,v){if(p in this.operations){const S=this.operations[p];S.to.tileID.key!==o.tileID.key&&(S.queued=o)}else this.operations[p]={startTime:m,phase:0,duration:v,from:n,to:o,queued:null}}getMorphValuesForProxy(p){if(!(p in this.operations))return null;const n=this.operations[p];return{from:n.from,to:n.to,phase:n.phase}}update(p){for(const n in this.operations){const o=this.operations[n];for(o.phase=(p-o.startTime)/o.duration;o.phase>=1||!this._validOp(o);)if(!this._nextOp(o,p)){delete this.operations[n];break}}}_nextOp(p,n){return!!p.queued&&(p.from=p.to,p.to=p.queued,p.queued=null,p.phase=0,p.startTime=n,!0)}_validOp(p){return p.from.hasData()&&p.to.hasData()}},Gu={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Io(p,n,o){if(n===0)return 0;const m=n<1&&o===514?.25/n:1;return 6*Math.pow(1.5,22-p)*Math.max(n,1)*m}function rc(p,n){const o=1<<p.z;return!n&&(p.x===0||p.x===o-1)||p.y===0||p.y===o-1}const xi=p=>({u_matrix:p});function Hu(p,n,o,m,v){if(v>0){const S=a.q.now(),D=(S-p.timeAdded)/v,L=n?(S-n.timeAdded)/v:-1,O=o.getSource(),U=m.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),q=!n||Math.abs(n.tileID.overscaledZ-U)>Math.abs(p.tileID.overscaledZ-U),Z=q&&p.refreshedUponExpiration?1:a.aw(q?D:1-L,0,1);return p.refreshedUponExpiration&&D>=1&&(p.refreshedUponExpiration=!1),n?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}class Fm extends To{constructor(n){const o={type:"raster-dem",maxzoom:n.transform.maxZoom},m=new a.D(a.ci(),null),v=qf("mock-dem",o,m,n.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(n,o){n.state="loaded",o(null)}}class Vm extends To{constructor(n){const o=qf("proxy",{type:"geojson",maxzoom:n.transform.maxZoom},new a.D(a.ci(),null),n.style);super("proxy",o,!1),o.setEventedParent(this),this.map=this.getSource().map=n,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(n,o,m){if(n.freezeTileCoverage)return;this.transform=n;const v=n.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((S,D)=>{if(S[D.key]="",!this._tiles[D.key]){const L=new kc(D,this._source.tileSize*D.overscaleFactor(),n.tileZoom);L.state="loaded",this._tiles[D.key]=L}return S},{});for(const S in this._tiles)S in v||(this.freeFBO(S),this._tiles[S].unloadVectorData(),delete this._tiles[S])}freeFBO(n){const o=this.proxyCachedFBO[n];if(o!==void 0){const m=Object.values(o);this.renderCachePool.push(...m),delete this.proxyCachedFBO[n]}}deallocRenderCache(){this.renderCache.forEach(n=>n.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class hp extends a.aG{constructor(n,o,m){super(n.overscaledZ,n.wrap,n.canonical.z,n.canonical.x,n.canonical.y),this.proxyTileKey=o,this.projMatrix=m}}class C0 extends a.cJ{constructor(n,o){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},n.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),n.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),n.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=n,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[m,v,S]=function(O){const U=new a.b4,q=new a.aU,Z=131;U.reserve(17161),q.reserve(33800);const X=a.ag/128,ne=a.ag+X/2,ge=ne+X;for(let ve=-X;ve<ge;ve+=X)for(let we=-X;we<ge;we+=X){const ze=we<0||we>ne||ve<0||ve>ne?24575:0,Oe=a.aw(Math.round(we),0,a.ag),Fe=a.aw(Math.round(ve),0,a.ag);U.emplaceBack(Oe+ze,Fe)}const he=(ve,we)=>{const ze=we*Z+ve;q.emplaceBack(ze+1,ze,ze+Z),q.emplaceBack(ze+Z,ze+Z+1,ze+1)};for(let ve=1;ve<129;ve++)for(let we=1;we<129;we++)he(we,ve);return[0,129].forEach(ve=>{for(let we=0;we<130;we++)he(we,ve),he(ve,we)}),[U,q,32768]}(),D=n.context;this.gridBuffer=D.createVertexBuffer(m,a.b6.members),this.gridIndexBuffer=D.createIndexBuffer(v),this.gridSegments=a.b7.simpleSegment(0,0,m.length,v.length),this.gridNoSkirtSegments=a.b7.simpleSegment(0,0,m.length,S),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Vm(o.map),this.orthoMatrix=a.ab.mat4.create(),a.ab.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,a.ag,0,a.ag,0,1);const L=D.gl;this._overlapStencilMode=new en({func:L.GEQUAL,mask:255},0,255,L.KEEP,L.KEEP,L.REPLACE),this._previousZoom=n.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=o,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Fm(o.map),this._pendingGroundEffectLayers=[]}set style(n){n.on("data",this._onStyleDataEvent.bind(this)),this._style=n,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(n,o,m){if(n&&n.terrain){this._style!==n&&(this.style=n,this._evaluationZoom=void 0);const v=n.terrain.properties,S=n.terrain.drapeRenderMode===0,D=n.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=a.q.now();const L=n.terrain&&n.terrain.scope,O=v.get("source"),U=S?this._mockSourceCache:n.getSourceCache(O,L);if(!U)return void a.w(`Couldn't find terrain source "${O}".`);if(this.sourceCache=U,this._attenuationRange=n.terrain.getAttenuationRange(),this._exaggeration=D?this.calculateExaggeration(o):v.get("exaggeration"),!o.projection.requiresDraping&&D&&this._exaggeration===0)return void this._disable();this.enabled=!0;const q=()=>{this.sourceCache.used&&a.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const Z=this.getScaledDemTileSize();this.sourceCache.update(o,Z,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,q(),this._initializing=!0),q(),o.updateElevation(!0,m),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(o),this._emptyDEMTextureDirty=!0,this._previousZoom=o.zoom}else this._disable()}calculateExaggeration(n){if(this._attenuationRange&&n.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(n.zoom);const o=this._previousCameraAltitude,m=n.getFreeCameraOptions().position.z/n.pixelsPerMeter*n.worldSize;this._previousCameraAltitude=m;const v=o!=null?m-o:Number.MAX_VALUE;if(Math.abs(v)<2)return this._exaggeration;const S=n.zoom,D=this._style.terrain;if(!this._previousUpdateTimestamp)return D.getExaggeration(S);let L=S-this._previousZoom;const O=this._previousUpdateTimestamp;let U=S;this._evaluationZoom!=null&&(U=this._evaluationZoom,Math.abs(S-U)>.5&&(L=.5*(S-U+L)),L*v<0&&(U+=L)),this._evaluationZoom=U;const q=D.getExaggeration(U),Z=q===D.getExaggeration(Math.max(0,U-.1));if(Z&&Math.abs(q-this._exaggeration)<.01)return q;let X=Math.min(.1,.00375*(this._updateTimestamp-O));return(Z||q<.1||Math.abs(L)<1e-4)&&(X=Math.min(.2,4*X)),a.af(this._exaggeration,q,X)}resetTileLookupCache(n){this._findCoveringTileCache[n]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(n){n.coord&&n.dataType==="source"?this._clearRenderCacheForTile(n.sourceCacheId,n.coord):n.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const n in this._style._mergedSourceCaches)this._style._mergedSourceCaches[n].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(n=>n.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const n=2*this.proxySourceCache.getSource().tileSize;return[n,n]}set useVertexMorphing(n){this._useVertexMorphing=n}updateTileBinding(n){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const o=this.proxySourceCache,m=this.painter.transform;this._initializing&&(this._initializing=m._centerAltitude===0&&this.getAtPointOrZero(a.aa.fromLngLat(m.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=o.getIds().map(O=>{const U=o.getTileByID(O).tileID;return U.projMatrix=m.calculateProjMatrix(U.toUnwrapped()),U});(function(O,U){const q=U.transform.pointCoordinate(U.transform.getCameraPoint()),Z=new a.P(q.x,q.y);O.sort((X,ne)=>{if(ne.overscaledZ-X.overscaledZ)return ne.overscaledZ-X.overscaledZ;const ge=new a.P(X.canonical.x+(1<<X.canonical.z)*X.wrap,X.canonical.y),he=new a.P(ne.canonical.x+(1<<ne.canonical.z)*ne.wrap,ne.canonical.y),ve=Z.mult(1<<X.canonical.z);return ve.x-=.5,ve.y-=.5,ve.distSqr(ge)-ve.distSqr(he)})})(v,this.painter);const S=this.proxyToSource||{};this.proxyToSource={},v.forEach(O=>{this.proxyToSource[O.key]={}}),this.terrainTileForTile={};const D=this._style._mergedSourceCaches;for(const O in D){const U=D[O];if(!U.used||(U!==this.sourceCache&&this.resetTileLookupCache(U.id),this._setupProxiedCoordsForOrtho(U,n[O],S),U.usedForTerrain))continue;const q=n[O];U.getSource().reparseOverscaled&&this._assignTerrainTiles(q)}this.proxiedCoords[o.id]=v.map(O=>new hp(O,O.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(S),this.renderingToTexture=!1;const L={};this._visibleDemTiles=[];for(const O of this.proxyCoords){const U=this.terrainTileForTile[O.key];if(!U)continue;const q=U.tileID.key;q in L||(this._visibleDemTiles.push(U),L[q]=q)}}_assignTerrainTiles(n){this._initializing||n.forEach(o=>{if(this.terrainTileForTile[o.key])return;const m=this._findTileCoveringTileID(o,this.sourceCache);m&&(this.terrainTileForTile[o.key]=m)})}_prepareDEMTextures(){const n=this.painter.context,o=n.gl;for(const m in this.terrainTileForTile){const v=this.terrainTileForTile[m],S=v.dem;!S||v.demTexture&&!v.needsDEMTextureUpload||(n.activeTexture.set(o.TEXTURE1),Mo(this.painter,v,S))}}_prepareDemTileUniforms(n,o,m,v){if(!o||o.demTexture==null)return!1;const S=n.tileID.canonical,D=Math.pow(2,o.tileID.canonical.z-S.z),L=v||"";return m[`u_dem_tl${L}`]=[S.x*D%1,S.y*D%1],m[`u_dem_scale${L}`]=D,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let n=0;const o=this._visibleDemTiles.reduce((m,v)=>{if(!v.dem)return m;const S=v.dem.tree.minimums[0];return S>0&&n++,m+S},0);return n?o/n:0}_updateEmptyDEMTexture(){const n=this.painter.context,o=n.gl;n.activeTexture.set(o.TEXTURE2);const m=this._getLoadedAreaMinimum(),v=new a.cK({width:1,height:1},new Float32Array([m]));this._emptyDEMTextureDirty=!1;let S=this._emptyDEMTexture;return S?S.update(v,{premultiply:!1}):S=this._emptyDEMTexture=new a.T(n,v,o.R32F,{premultiply:!1}),S}setupElevationDraw(n,o,m){const v=this.painter.context,S=v.gl,D={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};D.u_exaggeration=this.exaggeration();let L=null,O=null,U=1;if(m&&m.morphing&&this._useVertexMorphing){const ne=m.morphing.srcDemTile,ge=m.morphing.dstDemTile;U=m.morphing.phase,ne&&ge&&(this._prepareDemTileUniforms(n,ne,D,"_prev")&&(O=ne),this._prepareDemTileUniforms(n,ge,D)&&(L=ge))}const q=ne=>ne&&ne.demTexture&&this.painter.linearFloatFilteringSupported()?S.LINEAR:S.NEAREST;let Z=null;var X;if(this.enabled?O&&L?(Z=L.demTexture,v.activeTexture.set(S.TEXTURE4),O.demTexture.bind(q(O),S.CLAMP_TO_EDGE),D.u_dem_lerp=U):(L=this.terrainTileForTile[n.tileID.key],Z=this._prepareDemTileUniforms(n,L,D)?L.demTexture:this.emptyDEMTexture):Z=this.emptyDEMTexture,v.activeTexture.set(S.TEXTURE2),Z&&(D.u_dem_size=(X=Z).size[0]===1?1:X.size[0]-2,Z.bind(q(L),S.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(m&&m.useDepthForOcclusion,o,D),m&&m.useMeterToDem&&L){const ne=(1<<L.tileID.canonical.z)*a.bH(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;D.u_meter_to_dem=ne}if(m&&m.labelPlaneMatrixInv&&(D.u_label_plane_matrix_inv=m.labelPlaneMatrixInv),o.setTerrainUniformValues(v,D),this.painter.transform.projection.name==="globe"){const ne=this.globeUniformValues(this.painter.transform,n.tileID.canonical,m&&m.useDenormalizedUpVectorScale);o.setGlobeUniformValues(v,ne)}}globeUniformValues(n,o,m){const v=n.projection;return{u_tile_tl_up:v.upVector(o,0,0),u_tile_tr_up:v.upVector(o,a.ag,0),u_tile_br_up:v.upVector(o,a.ag,a.ag),u_tile_bl_up:v.upVector(o,0,a.ag),u_tile_up_scale:m?a.cL(1):v.upVectorScale(o,n.center.lat,n.worldSize).metersToTile}}renderToBackBuffer(n){const o=this.painter,m=this.painter.context;n.length!==0&&(m.bindFramebuffer.set(null),m.viewport.set([0,0,o.width,o.height]),o.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(v,S,D,L,O){if(v.transform.projection.name==="globe")(function(U,q,Z,X,ne){const ge=U.context,he=ge.gl;let ve,we;const ze=U.transform,Oe=a.cC(U,ge,ze),Fe=(lt,mt)=>{if(we===mt)return;const Nt=[Gu[mt],"PROJECTION_GLOBE_VIEW"];Oe&&Nt.push("CUSTOM_ANTIALIASING");const qt=U.isTileAffectedByFog(lt);ve=U.getOrCreateProgram("globeRaster",{defines:Nt,overrideFog:qt}),we=mt},Ye=U.colorModeForRenderPass(),Ge=new Rr(he.LEQUAL,Rr.ReadWrite,U.depthRangeFor3D);Gs.update(ne);const Ze=a.cD(ze),We=[a.at(ze.center.lng),a.aA(ze.center.lat)],nt=U.globeSharedBuffers,at=[ze.width*a.q.devicePixelRatio,ze.height*a.q.devicePixelRatio],Ct=Float32Array.from(ze.globeMatrix),_t={useDenormalizedUpVectorScale:!0};{const lt=U.transform,mt=Io(lt.zoom,q.exaggeration(),q.sourceCache._source.tileSize);we=-1;const Nt=he.TRIANGLES;for(const qt of X){const Zt=Z.getTile(qt),xt=en.disabled,Ft=q.prevTerrainTileForTile[qt.key],Mt=q.terrainTileForTile[qt.key];$d(Ft,Mt)&&Gs.newMorphing(qt.key,Ft,Mt,ne,250),ge.activeTexture.set(he.TEXTURE0),Zt.texture&&Zt.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE);const Qt=Gs.getMorphValuesForProxy(qt.key),Ot=Qt?1:0;Qt&&a.J(_t,{morphing:{srcDemTile:Qt.from,dstDemTile:Qt.to,phase:a.cB(Qt.phase)}});const zt=a.cE(qt.canonical),dr=a.cF(zt.getCenter().lat),rr=a.cG(qt.canonical,zt,dr,lt.worldSize/lt._pixelsPerMercatorPixel),yr=a.bb(a.cH(qt.canonical)),_r=tl(lt.expandedFarZProjMatrix,Ct,Ze,yr,a.ae(lt.zoom),We,lt.frustumCorners.TL,lt.frustumCorners.TR,lt.frustumCorners.BR,lt.frustumCorners.BL,lt.globeCenterInViewSpace,lt.globeRadius,at,mt,lt._farZ,rr);if(Fe(qt,Ot),ve&&(q.setupElevationDraw(Zt,ve,_t),U.uploadCommonUniforms(ge,ve,qt.toUnwrapped()),nt)){const[Kr,Ar,zr]=nt.getGridBuffers(dr,mt!==0);ve.draw(U,Nt,Ge,xt,Ye,Gr.backCCW,_r,"globe_raster",Kr,Ar,zr)}}}if(nt&&(U.renderDefaultNorthPole||U.renderDefaultSouthPole)){const lt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Oe&&lt.push("CUSTOM_ANTIALIASING"),ve=U.getOrCreateProgram("globeRaster",{defines:lt});for(const mt of X){const{x:Nt,y:qt,z:Zt}=mt.canonical,xt=qt===0,Ft=qt===(1<<Zt)-1,[Mt,Qt,Ot,zt]=nt.getPoleBuffers(Zt,!1);if(zt&&(xt||Ft)){const dr=Z.getTile(mt);ge.activeTexture.set(he.TEXTURE0),dr.texture&&dr.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE);let rr=a.cI(Zt,Nt,ze);const yr=a.bb(a.cH(mt.canonical)),_r=(Kr,Ar)=>Kr.draw(U,he.TRIANGLES,Ge,en.disabled,Ye,Gr.disabled,tl(ze.expandedFarZProjMatrix,rr,rr,yr,0,We,ze.frustumCorners.TL,ze.frustumCorners.TR,ze.frustumCorners.BR,ze.frustumCorners.BL,ze.globeCenterInViewSpace,ze.globeRadius,at,0,ze._farZ),"globe_pole_raster",Ar,Ot,zt);q.setupElevationDraw(dr,ve,_t),U.uploadCommonUniforms(ge,ve,mt.toUnwrapped()),xt&&U.renderDefaultNorthPole&&_r(ve,Mt),Ft&&U.renderDefaultSouthPole&&(rr=a.ab.mat4.scale(a.ab.mat4.create(),rr,[1,-1,1]),_r(ve,Qt))}}}})(v,S,D,L,O);else{const U=v.context,q=U.gl;let Z,X;const ne=v.shadowRenderer,ge=bl(v,v.longestCutoffRange),he=Ye=>{if(X===Ye)return;const Ge=[];Ge.push(Gu[Ye]),ge.shouldRenderCutoff&&Ge.push("RENDER_CUTOFF"),ne&&(Ge.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ne.useNormalOffset&&Ge.push("NORMAL_OFFSET")),Z=v.getOrCreateProgram("terrainRaster",{defines:Ge}),X=Ye},ve=v.colorModeForRenderPass(),we=new Rr(q.LEQUAL,Rr.ReadWrite,v.depthRangeFor3D);Gs.update(O);const ze=v.transform,Oe=Io(ze.zoom,S.exaggeration(),S.sourceCache._source.tileSize);let Fe=[0,0,0];if(ne){const Ye=v.style.directionalLight,Ge=v.style.ambientLight;Ye&&Ge&&(Fe=wl(v.style,Ye,Ge))}{X=-1;const Ye=q.TRIANGLES,[Ge,Ze]=[S.gridIndexBuffer,S.gridSegments];for(const We of L){const nt=D.getTile(We),at=en.disabled,Ct=S.prevTerrainTileForTile[We.key],_t=S.terrainTileForTile[We.key];$d(Ct,_t)&&Gs.newMorphing(We.key,Ct,_t,O,250),U.activeTexture.set(q.TEXTURE0),nt.texture&&nt.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE);const lt=Gs.getMorphValuesForProxy(We.key),mt=lt?1:0;let Nt;lt&&(Nt={morphing:{srcDemTile:lt.from,dstDemTile:lt.to,phase:a.cB(lt.phase)}});const qt=tc(We.projMatrix,rc(We.canonical,ze.renderWorldCopies)?Oe/10:Oe,Fe);if(he(mt),!Z)continue;S.setupElevationDraw(nt,Z,Nt);const Zt=We.toUnwrapped();ne&&ne.setupShadows(Zt,Z),v.uploadCommonUniforms(U,Z,Zt,null,ge),Z.draw(v,Ye,we,at,ve,Gr.backCCW,qt,"terrain_raster",S.gridBuffer,Ge,Ze)}}}}(o,this,this.proxySourceCache,n,this._updateTimestamp),this.renderingToTexture=!0,o.gpuTimingDeferredRenderEnd(),n.splice(0,n.length))}renderBatch(n){if(this._drapedRenderBatches.length===0)return n+1;this.renderingToTexture=!0;const o=this.painter,m=this.painter.context,v=this.proxySourceCache,S=this.proxiedCoords[v.id],D=this._drapedRenderBatches.shift(),L=o.style.order,O=[];let U=0;for(const q of S){const Z=v.getTileByID(q.proxyTileKey),X=v.proxyCachedFBO[q.key]?v.proxyCachedFBO[q.key][n]:void 0,ne=X!==void 0?v.renderCache[X]:this.pool[U++],ge=X!==void 0;if(Z.texture=ne.tex,ge&&!ne.dirty){O.push(Z.tileID);continue}let he;m.bindFramebuffer.set(ne.fb.framebuffer),this.renderedToTile=!1,ne.dirty&&(m.clear({color:a.aj.transparent,stencil:0}),ne.dirty=!1);for(let ve=D.start;ve<=D.end;++ve){const we=o.style._mergedLayers[L[ve]];if(we.isHidden(o.transform.zoom))continue;const ze=o.style.getLayerSourceCache(we),Oe=ze?this.proxyToSource[q.key][ze.id]:[q];if(!Oe)continue;const Fe=Oe;m.viewport.set([0,0,ne.fb.width,ne.fb.height]),he!==(ze?ze.id:null)&&(this._setupStencil(ne,Oe,we,ze),he=ze?ze.id:null),o.renderLayer(o,ze,we,Fe)}if(this._drapedRenderBatches.length===0)for(const ve of this._pendingGroundEffectLayers){const we=o.style._mergedLayers[L[ve]];if(we.isHidden(o.transform.zoom))continue;const ze=o.style.getLayerSourceCache(we),Oe=ze?this.proxyToSource[q.key][ze.id]:[q];if(!Oe)continue;const Fe=Oe;m.viewport.set([0,0,ne.fb.width,ne.fb.height]),he!==(ze?ze.id:null)&&(this._setupStencil(ne,Oe,we,ze),he=ze?ze.id:null),o.renderLayer(o,ze,we,Fe)}this.renderedToTile?(ne.dirty=!0,O.push(Z.tileID)):ge||--U,U===5&&(U=0,this.renderToBackBuffer(O))}return this.renderToBackBuffer(O),this.renderingToTexture=!1,m.bindFramebuffer.set(null),m.viewport.set([0,0,o.width,o.height]),D.end+1}postRender(){}isLayerOrderingCorrect(n){const o=n.order.length;let m=-1,v=o;for(let S=0;S<o;++S)this._style.isLayerDraped(n._mergedLayers[n.order[S]])?m=Math.max(m,S):v=Math.min(v,S);return v>m}getMinElevationBelowMSL(){let n=0;return this._visibleDemTiles.filter(o=>o.dem).forEach(o=>{n=Math.min(n,o.dem.tree.minimums[0])}),n===0?n:(n-30)*this._exaggeration}raycast(n,o,m){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(S=>S.dem).map(S=>{const D=S.tileID,L=1<<D.overscaledZ,{x:O,y:U}=D.canonical,q=O/L,Z=(O+1)/L,X=U/L,ne=(U+1)/L;return{minx:q,miny:X,maxx:Z,maxy:ne,t:S.dem.tree.raycastRoot(q,X,Z,ne,n,o,m),tile:S}});v.sort((S,D)=>(S.t!==null?S.t:Number.MAX_VALUE)-(D.t!==null?D.t:Number.MAX_VALUE));for(const S of v){if(S.t==null)return null;const D=S.tile.dem.tree.raycast(S.minx,S.miny,S.maxx,S.maxy,n,o,m);if(D!=null)return D}return null}_createFBO(){const n=this.painter.context,o=n.gl,m=this.drapeBufferSize;n.activeTexture.set(o.TEXTURE0);const v=new a.T(n,{width:m[0],height:m[1],data:null},o.RGBA8);v.bind(o.LINEAR,o.CLAMP_TO_EDGE);const S=n.createFramebuffer(m[0],m[1],!0,null);return S.colorAttachment.set(v.texture),S.depthAttachment=new Sl(n,S.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=n.createRenderbuffer(n.gl.DEPTH_STENCIL,m[0],m[1]),this._stencilRef=0,S.depthAttachment.set(this._sharedDepthStencil),n.clear({stencil:0})):S.depthAttachment.set(this._sharedDepthStencil),n.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax),{fb:S,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const n in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[n].hasTransition())return!0;return this._style.order.some(n=>{const o=this._style._mergedLayers[n],m=o.isHidden(this.painter.transform.zoom);return o.type==="hillshade"||o.type==="custom"?!m&&o.shouldRedrape():!m&&o.hasTransition()})}_clearLineLayersFromRenderCache(){let n=!1;for(const m of this._style.getSources())if(m instanceof xd){n=!0;break}if(!n)return;const o={};for(let m=0;m<this._style.order.length;++m){const v=this._style._mergedLayers[this._style.order[m]],S=this._style.getLayerSourceCache(v);if(S&&!o[S.id]&&!v.isHidden(this.painter.transform.zoom)&&v.type==="line"&&v.widthExpression()instanceof a.a9){o[S.id]=!0;for(const D of this.proxyCoords){const L=this.proxyToSource[D.key][S.id];if(L)for(const O of L)this._clearRenderCacheForTile(S.id,O)}}}}_clearRasterLayersFromRenderCache(){let n=!1;for(const m in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[m]._source instanceof vd){n=!0;break}if(!n)return;const o={};for(let m=0;m<this._style.order.length;++m){const v=this._style._mergedLayers[this._style.order[m]],S=this._style.getLayerSourceCache(v);if(!S||o[S.id]||v.isHidden(this.painter.transform.zoom)||v.type!=="raster")continue;const D=v.paint.get("raster-fade-duration");for(const L of this.proxyCoords){const O=this.proxyToSource[L.key][S.id];if(O)for(const U of O){const q=Hu(S.getTile(U),S.findLoadedParent(U,0),S,this.painter.transform,D);(q.opacity!==1||q.mix!==0)&&this._clearRenderCacheForTile(S.id,U)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const n=this._style.order,o=n.length;if(o===0)return;const m=[];this._pendingGroundEffectLayers=[];let v,S=0,D=this._style._mergedLayers[n[S]];for(;!this._style.isLayerDraped(D)&&D.isHidden(this.painter.transform.zoom)&&++S<o;)D=this._style._mergedLayers[n[S]];for(;S<o;++S){const L=this._style._mergedLayers[n[S]];L.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(L)?v===void 0&&(v=S):(L.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(S),v!==void 0&&(m.push({start:v,end:S-1}),v=void 0)))}if(v!==void 0&&m.push({start:v,end:S-1}),m.length!==0){const L=m[m.length-1];this._pendingGroundEffectLayers.every(O=>O>L.end)||a.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=m}_setupRenderCache(n){const o=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,o.renderCache.length>o.renderCachePool.length){const D=Object.values(o.proxyCachedFBO);o.proxyCachedFBO={};for(let L=0;L<D.length;++L){const O=Object.values(D[L]);o.renderCachePool.push(...O)}}return}this._clearRasterLayersFromRenderCache();const m=this.proxyCoords,v=this._tilesDirty;for(let D=m.length-1;D>=0;D--){const L=m[D];if(o.getTileByID(L.key),o.proxyCachedFBO[L.key]!==void 0){const O=n[L.key],U=this.proxyToSource[L.key];let q=0;for(const Z in U){const X=U[Z],ne=O[Z];if(!ne||ne.length!==X.length||X.some((ge,he)=>ge!==ne[he]||v[Z]&&v[Z].hasOwnProperty(ge.key))){q=-1;break}++q}for(const Z in o.proxyCachedFBO[L.key])o.renderCache[o.proxyCachedFBO[L.key][Z]].dirty=q<0||q!==Object.values(O).length}}const S=[...this._drapedRenderBatches];S.sort((D,L)=>L.end-L.start-(D.end-D.start));for(const D of S)for(const L of m){if(o.proxyCachedFBO[L.key])continue;let O=o.renderCachePool.pop();O===void 0&&o.renderCache.length<50&&(O=o.renderCache.length,o.renderCache.push(this._createFBO())),O!==void 0&&(o.proxyCachedFBO[L.key]={},o.proxyCachedFBO[L.key][D.start]=O,o.renderCache[O].dirty=!0)}this._tilesDirty={}}_setupStencil(n,o,m,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const S=this.painter.context,D=S.gl;if(o.length<=1)return void(this._overlapStencilType=!1);let L;if(m.isTileClipped())L=o.length,this._overlapStencilMode.test={func:D.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(o[0].overscaledZ>o[o.length-1].overscaledZ))return void(this._overlapStencilType=!1);L=1,this._overlapStencilMode.test={func:D.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+L>255&&(S.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=L,this._overlapStencilMode.ref=this._stencilRef,m.isTileClipped()&&this._renderTileClippingMasks(o,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(n){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[n.key]),this._overlapStencilMode):en.disabled}_renderTileClippingMasks(n,o){const m=this.painter,v=this.painter.context,S=v.gl;m._tileClippingMaskIDs={},v.setColorMode(dn.disabled),v.setDepthMode(Rr.disabled);const D=m.getOrCreateProgram("clippingMask");for(const L of n){const O=m._tileClippingMaskIDs[L.key]=--o;D.draw(m,S.TRIANGLES,Rr.disabled,new en({func:S.ALWAYS,mask:0},O,255,S.KEEP,S.KEEP,S.REPLACE),dn.disabled,Gr.disabled,xi(L.projMatrix),"$clipping",m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}}pointCoordinate(n){const o=this.painter.transform;if(n.x<0||n.x>o.width||n.y<0||n.y>o.height)return null;const m=[n.x,n.y,1,1];a.ab.vec4.transformMat4(m,m,o.pixelMatrixInverse),a.ab.vec4.scale(m,m,1/m[3]),m[0]/=o.worldSize,m[1]/=o.worldSize;const v=o._camera.position,S=a.bH(1,o.center.lat),D=[v[0],v[1],v[2]/S,0],L=a.ab.vec3.subtract([],m.slice(0,3),D);a.ab.vec3.normalize(L,L);const O=this.raycast(D,L,this._exaggeration);return O!==null&&O?(a.ab.vec3.scaleAndAdd(D,D,L,O),D[3]=D[2],D[2]*=S,D):null}_setupProxiedCoordsForOrtho(n,o,m){if(n.getSource()instanceof a.aJ)return this._setupProxiedCoordsForImageSource(n,o,m);this._findCoveringTileCache[n.id]=this._findCoveringTileCache[n.id]||{};const v=this.proxiedCoords[n.id]=[],S=this.proxyCoords;for(let O=0;O<S.length;O++){const U=S[O],q=this._findTileCoveringTileID(U,n);if(q){const Z=this._createProxiedId(U,q,m[U.key]&&m[U.key][n.id]);v.push(Z),this.proxyToSource[U.key][n.id]=[Z]}}let D=!1;const L=new Set;for(let O=0;O<o.length;O++){const U=n.getTile(o[O]);if(!U||!U.hasData())continue;const q=this._findTileCoveringTileID(U.tileID,this.proxySourceCache);if(q&&q.tileID.canonical.z!==U.tileID.canonical.z){const Z=this.proxyToSource[q.tileID.key][n.id],X=this._createProxiedId(q.tileID,U,m[q.tileID.key]&&m[q.tileID.key][n.id]);Z?Z.splice(Z.length-1,0,X):this.proxyToSource[q.tileID.key][n.id]=[X];const ne=this.proxyToSource[q.tileID.key][n.id];L.has(ne)||L.add(ne),v.push(X),D=!0}}if(this._sourceTilesOverlap[n.id]=D,D&&this._debugParams.sortTilesHiZFirst)for(const O of L)O.sort((U,q)=>q.overscaledZ-U.overscaledZ)}_setupProxiedCoordsForImageSource(n,o,m){if(!n.getSource().loaded())return;const v=this.proxiedCoords[n.id]=[],S=this.proxyCoords,D=n.getSource(),L=D.tileID;if(!L)return;const O=new a.P(L.x,L.y)._div(1<<L.z),U=D.coordinates.map(a.aa.fromLngLat).reduce((Z,X)=>(Z.min.x=Math.min(Z.min.x,X.x-O.x),Z.min.y=Math.min(Z.min.y,X.y-O.y),Z.max.x=Math.max(Z.max.x,X.x-O.x),Z.max.y=Math.max(Z.max.y,X.y-O.y),Z),{min:new a.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new a.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),q=(Z,X)=>{const ne=Z.wrap+Z.canonical.x/(1<<Z.canonical.z),ge=Z.canonical.y/(1<<Z.canonical.z),he=a.ag/(1<<Z.canonical.z),ve=X.wrap+X.canonical.x/(1<<X.canonical.z),we=X.canonical.y/(1<<X.canonical.z);return ne+he<ve+U.min.x||ne>ve+U.max.x||ge+he<we+U.min.y||ge>we+U.max.y};for(let Z=0;Z<S.length;Z++){const X=S[Z];for(let ne=0;ne<o.length;ne++){const ge=n.getTile(o[ne]);if(!ge||!ge.hasData()||q(X,ge.tileID))continue;const he=this._createProxiedId(X,ge,m[X.key]&&m[X.key][n.id]),ve=this.proxyToSource[X.key][n.id];ve?ve.push(he):this.proxyToSource[X.key][n.id]=[he],v.push(he)}}}_createProxiedId(n,o,m){let v=this.orthoMatrix;if(m){const S=m.find(D=>D.key===o.tileID.key);if(S)return S}if(o.tileID.key!==n.key){const S=n.canonical.z-o.tileID.canonical.z;let D,L,O;v=a.ab.mat4.create();const U=o.tileID.wrap-n.wrap<<n.overscaledZ;S>0?(D=a.ag>>S,L=D*((o.tileID.canonical.x<<S)-n.canonical.x+U),O=D*((o.tileID.canonical.y<<S)-n.canonical.y)):(D=a.ag<<-S,L=a.ag*(o.tileID.canonical.x-(n.canonical.x+U<<-S)),O=a.ag*(o.tileID.canonical.y-(n.canonical.y<<-S))),a.ab.mat4.ortho(v,0,D,0,D,0,1),a.ab.mat4.translate(v,v,[L,O,0])}return new hp(o.tileID,n.key,v)}_findTileCoveringTileID(n,o){let m=o.getTile(n);if(m&&m.hasData())return m;const v=this._findCoveringTileCache[o.id],S=v[n.key];if(m=S?o.getTileByID(S):null,m&&m.hasData()||S===null)return m;let D=m?m.tileID:n,L=D.overscaledZ;const O=o.getSource().minzoom,U=[];if(!S){const Z=o.getSource().maxzoom;if(n.canonical.z>=Z){const X=n.canonical.z-Z;o.getSource().reparseOverscaled?(L=Math.max(n.canonical.z+2,o.transform.tileZoom),D=new a.aG(L,n.wrap,Z,n.canonical.x>>X,n.canonical.y>>X)):X!==0&&(L=Z,D=new a.aG(L,n.wrap,Z,n.canonical.x>>X,n.canonical.y>>X))}D.key!==n.key&&(U.push(D.key),m=o.getTile(D))}const q=Z=>{U.forEach(X=>{v[X]=Z}),U.length=0};for(L-=1;L>=O&&(!m||!m.hasData());L--){m&&q(m.tileID.key);const Z=D.calculateScaledKey(L);if(m=o.getTileByID(Z),m&&m.hasData())break;const X=v[Z];if(X===null)break;X===void 0?U.push(Z):m=o.getTileByID(X)}return q(m?m.tileID.key:null),m&&m.hasData()?m:null}findDEMTileFor(n){return this.enabled?this._findTileCoveringTileID(n,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(n,o){let m=this._tilesDirty[n];m||(m=this._tilesDirty[n]={}),m[o.key]=!0}}function Ii(p,n,o){const m=function(L,O,U){const q=a.ab.vec3.dot(O,L),Z=a.ab.vec3.dot(U,[.2126,.7152,.0722]),X=(ge,he,ve)=>(1-ve)*ge+ve*he,ne=X(1-.3*Math.min(Z,1),1,Math.min(q+1,1));return X(.92,1,Math.asin(a.aw(O[2],-1,1))/Math.PI+.5)*ne}(p,[0,0,1],n),v=[0,0,0];a.ab.vec3.scale(v,o.slice(0,3),m);const S=[0,0,0];a.ab.vec3.scale(S,n.slice(0,3),p[2]);const D=[0,0,0];return a.ab.vec3.add(D,v,S),a.cf(D)}const qu=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Vh=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","model","symbol"];class Bd{static cacheKey(n,o,m,v){let S=`${o}${v?v.cacheKey:""}`;for(const D of m)n.usedDefines.includes(D)&&(S+=`/${D}`);return S}constructor(n,o,m,v,S,D){const L=n.gl;this.program=L.createProgram(),this.configuration=v,this.name=o,this.fixedDefines=[...D];const O=v?v.getBinderAttributes():[],U=(m.staticAttributes||[]).concat(O);let q=v?v.defines():[];q=q.concat(D.map(ve=>`#define ${ve}`));const Z=`#version 300 es
`;let X=Z+q.concat("precision mediump float;",Lh,Xl.fragmentSource).join(`
`);for(const ve of m.fragmentIncludes)X+=`
${Ri[ve]}`;X+=`
${m.fragmentSource}`;let ne=Z+q.concat("precision highp float;",Lh,Xl.vertexSource).join(`
`);for(const ve of m.vertexIncludes)ne+=`
${Ri[ve]}`;this.forceManualRenderingForInstanceIDShaders=n.forceManualRenderingForInstanceIDShaders&&m.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(ne+=`
uniform int u_instanceID;
`),ne+=`
${m.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(ne=ne.replaceAll("gl_InstanceID","u_instanceID"));const ge=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);L.shaderSource(ge,X),L.compileShader(ge),L.attachShader(this.program,ge);const he=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())this.failedToCreate=!0;else{L.shaderSource(he,ne),L.compileShader(he),L.attachShader(this.program,he),this.attributes={},this.numAttributes=U.length;for(let ve=0;ve<this.numAttributes;ve++)if(U[ve]){const we=U[ve].startsWith("a_")?U[ve]:`a_${U[ve]}`;L.bindAttribLocation(this.program,ve,we),this.attributes[we]=ve}L.linkProgram(this.program),L.deleteShader(he),L.deleteShader(ge),this.fixedUniforms=S(n),this.binderUniforms=v?v.getUniforms(n):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(ve=>({u_instanceID:new a.bN(ve)}))(n)),(D.includes("TERRAIN")||o.indexOf("symbol")!==-1||o.indexOf("circle")!==-1)&&(this.terrainUniforms=(ve=>({u_dem:new a.bN(ve),u_dem_prev:new a.bN(ve),u_dem_tl:new a.bK(ve),u_dem_scale:new a.bM(ve),u_dem_tl_prev:new a.bK(ve),u_dem_scale_prev:new a.bM(ve),u_dem_size:new a.bM(ve),u_dem_lerp:new a.bM(ve),u_exaggeration:new a.bM(ve),u_depth:new a.bN(ve),u_depth_size_inv:new a.bK(ve),u_depth_range_unpack:new a.bK(ve),u_occluder_half_size:new a.bM(ve),u_occlusion_depth_offset:new a.bM(ve),u_meter_to_dem:new a.bM(ve),u_label_plane_matrix_inv:new a.bJ(ve)}))(n)),D.includes("GLOBE")&&(this.globeUniforms=(ve=>({u_tile_tl_up:new a.bL(ve),u_tile_tr_up:new a.bL(ve),u_tile_br_up:new a.bL(ve),u_tile_bl_up:new a.bL(ve),u_tile_up_scale:new a.bM(ve)}))(n)),D.includes("FOG")&&(this.fogUniforms=(ve=>({u_fog_matrix:new a.bJ(ve),u_fog_range:new a.bK(ve),u_fog_color:new a.ca(ve),u_fog_horizon_blend:new a.bM(ve),u_fog_vertical_limit:new a.bK(ve),u_fog_temporal_offset:new a.bM(ve),u_frustum_tl:new a.bL(ve),u_frustum_tr:new a.bL(ve),u_frustum_br:new a.bL(ve),u_frustum_bl:new a.bL(ve),u_globe_pos:new a.bL(ve),u_globe_radius:new a.bM(ve),u_globe_transition:new a.bM(ve),u_is_globe:new a.bN(ve),u_viewport:new a.bK(ve)}))(n)),D.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(ve=>({u_cutoff_params:new a.ca(ve)}))(n)),D.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(ve=>({u_lighting_ambient_color:new a.bL(ve),u_lighting_directional_dir:new a.bL(ve),u_lighting_directional_color:new a.bL(ve),u_ground_radiance:new a.bL(ve)}))(n)),D.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(ve=>({u_light_matrix_0:new a.bJ(ve),u_light_matrix_1:new a.bJ(ve),u_fade_range:new a.bK(ve),u_shadow_normal_offset:new a.bL(ve),u_shadow_intensity:new a.bM(ve),u_shadow_texel_size:new a.bM(ve),u_shadow_map_resolution:new a.bM(ve),u_shadow_direction:new a.bL(ve),u_shadow_bias:new a.bL(ve),u_shadowmap_0:new a.bN(ve),u_shadowmap_1:new a.bN(ve)}))(n))}}setTerrainUniformValues(n,o){if(!this.terrainUniforms)return;const m=this.terrainUniforms;if(!this.failedToCreate){n.program.set(this.program);for(const v in o)m[v]&&m[v].set(this.program,v,o[v])}}setGlobeUniformValues(n,o){if(!this.globeUniforms)return;const m=this.globeUniforms;if(!this.failedToCreate){n.program.set(this.program);for(const v in o)m[v]&&m[v].set(this.program,v,o[v])}}setFogUniformValues(n,o){if(!this.fogUniforms)return;const m=this.fogUniforms;if(!this.failedToCreate){n.program.set(this.program);for(const v in o)m[v].set(this.program,v,o[v])}}setCutoffUniformValues(n,o){if(!this.cutoffUniforms)return;const m=this.cutoffUniforms;if(!this.failedToCreate){n.program.set(this.program);for(const v in o)m[v].set(this.program,v,o[v])}}setLightsUniformValues(n,o){if(!this.lightsUniforms)return;const m=this.lightsUniforms;if(!this.failedToCreate){n.program.set(this.program);for(const v in o)m[v].set(this.program,v,o[v])}}setShadowUniformValues(n,o){if(this.failedToCreate||!this.shadowUniforms)return;const m=this.shadowUniforms;n.program.set(this.program);for(const v in o)m[v].set(this.program,v,o[v])}_drawDebugWireframe(n,o,m,v,S,D,L,O,U,q){const Z=n.options.wireframe;if(Z.terrain===!1&&Z.layers2D===!1&&Z.layers3D===!1)return;const X=n.context;if(!(!(!Z.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!Z.layers2D||n._terrain&&n._terrain.renderingToTexture||!qu.includes(this.name))||!(!Z.layers3D||!Vh.includes(this.name))))return;const ne=X.gl,ge=n.wireframeDebugCache.getLinesFromTrianglesBuffer(n.frameCounter,S,X);if(!ge)return;const he=[...this.fixedDefines];he.push("DEBUG_WIREFRAME");const ve=n.getOrCreateProgram(this.name,{config:this.configuration,defines:he});X.program.set(ve.program);const we=(Fe,Ye,Ge)=>{if(Ye[Fe]&&Ge[Fe])for(const Ze in Ye[Fe])Ge[Fe][Ze]&&Ge[Fe][Ze].set(Ge.program,Ze,Ye[Fe][Ze].current)};U&&U.setUniforms(ve.program,X,ve.binderUniforms,L,{zoom:O}),we("fixedUniforms",this,ve),we("terrainUniforms",this,ve),we("globeUniforms",this,ve),we("fogUniforms",this,ve),we("lightsUniforms",this,ve),we("shadowUniforms",this,ve),ge.bind(),X.setColorMode(new dn([ne.ONE,ne.ONE_MINUS_SRC_ALPHA,ne.ZERO,ne.ONE],a.aj.transparent,[!0,!0,!0,!1])),X.setDepthMode(new Rr(o.func===ne.LESS?ne.LEQUAL:o.func,Rr.ReadOnly,o.range)),X.setStencilMode(en.disabled);const ze=3*D.primitiveLength*2,Oe=3*D.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const Fe=q||1;for(let Ye=0;Ye<Fe;++Ye)ve.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",Ye),ne.drawElements(ne.LINES,ze,ne.UNSIGNED_SHORT,Oe)}else q&&q>1?ne.drawElementsInstanced(ne.LINES,ze,ne.UNSIGNED_SHORT,Oe,q):ne.drawElements(ne.LINES,ze,ne.UNSIGNED_SHORT,Oe);S.bind(),X.program.set(this.program),X.setDepthMode(o),X.setStencilMode(m),X.setColorMode(v)}checkUniforms(n,o,m){if(this.fixedDefines.includes(o)){for(const v of Object.keys(m))if(!m[v].initialized)throw new Error(`Program '${this.name}', from draw '${n}': uniform ${v} not set but required by ${o} being defined`)}}draw(n,o,m,v,S,D,L,O,U,q,Z,X,ne,ge,he,ve){const we=n.context,ze=we.gl;if(this.failedToCreate)return;we.program.set(this.program),we.setDepthMode(m),we.setStencilMode(v),we.setColorMode(S),we.setCullFace(D);for(const Ye of Object.keys(this.fixedUniforms))this.fixedUniforms[Ye].set(this.program,Ye,L[Ye]);ge&&ge.setUniforms(this.program,we,this.binderUniforms,X,{zoom:ne});const Oe={[ze.POINTS]:1,[ze.LINES]:2,[ze.TRIANGLES]:3,[ze.LINE_STRIP]:1}[o];this.checkUniforms(O,"RENDER_SHADOWS",this.shadowUniforms);const Fe=ve&&ve>0?1:void 0;for(const Ye of Z.get()){const Ge=Ye.vaos||(Ye.vaos={});if((Ge[O]||(Ge[O]=new Ou)).bind(we,this,U,ge?ge.getPaintVertexBuffers():[],q,Ye.vertexOffset,he||[],Fe),this.forceManualRenderingForInstanceIDShaders){const Ze=ve||1;for(let We=0;We<Ze;++We)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",We),q?ze.drawElements(o,Ye.primitiveLength*Oe,ze.UNSIGNED_SHORT,Ye.primitiveOffset*Oe*2):ze.drawArrays(o,Ye.vertexOffset,Ye.vertexLength)}else ve&&ve>1?ze.drawElementsInstanced(o,Ye.primitiveLength*Oe,ze.UNSIGNED_SHORT,Ye.primitiveOffset*Oe*2,ve):q?ze.drawElements(o,Ye.primitiveLength*Oe,ze.UNSIGNED_SHORT,Ye.primitiveOffset*Oe*2):ze.drawArrays(o,Ye.vertexOffset,Ye.vertexLength);o===ze.TRIANGLES&&q&&this._drawDebugWireframe(n,m,v,S,q,Ye,X,ne,ge,ve)}}}function Uh(p,n){const o=Math.pow(2,n.tileID.overscaledZ),m=n.tileSize*Math.pow(2,p.transform.tileZoom)/o,v=m*(n.tileID.canonical.x+n.tileID.wrap*o),S=m*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture?n.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/a.ar(n,1,p.transform.tileZoom),u_pixel_coord_upper:[v>>16,S>>16],u_pixel_coord_lower:[65535&v,65535&S]}}const nc={terrain:0,flat:1},qc=a.ab.mat4.create(),fp=(p,n,o,m,v,S,D,L,O,U,q,Z,X,ne,ge,he,ve,we)=>{const ze=n.style.light,Oe=ze.properties.get("position"),Fe=[Oe.x,Oe.y,Oe.z],Ye=a.ab.mat3.create();ze.properties.get("anchor")==="viewport"&&(a.ab.mat3.fromRotation(Ye,-n.transform.angle),a.ab.vec3.transformMat3(Fe,Fe,Ye));const Ge=ze.properties.get("color"),Ze=n.transform,We={u_matrix:p,u_lightpos:Fe,u_lightintensity:ze.properties.get("intensity"),u_lightcolor:[Ge.r,Ge.g,Ge.b],u_vertical_gradient:+o,u_opacity:m,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:qc,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:nc[U],u_base_type:nc[q],u_ao:v,u_edge_radius:S,u_width_scale:D,u_flood_light_color:ge,u_vertical_scale:he,u_flood_light_intensity:ve,u_ground_shadow_factor:we};return Ze.projection.name==="globe"&&(We.u_tile_id=[L.canonical.x,L.canonical.y,1<<L.canonical.z],We.u_zoom_transition=Z,We.u_inv_rot_matrix=ne,We.u_merc_center=X,We.u_up_dir=Ze.projection.upVector(new a.bT(0,0,0),X[0]*a.ag,X[1]*a.ag),We.u_height_lift=O),We},Nd=(p,n,o,m,v,S)=>({u_matrix:p,u_edge_radius:n,u_width_scale:o,u_vertical_scale:m,u_height_type:nc[v],u_base_type:nc[S]}),Um=(p,n,o,m,v,S,D,L,O,U,q,Z,X,ne,ge,he,ve)=>{const we=fp(p,n,o,m,v,S,D,L,U,q,Z,X,ne,ge,he,ve,1,[0,0,0]),ze={u_height_factor:-Math.pow(2,L.overscaledZ)/O.tileSize/8};return a.l(we,Uh(n,O),ze)},Wu=(p,n)=>({u_matrix:p,u_emissive_strength:n}),ac=(p,n,o,m)=>a.l(Wu(p,n),Uh(o,m)),jd=(p,n,o)=>({u_matrix:p,u_world:o,u_emissive_strength:n}),Ku=(p,n,o,m,v)=>a.l(ac(p,n,o,m),{u_world:v}),pp=(p,n,o,m)=>{const v=a.ag/o.tileSize;return{u_matrix:p,u_camera_to_center_distance:n.getCameraToCenterDistance(m),u_extrude_scale:[n.pixelsToGLUnits[0]/v,n.pixelsToGLUnits[1]/v]}},Zu=(p,n,o=1)=>({u_matrix:p,u_color:n.toRenderColor(null),u_overlay:0,u_overlay_scale:o}),D0=a.ab.mat4.create(),ic=(p,n,o,m,v,S,D)=>{const L=p.transform,O=L.projection.name==="globe",U=O?a.cN(L.zoom,n.canonical)*L._pixelsPerMercatorPixel:a.ar(o,1,S),q={u_matrix:n.projMatrix,u_extrude_scale:U,u_intensity:D,u_inv_rot_matrix:D0,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(O){q.u_inv_rot_matrix=m,q.u_merc_center=v,q.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],q.u_zoom_transition=a.ae(L.zoom);const Z=v[0]*a.ag,X=v[1]*a.ag;q.u_up_dir=L.projection.upVector(new a.bT(0,0,0),Z,X)}return q};function Xu(p,[n,o,m,v],[S,D]){if(S===D)return[0,0,0,0];const L=255*(p-1)/(p*(D-S));return[n*L,o*L,m*L,v*L]}function Tr(p,n,[o,m]){return o===m?0:.5/p+(n-o)*(p-1)/(p*(m-o))}const Od=(p,n,o,m,v,S,D,L,O,U,q,Z,X,ne,ge,he,ve,we,ze,Oe,Fe)=>({u_matrix:p,u_normalize_matrix:n,u_globe_matrix:o,u_merc_matrix:m,u_grid_matrix:v,u_tl_parent:S,u_scale_parent:U,u_fade_t:q.mix,u_opacity:q.opacity*Z.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Z.paint.get("raster-brightness-min"),u_brightness_high:Z.paint.get("raster-brightness-max"),u_saturation_factor:a.cO(Z.paint.get("raster-saturation")),u_contrast_factor:a.cP(Z.paint.get("raster-contrast")),u_spin_weights:Gm(Z.paint.get("raster-hue-rotate")),u_perspective_transform:X,u_raster_elevation:ne,u_zoom_transition:D,u_merc_center:L,u_cutoff_params:O,u_colorization_mix:Xu(a.cQ,he,we),u_colorization_offset:Tr(a.cQ,ve,we),u_color_ramp:ge,u_texture_offset:[Oe/(ze+2*Oe),ze/(ze+2*Oe)],u_texture_res:[ze+2*Oe,ze+2*Oe],u_emissive_strength:Fe});function Gm(p){p*=Math.PI/180;const n=Math.sin(p),o=Math.cos(p);return[(2*o+1)/3,(-Math.sqrt(3)*n-o+1)/3,(Math.sqrt(3)*n-o+1)/3]}const Ss=.05,Wc=(p,n,o,m,v,S,D,L,O,U,q,Z)=>({u_matrix:p,u_normalize_matrix:n,u_globe_matrix:o,u_merc_matrix:m,u_grid_matrix:v,u_tl_parent:S,u_scale_parent:U,u_fade_t:q.mix,u_opacity:q.opacity,u_image0:0,u_image1:1,u_raster_elevation:Z,u_zoom_transition:D,u_merc_center:L,u_cutoff_params:O}),Ir=(p,n,o,m,v,S,D,L,O,U)=>({u_particle_texture:p,u_particle_texture_side_len:n,u_tile_offset:o,u_velocity:m,u_color_ramp:S,u_velocity_res:v,u_max_speed:D,u_uv_offset:L,u_data_scale:[255*O[0],255*O[1]],u_data_offset:U,u_particle_pos_scale:1.1,u_particle_pos_offset:[Ss,Ss]}),Tl=(p,n,o,m,v,S,D,L,O,U)=>({u_particle_texture:p,u_particle_texture_side_len:n,u_velocity:o,u_velocity_res:m,u_max_speed:v,u_speed_factor:S,u_reset_rate:D,u_rand_seed:Math.random(),u_uv_offset:L,u_data_scale:[255*O[0],255*O[1]],u_data_offset:U,u_particle_pos_scale:1.1,u_particle_pos_offset:[Ss,Ss]}),mp=a.ab.mat4.create(),gp=(p,n,o,m,v,S,D,L,O,U,q,Z,X,ne,ge,he,ve,we,ze,Oe,Fe,Ye)=>{const Ge=v.transform,Ze={u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:Ge.getCameraToCenterDistance(ze),u_rotate_symbol:+o,u_aspect_ratio:Ge.width/Ge.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:D,u_coord_matrix:L,u_is_text:+U,u_elevation_from_sea:O?1:0,u_pitch_with_map:+m,u_texsize:q,u_texsize_icon:Z,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:mp,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:mp,u_up_vector:[0,-1,0],u_color_adj_mat:Oe,u_icon_transition:Fe||0,u_gamma_scale:m?v.transform.getCameraToCenterDistance(ze)*Math.cos(v.terrain?0:v.transform._pitch):1,u_device_pixel_ratio:a.q.devicePixelRatio,u_is_halo:1,u_scale_factor:Ye||1};return ze.name==="globe"&&(Ze.u_tile_id=[ne.canonical.x,ne.canonical.y,1<<ne.canonical.z],Ze.u_zoom_transition=ge,Ze.u_inv_rot_matrix=ve,Ze.u_merc_center=he,Ze.u_camera_forward=Ge._camera.forward(),Ze.u_ecef_origin=a.cR(Ge.globeMatrix,ne.toUnwrapped()),Ze.u_tile_matrix=Float32Array.from(Ge.globeMatrix),Ze.u_up_vector=we),Ze},rl=(p,n,o,m)=>({u_matrix:p,u_emissive_strength:n,u_opacity:o,u_color:m}),El=(p,n,o,m,v,S,D,L,O)=>a.l(function(U,q,Z,X,ne,ge){const{width:he,height:ve}=X.imageManager.getPixelSize(q),we=Math.pow(2,ge.tileID.overscaledZ),ze=ge.tileSize*Math.pow(2,X.transform.tileZoom)/we,Oe=ze*(ge.tileID.canonical.x+ge.tileID.wrap*we),Fe=ze*ge.tileID.canonical.y;return{u_image:0,u_pattern_tl:Z.tl,u_pattern_br:Z.br,u_texsize:[he,ve],u_pattern_size:Z.displaySize,u_pattern_units_to_pixels:ne?[X.transform.width,-1*X.transform.height]:[1/a.ar(ge,1,X.transform.tileZoom),1/a.ar(ge,1,X.transform.tileZoom)],u_pixel_coord_upper:[Oe>>16,Fe>>16],u_pixel_coord_lower:[65535&Oe,65535&Fe]}}(0,S,D,m,L,O),{u_matrix:p,u_emissive_strength:n,u_opacity:o}),Kc=new Float32Array(a.ab.mat4.identity([])),Gh=(p,n,o,m,v,S,D,L,O,U,q,Z,X,ne=[0,0,0],ge)=>{const he=v.style.light,ve=he.properties.get("position"),we=[-ve.x,-ve.y,ve.z],ze=a.ab.mat3.create();he.properties.get("anchor")==="viewport"&&(a.ab.mat3.fromRotation(ze,-v.transform.angle),a.ab.vec3.transformMat3(we,we,ze));const Oe=q.alphaMode==="MASK",Fe=he.properties.get("color").toRenderColor(null),Ye=X.paint.get("model-ambient-occlusion-intensity"),Ge=X.paint.get("model-color").constantOr(a.aj.white).toRenderColor(null),Ze=X.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:p,u_lighting_matrix:n,u_normal_matrix:o,u_node_matrix:m||Kc,u_lightpos:we,u_lightintensity:he.properties.get("intensity"),u_lightcolor:[Fe.r,Fe.g,Fe.b],u_camera_pos:ne,u_opacity:S,u_baseTextureIsAlpha:0,u_alphaMask:+Oe,u_alphaCutoff:q.alphaCutoff,u_baseColorFactor:[D.r,D.g,D.b,D.a],u_emissiveFactor:[L[0],L[1],L[2],1],u_metallicFactor:O,u_roughnessFactor:U,u_baseColorTexture:Oi.BaseColor,u_metallicRoughnessTexture:Oi.MetallicRoughness,u_normalTexture:Oi.Normal,u_occlusionTexture:Oi.Occlusion,u_emissionTexture:Oi.Emission,u_lutTexture:Oi.LUT,u_color_mix:[Ge.r,Ge.g,Ge.b,Ze],u_aoIntensity:Ye,u_emissive_strength:Z,u_occlusionTextureTransform:ge||[0,0,0,0]}},yp=(p,n=Kc,o=Kc)=>({u_matrix:p,u_instance:n,u_node_matrix:o}),Yu={fillExtrusion:p=>({u_matrix:new a.bJ(p),u_lightpos:new a.bL(p),u_lightintensity:new a.bM(p),u_lightcolor:new a.bL(p),u_vertical_gradient:new a.bM(p),u_opacity:new a.bM(p),u_edge_radius:new a.bM(p),u_width_scale:new a.bM(p),u_ao:new a.bK(p),u_height_type:new a.bN(p),u_base_type:new a.bN(p),u_tile_id:new a.bL(p),u_zoom_transition:new a.bM(p),u_inv_rot_matrix:new a.bJ(p),u_merc_center:new a.bK(p),u_up_dir:new a.bL(p),u_height_lift:new a.bM(p),u_flood_light_color:new a.bL(p),u_vertical_scale:new a.bM(p),u_flood_light_intensity:new a.bM(p),u_ground_shadow_factor:new a.bL(p)}),fillExtrusionDepth:p=>({u_matrix:new a.bJ(p),u_edge_radius:new a.bM(p),u_width_scale:new a.bM(p),u_vertical_scale:new a.bM(p),u_height_type:new a.bN(p),u_base_type:new a.bN(p)}),fillExtrusionPattern:p=>({u_matrix:new a.bJ(p),u_lightpos:new a.bL(p),u_lightintensity:new a.bM(p),u_lightcolor:new a.bL(p),u_vertical_gradient:new a.bM(p),u_height_factor:new a.bM(p),u_edge_radius:new a.bM(p),u_width_scale:new a.bM(p),u_ao:new a.bK(p),u_height_type:new a.bN(p),u_base_type:new a.bN(p),u_tile_id:new a.bL(p),u_zoom_transition:new a.bM(p),u_inv_rot_matrix:new a.bJ(p),u_merc_center:new a.bK(p),u_up_dir:new a.bL(p),u_height_lift:new a.bM(p),u_image:new a.bN(p),u_texsize:new a.bK(p),u_pixel_coord_upper:new a.bK(p),u_pixel_coord_lower:new a.bK(p),u_tile_units_to_pixels:new a.bM(p),u_opacity:new a.bM(p)}),fillExtrusionGroundEffect:p=>({u_matrix:new a.bJ(p),u_opacity:new a.bM(p),u_ao_pass:new a.bM(p),u_meter_to_tile:new a.bM(p),u_ao:new a.bK(p),u_flood_light_intensity:new a.bM(p),u_flood_light_color:new a.bL(p),u_attenuation:new a.bM(p),u_edge_radius:new a.bM(p),u_fb:new a.bN(p),u_fb_size:new a.bM(p),u_dynamic_offset:new a.bM(p)}),fill:p=>({u_matrix:new a.bJ(p),u_emissive_strength:new a.bM(p)}),fillPattern:p=>({u_matrix:new a.bJ(p),u_emissive_strength:new a.bM(p),u_image:new a.bN(p),u_texsize:new a.bK(p),u_pixel_coord_upper:new a.bK(p),u_pixel_coord_lower:new a.bK(p),u_tile_units_to_pixels:new a.bM(p)}),fillOutline:p=>({u_matrix:new a.bJ(p),u_emissive_strength:new a.bM(p),u_world:new a.bK(p)}),fillOutlinePattern:p=>({u_matrix:new a.bJ(p),u_emissive_strength:new a.bM(p),u_world:new a.bK(p),u_image:new a.bN(p),u_texsize:new a.bK(p),u_pixel_coord_upper:new a.bK(p),u_pixel_coord_lower:new a.bK(p),u_tile_units_to_pixels:new a.bM(p)}),circle:a.cS,collisionBox:p=>({u_matrix:new a.bJ(p),u_camera_to_center_distance:new a.bM(p),u_extrude_scale:new a.bK(p)}),collisionCircle:p=>({u_matrix:new a.bJ(p),u_inv_matrix:new a.bJ(p),u_camera_to_center_distance:new a.bM(p),u_viewport_size:new a.bK(p)}),debug:p=>({u_color:new a.cz(p),u_matrix:new a.bJ(p),u_overlay:new a.bN(p),u_overlay_scale:new a.bM(p)}),clippingMask:p=>({u_matrix:new a.bJ(p)}),heatmap:p=>({u_extrude_scale:new a.bM(p),u_intensity:new a.bM(p),u_matrix:new a.bJ(p),u_inv_rot_matrix:new a.bJ(p),u_merc_center:new a.bK(p),u_tile_id:new a.bL(p),u_zoom_transition:new a.bM(p),u_up_dir:new a.bL(p)}),heatmapTexture:p=>({u_image:new a.bN(p),u_color_ramp:new a.bN(p),u_opacity:new a.bM(p)}),hillshade:p=>({u_matrix:new a.bJ(p),u_image:new a.bN(p),u_latrange:new a.bK(p),u_light:new a.bK(p),u_shadow:new a.cz(p),u_highlight:new a.cz(p),u_emissive_strength:new a.bM(p),u_accent:new a.cz(p)}),hillshadePrepare:p=>({u_matrix:new a.bJ(p),u_image:new a.bN(p),u_dimension:new a.bK(p),u_zoom:new a.bM(p)}),line:a.cT,linePattern:a.cU,raster:p=>({u_matrix:new a.bJ(p),u_normalize_matrix:new a.bJ(p),u_globe_matrix:new a.bJ(p),u_merc_matrix:new a.bJ(p),u_grid_matrix:new a.cA(p),u_tl_parent:new a.bK(p),u_scale_parent:new a.bM(p),u_fade_t:new a.bM(p),u_opacity:new a.bM(p),u_image0:new a.bN(p),u_image1:new a.bN(p),u_brightness_low:new a.bM(p),u_brightness_high:new a.bM(p),u_saturation_factor:new a.bM(p),u_contrast_factor:new a.bM(p),u_spin_weights:new a.bL(p),u_perspective_transform:new a.bK(p),u_raster_elevation:new a.bM(p),u_zoom_transition:new a.bM(p),u_merc_center:new a.bK(p),u_cutoff_params:new a.ca(p),u_colorization_mix:new a.ca(p),u_colorization_offset:new a.bM(p),u_color_ramp:new a.bN(p),u_texture_offset:new a.bK(p),u_texture_res:new a.bK(p),u_emissive_strength:new a.bM(p)}),rasterParticle:p=>({u_matrix:new a.bJ(p),u_normalize_matrix:new a.bJ(p),u_globe_matrix:new a.bJ(p),u_merc_matrix:new a.bJ(p),u_grid_matrix:new a.cA(p),u_tl_parent:new a.bK(p),u_scale_parent:new a.bM(p),u_fade_t:new a.bM(p),u_opacity:new a.bM(p),u_image0:new a.bN(p),u_image1:new a.bN(p),u_raster_elevation:new a.bM(p),u_zoom_transition:new a.bM(p),u_merc_center:new a.bK(p),u_cutoff_params:new a.ca(p)}),rasterParticleTexture:p=>({u_texture:new a.bN(p),u_opacity:new a.bM(p)}),rasterParticleDraw:p=>({u_particle_texture:new a.bN(p),u_particle_texture_side_len:new a.bM(p),u_tile_offset:new a.bK(p),u_velocity:new a.bN(p),u_color_ramp:new a.bN(p),u_velocity_res:new a.bK(p),u_max_speed:new a.bM(p),u_uv_offset:new a.bK(p),u_data_scale:new a.bK(p),u_data_offset:new a.bM(p),u_particle_pos_scale:new a.bM(p),u_particle_pos_offset:new a.bK(p)}),rasterParticleUpdate:p=>({u_particle_texture:new a.bN(p),u_particle_texture_side_len:new a.bM(p),u_velocity:new a.bN(p),u_velocity_res:new a.bK(p),u_max_speed:new a.bM(p),u_speed_factor:new a.bM(p),u_reset_rate:new a.bM(p),u_rand_seed:new a.bM(p),u_uv_offset:new a.bK(p),u_data_scale:new a.bK(p),u_data_offset:new a.bM(p),u_particle_pos_scale:new a.bM(p),u_particle_pos_offset:new a.bK(p)}),symbol:p=>({u_is_size_zoom_constant:new a.bN(p),u_is_size_feature_constant:new a.bN(p),u_size_t:new a.bM(p),u_size:new a.bM(p),u_camera_to_center_distance:new a.bM(p),u_rotate_symbol:new a.bN(p),u_aspect_ratio:new a.bM(p),u_fade_change:new a.bM(p),u_matrix:new a.bJ(p),u_label_plane_matrix:new a.bJ(p),u_coord_matrix:new a.bJ(p),u_is_text:new a.bN(p),u_elevation_from_sea:new a.bN(p),u_pitch_with_map:new a.bN(p),u_texsize:new a.bK(p),u_texsize_icon:new a.bK(p),u_texture:new a.bN(p),u_texture_icon:new a.bN(p),u_gamma_scale:new a.bM(p),u_device_pixel_ratio:new a.bM(p),u_tile_id:new a.bL(p),u_zoom_transition:new a.bM(p),u_inv_rot_matrix:new a.bJ(p),u_merc_center:new a.bK(p),u_camera_forward:new a.bL(p),u_tile_matrix:new a.bJ(p),u_up_vector:new a.bL(p),u_ecef_origin:new a.bL(p),u_is_halo:new a.bN(p),u_icon_transition:new a.bM(p),u_color_adj_mat:new a.bJ(p),u_scale_factor:new a.bM(p)}),background:p=>({u_matrix:new a.bJ(p),u_emissive_strength:new a.bM(p),u_opacity:new a.bM(p),u_color:new a.cz(p)}),backgroundPattern:p=>({u_matrix:new a.bJ(p),u_emissive_strength:new a.bM(p),u_opacity:new a.bM(p),u_image:new a.bN(p),u_pattern_tl:new a.bK(p),u_pattern_br:new a.bK(p),u_texsize:new a.bK(p),u_pattern_size:new a.bK(p),u_pixel_coord_upper:new a.bK(p),u_pixel_coord_lower:new a.bK(p),u_pattern_units_to_pixels:new a.bK(p)}),terrainRaster:p=>({u_matrix:new a.bJ(p),u_image0:new a.bN(p),u_skirt_height:new a.bM(p),u_ground_shadow_factor:new a.bL(p)}),skybox:p=>({u_matrix:new a.bJ(p),u_sun_direction:new a.bL(p),u_cubemap:new a.bN(p),u_opacity:new a.bM(p),u_temporal_offset:new a.bM(p)}),skyboxGradient:p=>({u_matrix:new a.bJ(p),u_color_ramp:new a.bN(p),u_center_direction:new a.bL(p),u_radius:new a.bM(p),u_opacity:new a.bM(p),u_temporal_offset:new a.bM(p)}),skyboxCapture:p=>({u_matrix_3f:new a.cA(p),u_sun_direction:new a.bL(p),u_sun_intensity:new a.bM(p),u_color_tint_r:new a.ca(p),u_color_tint_m:new a.ca(p),u_luminance:new a.bM(p)}),globeRaster:p=>({u_proj_matrix:new a.bJ(p),u_globe_matrix:new a.bJ(p),u_normalize_matrix:new a.bJ(p),u_merc_matrix:new a.bJ(p),u_zoom_transition:new a.bM(p),u_merc_center:new a.bK(p),u_image0:new a.bN(p),u_grid_matrix:new a.cA(p),u_skirt_height:new a.bM(p),u_far_z_cutoff:new a.bM(p),u_frustum_tl:new a.bL(p),u_frustum_tr:new a.bL(p),u_frustum_br:new a.bL(p),u_frustum_bl:new a.bL(p),u_globe_pos:new a.bL(p),u_globe_radius:new a.bM(p),u_viewport:new a.bK(p)}),globeAtmosphere:p=>({u_frustum_tl:new a.bL(p),u_frustum_tr:new a.bL(p),u_frustum_br:new a.bL(p),u_frustum_bl:new a.bL(p),u_horizon:new a.bM(p),u_transition:new a.bM(p),u_fadeout_range:new a.bM(p),u_color:new a.ca(p),u_high_color:new a.ca(p),u_space_color:new a.ca(p),u_temporal_offset:new a.bM(p),u_horizon_angle:new a.bM(p)}),model:p=>({u_matrix:new a.bJ(p),u_lighting_matrix:new a.bJ(p),u_normal_matrix:new a.bJ(p),u_node_matrix:new a.bJ(p),u_lightpos:new a.bL(p),u_lightintensity:new a.bM(p),u_lightcolor:new a.bL(p),u_camera_pos:new a.bL(p),u_opacity:new a.bM(p),u_baseColorFactor:new a.ca(p),u_emissiveFactor:new a.ca(p),u_metallicFactor:new a.bM(p),u_roughnessFactor:new a.bM(p),u_baseTextureIsAlpha:new a.bN(p),u_alphaMask:new a.bN(p),u_alphaCutoff:new a.bM(p),u_baseColorTexture:new a.bN(p),u_metallicRoughnessTexture:new a.bN(p),u_normalTexture:new a.bN(p),u_occlusionTexture:new a.bN(p),u_emissionTexture:new a.bN(p),u_lutTexture:new a.bN(p),u_color_mix:new a.ca(p),u_aoIntensity:new a.bM(p),u_emissive_strength:new a.bM(p),u_occlusionTextureTransform:new a.ca(p)}),modelDepth:p=>({u_matrix:new a.bJ(p),u_instance:new a.bJ(p),u_node_matrix:new a.bJ(p)}),groundShadow:p=>({u_matrix:new a.bJ(p),u_ground_shadow_factor:new a.bL(p)}),stars:p=>({u_matrix:new a.bJ(p),u_up:new a.bL(p),u_right:new a.bL(p),u_intensity_multiplier:new a.bM(p)}),snowParticle:p=>({u_modelview:new a.bJ(p),u_projection:new a.bJ(p),u_time:new a.bM(p),u_cam_pos:new a.bL(p),u_velocityConeAperture:new a.bM(p),u_velocity:new a.bM(p),u_horizontalOscillationRadius:new a.bM(p),u_horizontalOscillationRate:new a.bM(p),u_boxSize:new a.bM(p),u_billboardSize:new a.bM(p),u_simpleShapeParameters:new a.bK(p),u_screenSize:new a.bK(p),u_thinningCenterPos:new a.bK(p),u_thinningShape:new a.bL(p),u_thinningAffectedRatio:new a.bM(p),u_thinningParticleOffset:new a.bM(p),u_particleColor:new a.ca(p),u_direction:new a.bL(p)}),rainParticle:p=>({u_modelview:new a.bJ(p),u_projection:new a.bJ(p),u_time:new a.bM(p),u_cam_pos:new a.bL(p),u_texScreen:new a.bN(p),u_velocityConeAperture:new a.bM(p),u_velocity:new a.bM(p),u_boxSize:new a.bM(p),u_rainDropletSize:new a.bK(p),u_distortionStrength:new a.bM(p),u_rainDirection:new a.bL(p),u_color:new a.ca(p),u_screenSize:new a.bK(p),u_thinningCenterPos:new a.bK(p),u_thinningShape:new a.bL(p),u_thinningAffectedRatio:new a.bM(p),u_thinningParticleOffset:new a.bM(p),u_shapeDirectionalPower:new a.bM(p),u_shapeNormalPower:new a.bM(p),u_mode:new a.bM(p)}),vignette:p=>({u_vignetteShape:new a.bL(p),u_vignetteColor:new a.ca(p)}),occlusion:p=>({u_matrix:new a.bJ(p),u_anchorPos:new a.bL(p),u_screenSizePx:new a.bK(p),u_occluderSizePx:new a.bK(p),u_color:new a.ca(p)})};class Hs{constructor(n,o,m,v){this.id=Hs.uniqueIdxCounter,Hs.uniqueIdxCounter++,this.context=n;const S=n.gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||v||o.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){this.id=Hs.uniqueIdxCounter,Hs.uniqueIdxCounter++;const o=this.context.gl;this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Hs.uniqueIdxCounter=0;const xp={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vp{constructor(n,o,m,v,S,D){this.length=o.length,this.attributes=m,this.itemSize=o.bytesPerElement,this.dynamicDraw=v,this.instanceCount=D,this.context=n;const L=n.gl;this.buffer=L.createBuffer(),n.bindVertexBuffer.set(this.buffer),L.bufferData(L.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||S||o.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,o){for(let m=0;m<this.attributes.length;m++){const v=o.attributes[this.attributes[m].name];v!==void 0&&n.enableVertexAttribArray(v)}}setVertexAttribPointers(n,o,m){for(let v=0;v<this.attributes.length;v++){const S=this.attributes[v],D=o.attributes[S.name];D!==void 0&&n.vertexAttribPointer(D,S.components,n[xp[S.type]],!1,this.itemSize,S.offset+this.itemSize*(m||0))}}setVertexAttribDivisor(n,o,m){for(let v=0;v<this.attributes.length;v++){const S=o.attributes[this.attributes[v].name];S!==void 0&&this.instanceCount&&this.instanceCount>0&&n.vertexAttribDivisor(S,m)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zi{constructor(n,o,m,v,S){this.context=n,this.width=o,this.height=m;const D=this.framebuffer=n.gl.createFramebuffer();v&&(this.colorAttachment=new Uu(n,D)),S&&(this.depthAttachmentType=S,this.depthAttachment=S==="renderbuffer"?new Fh(n,D):new Ro(n,D))}destroy(){const n=this.context.gl;if(this.colorAttachment){const o=this.colorAttachment.get();o&&n.deleteTexture(o)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const o=this.depthAttachment.get();o&&n.deleteRenderbuffer(o)}else{const o=this.depthAttachment.get();o&&n.deleteTexture(o)}n.deleteFramebuffer(this.framebuffer)}}class nl{constructor(n,o){this.gl=n,this.clearColor=new jm(this),this.clearDepth=new Yl(this),this.clearStencil=new cp(this),this.colorMask=new Rd(this),this.depthMask=new Jl(this),this.stencilMask=new Bh(this),this.stencilFunc=new up(this),this.stencilOp=new Fu(this),this.stencilTest=new Id(this),this.depthRange=new Uc(this),this.depthTest=new Gc(this),this.depthFunc=new ro(this),this.blend=new Ya(this),this.blendFunc=new Ql(this),this.blendColor=new Ao(this),this.blendEquation=new ko(this),this.cullFace=new ec(this),this.cullFaceSide=new dp(this),this.frontFace=new zd(this),this.program=new Nh(this),this.activeTexture=new as(this),this.viewport=new Ja(this),this.bindFramebuffer=new Ta(this),this.bindRenderbuffer=new Hc(this),this.bindTexture=new Is(this),this.bindVertexBuffer=new Om(this),this.bindElementBuffer=new Vu(this),this.bindVertexArrayOES=new T0(this),this.pixelStoreUnpack=new E0(this),this.pixelStoreUnpackPremultiplyAlpha=new jh(this),this.pixelStoreUnpackFlipY=new Oh(this),this.options=o?{...o}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=n.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=n.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=n.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=o&&!!o.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=n.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),this.maxPointSize=n.getParameter(n.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,o,m){return new Hs(this,n,o,m)}createVertexBuffer(n,o,m,v,S){return new vp(this,n,o,m,v,S)}createRenderbuffer(n,o,m){const v=this.gl,S=v.createRenderbuffer();return this.bindRenderbuffer.set(S),v.renderbufferStorage(v.RENDERBUFFER,n,o,m),this.bindRenderbuffer.set(null),S}createFramebuffer(n,o,m,v){return new zi(this,n,o,m,v)}clear({color:n,depth:o,stencil:m,colorMask:v}){const S=this.gl;let D=0;n&&(D|=S.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set(v||[!0,!0,!0,!0])),o!==void 0&&(D|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),m!==void 0&&(D|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),S.clear(D)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){a.bn(n.blendFunction,dn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor),n.blendEquation?this.blendEquation.set(n.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(n.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let Fd;function Vd(p,n,o,m,v,S,D){const L=p.context,O=L.gl,U=p.transform,q=p.getOrCreateProgram("collisionBox"),Z=[];let X=0,ne=0;for(let Fe=0;Fe<m.length;Fe++){const Ye=m[Fe],Ge=n.getTile(Ye),Ze=Ge.getBucket(o);if(!Ze)continue;const We=ri(Ye,Ze,U);let nt=We;v[0]===0&&v[1]===0||(nt=p.translatePosMatrix(We,Ge,v,S));const at=D?Ze.textCollisionBox:Ze.iconCollisionBox,Ct=Ze.collisionCircleArray;if(Ct.length>0){const _t=a.ab.mat4.create(),lt=nt;a.ab.mat4.mul(_t,Ze.placementInvProjMatrix,U.glCoordMatrix),a.ab.mat4.mul(_t,_t,Ze.placementViewportMatrix),Z.push({circleArray:Ct,circleOffset:ne,transform:lt,invTransform:_t,projection:Ze.getProjection()}),X+=Ct.length/4,ne=X}at&&(p.terrain&&p.terrain.setupElevationDraw(Ge,q),q.draw(p,O.LINES,Rr.disabled,en.disabled,p.colorModeForRenderPass(),Gr.disabled,pp(nt,U,Ge,Ze.getProjection()),o.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,null,U.zoom,null,[at.collisionVertexBuffer,at.collisionVertexBufferExt]))}if(!D||!Z.length)return;const ge=p.getOrCreateProgram("collisionCircle"),he=new a.cV;he.resize(4*X),he._trim();let ve=0;for(const Fe of Z)for(let Ye=0;Ye<Fe.circleArray.length/4;Ye++){const Ge=4*Ye,Ze=Fe.circleArray[Ge+0],We=Fe.circleArray[Ge+1],nt=Fe.circleArray[Ge+2],at=Fe.circleArray[Ge+3];he.emplace(ve++,Ze,We,nt,at,0),he.emplace(ve++,Ze,We,nt,at,1),he.emplace(ve++,Ze,We,nt,at,2),he.emplace(ve++,Ze,We,nt,at,3)}(!Fd||Fd.length<2*X)&&(Fd=function(Fe){const Ye=2*Fe,Ge=new a.aU;Ge.resize(Ye),Ge._trim();for(let Ze=0;Ze<Ye;Ze++){const We=6*Ze;Ge.uint16[We+0]=4*Ze+0,Ge.uint16[We+1]=4*Ze+1,Ge.uint16[We+2]=4*Ze+2,Ge.uint16[We+3]=4*Ze+2,Ge.uint16[We+4]=4*Ze+3,Ge.uint16[We+5]=4*Ze+0}return Ge}(X));const we=L.createIndexBuffer(Fd,!0),ze=L.createVertexBuffer(he,a.cW.members,!0);for(const Fe of Z){const Ye={u_matrix:Fe.transform,u_inv_matrix:Fe.invTransform,u_camera_to_center_distance:(Oe=U).getCameraToCenterDistance(Fe.projection),u_viewport_size:[Oe.width,Oe.height]};ge.draw(p,O.TRIANGLES,Rr.disabled,en.disabled,p.colorModeForRenderPass(),Gr.disabled,Ye,o.id,ze,we,a.b7.simpleSegment(0,2*Fe.circleOffset,Fe.circleArray.length,Fe.circleArray.length/2),null,U.zoom)}var Oe;ze.destroy(),we.destroy()}const Zc=a.ab.mat4.create();function al(p){const n=p._camera.getWorldToCamera(p.worldSize,1),o=a.ab.mat4.multiply([],n,p.globeMatrix);a.ab.mat4.invert(o,o);const m=[0,0,0],v=[0,1,0,0];return a.ab.vec4.transformMat4(v,v,o),m[0]=v[0],m[1]=v[1],m[2]=v[2],a.ab.vec3.normalize(m,m),m}function ta({width:p,height:n,anchor:o,textOffset:m,textScale:v},S){const{horizontalAlign:D,verticalAlign:L}=a.bD(o),O=-(D-.5)*p,U=-(L-.5)*n,q=a.bC(o,m);return new a.P((O/v+q[0])*S,(U/v+q[1])*S)}function na(p,n,o,m,v,S,D,L,O,U,q){const Z=p.text.placedSymbolArray,X=p.text.dynamicLayoutVertexArray,ne=p.icon.dynamicLayoutVertexArray,ge={},he=p.getProjection(),ve=Ph(L,he,S),we=S.elevation,ze=he.upVectorScale(L.canonical,S.center.lat,S.worldSize).metersToTile;X.clear();for(let Oe=0;Oe<Z.length;Oe++){const Fe=Z.get(Oe),{tileAnchorX:Ye,tileAnchorY:Ge,numGlyphs:Ze}=Fe,We=Fe.hidden||!Fe.crossTileID||p.allowVerticalPlacement&&!Fe.placedOrientation?null:m[Fe.crossTileID];if(We){let nt=0,at=0,Ct=0;if(we){const Mt=we?we.getAtTileOffset(L,Ye,Ge):0,[Qt,Ot,zt]=he.upVector(L.canonical,Ye,Ge);nt=Mt*Qt*ze,at=Mt*Ot*ze,Ct=Mt*zt*ze}let[_t,lt,mt,Nt]=ea(Fe.projectedAnchorX+nt,Fe.projectedAnchorY+at,Fe.projectedAnchorZ+Ct,o?ve:D);const qt=Dh(S.getCameraToCenterDistance(he),Nt);let Zt=v.evaluateSizeForFeature(p.textSizeData,U,Fe)*qt/a.bw;o&&(Zt*=p.tilePixelRatio/O);const xt=ta(We,Zt);o?({x:_t,y:lt,z:mt}=he.projectTilePoint(Ye+xt.x,Ge+xt.y,L.canonical),[_t,lt,mt]=ea(_t+nt,lt+at,mt+Ct,D)):(n&&xt._rotate(-S.angle),_t+=xt.x,lt+=xt.y,mt=0);const Ft=p.allowVerticalPlacement&&Fe.placedOrientation===a.bq.vertical?Math.PI/2:0;for(let Mt=0;Mt<Ze;Mt++)a.bt(X,_t,lt,mt,Ft);q&&Fe.associatedIconIndex>=0&&(ge[Fe.associatedIconIndex]={x:_t,y:lt,z:mt,angle:Ft})}else Ru(Ze,X)}if(q){ne.clear();const Oe=p.icon.placedSymbolArray;for(let Fe=0;Fe<Oe.length;Fe++){const Ye=Oe.get(Fe),{numGlyphs:Ge}=Ye,Ze=ge[Fe];if(Ye.hidden||!Ze)Ru(Ge,ne);else{const{x:We,y:nt,z:at,angle:Ct}=Ze;for(let _t=0;_t<Ge;_t++)a.bt(ne,We,nt,at,Ct)}}p.icon.dynamicLayoutVertexBuffer.updateData(ne)}p.text.dynamicLayoutVertexBuffer.updateData(X)}function Cn(p,n,o,m,v,S,D={}){const L=o.paint.get("icon-translate"),O=o.paint.get("text-translate"),U=o.paint.get("icon-translate-anchor"),q=o.paint.get("text-translate-anchor"),Z=o.layout.get("icon-rotation-alignment"),X=o.layout.get("text-rotation-alignment"),ne=o.layout.get("icon-pitch-alignment"),ge=o.layout.get("text-pitch-alignment"),he=o.layout.get("icon-keep-upright"),ve=o.layout.get("text-keep-upright"),we=o.paint.get("icon-color-saturation"),ze=o.paint.get("icon-color-contrast"),Oe=o.paint.get("icon-color-brightness-min"),Fe=o.paint.get("icon-color-brightness-max"),Ye=o.layout.get("symbol-elevation-reference")==="sea",Ge=p.context,Ze=Ge.gl,We=p.transform,nt=Z==="map",at=X==="map",Ct=ne==="map",_t=ge==="map",lt=o.layout.get("symbol-sort-key").constantOr(1)!==void 0;let mt=!1;const Nt=p.depthModeForSublayer(0,Rr.ReadOnly),qt=[a.at(We.center.lng),a.aA(We.center.lat)],Zt=o.layout.get("text-variable-anchor"),xt=We.projection.name==="globe",Ft=[],Mt=[0,-1,0];for(const Qt of m){const Ot=n.getTile(Qt),zt=Ot.getBucket(o);if(!zt||zt.projection.name==="mercator"&&xt||zt.fullyClipped)continue;const dr=zt.projection.name==="globe",rr=dr?a.ae(We.zoom):0,yr=Ph(Qt,zt.getProjection(),We),_r=We.calculatePixelsToTileUnitsMatrix(Ot),Kr=Zt&&zt.hasTextData(),Ar=zt.hasIconTextFit()&&Kr&&zt.hasIconData(),zr=zt.getProjection().createInversionMatrix(We,Qt.canonical),Hr=Vn=>{We.depthOcclusionForSymbolsAndCircles&&(o.hasInitialOcclusionOpacityProperties||p.terrain)&&(Vn.push("DEPTH_D24"),Vn.push("DEPTH_OCCLUSION"))},mn=()=>{const Vn=nt&&o.layout.get("symbol-placement")!=="point",Zr=[];Hr(Zr);const xn=Vn||Ar,vn=o.paint.get("icon-image-cross-fade").constantOr(0);p.terrainRenderModeElevated()&&Ct&&Zr.push("PITCH_WITH_MAP_TERRAIN"),dr&&(Zr.push("PROJECTION_GLOBE_VIEW"),xn&&Zr.push("PROJECTED_POS_ON_VIEWPORT")),vn>0&&Zr.push("ICON_TRANSITION"),zt.icon.zOffsetVertexBuffer&&Zr.push("Z_OFFSET"),we===0&&ze===0&&Oe===0&&Fe===1||Zr.push("COLOR_ADJUSTMENT"),zt.sdfIcons&&Zr.push("RENDER_SDF");const Mn=zt.icon.programConfigurations.get(o.id),Sn=p.getOrCreateProgram("symbol",{config:Mn,defines:Zr}),Ea=Ot.imageAtlasTexture?Ot.imageAtlasTexture.size:[0,0],ni=zt.iconSizeData,Ca=a.bp(ni,We.zoom),ia=Ct||We.pitch!==0,Hn=Eo(yr,Ot.tileID.canonical,Ct,nt,We,zt.getProjection(),_r),qr=Pa(yr,Ot.tileID.canonical,Ct,nt,We,zt.getProjection(),_r),va=p.translatePosMatrix(qr,Ot,L,U,!0),Qa=p.translatePosMatrix(yr,Ot,L,U),aa=xn?Zc:Hn,za=nt&&!Ct&&!Vn;let Yi=Mt;!xt&&!We.mercatorFromTransition||nt||(Yi=al(We));const Ji=dr?Yi:Mt,fi=o.getColorAdjustmentMatrix(we,ze,Oe,Fe),Qi=gp(ni.kind,Ca,za,Ct,p,Qa,aa,va,Ye,!1,Ea,[0,0],!0,Qt,rr,qt,zr,Ji,zt.getProjection(),fi,vn),ho=Ot.imageAtlasTexture?Ot.imageAtlasTexture:null,us=o.layout.get("icon-size").constantOr(0)!==1||zt.iconsNeedLinear,ll=zt.sdfIcons||p.options.rotating||p.options.zooming||us||ia?Ze.LINEAR:Ze.NEAREST,ds=zt.sdfIcons&&o.paint.get("icon-halo-width").constantOr(1)!==0,li=p.terrain&&Ct&&Vn?a.ab.mat4.invert(a.ab.mat4.create(),Hn):Zc;if(Vn&&zt.icon){const Bo=We.elevation,vc=Bo?Bo.getAtTileOffsetFunc(Qt,We.center.lat,We.worldSize,zt.getProjection()):null,_c=zc(yr,Ot.tileID.canonical,Ct,nt,We,zt.getProjection(),_r);Zf(zt,yr,p,!1,_c,qr,Ct,he,vc,Qt)}return{program:Sn,buffers:zt.icon,uniformValues:Qi,atlasTexture:ho,atlasTextureIcon:null,atlasInterpolation:ll,atlasInterpolationIcon:null,isSDF:zt.sdfIcons,hasHalo:ds,tile:Ot,labelPlaneMatrixInv:li}},ln=()=>{const Vn=at&&o.layout.get("symbol-placement")!=="point",Zr=[],xn=Vn||Zt||Ar;p.terrainRenderModeElevated()&&_t&&Zr.push("PITCH_WITH_MAP_TERRAIN"),dr&&(Zr.push("PROJECTION_GLOBE_VIEW"),xn&&Zr.push("PROJECTED_POS_ON_VIEWPORT")),zt.text.zOffsetVertexBuffer&&Zr.push("Z_OFFSET"),zt.iconsInText&&Zr.push("RENDER_TEXT_AND_SYMBOL"),Zr.push("RENDER_SDF"),Hr(Zr);const vn=zt.text.programConfigurations.get(o.id),Mn=p.getOrCreateProgram("symbol",{config:vn,defines:Zr});let Sn,Ea=[0,0],ni=null;const Ca=zt.textSizeData;zt.iconsInText&&(Ea=Ot.imageAtlasTexture?Ot.imageAtlasTexture.size:[0,0],ni=Ot.imageAtlasTexture?Ot.imageAtlasTexture:null,Sn=_t||We.pitch!==0||p.options.rotating||p.options.zooming||Ca.kind==="composite"||Ca.kind==="camera"?Ze.LINEAR:Ze.NEAREST);const ia=Ot.glyphAtlasTexture?Ot.glyphAtlasTexture.size:[0,0],Hn=o.layout.get("text-size-scale-range"),qr=a.aw(p.scaleFactor,Hn[0],Hn[1]),va=a.bp(Ca,We.zoom,qr),Qa=Eo(yr,Ot.tileID.canonical,_t,at,We,zt.getProjection(),_r),aa=Pa(yr,Ot.tileID.canonical,_t,at,We,zt.getProjection(),_r),za=p.translatePosMatrix(aa,Ot,O,q,!0),Yi=p.translatePosMatrix(yr,Ot,O,q),Ji=xn?Zc:Qa,fi=at&&!_t&&!Vn;let Qi=Mt;!xt&&!We.mercatorFromTransition||at||(Qi=al(We));const ho=gp(Ca.kind,va,fi,_t,p,Yi,Ji,za,Ye,!0,ia,Ea,!0,Qt,rr,qt,zr,dr?Qi:Mt,zt.getProjection(),null,null,qr),us=Ot.glyphAtlasTexture?Ot.glyphAtlasTexture:null,ll=Ze.LINEAR,ds=o.paint.get("text-halo-width").constantOr(1)!==0,li=p.terrain&&_t&&Vn?a.ab.mat4.invert(a.ab.mat4.create(),Qa):Zc;if(Vn&&zt.text){const Bo=We.elevation,vc=Bo?Bo.getAtTileOffsetFunc(Qt,We.center.lat,We.worldSize,zt.getProjection()):null,_c=zc(yr,Ot.tileID.canonical,_t,at,We,zt.getProjection(),_r);Zf(zt,yr,p,!0,_c,aa,_t,ve,vc,Qt)}return{program:Mn,buffers:zt.text,uniformValues:ho,atlasTexture:us,atlasTextureIcon:ni,atlasInterpolation:ll,atlasInterpolationIcon:Sn,isSDF:!0,hasHalo:ds,tile:Ot,labelPlaneMatrixInv:li}},pa=zt.icon.segments.get().length,ma=zt.text.segments.get().length,Gn=pa&&!D.onlyText?mn():null,Kn=ma&&!D.onlyIcons?ln():null,sn=o.paint.get("icon-opacity").constantOr(1),jr=o.paint.get("text-opacity").constantOr(1);if(lt&&zt.canOverlap){mt=!0;const Vn=sn&&!D.onlyText?zt.icon.segments.get():[],Zr=jr&&!D.onlyIcons?zt.text.segments.get():[];for(const xn of Vn)Ft.push({segments:new a.b7([xn]),sortKey:xn.sortKey,state:Gn});for(const xn of Zr)Ft.push({segments:new a.b7([xn]),sortKey:xn.sortKey,state:Kn})}else D.onlyText||Ft.push({segments:sn?zt.icon.segments:new a.b7([]),sortKey:0,state:Gn}),D.onlyIcons||Ft.push({segments:jr?zt.text.segments:new a.b7([]),sortKey:0,state:Kn})}mt&&Ft.sort((Qt,Ot)=>Qt.sortKey-Ot.sortKey);for(const Qt of Ft){const Ot=Qt.state;if(Ot)if(p.terrain?p.terrain.setupElevationDraw(Ot.tile,Ot.program,{useDepthForOcclusion:We.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Ot.labelPlaneMatrixInv}):p.setupDepthForOcclusion(We.depthOcclusionForSymbolsAndCircles,Ot.program),Ge.activeTexture.set(Ze.TEXTURE0),Ot.atlasTexture&&Ot.atlasTexture.bind(Ot.atlasInterpolation,Ze.CLAMP_TO_EDGE,!0),Ot.atlasTextureIcon&&(Ge.activeTexture.set(Ze.TEXTURE1),Ot.atlasTextureIcon&&Ot.atlasTextureIcon.bind(Ot.atlasInterpolationIcon,Ze.CLAMP_TO_EDGE,!0)),p.uploadCommonLightUniforms(p.context,Ot.program),Ot.hasHalo){const zt=Ot.uniformValues;zt.u_is_halo=1,sc(Ot.buffers,Qt.segments,o,p,Ot.program,Nt,v,S,zt,2),zt.u_is_halo=0}else{if(Ot.isSDF){const zt=Ot.uniformValues;Ot.hasHalo&&(zt.u_is_halo=1,sc(Ot.buffers,Qt.segments,o,p,Ot.program,Nt,v,S,zt,1)),zt.u_is_halo=0}sc(Ot.buffers,Qt.segments,o,p,Ot.program,Nt,v,S,Ot.uniformValues,1)}}}function sc(p,n,o,m,v,S,D,L,O,U){const q=[p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer,p.iconTransitioningVertexBuffer,p.globeExtVertexBuffer,p.zOffsetVertexBuffer];v.draw(m,m.context.gl.TRIANGLES,S,D,L,Gr.disabled,O,o.id,p.layoutVertexBuffer,p.indexBuffer,n,o.paint,m.transform.zoom,p.programConfigurations.get(o.id),q,U)}function oc(p,n,o,m,v,S,D){const L=p.context.gl,O=o.paint.get("fill-pattern"),U=o.is3D(),q=U?p.stencilModeFor3D():en.disabled,Z=O&&O.constantOr(1);let X,ne,ge,he,ve;D?(ne=Z&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=L.LINES):(ne=Z?"fillPattern":"fill",X=L.TRIANGLES);for(const we of m){const ze=n.getTile(we);if(Z&&!ze.patternsLoaded())continue;const Oe=ze.getBucket(o);if(!Oe)continue;p.prepareDrawTile();const Fe=Oe.programConfigurations.get(o.id),Ye=p.isTileAffectedByFog(we),Ge=p.getOrCreateProgram(ne,{config:Fe,overrideFog:Ye});Z&&(p.context.activeTexture.set(L.TEXTURE0),ze.imageAtlasTexture&&ze.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Fe.updatePaintBuffers());const Ze=O.constantOr(null);if(Ze&&ze.imageAtlas){const at=ze.imageAtlas,Ct=a.A.from(Ze),_t=at.patternPositions[Ct.getSerializedPrimary()];_t&&Fe.setConstantPatternPositions(_t)}const We=p.translatePosMatrix(we.projMatrix,ze,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor")),nt=o.paint.get("fill-emissive-strength");if(D){he=Oe.indexBuffer2,ve=Oe.segments2;const at=p.terrain&&p.terrain.renderingToTexture?p.terrain.drapeBufferSize:[L.drawingBufferWidth,L.drawingBufferHeight];ge=ne==="fillOutlinePattern"&&Z?Ku(We,nt,p,ze,at):jd(We,nt,at)}else he=Oe.indexBuffer,ve=Oe.segments,ge=Z?ac(We,nt,p,ze):Wu(We,nt);p.uploadCommonUniforms(p.context,Ge,we.toUnwrapped()),Ge.draw(p,X,v,U?q:p.stencilModeForClipping(we),S,Gr.disabled,ge,o.id,Oe.layoutVertexBuffer,he,ve,o.paint,p.transform.zoom,Fe,void 0)}}function il(p,n,o,m,v,S,D,L){o.resetLayerRenderingStats(p);const O=p.context,U=O.gl,q=p.transform,Z=o.paint.get("fill-extrusion-pattern"),X=Z.constantOr(1),ne=o.paint.get("fill-extrusion-opacity"),ge=p.style.enable3dLights(),he=o.paint.get(ge&&!X?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),ve=[o.paint.get("fill-extrusion-ambient-occlusion-intensity"),he],we=o.layout.get("fill-extrusion-edge-radius"),ze=we>0&&!o.paint.get("fill-extrusion-rounded-roof"),Oe=ze?0:we,Fe=q.projection.name==="globe"?a.d3():0,Ye=q.projection.name==="globe",Ge=Ye?a.ae(q.zoom):0,Ze=[a.at(q.center.lng),a.aA(q.center.lat)],We=o.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",nt=o.paint.get("fill-extrusion-flood-light-color").toRenderColor(We?null:o.lut).toArray01().slice(0,3),at=o.paint.get("fill-extrusion-flood-light-intensity"),Ct=o.paint.get("fill-extrusion-vertical-scale"),_t=o.paint.get("fill-extrusion-line-width").constantOr(1)!==0,lt=o.paint.get("fill-extrusion-height-alignment"),mt=o.paint.get("fill-extrusion-base-alignment"),Nt=bl(p,o.paint.get("fill-extrusion-cutoff-fade-range")),qt=[];let Zt;Ye&&qt.push("PROJECTION_GLOBE_VIEW"),ve[0]>0&&qt.push("FAUX_AO"),ze&&qt.push("ZERO_ROOF_RADIUS"),L&&qt.push("HAS_CENTROID"),at>0&&qt.push("FLOOD_LIGHT"),Nt.shouldRenderCutoff&&qt.push("RENDER_CUTOFF"),_t&&qt.push("RENDER_WALL_MODE");const xt=p.renderPass==="shadow",Ft=p.shadowRenderer,Mt=xt&&!!Ft;p.shadowRenderer&&(p.shadowRenderer.useNormalOffset=!0);let Qt=[0,0,0];if(Ft){const dr=p.style.directionalLight,rr=p.style.ambientLight;dr&&rr&&(Qt=wl(p.style,dr,rr)),xt||(qt.push("RENDER_SHADOWS","DEPTH_TEXTURE"),Ft.useNormalOffset&&qt.push("NORMAL_OFFSET")),Zt=qt.concat(["SHADOWS_SINGLE_CASCADE"])}const Ot=Mt?"fillExtrusionDepth":X?"fillExtrusionPattern":"fillExtrusion",zt=o.getLayerRenderingStats();for(const dr of m){const rr=n.getTile(dr),yr=rr.getBucket(o);if(!yr||yr.projection.name!==q.projection.name)continue;let _r=!1;Ft&&(_r=Ft.getMaxCascadeForTile(dr.toUnwrapped())===0);const Kr=p.isTileAffectedByFog(dr),Ar=yr.programConfigurations.get(o.id),zr=p.getOrCreateProgram(Ot,{config:Ar,defines:_r?Zt:qt,overrideFog:Kr});if(p.terrain&&p.terrain.setupElevationDraw(rr,zr,{useMeterToDem:!0}),!yr.centroidVertexBuffer){const Kn=zr.attributes.a_centroid_pos;Kn!==void 0&&U.vertexAttrib2f(Kn,0,0)}!xt&&Ft&&Ft.setupShadows(rr.tileID.toUnwrapped(),zr,"vector-tile",rr.tileID.overscaledZ),X&&(p.context.activeTexture.set(U.TEXTURE0),rr.imageAtlasTexture&&rr.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),Ar.updatePaintBuffers());const Hr=Z.constantOr(null);if(Hr&&rr.imageAtlas){const Kn=rr.imageAtlas,sn=a.A.from(Hr),jr=Kn.patternPositions[sn.getSerializedPrimary()];jr&&Ar.setConstantPatternPositions(jr)}const mn=o.paint.get("fill-extrusion-vertical-gradient"),ln=1/yr.tileToMeter;let pa;if(xt&&Ft){if(tr(rr.tileID,yr,p))continue;const Kn=Ft.calculateShadowPassMatrixFromTile(rr.tileID.toUnwrapped());pa=Nd(Kn,Oe,ln,Ct,lt,mt)}else{const Kn=p.translatePosMatrix(dr.expandedProjMatrix,rr,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),sn=q.projection.createInversionMatrix(q,dr.canonical);pa=X?Um(Kn,p,mn,ne,ve,Oe,ln,dr,rr,Fe,lt,mt,Ge,Ze,sn,nt,Ct):fp(Kn,p,mn,ne,ve,Oe,ln,dr,Fe,lt,mt,Ge,Ze,sn,nt,Ct,at,Qt)}p.uploadCommonUniforms(O,zr,dr.toUnwrapped(),null,Nt);let ma=yr.segments;if(q.projection.name==="mercator"&&!xt&&(ma=yr.getVisibleSegments(rr.tileID,p.terrain,p.transform.getFrustum(0)),!ma.get().length))continue;if(zt)if(xt)for(const Kn of ma.get())zt.numRenderedVerticesInShadowPass+=Kn.primitiveLength;else for(const Kn of ma.get())zt.numRenderedVerticesInTransparentPass+=Kn.primitiveLength;const Gn=[];(p.terrain||L)&&Gn.push(yr.centroidVertexBuffer),Ye&&Gn.push(yr.layoutVertexExtBuffer),_t&&Gn.push(yr.wallVertexBuffer),zr.draw(p,O.gl.TRIANGLES,v,S,D,Gr.backCCW,pa,o.id,yr.layoutVertexBuffer,yr.indexBuffer,ma,o.paint,p.transform.zoom,Ar,Gn)}p.shadowRenderer&&(p.shadowRenderer.useNormalOffset=!1)}function Cl(p,n,o,m,v,S,D,L,O,U,q,Z,X,ne,ge,he,ve,we,ze){const Oe=p.context,Fe=Oe.gl,Ye=p.transform,Ge=p.transform.zoom,Ze=[],We=bl(p,o.paint.get("fill-extrusion-cutoff-fade-range"));U==="clear"?(Ze.push("CLEAR_SUBPASS"),ze&&(Ze.push("CLEAR_FROM_TEXTURE"),Oe.activeTexture.set(Fe.TEXTURE0),ze.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE))):U==="sdf"&&Ze.push("SDF_SUBPASS"),ve&&Ze.push("HAS_CENTROID"),We.shouldRenderCutoff&&Ze.push("RENDER_CUTOFF");const nt=o.layout.get("fill-extrusion-edge-radius"),at=(Ct,_t,lt,mt,Nt)=>{const qt=_t.programConfigurations.get(o.id),Zt=p.isTileAffectedByFog(Ct),xt=p.getOrCreateProgram("fillExtrusionGroundEffect",{config:qt,defines:Ze,overrideFog:Zt}),Ft=((Qt,Ot,zt,dr,rr,yr,_r,Kr,Ar,zr,Hr)=>({u_matrix:Ot,u_opacity:zt,u_ao_pass:dr?1:0,u_meter_to_tile:rr,u_ao:yr,u_flood_light_intensity:_r,u_flood_light_color:Kr,u_attenuation:Ar,u_edge_radius:zr,u_fb:0,u_fb_size:Hr,u_dynamic_offset:1}))(0,mt,q,O,Nt,[Z,X*Nt],ne,ge,he,Ge>=17?0:nt*Nt,ze?ze.size[0]:0),Mt=[];ve&&Mt.push(_t.hiddenByLandmarkVertexBuffer),p.uploadCommonUniforms(Oe,xt,Ct.toUnwrapped(),null,We),xt.draw(p,Oe.gl.TRIANGLES,v,S,D,L,Ft,o.id,_t.vertexBuffer,_t.indexBuffer,lt,o.paint,Ge,qt,Mt)};for(const Ct of m){const _t=n.getTile(Ct),lt=_t.getBucket(o);if(!lt||lt.projection.name!==Ye.projection.name||!lt.groundEffect||lt.groundEffect&&!lt.groundEffect.hasData())continue;const mt=lt.groundEffect,Nt=1/lt.tileToMeter;{const qt=p.translatePosMatrix(Ct.projMatrix,_t,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),Zt=mt.getDefaultSegment();at(Ct,mt,Zt,qt,Nt)}if(we)for(let qt=0;qt<4;qt++){const Zt=a.d4[qt](Ct),xt=n.getTile(Zt);if(!xt)continue;const Ft=xt.getBucket(o);if(!Ft||Ft.projection.name!==Ye.projection.name||!Ft.groundEffect||Ft.groundEffect&&!Ft.groundEffect.hasData())continue;const Mt=Ft.groundEffect;let Qt,Ot;qt===0?(Qt=[-a.ag,0,0],Ot=1):qt===1?(Qt=[a.ag,0,0],Ot=0):qt===2?(Qt=[0,-a.ag,0],Ot=3):(Qt=[0,a.ag,0],Ot=2);const zt=Mt.regionSegments[Ot];if(!zt)continue;const dr=new Float32Array(16);a.ab.mat4.translate(dr,Ct.projMatrix,Qt),at(Ct,Mt,zt,p.translatePosMatrix(dr,_t,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),Nt)}}}function Ud(p,n,o,m,v,S,D){m.centroidVertexArray.length===0&&m.createCentroidsBuffer();const L=S?S.findDEMTileFor(o):null;if(!(L&&L.dem||D))return;S&&L&&L.dem&&m.selfDEMTileTimestamp!==L.dem._timestamp&&(m.borderDoneWithNeighborZ=[-1,-1,-1,-1],m.selfDEMTileTimestamp=L.dem._timestamp);const O=we=>new a.P(Math.ceil((we+a.d7)*a.d8),0),U=we=>{const ze=n.getSource().minzoom,Oe=Ye=>{const Ge=n.getTileByID(Ye);if(Ge&&Ge.hasData())return Ge.getBucket(v)},Fe=[0,-1,1];for(const Ye of Fe){if(we.overscaledZ+Ye<ze)continue;const Ge=Oe(we.calculateScaledKey(we.overscaledZ+Ye));if(Ge)return Ge}},q=[0,0,0],Z=(we,ze)=>(q[0]=Math.min(we.min.y,ze.min.y),q[1]=Math.max(we.max.y,ze.max.y),q[2]=a.ag-ze.min.x>we.max.x?ze.min.x-a.ag:we.max.x,q),X=(we,ze)=>(q[0]=Math.min(we.min.x,ze.min.x),q[1]=Math.max(we.max.x,ze.max.x),q[2]=a.ag-ze.min.y>we.max.y?ze.min.y-a.ag:we.max.y,q),ne=[(we,ze)=>Z(we,ze),(we,ze)=>Z(ze,we),(we,ze)=>X(we,ze),(we,ze)=>X(ze,we)],ge=(we,ze,Oe,Fe,Ye,Ge,Ze)=>{if(!S)return 0;const We=[[Ge?Oe:we,Ge?we:Oe,0],[Ge?Oe:ze,Ge?ze:Oe,0]],nt=Ze<0?a.ag+Ze:Ze,at=[Ge?nt:(we+ze)/2,Ge?(we+ze)/2:nt,0];return Oe===0&&Ze<0||Oe!==0&&Ze>0?S.getForTilePoints(Ye,[at],!0,Fe):We.push(at),S.getForTilePoints(o,We,!0,L),Math.max(We[0][2],We[1][2],at[2])/S.exaggeration()};for(let we=0;we<4;we++){const ze=m.borderFeatureIndices[we];if(ze.length===0)continue;const Oe=a.d4[we](o),Fe=U(Oe);if(!(Fe&&Fe instanceof a.d5))continue;const Ye=S?S.findDEMTileFor(Oe):null;if(!(Ye&&Ye.dem||D)||(S&&Ye&&Ye.dem&&m.borderDEMTileTimestamp[we]!==Ye.dem._timestamp&&(m.borderDoneWithNeighborZ[we]=-1,m.borderDEMTileTimestamp[we]=Ye.dem._timestamp),m.borderDoneWithNeighborZ[we]===Fe.canonical.z))continue;Fe.centroidVertexArray.length===0&&Fe.createCentroidsBuffer();const Ge=(we<2?1:5)-we,Ze=Fe.borderDoneWithNeighborZ[Ge]!==m.canonical.z,We=Fe.borderFeatureIndices[Ge];let nt=0;if(m.canonical.z!==Fe.canonical.z){for(const at of ze)m.showCentroid(m.featuresOnBorder[at]);if(Ze)for(const at of We)Fe.showCentroid(Fe.featuresOnBorder[at]);m.borderDoneWithNeighborZ[we]=Fe.canonical.z,Fe.borderDoneWithNeighborZ[Ge]=m.canonical.z}for(const at of ze){const Ct=m.featuresOnBorder[at],_t=m.centroidData[Ct.centroidDataIndex],lt=Ct.borders[we];let mt;for(;nt<We.length;){mt=Fe.featuresOnBorder[We[nt]];const Nt=mt.borders[Ge];if(Nt[1]>lt[0]+3||Nt[0]>lt[0]-3)break;Fe.showCentroid(mt),nt++}if(mt&&nt<We.length){const Nt=nt;let qt=0;for(;!(mt.borders[Ge][0]>lt[1]-3)&&(qt++,++nt!==We.length);)mt=Fe.featuresOnBorder[We[nt]];mt=Fe.featuresOnBorder[We[Nt]];let Zt=!1;if(qt>=1){const Mt=mt.borders[Ge];Math.abs(lt[0]-Mt[0])<3&&Math.abs(lt[1]-Mt[1])<3&&(qt=1,Zt=!0,nt=Nt+1)}else if(qt===0){m.showCentroid(Ct);continue}const xt=Fe.centroidData[mt.centroidDataIndex];D&&Zt&&(((he=_t).flags|(ve=xt).flags)&a.d6?(he.flags|=a.d6,ve.flags|=a.d6):(he.flags&=~a.d6,ve.flags&=~a.d6));const Ft=Ct.intersectsCount()>1||mt.intersectsCount()>1;if(qt>1)nt=Nt,_t.centroidXY=xt.centroidXY=new a.P(0,0);else if(Ye&&Ye.dem&&!Ft){const Mt=ne[we](_t,xt),Qt=we%2?a.ag-1:0,Ot=ge(Mt[0],Math.min(a.ag-1,Mt[1]),Qt,Ye,Oe,we<2,Mt[2]);_t.centroidXY=xt.centroidXY=O(Ot)}else Ft?_t.centroidXY=xt.centroidXY=new a.P(0,0):(_t.centroidXY=m.encodeBorderCentroid(Ct),xt.centroidXY=Fe.encodeBorderCentroid(mt));m.writeCentroidToBuffer(_t),Fe.writeCentroidToBuffer(xt)}else m.showCentroid(Ct)}m.borderDoneWithNeighborZ[we]=Fe.canonical.z,Fe.borderDoneWithNeighborZ[Ge]=m.canonical.z}var he,ve;(m.needsCentroidUpdate||!m.centroidVertexBuffer&&m.centroidVertexArray.length!==0)&&m.uploadCentroid(p)}const Gd=[1,0,0],Hd=[0,1,0],Wa=[0,0,1];function tr(p,n,o){const m=o.transform,v=o.shadowRenderer;if(!v)return!0;const S=p.toUnwrapped(),D=m.tileSize*v._cascades[o.currentShadowCascade].scale;let L=n.maxHeight;if(m.elevation){const he=m.elevation.getMinMaxForTile(p);he&&(L+=he.max)}const O=[...v.shadowDirection];O[2]=-O[2];const U=v.computeSimplifiedTileShadowVolume(S,L,D,O);if(!U)return!1;const q=[Gd,Hd,Wa,O,[O[0],0,O[2]],[0,O[1],O[2]]],Z=m.projection.name==="globe",X=m.scaleZoom(D),ne=a.bR.fromInvProjectionMatrix(m.invProjMatrix,m.worldSize,X,!Z),ge=v.getCurrentCascadeFrustum();return ne.intersectsPrecise(U.vertices,U.planes,q)===0||ge.intersectsPrecise(U.vertices,U.planes,q)===0}function vr(p){return[p[0]*a.d9,p[1]*a.d9,p[2]*a.d9,0]}function lc(p,n,o,m,v,S,D,L,O){const U=m.getSource(),q=o.globeSharedBuffers;if(!q)return;let Z,X,ne;if(n&&(Z=m.getTile(n)),U instanceof a.aJ?(X=U.texture,ne=a.cI(0,0,o.transform)):Z&&n&&(X=Z.texture,ne=a.cI(n.canonical.z,n.canonical.x,o.transform)),!X||!ne)return;p||(ne=a.ab.mat4.scale(a.ab.mat4.create(),ne,[1,-1,1]));const ge=o.context,he=ge.gl,ve=v.paint.get("raster-resampling")==="nearest"?he.NEAREST:he.LINEAR,we=o.colorModeForDrapableLayerRenderPass(S),ze=D.defines;ze.push("GLOBE_POLES");const Oe=new Rr(he.LEQUAL,Rr.ReadWrite,o.depthRangeFor3D),Fe=Float32Array.from(o.transform.expandedFarZProjMatrix),Ye=Float32Array.from(a.bb(a.cH(new a.bT(0,0,0))));o.terrain&&o.terrain.prepareDrawTile(),ge.activeTexture.set(he.TEXTURE0),X.bind(ve,he.CLAMP_TO_EDGE),ge.activeTexture.set(he.TEXTURE1),X.bind(ve,he.CLAMP_TO_EDGE),X.useMipmap&&ge.extTextureFilterAnisotropic&&o.transform.pitch>20&&he.texParameterf(he.TEXTURE_2D,ge.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ge.extTextureFilterAnisotropicMax);const[Ge,Ze,We,nt]=n?q.getPoleBuffers(n.canonical.z,!1):q.getPoleBuffers(0,!0),at=v.paint.get("raster-elevation");let Ct;p?(Ct=Ge,o.renderDefaultNorthPole=at!==0):(Ct=Ze,o.renderDefaultSouthPole=at!==0);const _t=vr(D.mix),lt=((Nt,qt,Zt,xt,Ft,Mt,Qt,Ot,zt,dr,rr,yr,_r)=>Od(Nt,qt,Zt,new Float32Array(16),new Float32Array(9),[0,0],xt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},Mt,[0,0],Ot,2,dr,rr,yr,1,0,_r))(Fe,Ye,ne,a.ae(o.transform.zoom),0,v,0,at,0,_t,D.offset,D.range,S),mt=o.getOrCreateProgram("raster",{defines:ze});o.uploadCommonUniforms(ge,mt,null),mt.draw(o,he.TRIANGLES,Oe,O,we,L,lt,v.id,Ct,We,nt)}function Ma(p){const n=p._nearZ,o=p.projection.farthestPixelDistance(p),m=o-n,v=.2*p.height,S=n+v;return[n,o,(S-v-n)/m,(S-n)/m]}function Tt(p,n,o,m){if(p)return n instanceof yl&&p instanceof Ch?n.getTextureDescriptor(p,o,!0):{texture:p.texture,mix:vr(m.mix),offset:m.offset,buffer:0,tileSize:1}}var _p=a.da([{name:"a_index",type:"Int16",components:1}]);class qd{constructor(n,o,m,v){const S={width:m[0],height:m[1],data:null},D=n.gl;this.targetColorTexture=new a.T(n,S,D.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new a.T(n,S,D.RGBA8,{useMipmap:!1}),this.context=n,this.updateParticleTexture(o,v),this.lastInvalidatedAt=0}updateParticleTexture(n,o){if(this.particleTextureDimension===o.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const m=this.context.gl,v=o.width*o.height;this.particleTexture0=new a.T(this.context,o,m.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new a.T(this.context,o,m.RGBA8,{premultiply:!1,useMipmap:!1});const S=new a.db;S.reserve(v);for(let D=0;D<v;D++)S.emplaceBack(D);this.particleIndexBuffer=this.context.createVertexBuffer(S,_p.members,!0),this.particleSegment=a.b7.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=o.width}update(n){return!(this.lastInvalidatedAt<n&&(this.lastInvalidatedAt=a.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Hh(p,n,o){if(!p)return null;const m=n.getTextureDescriptor(p,o,!0);if(!m)return null;let{texture:v,mix:S,offset:D,tileSize:L,buffer:O,format:U}=m;if(!v||!U)return null;let q=!1;return U==="uint32"&&(q=!0,S[3]=0,S=Xu(a.dc,S,[0,o.paint.get("raster-particle-max-speed")]),D=Tr(a.dc,D,[0,o.paint.get("raster-particle-max-speed")])),{texture:v,textureOffset:[O/(L+2*O),L/(L+2*O)],tileSize:L,scalarData:q,scale:S,offset:D,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[U]]}}function zs(p){const n=p._nearZ,o=p.projection.farthestPixelDistance(p),m=o-n,v=.2*p.height,S=n+v;return[n,o,(S-v-n)/m,(S-n)/m]}const vi=new a.aj(1,0,0,1),bp=new a.aj(0,1,0,1),Dl=new a.aj(0,0,1,1),wp=new a.aj(1,0,1,1),Hm=new a.aj(0,1,1,1);function Ls(p,n,o,m,v,S,D){const L=p.context,O=p.transform,U=L.gl,q=O.projection.name==="globe",Z=q?["PROJECTION_GLOBE_VIEW"]:[];let X=a.ab.mat4.clone(o.projMatrix);if(q&&a.ae(O.zoom)>0){const _t=a.ba(o.canonical,O),lt=a.dd(_t);X=a.ab.mat4.multiply(new Float32Array(16),O.globeMatrix,lt),a.ab.mat4.multiply(X,O.projMatrix,X)}const ne=a.ab.mat4.create();ne[12]+=2*v/(a.q.devicePixelRatio*O.width),ne[13]+=2*S/(a.q.devicePixelRatio*O.height),a.ab.mat4.multiply(X,ne,X);const ge=p.getOrCreateProgram("debug",{defines:Z}),he=n.getTileByID(o.key);p.terrain&&p.terrain.setupElevationDraw(he,ge);const ve=Rr.disabled,we=en.disabled,ze=p.colorModeForRenderPass(),Oe="$debug";L.activeTexture.set(U.TEXTURE0),p.emptyTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),q?he._makeGlobeTileDebugBuffers(p.context,O):he._makeDebugTileBoundsBuffers(p.context,O.projection);const Fe=he._tileDebugBuffer||p.debugBuffer,Ye=he._tileDebugIndexBuffer||p.debugIndexBuffer,Ge=he._tileDebugSegments||p.debugSegments;if(ge.draw(p,U.LINE_STRIP,ve,we,ze,Gr.disabled,Zu(X,m),Oe,Fe,Ye,Ge,null,null,null,[he._globeTileDebugBorderBuffer]),D){const _t=he.latestRawTileData,lt=Math.floor((_t&&_t.byteLength||0)/1024);let mt=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(mt+=` => ${o.overscaledZ}`),mt+=` ${he.state}`,mt+=` ${lt}kb`,function(Nt,qt){Nt.initDebugOverlayCanvas();const Zt=Nt.debugOverlayCanvas,xt=Nt.context.gl,Ft=Nt.debugOverlayCanvas.getContext("2d");Ft.clearRect(0,0,Zt.width,Zt.height),Ft.shadowColor="white",Ft.shadowBlur=2,Ft.lineWidth=1.5,Ft.strokeStyle="white",Ft.textBaseline="top",Ft.font="bold 36px Open Sans, sans-serif",Ft.fillText(qt,5,5),Ft.strokeText(qt,5,5),Nt.debugOverlayTexture.update(Zt),Nt.debugOverlayTexture.bind(xt.LINEAR,xt.CLAMP_TO_EDGE)}(p,mt)}const Ze=n.getTile(o).tileSize,We=512/Math.min(Ze,512)*(o.overscaledZ/O.zoom)*.5,nt=he._tileDebugTextBuffer||p.debugBuffer,at=he._tileDebugTextIndexBuffer||p.quadTriangleIndexBuffer,Ct=he._tileDebugTextSegments||p.debugSegments;ge.draw(p,U.TRIANGLES,ve,we,dn.alphaBlended,Gr.disabled,Zu(X,a.aj.transparent,We),Oe,nt,at,Ct,null,null,null,[he._globeTileDebugTextBuffer])}function Xc(p,n,o,m){Ju(p,0,n+o/2,p.transform.width,o,m)}function Wd(p,n,o,m){Ju(p,n-o/2,0,o,p.transform.height,m)}function Ju(p,n,o,m,v,S){const D=p.context,L=D.gl;L.enable(L.SCISSOR_TEST),L.scissor(n*a.q.devicePixelRatio,o*a.q.devicePixelRatio,m*a.q.devicePixelRatio,v*a.q.devicePixelRatio),D.clear({color:S}),L.disable(L.SCISSOR_TEST)}const qm=a.da([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:qh}=qm;function zo(p,n,o,m){p.emplaceBack(n,o,m)}class Lo{constructor(n){this.vertexArray=new a.de,this.indices=new a.aU,zo(this.vertexArray,-1,-1,1),zo(this.vertexArray,1,-1,1),zo(this.vertexArray,-1,1,1),zo(this.vertexArray,1,1,1),zo(this.vertexArray,-1,-1,-1),zo(this.vertexArray,1,-1,-1),zo(this.vertexArray,-1,1,-1),zo(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=n.createVertexBuffer(this.vertexArray,qh),this.indexBuffer=n.createIndexBuffer(this.indices),this.segment=a.b7.simpleSegment(0,0,36,12)}}function Yc(p,n,o,m,v,S){const D=p.context.gl,L=n.paint.get("sky-atmosphere-color"),O=n.paint.get("sky-atmosphere-halo-color"),U=n.paint.get("sky-atmosphere-sun-intensity"),q=((Z,X,ne,ge,he)=>({u_matrix_3f:Z,u_sun_direction:X,u_sun_intensity:ne,u_color_tint_r:[ge.r,ge.g,ge.b,ge.a],u_color_tint_m:[he.r,he.g,he.b,he.a],u_luminance:5e-5}))(a.ab.mat3.fromMat4(a.ab.mat3.create(),m),v,U,L,O);D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+S,n.skyboxTexture,0),o.draw(p,D.TRIANGLES,Rr.disabled,en.disabled,dn.unblended,Gr.frontCW,q,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const P0=a.da([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class is{constructor(n){const o=new a.df;o.emplaceBack(-1,1,1,0,0),o.emplaceBack(1,1,1,1,0),o.emplaceBack(1,-1,1,1,1),o.emplaceBack(-1,-1,1,0,1);const m=new a.aU;m.emplaceBack(0,1,2),m.emplaceBack(2,3,0),this.vertexBuffer=n.createVertexBuffer(o,P0.members),this.indexBuffer=n.createIndexBuffer(m),this.segments=a.b7.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const M0=a.da([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Wh{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class xa{constructor(n){this.colorModeAlphaBlendedWriteRGB=new dn([1,Lu,1,Lu],a.aj.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new dn([1,0,1,0],a.aj.transparent,[!1,!1,!1,!0]),this.params=new Wh,this.updateNeeded=!0,n.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),n.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),n.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),n.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(n){const o=n.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new is(o);const m=this.params.sizeRange,v=this.params.intensityRange,S=function(q){const Z=a.di(30),X=[];for(let ne=0;ne<q;++ne){const ge=2*Math.PI*Z(),he=Math.acos(1-2*Z())-.5*Math.PI;X.push(a.ab.vec3.fromValues(Math.cos(he)*Math.cos(ge),Math.cos(he)*Math.sin(ge),Math.sin(he)))}return X}(this.params.starsCount),D=a.di(300),L=new a.dg,O=new a.aU;let U=0;for(let q=0;q<S.length;++q){const Z=a.ab.vec3.scale([],S[q],200),X=Math.max(0,1+.01*m*(1*D()-.5)),ne=Math.max(0,1+.01*v*(1*D()-.5));L.emplaceBack(Z[0],Z[1],Z[2],-1,-1,X,ne),L.emplaceBack(Z[0],Z[1],Z[2],1,-1,X,ne),L.emplaceBack(Z[0],Z[1],Z[2],1,1,X,ne),L.emplaceBack(Z[0],Z[1],Z[2],-1,1,X,ne),O.emplaceBack(U+0,U+1,U+2),O.emplaceBack(U+0,U+2,U+3),U+=4}this.starsVx=o.createVertexBuffer(L,M0.members),this.starsIdx=o.createIndexBuffer(O),this.starsSegments=a.b7.simpleSegment(0,0,L.length,O.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(n,o){const m=n.context,v=m.gl,S=n.transform,D=new Rr(v.LEQUAL,Rr.ReadOnly,[0,1]),L=a.ae(S.zoom),O=n.style.getLut(o.scope),U=o.properties.get("color-use-theme")==="none",q=o.properties.get("color").toRenderColor(U?null:O).toArray01(),Z=o.properties.get("high-color-use-theme")==="none",X=o.properties.get("high-color").toRenderColor(Z?null:O).toArray01(),ne=o.properties.get("space-color-use-theme")==="none",ge=o.properties.get("space-color").toRenderColor(ne?null:O).toArray01PremultipliedAlpha(),he=5e-4,ve=a.dh(o.properties.get("horizon-blend"),0,1,he,.25),we=a.cC(n,m,S)&&ve===he?S.worldSize/(2*Math.PI*1.025)-1:S.globeRadius,ze=n.frameCounter/1e3%1,Oe=a.ab.vec3.length(S.globeCenterInViewSpace),Fe=Math.sqrt(Math.pow(Oe,2)-Math.pow(we,2)),Ye=Math.acos(Fe/Oe),Ge=Ze=>{const We=S.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];Ze&&We.push("ALPHA_PASS");const nt=n.getOrCreateProgram("globeAtmosphere",{defines:We}),at=((_t,lt,mt,Nt,qt,Zt,xt,Ft,Mt,Qt,Ot,zt)=>({u_frustum_tl:_t,u_frustum_tr:lt,u_frustum_br:mt,u_frustum_bl:Nt,u_horizon:qt,u_transition:Zt,u_fadeout_range:xt,u_color:Ft,u_high_color:Mt,u_space_color:Qt,u_temporal_offset:Ot,u_horizon_angle:zt}))(S.frustumCorners.TL,S.frustumCorners.TR,S.frustumCorners.BR,S.frustumCorners.BL,S.frustumCorners.horizon,L,ve,q,X,ge,ze,Ye);n.uploadCommonUniforms(m,nt);const Ct=this.atmosphereBuffer;Ct&&nt.draw(n,v.TRIANGLES,D,en.disabled,Ze?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,Gr.backCW,at,Ze?"atmosphere_glow_alpha":"atmosphere_glow",Ct.vertexBuffer,Ct.indexBuffer,Ct.segments)};Ge(!1),Ge(!0)}drawStars(n,o){const m=a.aw(o.properties.get("star-intensity"),0,1);if(m===0)return;const v=n.context,S=v.gl,D=n.transform,L=n.getOrCreateProgram("stars"),O=a.ab.quat.identity([]);a.ab.quat.rotateX(O,O,-D._pitch),a.ab.quat.rotateZ(O,O,-D.angle),a.ab.quat.rotateX(O,O,a.ai(D._center.lat)),a.ab.quat.rotateY(O,O,-a.ai(D._center.lng));const U=a.ab.mat4.fromQuat(new Float32Array(16),O),q=a.ab.mat4.multiply([],D.starsProjMatrix,U),Z=a.ab.mat3.fromMat4([],U),X=a.ab.mat3.invert([],Z),ne=[0,1,0];a.ab.vec3.transformMat3(ne,ne,X),a.ab.vec3.scale(ne,ne,this.params.sizeMultiplier);const ge=[1,0,0];a.ab.vec3.transformMat3(ge,ge,X),a.ab.vec3.scale(ge,ge,this.params.sizeMultiplier);const he=(ve=ne,we=ge,ze=m,{u_matrix:Float32Array.from(q),u_up:ve,u_right:we,u_intensity_multiplier:ze});var ve,we,ze;n.uploadCommonUniforms(v,L),this.starsVx&&this.starsIdx&&L.draw(n,S.TRIANGLES,Rr.disabled,en.disabled,this.colorModeAlphaBlendedWriteRGB,Gr.disabled,he,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Fn(p,n){const o=[...p],m=n.cameraWorldSizeForFog/n.worldSize,v=a.ab.mat4.identity([]);return a.ab.mat4.scale(v,v,[m,m,1]),a.ab.mat4.multiply(o,v,o),a.ab.mat4.multiply(o,n.worldToFogMatrix,o),o}function Kh(p,n,o,m,v){const S=o.material,D=m.context,{baseColorTexture:L,metallicRoughnessTexture:O}=S.pbrMetallicRoughness,{normalTexture:U,occlusionTexture:q,emissionTexture:Z}=S;function X(ge,he,ve){if(ge&&(p.push(he),D.activeTexture.set(D.gl.TEXTURE0+ve),ge.gfxTexture)){const{minFilter:we,magFilter:ze,wrapS:Oe,wrapT:Fe}=ge.sampler;ge.gfxTexture.bindExtraParam(we,ze,Oe,Fe)}}X(L,"HAS_TEXTURE_u_baseColorTexture",Oi.BaseColor),X(O,"HAS_TEXTURE_u_metallicRoughnessTexture",Oi.MetallicRoughness),X(U,"HAS_TEXTURE_u_normalTexture",Oi.Normal),X(q,"HAS_TEXTURE_u_occlusionTexture",Oi.Occlusion),X(Z,"HAS_TEXTURE_u_emissionTexture",Oi.Emission),v&&(v.texture||(v.texture=new a.dk(m.context,v.image,[v.image.height,v.image.height,v.image.height],D.gl.RGBA8)),D.activeTexture.set(D.gl.TEXTURE0+Oi.LUT),v.texture&&v.texture.bind(D.gl.LINEAR,D.gl.CLAMP_TO_EDGE),p.push("APPLY_LUT_ON_GPU")),o.texcoordBuffer&&(p.push("HAS_ATTRIBUTE_a_uv_2f"),n.push(o.texcoordBuffer)),o.colorBuffer&&(p.push(o.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),n.push(o.colorBuffer)),o.normalBuffer&&(p.push("HAS_ATTRIBUTE_a_normal_3f"),n.push(o.normalBuffer)),o.pbrBuffer&&(p.push("HAS_ATTRIBUTE_a_pbr"),p.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),n.push(o.pbrBuffer)),S.alphaMode!=="OPAQUE"&&S.alphaMode!=="MASK"||p.push("UNPREMULT_TEXTURE_IN_SHADER"),S.defined||p.push("DIFFUSE_SHADED"),p.push("USE_STANDARD_DERIVATIVES");const ne=m.shadowRenderer;ne&&(p.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ne.useNormalOffset&&p.push("NORMAL_OFFSET"))}function no(p,n,o,m,v,S){const D=o.paint.get("model-opacity").constantOr(1),L=n.context,O=new Rr(n.context.gl.LEQUAL,Rr.ReadWrite,n.depthRangeFor3D),U=n.transform,q=p.mesh,Z=q.material,X=Z.pbrMetallicRoughness,ne=n.style.fog;let ge;ge=n.transform.projection.zAxisUnit==="pixels"?[...p.nodeModelMatrix]:a.ab.mat4.multiply([],m.zScaleMatrix,p.nodeModelMatrix),a.ab.mat4.multiply(ge,m.negCameraPosMatrix,ge);const he=a.ab.mat4.invert([],ge);a.ab.mat4.transpose(he,he);const ve=o.paint.get("model-color-use-theme").constantOr("default")==="none",we=o.paint.get("model-emissive-strength").constantOr(0),ze=Gh(new Float32Array(p.worldViewProjection),new Float32Array(ge),new Float32Array(he),null,n,D,X.baseColorFactor.toRenderColor(null),Z.emissiveFactor,X.metallicFactor,X.roughnessFactor,Z,we,o),Oe={defines:[]},Fe=[],Ye=n.shadowRenderer;Ye&&(Ye.useNormalOffset=!1),Kh(Oe.defines,Fe,q,n,ve?null:o.lut);let Ge=null;if(ne){const nt=Fn(p.nodeModelMatrix,n.transform);if(Ge=new Float32Array(nt),U.projection.name!=="globe"){const at=q.aabb.min,Ct=q.aabb.max,[_t,lt]=ne.getOpacityForBounds(nt,at[0],at[1],Ct[0],Ct[1]);Oe.overrideFog=_t>=cr||lt>=cr}}const Ze=bl(n,o.paint.get("model-cutoff-fade-range"));Ze.shouldRenderCutoff&&Oe.defines.push("RENDER_CUTOFF");const We=n.getOrCreateProgram("model",Oe);n.uploadCommonUniforms(L,We,null,Ge,Ze),n.renderPass!=="shadow"&&Ye&&Ye.setupShadowsFromMatrix(p.nodeModelMatrix,We),We.draw(n,L.gl.TRIANGLES,O,v,S,q.material.doubleSided?Gr.disabled:Gr.backCCW,ze,o.id,q.vertexBuffer,q.indexBuffer,q.segments,o.paint,n.transform.zoom,void 0,Fe)}function Kd(p,n,o,m,v,S,D){let L;L=p.projection.name==="globe"?a.dl(o,p):[...o],a.ab.mat4.multiply(L,L,n.matrix);const O=a.ab.mat4.multiply([],m,L);if(n.meshes)for(const U of n.meshes){if(U.material.alphaMode!=="BLEND"){D.push({mesh:U,depth:0,modelIndex:v,worldViewProjection:O,nodeModelMatrix:L});continue}const q=a.ab.vec3.transformMat4([],U.centroid,O);q[2]>0&&S.push({mesh:U,depth:q[2],modelIndex:v,worldViewProjection:O,nodeModelMatrix:L})}if(n.children)for(const U of n.children)Kd(p,U,o,m,v,S,D)}function cc(p,n,o,m){const v=o.shadowRenderer;if(!v)return;const S=v.getShadowPassDepthMode(),D=v.getShadowPassColorMode(),L=v.calculateShadowPassMatrixFromMatrix(n),O=yp(L);o.getOrCreateProgram("modelDepth",{defines:o._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(o,o.context.gl.TRIANGLES,S,en.disabled,D,Gr.backCCW,O,m.id,p.vertexBuffer,p.indexBuffer,p.segments,m.paint,o.transform.zoom,void 0,void 0)}function Sp(p,n,o){const m=n.updateZoomBasedPaintProperties(),v=function(S,D,L){let O,U,q,Z=S.terrain?S.terrain.exaggeration():0;if(S.terrain&&Z>0){const X=S.terrain,ne=X.findDEMTileFor(L);ne&&ne.dem?O=a.dn.create(X,L,ne):Z=0}if(Z===0&&(D.terrainElevationMin=0,D.terrainElevationMax=0),Z===D.validForExaggeration&&(Z===0||O&&O._demTile&&O._demTile.tileID===D.validForDEMTile.id&&O._dem._timestamp===D.validForDEMTile.timestamp))return!1;for(const X in D.instancesPerModel){const ne=D.instancesPerModel[X];for(let ge=0;ge<ne.instancedDataArray.length;++ge){const he=(O?Z*O.getElevationAt(0|ne.instancedDataArray.float32[16*ge],0|ne.instancedDataArray.float32[16*ge+1],!0,!0):0)+ne.instancesEvaluatedElevation[ge];ne.instancedDataArray.float32[16*ge+6]=he,U=U?Math.min(D.terrainElevationMin,he):he,q=q?Math.max(D.terrainElevationMax,he):he}}return D.terrainElevationMin=U||0,D.terrainElevationMax=q||0,D.validForExaggeration=Z,D.validForDEMTile=O&&O._demTile?{id:O._demTile.tileID,timestamp:O._dem._timestamp}:{id:void 0,timestamp:0},!0}(p,n,o);(m||v)&&(n.uploaded=!1,n.upload(p.context))}const ao={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new a.cd([0,0,0],[a.ag,a.ag,0])};function uc(p,n){const o=1<<p.canonical.z,m=n.getFreeCameraOptions().position,v=n.elevation,S=p.canonical.x/o,D=(p.canonical.x+1)/o,L=p.canonical.y/o,O=(p.canonical.y+1)/o;let U=n._centerAltitude;if(v){const ne=v.getMinMaxForTile(p);ne&&ne.max>U&&(U=ne.max)}const q=a.aw(m.x,S,D)-m.x,Z=a.aw(m.y,L,O)-m.y,X=a.bH(U,n.center.lat)-m.z;return n._zoomFromMercatorZ(Math.sqrt(q*q+Z*Z+X*X))}function dc(p,n,o,m,v,S,D){const L=p.context,O=p.renderPass==="shadow",U=p.shadowRenderer,q=O&&U?U.getShadowPassDepthMode():new Rr(L.gl.LEQUAL,Rr.ReadWrite,p.depthRangeFor3D),Z=p.isTileAffectedByFog(S);if(o.meshes)for(const X of o.meshes){const ne=["MODEL_POSITION_ON_GPU"],ge=[];let he,ve,we;m.instancedDataArray.length>20&&ne.push("INSTANCED_ARRAYS");const ze=bl(p,n.paint.get("model-cutoff-fade-range"));if(ze.shouldRenderCutoff&&ne.push("RENDER_CUTOFF"),O&&U)he=p.getOrCreateProgram("modelDepth",{defines:ne}),ve=yp(D.shadowTileMatrix,D.shadowTileMatrix,Float32Array.from(o.matrix)),we=U.getShadowPassColorMode();else{Kh(ne,ge,X,p,n.paint.get("model-color-use-theme").constantOr("default")==="none"?null:n.lut),he=p.getOrCreateProgram("model",{defines:ne,overrideFog:Z});const Fe=X.material,Ye=Fe.pbrMetallicRoughness,Ge=n.paint.get("model-opacity").constantOr(1),Ze=n.paint.get("model-emissive-strength").constantOr(0);ve=Gh(S.expandedProjMatrix,Float32Array.from(o.matrix),new Float32Array(16),null,p,Ge,Ye.baseColorFactor.toRenderColor(null),Fe.emissiveFactor,Ye.metallicFactor,Ye.roughnessFactor,Fe,Ze,n,v),U&&(D.shadowUniformsInitialized?he.setShadowUniformValues(L,U.getShadowUniformValues()):(U.setupShadows(S.toUnwrapped(),he,"model-tile",S.overscaledZ),D.shadowUniformsInitialized=!0)),we=ze.shouldRenderCutoff||Ge<1||Fe.alphaMode!=="OPAQUE"?dn.alphaBlended:dn.unblended}p.uploadCommonUniforms(L,he,S.toUnwrapped(),null,ze);const Oe=X.material.doubleSided?Gr.disabled:Gr.backCCW;if(m.instancedDataArray.length>20)ge.push(m.instancedDataBuffer),he.draw(p,L.gl.TRIANGLES,q,en.disabled,we,Oe,ve,n.id,X.vertexBuffer,X.indexBuffer,X.segments,n.paint,p.transform.zoom,void 0,ge,m.instancedDataArray.length);else{const Fe=O?"u_instance":"u_normal_matrix";for(let Ye=0;Ye<m.instancedDataArray.length;++Ye)ve[Fe]=new Float32Array(m.instancedDataArray.arrayBuffer,64*Ye,16),he.draw(p,L.gl.TRIANGLES,q,en.disabled,we,Oe,ve,n.id,X.vertexBuffer,X.indexBuffer,X.segments,n.paint,p.transform.zoom,void 0,ge)}}if(o.children)for(const X of o.children)dc(p,n,X,m,v,S,D)}const hc=[1,-1,1];function fc(p,n,o,m){if(!o.modelManager)return!0;const v=o.modelManager;if(!o.shadowRenderer)return!0;const S=o.shadowRenderer,D=n.aabb;let L=!0,O=p.maxHeight;if(O===0){let q=0;for(const Z in p.instancesPerModel){const X=v.getModel(Z,m);X?q=Math.max(q,Math.max(Math.max(X.aabb.max[0],X.aabb.max[1]),X.aabb.max[2])):L=!1}O=p.maxScale*q*1.41+p.maxVerticalOffset,L&&(p.maxHeight=O)}D.max[2]=O,D.min[2]+=p.terrainElevationMin,D.max[2]+=p.terrainElevationMax,a.ab.vec3.transformMat4(D.min,D.min,n.tileMatrix),a.ab.vec3.transformMat4(D.max,D.max,n.tileMatrix);const U=D.intersects(S.getCurrentCascadeFrustum());return o.currentShadowCascade===0&&(p.isInsideFirstShadowMapFrustum=U===2),U===0}function Qu(p,n){const o=p.uniformValues.u_cutoff_params[0],m=p.uniformValues.u_cutoff_params[1],v=p.uniformValues.u_cutoff_params[2],S=p.uniformValues.u_cutoff_params[3];return m===o||S===v?1:a.aw(((n-o)/(m-o)-v)/(S-v),0,1)}function Tp(p,n,o,m){if(n.pitch<20)return 1;const v=n.getWorldToCameraMatrix();a.ab.mat4.multiply(v,v,p);const S=a.ab.vec4.fromValues(o.min[0],o.min[1],o.min[2],1);let D=a.ab.vec4.transformMat4(a.ab.vec4.create(),S,v),L=D,O=D;S[1]=o.max[1],D=a.ab.vec4.transformMat4(a.ab.vec4.create(),S,v),L=D[1]<L[1]?D:L,O=D[1]>O[1]?D:O,S[0]=o.max[0],D=a.ab.vec4.transformMat4(a.ab.vec4.create(),S,v),L=D[1]<L[1]?D:L,O=D[1]>O[1]?D:O,S[1]=o.min[1],D=a.ab.vec4.transformMat4(a.ab.vec4.create(),S,v),L=D[1]<L[1]?D:L,O=D[1]>O[1]?D:O;const U=a.aw(m[0],0,1),q=100*n.pixelsPerMeter*a.aw(m[1],0,1),Z=a.aw(m[2],0,1),X=a.ab.vec4.lerp(a.ab.vec4.create(),L,O,U),ne=Math.tan(.5*n.fovX),ge=-X[2]*ne;if(q===0)return X[1]<-Math.abs(ge)?Z:1;const he=(-Math.abs(ge)-X[1])/q,ve=(ze,Oe,Fe)=>(1-Fe)*ze+Fe*Oe,we=a.aw(ve(1,Z,he),Z,1);return ve(1,we,a.aw((n.pitch-20)/20,0,1))}class Zd{}class ed{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(n,o,m){{const Z=this._storage.get(o.id);if(Z)return Z.lastUsedFrameIdx=n,Z.buf}const v=m.gl,S=v.getBufferParameter(v.ELEMENT_ARRAY_BUFFER,v.BUFFER_SIZE),D=new ArrayBuffer(S),L=new Int16Array(D);v.getBufferSubData(v.ELEMENT_ARRAY_BUFFER,0,new Int16Array(D));const O=new a.dq;for(let Z=0;Z<S/2;Z+=3){const X=L[Z],ne=L[Z+1],ge=L[Z+2];O.emplaceBack(X,ne),O.emplaceBack(ne,ge),O.emplaceBack(ge,X)}const U=m.bindVertexArrayOES.current,q=new Zd;return q.buf=new Hs(m,O),q.lastUsedFrameIdx=n,this._storage.set(o.id,q),m.bindVertexArrayOES.set(U),q.buf}update(n){for(const[o,m]of this._storage)n-m.lastUsedFrameIdx>30&&(m.buf.destroy(),this._storage.delete(o))}destroy(){for(const[n,o]of this._storage)o.buf.destroy(),this._storage.delete(n)}}class pc{constructor(n){this.occluderSize=30,this.depthOffset=-1e-4,n.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),n.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Ep=a.da([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class Zh{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class Xh{constructor(n,o){this.revealStart=11,this.revealRange=2,n.registerParameter(this,[...o,"Reveal"],"revealStart",{min:0,max:17,step:.05}),n.registerParameter(this,[...o,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const Cp=a.da([{type:"Float32",name:"a_pos_2f",components:2}]);class Fi{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(n,o){const m=n.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const D=new a.dr,L=new a.aU;D.emplaceBack(-1,-1),D.emplaceBack(1,-1),D.emplaceBack(1,1),D.emplaceBack(-1,1),L.emplaceBack(0,1,2),L.emplaceBack(0,2,3),this.vignetteVx=n.context.createVertexBuffer(D,Cp.members),this.vignetteIdx=n.context.createIndexBuffer(L)}const v=a.b7.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){n.uploadCommonUniforms(n.context,m);const D={u_vignetteShape:(S={vignetteShape:[o.start,o.range,Math.pow(10,o.fadePower)],vignetteColor:[o.color.r,o.color.g,o.color.b,o.color.a*o.strength]}).vignetteShape,u_vignetteColor:S.vignetteColor};m.draw(n,n.context.gl.TRIANGLES,Rr.disabled,en.disabled,dn.alphaBlended,Gr.disabled,D,"vignette",this.vignetteVx,this.vignetteIdx,v,{})}var S}}class Yh{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(n,o){const m=n.getFreeCameraOptions().position,v=m.toAltitude(),S=m.toLngLat(),D=a.ai(S.lng),L=a.ai(S.lat),O=n.pixelsPerMeter/o,U=D*a.ds,q=a.ds*Math.log(Math.tan(Math.PI/4+L/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const Z=-this._offsetYPrev+q,X=-this._elevationPrev+v;this._accumulatedOffsetX+=(-this._offsetXPrev+U)*O,this._accumulatedOffsetY+=Z*O,this._accumulatedElevation+=X*O,this._offsetXPrev=U,this._offsetYPrev=q,this._elevationPrev=v}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function Jh(p,n){return[-(p[0]-Math.floor(p[0]/n)*n),-(p[1]-Math.floor(p[1]/n)*n),-(p[2]-Math.floor(p[2]/n)*n)]}function td(p){const n=a.di(1323123451230),o=[];for(let m=0;m<p;++m){const v=2*n()-1,S=2*n()-1,D=2*n()-1;o.push(a.ab.vec3.fromValues(v,S,D))}return o}function Ts(p,n,o,m,v){const S=a.aw((v-o)/(m-o),0,1);return(1-S)*p+S*n}class Qh{constructor(n){this._movement=new Yh,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new Fi,this._ppmScaleFactor=n}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(n,o){const m=n.transform;this._movement.update(m,this._ppmScaleFactor);const v=m.starsProjMatrix,S=a.ab.quat.identity([]);a.ab.quat.rotateX(S,S,a.ai(90)-m._pitch),a.ab.quat.rotateZ(S,S,-m.angle);const D=a.ab.mat4.fromQuat(new Float32Array(16),S),L=a.ab.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),O=a.ab.mat4.transpose([],L),U=a.ab.mat4.multiply([],O,D),q=Date.now()/1e3;return this._accumulatedTimeFromStart+=(q-this._prevTime)*o,this._prevTime=q,{projectionMatrix:v,modelviewMatrix:U}}}class Dp extends Qh{constructor(n){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new Xh(n.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(n){const o=n.context;if(!this.particlesVx){const m=td(this.particlesCount),v=new a.dt,S=new a.aU;let D=0;const L=a.di(1323123451230);for(let O=0;O<m.length;++O){const U=m[O],q=[2*L()-1,L(),L(),L()];v.emplaceBack(U[0],U[1],U[2],-1,-1,...q),v.emplaceBack(U[0],U[1],U[2],1,-1,...q),v.emplaceBack(U[0],U[1],U[2],1,1,...q),v.emplaceBack(U[0],U[1],U[2],-1,1,...q),S.emplaceBack(D+0,D+1,D+2),S.emplaceBack(D+0,D+2,D+3),D+=4}this.particlesVx=o.createVertexBuffer(v,Ep.members),this.particlesIdx=o.createIndexBuffer(S)}}draw(n){if(!this._params.overrideStyleParameters&&!n.style.rain)return;const o=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},m=n.transform.zoom;if(o.revealStart>m)return;const v=Ts(0,1,o.revealStart,o.revealStart+o.revealRange,m);if(!this.particlesVx||!this.particlesIdx)return;const S=structuredClone(this._params);let D=[-S.direction.x,S.direction.y,-100];a.ab.vec3.normalize(D,D);const L=structuredClone(this._vignetteParams);L.strength*=v,S.overrideStyleParameters||(S.intensity=n.style.rain.state.density,S.timeFactor=n.style.rain.state.intensity,S.color=structuredClone(n.style.rain.state.color),D=structuredClone(n.style.rain.state.direction),S.screenThinning.intensity=n.style.rain.state.centerThinning,S.dropletSizeX=n.style.rain.state.dropletSize[0],S.dropletSizeYScale=n.style.rain.state.dropletSize[1]/n.style.rain.state.dropletSize[0],S.distortionStrength=100*n.style.rain.state.distortionStrength,L.strength=1,L.color=structuredClone(n.style.rain.state.vignetteColor));const O=this.updateOnRender(n,S.timeFactor),U=n.context,q=U.gl,Z=n.transform;this.screenTexture&&this.screenTexture.size[0]===n.width&&this.screenTexture.size[1]===n.height||(this.screenTexture=new a.T(U,{width:n.width,height:n.height,data:null},q.RGBA8)),S.distortionStrength>0&&(U.activeTexture.set(q.TEXTURE0),this.screenTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),q.copyTexSubImage2D(q.TEXTURE_2D,0,0,0,0,0,n.width,n.height));const X=n.getOrCreateProgram("rainParticle");n.uploadCommonUniforms(U,X),U.activeTexture.set(q.TEXTURE0),this.screenTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE);const ne=[S.color.r,S.color.g,S.color.b,S.color.a],ge=(he,ve)=>{const we=Jh(this._movement.getPosition(),he),ze=S.dropletSizeX,Oe=S.dropletSizeX*S.dropletSizeYScale,Fe=n.width/2,Ye=n.height/2,Ge=Ts(0,S.screenThinning.start,0,1,S.screenThinning.intensity),Ze=Ts(.001,S.screenThinning.range,0,1,S.screenThinning.intensity),We=Ts(0,S.screenThinning.particleOffset,0,1,S.screenThinning.intensity),nt=(at={modelview:O.modelviewMatrix,projection:O.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:we,velocityConeAperture:S.velocityConeAperture,velocity:S.velocity,boxSize:he,rainDropletSize:[ze,Oe],distortionStrength:S.distortionStrength,rainDirection:D,color:ne,screenSize:[Z.width,Z.height],thinningCenterPos:[Fe,Ye],thinningShape:[Ge,Ze,Math.pow(10,S.screenThinning.fadePower)],thinningAffectedRatio:S.screenThinning.affectedRatio,thinningParticleOffset:We,shapeDirectionalPower:S.shapeDirPower,shapeNormalPower:S.shapeNormalPower,mode:ve?0:1},{u_modelview:Float32Array.from(at.modelview),u_projection:Float32Array.from(at.projection),u_time:at.time,u_cam_pos:at.camPos,u_texScreen:0,u_velocityConeAperture:at.velocityConeAperture,u_velocity:at.velocity,u_boxSize:at.boxSize,u_rainDropletSize:at.rainDropletSize,u_distortionStrength:at.distortionStrength,u_rainDirection:at.rainDirection,u_color:at.color,u_screenSize:at.screenSize,u_thinningCenterPos:at.thinningCenterPos,u_thinningShape:at.thinningShape,u_thinningAffectedRatio:at.thinningAffectedRatio,u_thinningParticleOffset:at.thinningParticleOffset,u_shapeDirectionalPower:at.shapeDirectionalPower,u_shapeNormalPower:at.shapeNormalPower,u_mode:at.mode});var at;const Ct=Math.round(v*S.intensity*this.particlesCount),_t=a.b7.simpleSegment(0,0,4*Ct,2*Ct);X.draw(n,q.TRIANGLES,Rr.disabled,en.disabled,dn.alphaBlended,Gr.disabled,nt,"rain_particles",this.particlesVx,this.particlesIdx,_t,{})};S.distortionStrength>0&&ge(S.boxSize,!0),ge(S.boxSize,!1),this._vignette.draw(n,L)}}const Wm=a.da([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class mc extends Qh{constructor(n){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new Xh(n.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(n){const o=n.context;if(!this.particlesVx){const m=td(this.particlesCount),v=new a.du,S=new a.aU;let D=0;const L=a.di(1323123451230);for(let O=0;O<m.length;++O){const U=m[O],q=L(),Z=L(),X=L(),ne=[O/m.length,q,Z,X],ge=[L(),L()];v.emplaceBack(U[0],U[1],U[2],-1,-1,...ne,...ge),v.emplaceBack(U[0],U[1],U[2],1,-1,...ne,...ge),v.emplaceBack(U[0],U[1],U[2],1,1,...ne,...ge),v.emplaceBack(U[0],U[1],U[2],-1,1,...ne,...ge),S.emplaceBack(D+0,D+1,D+2),S.emplaceBack(D+0,D+2,D+3),D+=4}this.particlesVx=o.createVertexBuffer(v,Wm.members),this.particlesIdx=o.createIndexBuffer(S)}}draw(n){if(!this._params.overrideStyleParameters&&!n.style.snow)return;const o=structuredClone(this._params);let m=[-o.direction.x,o.direction.y,-100];a.ab.vec3.normalize(m,m);const v=structuredClone(this._vignetteParams),S=o.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},D=n.transform.zoom;if(S.revealStart>D)return;const L=Ts(0,1,S.revealStart,S.revealStart+S.revealRange,D);v.strength*=L,o.overrideStyleParameters||(o.intensity=n.style.snow.state.density,o.timeFactor=n.style.snow.state.intensity,o.color=structuredClone(n.style.snow.state.color),m=structuredClone(n.style.snow.state.direction),o.screenThinning.intensity=n.style.snow.state.centerThinning,o.billboardSize=2.79*n.style.snow.state.flakeSize,v.strength=1,v.color=structuredClone(n.style.snow.state.vignetteColor));const O=this.updateOnRender(n,o.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const U=n.context,q=U.gl,Z=n.transform,X=n.getOrCreateProgram("snowParticle");n.uploadCommonUniforms(U,X),((ne,ge,he)=>{const ve=Jh(this._movement.getPosition(),ne),we=Z.width/2,ze=Z.height/2,Oe=Ts(0,he.screenThinning.start,0,1,he.screenThinning.intensity),Fe=Ts(.001,he.screenThinning.range,0,1,he.screenThinning.intensity),Ye=Ts(0,he.screenThinning.particleOffset,0,1,he.screenThinning.intensity),Ge=(Ze={modelview:O.modelviewMatrix,projection:O.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:ve,velocityConeAperture:he.velocityConeAperture,velocity:he.velocity,horizontalOscillationRadius:he.horizontalOscillationRadius,horizontalOscillationRate:he.horizontalOscillationRate,boxSize:ne,billboardSize:1*he.billboardSize,simpleShapeParameters:[he.shapeFadeStart,he.shapeFadePower],screenSize:[Z.width,Z.height],thinningCenterPos:[we,ze],thinningShape:[Oe,Fe,Math.pow(10,he.screenThinning.fadePower)],thinningAffectedRatio:he.screenThinning.affectedRatio,thinningParticleOffset:Ye,color:[he.color.r,he.color.g,he.color.b,he.color.a],direction:m},{u_modelview:Float32Array.from(Ze.modelview),u_projection:Float32Array.from(Ze.projection),u_time:Ze.time,u_cam_pos:Ze.camPos,u_velocityConeAperture:Ze.velocityConeAperture,u_velocity:Ze.velocity,u_horizontalOscillationRadius:Ze.horizontalOscillationRadius,u_horizontalOscillationRate:Ze.horizontalOscillationRate,u_boxSize:Ze.boxSize,u_billboardSize:Ze.billboardSize,u_simpleShapeParameters:Ze.simpleShapeParameters,u_screenSize:Ze.screenSize,u_thinningCenterPos:Ze.thinningCenterPos,u_thinningShape:Ze.thinningShape,u_thinningAffectedRatio:Ze.thinningAffectedRatio,u_thinningParticleOffset:Ze.thinningParticleOffset,u_particleColor:Ze.color,u_direction:Ze.direction});var Ze;const We=Math.round(L*he.intensity*this.particlesCount),nt=a.b7.simpleSegment(0,0,4*We,2*We);this.particlesVx&&this.particlesIdx&&X.draw(n,q.TRIANGLES,Rr.disabled,en.disabled,dn.alphaBlended,Gr.disabled,Ge,"snow_particles",this.particlesVx,this.particlesIdx,nt,{})})(o.boxSize,0,o),this._vignette.draw(n,v)}}const Xd={symbol:function(p,n,o,m,v){if(p.renderPass!=="translucent")return;const S=en.disabled,D=p.colorModeForRenderPass(),L=o.layout.get("text-variable-anchor"),O=o.layout.get("text-size-scale-range"),U=a.aw(p.scaleFactor,O[0],O[1]);L&&function(X,ne,ge,he,ve,we,ze,Oe){const Fe=ne.transform,Ye=ve==="map",Ge=we==="map";for(const Ze of X){const We=he.getTile(Ze),nt=We.getBucket(ge);if(!nt||!nt.text||!nt.text.segments.get().length)continue;const at=a.bp(nt.textSizeData,Fe.zoom,Oe),Ct=Ph(Ze,nt.getProjection(),Fe),_t=Fe.calculatePixelsToTileUnitsMatrix(We),lt=Eo(Ct,We.tileID.canonical,Ge,Ye,Fe,nt.getProjection(),_t),mt=nt.hasIconTextFit()&&nt.hasIconData();if(at){const Nt=Math.pow(2,Fe.zoom-We.tileID.overscaledZ);na(nt,Ye,Ge,ze,a.cX,Fe,lt,Ze,Nt,at,mt)}}}(m,p,o,n,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),v,U);const q=o.paint.get("icon-opacity").constantOr(1)!==0,Z=o.paint.get("text-opacity").constantOr(1)!==0;o.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(q||Z)?Cn(p,n,o,m,S,D):(q&&Cn(p,n,o,m,S,D,{onlyIcons:!0}),Z&&Cn(p,n,o,m,S,D,{onlyText:!0})),n.map.showCollisionBoxes&&(Vd(p,n,o,m,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),Vd(p,n,o,m,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))},circle:function(p,n,o,m){if(p.renderPass!=="translucent")return;const v=o.paint.get("circle-opacity"),S=o.paint.get("circle-stroke-width"),D=o.paint.get("circle-stroke-opacity"),L=o.layout.get("circle-sort-key").constantOr(1)!==void 0,O=o.paint.get("circle-emissive-strength");if(v.constantOr(1)===0&&(S.constantOr(1)===0||D.constantOr(1)===0))return;const U=p.context,q=U.gl,Z=p.transform,X=p.depthModeForSublayer(0,Rr.ReadOnly),ne=en.disabled,ge=p.colorModeForDrapableLayerRenderPass(O),he=Z.projection.name==="globe",ve=[a.at(Z.center.lng),a.aA(Z.center.lat)],we=[];for(let Oe=0;Oe<m.length;Oe++){const Fe=m[Oe],Ye=n.getTile(Fe),Ge=Ye.getBucket(o);if(!Ge||Ge.projection.name!==Z.projection.name)continue;const Ze=Ge.programConfigurations.get(o.id),We=a.cY(o),nt=p.isTileAffectedByFog(Fe);he&&We.push("PROJECTION_GLOBE_VIEW"),We.push("DEPTH_D24"),p.terrain&&Z.depthOcclusionForSymbolsAndCircles&&We.push("DEPTH_OCCLUSION");const at=p.getOrCreateProgram("circle",{config:Ze,defines:We,overrideFog:nt}),Ct=Ge.layoutVertexBuffer,_t=Ge.globeExtVertexBuffer,lt=Ge.indexBuffer,mt=Z.projection.createInversionMatrix(Z,Fe.canonical),Nt={programConfiguration:Ze,program:at,layoutVertexBuffer:Ct,globeExtVertexBuffer:_t,indexBuffer:lt,uniformValues:a.cZ(p,Fe,Ye,mt,ve,o),tile:Ye};if(L){const qt=Ge.segments.get();for(const Zt of qt)we.push({segments:new a.b7([Zt]),sortKey:Zt.sortKey,state:Nt})}else we.push({segments:Ge.segments,sortKey:0,state:Nt})}L&&we.sort((Oe,Fe)=>Oe.sortKey-Fe.sortKey);const ze={useDepthForOcclusion:Z.depthOcclusionForSymbolsAndCircles};for(const Oe of we){const{programConfiguration:Fe,program:Ye,layoutVertexBuffer:Ge,globeExtVertexBuffer:Ze,indexBuffer:We,uniformValues:nt,tile:at}=Oe.state,Ct=Oe.segments;p.terrain&&p.terrain.setupElevationDraw(at,Ye,ze),p.uploadCommonUniforms(U,Ye,at.tileID.toUnwrapped()),Ye.draw(p,q.TRIANGLES,X,ne,ge,Gr.disabled,nt,o.id,Ge,We,Ct,o.paint,Z.zoom,Fe,[Ze])}},heatmap:function(p,n,o,m){if(o.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const v=p.context,S=v.gl,D=en.disabled,L=new dn([S.ONE,S.ONE,S.ONE,S.ONE],a.aj.transparent,[!0,!0,!0,!0]);(function(ne,ge,he,ve){const we=ne.gl,ze=ge.width*ve,Oe=ge.height*ve;ne.activeTexture.set(we.TEXTURE1),ne.viewport.set([0,0,ze,Oe]);let Fe=he.heatmapFbo;if(!Fe||Fe&&(Fe.width!==ze||Fe.height!==Oe)){Fe&&Fe.destroy();const Ye=we.createTexture();we.bindTexture(we.TEXTURE_2D,Ye),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_WRAP_S,we.CLAMP_TO_EDGE),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_WRAP_T,we.CLAMP_TO_EDGE),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_MIN_FILTER,we.LINEAR),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_MAG_FILTER,we.LINEAR),Fe=he.heatmapFbo=ne.createFramebuffer(ze,Oe,!0,null),function(Ge,Ze,We,nt,at,Ct){const _t=Ge.gl;_t.texImage2D(_t.TEXTURE_2D,0,Ge.extRenderToTextureHalfFloat?_t.RGBA16F:_t.RGBA,at,Ct,0,_t.RGBA,Ge.extRenderToTextureHalfFloat?_t.HALF_FLOAT:_t.UNSIGNED_BYTE,null),nt.colorAttachment.set(We)}(ne,0,Ye,Fe,ze,Oe)}else we.bindTexture(we.TEXTURE_2D,Fe.colorAttachment.get()),ne.bindFramebuffer.set(Fe.framebuffer)})(v,p,o,p.transform.projection.name==="globe"?.5:.25),v.clear({color:a.aj.transparent});const O=p.transform,U=O.projection.name==="globe",q=U?["PROJECTION_GLOBE_VIEW"]:[],Z=U?Gr.frontCCW:Gr.disabled,X=[a.at(O.center.lng),a.aA(O.center.lat)];for(let ne=0;ne<m.length;ne++){const ge=m[ne];if(n.hasRenderableParent(ge))continue;const he=n.getTile(ge),ve=he.getBucket(o);if(!ve||ve.projection.name!==O.projection.name)continue;const we=p.isTileAffectedByFog(ge),ze=ve.programConfigurations.get(o.id),Oe=p.getOrCreateProgram("heatmap",{config:ze,defines:q,overrideFog:we}),{zoom:Fe}=p.transform;p.terrain&&p.terrain.setupElevationDraw(he,Oe),p.uploadCommonUniforms(v,Oe,ge.toUnwrapped());const Ye=O.projection.createInversionMatrix(O,ge.canonical);Oe.draw(p,S.TRIANGLES,Rr.disabled,D,L,Z,ic(p,ge,he,Ye,X,Fe,o.paint.get("heatmap-intensity")),o.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,o.paint,p.transform.zoom,ze,U?[ve.globeExtVertexBuffer]:null)}v.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(v,S){const D=v.context,L=D.gl,O=S.heatmapFbo;if(!O)return;D.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,O.colorAttachment.get()),D.activeTexture.set(L.TEXTURE1);let U=S.colorRampTexture;U||(U=S.colorRampTexture=new a.T(D,S.colorRamp,L.RGBA8)),U.bind(L.LINEAR,L.CLAMP_TO_EDGE),v.getOrCreateProgram("heatmapTexture").draw(v,L.TRIANGLES,Rr.disabled,en.disabled,v.colorModeForRenderPass(),Gr.disabled,((q,Z,X,ne)=>({u_image:0,u_color_ramp:1,u_opacity:Z.paint.get("heatmap-opacity")}))(0,S),S.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,S.paint,v.transform.zoom)}(p,o))},line:function(p,n,o,m){if(p.renderPass!=="translucent")return;const v=o.paint.get("line-opacity"),S=o.paint.get("line-width");if(v.constantOr(1)===0||S.constantOr(1)===0)return;const D=o.paint.get("line-emissive-strength"),L=o.paint.get("line-occlusion-opacity"),O=o.layout.get("line-elevation-reference"),U=o.layout.get("line-width-unit")==="meters",q=O==="sea",Z=p.context,X=Z.gl,ne=!o.isDraped();if(ne&&p.transform.projection.name==="globe")return;const ge=o.layout.get("line-cross-slope"),he=ge!==void 0,ve=ge<1,we=ne?new Rr(p.depthOcclusion?X.GREATER:X.LEQUAL,Rr.ReadOnly,p.depthRangeFor3D):p.depthModeForSublayer(0,Rr.ReadOnly),ze=p.colorModeForDrapableLayerRenderPass(D),Oe=p.terrain&&p.terrain.renderingToTexture,Fe=Oe?1:a.q.devicePixelRatio,Ye=o.paint.get("line-dasharray"),Ge=Ye.constantOr(1),Ze=o.layout.get("line-cap"),We=Ye.constantOr(null),nt=Ze.constantOr(null),at=o.paint.get("line-pattern"),Ct=at.constantOr(1),_t=at.constantOr(null),lt=o.paint.get("line-opacity").constantOr(1);let mt=!Ct&&lt!==1||p.depthOcclusion&&L>0&&L<1;const Nt=o.paint.get("line-gradient"),qt=Ct?"linePattern":"line",Zt=a.c_(o);let xt;if(Oe&&p.terrain&&p.terrain.clipOrMaskOverlapStencilType()&&(mt=!1),L!==0&&p.depthOcclusion){const Mt=o.paint._values["line-opacity"];Mt&&Mt.value&&Mt.value.kind==="constant"?xt=Mt.value:a.w(`Occlusion opacity for layer ${o.id} is supported only when line-opacity isn't data-driven.`)}if(ne&&(p.forceTerrainMode=!0),!ne&&L!==0&&p.terrain&&!Oe)return void a.w(`Occlusion opacity for layer ${o.id} is supported on terrain only if the layer has line-z-offset enabled.`);const Ft=mt&&ne?p.stencilModeFor3D():en.disabled;ne&&(Zt.push("ELEVATED"),he&&Zt.push(ve?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),q&&Zt.push("ELEVATION_REFERENCE_SEA")),S.value.kind!=="constant"&&S.value.isLineProgressConstant===!1&&Zt.push("VARIABLE_LINE_WIDTH");for(const Mt of m){const Qt=n.getTile(Mt);if(Ct&&!Qt.patternsLoaded())continue;const Ot=Qt.getBucket(o);if(!Ot)continue;p.prepareDrawTile();const zt=Ot.programConfigurations.get(o.id),dr=p.isTileAffectedByFog(Mt),rr=p.getOrCreateProgram(qt,{config:zt,defines:Zt,overrideFog:dr,overrideRtt:!ne&&void 0});if(_t&&Qt.imageAtlas){const ln=a.A.from(_t),pa=Qt.imageAtlas.patternPositions[ln.getSerializedPrimary()];pa&&zt.setConstantPatternPositions(pa)}if(!Ct&&We&&nt&&Qt.lineAtlas){const ln=Qt.lineAtlas.getDash(We,nt);ln&&zt.setConstantPatternPositions(ln)}let[yr,_r]=o.paint.get("line-trim-offset");(nt==="round"||nt==="square")&&yr!==_r&&(yr===0&&(yr-=1),_r===1&&(_r+=1));const Kr=Oe?Mt.projMatrix:null,Ar=U?1/Ot.tileToMeter/a.ar(Qt,1,p.transform.zoom):1,zr=U?1/Ot.tileToMeter/a.ar(Qt,1,Math.floor(p.transform.zoom)):1,Hr=Ct?a.c$(p,Qt,o,Kr,Fe,Ar,zr,[yr,_r]):a.d0(p,Qt,o,Kr,Ot.lineClipsArray.length,Fe,Ar,zr,[yr,_r]);if(Nt){const ln=Ot.gradients[o.id];let pa=ln.texture;if(o.gradientVersion!==ln.version){let ma=256;if(o.stepInterpolant){const Gn=n.getSource().maxzoom,Kn=Mt.canonical.z===Gn?Math.ceil(1<<p.transform.maxZoom-Mt.canonical.z):1;ma=a.aw(a.d1(Ot.maxLineLength/a.ag*1024*Kn),256,Z.maxTextureSize)}ln.gradient=a.d2({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:ma,image:ln.gradient||void 0,clips:Ot.lineClipsArray}),ln.texture?ln.texture.update(ln.gradient):ln.texture=new a.T(Z,ln.gradient,X.RGBA8),ln.version=o.gradientVersion,pa=ln.texture}Z.activeTexture.set(X.TEXTURE1),pa.bind(o.stepInterpolant?X.NEAREST:X.LINEAR,X.CLAMP_TO_EDGE)}Ge&&(Z.activeTexture.set(X.TEXTURE0),Qt.lineAtlasTexture&&Qt.lineAtlasTexture.bind(X.LINEAR,X.REPEAT),zt.updatePaintBuffers()),Ct&&(Z.activeTexture.set(X.TEXTURE0),Qt.imageAtlasTexture&&Qt.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),zt.updatePaintBuffers()),ne&&!q&&p.terrain.setupElevationDraw(Qt,rr),p.uploadCommonUniforms(Z,rr,Mt.toUnwrapped());const mn=ln=>{xt!=null&&(xt.value=lt*L),rr.draw(p,X.TRIANGLES,we,ln,ze,Gr.disabled,Hr,o.id,Ot.layoutVertexBuffer,Ot.indexBuffer,Ot.segments,o.paint,p.transform.zoom,zt,[Ot.layoutVertexBuffer2,Ot.patternVertexBuffer,Ot.zOffsetVertexBuffer]),xt!=null&&(xt.value=lt)};if(mt&&!ne){const ln=p.stencilModeForClipping(Mt).ref;ln===0&&Oe&&Z.clear({stencil:0});const pa={func:X.EQUAL,mask:255};Hr.u_alpha_discard_threshold=.8,mn(new en(pa,ln,255,X.KEEP,X.KEEP,X.INVERT)),Hr.u_alpha_discard_threshold=0,mn(new en(pa,ln,255,X.KEEP,X.KEEP,X.KEEP))}else mt&&ne&&(Hr.u_alpha_discard_threshold=.001),mn(ne?Ft:p.stencilModeForClipping(Mt))}ne&&(p.forceTerrainMode=!1),mt&&(p.resetStencilClippingMasks(),Oe&&Z.clear({stencil:0})),L===0||p.depthOcclusion||Oe||p.layersWithOcclusionOpacity.push(p.currentLayer)},fill:function(p,n,o,m){const v=o.paint.get("fill-color"),S=o.paint.get("fill-opacity"),D=o.is3D(),L=new Rr(p.context.gl.LEQUAL,Rr.ReadWrite,p.depthRangeFor3D);if(S.constantOr(1)===0)return;const O=o.paint.get("fill-emissive-strength"),U=p.colorModeForDrapableLayerRenderPass(O),q=o.paint.get("fill-pattern"),Z=p.opaquePassEnabledForLayer()&&!q.constantOr(1)&&v.constantOr(a.aj.transparent).a===1&&S.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===Z){const X=D?L:p.depthModeForSublayer(1,p.renderPass==="opaque"?Rr.ReadWrite:Rr.ReadOnly);oc(p,n,o,m,X,U,!1)}if(!D&&p.renderPass==="translucent"&&o.paint.get("fill-antialias")){const X=D?L:p.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,Rr.ReadOnly);oc(p,n,o,m,X,U,!0)}},"fill-extrusion":function(p,n,o,m){const v=o.paint.get("fill-extrusion-opacity"),S=p.context,D=S.gl,L=p.terrain,O=L&&L.renderingToTexture;if(v===0)return;const U=p.conflationActive&&p.style.isLayerClipped(o,n.getSource()),q=p.style.order.indexOf(o.fqid);if(U&&function(Z,X,ne,ge,he){for(const ve of ge){const we=X.getTile(ve).getBucket(ne);we&&(we.updateReplacement(ve,Z.replacementSource,he),we.uploadCentroid(Z.context))}}(p,n,o,m,q),L||U)for(const Z of m){const X=n.getTile(Z).getBucket(o);X&&Ud(p.context,n,Z,X,o,L,U)}if(p.renderPass==="shadow"&&p.shadowRenderer){const Z=p.shadowRenderer;if(L&&v<.65&&o._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof a.a9)return;const X=Z.getShadowPassDepthMode(),ne=Z.getShadowPassColorMode();il(p,n,o,m,X,en.disabled,ne,U)}else if(p.renderPass==="translucent"){const Z=!o.paint.get("fill-extrusion-pattern").constantOr(1),X=o.paint.get("fill-extrusion-color").constantOr(a.aj.white);if(!O&&X.a!==0){const ne=new Rr(p.context.gl.LEQUAL,Rr.ReadWrite,p.depthRangeFor3D);v===1&&Z?il(p,n,o,m,ne,en.disabled,dn.unblended,U):(il(p,n,o,m,ne,en.disabled,dn.disabled,U),il(p,n,o,m,ne,p.stencilModeFor3D(),p.colorModeForRenderPass(),U),p.resetStencilClippingMasks())}if(p.style.enable3dLights()&&Z&&(!L&&p.transform.projection.name!=="globe"||O)){const ne=o.paint.get("fill-extrusion-opacity"),ge=o.paint.get("fill-extrusion-ambient-occlusion-intensity"),he=o.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),ve=o.paint.get("fill-extrusion-flood-light-intensity"),we=o.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",ze=o.paint.get("fill-extrusion-flood-light-color").toRenderColor(we?null:o.lut).toArray01().slice(0,3),Oe=ge>0&&he>0,Fe=ve>0,Ye=(Ze,We,nt)=>(1-nt)*Ze+nt*We,Ge=Ze=>{const We=p.depthModeForSublayer(1,Rr.ReadOnly,D.LEQUAL,!0),nt=o.paint.get(Ze?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),at=Ye(.1,3,nt),Ct=p._showOverdrawInspector;if(!Ct){const _t=new en({func:D.ALWAYS,mask:255},255,255,D.KEEP,D.KEEP,D.REPLACE),lt=new dn([D.ONE,D.ONE,D.ONE,D.ONE],a.aj.transparent,[!1,!1,!1,!0],D.MIN);Cl(p,n,o,m,We,_t,lt,Gr.disabled,Ze,"sdf",ne,ge,he,ve,ze,at,U,!1)}{const _t=Ct?en.disabled:new en({func:D.EQUAL,mask:255},255,255,D.KEEP,D.DECR,D.DECR),lt=Ct?p.colorModeForRenderPass():new dn([D.ONE_MINUS_DST_ALPHA,D.DST_ALPHA,D.ONE,D.ONE],a.aj.transparent,[!0,!0,!0,!0]);Cl(p,n,o,m,We,_t,lt,Gr.disabled,Ze,"color",ne,ge,he,ve,ze,at,U,!1)}};if(O){const Ze=(We,nt,at)=>{const Ct=p.depthModeForSublayer(1,Rr.ReadOnly,D.LEQUAL,!1),_t=o.paint.get(We?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),lt=Ye(.1,3,_t);{const mt=new dn([D.ONE,D.ONE,D.ONE,D.ONE],a.aj.transparent,[!1,!1,!1,!0]);Cl(p,n,o,m,Ct,en.disabled,mt,Gr.disabled,We,"clear",ne,ge,he,ve,ze,lt,U,nt)}{const mt=new en({func:D.ALWAYS,mask:255},255,255,D.KEEP,D.KEEP,D.REPLACE),Nt=new dn([D.ONE,D.ONE,D.ONE,D.ONE],a.aj.transparent,[!1,!1,!1,!0],D.MIN);Cl(p,n,o,m,Ct,mt,Nt,Gr.disabled,We,"sdf",ne,ge,he,ve,ze,lt,U,nt)}{const mt=We?D.ZERO:D.ONE_MINUS_DST_ALPHA,Nt=new en({func:D.EQUAL,mask:255},255,255,D.KEEP,D.DECR,D.DECR),qt=new dn([mt,D.DST_ALPHA,D.ONE_MINUS_DST_ALPHA,D.ZERO],a.aj.transparent,[!0,!0,!0,!0]);Cl(p,n,o,m,Ct,Nt,qt,Gr.disabled,We,"color",ne,ge,he,ve,ze,lt,U,nt)}{const mt=new dn([D.ONE,D.ONE,D.ONE,We?D.ZERO:D.ONE],a.aj.transparent,[!1,!1,!1,!0],We?D.FUNC_ADD:D.MAX);Cl(p,n,o,m,Ct,en.disabled,mt,Gr.disabled,We,"clear",ne,ge,he,ve,ze,lt,U,nt,at)}};if(Oe||Fe){let We;if(p.prepareDrawTile(),L){const nt=L.drapeBufferSize[0],at=L.drapeBufferSize[1];We=L.framebufferCopyTexture,We&&(!We||We.size[0]===nt&&We.size[1]===at)||(We&&We.destroy(),We=L.framebufferCopyTexture=new a.T(S,new a.r({width:nt,height:at}),D.RGBA8)),We.bind(D.LINEAR,D.CLAMP_TO_EDGE),D.copyTexSubImage2D(D.TEXTURE_2D,0,0,0,0,0,nt,at)}Oe&&Ze(!0,!1,We),Fe&&Ze(!1,!0,We)}}else Oe&&Ge(!0),Fe&&Ge(!1),(Oe||Fe)&&p.resetStencilClippingMasks()}}},hillshade:function(p,n,o,m){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent"||p.style.disableElevatedTerrain)return;const v=p.context,S=p.terrain&&p.terrain.renderingToTexture,[D,L]=p.renderPass!=="translucent"||S?[{},m]:p.stencilConfigForOverlap(m);for(const O of L){const U=n.getTile(O);if(U.needsHillshadePrepare&&p.renderPass==="offscreen")S0(p,U,o);else if(p.renderPass==="translucent"){const q=p.depthModeForSublayer(0,Rr.ReadOnly),Z=o.paint.get("hillshade-emissive-strength"),X=p.colorModeForDrapableLayerRenderPass(Z),ne=S&&p.terrain?p.terrain.stencilModeForRTTOverlap(O):D[O.overscaledZ];$h(p,O,U,o,q,ne,X)}}v.viewport.set([0,0,p.width,p.height]),p.resetStencilClippingMasks()},raster:function(p,n,o,m,v,S){if(p.renderPass!=="translucent"||o.paint.get("raster-opacity")===0)return;const D=p.transform.projection.name==="globe",L=o.paint.get("raster-elevation")!==0,O=L&&D;if(p.renderElevatedRasterBackface&&!O)return;const U=p.context,q=U.gl,Z=n.getSource(),X=function(Ge,Ze,We,nt){const at=Ze.paint.get("raster-color"),Ct=Ge.type==="raster-array",_t=[],lt=Ze.paint.get("raster-resampling"),mt=Ze.paint.get("raster-color-mix");let Nt=Ze.paint.get("raster-color-range");const qt=[mt[0],mt[1],mt[2],0],Zt=mt[3];let xt=lt==="nearest"?nt.NEAREST:nt.LINEAR;if(Ct&&(_t.push("RASTER_ARRAY"),at||_t.push("RASTER_COLOR"),lt==="linear"&&_t.push("RASTER_ARRAY_LINEAR"),xt=nt.NEAREST,!Nt&&Ge.rasterLayers)){const Ft=Ge.rasterLayers.find(({id:Mt})=>Mt===Ze.sourceLayer);Ft&&Ft.fields&&Ft.fields.range&&(Nt=Ft.fields.range)}if(Nt=Nt||[0,1],at){_t.push("RASTER_COLOR"),We.activeTexture.set(nt.TEXTURE2),Ze.updateColorRamp(Nt);let Ft=Ze.colorRampTexture;Ft||(Ft=Ze.colorRampTexture=new a.T(We,Ze.colorRamp,nt.RGBA8)),Ft.bind(nt.LINEAR,nt.CLAMP_TO_EDGE)}return{mix:qt,range:Nt,offset:Zt,defines:_t,resampling:xt}}(Z,o,U,q);if(Z instanceof a.aJ&&!m.length&&!D)return;const ne=o.paint.get("raster-emissive-strength"),ge=p.colorModeForDrapableLayerRenderPass(ne),he=p.terrain&&p.terrain.renderingToTexture,ve=!p.options.moving,we=o.paint.get("raster-resampling")==="nearest"?q.NEAREST:q.LINEAR;if(Z instanceof a.aJ&&!m.length&&(Z.onNorthPole||Z.onSouthPole)){const Ge=L?p.stencilModeFor3D():en.disabled;return void lc(!!Z.onNorthPole,null,p,n,o,ne,X,Gr.disabled,Ge)}if(!m.length)return;const[ze,Oe]=Z instanceof a.aJ||he?[{},m]:p.stencilConfigForOverlap(m),Fe=Oe[Oe.length-1].overscaledZ;O&&X.defines.push("PROJECTION_GLOBE_VIEW"),L&&X.defines.push("RENDER_CUTOFF");const Ye=(Ge,Ze,We)=>{for(const nt of Ge){const at=nt.toUnwrapped(),Ct=n.getTile(nt);if(he&&(!Ct||!Ct.hasData()))continue;U.activeTexture.set(q.TEXTURE0);const _t=Tt(Ct,Z,o,X);if(!_t||!_t.texture)continue;const{texture:lt,mix:mt,offset:Nt,tileSize:qt,buffer:Zt}=_t;let xt,Ft;he?(xt=Rr.disabled,Ft=nt.projMatrix):L?(xt=new Rr(q.LEQUAL,Rr.ReadWrite,p.depthRangeFor3D),Ft=D?Float32Array.from(p.transform.expandedFarZProjMatrix):p.transform.calculateProjMatrix(at,ve)):(xt=p.depthModeForSublayer(nt.overscaledZ-Fe,o.paint.get("raster-opacity")===1?Rr.ReadWrite:Rr.ReadOnly,q.LESS),Ft=p.transform.calculateProjMatrix(at,ve));const Mt=p.terrain&&he?p.terrain.stencilModeForRTTOverlap(nt):ze[nt.overscaledZ],Qt=S?0:o.paint.get("raster-fade-duration");Ct.registerFadeDuration(Qt);const Ot=n.findLoadedParent(nt,0),zt=Hu(Ct,Ot,n,p.transform,Qt);let dr,rr;p.terrain&&p.terrain.prepareDrawTile(),U.activeTexture.set(q.TEXTURE0),lt.bind(we,q.CLAMP_TO_EDGE),U.activeTexture.set(q.TEXTURE1),Ot?(Ot.texture&&Ot.texture.bind(we,q.CLAMP_TO_EDGE),dr=Math.pow(2,Ot.tileID.overscaledZ-Ct.tileID.overscaledZ),rr=[Ct.tileID.canonical.x*dr%1,Ct.tileID.canonical.y*dr%1]):lt.bind(we,q.CLAMP_TO_EDGE),lt.useMipmap&&U.extTextureFilterAnisotropic&&p.transform.pitch>20&&q.texParameterf(q.TEXTURE_2D,U.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,U.extTextureFilterAnisotropicMax);const yr=p.transform;let _r;const Kr=L?Ma(yr):[0,0,0,0];let Ar,zr,Hr,mn,ln,pa=0;if(O&&Z instanceof a.aJ&&Z.coordinates.length>3)Ar=Float32Array.from(a.bb(a.cH(new a.bT(0,0,0)))),zr=Float32Array.from(yr.globeMatrix),Hr=Float32Array.from(a.cD(yr)),mn=[a.at(yr.center.lng),a.aA(yr.center.lat)],_r=Z.elevatedGlobePerspectiveTransform,ln=Z.elevatedGlobeGridMatrix||new Float32Array(9);else if(O){const sn=a.cE(nt.canonical);pa=a.cF(sn.getCenter().lat),Ar=Float32Array.from(a.bb(a.cH(nt.canonical))),zr=Float32Array.from(yr.globeMatrix),Hr=Float32Array.from(a.cD(yr)),mn=[a.at(yr.center.lng),a.aA(yr.center.lat)],_r=[0,0],ln=Float32Array.from(a.cG(nt.canonical,sn,pa,yr.worldSize/yr._pixelsPerMercatorPixel))}else _r=Z instanceof a.aJ?Z.perspectiveTransform:[0,0],Ar=new Float32Array(16),zr=new Float32Array(9),Hr=new Float32Array(16),mn=[0,0],ln=new Float32Array(9);const ma=Od(Ft,Ar,zr,Hr,ln,rr||[0,0],a.ae(p.transform.zoom),mn,Kr,dr||1,zt,o,_r,L?o.paint.get("raster-elevation"):0,2,mt,Nt,X.range,qt,Zt,ne),Gn=p.isTileAffectedByFog(nt),Kn=p.getOrCreateProgram("raster",{defines:X.defines,overrideFog:Gn});if(p.uploadCommonUniforms(U,Kn,at),Z instanceof a.aJ){const sn=Z.elevatedGlobeVertexBuffer,jr=Z.elevatedGlobeIndexBuffer;if(he||!D)Z.boundsBuffer&&Z.boundsSegments&&Kn.draw(p,q.TRIANGLES,xt,en.disabled,ge,Gr.disabled,ma,o.id,Z.boundsBuffer,p.quadTriangleIndexBuffer,Z.boundsSegments);else if(sn&&jr){const Vn=yr.zoom<=a.c6?Z.elevatedGlobeSegments:Z.getSegmentsForLongitude(yr.center.lng);Vn&&Kn.draw(p,q.TRIANGLES,xt,en.disabled,ge,Ze,ma,o.id,sn,jr,Vn)}}else if(O){xt=new Rr(q.LEQUAL,Rr.ReadOnly,p.depthRangeFor3D);const sn=p.globeSharedBuffers;if(sn){const[jr,Vn,Zr]=sn.getGridBuffers(pa,!1);Kn.draw(p,q.TRIANGLES,xt,We||Mt,p.colorModeForRenderPass(),Ze,ma,o.id,jr,Vn,Zr)}}else{const{tileBoundsBuffer:sn,tileBoundsIndexBuffer:jr,tileBoundsSegments:Vn}=p.getTileBoundsBuffers(Ct);Kn.draw(p,q.TRIANGLES,xt,Mt,ge,Gr.disabled,ma,o.id,sn,jr,Vn)}}if(!(Z instanceof a.aJ)&&O)for(const nt of Ge){const at=nt.canonical.y===(1<<nt.canonical.z)-1;nt.canonical.y===0&&lc(!0,nt,p,n,o,ne,X,Ze,We||en.disabled),at&&lc(!1,nt,p,n,o,ne,X,Ze===Gr.frontCW?Gr.backCW:Gr.frontCW,We||en.disabled)}};O?Ye(Oe,p.renderElevatedRasterBackface?Gr.backCW:Gr.frontCW,p.stencilModeFor3D()):Ye(Oe,Gr.disabled,void 0),p.resetStencilClippingMasks()},"raster-particle":function(p,n,o,m,v,S){p.renderPass==="offscreen"&&function(D,L,O,U){if(!U.length)return;const q=D.context,Z=q.gl,X=L.getSource();if(!(X instanceof yl))return;const ne=Math.ceil(Math.sqrt(O.paint.get("raster-particle-count")));let ge=O.particlePositionRGBAImage;if(!ge||ge.width!==ne){const Oe=function(Fe){const Ye=Fe*Fe,Ge=new Uint8Array(4*Ye),Ze=function(nt){return nt|=0,nt=Math.imul(2747636419^nt,2654435769),nt=Math.imul(nt^nt>>>16,2654435769),((nt=Math.imul(nt^nt>>>16,2654435769))>>>0)/4294967296},We=1/1.1;for(let nt=0;nt<Ye;nt++){const at=We*(Ze(2*nt+0)+Ss),Ct=We*(Ze(2*nt+1)+Ss),_t=255*at%1,lt=255*Ct%1,mt=_t,Nt=Ct-lt/255,qt=lt;Ge[4*nt+0]=255*(at-_t/255),Ge[4*nt+1]=255*mt,Ge[4*nt+2]=255*Nt,Ge[4*nt+3]=255*qt}return Ge}(ne);ge=O.particlePositionRGBAImage=new a.r({width:ne,height:ne},Oe)}let he=O.particleFramebuffer;he?he.width!==ne&&(he.destroy(),he=O.particleFramebuffer=q.createFramebuffer(ne,ne,!0,null)):he=O.particleFramebuffer=q.createFramebuffer(ne,ne,!0,null);const ve=[];for(const Oe of U){const Fe=L.getTile(Oe);if(!(Fe instanceof Ch))continue;const Ye=Hh(Fe,X,O);if(!Ye)continue;const Ge=[Fe.tileSize,Fe.tileSize];let Ze=O.tileFramebuffer;Ze||(Ze=O.tileFramebuffer=q.createFramebuffer(Ge[0],Ge[1],!0,null));let We=Fe.rasterParticleState;We||(We=Fe.rasterParticleState=new qd(q,Oe,Ge,ge));const nt=We.update(O.lastInvalidatedAt);We.particleTextureDimension!==ne&&We.updateParticleTexture(Oe,ge);const at=We.targetColorTexture;We.targetColorTexture=We.backgroundColorTexture,We.backgroundColorTexture=at;const Ct=We.particleTexture0;We.particleTexture0=We.particleTexture1,We.particleTexture1=Ct,ve.push([Oe,Ye,We,nt])}if(ve.length===0)return;const we=a.q.now(),ze=O.previousDrawTimestamp?.001*(we-O.previousDrawTimestamp):.0167;if(O.previousDrawTimestamp=we,O.hasColorMap()){q.activeTexture.set(Z.TEXTURE0+2);let Oe=O.colorRampTexture;Oe||(Oe=O.colorRampTexture=new a.T(q,O.colorRamp,Z.RGBA8)),Oe.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)}q.bindFramebuffer.set(O.tileFramebuffer.framebuffer),function(Oe,Fe,Ye){const Ge=Oe.context,Ze=Ge.gl,We=Fe.tileFramebuffer;Ge.activeTexture.set(Ze.TEXTURE0);const nt={u_texture:0,u_opacity:1.05*(Ct=Fe.paint.get("raster-particle-fade-opacity-factor"))/(Ct+.05)},at=Oe.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Ct;for(const _t of Ye){const[,,lt,mt]=_t;We.colorAttachment.set(lt.targetColorTexture.texture),Ge.viewport.set([0,0,We.width,We.height]),Ge.clear({color:a.aj.transparent}),mt&&(lt.backgroundColorTexture.bind(Ze.NEAREST,Ze.CLAMP_TO_EDGE),at.draw(Oe,Ze.TRIANGLES,Rr.disabled,en.disabled,dn.alphaBlended,Gr.disabled,nt,Fe.id,Oe.viewportBuffer,Oe.quadTriangleIndexBuffer,Oe.viewportSegments))}}(D,O,ve),function(Oe,Fe,Ye,Ge){const Ze=Oe.context,We=Ze.gl,nt=Ye.tileFramebuffer,at=Oe.transform.projection.name==="globe",Ct=Ye.paint.get("raster-particle-max-speed");for(const _t of Ge){const[lt,mt,Nt]=_t;Ze.activeTexture.set(We.TEXTURE0+0),mt.texture.bind(We.LINEAR,We.CLAMP_TO_EDGE),nt.colorAttachment.set(Nt.targetColorTexture.texture);const qt=Oe.getOrCreateProgram("rasterParticleDraw",{defines:mt.defines,overrideFog:!1});Ze.activeTexture.set(We.TEXTURE0+1);const Zt=mt.scalarData?[]:[0,1,2,3].map(Mt=>a.d4[Mt](lt));Zt.push(lt);const xt=lt.canonical.x,Ft=lt.canonical.y;for(const Mt of Zt){const Qt=Fe.getTile(at?Mt.wrapped():Mt);if(!Qt)continue;const Ot=Qt.rasterParticleState;if(!Ot)continue;const zt=Mt.canonical.x+(1<<Mt.canonical.z)*(Mt.wrap-lt.wrap),dr=Mt.canonical.y;Ot.particleTexture0.bind(We.NEAREST,We.CLAMP_TO_EDGE);const rr=Ir(1,Ot.particleTexture0.size[0],[zt-xt,dr-Ft],0,mt.texture.size,2,Ct,mt.textureOffset,mt.scale,mt.offset);qt.draw(Oe,We.POINTS,Rr.disabled,en.disabled,dn.alphaBlended,Gr.disabled,rr,Ye.id,Ot.particleIndexBuffer,void 0,Ot.particleSegment)}}}(D,L,O,ve),q.bindFramebuffer.set(O.particleFramebuffer.framebuffer),function(Oe,Fe,Ye,Ge){const Ze=Oe.context,We=Ze.gl,nt=Fe.paint.get("raster-particle-max-speed"),at=Ge*Fe.paint.get("raster-particle-speed-factor")*.15,Ct=function(lt){return Math.pow(lt,6)}(.01+1*Fe.paint.get("raster-particle-reset-rate-factor")),_t=Fe.particleFramebuffer;Ze.viewport.set([0,0,_t.width,_t.height]);for(const lt of Ye){const[,mt,Nt]=lt;Ze.activeTexture.set(We.TEXTURE0+0),mt.texture.bind(We.LINEAR,We.CLAMP_TO_EDGE),Ze.activeTexture.set(We.TEXTURE0+1);const qt=Nt.particleTexture0;qt.bind(We.NEAREST,We.CLAMP_TO_EDGE);const Zt=Tl(1,qt.size[0],0,mt.texture.size,nt,at,Ct,mt.textureOffset,mt.scale,mt.offset);_t.colorAttachment.set(Nt.particleTexture1.texture),Ze.clear({color:a.aj.transparent}),Oe.getOrCreateProgram("rasterParticleUpdate",{defines:mt.defines}).draw(Oe,We.TRIANGLES,Rr.disabled,en.disabled,dn.unblended,Gr.disabled,Zt,Fe.id,Oe.viewportBuffer,Oe.quadTriangleIndexBuffer,Oe.viewportSegments)}}(D,O,ve,ze)}(p,n,o,m),p.renderPass==="translucent"&&(function(D,L,O,U,q){const Z=D.context,X=Z.gl,ne=L.getSource().tileSize,ge=5*(1-a.ac(a.bY,a.bY+1,D.transform.zoom))*ne+O.paint.get("raster-particle-elevation"),he=!D.options.moving,ve=D.transform.projection.name==="globe";if(!U.length)return;const[we,ze]=D.stencilConfigForOverlap(U),Oe=[];ve&&Oe.push("PROJECTION_GLOBE_VIEW");const Fe=D.stencilModeFor3D();for(const Ye of ze){const Ge=Ye.toUnwrapped(),Ze=L.getTile(Ye);if(!Ze.rasterParticleState)continue;const We=Ze.rasterParticleState,nt=100;Ze.registerFadeDuration(nt);const at=L.findLoadedParent(Ye,0),Ct=Hu(Ze,at,L,D.transform,nt);let _t,lt;D.terrain&&D.terrain.prepareDrawTile(),Z.activeTexture.set(X.TEXTURE0),We.targetColorTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),Z.activeTexture.set(X.TEXTURE1),at&&at.rasterParticleState?(at.rasterParticleState.targetColorTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),_t=Math.pow(2,at.tileID.overscaledZ-Ze.tileID.overscaledZ),lt=[Ze.tileID.canonical.x*_t%1,Ze.tileID.canonical.y*_t%1]):We.targetColorTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE);const mt=ve?Float32Array.from(D.transform.expandedFarZProjMatrix):D.transform.calculateProjMatrix(Ge,he),Nt=D.transform,qt=zs(Nt),Zt=a.cE(Ye.canonical),xt=a.cF(Zt.getCenter().lat);let Ft,Mt,Qt,Ot,zt;ve?(Ft=Float32Array.from(a.bb(a.cH(Ye.canonical))),Mt=Float32Array.from(Nt.globeMatrix),Qt=Float32Array.from(a.cD(Nt)),Ot=[a.at(Nt.center.lng),a.aA(Nt.center.lat)],zt=Float32Array.from(a.cG(Ye.canonical,Zt,xt,Nt.worldSize/Nt._pixelsPerMercatorPixel))):(Ft=new Float32Array(16),Mt=new Float32Array(9),Qt=new Float32Array(16),Ot=[0,0],zt=new Float32Array(9));const dr=Wc(mt,Ft,Mt,Qt,zt,lt||[0,0],a.ae(D.transform.zoom),Ot,qt,_t||1,Ct,ge),rr=D.isTileAffectedByFog(Ye),yr=D.getOrCreateProgram("rasterParticle",{defines:Oe,overrideFog:rr});if(D.uploadCommonUniforms(Z,yr,Ge),ve){const _r=new Rr(X.LEQUAL,Rr.ReadOnly,D.depthRangeFor3D),Kr=0,Ar=D.globeSharedBuffers;if(Ar){const[zr,Hr,mn]=Ar.getGridBuffers(xt,Kr!==0);yr.draw(D,X.TRIANGLES,_r,Fe,dn.alphaBlended,D.renderElevatedRasterBackface?Gr.frontCCW:Gr.backCCW,dr,O.id,zr,Hr,mn)}}else{const _r=D.depthModeForSublayer(0,Rr.ReadOnly),Kr=we[Ye.overscaledZ],{tileBoundsBuffer:Ar,tileBoundsIndexBuffer:zr,tileBoundsSegments:Hr}=D.getTileBoundsBuffers(Ze);yr.draw(D,X.TRIANGLES,_r,Kr,dn.alphaBlended,Gr.disabled,dr,O.id,Ar,zr,Hr)}}D.resetStencilClippingMasks()}(p,n,o,m),p.style.map.triggerRepaint())},background:function(p,n,o,m){const v=o.paint.get("background-color"),S=o.paint.get("background-color-use-theme").constantOr("default")==="none",D=o.paint.get("background-opacity"),L=o.paint.get("background-emissive-strength"),O=o.paint.get("background-pitch-alignment")==="viewport";if(D===0)return;const U=p.context,q=U.gl,Z=p.transform,X=Z.tileSize,ne=o.paint.get("background-pattern");let ge;if(ne!==void 0&&(ne===null||(ge=p.imageManager.getPattern(ne.toString(),o.scope,p.style.getLut(o.scope)),!ge)))return;const he=!ne&&v.a===1&&D===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==he)return;const ve=en.disabled,we=p.depthModeForSublayer(0,he==="opaque"?Rr.ReadWrite:Rr.ReadOnly),ze=p.colorModeForDrapableLayerRenderPass(L),Oe=ne?"backgroundPattern":"background";let Fe,Ye=m;if(Ye||(Fe=p.getBackgroundTiles(),Ye=Object.values(Fe).map(Ge=>Ge.tileID)),ne&&(U.activeTexture.set(q.TEXTURE0),p.imageManager.bind(p.context,o.scope)),O){const Ge=p.getOrCreateProgram(Oe,{overrideFog:!1,overrideRtt:!0}),Ze=new Float32Array(a.ab.mat4.identity([])),We=new a.aG(0,0,0,0,0),nt=ne?El(Ze,L,D,p,0,o.scope,ge,O,{tileID:We,tileSize:X}):rl(Ze,L,D,v.toRenderColor(S?null:o.lut));Ge.draw(p,q.TRIANGLES,we,ve,ze,Gr.disabled,nt,o.id,p.viewportBuffer,p.quadTriangleIndexBuffer,p.viewportSegments)}else for(const Ge of Ye){const Ze=p.isTileAffectedByFog(Ge),We=p.getOrCreateProgram(Oe,{overrideFog:Ze}),nt=Ge.toUnwrapped(),at=m?Ge.projMatrix:p.transform.calculateProjMatrix(nt);p.prepareDrawTile();const Ct=n?n.getTile(Ge):Fe?Fe[Ge.key]:new kc(Ge,X,Z.zoom,p),_t=ne?El(at,L,D,p,0,o.scope,ge,O,{tileID:Ge,tileSize:X}):rl(at,L,D,v.toRenderColor(S?null:o.lut));p.uploadCommonUniforms(U,We,nt);const{tileBoundsBuffer:lt,tileBoundsIndexBuffer:mt,tileBoundsSegments:Nt}=p.getTileBoundsBuffers(Ct);We.draw(p,q.TRIANGLES,we,ve,ze,Gr.disabled,_t,o.id,lt,mt,Nt)}},sky:function(p,n,o){const m=p._atmosphere?a.ae(p.transform.zoom):1,v=o.paint.get("sky-opacity")*m;if(v===0)return;const S=p.context,D=o.paint.get("sky-type"),L=new Rr(S.gl.LEQUAL,Rr.ReadOnly,[0,1]),O=p.frameCounter/1e3%1;D==="atmosphere"?p.renderPass==="offscreen"?o.needsSkyboxCapture(p)&&(function(U,q,Z,X){const ne=U.context,ge=ne.gl;let he=q.skyboxFbo;if(!he){he=q.skyboxFbo=ne.createFramebuffer(32,32,!0,null),q.skyboxGeometry=new Lo(ne),q.skyboxTexture=ne.gl.createTexture(),ge.bindTexture(ge.TEXTURE_CUBE_MAP,q.skyboxTexture),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_WRAP_S,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_WRAP_T,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_MIN_FILTER,ge.LINEAR),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_MAG_FILTER,ge.LINEAR);for(let Oe=0;Oe<6;++Oe)ge.texImage2D(ge.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,0,ge.RGBA,32,32,0,ge.RGBA,ge.UNSIGNED_BYTE,null)}ne.bindFramebuffer.set(he.framebuffer),ne.viewport.set([0,0,32,32]);const ve=q.getCenter(U,!0),we=U.getOrCreateProgram("skyboxCapture"),ze=new Float64Array(16);a.ab.mat4.identity(ze),a.ab.mat4.rotateY(ze,ze,.5*-Math.PI),Yc(U,q,we,ze,ve,0),a.ab.mat4.identity(ze),a.ab.mat4.rotateY(ze,ze,.5*Math.PI),Yc(U,q,we,ze,ve,1),a.ab.mat4.identity(ze),a.ab.mat4.rotateX(ze,ze,.5*-Math.PI),Yc(U,q,we,ze,ve,2),a.ab.mat4.identity(ze),a.ab.mat4.rotateX(ze,ze,.5*Math.PI),Yc(U,q,we,ze,ve,3),a.ab.mat4.identity(ze),Yc(U,q,we,ze,ve,4),a.ab.mat4.identity(ze),a.ab.mat4.rotateY(ze,ze,Math.PI),Yc(U,q,we,ze,ve,5),ne.viewport.set([0,0,U.width,U.height])}(p,o),o.markSkyboxValid(p)):p.renderPass==="sky"&&function(U,q,Z,X,ne){const ge=U.context,he=ge.gl,ve=U.transform,we=U.getOrCreateProgram("skybox");ge.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_CUBE_MAP,q.skyboxTexture);const ze=((Oe,Fe,Ye,Ge,Ze)=>({u_matrix:Oe,u_sun_direction:Fe,u_cubemap:0,u_opacity:Ge,u_temporal_offset:Ze}))(ve.skyboxMatrix,q.getCenter(U,!1),0,X,ne);U.uploadCommonUniforms(ge,we),we.draw(U,he.TRIANGLES,Z,en.disabled,U.colorModeForRenderPass(),Gr.backCW,ze,"skybox",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(p,o,L,v,O):D==="gradient"&&p.renderPass==="sky"&&function(U,q,Z,X,ne){const ge=U.context,he=ge.gl,ve=U.transform,we=U.getOrCreateProgram("skyboxGradient");q.skyboxGeometry||(q.skyboxGeometry=new Lo(ge)),ge.activeTexture.set(he.TEXTURE0);let ze=q.colorRampTexture;ze||(ze=q.colorRampTexture=new a.T(ge,q.colorRamp,he.RGBA8)),ze.bind(he.LINEAR,he.CLAMP_TO_EDGE);const Oe=((Fe,Ye,Ge,Ze,We)=>({u_matrix:Fe,u_color_ramp:0,u_center_direction:Ye,u_radius:a.ai(Ge),u_opacity:Ze,u_temporal_offset:We}))(ve.skyboxMatrix,q.getCenter(U,!1),q.paint.get("sky-gradient-radius"),X,ne);U.uploadCommonUniforms(ge,we),we.draw(U,he.TRIANGLES,Z,en.disabled,U.colorModeForRenderPass(),Gr.backCW,Oe,"skyboxGradient",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(p,o,L,v,O)},debug:function(p,n,o,m,v,S){for(let D=0;D<o.length;D++)if(v){const U=new a.aj(m.r*.8,m.g*.8,m.b*.8,1);Ls(p,n,o[D],m,-1,-1,S),Ls(p,n,o[D],m,-1,1,S),Ls(p,n,o[D],m,1,1,S),Ls(p,n,o[D],m,1,-1,S),Ls(p,n,o[D],U,0,0,S)}else Ls(p,n,o[D],m,0,0,S)},custom:function(p,n,o,m){const v=p.context,S=o.implementation;if(!p.transform.projection.unsupportedLayers||!p.transform.projection.unsupportedLayers.includes("custom")||p.terrain&&(p.terrain.renderingToTexture||p.renderPass==="offscreen")&&o.isDraped(n)){if(p.renderPass==="offscreen"){const D=S.prerender;if(D){if(p.setCustomLayerDefaults(),v.setColorMode(p.colorModeForRenderPass()),p.transform.projection.name==="globe"){const L=p.transform.pointMerc;D.call(S,v.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),a.ae(p.transform.zoom),[L.x,L.y],p.transform.pixelsPerMeterRatio)}else D.call(S,v.gl,p.transform.customLayerMatrix());v.setDirty(),p.setBaseState()}}else if(p.renderPass==="translucent"){if(p.terrain&&p.terrain.renderingToTexture){const L=S.renderToTile;if(L){const O=m[0].canonical,U=new a.aa(O.x+m[0].wrap*(1<<O.z),O.y,O.z);v.setDepthMode(Rr.disabled),v.setStencilMode(en.disabled),v.setColorMode(p.colorModeForRenderPass()),p.setCustomLayerDefaults(),L.call(S,v.gl,U),v.setDirty(),p.setBaseState()}return}p.setCustomLayerDefaults(),v.setColorMode(p.colorModeForRenderPass()),v.setStencilMode(en.disabled);const D=S.renderingMode==="3d"?new Rr(p.context.gl.LEQUAL,Rr.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,Rr.ReadOnly);if(v.setDepthMode(D),p.transform.projection.name==="globe"){const L=p.transform.pointMerc;S.render(v.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),a.ae(p.transform.zoom),[L.x,L.y],p.transform.pixelsPerMeterRatio)}else S.render(v.gl,p.transform.customLayerMatrix());v.setDirty(),p.setBaseState(),v.bindFramebuffer.set(null)}}else a.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(p,n,o,m){if(p.renderPass==="opaque")return;const v=o.paint.get("model-opacity").constantOr(1);if(v===0)return;const S=o.paint.get("model-cast-shadows");if(p.renderPass==="shadow"&&(!S||p.terrain&&v<.65&&o._transitionablePaint._values["model-opacity"].value.expression instanceof a.a9))return;const D=p.shadowRenderer,L=o.paint.get("model-receive-shadows");D&&(D.useNormalOffset=!0,L||(D.enabled=!1));const O=()=>{D&&(D.useNormalOffset=!0,L||(D.enabled=!0))},U=n.getSource();if(p.renderPass==="light-beam"&&U.type!=="batched-model")return;if(U.type==="vector"||U.type==="geojson")return function(we,ze,Oe,Fe,Ye){const Ge=we.transform;if(Ge.projection.name!=="mercator")return void a.w(`Drawing 3D models for ${Ge.projection.name} projection is not yet implemented`);const Ze=Ge.getFreeCameraOptions().position;if(!we.modelManager)return;const We=we.modelManager;Oe.modelManager=We;const nt=we.shadowRenderer;if(!Oe._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const at=Oe._unevaluatedLayout._values["model-id"],Ct={...Oe.layout.get("model-id").parameters},_t=we.style.order.indexOf(Oe.fqid);for(const lt of Fe){const mt=ze.getTile(lt).getBucket(Oe);if(!mt||mt.projection.name!==Ge.projection.name)continue;const Nt=mt.getModelUris();Nt&&!mt.modelsRequested&&(We.addModelsFromBucket(Nt,Ye),mt.modelsRequested=!0);const qt=uc(lt,Ge);Ct.zoom=qt;const Zt=at.possiblyEvaluate(Ct);if(Sp(we,mt,lt),ao.shadowUniformsInitialized=!1,ao.useSingleShadowCascade=!!nt&&nt.getMaxCascadeForTile(lt.toUnwrapped())===0,we.renderPass==="shadow"&&nt){if(we.currentShadowCascade===1&&mt.isInsideFirstShadowMapFrustum)continue;const Mt=Ge.calculatePosMatrix(lt.toUnwrapped(),Ge.worldSize);if(ao.tileMatrix.set(Mt),ao.shadowTileMatrix=Float32Array.from(nt.calculateShadowPassMatrixFromMatrix(Mt)),ao.aabb.min.fill(0),ao.aabb.max[0]=ao.aabb.max[1]=a.ag,ao.aabb.max[2]=0,fc(mt,ao,we,Oe.scope))continue}const xt=1<<lt.canonical.z,Ft=[((Ze.x-lt.wrap)*xt-lt.canonical.x)*a.ag,(Ze.y*xt-lt.canonical.y)*a.ag,Ze.z*xt*a.ag];we.conflationActive&&Object.keys(mt.instancesPerModel).length>0&&we.style.isLayerClipped(Oe,ze.getSource())&&mt.updateReplacement(lt,we.replacementSource,_t,Ye)&&(mt.uploaded=!1,mt.upload(we.context));for(let Mt in mt.instancesPerModel){const Qt=mt.instancesPerModel[Mt];Qt.features.length>0&&(Mt=Zt.evaluate(Qt.features[0].feature,{}));const Ot=We.getModel(Mt,Ye);if(Ot&&Ot.uploaded)for(const zt of Ot.nodes)dc(we,Oe,zt,Qt,Ft,lt,ao)}}}(p,n,o,m,U.type==="vector"?o.scope:""),void O();if(!U.loaded())return;if(U.type==="batched-model")return function(we,ze,Oe,Fe){Oe.resetLayerRenderingStats(we);const Ye=we.context,Ge=we.transform,Ze=we.style.fog,We=we.shadowRenderer;if(Ge.projection.name!=="mercator")return void a.w(`Drawing 3D landmark models for ${Ge.projection.name} projection is not yet implemented`);const nt=we.transform.getFreeCameraOptions().position,at=a.ab.vec3.scale([],[nt.x,nt.y,nt.z],we.transform.worldSize),Ct=a.ab.vec3.negate([],at),_t=a.ab.mat4.identity([]),lt=a.dj(Ge.center.lat,Ge.zoom),mt=a.ab.mat4.fromScaling([],[1,1,1/lt]);a.ab.mat4.translate(_t,_t,Ct);const Nt=Oe.paint.get("model-opacity").constantOr(1),qt=new Rr(Ye.gl.LEQUAL,Rr.ReadWrite,we.depthRangeFor3D),Zt=new Rr(Ye.gl.LEQUAL,Rr.ReadOnly,we.depthRangeFor3D),xt=new a.cd([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),Ft=we.renderPass==="shadow",Mt=Ft&&We?We.getCurrentCascadeFrustum():Ge.getFrustum(Ge.scaleZoom(Ge.worldSize)),Qt=Oe.paint.get("model-front-cutoff"),Ot=Qt[2]<1,zt=bl(we,Oe.paint.get("model-cutoff-fade-range")),dr=Oe.getLayerRenderingStats();(function(rr,yr,_r,Kr){const Ar=rr.terrain?rr.terrain.exaggeration():0,zr=rr.transform.zoom;for(const Hr of Kr){const mn=yr.getTile(Hr).getBucket(_r);mn&&(rr.conflationActive&&mn.updateReplacement(Hr,rr.replacementSource),mn.evaluateScale(rr,_r),rr.terrain&&Ar>0&&mn.elevationUpdate(rr.terrain,Ar,Hr,_r.source),mn.needsReEvaluation(rr,zr,_r)&&mn.evaluate(_r))}})(we,ze,Oe,Fe),function(){let rr,yr,_r;Ot?(rr=Fe.length-1,yr=-1,_r=-1):(rr=0,yr=Fe.length,_r=1);const Kr=new Float64Array(16),Ar=a.ab.vec3.create(),zr=new a.P(0,0);for(let Hr=rr;Hr!==yr;Hr+=_r){const mn=Fe[Hr],ln=ze.getTile(mn).getBucket(Oe);if(!ln||!ln.uploaded)continue;let pa=!1;We&&(pa=We.getMaxCascadeForTile(mn.toUnwrapped())===0);const ma=Ge.calculatePosMatrix(mn.toUnwrapped(),Ge.worldSize),Gn=ln.modelTraits;!Ft&&Ot&&(a.ab.mat4.invert(Kr,ma),a.ab.vec3.transformMat4(Ar,at,Kr),zr.x=Ar[0],zr.y=Ar[1]);const Kn=[];for(const sn of ln.getNodesInfo()){if(sn.hiddenByReplacement||!sn.node.meshes)continue;const jr=sn.node;let Vn=0;we.terrain&&jr.elevation&&(Vn=jr.elevation*we.terrain.exaggeration());const Zr=(()=>{const qr=sn.aabb;return xt.min=[...qr.min],xt.max=[...qr.max],xt.min[2]+=Vn,xt.max[2]+=Vn,a.ab.vec3.transformMat4(xt.min,xt.min,ma),a.ab.vec3.transformMat4(xt.max,xt.max,ma),xt})(),xn=sn.evaluatedScale;if(xn[0]<=1&&xn[1]<=1&&xn[2]<=1&&Zr.intersects(Mt)===0)continue;if(!Ft&&Ot){const qr=.16666666666666666;sn.cameraCollisionOpacity=at[0]>Zr.min[0]&&at[0]<Zr.max[0]&&at[1]>Zr.min[1]&&at[1]<Zr.max[1]&&at[2]*lt<Zr.max[2]&&jr.footprint&&a.bA(zr,jr.footprint)?Math.max(sn.cameraCollisionOpacity-qr,0):Math.min(1,sn.cameraCollisionOpacity+qr)}const vn=[...ma],Mn=jr.anchor?jr.anchor[0]:0,Sn=jr.anchor?jr.anchor[1]:0;a.ab.mat4.translate(vn,vn,[Mn*(xn[0]-1),Sn*(xn[1]-1),Vn]),a.ab.vec3.exactEquals(xn,a.dm)||a.ab.mat4.scale(vn,vn,xn);const Ea=a.ab.mat4.multiply([],vn,jr.matrix),ni=a.ab.mat4.multiply([],Ge.expandedFarZProjMatrix,Ea),Ca=a.ab.mat4.multiply([],Ge.expandedFarZProjMatrix,vn),ia=a.ab.vec4.transformMat4([],[Mn,Sn,Vn,1],ni)[2];jr.hidden=!1;let Hn=Nt;Ft||(Ot&&(Hn*=sn.cameraCollisionOpacity,Hn*=Tp(vn,Ge,sn.aabb,Qt)),Hn*=Qu(zt,ia)),Hn!==0?Kn.push({nodeInfo:sn,depth:ia,opacity:Hn,wvpForNode:ni,wvpForTile:Ca,nodeModelMatrix:Ea,tileModelMatrix:vn}):jr.hidden=!0}Ft||Kn.sort((sn,jr)=>!Ot||sn.opacity===1&&jr.opacity===1?sn.depth<jr.depth?-1:1:sn.opacity===1?-1:jr.opacity===1?1:sn.depth>jr.depth?-1:1);for(const sn of Kn){const jr=sn.nodeInfo,Vn=jr.node;let Zr=a.ab.mat4.multiply([],mt,sn.tileModelMatrix);a.ab.mat4.multiply(Zr,_t,Zr);const xn=a.ab.mat4.invert([],Zr);a.ab.mat4.transpose(xn,xn),a.ab.mat4.scale(xn,xn,hc),Zr=a.ab.mat4.multiply(Zr,Zr,Vn.matrix);const vn=we.renderPass==="light-beam",Mn=Oe.paint.get("model-color-use-theme").constantOr("default")==="none",Sn=Gn&a.dp.HasMapboxMeshFeatures,Ea=Sn?0:jr.evaluatedRMEA[0][2];for(let ni=0;ni<Vn.meshes.length;++ni){const Ca=Vn.meshes[ni],ia=ni===Vn.lightMeshIndex;let Hn=sn.wvpForNode;if(ia){if(!vn&&!we.terrain&&we.shadowRenderer){we.currentLayer<we.firstLightBeamLayer&&(we.firstLightBeamLayer=we.currentLayer);continue}Hn=sn.wvpForTile}else if(vn)continue;const qr={defines:[]},va=[];if(!Ft&&We&&(We.useNormalOffset=!!Ca.normalBuffer),Kh(qr.defines,va,Ca,we,Mn?null:Oe.lut),Sn||qr.defines.push("DIFFUSE_SHADED"),pa&&qr.defines.push("SHADOWS_SINGLE_CASCADE"),dr&&(Ft?dr.numRenderedVerticesInShadowPass+=Ca.vertexArray.length:dr.numRenderedVerticesInTransparentPass+=Ca.vertexArray.length),Ft){cc(Ca,sn.nodeModelMatrix,we,Oe);continue}let Qa=null;if(Ze){const Qi=Fn(sn.nodeModelMatrix,we.transform);if(Qa=new Float32Array(Qi),Ge.projection.name!=="globe"){const ho=Ca.aabb.min,us=Ca.aabb.max,[ll,ds]=Ze.getOpacityForBounds(Qi,ho[0],ho[1],us[0],us[1]);qr.overrideFog=ll>=cr||ds>=cr}}const aa=Ca.material;let za;aa.occlusionTexture&&aa.occlusionTexture.offsetScale&&(za=aa.occlusionTexture.offsetScale,qr.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const Yi=we.getOrCreateProgram("model",qr);!Ft&&We&&We.setupShadowsFromMatrix(sn.tileModelMatrix,Yi,We.useNormalOffset),we.uploadCommonUniforms(Ye,Yi,null,Qa);const Ji=aa.pbrMetallicRoughness;Ji.metallicFactor=.9,Ji.roughnessFactor=.5;const fi=Gh(new Float32Array(Hn),new Float32Array(Zr),new Float32Array(xn),new Float32Array(Vn.matrix),we,sn.opacity,Ji.baseColorFactor.toRenderColor(null),aa.emissiveFactor,Ji.metallicFactor,Ji.roughnessFactor,aa,Ea,Oe,[0,0,0],za);!ia&&(jr.hasTranslucentParts||sn.opacity<1)&&Yi.draw(we,Ye.gl.TRIANGLES,qt,en.disabled,dn.disabled,Gr.backCCW,fi,Oe.id,Ca.vertexBuffer,Ca.indexBuffer,Ca.segments,Oe.paint,we.transform.zoom,void 0,va),Yi.draw(we,Ye.gl.TRIANGLES,ia?Zt:qt,en.disabled,ia||sn.opacity<1||jr.hasTranslucentParts?dn.alphaBlended:dn.unblended,Gr.backCCW,fi,Oe.id,Ca.vertexBuffer,Ca.indexBuffer,Ca.segments,Oe.paint,we.transform.zoom,void 0,va)}}}}()}(p,n,o,m),void O();if(U.type!=="model")return;const q=U.getModels(),Z=[],X=p.transform.getFreeCameraOptions().position,ne=a.ab.vec3.scale([],[X.x,X.y,X.z],p.transform.worldSize);a.ab.vec3.negate(ne,ne);const ge=[],he=[];let ve=0;for(const we of q){const ze=o.paint.get("model-rotation").constantOr(null),Oe=o.paint.get("model-scale").constantOr(null),Fe=o.paint.get("model-translation").constantOr(null);we.computeModelMatrix(p,ze,Oe,Fe,!0,!0,!1);const Ye=a.ab.mat4.identity([]),Ge=a.dj(we.position.lat,p.transform.zoom),Ze=a.ab.mat4.fromScaling([],[1,1,1/Ge]);a.ab.mat4.translate(Ye,Ye,ne),Z.push({zScaleMatrix:Ze,negCameraPosMatrix:Ye});for(const We of we.nodes)Kd(p.transform,We,we.matrix,p.transform.expandedFarZProjMatrix,ve,ge,he);ve++}if(ge.sort((we,ze)=>ze.depth-we.depth),p.renderPass!=="shadow"){if(v===1)for(const we of he)no(we,p,o,Z[we.modelIndex],en.disabled,p.colorModeForRenderPass());else{for(const we of he)no(we,p,o,Z[we.modelIndex],en.disabled,dn.disabled);for(const we of he)no(we,p,o,Z[we.modelIndex],p.stencilModeFor3D(),p.colorModeForRenderPass());p.resetStencilClippingMasks()}for(const we of ge)no(we,p,o,Z[we.modelIndex],en.disabled,p.colorModeForRenderPass());O()}else{for(const we of he)cc(we.mesh,we.nodeModelMatrix,p,o);for(const we of ge)cc(we.mesh,we.nodeModelMatrix,p,o);O()}}},ef={model:function(p,n,o){const m=n.getSource();if(!m.loaded())return;if(m.type==="vector"||m.type==="geojson")return void(o.modelManager&&o.modelManager.upload(o,m.type==="vector"?p.scope:""));if(m.type==="batched-model"||m.type!=="model")return;const v=m.getModels();for(const S of v)S.upload(o.context)},raster:function(p,n,o){const m=n.getSource();if(!(m instanceof yl&&m.loaded()))return;const v=p.sourceLayer||m.rasterLayerIds&&m.rasterLayerIds[0];if(!v)return;const S=p.paint.get("raster-array-band")||m.getInitialBand(v);if(S==null)return;const D=n.getIds().map(L=>n.getTileByID(L));for(const L of D)L.updateNeeded(v,S)&&m.prepareTile(L,v,S)},"raster-particle":function(p,n,o){const m=n.getSource();if(!(m instanceof yl&&m.loaded()))return;const v=p.sourceLayer||m.rasterLayerIds&&m.rasterLayerIds[0];if(!v)return;const S=p.paint.get("raster-particle-array-band")||m.getInitialBand(v);if(S==null)return;const D=n.getIds().map(L=>n.getTileByID(L));for(const L of D)L.updateNeeded(v,S)&&m.prepareTile(L,v,S)}};class tf{constructor(n,o,m,v,S){this.context=new nl(n,o),this.transform=m,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=S,this._timeStamp=a.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const D=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const O of D)this._debugParams.enabledLayers[O]=!0;S.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),S.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),S.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),S.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),S.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),S.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const O of D)S.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],O);this.occlusionParams=new pc(S),this.setup(),this.numSublayers=To.maxUnderzooming+To.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new a.dv,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new Kl(this),this._wireframeDebugCache=new ed,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const L=new a.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new a.T(this.context,L,n.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=v}updateTerrain(n,o){const m=!!n&&!!n.terrain&&this.transform.projection.supportsTerrain;if(!(m||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new C0(this,n));const v=this._terrain;this.transform.elevation=m?v:null,v.update(n,this.transform,o),this.transform.elevation&&!v.enabled&&(this.transform.elevation=null)}_updateFog(n){const o=n.fog;if(!o||this.transform.projection.name==="globe"||o.getOpacity(this.transform.pitch)<1||o.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[m,v]=o.getFovAdjustedRange(this.transform._fov);if(m>v)return void(this.transform.fogCullDistSq=null);const S=m+.78*(v-m);this.transform.fogCullDistSq=S*S}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(n){n&&!this._terrain&&(this._terrain=new C0(this,this.style)),this._forceTerrainMode=n}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(n,o){if(this.width=n*a.q.devicePixelRatio,this.height=o*a.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style.order)this.style._mergedLayers[m].resize()}setup(){const n=this.context,o=new a.b4;o.emplaceBack(0,0),o.emplaceBack(a.ag,0),o.emplaceBack(0,a.ag),o.emplaceBack(a.ag,a.ag),this.tileExtentBuffer=n.createVertexBuffer(o,a.b6.members),this.tileExtentSegments=a.b7.simpleSegment(0,0,4,2);const m=new a.b4;m.emplaceBack(0,0),m.emplaceBack(a.ag,0),m.emplaceBack(0,a.ag),m.emplaceBack(a.ag,a.ag),this.debugBuffer=n.createVertexBuffer(m,a.b6.members),this.debugSegments=a.b7.simpleSegment(0,0,4,5);const v=new a.b4;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(v,a.b6.members),this.viewportSegments=a.b7.simpleSegment(0,0,4,2);const S=new a.aT;S.emplaceBack(0,0,0,0),S.emplaceBack(a.ag,0,a.ag,0),S.emplaceBack(0,a.ag,0,a.ag),S.emplaceBack(a.ag,a.ag,a.ag,a.ag),this.mercatorBoundsBuffer=n.createVertexBuffer(S,a.b9.members),this.mercatorBoundsSegments=a.b7.simpleSegment(0,0,4,2);const D=new a.aU;D.emplaceBack(0,1,2),D.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(D);const L=new a.b5;for(const U of[0,1,3,2,0])L.emplaceBack(U);this.debugIndexBuffer=n.createIndexBuffer(L),this.emptyTexture=new a.T(n,new a.r({width:1,height:1},Uint8Array.of(0,0,0,0)),n.gl.RGBA8),this.identityMat=a.ab.mat4.create();const O=this.context.gl;this.stencilClearMode=new en({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(n){return n._makeTileBoundsBuffers(this.context,this.transform.projection),n._tileBoundsBuffer?{tileBoundsBuffer:n._tileBoundsBuffer,tileBoundsIndexBuffer:n._tileBoundsIndexBuffer,tileBoundsSegments:n._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const n=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,n.TRIANGLES,Rr.disabled,this.stencilClearMode,dn.disabled,Gr.disabled,xi(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(n,o,m){if(!o||this.currentStencilSource===o.id||!n.isTileClipped()||!m||m.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let L=!1;for(const O of m)if(this._tileClippingMaskIDs[O.key]===void 0){L=!0;break}if(!L)return}this.currentStencilSource=o.id;const v=this.context,S=v.gl;this.nextStencilID+m.length>256&&this.clearStencil(),v.setColorMode(dn.disabled),v.setDepthMode(Rr.disabled);const D=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const L of m){const O=o.getTile(L),U=this._tileClippingMaskIDs[L.key]=this.nextStencilID++,{tileBoundsBuffer:q,tileBoundsIndexBuffer:Z,tileBoundsSegments:X}=this.getTileBoundsBuffers(O);D.draw(this,S.TRIANGLES,Rr.disabled,new en({func:S.ALWAYS,mask:0},U,255,S.KEEP,S.KEEP,S.REPLACE),dn.disabled,Gr.disabled,xi(L.projMatrix),"$clipping",q,Z,X)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,o=this.context.gl;return new en({func:o.NOTEQUAL,mask:255},n,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(n){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(n);const o=this.context.gl;return new en({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,o.KEEP,o.KEEP,o.REPLACE)}stencilConfigForOverlap(n){const o=this.context.gl,m=n.sort((D,L)=>L.overscaledZ-D.overscaledZ),v=m[m.length-1].overscaledZ,S=m[0].overscaledZ-v+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const D={};for(let L=0;L<S;L++)D[L+v]=new en({func:o.GEQUAL,mask:255},L+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=S,[D,m]}return[{[v]:en.disabled},m]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new dn([n.CONSTANT_COLOR,n.ONE,n.CONSTANT_COLOR,n.ONE],new a.aj(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?dn.unblended:dn.alphaBlended}colorModeForDrapableLayerRenderPass(n){const o=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new dn([o.ONE,o.ONE_MINUS_SRC_ALPHA,o.CONSTANT_ALPHA,o.ONE_MINUS_SRC_ALPHA],new a.aj(0,0,0,n===void 0?0:n),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(n,o,m,v=!1){if(this.depthOcclusion)return new Rr(this.context.gl.GREATER,Rr.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!v)return Rr.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new Rr(m||this.context.gl.LEQUAL,o,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const n=this.context.gl,o=Math.ceil(this.width),m=Math.ceil(this.height),v=this.context.bindFramebuffer.get(),S=n.getParameter(n.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===o&&this.depthFBO.height===m||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),o!==0&&m!==0&&(this.depthFBO=new zi(this.context,o,m,!1,"texture"),this.depthTexture=new a.T(this.context,{width:o,height:m,data:null},n.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(v),n.bindTexture(n.TEXTURE_2D,S),this.depthFBO&&(n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),n.blitFramebuffer(0,0,o,m,0,0,o,m,n.DEPTH_BUFFER_BIT,n.NEAREST),n.bindFramebuffer(n.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((n,o)=>n+o/this._fpsHistory.length,0))}render(n,o){const m=a.q.now();this._dt=m-this._timeStamp,this._timeStamp=m,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=n.map.repaint,this.style=n,this.options=o;const v=this.style._mergedLayers,S=this.style._getOrder(!(!this.terrain||!this.terrain.enabled)).filter(lt=>{const mt=v[lt];return!(mt.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[mt.type]});let D=!1,L=!1;for(const lt of S){const mt=v[lt];mt.type==="circle"&&(D=!0),mt.type==="symbol"&&(mt.hasInitialOcclusionOpacityProperties?L=!0:D=!0)}const O=S.map(lt=>v[lt]),U=this.style._mergedSourceCaches;this.imageManager=n.imageManager,this.modelManager=n.modelManager,this.symbolFadeChange=n.placement.symbolFadeChange(a.q.now()),this.imageManager.beginFrame();let q=0,Z=!1;for(const lt in U){const mt=U[lt];mt.used&&(mt.prepare(this.context),mt.getSource().usedInConflation&&++q)}let X=!1;for(const lt of O)lt.isHidden(this.transform.zoom)||(lt.type==="clip"&&(X=!0),this.prepareLayer(lt));const ne={},ge={},he={},ve={},we={};for(const lt in U){const mt=U[lt];ne[lt]=mt.getVisibleCoordinates(),ge[lt]=ne[lt].slice().reverse(),he[lt]=mt.getVisibleCoordinates(!0).reverse(),ve[lt]=mt.getShadowCasterCoordinates(),we[lt]=mt.sortCoordinatesByDistance(ne[lt])}const ze=lt=>{const mt=this.style.getLayerSourceCache(lt);return mt&&mt.used?mt.getSource():null};if(q||X||this._clippingActiveLastFrame){const lt=[],mt=[];let Nt=0;for(const qt of O)this.isSourceForClippingOrConflation(qt,ze(qt))&&(lt.push(qt),mt.push(Nt)),Nt++;if(lt&&(X||lt.length>1)||this._clippingActiveLastFrame){X=!1;const qt=[];for(let Zt=0;Zt<lt.length;Zt++){const xt=lt[Zt],Ft=mt[Zt],Mt=this.style.getLayerSourceCache(xt);if(!Mt||!Mt.used||!Mt.getSource().usedInConflation&&xt.type!=="clip")continue;let Qt=a.dx,Ot=a.by.None;const zt=[];let dr=!0;if(xt.type==="clip"){Qt=Ft;for(const rr of xt.layout.get("clip-layer-types"))Ot|=rr==="model"?a.by.Model:rr==="symbol"?a.by.Symbol:a.by.FillExtrusion;for(const rr of xt.layout.get("clip-layer-scope"))zt.push(rr);xt.isHidden(this.transform.zoom)?dr=!1:X=!0}dr&&qt.push({layer:xt.fqid,cache:Mt,order:Qt,clipMask:Ot,clipScope:zt})}this.replacementSource.setSources(qt),Z=!0}}this._clippingActiveLastFrame=X,Z||this.replacementSource.clear(),this.conflationActive=Z,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let lt=0;lt<O.length;lt++){const mt=O[lt],Nt=mt.cutoffRange();if(this.longestCutoffRange=Math.max(Nt,this.longestCutoffRange),Nt>0){const qt=ze(mt);qt&&(this.minCutoffZoom=Math.max(qt.minzoom,this.minCutoffZoom)),mt.minzoom&&(this.minCutoffZoom=Math.max(mt.minzoom,this.minCutoffZoom))}mt.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=lt),this._lastOcclusionLayer=lt)}const Oe=this.style&&this.style.fog;Oe?(this._fogVisible=Oe.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=Oe.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(he),this.opaquePassCutoff=0);const Fe=this._shadowRenderer;if(Fe){Fe.updateShadowParameters(this.transform,this.style.directionalLight);for(const lt in U)for(const mt of ne[lt]){let Nt={min:0,max:0};this.terrain&&(Nt=this.terrain.getMinMaxForTile(mt)||Nt),Fe.addShadowReceiver(mt.toUnwrapped(),Nt.min,Nt.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new a.dw(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new xa(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const Ye=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),Ge=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(Ye&&!this._snow&&(this._snow=new mc(this)),!Ye&&this._snow&&(this._snow.destroy(),delete this._snow),Ge&&!this._rain&&(this._rain=new Dp(this)),!Ge&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!ur.has(this.context.gl))return;this.renderPass="offscreen";for(const lt of O){const mt=n.getLayerSourceCache(lt);if(!lt.hasOffscreenPass()||lt.isHidden(this.transform.zoom))continue;const Nt=mt?ge[mt.id]:void 0;(lt.type==="custom"||lt.type==="raster"||lt.type==="raster-particle"||lt.isSky()||Nt&&Nt.length)&&this.renderLayer(this,mt,lt,Nt)}this.depthRangeFor3D=[0,1-(O.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,ve)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const Ze=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),We=(()=>{if(o.showOverdrawInspector)return a.aj.black;const lt=this.style.fog;if(lt&&this.transform.projection.supportsFog){const mt=this.style.getLut(lt.scope);if(!Ze){const Nt=lt.properties.get("color-use-theme")==="none",qt=lt.properties.get("color").toRenderColor(Nt?null:mt).toArray01();return new a.aj(...qt)}if(Ze){const Nt=lt.properties.get("space-color-use-theme")==="none",qt=lt.properties.get("space-color").toRenderColor(Nt?null:mt).toArray01();return new a.aj(...qt)}}return a.aj.transparent})();if(this.context.clear({color:We,depth:1}),this.clearStencil(),this._showOverdrawInspector=o.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Ze&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=S.length-1;this.currentLayer>=0;this.currentLayer--){const lt=O[this.currentLayer],mt=n.getLayerSourceCache(lt);if(lt.isSky())continue;const Nt=mt?(lt.is3D()?we:ge)[mt.id]:void 0;this._renderTileClippingMasks(lt,mt,Nt),this.renderLayer(this,mt,lt,Nt)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Ze&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||a.ae(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<S.length;this.currentLayer++){const lt=O[this.currentLayer],mt=n.getLayerSourceCache(lt);lt.isSky()&&this.renderLayer(this,mt,lt,mt?ge[mt.id]:void 0)}function nt(lt,mt){let Nt;return mt&&(Nt=(lt.type==="symbol"?he:lt.is3D()?we:ge)[mt.id]),Nt}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<S.length;){const lt=O[this.currentLayer];if(lt.type==="raster"||lt.type==="raster-particle"){const mt=n.getLayerSourceCache(lt);this.renderLayer(this,mt,lt,nt(lt,mt))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let at=0;Fe&&(at=Fe.getShadowCastingLayerCount());let Ct=!1,_t=-1;for(let lt=0;lt<S.length;++lt){const mt=O[lt];mt.isHidden(this.transform.zoom)||mt.is3D()&&(_t=lt)}for(L&&_t===-1&&(D=!0);this.currentLayer<S.length;){const lt=O[this.currentLayer],mt=n.getLayerSourceCache(lt);if(lt.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(lt)){if(lt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(D&&!Ct&&this.terrain&&!this.transform.isOrthographic&&(Ct=!0,this.blitDepth()),L&&_t!==-1&&this.currentLayer===_t+1&&!this.transform.isOrthographic&&this.blitDepth(),lt.is3D()||this.terrain||this._renderTileClippingMasks(lt,mt,mt?ne[mt.id]:void 0),this.renderLayer(this,mt,lt,nt(lt,mt)),!this.terrain&&Fe&&at>0&&lt.hasShadowPass()&&--at==0&&(Fe.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Nt=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Nt;this.currentLayer++){const qt=O[this.currentLayer];if(!qt.hasLightBeamPass())continue;const Zt=n.getLayerSourceCache(qt);this.renderLayer(this,Zt,qt,Zt?ge[Zt.id]:void 0)}this.currentLayer=Nt,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const Nt=this.currentLayer;this.depthOcclusion=!0;for(const qt of this.layersWithOcclusionOpacity){this.currentLayer=qt;const Zt=O[this.currentLayer],xt=n.getLayerSourceCache(Zt),Ft=xt?ge[xt.id]:void 0;Zt.is3D()||this.terrain||this._renderTileClippingMasks(Zt,xt,xt?ne[xt.id]:void 0),this.renderLayer(this,xt,Zt,Ft)}this.depthOcclusion=!1,this.currentLayer=Nt,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let lt=null;O.forEach(mt=>{const Nt=n.getLayerSourceCache(mt);Nt&&!mt.isHidden(this.transform.zoom)&&Nt.getVisibleCoordinates().length&&(!lt||lt.getSource().maxzoom<Nt.getSource().maxzoom)&&(lt=Nt)}),lt&&this.options.showTileBoundaries&&Xd.debug(this,lt,lt.getVisibleCoordinates(),a.aj.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Xd.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new a.aj(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(lt){const mt=lt.transform.padding;Xc(lt,lt.transform.height-(mt.top||0),3,vi),Xc(lt,mt.bottom||0,3,bp),Wd(lt,mt.left||0,3,Dl),Wd(lt,lt.transform.width-(mt.right||0),3,wp);const Nt=lt.transform.centerPoint;(function(qt,Zt,xt,Ft){Ju(qt,Zt-1,xt-10,2,20,Ft),Ju(qt,Zt-10,xt-1,20,2,Ft)})(lt,Nt.x,lt.transform.height-Nt.y,Hm)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),Z||(this.conflationActive=!1)}prepareLayer(n){this.gpuTimingStart(n);const{unsupportedLayers:o}=this.transform.projection,m=!o||!o.includes(n.type);if(ef[n.type]&&(m||this.terrain&&n.type==="custom")){const v=this.style.getLayerSourceCache(n);ef[n.type](n,v,this)}this.gpuTimingEnd()}renderLayer(n,o,m,v){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="sky"||m.type==="custom"||m.type==="model"||m.type==="raster"||m.type==="raster-particle"||v&&v.length)&&(this.id=m.id,this.gpuTimingStart(m),n.transform.projection.unsupportedLayers&&n.transform.projection.unsupportedLayers.includes(m.type)&&(!n.terrain||m.type!=="custom")||m.type==="clip"||Xd[m.type](n,o,m,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(n){if(!this.options.gpuTiming)return;const o=this.context.extTimerQuery,m=this.context.gl;let v=this.gpuTimers[n.id];v||(v=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:m.createQuery()}),v.calls++,m.beginQuery(o.TIME_ELAPSED_EXT,v.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const n=this.context.extTimerQuery,o=this.context.gl,m=o.createQuery();this.deferredRenderGpuTimeQueries.push(m),o.beginQuery(n.TIME_ELAPSED_EXT,m)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const n=this.gpuTimers;return this.gpuTimers={},n}collectDeferredRenderGpuQueries(){const n=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],n}queryGpuTimers(n){const o={};for(const m in n){const v=n[m],S=this.context.extTimerQuery,D=S.getQueryParameter(v.query,this.context.gl.QUERY_RESULT)/1e6;S.deleteQueryEXT(v.query),o[m]=D}return o}queryGpuTimeDeferredRender(n){if(!this.options.gpuTimingDeferredRender)return 0;const o=this.context.gl;let m=0;for(const v of n)m+=o.getQueryParameter(v,o.QUERY_RESULT)/1e6,o.deleteQuery(v);return m}translatePosMatrix(n,o,m,v,S){if(!m[0]&&!m[1])return n;const D=S?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(D){const U=Math.sin(D),q=Math.cos(D);m=[m[0]*q-m[1]*U,m[0]*U+m[1]*q]}const L=[S?m[0]:a.ar(o,m[0],this.transform.zoom),S?m[1]:a.ar(o,m[1],this.transform.zoom),0],O=new Float32Array(16);return a.ab.mat4.translate(O,n,L),O}saveTileTexture(n){const o=n.size[0],m=this._tileTextures[o];m?m.push(n):this._tileTextures[o]=[n]}getTileTexture(n){const o=this._tileTextures[n];return o&&o.length>0?o.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(n,o,m){const v=m===void 0?this.terrain&&this.terrain.renderingToTexture:m,S=[];return this.style&&this.style.enable3dLights()&&(n==="globeRaster"||n==="terrainRaster"?(S.push("LIGHTING_3D_MODE"),S.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):v||S.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||S.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(S.push("TERRAIN"),this.linearFloatFilteringSupported()&&S.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&S.push("GLOBE"),!this._fogVisible||v||o!==void 0&&!o||S.push("FOG","FOG_DITHERING"),v&&S.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&S.push("OVERDRAW_INSPECTOR"),S}getOrCreateProgram(n,o){this.cache=this.cache||{};const m=o&&o.defines||[],v=o&&o.config,S=this.currentGlobalDefines(n,o&&o.overrideFog,o&&o.overrideRtt).concat(m),D=Bd.cacheKey(ju[n],n,S,v);return this.cache[D]||(this.cache[D]=new Bd(this.context,n,ju[n],v,Yu[n],S)),this.cache[D]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(n,o){if(this.style.enable3dLights()){const m=this.style.directionalLight,v=this.style.ambientLight;if(m&&v){const S=((D,L,O)=>{const U=D.properties.get("direction"),q=D.properties.get("color-use-theme")==="none",Z=D.properties.get("color").toRenderColor(q?null:O.getLut(D.scope)).toArray01(),X=D.properties.get("intensity"),ne=L.properties.get("color-use-theme")==="none",ge=L.properties.get("color").toRenderColor(ne?null:O.getLut(L.scope)).toArray01(),he=L.properties.get("intensity"),ve=[U.x,U.y,U.z],we=a.cM(ge,he),ze=a.cM(Z,X);return{u_lighting_ambient_color:we,u_lighting_directional_dir:ve,u_lighting_directional_color:ze,u_ground_radiance:Ii(ve,ze,we)}})(m,v,this.style);o.setLightsUniformValues(n,S)}}}uploadCommonUniforms(n,o,m,v,S){if(this.uploadCommonLightUniforms(n,o),this.terrain&&this.terrain.renderingToTexture)return;const D=this.style.fog;if(D){const L=D.getOpacity(this.transform.pitch),O=((U,q,Z,X,ne,ge,he,ve,we,ze,Oe,Fe)=>{const Ye=U.transform,Ge=q.properties.get("color-use-theme")==="none",Ze=q.properties.get("color").toRenderColor(Ge?null:U.style.getLut(q.scope)).toArray01();Ze[3]=X;const We=U.frameCounter/1e3%1,[nt,at]=q.properties.get("vertical-range");return{u_fog_matrix:Z?Ye.calculateFogTileMatrix(Z):Fe||U.identityMat,u_fog_range:q.getFovAdjustedRange(Ye._fov),u_fog_color:Ze,u_fog_horizon_blend:q.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(nt,at),at],u_fog_temporal_offset:We,u_frustum_tl:ne,u_frustum_tr:ge,u_frustum_br:he,u_frustum_bl:ve,u_globe_pos:we,u_globe_radius:ze,u_viewport:Oe,u_globe_transition:a.ae(Ye.zoom),u_is_globe:+(Ye.projection.name==="globe")}})(this,D,m,L,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*a.q.devicePixelRatio,this.transform.height*a.q.devicePixelRatio],v);o.setFogUniformValues(n,O)}S&&o.setCutoffUniformValues(n,S.uniformValues)}setTileLoadedFlag(n){this.tileLoaded=n}saveCanvasCopy(){const n=this.canvasCopy();n&&(this.frameCopies.push(n),this.tileLoaded=!1)}canvasCopy(){const n=this.context.gl,o=n.createTexture();return n.bindTexture(n.TEXTURE_2D,o),n.copyTexImage2D(n.TEXTURE_2D,0,n.RGBA,0,0,n.drawingBufferWidth,n.drawingBufferHeight,0),o}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const n=this.style&&this.style.fog;return!!n&&n.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const n=this._backgroundTiles,o=this._backgroundTiles={},m=this.transform.coveringTiles({tileSize:512});for(const v of m)o[v.key]=n[v.key]||new kc(v,512,this.transform.tileZoom,this);return o}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(n,o){return!(!n.is3D()||n.type!=="clip"&&(n.minzoom&&n.minzoom>this.transform.zoom||(this.style._clipLayerPresent||n.sourceLayer!=="building")&&(!o||o.type!=="batched-model")))}isTileAffectedByFog(n){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let o=this._cachedTileFogOpacities[n.key];return o||(this._cachedTileFogOpacities[n.key]=o=this.style.fog.getOpacityForTile(n)),o[0]>=cr||o[1]>=cr}setupDepthForOcclusion(n,o,m){const v=this.context,S=v.gl,D=!!m;var L;m||(m={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),v.activeTexture.set(S.TEXTURE3),n&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),m.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],m.u_depth_range_unpack=[2/((L=this.depthRangeFor3D)[1]-L[0]),-1-2*L[0]/(L[1]-L[0])],m.u_occluder_half_size=.5*this.occlusionParams.occluderSize,m.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),v.activeTexture.set(S.TEXTURE0),D||o.setTerrainUniformValues(v,m)}}function Yd(p,n){let o=!1,m=null;const v=()=>{m=null,o&&(p(),m=setTimeout(v,n),o=!1)};return()=>(o=!0,m||v(),m)}class Pp{constructor(n){this._hashName=n&&encodeURIComponent(n),a.aP(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Yd(this._updateHashUnthrottled.bind(this),300)}addTo(n){return this._map=n,window.addEventListener("hashchange",this._onHashChange,!1),n.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const n=this._map;if(!n)return"";const o=Mp(n);if(this._hashName){const m=this._hashName;let v=!1;const S=location.hash.slice(1).split("&").map(D=>{const L=D.split("=")[0];return L===m?(v=!0,`${L}=${o}`):D}).filter(D=>D);return v||S.push(`${m}=${o}`),`#${S.join("&")}`}return`#${o}`}_getCurrentHash(){const n=location.hash.replace("#","");if(this._hashName){let o;return n.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(o=m)}),(o&&o[1]||"").split("/")}return n.split("/")}_onHashChange(){const n=this._map;if(!n)return!1;const o=this._getCurrentHash();if(o.length>=3&&!o.some(m=>isNaN(m))){const m=n.dragRotate.isEnabled()&&n.touchZoomRotate.isEnabled()?+(o[3]||0):n.getBearing();return n.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:m,pitch:+(o[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function Mp(p,n){const o=p.getCenter(),m=Math.round(100*p.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,v),D=Math.round(o.lng*S)/S,L=Math.round(o.lat*S)/S,O=p.getBearing(),U=p.getPitch();let q=n?`/${D}/${L}/${m}`:`${m}/${L}/${D}`;return(O||U)&&(q+="/"+Math.round(10*O)/10),U&&(q+=`/${Math.round(U)}`),q}const rf={linearity:.3,easing:a.dy(0,0,.3,1)},Km=a.l({deceleration:2500,maxSpeed:1400},rf),Jd=a.l({deceleration:20,maxSpeed:1400},rf),Ap=a.l({deceleration:1e3,maxSpeed:360},rf),nf=a.l({deceleration:1e3,maxSpeed:90},rf);class Zm{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.q.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,o=a.q.now();for(;n.length>0&&o-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const o={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)o.zoom+=S.zoomDelta||0,o.bearing+=S.bearingDelta||0,o.pitch+=S.pitchDelta||0,S.panDelta&&o.pan._add(S.panDelta),S.around&&(o.around=S.around),S.pinchAround&&(o.pinchAround=S.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(o.pan.mag()){const S=Jc(o.pan.mag(),m,a.l({},Km,n||{}));v.offset=o.pan.mult(S.amount/o.pan.mag()),v.center=this._map.transform.center,Qd(v,S)}if(o.zoom){const S=Jc(o.zoom,m,Jd);v.zoom=this._map.transform.zoom+S.amount,Qd(v,S)}if(o.bearing){const S=Jc(o.bearing,m,Ap);v.bearing=this._map.transform.bearing+a.aw(S.amount,-179,179),Qd(v,S)}if(o.pitch){const S=Jc(o.pitch,m,nf);v.pitch=this._map.transform.pitch+S.amount,Qd(v,S)}if(v.zoom||v.bearing){const S=o.pinchAround===void 0?o.around:o.pinchAround;v.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function Qd(p,n){(!p.duration||p.duration<n.duration)&&(p.duration=n.duration,p.easing=n.easing)}function Jc(p,n,o){const{maxSpeed:m,linearity:v,deceleration:S}=o,D=a.aw(p*v/(n/1e3),-m,m),L=Math.abs(D)/(S*v);return{easing:o.easing,duration:1e3*L,amount:D*(L/2)}}class $s extends a.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,o,m,v={}){const S=re(o.getCanvasContainer(),m),D=o.unproject(S);super(n,a.l({point:S,lngLat:D,originalEvent:m},v)),this._defaultPrevented=!1,this.target=o}}class eh extends a.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,o,m){const v=n==="touchend"?m.changedTouches:m.touches,S=Ee(o.getCanvasContainer(),v),D=S.map(O=>o.unproject(O)),L=S.reduce((O,U,q,Z)=>O.add(U.div(Z.length)),new a.P(0,0));super(n,{points:S,point:L,lngLats:D,lngLat:o.unproject(L),originalEvent:m}),this._defaultPrevented=!1}}class A0 extends a.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,o){super("wheel",{originalEvent:o}),this._defaultPrevented=!1}}class rd{constructor(n,o){this._map=n,this._clickTolerance=o.clickTolerance}reset(){this._mousedownPos=void 0}wheel(n){return this._firePreventable(new A0(this._map,n))}mousedown(n,o){return this._mousedownPos=o,this._firePreventable(new $s(n.type,this._map,n))}mouseup(n){this._map.fire(new $s(n.type,this._map,n))}preclick(n){const o=a.l({},n);o.type="preclick",this._map.fire(new $s(o.type,this._map,o))}click(n,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||(this.preclick(n),this._map.fire(new $s(n.type,this._map,n)))}dblclick(n){return this._firePreventable(new $s(n.type,this._map,n))}mouseover(n){this._map.fire(new $s(n.type,this._map,n))}mouseout(n){this._map.fire(new $s(n.type,this._map,n))}touchstart(n){return this._firePreventable(new eh(n.type,this._map,n))}touchmove(n){this._map.fire(new eh(n.type,this._map,n))}touchend(n){this._map.fire(new eh(n.type,this._map,n))}touchcancel(n){this._map.fire(new eh(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class th{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(n){this._map.fire(new $s(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new $s("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new $s(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class kp{constructor(n,o){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,o){this.isEnabled()&&n.shiftKey&&n.button===0&&(pe(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(n,o){if(!this._active)return;const m=o,v=this._startPos,S=this._lastPos;if(!v||!S||S.equals(m)||!this._box&&m.dist(v)<this._clickTolerance)return;this._lastPos=m,this._box||(this._box=Y("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));const D=Math.min(v.x,m.x),L=Math.max(v.x,m.x),O=Math.min(v.y,m.y),U=Math.max(v.y,m.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${D}px,${O}px)`,this._box.style.width=L-D+"px",this._box.style.height=U-O+"px")})}mouseupWindow(n,o){if(!this._active)return;const m=this._startPos,v=o;if(m&&n.button===0){if(this.reset(),Le(),m.x!==v.x||m.y!==v.y)return this._map.fire(new a.z("boxzoomend",{originalEvent:n})),{cameraAnimation:S=>S.fitScreenCoordinates(m,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",n)}}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Se(),delete this._startPos,delete this._lastPos}_fireEvent(n,o){return this._map.fire(new a.z(n,{originalEvent:o}))}}function nd(p,n){const o={};for(let m=0;m<p.length;m++)o[p[m].identifier]=n[m];return o}class Aa{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(n,o,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=n.timeStamp),m.length===this.numTouches&&(this.centroid=function(v){const S=new a.P(0,0);for(const D of v)S._add(D);return S.div(v.length)}(o),this.touches=nd(m,o)))}touchmove(n,o,m){if(this.aborted||!this.centroid)return;const v=nd(m,o);for(const S in this.touches){const D=v[S];(!D||D.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(n,o,m){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class af{constructor(n){this.singleTap=new Aa(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(n,o,m){this.singleTap.touchstart(n,o,m)}touchmove(n,o,m){this.singleTap.touchmove(n,o,m)}touchend(n,o,m){const v=this.singleTap.touchend(n,o,m);if(v){const S=n.timeStamp-this.lastTime<500,D=!this.lastTap||this.lastTap.dist(v)<30;if(S&&D||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class k0{constructor(){this._zoomIn=new af({numTouches:1,numTaps:2}),this._zoomOut=new af({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,o,m){this._zoomIn.touchstart(n,o,m),this._zoomOut.touchstart(n,o,m)}touchmove(n,o,m){this._zoomIn.touchmove(n,o,m),this._zoomOut.touchmove(n,o,m)}touchend(n,o,m){const v=this._zoomIn.touchend(n,o,m),S=this._zoomOut.touchend(n,o,m);return v?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()+1,around:D.unproject(v)},{originalEvent:n})}):S?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:D.getZoom()-1,around:D.unproject(S)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const rh={0:1,2:2};class Qc{constructor(n){this.reset(),this._clickTolerance=n.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(n,o){return!1}_move(n,o){return{}}mousedown(n,o){if(this._lastPoint)return;const m=se(n);this._correctButton(n,m)&&(this._lastPoint=o,this._eventButton=m)}mousemoveWindow(n,o){const m=this._lastPoint;if(m){if(n.preventDefault(),this._eventButton!=null&&function(v,S){const D=rh[S];return v.buttons===void 0||(v.buttons&D)!==D}(n,this._eventButton))this.reset();else if(this._moved||!(o.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=o,this._move(m,o)}}mouseupWindow(n){this._lastPoint&&se(n)===this._eventButton&&(this._moved&&Le(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class io extends Qc{mousedown(n,o){super.mousedown(n,o),this._lastPoint&&(this._active=!0)}_correctButton(n,o){return o===0&&!n.ctrlKey}_move(n,o){return{around:o,panDelta:o.sub(n)}}}class so extends Qc{_correctButton(n,o){return o===0&&n.ctrlKey||o===2}_move(n,o){const m=.8*(o.x-n.x);if(m)return this._active=!0,{bearingDelta:m}}contextmenu(n){n.preventDefault()}}class $o extends Qc{_correctButton(n,o){return o===0&&n.ctrlKey||o===2}_move(n,o){const m=-.5*(o.y-n.y);if(m)return this._active=!0,{pitchDelta:m}}contextmenu(n){n.preventDefault()}}class Pl{constructor(n,o){this._map=n,this._el=n.getCanvasContainer(),this._minTouches=1,this._clickTolerance=o.clickTolerance||1,this.reset(),a.aP(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}touchstart(n,o,m){return this._calculateTransform(n,o,m)}touchmove(n,o,m){if(this._active&&!(m.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(m.length===1&&!a.dz())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return n.cancelable&&n.preventDefault(),this._calculateTransform(n,o,m)}}touchend(n,o,m){this._calculateTransform(n,o,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,o,m){m.length>0&&(this._active=!0);const v=nd(m,o),S=new a.P(0,0),D=new a.P(0,0);let L=0;for(const U in v){const q=v[U],Z=this._touches[U];Z&&(S._add(q),D._add(q.sub(Z)),L++,v[U]=q)}if(this._touches=v,L<this._minTouches||!D.mag())return;const O=D.div(L);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(L),panDelta:O}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Y("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class oo{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(n){}_move(n,o,m){return{}}touchstart(n,o,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([o[0],o[1]]))}touchmove(n,o,m){const v=this._firstTwoTouches;if(!v)return;n.preventDefault();const[S,D]=v,L=fa(m,o,S),O=fa(m,o,D);if(!L||!O)return;const U=this._aroundCenter?null:L.add(O).div(2);return this._move([L,O],U,n)}touchend(n,o,m){if(!this._firstTwoTouches)return;const[v,S]=this._firstTwoTouches,D=fa(m,o,v),L=fa(m,o,S);D&&L||(this._active&&Le(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function fa(p,n,o){for(let m=0;m<p.length;m++)if(p[m].identifier===o)return n[m]}function ka(p,n){return Math.log(p/n)/Math.LN2}class nh extends oo{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,o){const m=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(ka(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ka(this._distance,m),pinchAround:o}}}function ad(p,n){return 180*p.angleWith(n)/Math.PI}class Rp extends oo{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,o){const m=this._vector;if(this._vector=n[0].sub(n[1]),m&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:ad(this._vector,m),pinchAround:o}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const o=25/(Math.PI*this._minDiameter)*360,m=this._startVector;if(!m)return!1;const v=ad(n,m);return Math.abs(v)<o}}function Ip(p){return Math.abs(p.y)>Math.abs(p.x)}class ah extends oo{constructor(n){super(),this._map=n}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(n){this._lastPoints=n,Ip(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,o,m){const v=this._lastPoints;if(!v)return;const S=n[0].sub(v[0]),D=n[1].sub(v[1]);return this._map._cooperativeGestures&&!a.dz()&&m.touches.length<3||(this._valid=this.gestureBeginsVertically(S,D,m.timeStamp),!this._valid)?void 0:(this._lastPoints=n,this._active=!0,{pitchDelta:(S.y+D.y)/2*-.5})}gestureBeginsVertically(n,o,m){if(this._valid!==void 0)return this._valid;const v=n.mag()>=2,S=o.mag()>=2;if(!v&&!S)return;if(!v||!S)return this._firstMove==null&&(this._firstMove=m),m-this._firstMove<100&&void 0;const D=n.y>0==o.y>0;return Ip(n)&&Ip(o)&&D}}const id={panStep:100,bearingStep:15,pitchStep:10};class zp{constructor(){const n=id;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let o=0,m=0,v=0,S=0,D=0;switch(n.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:n.shiftKey?m=-1:(n.preventDefault(),S=-1);break;case 39:n.shiftKey?m=1:(n.preventDefault(),S=1);break;case 38:n.shiftKey?v=1:(n.preventDefault(),D=-1);break;case 40:n.shiftKey?v=-1:(n.preventDefault(),D=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:L=>{const O=L.getZoom();L.easeTo({duration:300,easeId:"keyboardHandler",easing:Lp,zoom:o?Math.round(O)+o*(n.shiftKey?2:1):O,bearing:L.getBearing()+m*this._bearingStep,pitch:L.getPitch()+v*this._pitchStep,offset:[-S*this._panStep,-D*this._panStep],center:L.getCenter()},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Lp(p){return p*(2-p)}const sf=4.000244140625,sd=1/450;class gc{constructor(n,o){this._map=n,this._el=n.getCanvasContainer(),this._handler=o,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=sd,a.aP(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(n){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(n.ctrlKey||n.metaKey||this.isZooming()||a.dz()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let o=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const m=a.q.now(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,o!==0&&o%sf==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=o,this._timeout=window.setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(v*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),n.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=n,this._delta-=o,this._active||this._start(n)),n.preventDefault()}_onTimeout(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=re(this._el,n);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:o,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._map.transform;this._type==="wheel"&&n.projection.wrap&&(n._center.lng>=180||n._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const o=()=>n._terrainEnabled()&&this._aroundCoord?n.computeZoomRelativeTo(this._aroundCoord):n.zoom;if(this._delta!==0){const U=this._type==="wheel"&&Math.abs(this._delta)>sf?this._wheelZoomRate:this._defaultZoomRate;let q=2/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&q!==0&&(q=1/q);const Z=o(),X=Math.pow(2,Z),ne=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):X;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(ne*q))),this._type==="wheel"&&(this._startZoom=Z,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const m=typeof this._targetZoom=="number"?this._targetZoom:o(),v=this._startZoom,S=this._easing;let D,L=!1;if(this._type==="wheel"&&v&&S){const U=Math.min((a.q.now()-this._lastWheelEventTime)/200,1),q=S(U);D=a.af(v,m,q),U<1?this._frameId||(this._frameId=!0):L=!0}else D=m,L=!0;this._active=!0,L&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let O=D-o();return O*this._lastDelta<0&&(O=0),{noInertia:!0,needsRenderFrame:!L,zoomDelta:O,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let o=a.dA;if(this._prevEase){const m=this._prevEase,v=(a.q.now()-m.start)/m.duration,S=m.easing(v+.01)-m.easing(v),D=.27/Math.sqrt(S*S+1e-4)*.01,L=Math.sqrt(.0729-D*D);o=a.dy(D,L,.25,1)}return this._prevEase={start:a.q.now(),duration:n,easing:o},o}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Y("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class Ml{constructor(n,o){this._clickZoom=n,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class lo{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(n,o){return n.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:m.getZoom()+(n.shiftKey?-1:1),around:m.unproject(o)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yc{constructor(){this._tap=new af({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(n,o,m){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=o[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(n,o,m))}touchmove(n,o,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=o[0],S=v.y-this._swipePoint.y;return this._swipePoint=v,n.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(n,o,m)}touchend(n,o,m){this._tapTime?this._swipePoint&&m.length===0&&this.reset():this._tap.touchend(n,o,m)&&(this._tapTime=n.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class eu{constructor(n,o,m){this._el=n,this._mousePan=o,this._touchPan=m}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class tu{constructor(n,o,m){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=o,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class R0{constructor(n,o,m,v){this._el=n,this._touchZoom=o,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const _i=p=>p.zoom||p.drag||p.pitch||p.rotate;class ss extends a.z{}class I0{constructor(){this.constants=[1,1,.01],this.radius=0}setup(n,o){const m=a.ab.vec3.sub([],o,n);this.radius=a.ab.vec3.length(m[2]<0?a.ab.vec3.div([],m,this.constants):[m[0],m[1],0])}projectRay(n){a.ab.vec3.div(n,n,this.constants),a.ab.vec3.normalize(n,n),a.ab.vec3.mul(n,n,this.constants);const o=a.ab.vec3.scale([],n,this.radius);if(o[2]>0){const m=a.ab.vec3.scale([],[0,0,1],a.ab.vec3.dot(o,[0,0,1])),v=a.ab.vec3.scale([],a.ab.vec3.normalize([],[o[0],o[1],0]),this.radius),S=a.ab.vec3.add([],o,a.ab.vec3.scale([],a.ab.vec3.sub([],a.ab.vec3.add([],v,m),o),2));o[0]=S[0],o[1]=S[1]}return o}}function ih(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class os{constructor(n,o){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Zm(n),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new I0,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(o),a.aP(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,S,D]of this._listeners){const L=v===document?this.handleWindowEvent:this.handleEvent;v.addEventListener(S,L,D)}}destroy(){for(const[n,o,m]of this._listeners){const v=n===document?this.handleWindowEvent:this.handleEvent;n.removeEventListener(o,v,m)}}_addDefaultHandlers(n){const o=this._map,m=o.getCanvasContainer();this._add("mapEvent",new rd(o,n));const v=o.boxZoom=new kp(o,n);this._add("boxZoom",v);const S=new k0,D=new lo;o.doubleClickZoom=new Ml(D,S),this._add("tapZoom",S),this._add("clickZoom",D);const L=new yc;this._add("tapDragZoom",L);const O=o.touchPitch=new ah(o);this._add("touchPitch",O);const U=new so(n),q=new $o(n);o.dragRotate=new tu(n,U,q),this._add("mouseRotate",U,["mousePitch"]),this._add("mousePitch",q,["mouseRotate"]);const Z=new io(n),X=new Pl(o,n);o.dragPan=new eu(m,Z,X),this._add("mousePan",Z),this._add("touchPan",X,["touchZoom","touchRotate"]);const ne=new Rp,ge=new nh;o.touchZoomRotate=new R0(m,ge,ne,L),this._add("touchRotate",ne,["touchPan","touchZoom"]),this._add("touchZoom",ge,["touchPan","touchRotate"]),this._add("blockableMapEvent",new th(o));const he=o.scrollZoom=new gc(o,this);this._add("scrollZoom",he,["mousePan"]);const ve=o.keyboard=new zp;this._add("keyboard",ve);for(const we of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])n.interactive&&n[we]&&o[we].enable(n[we])}_add(n,o,m){this._handlers.push({handlerName:n,handler:o,allowed:m}),this._handlersById[n]=o}stop(n){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!_i(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(n,o,m){for(const v in n)if(v!==m&&(!o||o.indexOf(v)<0))return!0;return!1}handleWindowEvent(n){this.handleEvent(n,`${n.type}Window`)}_getMapTouches(n){const o=[];for(const m of n)this._el.contains(m.target)&&o.push(m);return o}handleEvent(n,o){this._updatingCamera=!0;const m=n.type==="renderFrame",v=m?void 0:n,S={needsRenderFrame:!1},D={},L={},O=n.touches?this._getMapTouches(n.touches):void 0,U=O?Ee(this._el,O):m?void 0:re(this._el,n);for(const{handlerName:X,handler:ne,allowed:ge}of this._handlers){if(!ne.isEnabled())continue;let he;this._blockedByActive(L,ge,X)?ne.reset():ne[o||n.type]&&(he=ne[o||n.type](n,U,O),this.mergeHandlerResult(S,D,he,X,v),he&&he.needsRenderFrame&&this._triggerRenderFrame()),(he||ne.isActive())&&(L[X]=ne)}const q={};for(const X in this._previousActiveHandlers)L[X]||(q[X]=v);this._previousActiveHandlers=L,(Object.keys(q).length||ih(S))&&(this._changes.push([S,D,q]),this._triggerRenderFrame()),(Object.keys(L).length||ih(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Z}=S;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))}mergeHandlerResult(n,o,m,v,S){if(!m)return;a.l(n,m);const D={handlerName:v,originalEvent:m.originalEvent||S};m.zoomDelta!==void 0&&(o.zoom=D),m.panDelta!==void 0&&(o.drag=D),m.pitchDelta!==void 0&&(o.pitch=D),m.bearingDelta!==void 0&&(o.rotate=D)}_applyChanges(){const n={},o={},m={};for(const[v,S,D]of this._changes)v.panDelta&&(n.panDelta=(n.panDelta||new a.P(0,0))._add(v.panDelta)),v.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(n.around=v.around),v.aroundCoord!==void 0&&(n.aroundCoord=v.aroundCoord),v.pinchAround!==void 0&&(n.pinchAround=v.pinchAround),v.noInertia&&(n.noInertia=v.noInertia),a.l(o,S),a.l(m,D);this._updateMapTransform(n,o,m),this._changes=[]}_updateMapTransform(n,o,m){const v=this._map,S=v.transform,D=ze=>[ze.x,ze.y,ze.z];if((ze=>{const Oe=this._eventsInProgress.drag;return Oe&&!this._handlersById[Oe.handlerName].isActive()})()&&!ih(n)){const ze=S.zoom;S.cameraElevationReference="sea",this._originalZoom!=null&&S._orthographicProjectionAtLowPitch&&S.projection.name!=="globe"&&S.pitch===0?(S.cameraElevationReference="ground",S.zoom=this._originalZoom):(S.recenterOnTerrain(),S.cameraElevationReference="ground"),ze!==S.zoom&&this._map._update(!0)}if(S._isCameraConstrained&&v._stop(!0),!ih(n))return void this._fireEvents(o,m,!0);let{panDelta:L,zoomDelta:O,bearingDelta:U,pitchDelta:q,around:Z,aroundCoord:X,pinchAround:ne}=n;S._isCameraConstrained&&(O>0&&(O=0),S._isCameraConstrained=!1),ne!==void 0&&(Z=ne),(O||(ze=>o[ze]&&!this._eventsInProgress[ze])("drag"))&&Z&&(this._dragOrigin=D(S.pointCoordinate3D(Z)),this._originalZoom=S.zoom,this._trackingEllipsoid.setup(S._camera.position,this._dragOrigin)),S.cameraElevationReference="sea",v._stop(!0),Z=Z||v.transform.centerPoint,U&&(S.bearing+=U),q&&(S.pitch+=q),S._updateCameraState();const ge=[0,0,0];if(L)if(S.projection.name==="mercator"){const ze=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(Z).dir),Oe=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(Z.sub(L)).dir);ge[0]=Oe[0]-ze[0],ge[1]=Oe[1]-ze[1]}else{const ze=S.pointCoordinate(Z);if(S.projection.name==="globe"){L=L.rotate(-S.angle);const Oe=S._pixelsPerMercatorPixel/S.worldSize;ge[0]=-L.x*a.dB(a.aS(ze.y))*Oe,ge[1]=-L.y*a.dB(S.center.lat)*Oe}else{const Oe=S.pointCoordinate(Z.sub(L));ze&&Oe&&(ge[0]=Oe.x-ze.x,ge[1]=Oe.y-ze.y)}}const he=S.zoom,ve=[0,0,0];if(O){const ze=D(X||S.pointCoordinate3D(Z)),Oe={dir:a.ab.vec3.normalize([],a.ab.vec3.sub([],ze,S._camera.position))};if(Oe.dir[2]<0){const Fe=S.zoomDeltaToMovement(ze,O);a.ab.vec3.scale(ve,Oe.dir,Fe)}}const we=a.ab.vec3.add(ge,ge,ve);S._translateCameraConstrained(we),O&&Math.abs(S.zoom-he)>1e-4&&S.recenterOnTerrain(),S.cameraElevationReference="ground",this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(o,m,!0)}_fireEvents(n,o,m){const v=_i(this._eventsInProgress),S=_i(n),D={};for(const q in n){const{originalEvent:Z}=n[q];this._eventsInProgress[q]||(D[`${q}start`]=Z),this._eventsInProgress[q]=n[q]}!v&&S&&this._fireEvent("movestart",S.originalEvent);for(const q in D)this._fireEvent(q,D[q]);S&&this._fireEvent("move",S.originalEvent);for(const q in n){const{originalEvent:Z}=n[q];this._fireEvent(q,Z)}const L={};let O;for(const q in this._eventsInProgress){const{handlerName:Z,originalEvent:X}=this._eventsInProgress[q];this._handlersById[Z].isActive()||(delete this._eventsInProgress[q],O=o[Z]||X,L[`${q}end`]=O)}for(const q in L)this._fireEvent(q,L[q]);const U=_i(this._eventsInProgress);if(m&&(v||S)&&!U){this._updatingCamera=!0;const q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;q?(Z(q.bearing||this._map.getBearing())&&(q.bearing=0),this._map.easeTo(q,{originalEvent:O})):(this._map.fire(new a.z("moveend",{originalEvent:O})),Z(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(n,o){this._map.fire(new a.z(n,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{this._frameId=void 0,this.handleEvent(new ss("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const of="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Xm extends a.E{constructor(n,o){super(),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=o.bearingSnap,this._respectPrefersReducedMotion=o.respectPrefersReducedMotion!==!1,a.aP(["_renderFrameCallback"],this)}getCenter(){return new a.bO(this.transform.center.lng,this.transform.center.lat)}setCenter(n,o){return this.jumpTo({center:n},o)}panBy(n,o,m){return n=a.P.convert(n).mult(-1),this.panTo(this.transform.center,a.l({offset:n},o),m)}panTo(n,o,m){return this.easeTo(a.l({center:n},o),m)}getZoom(){return this.transform.zoom}setZoom(n,o){return this.jumpTo({zoom:n},o),this}zoomTo(n,o,m){return this.easeTo(a.l({zoom:n},o),m)}zoomIn(n,o){return this.zoomTo(this.getZoom()+1,n,o),this}zoomOut(n,o){return this.zoomTo(this.getZoom()-1,n,o),this}getBearing(){return this.transform.bearing}setBearing(n,o){return this.jumpTo({bearing:n},o),this}getPadding(){return this.transform.padding}setPadding(n,o){return this.jumpTo({padding:n},o),this}rotateTo(n,o,m){return this.easeTo(a.l({bearing:n},o),m)}resetNorth(n,o){return this.rotateTo(0,a.l({duration:1e3},n),o),this}resetNorthPitch(n,o){return this.easeTo(a.l({bearing:0,pitch:0,duration:1e3},n),o),this}snapToNorth(n,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,o):this}getPitch(){return this.transform.pitch}setPitch(n,o){return this.jumpTo({pitch:n},o),this}cameraForBounds(n,o){n=a.az.convert(n);const m=o&&o.bearing||0,v=o&&o.pitch||0,S=n.getNorthWest(),D=n.getSouthEast();return this._cameraForBounds(this.transform,S,D,m,v,o)}_extendPadding(n){const o={top:0,right:0,bottom:0,left:0};return n==null?a.l({},o,this.transform.padding):typeof n=="number"?{top:n,bottom:n,right:n,left:n}:a.l({},o,n)}_extendCameraOptions(n){return(n=a.l({offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding=this._extendPadding(n.padding),n}_minimumAABBFrustumDistance(n,o){const m=o.max[0]-o.min[0],v=o.max[1]-o.min[1];return m/v>n.aspect?m/(2*Math.tan(.5*n.fovX)*n.aspect):v/(2*Math.tan(.5*n.fovY)*n.aspect)}_cameraForBoundsOnGlobe(n,o,m,v,S,D){const L=n.clone(),O=this._extendCameraOptions(D);L.bearing=v,L.pitch=S;const U=a.bO.convert(o),q=a.bO.convert(m),Z=.5*(U.lat+q.lat),X=.5*(U.lng+q.lng),ne=a.dC(Z,X),ge=a.ab.vec3.normalize([],ne),he=a.ab.vec3.normalize([],a.ab.vec3.cross([],ge,[0,1,0])),ve=a.ab.vec3.cross([],he,ge),we=[he[0],he[1],he[2],0,ve[0],ve[1],ve[2],0,ge[0],ge[1],ge[2],0,0,0,0,1],ze=[ne,a.dC(U.lat,U.lng),a.dC(q.lat,U.lng),a.dC(q.lat,q.lng),a.dC(U.lat,q.lng),a.dC(Z,U.lng),a.dC(Z,q.lng),a.dC(U.lat,X),a.dC(q.lat,X)];let Oe=a.cd.fromPoints(ze.map(Mt=>[a.ab.vec3.dot(he,Mt),a.ab.vec3.dot(ve,Mt),a.ab.vec3.dot(ge,Mt)]));const Fe=a.ab.vec3.transformMat4([],Oe.center,we);a.ab.vec3.squaredLength(Fe)===0&&a.ab.vec3.set(Fe,0,0,1),a.ab.vec3.normalize(Fe,Fe),a.ab.vec3.scale(Fe,Fe,a.ax),L.center=a.dD(Fe);const Ye=L.getWorldToCameraMatrix(),Ge=a.ab.mat4.invert(new Float64Array(16),Ye);Oe=a.cd.applyTransform(Oe,a.ab.mat4.multiply([],Ye,we));const Ze=this._extendAABB(Oe,L,O,v);if(!Ze)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Oe=Ze,a.ab.vec3.transformMat4(Fe,Fe,Ye);const We=.5*(Oe.max[2]-Oe.min[2]),nt=this._minimumAABBFrustumDistance(L,Oe),at=a.ab.vec3.scale([],[0,0,1],We),Ct=a.ab.vec3.add(at,Fe,at),_t=nt+(L.pitch===0?0:a.ab.vec3.distance(Fe,Ct)),lt=L.globeCenterInViewSpace,mt=a.ab.vec3.sub([],Fe,[lt[0],lt[1],lt[2]]);a.ab.vec3.normalize(mt,mt),a.ab.vec3.scale(mt,mt,_t);const Nt=a.ab.vec3.add([],Fe,mt);a.ab.vec3.transformMat4(Nt,Nt,Ge);const qt=a.ds/a.ax,Zt=a.ab.vec3.length(Nt),xt=a.bH(Math.max(Zt*qt-a.ds,Number.EPSILON),0),Ft=Math.min(L.zoomFromMercatorZAdjusted(xt),O.maxZoom);return Ft>.5*(a.c6+a.bY)?(L.setProjection({name:"mercator"}),L.zoom=Ft,this._cameraForBounds(L,o,m,v,S,D)):{center:L.center,zoom:Ft,bearing:v,pitch:S}}_extendAABB(n,o,m,v){const S=.5*((m.padding.left||0)+(m.padding.right||0)),D=.5*((m.padding.top||0)+(m.padding.bottom||0)),L=D,O=S,U=S,q=D,Z=o.width-(O+U),X=o.height-(L+q),ne=a.ab.vec3.sub([],n.max,n.min),ge=Math.min(Z/ne[0],X/ne[1]),he=Math.min(o.scaleZoom(o.scale*ge),m.maxZoom);if(isNaN(he))return null;const ve=o.scale/o.zoomScale(he),we=new a.cd([n.min[0]-O*ve,n.min[1]-q*ve,n.min[2]],[n.max[0]+U*ve,n.max[1]+L*ve,n.max[2]]),ze=(typeof m.offset.x=="number"&&typeof m.offset.y=="number"?new a.P(m.offset.x,m.offset.y):a.P.convert(m.offset)).rotate(-a.ai(v));return we.center[0]-=ze.x*ve,we.center[1]+=ze.y*ve,we}queryTerrainElevation(n,o){const m=this.transform.elevation;return m?(o=a.l({},{exaggerated:!0},o),m.getAtPoint(a.aa.fromLngLat(n),null,o.exaggerated)):null}_cameraForBounds(n,o,m,v,S,D){if(n.projection.name==="globe")return this._cameraForBoundsOnGlobe(n,o,m,v,S,D);const L=n.clone(),O=this._extendCameraOptions(D);L.bearing=v,L.pitch=S;const U=a.bO.convert(o),q=a.bO.convert(m),Z=new a.bO(U.lng,q.lat),X=new a.bO(q.lng,U.lat),ne=L.project(U),ge=L.project(q),he=this.queryTerrainElevation(U),ve=this.queryTerrainElevation(q),we=this.queryTerrainElevation(Z),ze=this.queryTerrainElevation(X),Oe=[[ne.x,ne.y,Math.min(he||0,ve||0,we||0,ze||0)],[ge.x,ge.y,Math.max(he||0,ve||0,we||0,ze||0)]];let Fe=a.cd.fromPoints(Oe);const Ye=L.getWorldToCameraMatrix(),Ge=a.ab.mat4.invert(new Float64Array(16),Ye);Fe=a.cd.applyTransform(Fe,Ye);const Ze=this._extendAABB(Fe,L,O,v);if(!Ze)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Fe=Ze;const We=.5*a.ab.vec3.sub([],Fe.max,Fe.min)[2],nt=this._minimumAABBFrustumDistance(L,Fe),at=[0,0,1,0];a.ab.vec4.transformMat4(at,at,Ye),a.ab.vec4.normalize(at,at);const Ct=a.ab.vec3.scale([],at,nt+We),_t=a.ab.vec3.add([],Fe.center,Ct);a.ab.vec3.transformMat4(Fe.center,Fe.center,Ge),a.ab.vec3.transformMat4(_t,_t,Ge);const lt=L.unproject(new a.P(Fe.center[0],Fe.center[1])),mt=a.dE(L.projection,lt),Nt=Math.pow(2,mt),qt=Math.min(L._zoomFromMercatorZ(_t[2]*L.pixelsPerMeter*Nt/L.worldSize),O.maxZoom);return L.mercatorFromTransition&&qt<.5*(a.c6+a.bY)?(L.setProjection({name:"globe"}),L.zoom=qt,this._cameraForBounds(L,o,m,v,S,D)):{center:lt,zoom:qt,bearing:v,pitch:S}}fitBounds(n,o,m){const v=this.cameraForBounds(n,o);return this._fitInternal(v,o,m)}fitScreenCoordinates(n,o,m,v,S){const D=a.P.convert(n),L=a.P.convert(o),O=new a.P(Math.min(D.x,L.x),Math.min(D.y,L.y)),U=new a.P(Math.max(D.x,L.x),Math.max(D.y,L.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(D,L))return this;const q=this.transform.pointLocation3D(O),Z=this.transform.pointLocation3D(U),X=this.transform.pointLocation3D(new a.P(O.x,U.y)),ne=this.transform.pointLocation3D(new a.P(U.x,O.y)),ge=[Math.min(q.lng,Z.lng,X.lng,ne.lng),Math.min(q.lat,Z.lat,X.lat,ne.lat)],he=[Math.max(q.lng,Z.lng,X.lng,ne.lng),Math.max(q.lat,Z.lat,X.lat,ne.lat)],ve=v&&v.pitch?v.pitch:this.getPitch(),we=this._cameraForBounds(this.transform,ge,he,m,ve,v);return this._fitInternal(we,v,S)}_fitInternal(n,o,m){return n?(o=a.l(n,o)).linear?this.easeTo(o,m):this.flyTo(o,m):this}jumpTo(n,o){this.stop();const m=n.preloadOnly?this.transform.clone():this.transform;let v=!1,S=!1,D=!1;"zoom"in n&&m.zoom!==+n.zoom&&(v=!0,m.zoom=+n.zoom),n.center!==void 0&&(m.center=a.bO.convert(n.center)),"bearing"in n&&m.bearing!==+n.bearing&&(S=!0,m.bearing=+n.bearing),"pitch"in n&&m.pitch!==+n.pitch&&(D=!0,m.pitch=+n.pitch);const L=typeof n.padding=="number"?this._extendPadding(n.padding):n.padding;if(n.padding!=null&&!m.isPaddingEqual(L))if(n.retainPadding===!1){const O=m.clone();O.padding=L,m.setLocationAtPoint(m.center,O.centerPoint)}else m.padding=L;return n.preloadOnly?(this._preloadTiles(m),this):(this.fire(new a.z("movestart",o)).fire(new a.z("move",o)),v&&this.fire(new a.z("zoomstart",o)).fire(new a.z("zoom",o)).fire(new a.z("zoomend",o)),S&&this.fire(new a.z("rotatestart",o)).fire(new a.z("rotate",o)).fire(new a.z("rotateend",o)),D&&this.fire(new a.z("pitchstart",o)).fire(new a.z("pitch",o)).fire(new a.z("pitchend",o)),this.fire(new a.z("moveend",o)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||a.w(of),this.transform.getFreeCameraOptions()}setFreeCameraOptions(n,o){const m=this.transform;if(!m.projection.supportsFreeCamera)return a.w(of),this;this.stop();const v=m.zoom,S=m.pitch,D=m.bearing;m.setFreeCameraOptions(n);const L=v!==m.zoom,O=S!==m.pitch,U=D!==m.bearing;return this.fire(new a.z("movestart",o)).fire(new a.z("move",o)),L&&this.fire(new a.z("zoomstart",o)).fire(new a.z("zoom",o)).fire(new a.z("zoomend",o)),U&&this.fire(new a.z("rotatestart",o)).fire(new a.z("rotate",o)).fire(new a.z("rotateend",o)),O&&this.fire(new a.z("pitchstart",o)).fire(new a.z("pitch",o)).fire(new a.z("pitchend",o)),this.fire(new a.z("moveend",o)),this}easeTo(n,o){this._stop(!1,n.easeId),((n=a.l({offset:[0,0],duration:500,easing:a.dA},n)).animate===!1||this._prefersReducedMotion(n))&&(n.duration=0);const m=this.transform,v=this.getZoom(),S=this.getBearing(),D=this.getPitch(),L=this.getPadding(),O="zoom"in n?+n.zoom:v,U="bearing"in n?this._normalizeBearing(n.bearing,S):S,q="pitch"in n?+n.pitch:D,Z=this._extendPadding(n.padding),X=a.P.convert(n.offset);let ne,ge,he;if(m.projection.name==="globe"){const at=a.aa.fromLngLat(m.center),Ct=X.rotate(-m.angle);at.x+=Ct.x/m.worldSize,at.y+=Ct.y/m.worldSize;const _t=at.toLngLat(),lt=a.bO.convert(n.center||_t);this._normalizeCenter(lt),ne=m.centerPoint.add(Ct),ge=new a.P(at.x,at.y).mult(m.worldSize),he=new a.P(a.at(lt.lng),a.aA(lt.lat)).mult(m.worldSize).sub(ge)}else{ne=m.centerPoint.add(X);const at=m.pointLocation(ne),Ct=a.bO.convert(n.center||at);this._normalizeCenter(Ct),ge=m.project(at),he=m.project(Ct).sub(ge)}const ve=m.zoomScale(O-v);let we,ze;n.around&&(we=a.bO.convert(n.around),ze=m.locationPoint(we));const Oe=this._zooming||O!==v,Fe=this._rotating||S!==U,Ye=this._pitching||q!==D,Ge=!m.isPaddingEqual(Z),Ze=n.retainPadding===!1?m.clone():m,We=at=>Ct=>{if(Oe&&(at.zoom=a.af(v,O,Ct)),Fe&&(at.bearing=a.af(S,U,Ct)),Ye&&(at.pitch=a.af(D,q,Ct)),Ge&&(Ze.interpolatePadding(L,Z,Ct),ne=Ze.centerPoint.add(X)),we)at.setLocationAtPoint(we,ze);else{const _t=at.zoomScale(at.zoom-v),lt=O>v?Math.min(2,ve):Math.max(.5,ve),mt=Math.pow(lt,1-Ct),Nt=at.unproject(ge.add(he.mult(Ct*mt)).mult(_t));at.setLocationAtPoint(at.renderWorldCopies?Nt.wrap():Nt,ne)}return n.preloadOnly||this._fireMoveEvents(o),at};if(n.preloadOnly){const at=this._emulate(We,n.duration,m);return this._preloadTiles(at),this}const nt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Oe,this._rotating=Fe,this._pitching=Ye,this._padding=Ge,this._easeId=n.easeId,this._prepareEase(o,n.noMoveStart,nt),this._ease(We(m),at=>{m.cameraElevationReference==="sea"&&m.recenterOnTerrain(),this._afterEase(o,at)},n),this}_prepareEase(n,o,m={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),o||m.moving||this.fire(new a.z("movestart",n)),this._zooming&&!m.zooming&&this.fire(new a.z("zoomstart",n)),this._rotating&&!m.rotating&&this.fire(new a.z("rotatestart",n)),this._pitching&&!m.pitching&&this.fire(new a.z("pitchstart",n))}_fireMoveEvents(n){this.fire(new a.z("move",n)),this._zooming&&this.fire(new a.z("zoom",n)),this._rotating&&this.fire(new a.z("rotate",n)),this._pitching&&this.fire(new a.z("pitch",n))}_afterEase(n,o){if(this._easeId&&o&&this._easeId===o)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const m=this._zooming,v=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new a.z("zoomend",n)),v&&this.fire(new a.z("rotateend",n)),S&&this.fire(new a.z("pitchend",n)),this.fire(new a.z("moveend",n))}flyTo(n,o){if(this._prefersReducedMotion(n)){const Mt=a.ay(n,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(Mt,o)}this.stop(),n=a.l({offset:[0,0],speed:1.2,curve:1.42,easing:a.dA},n);const m=this.transform,v=this.getZoom(),S=this.getBearing(),D=this.getPitch(),L=this.getPadding(),O="zoom"in n?a.aw(+n.zoom,m.minZoom,m.maxZoom):v,U="bearing"in n?this._normalizeBearing(n.bearing,S):S,q="pitch"in n?+n.pitch:D,Z=this._extendPadding(n.padding),X=m.zoomScale(O-v),ne=a.P.convert(n.offset);let ge=m.centerPoint.add(ne);const he=m.pointLocation(ge),ve=a.bO.convert(n.center||he);this._normalizeCenter(ve);const we=m.project(he),ze=m.project(ve).sub(we);let Oe=n.curve;const Fe=Math.max(m.width,m.height),Ye=Fe/X,Ge=ze.mag();if("minZoom"in n){const Mt=a.aw(Math.min(n.minZoom,v,O),m.minZoom,m.maxZoom),Qt=Fe/m.zoomScale(Mt-v);Oe=Math.sqrt(Qt/Ge*2)}const Ze=Oe*Oe;function We(Mt){const Qt=(Ye*Ye-Fe*Fe+(Mt?-1:1)*Ze*Ze*Ge*Ge)/(2*(Mt?Ye:Fe)*Ze*Ge);return Math.log(Math.sqrt(Qt*Qt+1)-Qt)}function nt(Mt){return(Math.exp(Mt)-Math.exp(-Mt))/2}function at(Mt){return(Math.exp(Mt)+Math.exp(-Mt))/2}const Ct=We(0);let _t=function(Mt){return at(Ct)/at(Ct+Oe*Mt)},lt=function(Mt){return Fe*((at(Ct)*(nt(Qt=Ct+Oe*Mt)/at(Qt))-nt(Ct))/Ze)/Ge;var Qt},mt=(We(1)-Ct)/Oe;if(Math.abs(Ge)<1e-6||!isFinite(mt)){if(Math.abs(Fe-Ye)<1e-6)return this.easeTo(n,o);const Mt=Ye<Fe?-1:1;mt=Math.abs(Math.log(Ye/Fe))/Oe,lt=function(){return 0},_t=function(Qt){return Math.exp(Mt*Oe*Qt)}}n.duration="duration"in n?+n.duration:1e3*mt/("screenSpeed"in n?+n.screenSpeed/Oe:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0);const Nt=S!==U,qt=q!==D,Zt=!m.isPaddingEqual(Z),xt=n.retainPadding===!1?m.clone():m,Ft=Mt=>Qt=>{const Ot=Qt*mt,zt=1/_t(Ot);Mt.zoom=Qt===1?O:v+Mt.scaleZoom(zt),Nt&&(Mt.bearing=a.af(S,U,Qt)),qt&&(Mt.pitch=a.af(D,q,Qt)),Zt&&(xt.interpolatePadding(L,Z,Qt),ge=xt.centerPoint.add(ne));const dr=Qt===1?ve:Mt.unproject(we.add(ze.mult(lt(Ot))).mult(zt));return Mt.setLocationAtPoint(Mt.renderWorldCopies?dr.wrap():dr,ge),Mt._updateCameraOnTerrain(),n.preloadOnly||this._fireMoveEvents(o),Mt};if(n.preloadOnly){const Mt=this._emulate(Ft,n.duration,m);return this._preloadTiles(Mt),this}return this._zooming=!0,this._rotating=Nt,this._pitching=qt,this._padding=Zt,this._prepareEase(o,!1),this._ease(Ft(m),()=>this._afterEase(o),n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(n){}_cancelRenderFrame(n){}_stop(n,o){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const m=this._onEaseEnd;this._onEaseEnd=void 0,m.call(this,o)}if(!n){const m=this.handlers;m&&m.stop(!1)}return this}_ease(n,o,m){m.animate===!1||m.duration===0?(n(1),o()):(this._easeStart=a.q.now(),this._easeOptions=m,this._onEaseFrame=n,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const n=Math.min((a.q.now()-this._easeStart)/this._easeOptions.duration,1),o=this._onEaseFrame;o&&o(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(n,o){n=a.bF(n,-180,180);const m=Math.abs(n-o);return Math.abs(n-360-o)<m&&(n-=360),Math.abs(n+360-o)<m&&(n+=360),n}_normalizeCenter(n){const o=this.transform;if(o.maxBounds||o.projection.name!=="globe"&&!o.renderWorldCopies)return;const m=n.lng-o.center.lng;n.lng+=m>180?-360:m<-180?360:0}_prefersReducedMotion(n){return this._respectPrefersReducedMotion&&a.q.prefersReducedMotion&&!(n&&n.essential)}_emulate(n,o,m){const v=Math.ceil(15*o/1e3),S=[],D=n(m.clone());for(let L=0;L<=v;L++){const O=D(L/v);S.push(O.clone())}return S}_preloadTiles(n,o){}}class lf{constructor(n={}){this.options=n,a.aP(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(n){const o=this.options&&this.options.compact,m=n._getUIString("AttributionControl.ToggleAttribution");this._map=n,this._container=Y("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Y("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",m);const v=Y("span","mapboxgl-ctrl-icon",this._compactButton);return v.setAttribute("aria-hidden","true"),v.setAttribute("title",m),this._innerContainer=Y("div","mapboxgl-ctrl-attrib-inner",this._container),o&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),o===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));const o=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.e.ACCESS_TOKEN}];if(n){const m=o.reduce((v,S,D)=>(S.value&&(v+=`${S.key}=${S.value}${D<o.length-1?"&":""}`),v),"?");n.href=`${a.e.FEEDBACK_URL}/${m}#${Mp(this._map,!0)}`,n.rel="noopener nofollow"}}_updateData(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let n=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const o=this._map.style._mergedSourceCaches;for(const v in o){const S=o[v];if(S.used){const D=S.getSource();D.attribution&&n.indexOf(D.attribution)<0&&n.push(D.attribution)}}n.sort((v,S)=>v.length-S.length),n=n.filter((v,S)=>{for(let D=S+1;D<n.length;D++)if(n[D].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=[...this.options.customAttribution,...n]:n.unshift(this.options.customAttribution));const m=n.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,n.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class xc{constructor(){a.aP(["_updateLogo","_updateCompact"],this)}onAdd(n){this._map=n,this._container=Y("div","mapboxgl-ctrl");const o=Y("a","mapboxgl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://www.mapbox.com/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const n=this._map.style._sourceCaches;if(Object.entries(n).length===0)return!0;for(const o in n){const m=n[o].getSource();if(m.hasOwnProperty("mapbox_logo")&&!m.mapbox_logo)return!1}return!0}_updateCompact(){const n=this._container.children;if(n.length){const o=n[0];this._map.getCanvasContainer().offsetWidth<250?o.classList.add("mapboxgl-compact"):o.classList.remove("mapboxgl-compact")}}}class cf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const o=++this._id;return this._queue.push({callback:n,id:o,cancelled:!1}),o}remove(n){const o=this._currentlyRunning,m=o?this._queue.concat(o):this._queue;for(const v of m)if(v.id===n)return void(v.cancelled=!0)}run(n=0){const o=this._currentlyRunning=this._queue;this._queue=[];for(const m of o)if(!m.cancelled&&(m.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class co{constructor(n){this.jumpTo(n)}getValue(n){if(n<=this._startTime)return this._start;if(n>=this._endTime)return this._end;const o=a.cB((n-this._startTime)/(this._endTime-this._startTime));return this._start*(1-o)+this._end*o}isEasing(n){return n>=this._startTime&&n<=this._endTime}jumpTo(n){this._startTime=-1/0,this._endTime=-1/0,this._start=n,this._end=n}easeTo(n,o,m){this._start=this.getValue(o),this._end=n,this._startTime=o,this._endTime=o+m}}const uo={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},ru=["mouseenter","mouseover","mouseleave","mouseout"];class Al extends a.z{constructor(n,o,m,v){const{point:S,lngLat:D,originalEvent:L,target:O}=n;super(n.type,{point:S,lngLat:D,originalEvent:L,target:O}),this.preventDefault=()=>{n.preventDefault()},this.id=o,this.interaction=m,this.feature=v}}class nu{constructor(n){this.map=n,this.interactionsByType=new Map,this.typeById=new Map,this.filters=new Map,this.delegatedHandlers=new Map,this.handleType=this.handleType.bind(this)}add(n,o){if(this.typeById.has(n))throw new Error(`Interaction id "${n}" already exists.`);const{type:m,filter:v}=o;v&&this.filters.set(n,a.aZ(v));const S=this.interactionsByType.get(m)||new Map;if(S.size===0){if(ru.includes(m)){const{mousemove:D,mouseout:L}=this._createDelegatedHandlers(n,o);this.map.on("mousemove",D),this.map.on("mouseout",L),this.delegatedHandlers.set(n,{mousemove:D,mouseout:L})}else this.map.on(m,this.handleType);this.interactionsByType.set(m,S)}S.set(n,o),this.typeById.set(n,m)}get(n){const o=this.typeById.get(n);if(!o)return;const m=this.interactionsByType.get(o);return m?m.get(n):void 0}remove(n){const o=this.typeById.get(n);if(!o)return;this.typeById.delete(n),this.filters.delete(n);const m=this.interactionsByType.get(o);if(m){if(m.delete(n),this.delegatedHandlers.has(n)){const{mousemove:v,mouseout:S}=this.delegatedHandlers.get(n);this.map.off("mousemove",v),this.map.off("mouseout",S),this.delegatedHandlers.delete(n)}m.size===0&&this.map.off(o,this.handleType)}}queryTargets(n,o){const m=[];for(const[v,S]of o)S.target&&m.push({targetId:v,target:S.target,filter:this.filters.get(v)});return this.map.style.queryRenderedTargets(n,m,this.map.transform)}handleType(n,o){const m=this.interactionsByType.get(n.type),v=Array.from(m).reverse();o=o||this.queryTargets(n.point,v);let S=!1;for(const D of o){for(const[L,O]of v){if(!O.target)continue;const U=D.variants?D.variants[L]:null;if(U){for(const q of U){const Z=new a.cw(D,q);if(O.handler(new Al(n,L,O,Z))!==!1){S=!0;break}}if(S)break}}if(S)break}if(!S)for(const[D,L]of v){const{handler:O,target:U}=L;if(!U&&O(new Al(n,D,L,null))!==!1)break}}_createDelegatedHandlers(n,o){switch(o.type){case"mouseenter":case"mouseover":{let m=!1,v=new Set;return{mousemove:S=>{const D=this.queryTargets(S.point,[[n,o]]),L=new Set;if(!D.length)return m=!1,void v.clear();const O=[];for(const U of D)v.has(U.id)||(L.add(U.id),O.push(U));m&&!O.length||(m=!0,v=L,S.type=o.type,this.handleType(S,O))},mouseout:()=>{m=!1,v.clear()}}}case"mouseleave":case"mouseout":{let m=[];return{mousemove:v=>{const S=this.queryTargets(v.point,[[n,o]]);if(!S.length)return v.type=o.type,this.handleType(v,m),void(m=S);const D=[],L=new Set(S.map(O=>O.id));for(const O of m)L.has(O.id)||D.push(O);D.length&&(v.type=o.type,this.handleType(v,D)),m=S},mouseout:v=>{m.length&&(v.type=o.type,this.handleType(v,m),m=[])}}}}}}function $p(p,n){if(Array.isArray(p)&&Array.isArray(n)){const o=new Set(p),m=new Set(n);return o.size===m.size&&p.every(v=>m.has(v))}return a.bn(p,n)}const $n={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},sl={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ym{constructor(n,o,m=!1){this._clickTolerance=10,this.element=o,this.mouseRotate=new so({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,m&&(this.mousePitch=new $o({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),a.aP(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener("mousedown",this.mousedown),o.addEventListener("touchstart",this.touchstart,{passive:!1}),o.addEventListener("touchmove",this.touchmove),o.addEventListener("touchend",this.touchend),o.addEventListener("touchcancel",this.reset)}down(n,o){this.mouseRotate.mousedown(n,o),this.mousePitch&&this.mousePitch.mousedown(n,o),pe()}move(n,o){const m=this.map,v=this.mouseRotate.mousemoveWindow(n,o),S=v&&v.bearingDelta;if(S&&m.setBearing(m.getBearing()+S),this.mousePitch){const D=this.mousePitch.mousemoveWindow(n,o),L=D&&D.pitchDelta;L&&m.setPitch(m.getPitch()+L)}}off(){const n=this.element;n.removeEventListener("mousedown",this.mousedown),n.removeEventListener("touchstart",this.touchstart,{passive:!1}),n.removeEventListener("touchmove",this.touchmove),n.removeEventListener("touchend",this.touchend),n.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Se(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(n){this.down(a.l({},n,{ctrlKey:!0,preventDefault:()=>n.preventDefault()}),re(this.element,n)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(n){this.move(n,re(this.element,n))}mouseup(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()}touchstart(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Ee(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>n.preventDefault()},this._startPos))}touchmove(n){n.targetTouches.length!==1?this.reset():(this._lastPos=Ee(this.element,n.targetTouches)[0],this.move({preventDefault:()=>n.preventDefault()},this._lastPos))}touchend(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Jm(p,n,o){if(p=new a.bO(p.lng,p.lat),n){const m=new a.bO(p.lng-360,p.lat),v=new a.bO(p.lng+360,p.lat),S=360*Math.ceil(Math.abs(p.lng-o.center.lng)/360),D=o.locationPoint(p).distSqr(n),L=n.x<0||n.y<0||n.x>o.width||n.y>o.height;o.locationPoint(m).distSqr(n)<D&&(L||Math.abs(m.lng-o.center.lng)<S)?p=m:o.locationPoint(v).distSqr(n)<D&&(L||Math.abs(v.lng-o.center.lng)<S)&&(p=v)}for(;Math.abs(p.lng-o.center.lng)>180;){const m=o.locationPoint(p);if(m.x>=0&&m.y>=0&&m.x<=o.width&&m.y<=o.height)break;p.lng>o.center.lng?p.lng-=360:p.lng+=360}return p}const od={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class ol extends a.E{constructor(n,o){if(super(),(n instanceof HTMLElement||o)&&(n=a.l({element:n},o)),a.aP(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=n&&n.occludedOpacity||.2,n&&n.element)this._element=n.element,this._offset=a.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=Y("div");const S=41,D=27,L=oe("svg",{display:"block",height:S*this._scale+"px",width:D*this._scale+"px",viewBox:`0 0 ${D} ${S}`},this._element),O=oe("radialGradient",{id:"shadowGradient"},oe("defs",{},L));oe("stop",{offset:"10%","stop-opacity":.4},O),oe("stop",{offset:"100%","stop-opacity":.05},O),oe("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},L),oe("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},L),oe("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},L),oe("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},L),this._offset=a.P.convert(n&&n.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",S=>{S.preventDefault()}),this._element.addEventListener("mousedown",S=>{S.preventDefault()});const m=this._element.classList;for(const S in od)m.remove(`mapboxgl-marker-anchor-${S}`);m.add(`mapboxgl-marker-anchor-${this._anchor}`);const v=n&&n.className?n.className.trim().split(/\s+/):[];m.add(...v),this._popup=null}addTo(n){return n===this._map||(this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._updateMoving),n.on("moveend",this._update),n.on("remove",this._clearFadeTimer),n._addMarker(this),this.setDraggable(this._draggable),this._update(),n.on("click",this._onMapClick)),this}remove(){const n=this._map;return n&&(n.off("click",this._onMapClick),n.off("move",this._updateMoving),n.off("moveend",this._update),n.off("mousedown",this._addDragHandler),n.off("touchstart",this._addDragHandler),n.off("mouseup",this._onUp),n.off("touchend",this._onUp),n.off("mousemove",this._onMove),n.off("touchmove",this._onMove),n.off("remove",this._clearFadeTimer),n._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=a.bO.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,n._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(n){const o=n.code,m=n.charCode||n.keyCode;o!=="Space"&&o!=="Enter"&&m!==32&&m!==13||this.togglePopup()}_onMapClick(n){const o=n.originalEvent.target,m=this._element;this._popup&&(o===m||m.contains(o))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const n=this._popup;return n?(n.isOpen()?(n.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(n.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const n=this._map,o=this._pos;if(!n||!o)return!1;const m=n.unproject(o),v=n.getFreeCameraOptions();if(!v.position)return!1;const S=v.position.toLngLat();return S.distanceTo(m)<.9*S.distanceTo(this._lngLat)}_evaluateOpacity(){const n=this._map;if(!n)return;const o=this._pos;if(!o||o.x<0||o.x>n.transform.width||o.y<0||o.y>n.transform.height)return void this._clearFadeTimer();const m=n.unproject(o);let v;n._showingGlobe()&&a.dH(n.transform,this._lngLat)?v=0:(v=1-n._queryFogOpacity(m),n.transform._terrainEnabled()&&n.getTerrain()&&this._behindTerrain()&&(v*=this._occludedOpacity)),this._element.style.opacity=`${v}`,this._element.style.pointerEvents=v>0?"auto":"none",this._popup&&this._popup._setOpacity(v),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const n=this._pos;if(!n||!this._map)return;const o=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${n.x}px,${n.y}px)
            ${od[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${o.x}px,${o.y}px)
        `}_calculateXYTransform(){const n=this._pos,o=this._map,m=this.getPitchAlignment();if(!o||!n||m!=="map")return"";if(!o._showingGlobe()){const O=o.getPitch();return O?`rotateX(${O}deg)`:""}const v=a.c4(a.dI(o.transform,this._lngLat)),S=n.sub(a.dJ(o.transform)),D=Math.abs(S.x)+Math.abs(S.y);if(D===0)return"";const L=v/D;return`rotateX(${-S.y*L}deg) rotateY(${S.x*L}deg)`}_calculateZTransform(){const n=this._pos,o=this._map;if(!o||!n)return"";let m=0;const v=this.getRotationAlignment();if(v==="map")if(o._showingGlobe()){const S=o.project(new a.bO(this._lngLat.lng,this._lngLat.lat+.001)),D=o.project(new a.bO(this._lngLat.lng,this._lngLat.lat-.001)).sub(S);m=a.c4(Math.atan2(D.y,D.x))-90}else m=-o.getBearing();else if(v==="horizon"){const S=a.ac(4,6,o.getZoom()),D=a.dJ(o.transform);D.y+=S*o.transform.height;const L=n.sub(D),O=a.c4(Math.atan2(L.y,L.x));m=(O>90?O-270:O+90)*(1-S)}return m+=this._rotation,m?`rotateZ(${m}deg)`:""}_update(n){cancelAnimationFrame(this._updateFrameId);const o=this._map;o&&(o.transform.renderWorldCopies&&(this._lngLat=Jm(this._lngLat,this._pos,o.transform)),this._pos=o.project(this._lngLat),n===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),o._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(o._showingGlobe()||o.getTerrain()||o.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(n){return this._offset=a.P.convert(n),this._update(),this}addClassName(n){return this._element.classList.add(n),this}removeClassName(n){return this._element.classList.remove(n),this}toggleClassName(n){return this._element.classList.toggle(n)}_onMove(n){const o=this._map;if(!o)return;const m=this._pointerdownPos,v=this._positionDelta;if(m&&v){if(!this._isDragging){const S=this._clickTolerance||o._clickTolerance;if(n.point.dist(m)<S)return;this._isDragging=!0}this._pos=n.point.sub(v),this._lngLat=o.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.z("dragstart"))),this.fire(new a.z("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const n=this._map;n&&(n.off("mousemove",this._onMove),n.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new a.z("dragend")),this._state="inactive"}_addDragHandler(n){const o=this._map,m=this._pos;o&&m&&this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(m),this._pointerdownPos=n.point,this._state="pending",o.on("mousemove",this._onMove),o.on("touchmove",this._onMove),o.once("mouseup",this._onUp),o.once("touchend",this._onUp))}setDraggable(n){this._draggable=!!n;const o=this._map;return o&&(n?(o.on("mousedown",this._addDragHandler),o.on("touchstart",this._addDragHandler)):(o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(n){return this._occludedOpacity=n||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const ls={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Xi={maxWidth:100,unit:"metric"},qs={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Li={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},kl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function cs(p=new a.P(0,0),n="bottom"){if(typeof p=="number"){const o=Math.round(Math.sqrt(.5*Math.pow(p,2)));switch(n){case"top":return new a.P(0,p);case"top-left":return new a.P(o,o);case"top-right":return new a.P(-o,o);case"bottom":return new a.P(0,-p);case"bottom-left":return new a.P(o,-o);case"bottom-right":return new a.P(-o,-o);case"left":return new a.P(p,0);case"right":return new a.P(-p,0)}return new a.P(0,0)}return p instanceof a.P||Array.isArray(p)?a.P.convert(p):a.P.convert(p[n]||[0,0])}return{version:A,supported:te.supported,setRTLTextPlugin:a.dK,getRTLTextPluginStatus:a.dL,Map:class extends Xm{constructor(p){N.mark(B.create);const n=p;if((p=a.l({},$n,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(p.antialias&&a.dF(window)&&(p.antialias=!1,a.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ih(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),p),this._repaint=!!p.repaint,this._interactive=p.interactive,this._minTileCacheSize=p.minTileCacheSize,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=p.crossSourceCollisions,this._collectResourceTiming=p.collectResourceTiming,this._language=this._parseLanguage(p.language),this._worldview=p.worldview,this._renderTaskQueue=new cf,this._domRenderTaskQueue=new cf,this._controls=[],this._markers=[],this._popups=[],this._mapId=a.aV(),this._locale=a.l({},uo,p.locale),this._clickTolerance=p.clickTolerance,this._cooperativeGestures=p.cooperativeGestures,this._performanceMetricsCollection=p.performanceMetricsCollection,this._tessellationStep=p.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=p.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new co(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=p.scaleFactor,this._requestManager=new Pe(p.transformRequest,p.accessToken,p.testMode),this._silenceAuthErrors=!!p.testMode,this._contextCreateOptions=p.contextCreateOptions?{...p.contextCreateOptions}:{},typeof p.container=="string"){const o=document.getElementById(p.container);if(!o)throw new Error(`Container '${p.container.toString()}' not found.`);this._container=o}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(this._container.childNodes.length>0&&a.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),p.maxBounds&&this.setMaxBounds(p.maxBounds),this._spriteFormat=p.spriteFormat,a.aP(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new Zh),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new os(this,p),this._localFontFamily=p.localFontFamily,this._localIdeographFontFamily=p.localIdeographFontFamily,(p.style||!p.testMode)&&this.setStyle(p.style||a.e.DEFAULT_STYLE,{config:p.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),p.projection&&this.setProjection(p.projection),this.indoor=new b0(this),p.hash&&(this._hash=new Pp(typeof p.hash=="string"&&p.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){n.center==null&&n.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch});const o=p.bounds;o&&(this.resize(),this.fitBounds(o,a.l({},p.fitBoundsOptions,{duration:0})))}this.resize(),p.attributionControl&&this.addControl(new lf({customAttribution:p.customAttribution})),this._logoControl=new xc,this.addControl(this._logoControl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new a.z(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new a.z(`${o.dataType}dataloading`,o))}),this._interactions=new nu(this)}_getMapId(){return this._mapId}addControl(p,n){if(n===void 0&&(n=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new a.y(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=p.onAdd(this);this._controls.push(p);const m=this._controlPositions[n];return n.indexOf("bottom")!==-1?m.insertBefore(o,m.firstChild):m.appendChild(o),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new a.y(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(p);return n>-1&&this._controls.splice(n,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(p){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new a.z("movestart",p)).fire(new a.z("move",p)),this.fire(new a.z("resize",p)),n&&this.fire(new a.z("moveend",p)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(p){return this.transform.setMaxBounds(a.az.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p?this.setZoom(p):this.fire(new a.z("zoomstart")).fire(new a.z("zoom")).fire(new a.z("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p?this.setZoom(p):this.fire(new a.z("zoomstart")).fire(new a.z("zoom")).fire(new a.z("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p?this.setPitch(p):this.fire(new a.z("pitchstart")).fire(new a.z("pitch")).fire(new a.z("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p?this.setPitch(p):this.fire(new a.z("pitchstart")).fire(new a.z("pitch")).fire(new a.z("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(p){return this._scaleFactor=p,this.painter.scaleFactor=p,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(n=>n.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(p){return p==="auto"?navigator.language:Array.isArray(p)?p.length===0?void 0:p.map(n=>n==="auto"?navigator.language:n):p}setLanguage(p){const n=this._parseLanguage(p);if(!this.style||n===this._language)return this;this._language=n,this.style.reloadSources();for(const o of this._controls)o._setLanguage&&o._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(p){return this.style&&p!==this._worldview?(this._worldview=p,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(p){return this._lazyInitEmptyStyle(),p?typeof p=="string"&&(p={name:p}):p=null,this._useExplicitProjection=!!p,this._prioritizeAndUpdateProjection(p,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const p=this.transform,n=p.projection.name;let o;n==="globe"&&p.zoom>=a.bY?(p.setMercatorFromTransition(),o=!0):n==="mercator"&&p.zoom<a.bY&&(p.setProjection({name:"globe"}),o=!0),o&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(p,n){return this._updateProjection(p||n||{name:"mercator"})}_updateProjection(p){let n;return n=p.name==="globe"&&this.transform.zoom>=a.bY?this.transform.setMercatorFromTransition():this.transform.setProjection(p),this.style.applyProjectionUpdate(),n&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(p){return this.transform.locationPoint3D(a.bO.convert(p))}unproject(p){return this.transform.pointLocation3D(a.P.convert(p))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(p,n,o){const m=v=>{let S=[];if(Array.isArray(n)){const D=n.filter(L=>this.getLayer(L));S=D.length?this.queryRenderedFeatures(v,{layers:D}):[]}else S=this.queryRenderedFeatures(v,{target:n});return S};if(p==="mouseenter"||p==="mouseover"){let v=!1;return{listener:o,targets:n,delegates:{mousemove:D=>{const L=m(D.point);L.length?v||(v=!0,o.call(this,new $s(p,this,D.originalEvent,{features:L}))):v=!1},mouseout:()=>{v=!1}}}}if(p==="mouseleave"||p==="mouseout"){let v=!1;return{listener:o,targets:n,delegates:{mousemove:L=>{m(L.point).length?v=!0:v&&(v=!1,o.call(this,new $s(p,this,L.originalEvent)))},mouseout:L=>{v&&(v=!1,o.call(this,new $s(p,this,L.originalEvent)))}}}}{const v=S=>{const D=m(S.point);D.length&&(S.features=D,o.call(this,S),delete S.features)};return{listener:o,targets:n,delegates:{[p]:v}}}}on(p,n,o){if(typeof n=="function"||o===void 0)return super.on(p,n);if(typeof n=="string"&&(n=[n]),!this._areTargetsValid(n))return this;const m=this._createDelegatedListener(p,n,o);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(m);for(const v in m.delegates)this.on(v,m.delegates[v]);return this}once(p,n,o){if(typeof n=="function"||o===void 0)return super.once(p,n);if(typeof n=="string"&&(n=[n]),!this._areTargetsValid(n))return this;const m=this._createDelegatedListener(p,n,o);for(const v in m.delegates)this.once(v,m.delegates[v]);return this}off(p,n,o){if(typeof n=="function"||o===void 0)return super.off(p,n);if(typeof n=="string"&&(n=[n]),!this._areTargetsValid(n))return this;const m=this._delegatedListeners?this._delegatedListeners[p]:void 0;return m&&(v=>{for(let S=0;S<v.length;S++){const D=v[S];if(D.listener===o&&$p(D.targets,n)){for(const L in D.delegates)this.off(L,D.delegates[L]);return v.splice(S,1),this}}})(m),this}queryRenderedFeatures(p,n){if(!this.style)return[];if(p===void 0||p instanceof a.P||Array.isArray(p)||n!==void 0||(n=p,p=void 0),p=p||[[0,0],[this.transform.width,this.transform.height]],!n){const S=this.style.queryRenderedFeatures(p,void 0,this.transform),D=this.style.queryRenderedFeatureset(p,void 0,this.transform);return S.concat(D)}let o=!0;if(n.target&&(o=this._isTargetValid(n.target),o&&!n.layers))return this.style.queryRenderedFeatureset(p,n,this.transform);let m=!0;if(n.layers&&Array.isArray(n.layers)){for(const S of n.layers)if(!this._isValidId(S)){m=!1;break}if(m&&!n.target)return this.style.queryRenderedFeatures(p,n,this.transform)}let v=[];return m&&(v=v.concat(this.style.queryRenderedFeatures(p,n,this.transform))),o&&(v=v.concat(this.style.queryRenderedFeatureset(p,n,this.transform))),v}querySourceFeatures(p,n){return!p||typeof p=="string"&&!this._isValidId(p)?[]:this.style.querySourceFeatures(p,n)}isPointOnSurface(p){const{name:n}=this.transform.projection;return n!=="globe"&&n!=="mercator"&&a.w(`${n} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(a.P.convert(p))}addInteraction(p,n){return this._interactions.add(p,n),this}removeInteraction(p){return this._interactions.remove(p),this}setStyle(p,n){return n=a.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n),this.style&&p&&n.diff!==!1&&n.localFontFamily===this._localFontFamily&&n.localIdeographFontFamily===this._localIdeographFontFamily&&!n.config?(this.style._diffStyle(p,(o,m)=>{o?(a.w(`Unable to perform style diff: ${String(o.message||o.error||o)}. Rebuilding the style from scratch.`),this._updateStyle(p,n)):m&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(p,n))}_getUIString(p){const n=this._locale[p];if(n==null)throw new Error(`Missing UI string '${p}'`);return n}_updateStyle(p,n){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),p){const o=a.l({},n);n&&n.config&&(o.initialConfig=n.config,delete o.config),this.style=new ks(this,o).load(p),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ks(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(a.w("There is no style added to the map."),!1)}_isValidId(p){return p==null?(this.fire(new a.y(new Error("IDs can't be empty."))),!1):!a.cr(p)||(this.fire(new a.y(new Error(`IDs can't contain special symbols: "${p}".`))),!1)}_isTargetValid(p){return"featuresetId"in p?this._isValidId("importId"in p?p.importId:p.featuresetId):"layerId"in p&&this._isValidId(p.layerId)}_areTargetsValid(p){if(Array.isArray(p)){for(const n of p)if(!this._isValidId(n))return!1;return!0}return this._isTargetValid(p)}addSource(p,n){return this._isValidId(p)?(this._lazyInitEmptyStyle(),this.style.addSource(p,n),this._update(!0)):this}isSourceLoaded(p){return!!this._isValidId(p)&&!!this.style&&this.style._isSourceCacheLoaded(p)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(p,n,o){this._lazyInitEmptyStyle(),this.style.addSourceType(p,n,o)}removeSource(p){return this._isValidId(p)?(this.style.removeSource(p),this._updateTerrain(),this._update(!0)):this}getSource(p){return this._isValidId(p)?this.style.getOwnSource(p):null}addImage(p,n,{pixelRatio:o=1,sdf:m=!1,stretchX:v,stretchY:S,content:D}={}){if(this._lazyInitEmptyStyle(),n instanceof HTMLImageElement||ImageBitmap&&n instanceof ImageBitmap){const{width:L,height:O,data:U}=a.q.getImageData(n);this.style.addImage(p,{data:new a.r({width:L,height:O},U),pixelRatio:o,stretchX:v,stretchY:S,content:D,sdf:m,version:0,usvg:!1})}else if(n.width===void 0||n.height===void 0)this.fire(new a.y(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:L,height:O}=n,U=n;this.style.addImage(p,{data:new a.r({width:L,height:O},new Uint8Array(U.data)),pixelRatio:o,stretchX:v,stretchY:S,content:D,sdf:m,usvg:!1,version:0,userImage:U}),U.onAdd&&U.onAdd(this,p)}}updateImage(p,n){this._lazyInitEmptyStyle();const o=this.style.getImage(p);if(!o)return void this.fire(new a.y(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=n instanceof HTMLImageElement||ImageBitmap&&n instanceof ImageBitmap?a.q.getImageData(n):n,{width:v,height:S,data:D}=m;if(v===void 0||S===void 0)return void this.fire(new a.y(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==(o.usvg?o.icon.usvg_tree.width:o.data.width)||S!==(o.usvg?o.icon.usvg_tree.height:o.data.height))return void this.fire(new a.y(new Error(`The width and height of the updated image (${v}, ${S})
                must be that same as the previous version of the image
                (${o.data.width}, ${o.data.height})`)));const L=!(n instanceof HTMLImageElement||ImageBitmap&&n instanceof ImageBitmap);let O=!1;o.usvg?(o.data=new a.r({width:v,height:S},new Uint8Array(D)),o.usvg=!1,o.icon=void 0,O=!0):o.data.replace(D,L),this.style.updateImage(p,o,O)}hasImage(p){return p?!!this.style&&!!this.style.getImage(p):(this.fire(new a.y(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,n){a.o(this._requestManager.transformRequest(p,a.R.Image),(o,m)=>{n(o,m instanceof HTMLImageElement?a.q.getImageData(m):m)})}listImages(){return this.style.listImages()}addModel(p,n){this._lazyInitEmptyStyle(),this.style.addModel(p,n)}hasModel(p){return p?this.style.hasModel(p):(this.fire(new a.y(new Error("Missing required model id"))),!1)}removeModel(p){this.style.removeModel(p)}listModels(){return this.style.listModels()}addLayer(p,n){return this._isValidId(p.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(p,n),this._update(!0)):this}getSlot(p){const n=this.getLayer(p);return n&&n.slot||null}setSlot(p,n){return this.style.setSlot(p,n),this.style.mergeLayers(),this._update(!0)}addImport(p,n){return this.style.addImport(p,n),this}updateImport(p,n){return typeof n!="string"&&n.id!==p?(this.removeImport(p),this.addImport(n)):(this.style.updateImport(p,n),this._update(!0))}removeImport(p){return this.style.removeImport(p),this}moveImport(p,n){return this.style.moveImport(p,n),this._update(!0)}moveLayer(p,n){return this._isValidId(p)?(this.style.moveLayer(p,n),this._update(!0)):this}removeLayer(p){return this._isValidId(p)?(this.style.removeLayer(p),this._update(!0)):this}getLayer(p){if(!this._isValidId(p))return null;const n=this.style.getOwnLayer(p);return n?n.type==="custom"?n.implementation:n.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(p,n,o){return this._isValidId(p)?(this.style.setLayerZoomRange(p,n,o),this._update(!0)):this}setFilter(p,n,o={}){return this._isValidId(p)?(this.style.setFilter(p,n,o),this._update(!0)):this}getFilter(p){return this._isValidId(p)?this.style.getFilter(p):null}setPaintProperty(p,n,o,m={}){return this._isValidId(p)?(this.style.setPaintProperty(p,n,o,m),this._update(!0)):this}getPaintProperty(p,n){return this._isValidId(p)?this.style.getPaintProperty(p,n):null}setLayoutProperty(p,n,o,m={}){return this._isValidId(p)?(this.style.setLayoutProperty(p,n,o,m),this._update(!0)):this}getLayoutProperty(p,n){return this._isValidId(p)?this.style.getLayoutProperty(p,n):null}getSchema(p){return this.style.getSchema(p)}setSchema(p,n){return this.style.setSchema(p,n),this._update(!0)}getConfig(p){return this.style.getConfig(p)}setConfig(p,n){return this.style.setConfig(p,n),this._update(!0)}getConfigProperty(p,n){return this.style.getConfigProperty(p,n)}setConfigProperty(p,n,o){return this.style.setConfigProperty(p,n,o),this._update(!0)}getFeaturesetDescriptors(p){return this.style.getFeaturesetDescriptors(p)}setLights(p){if(this._lazyInitEmptyStyle(),p&&p.length===1&&p[0].type==="flat"){const n=p[0];n.properties?this.style.setFlatLight(n.properties,n.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(p),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const p=this.style.getLights()||[];return p.length===0&&p.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),p}setLight(p,n={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:p}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(p){return this._lazyInitEmptyStyle(),!p&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(p),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(p){return this._lazyInitEmptyStyle(),this.style.setFog(p),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(p){return this._lazyInitEmptyStyle(),this.style.setSnow(p),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(p){return this._lazyInitEmptyStyle(),this.style.setRain(p),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(p){return this._lazyInitEmptyStyle(),this.style.setColorTheme(p),this._update(!0)}setImportColorTheme(p,n){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(p,n),this._update(!0)}setCamera(p){return this.style.setCamera(p),this._triggerCameraUpdate(p)}_triggerCameraUpdate(p){return this._update(this.transform.setOrthographicProjectionAtLowPitch(p["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(p){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(a.bO.convert(p),this.transform):0}setFeatureState(p,n){return p.source&&!this._isValidId(p.source)?this:(this.style.setFeatureState(p,n),this._update())}removeFeatureState(p,n){return p.source&&!this._isValidId(p.source)?this:(this.style.removeFeatureState(p,n),this._update())}getFeatureState(p){return p.source&&!this._isValidId(p.source)?null:this.style.getFeatureState(p)}_updateContainerDimensions(){if(!this._container)return;const p=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let o,m,v,S=this._container;for(;S&&(!m||!v);){const D=window.getComputedStyle(S).transform;D&&D!=="none"&&(o=D.match(/matrix.*\((.+)\)/)[1].split(", "),o[0]&&o[0]!=="0"&&o[0]!=="1"&&(m=o[0]),o[3]&&o[3]!=="0"&&o[3]!=="1"&&(v=o[3])),S=S.parentElement}this._containerWidth=m?Math.abs(p/m):p,this._containerHeight=v?Math.abs(n/v):n}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=Y("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();const n=this._canvasContainer=Y("div","mapboxgl-canvas-container",p);this._canvas=Y("canvas","mapboxgl-canvas",n),this._interactive&&(n.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const o=this._controlContainer=Y("div","mapboxgl-control-container",p),m=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(v=>{m[v]=Y("div",`mapboxgl-ctrl-${v}`,o)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,n){const o=a.q.devicePixelRatio||1;this._canvas.width=o*Math.ceil(p),this._canvas.height=o*Math.ceil(n),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${n}px`}_addMarker(p){this._markers.push(p)}_removeMarker(p){const n=this._markers.indexOf(p);n!==-1&&this._markers.splice(n,1)}_addPopup(p){this._popups.push(p)}_removePopup(p){const n=this._popups.indexOf(p);n!==-1&&this._popups.splice(n,1)}_setupPainter(){const p=a.l({},te.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl2",p);n?(Sr(n,!0),this.painter=new tf(n,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",o=>{o.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),a.m.testSupport(n)):this.fire(new a.y(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.z("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new a.z("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_requestDomTask(p){!this.loaded()||this.loaded()&&!this.isMoving()?p():this._domRenderTaskQueue.add(p)}_render(p){let n;this.fire(new a.z("renderstart")),++this._frameId;const o=this.painter.context.extTimerQuery,m=a.q.now(),v=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(n=v.createQuery(),v.beginQuery(o.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(p),this._domRenderTaskQueue.run(p),this._removed)return;this._updateProjectionTransition();const S=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const U=this.transform.zoom,q=this.transform.pitch,Z=a.q.now(),X=new a.a8(U,{now:Z,fadeDuration:S,pitch:q,transition:this.style.transition});this.style.update(X)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let D=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),D=this._updateAverageElevation(m),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):D=this._updateAverageElevation(m);const L=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,S,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),L&&(this._placementDirty=L.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new a.z("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,N.mark(B.load),this.fire(new a.z("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){const U=a.q.now()-m;v.endQuery(o.TIME_ELAPSED_EXT),setTimeout(()=>{const q=v.getQueryParameter(n,v.QUERY_RESULT)/1e6;v.deleteQuery(n),this.fire(new a.z("gpu-timing-frame",{cpuTime:U,gpuTime:q}))},50)}if(this.listens("gpu-timing-layer")){const U=this.painter.collectGpuTimers();setTimeout(()=>{const q=this.painter.queryGpuTimers(U);this.fire(new a.z("gpu-timing-layer",{layerTimes:q}))},50)}if(this.listens("gpu-timing-deferred-render")){const U=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const q=this.painter.queryGpuTimeDeferredRender(U);this.fire(new a.z("gpu-timing-deferred-render",{gpuTime:q}))},50)}const O=this._sourcesDirty||this._styleDirty||this._placementDirty||D;if(O||this._repaint)this.triggerRepaint();else{const U=this.idle();if(U&&(D=this._updateAverageElevation(m,!0)),D)this.triggerRepaint();else if(this._triggerFrame(!1),U&&(this.fire(new a.z("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const q=this._calculateSpeedIndex();this.fire(new a.z("speedindexcompleted",{speedIndex:q})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,N.mark(B.fullLoad),this._performanceMetricsCollection&&Dt(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(p){for(const n of this._markers)p&&!this.getRenderWorldCopies()&&(n._lngLat=n._lngLat.wrap()),n._update();for(const n of this._popups)!p||this.getRenderWorldCopies()||n._trackPointer||(n._lngLat=n._lngLat.wrap()),n._update()}_updateAverageElevation(p,n=!1){const o=v=>(this.transform.averageElevation=v,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&o(0);const m=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(m||(n||p-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(p)){const v=this.transform.averageElevation;let S=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(S)?S=0:this._averageElevationLastSampledAt=p;const D=Math.abs(v-S);if(D>1){if(this._isInitialLoad||m)return this._averageElevation.jumpTo(S),o(S);this._averageElevation.easeTo(S,p,300)}else if(D>1e-4)return this._averageElevation.jumpTo(S),o(S)}return!!this._averageElevation.isEasing(p)&&o(this._averageElevation.getValue(p))}_authenticate(){De(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,p=>{if(p&&(p.message===ce||p.status===401)){const n=this.painter.context.gl;Sr(n,!1),this._logoControl instanceof xc&&this._logoControl._updateLogo(),n&&n.clear(n.DEPTH_BUFFER_BIT|n.COLOR_BUFFER_BIT|n.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new a.y(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),ot(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&Et(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const p=this._isDragging();this.painter.updateTerrain(this.style,p)}_calculateSpeedIndex(){const p=this.painter.canvasCopy(),n=this.painter.getCanvasCopiesAndTimestamps();n.timeStamps.push(performance.now());const o=this.painter.context.gl,m=o.createFramebuffer();function v(S){o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,S,0);const D=new Uint8Array(o.drawingBufferWidth*o.drawingBufferHeight*4);return o.readPixels(0,0,o.drawingBufferWidth,o.drawingBufferHeight,o.RGBA,o.UNSIGNED_BYTE,D),D}return o.bindFramebuffer(o.FRAMEBUFFER,m),this._canvasPixelComparison(v(p),n.canvasCopies.map(v),n.timeStamps)}_canvasPixelComparison(p,n,o){let m=o[1]-o[0];const v=p.length/4;for(let S=0;S<n.length;S++){const D=n[S];let L=0;for(let O=0;O<D.length;O+=4)D[O]===p[O]&&D[O+1]===p[O+1]&&D[O+2]===p[O+2]&&D[O+3]===p[O+3]&&(L+=1);m+=(o[S+2]-o[S+1])*(1-L/v)}return m}remove(){this._hash&&this._hash.remove();for(const n of this._controls)n.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),ur.delete(this.painter.context.gl),er.remove(),Ke.remove(),this._removed=!0,this.fire(new a.z("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(p){this._renderNextFrame=this._renderNextFrame||p,this.style&&!this._frame&&(this._frame=a.q.frame(n=>{const o=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,o&&this._render(n)}))}_preloadTiles(p){const n=this.style?this.style.getSourceCaches():[];return a.bl(n,(o,m)=>o._preloadTiles(p,m),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(p){this._showParseStatus!==p&&(this._showParseStatus=p,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(p){this._showTerrainWireframe!==p&&(this._showTerrainWireframe=p,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(p){this._showLayers2DWireframe!==p&&(this._showLayers2DWireframe=p,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(p){this._showLayers3DWireframe!==p&&(this._showLayers3DWireframe=p,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(p){this._speedIndexTiming!==p&&(this._speedIndexTiming=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,this._tp.refreshUI(),p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(p){this._showTileAABBs!==p&&(this._showTileAABBs=p,this._tp.refreshUI(),p&&this._update())}_setCacheLimits(p,n){a.dG(p,n)}get version(){return A}},NavigationControl:class{constructor(p={}){this.options=a.l({},sl,p),this._container=Y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(a.aP(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",n=>{this._map&&this._map.zoomIn({},{originalEvent:n})}),Y("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",n=>{this._map&&this._map.zoomOut({},{originalEvent:n})}),Y("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.aP(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",n=>{const o=this._map;o&&(this.options.visualizePitch?o.resetNorthPitch({},{originalEvent:n}):o.resetNorth({},{originalEvent:n}))}),this._compassIcon=Y("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map;if(!p)return;const n=p.getZoom(),o=n===p.getMaxZoom(),m=n===p.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())}_rotateCompassArrow(){const p=this._map;if(!p)return;const n=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(p.transform.pitch*(Math.PI/180)),.5)}) rotateX(${p.transform.pitch}deg) rotateZ(${p.transform.angle*(180/Math.PI)}deg)`:`rotate(${p.transform.angle*(180/Math.PI)}deg)`;p._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=n)})}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),p.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&p.on("pitch",this._rotateCompassArrow),p.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ym(p,this._compass,this.options.visualizePitch)),this._container}onRemove(){const p=this._map;p&&(this._container.remove(),this.options.showZoom&&p.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&p.off("pitch",this._rotateCompassArrow),p.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(p,n){const o=Y("button",p,this._container);return o.type="button",o.addEventListener("click",n),o}_setButtonTitle(p,n){if(!this._map)return;const o=this._map._getUIString(`NavigationControl.${n}`);p.setAttribute("aria-label",o),p.firstElementChild&&p.firstElementChild.setAttribute("title",o)}},GeolocateControl:class extends a.E{constructor(p={}){super();const n=navigator.geolocation;this.options=a.l({geolocation:n},ls,p),a.aP(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Yd(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(p){return this._map=p,this._container=Y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(p){const n=(o=!!this.options.geolocation)=>{this._supportsGeolocation=o,p(o)};this._supportsGeolocation!==void 0?p(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(o=>n(o.state!=="denied")).catch(()=>n()):n()}_isOutOfMapMaxBounds(p){const n=this._map.getMaxBounds(),o=p.coords;return!!n&&(o.longitude<n.getWest()||o.longitude>n.getEast()||o.latitude<n.getSouth()||o.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new a.z("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new a.z("geolocate",p)),this._finish()}}_updateCamera(p){const n=new a.bO(p.coords.longitude,p.coords.latitude),o=p.coords.accuracy,m=this._map.getBearing(),v=a.l({bearing:m},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(o),v,{geolocateSource:!0})}_updateMarker(p){if(p){const n=new a.bO(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.transform,n=a.bH(1,p._center.lat)*p.worldSize,o=Math.ceil(2*this._accuracy*n);this._circleElement.style.width=`${o}px`,this._circleElement.style.height=`${o}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new a.z("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=Y("button","mapboxgl-ctrl-geolocate",this._container),Y("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Y("div","mapboxgl-user-location"),this._dotElement.appendChild(Y("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Y("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new ol({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Y("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ol({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",n=>{n.geolocateSource||this._watchState!=="ACTIVE_LOCK"||n.originalEvent&&n.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new a.z("trackuserlocationend")))})}}_onDeviceOrientation(p){this._userLocationDotMarker&&(p.webkitCompassHeading?this._heading=p.webkitCompassHeading:p.absolute===!0&&(this._heading=-1*p.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.z("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.z("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.z("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(p={maximumAge:6e5,timeout:0},this._noTimeout=!0):(p=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,p),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const p=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(n=>{n==="granted"&&p()}).catch(console.error):p()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:lf,ScaleControl:class{constructor(p={}){this.options=a.l({},Xi,p),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),a.aP(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const p=this.options.maxWidth||100,n=this._map,o=n._containerHeight/2,m=n._containerWidth/2-p/2,v=n.unproject([m,o]),S=n.unproject([m+p,o]),D=v.distanceTo(S);if(this.options.unit==="imperial"){const L=3.2808*D;L>5280?this._setScale(p,L/5280,"mile"):this._setScale(p,L,"foot")}else this.options.unit==="nautical"?this._setScale(p,D/1852,"nautical-mile"):D>=1e3?this._setScale(p,D/1e3,"kilometer"):this._setScale(p,D,"meter")}_setScale(p,n,o){this._map._requestDomTask(()=>{const m=function(S){const D=Math.pow(10,`${Math.floor(S)}`.length-1);let L=S/D;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(O){const U=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*U)/U}(L),D*L}(n),v=m/n;this._container.innerHTML=this._isNumberFormatSupported&&o!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:o}).format(m):`${m}&nbsp;${qs[o]}`,this._container.style.width=p*v+"px"})}onAdd(p){return this._map=p,this._language=p.getLanguage(),this._container=Y("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(p){this._language=p,this._update()}setUnit(p){this.options.unit=p,this._update()}},FullscreenControl:class{constructor(p={}){this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:a.w("Full screen control 'container' must be a DOM element.")),a.aP(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=Y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=Y("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Y("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",p)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends a.E{constructor(p){super(),this.options=a.l(Object.create(Li),p),a.aP(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(p&&p.className?p.className.trim().split(/\s+/):[])}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&p.on("preclick",this._onClose),this.options.closeOnMove&&p.on("move",this._onClose),p.on("remove",this.remove),this._update(),p._addPopup(this),this._focusFirstElement(),this._trackPointer?(p.on("mousemove",this._onMouseEvent),p.on("mouseup",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")):p.on("move",this._update),this.fire(new a.z("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const p=this._map;return p&&(p.off("move",this._update),p.off("move",this._onClose),p.off("preclick",this._onClose),p.off("click",this._onClose),p.off("remove",this.remove),p.off("mousemove",this._onMouseEvent),p.off("mouseup",this._onMouseEvent),p.off("drag",this._onMouseEvent),p._canvasContainer&&p._canvasContainer.classList.remove("mapboxgl-track-pointer"),p._removePopup(this),this._map=void 0),this.fire(new a.z("close")),this}getLngLat(){return this._lngLat}setLngLat(p){this._lngLat=a.bO.convert(p),this._pos=null,this._trackPointer=!1,this._update();const n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const p=this._map;return p&&(p.off("move",this._update),p.on("mousemove",this._onMouseEvent),p.on("drag",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const n=document.createDocumentFragment(),o=document.createElement("body");let m;for(o.innerHTML=p;m=o.firstChild,m;)n.appendChild(m);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){let n=this._content;if(n)for(;n.hasChildNodes();)n.firstChild&&n.removeChild(n.firstChild);else n=this._content=Y("div","mapboxgl-popup-content",this._container||void 0);if(n.appendChild(p),this.options.closeButton){const o=this._closeButton=Y("button","mapboxgl-popup-close-button",n);o.type="button",o.setAttribute("aria-label","Close popup"),o.setAttribute("aria-hidden","true"),o.innerHTML="&#215;",o.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(p){return this._classList.add(p),this._updateClassList(),this}removeClassName(p){return this._classList.delete(p),this._updateClassList(),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){let n;return this._classList.delete(p)?n=!1:(this._classList.add(p),n=!0),this._updateClassList(),n}_onMouseEvent(p){this._update(p.point)}_getAnchor(p){if(this.options.anchor)return this.options.anchor;const n=this._map,o=this._container,m=this._pos;if(!n||!o||!m)return"bottom";const v=o.offsetWidth,S=o.offsetHeight,D=m.x<v/2,L=m.x>n.transform.width-v/2;if(m.y+p<S)return D?"top-left":L?"top-right":"top";if(m.y>n.transform.height-S){if(D)return"bottom-left";if(L)return"bottom-right"}return D?"left":L?"right":"bottom"}_updateClassList(){const p=this._container;if(!p)return;const n=[...this._classList];n.push("mapboxgl-popup"),this._anchor&&n.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&n.push("mapboxgl-popup-track-pointer"),p.className=n.join(" ")}_update(p){const n=this._map,o=this._content;if(!n||!this._lngLat&&!this._trackPointer||!o)return;let m=this._container;if(m||(m=this._container=Y("div","mapboxgl-popup",n.getContainer()),this._tip=Y("div","mapboxgl-popup-tip",m),m.appendChild(o)),this.options.maxWidth&&m.style.maxWidth!==this.options.maxWidth&&(m.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Jm(this._lngLat,this._pos,n.transform)),!this._trackPointer||p){const v=this._pos=this._trackPointer&&p instanceof a.P?p:n.project(this._lngLat),S=cs(this.options.offset),D=this._anchor=this._getAnchor(S.y),L=cs(this.options.offset,D),O=v.add(L).round();n._requestDomTask(()=>{this._container&&D&&(this._container.style.transform=`${od[D]} translate(${O.x}px,${O.y}px)`)})}if(!this._marker&&n._showingGlobe()){const v=a.dH(n.transform,this._lngLat)?0:1;this._setOpacity(v)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(kl);p&&p.focus()}_onClose(){this.remove()}_setOpacity(p){this._container&&(this._container.style.opacity=`${p}`),this._content&&(this._content.style.pointerEvents=p?"auto":"none")}},Marker:ol,Style:ks,LngLat:a.bO,LngLatBounds:a.az,Point:a.P,MercatorCoordinate:a.aa,FreeCameraOptions:Wl,Evented:a.E,config:a.e,prewarm:a.dM,clearPrewarmedResources:a.dN,get accessToken(){return a.e.ACCESS_TOKEN},set accessToken(p){a.e.ACCESS_TOKEN=p},get baseApiUrl(){return a.e.API_URL},set baseApiUrl(p){a.e.API_URL=p},get workerCount(){return a.dO.workerCount},set workerCount(p){a.dO.workerCount=p},get maxParallelImageRequests(){return a.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){a.e.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){a.dP(p)},get workerUrl(){return a.dQ.workerUrl},set workerUrl(p){a.dQ.workerUrl=p},get workerClass(){return a.dQ.workerClass},set workerClass(p){a.dQ.workerClass=p},get workerParams(){return a.dQ.workerParams},set workerParams(p){a.dQ.workerParams=p},get dracoUrl(){return a.dR()},set dracoUrl(p){a.dS(p)},get meshoptUrl(){return a.dT()},set meshoptUrl(p){a.dU(p)},setNow:a.q.setNow,restoreNow:a.q.restoreNow}});var w=h;return w})}(K1)),K1.exports}var ire=are();const Ks=cx(ire);var Lg={},yo={},w4,N6;function sre(){if(N6)return w4;N6=1;const e=({size:B=400,growth:N=6,edges:F=6,seed:G=null}={})=>{var{destPoints:Q,seedValue:te}=a(B,N,F,G),Y=A(Q);return{path:Y,seedValue:te}},t=B=>B*(Math.PI/180),i=B=>{var N=360/B;return Array(B).fill("a").map((F,G)=>G*N)},c=B=>{var N=4294967295,F=123456789+B&N,G=987654321-B&N;return function(){G=36969*(G&65535)+(G>>>16)&N,F=18e3*(F&65535)+(F>>>16)&N;var Q=(G<<16)+(F&65535)>>>0;return Q/=4294967296,Q}},h=(B,N,F)=>{let G=N+B*(F-N);return G>F?G=G-N:G<N&&(G=G+N),G},_=(B,N,F)=>{var G=B+N*Math.cos(t(F)),Q=B+N*Math.sin(t(F));return[Math.round(G),Math.round(Q)]},w=B=>(B.sort(()=>Math.random()-.5),B),a=(B,N,F,G)=>{let Q=B/2,te=N*(Q/10),Y=B/2,oe=i(F),de=w([99,999,9999,99999,999999])[0],me=Math.floor(Math.random()*de),be=G||me,pe=c(be),Se=[];return oe.forEach($e=>{let Le=h(pe(),te,Q),re=_(Y,Le,$e);Se.push(re)}),{destPoints:Se,seedValue:be}},A=B=>{let N="";var F=[(B[0][0]+B[1][0])/2,(B[0][1]+B[1][1])/2];N+="M"+F[0]+","+F[1];for(var G=0;G<B.length;G++){var Q=B[(G+1)%B.length],te=B[(G+2)%B.length];F=[(Q[0]+te[0])/2,(Q[1]+te[1])/2],N+="Q"+Q[0]+","+Q[1]+","+F[0]+","+F[1]}return N+="Z",N};return w4=e,w4}var j6;function ore(){if(j6)return yo;j6=1;var e=yo&&yo.__assign||function(){return e=Object.assign||function(A){for(var B,N=1,F=arguments.length;N<F;N++){B=arguments[N];for(var G in B)Object.prototype.hasOwnProperty.call(B,G)&&(A[G]=B[G])}return A},e.apply(this,arguments)},t=yo&&yo.__createBinding||(Object.create?function(A,B,N,F){F===void 0&&(F=N);var G=Object.getOwnPropertyDescriptor(B,N);(!G||("get"in G?!B.__esModule:G.writable||G.configurable))&&(G={enumerable:!0,get:function(){return B[N]}}),Object.defineProperty(A,F,G)}:function(A,B,N,F){F===void 0&&(F=N),A[F]=B[N]}),i=yo&&yo.__setModuleDefault||(Object.create?function(A,B){Object.defineProperty(A,"default",{enumerable:!0,value:B})}:function(A,B){A.default=B}),c=yo&&yo.__importStar||function(A){if(A&&A.__esModule)return A;var B={};if(A!=null)for(var N in A)N!=="default"&&Object.prototype.hasOwnProperty.call(A,N)&&t(B,A,N);return i(B,A),B},h=yo&&yo.__rest||function(A,B){var N={};for(var F in A)Object.prototype.hasOwnProperty.call(A,F)&&B.indexOf(F)<0&&(N[F]=A[F]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var G=0,F=Object.getOwnPropertySymbols(A);G<F.length;G++)B.indexOf(F[G])<0&&Object.prototype.propertyIsEnumerable.call(A,F[G])&&(N[F[G]]=A[F[G]]);return N},_=yo&&yo.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(yo,"__esModule",{value:!0}),yo.SvgBlob=void 0;var w=c(s0()),a=_(sre());return yo.SvgBlob=(0,w.forwardRef)(function(B,N){var F,G,Q,te,Y=B.variant,oe=B.isOutline,de=oe===void 0?!1:oe,me=B.color,be=me===void 0?"currentColor":me,pe=B.shapeProps,Se=h(B,["variant","isOutline","color","shapeProps"]),$e=(F=pe==null?void 0:pe.size)!==null&&F!==void 0?F:200,Le=(G=pe==null?void 0:pe.growth)!==null&&G!==void 0?G:6,re=(Q=pe==null?void 0:pe.edges)!==null&&Q!==void 0?Q:6,Ee=(te=pe==null?void 0:pe.seed)!==null&&te!==void 0?te:6,se=(0,w.useMemo)(function(){return(0,a.default)({size:$e,growth:Le,edges:re,seed:Ee})},[$e,Le,re,Ee]).path,ue={fill:be};Y==="gradient"&&(ue.fill="url(#gradient)"),de&&(ue.strokeWidth="7px",ue.fill="none",ue.stroke=be),Y==="gradient"&&de&&(ue.stroke="url(#gradient)");var ke=Se;ke.colors,ke.pattern,ke.image;var ce=h(ke,["colors","pattern","image"]);return w.default.createElement("svg",e({ref:N},ce,{viewBox:"0 0 ".concat($e," ").concat($e),xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"}),B.variant==="solid"&&w.default.createElement("path",e({d:se},ue)),B.variant==="gradient"&&w.default.createElement(w.default.Fragment,null,w.default.createElement("defs",null,w.default.createElement("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},w.default.createElement("stop",{offset:"0%",style:{stopColor:B.colors[0]}}),w.default.createElement("stop",{offset:"100%",style:{stopColor:B.colors[1]}}))),w.default.createElement("path",e({d:se},ue))),B.variant==="pattern"&&w.default.createElement(w.default.Fragment,null,w.default.createElement("defs",null,w.default.createElement("pattern",{id:"pattern",x:"0",y:"0",width:B.pattern.width,height:B.pattern.height,patternUnits:"userSpaceOnUse",fill:be},w.default.createElement("path",{d:B.pattern.path}))),w.default.createElement("path",e({d:se},ue,{fill:"url(#pattern)"}))),B.variant==="image"&&w.default.createElement(w.default.Fragment,null,w.default.createElement("defs",null,w.default.createElement("clipPath",{id:"shape"},w.default.createElement("path",e({d:se},ue)))),w.default.createElement("image",{x:"0",y:"0",width:"100%",height:"100%",clipPath:"url(#shape)",xlinkHref:B.image,preserveAspectRatio:"none"})))}),yo}var S4={},O6;function lre(){return O6||(O6=1,Object.defineProperty(S4,"__esModule",{value:!0})),S4}var F6;function cre(){return F6||(F6=1,function(e){var t=Lg&&Lg.__createBinding||(Object.create?function(h,_,w,a){a===void 0&&(a=w);var A=Object.getOwnPropertyDescriptor(_,w);(!A||("get"in A?!_.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return _[w]}}),Object.defineProperty(h,a,A)}:function(h,_,w,a){a===void 0&&(a=w),h[a]=_[w]}),i=Lg&&Lg.__exportStar||function(h,_){for(var w in h)w!=="default"&&!Object.prototype.hasOwnProperty.call(_,w)&&t(_,h,w)};Object.defineProperty(e,"__esModule",{value:!0}),e.SvgBlob=void 0;var c=ore();Object.defineProperty(e,"SvgBlob",{enumerable:!0,get:function(){return c.SvgBlob}}),i(lre(),e)}(Lg)),Lg}var T4=cre();const ure="/assets/home_blob_1-DhXDxG6Y.png",dre="/assets/home_blob_2-DtuAXnv7.png",hre="/assets/home_blob_3-pdSczRVG.png";var zv={},E4={exports:{}},C4,V6;function fre(){if(V6)return C4;V6=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return C4=e,C4}var D4,U6;function pre(){if(U6)return D4;U6=1;var e=fre();function t(){}function i(){}return i.resetWarningCache=t,D4=function(){function c(w,a,A,B,N,F){if(F!==e){var G=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw G.name="Invariant Violation",G}}c.isRequired=c;function h(){return c}var _={array:c,bigint:c,bool:c,func:c,number:c,object:c,string:c,symbol:c,any:c,arrayOf:h,element:c,elementType:c,instanceOf:h,node:c,objectOf:h,oneOf:h,oneOfType:h,shape:h,exact:h,checkPropTypes:i,resetWarningCache:t};return _.PropTypes=_,_},D4}var G6;function mre(){return G6||(G6=1,E4.exports=pre()()),E4.exports}var P4,H6;function gre(){return H6||(H6=1,P4=function(t,i,c,h){var _=c?c.call(h,t,i):void 0;if(_!==void 0)return!!_;if(t===i)return!0;if(typeof t!="object"||!t||typeof i!="object"||!i)return!1;var w=Object.keys(t),a=Object.keys(i);if(w.length!==a.length)return!1;for(var A=Object.prototype.hasOwnProperty.bind(i),B=0;B<w.length;B++){var N=w[B];if(!A(N))return!1;var F=t[N],G=i[N];if(_=c?c.call(h,F,G,N):void 0,_===!1||_===void 0&&F!==G)return!1}return!0}),P4}var M4,q6;function yre(){if(q6)return M4;q6=1;function e(A){return A&&typeof A=="object"&&"default"in A?A.default:A}var t=s0(),i=e(t),c=e(gre());function h(A,B,N){return B in A?Object.defineProperty(A,B,{value:N,enumerable:!0,configurable:!0,writable:!0}):A[B]=N,A}function _(A,B){A.prototype=Object.create(B.prototype),A.prototype.constructor=A,A.__proto__=B}var w=!!(typeof window<"u"&&window.document&&window.document.createElement);function a(A,B,N){if(typeof A!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof B!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof N<"u"&&typeof N!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function F(G){return G.displayName||G.name||"Component"}return function(Q){if(typeof Q!="function")throw new Error("Expected WrappedComponent to be a React component.");var te=[],Y;function oe(){Y=A(te.map(function(me){return me.props})),de.canUseDOM?B(Y):N&&(Y=N(Y))}var de=function(me){_(be,me);function be(){return me.apply(this,arguments)||this}be.peek=function(){return Y},be.rewind=function(){if(be.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var $e=Y;return Y=void 0,te=[],$e};var pe=be.prototype;return pe.shouldComponentUpdate=function($e){return!c($e,this.props)},pe.componentWillMount=function(){te.push(this),oe()},pe.componentDidUpdate=function(){oe()},pe.componentWillUnmount=function(){var $e=te.indexOf(this);te.splice($e,1),oe()},pe.render=function(){return i.createElement(Q,this.props)},be}(t.Component);return h(de,"displayName","SideEffect("+F(Q)+")"),h(de,"canUseDOM",w),de}}return M4=a,M4}var wy={},W6;function pj(){if(W6)return wy;W6=1,Object.defineProperty(wy,"__esModule",{value:!0});var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};wy.clone=t,wy.defaults=i,wy.forEach=c;function t(h){var _=h.title,w=h.description,a=h.base,A=h.canonical,B=h.meta,N=h.link,F=h.auto;try{return JSON.parse(JSON.stringify({title:_,description:w,base:a,canonical:A,meta:B,link:N,auto:F}))}catch{return{}}}function i(h,_){return Object.keys(_).reduce(function(w,a){return h.hasOwnProperty(a)?e(h[a])==="object"&&!Array.isArray(h[a])&&h[a]&&i(h[a],_[a]):h[a]=_[a],h},h)}function c(h,_){h&&h.length&&Array.prototype.slice.call(h).forEach(_)}return wy}var $g={},K6;function xre(){if(K6)return $g;K6=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.canUseDOM=void 0,$g.removeDocumentMeta=c,$g.insertDocumentMeta=_;var e=pj();function t(w,a){var A={};for(var B in w)a.indexOf(B)>=0||Object.prototype.hasOwnProperty.call(w,B)&&(A[B]=w[B]);return A}$g.canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement);function i(w){w.parentNode.removeChild(w)}function c(){(0,e.forEach)(document.querySelectorAll("head [data-rdm]"),i)}function h(w){var a=w.tagName,A=t(w,["tagName"]),B=document.createElement(a);for(var N in A)w.hasOwnProperty(N)&&B.setAttribute(N,w[N]);B.setAttribute("data-rdm",""),document.getElementsByTagName("head")[0].appendChild(B)}function _(w){c(),(0,e.forEach)(w,h)}return $g}var Z6;function vre(){if(Z6)return zv;Z6=1,Object.defineProperty(zv,"__esModule",{value:!0});var e=function(){function re(Ee,se){for(var ue=0;ue<se.length;ue++){var ke=se[ue];ke.enumerable=ke.enumerable||!1,ke.configurable=!0,"value"in ke&&(ke.writable=!0),Object.defineProperty(Ee,ke.key,ke)}}return function(Ee,se,ue){return se&&re(Ee.prototype,se),ue&&re(Ee,ue),Ee}}(),t=Object.assign||function(re){for(var Ee=1;Ee<arguments.length;Ee++){var se=arguments[Ee];for(var ue in se)Object.prototype.hasOwnProperty.call(se,ue)&&(re[ue]=se[ue])}return re};zv.render=Se;var i=s0(),c=N(i),h=mre(),_=N(h),w=yre(),a=N(w),A=pj(),B=xre();function N(re){return re&&re.__esModule?re:{default:re}}function F(re,Ee){if(!(re instanceof Ee))throw new TypeError("Cannot call a class as a function")}function G(re,Ee){if(!re)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ee&&(typeof Ee=="object"||typeof Ee=="function")?Ee:re}function Q(re,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ee);re.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:re,enumerable:!1,writable:!0,configurable:!0}}),Ee&&(Object.setPrototypeOf?Object.setPrototypeOf(re,Ee):re.__proto__=Ee)}function te(re,Ee){var se={};for(var ue in re)Ee.indexOf(ue)>=0||Object.prototype.hasOwnProperty.call(re,ue)&&(se[ue]=re[ue]);return se}function Y(re,Ee,se){return Ee in re?Object.defineProperty(re,Ee,{value:se,enumerable:!0,configurable:!0,writable:!0}):re[Ee]=se,re}function oe(re){for(var Ee={},se={title:void 0,description:void 0,canonical:void 0},ue=!0,ke=function(){ue=re[ce].hasOwnProperty("extend");var xe=re[ce],Te=(0,A.clone)(re[ce]);["title","description","canonical"].forEach(function(Ie){xe.hasOwnProperty(Ie)&&(typeof xe[Ie]=="function"?se[Ie]=xe[Ie](se[Ie]):se[Ie]===void 0&&(se[Ie]=xe[Ie]))}),(0,A.defaults)(Ee,Te)},ce=re.length-1;ue&&ce>=0;ce--)ke();return typeof se.title=="string"&&(Ee.title=se.title),typeof se.description=="string"&&(0,A.defaults)(Ee,{meta:{name:{description:se.description}}}),typeof se.canonical=="string"&&(0,A.defaults)(Ee,{link:{rel:{canonical:se.canonical}}}),Ee.auto&&Ee.auto.ograph&&me(Ee),Ee}function de(re){B.canUseDOM&&(typeof re.title=="string"&&(document.title=re.title),(0,B.insertDocumentMeta)(pe(re)))}function me(re){re.meta||(re.meta={}),re.meta.property||(re.meta.property={});var Ee=re.meta.property;return Ee&&(re.title&&!Ee["og:title"]&&(Ee["og:title"]=re.title),re.hasOwnProperty("description")&&!Ee["og:description"]&&(Ee["og:description"]=re.description),re.hasOwnProperty("canonical")&&!Ee["og:url"]&&(Ee["og:url"]=re.canonical)),re}function be(re){var Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se=[],ue=re==="link"?"href":"content";return Object.keys(Ee).forEach(function(ke){var ce=Ee[ke];if(typeof ce=="string"){se.push(Y({tagName:re},ke,ce));return}Object.keys(ce).forEach(function(Pe){var xe=Array.isArray(ce[Pe])?ce[Pe]:[ce[Pe]];xe.forEach(function(Te){if(Te!==null){var Ie;se.push((Ie={tagName:re},Y(Ie,ke,Pe),Y(Ie,ue,Te),Ie))}})})}),se}function pe(re){return[].concat(be("meta",re.meta),be("link",re.link))}function Se(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ee=0,se=[];function ue(ke){var ce=ke.tagName,Pe=te(ke,["tagName"]);return ce==="meta"?c.default.createElement("meta",t({},Pe,{key:Ee++,"data-rdm":!0})):ce==="link"?c.default.createElement("link",t({},Pe,{key:Ee++,"data-rdm":!0})):null}return re.title&&se.push(c.default.createElement("title",{key:Ee++},re.title)),pe(re).reduce(function(ke,ce){return ke.push(ue(ce)),ke},se)}var $e=function(re){Q(Ee,re);function Ee(){return F(this,Ee),G(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).apply(this,arguments))}return e(Ee,[{key:"render",value:function(){var ue=this.props.children,ke=c.default.Children.count(ue);return ke===1?c.default.Children.only(ue):ke?c.default.createElement("div",null,this.props.children):null}}]),Ee}(i.Component);$e.propTypes={title:_.default.oneOfType([_.default.string,_.default.func]),description:_.default.oneOfType([_.default.string,_.default.func]),canonical:_.default.oneOfType([_.default.string,_.default.func]),base:_.default.string,meta:_.default.objectOf(_.default.oneOfType([_.default.string,_.default.objectOf(_.default.oneOfType([_.default.string,_.default.arrayOf(_.default.string)]))])),link:_.default.objectOf(_.default.objectOf(_.default.oneOfType([_.default.string,_.default.arrayOf(_.default.string)]))),auto:_.default.objectOf(_.default.bool)};var Le=(0,a.default)(oe,de)($e);return Le.renderAsReact=function(){return Se(Le.rewind())},zv.default=Le,zv}var _re=vre();const j_=cx(_re),u2=()=>b.jsx("footer",{className:"w-full bg-white dark:bg-[#0c0c0c] border-t border-gray-200 dark:border-gray-800",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[b.jsxs("div",{className:"col-span-1 md:col-span-2",children:[b.jsx("h3",{className:"text-xl font-RobotoBold text-black dark:text-white mb-4",children:"GatorPool"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-RobotoRegular",children:"Helping gators get home safely. A ridesharing platform for university students."})]}),b.jsxs("div",{children:[b.jsx("h4",{className:"text-lg font-RobotoBold text-black dark:text-white mb-4",children:"Quick Links"}),b.jsxs("ul",{className:"space-y-2",children:[b.jsx("li",{children:b.jsx(pi,{to:"/",className:"text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white font-RobotoRegular",children:"Home"})}),b.jsx("li",{children:b.jsx(pi,{to:"/about",className:"text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white font-RobotoRegular",children:"About"})}),b.jsx("li",{children:b.jsx(pi,{to:"/safety",className:"text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white font-RobotoRegular",children:"Safety"})}),b.jsx("li",{children:b.jsx(pi,{to:"/tos",className:"text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white font-RobotoRegular",children:"Terms of Service"})})]})]}),b.jsxs("div",{children:[b.jsx("h4",{className:"text-lg font-RobotoBold text-black dark:text-white mb-4",children:"Contact"}),b.jsxs("ul",{className:"space-y-2",children:[b.jsx("li",{children:b.jsx("a",{href:"mailto:info.gatorpool@gmail.com",className:"text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white font-RobotoRegular",children:"info.gatorpool@gmail.com"})}),b.jsx("li",{className:"text-gray-600 dark:text-gray-400 font-RobotoRegular",children:"University of Florida"})]})]})]}),b.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200 dark:border-gray-800",children:b.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[b.jsxs("p",{className:"text-gray-600 dark:text-gray-400 font-RobotoRegular text-sm",children:["© ",new Date().getFullYear()," GatorPool. All rights reserved."]}),b.jsx("div",{className:"flex space-x-6 mt-4 md:mt-0",children:b.jsxs("a",{href:"https://www.instagram.com/gator_pool/",className:"text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white",children:[b.jsx("span",{className:"sr-only",children:"Instagram"}),b.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:b.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})]})})]})})]})}),A4="pk.eyJ1IjoibXVzdGFmYW1hc29keSIsImEiOiJjbTZva3FneTIwZjI5MmxvdWQ1dHY1NTlwIn0.oNPGEBsenNviLdx_qzcPWw",bre=()=>{const e={title:"GatorPool",description:"GatorPool",canonical:"https://gatorpool.app",meta:{charset:"utf-8",name:{keywords:"GatorPool, UF, Rideshare, Rides, Pool, Carpool, Uber, Lyft"}}},[t,i]=V.useState({lat:29.6436,lng:-82.3549}),[c,h]=V.useState(null),[_,w]=V.useState("Near Reitz Union"),[a,A]=V.useState(""),[B,N]=V.useState([]),[F,G]=V.useState(null),Q=V.useRef(null),te=V.useRef(null),[Y,oe]=rn.useState(Sk("2024-04-04"));ml({dateStyle:"full"});let[de,me]=rn.useState($f("2024-04-08T18:45:22Z"));ml({dateStyle:"short",timeStyle:"long"});const[be,pe]=V.useState(null);function Se(){return{size:500,growth:7,edges:18}}V.useEffect(()=>{pe(Se())},[]),V.useEffect(()=>{if(Ks.accessToken=A4,!te.current)return;const Ee=new Ks.Map({container:te.current,style:"mapbox://styles/mustafamasody/cm6olrhpt000k01qrebc2e55u",center:[t.lng,t.lat],zoom:14});return new Ks.Marker().setLngLat([t.lng,t.lat]).setPopup(new Ks.Popup().setHTML("<b>University of Florida</b><br>Reitz Union")).addTo(Ee),Q.current=Ee,()=>{Ee.remove()}},[]);const $e=async Ee=>{var ue;const se=`https://api.mapbox.com/directions/v5/mapbox/driving/${t.lng},${t.lat};${Ee.lng},${Ee.lat}?geometries=geojson&access_token=${A4}`;try{const Pe=(ue=(await(await fetch(se)).json()).routes[0])==null?void 0:ue.geometry;if(Pe&&Q.current){const xe=Q.current,Te=xe.getSource("route");Te?Te.setData({type:"FeatureCollection",features:[{type:"Feature",geometry:Pe,properties:{}}]}):(xe.addSource("route",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:Pe,properties:{}}]}}),xe.addLayer({id:"route",type:"line",source:"route",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#007AFF","line-width":5,"line-opacity":.75}})),xe.fitBounds([[t.lng,t.lat],[Ee.lng,Ee.lat]],{padding:50,maxZoom:14})}}catch(ke){console.error("Error fetching route:",ke)}},Le=async Ee=>{if(Ee.length<3){N([]);return}const se=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(Ee)}.json?access_token=${A4}&autocomplete=true&limit=5`;try{const ke=await(await fetch(se)).json();N(ke.features||[])}catch(ue){console.error("Error fetching geocode data:",ue)}},re=Ee=>{A(Ee.place_name);const se={lat:Ee.center[1],lng:Ee.center[0]};h(se),N([]),Q.current&&(new Ks.Marker().setLngLat(Ee.center).setPopup(new Ks.Popup().setHTML(`<b>Destination</b><br>${Ee.place_name}`)).addTo(Q.current),Q.current.flyTo({center:Ee.center,zoom:14}),$e(se))};return V.useEffect(()=>{Q.current&&F&&(Q.current.getSource("route")||(Q.current.addSource("route",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:F,properties:{}}]}}),Q.current.addLayer({id:"route",type:"line",source:"route",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#007AFF","line-width":5,"line-opacity":.75}})))},[F]),b.jsxs("div",{className:"light dark:dark bg-white dark:bg-[#0c0c0c] flex flex-col h-full min-h-screen w-full",children:[b.jsx(c2,{}),b.jsx(j_,{...e}),b.jsx("div",{className:"flex flex-col h-full w-full mt-32 px-6",children:b.jsxs("div",{className:"flex flex-col space-y-8 md:space-y-0 md:flex-row md:space-x-8 items-center w-full max-w-screen-lg mx-auto",children:[b.jsxs("div",{className:"flex flex-col md:w-1/2",children:[b.jsx("h1",{className:"text-4xl text-black dark:text-white font-RobotoBold",children:"Where would you like to go?"}),b.jsx(Xn,{label:"From",className:"mt-8",value:_,onChange:Ee=>w(Ee.target.value)}),b.jsxs("div",{className:"relative mt-8",children:[b.jsx(Xn,{label:"To",placeholder:"Enter your desired address",value:a,onChange:Ee=>{A(Ee.target.value),Le(Ee.target.value)}}),B.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:B.map((Ee,se)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>re(Ee),children:Ee.place_name},se))})]}),b.jsxs("div",{className:"flex flex-row mt-8 space-x-8 ",children:[b.jsx(xx,{className:"max-w-[284px] ",label:"When",value:Y,onChange:oe}),b.jsx(BB,{label:"Departure Time",value:de,onChange:me})]}),b.jsxs("div",{className:"flex flex-row space-x-2 mt-8 items-center",children:[b.jsx($r,{className:" font-RobotoRegular text-white text-md",onPress:()=>{},color:"primary",children:"Book Ride"}),b.jsx(pi,{to:"/auth/signin",className:"text-neutral-500 underline underline-offset-4 font-RobotoRegular text-sm",children:"Login to see recent activity"})]})]}),b.jsx("div",{id:"map-container",ref:te,className:"rounded-xl w-11/12 md:w-1/2 h-[600px] mt-12"})]})}),b.jsxs("div",{className:"flex flex-col h-auto w-full items-center text-black",children:[b.jsxs("div",{className:"flex mt-32 bg-white dark:bg-[#0c0c0c] lg:mt-64 flex-col lg:space-x-8 px-4 lg:px-6 lg:flex-row items-center justify-center w-screen md:max-w-screen-lg",children:[b.jsxs("div",{className:"flex md:w-1/2 flex-col spac ",children:[b.jsx("h1",{className:"text-center md:text-left text-black dark:text-white font-RobotoBold text-4xl md:text-6xl",children:"Helping gators get home safely."}),b.jsx("p",{className:"text-center md:text-left text-black dark:text-white font-RobotoRegular text-md md:text-lg mt-6 lg:mt-4",children:"No more posting on Reddit or Snapchat for a ride home. We've got you covered."})]}),b.jsxs("div",{className:"relative md:w-1/2 justify-center items-center mt-32 lg:mt-0 px- lg:px-0 flex flex-col",children:[b.jsx("div",{className:"absolute inset-0 flex justify-center items-center z-0",children:b.jsx(T4.SvgBlob,{variant:"gradient",colors:["#0de046","#03631d"],color:"#00cec9",shapeProps:Se(),isOutline:!1,className:"w-[130%] h-auto"})}),b.jsx("img",{src:ure,className:"relative w-full rounded-xl z-20 mt-4 shadow-[0px_10px_30px_rgba(0,0,0,0.3)] custom-3d-tilt"})]})]}),b.jsxs("div",{className:"flex my-32 bg-white dark:bg-[#0c0c0c] lg:mt-64 flex-col lg:space-x-8 px-4 lg:px-6 lg:flex-row items-center justify-center w-screen md:max-w-screen-lg",children:[b.jsxs("div",{className:"relative md:w-1/2 justify-center items-center mt-32 lg:mt-0 px- lg:px-0 flex flex-col",children:[b.jsx("img",{src:dre,className:"relative w-full rounded-xl z-20 mt-4 shadow-[0px_10px_30px_rgba(0,0,0,0.3)] custom-3d-tilt"}),b.jsx("div",{className:"absolute inset-0 flex justify-center items-center z-0",children:b.jsx(T4.SvgBlob,{variant:"gradient",colors:["#0de046","#03631d"],color:"#00cec9",shapeProps:Se(),isOutline:!1,className:"w-[130%] h-auto"})})]}),b.jsxs("div",{className:"flex md:w-1/2 flex-col mt-32 md:mt-0 ",children:[b.jsx("h1",{className:"text-center md:text-left text-black dark:text-white font-RobotoBold text-4xl md:text-6xl",children:"Set your own price."}),b.jsx("p",{className:"text-center md:text-left text-black dark:text-white font-RobotoRegular text-md md:text-lg mt-6 lg:mt-4",children:"Payments are handled between you and the driver."})]})]}),b.jsxs("div",{className:"flex mb-32 bg-white dark:bg-[#0c0c0c] lg:mt-32 flex-col lg:space-x-8 px-4 lg:px-6 lg:flex-row items-center justify-center w-screen md:max-w-screen-lg",children:[b.jsxs("div",{className:"flex md:w-1/2 flex-col spac ",children:[b.jsx("h1",{className:"text-center md:text-left text-black dark:text-white font-RobotoBold text-4xl md:text-6xl",children:"Carpool with other gators."}),b.jsx("p",{className:"text-center md:text-left text-black dark:text-white font-RobotoRegular text-md md:text-lg mt-6 lg:mt-4",children:"Enable carpooling to save money and reduce carbon emissions."})]}),b.jsxs("div",{className:"relative md:w-1/2 justify-center items-center mt-32 lg:mt-0 px- lg:px-0 flex flex-col",children:[b.jsx("div",{className:"absolute inset-0 flex justify-center items-center z-0",children:b.jsx(T4.SvgBlob,{variant:"gradient",colors:["#0de046","#03631d"],color:"#00cec9",shapeProps:Se(),isOutline:!1,className:"w-[130%] h-auto"})}),b.jsx("img",{src:hre,className:"relative w-full rounded-xl z-20 mt-4 shadow-[0px_10px_30px_rgba(0,0,0,0.3)] custom-3d-tilt"})]})]})]}),b.jsx(u2,{})]})},Aw=({width:e=512,height:t=512})=>b.jsx("svg",{id:"fi_6015730","enable-background":"new 0 0 53 53",height:t,viewBox:"0 0 53 53",width:e,xmlns:"http://www.w3.org/2000/svg",children:b.jsxs("g",{id:"_x32_17",children:[b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m50.2789612 33.2572289v6.5100097l-14.1399536 8.2199707-33.6400147-19.4299907v-15.3499756h.0100098l14.1300049-8.2100225 23.3499756 13.4700322 3.4500122 8.7399903z",fill:"#62fc03"})})}),b.jsxs("g",{children:[b.jsxs("g",{children:[b.jsxs("g",{children:[b.jsx("g",{children:b.jsx("g",{children:b.jsxs("g",{children:[b.jsxs("g",{children:[b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m31.7076111 39.582058c-.0351563-.0116577-.0706177-.0223999-.1055298-.0327759-.6311035-.1879883-1.2993774-.3892212-1.835144-.7827148-.4072876-.2991333-.7223511-.6609497-.9223633-1.0621948l-3.1115112 1.8077393c.5892334-.3411255 1.3955078-.2998047 2.2845459.2171021 1.7780762 1.0234375.5330811 3.4171143.5227661 5.4535522 0 1.0131226 2.3200073 1.8240356 1.7411499 2.1651611l5.0963745-2.9668579c.5789185-.3411255-3.6778564-3.7193604-3.6778564-4.722168-.0000001-.0274049.0064697-.050232.0075683-.0768433z",fill:"#111d33"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m12.4221611 28.5362148c0 1.0027714 4.2567749 4.3810558 3.6778774 4.722147l-5.0963812 2.9668579c.5788975-.3410912-1.1123457-1.0996895-1.1123457-2.1128082.0103474-2.0364571-.5465078-3.4561405-2.3245912-4.4796066-.88901-.5168743-.5222816-1.5845222-1.111527-1.2433662l5.1067295-2.9668579c.5788975-.341156 1.38519-.2894821 2.2845478.2273941 1.7677356 1.0234031-1.4243096.8394336-1.4243096 2.8862399z",fill:"#111d33"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m36.1375809 41.4737167v6.5096474l-33.6365998-19.4243431v-15.3480492l23.349477 13.4769993 3.4532814 8.7325306z",fill:"#067302"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m28.2693501 35.2100754-8.7875996-5.0737324-1.2828598-.7440796-5.4521542-3.1429443-1.2828598-.7440815-6.5425539-3.7780304v-6.2603636l6.5425539 3.7780314 1.2828598.7376613 5.4521542 3.1493645 1.2828598.7376594 5.574028 3.2199917z",fill:"#1d2943"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m28.543 36.512-24.716-14.276",fill:"none"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m50.2749367 33.2572136v6.5096474l-14.1373558 8.2165031v-6.5096474z",fill:"#067302"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m25.85 26.688-23.349-13.477",fill:"none"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m50.2749367 33.2572136-14.1373558 8.2165031-6.8338414-6.053215 14.1373578-8.2165012z",fill:"#0abf04"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m43.4410973 27.2040005-14.1373578 8.2165012-3.4532814-8.7325306 14.1373578-8.2164211z",fill:"#066903"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m42.6141586 26.9195786-3.8171692 2.2161827-2.0243454 1.1775817-1.3363075.7740441-4.9219456 2.8644905-.8798751.5093269-2.9571171-7.4887314 5.7091942-3.3209209 4.9285278-2.8579502 1.3429718-.7805843.9989471-.5822506.6218605 1.5745773z",fill:"#1d2943"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m39.9878159 18.47155-14.1373578 8.2164211-23.3461864-13.4757252 14.1373585-8.2165021z",fill:"#0abf04"})})}),b.jsxs("g",{children:[b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m12.7467365 19.9825363v6.2667828l-1.2828598-.7440815v-6.2603626z",fill:"#066903"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m19.4817505 23.8695602v6.2667828l-1.2828598-.7440796v-6.2603626z",fill:"#066903"})})})})]}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m32.1756668 45.2968636c0 .1362686-.0136452.2726212-.0136452.3952446l-7.2648296-4.1981202-1.0087032-.5860901c.1090641-.7223549.368042-1.2675972.7224388-1.6764832.4498196-.5179558 1.049551-.8042183 1.676487-.8587112.0954208-.0272865.2044868-.0272865.2999077-.0272865.6132927 0 1.2539539.1908417 1.9081764.5725288.790575.4497375 1.4993706 1.1312447 2.0854588 1.935463.9813327 1.3220902 1.5947093 2.9577294 1.5947093 4.4434548z",fill:"#066903"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m28.0198116 39.7320404c1.7754307 1.0250435 3.2029552 3.5128365 3.1971722 5.5529671-.005764 2.0325203-1.4426842 2.8589516-3.2181149 1.8339081-1.7754536-1.0250587-3.2096024-3.5091019-3.2038383-5.5416222.0057831-2.0401344 1.4493275-2.8703117 3.224781-1.845253z",fill:"#4c5c75"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m12.8978271 34.1679459c0 .1362686-.0136433.2726212-.0136433.3952446l-7.2648301-4.198122-1.0087042-.5860882c.1090651-.7223568.368042-1.2675972.7224402-1.6764851.4498196-.5179539 1.049551-.8042183 1.6764865-.8587093.0954213-.0272865.2044859-.0272865.2999072-.0272865.6132922 0 1.2539539.1908417 1.9081764.5725269.7905741.4497375 1.4993706 1.1312466 2.0854588 1.9354649.9813338 1.3220882 1.5947085 2.9577254 1.5947085 4.4434547z",fill:"#066903"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m8.741972 28.6093216c1.7754316 1.0250454 3.2029562 3.5128403 3.1971722 5.5529709-.0057621 2.0325203-1.4426823 2.8589516-3.2181139 1.8339043-1.7754531-1.0250587-3.2096014-3.5091019-3.2038393-5.5416203.005784-2.0401325 1.4493279-2.8703137 3.224781-1.8452549z",fill:"#4c5c75"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m50.2749329 37.9200706-14.1385498 8.2164307-3.453064-1.9935913-.2249756.1307373-.0025024 1.6064453 3.6790771 2.1241455 14.3635864-8.3471679.0025025-1.6065064z",fill:"#4c5c75"})})}),b.jsx("g",{children:b.jsxs("g",{"enable-background":"new",children:[b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m50.5009727 38.0505943-.0025062 1.6064873-14.363533 8.3471756.0025024-1.6064911z",fill:"#1d2943"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m36.1374359 46.3977661-.0025024 1.6064911-3.6790886-2.1241226.0025062-1.6064873z",fill:"#111d33"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m50.5009727 38.0505943-14.3635368 8.3471718-3.6790848-2.1241188.2249718-.1307373 3.4530487 1.993618 14.1385651-8.2164345z",fill:"#4c5c75"})})})})]})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m3.4763 22.5701561-.9753287-.5631104v2.9945869l.9668491.5581856c.2618914.1512547.4737542.0305252.4746022-.2704525l.0054104-1.9025269c.0008481-.3008956-.2096419-.665428-.471533-.8166827z",fill:"#ffd06c"})})})})]}),b.jsx("g",{opacity:".15",children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m37.3151207 20.793602-1.8787842 10.2937851-4.9219456 2.8644905 1.872202-10.3003254z",fill:"#fff"})})})}),b.jsx("g",{opacity:".15",children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m40.2789001 21.0053444-1.4819107 8.1304169-2.0243454 1.1775817 1.8854485-10.3003253.9989471-.5822506z",fill:"#fff"})})})})]})})}),b.jsx("g",{children:b.jsxs("g",{children:[b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m9.8162804 25.3384609 1.3252468.7656212-.0009985.4633656-1.3257466-.7651234z",fill:"#434240"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m20.8170338 31.6896477-.0009995.4638595-1.3257465-.7656212.0014972-.4633655z",fill:"#434240"})})})]})})]}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m28.0143147 41.20298c1.0684414.6168671 1.927515 2.1140022 1.9240341 3.3417397-.0034676 1.223156-.8681965 1.7204971-1.9366379 1.1036301-1.0684547-.6168709-1.9315147-2.1117516-1.9280472-3.3349075.0034809-1.2277375.8721943-1.7273331 1.940651-1.1104623z",fill:"#fff"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m28.0096226 42.4582672c.4651051.268528.8390694.9202499.837553 1.4546967-.0015087.5324516-.3779354.748951-.8430386.480423-.4651108-.2685318-.8408089-.9192696-.8393002-1.4517212.0015145-.5344468.3796769-.7519303.8447858-.4833985z",fill:"#4c5c75"})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m8.736475 30.080265c1.0684423.6168652 1.927516 2.1140022 1.924036 3.3417358-.0034676 1.223156-.8681965 1.7204971-1.9366388 1.1036339-1.0684547-.6168747-1.9315152-2.1117554-1.9280477-3.3349094.0034809-1.2277374.8721953-1.7273349 1.9406505-1.1104603z",fill:"#fff"})})}),b.jsxs("g",{children:[b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m38.9969254 45.1550407.002079.733059-1.6325951.9425811-.002079-.7330589z",fill:"#ffd06c"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m49.8590012 38.8838196.002079.7330589-1.6325989.9425812-.002079-.7330589z",fill:"#ffd06c"})})})})]}),b.jsxs("g",{children:[b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m37.6611328 41.9635506c.5554619-.3206978.9910965-.0504646.9928627.5731468.001812.6382637-.4308701 1.4098206-.9863319 1.7305183-.5554657.3206978-1.0102539.0615196-1.0120621-.5767441-.00177-.6236114.4500656-1.4062232 1.0055313-1.726921z",fill:"#fff"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m48.7576675 35.5569611c.5554657-.3206978.9974823-.0541496.9992485.5694618.001812.6382637-.437252 1.4135056-.9927177 1.7342033s-1.0102539.0615234-1.0120621-.5767403c-.00177-.6236114.4500656-1.4062271 1.0055313-1.7269248z",fill:"#fff"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m46.380909 38.5972862.0018921.6676178-6.3527337 3.6677513-.001892-.6676178z",fill:"#1d2943"})})})}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m46.3761063 36.9025803.0018921.6676178-6.3527337 3.6677513-.001892-.6676178z",fill:"#1d2943"})})})})]})]}),b.jsx("g",{children:b.jsx("g",{children:b.jsx("path",{d:"m8.7317839 31.3355522c.4651041.268528.8390684.9202461.837553 1.4546928-.0015087.5324554-.3779345.748951-.8430386.480423-.4651098-.2685318-.8408093-.9192696-.8393002-1.4517212.0015155-.5344467.3796759-.7519264.8447858-.4833946z",fill:"#4c5c75"})})})]})]})});/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wre=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mj=(...e)=>e.filter((t,i,c)=>!!t&&t.trim()!==""&&c.indexOf(t)===i).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sre={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tre=V.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:h="",children:_,iconNode:w,...a},A)=>V.createElement("svg",{ref:A,...Sre,width:t,height:t,stroke:e,strokeWidth:c?Number(i)*24/Number(t):i,className:mj("lucide",h),...a},[...w.map(([B,N])=>V.createElement(B,N)),...Array.isArray(_)?_:[_]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=(e,t)=>{const i=V.forwardRef(({className:c,...h},_)=>V.createElement(Tre,{ref:_,iconNode:t,className:mj(`lucide-${wre(e)}`,c),...h}));return i.displayName=`${e}`,i};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ere=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],d2=Xo("ArrowLeft",Ere);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cre=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Dre=Xo("Bell",Cre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pre=[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]],Mre=Xo("Bike",Pre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Are=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ry=Xo("Check",Are);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kre=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Rre=Xo("ChevronDown",kre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ire=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],gj=Xo("ChevronLeft",Ire);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zre=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yj=Xo("ChevronRight",zre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lre=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],$re=Xo("ChevronUp",Lre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bre=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Nre=Xo("Mail",Bre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jre=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],Ore=Xo("MoveRight",jre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fre=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Bg=Xo("Pencil",Fre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vre=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ng=Xo("Save",Vre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ure=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gre=Xo("Settings",Ure);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hre=[["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}],["path",{d:"M12 2v7.5",key:"1e5rl5"}],["path",{d:"m19 5-5.23 5.23",key:"1ezxxf"}],["path",{d:"M22 12h-7.5",key:"le1719"}],["path",{d:"m19 19-5.23-5.23",key:"p3fmgn"}],["path",{d:"M12 14.5V22",key:"dgcmos"}],["path",{d:"M10.23 13.77 5 19",key:"qwopd4"}],["path",{d:"M9.5 12H2",key:"r7bup8"}],["path",{d:"M10.23 10.23 5 5",key:"k2y7lj"}],["circle",{cx:"12",cy:"12",r:"2.5",key:"ix0uyj"}]],qre=Xo("ShipWheel",Hre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wre=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],Kre=Xo("Trash",Wre);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zre=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_u=Xo("X",Zre),Xre=()=>{const[e,t]=V.useState(""),[i,c]=V.useState(""),[h,_]=V.useState(!1),[w,a]=V.useState(null),[A,B]=V.useState(!1),[N,F]=V.useState(!1),[G,Q]=V.useState(!1),[te,Y]=V.useState(!1),[oe,de]=V.useState(!1),[me,be]=V.useState(1);V.useEffect(()=>{const Se=i.length>=8,$e=/[a-z]/.test(i),Le=/[A-Z]/.test(i),re=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(i),Ee=/[0-9]/.test(i);B(Se),F($e),Q(Le),Y(re),de(Ee)},[i]);const pe=()=>{_(!0),fetch(gn+"/v1/account/auth/signup",{method:"POST",headers:{"Content-Type":"application/json","X-GatorPool-Username":e,"X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")},body:JSON.stringify({password:i})}).then(Se=>Se.json()).then(Se=>{_(!1),Se.success?be(2):a(Se.error)}).catch(Se=>{_(!1),a("An error occurred. Please try again later.")})};return b.jsxs("div",{className:"flex mobile:flex-col md:flex-row min-h-screen w-full light:bg-white dark:bg-black",children:[b.jsxs("div",{className:"flex flex-col py-10 mobile:px-12 xl:px-24 mobile:w-full md:w-1/2 border-r-1 light:border-neutral-400 dark:border-neutral-800",children:[b.jsxs("div",{className:"flex flex-row items-center ",children:[b.jsx("img",{src:d0,alt:"GatorPool Logo",className:"w-20"}),b.jsx("h1",{className:"text-xl text-black dark:text-white font-RobotoSemiBold text-left",children:"GatorPool"})]}),b.jsx("h1",{className:"text-7xl mt-24 text-black dark:text-white font-RobotoRegular text-left",children:"Create your login"}),b.jsx("p",{className:"text-md mt-12 text-black dark:text-white font-RobotoRegular text-left",children:"We'll need your UF email address, and a unique password. You'll use this login to access GatorPool next time."}),b.jsx("div",{className:"flex lg:hidden mt-auto mobile:hidden md:block  items-center",children:b.jsx(Aw,{width:"300",height:"400"})}),b.jsx("div",{className:"flex md:hidden lg:block mt-auto mobile:hidden md:block  items-center",children:b.jsx(Aw,{width:"500",height:"400"})})]}),b.jsxs("div",{className:"flex flex-col mobile:w-full md:w-1/2 md:py-10 mobile:px-12 xl:px-24",children:[me===1&&b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("p",{className:"text-lg mobile:hidden md:block  text-black dark:text-white font-RobotoBold mt-24",children:"Enter your UF email and create a password."}),b.jsx(Xn,{type:"email",label:"Email",placeholder:"Enter your UF email",value:e,onChange:Se=>t(Se.target.value),className:"mobile:w-full desktop2:w-8/12 md:mt-16 text-black dark:text-white"}),b.jsx(Xn,{type:"password",label:"Password",placeholder:"Create your password",value:i,onChange:Se=>c(Se.target.value),className:"mobile:w-full desktop2:w-8/12 mt-8 text-black dark:text-white"}),b.jsxs("div",{className:"grid grid-cols-2 mobile:w-full desktop2:w-8/12 mobile:gap-0 xl:gap-4 mt-8 ",children:[b.jsxs("div",{className:"flex items-center",children:[A?b.jsx(Ry,{className:"text-green-500"}):b.jsx(_u,{className:"text-red-500"}),b.jsx("p",{className:"text-neutral-800 text-sm dark:text-neutral-200 ml-2",children:"Minimum 8 characters"})]}),b.jsxs("div",{className:"flex items-center",children:[N?b.jsx(Ry,{className:"text-green-500"}):b.jsx(_u,{className:"text-red-500"}),b.jsx("p",{className:"text-neutral-800 text-sm dark:text-neutral-200 ml-2",children:"One lowercase letter"})]}),b.jsxs("div",{className:"flex items-center",children:[G?b.jsx(Ry,{className:"text-green-500"}):b.jsx(_u,{className:"text-red-500"}),b.jsx("p",{className:"text-neutral-800 text-sm dark:text-neutral-200 ml-2",children:"One uppercase letter"})]}),b.jsxs("div",{className:"flex items-center",children:[te?b.jsx(Ry,{className:"text-green-500"}):b.jsx(_u,{className:"text-red-500"}),b.jsx("p",{className:"text-neutral-800 text-sm dark:text-neutral-200 ml-2",children:"One special character"})]}),b.jsxs("div",{className:"flex items-center",children:[oe?b.jsx(Ry,{className:"text-green-500"}):b.jsx(_u,{className:"text-red-500"}),b.jsx("p",{className:"text-neutral-800 text-sm dark:text-neutral-200 ml-2",children:"One number"})]})]}),b.jsx($r,{isLoading:h,className:"mobile:w-full mt-8 desktop2:w-8/12 mt-8 text-white",onPress:()=>{pe()},color:"secondary",children:"Sign Up"}),w&&b.jsx("div",{className:"flex flex-col mt-4",children:b.jsx("p",{className:"text-red-500 font-RobotoRegular text-sm",children:w})}),b.jsxs("div",{className:"flex flex-col mt-10",children:[b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Already have an account?"}),b.jsx(pi,{to:"/auth/signin",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Sign in"})]}),b.jsx("div",{className:"flex flex-col mt-auto",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["By continuing, you agree to our ",b.jsx(pi,{to:"/tos",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Terms of Service"}),"."]})})]}),me===2&&b.jsxs("div",{className:"flex flex-col w-full h-full items-start mt-16 md:mt-40",children:[b.jsx(Nre,{className:"text-green-500",size:100}),b.jsx("p",{className:"text-xl text-center text-black dark:text-white font-RobotoBold mt-8",children:"Account created successfully!"}),b.jsxs("p",{className:"text-sm text-left text-black dark:text-white font-RobotoRegular mt-2",children:["Please check your inbox at ",e," to verify your email. Click the link provided in the email and fill out the rest of your profile."]})]})]})]})},X6=({width:e=512,height:t=512})=>b.jsxs("svg",{id:"fi_12677439","enable-background":"new 0 0 512 512",height:t,viewBox:"0 0 512 512",width:e,xmlns:"http://www.w3.org/2000/svg",children:[b.jsxs("linearGradient",{id:"SVGID_1_",gradientUnits:"userSpaceOnUse",x1:"440.535",x2:"456.117",y1:"270.931",y2:"270.931",children:[b.jsx("stop",{offset:"0","stop-color":"#e0e0e0"}),b.jsx("stop",{offset:".2799","stop-color":"#dadada"}),b.jsx("stop",{offset:".5692","stop-color":"#cecece"}),b.jsx("stop",{offset:"1","stop-color":"#ccc"})]}),b.jsxs("g",{children:[b.jsx("path",{d:"m446.211 305.17c.052-.527.119-.977-.1-1.339-.138-.227.133-.919.046-1.308-.237-1.054-.722-2.088-1.028-2.366-.157-.141-.516-.398-.932-.76-.702-.609-1.567-1.514-1.898-2.66-.034-.118-.073-.242-.116-.374-.632-1.905-2.271-5.142-4.944-7.246-2.856-2.248-3.402-4.205-6.309-6.612-2.906-2.407-9.911-11.449-32.88-19.421-22.97-7.972-27.636-11.635-28.763-12.654-1.127-1.02-10.782-4.137-13.661-5.732-2.879-1.594-14.55-8.561-21.063-11.758-6.514-3.198-23.582-8.751-26.342-11.25s-19.285-10.262-23.5-13.516c-4.216-3.255-9.694-6.977-9.694-6.977-.957-.867-5.031-.73-7.562-.659s-17.323-10.521-17.323-10.521.092 13.724.013 14.174c-.056.323.006.677.201.995.467.761 2.142 2.727 3.646 3.751 1.504 1.025 4.132 2.855 4.413 4.115.281 1.259 1.077 1.756-.015 2.229-1.092.474-3.823 1.264-4.329 1.594-.505.33-2.446-2.327-4.336-3.138s-1.553-1.294-2.196-1.201-93.846 29.671-93.846 29.671-4.596.113-5.247-.364c-.652-.478-1.65-1.832-3.371-2.489-1.72-.658-3.122-1.589-3.948-1.775-.75-.169-89.927 18.687-89.927 18.687v11.664s1.577 1.428 1.449 1.763c-.128.334.446 2.203.759 2.375.314.172 2.861.453 3.497.578.634.125 3.046.959 3.802.967.755.009 2.194.412 3.271.374s2.434-.609 3.335.207 1.209 2.782 1.572 3.224c.362.44.459.979 2.26 1.033.315.009.634-.007.949-.031-.001 2.892 0 5.394.003 5.499.004.111.087.18.302.167.699-.042 3.309-.716 3.71-1.366s4.013-3.342 3.77-3.899c-.196-.45.932-1.762.834-2.734-.005-.057-.019-.954-.036-2.267.681.417 1.321.848 1.591.749.353-.13.651-.311.698-.83.021-.233.104-.533.189-.808.004 2.627.008 4.765.016 4.786.059.17.279.453 1.079-.004 1.068-.609 6.776-3.427 7.724-3.919s2.393-1.096 3.838-1.7 4.095-1.579 5.943-2.044.633-1.452 1.379-2.014c.276-.208.779-.537 1.336-.883v1.754s5.245-1.214 6.241-1.436c.997-.224 1.783-.298 3.542-.731 1.759-.432 2.024-.53 4.715-1.018 2.691-.489 6.764-.625 8.572-.789 1.808-.163 8.349-.204 8.349-.204s2.403.264 2.065-.042c-.103-.093-.143-1.469-.148-3.328.078-.025.2-.062.24-.077.353-.13 1.807-.952 1.807-.952l-1.635 2.682s1.046.834 2.042.612c.867-.194 1.095-.516 2.452-.726l.048 1.528s-1.462.251.049.269 3.254.022 3.954-.02c.699-.042 2.121.008 3.745.128 1.623.12 9.91 1.66 12.107 3.649s1.811 2.203 1.811 2.203l6.802-2.504s12.695-10.556 14.348-12.097 3.965-2.823 4.752-2.898c.787-.074.666-.747.167-1.424s2.307-4.437 2.604-4.618 3.611-2.692 6.585-2.926c2.972-.234 9.031-.599 16.031.339 7 .939 10.788 3.131 11.784 2.907.996-.223 7.589 2.372 8.827 2.705s10.39.407 11.99 1.181c1.601.774 7.035 2.432 8.224 2.497 1.189.064 7.18-2.5 8.619-2.097 1.439.402 2.011 1.483 3.764 2.058 1.753.574 6.762 2.747 8.33 3.605s7.759 3.313 10.345 7.455c2.586 4.141 4.121 9.244 4.765 9.939.644.696 2.884 4.749 3.979 5.853 1.094 1.103 2.681 3.102 5.694 3.356 3.014.254 6.96 1.239 7.425.423.172-.304.236-2.422.247-4.962.477.148.986.227 1.553.067 1.703-.483.319-1.625.688-2.191.278-.427 1.249-.291 1.999.065-.002.01-1.01 5.073-1.027 5.316-.063.909.584 3.557.584 3.557s.509 2.027.454 2.446c-.119.905.364 1.229 2.751 1.928 2.388.699 10.694 4.17 15.067 5.429s8.207 2.144 9.783 2.783 10.827 2.04 8.783-.148c-2.045-2.189-3.106-2.587-2.134-2.945s.297-.181 2.227.328c1.929.51 1.394 2.5 2.609 3.487 1.215.988 3.855 3.603 4.965 4.27s3.138 2.503 4.311 2.215c1.172-.288 2.433-1.398 4.715-1.019 2.283.379 3.939 1.204 6.497 2.846 2.558 1.641 6.467 3.717 8.42 4.36 1.954.644 8.918 4.25 9.472 4.189s1.491-1.912 3.581-1.82c2.089.091 7.745-.413 9.337-.21 1.591.204 6.108.693 7.861 1.267 1.752.575 4.092 1.005 6.368 2.391s6.596 4.172 7.207 4.951c.612.779 2.488 2.815 4.344 2.92 1.857.106 7.809-1.368 8.16-2.287.352-.919 2.664-2.2 3.813-2.623s6.12-2.109 6.978-3.357c.857-1.248 3.683-3.078 3.505-3.801-.13-.529.438-1.506.415-2.345-.008-.309.001-11.734.001-11.734s-6.84 5.957-6.784 5.388z",fill:"#639536"}),b.jsx("path",{d:"m446.814 293.269c-.138-.187-.246-.369-.334-.547-.362-.743-.325-1.403-.27-1.972-1.02.753-2.198 1.451-3.799 2.04 1.302-1.255-.872-2.007-2.091-3.11-.609-.552-2.257 1.607-3.476.503-.526-2.911 4.169-2.31 2.424-6.324-.98-.888 1.077-1.387 2.914-1.915-.632-1.905-2.271-5.142-4.944-7.246-2.856-2.248-3.402-4.205-6.309-6.612-2.906-2.407-9.911-11.449-32.88-19.422-22.97-7.972-27.636-11.634-28.763-12.654s-10.782-4.137-13.661-5.731-14.55-8.561-21.063-11.759c-6.514-3.197-23.582-8.751-26.342-11.25s-19.285-10.261-23.5-13.516c-4.216-3.254-9.694-6.977-9.694-6.977-.957-.867-5.031-.73-7.562-.659s-6.651 1.516-8.892 1.624-6.684.811-7.536 1.053c-.851.241-1.147 1.211-.68 1.972.467.76 2.142 2.726 3.646 3.751s4.132 2.855 4.412 4.115c.281 1.26 1.077 1.756-.015 2.23-1.093.473-3.823 1.264-4.329 1.594-.505.33-2.446-2.327-4.336-3.139-1.89-.811-1.553-1.293-2.196-1.2s-93.846 29.67-93.846 29.67-4.596.114-5.247-.364c-.652-.478-1.65-1.832-3.371-2.489-1.72-.658-3.122-1.589-3.948-1.775-.827-.186-89.927 33.106-89.927 33.106s1.577 1.428 1.449 1.762.445 2.204.759 2.375c.314.172 2.861.454 3.497.578.634.125 3.046.958 3.802.968.755.009 2.194.412 3.271.374s2.434-.609 3.335.207 1.209 2.783 1.572 3.224c.362.441.459.978 2.259 1.033s3.8-.61 3.488.008c-.312.617-1.782 1.086-1.741 1.573s1.787 2.068 1.635 2.268c-.152.199-1.582.367-1.855.683-.272.316-.971 1.146-.271 1.104.699-.042 3.309-.716 3.71-1.366.4-.65 4.012-3.342 3.77-3.899s1.539-2.432.525-3.35-2.975-1.344-2.494-1.808 1.244-.674 2.129-.21 1.875 1.247 2.228 1.117.651-.311.698-.831c.029-.316.17-.777.276-1.092.208-.004.506-.025.928-.069 2.45-.257 3.205-.248 3.431-.044.225.204.733.662-.817 1.735-1.549 1.073-2.03 1.537-2.36 1.802-.329.265-1.275 1.545-1.275 1.545s.033.706 1.101.097c1.068-.608 6.776-3.427 7.724-3.919s2.393-1.096 3.838-1.7 4.096-1.58 5.943-2.044c1.848-.465.632-1.452 1.379-2.014.746-.562 2.946-1.945 4.271-2.433s5.919-2.179 5.919-2.179 2.418-.173 1.648.254-2.994 1.676-3.645 1.987c-.65.311-1.823.599-3.156 1.305s-3.701 1.937-3.701 1.937 5.245-1.214 6.241-1.437 1.783-.298 3.542-.73 2.024-.53 4.715-1.018c2.691-.489 6.764-.625 8.573-.789 1.807-.163 8.348-.204 8.348-.204s2.403.263 2.065-.043-1.046-.835-1.729-1.229c-.684-.394-2.83-.537-2.83-.537s-.347-.877-.081-.974c.265-.098 1.567.069 1.945.073s2.434-.609 2.787-.739 1.807-.952 1.807-.952l-1.635 2.682s1.046.834 2.042.611 1.05-.624 3.072-.819c2.021-.195 3.547-.613 3.804-.493.257.121-4.376 2.113-4.376 2.113s-1.462.251.049.269c1.511.017 3.254.021 3.954-.021.699-.042 2.121.008 3.745.128 1.623.12 9.91 1.66 12.107 3.649s1.811 2.203 1.811 2.203l6.802-2.505s12.695-10.556 14.348-12.097 3.965-2.823 4.753-2.898c.787-.075.666-.747.167-1.424s2.307-4.437 2.604-4.618 3.612-2.692 6.584-2.926 9.031-.599 16.031.339 10.788 3.131 11.784 2.908 7.589 2.371 8.827 2.704c1.238.334 10.39.407 11.991 1.181 1.6.774 7.035 2.432 8.224 2.496 1.189.065 7.18-2.499 8.619-2.097 1.439.403 2.011 1.484 3.764 2.058s6.762 2.747 8.33 3.605 7.759 3.313 10.345 7.454c2.586 4.142 4.121 9.244 4.765 9.94.644.695 2.884 4.749 3.979 5.852 1.095 1.104 2.681 3.103 5.694 3.356 3.014.253 6.96 1.239 7.425.423s.623-2.812-.72-3.465c-1.343-.654-5.031-.73-5.763-1.393s-2.244-1.47-.951-1.874 5.03-.058 5.593.452 1.939 1.868 3.642 1.385.319-1.624.688-2.19 1.952-.144 2.628.468-1.538 3.22-1.656 4.914 1.157 5.098 1.038 6.003c-.119.904.364 1.229 2.751 1.928 2.388.699 10.694 4.169 15.067 5.429s8.207 2.144 9.783 2.783 10.827 2.04 8.782-.148c-2.044-2.189-3.105-2.587-2.134-2.945.972-.358.297-.181 2.227.328 1.929.509 1.394 2.5 2.609 3.487 1.215.988 3.855 3.603 4.965 4.271 1.11.667 3.138 2.503 4.311 2.215 1.172-.288 2.433-1.398 4.715-1.019 2.283.379 3.939 1.204 6.497 2.845s6.467 3.717 8.42 4.361c1.954.644 8.918 4.249 9.472 4.189.554-.061 1.491-1.912 3.581-1.821 2.089.092 7.745-.412 9.337-.209 1.591.203 6.108.693 7.861 1.267s4.092 1.005 6.368 2.391 6.595 4.171 7.207 4.951c.612.779 2.488 2.815 4.344 2.921s7.808-1.368 8.16-2.287 2.664-2.2 3.813-2.623c1.148-.423 6.12-2.109 6.977-3.358.858-1.249 3.683-3.078 3.505-3.802-.178-.723.953-2.288.084-3.187-.875-.896-4.6-4.043-5.848-5.736z",fill:"#a0c685"}),b.jsx("path",{d:"m446.076 288.333c-.248-1.103-.756-2.186-1.076-2.476-.164-.148-.54-.418-.975-.796-.735-.637-1.641-1.584-1.987-2.784-.035-.123-.076-.254-.122-.392-1.923.553-4.076 1.076-3.05 2.005 1.826 4.201-4.5 4.007-3.949 7.053 1.275 1.155 4.412-1.538 5.05-.96 1.276 1.155 3.552 1.942 2.189 3.256 1.677-.617 2.909-1.348 3.977-2.135.055-.552.126-1.023-.105-1.401-.145-.239.139-.964.048-1.37z",fill:"#36a238"}),b.jsxs("g",{children:[b.jsx("path",{d:"m440.574 286.504c-.104.311-.004.691.326 1.065.66.751 1.991 1.201 2.971 1.004.49-.098.8-.339.905-.65l11.34-33.261-4.202-1.419z",fill:"url(#SVGID_1_)"}),b.jsx("path",{d:"m452.019 252.527c-1.232.247-1.558 1.212-.728 2.156.83.943 2.501 1.508 3.734 1.261 1.232-.247 1.557-1.213.728-2.156-.83-.943-2.502-1.508-3.734-1.261z",fill:"#71c6d9"})]}),b.jsx("circle",{cx:"453.37",cy:"255.461",fill:"#f00",r:"7.429"})]})]}),Y6=e=>b.jsxs("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:[b.jsx("path",{d:"M21.2714 9.17834C20.9814 8.71834 20.6714 8.28834 20.3514 7.88834C19.9814 7.41834 19.2814 7.37834 18.8614 7.79834L15.8614 10.7983C16.0814 11.4583 16.1214 12.2183 15.9214 13.0083C15.5714 14.4183 14.4314 15.5583 13.0214 15.9083C12.2314 16.1083 11.4714 16.0683 10.8114 15.8483C10.8114 15.8483 9.38141 17.2783 8.35141 18.3083C7.85141 18.8083 8.01141 19.6883 8.68141 19.9483C9.75141 20.3583 10.8614 20.5683 12.0014 20.5683C13.7814 20.5683 15.5114 20.0483 17.0914 19.0783C18.7014 18.0783 20.1514 16.6083 21.3214 14.7383C22.2714 13.2283 22.2214 10.6883 21.2714 9.17834Z",fill:"currentColor"}),b.jsx("path",{d:"M14.0206 9.98062L9.98062 14.0206C9.47062 13.5006 9.14062 12.7806 9.14062 12.0006C9.14062 10.4306 10.4206 9.14062 12.0006 9.14062C12.7806 9.14062 13.5006 9.47062 14.0206 9.98062Z",fill:"currentColor"}),b.jsx("path",{d:"M18.25 5.74969L14.86 9.13969C14.13 8.39969 13.12 7.95969 12 7.95969C9.76 7.95969 7.96 9.76969 7.96 11.9997C7.96 13.1197 8.41 14.1297 9.14 14.8597L5.76 18.2497H5.75C4.64 17.3497 3.62 16.1997 2.75 14.8397C1.75 13.2697 1.75 10.7197 2.75 9.14969C3.91 7.32969 5.33 5.89969 6.91 4.91969C8.49 3.95969 10.22 3.42969 12 3.42969C14.23 3.42969 16.39 4.24969 18.25 5.74969Z",fill:"currentColor"}),b.jsx("path",{d:"M14.8581 11.9981C14.8581 13.5681 13.5781 14.8581 11.9981 14.8581C11.9381 14.8581 11.8881 14.8581 11.8281 14.8381L14.8381 11.8281C14.8581 11.8881 14.8581 11.9381 14.8581 11.9981Z",fill:"currentColor"}),b.jsx("path",{d:"M21.7689 2.22891C21.4689 1.92891 20.9789 1.92891 20.6789 2.22891L2.22891 20.6889C1.92891 20.9889 1.92891 21.4789 2.22891 21.7789C2.37891 21.9189 2.56891 21.9989 2.76891 21.9989C2.96891 21.9989 3.15891 21.9189 3.30891 21.7689L21.7689 3.30891C22.0789 3.00891 22.0789 2.52891 21.7689 2.22891Z",fill:"currentColor"})]}),J6=e=>b.jsxs("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:[b.jsx("path",{d:"M21.25 9.14969C18.94 5.51969 15.56 3.42969 12 3.42969C10.22 3.42969 8.49 3.94969 6.91 4.91969C5.33 5.89969 3.91 7.32969 2.75 9.14969C1.75 10.7197 1.75 13.2697 2.75 14.8397C5.06 18.4797 8.44 20.5597 12 20.5597C13.78 20.5597 15.51 20.0397 17.09 19.0697C18.67 18.0897 20.09 16.6597 21.25 14.8397C22.25 13.2797 22.25 10.7197 21.25 9.14969ZM12 16.0397C9.76 16.0397 7.96 14.2297 7.96 11.9997C7.96 9.76969 9.76 7.95969 12 7.95969C14.24 7.95969 16.04 9.76969 16.04 11.9997C16.04 14.2297 14.24 16.0397 12 16.0397Z",fill:"currentColor"}),b.jsx("path",{d:"M11.9984 9.14062C10.4284 9.14062 9.14844 10.4206 9.14844 12.0006C9.14844 13.5706 10.4284 14.8506 11.9984 14.8506C13.5684 14.8506 14.8584 13.5706 14.8584 12.0006C14.8584 10.4306 13.5684 9.14062 11.9984 9.14062Z",fill:"currentColor"})]}),Yre=()=>{const[e,t]=V.useState(""),[i,c]=V.useState(""),[h,_]=V.useState(!1),[w,a]=V.useState(null),[A,B]=V.useState([]),[N,F]=V.useState(!1),[G,Q]=V.useState(!1),[te,Y]=V.useState(!1),[oe,de]=V.useState(0),[me,be]=V.useState(""),[pe,Se]=V.useState(""),[$e,Le]=V.useState(""),[re,Ee]=V.useState(""),[se,ue]=V.useState(null),[ke,ce]=V.useState(!1),[Pe,xe]=V.useState(""),[Te,Ie]=V.useState(!1),[Me,Xe]=V.useState(!1),Ce=()=>{Ie(Ke=>!Ke)};V.useEffect(()=>{const Ke=Array.from({length:900},()=>({top:`${Math.random()*100}%`,left:`${Math.random()*100}%`}));B(Ke)},[]);const He=()=>{_(!0),fetch(gn+"/oauth2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":e},credentials:"include",body:JSON.stringify({grant_type:"password",username:e,password:i,scope:"internal",mfa_code:Pe})}).then(Ke=>Ke.json()).then(Ke=>{_(!1),Ke.success?(localStorage.setItem("X-GatorPool-Username",e),Ke.onboarding_redirect?Q(!0):F(!0)):Ke.error&&(Ke.error==="mfa_code_required"||Ke.error==="mfa_required"?ce(!0):a(Ke.error))}).catch(Ke=>{a("Invalid email or password")})},et=()=>{fetch(gn+"/v1/account/auth/password/reset/request",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Username":me,"X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")},body:JSON.stringify({})}).then(Ke=>Ke.json()).then(Ke=>{Ke.success?de(1):Ke.error&&Ke.error==="password reset request already exists"&&ue("A password reset request already exists. Please check your email.")})};return N?b.jsx(q4,{to:"/dashboard"}):G?b.jsx(q4,{to:"/auth/finish"}):b.jsxs("div",{className:"flex mobile:flex-col md:flex-row min-h-screen w-full light:bg-white dark:bg-black",children:[b.jsxs("div",{className:"relative flex flex-col py-10 mobile:px-12 xl:px-24 mobile:w-full md:w-1/2 border-r-1 light:border-neutral-400 dark:border-neutral-800 overflow-hidden",children:[b.jsx("div",{className:"inset-0 pointer-events-none mobile:hidden md:block md:absolute",children:A.map((Ke,ot)=>b.jsx(N8.div,{className:"absolute w-1 h-1 bg-neutral-600 dark:bg-neutral-400 opacity-20 rounded-full",style:{top:Ke.top,left:Ke.left},initial:{opacity:.1,scale:1},animate:{opacity:[.1,.3,.1],scale:[1,1.1,1]},transition:{duration:Math.random()*4+2,repeat:1/0,repeatType:"mirror",ease:"easeInOut"}},ot))}),b.jsxs("div",{className:"flex flex-row items-center z-10",children:[b.jsx("img",{src:d0,alt:"GatorPool Logo",className:"w-20"}),b.jsx("h1",{className:"text-xl text-black dark:text-white font-RobotoSemiBold text-left",children:"GatorPool"})]}),b.jsx("div",{className:"flex md:hidden lg:block mobile:hidden md:block mt-auto z-10",children:b.jsx(X6,{width:"400",height:"400"})}),b.jsx("div",{className:"flex lg:hidden mt-auto mobile:hidden md:block items-center z-10",children:b.jsx(X6,{width:"300",height:"400"})})]}),b.jsx("div",{className:"flex flex-col mobile:w-full md:w-1/2 md:py-10 mobile:px-12 xl:px-24",children:te&&oe===0?b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("p",{className:"text-lg text-black dark:text-white font-RobotoBold md:mt-24 mobile:mb-12 md:mb-0",children:"Reset your password"}),b.jsx(Xn,{type:"email",label:"Email",placeholder:"Enter your email",value:me,onChange:Ke=>be(Ke.target.value),className:"mobile:w-full desktop2:w-8/12 md:mt-16 text-black dark:text-white"}),b.jsx($r,{isLoading:h,className:"mobile:w-full mt-8 desktop2:w-8/12 mt-8 text-white",onPress:()=>{et()},color:"secondary",children:"Send Code"}),se&&b.jsx("div",{className:"flex flex-col mt-2",children:b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:se})}),b.jsxs("div",{className:"flex flex-col mt-8",children:[b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Don't have an account?"}),b.jsx(pi,{to:"/auth/signup",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Sign up"})]}),b.jsx("div",{className:"flex flex-col mt-auto",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["By continuing, you agree to our ",b.jsx(pi,{to:"/terms",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Terms of Service"})," and ",b.jsx(pi,{to:"/privacy",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Privacy Policy"}),"."]})})]}):te&&oe===1?b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("p",{className:"text-lg text-black dark:text-white font-RobotoBold md:mt-24 mobile:mb-12 md:mb-0",children:"Reset your password"}),b.jsx(A6,{value:pe,onValueChange:Se,className:"light dark:dark text-black dark:text-white",length:6}),b.jsx($r,{onPress:()=>{setTimeout(()=>{fetch(gn+"/v1/account/auth/password/reset/code",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Username":me,"X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")},body:JSON.stringify({code:pe})}).then(Ke=>Ke.json()).then(Ke=>{Ke.success?(de(2),ue("")):Ke.error==="send_back_err"?(ue(""),ce(!1),Y(!1),de(0)):ue(Ke.error)})},300)},color:"primary",className:" text-white mx-auto font-PoppinsRegular w-full mt-6 py-2",size:"md",children:"Verify"}),se&&b.jsx("div",{className:"flex flex-col mt-2",children:b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:se})}),b.jsx("div",{className:"flex flex-col mt-auto",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["By continuing, you agree to our ",b.jsx(pi,{to:"/terms",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Terms of Service"})," and ",b.jsx(pi,{to:"/privacy",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Privacy Policy"}),"."]})})]}):te&&oe===2?b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("p",{className:"text-lg text-black dark:text-white font-RobotoBold md:mt-24 mobile:mb-12 md:mb-0",children:"Reset your password"}),b.jsx(Xn,{className:"light dark:dark text-black mt-4 dark:text-white ",endContent:b.jsx("button",{"aria-label":"toggle password visibility",className:"focus:outline-none",type:"button",onClick:Ce,children:Te?b.jsx(Y6,{className:"text-2xl text-default-400 pointer-events-none"}):b.jsx(J6,{className:"text-2xl text-default-400 pointer-events-none"})}),label:"Password",value:$e,onChange:Ke=>Le(Ke.target.value),placeholder:"Enter your password",type:Te?"text":"password"}),b.jsx(Xn,{className:"light dark:dark text-black mt-4 dark:text-white ",endContent:b.jsx("button",{"aria-label":"toggle password visibility",className:"focus:outline-none",type:"button",onClick:Ce,children:Te?b.jsx(Y6,{className:"text-2xl text-default-400 pointer-events-none"}):b.jsx(J6,{className:"text-2xl text-default-400 pointer-events-none"})}),label:"Confirm Password",value:re,onChange:Ke=>Ee(Ke.target.value),placeholder:"Confirm your new password",type:Te?"text":"password"}),b.jsx($r,{onPress:()=>{setTimeout(()=>{if($e!==re){ue("Passwords do not match");return}fetch(gn+"/v1/account/auth/password/reset",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Username":me,"X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")},body:JSON.stringify({code:pe,password:$e})}).then(Ke=>Ke.json()).then(Ke=>{Ke.success?(ue(""),Y(!1),de(0)):ue(Ke.error)})},300)},color:"primary",className:"text-white mx-auto font-PoppinsRegular w-full mt-6 py-2",size:"md",children:"Reset Password"}),se&&b.jsx("p",{className:"text-red-500 dark:text-red-500 text-sm mt-1 font-PoppinsRegular",children:se}),se&&b.jsx("div",{className:"flex flex-col mt-2",children:b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:se})}),b.jsx("div",{className:"flex flex-col mt-auto",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["By continuing, you agree to our ",b.jsx(pi,{to:"/tos",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Terms of Service"}),"."]})})]}):ke?b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("p",{className:"text-lg text-black dark:text-white font-RobotoBold md:mt-24 mobile:mb-12 md:mb-0",children:"Enter the code sent to your email"}),b.jsx(A6,{value:Pe,onValueChange:xe,className:"light dark:dark text-black dark:text-white",length:6}),b.jsx($r,{isLoading:Me,onPress:()=>{setTimeout(()=>{Xe(!0),fetch(gn+"/oauth2/token",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Username":e,"X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")},body:JSON.stringify({mfa_code:Pe,username:e,password:i,scope:"internal",grant_type:"password"})}).then(Ke=>Ke.json()).then(Ke=>{Ke.success?(localStorage.setItem("X-GatorPool-Username",e),ue(null),Xe(!1),F(!0)):(Xe(!1),Ke.error==="send_back_err"?(ue(""),ce(!1)):Ke.error==="mfa_attempts_exceeded"?ue("You have exceeded the maximum number of attempts. Please try again later."):Ke.error==="mfa_expired"?ue("The code has expired. Please try again."):Ke.error.includes("Invalid mfa code. You have")&&ue(Ke.error))})},300)},color:"primary",className:" text-white mx-auto font-PoppinsRegular w-full mt-6 py-2",size:"md",children:"Sign in"}),se&&b.jsx("p",{className:"text-red-500 dark:text-red-500 text-sm mt-1 font-PoppinsRegular",children:se}),b.jsx("div",{className:"flex flex-col mt-auto",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["By continuing, you agree to our ",b.jsx(pi,{to:"/tos",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Terms of Service"}),"."]})})]}):b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("p",{className:"text-lg text-black dark:text-white font-RobotoBold md:mt-24 mobile:mb-12 md:mb-0",children:"Log into GatorPool"}),b.jsx(Xn,{type:"email",label:"Email",placeholder:"Enter your email",value:e,onChange:Ke=>t(Ke.target.value),className:"mobile:w-full desktop2:w-8/12 md:mt-16 text-black dark:text-white"}),b.jsx(Xn,{type:"password",label:"Password",placeholder:"Enter your password",value:i,onChange:Ke=>c(Ke.target.value),className:"mobile:w-full desktop2:w-8/12 mt-8 text-black dark:text-white"}),b.jsx($r,{isLoading:h,className:"mobile:w-full mt-8 desktop2:w-8/12 mt-8 text-white",onPress:()=>{He()},color:"secondary",children:"Sign In"}),b.jsx("div",{className:"flex flex-col mt-2",children:b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:b.jsx("button",{onClick:()=>{Y(!0),de(0)},className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Forgot your password?"})})}),b.jsxs("div",{className:"flex flex-col mt-8",children:[b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Don't have an account?"}),b.jsx(pi,{to:"/auth/signup",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Sign up"})]}),b.jsx("div",{className:"flex flex-col mt-auto",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["By continuing, you agree to our ",b.jsx(pi,{to:"/tos",className:"text-black dark:text-white underline font-RobotoBold text-sm",children:"Terms of Service"}),"."]})})]})})]})},Jre=()=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"})}),Qre=()=>b.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),ene=({updateAvatar:e,accountData:t,setAccountData:i})=>{const[c,h]=V.useState(null),_=a=>{var B;const A=(B=a.target.files)==null?void 0:B[0];A&&h(A)},w=()=>{if(c){const a=new FormData;a.append("files",c),a.append("type","profile_picture"),fetch(`${gn}/v1/account/idp/pfp`,{method:"POST",body:a,credentials:"include",headers:{"X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(A=>A.json()).then(A=>{A.success&&e(A.url)}).catch(A=>{console.error(A)})}};return b.jsx(b.Fragment,{children:b.jsxs("label",{className:"block mb-3 w-fit",children:[b.jsx("span",{className:"sr-only",children:"Choose picture"}),b.jsx("input",{type:"file",accept:"image/*",className:`className=block w-full text-sm text-slate-500 file:mr-4 file:py-1 file:px-2 file:rounded-full 
                    file:border-0 file:text-xs file:bg-gray-700 file:text-sky-300 hover:file:bg-gray-600`,onChange:_}),c&&b.jsx("button",{onClick:w,className:"bg-slate-800 hover:bg-slate-700 text-white rounded-full px-4 py-2",children:"Upload"})]})})},tne=({updateAvatar:e,closeModal:t,accountData:i,setAccountData:c})=>b.jsxs("div",{className:"relative z-40 ","aria-labelledby":"crop-image-dialog",role:"dialog","aria-modal":"true",children:[b.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-all backdrop-blur-sm"}),b.jsx("div",{className:"fixed inset-0 z-40 w-screen overflow-y-auto",children:b.jsx("div",{className:"flex min-h-full justify-center px-2 py-12 text-center ",children:b.jsx("div",{className:"relative w-[55%] sm:w-[40%] min-h-[60vh] rounded-2xl bg-gray-900 text-slate-100 text-left shadow-xl transition-all",children:b.jsxs("div",{className:"px-5 py-4",children:[b.jsxs("button",{type:"button",className:"rounded-md p-1 inline-flex items-center justify-center text-gray-400 hover:bg-gray-700 focus:outline-none absolute top-2 right-2",onClick:t,children:[b.jsx("span",{className:"sr-only",children:"Close menu"}),b.jsx(Qre,{})]}),b.jsx(ene,{updateAvatar:e,accountData:i,setAccountData:c})]})})})})]}),Q6=({accountData:e,setAccountData:t})=>{const[i,c]=V.useState(""),[h,_]=V.useState(!1),w=a=>{t({...e,profile_picture:a})};return b.jsxs("div",{className:"flex bg-white dark:bg-[#0c0c0c] min-h-screen p-8 items- w-full",children:[b.jsxs("div",{className:"flex flex-col w-full ml-16",children:[b.jsx("h1",{className:"text-black dark:text-white text-l font-RobotoExtraBold text-2xl mt-20 mb-6",children:"Profile Details"}),b.jsxs("div",{className:"flex flex-row items-center mb-6",children:[b.jsxs("div",{className:"flex flex-col items-center",children:[b.jsx("img",{src:e.profile_picture,className:"w-[150px] h-[150px] rounded-full border-2 border-gray-400 mb-1"}),b.jsx("button",{className:`relative left-0 right-0 m-auto px-4 py-1 rounded-2xl
                        bg-gray-800 hover:bg-gray-700 border border-gray-600 text-white dark:text-black`,title:"Change photo",onClick:()=>_(!0),children:b.jsx(Jre,{})})]}),b.jsx("div",{className:"flex flex-col",children:b.jsxs("h1",{className:"text-black dark:text-white text-2xl font-RobotoSemiBold mr-4 ml-4",children:[e==null?void 0:e.first_name," ",e==null?void 0:e.last_name]})})]}),b.jsxs("div",{className:"flex flex-row w-full mb-6",children:[b.jsx(p4,{isReadOnly:!0,className:"max-w-xs text-black dark:text-white font-Roboto mr-6 w-full",defaultValue:`${e==null?void 0:e.first_name} ${e==null?void 0:e.last_name}`,label:"Name",labelPlacement:"outside",variant:"bordered",maxRows:1}),b.jsx(p4,{isReadOnly:!0,className:"max-w-xs text-black dark:text-white font-Roboto w-full",defaultValue:e.email,label:"UFL Email",labelPlacement:"outside",variant:"bordered",maxRows:1})]}),b.jsx("div",{className:"flex flex-row",children:b.jsx(Xn,{className:"max-w-xs text-black dark:text-white font-Roboto mr-6 w-full mb-6",placeholder:e==null?void 0:e.first_name,label:"Preferred Name",labelPlacement:"outside",variant:"bordered"})}),b.jsx(p4,{onChange:a=>c(a.target.value),value:i,className:"max-w-lg w-full",label:"Edit your bio:",errorMessage:"The description should not be more than 500 characters long.",isInvalid:!1,labelPlacement:"outside",placeholder:"Tell others about yourself..."})]}),h&&b.jsx(tne,{updateAvatar:w,closeModal:()=>_(!1),accountData:e,setAccountData:t})]})},xo=[];for(let e=0;e<256;++e)xo.push((e+256).toString(16).slice(1));function rne(e,t=0){return(xo[e[t+0]]+xo[e[t+1]]+xo[e[t+2]]+xo[e[t+3]]+"-"+xo[e[t+4]]+xo[e[t+5]]+"-"+xo[e[t+6]]+xo[e[t+7]]+"-"+xo[e[t+8]]+xo[e[t+9]]+"-"+xo[e[t+10]]+xo[e[t+11]]+xo[e[t+12]]+xo[e[t+13]]+xo[e[t+14]]+xo[e[t+15]]).toLowerCase()}let k4;const nne=new Uint8Array(16);function ane(){if(!k4){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");k4=crypto.getRandomValues.bind(crypto)}return k4(nne)}const ine=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),eA={randomUUID:ine};function tA(e,t,i){var h;if(eA.randomUUID&&!e)return eA.randomUUID();e=e||{};const c=e.random??((h=e.rng)==null?void 0:h.call(e))??ane();if(c.length<16)throw new Error("Random bytes length must be >= 16");return c[6]=c[6]&15|64,c[8]=c[8]&63|128,rne(c)}const sne=()=>{let e="",t="",i=new URLSearchParams(window.location.search),c=i.get("id"),h=i.get("signature");e=c,t=h;const[_,w]=V.useState(null),[a,A]=V.useState(!1);return V.useEffect(()=>{fetch(gn+"/v1/account/auth/verify?id="+e+"&signature="+t,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")}}).then(async B=>{A(!0),B.status===200?w("verified"):w("unverified")})},[a]),b.jsx("div",{className:"flex flex-col bg-white dark:bg-black w-full h-screen justify-center items-center",children:_?b.jsx("div",{className:"flex flex-col items-center",children:_==="verified"?b.jsxs("div",{className:"flex flex-col items-center rounded-xl p-9",children:[b.jsx("img",{src:d0,alt:"logo",className:"w-24 h-24"}),b.jsx("h1",{className:"font-RobotoBold text-xl mt-4 text-green-500",children:"Verification successful"}),b.jsx("p",{className:"font-RobotoRegular text-center text-black dark:text-white mt-4",children:"Your account has been verified. You can now login."}),b.jsx($r,{color:"primary",className:"dark text-black dark:text-white mx-auto font-RobotoRegular w-full mt-6 py-2",size:"lg",onPress:()=>{window.location.href="/auth/signin"},children:"Login"})]}):b.jsxs("div",{className:"flex flex-col items-center rounded-xl p-9",children:[b.jsx("img",{src:require("../../assets/images/logo.png"),alt:"logo",className:"w-24 h-24"}),b.jsx("h1",{className:"font-RobotoBold text-xl mt4 text-red-500",children:"Verification failed"}),b.jsx($r,{color:"default",className:"dark text-black dark:text-white mx-auto font-RobotoRegular w-full mt-6 py-2",size:"lg",variant:"bordered",onPress:()=>{window.location.href="/auth/signin"},children:"Back to Login"})]})}):b.jsxs("div",{className:"flex flex-col items-center rounded-xl p-9",children:[b.jsx(i2,{"aria-label":"Loading...",size:"lg"}),b.jsx("h1",{className:"font-RobotoBold text-xl mt-4 text-black dark:text-white",children:"Verifying your account..."})]})})},one=()=>{const[e,t]=V.useState(""),[i,c]=V.useState(""),[h,_]=V.useState(""),[w,a]=V.useState(""),[A,B]=V.useState(!1),[N,F]=V.useState(null);V.useEffect(()=>{fetch(gn+"/v1/auth/verify",{method:"POST",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},credentials:"include",body:JSON.stringify({})}).then(Q=>Q.json()).then(Q=>{Q.success||(window.location.href="/auth/signin")}).catch(Q=>{window.location.href="/auth/signin"})},[]);const G=()=>{B(!0),fetch(gn+"/v1/account/auth/finish",{method:"POST",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},credentials:"include",body:JSON.stringify({first_name:e,last_name:i,ufid:h,gender:w})}).then(Q=>Q.json()).then(Q=>{B(!1),Q.success?window.location.href="/dashboard":F(Q.error)}).catch(Q=>{F("An error occurred while saving your profile. Please try again later.")})};return b.jsxs("div",{className:"flex mobile:flex-col md:flex-row min-h-screen w-full light:bg-white dark:bg-black",children:[b.jsxs("div",{className:"flex flex-col py-10 mobile:px-12 xl:px-24 mobile:w-full md:w-1/2 border-r-1 light:border-neutral-400 dark:border-neutral-800",children:[b.jsxs("div",{className:"flex flex-row items-center ",children:[b.jsx("img",{src:d0,alt:"GatorPool Logo",className:"w-20"}),b.jsx("h1",{className:"text-xl text-black dark:text-white font-RobotoSemiBold text-left",children:"GatorPool"})]}),b.jsx("h1",{className:"text-7xl mt-24 text-black dark:text-white font-RobotoRegular text-left",children:"Finish your profile"}),b.jsx("p",{className:"text-md mt-12 text-black dark:text-white font-RobotoRegular text-left",children:"We'll need your full name as it appears on your government ID, your UFID, and gender."}),b.jsx("div",{className:"flex lg:hidden mt-auto mobile:hidden md:block  items-center",children:b.jsx(Aw,{width:"300",height:"400"})}),b.jsx("div",{className:"flex md:hidden lg:block mt-auto mobile:hidden md:block  items-center",children:b.jsx(Aw,{width:"500",height:"400"})})]}),b.jsx("div",{className:"flex flex-col mobile:w-full md:w-1/2 md:py-10 mobile:px-12 xl:px-24",children:b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("p",{className:"text-lg mobile:hidden md:block  text-black dark:text-white font-RobotoBold mt-24",children:"Enter some more details to finish your profile."}),b.jsxs("div",{className:"flex flex-col md:mt-16 mobile:space-y-4 items-center md:space-y-0 md:flex-row md:space-x-4 lg:space-x-8",children:[b.jsx(Xn,{type:"text",label:"First Name",placeholder:"Enter your first name",value:e,onChange:Q=>t(Q.target.value),className:"mobile:w-full desktop2:w-8/12 text-black dark:text-white"}),b.jsx(Xn,{type:"text",label:"Last Name",placeholder:"Enter your last name",value:i,onChange:Q=>c(Q.target.value),className:"mobile:w-full desktop2:w-8/12 text-black dark:text-white"})]}),b.jsx(Xn,{type:"text",label:"UFID",placeholder:"Enter your UFID",value:h,onChange:Q=>_(Q.target.value),className:"mobile:w-full mt-8 desktop2:w-8/12 text-black dark:text-white"}),b.jsx("p",{className:"text-sm mt-1 ml-2 text-black dark:text-white font-RobotoRegular text-left",children:"We require your UFID for safety purposes and regulation."}),b.jsxs(PT,{children:[b.jsx(DT,{children:b.jsx($r,{variant:"bordered",className:"w-44 mt-8",children:w===""?"Select Gender":w.charAt(0).toUpperCase()+w.slice(1)})}),b.jsxs(CT,{className:"",color:"primary","aria-label":"Action event example",onAction:Q=>{a(Q)},children:[b.jsx(_m,{className:"dark",children:"Male"},"male"),b.jsx(_m,{children:"Female"},"female")]})]}),b.jsx("p",{className:"text-sm mt-1 ml-2 text-black dark:text-white font-RobotoRegular text-left",children:"Gender is required for safety purposes and regulation."}),b.jsx($r,{isLoading:A,className:"mobile:w-full mt-8 desktop2:w-8/12 mt-8 text-white",onPress:()=>{G()},color:"secondary",children:"Save Profile"}),N?b.jsxs("div",{className:"flex flex-row items-center mt-4",children:[b.jsx(_u,{size:24,className:"text-red-500"}),b.jsx("p",{className:"text-sm ml-2 text-red-500 font-RobotoRegular",children:N})]}):null]})})]})};function hl({children:e}){const[t,i]=V.useState(null),c=localStorage.getItem("X-GatorPool-Device-Id"),h=localStorage.getItem("X-GatorPool-Username");return V.useEffect(()=>{async function _(){try{const a=await(await fetch(gn+"/v1/auth/verify",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":c,"X-GatorPool-Username":h}})).json();a.success&&a.message!=="account_not_complete"||(await(await fetch(gn+"/oauth2/token",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":c,"X-GatorPool-Username":h},body:JSON.stringify({username:h,grant_type:"refresh",scope:"internal"})})).json()).success?i(!0):i(!1)}catch(w){console.error("Token verification failed:",w),i(!1)}}_()},[c,h]),t===null?b.jsx("div",{className:"flex flex-col h-screen bg-white dark:bg-black w-full items-center justify-center",children:b.jsx("img",{src:d0,alt:"GatorPool",className:"w-32 h-32"})}):t?e:b.jsx(q4,{to:"/auth/signin"})}var R4={exports:{}},ii={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rA;function lne(){if(rA)return ii;rA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),w=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),Q=Symbol.for("react.client.reference");function te(Y){if(typeof Y=="object"&&Y!==null){var oe=Y.$$typeof;switch(oe){case e:switch(Y=Y.type,Y){case i:case h:case c:case A:case B:return Y;default:switch(Y=Y&&Y.$$typeof,Y){case w:case a:case F:case N:return Y;case _:return Y;default:return oe}}case t:return oe}}}return ii.ContextConsumer=_,ii.ContextProvider=w,ii.Element=e,ii.ForwardRef=a,ii.Fragment=i,ii.Lazy=F,ii.Memo=N,ii.Portal=t,ii.Profiler=h,ii.StrictMode=c,ii.Suspense=A,ii.SuspenseList=B,ii.isContextConsumer=function(Y){return te(Y)===_},ii.isContextProvider=function(Y){return te(Y)===w},ii.isElement=function(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===e},ii.isForwardRef=function(Y){return te(Y)===a},ii.isFragment=function(Y){return te(Y)===i},ii.isLazy=function(Y){return te(Y)===F},ii.isMemo=function(Y){return te(Y)===N},ii.isPortal=function(Y){return te(Y)===t},ii.isProfiler=function(Y){return te(Y)===h},ii.isStrictMode=function(Y){return te(Y)===c},ii.isSuspense=function(Y){return te(Y)===A},ii.isSuspenseList=function(Y){return te(Y)===B},ii.isValidElementType=function(Y){return typeof Y=="string"||typeof Y=="function"||Y===i||Y===h||Y===c||Y===A||Y===B||Y===G||typeof Y=="object"&&Y!==null&&(Y.$$typeof===F||Y.$$typeof===N||Y.$$typeof===w||Y.$$typeof===_||Y.$$typeof===a||Y.$$typeof===Q||Y.getModuleId!==void 0)},ii.typeOf=te,ii}var nA;function cne(){return nA||(nA=1,R4.exports=lne()),R4.exports}var xj=cne();function Af(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function vj(e){if(V.isValidElement(e)||xj.isValidElementType(e)||!Af(e))return e;const t={};return Object.keys(e).forEach(i=>{t[i]=vj(e[i])}),t}function Pc(e,t,i={clone:!0}){const c=i.clone?{...e}:e;return Af(e)&&Af(t)&&Object.keys(t).forEach(h=>{V.isValidElement(t[h])||xj.isValidElementType(t[h])?c[h]=t[h]:Af(t[h])&&Object.prototype.hasOwnProperty.call(e,h)&&Af(e[h])?c[h]=Pc(e[h],t[h],i):i.clone?c[h]=Af(t[h])?vj(t[h]):t[h]:c[h]=t[h]}),c}function i0(e,...t){const i=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(c=>i.searchParams.append("args[]",c)),`Minified MUI error #${e}; visit ${i} for the full message.`}function sx(e){if(typeof e!="string")throw new Error(i0(7));return e.charAt(0).toUpperCase()+e.slice(1)}function QS(e,t){const i={...t};for(const c in e)if(Object.prototype.hasOwnProperty.call(e,c)){const h=c;if(h==="components"||h==="slots")i[h]={...e[h],...i[h]};else if(h==="componentsProps"||h==="slotProps"){const _=e[h],w=t[h];if(!w)i[h]=_||{};else if(!_)i[h]=w;else{i[h]={...w};for(const a in _)if(Object.prototype.hasOwnProperty.call(_,a)){const A=a;i[h][A]=QS(_[A],w[A])}}}else i[h]===void 0&&(i[h]=e[h])}return i}function une(e,t,i=void 0){const c={};for(const h in e){const _=e[h];let w="",a=!0;for(let A=0;A<_.length;A+=1){const B=_[A];B&&(w+=(a===!0?"":" ")+t(B),a=!1,i&&i[B]&&(w+=" "+i[B]))}c[h]=w}return c}const aA=e=>e,dne=()=>{let e=aA;return{configure(t){e=t},generate(t){return e(t)},reset(){e=aA}}},hne=dne(),fne={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function _j(e,t,i="Mui"){const c=fne[t];return c?`${i}-${c}`:`${hne.generate(e)}-${t}`}function pne(e,t,i="Mui"){const c={};return t.forEach(h=>{c[h]=_j(e,h,i)}),c}function mne(e,t=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,i))}function bj(e){var t,i,c="";if(typeof e=="string"||typeof e=="number")c+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(t=0;t<h;t++)e[t]&&(i=bj(e[t]))&&(c&&(c+=" "),c+=i)}else for(i in e)e[i]&&(c&&(c+=" "),c+=i);return c}function gne(){for(var e,t,i=0,c="",h=arguments.length;i<h;i++)(e=arguments[i])&&(t=bj(e))&&(c&&(c+=" "),c+=t);return c}function t_(e,t){return t?Pc(e,t,{clone:!1}):e}function yne(e,t){if(!e.containerQueries)return t;const i=Object.keys(t).filter(c=>c.startsWith("@container")).sort((c,h)=>{var w,a;const _=/min-width:\s*([0-9.]+)/;return+(((w=c.match(_))==null?void 0:w[1])||0)-+(((a=h.match(_))==null?void 0:a[1])||0)});return i.length?i.reduce((c,h)=>{const _=t[h];return delete c[h],c[h]=_,c},{...t}):t}function xne(e,t){return t==="@"||t.startsWith("@")&&(e.some(i=>t.startsWith(`@${i}`))||!!t.match(/^@\d/))}function vne(e,t){const i=t.match(/^@([^/]+)?\/?(.+)?$/);if(!i)return null;const[,c,h]=i,_=Number.isNaN(+c)?c||0:+c;return e.containerQueries(h).up(_)}function _ne(e){const t=(_,w)=>_.replace("@media",w?`@container ${w}`:"@container");function i(_,w){_.up=(...a)=>t(e.breakpoints.up(...a),w),_.down=(...a)=>t(e.breakpoints.down(...a),w),_.between=(...a)=>t(e.breakpoints.between(...a),w),_.only=(...a)=>t(e.breakpoints.only(...a),w),_.not=(...a)=>{const A=t(e.breakpoints.not(...a),w);return A.includes("not all and")?A.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):A}}const c={},h=_=>(i(c,_),c);return i(h),{...e,containerQueries:h}}const h2={xs:0,sm:600,md:900,lg:1200,xl:1536},iA={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${h2[e]}px)`},bne={containerQueries:e=>({up:t=>{let i=typeof t=="number"?t:h2[t]||t;return typeof i=="number"&&(i=`${i}px`),e?`@container ${e} (min-width:${i})`:`@container (min-width:${i})`}})};function Nf(e,t,i){const c=e.theme||{};if(Array.isArray(t)){const _=c.breakpoints||iA;return t.reduce((w,a,A)=>(w[_.up(_.keys[A])]=i(t[A]),w),{})}if(typeof t=="object"){const _=c.breakpoints||iA;return Object.keys(t).reduce((w,a)=>{if(xne(_.keys,a)){const A=vne(c.containerQueries?c:bne,a);A&&(w[A]=i(t[a],a))}else if(Object.keys(_.values||h2).includes(a)){const A=_.up(a);w[A]=i(t[a],a)}else{const A=a;w[A]=t[A]}return w},{})}return i(t)}function wne(e={}){var i;return((i=e.keys)==null?void 0:i.reduce((c,h)=>{const _=e.up(h);return c[_]={},c},{}))||{}}function Sne(e,t){return e.reduce((i,c)=>{const h=i[c];return(!h||Object.keys(h).length===0)&&delete i[c],i},t)}function f2(e,t,i=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&i){const c=`vars.${t}`.split(".").reduce((h,_)=>h&&h[_]?h[_]:null,e);if(c!=null)return c}return t.split(".").reduce((c,h)=>c&&c[h]!=null?c[h]:null,e)}function kw(e,t,i,c=i){let h;return typeof e=="function"?h=e(i):Array.isArray(e)?h=e[i]||c:h=f2(e,i)||c,t&&(h=t(h,c,e)),h}function vs(e){const{prop:t,cssProperty:i=e.prop,themeKey:c,transform:h}=e,_=w=>{if(w[t]==null)return null;const a=w[t],A=w.theme,B=f2(A,c)||{};return Nf(w,a,F=>{let G=kw(B,h,F);return F===G&&typeof F=="string"&&(G=kw(B,h,`${t}${F==="default"?"":sx(F)}`,F)),i===!1?G:{[i]:G}})};return _.propTypes={},_.filterProps=[t],_}function Tne(e){const t={};return i=>(t[i]===void 0&&(t[i]=e(i)),t[i])}const Ene={m:"margin",p:"padding"},Cne={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},sA={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Dne=Tne(e=>{if(e.length>2)if(sA[e])e=sA[e];else return[e];const[t,i]=e.split(""),c=Ene[t],h=Cne[i]||"";return Array.isArray(h)?h.map(_=>c+_):[c+h]}),LT=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],$T=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...LT,...$T];function O_(e,t,i,c){const h=f2(e,t,!0)??i;return typeof h=="number"||typeof h=="string"?_=>typeof _=="string"?_:typeof h=="string"?`calc(${_} * ${h})`:h*_:Array.isArray(h)?_=>{if(typeof _=="string")return _;const w=Math.abs(_),a=h[w];return _>=0?a:typeof a=="number"?-a:`-${a}`}:typeof h=="function"?h:()=>{}}function BT(e){return O_(e,"spacing",8)}function F_(e,t){return typeof t=="string"||t==null?t:e(t)}function Pne(e,t){return i=>e.reduce((c,h)=>(c[h]=F_(t,i),c),{})}function Mne(e,t,i,c){if(!t.includes(i))return null;const h=Dne(i),_=Pne(h,c),w=e[i];return Nf(e,w,_)}function wj(e,t){const i=BT(e.theme);return Object.keys(e).map(c=>Mne(e,t,c,i)).reduce(t_,{})}function ts(e){return wj(e,LT)}ts.propTypes={};ts.filterProps=LT;function rs(e){return wj(e,$T)}rs.propTypes={};rs.filterProps=$T;function p2(...e){const t=e.reduce((c,h)=>(h.filterProps.forEach(_=>{c[_]=h}),c),{}),i=c=>Object.keys(c).reduce((h,_)=>t[_]?t_(h,t[_](c)):h,{});return i.propTypes={},i.filterProps=e.reduce((c,h)=>c.concat(h.filterProps),[]),i}function vu(e){return typeof e!="number"?e:`${e}px solid`}function Cu(e,t){return vs({prop:e,themeKey:"borders",transform:t})}const Ane=Cu("border",vu),kne=Cu("borderTop",vu),Rne=Cu("borderRight",vu),Ine=Cu("borderBottom",vu),zne=Cu("borderLeft",vu),Lne=Cu("borderColor"),$ne=Cu("borderTopColor"),Bne=Cu("borderRightColor"),Nne=Cu("borderBottomColor"),jne=Cu("borderLeftColor"),One=Cu("outline",vu),Fne=Cu("outlineColor"),m2=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=O_(e.theme,"shape.borderRadius",4),i=c=>({borderRadius:F_(t,c)});return Nf(e,e.borderRadius,i)}return null};m2.propTypes={};m2.filterProps=["borderRadius"];p2(Ane,kne,Rne,Ine,zne,Lne,$ne,Bne,Nne,jne,m2,One,Fne);const g2=e=>{if(e.gap!==void 0&&e.gap!==null){const t=O_(e.theme,"spacing",8),i=c=>({gap:F_(t,c)});return Nf(e,e.gap,i)}return null};g2.propTypes={};g2.filterProps=["gap"];const y2=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=O_(e.theme,"spacing",8),i=c=>({columnGap:F_(t,c)});return Nf(e,e.columnGap,i)}return null};y2.propTypes={};y2.filterProps=["columnGap"];const x2=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=O_(e.theme,"spacing",8),i=c=>({rowGap:F_(t,c)});return Nf(e,e.rowGap,i)}return null};x2.propTypes={};x2.filterProps=["rowGap"];const Vne=vs({prop:"gridColumn"}),Une=vs({prop:"gridRow"}),Gne=vs({prop:"gridAutoFlow"}),Hne=vs({prop:"gridAutoColumns"}),qne=vs({prop:"gridAutoRows"}),Wne=vs({prop:"gridTemplateColumns"}),Kne=vs({prop:"gridTemplateRows"}),Zne=vs({prop:"gridTemplateAreas"}),Xne=vs({prop:"gridArea"});p2(g2,y2,x2,Vne,Une,Gne,Hne,qne,Wne,Kne,Zne,Xne);function Ky(e,t){return t==="grey"?t:e}const Yne=vs({prop:"color",themeKey:"palette",transform:Ky}),Jne=vs({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Ky}),Qne=vs({prop:"backgroundColor",themeKey:"palette",transform:Ky});p2(Yne,Jne,Qne);function Cc(e){return e<=1&&e!==0?`${e*100}%`:e}const eae=vs({prop:"width",transform:Cc}),NT=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=i=>{var h,_,w,a,A;const c=((w=(_=(h=e.theme)==null?void 0:h.breakpoints)==null?void 0:_.values)==null?void 0:w[i])||h2[i];return c?((A=(a=e.theme)==null?void 0:a.breakpoints)==null?void 0:A.unit)!=="px"?{maxWidth:`${c}${e.theme.breakpoints.unit}`}:{maxWidth:c}:{maxWidth:Cc(i)}};return Nf(e,e.maxWidth,t)}return null};NT.filterProps=["maxWidth"];const tae=vs({prop:"minWidth",transform:Cc}),rae=vs({prop:"height",transform:Cc}),nae=vs({prop:"maxHeight",transform:Cc}),aae=vs({prop:"minHeight",transform:Cc});vs({prop:"size",cssProperty:"width",transform:Cc});vs({prop:"size",cssProperty:"height",transform:Cc});const iae=vs({prop:"boxSizing"});p2(eae,NT,tae,rae,nae,aae,iae);const v2={border:{themeKey:"borders",transform:vu},borderTop:{themeKey:"borders",transform:vu},borderRight:{themeKey:"borders",transform:vu},borderBottom:{themeKey:"borders",transform:vu},borderLeft:{themeKey:"borders",transform:vu},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:vu},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:m2},color:{themeKey:"palette",transform:Ky},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Ky},backgroundColor:{themeKey:"palette",transform:Ky},p:{style:rs},pt:{style:rs},pr:{style:rs},pb:{style:rs},pl:{style:rs},px:{style:rs},py:{style:rs},padding:{style:rs},paddingTop:{style:rs},paddingRight:{style:rs},paddingBottom:{style:rs},paddingLeft:{style:rs},paddingX:{style:rs},paddingY:{style:rs},paddingInline:{style:rs},paddingInlineStart:{style:rs},paddingInlineEnd:{style:rs},paddingBlock:{style:rs},paddingBlockStart:{style:rs},paddingBlockEnd:{style:rs},m:{style:ts},mt:{style:ts},mr:{style:ts},mb:{style:ts},ml:{style:ts},mx:{style:ts},my:{style:ts},margin:{style:ts},marginTop:{style:ts},marginRight:{style:ts},marginBottom:{style:ts},marginLeft:{style:ts},marginX:{style:ts},marginY:{style:ts},marginInline:{style:ts},marginInlineStart:{style:ts},marginInlineEnd:{style:ts},marginBlock:{style:ts},marginBlockStart:{style:ts},marginBlockEnd:{style:ts},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:g2},rowGap:{style:x2},columnGap:{style:y2},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Cc},maxWidth:{style:NT},minWidth:{transform:Cc},height:{transform:Cc},maxHeight:{transform:Cc},minHeight:{transform:Cc},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function sae(...e){const t=e.reduce((c,h)=>c.concat(Object.keys(h)),[]),i=new Set(t);return e.every(c=>i.size===Object.keys(c).length)}function oae(e,t){return typeof e=="function"?e(t):e}function lae(){function e(i,c,h,_){const w={[i]:c,theme:h},a=_[i];if(!a)return{[i]:c};const{cssProperty:A=i,themeKey:B,transform:N,style:F}=a;if(c==null)return null;if(B==="typography"&&c==="inherit")return{[i]:c};const G=f2(h,B)||{};return F?F(w):Nf(w,c,te=>{let Y=kw(G,N,te);return te===Y&&typeof te=="string"&&(Y=kw(G,N,`${i}${te==="default"?"":sx(te)}`,te)),A===!1?Y:{[A]:Y}})}function t(i){const{sx:c,theme:h={}}=i||{};if(!c)return null;const _=h.unstable_sxConfig??v2;function w(a){let A=a;if(typeof a=="function")A=a(h);else if(typeof a!="object")return a;if(!A)return null;const B=wne(h.breakpoints),N=Object.keys(B);let F=B;return Object.keys(A).forEach(G=>{const Q=oae(A[G],h);if(Q!=null)if(typeof Q=="object")if(_[G])F=t_(F,e(G,Q,h,_));else{const te=Nf({theme:h},Q,Y=>({[G]:Y}));sae(te,Q)?F[G]=t({sx:Q,theme:h}):F=t_(F,te)}else F=t_(F,e(G,Q,h,_))}),yne(h,Sne(N,F))}return Array.isArray(c)?c.map(w):w(c)}return t}const ox=lae();ox.filterProps=["sx"];function cae(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function uae(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var dae=function(){function e(i){var c=this;this._insertTag=function(h){var _;c.tags.length===0?c.insertionPoint?_=c.insertionPoint.nextSibling:c.prepend?_=c.container.firstChild:_=c.before:_=c.tags[c.tags.length-1].nextSibling,c.container.insertBefore(h,_),c.tags.push(h)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(c){c.forEach(this._insertTag)},t.insert=function(c){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(uae(this));var h=this.tags[this.tags.length-1];if(this.isSpeedy){var _=cae(h);try{_.insertRule(c,_.cssRules.length)}catch{}}else h.appendChild(document.createTextNode(c));this.ctr++},t.flush=function(){this.tags.forEach(function(c){var h;return(h=c.parentNode)==null?void 0:h.removeChild(c)}),this.tags=[],this.ctr=0},e}(),Uo="-ms-",Rw="-moz-",Fa="-webkit-",Sj="comm",jT="rule",OT="decl",hae="@import",Tj="@keyframes",fae="@layer",pae=Math.abs,_2=String.fromCharCode,mae=Object.assign;function gae(e,t){return _o(e,0)^45?(((t<<2^_o(e,0))<<2^_o(e,1))<<2^_o(e,2))<<2^_o(e,3):0}function Ej(e){return e.trim()}function yae(e,t){return(e=t.exec(e))?e[0]:e}function Ua(e,t,i){return e.replace(t,i)}function e5(e,t){return e.indexOf(t)}function _o(e,t){return e.charCodeAt(t)|0}function __(e,t,i){return e.slice(t,i)}function ph(e){return e.length}function FT(e){return e.length}function z1(e,t){return t.push(e),e}function xae(e,t){return e.map(t).join("")}var b2=1,lx=1,Cj=0,Ol=0,Ps=0,vx="";function w2(e,t,i,c,h,_,w){return{value:e,root:t,parent:i,type:c,props:h,children:_,line:b2,column:lx,length:w,return:""}}function Lv(e,t){return mae(w2("",null,null,"",null,null,0),e,{length:-e.length},t)}function vae(){return Ps}function _ae(){return Ps=Ol>0?_o(vx,--Ol):0,lx--,Ps===10&&(lx=1,b2--),Ps}function Mc(){return Ps=Ol<Cj?_o(vx,Ol++):0,lx++,Ps===10&&(lx=1,b2++),Ps}function _h(){return _o(vx,Ol)}function Z1(){return Ol}function V_(e,t){return __(vx,e,t)}function b_(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Dj(e){return b2=lx=1,Cj=ph(vx=e),Ol=0,[]}function Pj(e){return vx="",e}function X1(e){return Ej(V_(Ol-1,t5(e===91?e+2:e===40?e+1:e)))}function bae(e){for(;(Ps=_h())&&Ps<33;)Mc();return b_(e)>2||b_(Ps)>3?"":" "}function wae(e,t){for(;--t&&Mc()&&!(Ps<48||Ps>102||Ps>57&&Ps<65||Ps>70&&Ps<97););return V_(e,Z1()+(t<6&&_h()==32&&Mc()==32))}function t5(e){for(;Mc();)switch(Ps){case e:return Ol;case 34:case 39:e!==34&&e!==39&&t5(Ps);break;case 40:e===41&&t5(e);break;case 92:Mc();break}return Ol}function Sae(e,t){for(;Mc()&&e+Ps!==57;)if(e+Ps===84&&_h()===47)break;return"/*"+V_(t,Ol-1)+"*"+_2(e===47?e:Mc())}function Tae(e){for(;!b_(_h());)Mc();return V_(e,Ol)}function Eae(e){return Pj(Y1("",null,null,null,[""],e=Dj(e),0,[0],e))}function Y1(e,t,i,c,h,_,w,a,A){for(var B=0,N=0,F=w,G=0,Q=0,te=0,Y=1,oe=1,de=1,me=0,be="",pe=h,Se=_,$e=c,Le=be;oe;)switch(te=me,me=Mc()){case 40:if(te!=108&&_o(Le,F-1)==58){e5(Le+=Ua(X1(me),"&","&\f"),"&\f")!=-1&&(de=-1);break}case 34:case 39:case 91:Le+=X1(me);break;case 9:case 10:case 13:case 32:Le+=bae(te);break;case 92:Le+=wae(Z1()-1,7);continue;case 47:switch(_h()){case 42:case 47:z1(Cae(Sae(Mc(),Z1()),t,i),A);break;default:Le+="/"}break;case 123*Y:a[B++]=ph(Le)*de;case 125*Y:case 59:case 0:switch(me){case 0:case 125:oe=0;case 59+N:de==-1&&(Le=Ua(Le,/\f/g,"")),Q>0&&ph(Le)-F&&z1(Q>32?lA(Le+";",c,i,F-1):lA(Ua(Le," ","")+";",c,i,F-2),A);break;case 59:Le+=";";default:if(z1($e=oA(Le,t,i,B,N,h,a,be,pe=[],Se=[],F),_),me===123)if(N===0)Y1(Le,t,$e,$e,pe,_,F,a,Se);else switch(G===99&&_o(Le,3)===110?100:G){case 100:case 108:case 109:case 115:Y1(e,$e,$e,c&&z1(oA(e,$e,$e,0,0,h,a,be,h,pe=[],F),Se),h,Se,F,a,c?pe:Se);break;default:Y1(Le,$e,$e,$e,[""],Se,0,a,Se)}}B=N=Q=0,Y=de=1,be=Le="",F=w;break;case 58:F=1+ph(Le),Q=te;default:if(Y<1){if(me==123)--Y;else if(me==125&&Y++==0&&_ae()==125)continue}switch(Le+=_2(me),me*Y){case 38:de=N>0?1:(Le+="\f",-1);break;case 44:a[B++]=(ph(Le)-1)*de,de=1;break;case 64:_h()===45&&(Le+=X1(Mc())),G=_h(),N=F=ph(be=Le+=Tae(Z1())),me++;break;case 45:te===45&&ph(Le)==2&&(Y=0)}}return _}function oA(e,t,i,c,h,_,w,a,A,B,N){for(var F=h-1,G=h===0?_:[""],Q=FT(G),te=0,Y=0,oe=0;te<c;++te)for(var de=0,me=__(e,F+1,F=pae(Y=w[te])),be=e;de<Q;++de)(be=Ej(Y>0?G[de]+" "+me:Ua(me,/&\f/g,G[de])))&&(A[oe++]=be);return w2(e,t,i,h===0?jT:a,A,B,N)}function Cae(e,t,i){return w2(e,t,i,Sj,_2(vae()),__(e,2,-2),0)}function lA(e,t,i,c){return w2(e,t,i,OT,__(e,0,c),__(e,c+1,-1),c)}function Zy(e,t){for(var i="",c=FT(e),h=0;h<c;h++)i+=t(e[h],h,e,t)||"";return i}function Dae(e,t,i,c){switch(e.type){case fae:if(e.children.length)break;case hae:case OT:return e.return=e.return||e.value;case Sj:return"";case Tj:return e.return=e.value+"{"+Zy(e.children,c)+"}";case jT:e.value=e.props.join(",")}return ph(i=Zy(e.children,c))?e.return=e.value+"{"+i+"}":""}function Pae(e){var t=FT(e);return function(i,c,h,_){for(var w="",a=0;a<t;a++)w+=e[a](i,c,h,_)||"";return w}}function Mae(e){return function(t){t.root||(t=t.return)&&e(t)}}function Mj(e){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=e(i)),t[i]}}var Aae=function(t,i,c){for(var h=0,_=0;h=_,_=_h(),h===38&&_===12&&(i[c]=1),!b_(_);)Mc();return V_(t,Ol)},kae=function(t,i){var c=-1,h=44;do switch(b_(h)){case 0:h===38&&_h()===12&&(i[c]=1),t[c]+=Aae(Ol-1,i,c);break;case 2:t[c]+=X1(h);break;case 4:if(h===44){t[++c]=_h()===58?"&\f":"",i[c]=t[c].length;break}default:t[c]+=_2(h)}while(h=Mc());return t},Rae=function(t,i){return Pj(kae(Dj(t),i))},cA=new WeakMap,Iae=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,c=t.parent,h=t.column===c.column&&t.line===c.line;c.type!=="rule";)if(c=c.parent,!c)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!cA.get(c))&&!h){cA.set(t,!0);for(var _=[],w=Rae(i,_),a=c.props,A=0,B=0;A<w.length;A++)for(var N=0;N<a.length;N++,B++)t.props[B]=_[A]?w[A].replace(/&\f/g,a[N]):a[N]+" "+w[A]}}},zae=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function Aj(e,t){switch(gae(e,t)){case 5103:return Fa+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Fa+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Fa+e+Rw+e+Uo+e+e;case 6828:case 4268:return Fa+e+Uo+e+e;case 6165:return Fa+e+Uo+"flex-"+e+e;case 5187:return Fa+e+Ua(e,/(\w+).+(:[^]+)/,Fa+"box-$1$2"+Uo+"flex-$1$2")+e;case 5443:return Fa+e+Uo+"flex-item-"+Ua(e,/flex-|-self/,"")+e;case 4675:return Fa+e+Uo+"flex-line-pack"+Ua(e,/align-content|flex-|-self/,"")+e;case 5548:return Fa+e+Uo+Ua(e,"shrink","negative")+e;case 5292:return Fa+e+Uo+Ua(e,"basis","preferred-size")+e;case 6060:return Fa+"box-"+Ua(e,"-grow","")+Fa+e+Uo+Ua(e,"grow","positive")+e;case 4554:return Fa+Ua(e,/([^-])(transform)/g,"$1"+Fa+"$2")+e;case 6187:return Ua(Ua(Ua(e,/(zoom-|grab)/,Fa+"$1"),/(image-set)/,Fa+"$1"),e,"")+e;case 5495:case 3959:return Ua(e,/(image-set\([^]*)/,Fa+"$1$`$1");case 4968:return Ua(Ua(e,/(.+:)(flex-)?(.*)/,Fa+"box-pack:$3"+Uo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Fa+e+e;case 4095:case 3583:case 4068:case 2532:return Ua(e,/(.+)-inline(.+)/,Fa+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ph(e)-1-t>6)switch(_o(e,t+1)){case 109:if(_o(e,t+4)!==45)break;case 102:return Ua(e,/(.+:)(.+)-([^]+)/,"$1"+Fa+"$2-$3$1"+Rw+(_o(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~e5(e,"stretch")?Aj(Ua(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(_o(e,t+1)!==115)break;case 6444:switch(_o(e,ph(e)-3-(~e5(e,"!important")&&10))){case 107:return Ua(e,":",":"+Fa)+e;case 101:return Ua(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Fa+(_o(e,14)===45?"inline-":"")+"box$3$1"+Fa+"$2$3$1"+Uo+"$2box$3")+e}break;case 5936:switch(_o(e,t+11)){case 114:return Fa+e+Uo+Ua(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Fa+e+Uo+Ua(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Fa+e+Uo+Ua(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Fa+e+Uo+e+e}return e}var Lae=function(t,i,c,h){if(t.length>-1&&!t.return)switch(t.type){case OT:t.return=Aj(t.value,t.length);break;case Tj:return Zy([Lv(t,{value:Ua(t.value,"@","@"+Fa)})],h);case jT:if(t.length)return xae(t.props,function(_){switch(yae(_,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Zy([Lv(t,{props:[Ua(_,/:(read-\w+)/,":"+Rw+"$1")]})],h);case"::placeholder":return Zy([Lv(t,{props:[Ua(_,/:(plac\w+)/,":"+Fa+"input-$1")]}),Lv(t,{props:[Ua(_,/:(plac\w+)/,":"+Rw+"$1")]}),Lv(t,{props:[Ua(_,/:(plac\w+)/,Uo+"input-$1")]})],h)}return""})}},$ae=[Lae],Bae=function(t){var i=t.key;if(i==="css"){var c=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(c,function(Y){var oe=Y.getAttribute("data-emotion");oe.indexOf(" ")!==-1&&(document.head.appendChild(Y),Y.setAttribute("data-s",""))})}var h=t.stylisPlugins||$ae,_={},w,a=[];w=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(Y){for(var oe=Y.getAttribute("data-emotion").split(" "),de=1;de<oe.length;de++)_[oe[de]]=!0;a.push(Y)});var A,B=[Iae,zae];{var N,F=[Dae,Mae(function(Y){N.insert(Y)})],G=Pae(B.concat(h,F)),Q=function(oe){return Zy(Eae(oe),G)};A=function(oe,de,me,be){N=me,Q(oe?oe+"{"+de.styles+"}":de.styles),be&&(te.inserted[de.name]=!0)}}var te={key:i,sheet:new dae({key:i,container:w,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:_,registered:{},insert:A};return te.sheet.hydrate(a),te},Nae=!0;function jae(e,t,i){var c="";return i.split(" ").forEach(function(h){e[h]!==void 0?t.push(e[h]+";"):h&&(c+=h+" ")}),c}var kj=function(t,i,c){var h=t.key+"-"+i.name;(c===!1||Nae===!1)&&t.registered[h]===void 0&&(t.registered[h]=i.styles)},Oae=function(t,i,c){kj(t,i,c);var h=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var _=i;do t.insert(i===_?"."+h:"",_,t.sheet,!0),_=_.next;while(_!==void 0)}};function Fae(e){for(var t=0,i,c=0,h=e.length;h>=4;++c,h-=4)i=e.charCodeAt(c)&255|(e.charCodeAt(++c)&255)<<8|(e.charCodeAt(++c)&255)<<16|(e.charCodeAt(++c)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(h){case 3:t^=(e.charCodeAt(c+2)&255)<<16;case 2:t^=(e.charCodeAt(c+1)&255)<<8;case 1:t^=e.charCodeAt(c)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Vae={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Uae=/[A-Z]|^ms/g,Gae=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Rj=function(t){return t.charCodeAt(1)===45},uA=function(t){return t!=null&&typeof t!="boolean"},I4=Mj(function(e){return Rj(e)?e:e.replace(Uae,"-$&").toLowerCase()}),dA=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace(Gae,function(c,h,_){return mh={name:h,styles:_,next:mh},h})}return Vae[t]!==1&&!Rj(t)&&typeof i=="number"&&i!==0?i+"px":i};function w_(e,t,i){if(i==null)return"";var c=i;if(c.__emotion_styles!==void 0)return c;switch(typeof i){case"boolean":return"";case"object":{var h=i;if(h.anim===1)return mh={name:h.name,styles:h.styles,next:mh},h.name;var _=i;if(_.styles!==void 0){var w=_.next;if(w!==void 0)for(;w!==void 0;)mh={name:w.name,styles:w.styles,next:mh},w=w.next;var a=_.styles+";";return a}return Hae(e,t,i)}case"function":{if(e!==void 0){var A=mh,B=i(e);return mh=A,w_(e,t,B)}break}}var N=i;if(t==null)return N;var F=t[N];return F!==void 0?F:N}function Hae(e,t,i){var c="";if(Array.isArray(i))for(var h=0;h<i.length;h++)c+=w_(e,t,i[h])+";";else for(var _ in i){var w=i[_];if(typeof w!="object"){var a=w;t!=null&&t[a]!==void 0?c+=_+"{"+t[a]+"}":uA(a)&&(c+=I4(_)+":"+dA(_,a)+";")}else if(Array.isArray(w)&&typeof w[0]=="string"&&(t==null||t[w[0]]===void 0))for(var A=0;A<w.length;A++)uA(w[A])&&(c+=I4(_)+":"+dA(_,w[A])+";");else{var B=w_(e,t,w);switch(_){case"animation":case"animationName":{c+=I4(_)+":"+B+";";break}default:c+=_+"{"+B+"}"}}}return c}var hA=/label:\s*([^\s;{]+)\s*(;|$)/g,mh;function Ij(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var c=!0,h="";mh=void 0;var _=e[0];if(_==null||_.raw===void 0)c=!1,h+=w_(i,t,_);else{var w=_;h+=w[0]}for(var a=1;a<e.length;a++)if(h+=w_(i,t,e[a]),c){var A=_;h+=A[a]}hA.lastIndex=0;for(var B="",N;(N=hA.exec(h))!==null;)B+="-"+N[1];var F=Fae(h)+B;return{name:F,styles:h,next:mh}}var qae=function(t){return t()},Wae=G4.useInsertionEffect?G4.useInsertionEffect:!1,Kae=Wae||qae,zj=V.createContext(typeof HTMLElement<"u"?Bae({key:"css"}):null);zj.Provider;var Zae=function(t){return V.forwardRef(function(i,c){var h=V.useContext(zj);return t(i,h,c)})},Xae=V.createContext({}),Yae=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Jae=Mj(function(e){return Yae.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Qae=Jae,eie=function(t){return t!=="theme"},fA=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Qae:eie},pA=function(t,i,c){var h;if(i){var _=i.shouldForwardProp;h=t.__emotion_forwardProp&&_?function(w){return t.__emotion_forwardProp(w)&&_(w)}:_}return typeof h!="function"&&c&&(h=t.__emotion_forwardProp),h},tie=function(t){var i=t.cache,c=t.serialized,h=t.isStringTag;return kj(i,c,h),Kae(function(){return Oae(i,c,h)}),null},rie=function e(t,i){var c=t.__emotion_real===t,h=c&&t.__emotion_base||t,_,w;i!==void 0&&(_=i.label,w=i.target);var a=pA(t,i,c),A=a||fA(h),B=!A("as");return function(){var N=arguments,F=c&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(_!==void 0&&F.push("label:"+_+";"),N[0]==null||N[0].raw===void 0)F.push.apply(F,N);else{var G=N[0];F.push(G[0]);for(var Q=N.length,te=1;te<Q;te++)F.push(N[te],G[te])}var Y=Zae(function(oe,de,me){var be=B&&oe.as||h,pe="",Se=[],$e=oe;if(oe.theme==null){$e={};for(var Le in oe)$e[Le]=oe[Le];$e.theme=V.useContext(Xae)}typeof oe.className=="string"?pe=jae(de.registered,Se,oe.className):oe.className!=null&&(pe=oe.className+" ");var re=Ij(F.concat(Se),de.registered,$e);pe+=de.key+"-"+re.name,w!==void 0&&(pe+=" "+w);var Ee=B&&a===void 0?fA(be):A,se={};for(var ue in oe)B&&ue==="as"||Ee(ue)&&(se[ue]=oe[ue]);return se.className=pe,me&&(se.ref=me),V.createElement(V.Fragment,null,V.createElement(tie,{cache:de,serialized:re,isStringTag:typeof be=="string"}),V.createElement(be,se))});return Y.displayName=_!==void 0?_:"Styled("+(typeof h=="string"?h:h.displayName||h.name||"Component")+")",Y.defaultProps=t.defaultProps,Y.__emotion_real=Y,Y.__emotion_base=h,Y.__emotion_styles=F,Y.__emotion_forwardProp=a,Object.defineProperty(Y,"toString",{value:function(){return"."+w}}),Y.withComponent=function(oe,de){var me=e(oe,Pw({},i,de,{shouldForwardProp:pA(Y,de,!0)}));return me.apply(void 0,F)},Y}},nie=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],r5=rie.bind(null);nie.forEach(function(e){r5[e]=r5(e)});/**
 * @mui/styled-engine v6.4.2
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function aie(e,t){return r5(e,t)}function iie(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const mA=[];function gA(e){return mA[0]=e,Ij(mA)}const sie=e=>{const t=Object.keys(e).map(i=>({key:i,val:e[i]}))||[];return t.sort((i,c)=>i.val-c.val),t.reduce((i,c)=>({...i,[c.key]:c.val}),{})};function oie(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:c=5,...h}=e,_=sie(t),w=Object.keys(_);function a(G){return`@media (min-width:${typeof t[G]=="number"?t[G]:G}${i})`}function A(G){return`@media (max-width:${(typeof t[G]=="number"?t[G]:G)-c/100}${i})`}function B(G,Q){const te=w.indexOf(Q);return`@media (min-width:${typeof t[G]=="number"?t[G]:G}${i}) and (max-width:${(te!==-1&&typeof t[w[te]]=="number"?t[w[te]]:Q)-c/100}${i})`}function N(G){return w.indexOf(G)+1<w.length?B(G,w[w.indexOf(G)+1]):a(G)}function F(G){const Q=w.indexOf(G);return Q===0?a(w[1]):Q===w.length-1?A(w[Q]):B(G,w[w.indexOf(G)+1]).replace("@media","@media not all and")}return{keys:w,values:_,up:a,down:A,between:B,only:N,not:F,unit:i,...h}}const lie={borderRadius:4};function Lj(e=8,t=BT({spacing:e})){if(e.mui)return e;const i=(...c)=>(c.length===0?[1]:c).map(_=>{const w=t(_);return typeof w=="number"?`${w}px`:w}).join(" ");return i.mui=!0,i}function cie(e,t){var c;const i=this;if(i.vars){if(!((c=i.colorSchemes)!=null&&c[e])||typeof i.getColorSchemeSelector!="function")return{};let h=i.getColorSchemeSelector(e);return h==="&"?t:((h.includes("data-")||h.includes("."))&&(h=`*:where(${h.replace(/\s*&$/,"")}) &`),{[h]:t})}return i.palette.mode===e?t:{}}function $j(e={},...t){const{breakpoints:i={},palette:c={},spacing:h,shape:_={},...w}=e,a=oie(i),A=Lj(h);let B=Pc({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...c},spacing:A,shape:{...lie,..._}},w);return B=_ne(B),B.applyStyles=cie,B=t.reduce((N,F)=>Pc(N,F),B),B.unstable_sxConfig={...v2,...w==null?void 0:w.unstable_sxConfig},B.unstable_sx=function(F){return ox({sx:F,theme:this})},B}function Bj(e){const{variants:t,...i}=e,c={variants:t,style:gA(i),isProcessed:!0};return c.style===i||t&&t.forEach(h=>{typeof h.style!="function"&&(h.style=gA(h.style))}),c}const uie=$j();function z4(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function die(e){return e?(t,i)=>i[e]:null}function hie(e,t,i){e.theme=mie(e.theme)?i:e.theme[t]||e.theme}function J1(e,t){const i=typeof t=="function"?t(e):t;if(Array.isArray(i))return i.flatMap(c=>J1(e,c));if(Array.isArray(i==null?void 0:i.variants)){let c;if(i.isProcessed)c=i.style;else{const{variants:h,..._}=i;c=_}return Nj(e,i.variants,[c])}return i!=null&&i.isProcessed?i.style:i}function Nj(e,t,i=[]){var h;let c;e:for(let _=0;_<t.length;_+=1){const w=t[_];if(typeof w.props=="function"){if(c??(c={...e,...e.ownerState,ownerState:e.ownerState}),!w.props(c))continue}else for(const a in w.props)if(e[a]!==w.props[a]&&((h=e.ownerState)==null?void 0:h[a])!==w.props[a])continue e;typeof w.style=="function"?(c??(c={...e,...e.ownerState,ownerState:e.ownerState}),i.push(w.style(c))):i.push(w.style)}return i}function fie(e={}){const{themeId:t,defaultTheme:i=uie,rootShouldForwardProp:c=z4,slotShouldForwardProp:h=z4}=e;function _(a){hie(a,t,i)}return(a,A={})=>{iie(a,Se=>Se.filter($e=>$e!==ox));const{name:B,slot:N,skipVariantsResolver:F,skipSx:G,overridesResolver:Q=die(yie(N)),...te}=A,Y=F!==void 0?F:N&&N!=="Root"&&N!=="root"||!1,oe=G||!1;let de=z4;N==="Root"||N==="root"?de=c:N?de=h:gie(a)&&(de=void 0);const me=aie(a,{shouldForwardProp:de,label:pie(),...te}),be=Se=>{if(typeof Se=="function"&&Se.__emotion_real!==Se)return function(Le){return J1(Le,Se)};if(Af(Se)){const $e=Bj(Se);return $e.variants?function(re){return J1(re,$e)}:$e.style}return Se},pe=(...Se)=>{const $e=[],Le=Se.map(be),re=[];if($e.push(_),B&&Q&&re.push(function(ke){var Te,Ie;const Pe=(Ie=(Te=ke.theme.components)==null?void 0:Te[B])==null?void 0:Ie.styleOverrides;if(!Pe)return null;const xe={};for(const Me in Pe)xe[Me]=J1(ke,Pe[Me]);return Q(ke,xe)}),B&&!Y&&re.push(function(ke){var xe,Te;const ce=ke.theme,Pe=(Te=(xe=ce==null?void 0:ce.components)==null?void 0:xe[B])==null?void 0:Te.variants;return Pe?Nj(ke,Pe):null}),oe||re.push(ox),Array.isArray(Le[0])){const ue=Le.shift(),ke=new Array($e.length).fill(""),ce=new Array(re.length).fill("");let Pe;Pe=[...ke,...ue,...ce],Pe.raw=[...ke,...ue.raw,...ce],$e.unshift(Pe)}const Ee=[...$e,...Le,...re],se=me(...Ee);return a.muiName&&(se.muiName=a.muiName),se};return me.withConfig&&(pe.withConfig=me.withConfig),pe}}function pie(e,t){return void 0}function mie(e){for(const t in e)return!1;return!0}function gie(e){return typeof e=="string"&&e.charCodeAt(0)>96}function yie(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function VT(e,t=0,i=1){return mne(e,t,i)}function xie(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let i=e.match(t);return i&&i[0].length===1&&(i=i.map(c=>c+c)),i?`rgb${i.length===4?"a":""}(${i.map((c,h)=>h<3?parseInt(c,16):Math.round(parseInt(c,16)/255*1e3)/1e3).join(", ")})`:""}function Cm(e){if(e.type)return e;if(e.charAt(0)==="#")return Cm(xie(e));const t=e.indexOf("("),i=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(i))throw new Error(i0(9,e));let c=e.substring(t+1,e.length-1),h;if(i==="color"){if(c=c.split(" "),h=c.shift(),c.length===4&&c[3].charAt(0)==="/"&&(c[3]=c[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(h))throw new Error(i0(10,h))}else c=c.split(",");return c=c.map(_=>parseFloat(_)),{type:i,values:c,colorSpace:h}}const vie=e=>{const t=Cm(e);return t.values.slice(0,3).map((i,c)=>t.type.includes("hsl")&&c!==0?`${i}%`:i).join(" ")},Hv=(e,t)=>{try{return vie(e)}catch{return e}};function S2(e){const{type:t,colorSpace:i}=e;let{values:c}=e;return t.includes("rgb")?c=c.map((h,_)=>_<3?parseInt(h,10):h):t.includes("hsl")&&(c[1]=`${c[1]}%`,c[2]=`${c[2]}%`),t.includes("color")?c=`${i} ${c.join(" ")}`:c=`${c.join(", ")}`,`${t}(${c})`}function jj(e){e=Cm(e);const{values:t}=e,i=t[0],c=t[1]/100,h=t[2]/100,_=c*Math.min(h,1-h),w=(B,N=(B+i/30)%12)=>h-_*Math.max(Math.min(N-3,9-N,1),-1);let a="rgb";const A=[Math.round(w(0)*255),Math.round(w(8)*255),Math.round(w(4)*255)];return e.type==="hsla"&&(a+="a",A.push(t[3])),S2({type:a,values:A})}function n5(e){e=Cm(e);let t=e.type==="hsl"||e.type==="hsla"?Cm(jj(e)).values:e.values;return t=t.map(i=>(e.type!=="color"&&(i/=255),i<=.03928?i/12.92:((i+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function _ie(e,t){const i=n5(e),c=n5(t);return(Math.max(i,c)+.05)/(Math.min(i,c)+.05)}function bie(e,t){return e=Cm(e),t=VT(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,S2(e)}function L1(e,t,i){try{return bie(e,t)}catch{return e}}function UT(e,t){if(e=Cm(e),t=VT(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let i=0;i<3;i+=1)e.values[i]*=1-t;return S2(e)}function ui(e,t,i){try{return UT(e,t)}catch{return e}}function GT(e,t){if(e=Cm(e),t=VT(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;else if(e.type.includes("color"))for(let i=0;i<3;i+=1)e.values[i]+=(1-e.values[i])*t;return S2(e)}function di(e,t,i){try{return GT(e,t)}catch{return e}}function wie(e,t=.15){return n5(e)>.5?UT(e,t):GT(e,t)}function $1(e,t,i){try{return wie(e,t)}catch{return e}}const Sie=V.createContext(void 0);function Tie(e){const{theme:t,name:i,props:c}=e;if(!t||!t.components||!t.components[i])return c;const h=t.components[i];return h.defaultProps?QS(h.defaultProps,c):!h.styleOverrides&&!h.variants?QS(h,c):c}function Eie({props:e,name:t}){const i=V.useContext(Sie);return Tie({props:e,name:t,theme:{components:i}})}const yA={theme:void 0};function Cie(e){let t,i;return function(h){let _=t;return(_===void 0||h.theme!==i)&&(yA.theme=h.theme,_=Bj(e(yA)),t=_,i=h.theme),_}}function Die(e=""){function t(...c){if(!c.length)return"";const h=c[0];return typeof h=="string"&&!h.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${h}${t(...c.slice(1))})`:`, ${h}`}return(c,...h)=>`var(--${e?`${e}-`:""}${c}${t(...h)})`}const xA=(e,t,i,c=[])=>{let h=e;t.forEach((_,w)=>{w===t.length-1?Array.isArray(h)?h[Number(_)]=i:h&&typeof h=="object"&&(h[_]=i):h&&typeof h=="object"&&(h[_]||(h[_]=c.includes(_)?[]:{}),h=h[_])})},Pie=(e,t,i)=>{function c(h,_=[],w=[]){Object.entries(h).forEach(([a,A])=>{(!i||i&&!i([..._,a]))&&A!=null&&(typeof A=="object"&&Object.keys(A).length>0?c(A,[..._,a],Array.isArray(A)?[...w,a]:w):t([..._,a],A,w))})}c(e)},Mie=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(c=>e.includes(c))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function L4(e,t){const{prefix:i,shouldSkipGeneratingVar:c}=t||{},h={},_={},w={};return Pie(e,(a,A,B)=>{if((typeof A=="string"||typeof A=="number")&&(!c||!c(a,A))){const N=`--${i?`${i}-`:""}${a.join("-")}`,F=Mie(a,A);Object.assign(h,{[N]:F}),xA(_,a,`var(${N})`,B),xA(w,a,`var(${N}, ${F})`,B)}},a=>a[0]==="vars"),{css:h,vars:_,varsWithDefaults:w}}function Aie(e,t={}){const{getSelector:i=oe,disableCssColorScheme:c,colorSchemeSelector:h}=t,{colorSchemes:_={},components:w,defaultColorScheme:a="light",...A}=e,{vars:B,css:N,varsWithDefaults:F}=L4(A,t);let G=F;const Q={},{[a]:te,...Y}=_;if(Object.entries(Y||{}).forEach(([be,pe])=>{const{vars:Se,css:$e,varsWithDefaults:Le}=L4(pe,t);G=Pc(G,Le),Q[be]={css:$e,vars:Se}}),te){const{css:be,vars:pe,varsWithDefaults:Se}=L4(te,t);G=Pc(G,Se),Q[a]={css:be,vars:pe}}function oe(be,pe){var $e,Le;let Se=h;if(h==="class"&&(Se=".%s"),h==="data"&&(Se="[data-%s]"),h!=null&&h.startsWith("data-")&&!h.includes("%s")&&(Se=`[${h}="%s"]`),be){if(Se==="media")return e.defaultColorScheme===be?":root":{[`@media (prefers-color-scheme: ${((Le=($e=_[be])==null?void 0:$e.palette)==null?void 0:Le.mode)||be})`]:{":root":pe}};if(Se)return e.defaultColorScheme===be?`:root, ${Se.replace("%s",String(be))}`:Se.replace("%s",String(be))}return":root"}return{vars:G,generateThemeVars:()=>{let be={...B};return Object.entries(Q).forEach(([,{vars:pe}])=>{be=Pc(be,pe)}),be},generateStyleSheets:()=>{var re,Ee;const be=[],pe=e.defaultColorScheme||"light";function Se(se,ue){Object.keys(ue).length&&be.push(typeof se=="string"?{[se]:{...ue}}:se)}Se(i(void 0,{...N}),N);const{[pe]:$e,...Le}=Q;if($e){const{css:se}=$e,ue=(Ee=(re=_[pe])==null?void 0:re.palette)==null?void 0:Ee.mode,ke=!c&&ue?{colorScheme:ue,...se}:{...se};Se(i(pe,{...ke}),ke)}return Object.entries(Le).forEach(([se,{css:ue}])=>{var Pe,xe;const ke=(xe=(Pe=_[se])==null?void 0:Pe.palette)==null?void 0:xe.mode,ce=!c&&ke?{colorScheme:ke,...ue}:{...ue};Se(i(se,{...ce}),ce)}),be}}}function kie(e){return function(i){return e==="media"?`@media (prefers-color-scheme: ${i})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${i}"] &`:e==="class"?`.${i} &`:e==="data"?`[data-${i}] &`:`${e.replace("%s",i)} &`:"&"}}const S_={black:"#000",white:"#fff"},Rie={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Sy={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Ty={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},$v={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Ey={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Cy={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Dy={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function Oj(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:S_.white,default:S_.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Iie=Oj();function Fj(){return{text:{primary:S_.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:S_.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const vA=Fj();function _A(e,t,i,c){const h=c.light||c,_=c.dark||c*1.5;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:t==="light"?e.light=GT(e.main,h):t==="dark"&&(e.dark=UT(e.main,_)))}function zie(e="light"){return e==="dark"?{main:Ey[200],light:Ey[50],dark:Ey[400]}:{main:Ey[700],light:Ey[400],dark:Ey[800]}}function Lie(e="light"){return e==="dark"?{main:Sy[200],light:Sy[50],dark:Sy[400]}:{main:Sy[500],light:Sy[300],dark:Sy[700]}}function $ie(e="light"){return e==="dark"?{main:Ty[500],light:Ty[300],dark:Ty[700]}:{main:Ty[700],light:Ty[400],dark:Ty[800]}}function Bie(e="light"){return e==="dark"?{main:Cy[400],light:Cy[300],dark:Cy[700]}:{main:Cy[700],light:Cy[500],dark:Cy[900]}}function Nie(e="light"){return e==="dark"?{main:Dy[400],light:Dy[300],dark:Dy[700]}:{main:Dy[800],light:Dy[500],dark:Dy[900]}}function jie(e="light"){return e==="dark"?{main:$v[400],light:$v[300],dark:$v[700]}:{main:"#ed6c02",light:$v[500],dark:$v[900]}}function HT(e){const{mode:t="light",contrastThreshold:i=3,tonalOffset:c=.2,...h}=e,_=e.primary||zie(t),w=e.secondary||Lie(t),a=e.error||$ie(t),A=e.info||Bie(t),B=e.success||Nie(t),N=e.warning||jie(t);function F(Y){return _ie(Y,vA.text.primary)>=i?vA.text.primary:Iie.text.primary}const G=({color:Y,name:oe,mainShade:de=500,lightShade:me=300,darkShade:be=700})=>{if(Y={...Y},!Y.main&&Y[de]&&(Y.main=Y[de]),!Y.hasOwnProperty("main"))throw new Error(i0(11,oe?` (${oe})`:"",de));if(typeof Y.main!="string")throw new Error(i0(12,oe?` (${oe})`:"",JSON.stringify(Y.main)));return _A(Y,"light",me,c),_A(Y,"dark",be,c),Y.contrastText||(Y.contrastText=F(Y.main)),Y};let Q;return t==="light"?Q=Oj():t==="dark"&&(Q=Fj()),Pc({common:{...S_},mode:t,primary:G({color:_,name:"primary"}),secondary:G({color:w,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:G({color:a,name:"error"}),warning:G({color:N,name:"warning"}),info:G({color:A,name:"info"}),success:G({color:B,name:"success"}),grey:Rie,contrastThreshold:i,getContrastText:F,augmentColor:G,tonalOffset:c,...Q},h)}function Oie(e){const t={};return Object.entries(e).forEach(c=>{const[h,_]=c;typeof _=="object"&&(t[h]=`${_.fontStyle?`${_.fontStyle} `:""}${_.fontVariant?`${_.fontVariant} `:""}${_.fontWeight?`${_.fontWeight} `:""}${_.fontStretch?`${_.fontStretch} `:""}${_.fontSize||""}${_.lineHeight?`/${_.lineHeight} `:""}${_.fontFamily||""}`)}),t}function Fie(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function Vie(e){return Math.round(e*1e5)/1e5}const bA={textTransform:"uppercase"},wA='"Roboto", "Helvetica", "Arial", sans-serif';function Uie(e,t){const{fontFamily:i=wA,fontSize:c=14,fontWeightLight:h=300,fontWeightRegular:_=400,fontWeightMedium:w=500,fontWeightBold:a=700,htmlFontSize:A=16,allVariants:B,pxToRem:N,...F}=typeof t=="function"?t(e):t,G=c/14,Q=N||(oe=>`${oe/A*G}rem`),te=(oe,de,me,be,pe)=>({fontFamily:i,fontWeight:oe,fontSize:Q(de),lineHeight:me,...i===wA?{letterSpacing:`${Vie(be/de)}em`}:{},...pe,...B}),Y={h1:te(h,96,1.167,-1.5),h2:te(h,60,1.2,-.5),h3:te(_,48,1.167,0),h4:te(_,34,1.235,.25),h5:te(_,24,1.334,0),h6:te(w,20,1.6,.15),subtitle1:te(_,16,1.75,.15),subtitle2:te(w,14,1.57,.1),body1:te(_,16,1.5,.15),body2:te(_,14,1.43,.15),button:te(w,14,1.75,.4,bA),caption:te(_,12,1.66,.4),overline:te(_,12,2.66,1,bA),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Pc({htmlFontSize:A,pxToRem:Q,fontFamily:i,fontSize:c,fontWeightLight:h,fontWeightRegular:_,fontWeightMedium:w,fontWeightBold:a,...Y},F,{clone:!1})}const Gie=.2,Hie=.14,qie=.12;function $i(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Gie})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Hie})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${qie})`].join(",")}const Wie=["none",$i(0,2,1,-1,0,1,1,0,0,1,3,0),$i(0,3,1,-2,0,2,2,0,0,1,5,0),$i(0,3,3,-2,0,3,4,0,0,1,8,0),$i(0,2,4,-1,0,4,5,0,0,1,10,0),$i(0,3,5,-1,0,5,8,0,0,1,14,0),$i(0,3,5,-1,0,6,10,0,0,1,18,0),$i(0,4,5,-2,0,7,10,1,0,2,16,1),$i(0,5,5,-3,0,8,10,1,0,3,14,2),$i(0,5,6,-3,0,9,12,1,0,3,16,2),$i(0,6,6,-3,0,10,14,1,0,4,18,3),$i(0,6,7,-4,0,11,15,1,0,4,20,3),$i(0,7,8,-4,0,12,17,2,0,5,22,4),$i(0,7,8,-4,0,13,19,2,0,5,24,4),$i(0,7,9,-4,0,14,21,2,0,5,26,4),$i(0,8,9,-5,0,15,22,2,0,6,28,5),$i(0,8,10,-5,0,16,24,2,0,6,30,5),$i(0,8,11,-5,0,17,26,2,0,6,32,5),$i(0,9,11,-5,0,18,28,2,0,7,34,6),$i(0,9,12,-6,0,19,29,2,0,7,36,6),$i(0,10,13,-6,0,20,31,3,0,8,38,7),$i(0,10,13,-6,0,21,33,3,0,8,40,7),$i(0,10,14,-6,0,22,35,3,0,8,42,7),$i(0,11,14,-7,0,23,36,3,0,9,44,8),$i(0,11,15,-7,0,24,38,3,0,9,46,8)],Kie={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Zie={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function SA(e){return`${Math.round(e)}ms`}function Xie(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function Yie(e){const t={...Kie,...e.easing},i={...Zie,...e.duration};return{getAutoHeightDuration:Xie,create:(h=["all"],_={})=>{const{duration:w=i.standard,easing:a=t.easeInOut,delay:A=0,...B}=_;return(Array.isArray(h)?h:[h]).map(N=>`${N} ${typeof w=="string"?w:SA(w)} ${a} ${typeof A=="string"?A:SA(A)}`).join(",")},...e,easing:t,duration:i}}const Jie={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Qie(e){return Af(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function Vj(e={}){const t={...e};function i(c){const h=Object.entries(c);for(let _=0;_<h.length;_++){const[w,a]=h[_];!Qie(a)||w.startsWith("unstable_")?delete c[w]:Af(a)&&(c[w]={...a},i(c[w]))}}return i(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function a5(e={},...t){const{breakpoints:i,mixins:c={},spacing:h,palette:_={},transitions:w={},typography:a={},shape:A,...B}=e;if(e.vars)throw new Error(i0(20));const N=HT(_),F=$j(e);let G=Pc(F,{mixins:Fie(F.breakpoints,c),palette:N,shadows:Wie.slice(),typography:Uie(N,a),transitions:Yie(w),zIndex:{...Jie}});return G=Pc(G,B),G=t.reduce((Q,te)=>Pc(Q,te),G),G.unstable_sxConfig={...v2,...B==null?void 0:B.unstable_sxConfig},G.unstable_sx=function(te){return ox({sx:te,theme:this})},G.toRuntimeSource=Vj,G}function ese(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const tse=[...Array(25)].map((e,t)=>{if(t===0)return"none";const i=ese(t);return`linear-gradient(rgba(255 255 255 / ${i}), rgba(255 255 255 / ${i}))`});function Uj(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function Gj(e){return e==="dark"?tse:[]}function rse(e){const{palette:t={mode:"light"},opacity:i,overlays:c,...h}=e,_=HT(t);return{palette:_,opacity:{...Uj(_.mode),...i},overlays:c||Gj(_.mode),...h}}function nse(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const ase=e=>[...[...Array(25)].map((t,i)=>`--${e?`${e}-`:""}overlays-${i}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],ise=e=>(t,i)=>{const c=e.rootSelector||":root",h=e.colorSchemeSelector;let _=h;if(h==="class"&&(_=".%s"),h==="data"&&(_="[data-%s]"),h!=null&&h.startsWith("data-")&&!h.includes("%s")&&(_=`[${h}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const w={};return ase(e.cssVarPrefix).forEach(a=>{w[a]=i[a],delete i[a]}),_==="media"?{[c]:i,"@media (prefers-color-scheme: dark)":{[c]:w}}:_?{[_.replace("%s",t)]:w,[`${c}, ${_.replace("%s",t)}`]:i}:{[c]:{...i,...w}}}if(_&&_!=="media")return`${c}, ${_.replace("%s",String(t))}`}else if(t){if(_==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[c]:i}};if(_)return _.replace("%s",String(t))}return c};function sse(e,t){t.forEach(i=>{e[i]||(e[i]={})})}function hr(e,t,i){!e[t]&&i&&(e[t]=i)}function qv(e){return typeof e!="string"||!e.startsWith("hsl")?e:jj(e)}function Df(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Hv(qv(e[t])))}function ose(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const fh=e=>{try{return e()}catch{}},lse=(e="mui")=>Die(e);function $4(e,t,i,c){if(!t)return;t=t===!0?{}:t;const h=c==="dark"?"dark":"light";if(!i){e[c]=rse({...t,palette:{mode:h,...t==null?void 0:t.palette}});return}const{palette:_,...w}=a5({...i,palette:{mode:h,...t==null?void 0:t.palette}});return e[c]={...t,palette:_,opacity:{...Uj(h),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||Gj(h)},w}function cse(e={},...t){const{colorSchemes:i={light:!0},defaultColorScheme:c,disableCssColorScheme:h=!1,cssVarPrefix:_="mui",shouldSkipGeneratingVar:w=nse,colorSchemeSelector:a=i.light&&i.dark?"media":void 0,rootSelector:A=":root",...B}=e,N=Object.keys(i)[0],F=c||(i.light&&N!=="light"?"light":N),G=lse(_),{[F]:Q,light:te,dark:Y,...oe}=i,de={...oe};let me=Q;if((F==="dark"&&!("dark"in i)||F==="light"&&!("light"in i))&&(me=!0),!me)throw new Error(i0(21,F));const be=$4(de,me,B,F);te&&!de.light&&$4(de,te,void 0,"light"),Y&&!de.dark&&$4(de,Y,void 0,"dark");let pe={defaultColorScheme:F,...be,cssVarPrefix:_,colorSchemeSelector:a,rootSelector:A,getCssVar:G,colorSchemes:de,font:{...Oie(be.typography),...be.font},spacing:ose(B.spacing)};Object.keys(pe.colorSchemes).forEach(Ee=>{const se=pe.colorSchemes[Ee].palette,ue=ke=>{const ce=ke.split("-"),Pe=ce[1],xe=ce[2];return G(ke,se[Pe][xe])};if(se.mode==="light"&&(hr(se.common,"background","#fff"),hr(se.common,"onBackground","#000")),se.mode==="dark"&&(hr(se.common,"background","#000"),hr(se.common,"onBackground","#fff")),sse(se,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),se.mode==="light"){hr(se.Alert,"errorColor",ui(se.error.light,.6)),hr(se.Alert,"infoColor",ui(se.info.light,.6)),hr(se.Alert,"successColor",ui(se.success.light,.6)),hr(se.Alert,"warningColor",ui(se.warning.light,.6)),hr(se.Alert,"errorFilledBg",ue("palette-error-main")),hr(se.Alert,"infoFilledBg",ue("palette-info-main")),hr(se.Alert,"successFilledBg",ue("palette-success-main")),hr(se.Alert,"warningFilledBg",ue("palette-warning-main")),hr(se.Alert,"errorFilledColor",fh(()=>se.getContrastText(se.error.main))),hr(se.Alert,"infoFilledColor",fh(()=>se.getContrastText(se.info.main))),hr(se.Alert,"successFilledColor",fh(()=>se.getContrastText(se.success.main))),hr(se.Alert,"warningFilledColor",fh(()=>se.getContrastText(se.warning.main))),hr(se.Alert,"errorStandardBg",di(se.error.light,.9)),hr(se.Alert,"infoStandardBg",di(se.info.light,.9)),hr(se.Alert,"successStandardBg",di(se.success.light,.9)),hr(se.Alert,"warningStandardBg",di(se.warning.light,.9)),hr(se.Alert,"errorIconColor",ue("palette-error-main")),hr(se.Alert,"infoIconColor",ue("palette-info-main")),hr(se.Alert,"successIconColor",ue("palette-success-main")),hr(se.Alert,"warningIconColor",ue("palette-warning-main")),hr(se.AppBar,"defaultBg",ue("palette-grey-100")),hr(se.Avatar,"defaultBg",ue("palette-grey-400")),hr(se.Button,"inheritContainedBg",ue("palette-grey-300")),hr(se.Button,"inheritContainedHoverBg",ue("palette-grey-A100")),hr(se.Chip,"defaultBorder",ue("palette-grey-400")),hr(se.Chip,"defaultAvatarColor",ue("palette-grey-700")),hr(se.Chip,"defaultIconColor",ue("palette-grey-700")),hr(se.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),hr(se.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),hr(se.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),hr(se.LinearProgress,"primaryBg",di(se.primary.main,.62)),hr(se.LinearProgress,"secondaryBg",di(se.secondary.main,.62)),hr(se.LinearProgress,"errorBg",di(se.error.main,.62)),hr(se.LinearProgress,"infoBg",di(se.info.main,.62)),hr(se.LinearProgress,"successBg",di(se.success.main,.62)),hr(se.LinearProgress,"warningBg",di(se.warning.main,.62)),hr(se.Skeleton,"bg",`rgba(${ue("palette-text-primaryChannel")} / 0.11)`),hr(se.Slider,"primaryTrack",di(se.primary.main,.62)),hr(se.Slider,"secondaryTrack",di(se.secondary.main,.62)),hr(se.Slider,"errorTrack",di(se.error.main,.62)),hr(se.Slider,"infoTrack",di(se.info.main,.62)),hr(se.Slider,"successTrack",di(se.success.main,.62)),hr(se.Slider,"warningTrack",di(se.warning.main,.62));const ke=$1(se.background.default,.8);hr(se.SnackbarContent,"bg",ke),hr(se.SnackbarContent,"color",fh(()=>se.getContrastText(ke))),hr(se.SpeedDialAction,"fabHoverBg",$1(se.background.paper,.15)),hr(se.StepConnector,"border",ue("palette-grey-400")),hr(se.StepContent,"border",ue("palette-grey-400")),hr(se.Switch,"defaultColor",ue("palette-common-white")),hr(se.Switch,"defaultDisabledColor",ue("palette-grey-100")),hr(se.Switch,"primaryDisabledColor",di(se.primary.main,.62)),hr(se.Switch,"secondaryDisabledColor",di(se.secondary.main,.62)),hr(se.Switch,"errorDisabledColor",di(se.error.main,.62)),hr(se.Switch,"infoDisabledColor",di(se.info.main,.62)),hr(se.Switch,"successDisabledColor",di(se.success.main,.62)),hr(se.Switch,"warningDisabledColor",di(se.warning.main,.62)),hr(se.TableCell,"border",di(L1(se.divider,1),.88)),hr(se.Tooltip,"bg",L1(se.grey[700],.92))}if(se.mode==="dark"){hr(se.Alert,"errorColor",di(se.error.light,.6)),hr(se.Alert,"infoColor",di(se.info.light,.6)),hr(se.Alert,"successColor",di(se.success.light,.6)),hr(se.Alert,"warningColor",di(se.warning.light,.6)),hr(se.Alert,"errorFilledBg",ue("palette-error-dark")),hr(se.Alert,"infoFilledBg",ue("palette-info-dark")),hr(se.Alert,"successFilledBg",ue("palette-success-dark")),hr(se.Alert,"warningFilledBg",ue("palette-warning-dark")),hr(se.Alert,"errorFilledColor",fh(()=>se.getContrastText(se.error.dark))),hr(se.Alert,"infoFilledColor",fh(()=>se.getContrastText(se.info.dark))),hr(se.Alert,"successFilledColor",fh(()=>se.getContrastText(se.success.dark))),hr(se.Alert,"warningFilledColor",fh(()=>se.getContrastText(se.warning.dark))),hr(se.Alert,"errorStandardBg",ui(se.error.light,.9)),hr(se.Alert,"infoStandardBg",ui(se.info.light,.9)),hr(se.Alert,"successStandardBg",ui(se.success.light,.9)),hr(se.Alert,"warningStandardBg",ui(se.warning.light,.9)),hr(se.Alert,"errorIconColor",ue("palette-error-main")),hr(se.Alert,"infoIconColor",ue("palette-info-main")),hr(se.Alert,"successIconColor",ue("palette-success-main")),hr(se.Alert,"warningIconColor",ue("palette-warning-main")),hr(se.AppBar,"defaultBg",ue("palette-grey-900")),hr(se.AppBar,"darkBg",ue("palette-background-paper")),hr(se.AppBar,"darkColor",ue("palette-text-primary")),hr(se.Avatar,"defaultBg",ue("palette-grey-600")),hr(se.Button,"inheritContainedBg",ue("palette-grey-800")),hr(se.Button,"inheritContainedHoverBg",ue("palette-grey-700")),hr(se.Chip,"defaultBorder",ue("palette-grey-700")),hr(se.Chip,"defaultAvatarColor",ue("palette-grey-300")),hr(se.Chip,"defaultIconColor",ue("palette-grey-300")),hr(se.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),hr(se.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),hr(se.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),hr(se.LinearProgress,"primaryBg",ui(se.primary.main,.5)),hr(se.LinearProgress,"secondaryBg",ui(se.secondary.main,.5)),hr(se.LinearProgress,"errorBg",ui(se.error.main,.5)),hr(se.LinearProgress,"infoBg",ui(se.info.main,.5)),hr(se.LinearProgress,"successBg",ui(se.success.main,.5)),hr(se.LinearProgress,"warningBg",ui(se.warning.main,.5)),hr(se.Skeleton,"bg",`rgba(${ue("palette-text-primaryChannel")} / 0.13)`),hr(se.Slider,"primaryTrack",ui(se.primary.main,.5)),hr(se.Slider,"secondaryTrack",ui(se.secondary.main,.5)),hr(se.Slider,"errorTrack",ui(se.error.main,.5)),hr(se.Slider,"infoTrack",ui(se.info.main,.5)),hr(se.Slider,"successTrack",ui(se.success.main,.5)),hr(se.Slider,"warningTrack",ui(se.warning.main,.5));const ke=$1(se.background.default,.98);hr(se.SnackbarContent,"bg",ke),hr(se.SnackbarContent,"color",fh(()=>se.getContrastText(ke))),hr(se.SpeedDialAction,"fabHoverBg",$1(se.background.paper,.15)),hr(se.StepConnector,"border",ue("palette-grey-600")),hr(se.StepContent,"border",ue("palette-grey-600")),hr(se.Switch,"defaultColor",ue("palette-grey-300")),hr(se.Switch,"defaultDisabledColor",ue("palette-grey-600")),hr(se.Switch,"primaryDisabledColor",ui(se.primary.main,.55)),hr(se.Switch,"secondaryDisabledColor",ui(se.secondary.main,.55)),hr(se.Switch,"errorDisabledColor",ui(se.error.main,.55)),hr(se.Switch,"infoDisabledColor",ui(se.info.main,.55)),hr(se.Switch,"successDisabledColor",ui(se.success.main,.55)),hr(se.Switch,"warningDisabledColor",ui(se.warning.main,.55)),hr(se.TableCell,"border",ui(L1(se.divider,1),.68)),hr(se.Tooltip,"bg",L1(se.grey[700],.92))}Df(se.background,"default"),Df(se.background,"paper"),Df(se.common,"background"),Df(se.common,"onBackground"),Df(se,"divider"),Object.keys(se).forEach(ke=>{const ce=se[ke];ke!=="tonalOffset"&&ce&&typeof ce=="object"&&(ce.main&&hr(se[ke],"mainChannel",Hv(qv(ce.main))),ce.light&&hr(se[ke],"lightChannel",Hv(qv(ce.light))),ce.dark&&hr(se[ke],"darkChannel",Hv(qv(ce.dark))),ce.contrastText&&hr(se[ke],"contrastTextChannel",Hv(qv(ce.contrastText))),ke==="text"&&(Df(se[ke],"primary"),Df(se[ke],"secondary")),ke==="action"&&(ce.active&&Df(se[ke],"active"),ce.selected&&Df(se[ke],"selected")))})}),pe=t.reduce((Ee,se)=>Pc(Ee,se),pe);const Se={prefix:_,disableCssColorScheme:h,shouldSkipGeneratingVar:w,getSelector:ise(pe)},{vars:$e,generateThemeVars:Le,generateStyleSheets:re}=Aie(pe,Se);return pe.vars=$e,Object.entries(pe.colorSchemes[pe.defaultColorScheme]).forEach(([Ee,se])=>{pe[Ee]=se}),pe.generateThemeVars=Le,pe.generateStyleSheets=re,pe.generateSpacing=function(){return Lj(B.spacing,BT(this))},pe.getColorSchemeSelector=kie(a),pe.spacing=pe.generateSpacing(),pe.shouldSkipGeneratingVar=w,pe.unstable_sxConfig={...v2,...B==null?void 0:B.unstable_sxConfig},pe.unstable_sx=function(se){return ox({sx:se,theme:this})},pe.toRuntimeSource=Vj,pe}function TA(e,t,i){e.colorSchemes&&i&&(e.colorSchemes[t]={...i!==!0&&i,palette:HT({...i===!0?{}:i.palette,mode:t})})}function use(e={},...t){const{palette:i,cssVariables:c=!1,colorSchemes:h=i?void 0:{light:!0},defaultColorScheme:_=i==null?void 0:i.mode,...w}=e,a=_||"light",A=h==null?void 0:h[a],B={...h,...i?{[a]:{...typeof A!="boolean"&&A,palette:i}}:void 0};if(c===!1){if(!("colorSchemes"in e))return a5(e,...t);let N=i;"palette"in e||B[a]&&(B[a]!==!0?N=B[a].palette:a==="dark"&&(N={mode:"dark"}));const F=a5({...e,palette:N},...t);return F.defaultColorScheme=a,F.colorSchemes=B,F.palette.mode==="light"&&(F.colorSchemes.light={...B.light!==!0&&B.light,palette:F.palette},TA(F,"dark",B.dark)),F.palette.mode==="dark"&&(F.colorSchemes.dark={...B.dark!==!0&&B.dark,palette:F.palette},TA(F,"light",B.light)),F}return!i&&!("light"in B)&&a==="light"&&(B.light=!0),cse({...w,colorSchemes:B,defaultColorScheme:a,...typeof c!="boolean"&&c},...t)}const dse=use(),hse="$$material";function fse(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const pse=e=>fse(e)&&e!=="classes",mse=fie({themeId:hse,defaultTheme:dse,rootShouldForwardProp:pse}),gse=Cie;function yse(e){return Eie(e)}function xse(e){return _j("MuiSvgIcon",e)}pne("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const vse=e=>{const{color:t,fontSize:i,classes:c}=e,h={root:["root",t!=="inherit"&&`color${sx(t)}`,`fontSize${sx(i)}`]};return une(h,xse,c)},_se=mse("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.color!=="inherit"&&t[`color${sx(i.color)}`],t[`fontSize${sx(i.fontSize)}`]]}})(gse(({theme:e})=>{var t,i,c,h,_,w,a,A,B,N,F,G,Q,te;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(h=(t=e.transitions)==null?void 0:t.create)==null?void 0:h.call(t,"fill",{duration:(c=(i=(e.vars??e).transitions)==null?void 0:i.duration)==null?void 0:c.shorter}),variants:[{props:Y=>!Y.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((w=(_=e.typography)==null?void 0:_.pxToRem)==null?void 0:w.call(_,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((A=(a=e.typography)==null?void 0:a.pxToRem)==null?void 0:A.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((N=(B=e.typography)==null?void 0:B.pxToRem)==null?void 0:N.call(B,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,Y])=>Y&&Y.main).map(([Y])=>{var oe,de;return{props:{color:Y},style:{color:(de=(oe=(e.vars??e).palette)==null?void 0:oe[Y])==null?void 0:de.main}}}),{props:{color:"action"},style:{color:(G=(F=(e.vars??e).palette)==null?void 0:F.action)==null?void 0:G.active}},{props:{color:"disabled"},style:{color:(te=(Q=(e.vars??e).palette)==null?void 0:Q.action)==null?void 0:te.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),i5=V.forwardRef(function(t,i){const c=yse({props:t,name:"MuiSvgIcon"}),{children:h,className:_,color:w="inherit",component:a="svg",fontSize:A="medium",htmlColor:B,inheritViewBox:N=!1,titleAccess:F,viewBox:G="0 0 24 24",...Q}=c,te=V.isValidElement(h)&&h.type==="svg",Y={...c,color:w,component:a,fontSize:A,instanceFontSize:t.fontSize,inheritViewBox:N,viewBox:G,hasSvgAsChild:te},oe={};N||(oe.viewBox=G);const de=vse(Y);return b.jsxs(_se,{as:a,className:gne(de.root,_),focusable:"false",color:B,"aria-hidden":F?void 0:!0,role:F?"img":void 0,ref:i,...oe,...Q,...te&&h.props,ownerState:Y,children:[te?h.props.children:h,F?b.jsx("title",{children:F}):null]})});i5.muiName="SvgIcon";function Ns(e,t){function i(c,h){return b.jsx(i5,{"data-testid":`${t}Icon`,ref:h,...c,children:e})}return i.muiName=i5.muiName,V.memo(V.forwardRef(i))}const B4=Ns(b.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"HomeSharp"),N4=Ns(b.jsx("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"}),"HomeOutlined"),Hj=Ns(b.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),bse=Ns(b.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),EA=Ns(b.jsx("path",{d:"M18.39 14.56C16.71 13.7 14.53 13 12 13s-4.71.7-6.39 1.56C4.61 15.07 4 16.1 4 17.22V20h16v-2.78c0-1.12-.61-2.15-1.61-2.66M9.78 12h4.44c1.21 0 2.14-1.06 1.98-2.26l-.32-2.45C15.57 5.39 13.92 4 12 4S8.43 5.39 8.12 7.29L7.8 9.74c-.16 1.2.77 2.26 1.98 2.26"}),"Person2"),wse=Ns(b.jsx("path",{d:"M19.3 16.9c.4-.7.7-1.5.7-2.4 0-2.5-2-4.5-4.5-4.5S11 12 11 14.5s2 4.5 4.5 4.5c.9 0 1.7-.3 2.4-.7l3.2 3.2 1.4-1.4zm-3.8.1c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5M12 20v2C6.48 22 2 17.52 2 12S6.48 2 12 2c4.84 0 8.87 3.44 9.8 8h-2.07c-.64-2.46-2.4-4.47-4.73-5.41V5c0 1.1-.9 2-2 2h-2v2c0 .55-.45 1-1 1H8v2h2v3H9l-4.79-4.79C4.08 10.79 4 11.38 4 12c0 4.41 3.59 8 8 8"}),"TravelExploreOutlined"),Sse=Ns(b.jsx("path",{d:"M19.3 16.9c.4-.7.7-1.5.7-2.4 0-2.5-2-4.5-4.5-4.5S11 12 11 14.5s2 4.5 4.5 4.5c.9 0 1.7-.3 2.4-.7l3.2 3.2 1.4-1.4zm-3.8.1c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5M12 20v2C6.48 22 2 17.52 2 12S6.48 2 12 2c4.84 0 8.87 3.44 9.8 8h-2.07c-.64-2.46-2.4-4.47-4.73-5.41V5c0 1.1-.9 2-2 2h-2v2c0 .55-.45 1-1 1H8v2h2v3H9l-4.79-4.79C4.08 10.79 4 11.38 4 12c0 4.41 3.59 8 8 8"}),"TravelExplore"),Tse=Ns([b.jsx("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8zM6.85 7h10.29l1.04 3H5.81zM19 17H5v-5h14z"},"0"),b.jsx("circle",{cx:"7.5",cy:"14.5",r:"1.5"},"1"),b.jsx("circle",{cx:"16.5",cy:"14.5",r:"1.5"},"2")],"DirectionsCarFilledOutlined"),Ese=Ns(b.jsx("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8zM7.5 16c-.83 0-1.5-.67-1.5-1.5S6.67 13 7.5 13s1.5.67 1.5 1.5S8.33 16 7.5 16m9 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M5.81 10l1.04-3h10.29l1.04 3z"}),"DirectionsCarFilled"),Cse=Ns(b.jsx("path",{d:"M12 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m5-4h2c0 2.7-.93 4.41-2.3 5.5-.5.4-1.1.7-1.7.9V22h-2v-6h-2v6H9V10.1q-.45.15-.6.3C7.87 10.81 7 11.43 7 14H5c0-2.06.35-3.78 2.11-5.29C8.21 7.81 10 7 12 7s2.68-.46 3.48-1.06C15.96 5.55 17 4.76 17 2M4 16h3v6H4z"}),"HailOutlined"),qj=Ns(b.jsx("path",{d:"M12 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m5-4h2v.4c-.1 2.2-.8 3.9-2.3 5.1-.5.4-1.1.7-1.7.9V22h-2v-6h-2v6H9V10.1q-.45.15-.6.3c-.9.7-1.39 1.6-1.4 3.1v.5H5v-.5c0-2 .71-3.59 2.11-4.79C8.21 7.81 10 7 12 7s2.68-.46 3.48-1.06C16.48 5.14 17 4 17 2.5zM4 16h3v6H4z"}),"Hail"),Dse=Ns(b.jsx("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarBorderOutlined"),Pse=Ns(b.jsx("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarBorder"),Mse=Ns(b.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutlineOutlined"),Ase=Ns(b.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline"),kse=Ns(b.jsx("path",{d:"M13 4 2 20h17l3-16zm1.5 10c-1.38 0-2.5-1.12-2.5-2.5S13.12 9 14.5 9s2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Airlines"),Rse=Ns(b.jsx("path",{d:"M17.34 18H5.8l8.25-12h5.54zM13 4 2 20h17l3-16zm1.5 5c-1.38 0-2.5 1.12-2.5 2.5s1.12 2.5 2.5 2.5 2.5-1.12 2.5-2.5S15.88 9 14.5 9"}),"AirlinesOutlined"),CA=({announcementData:e,setAnnouncementData:t,setSidebarState:i,sidebarState:c,mobile:h,accountData:_,sidebarShown:w,setSidebarShown:a})=>{const[A,B]=V.useState(window.location.pathname.split("/")[1]),N=V.useRef(null);xs();const F=({title:pe,activeIcon:Se,nonActiveIcon:$e,id:Le,secondaryId:re})=>b.jsxs(pi,{to:`/${Le}`,onMouseEnter:()=>{de(!0),be(Le)},onMouseLeave:()=>{de(!1),be("")},className:`relative flex items-center w-full py-3 px-4
          ${w?"":"lg:items-center lg:justify-center"}
          rounded-xl text-gray-800 dark:text-gray-300 
          
          ${A===Le||A===re?"bg-slate-200 dark:bg-[#1a1a1a] ":"hover:bg-slate-200 dark:hover:bg-[#1a1a1a] darkv1fds:hover:bg-[#1f376cb0]"}
        `,onClick:Ee=>{Y(Le)},children:[A===Le?rn.cloneElement(Se,{sx:{fontSize:24}}):rn.cloneElement($e,{sx:{fontSize:24}}),w&&b.jsx("span",{className:"text-start ml-4 text-md font-RobotoMedium text-gray-800 dark:text-gray-300",children:pe})]}),G=[{id:"ride",icon:b.jsx(Mre,{className:"text-gray-800 dark:text-gray-300"}),title:"Ride",tabgroup:b.jsxs(b.Fragment,{children:[b.jsx(F,{title:"Dashboard",activeIcon:b.jsx(B4,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(N4,{sx:{fontSize:24}}),id:"dashboard"}),b.jsx(F,{title:"My Rides",activeIcon:b.jsx(kse,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(Rse,{sx:{fontSize:24}}),id:"rider-flow/trips"}),b.jsx(F,{title:"Find a ride",activeIcon:b.jsx(Sse,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(wse,{sx:{fontSize:24}}),id:"find-ride"})]}),mapArray:["dashboard","find-ride","ride-history"]},{id:"drive",icon:b.jsx(qre,{className:"text-gray-800 dark:text-gray-300"}),title:"Drive",tabgroup:b.jsxs(b.Fragment,{children:[(_==null?void 0:_.driver_verified)&&b.jsxs(b.Fragment,{children:[b.jsx(F,{title:"Create Ride",activeIcon:b.jsx(Ase,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(Mse,{sx:{fontSize:24}}),id:"create-trip"}),b.jsx(F,{title:"My Trips",activeIcon:b.jsx(Ese,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(Tse,{sx:{fontSize:24}}),id:"my-trips"}),b.jsx(F,{title:"Find riders",activeIcon:b.jsx(qj,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(Cse,{sx:{fontSize:24}}),id:"find-riders"}),b.jsx(F,{title:"Ratings",activeIcon:b.jsx(Pse,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(Dse,{sx:{fontSize:24}}),id:"ratings"})]}),_.driver_applications&&(_==null?void 0:_.driver_applications.length)>0&&!_.driver_verified&&b.jsx(b.Fragment,{children:_.driver_applications.map((pe,Se)=>b.jsx(F,{title:"Application "+(Se+1),activeIcon:b.jsx(B4,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(N4,{sx:{fontSize:24}}),id:`driver-application?uuid=${pe.application_uuid}`,secondaryId:pe.application_uuid},pe.application_uuid))}),!_.driver_applications&&!_.driver_verified&&b.jsx(b.Fragment,{children:b.jsx(F,{title:"Apply",activeIcon:b.jsx(B4,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(N4,{sx:{fontSize:24}}),id:"driver-apply"})})]}),mapArray:["my-trips","find-riders","ratings"]},{id:"settings",icon:b.jsx(Gre,{className:"text-gray-800 dark:text-gray-300"}),title:"Settings",tabgroup:b.jsx(b.Fragment,{children:b.jsx(F,{title:"Profile",activeIcon:b.jsx(EA,{className:"text-gray-800 dark:text-gray-300  ",sx:{fontSize:24}}),nonActiveIcon:b.jsx(EA,{sx:{fontSize:24}}),id:"profile"})}),mapArray:["profile"]}],[Q,te]=V.useState("ride");V.useEffect(()=>{const pe=G.find(Se=>Se.mapArray.includes(window.location.pathname.split("/")[1].replace("/","")));pe&&te(pe.id)},[window.location.pathname]),V.useEffect(()=>{const pe=Se=>{N.current&&!N.current.contains(Se.target)&&h&&i(!1)};return document.addEventListener("mousedown",pe),()=>document.removeEventListener("mousedown",pe)},[N,h,i]);const Y=pe=>{B(pe),h&&i(!1)},[oe,de]=V.useState(!1),[me,be]=V.useState("");return b.jsx("div",{children:b.jsx("div",{className:`relative flex mobile:fixed lg:fixed flex-row items-center text-gray-300 
      ${e?" mt-10 h-[calc(100vh-2rem)] ":" h-full "}
        z-20
        bg-white dark:bg-[#0c0c0c]
        border-r-1 dark:border-neutral-800 border-neutral-300
        w-[16.5rem] 
        
    `,ref:N,children:b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsxs("div",{className:"flex flex-col w-full h-auto px-4 pt-4",children:[b.jsx("button",{onClick:pe=>{i(!1),pe.preventDefault(),pe.stopPropagation()},className:"absolute  lg:hidden left-[13.5rem] top-[1.35rem] text-white  rounded-full p-1 lightv1:hover:bg-slate-400 newdark:hover:bg-hoverlighternewdark darkv1:hover:bg-hover",children:b.jsx("div",{className:"flex justify-center items-center",children:b.jsx(Hj,{className:"text-black dark:text-white",sx:{fontSize:24}})})}),b.jsxs("div",{className:"flex flex-row items-center  space-x-2",children:[b.jsx("img",{src:d0,className:`w-12 h-12 items-center
                    rounded-md
                    dark:rounded-xs`,alt:"GatorPool"}),b.jsx("h1",{className:"text-md font-RobotoSemiBold text-black dark:text-white",children:"GatorPool"})]})]}),b.jsxs("div",{className:"flex flex-col px-0 py-4 min-w-[100%] w-full h-full",children:[b.jsx("div",{className:"flex flex-col w-full h-full space-y-4",children:G.map(pe=>b.jsxs("div",{className:"flex flex-col space-y-1 items-center w-full px-4",children:[b.jsxs("div",{className:"flex w-full justify-start flex-row items-center",children:[pe.icon,b.jsx("h1",{className:"ml-2 w-min text-md text-left font-RobotoSemiBold text-black dark:text-white",children:pe.title}),b.jsx("div",{className:"flex ml-2 w-full bg-gray-800 dark:bg-gray-300 rounded-full h-[2px]",children:" "})]}),pe.tabgroup]},pe.id))}),b.jsx("div",{className:`
                  flex  justify-center items-center laptop:border-none mt-auto md:mb-24 lg:mb-4 bg-transparent px-2`,children:b.jsxs("button",{className:`
                      ${w?" pl-6 ":" justify-center "}
                      flex items-center mb h-12 rounded-xl lg:mt-auto w-full   
                      ${A==="account"?" bg-transparent text-white  ":" hover:bg-neutral-200 dark:hover:bg-neutral-700"}
                      `,onClick:()=>{fetch(gn+"/oauth2/token",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""},body:JSON.stringify({grant_type:"revoke",scope:"internal",username:localStorage.getItem("X-GatorPool-Username")||""})}).then(pe=>pe.json()).then(pe=>{pe.success&&(localStorage.removeItem("X-GatorPool-Username"),window.location.href="/auth/signin")})},children:[b.jsx("div",{className:"  ",children:b.jsx(bse,{sx:{fontSize:24},className:"text-gray-800 dark:text-gray-300  "})}),w&&b.jsx("span",{className:` mt-1 ml-4 text-black dark:text-white  text-md font-RobotoRegular 
                            
                            `,children:"Sign Out"})]})})]})]})})})};function Ise(e,t){const[i,c]=V.useState(()=>{if(typeof window>"u")return t;try{const h=window.localStorage.getItem(e);return h?JSON.parse(h):t}catch(h){return console.error(h),t}});return V.useEffect(()=>{try{window.localStorage.setItem(e,JSON.stringify(i))}catch(h){console.error(h)}},[e,i]),[i,c]}const zse="pk.eyJ1IjoibXVzdGFmYW1hc29keSIsImEiOiJjbTZva3FneTIwZjI5MmxvdWQ1dHY1NTlwIn0.oNPGEBsenNviLdx_qzcPWw",Lse=({statusCard:e,onClose:t,setAccountData:i})=>{const[c,h]=V.useState(""),[_,w]=V.useState(""),[a,A]=V.useState(""),[B,N]=V.useState(""),[F,G]=V.useState(""),[Q,te]=V.useState(""),[Y,oe]=V.useState([]),[de,me]=V.useState(0),[be,pe]=V.useState(0),[Se,$e]=V.useState(!1),Le=async re=>{if(re.length<3){oe([]);return}const Ee=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(re)}.json?access_token=${zse}&autocomplete=true&limit=5`;try{const ue=await(await fetch(Ee)).json();oe(ue.features||[])}catch(se){console.error("Error fetching geocode data:",se)}};return b.jsx(b.Fragment,{children:b.jsxs(b.Fragment,{children:[b.jsxs(AT,{className:"flex flex-col gap-1 text-black dark:text-white",children:[b.jsx("h1",{className:"text-2xl font-RobotoSemiBold",children:e.title}),b.jsx("p",{className:"text-sm font-RobotoLight",children:"Set your home address to book rides and request rides easier. Your address will be kept private unless you share it with a driver. It is held securely and encrypted in our database."})]}),b.jsxs(Uz,{children:[b.jsxs("div",{className:"relative",children:[b.jsx(Xn,{placeholder:"Start typing address...",value:c,onChange:re=>{h(re.target.value),Le(re.target.value)},className:"light dark:dark rounded-full mt-3 ",radius:"full"}),Y.length>0&&b.jsx("div",{className:"absolute z-50 w-full text-black dark:text-white max-h-96 overflow-y-scroll bg-white dark:bg-black border border-gray-300 dark:border-neutral-800 rounded-2xl shadow-lg mt-1",children:Y.map((re,Ee)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200 dark:hover:bg-neutral-700",onClick:()=>{h(re.place_name),w(re.address),N(re.context.find(se=>se.id.includes("place")).text),G(re.context.find(se=>se.id.includes("region")).text),te(re.context.find(se=>se.id.includes("postcode")).text),me(re.center[1]),pe(re.center[0]),oe([])},children:re.place_name},Ee))})]}),b.jsx("p",{className:"text-sm ml-3 font-RobotoLight text-gray-700 dark:text-gray-300",children:"These results are powered by Mapbox."}),b.jsx(Xn,{placeholder:"Apartment, unit number, etc.",value:a,onChange:re=>{A(re.target.value)},className:"light dark:dark rounded-full mt-3 ",radius:"full"})]}),b.jsxs(MT,{children:[b.jsx($r,{color:"danger",variant:"light",onPress:t,children:"Close"}),b.jsx($r,{isLoading:Se,color:"primary",onPress:()=>{$e(!0),fetch(gn+"/v1/rider/address/save",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},body:JSON.stringify({address:c,address_line1:_,address_line2:a,city:B,state:F,zip:Q,latitude:de,longitude:be})}).then(re=>re.json()).then(re=>{$e(!1),re.success&&(t(),i(Ee=>({...Ee,status_cards:Ee.status_cards.filter(se=>se.uuid!==e.uuid)})))}).catch(re=>{$e(!1),console.error("Error saving address:",re)})},children:"Save Address"})]})]})})},$se=({statusCard:e,onClose:t,setAccountData:i})=>{const[c,h]=V.useState(!1),[_,w]=rn.useState("Yes"),[a,A]=rn.useState("Yes");return b.jsxs(b.Fragment,{children:[b.jsxs(AT,{className:"flex flex-col gap-1 text-black dark:text-white",children:[b.jsx("h1",{className:"text-2xl font-RobotoSemiBold",children:e.title}),b.jsx("p",{className:"text-sm font-RobotoLight",children:"Set your ride preferences to help drivers know what you are willing to pay for. This will help drivers know what you are willing to pay for and what you are not willing to pay for."})]}),b.jsxs(Uz,{children:[b.jsxs(c6,{label:"Willing to pay for food",value:_,onValueChange:w,children:[b.jsx(R1,{value:"Yes",children:"Yes"}),b.jsx(R1,{value:"No",children:"No"})]}),b.jsxs("p",{className:"text-default-500 text-small",children:["Selected: ",_]}),b.jsxs(c6,{className:"mt-4",label:"Willing to pay for gas",value:a,onValueChange:A,children:[b.jsx(R1,{value:"Yes",children:"Yes"}),b.jsx(R1,{value:"No",children:"No"})]}),b.jsxs("p",{className:"text-default-500 text-small",children:["Selected: ",a]})]}),b.jsxs(MT,{className:"flex flex-col",children:[b.jsx("p",{className:"text-default-500 text-small",children:"Note: These preferences can be changed when requesting or booking a ride. This is just a default preference to book and request trips faster."}),b.jsxs("div",{className:"flex flex-row gap-2 ml-auto",children:[b.jsx($r,{color:"danger",variant:"light",onPress:t,children:"Close"}),b.jsx($r,{isLoading:c,color:"primary",onPress:()=>{h(!0),fetch(gn+"/v1/rider/preferences/save",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},body:JSON.stringify({pay_for_food:_==="Yes",pay_for_gas:a==="Yes"})}).then(B=>B.json()).then(B=>{h(!1),B.success&&(t(),i(N=>({...N,status_cards:N.status_cards.filter(F=>F.uuid!==e.uuid)})))}).catch(B=>{h(!1),console.error("Error saving address:",B)})},children:"Save Address"})]})]})]})},Bse=({statusCard:e,onClose:t,setAccountData:i})=>{const[c,h]=V.useState(!1);return b.jsxs(b.Fragment,{children:[b.jsxs(AT,{className:"flex flex-col gap-1 text-black dark:text-white",children:[b.jsx("h1",{className:"text-2xl font-RobotoSemiBold",children:e.title}),b.jsx("p",{className:"text-sm font-RobotoLight",children:"Enable Two-Factor Authentication to secure your account. This will help protect your account from unauthorized access and keep your account secure."})]}),b.jsx(MT,{className:"flex flex-col",children:b.jsxs("div",{className:"flex flex-row gap-2 ml-auto",children:[b.jsx($r,{color:"danger",variant:"light",onPress:t,children:"Close"}),b.jsx($r,{isLoading:c,color:"primary",onPress:()=>{h(!0),fetch(gn+"/v1/account/auth/2fa",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},body:JSON.stringify({})}).then(_=>_.json()).then(_=>{h(!1),_.success&&(t(),i(w=>({...w,status_cards:w.status_cards.filter(a=>a.uuid!==e.uuid)})))}).catch(_=>{h(!1),console.error("Error saving address:",_)})},children:"Save Address"})]})})]})},Nse=({statusCards:e,setAccountData:t})=>{const{isOpen:i,onOpen:c,onOpenChange:h}=LQ(),[_,w]=rn.useState(null);return b.jsxs("div",{className:"flex flex-col space-y-4 overflow-x-auto",children:[b.jsx("h1",{className:"text-black dark:text-white text-2xl font-RobotoSemiBold",children:"Recommended Actions"}),b.jsx("div",{className:"flex flex-row space-x-4",children:e.map(a=>b.jsx(Wj,{color:a.type,title:a.title,description:a.description,className:"min-w-96",children:b.jsx("div",{className:"flex items-center gap-1 mt-3",children:b.jsx($r,{className:"bg-background text-default-700 font-medium border-1 shadow-small",size:"sm",variant:"bordered",onPress:()=>{a.display_type==="drawer"&&(w(a),c())},children:a.action_name})})},a.uuid))}),b.jsx(b.Fragment,{children:b.jsx(ote,{className:"light dark:dark",isOpen:i,onOpenChange:h,children:b.jsx(kQ,{children:a=>(_==null?void 0:_.action)==="rider_add_address"?b.jsx(Lse,{setAccountData:t,statusCard:_,onClose:a}):(_==null?void 0:_.action)==="rider_payment_preferences"?b.jsx($se,{setAccountData:t,statusCard:_,onClose:a}):(_==null?void 0:_.action)==="account_two_fa"?b.jsx(Bse,{setAccountData:t,statusCard:_,onClose:a}):b.jsx("h1",{className:"text-black dark:text-white text-2xl font-RobotoSemiBold",children:"No action found"})})})})]})},Wj=rn.forwardRef(({title:e,children:t,variant:i="faded",color:c="secondary",description:h,className:_,classNames:w={},...a},A)=>{const B=rn.useMemo(()=>{switch(c){case"default":return"before:bg-default-300";case"primary":return"before:bg-primary";case"secondary":return"before:bg-secondary";case"success":return"before:bg-success";case"warning":return"before:bg-warning";case"danger":return"before:bg-danger";default:return"before:bg-default-200"}},[]);return b.jsx(ite,{ref:A,classNames:{...w,base:Zg(["bg-default-50 dark:bg-background shadow-sm","border-1 border-default-200 dark:border-default-100","relative before:content-[''] before:absolute before:z-10","before:left-0 before:top-[-1px] before:bottom-[-1px] before:w-1","rounded-l-none border-l-0",B],w.base,_),mainWrapper:Zg("pt-1",w.mainWrapper),iconWrapper:Zg("dark:bg-transparent",w.iconWrapper)},color:c,title:e,description:h,variant:i,...a,children:t})});Wj.displayName="CustomAlert";const jse=({accountData:e,setAccountData:t})=>{var _,w,a,A;const i=xs(),[c,h]=V.useState("");return b.jsxs("div",{className:"flex flex-col space-y-8 bg-white dark:bg-[#0c0c0c] min-h-screen p-8",children:[b.jsxs("div",{className:"flex flex-row items-center justify-between",children:[b.jsxs("div",{className:"flex flex-row items-center space-x-4",children:[b.jsx("img",{src:e.profile_picture,className:"h-16 w-16 rounded-full"}),b.jsxs("div",{className:"flex flex-col ",children:[b.jsxs("h1",{className:"text-black dark:text-white text-xl font-RobotoSemiBold",children:["Welcome, ",e==null?void 0:e.first_name," ",e==null?void 0:e.last_name]}),b.jsx("h2",{className:"text-black dark:text-white text-sm font-RobotoRegular",children:new Date().toDateString()})]})]}),b.jsxs("div",{className:"flex flex-row items-center space-x-2",children:[b.jsx(Xn,{placeholder:"Search",value:c,onChange:B=>h(B.target.value),className:"hidden lg:block light dark:dark rounded-full w-72",radius:"full"}),b.jsx("button",{className:"bg-green-600 hover:bg-green-700 dark:bg-gator-translucent hover:bg-gator-translucent2 p-3 rounded-full",children:b.jsx(Dre,{className:"text-white",size:24})})]})]}),b.jsxs("div",{className:"grid gap-4 grid-cols-2 md:grid-cols-3",children:[b.jsxs("div",{className:"flex flex-col bg-slate-100 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Upcoming Trips"}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoRegular text-lg",children:(_=e==null?void 0:e.dashboard_stats)==null?void 0:_.upcoming_trips})]}),b.jsxs("div",{className:"flex flex-col bg-slate-100 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Past Trips"}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoRegular text-lg",children:(w=e==null?void 0:e.dashboard_stats)==null?void 0:w.past_trips})]}),b.jsxs("div",{className:"flex flex-col bg-slate-100 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Account Type"}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoRegular text-lg",children:(a=e==null?void 0:e.dashboard_stats)==null?void 0:a.account_type})]})]}),(e==null?void 0:e.status_cards)&&(e==null?void 0:e.status_cards.length)>0&&b.jsx(Nse,{statusCards:e.status_cards,setAccountData:t}),b.jsxs("div",{className:"flex flex-col w-full",children:[b.jsx("h1",{className:"text-black mb-4 dark:text-white text-2xl font-RobotoSemiBold",children:"Feed"}),b.jsx("div",{className:"grid w-full grid-cols-1 lg:grid-cols-3 gap-8",children:(A=e==null?void 0:e.bottom_actions)==null?void 0:A.map((B,N)=>b.jsxs("div",{className:`
                            ${B.color==="default"?" bg-neutral-800 text-black dark:text-white ":B.color==="orange_gradient"?" text-white bg-gradient-to-r from-orange-400 to-rose-800 ":B.color==="green_gradient"?" text-white bg-gradient-to-r from-green-400 to-emerald-800 ":" bg-neutral-800 text-black dark:text-white "}
                            w-full h-[28rem] rounded-2xl p-6 relative col-span-1`,children:[b.jsx("h1",{className:"text-white font-RobotoSemiBold text-2xl",children:B.title}),b.jsx("p",{className:"text-white font-RobotoRegular text-lg",children:B.description}),b.jsx($r,{endContent:b.jsx(Ore,{size:14}),onPress:()=>{(B.action==="book_trip_flow"||B.action==="book_trip")&&i("/find-ride")},className:"absolute bottom-6 bg-opacity-50 right-6 text-white font-RobotoRegular",size:"md",children:B.action_name}),b.jsx("img",{src:B.display_blob,className:"absolute bottom-2 left-2 h-48 w-48"})]},B.uuid))})]})]})},Ose="/assets/social-DJmtE0d1.png",Fse=({accountData:e,setAccountData:t})=>{const[i,c]=V.useState(e==null?void 0:e.first_name),[h,_]=V.useState(e==null?void 0:e.last_name),[w,a]=V.useState(e==null?void 0:e.email),[A,B]=V.useState(""),[N,F]=V.useState(Sk("2024-04-04")),[G,Q]=V.useState(""),[te,Y]=V.useState(""),[oe,de]=V.useState(""),[me,be]=V.useState(""),[pe,Se]=V.useState(""),[$e,Le]=V.useState(""),[re,Ee]=V.useState(""),[se,ue]=V.useState(""),[ke,ce]=V.useState(""),[Pe,xe]=V.useState(""),[Te,Ie]=V.useState(""),[Me,Xe]=V.useState(""),[Ce,He]=V.useState(""),[et,Ke]=V.useState(1);return b.jsxs("div",{className:"flex flex-col space-y- bg-white dark:bg-black min-h-screen p-8",children:[b.jsx("h1",{className:"text-black dark:text-white text-2xl font-RobotoSemiBold",children:"Apply to become a driver"}),b.jsxs("div",{className:"flex flex-col lg:flex-row w-full mt-16",children:[b.jsxs("div",{className:"flex flex-col h-[40rem] w-full lg:w-1/2 h-full",children:[et===1&&b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("h1",{className:"text-black dark:text-white text-xl font-RobotoSemiBold",children:"Basic Information"}),b.jsx("h1",{className:"text-black dark:text-white text-md mb-1 font-RobotoRegular",children:"Enter your details as it appears on your government ID."}),b.jsxs("div",{className:"flex flex-row w-full mt-4 space-x-4 items-center",children:[b.jsx(Xn,{type:"name",label:"First Name",placeholder:"Enter your first name",value:i,onChange:ot=>c(ot.target.value),className:"mobile:w-full   text-black dark:text-white"}),b.jsx(Xn,{type:"name",label:"Last Name",placeholder:"Enter your last name",value:h,onChange:ot=>_(ot.target.value),className:"mobile:w-full   text-black dark:text-white"})]}),b.jsxs("div",{className:"flex flex-row w-full space-x-4 items-center",children:[b.jsx(Xn,{type:"email",label:"Email",disabled:!0,value:w,placeholder:"Enter your email",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsx(Xn,{type:"text",label:"Phone Number",value:A,onChange:ot=>B(ot.target.value),placeholder:"Enter phone number (XXX-XXX-XXXX)",className:"mobile:w-full mt-4   text-black dark:text-white"})]}),b.jsx("h1",{className:"text-black dark:text-white text-xl mt-10 font-RobotoSemiBold",children:"Legal Information"}),b.jsx("h1",{className:"text-black dark:text-white text-md mt- mb-4 font-RobotoRegular",children:"Federal and state law requires drivers of any digitalized ridesharing platform to be of at least 18 years of age."}),b.jsx(xx,{className:"max-w-[284px] light dark:dark",label:"Date of Birth",value:N,onChange:F}),b.jsx(Xn,{type:"text",label:"Address",value:G,onChange:ot=>Q(ot.target.value),placeholder:"Enter your address",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsx(Xn,{type:"text",label:"Address Line 2",value:te,onChange:ot=>Y(ot.target.value),placeholder:"Enter your address (optional)",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsxs("div",{className:"flex flex-row w-full space-x-4 items-center",children:[b.jsx(Xn,{type:"text",label:"City",value:oe,onChange:ot=>de(ot.target.value),placeholder:"Enter your city",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsx(Xn,{type:"text",label:"State",value:me,onChange:ot=>be(ot.target.value),placeholder:"Enter your state",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsx(Xn,{type:"text",label:"Zip",value:pe,onChange:ot=>Se(ot.target.value),placeholder:"Enter zip code",className:"mobile:w-full mt-4   text-black dark:text-white"})]})]}),et===1&&b.jsx("div",{className:"flex flex-row mt-4 items-center space-x-4 ml-auto mt-",children:b.jsx($r,{onClick:()=>Ke(2),className:"bg-green-600 hover:bg-green-500 text-white dark:bg-gator-translucent p-4 rounded-full",children:"Next"})}),et===2&&b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("h1",{className:"text-black dark:text-white text-xl font-RobotoSemiBold",children:"Vehicle Information"}),b.jsx("h1",{className:"text-black dark:text-white text-md mb-1 font-RobotoRegular",children:"Enter the details for the vehicle you will primarily be using to host trips."}),b.jsxs("div",{className:"flex flex-row w-full mt-4 space-x-4 items-center",children:[b.jsx(Xn,{type:"text",label:"Make",placeholder:"Make of vehicle",value:$e,onChange:ot=>Le(ot.target.value),className:"mobile:w-full   text-black dark:text-white"}),b.jsx(Xn,{type:"text",label:"Model",placeholder:"Model of vehicle",value:re,onChange:ot=>Ee(ot.target.value),className:"mobile:w-full   text-black dark:text-white"})]}),b.jsxs("div",{className:"flex flex-row w-full space-x-4 items-center",children:[b.jsx(Xn,{type:"text",label:"Year",value:se,onChange:ot=>ue(ot.target.value),placeholder:"Model year",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsx(Xn,{type:"text",label:"Color",value:ke,onChange:ot=>ce(ot.target.value),placeholder:"Color of vehicle",className:"mobile:w-full mt-4   text-black dark:text-white"})]}),b.jsxs("div",{className:"flex flex-row w-full space-x-4",children:[b.jsx(Xn,{type:"number",label:"Seats",value:Me,onChange:ot=>Xe(ot.target.value),placeholder:"Number of seats",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsxs("div",{className:"flex flex-col w-full",children:[b.jsx(Xn,{type:"number",label:"Lugroom",value:Ce,onChange:ot=>He(ot.target.value),placeholder:"Amount of luggage room",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-xs mt-2",children:"Enter the amount of luggage that can fit in the trunk."})]})]}),b.jsx("h1",{className:"text-black dark:text-white text-xl mt-10 font-RobotoSemiBold",children:"Legal Information"}),b.jsx("h1",{className:"text-black dark:text-white text-md mt- mb-2 font-RobotoRegular",children:"Federal and state law requires vehicle information to be securely stored on any digitalized ridesharing platform."}),b.jsxs("div",{className:"flex flex-row w-full space-x-4 items-center",children:[b.jsx(Xn,{type:"text",label:"License Plate",value:Pe,onChange:ot=>xe(ot.target.value),placeholder:"Enter license plate",className:"mobile:w-full mt-4   text-black dark:text-white"}),b.jsx(Xn,{type:"text",label:"State",value:Te,onChange:ot=>Ie(ot.target.value),placeholder:"Enter license state",className:"mobile:w-full mt-4   text-black dark:text-white"})]})]}),et===2&&b.jsxs("div",{className:"flex flex-row mt-4 items-center space-x-4 ml-auto mt-",children:[b.jsx($r,{onClick:()=>Ke(1),className:"bg-neutral-200 hover:bg-neutral-300 text-black dark:text-white dark:bg-neutral-800 dark:hover:bg-neutral-700 p-4 rounded-full",children:"Previous"}),b.jsx($r,{onClick:()=>Ke(3),className:"bg-green-600 hover:bg-green-500 text-white dark:bg-gator-translucent p-4 rounded-full",children:"Next"})]}),et===3&&b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsx("h1",{className:"text-black dark:text-white text-xl font-RobotoSemiBold",children:"Agreement"}),b.jsx("p",{className:"text-black dark:text-white text-sm font-RobotoRegular",children:"By submitting this application, I certify that all information provided is accurate and truthful to the best of my knowledge. I understand that applying to become a driver does not guarantee acceptance, and my eligibility will be reviewed based on the platform’s requirements. I agree to abide by all local, state, and federal laws while using this ridesharing platform and acknowledge that any false information or violation of terms may result in the rejection or termination of my application. Additionally, I consent to background and vehicle checks as part of the approval process."})]}),et===3&&b.jsxs("div",{className:"flex flex-row mt-4 items-center space-x-4 ml-auto mt-",children:[b.jsx($r,{onClick:()=>Ke(2),className:"bg-neutral-200 hover:bg-neutral-300 text-black dark:text-white dark:bg-neutral-800 dark:hover:bg-neutral-700 p-4 rounded-full",children:"Previous"}),b.jsx($r,{onClick:()=>{fetch(gn+"/v1/driver/apply",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},body:JSON.stringify({first_name:i,last_name:h,email:w,phone:A,dob:N.toString(),address:G,address_line_2:te,city:oe,state:me,zip:pe,make:$e,model:re,year:se,color:ke,license_plate:Pe,license_state:Te,seats:parseInt(Me),lugroom:parseInt(Ce)})}).then(ot=>ot.json()).then(ot=>{ot.success?window.location.href="/driver-application?uuid="+ot.application_uuid:alert(ot.error)}).catch(ot=>{console.error(ot),alert(ot)})},className:"bg-green-600 hover:bg-green-500 text-white dark:bg-gator-translucent p-4 rounded-full",children:"Finish"})]})]}),b.jsx("div",{className:"flex w-full lg:w-1/2 h-full items-center justify-center",children:b.jsx("img",{src:Ose,className:"h-96 w-96"})})]})]})},Vse=()=>{var _,w,a,A,B,N,F,G;const[e,t]=V.useState(null),i=Sh(),[c,h]=V.useState(null);return V.useEffect(()=>{const te=new URLSearchParams(i.search).get("uuid");t(te),fetch(gn+"/v1/driver/application/"+te,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")}}).then(Y=>Y.json()).then(Y=>{Y.success?h(Y.driver_application):alert(Y.error)}).catch(Y=>{console.error(Y),alert(Y)})},[i]),b.jsxs("div",{className:"flex flex-col space-y- bg-white dark:bg-black min-h-screen p-8",children:[b.jsxs("h1",{className:"text-black dark:text-white text-3xl font-RobotoBold",children:["Your application is ",c!=null&&c.closed?b.jsx("span",{className:"text-red-500",children:"closed"}):b.jsx("span",{className:"text-green-500",children:"open"})]}),b.jsxs("div",{className:"flex flex-col max-w-[28rem]",children:[b.jsx("h1",{className:"text-black dark:text-white text-lg mt-8 font-RobotoSemiBold",children:"Status"}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Status: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c!=null&&c.accepted?"Accepted":c!=null&&c.closed?"Rejected":"Pending"})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Created At: ",b.jsx("span",{className:"font-RobotoSemiBold",children:new Date(c==null?void 0:c.created_at).toLocaleString()})]}),b.jsx("h1",{className:"text-black dark:text-white text-lg mt-8 font-RobotoSemiBold",children:"Application Details"}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Full Name: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.full_name})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Email: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.email})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Phone Number: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.phone_number})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Date of Birth: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.date_of_birth})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Address: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.address})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Address Line 2: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.address_line_2})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["City: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.city})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["State: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.state})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Zip Code: ",b.jsx("span",{className:"font-RobotoSemiBold",children:c==null?void 0:c.zip_code})]}),b.jsx("h1",{className:"text-black dark:text-white text-lg mt-8 font-RobotoSemiBold",children:"Vehicle Details"}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Make: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(_=c==null?void 0:c.vehicle)==null?void 0:_.make})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Model: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(w=c==null?void 0:c.vehicle)==null?void 0:w.model})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Year: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(a=c==null?void 0:c.vehicle)==null?void 0:a.year})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Color: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(A=c==null?void 0:c.vehicle)==null?void 0:A.color})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["License Plate: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(B=c==null?void 0:c.vehicle)==null?void 0:B.license_plate})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["State: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(N=c==null?void 0:c.vehicle)==null?void 0:N.state})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Seats: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(F=c==null?void 0:c.vehicle)==null?void 0:F.seats})]}),b.jsxs("h1",{className:"text-black dark:text-white text-lg mt-1 font-RobotoRegular border-b-1 border-neutral-500",children:["Lugroom: ",b.jsx("span",{className:"font-RobotoSemiBold",children:(G=c==null?void 0:c.vehicle)==null?void 0:G.lugroom})]})]})]})},Use=({tripOptions:e,setTripOptions:t,accountData:i,setCurrentPage:c})=>{var w,a,A,B;const[h,_]=V.useState(!1);return b.jsx("div",{className:"flex flex-col w-full gap-4 h-full",children:b.jsxs("div",{className:"flex flex-col h-full ",children:[b.jsx("h1",{className:"font-RobotoBold text-xl text-black dark:text-white",children:"Set Fare Price"}),b.jsx("p",{className:"font-RobotoRegular text-sm max-w-md text-black dark:text-white",children:"Set the price for your trip. This will be the price that passengers will pay for different aspects of the trip. By default, there are 3 prices for trip, gas, and food. You may leave any field blank which will be shown on the rider feed. GatorPool does not handle payments. It is between you and the driver to handle payments."}),b.jsx(Xn,{type:"number",placeholder:"Trip Price",label:"Trip",value:""+((w=e==null?void 0:e.fare)==null?void 0:w.trip),onChange:N=>{t(F=>({...F,fare:{...F.fare,trip:parseFloat(N.target.value)}}))},className:"mt-4 max-w-sm"}),b.jsx("p",{className:"font-RobotoRegular text-xs max-w-sm text-neutral-500",children:"This is the fare price for the actual trip. Riders will be able to view this."}),b.jsx(Xn,{type:"number",placeholder:"Gas Price",label:"Gas",value:""+((a=e==null?void 0:e.fare)==null?void 0:a.gas),onChange:N=>{t(F=>({...F,fare:{...F.fare,gas:parseFloat(N.target.value)}}))},className:"mt-4 max-w-sm"}),b.jsx("p",{className:"font-RobotoRegular text-xs max-w-sm text-neutral-500",children:"This is the fare price for gas. Riders will be able to view this."}),b.jsx(Xn,{type:"number",placeholder:"Food Price",label:"Food",value:""+((A=e==null?void 0:e.fare)==null?void 0:A.food),onChange:N=>{t(F=>({...F,fare:{...F.fare,food:parseFloat(N.target.value)}}))},className:"mt-4 max-w-sm"}),b.jsx("p",{className:"font-RobotoRegular text-xs max-w-sm text-neutral-500",children:"This is the fare price for food. Riders will be able to view this."}),b.jsxs("div",{className:"flex flex-row mt-12",children:[b.jsx(gi,{isSelected:(B=e==null?void 0:e.fare)==null?void 0:B.accepted_terms,onValueChange:N=>{t(F=>({...F,fare:{...F.fare,accepted_terms:N}}))}}),b.jsx("p",{className:"font-RobotoRegular text-sm max-w-sm text-black dark:text-white",children:"I agree that payment handling is between me and the rider."})]}),b.jsxs("div",{className:"flex flex-row w-full mt-auto ml-auto space-x-4",children:[b.jsx($r,{className:"ml-auto ",color:"default",onClick:()=>{c(1)},children:"Previous"}),b.jsx($r,{className:"",color:"primary",onClick:()=>{var N;if(!((N=e==null?void 0:e.fare)!=null&&N.accepted_terms)){console.log("tripOptions",e),alert("You must agree to the payment terms to continue.");return}c(3)},children:"Next"})]})]})})},Gse=({tripOptions:e,setTripOptions:t,accountData:i,setCurrentPage:c})=>{var w,a,A,B,N;const[h,_]=V.useState(!1);return V.useEffect(()=>{fetch(gn+"/v1/driver/gender",{method:"GET",credentials:"include",headers:{"X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")}}).then(F=>F.json()).then(F=>{F.success&&_((F==null?void 0:F.gender)==="female")}).catch(F=>{console.error(F),alert("Error on request: "+F)})},[]),b.jsxs("div",{className:"flex flex-col w-full gap-4 h-full",children:[b.jsx("div",{className:"flex flex-col max-h-[28rem] ",children:b.jsx("h1",{className:"font-RobotoBold text-xl text-black dark:text-white",children:"Preferences"})}),b.jsx("h1",{className:"font-RobotoBold text-l text-black dark:text-white mt-4",children:"Music"}),b.jsxs("div",{className:"flex flex-row",children:[b.jsx(gi,{isSelected:(w=e==null?void 0:e.music_preferences)==null?void 0:w.can_be_controlled,onValueChange:F=>{t(G=>({...G,music_preferences:{...G.music_preferences,can_be_controlled:F}}))}}),b.jsx("p",{className:"font-RobotoRegular text-sm max-w-sm text-black dark:text-white",children:"Rider can change or request music on the trip."})]}),b.jsx("h1",{className:"font-RobotoBold text-l text-black dark:text-white mt-4",children:"Air Conditioning"}),b.jsxs("div",{className:"flex flex-row",children:[b.jsx(gi,{isSelected:(a=e==null?void 0:e.ac_preferences)==null?void 0:a.can_be_controlled,onValueChange:F=>{t(G=>({...G,ac_preferences:{...G.ac_preferences,can_be_controlled:F}}))}}),b.jsx("p",{className:"font-RobotoRegular text-sm max-w-sm text-black dark:text-white",children:"Rider can change or request to change the car AC."})]}),b.jsx("h1",{className:"font-RobotoBold text-l text-black dark:text-white mt-4",children:"Conversating"}),b.jsx("div",{className:"flex flex-row",children:b.jsxs(PT,{children:[b.jsx(DT,{children:b.jsx($r,{className:"capitalize",variant:"bordered",children:(A=e==null?void 0:e.talking_preferences)!=null&&A.silent?"Silent":(B=e==null?void 0:e.talking_preferences)!=null&&B.minimal?"Minimal":"Open"})}),b.jsxs(CT,{disallowEmptySelection:!0,"aria-label":"Single selection example",selectionMode:"single",variant:"flat",onSelectionChange:F=>{const G=Array.from(F)[0];t(Q=>({...Q,talking_preferences:{silent:G==="silent",minimal:G==="minimal",requests:{}}})),console.log(G)},children:[b.jsx(_m,{children:"Open"},"open"),b.jsx(_m,{children:"Minimal"},"minimal"),b.jsx(_m,{children:"Silent"},"silent")]})]})}),h&&b.jsxs(b.Fragment,{children:[b.jsx("h1",{className:"font-RobotoBold text-l text-black dark:text-white mt-4",children:"Gender Preference"}),b.jsxs("div",{className:"flex flex-row",children:[b.jsx(gi,{isSelected:(N=e==null?void 0:e.rider_requirements)==null?void 0:N.females_only,onValueChange:F=>{t(G=>({...G,rider_requirements:{...G.rider_requirements,females_only:F}}))}}),b.jsx("p",{className:"font-RobotoRegular text-sm max-w-sm text-black dark:text-white",children:"Restrict your requests to only females."})]})]}),b.jsxs("div",{className:"flex flex-row w-full mt-auto ml-auto space-x-4",children:[b.jsx($r,{className:"ml-auto ",color:"default",onClick:()=>{c(2)},children:"Previous"}),b.jsx($r,{className:"",color:"primary",onClick:()=>{c(4)},children:"Next"})]})]})},Hse=({tripOptions:e,setTripOptions:t,accountData:i,setCurrentPage:c})=>b.jsxs("div",{className:"flex flex-col w-full gap-4 h-full",children:[b.jsxs("div",{className:"flex flex-col w-full h-full overflow-y-auto",children:[b.jsx("h1",{className:"font-RobotoBold text-xl text-black dark:text-white",children:"Carpooling"}),b.jsxs("p",{className:"font-RobotoRegular text-sm max-w-md text-black dark:text-white",children:["Check the box below if you want to have more than one passenger on this trip. "," ","Carpooling is a great way to save money and is apart of GatorPool's mission to reduce carbon emissions. "," ","Safety features will be available to all passengers during the trip, as well as the driver."]}),b.jsxs("div",{className:"flex flex-row mt-4",children:[b.jsx(gi,{isSelected:e==null?void 0:e.carpool,onValueChange:h=>{t(_=>({..._,carpool:h}))}}),b.jsx("p",{className:"font-RobotoRegular text-sm max-w-sm text-black dark:text-white",children:"Carpool"})]})]}),b.jsxs("div",{className:"flex flex-row w-full mt-auto ml-auto space-x-4",children:[b.jsx($r,{className:"ml-auto ",color:"default",onClick:()=>{c(3)},children:"Previous"}),b.jsx($r,{className:"",color:"primary",onClick:()=>{c(5)},children:"Next"})]})]}),Xy={"Content-Type":"application/json",Accept:"application/json","Accept-Encoding":"gzip, deflate, br, zstd","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},qse=({tripOptions:e,setTripOptions:t,accountData:i,setCurrentPage:c})=>{var N,F,G,Q,te,Y,oe,de,me,be,pe,Se,$e;const[h,_]=V.useState(!1),[w,a]=V.useState(null),A=xs(),B=async()=>{_(!0),fetch(gn+"/v1/trip",{method:"POST",headers:Xy,credentials:"include",body:JSON.stringify({tripOptions:e})}).then(Le=>Le.json()).then(Le=>{Le.success?(_(!1),A("/my-trips")):a(Le.error)}).catch(Le=>{a("An error occurred while creating the trip. Please try again later.")})};return b.jsxs("div",{className:"flex flex-col w-full gap-4 h-full",children:[b.jsxs("div",{className:"flex flex-col w-full max-h-[calc(100vh-8rem)] overflow-y-auto",children:[b.jsx("h1",{className:"font-RobotoBold text-3xl text-black dark:text-white",children:"Let's get you on the road"}),b.jsx("p",{className:"font-RobotoRegular mt-1 text-sm max-w-md text-black dark:text-white",children:"View a summary of your trip before you post it. Make sure all the information is correct before proceeding."}),b.jsx("h1",{className:"font-RobotoSemiBold text-2xl text-black dark:text-white mt-4",children:"General Information"}),b.jsxs("div",{className:"flex flex-row items-center mt-2",children:[b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("div",{className:"flex flex-col",children:[b.jsx("p",{className:"font-RobotoSemiBold text-lg text-black dark:text-white",children:"From"}),b.jsx("p",{className:"font-RobotoRegular text-sm text-black dark:text-white",children:(N=e==null?void 0:e.from)==null?void 0:N.text})]}),b.jsxs("div",{className:"flex flex-col mt-4",children:[b.jsx("p",{className:"font-RobotoSemiBold text-lg text-black dark:text-white",children:"To"}),b.jsx("p",{className:"font-RobotoRegular text-sm text-black dark:text-white",children:(F=e==null?void 0:e.to)==null?void 0:F.text})]})]}),b.jsx("div",{className:"h-full w-[0.3rem] mx-4 rounded-t-lg rounded-b-lg bg-neutral-400 dark:bg-neutral-700"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("div",{className:"flex flex-col ",children:[b.jsx("p",{className:"font-RobotoSemiBold text-lg text-black dark:text-white",children:"When"}),b.jsx("p",{className:"font-RobotoRegular text-sm text-black dark:text-white",children:new Date(e==null?void 0:e.datetime).toLocaleString()})]}),b.jsxs("div",{className:"flex flex-col mt-4",children:[b.jsx("p",{className:"font-RobotoSemiBold text-lg text-black dark:text-white",children:"Dropoff Radius"}),b.jsxs("p",{className:"font-RobotoRegular text-sm text-black dark:text-white",children:[e==null?void 0:e.radius," miles"]})]})]})]}),b.jsx("h1",{className:"font-RobotoSemiBold text-2xl text-black dark:text-white mt-6",children:"Fare Details"}),b.jsxs("div",{className:"flex flex-col mt-2",children:[b.jsxs("div",{className:"flex flex-col ",children:[b.jsx("p",{className:"font-RobotoSemiBold text-lg text-black dark:text-white",children:"Trip Price"}),b.jsx("p",{className:"font-RobotoRegular text-sm text-black dark:text-white",children:((G=e==null?void 0:e.fare)==null?void 0:G.trip)||"N/A"})]}),b.jsxs("div",{className:"flex flex-col mt-4",children:[b.jsx("p",{className:"font-RobotoSemiBold text-lg text-black dark:text-white",children:"Gas Price"}),b.jsx("p",{className:"font-RobotoRegular text-sm text-black dark:text-white",children:((Q=e==null?void 0:e.fare)==null?void 0:Q.gas)||"N/A"})]}),b.jsxs("div",{className:"flex flex-col mt-4",children:[b.jsx("p",{className:"font-RobotoSemiBold text-lg text-black dark:text-white",children:"Food Price"}),b.jsx("p",{className:"font-RobotoRegular text-sm text-black dark:text-white",children:((te=e==null?void 0:e.fare)==null?void 0:te.food)||"N/A"})]})]}),b.jsx("h1",{className:"font-RobotoSemiBold text-2xl text-black dark:text-white mt-6",children:"Preferences"}),b.jsxs("div",{className:"flex flex-col mt-2",children:[b.jsxs("div",{className:"flex flex-row items-center space-x-2 ",children:[b.jsx("p",{className:"font-RobotoRegular text-lg text-black dark:text-white",children:"Rider can change or request music?"}),b.jsx("p",{className:`font-RobotoRegular text-lg 
                                ${(Y=e==null?void 0:e.music_preferences)!=null&&Y.can_be_controlled?"text-green-500":"text-red-500"}`,children:(oe=e==null?void 0:e.music_preferences)!=null&&oe.can_be_controlled?"Yes":"No"})]}),b.jsxs("div",{className:"flex flex-row items-center space-x-2 mt-2",children:[b.jsx("p",{className:"font-RobotoRegular text-lg text-black dark:text-white",children:"Rider can change or request to change the AC?"}),b.jsx("p",{className:`font-RobotoRegular text-lg 
                                ${(de=e==null?void 0:e.ac_preferences)!=null&&de.can_be_controlled?"text-green-500":"text-red-500"}`,children:(me=e==null?void 0:e.ac_preferences)!=null&&me.can_be_controlled?"Yes":"No"})]}),b.jsxs("div",{className:"flex flex-row items-center space-x-2 mt-2",children:[b.jsx("p",{className:"font-RobotoRegular text-lg text-black dark:text-white",children:"Conversating:"}),b.jsx("p",{className:`font-RobotoRegular text-lg 
                                ${(be=e==null?void 0:e.talking_preferences)!=null&&be.minimal?"text-green-500":(pe=e==null?void 0:e.talking_preferences)!=null&&pe.silent?"text-blue-500":"text-red-500"}`,children:(Se=e==null?void 0:e.talking_preferences)!=null&&Se.minimal?"Minimal":($e=e==null?void 0:e.talking_preferences)!=null&&$e.silent?"Silent":"Open"})]})]}),b.jsx("h1",{className:"font-RobotoSemiBold text-2xl text-black dark:text-white mt-6",children:"Carpooling"}),b.jsx("div",{className:"flex flex-col mt-0",children:b.jsx("div",{className:"flex flex-col ",children:b.jsx("p",{className:`font-RobotoSemiBold text-lg 
                                ${e!=null&&e.carpool?"text-green-500":"text-red-500"}`,children:e!=null&&e.carpool?"Carpooling is enabled for this trip":"Carpooling is disabled for this trip"})})})]}),b.jsxs("div",{className:"flex flex-row w-full mt-auto ml-auto space-x-4",children:[b.jsx($r,{className:"ml-auto ",color:"default",onClick:()=>{c(4)},children:"Previous"}),b.jsx($r,{isLoading:h,className:"text-white",color:"primary",onClick:()=>{B()},children:"Create Trip"})]}),w&&b.jsx("h1",{className:"text-red-500",children:w})]})},j4="pk.eyJ1IjoibXVzdGFmYW1hc29keSIsImEiOiJjbTZva3FneTIwZjI5MmxvdWQ1dHY1NTlwIn0.oNPGEBsenNviLdx_qzcPWw";let Wse=`
{
    "from": {
        "text": "University of Florida",
        "lat": 29.644906,
        "lng": -82.350441,
        "expected": 1742409922000
    },
    "radius": 15,
    "carpool": false
}`;const Kse=({accountData:e,setAccountData:t})=>{var Te,Ie;const[i,c]=V.useState({lat:29.6436,lng:-82.3549}),[h,_]=V.useState(null),[w,a]=V.useState("University of Florida"),[A,B]=V.useState(""),[N,F]=V.useState(null),G=V.useRef(null),[Q,te]=V.useState(0);let[Y,oe]=rn.useState($f(new Date().toISOString()));const de=V.useRef(null),[me,be]=V.useState([]),[pe,Se]=V.useState([]),[$e,Le]=V.useState(!1),[re,Ee]=V.useState(JSON.parse(Wse)),[se,ue]=V.useState(1),ke=async(Me,Xe)=>{if(Me.length<3){Xe==="from"?be([]):Se([]);return}const Ce=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(Me)}.json?access_token=${j4}&autocomplete=true&limit=5`;try{const et=await(await fetch(Ce)).json();Xe==="from"?be(et.features||[]):Se(et.features||[])}catch(He){console.error("Error fetching geocode data:",He)}};V.useEffect(()=>{if(!$e||!de.current)return;Ks.accessToken=j4;const Me=new Ks.Map({container:de.current,style:"mapbox://styles/mustafamasody/cm6olrhpt000k01qrebc2e55u",center:[i.lng,i.lat],zoom:14});return new Ks.Marker().setLngLat([i.lng,i.lat]).setPopup(new Ks.Popup().setHTML("<b>University of Florida</b><br>Reitz Union")).addTo(Me),G.current=Me,()=>{Me.remove()}},[$e]);const ce=async Me=>{var Ce;const Xe=`https://api.mapbox.com/directions/v5/mapbox/driving/${i.lng},${i.lat};${Me.lng},${Me.lat}?geometries=geojson&access_token=${j4}`;try{const et=await(await fetch(Xe)).json(),Ke=(Ce=et.routes[0])==null?void 0:Ce.geometry;if(Ke&&G.current){const ot=G.current,Pt=ot.getSource("route");return Pt?Pt.setData({type:"FeatureCollection",features:[{type:"Feature",geometry:Ke,properties:{}}]}):(ot.addSource("route",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:Ke,properties:{}}]}}),ot.addLayer({id:"route",type:"line",source:"route",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#007AFF","line-width":5,"line-opacity":.75}})),ot.fitBounds([[i.lng,i.lat],[Me.lng,Me.lat]],{padding:50,maxZoom:14}),new Date(Y.toDate().getTime()+et.routes[0].duration*1e3)}}catch(He){console.error("Error fetching route:",He)}};V.useEffect(()=>{Ee({...re,from:{...re.from,expected:Y.toDate().getTime()},datetime:Y.toDate().toISOString()})},[Y]),V.useEffect(()=>{console.log(re)},[re]);const Pe=async(Me,Xe)=>{if(Xe==="from"){a(Me.place_name);const Ce={lat:Me.center[1],lng:Me.center[0]};c(Ce),be([]),Ee({...re,from:{text:Me.place_name,lat:Me.center[1],lng:Me.center[0],expected:Y.toDate().getTime()}}),G.current&&(new Ks.Marker().setLngLat(Me.center).setPopup(new Ks.Popup().setHTML(`<b>From</b><br>${Me.place_name}`)).addTo(G.current),G.current.flyTo({center:Me.center,zoom:14}))}else{B(Me.place_name);const Ce={lat:Me.center[1],lng:Me.center[0]};if(_(Ce),Se([]),G.current){new Ks.Marker().setLngLat(Me.center).setPopup(new Ks.Popup().setHTML(`<b>Destination</b><br>${Me.place_name}`)).addTo(G.current),G.current.flyTo({center:Me.center,zoom:14});let He=await ce(Ce);Ee({...re,to:{text:Me.place_name,lat:Me.center[1],lng:Me.center[0],expected:He.getTime()}})}}},xe=(Me,Xe)=>{const He=[],Ke=Xe*1.60934;for(let ot=0;ot<64;ot++){const Pt=ot/64*(2*Math.PI),Et=Ke/6371*Math.cos(Pt),Wt=Ke/6371*Math.sin(Pt),Dt=Me.lng+Et*(180/Math.PI),er=Me.lat+Wt*(180/Math.PI);He.push([Dt,er])}return He.push(He[0]),{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[He]}}};return V.useEffect(()=>{if(!G.current||!h)return;const Me=G.current,Xe=xe(h,Q);Ee({...re,radius:Q}),Me.getSource("destinationCircle")?Me.getSource("destinationCircle").setData(Xe):(Me.addSource("destinationCircle",{type:"geojson",data:Xe}),Me.addLayer({id:"destinationCircle",type:"fill",source:"destinationCircle",layout:{},paint:{"fill-color":"#007AFF","fill-opacity":.3}}))},[h,Q]),V.useEffect(()=>{G.current&&N&&(G.current.getSource("route")||(G.current.addSource("route",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:N,properties:{}}]}}),G.current.addLayer({id:"route",type:"line",source:"route",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#007AFF","line-width":5,"line-opacity":.75}})))},[N]),V.useEffect(()=>{fetch(`${gn}/v1/driver/fulfillment/dfcr`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Me=>Me.json()).then(Me=>{Me.success?Le(Me.can_create_trip):console.error(Me.error)}).catch(Me=>{console.error(Me)})},[]),b.jsx("div",{className:"flex flex-col space-y- bg-white dark:bg-[#0c0c0c] h-screen p-8",children:$e?b.jsxs("div",{className:"flex flex-col h-full w-full",children:[b.jsx(NJ,{"aria-label":"Loading...",className:"mb-4 max-w-full",value:se===1?20:se===2?40:se===3?60:se===4?80:se===5?100:0}),b.jsxs("div",{className:"flex flex-col md:flex-row w-full space-x-12",children:[b.jsxs("div",{className:`flex ${se===5?"w-full":"w-full lg:w-1/2"}`,children:[se===1&&b.jsxs("div",{className:"flex flex-col w-full h-[24rem] my-auto items-center justify-center border border-1 border-neutral-700 rounded-xl p-8",children:[b.jsx("p",{className:"text-xl font-RobotoBold  text-left mr-auto mb-4 text-black dark:text-white",children:"Create a Trip"}),b.jsxs("div",{className:"relative mt- w-full",children:[b.jsx(Xn,{label:"From",placeholder:"From where?",value:(Te=re==null?void 0:re.from)==null?void 0:Te.text,className:"w-full",onChange:Me=>{Ee({...re,from:{...re.from,text:Me.target.value}}),ke(Me.target.value,"from")}}),me.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:me.map((Me,Xe)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>Pe(Me,"from"),children:Me.place_name},Xe))})]}),b.jsxs("div",{className:"relative mt-4 w-full",children:[b.jsx(Xn,{label:"To",placeholder:"To where?",value:(Ie=re==null?void 0:re.to)==null?void 0:Ie.text,className:"w-[]",onChange:Me=>{Ee({...re,to:{...re.to,text:Me.target.value}}),ke(Me.target.value,"to")}}),pe.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:pe.map((Me,Xe)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>Pe(Me,"to"),children:Me.place_name},Xe))})]}),b.jsxs("div",{className:"flex flex-row w-full mt-4 space-x-4",children:[b.jsx(xx,{className:"w-2/3 ",granularity:"second",label:"Date and time",minValue:Pm(Ff()).add({days:2}),value:$f(new Date((re==null?void 0:re.datetime)||new Date).toISOString()),onChange:oe}),b.jsx(Xn,{label:"Radius (miles)",type:"number",placeholder:"Enter the radius number",value:""+(re==null?void 0:re.radius),className:"text-black dark:text-white w-1/3",onChange:Me=>{te(parseInt(Me.target.value)),Ee({...re,radius:parseInt(Me.target.value)})}})]}),b.jsx($r,{className:"w-full mt-4",color:"primary",onClick:()=>{ue(2)},children:"Next"})]}),se===2&&b.jsx(Use,{tripOptions:re,setTripOptions:Ee,accountData:e,setCurrentPage:ue}),se===3&&b.jsx(Gse,{tripOptions:re,setTripOptions:Ee,accountData:e,setCurrentPage:ue}),se===4&&b.jsx(Hse,{tripOptions:re,setTripOptions:Ee,accountData:e,setCurrentPage:ue}),se===5&&b.jsx(qse,{tripOptions:re,setTripOptions:Ee,accountData:e,setCurrentPage:ue})]}),b.jsx("div",{className:"flex flex-col w-full h-full items-center justify-center",children:b.jsx("div",{id:"map-container",ref:de,className:"rounded-xl w-10/12 md:w-full h-[400px] lg:h-[500px] xl:h-[700px] threequarterxl3:h-[950px]"})})]})]}):b.jsxs("div",{className:"flex flex-col h-full w-full items-center justify-center",children:[b.jsx("p",{className:"text-xl font-RobotoBold text-black dark:text-white",children:"Due to your account standing, you are not able to create a trip."}),b.jsx("p",{className:"text-md font-RobotoMedium text-black dark:text-white",children:"Please resolve your account standing to create a trip."})]})})};function T2(e,t){let i;return function(...h){const _=()=>{clearTimeout(i),e(...h)};clearTimeout(i),i=setTimeout(_,t)}}const Zse=Ns(b.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zm0-12H5V6h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"}),"CalendarMonthOutlined"),Xse=Ns(b.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),Yse=({accountData:e,setAccountData:t,tripsResult:i,driverProfiles:c})=>{var F,G,Q,te,Y,oe,de;const h=xs(),[_,w]=V.useState(!1),[a,A]=V.useState(null),[B,N]=V.useState(!1);return V.useEffect(()=>{fetch(`${gn}/v1/rider/gender`,{method:"GET",credentials:"include",headers:Xy}).then(me=>me.json()).then(me=>{w(me.gender==="female")})},[]),b.jsxs("div",{children:[b.jsxs("div",{className:"flex flex-col h-screen p-8 w-full bg-white dark:bg-[#0c0c0c]",children:[b.jsxs("h1",{className:"text-3xl font-RobotoBold text-black dark:text-white",children:["We found ",i.length," trip",i.length===1?"":"s"," for you"]}),b.jsx("div",{className:"flex flex-col gap-4 mt-6",children:i.map(me=>{var be,pe,Se,$e,Le,re,Ee,se,ue,ke,ce,Pe,xe,Te,Ie,Me,Xe;return b.jsxs("div",{className:"flex flex-col w-full border border-2 border-green-600 rounded-2xl",children:[b.jsxs("div",{className:"flex flex-col p-4",children:[b.jsx("p",{className:"text-xs w-auto font-RobotoMedium text-gray-700 dark:text-gray-300",children:"PICKUP"}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Location: ",b.jsx("span",{className:"font-RobotoBold",children:(be=me.waypoints.find(Ce=>Ce.type==="pickup"))==null?void 0:be.geo_text})]}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Date: ",b.jsx("span",{className:"font-RobotoBold",children:new Date(me.datetime).toLocaleString()})]})]}),b.jsx("div",{className:"w-full bg-green-600 h-[2px] rounded-full"}),b.jsxs("div",{className:"flex flex-col p-4",children:[b.jsx("p",{className:"text-xs w-auto font-RobotoMedium text-gray-700 dark:text-gray-300",children:"DROPOFF"}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Destination: ",b.jsx("span",{className:"font-RobotoBold",children:(pe=me.waypoints.find(Ce=>Ce.type==="destination"))==null?void 0:pe.geo_text})]}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Expected Dropoff: ",b.jsx("span",{className:"font-RobotoBold",children:new Date((Se=me.waypoints.find(Ce=>Ce.type==="destination"))==null?void 0:Se.expected).toLocaleString()})]})]}),b.jsx("div",{className:"w-full bg-green-600 h-[2px] rounded-full"}),b.jsxs("div",{className:"flex flex-col p-4",children:[b.jsx("p",{className:"text-xs w-auto font-RobotoMedium  text-gray-700 dark:text-gray-300",children:"DRIVER INFORMATION"}),b.jsxs("div",{className:"flex flex-row items-center gap-2 mt-2",children:[b.jsx("img",{src:($e=c.find(Ce=>Ce.trip_uuid===me.trip_uuid))==null?void 0:$e.profile_picture,alt:"Profile Picture",className:"w-10 h-10 rounded-full"}),b.jsxs("div",{className:"flex flex-col text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:[b.jsxs("span",{className:"text-md font-RobotoRegular text-black dark:text-white",children:[(Le=c.find(Ce=>Ce.trip_uuid===me.trip_uuid))==null?void 0:Le.first_name," "," ",(re=c.find(Ce=>Ce.trip_uuid===me.trip_uuid))==null?void 0:re.last_name]}),b.jsx("span",{className:"text-xs font-RobotoRegular text-gray-700 dark:text-gray-300",children:((Ee=c.find(Ce=>Ce.trip_uuid===me.trip_uuid))==null?void 0:Ee.rating)||"No rating yet"})]})]})]}),b.jsx("div",{className:"w-full bg-green-600 h-[2px] rounded-full"}),b.jsxs("div",{className:"flex flex-col p-4",children:[b.jsx("p",{className:"text-xs w-auto font-RobotoMedium  text-gray-700 dark:text-gray-300",children:"TRIP DETAILS"}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Fare: $",b.jsx("span",{className:"font-RobotoBold",children:(se=me==null?void 0:me.fare)==null?void 0:se.aggregated})," ",b.jsx(LJ,{content:`Trip: $${(ue=me==null?void 0:me.fare)==null?void 0:ue.trip} | Food: $${(ke=me==null?void 0:me.fare)==null?void 0:ke.food} | Gas: $${(ce=me==null?void 0:me.fare)==null?void 0:ce.gas}`,className:"text-white dark",children:b.jsx("span",{className:"underline font-RobotoBold hover:cursor-pointer",children:"View Fare Breakdown"})})]}),b.jsx("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:(((Pe=me==null?void 0:me.rider_requirements)==null?void 0:Pe.pay_food)||((xe=me==null?void 0:me.rider_requirements)==null?void 0:xe.pay_gas))&&b.jsxs("span",{children:["You are required to: ",((Te=me==null?void 0:me.rider_requirements)==null?void 0:Te.pay_food)&&"pay for food"," ",((Ie=me==null?void 0:me.rider_requirements)==null?void 0:Ie.pay_gas)&&"pay for gas"]})}),b.jsx("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:(Me=me==null?void 0:me.miscellaneous)!=null&&Me.ac.can_be_controlled?"AC can be controlled":"AC cannot be controlled"}),b.jsx("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:(Xe=me==null?void 0:me.miscellaneous)!=null&&Xe.music.can_be_controlled?"Music can be controlled":"Music cannot be controlled"})]}),b.jsx("div",{className:"w-full bg-green-600 h-[2px] rounded-full"}),b.jsxs("div",{className:"flex flex-col p-4",children:[b.jsx("p",{className:"text-xs w-auto font-RobotoMedium  text-gray-700 dark:text-gray-300",children:"ACTIONS"}),b.jsx($r,{className:"mt-auto w-fit mt-2",variant:"solid",color:"primary",onPress:()=>{A(me)},children:"Request Trip"})]})]},me.trip_uuid)})})]}),a&&b.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:b.jsxs("div",{className:"bg-white dark:bg-[#0c0c0c] w-full md:w-[30rem] p-8 h-auto rounded-xl",children:[b.jsxs("div",{className:"flex flex-row items-center justify-between",children:[b.jsx("h2",{className:"text-xl font-RobotoBold text-black dark:text-white",children:"Request Trip"}),b.jsx("button",{onClick:()=>A(null),className:"hover:bg-slate-100 dark:hover:bg-neutral-800 rounded-full p-2",children:b.jsx(_u,{size:24,className:"text-gray-700 dark:text-gray-300"})})]}),b.jsxs("div",{className:"flex flex-row items-center gap-2 mt-4",children:[b.jsx("img",{src:(F=c.find(me=>me.trip_uuid===a.trip_uuid))==null?void 0:F.profile_picture,alt:"Profile Picture",className:"w-10 h-10 rounded-full"}),b.jsxs("div",{className:"flex flex-col text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:[b.jsxs("span",{className:"text-md font-RobotoRegular text-black dark:text-white",children:[(G=c.find(me=>me.trip_uuid===a.trip_uuid))==null?void 0:G.first_name," "," ",(Q=c.find(me=>me.trip_uuid===a.trip_uuid))==null?void 0:Q.last_name]}),b.jsx("span",{className:"text-xs font-RobotoRegular text-gray-700 dark:text-gray-300",children:((te=c.find(me=>me.trip_uuid===a.trip_uuid))==null?void 0:te.rating)||"No rating yet"})]})]}),b.jsxs("div",{className:"flex flex-col mt-4",children:[b.jsx("p",{className:"text-xs w-auto font-RobotoMedium text-gray-700 dark:text-gray-300",children:"PICKUP"}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Location: ",b.jsx("span",{className:"font-RobotoBold",children:(Y=a.waypoints.find(me=>me.type==="pickup"))==null?void 0:Y.geo_text})]}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Date: ",b.jsx("span",{className:"font-RobotoBold",children:new Date(a.datetime).toLocaleString()})]})]}),b.jsxs("div",{className:"flex flex-col mt-4",children:[b.jsx("p",{className:"text-xs w-auto font-RobotoMedium text-gray-700 dark:text-gray-300",children:"DROPOFF"}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Destination: ",b.jsx("span",{className:"font-RobotoBold",children:(oe=a.waypoints.find(me=>me.type==="destination"))==null?void 0:oe.geo_text})]}),b.jsxs("h2",{className:"text-md font-RobotoRegular text-gray-700 dark:text-gray-300",children:["Expected Dropoff: ",b.jsx("span",{className:"font-RobotoBold",children:new Date((de=a.waypoints.find(me=>me.type==="destination"))==null?void 0:de.expected).toLocaleString()})]})]}),b.jsx("div",{className:"flex flex-col mt-4",children:b.jsx(gi,{className:"text-black dark:text-white",checked:B,onChange:()=>N(!B),children:"I agree that payment will be handled solely between the driver and I. I accept that GatorPool is not liable for any issues that may arise, but offers safety features to ensure the trip is safe. I accept that my ride request may be denied by the driver."})}),b.jsx("div",{className:"flex flex-col mt-4",children:b.jsx($r,{className:"mt-auto ml-auto w-fit mt-2",variant:"solid",color:"primary",onPress:()=>{if(!B){Rn({title:"Terms and conditions not accepted",description:"You must accept the terms and conditions to request a ride.",color:"danger"});return}fetch(`${gn}/v1/trip/request/${a.trip_uuid}`,{method:"POST",credentials:"include",headers:Xy,body:JSON.stringify({trip_uuid:a.trip_uuid})}).then(me=>me.json()).then(me=>{me.success?h("/rider-flow/trips?tab=created"):Rn({title:"Error requesting trip",description:me.error,color:"danger"})}).catch(me=>{Rn({title:"Error requesting trip",description:"There was an error requesting the trip. Please try again later.",color:"danger"}),console.log(me)})},children:"Request Trip"})})]})})]})},Jse="pk.eyJ1IjoibXVzdGFmYW1hc29keSIsImEiOiJjbTZva3FneTIwZjI5MmxvdWQ1dHY1NTlwIn0.oNPGEBsenNviLdx_qzcPWw",DA=T2(async(e,t,i)=>{if(e.length<3){i([]);return}const c=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(e)}.json?access_token=${Jse}&autocomplete=true&limit=5`;try{const _=await(await fetch(c)).json();i(_.features||[])}catch(h){console.error("Error fetching geocode data:",h),i([])}},500),Qse=({accountData:e,setAccountData:t})=>{const[i,c]=V.useState([]),h=xs(),_=async()=>{fetch(`${gn}/v1/rider/queries`,{method:"GET",credentials:"include",headers:Xy}).then(De=>De.json()).then(De=>{De.success?c(De.queries):console.error(De.error)}).catch(De=>{console.error(De)})},[w,a]=V.useState({lat:29.6436,lng:-82.3549}),[A,B]=V.useState(null),[N,F]=V.useState("University of Florida"),[G,Q]=V.useState(""),[te,Y]=V.useState(null),oe=V.useRef(null),[de,me]=V.useState(0);let[be,pe]=rn.useState($f(new Date().toISOString()));const[Se,$e]=V.useState(new Date),[Le,re]=V.useState(null),[Ee,se]=V.useState(null),[ue,ke]=V.useState(null),[ce,Pe]=V.useState({geo_text:"University of Florida",latitude:29.6436,longitude:-82.3549}),[xe,Te]=V.useState({}),[Ie,Me]=V.useState(!1);V.useRef(null);const[Xe,Ce]=V.useState([]),[He,et]=V.useState([]),[Ke,ot]=V.useState(!1),[Pt,Et]=V.useState(!1),[Wt,Dt]=V.useState(!1);V.useEffect(()=>{$e(be.toDate())},[be]);const er=async(De,ur)=>{if(ur==="from"){F(De.place_name);const Sr={lat:De.center[1],lng:De.center[0]};a(Sr),Ce([]),Pe({geo_text:De.place_name,latitude:De.center[1],longitude:De.center[0],expected:be.toDate()}),oe.current&&(new Ks.Marker().setLngLat(De.center).setPopup(new Ks.Popup().setHTML(`<b>From</b><br>${De.place_name}`)).addTo(oe.current),oe.current.flyTo({center:De.center,zoom:14}))}else{Q(De.place_name);const Sr={lat:De.center[1],lng:De.center[0]};B(Sr),et([]),Te({geo_text:De.place_name,latitude:De.center[1],longitude:De.center[0],expected:null}),oe.current&&(new Ks.Marker().setLngLat(De.center).setPopup(new Ks.Popup().setHTML(`<b>Destination</b><br>${De.place_name}`)).addTo(oe.current),oe.current.flyTo({center:De.center,zoom:14}))}};return V.useEffect(()=>{_(),fetch(`${gn}/v1/rider/gender`,{method:"GET",credentials:"include",headers:Xy}).then(De=>De.json()).then(De=>{Me(De.gender==="female")})},[]),Le?Le&&Le.length>0?b.jsx(b.Fragment,{children:b.jsx(Yse,{accountData:e,setAccountData:t,tripsResult:Le,driverProfiles:Ee})}):b.jsx(b.Fragment,{children:b.jsxs("div",{className:"flex flex-col h-screen items-center justify-center w-full bg-white dark:bg-[#0c0c0c]",children:[b.jsx("h1",{className:"text-4xl font-RobotoBold text-black dark:text-white",children:"Uh oh, no trips found."}),b.jsx("p",{className:"text-xl mt-1 font-RobotoRegular text-gray-700 dark:text-gray-300",children:"Not to worry, choose an option from below."}),b.jsxs("div",{className:"flex mt-8 flex-col w-[22rem] lg:w-[28rem] justify-center border border-1 border-neutral-300 dark:border-neutral-800 rounded-xl p-4 bg-white dark:bg-[#0c0c0c]",children:[b.jsx("p",{className:"text-xl font-RobotoBold text-left mr-auto mb-4 text-black dark:text-white",children:"Options"}),b.jsxs("button",{className:"flex flex-row rounded-xl px-4 py-2 items-center w-full mt- justify-start bg-slate-100 hover:bg-slate-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 transition-all duration-300 ",onClick:()=>{h(`/find-ride/rider-flow?${new URLSearchParams(JSON.stringify(ue)||{}).toString()}`)},children:[b.jsx(qj,{sx:{fontSize:48},className:"text-black dark:text-white"}),b.jsxs("div",{className:"flex flex-col ml-2",children:[b.jsx("p",{className:"text-lg text-left font-RobotoBold text-black dark:text-white",children:"Request a ride"}),b.jsx("p",{className:"text-sm text-left font-RobotoRegular text-black dark:text-white",children:"Request a ride for a specific date and time. Drivers have a dashboard to see your request."})]})]}),b.jsxs("button",{className:"flex flex-row mt-2 rounded-xl px-4 py-2 items-center w-full mt- justify-start bg-slate-100 hover:bg-slate-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 transition-all duration-300 ",onClick:()=>{re(null)},children:[b.jsx(Zse,{sx:{fontSize:48},className:"text-black dark:text-white"}),b.jsxs("div",{className:"flex flex-col ml-2",children:[b.jsx("p",{className:"text-lg text-left font-RobotoBold text-black dark:text-white",children:"Change dates"}),b.jsx("p",{className:"text-sm text-left font-RobotoRegular text-black dark:text-white",children:"Change the date and time of your trip, or turn on the flexible dates filter."})]})]}),b.jsxs("button",{className:"flex flex-row mt-2 rounded-xl px-4 py-2 items-center w-full mt- justify-start bg-slate-100 hover:bg-slate-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 transition-all duration-300 ",onClick:()=>{},children:[b.jsx(Xse,{sx:{fontSize:48},className:"text-black dark:text-white"}),b.jsxs("div",{className:"flex flex-col ml-2",children:[b.jsx("p",{className:"text-lg text-left font-RobotoBold text-black dark:text-white",children:"Get notified when available"}),b.jsx("p",{className:"text-sm text-left font-RobotoRegular text-black dark:text-white",children:"Get notified when a ride is available to your destination."})]})]})]})]})}):b.jsx("div",{children:b.jsx("div",{className:"flex flex-col h-screen items-center justify-center w-full bg-white dark:bg-[#0c0c0c] p-6",children:b.jsx("div",{className:"relative flex flex-col w-full h-full items-center justify-center",children:b.jsxs("div",{className:" flex flex-col w-[22rem] lg:w-[28rem] items-center justify-center border border-1 border-neutral-300 dark:border-neutral-800 rounded-xl p-8 bg-white dark:bg-[#0c0c0c]",children:[b.jsx("p",{className:"text-xl font-RobotoBold  text-left mr-auto mb-4 text-black dark:text-white",children:"Find a ride"}),b.jsxs("div",{className:"relative mt- w-full",children:[b.jsx(Xn,{label:"From",placeholder:"From where?",value:N,className:"w-full",onChange:De=>{F(De.target.value),DA(De.target.value,"from",Ce)}}),Xe.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:Xe.map((De,ur)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>er(De,"from"),children:De.place_name},ur))})]}),b.jsxs("div",{className:"relative mt-4 w-full",children:[b.jsx(Xn,{label:"To",placeholder:"To where?",value:G,className:"w-[]",onChange:De=>{Q(De.target.value),DA(De.target.value,"to",et)}}),He.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:He.map((De,ur)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>er(De,"to"),children:De.place_name},ur))})]}),b.jsx("div",{className:"flex flex-row w-full mt-4 space-x-4",children:b.jsx(xx,{className:"w-full ",granularity:"second",label:"Date and time",minValue:Pm(Ff()),value:$f(new Date(Se||new Date).toISOString()),onChange:pe})}),b.jsxs("button",{onClick:()=>ot(!Ke),className:"w-fit px-4 py-2 rounded-xl mr-auto mt-4 flex bg-neutral-100 hover:bg-slate-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 flex-row items-center space-x-2 justify-start text-black dark:text-white",children:[b.jsx("span",{children:"Additional Filters"}),Ke?b.jsx($re,{className:"w-4 h-4"}):b.jsx(Rre,{className:"w-4 h-4"})]}),Ke&&b.jsxs("div",{className:"flex flex-col w-full mt-1",children:[b.jsx(gi,{className:"text-black dark:text-white",checked:Pt,onChange:()=>Et(!Pt),children:"Flexible dates"}),Ie&&b.jsx(gi,{className:"text-black dark:text-white",checked:Wt,onChange:()=>Dt(!Wt),children:"Female drivers only"})]}),b.jsx($r,{className:"w-full mt-4",color:"primary",onPress:()=>{const De={body:{from:{lat:ce.latitude,lng:ce.longitude,text:ce.geo_text},to:{lat:xe.latitude,lng:xe.longitude,text:xe.geo_text},datetime:Se.toISOString(),flexible_dates:Pt,females_only:Wt}};ke(De),fetch(`${gn}/v1/trip/rider/query`,{method:"POST",credentials:"include",headers:Xy,body:JSON.stringify(De)}).then(ur=>ur.json()).then(ur=>{ur.success?(re(ur.trips),se(ur.driverProfiles)):console.error(ur.error)}).catch(ur=>{console.error(ur)})},children:"Find"})]})})})})},PA=({accountData:e,setAccountData:t})=>{const[i,c]=V.useState([]),h=xs(),_=async()=>{fetch(`${gn}/v1/driver/trips`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(w=>w.json()).then(w=>{w.success?c(w.trips.sort((a,A)=>new Date(A.datetime).getTime()-new Date(a.datetime).getTime())):console.error(w.error)}).catch(w=>{console.error(w)})};return V.useEffect(()=>{_()},[]),i.length===0?b.jsx("div",{className:"flex flex-col space-y- bg-white dark:bg-[#0c0c0c] h-screen",children:b.jsxs("div",{className:"flex flex-col w-full h-full items-center justify-center",children:[b.jsx("h1",{className:"text-4xl font-RobotoBold text-black dark:text-white",children:"No trips found."}),b.jsx("h1",{className:"text-lg font-RobotoBold text-black dark:text-white",children:"Create a trip to get started."}),b.jsx($r,{color:"primary",className:"mt-4",onPress:()=>{h("/create-trip")},children:"Create Trip"})]})}):b.jsxs("div",{className:"flex flex-col space-y- bg-white dark:bg-[#0c0c0c] h-screen",children:[b.jsx("p",{className:"text-2xl font-RobotoBold pt-8 pl-8  text-left mr-auto mb-4 text-black dark:text-white",children:"My Trips"}),b.jsx("p",{className:"text-md font-RobotoRegular pt- pl-8  text-left mr-auto mb-4 text-black dark:text-white",children:"Here you can view all of your trips. They are separated by whether you created the trip or requested to be a driver for a trip."}),b.jsx("div",{className:"flex overflow-x-auto max-w-screen",children:b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"To"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Status"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Fare"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"When"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Riders"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Trip Actions"})]})}),b.jsx("tbody",{children:i.map(w=>{var a,A,B;return b.jsxs("tr",{onClick:()=>{h(`/drivertrip/${w.trip_uuid}`)},className:"hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-900",children:[b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:(a=w.waypoints.find(N=>N.type==="destination"))==null?void 0:a.geo_text}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:w.status}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:(A=w.fare)==null?void 0:A.aggregated}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:new Date(w.datetime).toLocaleString()}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:((B=w.riders)==null?void 0:B.length)||0}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:b.jsx($r,{color:"primary",onPress:()=>{h(`/drivertrip/${w.trip_uuid}`)},children:"View Trip"})})]},w.trip_uuid)})})]})})]})},eoe=({accountData:e,setAccountData:t})=>{var ce,Pe,xe,Te,Ie,Me,Xe,Ce,He,et,Ke,ot,Pt,Et,Wt,Dt,er,De,ur,Sr;const{trip_uuid:i}=Lw(),c=xs(),[h,_]=V.useState(null),[w,a]=V.useState(null),[A,B]=V.useState(!1),[N,F]=V.useState(!1),[G,Q]=V.useState(!1),[te,Y]=V.useState(!1),[oe,de]=V.useState(!1),[me,be]=V.useState(!1),[pe,Se]=V.useState([]),[$e,Le]=V.useState(!1),[re,Ee]=V.useState(!1),[se,ue]=V.useState(null);V.useEffect(()=>{fetch(`${gn}/v1/driver/trips/${i}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(yt=>yt.json()).then(yt=>{yt.success&&(_(yt.trip),a(yt.trip))}).catch(yt=>{console.error(yt)}),fetch(`${gn}/v1/trip/${i}/riders`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(yt=>yt.json()).then(yt=>{yt.success&&Se(yt.riders)}).catch(yt=>{console.error(yt)})},[]);const ke=()=>{fetch(`${gn}/v1/trip/${i}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""},body:JSON.stringify({trip:w})}).then(yt=>yt.json()).then(yt=>{yt.success?(_(yt.trip),a(yt.trip)):Rn({title:"Error",description:yt.error,color:"danger"})}).catch(yt=>{console.error(yt)})};return V.useEffect(()=>{var yt,dt,$t;a({...w,fare:{...w==null?void 0:w.fare,aggregated:((yt=w==null?void 0:w.fare)==null?void 0:yt.food)+((dt=w==null?void 0:w.fare)==null?void 0:dt.gas)+(($t=w==null?void 0:w.fare)==null?void 0:$t.trip)}})},[(ce=w==null?void 0:w.fare)==null?void 0:ce.food,(Pe=w==null?void 0:w.fare)==null?void 0:Pe.gas,(xe=w==null?void 0:w.fare)==null?void 0:xe.trip]),b.jsxs("div",{className:"flex flex-col bg-white dark:bg-[#0c0c0c] space-y-4 h-screen overflow-y-auto p-8",children:[b.jsxs("div",{className:"flex flex-row space-x-4 items-center",children:[b.jsx("button",{onClick:()=>c("/my-trips"),className:"flex items-center justify-center bg-gray-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 rounded-full p-2",children:b.jsx(d2,{className:"w-8 h-8 text-black dark:text-white"})}),b.jsxs("h1",{className:"text-2xl lg:text-4xl font-RobotoBold text-black dark:text-white",children:["Your trip to ",(Te=h==null?void 0:h.waypoints.find(yt=>yt.type==="destination"))==null?void 0:Te.geo_text," on ",new Date(h==null?void 0:h.datetime).toLocaleString()]}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:(h==null?void 0:h.status)==="cancelled"?b.jsx("div",{className:"flex items-center justify-center bg-red-700 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Cancelled"})}):new Date(h==null?void 0:h.datetime)>new Date&&b.jsx("div",{className:"flex items-center justify-center bg-green-700 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Upcoming"})})})]}),b.jsxs("div",{className:"grid gap-4 grid-cols-2 md:grid-cols-3  lg:grid-cols-4",children:[b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"From"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(Ie=h==null?void 0:h.waypoints.find(yt=>yt.type==="pickup"))==null?void 0:Ie.geo_text})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"To"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(Me=h==null?void 0:h.waypoints.find(yt=>yt.type==="destination"))==null?void 0:Me.geo_text})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Riders"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoBold text-3xl",children:((Xe=h==null?void 0:h.riders)==null?void 0:Xe.length)||0})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Fare"}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoBold text-3xl",children:["$",(Ce=h==null?void 0:h.fare)==null?void 0:Ce.aggregated]})]})]}),b.jsxs("div",{className:"flex mobile:flex-col space-y-4 lg:space-y-0 lg:flex-row w-full h-full lg:space-x-4",children:[b.jsxs("div",{className:"flex flex-col min-h-[20rem] lg:h-full w-full lg:w-8/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-6",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Trip Summary"}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Fare Details"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gs,{value:(He=w==null?void 0:w.fare)==null?void 0:He.trip,onValueChange:yt=>{a({...w,fare:{...w==null?void 0:w.fare,trip:yt}})},disabled:!A,label:"Trip Fare",className:"w-full"}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsx($r,{isIconOnly:!0,onPress:()=>{A&&ke(),B(!A)},className:"p-1 rounded-full",children:A?b.jsx(Ng,{className:"w-4 h-4 text-black dark:text-white"}):b.jsx(Bg,{className:"w-4 h-4 text-black dark:text-white"})})]}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gs,{value:(et=w==null?void 0:w.fare)==null?void 0:et.food,onValueChange:yt=>{a({...w,fare:{...w==null?void 0:w.fare,food:yt}})},disabled:!N,label:"Food Fare",className:"w-full"}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsx($r,{isIconOnly:!0,onPress:()=>{A&&ke(),F(!N)},className:"p-1 rounded-full",children:N?b.jsx(Ng,{className:"w-4 h-4 text-black dark:text-white"}):b.jsx(Bg,{className:"w-4 h-4 text-black dark:text-white"})})]}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gs,{value:(Ke=w==null?void 0:w.fare)==null?void 0:Ke.gas,onValueChange:yt=>{a({...w,fare:{...w==null?void 0:w.fare,gas:yt}})},disabled:!G,label:"Gas Fare",className:"w-full"}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsx($r,{isIconOnly:!0,onPress:()=>{A&&ke(),Q(!G)},className:"p-1 rounded-full",children:G?b.jsx(Ng,{className:"w-4 h-4 text-black dark:text-white"}):b.jsx(Bg,{className:"w-4 h-4 text-black dark:text-white"})})]}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Aggregated Fare: $",(ot=w==null?void 0:w.fare)==null?void 0:ot.aggregated]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Preferences"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!te,isSelected:(Pt=w==null?void 0:w.miscellaneous)==null?void 0:Pt.music.can_be_controlled,onValueChange:yt=>{var dt;a({...w,miscellaneous:{...w==null?void 0:w.miscellaneous,music:{...(dt=w==null?void 0:w.miscellaneous)==null?void 0:dt.music,can_be_controlled:yt}}})}}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request music"}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsx($r,{isIconOnly:!0,className:"p-1 rounded-full",onPress:()=>{te&&ke(),Y(!te)},children:te?b.jsx(Ng,{className:"w-4 h-4 text-black dark:text-white"}):b.jsx(Bg,{className:"w-4 h-4 text-black dark:text-white"})})]}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!oe,isSelected:(Et=w==null?void 0:w.miscellaneous)==null?void 0:Et.ac.can_be_controlled,onValueChange:yt=>{var dt;a({...w,miscellaneous:{...w==null?void 0:w.miscellaneous,ac:{...(dt=w==null?void 0:w.miscellaneous)==null?void 0:dt.ac,can_be_controlled:yt}}})}}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request AC"}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsx($r,{isIconOnly:!0,className:"p-1 rounded-full",onPress:()=>{oe&&ke(),de(!oe)},children:oe?b.jsx(Ng,{className:"w-4 h-4 text-black dark:text-white"}):b.jsx(Bg,{className:"w-4 h-4 text-black dark:text-white"})})]}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[me?b.jsxs(PT,{className:"light:light dark:dark",children:[b.jsx(DT,{children:b.jsx($r,{className:"capitalize",variant:"bordered",children:(Wt=w==null?void 0:w.miscellaneous)==null?void 0:Wt.talking.type})}),b.jsxs(CT,{disallowEmptySelection:!0,"aria-label":"Single selection example",selectionMode:"single",variant:"flat",className:"light:light dark:dark",onSelectionChange:yt=>{const dt=Array.from(yt)[0];a($t=>{var or;return{...$t,miscellaneous:{...$t==null?void 0:$t.miscellaneous,talking:{...(or=$t==null?void 0:$t.miscellaneous)==null?void 0:or.talking,type:dt}}}}),console.log(dt)},children:[b.jsx(_m,{className:"text-black dark:text-white",children:"Open"},"open"),b.jsx(_m,{className:"text-black dark:text-white",children:"Minimal"},"minimal"),b.jsx(_m,{className:"text-black dark:text-white",children:"Silent"},"silent")]})]}):b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Talking preference: ",(Dt=w==null?void 0:w.miscellaneous)==null?void 0:Dt.talking.type]}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsx($r,{isIconOnly:!0,className:"p-1 rounded-full",onPress:()=>{me&&ke(),be(!me)},children:me?b.jsx(Ng,{className:"w-4 h-4 text-black dark:text-white"}):b.jsx(Bg,{className:"w-4 h-4 text-black dark:text-white"})})]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Carpooling"}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!$e,isSelected:w==null?void 0:w.carpool,onValueChange:yt=>{a({...w,carpool:yt})}}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Carpooling"}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsx($r,{isIconOnly:!0,className:"p-1 rounded-full",onPress:()=>{var yt;if($e&&ke(),w!=null&&w.carpool&&((yt=w==null?void 0:w.riders)==null?void 0:yt.length)>0){Rn({title:"More than 1 passenger",description:"More than 1 passenger is already attending. You may remove them or cancel the trip.",color:"danger"});return}Le(!$e)},children:$e?b.jsx(Ng,{className:"w-4 h-4 text-black dark:text-white"}):b.jsx(Bg,{className:"w-4 h-4 text-black dark:text-white"})})]}),b.jsxs("h1",{className:"text-red-500 font-RobotoSemiBold text-lg mt-4",children:["Danger Zone",b.jsx("br",{}),b.jsx("span",{className:"text-red-500 font-RobotoRegular text-sm",children:"Actions done here are irreversible and may affect your account. You may cancel trips up to 3 days before the trip."})]}),(h==null?void 0:h.status)==="cancelled"?b.jsxs(b.Fragment,{children:[b.jsx("h1",{className:"text-red-500 font-RobotoSemiBold text-lg mt-4",children:"Trip Cancelled"}),b.jsx("p",{className:"text-red-500 font-RobotoRegular text-sm mt-0",children:"This trip has been cancelled. You will receive a warning on your account."})]}):b.jsxs(b.Fragment,{children:[!re&&b.jsx($r,{color:"danger",className:"w-48",onPress:()=>{Ee(!0)},children:"Cancel Trip"}),re&&b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsx($r,{color:"danger",className:"w-48",onPress:()=>{Ee(!1),fetch(`${gn}/v1/trip/${i}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(yt=>yt.json()).then(yt=>{yt.success?(_(yt.trip),a(yt.trip),yt.issue_warning?Rn({title:"Trip cancelled",description:"The trip has been cancelled. You will receive a warning on your account.",color:"danger"}):Rn({title:"Trip cancelled",description:"The trip has been cancelled with no penalty.",color:"success"})):Rn({title:"Error",description:yt.error,color:"danger"})}).catch(yt=>{Rn({title:"Error",description:"An error occured.",color:"danger"})})},children:"Confirm"}),b.jsx("p",{className:"text-red-500 font-RobotoRegular text-sm",children:"Are you sure you want to cancel this trip? This action is irreversible and you will receive a warning on your account. Multiple warnings can lead to a temporary or permanent ban."})]})]})]}),b.jsxs("div",{className:"flex flex-col min-h-[20rem] lg:h-full w-full lg:w-4/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-4",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Passengers"}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Accepted (",((er=h==null?void 0:h.riders)==null?void 0:er.filter(yt=>yt.accepted).length)||0,")"]}),b.jsx("div",{className:"flex flex-col space-y-2 max-h-80 w-full overflow-y-auto ",children:(De=h==null?void 0:h.riders)==null?void 0:De.filter(yt=>yt.accepted).map(yt=>{var dt,$t;return b.jsxs("div",{className:"flex flex-row items-center justify-between bg-gray-100 dark:bg-neutral-800 p-4 rounded-xl",children:[b.jsx("div",{className:"flex flex-col",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[(dt=pe.find(or=>or.user_uuid===yt.user_uuid))==null?void 0:dt.first_name," ",($t=pe.find(or=>or.user_uuid===yt.user_uuid))==null?void 0:$t.last_name]})}),h.flow_type!=="rider_requests_driver"&&b.jsx("div",{className:"flex flex-row items-center space-x-2",children:b.jsx($r,{className:"p-1 rounded-full",isIconOnly:!0,onPress:()=>{ue(yt)},children:b.jsx(_u,{className:"w-4 h-4 text-black dark:text-white"})})})]})})}),(h==null?void 0:h.flow_type)!=="rider_requests_driver"&&b.jsxs(b.Fragment,{children:[b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Requests (",((ur=h==null?void 0:h.riders)==null?void 0:ur.filter(yt=>!yt.accepted).length)||0,")"]}),b.jsx("div",{className:"flex flex-col space-y-2 max-h-80 w-full overflow-y-auto ",children:(Sr=h==null?void 0:h.riders)==null?void 0:Sr.filter(yt=>!yt.accepted).map(yt=>{var dt,$t;return b.jsxs("div",{className:"flex flex-row items-center justify-between bg-gray-100 dark:bg-neutral-800 p-4 rounded-xl",children:[b.jsx("div",{className:"flex flex-col",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[(dt=pe.find(or=>or.user_uuid===yt.user_uuid))==null?void 0:dt.first_name," ",($t=pe.find(or=>or.user_uuid===yt.user_uuid))==null?void 0:$t.last_name]})}),b.jsxs("div",{className:"flex flex-row items-center space-x-2",children:[b.jsx($r,{className:"p-1 rounded-full",isIconOnly:!0,onPress:()=>{fetch(`${gn}/v1/trip/${i}/reject/${yt.user_uuid}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(or=>or.json()).then(or=>{or.success?_(or.trip):Rn({title:"Error",description:or.error,color:"danger"})}).catch(or=>{Rn({title:"Error",description:"An error occured.",color:"danger"})})},children:b.jsx(_u,{className:"w-4 h-4 text-black dark:text-white"})}),b.jsx($r,{className:"p-1 rounded-full",isIconOnly:!0,onPress:()=>{fetch(`${gn}/v1/trip/${i}/accept/${yt.user_uuid}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(or=>or.json()).then(or=>{or.success?_(or.trip):Rn({title:"Error",description:or.error,color:"danger"})}).catch(or=>{Rn({title:"Error",description:"An error occured.",color:"danger"})})},children:b.jsx(Ry,{className:"w-4 h-4 text-black dark:text-white"})})]})]})})})]})]})]}),se&&b.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:b.jsxs("div",{className:"flex flex-col w-[28rem] space-y-2 bg-white dark:bg-neutral-900 p-4 rounded-xl",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-lg",children:["Are you sure you want to remove ",b.jsxs("span",{className:"font-RobotoSemiBold",children:[se.address.data.first_name," ",se.address.data.last_name]})," from the trip? This action is irreversible."]}),b.jsxs("div",{className:"flex flex-row ml-auto mt-16 space-x-2",children:[b.jsx($r,{onPress:()=>{ue(null)},children:"Cancel"}),b.jsx($r,{color:"danger",onPress:()=>{fetch(`${gn}/v1/trip/${i}/remove/${se.user_uuid}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(yt=>yt.json()).then(yt=>{yt.success?(_(yt.trip),ue(null)):Rn({title:"Error",description:yt.error,color:"danger"})}).catch(yt=>{Rn({title:"Error",description:"An error occured.",color:"danger"})})},children:"Remove"})]})]})})]})},Kj="pk.eyJ1IjoibXVzdGFmYW1hc29keSIsImEiOiJjbTZva3FneTIwZjI5MmxvdWQ1dHY1NTlwIn0.oNPGEBsenNviLdx_qzcPWw",toe=async(e,t,i)=>{var h;const c=`https://api.mapbox.com/directions/v5/mapbox/driving/${e.lng},${e.lat};${t.lng},${t.lat}?geometries=geojson&access_token=${Kj}`;try{const a=(h=(await(await fetch(c)).json()).routes[0])==null?void 0:h.duration;if(a)return new Date(i.getTime()+a*1e3)}catch(_){console.error("Error fetching route:",_)}return null},MA=T2(async(e,t,i)=>{if(e.length<3){i([]);return}const c=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(e)}.json?access_token=${Kj}&autocomplete=true&limit=5`;try{const _=await(await fetch(c)).json();i(_.features||[])}catch(h){console.error("Error fetching geocode data:",h),i([])}},500),roe=({accountData:e,setAccountData:t,isFemale:i})=>{var Sr,yt,dt,$t,or,Er,mr,Pr,Fr,Bn,Xr,On,fr,Tn,kr,Dr,Br,an,Sa,Za,oa,qn,Wn,Da,Ia,ja,Wr,yi,Zn;const c=Sh(),h=new URLSearchParams(c.search),_=xs(),w=h.keys().next().value,a=w?JSON.parse(decodeURIComponent(w)):null,[A,B]=V.useState({lat:(yt=(Sr=a==null?void 0:a.body)==null?void 0:Sr.from)==null?void 0:yt.lat,lng:($t=(dt=a==null?void 0:a.body)==null?void 0:dt.from)==null?void 0:$t.lng}),[N,F]=V.useState({lat:(Er=(or=a==null?void 0:a.body)==null?void 0:or.to)==null?void 0:Er.lat,lng:(Pr=(mr=a==null?void 0:a.body)==null?void 0:mr.to)==null?void 0:Pr.lng}),[G,Q]=V.useState((Bn=(Fr=a==null?void 0:a.body)==null?void 0:Fr.from)==null?void 0:Bn.text),[te,Y]=V.useState((On=(Xr=a==null?void 0:a.body)==null?void 0:Xr.to)==null?void 0:On.text),[oe,de]=V.useState({geo_text:(Tn=(fr=a==null?void 0:a.body)==null?void 0:fr.from)==null?void 0:Tn.text,latitude:(Dr=(kr=a==null?void 0:a.body)==null?void 0:kr.from)==null?void 0:Dr.lat,longitude:(an=(Br=a==null?void 0:a.body)==null?void 0:Br.from)==null?void 0:an.lng}),[me,be]=V.useState({geo_text:(Za=(Sa=a==null?void 0:a.body)==null?void 0:Sa.to)==null?void 0:Za.text,latitude:(qn=(oa=a==null?void 0:a.body)==null?void 0:oa.to)==null?void 0:qn.lat,longitude:(Da=(Wn=a==null?void 0:a.body)==null?void 0:Wn.to)==null?void 0:Da.lng}),[pe,Se]=V.useState((Ia=a==null?void 0:a.body)!=null&&Ia.from?{lat:a.body.from.lat,lng:a.body.from.lng}:null),[$e,Le]=V.useState((ja=a==null?void 0:a.body)!=null&&ja.to?{lat:a.body.to.lat,lng:a.body.to.lng}:null),[re,Ee]=V.useState(!1),[se,ue]=V.useState(!1),[ke,ce]=V.useState([]),[Pe,xe]=V.useState([]),[Te,Ie]=V.useState(new Date((Wr=a==null?void 0:a.body)==null?void 0:Wr.datetime)),[Me,Xe]=V.useState(!1),[Ce,He]=V.useState(!1),[et,Ke]=V.useState((yi=a==null?void 0:a.body)==null?void 0:yi.females_only);let[ot,Pt]=rn.useState($f(new Date((Zn=a==null?void 0:a.body)==null?void 0:Zn.datetime).toISOString()));const[Et,Wt]=V.useState({guaranteed_ride:!1,feed:!1}),[Dt,er]=V.useState(null),De=V.useCallback(T2(async(cn,ya,Xa,js)=>{if(console.log("Updating expected arrival with:",{fromCoords:cn,toCoords:ya,departureTime:Xa}),!cn||!ya){console.log("Missing coordinates");return}const qa=await toe(cn,ya,Xa);qa&&(console.log("Setting expected arrival time:",qa),js(yn=>({...yn,expected:qa})),er(qa.toISOString()))},1e3),[]);V.useEffect(()=>{console.log("Coordinates changed:",{fromCoords:pe,toCoords:$e,date:ot.toDate()}),pe&&$e&&De(pe,$e,ot.toDate(),be)},[pe,$e,ot,De]);const ur=async(cn,ya)=>{if(console.log("Address selected:",{place:cn,type:ya}),ya==="from"){Q(cn.place_name);const Xa={lat:cn.center[1],lng:cn.center[0]};B(Xa),ce([]),de({geo_text:cn.place_name,latitude:cn.center[1],longitude:cn.center[0],expected:ot.toDate()}),Se(Xa),console.log("Set from coordinates:",Xa)}else{Y(cn.place_name);const Xa={lat:cn.center[1],lng:cn.center[0]};F(Xa),xe([]),be({geo_text:cn.place_name,latitude:cn.center[1],longitude:cn.center[0],expected:null}),Le(Xa),console.log("Set to coordinates:",Xa)}};return V.useEffect(()=>{if(!a){_("/find-ride");return}if(Object.keys(a).length===0){_("/find-ride");return}if(!a.body||Object.keys(a.body).length===0){_("/find-ride");return}},[a,_]),V.useEffect(()=>{Ie(ot.toDate())},[ot]),b.jsxs("div",{className:"flex flex-col h-screen w-full bg-white dark:bg-[#0c0c0c] p-6",children:[b.jsx("h1",{className:"text-3xl font-RobotoBold text-black dark:text-white",children:"Request a ride"}),b.jsxs("h1",{className:"text-sm lg:text-lg w-full lg:w-1/2 mt-2 font-RobotoMedium text-gray-800 dark:text-gray-300",children:["Fill in the details of where you would like to go and when you would like to go. "," ","Drivers that have similar home addresses or trips to that destination around that time "," ","will be notified. The request will also be shown on the driver's side feed."]}),b.jsx("div",{className:"relative flex flex-col w-full lg:w-1/2 h-full",children:b.jsxs("div",{className:" flex mt-4 flex-col w-full items-center justify-center rounded-xl p- bg-white dark:bg-[#0c0c0c]",children:[b.jsxs("div",{className:"relative mt- w-full",children:[b.jsx(Xn,{label:"From",placeholder:"From where?",value:G,className:"w-full",onChange:cn=>{Q(cn.target.value),MA(cn.target.value,"from",ce)}}),ke.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:ke.map((cn,ya)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>ur(cn,"from"),children:cn.place_name},ya))})]}),b.jsxs("div",{className:"relative mt-4 w-full",children:[b.jsx(Xn,{label:"To",placeholder:"To where?",value:te,className:"w-[]",onChange:cn=>{Y(cn.target.value),MA(cn.target.value,"to",xe)}}),Pe.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg mt-1",children:Pe.map((cn,ya)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>ur(cn,"to"),children:cn.place_name},ya))})]}),b.jsx("div",{className:"flex flex-row w-full mt-4 space-x-4",children:b.jsx(xx,{className:"w-full ",granularity:"second",label:"Date and time",minValue:Pm(Ff()),value:$f(new Date(Te||new Date).toISOString()),onChange:Pt})}),b.jsxs("div",{className:"flex flex-col w-full mt-4",children:[b.jsx(gi,{className:"text-black dark:text-white flex",checked:re,onChange:()=>Ee(!re),children:"I am willing to pay for gas"}),b.jsx(gi,{className:"text-black dark:text-white flex",checked:se,onChange:()=>ue(!se),children:"I am willing to pay for food"})]}),i&&b.jsx("div",{className:"flex flex-col w-full mt-4",children:b.jsx(gi,{className:"text-black dark:text-white",checked:et,onChange:()=>Ke(!et),children:"Female drivers only"})}),b.jsx("div",{className:"flex w-full my-4 bg-slate-300 dark:bg-neutral-700 h-[2px]"}),b.jsxs("div",{className:"flex flex-col w-full mt-",children:[b.jsx(gi,{className:"text-black dark:text-white",checked:Et.guaranteed_ride,onChange:()=>Wt({...Et,guaranteed_ride:!Et.guaranteed_ride}),children:"I accept that this ride request is not guaranteed to be fulfilled."}),b.jsx(gi,{className:"text-black mt-4 dark:text-white",checked:Et.feed,onChange:()=>Wt({...Et,feed:!Et.feed}),children:"I accept that this ride request will be shown on the driver's feed. My full destination address will be shown."})]}),b.jsx($r,{className:"w-full mt-6",color:"primary",onPress:()=>{let cn={body:{...a.body,to:{...a.body.to,expected:Dt}},pay_for_gas:re,pay_for_food:se};if(!Et.guaranteed_ride||!Et.feed){Rn({title:"Terms and conditions not accepted",description:"You must accept the terms and conditions to request a ride.",color:"danger"}),console.log("riderFlowBody",cn);return}fetch(`${gn}/v1/trip/rider/request`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""},body:JSON.stringify(cn)}).then(ya=>ya.json()).then(ya=>{ya.success?_("/rider-flow/trips?tab=created"):console.error(ya.error)}).catch(ya=>{console.error(ya)})},children:"Request Ride"})]})})]})},noe=()=>{const[e,t]=V.useState(null),[i,c]=V.useState(1),[h,_]=V.useState(1),w=xs();return V.useEffect(()=>{fetch(`${gn}/v1/rider/trips?page=${i}&flow_type=created`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(a=>a.json()).then(a=>{setTimeout(()=>{t(a.trips),_(a.totalPages)},100)})},[i]),e===null?b.jsx("div",{className:"flex flex-col w-full h-[calc(100vh-14rem)]  items-center justify-center",children:b.jsx(i2,{size:"lg",color:"primary"})}):b.jsxs("div",{className:"flex flex-col w-full h-full ",children:[b.jsx("div",{className:"flex overflow-x-auto max-w-screen",children:b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"To"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Status"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Driver Found"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"When"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Driver Requests"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Trip Actions"})]})}),b.jsx("tbody",{children:e.map(a=>{var A,B;return b.jsxs("tr",{onClick:()=>{w(`/ridertrip/created/${a.trip_uuid}`)},className:"hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-900",children:[b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:(A=a.waypoints.find(N=>N.type==="destination"))==null?void 0:A.geo_text}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:a.status}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:a.assigned_driver?"Yes":"No"}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:new Date(a.datetime).toLocaleString()}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:((B=a.driver_requests)==null?void 0:B.length)||0}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:b.jsx($r,{color:"primary",onPress:()=>{w(`/ridertrip/created/${a.trip_uuid}`)},children:"View Trip"})})]},a.trip_uuid)})})]})}),b.jsx("div",{className:"flex flex-col w-full",children:b.jsxs("div",{className:"flex flex-row items-center justify-center",children:[b.jsx("button",{className:"text-black dark:text-white bg-slate-100 hover:bg-slate-200 rounded-full p-2 dark:bg-neutral-900 dark:hover:bg-neutral-800",onClick:()=>{i>1&&c(i-1)},children:b.jsx(gj,{className:"text-black dark:text-white"})}),b.jsxs("h1",{className:"text-black dark:text-white mx-4 font-RobotoMedium text-lg",children:[i," / ",h]}),b.jsx("button",{className:"text-black dark:text-white bg-slate-100 hover:bg-slate-200 rounded-full p-2 dark:bg-neutral-900 dark:hover:bg-neutral-800",onClick:()=>{i<h&&c(i+1)},children:b.jsx(yj,{className:"text-black dark:text-white"})})]})})]})},aoe=()=>{const[e,t]=V.useState(null),[i,c]=V.useState(1),[h,_]=V.useState(1),w=xs(),[a,A]=V.useState(null);return V.useEffect(()=>{fetch(`${gn}/v1/rider/trips?page=${i}&flow_type=requested`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(B=>B.json()).then(B=>{setTimeout(()=>{t(B.trips),_(B.totalPages),A(B.userUUID)},100)})},[i]),e===null?b.jsx("div",{className:"flex flex-col w-full h-[calc(100vh-14rem)]  items-center justify-center",children:b.jsx(i2,{size:"lg",color:"primary"})}):e.length===0?b.jsx("div",{className:"flex flex-col space-y- bg-white dark:bg-[#0c0c0c] h-full",children:b.jsxs("div",{className:"flex flex-col w-full h-full items-center justify-center",children:[b.jsx("h1",{className:"text-4xl font-RobotoBold text-black dark:text-white",children:"No trips found."}),b.jsx("h1",{className:"text-lg font-RobotoBold text-black dark:text-white",children:"Check out what's available."}),b.jsx($r,{color:"primary",className:"mt-4",onPress:()=>{w("/find-ride")},children:"Find Rides"})]})}):b.jsxs("div",{className:"flex flex-col w-full h-full ",children:[b.jsx("div",{className:"flex overflow-x-auto max-w-screen",children:b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"To"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Status"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Accepted"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"When"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Trip Actions"})]})}),b.jsx("tbody",{children:e.map(B=>{var N,F;return b.jsxs("tr",{onClick:()=>{w(`/ridertrip/requested/${B.trip_uuid}`)},className:"hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-900",children:[b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:(N=B.waypoints.find(G=>G.type==="destination"))==null?void 0:N.geo_text}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:B.status}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:(F=B.riders.find(G=>G.user_uuid===a))!=null&&F.accepted?"Yes":"No"}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:new Date(B.datetime).toLocaleString()}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:b.jsx($r,{color:"primary",onPress:()=>{w(`/ridertrip/requested/${B.trip_uuid}`)},children:"View Trip"})})]},B.trip_uuid)})})]})}),b.jsx("div",{className:"flex flex-col w-full",children:b.jsxs("div",{className:"flex flex-row items-center justify-center",children:[b.jsx("button",{className:"text-black dark:text-white bg-slate-100 hover:bg-slate-200 rounded-full p-2 dark:bg-neutral-900 dark:hover:bg-neutral-800",onClick:()=>{i>1&&c(i-1)},children:b.jsx(gj,{className:"text-black dark:text-white"})}),b.jsxs("h1",{className:"text-black dark:text-white mx-4 font-RobotoMedium text-lg",children:[i," / ",h]}),b.jsx("button",{className:"text-black dark:text-white bg-slate-100 hover:bg-slate-200 rounded-full p-2 dark:bg-neutral-900 dark:hover:bg-neutral-800",onClick:()=>{i<h&&c(i+1)},children:b.jsx(yj,{className:"text-black dark:text-white"})})]})})]})},ioe=[{id:0,title:"My Requested Rides",show:!0},{id:1,title:"My Created Rides",show:!0}],soe=({accountData:e,setAccountData:t})=>{const i=Sh(),c=xs(),_=new URLSearchParams(i.search).get("tab"),[w,a]=V.useState("my_created_rides"),[A,B]=V.useState(0),[N,F]=V.useState({}),G=V.useRef(null),[Q,te]=V.useState(ioe);V.useEffect(()=>{_?B(_==="created"?1:0):(c(`${i.pathname}?tab=requested`,{replace:!0}),B(0))},[_,i.pathname,c]),V.useLayoutEffect(()=>{if(!G.current)return;const oe=G.current.querySelector(`#tab-${A}`);if(oe){const de={left:oe.getBoundingClientRect().left-G.current.getBoundingClientRect().left,width:oe.getBoundingClientRect().width};F(de)}},[A,Q]);const Y=oe=>{B(oe);const de=oe===1?"created":"requested";c(`${i.pathname}?tab=${de}`)};return b.jsxs("div",{className:"flex flex-col space-y-4 bg-white p-8 dark:bg-[#0c0c0c] h-screen",children:[b.jsx("h1",{className:"text-3xl font-RobotoBold text-black dark:text-white",children:"My Trips"}),b.jsx("h1",{className:"text-sm lg:text-lg w-full lg:w-1/2 mt-2 font-RobotoMedium text-gray-800 dark:text-gray-300",children:"Trips that you went on, going on, or requested."}),b.jsxs("div",{className:"relative w-full",ref:G,children:[b.jsx("div",{className:"flex justify-start w-full mx-auto mobile:overflow-auto",children:Q.map(oe=>oe.show&&b.jsx("div",{id:`tab-${oe.id}`,className:`cursor-pointer rounded-md py-2 px-4 text-black dark:text-white ${A===oe.id?"font-bold":""}`,onClick:()=>Y(oe.id),children:oe.title},oe.id))}),b.jsx("div",{className:"absolute bottom-0 h-1 bg-emerald-500 transition-all duration-300",style:N})]}),b.jsx("div",{className:"flex-1 h-full min-w-full max-h-[calc(100vh-14rem)] overflow-y-auto",children:Q.map(oe=>b.jsx("div",{className:`h-full w-full ${A===oe.id?"block":"hidden"}`,children:b.jsx("div",{className:"",children:oe.id===1?b.jsx(noe,{}):b.jsx(aoe,{})})},oe.id))})]})},ooe=({accountData:e,setAccountData:t})=>{var Se,$e,Le,re,Ee,se,ue,ke,ce,Pe,xe,Te,Ie,Me,Xe,Ce,He,et,Ke,ot,Pt,Et,Wt;const{trip_uuid:i}=Lw(),c=xs(),[h,_]=V.useState(null),[w,a]=V.useState(null),[A,B]=V.useState(null),[N,F]=V.useState(null),[G,Q]=V.useState(null),[te,Y]=V.useState(!1),[oe,de]=V.useState(null);V.useEffect(()=>{fetch(`${gn}/v1/rider/trips/${i}?flow_type=created`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Dt=>Dt.json()).then(Dt=>{var er;Dt.success?(_(Dt.trip),a(Dt.userUUID),(er=Dt==null?void 0:Dt.trip)!=null&&er.assigned_driver?fetch(`${gn}/v1/trip/${i}/rflow/driver?flow_type=assigned`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(De=>De.json()).then(De=>{De.success?B(De.driver[0]):Rn({title:"Error",description:De.error})}).catch(De=>{Rn({title:"Error",description:"An error occurred while fetching the driver profile."})}):fetch(`${gn}/v1/trip/${i}/rflow/driver?flow_type=requests`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(De=>De.json()).then(De=>{De.success?Q(De.driverRequestsProfiles):Rn({title:"Error",description:De.error})}).catch(De=>{Rn({title:"Error",description:"An error occurred while fetching the driver profile."})})):Rn({title:"Error",description:Dt.error})}).catch(Dt=>{Rn({title:"Error",description:"An error occurred while fetching the trip."})})},[]);const[me,be]=V.useState(!1),pe=()=>{fetch(`${gn}/v1/trip/${i}/rider/driver/remove/${A==null?void 0:A.user_uuid}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Dt=>Dt.json()).then(Dt=>{Dt.success?(_(Dt.trip),B(null),be(!1)):Rn({title:"Error",description:Dt.error})}).catch(Dt=>{Rn({title:"Error",description:"An error occurred while removing the driver."})})};return b.jsxs("div",{className:"flex flex-col bg-white dark:bg-[#0c0c0c] space-y-4 h-screen overflow-y-auto p-8",children:[b.jsxs("div",{className:"flex flex-row space-x-4 items-center",children:[b.jsx("button",{onClick:()=>c("/rider-flow/trips"),className:"flex items-center justify-center bg-gray-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 rounded-full p-2",children:b.jsx(d2,{className:"w-8 h-8 text-black dark:text-white"})}),b.jsxs("h1",{className:"text-2xl lg:text-3xl font-RobotoBold text-black dark:text-white",children:["Trip to ",(Se=h==null?void 0:h.waypoints.find(Dt=>Dt.type==="destination"))==null?void 0:Se.geo_text," on ",new Date(h==null?void 0:h.datetime).toLocaleString()]}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:($e=h==null?void 0:h.riders.find(Dt=>Dt.user_uuid===w))!=null&&$e.accepted?b.jsx("div",{className:"flex items-center justify-center bg-green-700 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Accepted"})}):b.jsx("div",{className:"flex items-center justify-center bg-amber-600 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Pending Acceptance"})})})]}),b.jsxs("div",{className:"grid gap-4 grid-cols-2 md:grid-cols-3  lg:grid-cols-4 xl:grid-cols-5",children:[b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"From"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(Le=h==null?void 0:h.waypoints.find(Dt=>Dt.type==="pickup"))==null?void 0:Le.geo_text})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"To"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(re=h==null?void 0:h.waypoints.find(Dt=>Dt.type==="destination"))==null?void 0:re.geo_text})]}),b.jsx("div",{className:"flex flex-col justify-between bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:b.jsxs("div",{children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"When"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:new Date(h==null?void 0:h.datetime).toLocaleString()})]})}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Expected Arrival"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:new Date((Ee=h==null?void 0:h.waypoints.find(Dt=>Dt.type==="destination"))==null?void 0:Ee.expected).toLocaleString()})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Fare"}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoBold text-3xl",children:["$",(se=h==null?void 0:h.fare)==null?void 0:se.aggregated]})]})]}),b.jsxs("div",{className:"flex mobile:flex-col space-y-4 lg:space-y-0 lg:flex-row w-full h-full lg:space-x-4",children:[b.jsxs("div",{className:"flex flex-col min-h-[20rem] h-auto overflow-y-auto lg:h-full w-full lg:w-8/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-6",children:[h!=null&&h.assigned_driver?b.jsxs("div",{className:"flex flex-col space-y-",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Trip Summary"}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoLight text-md",children:"Congratulations! You've found a driver for this trip!"})]}):b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Trip Request"}),A&&b.jsxs("div",{className:"flex flex-col space-y-2 mt-2",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg",children:"Driver Details"}),b.jsxs("div",{className:"flex flex-row items-center justify-between",children:[b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx("img",{src:A==null?void 0:A.profile_picture,alt:"Driver Profile",className:"w-12 h-12 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[A==null?void 0:A.first_name," ",A==null?void 0:A.last_name]}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular italic text-sm",children:A==null?void 0:A.email})]})]}),b.jsx($r,{isIconOnly:!0,color:"danger",radius:"full",onPress:()=>{be(!0)},children:b.jsx(Kre,{className:"w-6 h-6 text-white"})})]})]}),!(h!=null&&h.assigned_driver)&&b.jsx("div",{className:"flex flex-col space-y-2 mt-2",children:b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg",children:"No driver assigned. You will see fare details here once you accept a driver."})}),(h==null?void 0:h.assigned_driver)&&b.jsxs(b.Fragment,{children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Fare Details"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(ue=h==null?void 0:h.fare)==null?void 0:ue.trip,disabled:!0,label:"Trip Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(ke=h==null?void 0:h.fare)==null?void 0:ke.food,disabled:!0,label:"Food Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(ce=h==null?void 0:h.fare)==null?void 0:ce.gas,disabled:!0,label:"Gas Fare",className:"w-full"})}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Aggregated Fare: $",(Pe=h==null?void 0:h.fare)==null?void 0:Pe.aggregated]})]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Preferences"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:(xe=h==null?void 0:h.miscellaneous)==null?void 0:xe.music.can_be_controlled}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request music"})]}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:(Te=h==null?void 0:h.miscellaneous)==null?void 0:Te.ac.can_be_controlled}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request AC"})]}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Talking preference: ",(Ie=h==null?void 0:h.miscellaneous)==null?void 0:Ie.talking.type]})})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Carpooling"}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:h==null?void 0:h.carpool}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Carpooling"})]}),b.jsxs("h1",{className:"text-red-500 font-RobotoSemiBold text-lg mt-4",children:["Danger Zone",b.jsx("br",{}),b.jsx("span",{className:"text-red-500 font-RobotoRegular text-sm",children:"Actions done here are irreversible and may affect your account."})]}),te?b.jsxs("div",{className:"flex flex-col space-y-2 mt-4",children:[b.jsx("p",{className:"text-red-500 font-RobotoRegular text-sm",children:"Are you sure you want to remove this trip request?"}),b.jsx($r,{color:"danger",className:"w-48",onPress:()=>{fetch(`${gn}/v1/trip/${i}/rider/request/remove`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Dt=>Dt.json()).then(Dt=>{Dt.success?c("/rider-flow/trips"):Rn({title:"Error",description:Dt.error})}).catch(Dt=>{Rn({title:"Error",description:"An error occurred while removing the trip request."})})},children:"Confirm Removal"})]}):b.jsx($r,{color:"danger",className:"w-48 mt-4",onPress:()=>{Y(!0)},children:"Remove from Trip"})]}),b.jsxs("div",{className:"flex flex-col min-h-[20rem] lg:h-full w-full lg:w-4/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-4",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Driver Requests"}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:[((Me=h==null?void 0:h.driver_requests)==null?void 0:Me.length)||0," ",((Xe=h==null?void 0:h.driver_requests)==null?void 0:Xe.length)===1?" request":" requests"]}),b.jsx("div",{className:"flex flex-col space-y-2 h-full w-full overflow-y-auto ",children:(Ce=h==null?void 0:h.driver_requests)==null?void 0:Ce.map(Dt=>{var er,De,ur;return b.jsxs("div",{onClick:()=>{de(Dt)},className:"flex flex-row items-center space-x-2 bg-gray-100 hover:bg-gray-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 hover:cursor-pointer p-4 rounded-xl",children:[b.jsx("img",{src:(er=G==null?void 0:G.find(Sr=>Sr.user_uuid===Dt.user_uuid))==null?void 0:er.profile_picture,alt:"Driver Profile",className:"w-12 h-12 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[(De=G==null?void 0:G.find(Sr=>Sr.user_uuid===Dt.user_uuid))==null?void 0:De.first_name," ",(ur=G==null?void 0:G.find(Sr=>Sr.user_uuid===Dt.user_uuid))==null?void 0:ur.last_name]}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Requested on ",new Date(Dt.requested_at).toLocaleString()]})]})]})})})]})]}),oe&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:b.jsxs("div",{className:"flex flex-col bg-white dark:bg-neutral-900 p-4 rounded-xl",children:[b.jsxs("div",{className:"flex flex-row justify-between",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Driver Request"}),b.jsx("button",{className:"p-2 hover:bg-slate-100 dark:hover:bg-neutral-800 rounded-full",onClick:()=>de(null),children:b.jsx(_u,{className:"w-6 h-6 text-black dark:text-white"})})]}),b.jsxs("div",{className:"flex flex-row my-3 items-center space-x-2 bg-gray-100 dark:bg-neutral-800 p-4 rounded-xl",children:[b.jsx("img",{src:(He=G==null?void 0:G.find(Dt=>Dt.user_uuid===(oe==null?void 0:oe.user_uuid)))==null?void 0:He.profile_picture,alt:"Driver Profile",className:"w-12 h-12 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[(et=G==null?void 0:G.find(Dt=>Dt.user_uuid===(oe==null?void 0:oe.user_uuid)))==null?void 0:et.first_name," ",(Ke=G==null?void 0:G.find(Dt=>Dt.user_uuid===(oe==null?void 0:oe.user_uuid)))==null?void 0:Ke.last_name]}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Requested on ",new Date(oe==null?void 0:oe.requested_at).toLocaleString()]})]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Fare Details"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(ot=oe==null?void 0:oe.fare)==null?void 0:ot.trip,disabled:!0,label:"Trip Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(Pt=oe==null?void 0:oe.fare)==null?void 0:Pt.food,disabled:!0,label:"Food Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(Et=oe==null?void 0:oe.fare)==null?void 0:Et.gas,disabled:!0,label:"Gas Fare",className:"w-full"})}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Total Fare: $",(Wt=oe==null?void 0:oe.fare)==null?void 0:Wt.aggregated]})]}),b.jsxs("div",{className:"flex flex-row space-x-4",children:[b.jsx($r,{color:"danger",className:"w-full mt-4",onPress:()=>{fetch(`${gn}/v1/trip/${i}/rider/request/reject/${oe==null?void 0:oe.user_uuid}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Dt=>Dt.json()).then(Dt=>{Dt.success?(de(null),_(Dt.trip)):Rn({title:"Error",description:Dt.error})}).catch(Dt=>{Rn({title:"Error",description:"An error occurred while rejecting the driver request."})})},children:"Reject Request"}),b.jsx($r,{onClick:()=>{fetch(`${gn}/v1/trip/${i}/rider/request/accept/${oe==null?void 0:oe.user_uuid}`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Dt=>Dt.json()).then(Dt=>{Dt.success?(de(null),_(Dt.trip),fetch(`${gn}/v1/trip/${i}/rflow/driver?flow_type=assigned`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(er=>er.json()).then(er=>{er.success?B(er.driver[0]):Rn({title:"Error",description:er.error})}).catch(er=>{Rn({title:"Error",description:"An error occurred while fetching the driver profile."})})):Rn({title:"Error",description:Dt.error})}).catch(Dt=>{Rn({title:"Error",description:"An error occurred while accepting the driver request."})})},color:"primary",className:"w-full mt-4",children:"Accept Request"})]})]})}),me&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:b.jsxs("div",{className:"flex flex-col bg-white dark:bg-neutral-900 p-4 rounded-xl",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Remove Driver"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Are you sure you want to remove this driver from the trip?"}),b.jsxs("div",{className:"flex flex-row space-x-4",children:[b.jsx($r,{color:"default",className:"w-full mt-4",onPress:()=>be(!1),children:"Cancel"}),b.jsx($r,{color:"danger",className:"w-full mt-4",onPress:()=>{pe()},children:"Confirm Removal"})]})]})})]})},loe=({accountData:e,setAccountData:t})=>{var G,Q,te,Y,oe,de,me,be,pe,Se,$e,Le,re,Ee,se,ue,ke,ce;const{trip_uuid:i}=Lw(),c=xs(),[h,_]=V.useState(null),[w,a]=V.useState(null),[A,B]=V.useState(null),[N,F]=V.useState(!1);return V.useEffect(()=>{fetch(`${gn}/v1/rider/trips/${i}?flow_type=requested`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Pe=>Pe.json()).then(Pe=>{Pe.success?(_(Pe.trip),a(Pe.userUUID),fetch(`${gn}/v1/trip/${i}/rflow/driver?flow_type=requests`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(xe=>xe.json()).then(xe=>{xe.success?B(xe.driver):Rn({title:"Error",description:xe.error})}).catch(xe=>{Rn({title:"Error",description:"An error occurred while fetching the driver profile."})})):Rn({title:"Error",description:Pe.error})}).catch(Pe=>{Rn({title:"Error",description:"An error occurred while fetching the trip."})})},[]),b.jsxs("div",{className:"flex flex-col bg-white dark:bg-[#0c0c0c] space-y-4 h-screen overflow-y-auto p-8",children:[b.jsxs("div",{className:"flex flex-row space-x-4 items-center",children:[b.jsx("button",{onClick:()=>c("/rider-flow/trips"),className:"flex items-center justify-center bg-gray-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 rounded-full p-2",children:b.jsx(d2,{className:"w-8 h-8 text-black dark:text-white"})}),b.jsxs("h1",{className:"text-2xl lg:text-3xl font-RobotoBold text-black dark:text-white",children:["Trip to ",(G=h==null?void 0:h.waypoints.find(Pe=>Pe.type==="destination"))==null?void 0:G.geo_text," on ",new Date(h==null?void 0:h.datetime).toLocaleString()]}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:(Q=h==null?void 0:h.riders.find(Pe=>Pe.user_uuid===w))!=null&&Q.accepted?b.jsx("div",{className:"flex items-center justify-center bg-green-700 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Accepted"})}):b.jsx("div",{className:"flex items-center justify-center bg-amber-600 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Pending Acceptance"})})})]}),b.jsxs("div",{className:"grid gap-4 grid-cols-2 md:grid-cols-3  lg:grid-cols-4 xl:grid-cols-5",children:[b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"From"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(te=h==null?void 0:h.waypoints.find(Pe=>Pe.type==="pickup"))==null?void 0:te.geo_text})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"To"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(Y=h==null?void 0:h.waypoints.find(Pe=>Pe.type==="destination"))==null?void 0:Y.geo_text})]}),b.jsx("div",{className:"flex flex-col justify-between bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:b.jsxs("div",{children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"When"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:new Date(h==null?void 0:h.datetime).toLocaleString()})]})}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Expected Arrival"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:new Date((oe=h==null?void 0:h.waypoints.find(Pe=>Pe.type==="destination"))==null?void 0:oe.expected).toLocaleString()})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Fare"}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoBold text-3xl",children:["$",(de=h==null?void 0:h.fare)==null?void 0:de.aggregated]})]})]}),b.jsxs("div",{className:"flex mobile:flex-col space-y-4 lg:space-y-0 lg:flex-row w-full h-full lg:space-x-4",children:[b.jsxs("div",{className:"flex flex-col min-h-[20rem] h-auto overflow-y-auto lg:h-full w-full lg:w-8/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-6",children:[(me=h==null?void 0:h.riders.find(Pe=>Pe.user_uuid===w))!=null&&me.accepted?b.jsxs("div",{className:"flex flex-col space-y-",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Trip Summary"}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoLight text-md",children:"Congratulations! You're a passenger on this trip."})]}):b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Trip Request"}),A&&b.jsxs("div",{className:"flex flex-col space-y-2 mt-2",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg",children:"Driver Details"}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx("img",{src:A.profile_picture,alt:"Driver Profile",className:"w-12 h-12 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[A.first_name," ",A.last_name]}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular italic text-sm",children:A.email})]})]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Fare Details"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(be=h==null?void 0:h.fare)==null?void 0:be.trip,disabled:!0,label:"Trip Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(pe=h==null?void 0:h.fare)==null?void 0:pe.food,disabled:!0,label:"Food Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(Se=h==null?void 0:h.fare)==null?void 0:Se.gas,disabled:!0,label:"Gas Fare",className:"w-full"})}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Aggregated Fare: $",($e=h==null?void 0:h.fare)==null?void 0:$e.aggregated]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Preferences"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:(Le=h==null?void 0:h.miscellaneous)==null?void 0:Le.music.can_be_controlled}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request music"})]}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:(re=h==null?void 0:h.miscellaneous)==null?void 0:re.ac.can_be_controlled}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request AC"})]}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Talking preference: ",(Ee=h==null?void 0:h.miscellaneous)==null?void 0:Ee.talking.type]})})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Carpooling"}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:h==null?void 0:h.carpool}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Carpooling"})]}),b.jsxs("h1",{className:"text-red-500 font-RobotoSemiBold text-lg mt-4",children:["Danger Zone",b.jsx("br",{}),b.jsx("span",{className:"text-red-500 font-RobotoRegular text-sm",children:"Actions done here are irreversible and may affect your account."})]}),N?b.jsxs("div",{className:"flex flex-col space-y-2 mt-4",children:[b.jsx("p",{className:"text-red-500 font-RobotoRegular text-sm",children:"Are you sure you want to remove this trip request?"}),b.jsx($r,{color:"danger",className:"w-48",onPress:()=>{fetch(`${gn}/v1/trip/${i}/rider/request/remove`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Pe=>Pe.json()).then(Pe=>{Pe.success?c("/rider-flow/trips"):Rn({title:"Error",description:Pe.error})}).catch(Pe=>{Rn({title:"Error",description:"An error occurred while removing the trip request."})})},children:"Confirm Removal"})]}):b.jsx($r,{color:"danger",className:"w-48 mt-4",onPress:()=>{F(!0)},children:"Remove from Trip"})]}),b.jsxs("div",{className:"flex flex-col min-h-[20rem] lg:h-full w-full lg:w-4/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-4",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Passengers"}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Accepted (",((se=h==null?void 0:h.riders)==null?void 0:se.filter(Pe=>Pe.accepted).length)||0,")"]}),b.jsx("div",{className:"flex flex-col space-y-2 max-h-80 w-full overflow-y-auto ",children:(ue=h==null?void 0:h.riders)==null?void 0:ue.filter(Pe=>Pe.accepted).map(Pe=>b.jsx("div",{className:"flex flex-row items-center justify-between bg-gray-100 dark:bg-neutral-800 p-4 rounded-xl",children:b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[Pe.address.data.first_name," ",Pe.address.data.last_name]}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Accepted on ",new Date(Pe.accepted_at).toLocaleString()]})]})}))}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Requests (",((ke=h==null?void 0:h.riders)==null?void 0:ke.filter(Pe=>!Pe.accepted).length)||0,")"]}),b.jsx("div",{className:"flex flex-col space-y-2 max-h-80 w-full overflow-y-auto ",children:(ce=h==null?void 0:h.riders)==null?void 0:ce.filter(Pe=>!Pe.accepted).map(Pe=>b.jsx("div",{className:"flex flex-row items-center justify-between bg-gray-100 dark:bg-neutral-800 p-4 rounded-xl",children:b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[Pe.address.data.first_name," ",Pe.address.data.last_name]}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Requested on ",new Date(Pe.created_at).toLocaleString()]})]})}))})]})]})]})},coe="pk.eyJ1IjoibXVzdGFmYW1hc29keSIsImEiOiJjbTZva3FneTIwZjI5MmxvdWQ1dHY1NTlwIn0.oNPGEBsenNviLdx_qzcPWw",AA=T2(async(e,t,i)=>{if(e.length<3){i([]);return}const c=`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(e)}.json?access_token=${coe}&autocomplete=true&limit=5`;try{const _=await(await fetch(c)).json();i(_.features||[])}catch(h){console.error("Error fetching geocode data:",h),i([])}},500),uoe=({accountData:e,setAccountData:t})=>{var Pt,Et,Wt,Dt,er,De,ur,Sr;const[i,c]=V.useState({lat:29.6436,lng:-82.3549}),[h,_]=V.useState(null),[w,a]=V.useState("University of Florida"),[A,B]=V.useState(""),[N,F]=V.useState(null);xs();const[G,Q]=V.useState([]),[te,Y]=V.useState([]),[oe,de]=V.useState({geo_text:"University of Florida",latitude:29.6436,longitude:-82.3549}),[me,be]=V.useState({});let[pe,Se]=rn.useState($f(new Date().toISOString()));const[$e,Le]=V.useState(null),[re,Ee]=V.useState([]),[se,ue]=V.useState(null),[ke,ce]=V.useState(new Date),[Pe,xe]=V.useState(!1),[Te,Ie]=V.useState(0),[Me,Xe]=V.useState(0),[Ce,He]=V.useState(0),[et,Ke]=V.useState(0);V.useEffect(()=>{let yt=0;yt+=Number(Te)||0,yt+=Number(Me)||0,yt+=Number(Ce)||0,Ke(yt)},[Te,Me,Ce]),V.useEffect(()=>{ce(pe.toDate())},[pe]);const ot=async(yt,dt)=>{if(dt==="from"){a(yt.place_name);const $t={lat:yt.center[1],lng:yt.center[0]};c($t),Q([]),de({geo_text:yt.place_name,latitude:yt.center[1],longitude:yt.center[0],expected:pe.toDate()})}else{B(yt.place_name);const $t={lat:yt.center[1],lng:yt.center[0]};_($t),Y([]),be({geo_text:yt.place_name,latitude:yt.center[1],longitude:yt.center[0],expected:null})}};return b.jsxs("div",{className:"flex flex-col w-full h-full",children:[b.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row items-center w-full",children:[b.jsxs("div",{className:"relative mt- w-full",children:[b.jsx(Xn,{label:"From",placeholder:"From where?",value:w,className:"w-full",onChange:yt=>{a(yt.target.value),AA(yt.target.value,"from",Q)}}),G.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg",children:G.map((yt,dt)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>ot(yt,"from"),children:yt.place_name},dt))})]}),b.jsxs("div",{className:"relative w-full",children:[b.jsx(Xn,{label:"To",placeholder:"To where?",value:A,className:"w-[]",onChange:yt=>{B(yt.target.value),AA(yt.target.value,"to",Y)}}),te.length>0&&b.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-lg shadow-lg",children:te.map((yt,dt)=>b.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-200",onClick:()=>ot(yt,"to"),children:yt.place_name},dt))})]}),b.jsx("div",{className:"flex flex-row w-full space-x-4",children:b.jsx(xx,{className:"w-full ",granularity:"second",label:"Date and time",minValue:Pm(Ff()),value:$f(new Date(ke||new Date).toISOString()),onChange:Se})}),b.jsx($r,{className:"w-64",variant:"solid",color:"primary",onClick:()=>{const yt={body:{from:oe,to:me,datetime:ke.toISOString()}};fetch(`${gn}/v1/trip/driver/feed`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""},body:JSON.stringify(yt)}).then(dt=>dt.json()).then(dt=>{dt.success?(Le(dt.trips),Ee(dt.riderProfiles)):Rn({title:"Error fetching trips",description:dt.error,color:"danger"})}).catch(dt=>{Rn({title:"Error fetching trips",description:"Please try again.",color:"danger"}),console.error(dt)})},children:"Find Rides"})]}),!$e&&b.jsx(b.Fragment,{children:b.jsx("div",{className:"flex flex-col w-full h-max mt-16 items-center justify-center",children:b.jsx("h1",{className:"text-2xl font-RobotoBold text-black dark:text-white",children:"Start a search to find rides"})})}),$e&&$e.length===0&&b.jsx(b.Fragment,{children:b.jsx("div",{className:"flex flex-col w-full h-max mt-16 items-center justify-center",children:b.jsx("h1",{className:"text-2xl font-RobotoBold text-black dark:text-white",children:"No trips found"})})}),$e&&$e.length>0&&b.jsx("div",{className:"flex overflow-x-auto max-w-screen mt-4",children:b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"To"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Requested By"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Pickup Time"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Rider willing to"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Trip Actions"})]})}),b.jsx("tbody",{children:$e.map(yt=>{var dt,$t,or,Er,mr,Pr,Fr,Bn,Xr,On;return b.jsxs("tr",{onClick:()=>{},className:"hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-900",children:[b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:(dt=yt.waypoints.find(fr=>fr.type==="destination"))==null?void 0:dt.geo_text}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:b.jsxs("div",{className:"flex flex-row items-center gap-3",children:[b.jsx("img",{src:($t=re.find(fr=>fr.user_uuid===yt.posted_by))==null?void 0:$t.profile_picture,className:"w-10 h-10 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("h1",{className:"text-sm font-RobotoBold text-black dark:text-white",children:[(or=re.find(fr=>fr.user_uuid===yt.posted_by))==null?void 0:or.first_name," ",(Er=re.find(fr=>fr.user_uuid===yt.posted_by))==null?void 0:Er.last_name]}),b.jsxs("h1",{className:"text-xs font-RobotoBold text-black dark:text-white",children:["Gender: ",((Pr=(mr=re.find(fr=>fr.user_uuid===yt.posted_by))==null?void 0:mr.gender)==null?void 0:Pr.charAt(0).toUpperCase())+((Bn=(Fr=re.find(fr=>fr.user_uuid===yt.posted_by))==null?void 0:Fr.gender)==null?void 0:Bn.slice(1))]})]})]})}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:new Date(yt.datetime).toLocaleString()}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:b.jsxs("div",{className:"flex flex-col  gap-0",children:[b.jsxs("h1",{className:"text-sm font-RobotoBold text-black dark:text-white",children:["Pay for food: ",(Xr=yt.riders.find(fr=>fr.user_uuid===yt.posted_by))!=null&&Xr.willing.pay_food?"Yes":"No"]}),b.jsxs("h1",{className:"text-sm font-RobotoBold text-black dark:text-white",children:["Pay for gas: ",(On=yt.riders.find(fr=>fr.user_uuid===yt.posted_by))!=null&&On.willing.pay_gas?"Yes":"No"]})]})}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:b.jsx($r,{color:"primary",onPress:()=>{ue(yt)},children:"Request to drive"})})]},yt.trip_uuid)})})]})}),se&&b.jsx("div",{className:"fixed z-50 inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:b.jsxs("div",{className:"flex flex-col min-w-96 h-auto bg-white dark:bg-neutral-900 rounded-xl p-6",children:[b.jsxs("div",{className:"flex flex-row items-center justify-between",children:[b.jsx("h1",{className:"text-lg font-RobotoBold text-black dark:text-white",children:"Trip Request"}),b.jsx("button",{onClick:()=>{ue(null)},className:"p-2 hover:bg-slate-100 dark:hover:bg-neutral-800 rounded-full",children:b.jsx(_u,{className:"w-6 h-6 text-black dark:text-white"})})]}),b.jsxs("div",{className:"flex flex-row items-center gap-3 mt-3",children:[b.jsx("img",{src:(Pt=re.find(yt=>yt.user_uuid===se.posted_by))==null?void 0:Pt.profile_picture,className:"w-10 h-10 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("h1",{className:"text-sm font-RobotoBold text-black dark:text-white",children:[(Et=re.find(yt=>yt.user_uuid===se.posted_by))==null?void 0:Et.first_name," ",(Wt=re.find(yt=>yt.user_uuid===se.posted_by))==null?void 0:Wt.last_name]}),b.jsxs("h1",{className:"text-xs font-RobotoBold text-black dark:text-white",children:["Gender: ",((er=(Dt=re.find(yt=>yt.user_uuid===se.posted_by))==null?void 0:Dt.gender)==null?void 0:er.charAt(0).toUpperCase())+((ur=(De=re.find(yt=>yt.user_uuid===se.posted_by))==null?void 0:De.gender)==null?void 0:ur.slice(1))]})]})]}),b.jsxs("h1",{className:"mt-3 text-md font-RobotoRegular text-black dark:text-white",children:["When: ",new Date(se.datetime).toLocaleString()]}),b.jsxs("h1",{className:"mt-3 text-md font-RobotoRegular text-black dark:text-white",children:["Pickup: ",(Sr=se.waypoints.find(yt=>yt.type==="destination"))==null?void 0:Sr.geo_text]}),b.jsx("h1",{className:"mt-3 text-md font-RobotoRegular text-black dark:text-white",children:"Set your fare:"}),b.jsx(gs,{label:"Food Cost",value:Te,onChange:yt=>Ie(yt.target.value),className:"mt-3"}),b.jsx(gs,{label:"Gas Cost",value:Me,onChange:yt=>Xe(yt.target.value),className:"mt-3"}),b.jsx(gs,{label:"Trip Cost",value:Ce,onChange:yt=>He(yt.target.value),className:"mt-3"}),b.jsxs("h1",{className:"mt-3 text-md font-RobotoRegular text-black dark:text-white",children:["Total Fare: $",et.toFixed(2)]}),b.jsx(gi,{className:"text-black mt-2 dark:text-white flex",checked:Pe,onChange:()=>xe(!Pe),children:"I accept the terms and conditions. I accept that my request might be rejected."}),b.jsx($r,{className:"w-full ml-auto mt-3",variant:"solid",color:"primary",onClick:()=>{Pe?fetch(`${gn}/v1/trip/${se.trip_uuid}/driver/request`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""},body:JSON.stringify({food:Number(Te),gas:Number(Me),trip:Number(Ce),total:Number(et)})}).then(yt=>yt.json()).then(yt=>{yt.success?(window.location.href="/find-riders?tab=requested",ue(null)):Rn({title:"Error",description:yt.error,color:"danger"})}).catch(yt=>{Rn({title:"Error",description:"Please try again.",color:"danger"})}):Rn({title:"Error",description:"Please accept the terms and conditions.",color:"danger"})},children:"Request to drive"})]})})]})},doe=()=>{const[e,t]=V.useState([]),i=xs();return V.useEffect(()=>{fetch(`${gn}/v1/trip/driver/trips/requested`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(c=>c.json()).then(c=>{c.success?t(c.trips):Rn({title:"Error",description:c.error})}).catch(c=>{Rn({title:"Error",description:"An error occurred while fetching the trips."})})},[]),e===null?b.jsx("div",{className:"flex flex-col w-full h-[calc(100vh-14rem)]  items-center justify-center",children:b.jsx(i2,{size:"lg",color:"primary"})}):b.jsx("div",{className:"flex flex-col w-full h-full ",children:b.jsx("div",{className:"flex overflow-x-auto max-w-screen",children:b.jsxs("table",{className:"w-full",children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"To"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Status"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Driver Found"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"When"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Driver Requests"}),b.jsx("th",{className:"text-left px-6 py-4 text-black dark:text-white",children:"Trip Actions"})]})}),b.jsx("tbody",{children:e.map(c=>{var h,_;return b.jsxs("tr",{onClick:()=>{i(`/driver-flow-trips/requested/${c.trip_uuid}`)},className:"hover:cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-900",children:[b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:(h=c.waypoints.find(w=>w.type==="destination"))==null?void 0:h.geo_text}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:c.status}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:c.assigned_driver?"Yes":"No"}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:new Date(c.datetime).toLocaleString()}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:((_=c.driver_requests)==null?void 0:_.length)||0}),b.jsx("td",{className:"text-left text-black dark:text-white px-6 py-4",children:b.jsx($r,{color:"primary",onPress:()=>{i(`/driver-flow-trips/requested/${c.trip_uuid}`)},children:"View Trip"})})]},c.trip_uuid)})})]})})})},hoe=[{id:0,title:"Find Riders",show:!0},{id:1,title:"Requested Rides",show:!0}],foe=({accountData:e,setAccountData:t})=>{const i=Sh(),c=xs(),_=new URLSearchParams(i.search).get("tab"),[w,a]=V.useState(0),[A,B]=V.useState({}),N=V.useRef(null),[F,G]=V.useState(hoe);V.useEffect(()=>{_?a(_==="requested"?1:0):(c(`${i.pathname}?tab=feed`,{replace:!0}),a(0))},[_,i.pathname,c]),V.useLayoutEffect(()=>{if(!N.current)return;const te=N.current.querySelector(`#tab-${w}`);if(te){const Y={left:te.getBoundingClientRect().left-N.current.getBoundingClientRect().left,width:te.getBoundingClientRect().width};B(Y)}},[w,F]);const Q=te=>{a(te);const Y=te===1?"requested":"feed";c(`${i.pathname}?tab=${Y}`)};return b.jsxs("div",{className:"flex flex-col space-y-4 bg-white p-8 dark:bg-[#0c0c0c] h-screen",children:[b.jsx("h1",{className:"text-3xl font-RobotoBold text-black dark:text-white",children:"Find Riders"}),b.jsx("h1",{className:"text-sm lg:text-lg w-full lg:w-1/2 mt-2 font-RobotoMedium text-gray-800 dark:text-gray-300",children:"Find rides or view trips that you have requested to be a driver for."}),b.jsxs("div",{className:"relative w-full",ref:N,children:[b.jsx("div",{className:"flex justify-start w-full mx-auto mobile:overflow-auto",children:F.map(te=>te.show&&b.jsx("div",{id:`tab-${te.id}`,className:`cursor-pointer rounded-md py-2 px-4 text-black dark:text-white ${w===te.id?"font-bold":""}`,onClick:()=>Q(te.id),children:te.title},te.id))}),b.jsx("div",{className:"absolute bottom-0 h-1 bg-emerald-500 transition-all duration-300",style:A})]}),b.jsx("div",{className:"flex-1 h-full min-w-full max-h-[calc(100vh-14rem)] overflow-y-auto",children:F.map(te=>b.jsx("div",{className:`h-full w-full ${w===te.id?"block":"hidden"}`,children:b.jsxs("div",{className:"",children:[te.id===0&&b.jsx(uoe,{accountData:e,setAccountData:t}),te.id===1&&b.jsx(doe,{})]})},te.id))})]})},poe=({accountData:e,setAccountData:t})=>{var me,be,pe,Se,$e,Le,re,Ee,se,ue,ke,ce,Pe,xe,Te,Ie,Me,Xe,Ce,He,et,Ke,ot;const{trip_uuid:i}=Lw(),c=xs(),[h,_]=V.useState(null),[w,a]=V.useState(null),[A,B]=V.useState(null),[N,F]=V.useState(null),[G,Q]=V.useState(null),[te,Y]=V.useState(!1),[oe,de]=V.useState(null);return V.useEffect(()=>{fetch(`${gn}/v1/rider/trips/${i}`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Pt=>Pt.json()).then(Pt=>{var Et;Pt.success?(_(Pt.trip),a(Pt.userUUID),(Et=Pt==null?void 0:Pt.trip)!=null&&Et.assigned_driver?fetch(`${gn}/v1/trip/${i}/rflow/driver?flow_type=assigned`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Wt=>Wt.json()).then(Wt=>{Wt.success?B(Wt.driver[0]):Rn({title:"Error",description:Wt.error})}).catch(Wt=>{Rn({title:"Error",description:"An error occurred while fetching the driver profile."})}):fetch(`${gn}/v1/trip/${i}/rflow/driver?flow_type=requests`,{credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Wt=>Wt.json()).then(Wt=>{Wt.success?Q(Wt.driverRequestsProfiles):Rn({title:"Error",description:Wt.error})}).catch(Wt=>{Rn({title:"Error",description:"An error occurred while fetching the driver profile."})})):Rn({title:"Error",description:Pt.error})}).catch(Pt=>{Rn({title:"Error",description:"An error occurred while fetching the trip."})})},[]),b.jsxs("div",{className:"flex flex-col bg-white dark:bg-[#0c0c0c] space-y-4 h-screen overflow-y-auto p-8",children:[b.jsxs("div",{className:"flex flex-row space-x-4 items-center",children:[b.jsx("button",{onClick:()=>c("/rider-flow/trips"),className:"flex items-center justify-center bg-gray-200 dark:bg-neutral-900 dark:hover:bg-neutral-800 rounded-full p-2",children:b.jsx(d2,{className:"w-8 h-8 text-black dark:text-white"})}),b.jsxs("h1",{className:"text-2xl lg:text-3xl font-RobotoBold text-black dark:text-white",children:["Trip to ",(me=h==null?void 0:h.waypoints.find(Pt=>Pt.type==="destination"))==null?void 0:me.geo_text," on ",new Date(h==null?void 0:h.datetime).toLocaleString()]}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:(be=h==null?void 0:h.riders.find(Pt=>Pt.user_uuid===w))!=null&&be.accepted?b.jsx("div",{className:"flex items-center justify-center bg-green-700 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Accepted"})}):b.jsx("div",{className:"flex items-center justify-center bg-amber-600 text-white rounded-full px-4 py-2",children:b.jsx("p",{className:"text-sm font-RobotoBold",children:"Pending Acceptance"})})})]}),b.jsxs("div",{className:"grid gap-4 grid-cols-2 md:grid-cols-3  lg:grid-cols-4 xl:grid-cols-5",children:[b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"From"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(pe=h==null?void 0:h.waypoints.find(Pt=>Pt.type==="pickup"))==null?void 0:pe.geo_text})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"To"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:(Se=h==null?void 0:h.waypoints.find(Pt=>Pt.type==="destination"))==null?void 0:Se.geo_text})]}),b.jsx("div",{className:"flex flex-col justify-between bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:b.jsxs("div",{children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"When"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:new Date(h==null?void 0:h.datetime).toLocaleString()})]})}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Expected Arrival"}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:new Date(($e=h==null?void 0:h.waypoints.find(Pt=>Pt.type==="destination"))==null?void 0:$e.expected).toLocaleString()})]}),b.jsxs("div",{className:"flex flex-col bg-gray-200 dark:bg-neutral-900 p-4 rounded-xl h-32",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Fare"}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoBold text-3xl",children:["$",(Le=h==null?void 0:h.fare)==null?void 0:Le.aggregated]})]})]}),b.jsxs("div",{className:"flex mobile:flex-col space-y-4 lg:space-y-0 lg:flex-row w-full h-full lg:space-x-4",children:[b.jsxs("div",{className:"flex flex-col min-h-[20rem] h-auto overflow-y-auto lg:h-full w-full lg:w-8/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-6",children:[h!=null&&h.assigned_driver?b.jsxs("div",{className:"flex flex-col space-y-",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Trip Summary"}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoLight text-md",children:"Congratulations! You've found a driver for this trip!"})]}):b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Trip Request"}),A&&b.jsxs("div",{className:"flex flex-col space-y-2 mt-2",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg",children:"Driver Details"}),b.jsx("div",{className:"flex flex-row items-center justify-between",children:b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx("img",{src:A==null?void 0:A.profile_picture,alt:"Driver Profile",className:"w-12 h-12 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[A==null?void 0:A.first_name," ",A==null?void 0:A.last_name]}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular italic text-sm",children:A==null?void 0:A.email})]})]})})]}),!(h!=null&&h.assigned_driver)&&b.jsx("div",{className:"flex flex-col space-y-2 mt-2",children:b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg",children:"No driver assigned. You will see fare details here once the riders accepts your request."})}),(h==null?void 0:h.assigned_driver)&&b.jsxs(b.Fragment,{children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Fare Details"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(re=h==null?void 0:h.fare)==null?void 0:re.trip,disabled:!0,label:"Trip Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(Ee=h==null?void 0:h.fare)==null?void 0:Ee.food,disabled:!0,label:"Food Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(se=h==null?void 0:h.fare)==null?void 0:se.gas,disabled:!0,label:"Gas Fare",className:"w-full"})}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Aggregated Fare: $",(ue=h==null?void 0:h.fare)==null?void 0:ue.aggregated]})]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Preferences"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:(ke=h==null?void 0:h.miscellaneous)==null?void 0:ke.music.can_be_controlled}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request music"})]}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:(ce=h==null?void 0:h.miscellaneous)==null?void 0:ce.ac.can_be_controlled}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Passengers can control or request AC"})]}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Talking preference: ",(Pe=h==null?void 0:h.miscellaneous)==null?void 0:Pe.talking.type]})})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Carpooling"}),b.jsxs("div",{className:"flex flex-row space-x-2 items-center",children:[b.jsx(gi,{isDisabled:!0,isSelected:h==null?void 0:h.carpool}),b.jsx("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:"Carpooling"})]}),b.jsxs("h1",{className:"text-red-500 font-RobotoSemiBold text-lg mt-4",children:["Danger Zone",b.jsx("br",{}),b.jsx("span",{className:"text-red-500 font-RobotoRegular text-sm",children:"Actions done here are irreversible and may affect your account."})]}),te?b.jsxs("div",{className:"flex flex-col space-y-2 mt-4",children:[b.jsx("p",{className:"text-red-500 font-RobotoRegular text-sm",children:"Are you sure you want to remove yourself from this trip?"}),b.jsx($r,{color:"danger",className:"w-48",onPress:()=>{fetch(`${gn}/v1/trip/${i}/driver/freeform/remove`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id")||"","X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")||""}}).then(Pt=>Pt.json()).then(Pt=>{Pt.success?c("/find-riders?tab=requested"):Rn({title:"Error",description:Pt.error})}).catch(Pt=>{Rn({title:"Error",description:"An error occurred while removing the trip request."})})},children:"Confirm Removal"})]}):b.jsx($r,{color:"danger",className:"w-48 mt-4",onPress:()=>{Y(!0)},children:"Remove from Trip"})]}),b.jsxs("div",{className:"flex flex-col min-h-[20rem] lg:h-full w-full lg:w-4/12 bg-gray-200 dark:bg-neutral-900 rounded-xl p-4",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Driver Requests"}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:[((xe=h==null?void 0:h.driver_requests)==null?void 0:xe.length)||0," ",((Te=h==null?void 0:h.driver_requests)==null?void 0:Te.length)===1?" request":" requests"]}),b.jsx("div",{className:"flex flex-col space-y-2 h-full w-full overflow-y-auto ",children:(Ie=h==null?void 0:h.driver_requests)==null?void 0:Ie.map(Pt=>{var Et,Wt,Dt;return b.jsxs("div",{onClick:()=>{de(Pt)},className:"flex flex-row items-center space-x-2 bg-gray-100 hover:bg-gray-200 dark:bg-neutral-800 dark:hover:bg-neutral-700 hover:cursor-pointer p-4 rounded-xl",children:[b.jsx("img",{src:(Et=G==null?void 0:G.find(er=>er.user_uuid===Pt.user_uuid))==null?void 0:Et.profile_picture,alt:"Driver Profile",className:"w-12 h-12 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[(Wt=G==null?void 0:G.find(er=>er.user_uuid===Pt.user_uuid))==null?void 0:Wt.first_name," ",(Dt=G==null?void 0:G.find(er=>er.user_uuid===Pt.user_uuid))==null?void 0:Dt.last_name]}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Requested on ",new Date(Pt.requested_at).toLocaleString()]})]})]})})})]})]}),oe&&b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:b.jsxs("div",{className:"flex flex-col bg-white dark:bg-neutral-900 p-4 rounded-xl",children:[b.jsxs("div",{className:"flex flex-row justify-between",children:[b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-2xl",children:"Driver Request"}),b.jsx("button",{className:"p-2 hover:bg-slate-100 dark:hover:bg-neutral-800 rounded-full",onClick:()=>de(null),children:b.jsx(_u,{className:"w-6 h-6 text-black dark:text-white"})})]}),b.jsxs("div",{className:"flex flex-row my-3 items-center space-x-2 bg-gray-100 dark:bg-neutral-800 p-4 rounded-xl",children:[b.jsx("img",{src:(Me=G==null?void 0:G.find(Pt=>Pt.user_uuid===(oe==null?void 0:oe.user_uuid)))==null?void 0:Me.profile_picture,alt:"Driver Profile",className:"w-12 h-12 rounded-full"}),b.jsxs("div",{className:"flex flex-col",children:[b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:[(Xe=G==null?void 0:G.find(Pt=>Pt.user_uuid===(oe==null?void 0:oe.user_uuid)))==null?void 0:Xe.first_name," ",(Ce=G==null?void 0:G.find(Pt=>Pt.user_uuid===(oe==null?void 0:oe.user_uuid)))==null?void 0:Ce.last_name]}),b.jsxs("p",{className:"text-black dark:text-white font-RobotoRegular text-sm",children:["Requested on ",new Date(oe==null?void 0:oe.requested_at).toLocaleString()]})]})]}),b.jsx("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:"Fare Details"}),b.jsxs("div",{className:"flex flex-col space-y-2",children:[b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(He=oe==null?void 0:oe.fare)==null?void 0:He.trip,disabled:!0,label:"Trip Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(et=oe==null?void 0:oe.fare)==null?void 0:et.food,disabled:!0,label:"Food Fare",className:"w-full"})}),b.jsx("div",{className:"flex flex-row space-x-2 items-center",children:b.jsx(gs,{value:(Ke=oe==null?void 0:oe.fare)==null?void 0:Ke.gas,disabled:!0,label:"Gas Fare",className:"w-full"})}),b.jsxs("h1",{className:"text-black dark:text-white font-RobotoSemiBold text-lg mt-4",children:["Total Fare: $",(ot=oe==null?void 0:oe.fare)==null?void 0:ot.aggregated]})]})]})})]})},fl=({})=>{const[e,t]=V.useState(null),[i,c]=V.useState(null);V.useEffect(()=>{fetch(gn+"/v1/config/banner",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")}}).then(Y=>Y.json()).then(Y=>{c(Y.announcement)}),fetch(gn+"/v1/account/loadin",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")},body:JSON.stringify({hydrate_dashboard:!0})}).then(Y=>Y.json()).then(Y=>{var oe,de,me;if(!Y.success)((oe=Y.error)!=null&&oe.includes("no account")||(de=Y.error)!=null&&de.includes("session")||(me=Y.error)!=null&&me.includes("token"))&&(window.location.href="/authv2");else{let be={first_name:Y.first_name,last_name:Y.last_name,email:Y.email,profile_picture:Y.profile_picture,user_uuid:Y.user_uuid,status_cards:Y.status_cards,address:Y==null?void 0:Y.address,bottom_actions:Y.bottom_actions,driver_verified:Y.driver_verified,driver_applications:Y.driver_applications,is_female:Y.is_female,dashboard_stats:Y.dashboard_stats};t(be)}})},[]);const h=window.location.pathname.split("/")[1],_=window.location.pathname.split("/")[2],[w,a]=Ise("sidebarShown",!0),[A,B]=V.useState(!1),[N,F]=V.useState(null);let G=null;const Q={title:"GatorPool",description:"GatorPool",canonical:"https://gatorpool.app",meta:{charset:"utf-8",name:{keywords:"GatorPool, UF, Rideshare, Rides, Pool, Carpool, Uber, Lyft"}}};switch(h){case"profile":G=b.jsx(Q6,{accountData:e,setAccountData:t});break;case"dashboard":G=b.jsx(jse,{accountData:e,setAccountData:t});break;case"driver-apply":G=b.jsx(Fse,{accountData:e,setAccountData:t});break;case"driver-application":G=b.jsx(Vse,{});break;case"create-trip":G=b.jsx(Kse,{accountData:e,setAccountData:t});break;case"driver-flow-trips":G=b.jsx(poe,{accountData:e,setAccountData:t});break;case"rider-flow":if(_&&_==="trips"){G=b.jsx(soe,{accountData:e,setAccountData:t});break}G=b.jsx(PA,{accountData:e,setAccountData:t});break;case"ridertrip":if(_){if(_==="requested"){G=b.jsx(loe,{accountData:e,setAccountData:t});break}else if(_==="created"){G=b.jsx(ooe,{accountData:e,setAccountData:t});break}}break;case"find-ride":if(_&&_==="rider-flow"){G=b.jsx(roe,{accountData:e,setAccountData:t,isFemale:e==null?void 0:e.is_female});break}G=b.jsx(Qse,{accountData:e,setAccountData:t});break;case"my-trips":G=b.jsx(PA,{accountData:e,setAccountData:t});break;case"drivertrip":G=b.jsx(eoe,{accountData:e,setAccountData:t});break;case"find-riders":G=b.jsx(foe,{accountData:e,setAccountData:t});break;default:G=b.jsx(Q6,{accountData:e,setAccountData:t});break}const te={hidden:{x:"-100%",transition:{type:"tween",ease:"linear",duration:.1}},visible:{x:0,transition:{type:"tween",ease:"linear",duration:.1}}};return b.jsxs("div",{className:"relative flex flex-row w-full bg-white dark:bg-[#0c0c0c] ",children:[b.jsx(j_,{...Q}),i&&b.jsxs("div",{className:`fixed flex z-40 items-center justify-center top-0 left-0 h-10 w-full ${i.type==="general"?" bg-green-600 text-white ":" bg-amber-500 text-white "}`,children:[b.jsx("h1",{className:`my-auto font-PoppinsRegular text-sm text-center
                                    text-white`,children:i.announcement}),b.jsx("button",{className:`absolute right-0 mr-2 mb-1
                                    hover:opacity-50
                                    `,onClick:()=>{fetch(gn+"/v1/config/banner/close",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-GatorPool-Device-Id":localStorage.getItem("X-GatorPool-Device-Id"),"X-GatorPool-Username":localStorage.getItem("X-GatorPool-Username")}}).then(Y=>Y.json()).then(Y=>{Y.success&&c(null)})},children:b.jsx(Hj,{sx:{fontSize:24,color:"white"}})})]}),b.jsxs("div",{className:`
                    ${i?" mt-10 ":" h-full "}
                    flex flex-row w-full `,children:[b.jsx(Uf,{children:A&&b.jsx(N8.div,{className:"fixed z-50 top-0 left-0 w-[16.5rem] h-full block lg:hidden",variants:te,initial:"hidden",animate:"visible",exit:"hidden",children:e&&b.jsx(CA,{announcementData:i,setAnnouncementData:c,sidebarShown:w,setSidebarShown:a,sidebarState:A,setSidebarState:B,mobile:!1,accountData:e})})}),!A&&b.jsx("div",{className:"absolute top-4 left-4 lg:hidden",children:b.jsx("button",{onClick:()=>B(!0),children:b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-black dark:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})}),b.jsx("div",{className:`
                        
                    mobile:hidden lg:block w-64
                    absolute fixed z-30 border-r-1 border-neutral-200 top-0 left-0 bg-slate-950`,children:e&&b.jsx(CA,{announcementData:i,setAnnouncementData:c,sidebarShown:w,setSidebarShown:a,sidebarState:A,setSidebarState:B,mobile:!1,accountData:e})}),b.jsx("div",{className:`${w?" lg:ml-[16.5rem] w-full lg:w-[calc(100vw-16.5rem)] ":" lg:ml-20 w-full lg:w-[calc(100vw-5rem)] "}`,children:e&&G})]})]})},moe="/assets/mustafa-HG_XERt5.jpeg",goe="/assets/hector-CYL1mlwR.jpeg",yoe="/assets/deepak-Cicy_Zal.jpeg",xoe="/assets/saeed-qCNXvmbs.jpeg",voe=()=>{const e={title:"About GatorPool",description:"About GatorPool",canonical:"https://gatorpool.app/about",meta:{charset:"utf-8",name:{keywords:"GatorPool, UF, Rideshare, Rides, Pool, Carpool, Uber, Lyft"}}},t=xs(),i=[{name:"Mustafa Masody",image:moe,role:"Leader & Full-Stack",description:`
            Mustafa is a senior at UF studying Computer Science. He has been programming since the age of 11, beginning with Java.
            Over the years, he has built his credentials and passion within the field, and is now creating impactful SaaS products.
            `},{name:"Hector Cruz",image:goe,role:"Lead Developer",description:`
            Hector is a junior at UF studying Computer Science. His idea was what made the project possible, and his contributions
            to the project were immense. Hector will be joining JPMorgan Chase & Co. as a Software Engineer Intern in June 2025.
            `},{name:"Deepak Guggilam",image:yoe,role:"Backend & Client Developer",description:`
            Deepak is a junior at UF studying Computer Science. He has a passion for building AI projects, and
            leveraging technology to create innovative solutions that enhance people's quality of life.
            Deepak is currently in the Undergraduate Research Program.
            `},{name:"Saeed Ansari",image:xoe,role:"Project Manager",description:`
            Saeed is a junior at UF studying Computer Science. His immense experience, not only in the SWE field,
            but in other crucial areas like project management, has been the backbone of GatorPool. His dedication
            to managing the project has been the reason GatorPool is great.
            `}];return b.jsxs("div",{className:"flex flex-col min-h-screen w-full overflow-y-auto bg-white dark:bg-[#0c0c0c]",children:[b.jsx(c2,{}),b.jsx(j_,{...e}),b.jsxs("div",{className:"flex flex-col items-center h-full w-full mt-32 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"About GatorPool"}),b.jsx("p",{className:"text-lg mt-3 text-center max-w-screen-lg text-black dark:text-white font-RobotoRegular",children:"GatorPool began as a semester project for the Intro to SWE course at the University of Florida (go gators!). We were given the task of creating an application that provides assistance to underlying causes of mental health issues in early college students. One of the big hassles for college students is finding rides to and from home during weekends and breaks. One of our founders, Hector, presented the idea to us and we thought it was a great way to help students and make some money on the side. Currently on the UF Reddit and Snapchat, everyday there are numerous posts about finding rides to various cities, which we believe our platform can centralize and make it easier for students to find rides."})]}),b.jsxs("div",{className:"flex flex-col items-center h-full w-full mt-16 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"Meet the founders"}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 mt-16 items-center gap-8",children:i.map((c,h)=>b.jsxs("div",{className:"flex flex-col items-center gap-4 bg-slate-100 dark:bg-neutral-900 rounded-xl p-4",children:[b.jsx("img",{src:c.image,alt:c.name,className:"w-48 h-48 rounded-full"}),b.jsx("h2",{className:"text-2xl text-center text-black dark:text-white font-RobotoBold",children:c.name}),b.jsx("h3",{className:"text-lg text-center text-gray-700 dark:text-gray-300 font-RobotoRegular",children:c.role}),b.jsx("p",{className:"text-lg max-w-96 text-center text-black dark:text-white font-RobotoRegular",children:c.description})]},h))})]}),b.jsxs("div",{className:"flex flex-col items-center h-full w-full mt-16 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"Ready to get a ride?"}),b.jsx($r,{className:"mt-2 w-48",radius:"full",color:"primary",size:"lg",onClick:()=>{t("/auth/signup")},children:"Get a Ride"})]}),b.jsxs("div",{className:"flex flex-col mb-16 items-center h-full w-full mt-16 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"UF Student Code of Conduct"}),b.jsx($r,{className:"mt-2 w-48",radius:"full",color:"primary",size:"lg",onClick:()=>{window.open("https://policy.ufl.edu/wp-content/uploads/2021/12/4-040_2021-12-06.pdf","_blank")},children:"Read More"})]}),b.jsx(u2,{})]})},_oe=()=>{const e={title:"Safety",description:"Safety",canonical:"https://gatorpool.app/safety",meta:{charset:"utf-8",name:{keywords:"GatorPool, UF, Rideshare, Rides, Pool, Carpool, Uber, Lyft"}}},t=xs(),i=[{name:"UF Students Only",description:`
            We ensure that only UF students can use GatorPool. We do this on signup by asking for a valid UF email,
            and sending a prompt to the user's UF email to verify their account.
            `},{name:"Ride Requests",description:`
            Rides from the driver and rider are not confirmed until either or both parties confirm the ride.
            Riders and drivers can also cancel a ride at any time.
            `},{name:"Driver Verification",description:`
            All drivers are verified by the GatorPool team. Federal and state law requires us to keep records
            of driver vehicles and license plates. We will NEVER ask for your ID.
            `}];return b.jsxs("div",{className:"flex flex-col min-h-screen w-full overflow-y-auto bg-white dark:bg-[#0c0c0c]",children:[b.jsx(c2,{}),b.jsx(j_,{...e}),b.jsxs("div",{className:"flex flex-col items-center h-full w-full mt-32 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"Our Mission"}),b.jsx("p",{className:"text-lg mt-3 text-center max-w-screen-lg text-black dark:text-white font-RobotoRegular",children:"GatorPool is committed to providing a safe and secure experience for all users. We have implemented a number of safety features to ensure that your experience with GatorPool is a positive one."})]}),b.jsxs("div",{className:"flex flex-col items-center h-full w-full mt-16 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"Safety Features"}),b.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 mt-8 w-auto items-center gap-8",children:i.map((c,h)=>b.jsxs("div",{className:"h-48 flex flex-col items-center gap-2 bg-slate-100 dark:bg-neutral-900 rounded-xl p-4",children:[b.jsx("h2",{className:"text-2xl text-center text-black dark:text-white font-RobotoBold",children:c.name}),b.jsx("p",{className:"text-lg max-w-96 text-center text-black dark:text-white font-RobotoRegular",children:c.description})]},h))})]}),b.jsxs("div",{className:"flex flex-col items-center h-full w-full mt-16 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"Ready to get a ride?"}),b.jsx($r,{className:"mt-2 w-48",radius:"full",color:"primary",size:"lg",onClick:()=>{t("/auth/signup")},children:"Get a Ride"})]}),b.jsxs("div",{className:"flex flex-col mb-16 items-center h-full w-full mt-16 px-6",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold",children:"UF Student Code of Conduct"}),b.jsx($r,{className:"mt-2 w-48",radius:"full",color:"primary",size:"lg",onClick:()=>{window.open("https://policy.ufl.edu/wp-content/uploads/2021/12/4-040_2021-12-06.pdf","_blank")},children:"Read More"})]}),b.jsx(u2,{})]})},boe=()=>{const e={title:"Terms of Service",description:"Terms of Service",canonical:"https://gatorpool.app/tos",meta:{charset:"utf-8",name:{keywords:"GatorPool, UF, Rideshare, Rides, Pool, Carpool, Uber, Lyft"}}};return b.jsxs("div",{className:"flex flex-col min-h-screen w-full overflow-y-auto bg-white dark:bg-[#0c0c0c]",children:[b.jsx(c2,{}),b.jsx(j_,{...e}),b.jsxs("div",{className:"flex flex-col items-center h-full w-full mt-32 px-6 max-w-4xl mx-auto",children:[b.jsx("h1",{className:"text-4xl text-center text-black dark:text-white font-RobotoBold mb-8",children:"Terms of Service"}),b.jsxs("div",{className:"text-left w-full space-y-6 text-black dark:text-white font-RobotoRegular",children:[b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"1. Acceptance of Terms"}),b.jsx("p",{children:"By using GatorPool, you agree to these Terms of Service. If you do not agree, please do not use our service."})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"2. Eligibility"}),b.jsx("p",{children:"You must be a current university student with a valid .edu email address to use GatorPool. You must be at least 18 years old."})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"3. User Responsibilities"}),b.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[b.jsx("li",{children:"Provide accurate information about yourself and your vehicle (if driving)"}),b.jsx("li",{children:"Treat all users with respect and follow university conduct policies"}),b.jsx("li",{children:"Maintain appropriate insurance coverage if you are a driver"}),b.jsx("li",{children:"Report any safety concerns or incidents immediately"})]})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"4. Safety Guidelines"}),b.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[b.jsx("li",{children:"Always wear seatbelts"}),b.jsx("li",{children:"No alcohol or drug use while using the service"}),b.jsx("li",{children:"Follow all traffic laws and regulations"}),b.jsx("li",{children:"Maintain a safe and clean vehicle if you are a driver"})]})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"5. Payments"}),b.jsx("p",{children:"Payments are handled directly between riders and drivers. GatorPool is not responsible for payment disputes. We recommend using secure payment methods and keeping records of all transactions."})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"6. Liability"}),b.jsx("p",{children:"GatorPool is a platform connecting riders and drivers. We are not responsible for any accidents, injuries, or damages that occur during rides. Users are responsible for their own safety and the safety of others."})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"7. Privacy"}),b.jsx("p",{children:"We collect and use your information as described in our Privacy Policy. We will never share your personal information without your consent, except as required by law."})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"8. Termination"}),b.jsx("p",{children:"We reserve the right to terminate or suspend your account if you violate these terms or engage in unsafe or inappropriate behavior."})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"9. Changes to Terms"}),b.jsx("p",{children:"We may update these terms at any time. Continued use of the service after changes constitutes acceptance of the new terms."})]}),b.jsxs("section",{children:[b.jsx("h2",{className:"text-2xl font-RobotoBold mb-4",children:"10. Contact"}),b.jsx("p",{children:"For questions about these terms, please contact us at support@gatorpool.app"})]})]})]}),b.jsx(u2,{})]})};var O4={},F4={},V4={},kA;function woe(){return kA||(kA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){for(var h=arguments.length,_=new Array(h),w=0;w<h;w++)_[w]=arguments[w];if(typeof window<"u"){var a;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(a=window).gtag.apply(a,_)}},i=t;e.default=i}(V4)),V4}var U4={},RA;function Soe(){return RA||(RA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=w;var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function i(a){return a.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(A,B,N){return B>0&&B+A.length!==N.length&&A.search(t)>-1&&N.charAt(B-2)!==":"&&(N.charAt(B+A.length)!=="-"||N.charAt(B-1)==="-")&&N.charAt(B-1).search(/[^\s-]/)<0?A.toLowerCase():A.substr(1).search(/[A-Z]|\../)>-1?A:A.charAt(0).toUpperCase()+A.substr(1)})}function c(a){return typeof a=="string"&&a.indexOf("@")!==-1}var h="REDACTED (Potential Email Address)";function _(a){return c(a)?(console.warn("This arg looks like an email address, redacting."),h):a}function w(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,N=a||"";return A&&(N=i(a)),B&&(N=_(N)),N}}(U4)),U4}var IA;function Toe(){return IA||(IA=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.GA4=void 0;var t=w(woe()),i=w(Soe()),c=["eventCategory","eventAction","eventLabel","eventValue","hitType"],h=["title","location"],_=["page","hitType"];function w(Pe){return Pe&&Pe.__esModule?Pe:{default:Pe}}function a(Pe,xe){if(Pe==null)return{};var Te=A(Pe,xe),Ie,Me;if(Object.getOwnPropertySymbols){var Xe=Object.getOwnPropertySymbols(Pe);for(Me=0;Me<Xe.length;Me++)Ie=Xe[Me],!(xe.indexOf(Ie)>=0)&&Object.prototype.propertyIsEnumerable.call(Pe,Ie)&&(Te[Ie]=Pe[Ie])}return Te}function A(Pe,xe){if(Pe==null)return{};var Te={},Ie=Object.keys(Pe),Me,Xe;for(Xe=0;Xe<Ie.length;Xe++)Me=Ie[Xe],!(xe.indexOf(Me)>=0)&&(Te[Me]=Pe[Me]);return Te}function B(Pe){"@babel/helpers - typeof";return B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xe){return typeof xe}:function(xe){return xe&&typeof Symbol=="function"&&xe.constructor===Symbol&&xe!==Symbol.prototype?"symbol":typeof xe},B(Pe)}function N(Pe){return Q(Pe)||G(Pe)||me(Pe)||F()}function F(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G(Pe){if(typeof Symbol<"u"&&Pe[Symbol.iterator]!=null||Pe["@@iterator"]!=null)return Array.from(Pe)}function Q(Pe){if(Array.isArray(Pe))return be(Pe)}function te(Pe,xe){var Te=Object.keys(Pe);if(Object.getOwnPropertySymbols){var Ie=Object.getOwnPropertySymbols(Pe);xe&&(Ie=Ie.filter(function(Me){return Object.getOwnPropertyDescriptor(Pe,Me).enumerable})),Te.push.apply(Te,Ie)}return Te}function Y(Pe){for(var xe=1;xe<arguments.length;xe++){var Te=arguments[xe]!=null?arguments[xe]:{};xe%2?te(Object(Te),!0).forEach(function(Ie){Ee(Pe,Ie,Te[Ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pe,Object.getOwnPropertyDescriptors(Te)):te(Object(Te)).forEach(function(Ie){Object.defineProperty(Pe,Ie,Object.getOwnPropertyDescriptor(Te,Ie))})}return Pe}function oe(Pe,xe){return Se(Pe)||pe(Pe,xe)||me(Pe,xe)||de()}function de(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function me(Pe,xe){if(Pe){if(typeof Pe=="string")return be(Pe,xe);var Te=Object.prototype.toString.call(Pe).slice(8,-1);if(Te==="Object"&&Pe.constructor&&(Te=Pe.constructor.name),Te==="Map"||Te==="Set")return Array.from(Pe);if(Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te))return be(Pe,xe)}}function be(Pe,xe){(xe==null||xe>Pe.length)&&(xe=Pe.length);for(var Te=0,Ie=new Array(xe);Te<xe;Te++)Ie[Te]=Pe[Te];return Ie}function pe(Pe,xe){var Te=Pe==null?null:typeof Symbol<"u"&&Pe[Symbol.iterator]||Pe["@@iterator"];if(Te!=null){var Ie,Me,Xe,Ce,He=[],et=!0,Ke=!1;try{if(Xe=(Te=Te.call(Pe)).next,xe!==0)for(;!(et=(Ie=Xe.call(Te)).done)&&(He.push(Ie.value),He.length!==xe);et=!0);}catch(ot){Ke=!0,Me=ot}finally{try{if(!et&&Te.return!=null&&(Ce=Te.return(),Object(Ce)!==Ce))return}finally{if(Ke)throw Me}}return He}}function Se(Pe){if(Array.isArray(Pe))return Pe}function $e(Pe,xe){if(!(Pe instanceof xe))throw new TypeError("Cannot call a class as a function")}function Le(Pe,xe){for(var Te=0;Te<xe.length;Te++){var Ie=xe[Te];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(Pe,se(Ie.key),Ie)}}function re(Pe,xe,Te){return xe&&Le(Pe.prototype,xe),Object.defineProperty(Pe,"prototype",{writable:!1}),Pe}function Ee(Pe,xe,Te){return xe=se(xe),xe in Pe?Object.defineProperty(Pe,xe,{value:Te,enumerable:!0,configurable:!0,writable:!0}):Pe[xe]=Te,Pe}function se(Pe){var xe=ue(Pe,"string");return B(xe)==="symbol"?xe:String(xe)}function ue(Pe,xe){if(B(Pe)!=="object"||Pe===null)return Pe;var Te=Pe[Symbol.toPrimitive];if(Te!==void 0){var Ie=Te.call(Pe,xe);if(B(Ie)!=="object")return Ie;throw new TypeError("@@toPrimitive must return a primitive value.")}return(xe==="string"?String:Number)(Pe)}var ke=function(){function Pe(){var xe=this;$e(this,Pe),Ee(this,"reset",function(){xe.isInitialized=!1,xe._testMode=!1,xe._currentMeasurementId,xe._hasLoadedGA=!1,xe._isQueuing=!1,xe._queueGtag=[]}),Ee(this,"_gtag",function(){for(var Te=arguments.length,Ie=new Array(Te),Me=0;Me<Te;Me++)Ie[Me]=arguments[Me];xe._testMode||xe._isQueuing?xe._queueGtag.push(Ie):t.default.apply(void 0,Ie)}),Ee(this,"_loadGA",function(Te,Ie){var Me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!xe._hasLoadedGA){var Xe=document.createElement("script");Xe.async=!0,Xe.src="".concat(Me,"?id=").concat(Te),Ie&&Xe.setAttribute("nonce",Ie),document.body.appendChild(Xe),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},xe._hasLoadedGA=!0}}),Ee(this,"_toGtagOptions",function(Te){if(Te){var Ie={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},Me=Object.entries(Te).reduce(function(Xe,Ce){var He=oe(Ce,2),et=He[0],Ke=He[1];return Ie[et]?Xe[Ie[et]]=Ke:Xe[et]=Ke,Xe},{});return Me}}),Ee(this,"initialize",function(Te){var Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Te)throw new Error("Require GA_MEASUREMENT_ID");var Me=typeof Te=="string"?[{trackingId:Te}]:Te;xe._currentMeasurementId=Me[0].trackingId;var Xe=Ie.gaOptions,Ce=Ie.gtagOptions,He=Ie.nonce,et=Ie.testMode,Ke=et===void 0?!1:et,ot=Ie.gtagUrl;if(xe._testMode=Ke,Ke||xe._loadGA(xe._currentMeasurementId,He,ot),xe.isInitialized||(xe._gtag("js",new Date),Me.forEach(function(Wt){var Dt=Y(Y(Y({},xe._toGtagOptions(Y(Y({},Xe),Wt.gaOptions))),Ce),Wt.gtagOptions);Object.keys(Dt).length?xe._gtag("config",Wt.trackingId,Dt):xe._gtag("config",Wt.trackingId)})),xe.isInitialized=!0,!Ke){var Pt=N(xe._queueGtag);for(xe._queueGtag=[],xe._isQueuing=!1;Pt.length;){var Et=Pt.shift();xe._gtag.apply(xe,N(Et)),Et[0]==="get"&&(xe._isQueuing=!0)}}}),Ee(this,"set",function(Te){if(!Te){console.warn("`fieldsObject` is required in .set()");return}if(B(Te)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(Te).length===0&&console.warn("empty `fieldsObject` given to .set()"),xe._gaCommand("set",Te)}),Ee(this,"_gaCommandSendEvent",function(Te,Ie,Me,Xe,Ce){xe._gtag("event",Ie,Y(Y({event_category:Te,event_label:Me,value:Xe},Ce&&{non_interaction:Ce.nonInteraction}),xe._toGtagOptions(Ce)))}),Ee(this,"_gaCommandSendEventParameters",function(){for(var Te=arguments.length,Ie=new Array(Te),Me=0;Me<Te;Me++)Ie[Me]=arguments[Me];if(typeof Ie[0]=="string")xe._gaCommandSendEvent.apply(xe,N(Ie.slice(1)));else{var Xe=Ie[0],Ce=Xe.eventCategory,He=Xe.eventAction,et=Xe.eventLabel,Ke=Xe.eventValue;Xe.hitType;var ot=a(Xe,c);xe._gaCommandSendEvent(Ce,He,et,Ke,ot)}}),Ee(this,"_gaCommandSendTiming",function(Te,Ie,Me,Xe){xe._gtag("event","timing_complete",{name:Ie,value:Me,event_category:Te,event_label:Xe})}),Ee(this,"_gaCommandSendPageview",function(Te,Ie){if(Ie&&Object.keys(Ie).length){var Me=xe._toGtagOptions(Ie),Xe=Me.title,Ce=Me.location,He=a(Me,h);xe._gtag("event","page_view",Y(Y(Y(Y({},Te&&{page_path:Te}),Xe&&{page_title:Xe}),Ce&&{page_location:Ce}),He))}else Te?xe._gtag("event","page_view",{page_path:Te}):xe._gtag("event","page_view")}),Ee(this,"_gaCommandSendPageviewParameters",function(){for(var Te=arguments.length,Ie=new Array(Te),Me=0;Me<Te;Me++)Ie[Me]=arguments[Me];if(typeof Ie[0]=="string")xe._gaCommandSendPageview.apply(xe,N(Ie.slice(1)));else{var Xe=Ie[0],Ce=Xe.page;Xe.hitType;var He=a(Xe,_);xe._gaCommandSendPageview(Ce,He)}}),Ee(this,"_gaCommandSend",function(){for(var Te=arguments.length,Ie=new Array(Te),Me=0;Me<Te;Me++)Ie[Me]=arguments[Me];var Xe=typeof Ie[0]=="string"?Ie[0]:Ie[0].hitType;switch(Xe){case"event":xe._gaCommandSendEventParameters.apply(xe,Ie);break;case"pageview":xe._gaCommandSendPageviewParameters.apply(xe,Ie);break;case"timing":xe._gaCommandSendTiming.apply(xe,N(Ie.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(Xe));break;default:console.warn("Send command doesn't exist: ".concat(Xe))}}),Ee(this,"_gaCommandSet",function(){for(var Te=arguments.length,Ie=new Array(Te),Me=0;Me<Te;Me++)Ie[Me]=arguments[Me];typeof Ie[0]=="string"&&(Ie[0]=Ee({},Ie[0],Ie[1])),xe._gtag("set",xe._toGtagOptions(Ie[0]))}),Ee(this,"_gaCommand",function(Te){for(var Ie=arguments.length,Me=new Array(Ie>1?Ie-1:0),Xe=1;Xe<Ie;Xe++)Me[Xe-1]=arguments[Xe];switch(Te){case"send":xe._gaCommandSend.apply(xe,Me);break;case"set":xe._gaCommandSet.apply(xe,Me);break;default:console.warn("Command doesn't exist: ".concat(Te))}}),Ee(this,"ga",function(){for(var Te=arguments.length,Ie=new Array(Te),Me=0;Me<Te;Me++)Ie[Me]=arguments[Me];if(typeof Ie[0]=="string")xe._gaCommand.apply(xe,Ie);else{var Xe=Ie[0];xe._gtag("get",xe._currentMeasurementId,"client_id",function(Ce){xe._isQueuing=!1;var He=xe._queueGtag;for(Xe({get:function(ot){return ot==="clientId"?Ce:ot==="trackingId"?xe._currentMeasurementId:ot==="apiVersion"?"1":void 0}});He.length;){var et=He.shift();xe._gtag.apply(xe,N(et))}}),xe._isQueuing=!0}return xe.ga}),Ee(this,"event",function(Te,Ie){if(typeof Te=="string")xe._gtag("event",Te,xe._toGtagOptions(Ie));else{var Me=Te.action,Xe=Te.category,Ce=Te.label,He=Te.value,et=Te.nonInteraction,Ke=Te.transport;if(!Xe||!Me){console.warn("args.category AND args.action are required in event()");return}var ot={hitType:"event",eventCategory:(0,i.default)(Xe),eventAction:(0,i.default)(Me)};Ce&&(ot.eventLabel=(0,i.default)(Ce)),typeof He<"u"&&(typeof He!="number"?console.warn("Expected `args.value` arg to be a Number."):ot.eventValue=He),typeof et<"u"&&(typeof et!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):ot.nonInteraction=et),typeof Ke<"u"&&(typeof Ke!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(Ke)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),ot.transport=Ke)),xe._gaCommand("send",ot)}}),Ee(this,"send",function(Te){xe._gaCommand("send",Te)}),this.reset()}return re(Pe,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),Pe}();e.GA4=ke;var ce=new ke;e.default=ce}(F4)),F4}var zA;function Eoe(){return zA||(zA=1,function(e){function t(a){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},t(a)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ReactGAImplementation=void 0;var i=h(Toe());function c(a){if(typeof WeakMap!="function")return null;var A=new WeakMap,B=new WeakMap;return(c=function(F){return F?B:A})(a)}function h(a,A){if(a&&a.__esModule)return a;if(a===null||t(a)!=="object"&&typeof a!="function")return{default:a};var B=c(A);if(B&&B.has(a))return B.get(a);var N={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var G in a)if(G!=="default"&&Object.prototype.hasOwnProperty.call(a,G)){var Q=F?Object.getOwnPropertyDescriptor(a,G):null;Q&&(Q.get||Q.set)?Object.defineProperty(N,G,Q):N[G]=a[G]}return N.default=a,B&&B.set(a,N),N}var _=i.GA4;e.ReactGAImplementation=_;var w=i.default;e.default=w}(O4)),O4}var Coe=Eoe();const Zj=cx(Coe),Doe="G-SXXS3M3YWX",Poe=()=>{Zj.initialize(Doe)},Moe=()=>{Zj.send({hitType:"pageview",page:window.location.pathname})};function Aoe(){const e=Sh();return V.useEffect(()=>{Poe()},[]),V.useEffect(()=>{Moe()},[e]),V.useEffect(()=>{if(localStorage.getItem("X-GatorPool-Device-Id")!==null){if(localStorage.getItem("X-GatorPool-Device-Id")===""||localStorage.getItem("X-GatorPool-Device-Id")==="null"){const t=tA();localStorage.setItem("X-GatorPool-Device-Id",t)}else localStorage.getItem("X-GatorPool-Device-Id");localStorage.getItem("X-GatorPool-Device-Id")}else if(localStorage.getItem("X-GatorPool-Device-Id")===null||localStorage.getItem("X-GatorPool-Device-Id")===void 0){const t=tA();localStorage.setItem("X-GatorPool-Device-Id",t)}},[]),b.jsxs(PZ,{children:[b.jsx(rre,{}),b.jsx("div",{className:"light:light dark:dark",children:b.jsxs(LF,{children:[b.jsx(Bi,{path:"/",element:b.jsx(bre,{})}),b.jsx(Bi,{path:"/about",element:b.jsx(voe,{})}),b.jsx(Bi,{path:"/safety",element:b.jsx(_oe,{})}),b.jsx(Bi,{path:"/tos",element:b.jsx(boe,{})}),b.jsx(Bi,{path:"/auth/signup",element:b.jsx(Xre,{})}),b.jsx(Bi,{path:"/auth/signin",element:b.jsx(Yre,{})}),b.jsx(Bi,{path:"/auth/finish",element:b.jsx(one,{})}),b.jsx(Bi,{path:"/verify",element:b.jsx(sne,{})}),b.jsx(Bi,{path:"/profile",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Bi,{path:"/dashboard",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Bi,{path:"/driver-apply",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Bi,{path:"/find-ride",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Bi,{path:"/find-ride/rider-flow",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Bi,{path:"/driver-application",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Bi,{path:"/create-trip",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Bi,{path:"/my-trips",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Bi,{path:"/drivertrip/:trip_uuid",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Bi,{path:"/ridertrip/requested/:trip_uuid",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Bi,{path:"/ridertrip/created/:trip_uuid",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Bi,{path:"/rider-flow/trips/",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Bi,{path:"/rider-flow/tripview/:trip_uuid",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Bi,{path:"/find-riders",element:b.jsx(hl,{children:b.jsx(fl,{})})}),b.jsx(Bi,{path:"/driver-flow-trips/requested/:trip_uuid",element:b.jsx(hl,{children:b.jsx(fl,{})})})]})})]})}G9.createRoot(document.getElementById("root")).render(b.jsxs(VF,{children:[" ",b.jsx(Aoe,{})]}));export{CK as $,zoe as A,qo as B,$oe as C,vP as D,u0 as E,CW as F,O5 as G,mq as H,rT as I,L8 as J,xZ as K,z5 as L,o_ as M,IS as N,VW as O,yq as P,mW as Q,Hi as R,nT as S,vW as T,Q5 as U,wZ as V,ms as W,DK as X,EZ as Y,TZ as Z,bM as _,zf as a,pW as a$,f8 as a0,u8 as a1,nq as a2,$5 as a3,iI as a4,xw as a5,PW as a6,DW as a7,Jw as a8,$H as a9,Go as aA,Em as aB,jn as aC,oW as aD,hI as aE,A_ as aF,fI as aG,MK as aH,AK as aI,oq as aJ,kI as aK,dq as aL,AP as aM,_w as aN,vh as aO,l8 as aP,I_ as aQ,UI as aR,iT as aS,VI as aT,FI as aU,sT as aV,HI as aW,GI as aX,R_ as aY,fW as aZ,d8 as a_,J5 as aa,f_ as ab,xH as ac,a4 as ad,BI as ae,_H as af,$I as ag,mI as ah,Kw as ai,Loe as aj,N8 as ak,kP as al,S1 as am,Uf as an,Tu as ao,cI as ap,jl as aq,F1 as ar,RP as as,Ioe as at,nI as au,SH as av,yw as aw,HH as ax,OH as ay,Ww as az,pP as b,jI as b0,OI as b1,W3 as b2,zP as b3,QW as b4,gl as b5,mH as b6,Xv as b7,JW as b8,L5 as b9,DI as c,DZ as d,sZ as e,Ci as f,m8 as g,B8 as h,Tm as i,b as j,sq as k,yZ as l,vS as m,Bl as n,xW as o,ex as p,_W as q,V as r,If as s,Bf as t,aI as u,LI as v,vo as w,tq as x,qw as y,d_ as z};
